---
description: Utilice NTFS transaccional para mantener la integridad de los datos.
ms.assetid: 886d6075-57e8-47db-aec5-77660d0a53f9
title: Cuándo usar NTFS transaccional
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 28c0a134a8cb5824337022fedf14fe3db3c6f76c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105667690"
---
# <a name="when-to-use-transactional-ntfs"></a><span data-ttu-id="4e3d0-103">Cuándo usar NTFS transaccional</span><span class="sxs-lookup"><span data-stu-id="4e3d0-103">When to Use Transactional NTFS</span></span>

<span data-ttu-id="4e3d0-104">Una aplicación puede usar NTFS transaccional (TxF) para conservar la integridad de los datos en el disco durante las condiciones de error inesperadas.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-104">An application can use Transactional NTFS (TxF) to preserve the integrity of data on disk during unexpected error conditions.</span></span> <span data-ttu-id="4e3d0-105">En general, una aplicación debería considerar el uso de TxF si la aplicación está vaciando archivos y utiliza otras técnicas para mantener la integridad de los datos.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-105">In general, an application should consider using TxF if the application is flushing files and using other techniques to maintain data integrity.</span></span> <span data-ttu-id="4e3d0-106">TxF puede mejorar y simplificar el código de control de errores de la aplicación a la vez que mejora la confiabilidad y la recuperación de errores.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-106">TxF can perform better and simplify the application's error handling code while improving error recovery and reliability.</span></span> <span data-ttu-id="4e3d0-107">En las siguientes secciones de este tema se proporcionan ejemplos de escenarios para usar TxF.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-107">The following sections in this topic provide examples of scenarios for you to use TxF.</span></span>

## <a name="updating-a-file"></a><span data-ttu-id="4e3d0-108">Actualización de un archivo</span><span class="sxs-lookup"><span data-stu-id="4e3d0-108">Updating a File</span></span>

<span data-ttu-id="4e3d0-109">La actualización de un archivo es una operación común y normalmente simple.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-109">The updating of a file is a common and typically simple operation.</span></span> <span data-ttu-id="4e3d0-110">Sin embargo, si se produce un error en el sistema o la aplicación mientras una aplicación actualiza la información de un disco, el resultado puede ser catastrófico, ya que los datos de usuario pueden estar dañados mediante una operación de actualización de archivos que se ha completado parcialmente.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-110">However, if the system or application fails while an application is updating information on a disk, the result can be catastrophic, because the user data can be corrupted by a file update operation that is partially completed.</span></span> <span data-ttu-id="4e3d0-111">Las aplicaciones sólidas a menudo realizan secuencias complejas de copias de archivos y de cambio de nombre para garantizar que los datos no están dañados si se produce un error en un sistema.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-111">Robust applications often perform complex sequences of file copies and file renames to ensure that data is not corrupted if a system fails.</span></span>

<span data-ttu-id="4e3d0-112">TxF facilita a una aplicación la protección de las operaciones de actualización de archivos del error del sistema o de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-112">TxF makes it simple for an application to protect file update operations from system or application failure.</span></span> <span data-ttu-id="4e3d0-113">Para actualizar un archivo de forma segura, la aplicación abre el archivo en modo de transacción, realiza las actualizaciones necesarias y, a continuación, confirma la transacción.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-113">To update a file safely, the application opens the file in transacted mode, makes the necessary updates, and then commits the transaction.</span></span> <span data-ttu-id="4e3d0-114">Si se produce un error en el sistema o la aplicación durante la actualización del archivo, TxF restaura automáticamente el archivo al estado que tenía antes de que comenzara la actualización del archivo, lo que evita daños en los archivos.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-114">If the system or application fails during the file update, then TxF automatically restores the file to the state that it had before the file update began, which avoids file corruption.</span></span>

## <a name="multi-file-updates"></a><span data-ttu-id="4e3d0-115">Actualizaciones de varios archivos</span><span class="sxs-lookup"><span data-stu-id="4e3d0-115">Multi-File Updates</span></span>

<span data-ttu-id="4e3d0-116">TxF es aún más importante cuando una única operación lógica afecta a varios archivos.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-116">TxF is even more important when a single logical operation affects multiple files.</span></span> <span data-ttu-id="4e3d0-117">Por ejemplo, si desea utilizar una herramienta para cambiar el nombre de una de las páginas HTML o ASP de un sitio web, una herramienta bien diseñada también corregiría todos los vínculos para usar el nuevo nombre de archivo.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-117">For example, if you want to use a tool to rename one of the HTML or ASP pages on a website, a well-designed tool would also fix all links to use the new file name.</span></span> <span data-ttu-id="4e3d0-118">Sin embargo, un error durante esta operación deja el sitio web en un estado incoherente, con algunos de los vínculos que siguen haciendo referencia al nombre de archivo antiguo.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-118">However, a failure during this operation leaves the website in an inconsistent state, with some of the links still referring to the old file name.</span></span> <span data-ttu-id="4e3d0-119">Al hacer que la operación de cambio de nombre del archivo y la operación de corrección de vínculos se realicen en una sola transacción, TxF garantiza que la corrección del vínculo y el cambio de nombre del archivo se realiza correctamente o no como una sola operación.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-119">By making the file rename operation and the link fixing operation a single transaction, TxF ensures that the file rename and link fix succeed or fail as a single operation.</span></span>

## <a name="consistent-concurrent-updates"></a><span data-ttu-id="4e3d0-120">Actualizaciones simultáneas coherentes</span><span class="sxs-lookup"><span data-stu-id="4e3d0-120">Consistent Concurrent Updates</span></span>

<span data-ttu-id="4e3d0-121">TxF aísla las transacciones simultáneas.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-121">TxF isolates concurrent transactions.</span></span> <span data-ttu-id="4e3d0-122">Si una aplicación abre un archivo para una lectura transaccional mientras otra aplicación tiene el mismo archivo abierto para una actualización transaccional, el TxF aísla los efectos de las dos transacciones entre sí.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-122">If an application opens a file for a transactional read while another application has the same file open for a transactional update, TxF isolates the effects of the two transactions from one another.</span></span> <span data-ttu-id="4e3d0-123">En otras palabras, el lector transaccional siempre ve una única versión coherente del archivo, incluso mientras el archivo está en proceso de ser actualizado por otra transacción.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-123">In other words, the transactional reader always views a single, consistent version of the file, even while that file is in the process of being updated by another transaction.</span></span>

<span data-ttu-id="4e3d0-124">Una aplicación puede usar esta funcionalidad para que los clientes puedan ver los archivos mientras otros clientes realizan actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-124">An application can use this functionality to allow customers to view files while other customers make updates.</span></span> <span data-ttu-id="4e3d0-125">Por ejemplo, un servidor web transaccional puede proporcionar una vista única y coherente de los archivos mientras otra herramienta los actualiza simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-125">For example, a transactional web server can provide a single, consistent view of files while another tool concurrently updates those files.</span></span>

> [!Note]  
> <span data-ttu-id="4e3d0-126">TxF no admite actualizaciones simultáneas por varios escritores en transacciones diferentes.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-126">TxF does not support concurrent updates by multiple writers in different transactions.</span></span> <span data-ttu-id="4e3d0-127">TxF solo admite un único escritor con varios lectores simultáneos y coherentes.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-127">TxF supports only a single writer with multiple concurrent and consistent readers.</span></span>

 

## <a name="coordinating-with-other-transacted-resource-managers"></a><span data-ttu-id="4e3d0-128">Coordinación con otros administradores de recursos con transacciones</span><span class="sxs-lookup"><span data-stu-id="4e3d0-128">Coordinating With Other Transacted Resource Managers</span></span>

<span data-ttu-id="4e3d0-129">Las transacciones que se usan con sistemas de archivos de transacciones también se pueden usar con el registro de transacciones.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-129">Transactions used with transacted file systems may also be used with the transacted registry.</span></span> <span data-ttu-id="4e3d0-130">Las actualizaciones del archivo y del registro se coordinan con una sola transacción.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-130">Updates to the file and the registry are coordinated with a single transaction.</span></span>

<span data-ttu-id="4e3d0-131">Mediante el uso de transacciones de [Coordinador de transacciones distribuidas](/previous-versions/windows/desktop/mscs/distributed-transaction-coordinator) (DTC) o System. Transactions, las actualizaciones realizadas en SQL, MSMQ y otros recursos transaccionales se pueden coordinar con las actualizaciones de archivos de transacciones.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-131">By using [Distributed Transaction Coordinator](/previous-versions/windows/desktop/mscs/distributed-transaction-coordinator) (DTC) transactions or System.Transactions, updates made to SQL, MSMQ, and other transactional resources can be coordinated with transacted file updates.</span></span> <span data-ttu-id="4e3d0-132">Para obtener más información, vea [IKernelTransaction](/previous-versions/windows/desktop/aa344210(v=vs.85))de DTC.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-132">For more information, see DTC's [IKernelTransaction](/previous-versions/windows/desktop/aa344210(v=vs.85)).</span></span>

## <a name="unsupported-scenarios"></a><span data-ttu-id="4e3d0-133">Escenarios no admitidos</span><span class="sxs-lookup"><span data-stu-id="4e3d0-133">Unsupported Scenarios</span></span>

<span data-ttu-id="4e3d0-134">TxF no admite los siguientes escenarios de transacción:</span><span class="sxs-lookup"><span data-stu-id="4e3d0-134">TxF does not support the following transaction scenarios:</span></span>

-   <span data-ttu-id="4e3d0-135">Transacciones en volúmenes de red, por ejemplo, en recursos compartidos de archivos.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-135">Transactions on network volumes, for example on file shares.</span></span> <span data-ttu-id="4e3d0-136">TxF no es compatible con los protocolos CIFS/SMB.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-136">TxF is not supported by the CIFS/SMB protocols.</span></span>
-   <span data-ttu-id="4e3d0-137">Transacciones en cualquier sistema de archivos distinto de NTFS.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-137">Transactions on any file system other than NTFS.</span></span>
-   <span data-ttu-id="4e3d0-138">Operaciones de transacción en los archivos almacenados en caché del lado cliente.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-138">Transacted operations against files cached by client-side caching.</span></span>
-   <span data-ttu-id="4e3d0-139">Acceso a archivos con identificadores de objeto.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-139">File access using object IDs.</span></span>
-   <span data-ttu-id="4e3d0-140">Cualquier escenario de escritor compartido.</span><span class="sxs-lookup"><span data-stu-id="4e3d0-140">Any shared writer scenario.</span></span>
-   <span data-ttu-id="4e3d0-141">Cualquier situación en la que un archivo se abre durante un período de tiempo prolongado (días o semanas).</span><span class="sxs-lookup"><span data-stu-id="4e3d0-141">Any situation where a file is opened for an extended period of time (days or weeks).</span></span>

 

 
