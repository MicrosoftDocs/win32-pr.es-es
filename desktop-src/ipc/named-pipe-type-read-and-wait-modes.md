---
description: El servidor de canalización especifica el modo de tipo de canalización, el modo de lectura y el modo de espera en el parámetro dwPipeMode de la función CreateNamedPipe. Los clientes de canalización pueden especificar estos modos de canalización para los identificadores de canalización mediante la función CreateFile.
ms.assetid: 07cf9d06-6265-47f4-a9f1-c19c06cc5f9f
title: Tipos de canalización con nombre, lectura y modos de espera
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b116e5ca9357a65a6d63549b96065843b046d479
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103907626"
---
# <a name="named-pipe-type-read-and-wait-modes"></a><span data-ttu-id="43af4-104">Tipos de canalización con nombre, lectura y modos de espera</span><span class="sxs-lookup"><span data-stu-id="43af4-104">Named Pipe Type, Read, and Wait Modes</span></span>

<span data-ttu-id="43af4-105">El servidor de canalización especifica el modo de tipo de canalización, el modo de lectura y el modo de espera en el parámetro *dwPipeMode* de la función [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) .</span><span class="sxs-lookup"><span data-stu-id="43af4-105">The pipe server specifies the pipe type mode, read mode, and wait mode in the *dwPipeMode* parameter of the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) function.</span></span> <span data-ttu-id="43af4-106">Los clientes de canalización pueden especificar estos modos de canalización para los identificadores de canalización mediante la función [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) .</span><span class="sxs-lookup"><span data-stu-id="43af4-106">Pipe clients can specify these pipe modes for their pipe handles using the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function.</span></span>

## <a name="type-mode"></a><span data-ttu-id="43af4-107">Modo de tipo</span><span class="sxs-lookup"><span data-stu-id="43af4-107">Type Mode</span></span>

<span data-ttu-id="43af4-108">El modo de tipo de una canalización determina el modo en que los datos se escriben en una canalización con nombre.</span><span class="sxs-lookup"><span data-stu-id="43af4-108">The type mode of a pipe determines how data is written to a named pipe.</span></span> <span data-ttu-id="43af4-109">Los datos se pueden transmitir a través de una canalización con nombre como una secuencia de bytes o como una secuencia de mensajes.</span><span class="sxs-lookup"><span data-stu-id="43af4-109">Data can be transmitted through a named pipe as either a stream of bytes or as a stream of messages.</span></span> <span data-ttu-id="43af4-110">El servidor de canalización especifica el tipo de canalización cuando se llama a [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) para crear una instancia de una canalización con nombre.</span><span class="sxs-lookup"><span data-stu-id="43af4-110">The pipe server specifies the pipe type when calling [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) to create an instance of a named pipe.</span></span> <span data-ttu-id="43af4-111">Los modos de tipo deben ser los mismos para todas las instancias de una canalización.</span><span class="sxs-lookup"><span data-stu-id="43af4-111">The type modes must be the same for all instances of a pipe.</span></span>

<span data-ttu-id="43af4-112">Para crear una canalización de tipo byte, especifique \_ el tipo de canalización \_ byte o use el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="43af4-112">To create a byte-type pipe, specify PIPE\_TYPE\_BYTE or use the default value.</span></span> <span data-ttu-id="43af4-113">Los datos se escriben en la canalización como un flujo de bytes y el sistema no distingue entre los bytes escritos en diferentes operaciones de escritura.</span><span class="sxs-lookup"><span data-stu-id="43af4-113">The data is written to the pipe as a stream of bytes, and the system does not differentiate between the bytes written in different write operations.</span></span>

<span data-ttu-id="43af4-114">Para crear una canalización de tipo de mensaje, especifique el mensaje de tipo de CANALización \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="43af4-114">To create a message-type pipe, specify PIPE\_TYPE\_MESSAGE.</span></span> <span data-ttu-id="43af4-115">El sistema trata los bytes escritos en cada operación de escritura en la canalización como una unidad de mensaje.</span><span class="sxs-lookup"><span data-stu-id="43af4-115">The system treats the bytes written in each write operation to the pipe as a message unit.</span></span> <span data-ttu-id="43af4-116">El sistema siempre realiza operaciones de escritura en canalizaciones de tipo de mensaje como si estuviera habilitado el modo de escritura a través.</span><span class="sxs-lookup"><span data-stu-id="43af4-116">The system always performs write operations on message-type pipes as if write-through mode were enabled.</span></span>

## <a name="read-mode"></a><span data-ttu-id="43af4-117">Modo de lectura</span><span class="sxs-lookup"><span data-stu-id="43af4-117">Read Mode</span></span>

<span data-ttu-id="43af4-118">El modo de lectura de una canalización determina cómo se leen los datos de una canalización con nombre.</span><span class="sxs-lookup"><span data-stu-id="43af4-118">The read mode of a pipe determines how data is read from a named pipe.</span></span> <span data-ttu-id="43af4-119">El servidor de canalización especifica el modo de lectura inicial para un identificador de canalización al llamar a [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea).</span><span class="sxs-lookup"><span data-stu-id="43af4-119">The pipe server specifies the initial read mode for a pipe handle when calling [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea).</span></span> <span data-ttu-id="43af4-120">Los datos se pueden leer en modo de lectura de bytes o en modo de lectura de mensaje.</span><span class="sxs-lookup"><span data-stu-id="43af4-120">Data can be read in byte-read mode or message-read mode.</span></span> <span data-ttu-id="43af4-121">Un identificador de una canalización de tipo byte solo puede estar en modo de lectura de bytes.</span><span class="sxs-lookup"><span data-stu-id="43af4-121">A handle to a byte-type pipe can be in byte-read mode only.</span></span> <span data-ttu-id="43af4-122">Un identificador de una canalización de tipo de mensaje puede estar en modo de lectura de bytes o de lectura de mensaje.</span><span class="sxs-lookup"><span data-stu-id="43af4-122">A handle to a message-type pipe can be in either byte-read or message-read mode.</span></span> <span data-ttu-id="43af4-123">En el caso de una canalización de tipo de mensaje, el modo de lectura puede ser diferente para los identificadores de servidor y de cliente en la misma instancia de canalización.</span><span class="sxs-lookup"><span data-stu-id="43af4-123">For a message-type pipe, the read mode can be different for server and client handles to the same pipe instance.</span></span>

<span data-ttu-id="43af4-124">Para crear el identificador de canalización en modo de lectura de bytes, especifique PIPE \_ READMODE \_ byte o use el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="43af4-124">To create the pipe handle in byte-read mode, specify PIPE\_READMODE\_BYTE or use the default value.</span></span> <span data-ttu-id="43af4-125">Los datos se leen de la canalización como un flujo de bytes.</span><span class="sxs-lookup"><span data-stu-id="43af4-125">Data is read from the pipe as a stream of bytes.</span></span> <span data-ttu-id="43af4-126">Una operación de lectura se completa correctamente cuando se leen todos los bytes disponibles en la canalización o cuando se lee el número de bytes especificado.</span><span class="sxs-lookup"><span data-stu-id="43af4-126">A read operation is completed successfully when all available bytes in the pipe are read or when the specified number of bytes is read.</span></span>

<span data-ttu-id="43af4-127">Para crear el identificador de canalización en modo de lectura de mensaje, especifique el mensaje de CANALización \_ READMODE \_ .</span><span class="sxs-lookup"><span data-stu-id="43af4-127">To create the pipe handle in message-read mode, specify PIPE\_READMODE\_MESSAGE.</span></span> <span data-ttu-id="43af4-128">Los datos se leen de la canalización como una secuencia de mensajes.</span><span class="sxs-lookup"><span data-stu-id="43af4-128">Data is read from the pipe as a stream of messages.</span></span> <span data-ttu-id="43af4-129">Una operación de lectura se completa correctamente solo cuando se lee todo el mensaje.</span><span class="sxs-lookup"><span data-stu-id="43af4-129">A read operation is completed successfully only when the entire message is read.</span></span> <span data-ttu-id="43af4-130">Si el número especificado de bytes que se van a leer es menor que el tamaño del mensaje siguiente, la función Lee tanto como sea posible el mensaje antes de devolver cero (la función [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) devuelve los datos de error \_ \_ ).</span><span class="sxs-lookup"><span data-stu-id="43af4-130">If the specified number of bytes to read is less than the size of the next message, the function reads as much of the message as possible before returning zero (the [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) function returns ERROR\_MORE\_DATA).</span></span> <span data-ttu-id="43af4-131">El resto del mensaje se puede leer mediante otra operación de lectura.</span><span class="sxs-lookup"><span data-stu-id="43af4-131">The remainder of the message can be read using another read operation.</span></span>

<span data-ttu-id="43af4-132">Para un cliente de canalización, un identificador de canalización devuelto por [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) siempre está en modo de lectura de bytes inicialmente.</span><span class="sxs-lookup"><span data-stu-id="43af4-132">For a pipe client, a pipe handle returned by [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) is always in byte-read mode initially.</span></span> <span data-ttu-id="43af4-133">Ambos clientes de canalización y los servidores de canalización pueden utilizar la función [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) para cambiar el modo de lectura de un identificador de canalización.</span><span class="sxs-lookup"><span data-stu-id="43af4-133">Both pipe clients and pipe servers can use the [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) function to change the read mode of a pipe handle.</span></span> <span data-ttu-id="43af4-134">El identificador de canalización debe tener \_ el \_ derecho de acceso a los atributos de escritura de archivo.</span><span class="sxs-lookup"><span data-stu-id="43af4-134">The pipe handle must have the FILE\_WRITE\_ATTRIBUTES access right.</span></span>

## <a name="wait-mode"></a><span data-ttu-id="43af4-135">Modo de espera</span><span class="sxs-lookup"><span data-stu-id="43af4-135">Wait Mode</span></span>

<span data-ttu-id="43af4-136">El modo de espera de un identificador de canalización determina cómo las funciones [**readfile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile)y [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) controlan las operaciones largas.</span><span class="sxs-lookup"><span data-stu-id="43af4-136">The wait mode of a pipe handle determines how the [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), and [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) functions handle lengthy operations.</span></span> <span data-ttu-id="43af4-137">En el modo de bloqueo y espera, las funciones esperan indefinidamente a un proceso en el otro extremo de la canalización para completar una operación.</span><span class="sxs-lookup"><span data-stu-id="43af4-137">In blocking-wait mode, the functions wait indefinitely for a process on the other end of the pipe to complete an operation.</span></span> <span data-ttu-id="43af4-138">En el modo de espera, las funciones se devuelven inmediatamente en situaciones que, de lo contrario, podrían requerir una espera indefinida.</span><span class="sxs-lookup"><span data-stu-id="43af4-138">In nonblocking-wait mode, the functions return immediately in situations that would otherwise require an indefinite wait.</span></span>

<span data-ttu-id="43af4-139">Una operación [**readfile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) se ve afectada por el modo de espera de un identificador de canalización cuando la canalización está vacía.</span><span class="sxs-lookup"><span data-stu-id="43af4-139">A [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) operation is affected by the wait mode of a pipe handle when the pipe is empty.</span></span> <span data-ttu-id="43af4-140">Con un identificador de espera de bloqueo, la operación no se completa correctamente hasta que los datos están disponibles desde un subproceso que escribe en el otro extremo de la canalización.</span><span class="sxs-lookup"><span data-stu-id="43af4-140">With a blocking-wait handle, the operation is not completed successfully until data is available from a thread writing to the other end of the pipe.</span></span> <span data-ttu-id="43af4-141">Mediante un identificador de espera de no bloqueo, la función devuelve cero inmediatamente y la función [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) devuelve el error \_ no hay \_ datos.</span><span class="sxs-lookup"><span data-stu-id="43af4-141">Using a nonblocking-wait handle, the function returns zero immediately, and the [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) function returns ERROR\_NO\_DATA.</span></span>

<span data-ttu-id="43af4-142">Una operación [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) se ve afectada por el modo de espera de un identificador de canalización cuando no hay suficiente espacio en el búfer de la canalización.</span><span class="sxs-lookup"><span data-stu-id="43af4-142">A [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) operation is affected by the wait mode of a pipe handle when there is insufficient space in the pipe's buffer.</span></span> <span data-ttu-id="43af4-143">Con un identificador de espera de bloqueo, la operación de escritura no puede realizarse hasta que un subproceso que lee el otro extremo de la canalización cree suficiente espacio en el búfer.</span><span class="sxs-lookup"><span data-stu-id="43af4-143">With a blocking-wait handle, the write operation cannot succeed until sufficient space is created in the buffer by a thread reading from the other end of the pipe.</span></span> <span data-ttu-id="43af4-144">Con un identificador de espera de bloqueo, la operación de escritura devuelve un valor distinto de cero inmediatamente, sin escribir ningún byte (para una canalización de tipo de mensaje) o después de escribir el número de bytes que contiene el búfer (para una canalización de tipo byte).</span><span class="sxs-lookup"><span data-stu-id="43af4-144">With a nonblocking-wait handle, the write operation returns a nonzero value immediately, without writing any bytes (for a message-type pipe) or after writing as many bytes as the buffer holds (for a byte-type pipe).</span></span>

<span data-ttu-id="43af4-145">Una operación [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) se ve afectada por el modo de espera de un identificador de canalización cuando no hay ningún cliente conectado o en espera para conectarse a la instancia de canalización.</span><span class="sxs-lookup"><span data-stu-id="43af4-145">A [**ConnectNamedPipe**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-connectnamedpipe) operation is affected by the wait mode of a pipe handle when there is no client connected or waiting to connect to the pipe instance.</span></span> <span data-ttu-id="43af4-146">Con un identificador de espera de bloqueo, la operación de conexión no se realiza hasta que un cliente de canalización se conecta a la instancia de canalización mediante una llamada a la función [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) o [**CallNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) .</span><span class="sxs-lookup"><span data-stu-id="43af4-146">With a blocking-wait handle, the connect operation does not succeed until a pipe client connects to the pipe instance by calling either the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) or [**CallNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) function.</span></span> <span data-ttu-id="43af4-147">Con un identificador de espera de bloqueo, la operación de conexión devuelve cero inmediatamente y la función [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) devuelve la \_ escucha de canalización de errores \_ .</span><span class="sxs-lookup"><span data-stu-id="43af4-147">With a nonblocking-wait handle, the connect operation returns zero immediately, and the [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) function returns ERROR\_PIPE\_LISTENING.</span></span>

<span data-ttu-id="43af4-148">De forma predeterminada, todos los identificadores de canalización con nombre devueltos por la función [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) o [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) se crean con el modo de bloqueo y espera habilitado.</span><span class="sxs-lookup"><span data-stu-id="43af4-148">By default, all named pipe handles returned by the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) or [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function are created with blocking-wait mode enabled.</span></span> <span data-ttu-id="43af4-149">Para crear la canalización en modo de espera de bloqueo, el servidor de canalización especifica la CANALización de \_ espera al llamar a **CreateNamedPipe**.</span><span class="sxs-lookup"><span data-stu-id="43af4-149">To create the pipe in nonblocking-wait mode, the pipe server specifies PIPE\_NOWAIT when calling **CreateNamedPipe**.</span></span>

<span data-ttu-id="43af4-150">Ambos clientes de canalización y los servidores de canalización pueden cambiar el modo de espera de un identificador de canalización especificando \_ la espera de canalización o la canalización \_ nowait en una llamada a la función [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) .</span><span class="sxs-lookup"><span data-stu-id="43af4-150">Both pipe clients and pipe servers can change a pipe handle's wait mode by specifying either PIPE\_WAIT or PIPE\_NOWAIT in a call to the [**SetNamedPipeHandleState**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-setnamedpipehandlestate) function.</span></span>

> [!Note]  
> <span data-ttu-id="43af4-151">El modo de espera de bloqueo es compatible con la versión 2,0 de Microsoft LAN Manager.</span><span class="sxs-lookup"><span data-stu-id="43af4-151">The nonblocking-wait mode is supported for compatibility with Microsoft LAN Manager version 2.0.</span></span> <span data-ttu-id="43af4-152">Este modo no debe usarse para lograr la entrada y salida superpuestas (e/s) con canalizaciones con nombre.</span><span class="sxs-lookup"><span data-stu-id="43af4-152">This mode should not be used to achieve overlapped input and output (I/O) with named pipes.</span></span> <span data-ttu-id="43af4-153">En su lugar, se debe usar la e/s superpuesta, ya que permite que las operaciones que consumen mucho tiempo se ejecuten en segundo plano después de que la función vuelva.</span><span class="sxs-lookup"><span data-stu-id="43af4-153">Overlapped I/O should be used instead, because it enables time-consuming operations to run in the background after the function returns.</span></span> <span data-ttu-id="43af4-154">Para obtener más información acerca de la e/s superpuesta, vea [entrada y salida de datos sincrónicos y superpuestos](synchronous-and-overlapped-input-and-output.md).</span><span class="sxs-lookup"><span data-stu-id="43af4-154">For more information about overlapped I/O, see [Synchronous and Overlapped Input and Output](synchronous-and-overlapped-input-and-output.md).</span></span>

 

 

 
