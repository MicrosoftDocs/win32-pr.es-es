---
title: Ciclo de vida de un trabajo de BITS
description: El ciclo de vida de un trabajo de BITS comienza cuando se crea un trabajo.
ms.assetid: b765a8ef-74bd-475e-9cd9-e9e2cf4f0305
ms.topic: article
ms.date: 11/13/2018
ms.openlocfilehash: c6ac23c598d28681968e9c0cbed776ba24c57e98
ms.sourcegitcommit: de72a1294df274b0a71dc0fdc42d757e5f6df0f3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/05/2021
ms.locfileid: "105660013"
---
# <a name="bits-job-states"></a><span data-ttu-id="db1c2-103">Estados de trabajo de BITS</span><span class="sxs-lookup"><span data-stu-id="db1c2-103">BITS Job states</span></span>
<span data-ttu-id="db1c2-104">Hay cuatro clases de [**Estados**](/windows/desktop/api/Bits/ne-bits-bg_job_state)de bits: Starting, Action, transfiriód y final.</span><span class="sxs-lookup"><span data-stu-id="db1c2-104">There are four classes of BITS [**states**](/windows/desktop/api/Bits/ne-bits-bg_job_state): starting, action, transferred, and final.</span></span> <span data-ttu-id="db1c2-105">A medida que se ejecuta un trabajo, realiza la transición entre los Estados de las distintas clases de estado.</span><span class="sxs-lookup"><span data-stu-id="db1c2-105">As a job runs, it transitions between states in the different state classes.</span></span> <span data-ttu-id="db1c2-106">Una vez que un trabajo se encuentra en un estado final, no sale del estado final y no se muestra en una [enumeración de trabajos](/windows/desktop/api/bits/nf-bits-ibackgroundcopymanager-enumjobs).</span><span class="sxs-lookup"><span data-stu-id="db1c2-106">Once a job is in a final state, it won't move out of the final state and won't show up in a [job enumeration](/windows/desktop/api/bits/nf-bits-ibackgroundcopymanager-enumjobs).</span></span>

## <a name="state-changing-methods"></a><span data-ttu-id="db1c2-107">Métodos de cambio de estado</span><span class="sxs-lookup"><span data-stu-id="db1c2-107">State-changing methods</span></span>
<span data-ttu-id="db1c2-108">Hay cuatro métodos de cambio de estado en un trabajo: [**Cancelar**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel), [**completar**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete), [**reanudar**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume)y [**suspender**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-suspend).</span><span class="sxs-lookup"><span data-stu-id="db1c2-108">There are four state-changing methods on a job: [**Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel), [**Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete), [**Resume**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume), and [**Suspend**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-suspend).</span></span> <span data-ttu-id="db1c2-109">Siempre que un trabajo no esté en un estado final, puede llamar a cualquiera de los métodos de cambio de estado.</span><span class="sxs-lookup"><span data-stu-id="db1c2-109">As long as a job is not in a final state, you can call any of the state-changing methods.</span></span> 

<span data-ttu-id="db1c2-110">El método [**Suspend**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-suspend) se usa para cambiar un trabajo al estado Suspended.</span><span class="sxs-lookup"><span data-stu-id="db1c2-110">The [**Suspend**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-suspend) method is used to switch a job to the SUSPENDED state.</span></span> <span data-ttu-id="db1c2-111">Cuando se suspende un trabajo, todas sus transferencias se detendrán y no se reanudarán hasta que llame a resume.</span><span class="sxs-lookup"><span data-stu-id="db1c2-111">When a job is suspended, all of its transfers will be stopped and won't resume until you call Resume.</span></span>
<span data-ttu-id="db1c2-112">Un trabajo que ya está suspendido permanecerá suspendido.</span><span class="sxs-lookup"><span data-stu-id="db1c2-112">A job that's already suspended will simply stay suspended.</span></span>

<span data-ttu-id="db1c2-113">El método [**resume**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume) se usa para iniciar un trabajo que está suspendido.</span><span class="sxs-lookup"><span data-stu-id="db1c2-113">The [**Resume**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume) method is used to start a job that's suspended.</span></span> <span data-ttu-id="db1c2-114">Los trabajos en un estado de error o transitorio se configurarán para que se vuelvan a intentar.</span><span class="sxs-lookup"><span data-stu-id="db1c2-114">Jobs in an error or transient error state will be set up to be retried.</span></span> <span data-ttu-id="db1c2-115">Los trabajos que están actualmente en estado de acción permanecerán en ese estado.</span><span class="sxs-lookup"><span data-stu-id="db1c2-115">Jobs that are currently in an action state will stay in that state.</span></span>

<span data-ttu-id="db1c2-116">El método [**Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) se usa para cancelar un trabajo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-116">The [**Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) method is used to cancel a job.</span></span> <span data-ttu-id="db1c2-117">El estado cambiará a cancelado.</span><span class="sxs-lookup"><span data-stu-id="db1c2-117">The state will switch to cancelled.</span></span> <span data-ttu-id="db1c2-118">Los archivos que se están transfiriendo actualmente no se completarán.</span><span class="sxs-lookup"><span data-stu-id="db1c2-118">Any files currently being transferred will not be completed.</span></span> <span data-ttu-id="db1c2-119">Se eliminarán todos los archivos transferidos completamente y transferidos parcialmente.</span><span class="sxs-lookup"><span data-stu-id="db1c2-119">All completely transferred and partially transferred files will be deleted.</span></span>

<span data-ttu-id="db1c2-120">El método [**Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) finalizará una transferencia.</span><span class="sxs-lookup"><span data-stu-id="db1c2-120">The [**Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) method will finish a transfer.</span></span> <span data-ttu-id="db1c2-121">Se conservarán los archivos totalmente descargados; se eliminarán los archivos que no se hayan transferido completamente.</span><span class="sxs-lookup"><span data-stu-id="db1c2-121">Any fully downloaded files will be kept; files that are not fully transferred will be deleted.</span></span>

<span data-ttu-id="db1c2-122">Debe llamar a Cancel o complete para pasar el trabajo a un estado final y limpiarlo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-122">You must call either Cancel or Complete to move your job to a final state and be cleaned up.</span></span> <span data-ttu-id="db1c2-123">Los trabajos que no pasan a un estado final perderán los recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="db1c2-123">Jobs that aren't transitioned to a final state will waste system resources.</span></span> <span data-ttu-id="db1c2-124">Los BITS cancelarán automáticamente los trabajos antiguos.</span><span class="sxs-lookup"><span data-stu-id="db1c2-124">BITS will eventually automatically cancel old jobs.</span></span> <span data-ttu-id="db1c2-125">El valor predeterminado de [valor jobinactivitytimeout](/windows/desktop/Bits/group-policies) es cancelar los trabajos después de 90 días.</span><span class="sxs-lookup"><span data-stu-id="db1c2-125">The default [JobInactivityTimeout](/windows/desktop/Bits/group-policies) is to cancel jobs after 90 days.</span></span>


## <a name="starting-state"></a><span data-ttu-id="db1c2-126">Estado inicial</span><span class="sxs-lookup"><span data-stu-id="db1c2-126">Starting state</span></span> 
<span data-ttu-id="db1c2-127">El estado de inicio es **Suspended**.</span><span class="sxs-lookup"><span data-stu-id="db1c2-127">The starting state is **SUSPENDED**.</span></span> <span data-ttu-id="db1c2-128">Desde aquí, puede Agregar archivos al trabajo y establecer las propiedades del trabajo y del archivo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-128">From here, you can add files to the job and set job and file properties.</span></span> <span data-ttu-id="db1c2-129">Para iniciar un trabajo que transfiere, llame a resume en el trabajo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-129">To start a job transferring, call Resume on the job.</span></span> <span data-ttu-id="db1c2-130">Si reanuda un trabajo sin archivos, devolverá un código de error de BG_E_EMPTY y el trabajo permanecerá suspendido.</span><span class="sxs-lookup"><span data-stu-id="db1c2-130">If you resume a job with no files, it will return a BG_E_EMPTY error code and the job will stay suspended.</span></span>

## <a name="action-states"></a><span data-ttu-id="db1c2-131">Estados de acción</span><span class="sxs-lookup"><span data-stu-id="db1c2-131">Action states</span></span>
<span data-ttu-id="db1c2-132">Los Estados **en cola**, **conectando** y **transfiriendo** muestran la actividad interna actual del trabajo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-132">The **QUEUED**, **CONNECTING** and **TRANSFERRING** states show the current internal activity of your job.</span></span> <span data-ttu-id="db1c2-133">Un trabajo que está en cola está listo para ser programado, posiblemente esperando al programador de BITS o a la espera de que el usuario inicie sesión.</span><span class="sxs-lookup"><span data-stu-id="db1c2-133">A job that's QUEUED is ready to be scheduled, possibly waiting for the BITS scheduler or waiting for the user to log in.</span></span> <span data-ttu-id="db1c2-134">Un trabajo que se está CONECTAndo está intentando conectarse al servidor para iniciar la transferencia de archivos.</span><span class="sxs-lookup"><span data-stu-id="db1c2-134">A job that's CONNECTING is attempting to connect to the server to start transferring files.</span></span> <span data-ttu-id="db1c2-135">Un trabajo que está transfiriendo está cargando o descargando los archivos activamente.</span><span class="sxs-lookup"><span data-stu-id="db1c2-135">A job that's TRANSFERRING is actively uploading or downloading your files.</span></span>

<span data-ttu-id="db1c2-136">El estado de **error transitorio** significa que el trabajo ha intentado y no pudo transferir el archivo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-136">The **TRANSIENT ERROR** state means that the job tried and failed to transfer the file.</span></span> <span data-ttu-id="db1c2-137">Esto puede deberse a las razones de la Directiva de red; es posible que el trabajo esté bloqueado porque la red actual es demasiado costosa.</span><span class="sxs-lookup"><span data-stu-id="db1c2-137">This might be for network policy reasons; the job might be blocked because the current network is too expensive.</span></span> <span data-ttu-id="db1c2-138">También puede bloquearse por motivos del sistema, como el sistema está en el modo de ahorro de batería o de juego, o porque no hay conectividad a Internet.</span><span class="sxs-lookup"><span data-stu-id="db1c2-138">It might also be blocked for system reasons like the system being in battery saver or game mode, or because there's no internet connectivity.</span></span> 

<span data-ttu-id="db1c2-139">Los BITS volverán a intentar automáticamente los trabajos en el estado de error transitorio cuando sea necesario.</span><span class="sxs-lookup"><span data-stu-id="db1c2-139">Jobs in the transient error state will be retried automatically by BITS when appropriate.</span></span> <span data-ttu-id="db1c2-140">BITS incluye un valor [MinimumRetryDelay](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) y [NoProgressTimeout](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) para controlar cuándo se vuelve a intentar un trabajo y cuándo los bits dejarán de intentarlo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-140">BITS includes a [MinimumRetryDelay](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) and [NoProgressTimeout](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) value to control when a job is retried and when BITS will finally stop retrying.</span></span>


## <a name="transferred-states"></a><span data-ttu-id="db1c2-141">Estados transferidos</span><span class="sxs-lookup"><span data-stu-id="db1c2-141">Transferred states</span></span>
<span data-ttu-id="db1c2-142">Los Estados transferidos se producen cuando no se realiza ninguna operación de transferencia.</span><span class="sxs-lookup"><span data-stu-id="db1c2-142">The transferred states happen when there's no more transferring to be done.</span></span> <span data-ttu-id="db1c2-143">Debe cancelar o completar un trabajo en este estado.</span><span class="sxs-lookup"><span data-stu-id="db1c2-143">You must either cancel or complete a job in this state.</span></span> <span data-ttu-id="db1c2-144">También puede agregar más archivos para transferir y llamar a resume (), pero esto no es una práctica común.</span><span class="sxs-lookup"><span data-stu-id="db1c2-144">You may also add more files to transfer and call Resume(), but this isn't a common practice.</span></span>

<span data-ttu-id="db1c2-145">El estado de **error** se produce cuando se realiza una transferencia (no se volverá a intentar), pero no se realizó correctamente.</span><span class="sxs-lookup"><span data-stu-id="db1c2-145">The **ERROR** state happens when a transfer is done (it won't be retried), but didn't fully succeed.</span></span> <span data-ttu-id="db1c2-146">Todos los archivos deben transferirse para que sean correctos; Si se produce un error de forma permanente, el trabajo será erróneo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-146">All the files must be transferred to be successful; if any have permanently failed the job will be in error.</span></span> <span data-ttu-id="db1c2-147">Normalmente llamará a Cancel o complete para trasladar el trabajo a un estado final.</span><span class="sxs-lookup"><span data-stu-id="db1c2-147">You will typically either call Cancel or Complete to move the job to a final state.</span></span> <span data-ttu-id="db1c2-148">La diferencia práctica es que, cuando se llama a CANCEL, se eliminarán todos los archivos transferidos correctamente, pero si se llama a complete, no se eliminarán los archivos transferidos correctamente.</span><span class="sxs-lookup"><span data-stu-id="db1c2-148">The practical difference is that when you call Cancel, any successfully transferred file will be deleted, but if you call Complete, any successfully transferred file will not be deleted.</span></span>

<span data-ttu-id="db1c2-149">Los motivos para estar en un estado de ERROR son:</span><span class="sxs-lookup"><span data-stu-id="db1c2-149">Reasons for being in an ERROR state include</span></span> 
* <span data-ttu-id="db1c2-150">Se mantiene demasiado tiempo en un estado de ERROR transitorio (más allá del valor de [NoProgressTimeout](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) ).</span><span class="sxs-lookup"><span data-stu-id="db1c2-150">Staying too long in a TRANSIENT ERROR state (beyond the [NoProgressTimeout](/windows/desktop/api/bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) setting).</span></span>
* <span data-ttu-id="db1c2-151">Obtención de un error BG_E_TOKEN_REQUIRED y necesidad de asistencia con [tokens auxiliares](/windows/desktop/Bits/helper-tokens-for-bits-transfer-jobs)</span><span class="sxs-lookup"><span data-stu-id="db1c2-151">Getting a BG_E_TOKEN_REQUIRED error and needing assistance with [helper tokens](/windows/desktop/Bits/helper-tokens-for-bits-transfer-jobs)</span></span>

<span data-ttu-id="db1c2-152">Es una práctica habitual volver a configurar un trabajo de ERROR y, a continuación, llamar a resume para volver a intentar el trabajo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-152">It's a common practice to reconfigure an ERROR'd job and then call Resume to retry the job.</span></span> <span data-ttu-id="db1c2-153">Por ejemplo, es posible que la aplicación necesite actualizar el nombre remoto de un archivo a través de [SetRemoteName](/windows/desktop/api/bits2_0/nf-bits2_0-ibackgroundcopyfile2-setremotename).</span><span class="sxs-lookup"><span data-stu-id="db1c2-153">For example, your app might need to update a file's remote name via [SetRemoteName](/windows/desktop/api/bits2_0/nf-bits2_0-ibackgroundcopyfile2-setremotename).</span></span>

<span data-ttu-id="db1c2-154">El estado **transferido** tiene lugar cuando se realiza una transferencia y se realiza correctamente.</span><span class="sxs-lookup"><span data-stu-id="db1c2-154">The **TRANSFERRED** state happens when a transfer is done and it succeeded.</span></span> <span data-ttu-id="db1c2-155">Debe llamar a complete para finalizar el trabajo; en el caso de los trabajos de descarga, los archivos descargados no estarán disponibles hasta que se llame a complete.</span><span class="sxs-lookup"><span data-stu-id="db1c2-155">You must call Complete to finalize the job; for download jobs the downloaded files won't be available until after you call Complete.</span></span> <span data-ttu-id="db1c2-156">La excepción a esta regla son los trabajos que son los trabajos de alto rendimiento (y debe seguir llamando a complete).</span><span class="sxs-lookup"><span data-stu-id="db1c2-156">The exception to this rule is jobs which are the high performance jobs (and you should still call Complete).</span></span>

## <a name="final-states"></a><span data-ttu-id="db1c2-157">Estados finales</span><span class="sxs-lookup"><span data-stu-id="db1c2-157">Final states</span></span>
<span data-ttu-id="db1c2-158">Una vez que un trabajo se encuentra en un estado final, no se puede llamar a ninguno de los métodos de cambio de estado.</span><span class="sxs-lookup"><span data-stu-id="db1c2-158">Once a job is in a final state, you can't call any of the state-changing methods.</span></span> <span data-ttu-id="db1c2-159">El trabajo se **confirmará** después de llamar a complete () y todos los archivos descargados finalizados estarán disponibles.</span><span class="sxs-lookup"><span data-stu-id="db1c2-159">The job will be **ACKNOWLEDGED** after you call Complete() and all completed downloaded files will be available.</span></span> <span data-ttu-id="db1c2-160">El trabajo se **cancelará** después de llamar a CANCEL () y se eliminarán todos los archivos descargados.</span><span class="sxs-lookup"><span data-stu-id="db1c2-160">The job will be **CANCELLED** after you call Cancel() and all downloaded files will be deleted.</span></span> 


## <a name="life-cycle-of-a-bits-job"></a><span data-ttu-id="db1c2-161">Ciclo de vida de un trabajo de BITS</span><span class="sxs-lookup"><span data-stu-id="db1c2-161">Life Cycle of a BITS job</span></span>

<span data-ttu-id="db1c2-162">El ciclo de vida de un trabajo de BITS comienza cuando se crea un trabajo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-162">The life cycle of a BITS job begins when you create a job.</span></span> <span data-ttu-id="db1c2-163">Un trabajo es un contenedor que contiene uno o varios archivos que se van a transferir.</span><span class="sxs-lookup"><span data-stu-id="db1c2-163">A job is a container that contains one or more files to transfer.</span></span> <span data-ttu-id="db1c2-164">Un trabajo también tiene propiedades que especifican cómo transfiere BITS los archivos e interactúa con la aplicación.</span><span class="sxs-lookup"><span data-stu-id="db1c2-164">A job also has properties that specify how BITS transfers the files and interacts with your application.</span></span> <span data-ttu-id="db1c2-165">Por ejemplo, puede especificar la prioridad del trabajo, si el trabajo es un trabajo de carga o descarga, y para qué eventos desea recibir la notificación.</span><span class="sxs-lookup"><span data-stu-id="db1c2-165">For example, you can specify the priority of the job, whether the job is an upload or download job, and for which events you want to receive notification.</span></span>

<span data-ttu-id="db1c2-166">Después de crear el trabajo, agregue uno o varios archivos (los trabajos de carga solo pueden contener un archivo) al trabajo y cambie cualquiera de los valores de propiedad según sea necesario para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="db1c2-166">After you create the job, add one or more files (upload jobs can contain only one file) to the job and change any of the property values as appropriate for your application.</span></span> <span data-ttu-id="db1c2-167">Al agregar un archivo al trabajo, especifique tanto el nombre local (cliente) como el nombre remoto (servidor) del archivo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-167">When you add a file to the job, specify both the local (client) and remote (server) name of the file.</span></span> <span data-ttu-id="db1c2-168">El nombre de archivo remoto debe usar el protocolo HTTP, HTTPS o SMB.</span><span class="sxs-lookup"><span data-stu-id="db1c2-168">The remote file name must use the HTTP, HTTPS, or SMB protocol.</span></span> <span data-ttu-id="db1c2-169">Los archivos dentro de un trabajo se procesan de forma secuencial (primero en, primero en salir).</span><span class="sxs-lookup"><span data-stu-id="db1c2-169">Files within a job are processed sequentially (first in, first out).</span></span>

<span data-ttu-id="db1c2-170">BITS suspende automáticamente los trabajos cuando se crean.</span><span class="sxs-lookup"><span data-stu-id="db1c2-170">BITS automatically suspends jobs when they are created.</span></span> <span data-ttu-id="db1c2-171">Debe reanudar el trabajo para activarlo en la cola de transferencia.</span><span class="sxs-lookup"><span data-stu-id="db1c2-171">You must resume the job to activate it in the transfer queue.</span></span> <span data-ttu-id="db1c2-172">Puede suspender o reanudar un trabajo en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="db1c2-172">You can suspend or resume a job at any time.</span></span> <span data-ttu-id="db1c2-173">Al reanudar el trabajo, el trabajo se mueve del estado suspendido al estado en cola.</span><span class="sxs-lookup"><span data-stu-id="db1c2-173">Resuming the job moves the job from the suspended state to the queued state.</span></span> <span data-ttu-id="db1c2-174">El trabajo permanece en el estado en cola hasta que el programador determina que es el turno del trabajo para transferir los archivos.</span><span class="sxs-lookup"><span data-stu-id="db1c2-174">The job stays in the queued state until the scheduler determines it is the job's turn to transfer files.</span></span> <span data-ttu-id="db1c2-175">Todos los trabajos en primer plano se ejecutan simultáneamente con un trabajo en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="db1c2-175">All foreground jobs run concurrently with one background job.</span></span> <span data-ttu-id="db1c2-176">BITS procesa los archivos dentro de los trabajos en primer plano en serie.</span><span class="sxs-lookup"><span data-stu-id="db1c2-176">BITS processes the files within foreground jobs serially.</span></span>

<span data-ttu-id="db1c2-177">Cuando el trabajo de transferencia de archivos es un trabajo, el trabajo pasa al estado de conexión mientras BITS se conecta al servidor remoto (especificado en el nombre de archivo remoto).</span><span class="sxs-lookup"><span data-stu-id="db1c2-177">When it is a job's turn to transfer files, the job moves to the connecting state while BITS connects to the remote server (specified in the remote file name).</span></span> <span data-ttu-id="db1c2-178">Si BITS puede conectarse al servidor remoto, el trabajo pasa al estado de transferencia cuando permanece hasta que finaliza su intervalo de tiempo, se completa la transferencia, se produce un error o la aplicación suspende el trabajo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-178">If BITS is able to connect to the remote server, the job moves to the transferring state where it stays until its time slice ends, the transfer is complete, an error occurs, or the application suspends the job.</span></span>

<span data-ttu-id="db1c2-179">El trabajo se mueve entre la cola, la conexión y la transferencia de Estados hasta que BITS transfiere todos los archivos del trabajo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-179">The job moves between the queued, connecting, and transferring states until BITS transfers all files in the job.</span></span> <span data-ttu-id="db1c2-180">En ese momento, el trabajo pasa al estado transferido.</span><span class="sxs-lookup"><span data-stu-id="db1c2-180">At that point, the job moves to the transferred state.</span></span> <span data-ttu-id="db1c2-181">BITS usa la programación Round Robin para programar trabajos que se encuentran en el mismo nivel de prioridad.</span><span class="sxs-lookup"><span data-stu-id="db1c2-181">BITS uses round-robin scheduling to schedule jobs that are at the same priority level.</span></span> <span data-ttu-id="db1c2-182">A cada trabajo se le asigna un segmento de tiempo para procesar sus archivos.</span><span class="sxs-lookup"><span data-stu-id="db1c2-182">Each job is given a slice of time to process its files.</span></span> <span data-ttu-id="db1c2-183">Si el trabajo no se completa durante su intervalo de tiempo, el trabajo vuelve al estado en cola y se activa el siguiente trabajo de la cola.</span><span class="sxs-lookup"><span data-stu-id="db1c2-183">If the job does not complete during its time slice, the job goes back to the queued state and the next job in the queue is activated.</span></span> <span data-ttu-id="db1c2-184">Esto evita que los trabajos grandes bloqueen trabajos más pequeños.</span><span class="sxs-lookup"><span data-stu-id="db1c2-184">This prevents large jobs from blocking smaller jobs.</span></span> <span data-ttu-id="db1c2-185">Los trabajos se procesan en gran medida en la primera parte, primero en salir (FIFO). sin embargo, BITS no puede garantizar el procesamiento FIFO debido a la programación Round Robin, los errores de trabajo y los reinicios del servicio.</span><span class="sxs-lookup"><span data-stu-id="db1c2-185">Jobs are processed largely on a first in, first out (FIFO) basis; however, BITS cannot guarantee FIFO processing because of round-robin scheduling, job errors, and service restarts.</span></span>

<span data-ttu-id="db1c2-186">Los archivos transferidos no están disponibles para el cliente hasta que la aplicación llama al método [**IBackgroundCopyJob:: Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) para transferir la propiedad de los archivos de bits al usuario.</span><span class="sxs-lookup"><span data-stu-id="db1c2-186">The transferred files are not available to the client until the application calls the [**IBackgroundCopyJob::Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) method to transfer ownership of the files from BITS to the user.</span></span> <span data-ttu-id="db1c2-187">Los trabajos de carga también se establecen en el estado transferido cuando el servidor recibe correctamente el archivo.</span><span class="sxs-lookup"><span data-stu-id="db1c2-187">Upload jobs are also set to the transferred state when the file is successfully received by the server.</span></span> <span data-ttu-id="db1c2-188">Los trabajos de carga y respuesta se establecen en el estado transferido después de que el archivo se haya enviado correctamente al servidor y la respuesta de la aplicación de servidor se haya transferido correctamente al cliente.</span><span class="sxs-lookup"><span data-stu-id="db1c2-188">Upload-reply jobs are set to the transferred state after the file is successfully sent to the server and the reply from the server application is successfully transferred to the client.</span></span>

<span data-ttu-id="db1c2-189">Si se produce un error, el trabajo pasa al estado de error grave o transitorio.</span><span class="sxs-lookup"><span data-stu-id="db1c2-189">If an error occurs, the job moves to either the fatal or transient error state.</span></span> <span data-ttu-id="db1c2-190">Los errores irrecuperables son errores que no pueden recuperar BITS de o que requieren la intervención de corregir.</span><span class="sxs-lookup"><span data-stu-id="db1c2-190">Fatal errors are errors that BITS cannot recover from or which require intervention to fix.</span></span> <span data-ttu-id="db1c2-191">Si la aplicación puede corregir el error, la aplicación reanuda el trabajo y BITS mueve el trabajo al estado en cola.</span><span class="sxs-lookup"><span data-stu-id="db1c2-191">If the application is able to fix the error, the application resumes the job and BITS moves the job to the queued state.</span></span> <span data-ttu-id="db1c2-192">Los errores transitorios son errores que pueden resolverse por sí mismos.</span><span class="sxs-lookup"><span data-stu-id="db1c2-192">Transient errors are errors that may resolve themselves.</span></span> <span data-ttu-id="db1c2-193">BITS reintenta los trabajos en el estado de error transitorio hasta que la transferencia se realiza correctamente o se agota el tiempo de espera del trabajo. El trabajo agota el tiempo de espera cuando no se realiza ningún progreso dentro de un período especificado por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="db1c2-193">BITS retries jobs in the transient error state until the transfer is successful or the job times out. The job times out when no progress is made within an application-specified period.</span></span> <span data-ttu-id="db1c2-194">Si se agota el tiempo de espera del trabajo, BITS mueve el trabajo a un estado de error irrecuperable.</span><span class="sxs-lookup"><span data-stu-id="db1c2-194">If the job times out, BITS moves the job to fatal error state.</span></span>

<span data-ttu-id="db1c2-195">Para más información sobre los Estados de trabajo, consulte [**\_ \_ Estado del trabajo de BG**](/windows/desktop/api/Bits/ne-bits-bg_job_state).</span><span class="sxs-lookup"><span data-stu-id="db1c2-195">For more information on job states, see [**BG\_JOB\_STATE**](/windows/desktop/api/Bits/ne-bits-bg_job_state).</span></span>
