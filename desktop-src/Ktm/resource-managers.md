---
description: Administradores de recursos
ms.assetid: c717b731-cf0b-45cb-bbff-695410fcf6ce
title: Administradores de recursos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b2ea9b1cd834daf3bfbca49bf37d3f2c0956344
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105687394"
---
# <a name="resource-managers"></a><span data-ttu-id="523f5-103">Administradores de recursos</span><span class="sxs-lookup"><span data-stu-id="523f5-103">Resource Managers</span></span>

<span data-ttu-id="523f5-104">Un administrador de recursos utiliza el registro del administrador de transacciones para realizar el seguimiento del estado de la transacción.</span><span class="sxs-lookup"><span data-stu-id="523f5-104">A resource manager uses the transaction manager log to track the transaction state.</span></span> <span data-ttu-id="523f5-105">La acción del administrador de recursos al procesar una transacción es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="523f5-105">The resource manager's action when processing a transaction is as follows:</span></span>

-   <span data-ttu-id="523f5-106">El cliente pasa una transacción al RM explícitamente.</span><span class="sxs-lookup"><span data-stu-id="523f5-106">The client passes a transaction to the RM explicitly.</span></span>
-   <span data-ttu-id="523f5-107">El RM se da de alta en la transacción mediante [**CreateEnlistment**](/windows/desktop/api/KtmW32/nf-ktmw32-createenlistment).</span><span class="sxs-lookup"><span data-stu-id="523f5-107">The RM enlists in the transaction using [**CreateEnlistment**](/windows/desktop/api/KtmW32/nf-ktmw32-createenlistment).</span></span>
-   <span data-ttu-id="523f5-108">Después, el usuario puede continuar para realizar cualquier operación.</span><span class="sxs-lookup"><span data-stu-id="523f5-108">The user can then proceed to perform any operation.</span></span>
-   <span data-ttu-id="523f5-109">Cuando el usuario llama a CommitTransaction, KTM envía una notificación de preparación de \_ la transacción al RM.</span><span class="sxs-lookup"><span data-stu-id="523f5-109">When the user calls CommitTransaction, KTM sends a PREPARE\_TRANSACTION notification to the RM.</span></span> <span data-ttu-id="523f5-110">En este momento, el RM se vacía en el disco en cualquier cambio que sea necesario para confirmar la transacción, pero podría producirse un error.</span><span class="sxs-lookup"><span data-stu-id="523f5-110">At this point, the RM flushes to disk any changes that would be necessary to commit the transaction, but could fail.</span></span> <span data-ttu-id="523f5-111">Si estas operaciones se realizan correctamente, el RM indica que ha finalizado con la operación de preparación llamando a [**PrepareComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete).</span><span class="sxs-lookup"><span data-stu-id="523f5-111">If these operations succeed, the RM signals that it is finished with the prepare operation by calling [**PrepareComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete).</span></span> <span data-ttu-id="523f5-112">Si se produce un error en estas operaciones, el RM responde llamando a [**RollBackEnlistment**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackenlistment).</span><span class="sxs-lookup"><span data-stu-id="523f5-112">If these operations fail, the RM responds by calling [**RollBackEnlistment**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackenlistment).</span></span>
-   <span data-ttu-id="523f5-113">El administrador de recursos recibe una notificación de preparación.</span><span class="sxs-lookup"><span data-stu-id="523f5-113">The resource manager receives a prepare notification.</span></span>
-   <span data-ttu-id="523f5-114">El administrador de recursos vacía los datos asociados a la transacción en su archivo de registro de servicios de registro comunes.</span><span class="sxs-lookup"><span data-stu-id="523f5-114">The resource manager flushes any data associated with the transaction to its Common Log Services log file.</span></span>
-   <span data-ttu-id="523f5-115">El administrador de recursos llama a la función [**PrepareComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete) y espera recibir el resultado de la transacción del KTM.</span><span class="sxs-lookup"><span data-stu-id="523f5-115">The resource manager calls the [**PrepareComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete) function and awaits to receive the transaction's outcome from the KTM.</span></span>
-   <span data-ttu-id="523f5-116">Dependiendo del resultado de la transacción, el administrador de recursos recibe un evento de notificación commit o ROLLBACK.</span><span class="sxs-lookup"><span data-stu-id="523f5-116">Depending on the outcome of the transaction, the resource manager receives a commit or rollback notification event.</span></span> <span data-ttu-id="523f5-117">Si el administrador de recursos recibe una notificación de confirmación, hace que los cambios sean permanentes e informa al KTM mediante una llamada a la función [**CommitComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-commitcomplete) .</span><span class="sxs-lookup"><span data-stu-id="523f5-117">If the resource manager receives a commit notification, it makes the changes permanent and informs the KTM by calling the [**CommitComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-commitcomplete) function.</span></span> <span data-ttu-id="523f5-118">Si el administrador de recursos recibe una notificación de reversión, descarta todos los cambios y vuelve al estado que existía antes de cualquiera de los cambios de transacción e informa al KTM mediante una llamada a [**RollbackComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackcomplete).</span><span class="sxs-lookup"><span data-stu-id="523f5-118">If the resource manager receives a rollback notification, it discards all changes and reverts to the state that existed before any of the transacted changes and informs the KTM by calling [**RollbackComplete**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbackcomplete).</span></span>

## <a name="resource-manager-functions"></a><span data-ttu-id="523f5-119">Funciones de Administrador de recursos</span><span class="sxs-lookup"><span data-stu-id="523f5-119">Resource Manager Functions</span></span>

<span data-ttu-id="523f5-120">Las siguientes funciones se usan con los administradores de recursos.</span><span class="sxs-lookup"><span data-stu-id="523f5-120">The following functions are used with resource managers.</span></span>



| <span data-ttu-id="523f5-121">Función</span><span class="sxs-lookup"><span data-stu-id="523f5-121">Function</span></span>                                                                           | <span data-ttu-id="523f5-122">Descripción</span><span class="sxs-lookup"><span data-stu-id="523f5-122">Description</span></span>                                                                                                                                                                      |
|------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="523f5-123">**CreateResourceManager (**</span><span class="sxs-lookup"><span data-stu-id="523f5-123">**CreateResourceManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-createresourcemanager)                             | <span data-ttu-id="523f5-124">Crea un nuevo objeto de Resource Manager (RM) y asocia el RM con un administrador de transacciones (TM).</span><span class="sxs-lookup"><span data-stu-id="523f5-124">Creates a new resource manager (RM) object, and associates the RM with a transaction manager (TM).</span></span>                                                                               |
| [<span data-ttu-id="523f5-125">**GetNotificationResourceManager**</span><span class="sxs-lookup"><span data-stu-id="523f5-125">**GetNotificationResourceManager**</span></span>](/windows/desktop/api/KtmW32/nf-ktmw32-getnotificationresourcemanager)           | <span data-ttu-id="523f5-126">Solicita y recibe una notificación para un administrador de recursos (RM).</span><span class="sxs-lookup"><span data-stu-id="523f5-126">Requests and receives a notification for a resource manager (RM).</span></span> <span data-ttu-id="523f5-127">El registro de RM usa esta función para recibir notificaciones cuando una transacción cambia de estado.</span><span class="sxs-lookup"><span data-stu-id="523f5-127">This function is used by the RM register to receive notifications when a transaction changes state.</span></span>            |
| [<span data-ttu-id="523f5-128">**GetNotificationResourceManagerAsync**</span><span class="sxs-lookup"><span data-stu-id="523f5-128">**GetNotificationResourceManagerAsync**</span></span>](/windows/desktop/api/KtmW32/nf-ktmw32-getnotificationresourcemanagerasync) | <span data-ttu-id="523f5-129">Solicita y recibe notificaciones asincrónicas de un administrador de recursos (RM).</span><span class="sxs-lookup"><span data-stu-id="523f5-129">Requests and receives asynchronous notification for a resource manager (RM).</span></span> <span data-ttu-id="523f5-130">El registro de RM usa esta función para recibir notificaciones cuando una transacción cambia de estado.</span><span class="sxs-lookup"><span data-stu-id="523f5-130">This function is used by the RM register to receive notifications when a transaction changes state.</span></span> |
| [<span data-ttu-id="523f5-131">**OpenResourceManager**</span><span class="sxs-lookup"><span data-stu-id="523f5-131">**OpenResourceManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-openresourcemanager)                                 | <span data-ttu-id="523f5-132">Abre un administrador de recursos (RM) existente.</span><span class="sxs-lookup"><span data-stu-id="523f5-132">Opens an existing resource manager (RM).</span></span>                                                                                                                                         |
| [<span data-ttu-id="523f5-133">**PrepareComplete**</span><span class="sxs-lookup"><span data-stu-id="523f5-133">**PrepareComplete**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-preparecomplete)                                         | <span data-ttu-id="523f5-134">Indica que el administrador de recursos (RM) ha completado todo el procesamiento necesario para garantizar que una operación de confirmación o anulación se realizará correctamente para la transacción especificada.</span><span class="sxs-lookup"><span data-stu-id="523f5-134">Indicates that the resource manager (RM) has completed all processing necessary to guarantee that a commit or abort operation will succeed for the specified transaction.</span></span>        |
| [<span data-ttu-id="523f5-135">**PrePrepareComplete**</span><span class="sxs-lookup"><span data-stu-id="523f5-135">**PrePrepareComplete**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-prepreparecomplete)                                   | <span data-ttu-id="523f5-136">Indica que este administrador de recursos ha completado su trabajo de prepreparación, de modo que otros administradores de recursos puedan comenzar ahora sus operaciones de preparación.</span><span class="sxs-lookup"><span data-stu-id="523f5-136">Signals that this resource manager has completed its preprepare work, so that other resource managers can now begin their prepare operations.</span></span>                                    |
| [<span data-ttu-id="523f5-137">**SetResourceManagerCompletionPort**</span><span class="sxs-lookup"><span data-stu-id="523f5-137">**SetResourceManagerCompletionPort**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-setresourcemanagercompletionport)       | <span data-ttu-id="523f5-138">Asocia el puerto de finalización de e/s especificado al administrador de recursos (RM) especificado.</span><span class="sxs-lookup"><span data-stu-id="523f5-138">Associates the specified I/O completion port with the specified resource manager (RM).</span></span> <span data-ttu-id="523f5-139">Este puerto recibe todas las notificaciones para el RM.</span><span class="sxs-lookup"><span data-stu-id="523f5-139">This port receives all notifications for the RM.</span></span>                                          |



 

 

 



