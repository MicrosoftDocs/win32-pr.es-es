---
title: Identificadores de contexto
description: En ocasiones, es el caso de que las aplicaciones distribuidas requieran que el programa de servidor mantenga información de estado entre las llamadas del cliente.
ms.assetid: 91732a75-0a3a-44bd-9db9-c11be6fd2d70
keywords:
- RPC (llamada a procedimiento remoto), descripción, identificadores de contexto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a8ff36ff8f1a36843293060e091b7eecee0d8666
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "105676157"
---
# <a name="context-handles"></a><span data-ttu-id="7f8a1-104">Identificadores de contexto</span><span class="sxs-lookup"><span data-stu-id="7f8a1-104">Context Handles</span></span>

<span data-ttu-id="7f8a1-105">En ocasiones, es el caso de que las aplicaciones distribuidas requieran que el programa de servidor mantenga información de estado entre las llamadas del cliente.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-105">It is sometimes the case that distributed applications require the server program to maintain status information between client calls.</span></span> <span data-ttu-id="7f8a1-106">Los programas de servidor que prestan servicio a más de un cliente a la vez deben conservar la información de estado de cada cliente.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-106">Server programs that service more than one client at a time must keep the state information for each client.</span></span> <span data-ttu-id="7f8a1-107">Dado que el cliente y el servidor usan espacios de direcciones diferentes en distintos equipos y no necesariamente confían entre sí, los enfoques comunes para el uso compartido de datos a menudo no funcionan.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-107">Because the client and the server use different address spaces on different computers, and they do not necessarily trust each other, common approaches to data sharing often do not work.</span></span> <span data-ttu-id="7f8a1-108">Por ejemplo, el cliente y el servidor no pueden mantener la información de estado en su sesión remota en variables globales porque no comparten el mismo espacio de direcciones global.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-108">For instance, the client and server are unable to maintain status information on their remote session in global variables because they do not share the same global address space.</span></span> <span data-ttu-id="7f8a1-109">Es difícil mantener la información en un archivo compartido porque se ejecutan en equipos diferentes.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-109">It is difficult to keep the information in a shared file because they run on different computers.</span></span> <span data-ttu-id="7f8a1-110">Un enfoque simplista puede ser enviar todo el estado al cliente y hacer que el cliente lo devuelva en la siguiente llamada, pero este enfoque tiene defectos: el servidor no confía necesariamente en el cliente para que devuelva el estado correcto, y el estado puede estar vinculado implícitamente a otro estado del servidor, como identificadores de archivo o sockets abiertos.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-110">A simplistic approach may be to ship all state to the client and have the client return it on the next call, but this approach has flaws: the server does not necessarily trust the client to return the right state, and the state may be implicitly tied to some other state on the server, such as file handles or opened sockets.</span></span>

<span data-ttu-id="7f8a1-111">Microsoft RPC proporciona un mecanismo eficaz y seguro denominado identificadores de contexto para mantener el estado asociado a un cliente determinado en un servidor.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-111">Microsoft RPC provides a powerful and secure mechanism called context handles for keeping state associated with a given client on a server.</span></span> <span data-ttu-id="7f8a1-112">La información de estado se denomina contexto del servidor.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-112">The state information is called the server's context.</span></span> <span data-ttu-id="7f8a1-113">Los clientes pueden obtener un identificador de contexto para identificar el contexto del servidor para sus sesiones RPC individuales.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-113">Clients can obtain a context handle to identify the server's context for their individual RPC sessions.</span></span>

<span data-ttu-id="7f8a1-114">Por ejemplo, cada cliente de una aplicación distribuida puede hacer que el programa de servidor cree y actualice un archivo de datos para su sesión RPC.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-114">As an example, each client in a distributed application can have the server program create and update a data file for their RPC session.</span></span> <span data-ttu-id="7f8a1-115">El servidor puede utilizar su identificador de archivo para cada archivo de datos de cliente como el identificador de contexto.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-115">The server can use its file handle for each client's data file as the context handle.</span></span> <span data-ttu-id="7f8a1-116">Cada vez que un cliente solicita operaciones en el archivo de datos que el servidor crea para él, el cliente pasa el identificador de contexto al servidor.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-116">Each time a client requests operations on the data file that the server creates for it, the client passes the context handle to the server.</span></span> <span data-ttu-id="7f8a1-117">El cliente no obtiene realmente el propio identificador de archivo; Obtiene un token opaco que el tiempo de ejecución de RPC del servidor puede asociar de forma única al identificador de archivo.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-117">The client does not actually get the file handle itself; it gets an opaque token that the server RPC run time can uniquely associate with the file handle.</span></span> <span data-ttu-id="7f8a1-118">Dado que el identificador de contexto es realmente un identificador de archivo, el identificador de contexto solo tiene sentido en el espacio de direcciones del servidor.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-118">Since the context handle is really a file handle, the context handle only makes sense in the server's address space.</span></span> <span data-ttu-id="7f8a1-119">Sin embargo, el programa cliente puede utilizar el identificador de contexto para indicar al servidor en qué archivo se van a realizar las actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-119">However, the client program can use the context handle to tell the server on which file to perform updates.</span></span>

<span data-ttu-id="7f8a1-120">Otros datos también pueden ser identificadores de contexto.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-120">Other data can also be context handles.</span></span> <span data-ttu-id="7f8a1-121">Por ejemplo, un cliente y un servidor pueden utilizar un número de registro de un registro de base de datos como un identificador de archivo.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-121">For instance, a client and server can use a record number of a database record as a file handle.</span></span> <span data-ttu-id="7f8a1-122">Si el cliente necesita realizar una serie de actualizaciones en un registro determinado, podría obtener el número de registro como un identificador de contexto.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-122">If the client needed to perform a number of updates on a particular record, it could obtain the record number as a context handle.</span></span> <span data-ttu-id="7f8a1-123">Pasaría el número de registro al servidor cada vez que invocó un procedimiento remoto para actualizar el registro de base de datos.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-123">It would pass the record number to the server each time it invoked a remote procedure to update the database record.</span></span>

<span data-ttu-id="7f8a1-124">La mayoría de las veces, un identificador de contexto apunta a un bloque de memoria en el servidor en el que el servidor mantiene diversa información de administración.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-124">Most often a context handle points to a block of memory on the server where the server keeps various management information.</span></span>

<span data-ttu-id="7f8a1-125">En esta sección se ofrece información sobre la definición y el uso de identificadores de contexto.</span><span class="sxs-lookup"><span data-stu-id="7f8a1-125">This section presents information on defining and using context handles.</span></span> <span data-ttu-id="7f8a1-126">La discusión se presenta en los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="7f8a1-126">The discussion is presented in the following topics:</span></span>

-   [<span data-ttu-id="7f8a1-127">Desarrollo de interfaces con identificadores de contexto</span><span class="sxs-lookup"><span data-stu-id="7f8a1-127">Interface Development Using Context Handles</span></span>](interface-development-using-context-handles.md)
-   [<span data-ttu-id="7f8a1-128">Desarrollo de servidores con identificadores de contexto</span><span class="sxs-lookup"><span data-stu-id="7f8a1-128">Server Development Using Context Handles</span></span>](server-development-using-context-handles.md)
-   [<span data-ttu-id="7f8a1-129">Desarrollo de cliente con identificadores de contexto</span><span class="sxs-lookup"><span data-stu-id="7f8a1-129">Client Development Using Context Handles</span></span>](client-development-using-context-handles.md)
-   [<span data-ttu-id="7f8a1-130">Rutina de ejecución de contexto de servidor</span><span class="sxs-lookup"><span data-stu-id="7f8a1-130">Server Context Run-down Routine</span></span>](server-context-run-down-routine.md)
-   [<span data-ttu-id="7f8a1-131">Restablecimiento de contexto de cliente</span><span class="sxs-lookup"><span data-stu-id="7f8a1-131">Client Context Reset</span></span>](client-context-reset.md)
-   [<span data-ttu-id="7f8a1-132">Clientes multiproceso y controladores de contexto</span><span class="sxs-lookup"><span data-stu-id="7f8a1-132">Multithreaded Clients and Context Handles</span></span>](multithreaded-clients-and-context-handles.md)

 

 




