---
description: En este tema se describe la compatibilidad con dispositivos de host múltiple en WSDAPI y se proporcionan recomendaciones de implementación para desarrolladores de cliente y de dispositivo.
ms.assetid: d30ed536-d477-4f50-8c80-aacc35f948b9
title: Implementación de un dispositivo WSD de host múltiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1ac3537b96a577db47419d55cb5c6f732f8f7906
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104278966"
---
# <a name="implementing-a-multi-homed-wsd-device"></a><span data-ttu-id="df3a2-103">Implementación de un dispositivo WSD de host múltiple</span><span class="sxs-lookup"><span data-stu-id="df3a2-103">Implementing a Multi-Homed WSD Device</span></span>

<span data-ttu-id="df3a2-104">[WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) y el [Perfil de dispositivos para servicios web](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) no describen la implementación de dispositivos de host múltiple.</span><span class="sxs-lookup"><span data-stu-id="df3a2-104">[WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) and the [Devices Profile for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) do not describe the implementation of multi-homed devices.</span></span> <span data-ttu-id="df3a2-105">En este tema se describe la compatibilidad con dispositivos de host múltiple en WSDAPI y se proporcionan recomendaciones de implementación para desarrolladores de cliente y de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="df3a2-105">This topic describes multi-homed device support in WSDAPI, and provides implementation recommendations to client and device developers.</span></span> <span data-ttu-id="df3a2-106">En este tema se supone que los mensajes de detección se envían a través de IPv4 e IPv6 (si está disponible) con el mismo identificador de mensaje e información de secuenciación de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="df3a2-106">In this topic, it is assumed that discovery messages are sent over both IPv4 and IPv6 (if available) with the same message ID and application sequencing information.</span></span>

## <a name="discovery-in-a-multi-homed-environment"></a><span data-ttu-id="df3a2-107">Detección en un entorno de host múltiple</span><span class="sxs-lookup"><span data-stu-id="df3a2-107">Discovery in a multi-homed environment</span></span>

<span data-ttu-id="df3a2-108">Como se mencionó en la sección [Hello](hello-message.md) y [XAddrs](xaddr-validation-rules.md) de [funcionalidad adicional de WS-Discovery](additional-ws-discovery-functionality.md), WSDAPI nunca proporciona XAddrs en un mensaje Hello.</span><span class="sxs-lookup"><span data-stu-id="df3a2-108">As mentioned in [Hello](hello-message.md) and [XAddrs](xaddr-validation-rules.md) section of [Additional WS-Discovery Functionality](additional-ws-discovery-functionality.md), WSDAPI never provides XAddrs in a Hello message.</span></span> <span data-ttu-id="df3a2-109">Esto significa que se puede enviar el mismo mensaje de saludo en todas las interfaces de red con el mismo identificador de mensaje e información de secuenciación de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="df3a2-109">That means the same Hello message can be sent on all network interfaces with the same message ID and application sequencing information.</span></span> <span data-ttu-id="df3a2-110">Esto hace que sea más fácil para la detección de colisiones de cliente descartar varios mensajes de saludo del mismo dispositivo cuando un cliente y el dispositivo comparten más de una subred.</span><span class="sxs-lookup"><span data-stu-id="df3a2-110">This makes it easier for client collision detection to discard multiple Hello messages from the same device when a client and the device share more than one subnet.</span></span>

<span data-ttu-id="df3a2-111">Dado que los [XAddrs](xaddr-validation-rules.md) no se envían en el mensaje de [Hola](hello-message.md) , las implementaciones de cliente deben enviar un mensaje de [resolución](resolve-message.md) para obtener la dirección del dispositivo pertinente.</span><span class="sxs-lookup"><span data-stu-id="df3a2-111">Because the [XAddrs](xaddr-validation-rules.md) are not sent in the [Hello](hello-message.md) message, client implementations must send a [Resolve](resolve-message.md) message to get the relevant device address.</span></span> <span data-ttu-id="df3a2-112">La resolución se debe enviar en todas las interfaces de cliente con el mismo identificador de mensaje y el dispositivo debe filtrar los mensajes duplicados según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="df3a2-112">The Resolve should be sent on all client interfaces with the same message ID, and the device should filter duplicate messages as needed.</span></span> <span data-ttu-id="df3a2-113">El uso del mismo identificador de mensaje para el mensaje de resolución permite que el dispositivo elija una interfaz preferida para comunicarse con los clientes si es necesario.</span><span class="sxs-lookup"><span data-stu-id="df3a2-113">Using the same message ID for the Resolve message allows the device to pick a preferred interface for communicating with clients if necessary.</span></span>

<span data-ttu-id="df3a2-114">Al enviar un mensaje [ResolveMatch](resolvematches-message.md) , un dispositivo debe proporcionar [XAddrs](xaddr-validation-rules.md) relacionados con la interfaz de red a través de la cual se transmite el mensaje de unidifusión.</span><span class="sxs-lookup"><span data-stu-id="df3a2-114">When sending a [ResolveMatch](resolvematches-message.md) message, a device should provide [XAddrs](xaddr-validation-rules.md) that relate to the network interface over which it is unicasting the message.</span></span> <span data-ttu-id="df3a2-115">Esta práctica ayuda a evitar varios intentos de conexión de cliente y lógica de reintento complicada.</span><span class="sxs-lookup"><span data-stu-id="df3a2-115">This practice helps to avoid multiple client connection attempts and complicated retry logic.</span></span>

## <a name="metadata-exchange-in-a-multi-homed-environment"></a><span data-ttu-id="df3a2-116">Intercambio de metadatos en un entorno de host múltiple</span><span class="sxs-lookup"><span data-stu-id="df3a2-116">Metadata exchange in a multi-homed environment</span></span>

<span data-ttu-id="df3a2-117">Implementar el intercambio de metadatos en un entorno de host múltiple es más difícil que implementar la detección debido a las versiones de los metadatos.</span><span class="sxs-lookup"><span data-stu-id="df3a2-117">Implementing metadata exchange in a multi-homed environment is more difficult than implementing discovery because of metadata versioning.</span></span> <span data-ttu-id="df3a2-118">Si un cliente solicita metadatos a través de varias interfaces, el cliente puede recibir varios mensajes [GetResponse](getresponse--metadata-exchange--message.md) a través de distintas interfaces.</span><span class="sxs-lookup"><span data-stu-id="df3a2-118">If a client requests metadata over multiple interfaces, then the client can receive multiple [GetResponse](getresponse--metadata-exchange--message.md) messages over different interfaces.</span></span> <span data-ttu-id="df3a2-119">Estos mensajes GetResponse pueden contener diferentes secciones de metadatos de **relación** con la misma versión de metadatos.</span><span class="sxs-lookup"><span data-stu-id="df3a2-119">These GetResponse messages can contain different **Relationship** metadata sections with the same metadata version.</span></span> <span data-ttu-id="df3a2-120">Esto reduce el valor del número de versión de los metadatos.</span><span class="sxs-lookup"><span data-stu-id="df3a2-120">This reduces the value of the metadata version number.</span></span>

<span data-ttu-id="df3a2-121">Existe un enfoque alternativo, en el que se envía un solo mensaje de [GetResponse](getresponse--metadata-exchange--message.md) en respuesta con todas las direcciones del servicio.</span><span class="sxs-lookup"><span data-stu-id="df3a2-121">There is an alternative approach, where a single [GetResponse](getresponse--metadata-exchange--message.md) message is sent in response with all addresses for the service.</span></span> <span data-ttu-id="df3a2-122">El inconveniente de este método es que se puede divulgar información privada, como la topología de redes accesibles indirectamente.</span><span class="sxs-lookup"><span data-stu-id="df3a2-122">The disadvantage of this method is that private information, such as the topology of indirectly accessible networks, may be disclosed.</span></span>

<span data-ttu-id="df3a2-123">En Windows Vista, los metadatos proporcionados por WSDAPI solo contienen direcciones que son válidas para la interfaz en la que se recibió la solicitud de metadatos.</span><span class="sxs-lookup"><span data-stu-id="df3a2-123">On Windows Vista, the metadata provided by WSDAPI contains only addresses that are valid for the interface upon which the metadata request was received.</span></span>

 

 



