---
description: Una hora de archivo es un valor de 64 bits que representa el número de intervalos de 100 segundos que han transcurrido desde la 12:00 A.M. 1 de enero de 1601 hora universal coordinada (UTC). El sistema registra los tiempos de archivo cuando las aplicaciones crean, acceden y escriben en los archivos.
ms.assetid: 52d80b82-9ab0-4631-9e70-85df21da4946
title: Horas de archivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5919a2378e08798e4cd64d8f8357cb55692bd22e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "103913838"
---
# <a name="file-times"></a><span data-ttu-id="1a3bb-105">Horas de archivo</span><span class="sxs-lookup"><span data-stu-id="1a3bb-105">File Times</span></span>

<span data-ttu-id="1a3bb-106">Una *hora de archivo* es un valor de 64 bits que representa el número de intervalos de 100 segundos que han transcurrido desde la 12:00 A.M.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-106">A *file time* is a 64-bit value that represents the number of 100-nanosecond intervals that have elapsed since 12:00 A.M.</span></span> <span data-ttu-id="1a3bb-107">1 de enero de 1601 hora universal coordinada (UTC).</span><span class="sxs-lookup"><span data-stu-id="1a3bb-107">January 1, 1601 Coordinated Universal Time (UTC).</span></span> <span data-ttu-id="1a3bb-108">El sistema registra los tiempos de archivo cuando las aplicaciones crean, acceden y escriben en los archivos.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-108">The system records file times when applications create, access, and write to files.</span></span>

<span data-ttu-id="1a3bb-109">El sistema de archivos NTFS almacena los valores de hora en formato UTC, por lo que no se ven afectados por los cambios en la zona horaria o el horario de verano.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-109">The NTFS file system stores time values in UTC format, so they are not affected by changes in time zone or daylight saving time.</span></span> <span data-ttu-id="1a3bb-110">El sistema de archivos FAT almacena valores de hora basados en la hora local del equipo.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-110">The FAT file system stores time values based on the local time of the computer.</span></span> <span data-ttu-id="1a3bb-111">Por ejemplo, un archivo que se guarda en 3: p.m. PST en Washington se considera 6: p.m. EST en Nueva York en un volumen NTFS, pero se considera 3: p.m. EST en Nueva York en un volumen FAT.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-111">For example, a file that is saved at 3:00pm PST in Washington is seen as 6:00pm EST in New York on an NTFS volume, but it is seen as 3:00pm EST in New York on a FAT volume.</span></span>

<span data-ttu-id="1a3bb-112">Las marcas de tiempo se actualizan en varias ocasiones y por varias razones.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-112">Time stamps are updated at various times and for various reasons.</span></span> <span data-ttu-id="1a3bb-113">La única garantía de una marca de tiempo de archivo es que la hora del archivo se refleja correctamente cuando se cierra el identificador que hace el cambio.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-113">The only guarantee about a file time stamp is that the file time is correctly reflected when the handle that makes the change is closed.</span></span>

<span data-ttu-id="1a3bb-114">No todos los sistemas de archivos pueden registrar los tiempos de creación y último acceso, y no todos los sistemas de archivos los registran de la misma manera.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-114">Not all file systems can record creation and last access times, and not all file systems record them in the same manner.</span></span> <span data-ttu-id="1a3bb-115">Por ejemplo, la resolución de la hora de creación en FAT es de 10 milisegundos, mientras que el tiempo de escritura tiene una resolución de 2 segundos y el tiempo de acceso tiene una resolución de 1 día, por lo que es realmente la fecha de acceso.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-115">For example, the resolution of create time on FAT is 10 milliseconds, while write time has a resolution of 2 seconds and access time has a resolution of 1 day, so it is really the access date.</span></span> <span data-ttu-id="1a3bb-116">El sistema de archivos NTFS retrasa las actualizaciones de la última hora de acceso de un archivo hasta 1 hora después del último acceso.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-116">The NTFS file system delays updates to the last access time for a file by up to 1 hour after the last access.</span></span>

<span data-ttu-id="1a3bb-117">Para recuperar los tiempos de archivo de un archivo especificado, utilice la función [**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) .</span><span class="sxs-lookup"><span data-stu-id="1a3bb-117">To retrieve the file times for a specified file, use the [**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) function.</span></span> <span data-ttu-id="1a3bb-118">**GetFileTime** copia las horas de creación, último acceso y última escritura en estructuras [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) individuales.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-118">**GetFileTime** copies the creation, last access, and last write times to individual [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) structures.</span></span> <span data-ttu-id="1a3bb-119">También puede recuperar los tiempos de archivo mediante las funciones [**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) y [**FindNextFile**](/windows/desktop/api/fileapi/nf-fileapi-findnextfilea) .</span><span class="sxs-lookup"><span data-stu-id="1a3bb-119">You can also retrieve file times using the [**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) and [**FindNextFile**](/windows/desktop/api/fileapi/nf-fileapi-findnextfilea) functions.</span></span> <span data-ttu-id="1a3bb-120">Estas funciones copian las horas de archivo en estructuras **FILETIME** en una estructura de [**datos de \_ búsqueda \_ de Win32**](/windows/desktop/api/minwinbase/ns-minwinbase-win32_find_dataa) .</span><span class="sxs-lookup"><span data-stu-id="1a3bb-120">These functions copy the file times to **FILETIME** structures in a [**WIN32\_FIND\_DATA**](/windows/desktop/api/minwinbase/ns-minwinbase-win32_find_dataa) structure.</span></span> <span data-ttu-id="1a3bb-121">Al escribir en un archivo, la hora de la última escritura no se actualiza completamente hasta que se cierran todos los identificadores que se usan para escribir.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-121">When writing to a file, the last write time is not fully updated until all handles that are used for writing are closed.</span></span>

<span data-ttu-id="1a3bb-122">Para establecer las horas de archivo de un archivo, use la función [**SetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-setfiletime) .</span><span class="sxs-lookup"><span data-stu-id="1a3bb-122">To set the file times for a file, use the [**SetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-setfiletime) function.</span></span> <span data-ttu-id="1a3bb-123">Esta función le permite modificar la creación, el último acceso y las horas de última escritura sin cambiar el contenido del archivo.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-123">This function lets you modify creation, last access, and last write times without changing the content of the file.</span></span> <span data-ttu-id="1a3bb-124">Puede comparar las horas de archivos diferentes mediante la función [**CompareFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-comparefiletime) .</span><span class="sxs-lookup"><span data-stu-id="1a3bb-124">You can compare the times of different files by using the [**CompareFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-comparefiletime) function.</span></span> <span data-ttu-id="1a3bb-125">La función compara dos horas de archivo y devuelve un valor que indica qué hora es posterior o devuelve 0 (cero) si las horas son iguales.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-125">The function compares two file times and returns a value that indicates which time is later or returns 0 (zero) if the times are equal.</span></span>

<span data-ttu-id="1a3bb-126">Si tiene previsto modificar las horas de archivo de los archivos especificados, puede convertir una fecha y hora del día a una hora de archivo mediante la función [**SystemTimeToFileTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime) .</span><span class="sxs-lookup"><span data-stu-id="1a3bb-126">If you plan to modify file times for specified files, you can convert a date and time of day to a file time by using the [**SystemTimeToFileTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime) function.</span></span> <span data-ttu-id="1a3bb-127">También puede obtener la hora del sistema en una estructura [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) llamando a la función [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) .</span><span class="sxs-lookup"><span data-stu-id="1a3bb-127">You can also obtain the system time in a [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) structure by calling the [**GetSystemTimeAsFileTime**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemtimeasfiletime) function.</span></span>

<span data-ttu-id="1a3bb-128">Para facilitar la visualización a un usuario de un archivo, use la función [**FileTimeToSystemTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime) .</span><span class="sxs-lookup"><span data-stu-id="1a3bb-128">To make a file time easy to display to a user, use the [**FileTimeToSystemTime**](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime) function.</span></span> <span data-ttu-id="1a3bb-129">**FileTimeToSystemTime** convierte la hora de archivo y copia el mes, el día, el año y la hora del día desde la hora del archivo a una estructura [**SYSTEMTIME**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) .</span><span class="sxs-lookup"><span data-stu-id="1a3bb-129">**FileTimeToSystemTime** converts the file time and copies the month, day, year, and time of day from the file time to a [**SYSTEMTIME**](/windows/win32/api/minwinbase/ns-minwinbase-systemtime) structure.</span></span>

## <a name="file-times-and-daylight-saving-time"></a><span data-ttu-id="1a3bb-130">Horas de archivo y horario de verano</span><span class="sxs-lookup"><span data-stu-id="1a3bb-130">File Times and Daylight Saving Time</span></span>

<span data-ttu-id="1a3bb-131">Debe tener cuidado al usar los tiempos de archivo si el usuario ha configurado el sistema para que se ajuste automáticamente al horario de verano.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-131">You must take care when using file times if the user has set the system to automatically adjust for daylight saving time.</span></span>

<span data-ttu-id="1a3bb-132">Para convertir una hora de archivo en hora local, utilice la función [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime) .</span><span class="sxs-lookup"><span data-stu-id="1a3bb-132">To convert a file time to local time, use the [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime) function.</span></span> <span data-ttu-id="1a3bb-133">Sin embargo, **FileTimeToLocalFileTime** usa la configuración actual para la zona horaria y el horario de verano.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-133">However, **FileTimeToLocalFileTime** uses the current settings for the time zone and daylight saving time.</span></span> <span data-ttu-id="1a3bb-134">Por lo tanto, si es el horario de verano, se tarda en cuenta el horario de verano, incluso si la hora de archivo que está convirtiendo está en el horario estándar.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-134">Therefore, if it is daylight saving time, it takes daylight saving time into account, even if the file time you are converting is in standard time.</span></span>

<span data-ttu-id="1a3bb-135">El sistema de archivos FAT registra las horas en el disco en la hora local.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-135">The FAT file system records times on disk in local time.</span></span> <span data-ttu-id="1a3bb-136">[**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) recupera las horas UTC almacenadas en caché del sistema de archivos FAT.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-136">[**GetFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-getfiletime) retrieves cached UTC times from the FAT file system.</span></span> <span data-ttu-id="1a3bb-137">Cuando se convierte en el horario de verano, el tiempo recuperado por **GetFileTime** está fuera de una hora, ya que la memoria caché no se actualiza.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-137">When it becomes daylight saving time, the time retrieved by **GetFileTime** is off an hour, because the cache is not updated.</span></span> <span data-ttu-id="1a3bb-138">Al reiniciar el equipo, el tiempo almacenado en caché que **GetFileTime** recupera es correcto.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-138">When you restart the computer, the cached time that **GetFileTime** retrieves is correct.</span></span> <span data-ttu-id="1a3bb-139">[**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) recupera la hora local del sistema de archivos FAT y la convierte a UTC mediante la configuración actual de la zona horaria y el horario de verano.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-139">[**FindFirstFile**](/windows/desktop/api/fileapi/nf-fileapi-findfirstfilea) retrieves the local time from the FAT file system and converts it to UTC by using the current settings for the time zone and daylight saving time.</span></span> <span data-ttu-id="1a3bb-140">Por lo tanto, si es el horario de verano, **FindFirstFile** tarda en cuenta el horario de verano, incluso si la hora de archivo que está convirtiendo está en el horario estándar.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-140">Therefore, if it is daylight saving time, **FindFirstFile** takes daylight saving time into account, even if the file time you are converting is in standard time.</span></span>

<span data-ttu-id="1a3bb-141">El sistema de archivos NTFS registra las horas en el disco en UTC.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-141">The NTFS file system records times on disk in UTC.</span></span> <span data-ttu-id="1a3bb-142">Para tener en cuenta el horario de verano al convertir una hora de archivo en una hora local, use la siguiente secuencia de funciones en lugar de usar [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime):</span><span class="sxs-lookup"><span data-stu-id="1a3bb-142">To account for daylight saving time when converting a file time to a local time, use the following sequence of functions instead of using [**FileTimeToLocalFileTime**](/windows/desktop/api/FileAPI/nf-fileapi-filetimetolocalfiletime):</span></span>

-   [<span data-ttu-id="1a3bb-143">**FileTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="1a3bb-143">**FileTimeToSystemTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-filetimetosystemtime)
-   [<span data-ttu-id="1a3bb-144">**SystemTimeToTzSpecificLocalTime**</span><span class="sxs-lookup"><span data-stu-id="1a3bb-144">**SystemTimeToTzSpecificLocalTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetotzspecificlocaltime)
-   [<span data-ttu-id="1a3bb-145">**SystemTimeToFileTime**</span><span class="sxs-lookup"><span data-stu-id="1a3bb-145">**SystemTimeToFileTime**</span></span>](/windows/win32/api/timezoneapi/nf-timezoneapi-systemtimetofiletime)

## <a name="file-times-and-cdfs"></a><span data-ttu-id="1a3bb-146">Tiempos de archivo y CDFS</span><span class="sxs-lookup"><span data-stu-id="1a3bb-146">File Times and CDFS</span></span>

<span data-ttu-id="1a3bb-147">Las marcas de fecha y hora de los archivos que se encuentran en el archivo o que se originan desde el medio mediante el sistema de archivos de disco compacto (CDFS) se ajustan a la zona horaria local.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-147">The date and time stamps of files that are located on or originate from media using Compact Disc File System (CDFS) are adjusted for the local time zone.</span></span> <span data-ttu-id="1a3bb-148">ISO 9660 indica que CDFS debe mostrar la información de fecha correctamente para la zona horaria local.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-148">ISO 9660 states that CDFS is to display the date information correctly for the local time zone.</span></span> <span data-ttu-id="1a3bb-149">Esto se hace para que las fechas de los archivos en CDFS se muestren igual que en el formato de disco universal (UDF).</span><span class="sxs-lookup"><span data-stu-id="1a3bb-149">This is done so that dates for files on CDFS are displayed the same as those on Universal Disk Format (UDF).</span></span> <span data-ttu-id="1a3bb-150">UDF es el estándar más reciente para medios de distribución.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-150">UDF is the newer standard for distribution media.</span></span> <span data-ttu-id="1a3bb-151">Si el código depende de la información de fecha sin modificar de un archivo que reside o se origina desde un medio mediante CDFS, puede que no funcione correctamente.</span><span class="sxs-lookup"><span data-stu-id="1a3bb-151">If your code depends on the unmodified date information for a file that resides on or originates from media using CDFS, it may not function correctly.</span></span>

 

 
