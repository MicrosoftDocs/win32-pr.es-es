---
description: Normalmente, una aplicación se dibuja en una ventana en respuesta a un \_ mensaje de dibujo de WM.
ms.assetid: b2317ce9-e775-450e-91f5-00f735f256a3
title: El mensaje WM_PAINT
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a69f7dab736972d8b7226890144efd8763de856a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104997928"
---
# <a name="the-wm_paint-message"></a><span data-ttu-id="6c7a5-103">Mensaje de \_ dibujo de WM</span><span class="sxs-lookup"><span data-stu-id="6c7a5-103">The WM\_PAINT Message</span></span>

<span data-ttu-id="6c7a5-104">Normalmente, una aplicación se dibuja en una ventana en respuesta a un mensaje de [**\_ dibujo de WM**](wm-paint.md) .</span><span class="sxs-lookup"><span data-stu-id="6c7a5-104">Typically, an application draws in a window in response to a [**WM\_PAINT**](wm-paint.md) message.</span></span> <span data-ttu-id="6c7a5-105">El sistema envía este mensaje a un procedimiento de ventana cuando los cambios en la ventana han alterado el contenido del área cliente.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-105">The system sends this message to a window procedure when changes to the window have altered the content of the client area.</span></span> <span data-ttu-id="6c7a5-106">El sistema solo envía el mensaje si no hay ningún otro mensaje en la cola de mensajes de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-106">The system sends the message only if there are no other messages in the application message queue.</span></span>

<span data-ttu-id="6c7a5-107">Al recibir un mensaje de [**\_ dibujo de WM**](wm-paint.md) , una aplicación puede llamar a [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) para recuperar el contexto de dispositivo de pantalla para el área cliente y usarlo en llamadas a funciones GDI para realizar cualquier operación de dibujo necesaria para actualizar el área cliente.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-107">Upon receiving a [**WM\_PAINT**](wm-paint.md) message, an application can call [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) to retrieve the display device context for the client area and use it in calls to GDI functions to carry out whatever drawing operations are necessary to update the client area.</span></span> <span data-ttu-id="6c7a5-108">Después de completar las operaciones de dibujo, la aplicación llama a la función [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) para liberar el contexto de dispositivo de pantalla.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-108">After completing the drawing operations, the application calls the [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint) function to release the display device context.</span></span>

<span data-ttu-id="6c7a5-109">Antes de que [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) devuelva el contexto de dispositivo de pantalla, el sistema prepara el contexto de dispositivo para la ventana especificada.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-109">Before [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) returns the display device context, the system prepares the device context for the specified window.</span></span> <span data-ttu-id="6c7a5-110">Primero establece la región de recorte para que el contexto del dispositivo sea igual a la intersección de la parte de la ventana que necesita actualizar y la parte que es visible para el usuario.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-110">It first sets the clipping region for the device context to be equal to the intersection of the portion of the window that needs updating and the portion that is visible to the user.</span></span> <span data-ttu-id="6c7a5-111">Solo se vuelven a dibujar las partes de la ventana que han cambiado.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-111">Only those portions of the window that have changed are redrawn.</span></span> <span data-ttu-id="6c7a5-112">Los intentos de dibujar fuera de esta región se recortan y no aparecen en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-112">Attempts to draw outside this region are clipped and do not appear on the screen.</span></span>

<span data-ttu-id="6c7a5-113">El sistema también puede enviar mensajes de [**WM \_ NCPAINT**](wm-ncpaint.md) y [**WM \_ ERASEBKGND**](../winmsg/wm-erasebkgnd.md) al procedimiento de ventana antes de que se devuelva [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) .</span><span class="sxs-lookup"><span data-stu-id="6c7a5-113">The system can also send [**WM\_NCPAINT**](wm-ncpaint.md) and [**WM\_ERASEBKGND**](../winmsg/wm-erasebkgnd.md) messages to the window procedure before [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) returns.</span></span> <span data-ttu-id="6c7a5-114">Estos mensajes dirigen a la aplicación para que dibuje el área no cliente y el fondo de la ventana.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-114">These messages direct the application to draw the nonclient area and window background.</span></span> <span data-ttu-id="6c7a5-115">El *área no cliente* es la parte de una ventana que está fuera del área cliente.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-115">The *nonclient area* is the part of a window that is outside of the client area.</span></span> <span data-ttu-id="6c7a5-116">El área incluye características como la barra de título, el menú ventana (también conocido como menú **del sistema** ) y las barras de desplazamiento.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-116">The area includes features such as the title bar, window menu (also known as the **System** menu), and scroll bars.</span></span> <span data-ttu-id="6c7a5-117">La mayoría de las aplicaciones se basan en la función de ventana predeterminada, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), para dibujar esta área y, por tanto, pasar el mensaje de **WM \_ NCPAINT** a esta función.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-117">Most applications rely on the default window function, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca), to draw this area and therefore pass the **WM\_NCPAINT** message to this function.</span></span> <span data-ttu-id="6c7a5-118">El *fondo* de la ventana es el color o el patrón con el que se rellena una ventana antes de que empiecen otras operaciones de dibujo.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-118">The *window background* is the color or pattern that a window is filled with before other drawing operations begin.</span></span> <span data-ttu-id="6c7a5-119">El fondo cubre todas las imágenes previamente en la ventana o en la pantalla en la ventana.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-119">The background covers any images previously in the window or on the screen under the window.</span></span> <span data-ttu-id="6c7a5-120">Si una ventana pertenece a una clase de ventana que tiene un pincel de fondo de clase, la función **DefWindowProc** dibuja automáticamente el fondo de la ventana.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-120">If a window belongs to a window class having a class background brush, the **DefWindowProc** function draws the window background automatically.</span></span>

<span data-ttu-id="6c7a5-121">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) rellena una estructura [**paintstruct (**](/windows/win32/api/winuser/ns-winuser-paintstruct) con información como las dimensiones de la parte de la ventana que se va a actualizar y una marca que indica si se ha dibujado el fondo de la ventana.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-121">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) fills a [**PAINTSTRUCT**](/windows/win32/api/winuser/ns-winuser-paintstruct) structure with information such as the dimensions of the portion of the window to be updated and a flag indicating whether the window background has been drawn.</span></span> <span data-ttu-id="6c7a5-122">La aplicación puede usar esta información para optimizar el dibujo.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-122">The application can use this information to optimize drawing.</span></span> <span data-ttu-id="6c7a5-123">Por ejemplo, puede usar las dimensiones de la región de actualización, especificada por el miembro **rcPaint** , para limitar el dibujo solo a las partes de la ventana que necesiten actualizarse.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-123">For example, it can use the dimensions of the update region, specified by the **rcPaint** member, to limit drawing to only those portions of the window that need updating.</span></span> <span data-ttu-id="6c7a5-124">Si una aplicación tiene una salida muy simple, puede omitir la región de actualización y dibujarla en toda la ventana, basándose en el sistema para descartar (recortar) cualquier salida innecesaria.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-124">If an application has very simple output, it can ignore the update region and draw in the entire window, relying on the system to discard (clip) any unneeded output.</span></span> <span data-ttu-id="6c7a5-125">Dado que el sistema recorta el dibujo que se extiende fuera de la región de recorte, solo está visible el dibujo que está en la región de actualización.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-125">Because the system clips drawing that extends outside the clipping region, only drawing that is in the update region is visible.</span></span>

<span data-ttu-id="6c7a5-126">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) establece la región de actualización de una ventana en **null**.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-126">[**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) sets the update region of a window to **NULL**.</span></span> <span data-ttu-id="6c7a5-127">Esto borra la región, lo que impide que genere mensajes [**de \_ pintura de WM**](wm-paint.md) posteriores.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-127">This clears the region, preventing it from generating subsequent [**WM\_PAINT**](wm-paint.md) messages.</span></span> <span data-ttu-id="6c7a5-128">Si una aplicación procesa un mensaje de **\_ dibujo de WM** pero no llama a **BeginPaint** ni borra la región de actualización, la aplicación continúa recibiendo mensajes de **WM \_ Paint** siempre y cuando la región no esté vacía.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-128">If an application processes a **WM\_PAINT** message but does not call **BeginPaint** or otherwise clear the update region, the application continues to receive **WM\_PAINT** messages as long as the region is not empty.</span></span> <span data-ttu-id="6c7a5-129">En todos los casos, una aplicación debe borrar la región de actualización antes de volver del mensaje de **\_ dibujo de WM** .</span><span class="sxs-lookup"><span data-stu-id="6c7a5-129">In all cases, an application must clear the update region before returning from the **WM\_PAINT** message.</span></span>

<span data-ttu-id="6c7a5-130">Una vez que la aplicación finaliza el dibujo, debe llamar a [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint).</span><span class="sxs-lookup"><span data-stu-id="6c7a5-130">After the application finishes drawing, it should call [**EndPaint**](/windows/desktop/api/Winuser/nf-winuser-endpaint).</span></span> <span data-ttu-id="6c7a5-131">Para la mayoría de las ventanas, **EndPaint** libera el contexto de dispositivo de pantalla, lo que lo pone a disposición de otras ventanas.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-131">For most windows, **EndPaint** releases the display device context, making it available to other windows.</span></span> <span data-ttu-id="6c7a5-132">**EndPaint** también muestra el símbolo de intercalación, si se ocultó previamente por [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint).</span><span class="sxs-lookup"><span data-stu-id="6c7a5-132">**EndPaint** also shows the caret, if it was previously hidden by [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint).</span></span> <span data-ttu-id="6c7a5-133">**BeginPaint** oculta el símbolo de intercalación para evitar que las operaciones de dibujo lo dañen.</span><span class="sxs-lookup"><span data-stu-id="6c7a5-133">**BeginPaint** hides the caret to prevent drawing operations from corrupting it.</span></span>

-   [<span data-ttu-id="6c7a5-134">La región de actualización</span><span class="sxs-lookup"><span data-stu-id="6c7a5-134">The Update Region</span></span>](the-update-region.md)
-   [<span data-ttu-id="6c7a5-135">Invalidación y validación de la región de actualización</span><span class="sxs-lookup"><span data-stu-id="6c7a5-135">Invalidating and Validating the Update Region</span></span>](invalidating-and-validating-the-update-region.md)
-   [<span data-ttu-id="6c7a5-136">Recuperación de la región de actualización</span><span class="sxs-lookup"><span data-stu-id="6c7a5-136">Retrieving the Update Region</span></span>](retrieving-the-update-region.md)
-   [<span data-ttu-id="6c7a5-137">Exclusión de la región de actualización</span><span class="sxs-lookup"><span data-stu-id="6c7a5-137">Excluding the Update Region</span></span>](excluding-the-update-region.md)
-   [<span data-ttu-id="6c7a5-138">Dibujo sincrónico y asincrónico</span><span class="sxs-lookup"><span data-stu-id="6c7a5-138">Synchronous and Asynchronous Drawing</span></span>](synchronous-and-asynchronous-drawing.md)

 

 
