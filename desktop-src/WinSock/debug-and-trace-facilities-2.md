---
description: Funciones de depuración y seguimiento, y Windows Sockets 2.
ms.assetid: eb29fc21-92d6-4471-860a-fd1c531686f6
title: Funciones de depuración y seguimiento
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7288c6b4d72a7a375ee16da23a25b0a04a46df91
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105696387"
---
# <a name="debug-and-trace-facilities"></a><span data-ttu-id="0b473-103">Funciones de depuración y seguimiento</span><span class="sxs-lookup"><span data-stu-id="0b473-103">Debug and Trace Facilities</span></span>

<span data-ttu-id="0b473-104">Los desarrolladores de aplicaciones de Windows Sockets 2 necesitan aislar errores en:</span><span class="sxs-lookup"><span data-stu-id="0b473-104">Windows Sockets 2 application developers need to isolate bugs in:</span></span>

-   <span data-ttu-id="0b473-105">Aplicación.</span><span class="sxs-lookup"><span data-stu-id="0b473-105">The application.</span></span>
-   <span data-ttu-id="0b473-106">*Ws2 \_32.dll* o uno de los archivos dll de correcciones de compatibilidad (shim).</span><span class="sxs-lookup"><span data-stu-id="0b473-106">The *Ws2\_32.dll* or one of the compatibility shim DLLs.</span></span>
-   <span data-ttu-id="0b473-107">Proveedor de servicios.</span><span class="sxs-lookup"><span data-stu-id="0b473-107">The service provider.</span></span>

<span data-ttu-id="0b473-108">Windows Sockets 2 se ocupa de esta necesidad a través de varios componentes y características:</span><span class="sxs-lookup"><span data-stu-id="0b473-108">Windows Sockets 2 addresses this need through several components and features:</span></span>

-   <span data-ttu-id="0b473-109">Compatibilidad integrada con el seguimiento de Winsock en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="0b473-109">Integrated support for Winsock tracing on Windows Vista and later.</span></span>
-   <span data-ttu-id="0b473-110">Una versión de depuración especialmente diseñada *del \_32.dllWs2* en Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="0b473-110">A specially devised debug version of the *Ws2\_32.dll* on Windows Vista.</span></span>
-   <span data-ttu-id="0b473-111">Una función de depuración y seguimiento primitiva independiente para su uso en Windows Server 2003 y Windows XP.</span><span class="sxs-lookup"><span data-stu-id="0b473-111">A separate primitive debug and trace facility for use on Windows Server 2003 and Windows XP.</span></span>

## <a name="winsock-tracing-using-event-tracing-for-windows"></a><span data-ttu-id="0b473-112">Seguimiento de Winsock con seguimiento de eventos para Windows</span><span class="sxs-lookup"><span data-stu-id="0b473-112">Winsock Tracing using Event Tracing for Windows</span></span>

<span data-ttu-id="0b473-113">La compatibilidad integrada con el seguimiento de Winsock mediante el seguimiento de eventos para Windows (ETW) se incluye en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="0b473-113">Integrated support for Winsock tracing using Event Tracing for Windows (ETW) is included on Windows Vista and later.</span></span> <span data-ttu-id="0b473-114">Este es el método preferido para realizar el seguimiento de llamadas Winsock en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="0b473-114">This is the preferred method for tracing Winsock calls on Windows Vista and later.</span></span> <span data-ttu-id="0b473-115">El seguimiento de Winsock con ETW es ligero y funciona en versiones comerciales de Windows.</span><span class="sxs-lookup"><span data-stu-id="0b473-115">Winsock tracing using ETW is lightweight and works on retail versions of Windows.</span></span> <span data-ttu-id="0b473-116">No se requieren software ni componentes adicionales.</span><span class="sxs-lookup"><span data-stu-id="0b473-116">No additional software or components are required.</span></span> <span data-ttu-id="0b473-117">Esta característica solo debe estar habilitada en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="0b473-117">This feature just needs to be enabled on Windows Vista and later.</span></span> <span data-ttu-id="0b473-118">Para obtener información más detallada, consulte los temas de [seguimiento de Winsock](winsock-tracing.md) .</span><span class="sxs-lookup"><span data-stu-id="0b473-118">For more detailed information, see the [Winsock Tracing](winsock-tracing.md) topics.</span></span>

## <a name="using-a-debug-version-of-ws2_32dll"></a><span data-ttu-id="0b473-119">Usar una versión de depuración de Ws2 \_32.dll</span><span class="sxs-lookup"><span data-stu-id="0b473-119">Using a Debug Version of Ws2\_32.dll</span></span>

<span data-ttu-id="0b473-120">La combinación de una versión de depuración del *\_32.dllWs2* en Windows Vista y el seguimiento de Winsock permite supervisar todas las llamadas a procedimientos a través de la API o el SPI de Windows Sockets 2 y, en cierta medida, controlarlas.</span><span class="sxs-lookup"><span data-stu-id="0b473-120">The combination of a debug version of the *Ws2\_32.dll* on Windows Vista and Winsock tracing allows all procedure calls across the Windows Sockets 2 API or SPI to be monitored and, to some extent, controlled.</span></span>

<span data-ttu-id="0b473-121">Si una versión del kit de desarrollo de software (SDK) de Microsoft Windows para Windows Vista se instala en la ubicación predeterminada, las versiones de depuración de la *\_32.dllWs2* para varias arquitecturas se encuentran en la siguiente carpeta:</span><span class="sxs-lookup"><span data-stu-id="0b473-121">If a version of the Microsoft Windows Software Development Kit (SDK) for Windows Vista is installed to the default location, debug versions of the *Ws2\_32.dll* for various architectures are located under the following folder:</span></span>

<span data-ttu-id="0b473-122">**C: \\ archivos de programa \\ Microsoft SDK \\ Windows \\ v 6.0 \\ noredir**</span><span class="sxs-lookup"><span data-stu-id="0b473-122">**C:\\Program Files\\Microsoft SDKs\\Windows\\v6.0\\NoRedist**</span></span>

<span data-ttu-id="0b473-123">Debe usarse una versión comprobada del *\_32.dllWs2* que coincida con la versión de Windows y el Service Pack que se está probando.</span><span class="sxs-lookup"><span data-stu-id="0b473-123">A checked version of the *Ws2\_32.dll* that matches the version of Windows and the Service Pack you are testing on should be used.</span></span> <span data-ttu-id="0b473-124">Tenga en cuenta que es posible que se hayan aplicado revisiones de seguridad que actualizaron el *\_32.dllWs2* en el sistema de prueba.</span><span class="sxs-lookup"><span data-stu-id="0b473-124">Be aware that security patches may have been applied that updated the *Ws2\_32.dll* on your test system.</span></span> <span data-ttu-id="0b473-125">Los Windows SDK para Windows Vista y las suscripciones de DVD/CD del kit de desarrollo de software (SDK) de la plataforma anterior incluyen compilaciones comprobadas para las distintas versiones de Windows.</span><span class="sxs-lookup"><span data-stu-id="0b473-125">The Windows SDK for Windows Vista and the earlier Platform Software Development Kit (SDK) DVD/CD subscriptions include checked builds for the various versions of Windows.</span></span> <span data-ttu-id="0b473-126">Debe usar la misma versión comprobada de la *\_32.dllWs2* como la versión comercial que se usó en el sistema que se está probando.</span><span class="sxs-lookup"><span data-stu-id="0b473-126">You should use the same checked version of the *Ws2\_32.dll* as the retail version that was used on the system being tested.</span></span> <span data-ttu-id="0b473-127">Tenga en cuenta también que el comportamiento que se ejecuta en una compilación comprobada no será el mismo que cuando se ejecuta con una compilación comercial.</span><span class="sxs-lookup"><span data-stu-id="0b473-127">Note also that behavior running under a checked build will not be the same as running with a retail build.</span></span>

<span data-ttu-id="0b473-128">**Nota:**  El Windows SDK para Windows Server 2008 y versiones posteriores ya no incluye versiones de depuración especiales del *\_32.dllWs2*.</span><span class="sxs-lookup"><span data-stu-id="0b473-128">**Note**  The Windows SDK for Windows Server 2008 and later no longer includes special debug versions of the *Ws2\_32.dll*.</span></span> <span data-ttu-id="0b473-129">En su lugar, los desarrolladores deben usar el seguimiento de Winsock mediante ETW, ya que esta característica no requiere compilaciones de depuración.</span><span class="sxs-lookup"><span data-stu-id="0b473-129">Developers should use Winsock tracing using ETW instead, since this feature does not require debug builds.</span></span>

## <a name="winsock-debug-and-trace-facility-on-windows-server-2003-and-windows-xp"></a><span data-ttu-id="0b473-130">Winsock Debug and Trace Facility en Windows Server 2003 y Windows XP</span><span class="sxs-lookup"><span data-stu-id="0b473-130">Winsock Debug and Trace Facility on Windows Server 2003 and Windows XP</span></span>

<span data-ttu-id="0b473-131">Las versiones anteriores de Windows anteriores a Windows 8 y Windows Server 2012 admiten una característica de depuración y seguimiento de primitivos independiente que se incluye como ejemplo con el Windows SDK y el SDK de la plataforma anterior.</span><span class="sxs-lookup"><span data-stu-id="0b473-131">Older versions of Windows prior to Windows 8 and Windows Server 2012 support a separate primitive debug and trace facility that is included as a sample with the Windows SDK and the older Platform SDK.</span></span> <span data-ttu-id="0b473-132">La característica de depuración/seguimiento solo se debe usar en Windows Server 2003 y Windows XP, donde no se admite el seguimiento de Winsock.</span><span class="sxs-lookup"><span data-stu-id="0b473-132">The debug/trace facility should only be used on Windows Server 2003 and Windows XP where Winsock tracing is not supported.</span></span>

<span data-ttu-id="0b473-133">Si el Windows SDK para Windows 7 está instalado en la ubicación predeterminada, esta característica de seguimiento de Winsock primitivo se instala en la siguiente carpeta:</span><span class="sxs-lookup"><span data-stu-id="0b473-133">If the Windows SDK for Windows 7 is installed to the default location, this primitive Winsock tracing feature is installed in the following folder:</span></span>

<span data-ttu-id="0b473-134">**C: \\ archivos de programa \\ Microsoft SDK \\ Windows \\ v 7.0 \\ Samples \\ NetDs \\ Winsock \\ DT \_ dll**</span><span class="sxs-lookup"><span data-stu-id="0b473-134">**C:\\Program Files\\Microsoft SDKs\\Windows\\v7.0\\Samples\\NetDs\\winsock\\dt\_dll**</span></span>

<span data-ttu-id="0b473-135">El archivo *DbgSpec.doc* de esta carpeta proporciona documentación sobre esta utilidad de seguimiento primitivo.</span><span class="sxs-lookup"><span data-stu-id="0b473-135">The *DbgSpec.doc* file in this folder provides documentation on this primitive trace facility.</span></span> <span data-ttu-id="0b473-136">El código de ejemplo de la \_ carpeta DT dll se debe compilar para usar esta utilidad.</span><span class="sxs-lookup"><span data-stu-id="0b473-136">The sample code in the dt\_dll folder needs to be compiled to use this facility.</span></span> <span data-ttu-id="0b473-137">Los desarrolladores pueden usar el código fuente para desarrollar versiones del archivo DLL de depuración y seguimiento que satisfagan sus necesidades específicas.</span><span class="sxs-lookup"><span data-stu-id="0b473-137">Developers are free to use the source code to develop versions of the debug/trace DLL that meet their specific needs.</span></span>

<span data-ttu-id="0b473-138">Tenga en cuenta que esta característica de seguimiento de Winsock simple solo funcionará con la versión de depuración de *Ws2 \_32.dll* instalado.</span><span class="sxs-lookup"><span data-stu-id="0b473-138">Note that this primitive Winsock trace feature will only work with the debug version of *Ws2\_32.dll* installed.</span></span> <span data-ttu-id="0b473-139">Por lo tanto, tendrá que obtener una versión comprobada de la *\_32.dllWs2* que coincida con la versión de Windows y el Service Pack en el que está probando.</span><span class="sxs-lookup"><span data-stu-id="0b473-139">So you will need to get a checked version of the *Ws2\_32.dll* that matches the version of Windows and the Service Pack you are testing on.</span></span>

<span data-ttu-id="0b473-140">Una limitación de esta utilidad de \_ seguimiento DT dll de DT es que el código de ejemplo utiliza un bloqueo global (sección crítica) para cada llamada de función de Winsock.</span><span class="sxs-lookup"><span data-stu-id="0b473-140">A limitation of this primitive dt\_dll trace facility is that the sample code uses a global lock (critical section) for each Winsock function call.</span></span> <span data-ttu-id="0b473-141">Por lo tanto, esta utilidad no es útil para tratar las condiciones de carrera.</span><span class="sxs-lookup"><span data-stu-id="0b473-141">So this facility is not useful in dealing with race conditions.</span></span> <span data-ttu-id="0b473-142">El código de ejemplo debe reescribirse sustancialmente para que esta utilidad de seguimiento resulte útil para solucionar la mayoría de los problemas reales de Winsock (reemplazando los bloqueos globales).</span><span class="sxs-lookup"><span data-stu-id="0b473-142">The sample code would need to be substantially rewritten to make this trace facility useful for dealing with most real Winsock problems (replacing the global locks).</span></span> <span data-ttu-id="0b473-143">Este código de ejemplo permite a los desarrolladores realizar un seguimiento de las llamadas a procedimientos, las devoluciones de procedimientos, los valores de parámetros y los valores devueltos.</span><span class="sxs-lookup"><span data-stu-id="0b473-143">This sample code does allow developers to trace the procedure calls, procedure returns, parameter values, and return values.</span></span>

<span data-ttu-id="0b473-144">Los desarrolladores pueden utilizar este mecanismo primitivo para realizar el seguimiento de las llamadas a procedimientos, las devoluciones de procedimientos, los valores de parámetros y los valores devueltos.</span><span class="sxs-lookup"><span data-stu-id="0b473-144">Developers can use this primitive mechanism to trace procedure calls, procedure returns, parameter values, and return values.</span></span> <span data-ttu-id="0b473-145">Los valores de parámetro y los valores devueltos se pueden modificar en la llamada de procedimiento o el procedimiento devuelto.</span><span class="sxs-lookup"><span data-stu-id="0b473-145">Parameter values and return values can be altered on procedure call or procedure return.</span></span> <span data-ttu-id="0b473-146">Si lo desea, se puede impedir o redirigir una llamada a un procedimiento.</span><span class="sxs-lookup"><span data-stu-id="0b473-146">If desired, a procedure call can be prevented or redirected.</span></span> <span data-ttu-id="0b473-147">Con acceso a este nivel de información y control, un desarrollador puede aislar mejor un problema en la aplicación, *Ws2 \_32.dll* o proveedor de servicios.</span><span class="sxs-lookup"><span data-stu-id="0b473-147">With access to this level of information and control, a developer is better able to isolate a problem in the application, *Ws2\_32.dll*, or service provider.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0b473-148">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="0b473-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0b473-149">Seguimiento de Winsock</span><span class="sxs-lookup"><span data-stu-id="0b473-149">Winsock Tracing</span></span>](winsock-tracing.md)
</dt> </dl>

 

 



