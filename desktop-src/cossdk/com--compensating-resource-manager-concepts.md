---
description: Puede usar el Administrador de recursos de compensación de COM+ (CRM) para integrar de forma fácil y rápida los recursos de la aplicación con las transacciones de Microsoft Coordinador de transacciones distribuidas (DTC).
ms.assetid: 8d1d034f-8a09-40ae-842a-5251135bd3c8
title: Conceptos de Administrador de recursos de compensación de COM+
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 14206a54ffcb4f7e06ddf7362736a722393b0791
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104000573"
---
# <a name="com-compensating-resource-manager-concepts"></a><span data-ttu-id="ae31f-103">Conceptos de Administrador de recursos de compensación de COM+</span><span class="sxs-lookup"><span data-stu-id="ae31f-103">COM+ Compensating Resource Manager Concepts</span></span>

<span data-ttu-id="ae31f-104">Puede usar el Administrador de recursos de compensación de COM+ (CRM) para integrar de forma fácil y rápida los recursos de la aplicación con las transacciones de Microsoft Coordinador de transacciones distribuidas (DTC).</span><span class="sxs-lookup"><span data-stu-id="ae31f-104">You can use the COM+ Compensating Resource Manager (CRM) to easily and quickly integrate application resources with Microsoft Distributed Transaction Coordinator (DTC) transactions.</span></span> <span data-ttu-id="ae31f-105">Los recursos de la aplicación pueden votar sobre el resultado de una transacción y recibir la notificación final de su resultado.</span><span class="sxs-lookup"><span data-stu-id="ae31f-105">Your application resources can vote on the outcome of a transaction and can receive final notification of its outcome.</span></span> <span data-ttu-id="ae31f-106">Se genera un registro duradero para que los recursos de la aplicación puedan escribir registros que sobreviven a los errores y el CRM recupera este archivo de registro cuando se reinicia la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ae31f-106">A durable log is generated so that your application resources can write records that survive failures, and the CRM recovers this log file when the application restarts.</span></span>

<span data-ttu-id="ae31f-107">Un CRM consta de los dos componentes siguientes:</span><span class="sxs-lookup"><span data-stu-id="ae31f-107">A CRM consists of the following two components:</span></span>

-   <span data-ttu-id="ae31f-108">Trabajador de CRM.</span><span class="sxs-lookup"><span data-stu-id="ae31f-108">CRM Worker.</span></span> <span data-ttu-id="ae31f-109">Este componente realiza el trabajo principal del CRM específico e implementa una interfaz específica de la tarea que necesita realizar.</span><span class="sxs-lookup"><span data-stu-id="ae31f-109">This component performs the main work of the specific CRM and implements an interface specific to the task it needs to perform.</span></span> <span data-ttu-id="ae31f-110">La infraestructura de CRM proporciona una interfaz al trabajador de CRM a través de la cual el trabajador de CRM puede escribir registros en un archivo de registro duradero en el disco.</span><span class="sxs-lookup"><span data-stu-id="ae31f-110">The CRM infrastructure provides an interface to the CRM Worker through which the CRM Worker can write records to a durable log file on disk.</span></span> <span data-ttu-id="ae31f-111">El trabajador de CRM debe escribir registros en el registro y hacerlos duraderos antes de que realice su trabajo para que, si se produce un bloqueo, la recuperación se realice correctamente.</span><span class="sxs-lookup"><span data-stu-id="ae31f-111">The CRM Worker must write records to the log and make them durable before it performs its work so that, if a crash occurs, recovery can occur correctly.</span></span> <span data-ttu-id="ae31f-112">El trabajador de CRM siempre requiere una transacción.</span><span class="sxs-lookup"><span data-stu-id="ae31f-112">The CRM Worker always requires a transaction.</span></span>
-   <span data-ttu-id="ae31f-113">Compensator de CRM.</span><span class="sxs-lookup"><span data-stu-id="ae31f-113">CRM Compensator.</span></span> <span data-ttu-id="ae31f-114">La infraestructura de CRM crea este componente al finalizar la transacción.</span><span class="sxs-lookup"><span data-stu-id="ae31f-114">This component is created by the CRM infrastructure at the completion of the transaction.</span></span> <span data-ttu-id="ae31f-115">Implementa una interfaz definida por la que la infraestructura de CRM puede pasar en las notificaciones de finalización de la transacción y las entradas de registro escritas previamente por el trabajador de CRM.</span><span class="sxs-lookup"><span data-stu-id="ae31f-115">It implements a defined interface by which the CRM infrastructure can pass on notifications of transaction completion and the log records that were previously written by the CRM Worker.</span></span>

<span data-ttu-id="ae31f-116">Una CRM de COM+ proporciona atomicidad con notificaciones transaccionales y durabilidad con el registro de CRM, pero no proporciona aislamiento de recursos.</span><span class="sxs-lookup"><span data-stu-id="ae31f-116">A COM+ CRM provides atomicity with transactional notifications, and durability with the CRM log, but does not provide isolation of resources.</span></span> <span data-ttu-id="ae31f-117">En un entorno multiproceso, es responsabilidad del desarrollador de CRM asegurarse de que el acceso a los recursos, ya sea por parte de varios trabajos de CRM o de aplicaciones externas, se serializa mientras se encuentra en una transacción.</span><span class="sxs-lookup"><span data-stu-id="ae31f-117">In a multithreaded environment, it is the responsibility of the CRM developer to ensure that access to resources, either by multiple CRM Workers or external applications, is serialized while in a transaction.</span></span>

<span data-ttu-id="ae31f-118">Una vez que la transacción ha superado la fase de preparación, el compensador de CRM y los trabajos de CRM pueden ejecutarse simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="ae31f-118">After the transaction has passed the prepare phase, the CRM Compensator and CRM Workers can be running concurrently.</span></span> <span data-ttu-id="ae31f-119">Es posible que el componente de trabajo de CRM de una nueva transacción se active mientras el compensador de CRM de una transacción anterior siga procesando la transacción anterior.</span><span class="sxs-lookup"><span data-stu-id="ae31f-119">It is possible for the CRM Worker component of a new transaction to become active while the CRM Compensator of a previous transaction is still processing the previous transaction.</span></span>

<span data-ttu-id="ae31f-120">Durante los errores antes de la recuperación de la aplicación de servidor CRM, una transacción interrumpida debe considerarse activa y no completa.</span><span class="sxs-lookup"><span data-stu-id="ae31f-120">During failures prior to recovery of the CRM server application, an interrupted transaction should be considered active and not complete.</span></span> <span data-ttu-id="ae31f-121">No es posible que los procesos externos tengan acceso a los recursos que esta transacción determinada estaba cambiando antes de la recuperación del proceso del servidor CRM.</span><span class="sxs-lookup"><span data-stu-id="ae31f-121">It should not be possible for external processes to access the resources that were being changed by this particular transaction prior to recovery of the CRM server process.</span></span>

<span data-ttu-id="ae31f-122">CRM define tres tipos de interfaz para las funciones básicas de CRM:</span><span class="sxs-lookup"><span data-stu-id="ae31f-122">The CRM defines three interface types for the basic CRM functions:</span></span>

-   <span data-ttu-id="ae31f-123">[**ICrmLogControl**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol) se implementa en el funcionario de CRM y el trabajador de CRM lo usa para escribir entradas de registro en el registro.</span><span class="sxs-lookup"><span data-stu-id="ae31f-123">[**ICrmLogControl**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol) is implemented on the CRM clerk and is used by the CRM Worker to write log records to the log.</span></span> <span data-ttu-id="ae31f-124">También lo puede usar el compensador de CRM.</span><span class="sxs-lookup"><span data-stu-id="ae31f-124">It can also used by the CRM Compensator.</span></span>
-   <span data-ttu-id="ae31f-125">[**ICrmCompensator**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensator) y [**ICrmCompensatorVariants**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensatorvariants) se implementan en el compensador de CRM.</span><span class="sxs-lookup"><span data-stu-id="ae31f-125">[**ICrmCompensator**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensator) and [**ICrmCompensatorVariants**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmcompensatorvariants) are implemented on the CRM Compensator.</span></span> <span data-ttu-id="ae31f-126">Estas interfaces se utilizan para proporcionar notificaciones de resultados de transacciones y sus entradas de registro asociadas al compensador de CRM.</span><span class="sxs-lookup"><span data-stu-id="ae31f-126">These interfaces are used to deliver transaction outcome notifications and their associated log records to the CRM Compensator.</span></span> <span data-ttu-id="ae31f-127">Normalmente, el compensador de CRM implementaría solo una de estas interfaces, dependiendo de si requería entradas de registro estructuradas o no estructuradas.</span><span class="sxs-lookup"><span data-stu-id="ae31f-127">Normally, the CRM Compensator would implement only one of these interfaces, depending on whether it required unstructured or structured log records.</span></span> <span data-ttu-id="ae31f-128">Las *entradas de registro estructuradas* son las que se compilan como una colección de variantes y suelen usarse en Microsoft Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="ae31f-128">*Structured log records* are those that are built up as a collection of Variants and are typically for use by Microsoft Visual Basic.</span></span> <span data-ttu-id="ae31f-129">Las *entradas de registro no estructuradas* son simplemente un búfer de bytes y suelen utilizarse en Microsoft Visual C++.</span><span class="sxs-lookup"><span data-stu-id="ae31f-129">*Unstructured log records* are just a buffer of bytes and are typically for use by Microsoft Visual C++.</span></span> <span data-ttu-id="ae31f-130">Un compensador de CRM puede implementar ambas interfaces Compensator; sin embargo, solo se usa una a una para proporcionar entradas de registro.</span><span class="sxs-lookup"><span data-stu-id="ae31f-130">A CRM Compensator can implement both of the compensator interfaces; however, only one at a time is used to deliver log records.</span></span>
-   <span data-ttu-id="ae31f-131">Las interfaces de supervisión de CRM de COM+ se utilizan para supervisar CRMs en una aplicación de servidor determinada.</span><span class="sxs-lookup"><span data-stu-id="ae31f-131">The COM+ CRM monitoring interfaces are used for monitoring the CRMs within a particular server application.</span></span> <span data-ttu-id="ae31f-132">Para obtener información detallada acerca de las interfaces de supervisión, consulte [interfaces de supervisión de CRM de com+](com--crm-monitoring-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="ae31f-132">For detailed information about the monitoring interfaces, see [COM+ CRM Monitoring Interfaces](com--crm-monitoring-interfaces.md).</span></span>

<span data-ttu-id="ae31f-133">En los siguientes temas de esta sección se proporcionan más detalles sobre el servicio COM+ CRM:</span><span class="sxs-lookup"><span data-stu-id="ae31f-133">The following topics in this section provide more detail about the COM+ CRM service:</span></span>

-   [<span data-ttu-id="ae31f-134">Consideraciones de seguridad de COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ae31f-134">COM+ CRM Security Considerations</span></span>](com--crm-security-considerations.md)
-   [<span data-ttu-id="ae31f-135">Proceso operativo COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ae31f-135">COM+ CRM Operating Process</span></span>](com--crm-operating-process.md)
-   [<span data-ttu-id="ae31f-136">Inicio y recuperación de COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ae31f-136">COM+ CRM Startup and Recovery</span></span>](com--crm-startup-and-recovery.md)
-   [<span data-ttu-id="ae31f-137">Usar el CRM de COM+ en un entorno de clústeres</span><span class="sxs-lookup"><span data-stu-id="ae31f-137">Using the COM+ CRM in a Cluster Environment</span></span>](using-the-com--crm-in-a-cluster-environment.md)
-   [<span data-ttu-id="ae31f-138">Control de errores en COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ae31f-138">Error Handling in the COM+ CRM</span></span>](error-handling-in-the-com--crm.md)
-   [<span data-ttu-id="ae31f-139">Configuración del registro de COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ae31f-139">COM+ CRM Registry Settings</span></span>](com--crm-registry-settings.md)
-   [<span data-ttu-id="ae31f-140">Solución de problemas de COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="ae31f-140">Troubleshooting the COM+ CRM</span></span>](troubleshooting-the-com--crm.md)
-   [<span data-ttu-id="ae31f-141">Sugerencias de diseño para desarrollar un CRM de COM+</span><span class="sxs-lookup"><span data-stu-id="ae31f-141">Design Suggestions for Developing a COM+ CRM</span></span>](design-suggestions-for-developing-a-com--crm.md)
-   [<span data-ttu-id="ae31f-142">Interfaces de supervisión de CRM de COM+</span><span class="sxs-lookup"><span data-stu-id="ae31f-142">COM+ CRM Monitoring Interfaces</span></span>](com--crm-monitoring-interfaces.md)
-   [<span data-ttu-id="ae31f-143">Interfaces de CRM para COM+</span><span class="sxs-lookup"><span data-stu-id="ae31f-143">COM+ CRM Interfaces</span></span>](com--crm-interfaces.md)

## <a name="related-topics"></a><span data-ttu-id="ae31f-144">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="ae31f-144">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ae31f-145">Tareas Administrador de recursos de compensación de COM+</span><span class="sxs-lookup"><span data-stu-id="ae31f-145">COM+ Compensating Resource Manager Tasks</span></span>](com--compensating-resource-manager-tasks.md)
</dt> </dl>

 

 



