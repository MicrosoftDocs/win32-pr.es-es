---
title: Captura de streaming desde un dispositivo MCI
description: Captura de streaming desde un dispositivo MCI
ms.assetid: 44cbf375-f97e-426a-a703-dfb1b1933138
keywords:
- MCI (interfaz de control multimedia), captura de streaming
- Mensaje WM_CAP_SET_MCI_DEVICE
- capSetMCIDeviceName (macro)
- Mensaje WM_CAP_GET_MCI_DEVICE
- capGetMCIDeviceName (macro)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ab8cf358a87a812024328abf7fc1aae0509a126f
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "104532361"
---
# <a name="streaming-capture-from-an-mci-device"></a><span data-ttu-id="8d268-108">Captura de streaming desde un dispositivo MCI</span><span class="sxs-lookup"><span data-stu-id="8d268-108">Streaming Capture from an MCI Device</span></span>

<span data-ttu-id="8d268-109">Los dispositivos MCI amplían la operación de captura en captura en tiempo real y captura de fotogramas.</span><span class="sxs-lookup"><span data-stu-id="8d268-109">MCI devices augment the capture operation in real-time capture and step-frame capture.</span></span> <span data-ttu-id="8d268-110">Puede especificar el dispositivo MCI, como un CD o una grabadora de vídeo (VCR), que actúa como origen de vídeo de la operación de captura mediante el mensaje [**del \_ \_ \_ \_ dispositivo MCI del conjunto de Cap de WM**](wm-cap-set-mci-device.md) (o la macro [**capSetMCIDeviceName**](/windows/desktop/api/Vfw/nf-vfw-capsetmcidevicename) ) y especificando el nombre del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8d268-110">You can specify the MCI device, such as a videodisc or video-cassette recorder (VCR), acting as the video source for your capture operation by using the [**WM\_CAP\_SET\_MCI\_DEVICE**](wm-cap-set-mci-device.md) message (or the [**capSetMCIDeviceName**](/windows/desktop/api/Vfw/nf-vfw-capsetmcidevicename) macro) and specifying the name of the device.</span></span> <span data-ttu-id="8d268-111">También puede recuperar el nombre del dispositivo establecido actualmente mediante el mensaje [**Cap de WM \_ \_ obtener \_ \_ dispositivo MCI**](wm-cap-get-mci-device.md) (o la macro [**capGetMCIDeviceName**](/windows/desktop/api/Vfw/nf-vfw-capgetmcidevicename) ).</span><span class="sxs-lookup"><span data-stu-id="8d268-111">You can also retrieve the device name currently set by using the [**WM\_CAP\_GET\_MCI\_DEVICE**](wm-cap-get-mci-device.md) message (or the [**capGetMCIDeviceName**](/windows/desktop/api/Vfw/nf-vfw-capgetmcidevicename) macro).</span></span>

<span data-ttu-id="8d268-112">En la captura en tiempo real, la ventana de captura sincroniza la operación de captura y compensa los retrasos asociados con la colocación del origen de vídeo MCI y la inicialización de los recursos (por ejemplo, los búferes de captura) necesarios para capturar los datos.</span><span class="sxs-lookup"><span data-stu-id="8d268-112">In real-time capture, the capture window synchronizes the capture operation and compensates for delays associated with positioning the MCI video source and initializing the resources (such as capture buffers) required for capturing data.</span></span> <span data-ttu-id="8d268-113">La ventana captura espera que se instale un dispositivo de vídeo MCI válido en el sistema para capturar datos de esta manera.</span><span class="sxs-lookup"><span data-stu-id="8d268-113">The capture window expects a valid MCI video device to be installed in the system for capturing data this way.</span></span>

<span data-ttu-id="8d268-114">Las especificaciones para controlar un dispositivo MCI se almacenan en los miembros de la estructura [**CAPTUREPARMS**](/windows/win32/api/vfw/ns-vfw-captureparms) .</span><span class="sxs-lookup"><span data-stu-id="8d268-114">Specifications for controlling an MCI device are stored in the members of the [**CAPTUREPARMS**](/windows/win32/api/vfw/ns-vfw-captureparms) structure.</span></span> <span data-ttu-id="8d268-115">Entre los orígenes de vídeo compatibles con MCI se incluyen VCR y laserdiscs.</span><span class="sxs-lookup"><span data-stu-id="8d268-115">MCI-compatible video sources include VCRs and laserdiscs.</span></span> <span data-ttu-id="8d268-116">Si el miembro **fMCIControl** de esta estructura se establece en **true**, la ventana de captura coordina la operación MCI.</span><span class="sxs-lookup"><span data-stu-id="8d268-116">If the **fMCIControl** member of this structure is set to **TRUE**, the capture window coordinates MCI operation.</span></span> <span data-ttu-id="8d268-117">La ventana de captura utiliza los parámetros especificados en los miembros **dwMCIStartTime** y **dwMCIStopTime** para obtener las posiciones de inicio y detención, en milisegundos, de la secuencia.</span><span class="sxs-lookup"><span data-stu-id="8d268-117">The capture window uses the parameters specified in the **dwMCIStartTime** and **dwMCIStopTime** members to obtain the starting and stopping positions, in milliseconds, of the sequence.</span></span> <span data-ttu-id="8d268-118">Si el valor de **fMCIControl** es **false**, el origen de vídeo no se trata como un dispositivo MCI y se omite el contenido de **dwMCIStartTime** y **dwMCIStopTime** .</span><span class="sxs-lookup"><span data-stu-id="8d268-118">If the value of **fMCIControl** is **FALSE**, the video source is not treated as an MCI device and the contents of **dwMCIStartTime** and **dwMCIStopTime** are ignored.</span></span>

<span data-ttu-id="8d268-119">Puede usar Media Player para comprobar rápidamente que un dispositivo de vídeo MCI esté conectado correctamente al sistema.</span><span class="sxs-lookup"><span data-stu-id="8d268-119">You can use Media Player to quickly verify that an MCI video device is properly connected to the system.</span></span> <span data-ttu-id="8d268-120">La reproducción de un dispositivo con Media Player comprueba que la configuración de MCI del dispositivo es correcta.</span><span class="sxs-lookup"><span data-stu-id="8d268-120">Playing a device with Media Player verifies that the MCI configuration for the device is correct.</span></span> <span data-ttu-id="8d268-121">Si aparece una imagen en la pantalla de vídeo, el origen de vídeo se conecta correctamente al hardware de captura.</span><span class="sxs-lookup"><span data-stu-id="8d268-121">If an image appears on the video display, the video source is connected properly to the capture hardware.</span></span>

<span data-ttu-id="8d268-122">En la captura de fotogramas, la ventana de captura sincroniza la operación de captura y compensa los retrasos asociados con la colocación del origen de vídeo MCI y la inicialización de los recursos necesarios para capturar los datos.</span><span class="sxs-lookup"><span data-stu-id="8d268-122">In step-frame capture, the capture window synchronizes the capture operation and compensates for the delays associated with positioning the MCI video source and initializing the resources required for capturing data.</span></span> <span data-ttu-id="8d268-123">Además, la ventana de captura garantiza que no se quite ningún fotograma; se recorren los fotogramas de vídeo individualmente, asegurándose de que el fotograma se captura y se almacena antes de capturar el siguiente fotograma en el flujo de vídeo.</span><span class="sxs-lookup"><span data-stu-id="8d268-123">In addition, the capture window ensures that no frames are dropped; it steps through the video frames individually, ensuring that the frame is captured and stored before capturing the next frame in the video stream.</span></span>

<span data-ttu-id="8d268-124">Las especificaciones para controlar la captura del marco de paso se almacenan en los miembros de la estructura [**CAPTUREPARMS**](/windows/win32/api/vfw/ns-vfw-captureparms) .</span><span class="sxs-lookup"><span data-stu-id="8d268-124">Specifications for controlling step-frame capture are stored in the members of the [**CAPTUREPARMS**](/windows/win32/api/vfw/ns-vfw-captureparms) structure.</span></span> <span data-ttu-id="8d268-125">La captura de paso-fotograma usa los siguientes miembros además de los miembros que se usan para la captura en tiempo real: **fStepMCIDevice**, **fStepCaptureAt2x** y **wStepCaptureAverageFrames**.</span><span class="sxs-lookup"><span data-stu-id="8d268-125">Step-frame capture uses the following members in addition to the members used for real-time capture: **fStepMCIDevice**, **fStepCaptureAt2x**, and **wStepCaptureAverageFrames**.</span></span> <span data-ttu-id="8d268-126">Si el miembro **fStepMCIDevice** está establecido en **true**, la ventana de captura coordina la captura de fotogramas.</span><span class="sxs-lookup"><span data-stu-id="8d268-126">If the **fStepMCIDevice** member is set to **TRUE**, the capture window coordinates step-frame capture.</span></span> <span data-ttu-id="8d268-127">La ventana de captura utiliza los parámetros especificados en los miembros **dwMCIStartTime** y **dwMCIStopTime** para las posiciones de inicio y detención, en milisegundos, de la secuencia.</span><span class="sxs-lookup"><span data-stu-id="8d268-127">The capture window uses the parameters specified in the **dwMCIStartTime** and **dwMCIStopTime** members for the starting and stopping positions, in milliseconds, of the sequence.</span></span> <span data-ttu-id="8d268-128">La ventana de captura usa **fStepCaptureAt2x** para determinar si el hardware de captura debe capturar fotogramas de vídeo dos veces la resolución normal y usa **wStepCaptureAverageFrames** para especificar el número de veces que se muestrea cada fotograma de la operación de captura.</span><span class="sxs-lookup"><span data-stu-id="8d268-128">The capture window uses **fStepCaptureAt2x** to determine if the capture hardware should capture video frames at twice the normal resolution and uses **wStepCaptureAverageFrames** to specify the number of times each frame in the capture operation is sampled.</span></span>

<span data-ttu-id="8d268-129">Si **fStepMCIDevice** es **false**, se usa la captura en tiempo real en lugar de la captura de fotogramas de paso y el contenido de **fStepCaptureAt2x** y **wStepCaptureAverageFrames** se omiten.</span><span class="sxs-lookup"><span data-stu-id="8d268-129">If **fStepMCIDevice** is **FALSE**, real-time capture is used instead of step-frame capture and the contents of **fStepCaptureAt2x**, and **wStepCaptureAverageFrames** are ignored.</span></span>

<span data-ttu-id="8d268-130">Si se especifica una captura de fotogramas de paso y **fStepCaptureAt2x** está establecido en **true**, el hardware de captura capturará dos veces la resolución especificada.</span><span class="sxs-lookup"><span data-stu-id="8d268-130">If a step-frame capture is specified and **fStepCaptureAt2x** is set to **TRUE**, the capture hardware captures at twice the specified resolution.</span></span> <span data-ttu-id="8d268-131">(Las resoluciones de alto y ancho se duplican). El software interpola los píxeles de la imagen de resolución superior para generar la imagen en la resolución especificada.</span><span class="sxs-lookup"><span data-stu-id="8d268-131">(The resolutions of both the height and width are doubled.) The software interpolates the pixels in the higher resolution image to produce the image at the specified resolution.</span></span> <span data-ttu-id="8d268-132">Esta forma de promedio puede mejorar la definición de borde de imágenes en un fotograma.</span><span class="sxs-lookup"><span data-stu-id="8d268-132">This form of averaging can improve the edge definition of images in a frame.</span></span> <span data-ttu-id="8d268-133">Puede habilitar esta opción si el hardware no admite la diezmación basada en hardware y está realizando la captura en formato RGB.</span><span class="sxs-lookup"><span data-stu-id="8d268-133">You can enable this option if the hardware does not support hardware-based decimation and you are capturing in the RGB format.</span></span>

> [!Note]  
> <span data-ttu-id="8d268-134">Si el hardware admite la diezmación basada en hardware, puede capturar ejemplos a una velocidad superior a la especificada y usar estos ejemplos adicionales para obtener definiciones de color más coherentes con la imagen original.</span><span class="sxs-lookup"><span data-stu-id="8d268-134">If your hardware supports hardware-based decimation, it can capture samples at a higher rate than specified and use these additional samples to obtain color definitions that are more consistent with the original image.</span></span> <span data-ttu-id="8d268-135">Los ejemplos adicionales se descartan después de usarse y el hardware pasa muestras al controlador de captura a la velocidad especificada.</span><span class="sxs-lookup"><span data-stu-id="8d268-135">The additional samples are discarded after they are used, and the hardware passes samples to the capture driver at the specified rate.</span></span>

 

<span data-ttu-id="8d268-136">Si se especifica una captura de paso-fotograma, el miembro **wStepCaptureAverageFrames** especifica el número de veces que se muestrea un fotograma al crear un marco basado en el ejemplo promedio.</span><span class="sxs-lookup"><span data-stu-id="8d268-136">If a step-frame capture is specified, the **wStepCaptureAverageFrames** member specifies the number of times a frame is sampled when creating a frame based on the average sample.</span></span> <span data-ttu-id="8d268-137">Esta técnica de promedio reduce el ruido de digitalización aleatorio que aparece en un fotograma.</span><span class="sxs-lookup"><span data-stu-id="8d268-137">This averaging technique reduces the random digitization noise appearing in a frame.</span></span> <span data-ttu-id="8d268-138">Un valor típico para el número de promedios es 5.</span><span class="sxs-lookup"><span data-stu-id="8d268-138">A typical value for the number of averages is 5.</span></span>

<span data-ttu-id="8d268-139">Para obtener más información acerca de MCI, consulte [MCI](mci.md).</span><span class="sxs-lookup"><span data-stu-id="8d268-139">For more information about MCI, see [MCI](mci.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="8d268-140">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="8d268-140">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8d268-141">Variaciones de captura</span><span class="sxs-lookup"><span data-stu-id="8d268-141">Capture Variations</span></span>](capture-variations.md)
</dt> </dl>

 

 




