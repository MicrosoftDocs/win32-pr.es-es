---
description: Aunque las aplicaciones llevan a cabo la mayoría de las operaciones de dibujo mientras el \_ mensaje de Paint se está procesando, a veces es más eficaz para una aplicación dibujar directamente en una ventana sin depender del mensaje de dibujo de WM \_ .
ms.assetid: 2d015879-58d2-4cbe-b1cc-445f2e8fd316
title: Dibujo sin el mensaje WM_PAINT
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 66695e85b700de6f62366dedb6fe082f410d4385
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103908489"
---
# <a name="drawing-without-the-wm_paint-message"></a><span data-ttu-id="38822-103">Dibujo sin el mensaje de pintura de WM \_</span><span class="sxs-lookup"><span data-stu-id="38822-103">Drawing Without the WM\_PAINT Message</span></span>

<span data-ttu-id="38822-104">Aunque las aplicaciones llevan a cabo la mayoría de las operaciones de dibujo mientras el mensaje de [**\_ Paint**](wm-paint.md) se está procesando, a veces es más eficaz para una aplicación dibujar directamente en una ventana sin depender del mensaje de **\_ dibujo de WM** .</span><span class="sxs-lookup"><span data-stu-id="38822-104">Although applications carry out most drawing operations while the [**WM\_PAINT**](wm-paint.md) message is processing, it is sometimes more efficient for an application to draw directly in a window without relying on the **WM\_PAINT** message.</span></span> <span data-ttu-id="38822-105">Esto puede ser útil cuando el usuario necesita comentarios inmediatos, como al seleccionar texto y arrastrar o cambiar el tamaño de un objeto.</span><span class="sxs-lookup"><span data-stu-id="38822-105">This can be useful when the user needs immediate feedback, such as when selecting text and dragging or sizing an object.</span></span> <span data-ttu-id="38822-106">En tales casos, la aplicación normalmente dibuja mientras se procesan los mensajes del mouse o del teclado.</span><span class="sxs-lookup"><span data-stu-id="38822-106">In such cases, the application usually draws while processing keyboard or mouse messages.</span></span>

<span data-ttu-id="38822-107">Para dibujar en una ventana sin usar un mensaje de [**\_ dibujo de WM**](wm-paint.md) , la aplicación usa la función [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) o [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) para recuperar un contexto de dispositivo de pantalla para la ventana.</span><span class="sxs-lookup"><span data-stu-id="38822-107">To draw in a window without using a [**WM\_PAINT**](wm-paint.md) message, the application uses the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) or [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function to retrieve a display device context for the window.</span></span> <span data-ttu-id="38822-108">Con el contexto de dispositivo de pantalla, la aplicación puede dibujar en la ventana y evitar la intrusión en otras ventanas.</span><span class="sxs-lookup"><span data-stu-id="38822-108">With the display device context, the application can draw in the window and avoid intruding into other windows.</span></span> <span data-ttu-id="38822-109">Cuando la aplicación ha terminado de dibujar, llama a la función [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) para liberar el contexto de dispositivo de pantalla para que lo usen otras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="38822-109">When the application has finished drawing, it calls the [**ReleaseDC**](/windows/desktop/api/Winuser/nf-winuser-releasedc) function to release the display device context for use by other applications.</span></span>

<span data-ttu-id="38822-110">Al dibujar sin usar un mensaje de [**\_ dibujo de WM**](wm-paint.md) , la aplicación no suele invalidar la ventana.</span><span class="sxs-lookup"><span data-stu-id="38822-110">When drawing without using a [**WM\_PAINT**](wm-paint.md) message, the application usually does not invalidate the window.</span></span> <span data-ttu-id="38822-111">En su lugar, se dibuja de tal manera que puede restaurar fácilmente la ventana y quitar el dibujo.</span><span class="sxs-lookup"><span data-stu-id="38822-111">Instead, it draws in such a fashion that it can easily restore the window and remove the drawing.</span></span> <span data-ttu-id="38822-112">Por ejemplo, cuando el usuario selecciona texto o un objeto, la aplicación normalmente dibuja la selección invirtiendo lo que ya está en la ventana.</span><span class="sxs-lookup"><span data-stu-id="38822-112">For example, when the user selects text or an object, the application typically draws the selection by inverting whatever is already in the window.</span></span> <span data-ttu-id="38822-113">La aplicación puede quitar la selección y restaurar el contenido original de la ventana simplemente invirtiendo de nuevo.</span><span class="sxs-lookup"><span data-stu-id="38822-113">The application can remove the selection and restore the original contents of the window by simply inverting again.</span></span>

<span data-ttu-id="38822-114">La aplicación es responsable de administrar cuidadosamente cualquier cambio que realice en la ventana.</span><span class="sxs-lookup"><span data-stu-id="38822-114">The application is responsible for carefully managing any changes it makes to the window.</span></span> <span data-ttu-id="38822-115">En concreto, si una aplicación dibuja una selección y se produce un mensaje de dibujo de [**WM \_**](wm-paint.md) intermedio, la aplicación debe asegurarse de que los dibujos realizados durante el mensaje no dañen la selección.</span><span class="sxs-lookup"><span data-stu-id="38822-115">In particular, if an application draws a selection and an intervening [**WM\_PAINT**](wm-paint.md) message occurs, the application must ensure that any drawing done during the message does not corrupt the selection.</span></span> <span data-ttu-id="38822-116">Para evitar esto, muchas aplicaciones quitan la selección, llevan a cabo las operaciones de dibujo habituales y, a continuación, restauran la selección cuando se completa el dibujo.</span><span class="sxs-lookup"><span data-stu-id="38822-116">To avoid this, many applications remove the selection, carry out usual drawing operations, and then restore the selection when drawing is complete.</span></span>

 

 



