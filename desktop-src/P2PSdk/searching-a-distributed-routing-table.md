---
description: Para que una aplicación pueda buscar en la tabla de enrutamiento distribuida (DRT), se debe crear una consulta de búsqueda.
ms.assetid: b3403a64-128c-461e-9384-8e62c03322e1
title: Buscar una tabla de enrutamiento distribuida
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1c9977ca395393cef09198182fb8790738d2b00c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105668058"
---
# <a name="searching-a-distributed-routing-table"></a><span data-ttu-id="136ae-103">Buscar una tabla de enrutamiento distribuida</span><span class="sxs-lookup"><span data-stu-id="136ae-103">Searching a Distributed Routing Table</span></span>

<span data-ttu-id="136ae-104">Para que una aplicación pueda buscar en la tabla de enrutamiento distribuida (DRT), se debe crear una consulta de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="136ae-104">Before an application can search the Distributed Routing Table (DRT), a search query must be created.</span></span> <span data-ttu-id="136ae-105">La aplicación especifica el valor de clave deseado cuando se llama a la función [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) .</span><span class="sxs-lookup"><span data-stu-id="136ae-105">The desired key value is specified by the application when the [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) function is called.</span></span> <span data-ttu-id="136ae-106">El comportamiento de la búsqueda viene determinado por la información especificada por la aplicación en la estructura de [**\_ \_ información de búsqueda de DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info) .</span><span class="sxs-lookup"><span data-stu-id="136ae-106">The behavior of the search is determined by information specified by the application in the [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info) structure.</span></span>

<span data-ttu-id="136ae-107">Normalmente, un evento de aplicación se señaliza cuando la búsqueda detecta los resultados y otro al final de la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="136ae-107">Typically, an application event is signaled when the search discovers results and another at the conclusion of the search.</span></span> <span data-ttu-id="136ae-108">Sin embargo, si se establece **fIterative** en la [**información de \_ búsqueda \_ de DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info), se puede señalar un evento de aplicación cuando se realiza el contacto con cada nodo durante el proceso.</span><span class="sxs-lookup"><span data-stu-id="136ae-108">However, if **fIterative** is set in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info), an application event can be signaled when contact is made with each node along the way.</span></span>

<span data-ttu-id="136ae-109">Después de señalar un evento, la aplicación llama a la función [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) para obtener los resultados.</span><span class="sxs-lookup"><span data-stu-id="136ae-109">After an event is signaled, the application then calls the [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) function for the results.</span></span> <span data-ttu-id="136ae-110">Si el código devuelto **es \_ correcto**, los resultados se señalan en la estructura del resultado de la [**\_ búsqueda \_ de DRT**](/windows/desktop/api/drt/ns-drt-drt_search_result) devuelta por la API.</span><span class="sxs-lookup"><span data-stu-id="136ae-110">If the returned code is **S\_OK**, the results are pointed to in the [**DRT\_SEARCH\_RESULT**](/windows/desktop/api/drt/ns-drt-drt_search_result) structure returned by the API.</span></span> <span data-ttu-id="136ae-111">Los resultados devueltos se encuentran en el intervalo de valores especificado en [**\_ \_ información de búsqueda de DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="136ae-111">The returned results fall into the range of values specified in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span> <span data-ttu-id="136ae-112">En caso de que la búsqueda no encuentre ninguna coincidencia, solo se devolverá el valor de **DRT \_ E \_ no \_ más** al final de las devoluciones de resultados.</span><span class="sxs-lookup"><span data-stu-id="136ae-112">In the event that the search finds no matches, only the **DRT\_E\_NO\_MORE** value will be returned at the conclusion of result returns.</span></span>

<span data-ttu-id="136ae-113">La siguiente información detalla cómo los miembros contenidos en [**la \_ \_ información de búsqueda de DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info) permiten a una aplicación dictar específicamente el comportamiento de búsqueda de la infraestructura de DRT:</span><span class="sxs-lookup"><span data-stu-id="136ae-113">The following information details how the members contained in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info) allow an application to specifically dictate the search behavior of the DRT infrastructure:</span></span>

## <a name="fallowcurrentinstancematch"></a><span data-ttu-id="136ae-114">fAllowCurrentInstanceMatch</span><span class="sxs-lookup"><span data-stu-id="136ae-114">fAllowCurrentInstanceMatch</span></span>

<span data-ttu-id="136ae-115">De forma predeterminada, los resultados de búsqueda de DRT incluyen solo las coincidencias encontradas fuera del nodo local.</span><span class="sxs-lookup"><span data-stu-id="136ae-115">By default, DRT search results include only matches found outside of the local node.</span></span> <span data-ttu-id="136ae-116">Establecer **fAllowCurrentInstanceMatch** especifica que los resultados de la búsqueda también incluyen las coincidencias encontradas en la instancia de DRT local.</span><span class="sxs-lookup"><span data-stu-id="136ae-116">Setting **fAllowCurrentInstanceMatch** specifies that the search results also include matches found in the local DRT instance.</span></span>

## <a name="cmaxendpoints"></a><span data-ttu-id="136ae-117">cMaxEndpoints</span><span class="sxs-lookup"><span data-stu-id="136ae-117">cMaxEndpoints</span></span>

<span data-ttu-id="136ae-118">La cantidad y el rango de los resultados devueltos por la búsqueda se especifican mediante la aplicación con los valores **cMaxEndpoints** (quantity) y **pMinimumKey** y **pMaximumKey** (Range) y a los que hace referencia la [**información de \_ búsqueda \_ de DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="136ae-118">The quantity and range of the results returned by the search are specified by the application with the **cMaxEndpoints** (quantity) and the **pMinimumKey** and **pMaximumKey** (range) values, and referenced by [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span>

<span data-ttu-id="136ae-119">Cuando **cMaxEndpoints = 1**, la infraestructura de DRT busca una clave y devuelve una coincidencia en el intervalo especificado por los valores **pMinimumKey** y **pMaximumKey** de [**la \_ \_ información de búsqueda de DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="136ae-119">When **cMaxEndpoints = 1**, the DRT infrastructure searches for a key, returning one match within the range specified by the **pMinimumKey** and **pMaximumKey** values in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span> <span data-ttu-id="136ae-120">Esta coincidencia puede ser una coincidencia exacta o la coincidencia más cercana dentro del intervalo.</span><span class="sxs-lookup"><span data-stu-id="136ae-120">This match can be either an exact match or the nearest match within range.</span></span> <span data-ttu-id="136ae-121">Si no se encuentra ninguna coincidencia, se devuelve **DRT \_ E \_ no \_ More** .</span><span class="sxs-lookup"><span data-stu-id="136ae-121">If a match is not found, **DRT\_E\_NO\_MORE** is returned.</span></span>

<span data-ttu-id="136ae-122">Si **cMaxEndpoints > 1**, la infraestructura de DRT devolverá coincidencias en el intervalo hasta el valor de **cMaxEndpoints**.</span><span class="sxs-lookup"><span data-stu-id="136ae-122">If **cMaxEndpoints > 1**, the DRT infrastructure will return matches within the range up to the value of **cMaxEndpoints**.</span></span> <span data-ttu-id="136ae-123">Las coincidencias devueltas pueden contener una coincidencia exacta o los resultados de coincidencia más cercanos dentro del intervalo.</span><span class="sxs-lookup"><span data-stu-id="136ae-123">The returned matches can contain an exact match or the nearest match results within range.</span></span> <span data-ttu-id="136ae-124">Además, si **pMinimumKey** y **pMaximumKey** se establecen en el mismo valor, se realiza una búsqueda solo para ese valor, devolviendo **DRT \_ E \_ no \_ More** si no se encuentra.</span><span class="sxs-lookup"><span data-stu-id="136ae-124">Additionally, if **pMinimumKey** and **pMaximumKey** are set to the same value, a search is carried out only for that value, returning **DRT\_E\_NO\_MORE** if it is not found.</span></span>

## <a name="fanymatchinrange"></a><span data-ttu-id="136ae-125">fAnyMatchInRange</span><span class="sxs-lookup"><span data-stu-id="136ae-125">fAnyMatchInRange</span></span>

<span data-ttu-id="136ae-126">El miembro **fAnyMatchInRange** indica si la búsqueda se detendrá una vez que la primera coincidencia se encuentra dentro del intervalo especificado, o si la búsqueda continuará para la coincidencia más cercana a la clave especificada en la API de [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) .</span><span class="sxs-lookup"><span data-stu-id="136ae-126">The **fAnyMatchInRange** member indicates whether the search will stop after the first match is located within the specified range, or if the search will continue for the closest match to the key specified in the [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) API.</span></span> <span data-ttu-id="136ae-127">Cuando se establece **fAnyMatchInRange** , la búsqueda se realiza con **cMaxEndpoints = 1** , independientemente del valor de **cMaxEndpoints** especificado en la [**\_ \_ información de búsqueda de DRT**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span><span class="sxs-lookup"><span data-stu-id="136ae-127">When **fAnyMatchInRange** is set, the search is carried out with **cMaxEndpoints = 1** regardless of the specified value of **cMaxEndpoints** in [**DRT\_SEARCH\_INFO**](/windows/desktop/api/drt/ns-drt-drt_search_info).</span></span>

## <a name="fiterative"></a><span data-ttu-id="136ae-128">fIterative</span><span class="sxs-lookup"><span data-stu-id="136ae-128">fIterative</span></span>

<span data-ttu-id="136ae-129">El miembro **fIterative** especifica si cada nodo que se pone en contacto con la infraestructura de DRT durante la búsqueda tendrá los datos de la clave/extremo asociados a él disponibles para la aplicación a través del resultado de la [**\_ búsqueda \_ de DRT**](/windows/desktop/api/drt/ns-drt-drt_search_result).</span><span class="sxs-lookup"><span data-stu-id="136ae-129">The **fIterative** member specifies if each node contacted by the DRT infrastructure during the search will have the key/endpoint data associated with it made available to the application via [**DRT\_SEARCH\_RESULT**](/windows/desktop/api/drt/ns-drt-drt_search_result).</span></span> <span data-ttu-id="136ae-130">Si establece **fIterative** en **true**, se forzará el valor de **cMaxEndpoints = 1** .</span><span class="sxs-lookup"><span data-stu-id="136ae-130">By setting **fIterative** to **TRUE**, the value of **cMaxEndpoints = 1** will be forced.</span></span> <span data-ttu-id="136ae-131">Cuando **fIterative** se establece en **true** en una consulta de búsqueda para DRT, se vuelve a llamar a la aplicación después del contacto con cada nodo o "salto".</span><span class="sxs-lookup"><span data-stu-id="136ae-131">When **fIterative** is set to **TRUE** within a search query for the DRT, the application is called back after contact with each node or "hop."</span></span> <span data-ttu-id="136ae-132">Cada resultado de salto contiene una clave que indica el nodo que la DRT buscará a continuación.</span><span class="sxs-lookup"><span data-stu-id="136ae-132">Each hop result contains a key indicating which node the DRT will search next.</span></span> <span data-ttu-id="136ae-133">Un resultado de salto se devuelve a través de [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) como un resultado **intermedio de \_ coincidencia \_ de DRT** .</span><span class="sxs-lookup"><span data-stu-id="136ae-133">A hop result is returned via [**DrtGetSearchResult**](/windows/desktop/api/drt/nf-drt-drtgetsearchresult) as a **DRT\_MATCH\_INTERMEDIATE** result.</span></span>

## <a name="pminimumkey-and-pmaximumkey"></a><span data-ttu-id="136ae-134">pMinimumKey y pMaximumKey</span><span class="sxs-lookup"><span data-stu-id="136ae-134">pMinimumKey and pMaximumKey</span></span>

<span data-ttu-id="136ae-135">Los miembros **pMinimumKey** y **pMaximumKey** se pueden usar para buscar claves dentro de un intervalo.</span><span class="sxs-lookup"><span data-stu-id="136ae-135">The **pMinimumKey** and **pMaximumKey** members can be used to search for keys falling within a range.</span></span> <span data-ttu-id="136ae-136">Si el miembro **fAnyMatchInRange** se establece en **false**, DRT devolverá las claves más próximas al destino de búsqueda (especificado mediante el argumento pKey pasado en la función [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) ) que se encuentran dentro del intervalo.</span><span class="sxs-lookup"><span data-stu-id="136ae-136">If the **fAnyMatchInRange** member is set to **FALSE**, the DRT will return the closest key(s) to the search target (specified using the pKey argument passed in the [**DrtStartSearch**](/windows/desktop/api/drt/nf-drt-drtstartsearch) function) falling within the range.</span></span> <span data-ttu-id="136ae-137">Tenga en cuenta que el argumento *pKey* pasado a **DrtStartSearch** debe estar dentro del intervalo definido por **pMinimumKey** y **pMaximumKey**.</span><span class="sxs-lookup"><span data-stu-id="136ae-137">Note that the *pKey* argument passed to **DrtStartSearch** must fall within the range defined by **pMinimumKey** and **pMaximumKey**.</span></span> <span data-ttu-id="136ae-138">Para buscar una clave precisa, establezca **pMinimumKey**, **pMaximumKey** y *pKey* en el mismo valor.</span><span class="sxs-lookup"><span data-stu-id="136ae-138">To search for a precise key, set **pMinimumKey**, **pMaximumKey** and *pKey* to the same value.</span></span>

## <a name="related-topics"></a><span data-ttu-id="136ae-139">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="136ae-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="136ae-140">Registrar y anular el registro de claves</span><span class="sxs-lookup"><span data-stu-id="136ae-140">Registering and Deregistering Keys</span></span>](registering-and-deregistering-keys.md)
</dt> <dt>

[<span data-ttu-id="136ae-141">Acerca de las tablas de enrutamiento distribuido</span><span class="sxs-lookup"><span data-stu-id="136ae-141">About Distributed Routing Tables</span></span>](about-distributed-routing-tables.md)
</dt> <dt>

[<span data-ttu-id="136ae-142">Referencia de Table API de enrutamiento distribuido</span><span class="sxs-lookup"><span data-stu-id="136ae-142">Distributed Routing Table API Reference</span></span>](distributed-routing-table-api-reference.md)
</dt> </dl>

 

 



