---
description: La asignación de archivos es la Asociación del contenido de un archivo con una parte del espacio de direcciones virtuales de un proceso.
ms.assetid: 86a8bc81-914d-46a2-99fd-65dfd03bbcdd
title: Asignación de archivos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7f49162a4545d0e087e6b291e429d89049dbf57
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104541851"
---
# <a name="file-mapping"></a><span data-ttu-id="07c7c-103">Asignación de archivos</span><span class="sxs-lookup"><span data-stu-id="07c7c-103">File Mapping</span></span>

<span data-ttu-id="07c7c-104">La *asignación de archivos* es la Asociación del contenido de un archivo con una parte del espacio de direcciones virtuales de un proceso.</span><span class="sxs-lookup"><span data-stu-id="07c7c-104">*File mapping* is the association of a file's contents with a portion of the virtual address space of a process.</span></span> <span data-ttu-id="07c7c-105">El sistema crea un *objeto de asignación de archivos* (también conocido como *objeto de sección*) para mantener esta asociación.</span><span class="sxs-lookup"><span data-stu-id="07c7c-105">The system creates a *file mapping object* (also known as a *section object*) to maintain this association.</span></span> <span data-ttu-id="07c7c-106">Una *vista de archivo* es la parte del espacio de direcciones virtuales que utiliza un proceso para tener acceso al contenido del archivo.</span><span class="sxs-lookup"><span data-stu-id="07c7c-106">A *file view* is the portion of virtual address space that a process uses to access the file's contents.</span></span> <span data-ttu-id="07c7c-107">La asignación de archivos permite que el proceso utilice la entrada y salida aleatorias (e/s) y la e/s secuencial.</span><span class="sxs-lookup"><span data-stu-id="07c7c-107">File mapping allows the process to use both random input and output (I/O) and sequential I/O.</span></span> <span data-ttu-id="07c7c-108">También permite que el proceso funcione de forma eficaz con un archivo de datos de gran tamaño, como una base de datos, sin tener que asignar el archivo completo en la memoria.</span><span class="sxs-lookup"><span data-stu-id="07c7c-108">It also allows the process to work efficiently with a large data file, such as a database, without having to map the whole file into memory.</span></span> <span data-ttu-id="07c7c-109">Varios procesos también pueden usar archivos asignados a memoria para compartir datos.</span><span class="sxs-lookup"><span data-stu-id="07c7c-109">Multiple processes can also use memory-mapped files to share data.</span></span>

<span data-ttu-id="07c7c-110">Los procesos leen y escriben en la vista de archivo mediante punteros, tal como lo harían con memoria asignada dinámicamente.</span><span class="sxs-lookup"><span data-stu-id="07c7c-110">Processes read from and write to the file view using pointers, just as they would with dynamically allocated memory.</span></span> <span data-ttu-id="07c7c-111">El uso de la asignación de archivos mejora la eficacia porque el archivo reside en el disco, pero la vista de archivo reside en la memoria.</span><span class="sxs-lookup"><span data-stu-id="07c7c-111">The use of file mapping improves efficiency because the file resides on disk, but the file view resides in memory.</span></span> <span data-ttu-id="07c7c-112">Los procesos también pueden manipular la vista de archivo con la función [**VirtualProtect (**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) .</span><span class="sxs-lookup"><span data-stu-id="07c7c-112">Processes can also manipulate the file view with the [**VirtualProtect**](/windows/win32/api/memoryapi/nf-memoryapi-virtualprotect) function.</span></span>

<span data-ttu-id="07c7c-113">En la ilustración siguiente se muestra la relación entre el archivo en el disco, un objeto de asignación de archivos y una vista de archivo.</span><span class="sxs-lookup"><span data-stu-id="07c7c-113">The following illustration shows the relationship between the file on disk, a file mapping object, and a file view.</span></span>

![relación entre el archivo en el disco, un objeto de asignación de archivos y una vista de archivo.](images/fmap.png)

<span data-ttu-id="07c7c-115">El archivo en disco puede ser cualquier archivo que desee asignar a la memoria o puede ser el archivo de paginación del sistema.</span><span class="sxs-lookup"><span data-stu-id="07c7c-115">The file on disk can be any file that you want to map into memory, or it can be the system page file.</span></span> <span data-ttu-id="07c7c-116">El objeto de asignación de archivos puede constar de todo o solo parte del archivo.</span><span class="sxs-lookup"><span data-stu-id="07c7c-116">The file mapping object can consist of all or only part of the file.</span></span> <span data-ttu-id="07c7c-117">Está respaldado por el archivo en disco.</span><span class="sxs-lookup"><span data-stu-id="07c7c-117">It is backed by the file on disk.</span></span> <span data-ttu-id="07c7c-118">Esto significa que cuando el sistema intercambia páginas del objeto de asignación de archivos, los cambios realizados en el objeto de asignación de archivos se escriben en el archivo.</span><span class="sxs-lookup"><span data-stu-id="07c7c-118">This means that when the system swaps out pages of the file mapping object, any changes made to the file mapping object are written to the file.</span></span> <span data-ttu-id="07c7c-119">Cuando las páginas del objeto de asignación de archivos se vuelven a intercambiar en, se restauran desde el archivo.</span><span class="sxs-lookup"><span data-stu-id="07c7c-119">When the pages of the file mapping object are swapped back in, they are restored from the file.</span></span>

<span data-ttu-id="07c7c-120">Una vista de archivo puede constar de todo o solo parte del objeto de asignación de archivos.</span><span class="sxs-lookup"><span data-stu-id="07c7c-120">A file view can consist of all or only part of the file mapping object.</span></span> <span data-ttu-id="07c7c-121">Un proceso manipula el archivo a través de las vistas de archivo.</span><span class="sxs-lookup"><span data-stu-id="07c7c-121">A process manipulates the file through the file views.</span></span> <span data-ttu-id="07c7c-122">Un proceso puede crear varias vistas para un objeto de asignación de archivos.</span><span class="sxs-lookup"><span data-stu-id="07c7c-122">A process can create multiple views for a file mapping object.</span></span> <span data-ttu-id="07c7c-123">Las vistas de archivo creadas por cada proceso residen en el espacio de direcciones virtuales de ese proceso.</span><span class="sxs-lookup"><span data-stu-id="07c7c-123">The file views created by each process reside in the virtual address space of that process.</span></span> <span data-ttu-id="07c7c-124">Cuando el proceso necesita datos de una parte del archivo que no sea la que se encuentra en la vista de archivo actual, puede anular la asignación de la vista de archivo actual y, después, crear una nueva vista de archivos.</span><span class="sxs-lookup"><span data-stu-id="07c7c-124">When the process needs data from a portion of the file other than what is in the current file view, it can unmap the current file view, then create a new file view.</span></span>

<span data-ttu-id="07c7c-125">Cuando varios procesos usan el mismo objeto de asignación de archivos para crear vistas para un archivo local, los datos son coherentes.</span><span class="sxs-lookup"><span data-stu-id="07c7c-125">When multiple processes use the same file mapping object to create views for a local file, the data is coherent.</span></span> <span data-ttu-id="07c7c-126">Es decir, las vistas contienen copias idénticas del archivo en el disco.</span><span class="sxs-lookup"><span data-stu-id="07c7c-126">That is, the views contain identical copies of the file on disk.</span></span> <span data-ttu-id="07c7c-127">El archivo no puede residir en un equipo remoto si desea compartir memoria entre varios procesos.</span><span class="sxs-lookup"><span data-stu-id="07c7c-127">The file cannot reside on a remote computer if you want to share memory between multiple processes.</span></span>

<span data-ttu-id="07c7c-128">Para obtener más información, vea los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="07c7c-128">For more information, see the following topics:</span></span>

-   [<span data-ttu-id="07c7c-129">Crear un objeto de asignación de archivos</span><span class="sxs-lookup"><span data-stu-id="07c7c-129">Creating a File Mapping Object</span></span>](creating-a-file-mapping-object.md)
-   [<span data-ttu-id="07c7c-130">Crear una vista de archivo</span><span class="sxs-lookup"><span data-stu-id="07c7c-130">Creating a File View</span></span>](creating-a-file-view.md)
-   [<span data-ttu-id="07c7c-131">Compartir archivos y memoria</span><span class="sxs-lookup"><span data-stu-id="07c7c-131">Sharing Files and Memory</span></span>](sharing-files-and-memory.md)
-   [<span data-ttu-id="07c7c-132">Leer y escribir en una vista de archivo</span><span class="sxs-lookup"><span data-stu-id="07c7c-132">Reading and Writing From a File View</span></span>](reading-and-writing-from-a-file-view.md)
-   [<span data-ttu-id="07c7c-133">Cerrar un objeto de asignación de archivos</span><span class="sxs-lookup"><span data-stu-id="07c7c-133">Closing a File Mapping Object</span></span>](closing-a-file-mapping-object.md)
-   [<span data-ttu-id="07c7c-134">Derechos de acceso y seguridad de asignación de archivos</span><span class="sxs-lookup"><span data-stu-id="07c7c-134">File Mapping Security and Access Rights</span></span>](file-mapping-security-and-access-rights.md)
-   [<span data-ttu-id="07c7c-135">Usar la asignación de archivos</span><span class="sxs-lookup"><span data-stu-id="07c7c-135">Using File Mapping</span></span>](using-file-mapping.md)

 

 
