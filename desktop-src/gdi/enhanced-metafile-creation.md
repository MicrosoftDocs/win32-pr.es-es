---
description: Puede crear un metarchivo mejorado mediante la función CreateEnhMetaFile, proporcionando los argumentos adecuados.
ms.assetid: b012e50e-a7f5-4687-9833-38dacc113d77
title: Creación mejorada de metarchivos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 080c350e41e895c5d4bf834a6f407cca5907743d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103811960"
---
# <a name="enhanced-metafile-creation"></a><span data-ttu-id="807cd-103">Creación mejorada de metarchivos</span><span class="sxs-lookup"><span data-stu-id="807cd-103">Enhanced Metafile Creation</span></span>

<span data-ttu-id="807cd-104">Puede crear un metarchivo mejorado mediante la función [**CreateEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-createenhmetafilea) , proporcionando los argumentos adecuados.</span><span class="sxs-lookup"><span data-stu-id="807cd-104">You create an enhanced metafile by using the [**CreateEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-createenhmetafilea) function, supplying the appropriate arguments.</span></span> <span data-ttu-id="807cd-105">El sistema utiliza estos argumentos para mantener las dimensiones de la imagen, determinar si el metarchivo debe almacenarse en un disco o en la memoria, etc.</span><span class="sxs-lookup"><span data-stu-id="807cd-105">The system uses these arguments to maintain picture dimensions, determine whether the metafile should be stored on a disk or in memory, and so on.</span></span>

<span data-ttu-id="807cd-106">Para mantener las dimensiones de la imagen en los dispositivos de salida, [**CreateEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-createenhmetafilea) requiere la resolución del dispositivo de referencia.</span><span class="sxs-lookup"><span data-stu-id="807cd-106">To maintain picture dimensions across output devices, [**CreateEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-createenhmetafilea) requires the resolution of the reference device.</span></span> <span data-ttu-id="807cd-107">Este *dispositivo de referencia* es el dispositivo en el que apareció por primera vez y el *controlador de dominio de referencia* es el contexto de *dispositivo* asociado al dispositivo de referencia.</span><span class="sxs-lookup"><span data-stu-id="807cd-107">This *reference device* is the device on which the picture first appeared, and the *reference DC* is the *device context* associated with the reference device.</span></span> <span data-ttu-id="807cd-108">Al llamar a la función **CreateEnhMetaFile** , debe proporcionar un identificador que identifique este controlador de dominio.</span><span class="sxs-lookup"><span data-stu-id="807cd-108">When calling the **CreateEnhMetaFile** function, you must supply a handle that identifies this DC.</span></span> <span data-ttu-id="807cd-109">Para obtener este identificador, puede llamar a la función [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) o [**CreateDC**](/windows/desktop/api/Wingdi/nf-wingdi-createdca) .</span><span class="sxs-lookup"><span data-stu-id="807cd-109">You can get this handle by calling the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) or [**CreateDC**](/windows/desktop/api/Wingdi/nf-wingdi-createdca) function.</span></span> <span data-ttu-id="807cd-110">También puede especificar **null** como identificador para usar el dispositivo de pantalla actual para el dispositivo de referencia.</span><span class="sxs-lookup"><span data-stu-id="807cd-110">You can also specify **NULL** as the handle to use the current display device for the reference device.</span></span>

<span data-ttu-id="807cd-111">La mayoría de las aplicaciones almacenan imágenes de forma permanente y, por tanto, crean un metarchivo mejorado que se almacena en un disco. sin embargo, hay algunos casos en los que no es necesario.</span><span class="sxs-lookup"><span data-stu-id="807cd-111">Most applications store pictures permanently and therefore create an enhanced metafile that is stored on a disk; however, there are some instances when this is not necessary.</span></span> <span data-ttu-id="807cd-112">Por ejemplo, una aplicación de procesamiento de texto que proporciona funciones de dibujo de gráficos podría almacenar un gráfico definido por el usuario en la memoria como un metarchivo mejorado y, a continuación, copiar los bits de metarchivo mejorados de la memoria en el archivo de documento del usuario.</span><span class="sxs-lookup"><span data-stu-id="807cd-112">For example, a word-processing application that provides chart-drawing capabilities could store a user-defined chart in memory as an enhanced metafile and then copy the enhanced metafile bits from memory into the user's document file.</span></span> <span data-ttu-id="807cd-113">Una aplicación que requiere un metarchivo almacenado permanentemente en un disco debe proporcionar el nombre de archivo cuando llama a [**CreateEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-createenhmetafilea).</span><span class="sxs-lookup"><span data-stu-id="807cd-113">An application that requires a metafile that is stored permanently on a disk must supply the file name when it calls [**CreateEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-createenhmetafilea).</span></span> <span data-ttu-id="807cd-114">Si no proporciona un nombre de archivo, el sistema lo trata automáticamente como un archivo temporal y lo almacena en la memoria.</span><span class="sxs-lookup"><span data-stu-id="807cd-114">If you do not supply a file name, the system automatically treats the metafile as a temporary file and stores it in memory.</span></span>

<span data-ttu-id="807cd-115">Puede Agregar una descripción de texto opcional a un metarchivo que contenga información sobre la imagen y el autor.</span><span class="sxs-lookup"><span data-stu-id="807cd-115">You can add an optional text description to a metafile containing information about the picture and the author.</span></span> <span data-ttu-id="807cd-116">Una aplicación puede mostrar estas cadenas en el cuadro de diálogo Abrir archivo para proporcionar al usuario información sobre el contenido del metarchivo que le ayudará a seleccionar el archivo adecuado.</span><span class="sxs-lookup"><span data-stu-id="807cd-116">An application can display these strings in the File Open dialog box to provide the user with information about metafile content that will help in selecting the appropriate file.</span></span> <span data-ttu-id="807cd-117">Si una aplicación incluye la descripción del texto, debe proporcionar un puntero a la cadena cuando llama a [**CreateEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-createenhmetafilea).</span><span class="sxs-lookup"><span data-stu-id="807cd-117">If an application includes the text description, it must supply a pointer to the string when it calls [**CreateEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-createenhmetafilea).</span></span>

<span data-ttu-id="807cd-118">Cuando [**CreateEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-createenhmetafilea) se ejecuta correctamente, devuelve un identificador que identifica un contexto de dispositivo de metarchivo especial.</span><span class="sxs-lookup"><span data-stu-id="807cd-118">When [**CreateEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-createenhmetafilea) succeeds, it returns a handle that identifies a special metafile device context.</span></span> <span data-ttu-id="807cd-119">Un contexto de dispositivo de metarchivo es único en que está asociado a un archivo en lugar de a un dispositivo de salida.</span><span class="sxs-lookup"><span data-stu-id="807cd-119">A metafile device context is unique in that it is associated with a file rather than with an output device.</span></span> <span data-ttu-id="807cd-120">Cuando el sistema procesa una función GDI que ha recibido un identificador de un contexto de dispositivo de metarchivo, convierte la función GDI en un registro de metarchivo mejorado y anexa el registro al final del metarchivo mejorado.</span><span class="sxs-lookup"><span data-stu-id="807cd-120">When the system processes a GDI function that received a handle to a metafile device context, it converts the GDI function into an enhanced-metafile record and appends the record to the end of the enhanced metafile.</span></span>

<span data-ttu-id="807cd-121">Una vez que se completa una imagen y se anexa el último registro al metarchivo mejorado, la aplicación puede cerrar el archivo mediante una llamada a la función [**CloseEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-closeenhmetafile) .</span><span class="sxs-lookup"><span data-stu-id="807cd-121">After a picture is complete and the last record is appended to the enhanced metafile, the application can close the file by calling the [**CloseEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-closeenhmetafile) function.</span></span> <span data-ttu-id="807cd-122">Esta función cierra y elimina el contexto de dispositivo de metarchivo especial y devuelve un identificador que identifica el metarchivo mejorado.</span><span class="sxs-lookup"><span data-stu-id="807cd-122">This function closes and deletes the special metafile device context and returns a handle identifying the enhanced metafile.</span></span>

<span data-ttu-id="807cd-123">Para eliminar un metarchivo de formato mejorado o un controlador de metarchivo con formato mejorado, llame a la función [**DeleteEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-deleteenhmetafile) .</span><span class="sxs-lookup"><span data-stu-id="807cd-123">To delete an enhanced-format metafile or an enhanced-format metafile handle, call the [**DeleteEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-deleteenhmetafile) function.</span></span>

 

 



