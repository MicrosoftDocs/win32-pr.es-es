---
description: El receptor de archivos MPEG-4 crea archivos MP4.
ms.assetid: 069b8e72-d081-466e-ac8d-c3f81c8a6f35
title: Receptor de archivos MPEG-4
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 6c27517463bca7dfa88fdbc09d77f7a6512c896d
ms.sourcegitcommit: 9c8ddec1e955f181beecad0478c1fb79013b5e9d
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/21/2021
ms.locfileid: "105653117"
---
# <a name="mpeg-4-file-sink"></a><span data-ttu-id="98b5f-103">Receptor de archivos MPEG-4</span><span class="sxs-lookup"><span data-stu-id="98b5f-103">MPEG-4 File Sink</span></span>

<span data-ttu-id="98b5f-104">El receptor de archivos MPEG-4 crea archivos MP4.</span><span class="sxs-lookup"><span data-stu-id="98b5f-104">The MPEG-4 file sink creates MP4 files.</span></span> <span data-ttu-id="98b5f-105">Para obtener más información sobre el formato de archivo MP4, consulte los siguientes documentos de estándares:</span><span class="sxs-lookup"><span data-stu-id="98b5f-105">For more information about the MP4 file format, refer to the following standards documents:</span></span>

-   <span data-ttu-id="98b5f-106">ISO/IEC 14496-12: *tecnología de la información: codificación de objetos visuales de audio, parte 12: formato de archivo multimedia básico ISO*</span><span class="sxs-lookup"><span data-stu-id="98b5f-106">ISO/IEC 14496-12: *Information technology -- Coding of audio-visual objects -- Part 12: ISO Base Media File Format*</span></span>
-   <span data-ttu-id="98b5f-107">ISO/IEC 14496-14: *tecnología de la información: codificación de objetos visuales de audio, parte 14: formato de archivo MP4*</span><span class="sxs-lookup"><span data-stu-id="98b5f-107">ISO/IEC 14496-14: *Information technology -- Coding of audio-visual objects -- Part 14: MP4 File Format*</span></span>

> [!Note]  
> <span data-ttu-id="98b5f-108">(Es posible que estos recursos no estén disponibles en algunos idiomas y países).</span><span class="sxs-lookup"><span data-stu-id="98b5f-108">(These resources may not be available in some languages and countries.)</span></span>

 

<span data-ttu-id="98b5f-109">El receptor de archivos MPEG-4 no encapsula la funcionalidad de codificación.</span><span class="sxs-lookup"><span data-stu-id="98b5f-109">The MPEG-4 file sink does not encapsulate encoding functionality.</span></span>

<span data-ttu-id="98b5f-110">Para crear el receptor de archivos MPEG-4, llame a la función [**MFCreateMPEG4MediaSink**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatempeg4mediasink) .</span><span class="sxs-lookup"><span data-stu-id="98b5f-110">To create the MPEG-4 file sink, call the [**MFCreateMPEG4MediaSink**](/windows/desktop/api/mfidl/nf-mfidl-mfcreatempeg4mediasink) function.</span></span> <span data-ttu-id="98b5f-111">El receptor de archivos MPEG-4 expone las siguientes interfaces a través de **QueryInterface**:</span><span class="sxs-lookup"><span data-stu-id="98b5f-111">The MPEG-4 file sink exposes the following interfaces through **QueryInterface**:</span></span>

-   [<span data-ttu-id="98b5f-112">**IMFClockStateSink**</span><span class="sxs-lookup"><span data-stu-id="98b5f-112">**IMFClockStateSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfclockstatesink)
-   [<span data-ttu-id="98b5f-113">**IMFFinalizableMediaSink**</span><span class="sxs-lookup"><span data-stu-id="98b5f-113">**IMFFinalizableMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imffinalizablemediasink)
-   [<span data-ttu-id="98b5f-114">**IMFGetService**</span><span class="sxs-lookup"><span data-stu-id="98b5f-114">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)
-   [<span data-ttu-id="98b5f-115">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="98b5f-115">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator)
-   [<span data-ttu-id="98b5f-116">**IMFMediaSink**</span><span class="sxs-lookup"><span data-stu-id="98b5f-116">**IMFMediaSink**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink)

## <a name="sample-description-box"></a><span data-ttu-id="98b5f-117">Cuadro de Descripción del ejemplo</span><span class="sxs-lookup"><span data-stu-id="98b5f-117">Sample Description Box</span></span>

<span data-ttu-id="98b5f-118">MP4 es un formato de contenedor extensible.</span><span class="sxs-lookup"><span data-stu-id="98b5f-118">MP4 is an extensible container format.</span></span> <span data-ttu-id="98b5f-119">La especificación MP4 no define una estructura fija para describir los tipos de medios en un contenedor MP4.</span><span class="sxs-lookup"><span data-stu-id="98b5f-119">The MP4 specification does not define a fixed structure for describing media types in an MP4 container.</span></span> <span data-ttu-id="98b5f-120">En su lugar, define una jerarquía de objetos que permite definir estructuras personalizadas para cada formato.</span><span class="sxs-lookup"><span data-stu-id="98b5f-120">Instead, it defines an object hierarchy that allows custom structures to be defined for each format.</span></span> <span data-ttu-id="98b5f-121">La descripción del formato se almacena en el cuadro Descripción del ejemplo (' stsd ') para cada flujo.</span><span class="sxs-lookup"><span data-stu-id="98b5f-121">The format description is stored in the sample description ('stsd') box for each stream.</span></span> <span data-ttu-id="98b5f-122">El cuadro Descripción del ejemplo contiene una lista de entradas de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="98b5f-122">The sample description box contains a list of sample entries.</span></span> <span data-ttu-id="98b5f-123">Para cada entrada de ejemplo, un código de 4 bytes, similar a un FOURCC, define la estructura de formato.</span><span class="sxs-lookup"><span data-stu-id="98b5f-123">For each sample entry, a 4-byte code, similar to a FOURCC, defines the format structure.</span></span>

<span data-ttu-id="98b5f-124">El receptor de archivos MPEG-4 puede generar el cuadro de Descripción del ejemplo para los siguientes formatos:</span><span class="sxs-lookup"><span data-stu-id="98b5f-124">The MPEG-4 File Sink can generate the sample description box for the following formats:</span></span>

-   <span data-ttu-id="98b5f-125">Vídeo H. 264/AVC</span><span class="sxs-lookup"><span data-stu-id="98b5f-125">H.264/AVC video</span></span>
-   <span data-ttu-id="98b5f-126">Audio AAC</span><span class="sxs-lookup"><span data-stu-id="98b5f-126">AAC audio</span></span>
-   <span data-ttu-id="98b5f-127">Audio MP3</span><span class="sxs-lookup"><span data-stu-id="98b5f-127">MP3 audio</span></span>

<span data-ttu-id="98b5f-128">Para otros formatos, el cuadro Descripción del ejemplo debe proporcionarse en el tipo de medio para cada flujo.</span><span class="sxs-lookup"><span data-stu-id="98b5f-128">For other formats, the sample description box must be provided in the media type for each stream.</span></span> <span data-ttu-id="98b5f-129">Para especificar el cuadro Descripción del ejemplo, establezca los siguientes atributos en el tipo de medio:</span><span class="sxs-lookup"><span data-stu-id="98b5f-129">To specify the sample description box, set the following attributes on the media type:</span></span>



| <span data-ttu-id="98b5f-130">Atributo</span><span class="sxs-lookup"><span data-stu-id="98b5f-130">Attribute</span></span>                                                                     | <span data-ttu-id="98b5f-131">Descripción</span><span class="sxs-lookup"><span data-stu-id="98b5f-131">Description</span></span>                                                                                                                                                   |
|-------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="98b5f-132">\_Descripción del \_ ejemplo de MPEG4 MT \_ de MF \_</span><span class="sxs-lookup"><span data-stu-id="98b5f-132">MF\_MT\_MPEG4\_SAMPLE\_DESCRIPTION</span></span>](mf-mt-mpeg4-sample-description.md)      | <span data-ttu-id="98b5f-133">Contiene el cuadro de Descripción del ejemplo como un BLOB binario.</span><span class="sxs-lookup"><span data-stu-id="98b5f-133">Contains the sample description box as a binary blob.</span></span>                                                                                                         |
| [<span data-ttu-id="98b5f-134">\_Entrada de \_ \_ ejemplo actual \_ MPEG4 \_ de MF MT</span><span class="sxs-lookup"><span data-stu-id="98b5f-134">MF\_MT\_MPEG4\_CURRENT\_SAMPLE\_ENTRY</span></span>](mf-mt-mpeg4-current-sample-entry.md) | <span data-ttu-id="98b5f-135">Especifica cuál de las entradas de ejemplo en el cuadro Descripción del ejemplo está activa actualmente.</span><span class="sxs-lookup"><span data-stu-id="98b5f-135">Specifies which of the sample entries in the sample description box is currently active.</span></span> <span data-ttu-id="98b5f-136">(Opcional).</span><span class="sxs-lookup"><span data-stu-id="98b5f-136">(Optional.)</span></span><br/> <span data-ttu-id="98b5f-137">Actualmente, el valor debe ser cero.</span><span class="sxs-lookup"><span data-stu-id="98b5f-137">Currently, the value must be zero.</span></span><br/> |



 

<span data-ttu-id="98b5f-138">En algunos casos, no es posible generar un cuadro de descripción de ejemplo hasta que todos los datos se hayan codificado.</span><span class="sxs-lookup"><span data-stu-id="98b5f-138">In some cases, it is not possible to generate a sample description box until all of the data has been encoded.</span></span> <span data-ttu-id="98b5f-139">Por ejemplo, la información como la velocidad de bits media podría no conocerse con anterioridad.</span><span class="sxs-lookup"><span data-stu-id="98b5f-139">For example, information such as the average bit rate might not be known ahead of time.</span></span> <span data-ttu-id="98b5f-140">En ese caso, puede actualizar el tipo de medio mediante la interfaz [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) en el receptor de archivos MPEG-4.</span><span class="sxs-lookup"><span data-stu-id="98b5f-140">In that case, you can update the media type by using the [**IMFMediaTypeHandler**](/windows/desktop/api/mfidl/nn-mfidl-imfmediatypehandler) interface on the MPEG-4 file sink.</span></span> <span data-ttu-id="98b5f-141">Esto debe hacerse antes de finalizar el receptor de medios.</span><span class="sxs-lookup"><span data-stu-id="98b5f-141">This must be done before the media sink is finalized.</span></span>

<span data-ttu-id="98b5f-142">Normalmente, el tipo de medio lo crea un codificador de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="98b5f-142">Typically the media type is created by an upstream encoder.</span></span> <span data-ttu-id="98b5f-143">El codificador puede generar un nuevo tipo de medio durante el streaming, a través de un cambio de formato dinámico.</span><span class="sxs-lookup"><span data-stu-id="98b5f-143">The encoder can generate a new media type during streaming, through a dynamic format change.</span></span> <span data-ttu-id="98b5f-144">Para obtener más información, consulte [Dynamic Format Changes](basic-mft-processing-model.md).</span><span class="sxs-lookup"><span data-stu-id="98b5f-144">For more information, see [Dynamic Format Changes](basic-mft-processing-model.md).</span></span>

## <a name="h264avc-video"></a><span data-ttu-id="98b5f-145">Vídeo H. 264/AVC</span><span class="sxs-lookup"><span data-stu-id="98b5f-145">H.264/AVC Video</span></span>

<span data-ttu-id="98b5f-146">El receptor de archivos MPEG-4 admite la versión de la secuencia AVC que tiene una secuencia de vídeo elemental, con el conjunto de parámetros de secuencia (SPS) y el conjunto de parámetros de imagen (PPS) NALUs contenidos en el cuadro Descripción del ejemplo, como se define en la sección 5,1 de ISO/IEC 14496.</span><span class="sxs-lookup"><span data-stu-id="98b5f-146">The MPEG-4 file sink supports the version of the AVC stream that has an elementary video stream, with sequence parameter set (SPS) and picture parameter set (PPS) NALUs contained in the sample description box, as defined in ISO/IEC 14496 part 15 section 5.1.</span></span> <span data-ttu-id="98b5f-147">El receptor de archivos no admite el método alternativo para almacenar SP/PPS NALUs como una secuencia elemental de conjunto de parámetros independiente.</span><span class="sxs-lookup"><span data-stu-id="98b5f-147">The file sink does not support the alternate method of storing SPS/PPS NALUs as a separate parameter-set elementary stream.</span></span>

<span data-ttu-id="98b5f-148">El receptor de archivos MPEG-4 puede generar el cuadro Descripción del ejemplo, pero debe proporcionarse con los SPS y el NALUs de PPS.</span><span class="sxs-lookup"><span data-stu-id="98b5f-148">The MPEG-4 file sink can generate the sample description box, but must be provided with the SPS and PPS NALUs.</span></span> <span data-ttu-id="98b5f-149">Especifique esta información en el tipo de medio estableciendo el atributo de [**\_ encabezado de secuencia MF MT \_ MPEG \_ \_**](mf-mt-mpeg-sequence-header-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="98b5f-149">Specify this information in the media type by setting the [**MF\_MT\_MPEG\_SEQUENCE\_HEADER**](mf-mt-mpeg-sequence-header-attribute.md) attribute.</span></span> <span data-ttu-id="98b5f-150">El valor del atributo es el encabezado de secuencia H. 264.</span><span class="sxs-lookup"><span data-stu-id="98b5f-150">The value of the attribute is the H.264 sequence header.</span></span> <span data-ttu-id="98b5f-151">El encabezado de secuencia debe constar de los SPS y el NALUs de PPS delimitados por códigos de inicio de 3 bytes o de 4 bytes.</span><span class="sxs-lookup"><span data-stu-id="98b5f-151">The sequence header must consist of the SPS and PPS NALUs delimited by either 3-byte or 4-byte start codes.</span></span>

<span data-ttu-id="98b5f-152">Opcionalmente, al configurar el receptor de archivos, puede omitir el atributo de [**\_ encabezado de secuencia MF MT \_ MPEG \_ \_**](mf-mt-mpeg-sequence-header-attribute.md) del tipo de medio inicial.</span><span class="sxs-lookup"><span data-stu-id="98b5f-152">Optionally, when you configure the file sink, you can omit the [**MF\_MT\_MPEG\_SEQUENCE\_HEADER**](mf-mt-mpeg-sequence-header-attribute.md) attribute from the initial media type.</span></span> <span data-ttu-id="98b5f-153">En ese caso, debe actualizar el tipo de medio más adelante para incluir el encabezado de secuencia.</span><span class="sxs-lookup"><span data-stu-id="98b5f-153">In that case, you must update the media type later to include the sequence header.</span></span>

<span data-ttu-id="98b5f-154">El receptor de archivos MPEG-4 tiene los siguientes requisitos para AVC bitstreams:</span><span class="sxs-lookup"><span data-stu-id="98b5f-154">The MPEG-4 file sink has the following requirements for AVC bitstreams:</span></span>

-   <span data-ttu-id="98b5f-155">Fragmentada debe ajustarse a la especificación de formato H. 264 Annex B.</span><span class="sxs-lookup"><span data-stu-id="98b5f-155">The bitstream must conform to the H.264 Annex B format specification.</span></span> <span data-ttu-id="98b5f-156">En concreto, NALUs debe delimitarse con códigos de inicio de 3 o 4 bytes.</span><span class="sxs-lookup"><span data-stu-id="98b5f-156">In particular, NALUs must be delimited with either 3-byte or 4-byte start codes.</span></span>
-   <span data-ttu-id="98b5f-157">Los ejemplos de medios deben contener todos los NALUs de segmentos y datos que correspondan a un único tiempo de presentación.</span><span class="sxs-lookup"><span data-stu-id="98b5f-157">Media samples must contain all slice and data NALUs that correspond to a single presentation time.</span></span>
-   <span data-ttu-id="98b5f-158">Al escribir fotogramas B en un archivo MP4, debe establecer la marca de tiempo de presentación y la marca de tiempo de descodificación.</span><span class="sxs-lookup"><span data-stu-id="98b5f-158">When writing B-frames into an MP4 file, you must set both the presentation time stamp and the decode time stamp.</span></span> <span data-ttu-id="98b5f-159">Si Stream tiene un fotograma B y no se establece la marca de tiempo de descodificación, el escritor MP4 verá que la hora del fotograma va hacia atrás y quitará el marco.</span><span class="sxs-lookup"><span data-stu-id="98b5f-159">If stream has a B frame and the decode timestamp is not set, the MP4 writer will see the frame time going backwards and will drop the frame.</span></span> 

## <a name="aac-audio"></a><span data-ttu-id="98b5f-160">Audio AAC</span><span class="sxs-lookup"><span data-stu-id="98b5f-160">AAC Audio</span></span>

<span data-ttu-id="98b5f-161">En el caso del audio AAC, el receptor de archivos MPEG-4 puede generar el cuadro de Descripción del ejemplo para los siguientes subtipos:</span><span class="sxs-lookup"><span data-stu-id="98b5f-161">For AAC audio, the MPEG-4 file sink can generate the sample description box for the following subtypes:</span></span>

-   <span data-ttu-id="98b5f-162">**MFAudioFormat \_ AAC**</span><span class="sxs-lookup"><span data-stu-id="98b5f-162">**MFAudioFormat\_AAC**</span></span>
-   <span data-ttu-id="98b5f-163">**MEDIASUBTYPE \_ raw \_ AAC1**</span><span class="sxs-lookup"><span data-stu-id="98b5f-163">**MEDIASUBTYPE\_RAW\_AAC1**</span></span>

<span data-ttu-id="98b5f-164">Para obtener más información acerca de estos substypes, consulte [tipos de medios AAC](aac-media-types.md).</span><span class="sxs-lookup"><span data-stu-id="98b5f-164">For more information about these substypes, see [AAC Media Types](aac-media-types.md).</span></span>

<span data-ttu-id="98b5f-165">En el caso del subtipo **\_ AAC MFAudioFormat** , el tipo de medio contiene opcionalmente el atributo de [**\_ datos del \_ usuario \_ MF MT**](mf-mt-user-data-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="98b5f-165">For the **MFAudioFormat\_AAC** subtype, the media type optionally contains the [**MF\_MT\_USER\_DATA**](mf-mt-user-data-attribute.md) attribute.</span></span> <span data-ttu-id="98b5f-166">Si está presente, este atributo es la parte de la estructura [**HEAACWAVEINFO**](/windows/win32/api/mmreg/ns-mmreg-heaacwaveinfo) que aparece después de la estructura **WAVEFORMATEX** (es decir, después del miembro de **WFX** ).</span><span class="sxs-lookup"><span data-stu-id="98b5f-166">If present, this attribute the portion of the [**HEAACWAVEINFO**](/windows/win32/api/mmreg/ns-mmreg-heaacwaveinfo) structure that appears after the **WAVEFORMATEX** structure (that is, after the **wfx** member).</span></span> <span data-ttu-id="98b5f-167">A continuación se muestran los datos de AudioSpecificConfig (), tal y como se define en ISO/IEC 14496-3.</span><span class="sxs-lookup"><span data-stu-id="98b5f-167">This is followed by the AudioSpecificConfig() data, as defined by ISO/IEC 14496-3.</span></span> <span data-ttu-id="98b5f-168">Si no está presente el atributo de **\_ datos de \_ usuario \_ de MF MT** , se supone que el perfil de la secuencia es el perfil de la baja complejidad AAC (LC) y el receptor de archivos MPEG-4 genera un cuadro de descripción de ejemplo adecuado.</span><span class="sxs-lookup"><span data-stu-id="98b5f-168">If the **MF\_MT\_USER\_DATA** attribute is not present, the stream is assumed to be AAC Low Complexity (LC) profile, and the MPEG-4 file sink generates a suitable sample description box.</span></span>

<span data-ttu-id="98b5f-169">En el caso del subtipo **MEDIASUBTYPE \_ raw \_ AAC1** , el receptor de medios debe contener el atributo de [**\_ datos de \_ usuario \_ MF MT**](mf-mt-user-data-attribute.md) y el atributo debe contener los datos AudioSpecificConfig ().</span><span class="sxs-lookup"><span data-stu-id="98b5f-169">For the **MEDIASUBTYPE\_RAW\_AAC1** subtype, the media sink must contain the [**MF\_MT\_USER\_DATA**](mf-mt-user-data-attribute.md) attribute, and the attribute must contain the AudioSpecificConfig() data.</span></span>

<span data-ttu-id="98b5f-170">El receptor de archivos MPEG-4 crea la variante MPEG-4 del cuadro de Descripción del ejemplo AAC, utilizando una entrada de ejemplo "mp4a" con objectTypeIndication = 0x40.</span><span class="sxs-lookup"><span data-stu-id="98b5f-170">The MPEG-4 file sink creates the MPEG-4 variant of the AAC sample description box, using an 'mp4a' sample entry with objectTypeIndication = 0x40.</span></span> <span data-ttu-id="98b5f-171">No usa tipos de objeto MPEG-2.</span><span class="sxs-lookup"><span data-stu-id="98b5f-171">It does not use MPEG-2 object types.</span></span>

## <a name="mp3-audio"></a><span data-ttu-id="98b5f-172">Audio MP3</span><span class="sxs-lookup"><span data-stu-id="98b5f-172">MP3 Audio</span></span>

<span data-ttu-id="98b5f-173">En el caso de audio MP3, el receptor de archivos MPEG-4 puede generar el cuadro Descripción de ejemplo a partir de un tipo de medio de audio estándar.</span><span class="sxs-lookup"><span data-stu-id="98b5f-173">For MP3 audio, the MPEG-4 file sink can generate the sample description box from a standard audio media type.</span></span> <span data-ttu-id="98b5f-174">(Consulte [tipos de medios de audio](audio-media-types.md)).</span><span class="sxs-lookup"><span data-stu-id="98b5f-174">(See [Audio Media Types](audio-media-types.md).)</span></span>

<span data-ttu-id="98b5f-175">El receptor de archivos MPEG-4 crea la variante MPEG-4 del cuadro de Descripción del ejemplo MP3, con una entrada de ejemplo "mp4a" con objectTypeIndication = 0x6b para audio MPEG-1.</span><span class="sxs-lookup"><span data-stu-id="98b5f-175">The MPEG-4 file sink creates the MPEG-4 variant of the MP3 sample description box, using an 'mp4a' sample entry with objectTypeIndication = 0x6b for MPEG-1 audio.</span></span>

## <a name="limitations"></a><span data-ttu-id="98b5f-176">Limitaciones</span><span class="sxs-lookup"><span data-stu-id="98b5f-176">Limitations</span></span>

-   <span data-ttu-id="98b5f-177">El tamaño máximo del archivo creado es 4 GB.</span><span class="sxs-lookup"><span data-stu-id="98b5f-177">The maximum size of the authored file is 4 GB.</span></span> <span data-ttu-id="98b5f-178">En Windows 8, se admiten archivos de más de 4 GBGB.</span><span class="sxs-lookup"><span data-stu-id="98b5f-178">In Windows 8, files large than 4 GBGB are supported.</span></span>
-   <span data-ttu-id="98b5f-179">El receptor de archivos MPEG-4 no admite listas de edición (cuadros "EDtS" y "Elst").</span><span class="sxs-lookup"><span data-stu-id="98b5f-179">The MPEG-4 file sink does not support edit lists ('edts' and 'elst' boxes).</span></span>

## <a name="windows-8-updates-to-mpeg-4-source-and-sink"></a><span data-ttu-id="98b5f-180">Actualizaciones de Windows 8 para el origen y el receptor MPEG-4</span><span class="sxs-lookup"><span data-stu-id="98b5f-180">Windows 8 updates to MPEG-4 source and sink</span></span>

-   <span data-ttu-id="98b5f-181">Compatibilidad de lectura y escritura de rotación agregada en el origen y el receptor de MPEG-4 de Windows 8.</span><span class="sxs-lookup"><span data-stu-id="98b5f-181">Rotation read and write support added in Windows 8 MPEG-4 source and sink.</span></span> <span data-ttu-id="98b5f-182">Esto no se admite en el origen y el receptor MPEG-4 de Windows 7.</span><span class="sxs-lookup"><span data-stu-id="98b5f-182">This is not supported in the Windows 7 MPEG-4 source and sink.</span></span>

    <span data-ttu-id="98b5f-183">El origen MPEG-4 Lee el ángulo de rotación de una pista de vídeo activa como la suma del ángulo de rotación de ' mvhd ' y de ' tkhd '.</span><span class="sxs-lookup"><span data-stu-id="98b5f-183">MPEG-4 source reads the rotation angle for an active video track as the sum of the rotation angle from ‘mvhd’ and from ‘tkhd’.</span></span>

    <span data-ttu-id="98b5f-184">El receptor MPEG-4 de Microsoft escribe el ángulo de rotación en ' tkhd ' pero escribe una matriz de 0 grados (identidad) en ' mvhd '.</span><span class="sxs-lookup"><span data-stu-id="98b5f-184">Microsoft MPEG-4 sink writes the rotation angle in ‘tkhd’ but writes 0 degree (identity) matrix in ‘mvhd’.</span></span> <span data-ttu-id="98b5f-185">Tenga en cuenta que el receptor MPEG-4 de Microsoft solo admite una pista de vídeo.</span><span class="sxs-lookup"><span data-stu-id="98b5f-185">Note, Microsoft MPEG-4 sink only supports single video track.</span></span>

    <span data-ttu-id="98b5f-186">IPropertyStore lee el ángulo de rotación solo para la primera pista de vídeo como la suma del ángulo de rotación de ' mvhd ' y de ' tkhd '.</span><span class="sxs-lookup"><span data-stu-id="98b5f-186">IPropertyStore reads the rotation angle for only the first video track as the sum of the rotation angle from ‘mvhd’ and from ‘tkhd’.</span></span>

    <span data-ttu-id="98b5f-187">IPropertyStore escribe el ángulo de rotación solo para la primera pista de vídeo de ' tkhd ' después de ajustar el ángulo de giro según el ángulo de rotación en ' mvhd ', si existe.</span><span class="sxs-lookup"><span data-stu-id="98b5f-187">IPropertyStore writes the rotation angle for only the first video track in ‘tkhd’ after the rotation angle is adjusted according to the rotation angle in ‘mvhd’, if it exists.</span></span>

-   <span data-ttu-id="98b5f-188">Los fragmentos de película (' moof ') se admiten en el origen y el receptor de MPEG-4 de Windows 8, pero no en ' mfra '.</span><span class="sxs-lookup"><span data-stu-id="98b5f-188">Movie fragments ('moof') is supported in Windows 8 MPEG-4 source and sink, but 'mfra' is not.</span></span>
-   <span data-ttu-id="98b5f-189">H. 263 es compatible con el origen de MPEG-4 de Windows 8.</span><span class="sxs-lookup"><span data-stu-id="98b5f-189">H.263 is supported in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="98b5f-190">Ahora, el origen MPEG-4 asigna dos tipos de elemento ' H263 ' y 263 ' en formato de archivo MPEG-4 al tipo de medio de **MFVideoFormat \_ H263**.</span><span class="sxs-lookup"><span data-stu-id="98b5f-190">MPEG-4 source now maps two fourcc’s of ‘h263’ and ‘s263’ in MPEG-4 file format to the media type of **MFVideoFormat\_H263**.</span></span>

-   <span data-ttu-id="98b5f-191">Se agregó más compatibilidad con FourCC para MJPEG en el origen MPEG-4 de Windows 8.</span><span class="sxs-lookup"><span data-stu-id="98b5f-191">More fourcc support added for MJPEG in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="98b5f-192">Los mapas de origen MPEG-4 foucc de ' dmb1 ' al tipo de medio de **MFVideoFormat \_ MJPG**.</span><span class="sxs-lookup"><span data-stu-id="98b5f-192">MPEG-4 source maps foucc of ‘dmb1’ to the media type of **MFVideoFormat\_MJPG**.</span></span>

-   <span data-ttu-id="98b5f-193">Compatibilidad con metadatos furigana agregada en el origen de MPEG-4 de Windows 8.</span><span class="sxs-lookup"><span data-stu-id="98b5f-193">Furigana metadata support added in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="98b5f-194">El origen MPEG-4 Lee los metadatos furigana de ' Soal ', ' vertiginosa ', ' SOAA ', ' SONM ' y ' Soco '.</span><span class="sxs-lookup"><span data-stu-id="98b5f-194">MPEG-4 source reads Furigana metadata from ’soal’, ‘soar’, ‘soaa’, ‘sonm’, and ‘soco’.</span></span> <span data-ttu-id="98b5f-195">IPropertyStore Lee los metadatos de Furignana a través del conjunto de PKEYs correspondiente.</span><span class="sxs-lookup"><span data-stu-id="98b5f-195">IPropertyStore reads Furignana metadata through the set of corresponding PKEYs.</span></span>

    <span data-ttu-id="98b5f-196">En la tabla siguiente se muestra la asignación entre el nombre canónico del shell, la clave de la propiedad y el identificador de cuadro/etiqueta en formato de archivo MPEG-4.</span><span class="sxs-lookup"><span data-stu-id="98b5f-196">The following table shows the mapping between the shell canonical name, the property key, and the box/tag ID in MPEG-4 file format.</span></span>

    

    | <span data-ttu-id="98b5f-197">Campo</span><span class="sxs-lookup"><span data-stu-id="98b5f-197">Field</span></span>                                | <span data-ttu-id="98b5f-198">Clave de propiedad</span><span class="sxs-lookup"><span data-stu-id="98b5f-198">Property Key</span></span>                         | <span data-ttu-id="98b5f-199">IDENTIFICADOR de etiqueta/cuadro</span><span class="sxs-lookup"><span data-stu-id="98b5f-199">Tag/Box ID</span></span> |
    |--------------------------------------|--------------------------------------|------------|
    | <span data-ttu-id="98b5f-200">System. Music. AlbumTitleSortOverride</span><span class="sxs-lookup"><span data-stu-id="98b5f-200">System.Music.AlbumTitleSortOverride</span></span>  | <span data-ttu-id="98b5f-201">PKEY \_ Music \_ AlbumTitleSortOverride</span><span class="sxs-lookup"><span data-stu-id="98b5f-201">PKEY\_Music\_AlbumTitleSortOverride</span></span>  | <span data-ttu-id="98b5f-202">soal</span><span class="sxs-lookup"><span data-stu-id="98b5f-202">soal</span></span>       |
    | <span data-ttu-id="98b5f-203">System. Music. ArtistSortOverride</span><span class="sxs-lookup"><span data-stu-id="98b5f-203">System.Music.ArtistSortOverride</span></span>      | <span data-ttu-id="98b5f-204">PKEY \_ Music \_ ArtistSortOverride</span><span class="sxs-lookup"><span data-stu-id="98b5f-204">PKEY\_Music\_ArtistSortOverride</span></span>      | <span data-ttu-id="98b5f-205">soar</span><span class="sxs-lookup"><span data-stu-id="98b5f-205">soar</span></span>       |
    | <span data-ttu-id="98b5f-206">System. Music. AlbumArtistSortOverride</span><span class="sxs-lookup"><span data-stu-id="98b5f-206">System.Music.AlbumArtistSortOverride</span></span> | <span data-ttu-id="98b5f-207">PKEY \_ Music \_ AlbumArtistSortOverride</span><span class="sxs-lookup"><span data-stu-id="98b5f-207">PKEY\_Music\_AlbumArtistSortOverride</span></span> | <span data-ttu-id="98b5f-208">soaa</span><span class="sxs-lookup"><span data-stu-id="98b5f-208">soaa</span></span>       |
    | <span data-ttu-id="98b5f-209">System. TitleSortOverride</span><span class="sxs-lookup"><span data-stu-id="98b5f-209">System.TitleSortOverride</span></span>             | <span data-ttu-id="98b5f-210">PKEY \_ TitleSortOverride</span><span class="sxs-lookup"><span data-stu-id="98b5f-210">PKEY \_TitleSortOverride</span></span>             | <span data-ttu-id="98b5f-211">sonm</span><span class="sxs-lookup"><span data-stu-id="98b5f-211">sonm</span></span>       |
    | <span data-ttu-id="98b5f-212">System. Music. ComposerSortOverride</span><span class="sxs-lookup"><span data-stu-id="98b5f-212">System.Music.ComposerSortOverride</span></span>    | <span data-ttu-id="98b5f-213">PKEY \_ Music \_ ComposerSortOverride</span><span class="sxs-lookup"><span data-stu-id="98b5f-213">PKEY\_Music\_ComposerSortOverride</span></span>    | <span data-ttu-id="98b5f-214">soco</span><span class="sxs-lookup"><span data-stu-id="98b5f-214">soco</span></span>       |

    

     

-   <span data-ttu-id="98b5f-215">Compatibilidad con Atom 3D estéreo agregada en el origen de MPEG-4 de Windows 8.</span><span class="sxs-lookup"><span data-stu-id="98b5f-215">Stereo 3D atom support added in Windows 8 MPEG-4 source.</span></span>

-   <span data-ttu-id="98b5f-216">Compatibilidad con AC3 y DD + agregada en el origen y el receptor de MPEG-4 de Windows 8.</span><span class="sxs-lookup"><span data-stu-id="98b5f-216">AC3 and DD+ support added in Windows 8 MPEG-4 source and sink.</span></span>
-   <span data-ttu-id="98b5f-217">Los archivos de más de 4 GB se admiten en el receptor MPEG-4 de Windows 8 para MP4 no fragmentado.</span><span class="sxs-lookup"><span data-stu-id="98b5f-217">Files larger than 4 GB are supported in Windows 8 MPEG-4 sink for non-fragmental MP4.</span></span>
-   <span data-ttu-id="98b5f-218">La limpieza se ha optimizado en el origen MPEG-4 de Windows 8.</span><span class="sxs-lookup"><span data-stu-id="98b5f-218">Scrubbing has been optimized in Windows 8 MPEG-4 source.</span></span>

    <span data-ttu-id="98b5f-219">Para reducir la latencia, la información de los dos fotogramas clave más cercanos para una determinada posición de búsqueda se expone a través de [**IMFSeekInfo:: GetNearestKeyFrames**](/windows/desktop/api/mfidl/nf-mfidl-imfseekinfo-getnearestkeyframes).</span><span class="sxs-lookup"><span data-stu-id="98b5f-219">To reduce latency, information for the two nearest key frames for a particular seek position are exposed through [**IMFSeekInfo::GetNearestKeyFrames**](/windows/desktop/api/mfidl/nf-mfidl-imfseekinfo-getnearestkeyframes).</span></span> <span data-ttu-id="98b5f-220">Dado que el fotograma clave no tiene fotogramas dependientes, presenta el marco tras descodificar un solo fotograma.</span><span class="sxs-lookup"><span data-stu-id="98b5f-220">Since the key frame does not have dependent frames, it presents the frame after decoding only one frame.</span></span> <span data-ttu-id="98b5f-221">Use [**IMFGetService:: GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) para obtener esta interfaz a través del origen de medios, la canalización o la aplicación.</span><span class="sxs-lookup"><span data-stu-id="98b5f-221">Use [**IMFGetService::GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) to obtain this interface through the media source, pipeline, or application.</span></span>

    <span data-ttu-id="98b5f-222">Establezca velocidad en cero en el origen MPEG-4.</span><span class="sxs-lookup"><span data-stu-id="98b5f-222">Set rate to zero in MPEG-4 source.</span></span> <span data-ttu-id="98b5f-223">Cuando la canalización está en modo de limpieza, la velocidad es cero.</span><span class="sxs-lookup"><span data-stu-id="98b5f-223">When the pipeline is in scrubbing mode, the rate is zero.</span></span>

-   <span data-ttu-id="98b5f-224">SPS y PPS se pueden almacenar en los datos de ejemplo del receptor MPEG-4.</span><span class="sxs-lookup"><span data-stu-id="98b5f-224">SPS and PPS can be stored in sample data in MPEG-4 sink.</span></span>

    <span data-ttu-id="98b5f-225">[MF \_ El atributo MPEG4SINK \_ SPSPPS \_ PASSTHROUGH](mf-mpeg4sink-spspps-passthrough.md) del receptor MPEG-4 se define para permitir que los SPs y el PPC se guarden junto con los ejemplos de entrada (datos de vídeo H. 264).</span><span class="sxs-lookup"><span data-stu-id="98b5f-225">[MF\_MPEG4SINK\_SPSPPS\_PASSTHROUGH](mf-mpeg4sink-spspps-passthrough.md) attribute on MPEG-4 sink is defined to allow SPS’s and PPS’s to be saved together with input samples (H.264 video data).</span></span> <span data-ttu-id="98b5f-226">Los clips MP4 producidos se pueden reproducir con el origen de MPEG-4 de Windows 7 y otros.</span><span class="sxs-lookup"><span data-stu-id="98b5f-226">The produced mp4 clips are play-able by Windows 7 MPEG-4 source and others.</span></span>

-   <span data-ttu-id="98b5f-227">SPS y PPS se pueden extraer de los ejemplos de entrada del receptor MPEG-4.</span><span class="sxs-lookup"><span data-stu-id="98b5f-227">SPS and PPS can be extracted from input samples in MPEG-4 sink.</span></span>

    <span data-ttu-id="98b5f-228">Cuando SPS y PPS no se establecen mediante [el \_ \_ encabezado de \_ secuencia \_ MF MT MPEG](mf-mt-mpeg-sequence-header-attribute.md) en el tipo de medio de entrada del receptor MPEG-4, el receptor MPEG-4 intentará extraer los SPs y PPS de los ejemplos de entrada.</span><span class="sxs-lookup"><span data-stu-id="98b5f-228">When SPS and PPS are not set through [MF\_MT\_MPEG\_SEQUENCE\_HEADER](mf-mt-mpeg-sequence-header-attribute.md) on input media type of the MPEG-4 sink, MPEG-4 sink will try to extract SPS and PPS from input samples.</span></span> <span data-ttu-id="98b5f-229">El receptor MPEG-4 omite cualquier ejemplo de entrada hasta que encuentra el primer SPS y PPS, ya que todos los ejemplos de entrada sin SPS y PPS no se pueden descodificar.</span><span class="sxs-lookup"><span data-stu-id="98b5f-229">MPEG-4 sink ignores any input samples until it finds the first SPS and PPS, because all input samples without SPS and PPS are not decode-able.</span></span>

-   <span data-ttu-id="98b5f-230">la información 3D en el registro de configuración de AVC es compatible con MP4 no fragmentado.</span><span class="sxs-lookup"><span data-stu-id="98b5f-230">3D information in AVC configuration record is supported for non-fragmental MP4.</span></span>
-   <span data-ttu-id="98b5f-231">La longitud de NALU se expone para los ejemplos comprimidos H. 264 para optimizar la descodificación de H. 264 VLD DXVA.</span><span class="sxs-lookup"><span data-stu-id="98b5f-231">NALU length is exposed for H.264 compressed samples to optimize H.264 VLD DXVA decoding.</span></span>

    <span data-ttu-id="98b5f-232">Los conjuntos de orígenes de MPEG-4 [MF \_ Nalu de \_ longitud \_ establecida](mf-nalu-length-set.md) en el tipo de medio de salida de **MFVideoFormat \_ H264** o **MFVideoFormat \_ H264**.</span><span class="sxs-lookup"><span data-stu-id="98b5f-232">MPEG-4 source sets [MF\_NALU\_LENGTH\_SET](mf-nalu-length-set.md) on the output media type of **MFVideoFormat\_H264** or **MFVideoFormat\_h264**.</span></span> <span data-ttu-id="98b5f-233">Establece el BLOB de [información de \_ \_ longitud \_ de MF Nalu](mf-nalu-length-information.md) en cada ejemplo de salida, con una longitud de Nalu de cuatro BYTEs para los distintos Nalu de un ejemplo comprimido.</span><span class="sxs-lookup"><span data-stu-id="98b5f-233">It sets the blob of [MF\_NALU\_LENGTH\_INFORMATION](mf-nalu-length-information.md) on each output sample, with four-byte NALU length for different NALU’s in one compressed sample.</span></span>

-   <span data-ttu-id="98b5f-234">Compatibilidad agregada para MPEG2 ADTS audio en el origen MP4.</span><span class="sxs-lookup"><span data-stu-id="98b5f-234">Support added for MPEG2 ADTS audio in MP4 source.</span></span>

## <a name="requirements"></a><span data-ttu-id="98b5f-235">Requisitos</span><span class="sxs-lookup"><span data-stu-id="98b5f-235">Requirements</span></span>



| <span data-ttu-id="98b5f-236">Requisito</span><span class="sxs-lookup"><span data-stu-id="98b5f-236">Requirement</span></span> | <span data-ttu-id="98b5f-237">Value</span><span class="sxs-lookup"><span data-stu-id="98b5f-237">Value</span></span> |
|-------------------------------------|---------------------------------------------------------|
| <span data-ttu-id="98b5f-238">Cliente mínimo compatible</span><span class="sxs-lookup"><span data-stu-id="98b5f-238">Minimum supported client</span></span><br/> | <span data-ttu-id="98b5f-239">Solo aplicaciones de escritorio de Windows 7 \[\]</span><span class="sxs-lookup"><span data-stu-id="98b5f-239">Windows 7 \[desktop apps only\]</span></span><br/>              |
| <span data-ttu-id="98b5f-240">Servidor mínimo compatible</span><span class="sxs-lookup"><span data-stu-id="98b5f-240">Minimum supported server</span></span><br/> | <span data-ttu-id="98b5f-241">Solo aplicaciones de escritorio de Windows Server 2008 R2 \[\]</span><span class="sxs-lookup"><span data-stu-id="98b5f-241">Windows Server 2008 R2 \[desktop apps only\]</span></span><br/> |



## <a name="see-also"></a><span data-ttu-id="98b5f-242">Vea también</span><span class="sxs-lookup"><span data-stu-id="98b5f-242">See also</span></span>

<dl> <dt>

[<span data-ttu-id="98b5f-243">Orígenes y receptores de medios</span><span class="sxs-lookup"><span data-stu-id="98b5f-243">Media Sources and Sinks</span></span>](media-sources-and-sinks.md)
</dt> <dt>

[<span data-ttu-id="98b5f-244">Receptores de medios</span><span class="sxs-lookup"><span data-stu-id="98b5f-244">Media Sinks</span></span>](media-sinks.md)
</dt> <dt>

[<span data-ttu-id="98b5f-245">Compatibilidad con MPEG-4 en Media Foundation</span><span class="sxs-lookup"><span data-stu-id="98b5f-245">MPEG-4 Support in Media Foundation</span></span>](mpeg-4-support-in-media-foundation.md)
</dt> <dt>

[<span data-ttu-id="98b5f-246">Formatos de medios admitidos en Media Foundation</span><span class="sxs-lookup"><span data-stu-id="98b5f-246">Supported Media Formats in Media Foundation</span></span>](supported-media-formats-in-media-foundation.md)
</dt> </dl>

 

 
