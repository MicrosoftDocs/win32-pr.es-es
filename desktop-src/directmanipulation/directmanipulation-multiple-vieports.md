---
description: Al usar varias ventanillas, golpee testingdetermines qué ventanillas se ven afectadas por los datos proporcionados por el usuario tomando la ubicación de la pantalla de un contacto y determinando en qué rectángulo de la ventanilla llega el contacto.
ms.assetid: 960EF92D-F439-4A84-AAF9-1469E2830573
title: Usar varias ventanillas en DirectManipulation
ms.topic: article
ms.date: 02/03/2020
ms.openlocfilehash: 627a97a7c9563ca0af9decf79b18340343dda345
ms.sourcegitcommit: 3d718d8f69d3f86eaecf94c5705d761c5a9ef4a1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/20/2020
ms.locfileid: "104569797"
---
# <a name="using-multiple-viewports-in-directmanipulation"></a><span data-ttu-id="a979f-103">Usar varias ventanillas en DirectManipulation</span><span class="sxs-lookup"><span data-stu-id="a979f-103">Using multiple viewports in DirectManipulation</span></span>

<span data-ttu-id="a979f-104">Al usar varias ventanillas, la *prueba de posicionamiento* determina qué ventanillas se ven afectadas por los datos proporcionados por el usuario tomando la ubicación de la pantalla de un contacto y determinando en qué rectángulo de la ventanilla se alcanza el contacto.</span><span class="sxs-lookup"><span data-stu-id="a979f-104">When using multiple viewports, *Hit testing* determines which viewport(s) are affected by user input by taking the screen location of a contact and determining which viewport rectangle the contact hits.</span></span>

<span data-ttu-id="a979f-105">Un escenario común en la [manipulación directa](direct-manipulation-portal.md) es colocar una ventanilla dentro de otra, lo que también se conoce como *ventanillas de anidamiento*.</span><span class="sxs-lookup"><span data-stu-id="a979f-105">A common scenario in [Direct Manipulation](direct-manipulation-portal.md) is to place one viewport inside another, also known as *nesting viewports*.</span></span> <span data-ttu-id="a979f-106">Si el contacto alcanza más de una ventanilla, el orden de las llamadas a  [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) por el [*WndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) de la ventana determina la relación de elementos primarios y secundarios de las ventanillas anidadas.</span><span class="sxs-lookup"><span data-stu-id="a979f-106">If the contact hits more than one viewport, the order of  [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) calls by the window's [*WndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) determines the parent-child relationship of the nested viewports.</span></span>

<span data-ttu-id="a979f-107">Regla: el elemento secundario debe llamar a [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact)antes de llamar al elemento primario.</span><span class="sxs-lookup"><span data-stu-id="a979f-107">Rule: The child element should call [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact)before calling the parent.</span></span>

![diagrama que muestra jerarquía de pruebas de posicionamiento](images/dm-art-8.png)

<span data-ttu-id="a979f-109">Un contacto aparece en una ventanilla.</span><span class="sxs-lookup"><span data-stu-id="a979f-109">A contact comes down in a viewport.</span></span> <span data-ttu-id="a979f-110">Primero se debe llamar a [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) en la ventanilla naranja (secundaria) y luego en la ventanilla verde (primaria) para establecer la jerarquía correcta.</span><span class="sxs-lookup"><span data-stu-id="a979f-110">[**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) should first be called on the orange (child) viewport and then the green (parent) viewport to establish the correct hierarchy.</span></span>

## <a name="targeting-the-correct-viewport"></a><span data-ttu-id="a979f-111">Establecer como destino la ventanilla correcta</span><span class="sxs-lookup"><span data-stu-id="a979f-111">Targeting the correct viewport</span></span>

<span data-ttu-id="a979f-112">Un contacto puede asociarse a cualquier número de ventanillas y cada contacto se puede asignar a un conjunto diferente de ventanillas.</span><span class="sxs-lookup"><span data-stu-id="a979f-112">A contact can be associated with any number of viewports and each contact can be assigned to a different set of viewports.</span></span>

<span data-ttu-id="a979f-113">Cada ventanilla puede configurarse para admitir interacciones específicas, según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="a979f-113">Each viewport can be configured to support specific interactions, as required.</span></span>

<span data-ttu-id="a979f-114">Según esta configuración, la [manipulación directa](direct-manipulation-portal.md) identifica qué ventanilla controla la entrada.</span><span class="sxs-lookup"><span data-stu-id="a979f-114">Based on these settings, [Direct Manipulation](direct-manipulation-portal.md) identifies which viewport handles the input.</span></span> <span data-ttu-id="a979f-115">La ventanilla secundaria de la jerarquía de pruebas de posicionamiento tiene la primera oportunidad de controlar la entrada.</span><span class="sxs-lookup"><span data-stu-id="a979f-115">The child-most viewport in the hit testing hierarchy has the first chance to handle the input.</span></span> <span data-ttu-id="a979f-116">Sin embargo, tanto el encadenamiento como la promoción primaria pueden cambiar la ventanilla que controla la entrada.</span><span class="sxs-lookup"><span data-stu-id="a979f-116">However, both chaining and parent promotion can change which viewport handles the input.</span></span>

## <a name="chaining"></a><span data-ttu-id="a979f-117">Encadenamiento</span><span class="sxs-lookup"><span data-stu-id="a979f-117">Chaining</span></span>

<span data-ttu-id="a979f-118">Cuando se alcanza el final del contenido durante una manipulación, la [manipulación directa](direct-manipulation-portal.md) aplica un efecto de límite para indicar que el contenido no puede continuar.</span><span class="sxs-lookup"><span data-stu-id="a979f-118">When the end of the content is reached during a manipulation, [Direct Manipulation](direct-manipulation-portal.md) applies a boundary effect to indicate that the content can go no further.</span></span> <span data-ttu-id="a979f-119">Sin embargo, si una ventanilla secundaria está *encadenada* a una ventanilla primaria, se suprime este efecto.</span><span class="sxs-lookup"><span data-stu-id="a979f-119">However, if a child viewport is *chained* to a parent viewport, this effect is suppressed.</span></span> <span data-ttu-id="a979f-120">En su lugar, la ventanilla antecesora más cercana en la jerarquía de pruebas de posicionamiento que admite la manipulación, controla la entrada.</span><span class="sxs-lookup"><span data-stu-id="a979f-120">Instead, the closest ancestor viewport in the hit testing hierarchy that supports the manipulation, handles the input.</span></span> <span data-ttu-id="a979f-121">Si se invierte la dirección de la manipulación de manera que el antecesor vuelva al punto en el que se desencadenó el encadenamiento, la manipulación "desencadena" y el control se transfiere de nuevo a la ventanilla secundaria.</span><span class="sxs-lookup"><span data-stu-id="a979f-121">If the direction of the manipulation is reversed such that the ancestor returns to the point where chaining was triggered, the manipulation "unchains" and control transfers back to the child viewport.</span></span>

![diagrama que muestra la manipulación encadenada](images/dm-art-9.png)

<span data-ttu-id="a979f-123">Cuando el usuario gira la ventanilla secundaria hasta el borde del contenido, la manipulación "encadena" a la ventanilla primaria y el usuario comienza a desplazar el contenido primario en su lugar.</span><span class="sxs-lookup"><span data-stu-id="a979f-123">When the user pans the child viewport all the way to the edge of the content, the manipulation "chains" to the parent viewport, and the user begins panning the parent content instead.</span></span>

> [!Note]  
> <span data-ttu-id="a979f-124">La cadena de ejes X e y es independiente entre sí, por lo que si una panorámica diagonal alcanza el límite x antes del límite y, la manipulación mueve el elemento primario en la dirección x mientras continúa moviendo el elemento secundario en la dirección y.</span><span class="sxs-lookup"><span data-stu-id="a979f-124">The X and Y axes chain independently of one another, so if a diagonal pan hits the x boundary before the y boundary, the manipulation moves the parent in the x direction while continuing to move the child in the y direction.</span></span> <span data-ttu-id="a979f-125">Para habilitar o deshabilitar el encadenamiento, llame a la API [**SetChaining**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setchaining) en la ventanilla secundaria.</span><span class="sxs-lookup"><span data-stu-id="a979f-125">To enable or disable chaining, call the [**SetChaining**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setchaining) API on the child viewport.</span></span>

### <a name="rails"></a><span data-ttu-id="a979f-126">Riel</span><span class="sxs-lookup"><span data-stu-id="a979f-126">Rails</span></span>

<span data-ttu-id="a979f-127">La especificación de raíles en la configuración de una ventanilla afecta a la manera en que la entrada se encadena desde la ventanilla.</span><span class="sxs-lookup"><span data-stu-id="a979f-127">Specifying rails in a viewport’s configuration affects the way input is chained from the viewport.</span></span> <span data-ttu-id="a979f-128">En concreto, la entrada no puede encadenar desde una ventanilla secundaria con raíl a su elemento primario en el modo de movimiento panorámico "no entrened" de raíles.</span><span class="sxs-lookup"><span data-stu-id="a979f-128">Specifically, input cannot chain from a railed child viewport to its parent in the “unrailed” panning mode of rails.</span></span> <span data-ttu-id="a979f-129">Para encadenar la entrada cuando se establecen los raíles, el usuario debe haberse desplazado vertical u horizontalmente y debe estar bloqueado en los raíles.</span><span class="sxs-lookup"><span data-stu-id="a979f-129">To chain input when rails are set, the user must have panned vertically or horizontally and be locked to the rails.</span></span>

### <a name="zooming"></a><span data-ttu-id="a979f-130">Acercar o alejar</span><span class="sxs-lookup"><span data-stu-id="a979f-130">Zooming</span></span>

<span data-ttu-id="a979f-131">Si una ventanilla secundaria está anidada dentro de un elemento primario y ambas están configuradas para el zoom, una manipulación del zoom puede encadenarse de un elemento secundario a un elemento primario.</span><span class="sxs-lookup"><span data-stu-id="a979f-131">If a child viewport is nested inside a parent, and both are configured for zoom, a zoom manipulation can chain from child to parent.</span></span> <span data-ttu-id="a979f-132">Sin embargo, si la manipulación continúa, solo funciona en el elemento primario y no puede "encadenar" en el elemento secundario.</span><span class="sxs-lookup"><span data-stu-id="a979f-132">However, if the manipulation continues, it works only on the parent and cannot “unchain” to the child.</span></span> <span data-ttu-id="a979f-133">Si el usuario encadena un zoom de secundario a primario, la [manipulación directa](direct-manipulation-portal.md) suspende el elemento secundario hasta que todos los contactos asociados a la manipulación se quiten de la pantalla.</span><span class="sxs-lookup"><span data-stu-id="a979f-133">If the user chains a zoom from child to parent, [Direct Manipulation](direct-manipulation-portal.md) suspends the child until all contacts associated with the manipulation are removed from the screen.</span></span> <span data-ttu-id="a979f-134">En este punto, el elemento secundario se libera de la suspensión y el usuario puede desplazar la ventanilla secundaria.</span><span class="sxs-lookup"><span data-stu-id="a979f-134">At this point, the child is released from suspension and the user can pan the child viewport.</span></span>

## <a name="gesture-targeting-parent-promotion"></a><span data-ttu-id="a979f-135">Destinatarios de gestos: promoción primaria</span><span class="sxs-lookup"><span data-stu-id="a979f-135">Gesture targeting: Parent promotion</span></span>

<span data-ttu-id="a979f-136">La *segmentación de gestos* es el proceso por el que los grupos de [manipulación directa](direct-manipulation-portal.md) se conectan entre sí y determinan qué ventanilla procesa la entrada.</span><span class="sxs-lookup"><span data-stu-id="a979f-136">*Gesture targeting* is the process by which [Direct Manipulation](direct-manipulation-portal.md) groups contacts together and determines which viewport processes the input.</span></span> <span data-ttu-id="a979f-137">La *promoción primaria* hace referencia a los casos donde la entrada se transfiere desde el elemento secundario al elemento primario.</span><span class="sxs-lookup"><span data-stu-id="a979f-137">*Parent promotion* refers to cases where the input is transferred from the child to the parent.</span></span> <span data-ttu-id="a979f-138">Por ejemplo, cuando un usuario coloca dos contactos y se reduce dentro de una ventanilla secundaria configurada solo para el desplazamiento, la entrada se promueve al elemento primario para que se produzca el zoom.</span><span class="sxs-lookup"><span data-stu-id="a979f-138">For example, when a user puts down two contacts and pinches within a child viewport configured only for scrolling, the input is promoted to the parent so that zooming occurs.</span></span> <span data-ttu-id="a979f-139">La promoción primaria se produce independientemente de si está habilitado el encadenamiento en la ventanilla secundaria.</span><span class="sxs-lookup"><span data-stu-id="a979f-139">Parent promotion occurs regardless of whether chaining is enabled on the child viewport.</span></span>

<span data-ttu-id="a979f-140">A diferencia de la encadenamiento, la promoción primaria no se revierte.</span><span class="sxs-lookup"><span data-stu-id="a979f-140">Unlike chaining, parent promotion is not reversed.</span></span> <span data-ttu-id="a979f-141">La ventanilla primaria continúa procesando la entrada de interacción hasta que se levantan todos los contactos (las ventanillas secundarias dejan de procesar la entrada).</span><span class="sxs-lookup"><span data-stu-id="a979f-141">The parent viewport continues to process the interaction input until all contacts are lifted (child viewports stop processing the input).</span></span>
