---
description: Se puede especificar un descriptor de seguridad para una canalización con nombre cuando se llama a la función CreateNamedPipe. El descriptor de seguridad controla el acceso a los extremos de cliente y de servidor de la canalización con nombre.
ms.assetid: f9ea97c9-9a97-4083-82d8-29ffb8be5a77
title: Seguridad y derechos de acceso de la canalización con nombre
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 11cada606d8197ac2f64943aa742bbfd614fa4ef
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105648421"
---
# <a name="named-pipe-security-and-access-rights"></a><span data-ttu-id="588c5-104">Seguridad y derechos de acceso de la canalización con nombre</span><span class="sxs-lookup"><span data-stu-id="588c5-104">Named Pipe Security and Access Rights</span></span>

<span data-ttu-id="588c5-105">La seguridad de Windows le permite controlar el acceso a las canalizaciones con nombre.</span><span class="sxs-lookup"><span data-stu-id="588c5-105">Windows security enables you to control access to named pipes.</span></span> <span data-ttu-id="588c5-106">Para obtener más información sobre la seguridad, vea [modelo de control de acceso](/windows/desktop/SecAuthZ/access-control-model).</span><span class="sxs-lookup"><span data-stu-id="588c5-106">For more information about security, see [Access-Control Model](/windows/desktop/SecAuthZ/access-control-model).</span></span>

<span data-ttu-id="588c5-107">Se puede especificar un [descriptor de seguridad](/windows/desktop/SecAuthZ/security-descriptors) para una canalización con nombre cuando se llama a la función [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) .</span><span class="sxs-lookup"><span data-stu-id="588c5-107">You can specify a [security descriptor](/windows/desktop/SecAuthZ/security-descriptors) for a named pipe when you call the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) function.</span></span> <span data-ttu-id="588c5-108">El descriptor de seguridad controla el acceso a los extremos de cliente y de servidor de la canalización con nombre.</span><span class="sxs-lookup"><span data-stu-id="588c5-108">The security descriptor controls access to both client and server ends of the named pipe.</span></span> <span data-ttu-id="588c5-109">Si especifica **null**, la canalización con nombre obtiene un descriptor de seguridad predeterminado.</span><span class="sxs-lookup"><span data-stu-id="588c5-109">If you specify **NULL**, the named pipe gets a default security descriptor.</span></span> <span data-ttu-id="588c5-110">Las ACL del descriptor de seguridad predeterminado para una canalización con nombre concedan control total a la cuenta LocalSystem, a los administradores y al propietario del creador.</span><span class="sxs-lookup"><span data-stu-id="588c5-110">The ACLs in the default security descriptor for a named pipe grant full control to the LocalSystem account, administrators, and the creator owner.</span></span> <span data-ttu-id="588c5-111">También conceden acceso de lectura a los miembros del grupo todos y a la cuenta anónima.</span><span class="sxs-lookup"><span data-stu-id="588c5-111">They also grant read access to members of the Everyone group and the anonymous account.</span></span>

<span data-ttu-id="588c5-112">Para recuperar el descriptor de seguridad de una canalización con nombre, llame a la función [**GetSecurityInfo**](/windows/desktop/api/aclapi/nf-aclapi-getsecurityinfo) .</span><span class="sxs-lookup"><span data-stu-id="588c5-112">To retrieve a named pipe's security descriptor, call the [**GetSecurityInfo**](/windows/desktop/api/aclapi/nf-aclapi-getsecurityinfo) function.</span></span> <span data-ttu-id="588c5-113">Para cambiar el descriptor de seguridad de una canalización con nombre, llame a la función [**SetSecurityInfo**](/windows/desktop/api/aclapi/nf-aclapi-setsecurityinfo) .</span><span class="sxs-lookup"><span data-stu-id="588c5-113">To change the security descriptor of a named pipe, call the [**SetSecurityInfo**](/windows/desktop/api/aclapi/nf-aclapi-setsecurityinfo) function.</span></span>

<span data-ttu-id="588c5-114">Cuando un subproceso llama a [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) para abrir un identificador del extremo del servidor de una canalización con nombre existente, el sistema realiza una comprobación de acceso antes de devolver el identificador.</span><span class="sxs-lookup"><span data-stu-id="588c5-114">When a thread calls [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) to open a handle to the server end of an existing named pipe, the system performs an access check before returning the handle.</span></span> <span data-ttu-id="588c5-115">La comprobación de acceso compara el token de acceso del subproceso y los [derechos de acceso](/windows/desktop/SecAuthZ/access-rights-and-access-masks) solicitados con la DACL en el descriptor de seguridad de la canalización con nombre.</span><span class="sxs-lookup"><span data-stu-id="588c5-115">The access check compares the thread's access token and the requested [access rights](/windows/desktop/SecAuthZ/access-rights-and-access-masks) against the DACL in the named pipe's security descriptor.</span></span> <span data-ttu-id="588c5-116">Además de los derechos de acceso solicitados, la DACL debe permitir que el archivo de subproceso que realiza la llamada \_ cree una \_ instancia de canalización \_ con nombre.</span><span class="sxs-lookup"><span data-stu-id="588c5-116">In addition to the requested access rights, the DACL must allow the calling thread FILE\_CREATE\_PIPE\_INSTANCE access to the named pipe.</span></span>

<span data-ttu-id="588c5-117">Del mismo modo, cuando un cliente llama a la función [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) o [**CallNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) para conectarse al extremo de cliente de una canalización con nombre, el sistema realiza una comprobación de acceso antes de conceder acceso al cliente.</span><span class="sxs-lookup"><span data-stu-id="588c5-117">Similarly, when a client calls the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) or [**CallNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-callnamedpipea) function to connect to the client end of a named pipe, the system performs an access check before granting access to the client.</span></span>

<span data-ttu-id="588c5-118">El identificador devuelto por la función [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) siempre tiene acceso de sincronización.</span><span class="sxs-lookup"><span data-stu-id="588c5-118">The handle returned by the [**CreateNamedPipe**](/windows/desktop/api/Winbase/nf-winbase-createnamedpipea) function always has SYNCHRONIZE access.</span></span> <span data-ttu-id="588c5-119">También tiene lectura genérica \_ , escritura genérica \_ o ambas, dependiendo del modo de apertura de la canalización.</span><span class="sxs-lookup"><span data-stu-id="588c5-119">It also has GENERIC\_READ, GENERIC\_WRITE, or both, depending on the open mode of the pipe.</span></span> <span data-ttu-id="588c5-120">A continuación se muestran los derechos de acceso para cada modo abierto.</span><span class="sxs-lookup"><span data-stu-id="588c5-120">The following are the access rights for each open mode.</span></span>



| <span data-ttu-id="588c5-121">Modo abierto</span><span class="sxs-lookup"><span data-stu-id="588c5-121">Open mode</span></span>                           | <span data-ttu-id="588c5-122">Derechos de acceso</span><span class="sxs-lookup"><span data-stu-id="588c5-122">Access rights</span></span>                                              |
|-------------------------------------|------------------------------------------------------------|
| <span data-ttu-id="588c5-123">Dúplex de acceso de CANALización \_ \_ (0x00000003)</span><span class="sxs-lookup"><span data-stu-id="588c5-123">PIPE\_ACCESS\_DUPLEX (0x00000003)</span></span>   | <span data-ttu-id="588c5-124">ARCHIVO \_ genérico de \_ lectura, \_ escritura genérica de archivo \_ y sincronización</span><span class="sxs-lookup"><span data-stu-id="588c5-124">FILE\_GENERIC\_READ, FILE\_GENERIC\_WRITE, and SYNCHRONIZE</span></span> |
| <span data-ttu-id="588c5-125">ENTRADA de acceso de CANALización \_ \_ (0x00000001)</span><span class="sxs-lookup"><span data-stu-id="588c5-125">PIPE\_ACCESS\_INBOUND (0x00000001)</span></span>  | <span data-ttu-id="588c5-126">\_ \_ Lectura y sincronización de archivos genéricos</span><span class="sxs-lookup"><span data-stu-id="588c5-126">FILE\_GENERIC\_READ and SYNCHRONIZE</span></span>                        |
| <span data-ttu-id="588c5-127">Acceso de CANALización de \_ \_ salida (0x00000002)</span><span class="sxs-lookup"><span data-stu-id="588c5-127">PIPE\_ACCESS\_OUTBOUND (0x00000002)</span></span> | <span data-ttu-id="588c5-128">\_ \_ Escritura y sincronización de archivos genéricos</span><span class="sxs-lookup"><span data-stu-id="588c5-128">FILE\_GENERIC\_WRITE and SYNCHRONIZE</span></span>                       |



 

<span data-ttu-id="588c5-129">\_ \_ El acceso de lectura genérico de un archivo para una canalización con nombre combina los derechos para leer los datos de la canalización, leer los atributos de la canalización, leer atributos extendidos y leer la DACL de la canalización.</span><span class="sxs-lookup"><span data-stu-id="588c5-129">FILE\_GENERIC\_READ access for a named pipe combines the rights to read data from the pipe, read pipe attributes, read extended attributes, and read the pipe's DACL.</span></span>

<span data-ttu-id="588c5-130">\_ \_ El acceso de escritura genérico de un archivo para una canalización con nombre combina los derechos para escribir datos en la canalización, anexar datos a él, escribir atributos de canalización, escribir atributos extendidos y leer la DACL de la canalización.</span><span class="sxs-lookup"><span data-stu-id="588c5-130">FILE\_GENERIC\_WRITE access for a named pipe combines the rights to write data to the pipe, append data to it, write pipe attributes, write extended attributes, and read the pipe's DACL.</span></span> <span data-ttu-id="588c5-131">Dado que \_ el archivo anexar \_ datos y \_ \_ \_ la instancia de la canalización de creación de archivo tienen la misma definición, por lo que la \_ escritura genérica de archivo habilita el \_ permiso para crear la canalización.</span><span class="sxs-lookup"><span data-stu-id="588c5-131">Because FILE\_APPEND\_DATA and FILE\_CREATE\_PIPE\_INSTANCE have the same definition, so FILE\_GENERIC\_WRITE enables permission to create the pipe.</span></span> <span data-ttu-id="588c5-132">Para evitar este problema, use los derechos individuales en lugar de usar FILE \_ Generic \_ Write.</span><span class="sxs-lookup"><span data-stu-id="588c5-132">To avoid this problem, use the individual rights instead of using FILE\_GENERIC\_WRITE.</span></span>

<span data-ttu-id="588c5-133">Puede solicitar el derecho de \_ acceso de seguridad del sistema de acceso \_ a un objeto de canalización con nombre si desea leer o escribir la SACL del objeto.</span><span class="sxs-lookup"><span data-stu-id="588c5-133">You can request the ACCESS\_SYSTEM\_SECURITY access right to a named pipe object if you want to read or write the object's SACL.</span></span> <span data-ttu-id="588c5-134">Para obtener más información, consulte derechos [de acceso de las listas de control de acceso (ACL)](/windows/desktop/SecAuthZ/access-control-lists) y [SACL](/windows/desktop/SecAuthZ/sacl-access-right).</span><span class="sxs-lookup"><span data-stu-id="588c5-134">For more information, see [Access-Control Lists (ACLs)](/windows/desktop/SecAuthZ/access-control-lists) and [SACL Access Right](/windows/desktop/SecAuthZ/sacl-access-right).</span></span>

<span data-ttu-id="588c5-135">Para evitar que usuarios remotos o usuarios de una sesión de Terminal Services diferente tengan acceso a una canalización con nombre, use el SID de inicio de sesión en la DACL de la canalización.</span><span class="sxs-lookup"><span data-stu-id="588c5-135">To prevent remote users or users on a different terminal services session from accessing a named pipe, use the logon SID on the DACL for the pipe.</span></span> <span data-ttu-id="588c5-136">El SID de inicio de sesión se usa también en los inicios de sesión de ejecución. es el SID que se usa para proteger el espacio de nombres de objeto por sesión.</span><span class="sxs-lookup"><span data-stu-id="588c5-136">The logon SID is used in run-as logons as well; it is the SID used to protect the per-session object namespace.</span></span> <span data-ttu-id="588c5-137">Para obtener más información, vea [obtener el SID de inicio de sesión en C++](/previous-versions//aa446670(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="588c5-137">For more information, see [Getting the Logon SID in C++](/previous-versions//aa446670(v=vs.85)).</span></span>

 

 
