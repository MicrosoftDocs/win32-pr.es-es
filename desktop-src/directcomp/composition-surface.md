---
title: Superficie de composición
description: En este tema se describen los tipos de tipos de superficies que admite Microsoft DirectComposition.
ms.assetid: E19B4F0E-1CFA-4E93-BB6A-BFB701BC72CA
keywords:
- superficie de composición
- Superficie lógica de DirectComposition
- DirectComposition superficie virtual
- actualizar una superficie lógica
- superficie lógica, actualizar
- recorte de una superficie virtual
- superficie virtual, recorte
- cortar superficie virtual
- cambiar el tamaño de una superficie virtual
- Surace virtuales, cambio de tamaño
- cambiar el tamaño de la superficie virtual
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9f4bd30bfbd1de91444b7076184db597cd7a8c82
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104077929"
---
# <a name="composition-surface"></a><span data-ttu-id="e2cc3-114">Superficie de composición</span><span class="sxs-lookup"><span data-stu-id="e2cc3-114">Composition surface</span></span>

> [!NOTE]
> <span data-ttu-id="e2cc3-115">En el caso de las aplicaciones de Windows 10, se recomienda usar las API de Windows. UI. Composition en lugar de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-115">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="e2cc3-116">Para obtener más información, consulte [modernice su aplicación de escritorio con el nivel de objetos visuales](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="e2cc3-116">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="e2cc3-117">En este tema se describen los tipos de tipos de superficies que admite Microsoft DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-117">This topic describes the types of types of surfaces that Microsoft DirectComposition supports.</span></span>

-   [<span data-ttu-id="e2cc3-118">Superficie lógica de DirectComposition</span><span class="sxs-lookup"><span data-stu-id="e2cc3-118">DirectComposition logical surface</span></span>](#directcomposition-logical-surface)
    -   [<span data-ttu-id="e2cc3-119">Actualizar una superficie lógica</span><span class="sxs-lookup"><span data-stu-id="e2cc3-119">Updating a logical surface</span></span>](#updating-a-logical-surface)
    -   [<span data-ttu-id="e2cc3-120">Suspender actualizaciones en una superficie lógica</span><span class="sxs-lookup"><span data-stu-id="e2cc3-120">Suspending updates to a logical surface</span></span>](#suspending-updates-to-a-logical-surface)
    -   [<span data-ttu-id="e2cc3-121">Reanudar actualizaciones en una superficie lógica</span><span class="sxs-lookup"><span data-stu-id="e2cc3-121">Resuming updates to a logical surface</span></span>](#resuming-updates-to-a-logical-surface)
    -   [<span data-ttu-id="e2cc3-122">Finalizar actualizaciones en una superficie lógica</span><span class="sxs-lookup"><span data-stu-id="e2cc3-122">Ending updates to a logical surface</span></span>](#suspending-updates-to-a-logical-surface)
    -   [<span data-ttu-id="e2cc3-123">Ejemplo de uso de una superficie lógica</span><span class="sxs-lookup"><span data-stu-id="e2cc3-123">Example of using a logical surface</span></span>](#example-of-using-a-logical-surface)
-   [<span data-ttu-id="e2cc3-124">DirectComposition superficie virtual</span><span class="sxs-lookup"><span data-stu-id="e2cc3-124">DirectComposition virtual surface</span></span>](#directcomposition-virtual-surface)
    -   [<span data-ttu-id="e2cc3-125">Cambiar el tamaño de una superficie virtual</span><span class="sxs-lookup"><span data-stu-id="e2cc3-125">Resizing a virtual surface</span></span>](#resizing-a-virtual-surface)
    -   [<span data-ttu-id="e2cc3-126">Recorte de una superficie virtual</span><span class="sxs-lookup"><span data-stu-id="e2cc3-126">Trimming a virtual surface</span></span>](#trimming-a-virtual-surface)
-   [<span data-ttu-id="e2cc3-127">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e2cc3-127">Related topics</span></span>](#related-topics)

## <a name="directcomposition-logical-surface"></a><span data-ttu-id="e2cc3-128">Superficie lógica de DirectComposition</span><span class="sxs-lookup"><span data-stu-id="e2cc3-128">DirectComposition logical surface</span></span>

<span data-ttu-id="e2cc3-129">DirectComposition expone el objeto [**IDCompositionSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionsurface) para representar una superficie lógica de composición.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-129">DirectComposition exposes the [**IDCompositionSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionsurface) object to represent a logical composition surface.</span></span> <span data-ttu-id="e2cc3-130">DirectComposition expone las API que puede usar para crear, actualizar y eliminar estas superficies lógicas.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-130">DirectComposition exposes APIs that you can use to create, update, and delete these logical surfaces.</span></span> <span data-ttu-id="e2cc3-131">Cada superficie puede estar asociada a uno o varios objetos visuales.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-131">Each surface can be associated with one or more visuals.</span></span> <span data-ttu-id="e2cc3-132">Una aplicación es responsable de administrar la duración de las superficies lógicas.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-132">An application is responsible for managing the lifetime of logical surfaces.</span></span>

### <a name="updating-a-logical-surface"></a><span data-ttu-id="e2cc3-133">Actualizar una superficie lógica</span><span class="sxs-lookup"><span data-stu-id="e2cc3-133">Updating a logical surface</span></span>

<span data-ttu-id="e2cc3-134">Una aplicación puede actualizar una superficie lógica llamando a [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) y especificando el tamaño y el desplazamiento del rectángulo en la superficie lógica que la aplicación quiere actualizar.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-134">An application can update a logical surface by calling [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) and specifying the size and offset of the rectangle on the logical surface that the app wants to update.</span></span> <span data-ttu-id="e2cc3-135">DirectComposition asigna un rectángulo del tamaño especificado y, a continuación, devuelve la superficie y el desplazamiento correspondiente que la aplicación necesita para dibujar o actualizar.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-135">DirectComposition allocates a rectangle of the specified size, and then returns the surface and the corresponding offset that the application needs to draw or update.</span></span> <span data-ttu-id="e2cc3-136">Los límites del rectángulo de actualización están enlazados por el tamaño de la superficie.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-136">The update rectangle’s limits are bound by the surface size.</span></span> <span data-ttu-id="e2cc3-137">Por ejemplo, el rectángulo de actualización de una superficie de píxel 40 por 100 puede ser de hasta (0,0, 40100).</span><span class="sxs-lookup"><span data-stu-id="e2cc3-137">For example, the update rectangle for a 40-by-100 pixel surface can be up to (0,0,40,100).</span></span> <span data-ttu-id="e2cc3-138">Además, la región actualizable se aplica mediante un rectángulo de protección.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-138">Also, the updatable region is enforced by a guard rectangle.</span></span> <span data-ttu-id="e2cc3-139">Dado que solo puede haber un rectángulo de protección a la vez, solo se puede actualizar una superficie lógica a la vez.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-139">Because there can be only one guard rectangle at a time, only one logical surface can be updated at a time.</span></span> <span data-ttu-id="e2cc3-140">**BeginDraw** devuelve un código de error si no se ha llamado a [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) o [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) después de una llamada anterior a **BeginDraw**.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-140">**BeginDraw** returns an error code if [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) or [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) has not been called after a previous call to **BeginDraw**.</span></span> <span data-ttu-id="e2cc3-141">Una aplicación puede Agregar una llamada confirmada a **BeginDraw** a un lote, pero no surte efecto hasta que se llama a **EndDraw** y se confirma.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-141">An application can add a committed call to **BeginDraw** to a batch, but it does not take effect until **EndDraw** is called and committed.</span></span>

### <a name="suspending-updates-to-a-logical-surface"></a><span data-ttu-id="e2cc3-142">Suspender actualizaciones en una superficie lógica</span><span class="sxs-lookup"><span data-stu-id="e2cc3-142">Suspending updates to a logical surface</span></span>

<span data-ttu-id="e2cc3-143">Una aplicación que necesita actualizar superficies diferentes puede llamar a [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) en la actualización actual y, después, llamar a [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) para iniciar una nueva actualización.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-143">An application that needs to update different surfaces can call [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) on the current update, and then call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) to begin a new update.</span></span> <span data-ttu-id="e2cc3-144">Microsoft DirectComposition permite varias actualizaciones, pero solo una puede estar activa cada vez.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-144">Microsoft DirectComposition allows multiple updates, but only one can be active at a time.</span></span> <span data-ttu-id="e2cc3-145">Esto significa que debe llamar a **SuspendDraw** o [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) en una superficie antes de llamar a **BeginDraw** en el siguiente.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-145">This means that you need to call **SuspendDraw** or [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on one surface before calling **BeginDraw** on the next one.</span></span> <span data-ttu-id="e2cc3-146">A diferencia de **EndDraw**, un lote confirmado puede contener una superficie que está en un estado **SuspendDraw** , pero dichas actualizaciones no se mostrarán en la pantalla hasta que se llame a **EndDraw** .</span><span class="sxs-lookup"><span data-stu-id="e2cc3-146">Unlike **EndDraw**, a committed batch can contain a surface that is in a **SuspendDraw** state, but such updates won’t be shown on the screen until **EndDraw** is called.</span></span>

### <a name="resuming-updates-to-a-logical-surface"></a><span data-ttu-id="e2cc3-147">Reanudar actualizaciones en una superficie lógica</span><span class="sxs-lookup"><span data-stu-id="e2cc3-147">Resuming updates to a logical surface</span></span>

<span data-ttu-id="e2cc3-148">Una aplicación puede reanudar una actualización en una superficie que se encuentra en estado [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) llamando a [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw).</span><span class="sxs-lookup"><span data-stu-id="e2cc3-148">An application can resume an update to a surface that is in a [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) state by calling [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw).</span></span> <span data-ttu-id="e2cc3-149">Solo se puede llamar a este método en una superficie suspendida.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-149">This method can be called only on a suspended surface.</span></span>

### <a name="ending-updates-to-a-logical-surface"></a><span data-ttu-id="e2cc3-150">Finalizar actualizaciones en una superficie lógica</span><span class="sxs-lookup"><span data-stu-id="e2cc3-150">Ending updates to a logical surface</span></span>

<span data-ttu-id="e2cc3-151">Llamar a [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) y [**commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) es la única manera de ver los cambios en la actualización de mapas de bits en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-151">Calling [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) and [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) is the only way to see bitmap update changes on the screen.</span></span> <span data-ttu-id="e2cc3-152">Cada llamada a **EndDraw** debe tener una llamada correspondiente a [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) para quitar el rectángulo de protección.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-152">Each call to **EndDraw** must have a corresponding call to [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) to remove the guard rectangle.</span></span> <span data-ttu-id="e2cc3-153">La superficie lógica conserva todas las actualizaciones hasta que se llama a **commit** .</span><span class="sxs-lookup"><span data-stu-id="e2cc3-153">The logical surface retains all the updates until **Commit** is called.</span></span> <span data-ttu-id="e2cc3-154">También puede llamar a **EndDraw** en una superficie que esté en el estado [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) porque **EndDraw** es un resume/end implícito.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-154">You can also call **EndDraw** on a surface that is in the [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) state because **EndDraw** is an implied resume/end.</span></span> <span data-ttu-id="e2cc3-155">Después de llamar a **EndDraw**, el contenido actualizado se presenta en la pantalla y se descarta para que se pueda volver a usar la memoria de la actualización para una actualización posterior.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-155">After you call **EndDraw**, the updated content is presented to the screen and discarded so that the memory for the update can be reused for a later update.</span></span>

### <a name="example-of-using-a-logical-surface"></a><span data-ttu-id="e2cc3-156">Ejemplo de uso de una superficie lógica</span><span class="sxs-lookup"><span data-stu-id="e2cc3-156">Example of using a logical surface</span></span>

<span data-ttu-id="e2cc3-157">En el ejemplo siguiente se describen los pasos que realizará una aplicación si creó un árbol visual que consta de dos objetos visuales y, a continuación, necesitaba actualizar regiones específicas de las dos superficies lógicas asociadas a los objetos visuales:</span><span class="sxs-lookup"><span data-stu-id="e2cc3-157">The following example describes the steps that an application would take if it created a visual tree consisting of two visuals, and then needed to update specific regions of the two logical surfaces associated with the visuals:</span></span>

1.  <span data-ttu-id="e2cc3-158">Cree un dispositivo DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-158">Create a DirectComposition device.</span></span>
2.  <span data-ttu-id="e2cc3-159">Cree el árbol visual que se compone de un nodo raíz y los objetos visuales 1 y 2.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-159">Create the visual tree consisting of a root node and visuals 1 and 2.</span></span>
3.  <span data-ttu-id="e2cc3-160">Cree las superficies lógicas 1 y 2.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-160">Create logical surfaces 1 and 2.</span></span>
4.  <span data-ttu-id="e2cc3-161">Llame a [**SetContent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) para asociar una superficie lógica con los objetos visuales 1 y 2.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-161">Call [**SetContent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) to associate a logical surface with visuals 1 and 2.</span></span>
5.  <span data-ttu-id="e2cc3-162">Llame a [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) en un subrectángulo de la superficie lógica 1.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-162">Call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) on a sub-rectangle of logical surface 1.</span></span>
6.  <span data-ttu-id="e2cc3-163">Actualice la superficie en el desplazamiento devuelto por DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-163">Update the surface at the offset returned by DirectComposition.</span></span>
7.  <span data-ttu-id="e2cc3-164">Pasos opcionales:</span><span class="sxs-lookup"><span data-stu-id="e2cc3-164">Optional steps:</span></span>
    1.  <span data-ttu-id="e2cc3-165">Llame a [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) en la superficie lógica 1.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-165">Call [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw) on logical surface 1.</span></span>
    2.  <span data-ttu-id="e2cc3-166">Llame a [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) en el subrectángulo de la superficie lógica 2.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-166">Call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) on sub-rect of logical surface 2.</span></span>
    3.  <span data-ttu-id="e2cc3-167">Actualice la superficie en el desplazamiento devuelto por DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-167">Update the surface at the offset returned by DirectComposition.</span></span>
    4.  <span data-ttu-id="e2cc3-168">Llame a [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) en la superficie lógica 2.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-168">Call [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on logical surface 2.</span></span>
    5.  <span data-ttu-id="e2cc3-169">Llame a [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) en la superficie lógica 1.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-169">Call [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) on logical surface 1.</span></span>
8.  <span data-ttu-id="e2cc3-170">Actualice la superficie en el desplazamiento devuelto por DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-170">Update the surface at the offset returned by DirectComposition.</span></span>
9.  <span data-ttu-id="e2cc3-171">Llame a [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) en la superficie lógica 1.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-171">Call [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on logical surface 1.</span></span>
10. <span data-ttu-id="e2cc3-172">Llamar a [**commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span><span class="sxs-lookup"><span data-stu-id="e2cc3-172">Call [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span></span>

## <a name="directcomposition-virtual-surface"></a><span data-ttu-id="e2cc3-173">DirectComposition superficie virtual</span><span class="sxs-lookup"><span data-stu-id="e2cc3-173">DirectComposition virtual surface</span></span>

<span data-ttu-id="e2cc3-174">DirectComposition expone la interfaz [**IDCompositionVirtualSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionvirtualsurface) para representar una superficie virtual, que es una colección de superficies lógicas (mosaicos) organizadas en una cuadrícula fija con mosaicos de tamaño fijo.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-174">DirectComposition exposes the [**IDCompositionVirtualSurface**](/windows/win32/api/dcomp/nn-dcomp-idcompositionvirtualsurface) interface to represent a virtual surface, which is a collection of logical surfaces (tiles) arranged in a fixed grid with tiles of a fixed size.</span></span> <span data-ttu-id="e2cc3-175">La aplicación especifica el tamaño de la textura virtual en el momento de la creación.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-175">The application specifies the size of the virtual texture at creation time.</span></span> <span data-ttu-id="e2cc3-176">El tamaño establece los límites para la superficie virtual.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-176">The size establishes the boundaries for the virtual surface.</span></span> <span data-ttu-id="e2cc3-177">La superficie puede estar asociada a uno o varios objetos visuales.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-177">The surface can be associated with one or more visuals.</span></span>

<span data-ttu-id="e2cc3-178">Cuando se inicializa una superficie virtual, no está respaldada por asignaciones reales.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-178">When a virtual surface is initialized, it is not backed by actual allocations.</span></span> <span data-ttu-id="e2cc3-179">En otras palabras, no contiene ningún bit.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-179">In other words, it doesn’t hold any bits.</span></span> <span data-ttu-id="e2cc3-180">DirectComposition asigna mosaicos (es decir, objetos de superficie de composición) una vez que la aplicación empieza a actualizar la superficie.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-180">DirectComposition allocates tiles (that is, composition surface objects) after the application starts updating the surface.</span></span> <span data-ttu-id="e2cc3-181">La aplicación actualiza la superficie virtual mediante una llamada a [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) y especifica la región de interés con respecto a las coordenadas de la superficie virtual.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-181">The application updates the virtual surface by calling [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) and specifying the region of interest with respect to the coordinates of the virtual surface.</span></span> <span data-ttu-id="e2cc3-182">A continuación, DirectComposition asigna los mosaicos necesarios para almacenar la actualización y devuelve la superficie de composición y el desplazamiento que se van a actualizar.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-182">Then, DirectComposition allocates the necessary tiles to hold the update, and returns the composition surface and offset to update.</span></span>

<span data-ttu-id="e2cc3-183">Al igual que con las superficies lógicas, puede llamar a [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw), [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw), [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) y [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) en una superficie virtual.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-183">As with logical surfaces, you can call [**BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw), [**SuspendDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-suspenddraw), [**ResumeDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-resumedraw) and [**EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) on a virtual surface.</span></span> <span data-ttu-id="e2cc3-184">Además, DirectComposition expone métodos que se pueden usar para cambiar el tamaño y recortar una superficie virtual existente.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-184">In addition, DirectComposition exposes methods that you can use to resize and trim an existing virtual surface.</span></span>

### <a name="resizing-a-virtual-surface"></a><span data-ttu-id="e2cc3-185">Cambiar el tamaño de una superficie virtual</span><span class="sxs-lookup"><span data-stu-id="e2cc3-185">Resizing a virtual surface</span></span>

<span data-ttu-id="e2cc3-186">El método de cambio de [**tamaño**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-resize) cambia los límites de la superficie virtual, lo que significa que las nuevas actualizaciones o asignaciones deben estar en los límites establecidos por el nuevo tamaño.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-186">The [**Resize**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-resize) method changes the boundaries of the virtual surface, meaning that any new updates or allocations must fall in the boundaries set by the new size.</span></span> <span data-ttu-id="e2cc3-187">Una aplicación utiliza el **ajuste de tamaño** para indicar a DirectComposition que una región determinada de la superficie virtual ya no es necesaria y se puede reclamar.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-187">An application uses **Resize** to tell DirectComposition that a particular region of the virtual surface is no longer needed and can be reclaimed.</span></span> <span data-ttu-id="e2cc3-188">Si el **ajuste de tamaño** reduce la superficie virtual, la aplicación ya no puede actualizar las regiones fuera de los límites nuevos.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-188">If **Resize** shrinks the virtual surface, the application can no longer update the regions outside the new boundaries.</span></span>

<span data-ttu-id="e2cc3-189">En la ilustración siguiente se muestra una superficie virtual de 3 por 3 cuyo tamaño se ha cambiado a 2 por 2.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-189">The following illustration shows a 3-by-3 virtual surface resized to 2-by-2.</span></span> <span data-ttu-id="e2cc3-190">La región roja representa los mosaicos que se descartan como parte de la operación de cambiar el tamaño y DirectComposition recupera la memoria.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-190">The red region represents tiles that are discarded as part of the resize operation, and the memory is reclaimed by DirectComposition.</span></span> <span data-ttu-id="e2cc3-191">Después del cambio de tamaño, la aplicación no puede realizar actualizaciones en la región roja sin cambiar el tamaño de la superficie virtual de nuevo.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-191">After the resize, the application can't make updates to the red region without resizing the virtual surface again.</span></span>

![<span data-ttu-id="e2cc3-192">cambiar el tamaño de una superficie virtual</span><span class="sxs-lookup"><span data-stu-id="e2cc3-192">resizing a virtual surface</span></span> ](images/resize-virtual-surface.png)

<span data-ttu-id="e2cc3-193">La operación de cambiar el tamaño surte efecto inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-193">The resize operation takes effect immediately.</span></span> <span data-ttu-id="e2cc3-194">DirectComposition no espera a que la aplicación llame a [**commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) para realizar las actualizaciones de tamaño.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-194">DirectComposition doesn't wait for the application to call [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) to make the resize updates.</span></span> <span data-ttu-id="e2cc3-195">Por ejemplo, supongamos que una aplicación realiza la siguiente secuencia de llamadas.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-195">For example, suppose an application makes the following sequence of calls.</span></span>


```
pVirtualSurface->Resize(0, 0);
pVirtualSurface->Resize(INT_MAX, INT_MAX);
pDevice->Commit();
```



<span data-ttu-id="e2cc3-196">En este ejemplo, la aplicación pierde todo el contenido en el primer ajuste de tamaño.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-196">In this example, the application loses all content on the first resize.</span></span> <span data-ttu-id="e2cc3-197">El segundo cambio de tamaño no tiene ningún efecto a pesar de que se llamó antes de la [**confirmación**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span><span class="sxs-lookup"><span data-stu-id="e2cc3-197">The second resize has no effect even though it was called before [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span></span> <span data-ttu-id="e2cc3-198">En este caso, no se muestra nada en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-198">In this case nothing shows on the screen.</span></span>

### <a name="trimming-a-virtual-surface"></a><span data-ttu-id="e2cc3-199">Recorte de una superficie virtual</span><span class="sxs-lookup"><span data-stu-id="e2cc3-199">Trimming a virtual surface</span></span>

<span data-ttu-id="e2cc3-200">El método [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) identifica la región de la superficie virtual que necesita la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-200">The [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) method identifies the region of the virtual surface that the application needs.</span></span> <span data-ttu-id="e2cc3-201">No cambia el tamaño de los límites de la superficie virtual, pero indica a DirectComposition qué superficies lógicas hay que asignar actualmente.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-201">It doesn't resize the boundaries of the virtual surface, but it does tell DirectComposition which logical surfaces currently need to be allocated.</span></span>

<span data-ttu-id="e2cc3-202">En la ilustración siguiente, el cuadrado verde es la ventanilla de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-202">In the following illustration, the green square is the application’s viewport.</span></span> <span data-ttu-id="e2cc3-203">La aplicación se representa inicialmente en los seis primeros mosaicos (azul) de la superficie virtual (gris claro) que se encuentran en la ventanilla.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-203">The application initially renders to the first six tiles (blue) of the virtual surface (light gray) that are in the viewport.</span></span> <span data-ttu-id="e2cc3-204">A medida que la página representada por la superficie virtual se desplaza, la aplicación debe representar los últimos seis mosaicos.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-204">As the page that is represented by the virtual surface scrolls, the application needs to render the last six tiles.</span></span> <span data-ttu-id="e2cc3-205">La aplicación llama a [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) para indicar que la región definida por los seis últimos iconos es donde el contenido es y el resto no es necesario en este momento.</span><span class="sxs-lookup"><span data-stu-id="e2cc3-205">The application calls [**Trim**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvirtualsurface-trim) to indicate that the region defined by the last six tiles is where the content is, and the rest is not needed at the moment.</span></span> <span data-ttu-id="e2cc3-206">A continuación, DirectComposition puede optar por reciclar las superficies lógicas que originalmente representaban los seis primeros mosaicos (gris oscuro).</span><span class="sxs-lookup"><span data-stu-id="e2cc3-206">DirectComposition can then choose to recycle the logical surfaces that originally represented the first six tiles (dark gray).</span></span>

![recorte de una superficie virtual](images/trim-virtual-surface.png)

## <a name="related-topics"></a><span data-ttu-id="e2cc3-208">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e2cc3-208">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e2cc3-209">Conceptos de DirectComposition</span><span class="sxs-lookup"><span data-stu-id="e2cc3-209">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 