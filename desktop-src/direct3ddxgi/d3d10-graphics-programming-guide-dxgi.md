---
description: En este tema se incluyen las siguientes secciones.
ms.assetid: 0522ccbf-e754-470a-8199-004fcbaa927d
title: Información general sobre DXGI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 324a5be26aade17385a6ab0b7d347015497a2a3f
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104494567"
---
# <a name="dxgi-overview"></a><span data-ttu-id="aa984-103">Información general sobre DXGI</span><span class="sxs-lookup"><span data-stu-id="aa984-103">DXGI overview</span></span>

<span data-ttu-id="aa984-104">Microsoft DirectX Graphics Infrastructure (DXGI) reconoce que algunas partes de los gráficos evolucionan más lentamente que otras.</span><span class="sxs-lookup"><span data-stu-id="aa984-104">Microsoft DirectX Graphics Infrastructure (DXGI) recognizes that some parts of graphics evolve more slowly than others.</span></span> <span data-ttu-id="aa984-105">El objetivo principal de DXGI es administrar tareas de bajo nivel que pueden ser independientes del tiempo de ejecución de gráficos de DirectX.</span><span class="sxs-lookup"><span data-stu-id="aa984-105">The primary goal of DXGI is to manage low-level tasks that can be independent of the DirectX graphics runtime.</span></span> <span data-ttu-id="aa984-106">DXGI proporciona un marco común para los componentes de gráficos futuros; el primer componente que aprovecha DXGI es Microsoft Direct3D 10.</span><span class="sxs-lookup"><span data-stu-id="aa984-106">DXGI provides a common framework for future graphics components; the first component that takes advantage of DXGI is Microsoft Direct3D 10.</span></span>

<span data-ttu-id="aa984-107">En las versiones anteriores de Direct3D, las tareas de bajo nivel, como la enumeración de los dispositivos de hardware, la presentación de fotogramas representados en una salida, el control de gamma y la administración de una transición de pantalla completa se incluían en el tiempo de ejecución de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="aa984-107">In previous versions of Direct3D, low-level tasks like enumeration of hardware devices, presenting rendered frames to an output, controlling gamma, and managing a full-screen transition were included in the Direct3D runtime.</span></span> <span data-ttu-id="aa984-108">Estas tareas se implementan ahora en DXGI.</span><span class="sxs-lookup"><span data-stu-id="aa984-108">These tasks are now implemented in DXGI.</span></span>

<span data-ttu-id="aa984-109">El objetivo de DXGI es comunicarse con el controlador de modo kernel y el hardware del sistema, tal como se muestra en el diagrama siguiente.</span><span class="sxs-lookup"><span data-stu-id="aa984-109">DXGI's purpose is to communicate with the kernel mode driver and the system hardware, as shown in the following diagram.</span></span>

![diagrama de la comunicación entre aplicaciones, dxgi y controladores y hardware](images/dxgi-dll.png)

<span data-ttu-id="aa984-111">Una aplicación puede acceder a la DXGI directamente o llamar a las API de Direct3D en D3D11 \_ 1. h, D3D11. h, D3D10 \_ 1. h o D3D10. h, que controla las comunicaciones con DXGI.</span><span class="sxs-lookup"><span data-stu-id="aa984-111">An application can access DXGI directly, or call the Direct3D APIs in D3D11\_1.h, D3D11.h, D3D10\_1.h, or D3D10.h, which handles the communications with DXGI for you.</span></span> <span data-ttu-id="aa984-112">Puede que desee trabajar con DXGI directamente si la aplicación necesita enumerar dispositivos o controlar cómo se presentan los datos en una salida.</span><span class="sxs-lookup"><span data-stu-id="aa984-112">You may want to work with DXGI directly if your application needs to enumerate devices or control how data is presented to an output.</span></span>

<span data-ttu-id="aa984-113">En este tema se incluyen las siguientes secciones.</span><span class="sxs-lookup"><span data-stu-id="aa984-113">This topic contains the following sections.</span></span>

-   [<span data-ttu-id="aa984-114">Enumerar adaptadores</span><span class="sxs-lookup"><span data-stu-id="aa984-114">Enumerating Adapters</span></span>](#enumerating-adapters)
    -   [<span data-ttu-id="aa984-115">Nueva información acerca de la enumeración de adaptadores para Windows 8</span><span class="sxs-lookup"><span data-stu-id="aa984-115">New info about enumerating adapters for Windows 8</span></span>](#new-info-about-enumerating-adapters-for-windows-8)
-   [<span data-ttu-id="aa984-116">Presentación</span><span class="sxs-lookup"><span data-stu-id="aa984-116">Presentation</span></span>](#presentation)
    -   [<span data-ttu-id="aa984-117">Crear una cadena de intercambio</span><span class="sxs-lookup"><span data-stu-id="aa984-117">Create a Swap Chain</span></span>](#create-a-swap-chain)
    -   [<span data-ttu-id="aa984-118">Atención e alimentación de la cadena de intercambio</span><span class="sxs-lookup"><span data-stu-id="aa984-118">Care and Feeding of the Swap Chain</span></span>](#care-and-feeding-of-the-swap-chain)
    -   [<span data-ttu-id="aa984-119">Control de cambio de tamaño de ventana</span><span class="sxs-lookup"><span data-stu-id="aa984-119">Handling Window Resizing</span></span>](#handling-window-resizing)
    -   [<span data-ttu-id="aa984-120">Elección del tamaño y la salida de DXGI</span><span class="sxs-lookup"><span data-stu-id="aa984-120">Choosing the DXGI Output and Size</span></span>](#choosing-the-dxgi-output-and-size)
    -   [<span data-ttu-id="aa984-121">Depuración en modo de Full-Screen</span><span class="sxs-lookup"><span data-stu-id="aa984-121">Debugging in Full-Screen Mode</span></span>](#debugging-in-full-screen-mode)
    -   [<span data-ttu-id="aa984-122">Destruir una cadena de intercambio</span><span class="sxs-lookup"><span data-stu-id="aa984-122">Destroying a Swap Chain</span></span>](#destroying-a-swap-chain)
    -   [<span data-ttu-id="aa984-123">Uso de un monitor girado</span><span class="sxs-lookup"><span data-stu-id="aa984-123">Using a Rotated Monitor</span></span>](#using-a-rotated-monitor)
    -   [<span data-ttu-id="aa984-124">Cambiar modos</span><span class="sxs-lookup"><span data-stu-id="aa984-124">Switching Modes</span></span>](#switching-modes)
    -   [<span data-ttu-id="aa984-125">Sugerencia de rendimiento de pantalla completa</span><span class="sxs-lookup"><span data-stu-id="aa984-125">Full-Screen Performance Tip</span></span>](#full-screen-performance-tip)
    -   [<span data-ttu-id="aa984-126">Consideraciones sobre subprocesos</span><span class="sxs-lookup"><span data-stu-id="aa984-126">Multithread Considerations</span></span>](#multithread-considerations)
-   [<span data-ttu-id="aa984-127">Respuestas de DXGI desde DLLMain</span><span class="sxs-lookup"><span data-stu-id="aa984-127">DXGI Responses from DLLMain</span></span>](#dxgi-responses-from-dllmain)
-   [<span data-ttu-id="aa984-128">Cambios en DXGI 1,1</span><span class="sxs-lookup"><span data-stu-id="aa984-128">DXGI 1.1 Changes</span></span>](#dxgi-11-changes)
-   [<span data-ttu-id="aa984-129">Cambios en DXGI 1,2</span><span class="sxs-lookup"><span data-stu-id="aa984-129">DXGI 1.2 Changes</span></span>](#dxgi-12-changes)
-   [<span data-ttu-id="aa984-130">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="aa984-130">Related topics</span></span>](#related-topics)

<span data-ttu-id="aa984-131">Para ver qué formatos son compatibles con el hardware de Direct3D 11:</span><span class="sxs-lookup"><span data-stu-id="aa984-131">To see which formats are supported by Direct3D 11 hardware:</span></span>

-   [<span data-ttu-id="aa984-132">Compatibilidad con el formato de DXGI para el hardware de nivel de característica de Direct3D 12,1</span><span class="sxs-lookup"><span data-stu-id="aa984-132">DXGI Format Support for Direct3D Feature Level 12.1 Hardware</span></span>](hardware-support-for-direct3d-12-1-formats.md)
-   [<span data-ttu-id="aa984-133">Compatibilidad con el formato de DXGI para el hardware de nivel de característica de Direct3D 12,0</span><span class="sxs-lookup"><span data-stu-id="aa984-133">DXGI Format Support for Direct3D Feature Level 12.0 Hardware</span></span>](hardware-support-for-direct3d-12-0-formats.md)
-   [<span data-ttu-id="aa984-134">Compatibilidad con el formato de DXGI para el hardware de nivel de característica de Direct3D 11,1</span><span class="sxs-lookup"><span data-stu-id="aa984-134">DXGI Format Support for Direct3D Feature Level 11.1 Hardware</span></span>](format-support-for-direct3d-11-1-feature-level-hardware.md)
-   [<span data-ttu-id="aa984-135">Compatibilidad con el formato de DXGI para el hardware de nivel de característica de Direct3D 11,0</span><span class="sxs-lookup"><span data-stu-id="aa984-135">DXGI Format Support for Direct3D Feature Level 11.0 Hardware</span></span>](format-support-for-direct3d-11-0-feature-level-hardware.md)
-   <span data-ttu-id="aa984-136">[Compatibilidad de hardware con formatos 10Level9 de Direct3D](/previous-versions//ff471324(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="aa984-136">[Hardware Support for Direct3D 10Level9 Formats](/previous-versions//ff471324(v=vs.85))</span></span>
-   <span data-ttu-id="aa984-137">[Compatibilidad de hardware con formatos de Direct3D 10,1](/previous-versions//cc627091(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="aa984-137">[Hardware Support for Direct3D 10.1 Formats](/previous-versions//cc627091(v=vs.85))</span></span>
-   <span data-ttu-id="aa984-138">[Compatibilidad de hardware con formatos de Direct3D 10](/previous-versions//cc627090(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="aa984-138">[Hardware Support for Direct3D 10 Formats](/previous-versions//cc627090(v=vs.85))</span></span>

## <a name="enumerating-adapters"></a><span data-ttu-id="aa984-139">Enumerar adaptadores</span><span class="sxs-lookup"><span data-stu-id="aa984-139">Enumerating adapters</span></span>

<span data-ttu-id="aa984-140">Un adaptador es una abstracción del hardware y la funcionalidad de software del equipo.</span><span class="sxs-lookup"><span data-stu-id="aa984-140">An adapter is an abstraction of the hardware and the software capability of your computer.</span></span> <span data-ttu-id="aa984-141">Normalmente hay muchos adaptadores en el equipo.</span><span class="sxs-lookup"><span data-stu-id="aa984-141">There are generally many adapters on your machine.</span></span> <span data-ttu-id="aa984-142">Algunos dispositivos se implementan en hardware (como la tarjeta de vídeo) y otros se implementan en software (como el rasterizador de referencia de Direct3D).</span><span class="sxs-lookup"><span data-stu-id="aa984-142">Some devices are implemented in hardware (like your video card) and some are implemented in software (like the Direct3D reference rasterizer).</span></span> <span data-ttu-id="aa984-143">Los adaptadores implementan la funcionalidad usada por una aplicación gráfica.</span><span class="sxs-lookup"><span data-stu-id="aa984-143">Adapters implement functionality used by a graphic application.</span></span> <span data-ttu-id="aa984-144">En el diagrama siguiente se muestra un sistema con un solo equipo, dos adaptadores (tarjetas de vídeo) y tres monitores de salida.</span><span class="sxs-lookup"><span data-stu-id="aa984-144">The following diagram shows a system with a single computer, two adapters (video cards), and three output monitors.</span></span>

![diagrama de un equipo con dos tarjetas de vídeo y tres monitores](images/dxgi-terms.png)

<span data-ttu-id="aa984-146">Al enumerar estos componentes de hardware, DXGI crea una interfaz [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) para cada salida (o monitor) y una interfaz [**IDXGIAdapter2**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgiadapter2) para cada tarjeta de vídeo (incluso si se trata de una tarjeta de vídeo integrada en una placa base).</span><span class="sxs-lookup"><span data-stu-id="aa984-146">When enumerating these pieces of hardware, DXGI creates an [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) interface for each output (or monitor) and an [**IDXGIAdapter2**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgiadapter2) interface for each video card (even if it is a video card built into a motherboard).</span></span> <span data-ttu-id="aa984-147">La enumeración se realiza mediante una llamada de interfaz [**IDXGIFactory**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgifactory2) , [**IDXGIFactory:: EnumAdapters**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-enumadapters), para devolver un conjunto de interfaces [**IDXGIAdapter**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) que representan el hardware de vídeo.</span><span class="sxs-lookup"><span data-stu-id="aa984-147">Enumeration is done by using an [**IDXGIFactory**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgifactory2) interface call, [**IDXGIFactory::EnumAdapters**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-enumadapters), to return a set of [**IDXGIAdapter**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter) interfaces that represent the video hardware.</span></span>

<span data-ttu-id="aa984-148">DXGI 1,1 agregó la interfaz [**IDXGIFactory1**](/windows/win32/api/DXGI/nn-dxgi-idxgifactory1) .</span><span class="sxs-lookup"><span data-stu-id="aa984-148">DXGI 1.1 added the [**IDXGIFactory1**](/windows/win32/api/DXGI/nn-dxgi-idxgifactory1) interface.</span></span> <span data-ttu-id="aa984-149">[**IDXGIFactory1:: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) devuelve un conjunto de interfaces [**IDXGIAdapter1**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter1) que representa el hardware de vídeo.</span><span class="sxs-lookup"><span data-stu-id="aa984-149">[**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) returns a set of [**IDXGIAdapter1**](/windows/win32/api/DXGI/nn-dxgi-idxgiadapter1) interfaces that represents the video hardware.</span></span>

<span data-ttu-id="aa984-150">Si desea seleccionar capacidades de hardware de vídeo específicas al usar las API de Direct3D, se recomienda llamar a la función [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) o [**D3D11CreateDeviceAndSwapChain**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdeviceandswapchain) con cada identificador de adaptador y posible nivel de [característica](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md)de hardware.</span><span class="sxs-lookup"><span data-stu-id="aa984-150">If you want to select specific video hardware capabilities when you use Direct3D APIs, we recommend that you iteratively call the [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) or [**D3D11CreateDeviceAndSwapChain**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdeviceandswapchain) function with each adapter handle and possible hardware [feature level](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md).</span></span> <span data-ttu-id="aa984-151">Esta función se ejecuta correctamente si el adaptador especificado es compatible con el nivel de característica.</span><span class="sxs-lookup"><span data-stu-id="aa984-151">This function succeeds if the feature level is supported by the specified adapter.</span></span>

### <a name="new-info-about-enumerating-adapters-for-windows-8"></a><span data-ttu-id="aa984-152">Nueva información acerca de la enumeración de adaptadores para Windows 8</span><span class="sxs-lookup"><span data-stu-id="aa984-152">New info about enumerating adapters for Windows 8</span></span>

<span data-ttu-id="aa984-153">A partir de Windows 8, siempre está presente un adaptador denominado "Microsoft Basic Render driver".</span><span class="sxs-lookup"><span data-stu-id="aa984-153">Starting with Windows 8, an adapter called the "Microsoft Basic Render Driver" is always present.</span></span> <span data-ttu-id="aa984-154">Este adaptador tiene un ID. de cuenta de **0x1414** y un ID. de **0x8c**.</span><span class="sxs-lookup"><span data-stu-id="aa984-154">This adapter has a VendorId of **0x1414** and a DeviceID of **0x8c**.</span></span> <span data-ttu-id="aa984-155">Este adaptador también tiene establecido el valor de [**\_ \_ \_ software marca de adaptador de dxgi**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) en el miembro **Flags** de la estructura [**\_ \_ DESC2 del adaptador de dxgi**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_adapter_desc2) .</span><span class="sxs-lookup"><span data-stu-id="aa984-155">This adapter also has the [**DXGI\_ADAPTER\_FLAG\_SOFTWARE**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) value set in the **Flags** member of its [**DXGI\_ADAPTER\_DESC2**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_adapter_desc2) structure.</span></span> <span data-ttu-id="aa984-156">Este adaptador es un dispositivo solo de representación que no tiene salidas de presentación.</span><span class="sxs-lookup"><span data-stu-id="aa984-156">This adapter is a render-only device that has no display outputs.</span></span> <span data-ttu-id="aa984-157">DXGI nunca devuelve un [**dispositivo de error de dxgi \_ \_ \_ quitado**](dxgi-error.md) para este adaptador.</span><span class="sxs-lookup"><span data-stu-id="aa984-157">DXGI never returns [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md) for this adapter.</span></span>

<span data-ttu-id="aa984-158">Si el controlador de pantalla de un equipo no funciona o está deshabilitado, el adaptador principal (**null**) del equipo también podría denominarse "controlador de representación básica de Microsoft".</span><span class="sxs-lookup"><span data-stu-id="aa984-158">If a computer's display driver is not functioning or is disabled, the computer's primary (**NULL**) adapter might also be called "Microsoft Basic Render Driver."</span></span> <span data-ttu-id="aa984-159">Pero este adaptador tiene salidas y no tiene establecido el valor de [**\_ \_ \_ software marca de adaptador de DXGI**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) .</span><span class="sxs-lookup"><span data-stu-id="aa984-159">But this adapter has outputs and doesn't have the [**DXGI\_ADAPTER\_FLAG\_SOFTWARE**](/windows/win32/api/dxgi/ne-dxgi-dxgi_adapter_flag) value set.</span></span> <span data-ttu-id="aa984-160">El sistema operativo y las aplicaciones usan este adaptador de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="aa984-160">The operating system and apps use this adapter by default.</span></span> <span data-ttu-id="aa984-161">Si un controlador de pantalla está instalado o habilitado, las aplicaciones pueden recibir un [**dispositivo de error de DXGI \_ \_ \_ quitado**](dxgi-error.md) para este adaptador y, después, deben volver a enumerar los adaptadores.</span><span class="sxs-lookup"><span data-stu-id="aa984-161">If a display driver is installed or enabled, apps can receive [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md) for this adapter and then must re-enumerate adapters again.</span></span>

<span data-ttu-id="aa984-162">Cuando el adaptador de pantalla principal de un equipo es el "adaptador de pantalla básico de Microsoft[" (adaptador](../direct3d11/overviews-direct3d-11-devices-create-warp.md) de deformación), ese equipo también tiene un segundo adaptador.</span><span class="sxs-lookup"><span data-stu-id="aa984-162">When a computer's primary display adapter is the "Microsoft Basic Display Adapter" ([WARP](../direct3d11/overviews-direct3d-11-devices-create-warp.md) adapter), that computer also has a second adapter.</span></span> <span data-ttu-id="aa984-163">Este segundo adaptador es el dispositivo de solo representación que no tiene salidas de presentación y para la que DXGI nunca devuelve un [**\_ dispositivo de error de \_ \_ dxgi**](dxgi-error.md).</span><span class="sxs-lookup"><span data-stu-id="aa984-163">This second adapter is the render-only device that has no display outputs and for which DXGI never returns [**DXGI\_ERROR\_DEVICE\_REMOVED**](dxgi-error.md).</span></span>

<span data-ttu-id="aa984-164">Si desea usar WARP para la representación, el proceso u otras tareas de ejecución prolongada, se recomienda usar el dispositivo de solo representación.</span><span class="sxs-lookup"><span data-stu-id="aa984-164">If you want to use WARP for rendering, compute, or other long running tasks, we recommend to use the render-only device.</span></span> <span data-ttu-id="aa984-165">Puede obtener un puntero al dispositivo de solo representación llamando al método [**IDXGIFactory1:: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) .</span><span class="sxs-lookup"><span data-stu-id="aa984-165">You can obtain a pointer to the render-only device by calling the [**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) method.</span></span> <span data-ttu-id="aa984-166">También creará el dispositivo de solo representación Cuando especifique el [**\_ tipo de controlador D3D \_ \_ Warp**](/windows/win32/api/d3dcommon/ne-d3dcommon-d3d_driver_type) en el parámetro *DriverType* de [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) , ya que el dispositivo de deformación también utiliza el adaptador de alabeo de solo representación.</span><span class="sxs-lookup"><span data-stu-id="aa984-166">You also create the render-only device when you specify [**D3D\_DRIVER\_TYPE\_WARP**](/windows/win32/api/d3dcommon/ne-d3dcommon-d3d_driver_type) in the *DriverType* parameter of [**D3D11CreateDevice**](/windows/win32/api/d3d11/nf-d3d11-d3d11createdevice) because the WARP device also uses the render-only WARP adapter.</span></span>

## <a name="presentation"></a><span data-ttu-id="aa984-167">Presentación</span><span class="sxs-lookup"><span data-stu-id="aa984-167">Presentation</span></span>

<span data-ttu-id="aa984-168">El trabajo de la aplicación es representar fotogramas y pedir a DXGI que presente esos fotogramas en la salida.</span><span class="sxs-lookup"><span data-stu-id="aa984-168">Your application's job is to render frames and ask DXGI to present those frames to the output.</span></span> <span data-ttu-id="aa984-169">Si la aplicación tiene dos búferes disponibles, puede representar un búfer mientras presenta otro.</span><span class="sxs-lookup"><span data-stu-id="aa984-169">If the application has two buffers available, it can render one buffer while presenting another one.</span></span> <span data-ttu-id="aa984-170">La aplicación podría requerir más de dos búferes según el tiempo necesario para representar un fotograma o la velocidad de fotogramas deseada para la presentación.</span><span class="sxs-lookup"><span data-stu-id="aa984-170">The application might require more than two buffers depending on the time it takes to render a frame or the desired frame rate for presentation.</span></span> <span data-ttu-id="aa984-171">El conjunto de búferes creados se denomina cadena de intercambio, como se muestra aquí.</span><span class="sxs-lookup"><span data-stu-id="aa984-171">The set of buffers created is called a swap chain, as shown here.</span></span>

![Ilustración de una cadena de intercambio](images/dxgi-swap-chain.png)

-   [<span data-ttu-id="aa984-173">Crear una cadena de intercambio</span><span class="sxs-lookup"><span data-stu-id="aa984-173">Create a Swap Chain</span></span>](#create-a-swap-chain)
-   [<span data-ttu-id="aa984-174">Atención e alimentación de la cadena de intercambio</span><span class="sxs-lookup"><span data-stu-id="aa984-174">Care and Feeding of the Swap Chain</span></span>](#care-and-feeding-of-the-swap-chain)
-   [<span data-ttu-id="aa984-175">Control de cambio de tamaño de ventana</span><span class="sxs-lookup"><span data-stu-id="aa984-175">Handling Window Resizing</span></span>](#handling-window-resizing)
-   [<span data-ttu-id="aa984-176">Elección del tamaño y la salida de DXGI</span><span class="sxs-lookup"><span data-stu-id="aa984-176">Choosing the DXGI Output and Size</span></span>](#choosing-the-dxgi-output-and-size)
-   [<span data-ttu-id="aa984-177">Depuración en modo de Full-Screen</span><span class="sxs-lookup"><span data-stu-id="aa984-177">Debugging in Full-Screen Mode</span></span>](#debugging-in-full-screen-mode)
-   [<span data-ttu-id="aa984-178">Destruir una cadena de intercambio</span><span class="sxs-lookup"><span data-stu-id="aa984-178">Destroying a Swap Chain</span></span>](#destroying-a-swap-chain)
-   [<span data-ttu-id="aa984-179">Uso de un monitor girado</span><span class="sxs-lookup"><span data-stu-id="aa984-179">Using a Rotated Monitor</span></span>](#using-a-rotated-monitor)
-   [<span data-ttu-id="aa984-180">Cambiar modos</span><span class="sxs-lookup"><span data-stu-id="aa984-180">Switching Modes</span></span>](#switching-modes)
-   [<span data-ttu-id="aa984-181">Sugerencia de rendimiento de pantalla completa</span><span class="sxs-lookup"><span data-stu-id="aa984-181">Full-Screen Performance Tip</span></span>](#full-screen-performance-tip)
-   [<span data-ttu-id="aa984-182">Consideraciones sobre subprocesos</span><span class="sxs-lookup"><span data-stu-id="aa984-182">Multithread Considerations</span></span>](#multithread-considerations)

<span data-ttu-id="aa984-183">Una cadena de intercambio tiene un búfer frontal y uno o más búferes de reserva.</span><span class="sxs-lookup"><span data-stu-id="aa984-183">A swap chain has one front buffer and one or more back buffers.</span></span> <span data-ttu-id="aa984-184">Cada aplicación crea su propia cadena de intercambio.</span><span class="sxs-lookup"><span data-stu-id="aa984-184">Each application creates its own swap chain.</span></span> <span data-ttu-id="aa984-185">Para maximizar la velocidad de la presentación de los datos en una salida, casi siempre se crea una cadena de intercambio en la memoria de un subsistema de pantalla, que se muestra en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="aa984-185">To maximize the speed of the presentation of the data to an output, a swap chain is almost always created in the memory of a display sub-system, which is shown in the following illustration.</span></span>

![Ilustración de un subsistema de presentación](images/dxgi-adapter.png)

<span data-ttu-id="aa984-187">El subsistema de pantalla (que suele ser una tarjeta de vídeo, pero que se puede implementar en una placa base) contiene una GPU, un convertidor digital a analógico (DAC) y una memoria.</span><span class="sxs-lookup"><span data-stu-id="aa984-187">The display sub-system (which is often a video card but could be implemented on a motherboard) contains a GPU, a digital to analog converter (DAC), and memory.</span></span> <span data-ttu-id="aa984-188">La cadena de intercambio se asigna en esta memoria para agilizar la presentación.</span><span class="sxs-lookup"><span data-stu-id="aa984-188">The swap chain is allocated within this memory to make presentation very fast.</span></span> <span data-ttu-id="aa984-189">El subsistema de visualización presenta los datos en el búfer frontal a la salida.</span><span class="sxs-lookup"><span data-stu-id="aa984-189">The display sub-system presents the data in the front buffer to the output.</span></span>

<span data-ttu-id="aa984-190">Una cadena de intercambio está configurada para dibujarse en el modo de pantalla completa o en ventanas; de esta forma, se elimina la necesidad de saber si una salida está en ventana o en pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="aa984-190">A swap chain is set up to draw in full-screen or windowed mode, this eliminates the need to know whether an output is windowed or full screen.</span></span> <span data-ttu-id="aa984-191">Una cadena de intercambio en modo de pantalla completa puede optimizar el rendimiento cambiando la resolución de pantalla.</span><span class="sxs-lookup"><span data-stu-id="aa984-191">A full-screen mode swap chain can optimize performance by switching the display resolution.</span></span>

### <a name="create-a-swap-chain"></a><span data-ttu-id="aa984-192">Crear una cadena de intercambio</span><span class="sxs-lookup"><span data-stu-id="aa984-192">Create a swap chain</span></span>

<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td><span data-ttu-id="aa984-193">Diferencias entre Direct3D 9 y Direct3D 10: Direct3D 10 es el primer componente de gráficos para usar DXGI.</span><span class="sxs-lookup"><span data-stu-id="aa984-193">Differences between Direct3D 9 and Direct3D 10: Direct3D 10 is the first graphics component to use DXGI.</span></span> <span data-ttu-id="aa984-194">DXGI tiene distintos comportamientos de cadena de intercambio.</span><span class="sxs-lookup"><span data-stu-id="aa984-194">DXGI has some different swap chain behaviors.</span></span><br/>
<ul>
<li><span data-ttu-id="aa984-195">En DXGI, una cadena de intercambio está ligada a una ventana cuando se crea la cadena de intercambio.</span><span class="sxs-lookup"><span data-stu-id="aa984-195">In DXGI, a swap chain is tied to a window when the swap chain is created.</span></span> <span data-ttu-id="aa984-196">Este cambio mejora el rendimiento y ahorra memoria.</span><span class="sxs-lookup"><span data-stu-id="aa984-196">This change improves performance and saves memory.</span></span> <span data-ttu-id="aa984-197">Las versiones anteriores de Direct3D permitían que la cadena de intercambio cambiara la ventana a la que está vinculada la cadena de intercambio.</span><span class="sxs-lookup"><span data-stu-id="aa984-197">Previous versions of Direct3D allowed the swap chain to change the window that the swap chain is tied to.</span></span></li>
<li><span data-ttu-id="aa984-198">En DXGI, una cadena de intercambio está asociada a un dispositivo de representación en la creación.</span><span class="sxs-lookup"><span data-stu-id="aa984-198">In DXGI, a swap chain is tied to a rendering device on creation.</span></span> <span data-ttu-id="aa984-199">El objeto de dispositivo que devuelven las funciones de dispositivo de creación de Direct3D implementa la interfaz <a href="/windows/win32/api/unknwn/nn-unknwn-iunknown"><strong>IUnknown</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="aa984-199">The device object that the Direct3D create device functions return implements the <a href="/windows/win32/api/unknwn/nn-unknwn-iunknown"><strong>IUnknown</strong></a> interface.</span></span> <span data-ttu-id="aa984-200">Puede llamar a <a href="/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)"><strong>QueryInterface</strong></a> para consultar la interfaz <a href="/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgidevice2"><strong>IDXGIDevice2</strong></a> correspondiente del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="aa984-200">You can call <a href="/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)"><strong>QueryInterface</strong></a> to query for the device's corresponding <a href="/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgidevice2"><strong>IDXGIDevice2</strong></a> interface.</span></span> <span data-ttu-id="aa984-201">Un cambio en el dispositivo de representación requiere que se vuelva a crear la cadena de intercambio.</span><span class="sxs-lookup"><span data-stu-id="aa984-201">A change to the rendering device requires the swap chain to be recreated.</span></span></li>
<li><p><span data-ttu-id="aa984-202">En DXGI, los efectos de intercambio disponibles son DXGI_SWAP_EFFECT_DISCARD y DXGI_SWAP_EFFECT_SEQUENTIAL.</span><span class="sxs-lookup"><span data-stu-id="aa984-202">In DXGI, the swap effects available are DXGI_SWAP_EFFECT_DISCARD and DXGI_SWAP_EFFECT_SEQUENTIAL.</span></span> <span data-ttu-id="aa984-203">A partir de Windows 8, el efecto de intercambio de DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL también está disponible.</span><span class="sxs-lookup"><span data-stu-id="aa984-203">Starting with Windows 8 the DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL swap effect is also available.</span></span> <span data-ttu-id="aa984-204">En la tabla siguiente se muestra una asignación de las definiciones del efecto de intercambio de Direct3D 9 a DXGI.</span><span class="sxs-lookup"><span data-stu-id="aa984-204">The following table shows a mapping of Direct3D 9 to DXGI swap effect defines.</span></span> </p>
<table>
<thead>
<tr class="header">
<th><span data-ttu-id="aa984-205">Efecto de intercambio de D3D9</span><span class="sxs-lookup"><span data-stu-id="aa984-205">D3D9 Swap Effect</span></span></th>
<th><span data-ttu-id="aa984-206">Efecto de intercambio de DXGI</span><span class="sxs-lookup"><span data-stu-id="aa984-206">DXGI Swap Effect</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="aa984-207">D3DSWAPEFFECT_DISCARD</span><span class="sxs-lookup"><span data-stu-id="aa984-207">D3DSWAPEFFECT_DISCARD</span></span></td>
<td><span data-ttu-id="aa984-208">DXGI_SWAP_EFFECT_DISCARD</span><span class="sxs-lookup"><span data-stu-id="aa984-208">DXGI_SWAP_EFFECT_DISCARD</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="aa984-209">D3DSWAPEFFECT_COPY</span><span class="sxs-lookup"><span data-stu-id="aa984-209">D3DSWAPEFFECT_COPY</span></span></td>
<td><span data-ttu-id="aa984-210">DXGI_SWAP_EFFECT_SEQUENTIAL con 1 búfer</span><span class="sxs-lookup"><span data-stu-id="aa984-210">DXGI_SWAP_EFFECT_SEQUENTIAL with 1 buffer</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="aa984-211">D3DSWAPEFFECT_FLIP</span><span class="sxs-lookup"><span data-stu-id="aa984-211">D3DSWAPEFFECT_FLIP</span></span></td>
<td><span data-ttu-id="aa984-212">DXGI_SWAP_EFFECT_SEQUENTIAL con 2 o más búferes</span><span class="sxs-lookup"><span data-stu-id="aa984-212">DXGI_SWAP_EFFECT_SEQUENTIAL with 2 or more buffers</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="aa984-213">D3DSWAPEFFECT_FLIPEX</span><span class="sxs-lookup"><span data-stu-id="aa984-213">D3DSWAPEFFECT_FLIPEX</span></span></td>
<td><span data-ttu-id="aa984-214">DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL con 2 o más búferes</span><span class="sxs-lookup"><span data-stu-id="aa984-214">DXGI_SWAP_EFFECT_FLIP_SEQUENTIAL with 2 or more buffers</span></span></td>
</tr>
</tbody>
</table>
<p></p>
<p> </p></li>
</ul></td>
</tr>
</tbody>
</table>



 

<span data-ttu-id="aa984-215">Los búferes de una cadena de intercambio se crean con un tamaño determinado y en un formato determinado.</span><span class="sxs-lookup"><span data-stu-id="aa984-215">A swap chain's buffers are created at a particular size and in a particular format.</span></span> <span data-ttu-id="aa984-216">La aplicación especifica estos valores (o puede heredar el tamaño de la ventana de destino) en el inicio y, después, puede modificarlos opcionalmente a medida que cambia el tamaño de la ventana en respuesta a los eventos del usuario o del programa.</span><span class="sxs-lookup"><span data-stu-id="aa984-216">The application specifies these values (or you can inherit the size from the target window) at startup, and can then optionally modify them as the window size changes in response to user input or program events.</span></span>

<span data-ttu-id="aa984-217">Después de crear la cadena de intercambio, normalmente querrá representar imágenes en ella.</span><span class="sxs-lookup"><span data-stu-id="aa984-217">After you create the swap chain, you will typically want to render images into it.</span></span> <span data-ttu-id="aa984-218">A continuación se muestra un fragmento de código que configura un contexto de Direct3D para que se represente en una cadena de intercambio.</span><span class="sxs-lookup"><span data-stu-id="aa984-218">Here's a code fragment that sets up a Direct3D context to render into a swap chain.</span></span> <span data-ttu-id="aa984-219">Este código extrae un búfer de la cadena de intercambio, crea una vista de destino de representación desde ese búfer y, a continuación, lo establece en el dispositivo:</span><span class="sxs-lookup"><span data-stu-id="aa984-219">This code extracts a buffer from the swap chain, creates a render-target-view from that buffer, then sets it on the device:</span></span>


```
ID3D11Resource * pBB;
ThrowFailure( pSwapChain->GetBuffer(0, __uuidof(pBB),    
  reinterpret_cast<void**>(&pBB)), "Couldn't get back buffer");
ID3D11RenderTargetView * pView;
ThrowFailure( pD3D11Device->CreateRenderTargetView(pBB, NULL, &pView), 
  "Couldn't create view" );
pD3D11DeviceContext->OMSetRenderTargets(1, &pView, 0);
        
```



<span data-ttu-id="aa984-220">Una vez que la aplicación representa un fotograma en un búfer de la cadena de intercambio, llame a [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1).</span><span class="sxs-lookup"><span data-stu-id="aa984-220">After your application renders a frame into a swap-chain buffer, call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1).</span></span> <span data-ttu-id="aa984-221">La aplicación puede entonces representar la siguiente imagen.</span><span class="sxs-lookup"><span data-stu-id="aa984-221">The application can then go render the next image.</span></span>

### <a name="care-and-feeding-of-the-swap-chain"></a><span data-ttu-id="aa984-222">Atención e alimentación de la cadena de intercambio</span><span class="sxs-lookup"><span data-stu-id="aa984-222">Care and feeding of the swap chain</span></span>

<span data-ttu-id="aa984-223">Después de representar la imagen, llame a [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) y vaya a representar la siguiente imagen.</span><span class="sxs-lookup"><span data-stu-id="aa984-223">After you render your image, call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) and go render the next image.</span></span> <span data-ttu-id="aa984-224">Eso es el alcance de su responsabilidad.</span><span class="sxs-lookup"><span data-stu-id="aa984-224">That is the extent of your responsibility.</span></span>

<span data-ttu-id="aa984-225">Si anteriormente llamó a [**IDXGIFactory:: MakeWindowAssociation**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-makewindowassociation), el usuario puede presionar la combinación de teclas Alt-Enter y DXGI pasará la aplicación entre el modo de pantalla completa y el de ventana.</span><span class="sxs-lookup"><span data-stu-id="aa984-225">If you previously called [**IDXGIFactory::MakeWindowAssociation**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory-makewindowassociation), the user can press the Alt-Enter key combination and DXGI will transition your application between windowed and full-screen mode.</span></span> <span data-ttu-id="aa984-226">Se recomienda **IDXGIFactory:: MakeWindowAssociation** porque se desea un mecanismo de control estándar para el usuario.</span><span class="sxs-lookup"><span data-stu-id="aa984-226">**IDXGIFactory::MakeWindowAssociation** is recommended, because a standard control mechanism for the user is strongly desired.</span></span>

<span data-ttu-id="aa984-227">Aunque no es necesario escribir más código del que se ha descrito, algunos sencillos pasos pueden hacer que la aplicación tenga mayor capacidad de respuesta.</span><span class="sxs-lookup"><span data-stu-id="aa984-227">While you don't have to write any more code than has been described, a few simple steps can make your application more responsive.</span></span> <span data-ttu-id="aa984-228">La consideración más importante es el cambio de tamaño de los búferes de la cadena de intercambio en respuesta al cambio de tamaño de la ventana de salida.</span><span class="sxs-lookup"><span data-stu-id="aa984-228">The most important consideration is the resizing of the swap chain's buffers in response to the resizing of the output window.</span></span> <span data-ttu-id="aa984-229">Naturalmente, la mejor ruta de la aplicación es responder al tamaño de WM \_ y llamar a [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers), pasando el tamaño contenido en los parámetros del mensaje.</span><span class="sxs-lookup"><span data-stu-id="aa984-229">Naturally, the application's best route is to respond to WM\_SIZE, and call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers), passing the size contained in the message's parameters.</span></span> <span data-ttu-id="aa984-230">Obviamente, este comportamiento hace que la aplicación responda bien al usuario cuando arrastra los bordes de la ventana, pero también es exactamente lo que permite una transición de pantalla completa suave.</span><span class="sxs-lookup"><span data-stu-id="aa984-230">This behavior obviously makes your application respond well to the user when he or she drags the window's borders, but it is also exactly what enables a smooth full-screen transition.</span></span> <span data-ttu-id="aa984-231">La ventana recibirá un mensaje de tamaño de WM \_ siempre que se produzca una transición, y la llamada a **IDXGISwapChain:: ResizeBuffers** es la posibilidad de que la cadena de intercambio vuelva a asignar el almacenamiento de los búferes para una presentación óptima.</span><span class="sxs-lookup"><span data-stu-id="aa984-231">Your window will receive a WM\_SIZE message whenever such a transition happens, and calling **IDXGISwapChain::ResizeBuffers** is the swap chain's chance to re-allocate the buffers' storage for optimal presentation.</span></span> <span data-ttu-id="aa984-232">Este es el motivo por el que la aplicación debe liberar todas las referencias que tiene en los búferes existentes antes de llamar a **IDXGISwapChain:: ResizeBuffers**.</span><span class="sxs-lookup"><span data-stu-id="aa984-232">This is why the application is required to release any references it has on the existing buffers before it calls **IDXGISwapChain::ResizeBuffers**.</span></span>

<span data-ttu-id="aa984-233">Si no se llama a [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) en respuesta a cambiar al modo de pantalla completa (lo que es más natural, en respuesta al tamaño de WM \_ ), puede impedir la optimización del volteo, en la que DXGI puede simplemente cambiar el búfer que se muestra, en lugar de copiar los datos de una pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="aa984-233">Failure to call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) in response to switching to full-screen mode (most naturally, in response to WM\_SIZE), can preclude the optimization of flipping, wherein DXGI can simply swap which buffer is being displayed, rather than copying a full screen's worth of data around.</span></span>

<span data-ttu-id="aa984-234">[**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) le informará si la ventana de salida es totalmente ocluidos a través de la **\_ \_ ocluidos de estado de DXGI**.</span><span class="sxs-lookup"><span data-stu-id="aa984-234">[**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) will inform you if your output window is entirely occluded via **DXGI\_STATUS\_OCCLUDED**.</span></span> <span data-ttu-id="aa984-235">Cuando esto ocurre, se recomienda que la aplicación entre en modo de espera (mediante una llamada a **IDXGISwapChain1::P resent1** con la **\_ \_ prueba de presencia de DXGI**), ya que se desperdician los recursos utilizados para representar el marco.</span><span class="sxs-lookup"><span data-stu-id="aa984-235">When this occurs, we recommended that your application go into standby mode (by calling **IDXGISwapChain1::Present1** with **DXGI\_PRESENT\_TEST**) since resources used to render the frame are wasted.</span></span> <span data-ttu-id="aa984-236">El uso de **DXGI \_ present \_ Test** impedirá que se presenten los datos mientras se sigue realizando la comprobación de la oclusión.</span><span class="sxs-lookup"><span data-stu-id="aa984-236">Using **DXGI\_PRESENT\_TEST** will prevent any data from being presented while still performing the occlusion check.</span></span> <span data-ttu-id="aa984-237">Una vez que **IDXGISwapChain1::P resent1** devuelve S \_ OK, debe salir del modo de espera; no use el código de retorno para cambiar al modo de espera, ya que esto puede dejar que la cadena de intercambio no pueda abandonar el modo de pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="aa984-237">Once **IDXGISwapChain1::Present1** returns S\_OK, you should exit standby mode; do not use the return code to switch to standby mode as doing so can leave the swap chain unable to relinquish full-screen mode.</span></span>

<span data-ttu-id="aa984-238">El tiempo de ejecución de Direct3D 11,1, que está disponible a partir de Windows 8, proporciona una cadena de intercambio de volteo del modelo (es decir, una cadena de intercambio que tenga el efecto de intercambio de dxgi, el valor [**\_ \_ \_ \_ secuencial de volteo**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) se establece en el miembro **SwapEffect** de la cadena de intercambio de dxgi o en la [**cadena de intercambio de dxgi \_ \_ \_ DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)). [**\_ \_ \_**](/windows/win32/api/DXGI/ns-dxgi-dxgi_swap_chain_desc)</span><span class="sxs-lookup"><span data-stu-id="aa984-238">The Direct3D 11.1 runtime, which is available starting with Windows 8, provides a flip-model swap chain (that is, a swap chain that has the [**DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) value set in the **SwapEffect** member of [**DXGI\_SWAP\_CHAIN\_DESC**](/windows/win32/api/DXGI/ns-dxgi-dxgi_swap_chain_desc) or [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="aa984-239">Cuando se presentan fotogramas en una salida con una cadena de intercambio de modelo Flip, DXGI desenlaza el búfer de reserva de todas las ubicaciones de estado de canalización, como un destino de representación de combinación de salida, que escriben en el búfer de reserva 0.</span><span class="sxs-lookup"><span data-stu-id="aa984-239">When you present frames to an output with a flip-model swap chain, DXGI unbinds the back buffer from all pipeline state locations, like an output-merger render target, that write to back buffer 0.</span></span> <span data-ttu-id="aa984-240">Por lo tanto, se recomienda llamar a [**ID3D11DeviceContext:: OMSetRenderTargets**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-omsetrendertargets) inmediatamente antes de representarlo en el búfer de reserva.</span><span class="sxs-lookup"><span data-stu-id="aa984-240">Therefore, we recommend that you call [**ID3D11DeviceContext::OMSetRenderTargets**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-omsetrendertargets) immediately before you render to the back buffer.</span></span> <span data-ttu-id="aa984-241">Por ejemplo, no llame a **OMSetRenderTargets** y, a continuación, realice el trabajo del sombreador de cálculo que no termine de representar el recurso.</span><span class="sxs-lookup"><span data-stu-id="aa984-241">For example, don't call **OMSetRenderTargets** and then perform compute shader work that doesn't end up rendering to the resource.</span></span> <span data-ttu-id="aa984-242">Para obtener más información sobre las cadenas de intercambio de modelo flip y sus ventajas, vea [modelo de volteo de DXGI](dxgi-flip-model.md).</span><span class="sxs-lookup"><span data-stu-id="aa984-242">For more info about flip-model swap chains and their benefits, see [DXGI Flip Model](dxgi-flip-model.md).</span></span>

> [!NOTE]  
> <span data-ttu-id="aa984-243">En Direct3D 10 y Direct3D 11, no es necesario llamar a [**IDXGISwapChain:: getBuffer**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer) para recuperar el búfer de reserva 0 después de llamar a [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) porque, por comodidad, cambian las identidades de los búferes de reserva.</span><span class="sxs-lookup"><span data-stu-id="aa984-243">In Direct3D 10 and Direct3D 11, you don't have to call [**IDXGISwapChain::GetBuffer**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-getbuffer) to retrieve back buffer 0 after you call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) because for convenience the identities of back buffers change.</span></span> <span data-ttu-id="aa984-244">Esto no ocurre en Direct3D 12 y, en su lugar, la aplicación debe realizar manualmente el seguimiento de los índices de búfer.</span><span class="sxs-lookup"><span data-stu-id="aa984-244">This doesn't happen in Direct3D 12, and your application must instead manually track back buffer indices.</span></span>

### <a name="handling-window-resizing"></a><span data-ttu-id="aa984-245">Control de cambio de tamaño de ventana</span><span class="sxs-lookup"><span data-stu-id="aa984-245">Handling window resizing</span></span>

<span data-ttu-id="aa984-246">Puede usar el método [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) para controlar el cambio de tamaño de las ventanas.</span><span class="sxs-lookup"><span data-stu-id="aa984-246">You can use the [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) method to handle window resizing.</span></span> <span data-ttu-id="aa984-247">Antes de llamar a **ResizeBuffers**, debe liberar todas las referencias pendientes a los búferes de la cadena de intercambio.</span><span class="sxs-lookup"><span data-stu-id="aa984-247">Before you call **ResizeBuffers**, you must release all outstanding references to the swap chain's buffers.</span></span> <span data-ttu-id="aa984-248">El objeto que normalmente contiene una referencia a un búfer de la cadena de intercambio es una vista de destino de representación.</span><span class="sxs-lookup"><span data-stu-id="aa984-248">The object that typically holds a reference to a swap chain's buffer is a render-target-view.</span></span>

<span data-ttu-id="aa984-249">En el ejemplo de código siguiente se muestra cómo llamar a [**ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) desde el controlador de WindowProc para mensajes de tamaño de WM \_ :</span><span class="sxs-lookup"><span data-stu-id="aa984-249">The following example code shows how to call [**ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) from within the WindowProc handler for WM\_SIZE messages:</span></span>


```
    case WM_SIZE:
        if (g_pSwapChain)
        {
            g_pd3dDeviceContext->OMSetRenderTargets(0, 0, 0);

            // Release all outstanding references to the swap chain's buffers.
            g_pRenderTargetView->Release();

            HRESULT hr;
            // Preserve the existing buffer count and format.
            // Automatically choose the width and height to match the client rect for HWNDs.
            hr = g_pSwapChain->ResizeBuffers(0, 0, 0, DXGI_FORMAT_UNKNOWN, 0);
                                            
            // Perform error handling here!

            // Get buffer and create a render-target-view.
            ID3D11Texture2D* pBuffer;
            hr = g_pSwapChain->GetBuffer(0, __uuidof( ID3D11Texture2D),
                                         (void**) &pBuffer );
            // Perform error handling here!

            hr = g_pd3dDevice->CreateRenderTargetView(pBuffer, NULL,
                                                     &g_pRenderTargetView);
            // Perform error handling here!
            pBuffer->Release();

            g_pd3dDeviceContext->OMSetRenderTargets(1, &g_pRenderTargetView, NULL );

            // Set up the viewport.
            D3D11_VIEWPORT vp;
            vp.Width = width;
            vp.Height = height;
            vp.MinDepth = 0.0f;
            vp.MaxDepth = 1.0f;
            vp.TopLeftX = 0;
            vp.TopLeftY = 0;
            g_pd3dDeviceContext->RSSetViewports( 1, &vp );
        }
        return 1;
```



### <a name="choosing-the-dxgi-output-and-size"></a><span data-ttu-id="aa984-250">Elección del tamaño y la salida de DXGI</span><span class="sxs-lookup"><span data-stu-id="aa984-250">Choosing the DXGI output and size</span></span>

<span data-ttu-id="aa984-251">De forma predeterminada, DXGI elige la salida que contiene la mayor parte del área de cliente de la ventana.</span><span class="sxs-lookup"><span data-stu-id="aa984-251">By default, DXGI chooses the output that contains most of the client area of the window.</span></span> <span data-ttu-id="aa984-252">Esta es la única opción disponible en DXGI cuando se pasa a la pantalla completa en respuesta a Alt + Entrar.</span><span class="sxs-lookup"><span data-stu-id="aa984-252">This is the only option available to DXGI when it goes full-screen itself in response to alt-enter.</span></span> <span data-ttu-id="aa984-253">Si la aplicación decide ir al modo de pantalla completa, puede llamar a [**IDXGISwapChain:: SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate) y pasar un [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) explícito (o **null** si la aplicación está feliz para permitir que DXGI decida).</span><span class="sxs-lookup"><span data-stu-id="aa984-253">If the application chooses to go to full-screen mode by itself, then it can call [**IDXGISwapChain::SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate) and pass an explicit [**IDXGIOutput1**](/windows/win32/api/DXGI1_2/nn-dxgi1_2-idxgioutput1) (or **NULL**, if the application is happy to let DXGI decide).</span></span>

<span data-ttu-id="aa984-254">Para cambiar el tamaño de la salida mientras se está en la pantalla completa o en la ventana, se recomienda llamar a [**IDXGISwapChain:: ResizeTarget**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizetarget), ya que este método también cambia el tamaño de la ventana de destino.</span><span class="sxs-lookup"><span data-stu-id="aa984-254">To resize the output while either full screen or windowed, we recommend to call [**IDXGISwapChain::ResizeTarget**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizetarget), since this method resizes the target window also.</span></span> <span data-ttu-id="aa984-255">Dado que se cambia el tamaño de la ventana de destino, el sistema operativo envía el **\_ tamaño de WM** y el código llamará de forma natural a [**IDXGISwapChain:: ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) en respuesta.</span><span class="sxs-lookup"><span data-stu-id="aa984-255">Since the target window is resized, the operating system sends **WM\_SIZE**, and your code will naturally call [**IDXGISwapChain::ResizeBuffers**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-resizebuffers) in response.</span></span> <span data-ttu-id="aa984-256">Por lo tanto, se pierde el esfuerzo de cambiar el tamaño de los búferes y, posteriormente, se cambia el tamaño del destino.</span><span class="sxs-lookup"><span data-stu-id="aa984-256">It's thus a waste of effort to resize your buffers, and then subsequently resize the target.</span></span>

### <a name="debugging-in-full-screen-mode"></a><span data-ttu-id="aa984-257">Depuración en modo de pantalla completa</span><span class="sxs-lookup"><span data-stu-id="aa984-257">Debugging in full-screen mode</span></span>

<span data-ttu-id="aa984-258">Una cadena de intercambio de DXGI deja el modo de pantalla completa solo cuando es absolutamente necesario.</span><span class="sxs-lookup"><span data-stu-id="aa984-258">A DXGI swap chain relinquishes full-screen mode only when absolutely necessary.</span></span> <span data-ttu-id="aa984-259">Esto significa que puede depurar una aplicación de pantalla completa mediante varios monitores, siempre y cuando la ventana de depuración no se superponga a la ventana de destino de la cadena de intercambio.</span><span class="sxs-lookup"><span data-stu-id="aa984-259">This means that you can debug a full-screen application using multiple monitors, as long as the debug window doesn't overlap the swap chain's target window.</span></span> <span data-ttu-id="aa984-260">Como alternativa, puede evitar que el cambio de modo se configure por completo si no se establece la marca de **\_ \_ \_ \_ \_ \_ cambio de modo permitir del marcador de cadena de intercambio de DXGI** .</span><span class="sxs-lookup"><span data-stu-id="aa984-260">Alternatively, you can prevent mode switching altogether by not setting the **DXGI\_SWAP\_CHAIN\_FLAG\_ALLOW\_MODE\_SWITCH** flag.</span></span>

<span data-ttu-id="aa984-261">Si se permite el cambio de modo, una cadena de intercambio liberará el modo de pantalla completa siempre que otra ventana ocluidos la ventana de salida.</span><span class="sxs-lookup"><span data-stu-id="aa984-261">If mode switching is allowed, a swap chain will relinquish full-screen mode whenever its output window is occluded by another window.</span></span> <span data-ttu-id="aa984-262">La comprobación de la oclusión se realiza durante [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1), o por un subproceso independiente cuyo propósito es ver si la aplicación deja de responder (y ya no llama a **IDXGISwapChain1::P resent1**).</span><span class="sxs-lookup"><span data-stu-id="aa984-262">The occlusion check is performed during [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1), or by a separate thread whose purpose is to watch to see if the application has becomes unresponsive (and no longer calls **IDXGISwapChain1::Present1**).</span></span> <span data-ttu-id="aa984-263">Para deshabilitar la posibilidad de que el subproceso independiente cause un cambio, establezca la siguiente clave del registro en cualquier valor distinto de cero.</span><span class="sxs-lookup"><span data-stu-id="aa984-263">To disable the ability of the separate thread to cause a switch, set the following registry key to any non-zero value.</span></span>

<span data-ttu-id="aa984-264">**HKCU \\ software \\ Microsoft \\ DXGI \\ DisableFullscreenWatchdog**</span><span class="sxs-lookup"><span data-stu-id="aa984-264">**HKCU\\Software\\Microsoft\\DXGI\\DisableFullscreenWatchdog**</span></span>

### <a name="destroying-a-swap-chain"></a><span data-ttu-id="aa984-265">Destruir una cadena de intercambio</span><span class="sxs-lookup"><span data-stu-id="aa984-265">Destroying a swap chain</span></span>

<span data-ttu-id="aa984-266">No puede liberar una cadena de intercambio en el modo de pantalla completa, ya que si lo hace, puede crear contención de subprocesos (lo que hará que DXGI genere una excepción no continuada).</span><span class="sxs-lookup"><span data-stu-id="aa984-266">You may not release a swap chain in full-screen mode because doing so may create thread contention (which will cause DXGI to raise a non-continuable exception).</span></span> <span data-ttu-id="aa984-267">Antes de liberar una cadena de intercambio, cambie primero a modo de ventana (mediante [**IDXGISwapChain:: SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate)( **false**, **null** )) y, a continuación, llame a [**IUnknown:: Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release).</span><span class="sxs-lookup"><span data-stu-id="aa984-267">Before releasing a swap chain, first switch to windowed mode (using [**IDXGISwapChain::SetFullscreenState**](/windows/win32/api/DXGI/nf-dxgi-idxgiswapchain-setfullscreenstate)( **FALSE**, **NULL** )) and then call [**IUnknown::Release**](/windows/win32/api/unknwn/nf-unknwn-iunknown-release).</span></span>

### <a name="using-a-rotated-monitor"></a><span data-ttu-id="aa984-268">Uso de un monitor girado</span><span class="sxs-lookup"><span data-stu-id="aa984-268">Using a rotated monitor</span></span>

<span data-ttu-id="aa984-269">Una aplicación no necesita preocuparse por la orientación del monitor, DXGI girará un búfer de cadena de intercambio durante la presentación, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="aa984-269">An application does not need to worry about monitor orientation, DXGI will rotate a swap-chain buffer during presentation, if necessary.</span></span> <span data-ttu-id="aa984-270">Por supuesto, esta rotación adicional puede afectar al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="aa984-270">Of course, this additional rotation can impact performance.</span></span> <span data-ttu-id="aa984-271">Para obtener el mejor rendimiento, haga lo siguiente para realizar la rotación en la aplicación:</span><span class="sxs-lookup"><span data-stu-id="aa984-271">For best performance, take care of the rotation in your application by doing the following:</span></span>

-   <span data-ttu-id="aa984-272">Use el **indicador de cadena de intercambio de DXGI \_ \_ \_ \_ NONPREROTATED**.</span><span class="sxs-lookup"><span data-stu-id="aa984-272">Use the **DXGI\_SWAP\_CHAIN\_FLAG\_NONPREROTATED**.</span></span> <span data-ttu-id="aa984-273">Esto notifica a DXGI que la aplicación generará una imagen girada (por ejemplo, modificando su matriz de proyección).</span><span class="sxs-lookup"><span data-stu-id="aa984-273">This notifies DXGI that the application will produce a rotated image (for example, by altering its projection matrix).</span></span> <span data-ttu-id="aa984-274">Un aspecto que se debe tener en cuenta es que esta marca solo es válida mientras se está en modo de pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="aa984-274">One thing to note, this flag is only valid while in full-screen mode.</span></span>
-   <span data-ttu-id="aa984-275">Asigne cada búfer de la cadena de intercambio en su tamaño girado.</span><span class="sxs-lookup"><span data-stu-id="aa984-275">Allocate each swap-chain buffer in its rotated size.</span></span> <span data-ttu-id="aa984-276">Use [**IDXGIOutput:: GetDesc**](/windows/win32/api/DXGI/nf-dxgi-idxgioutput-getdesc) para obtener estos valores, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="aa984-276">Use [**IDXGIOutput::GetDesc**](/windows/win32/api/DXGI/nf-dxgi-idxgioutput-getdesc) to get these values, if necessary.</span></span>

<span data-ttu-id="aa984-277">Al realizar la rotación en la aplicación, DXGI simplemente realizará una copia en lugar de una copia y una rotación.</span><span class="sxs-lookup"><span data-stu-id="aa984-277">By performing the rotation in your application, DXGI will simply do a copy instead of a copy and a rotate.</span></span>

<span data-ttu-id="aa984-278">El tiempo de ejecución de Direct3D 11,1, que está disponible a partir de Windows 8, proporciona una cadena de intercambio de volteo del modelo (es decir, una cadena de intercambio que tiene el efecto de intercambio de dxgi, volteo de valor [**\_ \_ \_ \_ secuencial**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) establecido en el miembro **SwapEffect** de la [**cadena de intercambio de dxgi \_ \_ \_ DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span><span class="sxs-lookup"><span data-stu-id="aa984-278">The Direct3D 11.1 runtime, which is available starting with Windows 8, provides a flip-model swap chain (that is, a swap chain that has the [**DXGI\_SWAP\_EFFECT\_FLIP\_SEQUENTIAL**](/windows/win32/api/DXGI/ne-dxgi-dxgi_swap_effect) value set in the **SwapEffect** member of [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="aa984-279">Para maximizar las optimizaciones de presentación disponibles con una cadena de intercambio de modelo Flip, se recomienda hacer que las aplicaciones orienten el contenido para que coincida con la salida determinada en la que reside el contenido cuando ese contenido ocupe por completo el resultado.</span><span class="sxs-lookup"><span data-stu-id="aa984-279">To maximize the presentation optimizations available with a flip-model swap chain, we recommend that you make your applications orient content to match the particular output on which the content resides when that content fully occupies the output.</span></span> <span data-ttu-id="aa984-280">Para obtener más información sobre las cadenas de intercambio de modelo flip y sus ventajas, vea [modelo de volteo de DXGI](dxgi-flip-model.md).</span><span class="sxs-lookup"><span data-stu-id="aa984-280">For more info about flip-model swap chains and their benefits, see [DXGI Flip Model](dxgi-flip-model.md).</span></span>

### <a name="switching-modes"></a><span data-ttu-id="aa984-281">Cambiar modos</span><span class="sxs-lookup"><span data-stu-id="aa984-281">Switching modes</span></span>

<span data-ttu-id="aa984-282">La cadena de intercambio de DXGI podría cambiar el modo de visualización de una salida cuando se realiza una transición de pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="aa984-282">The DXGI swap chain might change the display mode of an output when making a full-screen transition.</span></span> <span data-ttu-id="aa984-283">Para habilitar el cambio de modo de presentación automático, debe especificar el **\_ \_ \_ \_ \_ \_ modificador de modo permitir del marcador de cadena de intercambio de DXGI** en la descripción de la cadena de intercambio.</span><span class="sxs-lookup"><span data-stu-id="aa984-283">To enable the automatic display mode change, you must specify **DXGI\_SWAP\_CHAIN\_FLAG\_ALLOW\_MODE\_SWITCH** in the swap-chain description.</span></span> <span data-ttu-id="aa984-284">Si el modo de presentación cambia automáticamente, DXGI elegirá el modo más modesto (el tamaño y la resolución no cambiarán, pero es posible que la profundidad de color).</span><span class="sxs-lookup"><span data-stu-id="aa984-284">If the display mode automatically changes, DXGI will choose the most modest mode (size and resolution will not change, but the color depth may).</span></span> <span data-ttu-id="aa984-285">Cambiar el tamaño de los búferes de cadena de intercambio no producirá un cambio de modo.</span><span class="sxs-lookup"><span data-stu-id="aa984-285">Resizing swap chain buffers will not cause a mode switch.</span></span> <span data-ttu-id="aa984-286">La cadena de intercambio realiza una promesa implícita que si elige un búfer de reserva que coincida exactamente con un modo de presentación admitido por la salida de destino, cambiará a ese modo de presentación al entrar en el modo de pantalla completa en esa salida.</span><span class="sxs-lookup"><span data-stu-id="aa984-286">The swap chain makes an implicit promise that if you choose a back buffer that exactly matches a display mode supported by the target output, then it will switch to that display mode when entering full-screen mode on that output.</span></span> <span data-ttu-id="aa984-287">Por lo tanto, elija un modo de presentación eligiendo el tamaño y el formato del búfer de reserva.</span><span class="sxs-lookup"><span data-stu-id="aa984-287">Consequently, you choose a display mode by choosing your back buffer size and format.</span></span>

### <a name="full-screen-performance-tip"></a><span data-ttu-id="aa984-288">Sugerencia de rendimiento de pantalla completa</span><span class="sxs-lookup"><span data-stu-id="aa984-288">Full-screen performance tip</span></span>

<span data-ttu-id="aa984-289">Cuando se llama a [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) en una aplicación de pantalla completa, la cadena de intercambio se voltea (en lugar de blits) el contenido del búfer de reserva en el búfer frontal.</span><span class="sxs-lookup"><span data-stu-id="aa984-289">When you call [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) on a full-screen application, the swap chain flips (as opposed to blits) the contents of the back buffer to the front buffer.</span></span> <span data-ttu-id="aa984-290">Esto requiere que la cadena de intercambio se haya creado mediante un modo de presentación enumerado (especificado en la [**cadena de intercambio de DXGI \_ \_ \_ DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span><span class="sxs-lookup"><span data-stu-id="aa984-290">This requires that the swap chain was created by using an enumerated display mode (specified in [**DXGI\_SWAP\_CHAIN\_DESC1**](/windows/win32/api/DXGI1_2/ns-dxgi1_2-dxgi_swap_chain_desc1)).</span></span> <span data-ttu-id="aa984-291">Si no puede enumerar los modos de presentación o especifica incorrectamente el modo de presentación en la descripción, la cadena de intercambio puede realizar una transferencia de bloque de bits (bitblt) en su lugar.</span><span class="sxs-lookup"><span data-stu-id="aa984-291">If you fail to enumerate display modes, or incorrectly specify the display mode in the description, the swap chain may perform a bit-block transfer (bitblt) instead.</span></span> <span data-ttu-id="aa984-292">El bitblt produce una copia de ampliación adicional, así como un mayor uso de la memoria de vídeo, y es difícil de detectar.</span><span class="sxs-lookup"><span data-stu-id="aa984-292">The bitblt causes an extra stretching copy as well as some increased video memory usage, and is difficult to detect.</span></span> <span data-ttu-id="aa984-293">Para evitar este problema, enumere los modos de presentación e inicialice la descripción de la cadena de intercambio correctamente antes de crear la cadena de intercambio.</span><span class="sxs-lookup"><span data-stu-id="aa984-293">To avoid this problem, enumerate display modes, and initialize the swap chain description correctly before you create the swap chain.</span></span> <span data-ttu-id="aa984-294">Esto garantizará el máximo rendimiento al voltear en el modo de pantalla completa y evitar la sobrecarga de memoria adicional.</span><span class="sxs-lookup"><span data-stu-id="aa984-294">This will ensure maximum performance when flipping in full-screen mode and avoid the extra memory overhead.</span></span>

### <a name="multithread-considerations"></a><span data-ttu-id="aa984-295">Consideraciones sobre subprocesos</span><span class="sxs-lookup"><span data-stu-id="aa984-295">Multithread considerations</span></span>

<span data-ttu-id="aa984-296">Al usar DXGI en una aplicación con varios subprocesos, debe tener cuidado de evitar la creación de un interbloqueo, donde dos subprocesos diferentes están esperando a que se completen.</span><span class="sxs-lookup"><span data-stu-id="aa984-296">When you use DXGI in an application with multiple threads, you need to be careful to avoid creating a deadlock, where two different threads are waiting on each other to complete.</span></span> <span data-ttu-id="aa984-297">Hay dos situaciones en las que esto puede ocurrir.</span><span class="sxs-lookup"><span data-stu-id="aa984-297">There are two situations where this can occur.</span></span>

-   <span data-ttu-id="aa984-298">El subproceso de representación no es el subproceso de bombeo de mensajes.</span><span class="sxs-lookup"><span data-stu-id="aa984-298">The rendering thread is not the message-pump thread.</span></span>
-   <span data-ttu-id="aa984-299">El subproceso que ejecuta una API de DXGI no es el mismo subproceso que creó la ventana.</span><span class="sxs-lookup"><span data-stu-id="aa984-299">The thread executing a DXGI API is not the same thread that created the window.</span></span>

<span data-ttu-id="aa984-300">Tenga cuidado de que nunca tenga el subproceso de bombeo de mensajes en el subproceso de representación cuando use cadenas de intercambio de pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="aa984-300">Be careful that you never have the message-pump thread wait on the render thread when you use full-screen swap chains.</span></span> <span data-ttu-id="aa984-301">Por ejemplo, al llamar a [**IDXGISwapChain1::P resent1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) (desde el subproceso de representación) puede provocar que el subproceso de representación espere en el subproceso de bombeo de mensajes.</span><span class="sxs-lookup"><span data-stu-id="aa984-301">For instance, calling [**IDXGISwapChain1::Present1**](/windows/win32/api/DXGI1_2/nf-dxgi1_2-idxgiswapchain1-present1) (from the render thread) may cause the render thread to wait on the message-pump thread.</span></span> <span data-ttu-id="aa984-302">Cuando se produce un cambio de modo, este escenario es posible si **Present1** llama a:: SetWindowPos () o:: SetWindowStyle () y cualquiera de estos métodos llama a:: SendMessage ().</span><span class="sxs-lookup"><span data-stu-id="aa984-302">When a mode change occurs, this scenario is possible if **Present1** calls ::SetWindowPos() or ::SetWindowStyle() and either of these methods call ::SendMessage().</span></span> <span data-ttu-id="aa984-303">En este escenario, si el subproceso de bombeo de mensajes tiene una sección crítica que lo protege o si el subproceso de representación está bloqueado, los dos subprocesos se interbloquearán.</span><span class="sxs-lookup"><span data-stu-id="aa984-303">In this scenario, if the message-pump thread has a critical section guarding it or if the render thread is blocked, then the two threads will deadlock.</span></span>

<span data-ttu-id="aa984-304">Para obtener más información sobre el uso de DXGI con varios subprocesos, vea [multithreading y DXGI](../direct3d11/overviews-direct3d-11-render-multi-thread-intro.md).</span><span class="sxs-lookup"><span data-stu-id="aa984-304">For more info about using DXGI with multiple threads, see [Multithreading and DXGI](../direct3d11/overviews-direct3d-11-render-multi-thread-intro.md).</span></span>

## <a name="dxgi-responses-from-dllmain"></a><span data-ttu-id="aa984-305">Respuestas de DXGI desde DLLMain</span><span class="sxs-lookup"><span data-stu-id="aa984-305">DXGI responses from DLLMain</span></span>

<span data-ttu-id="aa984-306">Dado que una función [**DllMain**](../dlls/dllmain.md) no puede garantizar el orden en que carga y descarga los archivos dll, se recomienda que la función **DllMain** de la aplicación no llame a las funciones o métodos de Direct3D o DXGI, incluidas las funciones o los métodos que crean o liberan objetos.</span><span class="sxs-lookup"><span data-stu-id="aa984-306">Because a [**DllMain**](../dlls/dllmain.md) function can't guarantee the order in which it loads and unloads DLLs, we recommend that your app's **DllMain** function not call Direct3D or DXGI functions or methods, including functions or methods that create or release objects.</span></span> <span data-ttu-id="aa984-307">Si la función **DllMain** de la aplicación llama a un componente determinado, ese componente podría llamar a otro archivo DLL que no está presente en el sistema operativo, lo que hace que el sistema operativo se bloquee.</span><span class="sxs-lookup"><span data-stu-id="aa984-307">If your app's **DllMain** function calls into a particular component, that component might call another DLL that isn't present on the operating system, which causes the operating system to crash.</span></span> <span data-ttu-id="aa984-308">Direct3D y DXGI pueden cargar un conjunto de archivos dll, normalmente un conjunto de controladores, que difieren de un equipo a otro.</span><span class="sxs-lookup"><span data-stu-id="aa984-308">Direct3D and DXGI might load a set of DLLs, typically a set of drivers, that differs from computer to computer.</span></span> <span data-ttu-id="aa984-309">Por lo tanto, incluso si la aplicación no se bloquea en los equipos de desarrollo y pruebas cuando su función **DllMain** llama a las funciones o métodos de Direct3D o DXGI, podría bloquearse cuando se ejecuta en otro equipo.</span><span class="sxs-lookup"><span data-stu-id="aa984-309">Therefore, even if your app doesn t crash on your development and test computers when its **DllMain** function calls Direct3D or DXGI functions or methods, it might crash when it runs on another computer.</span></span>

<span data-ttu-id="aa984-310">Para evitar la creación de una aplicación que puede hacer que el sistema operativo se bloquee, DXGI proporciona las siguientes respuestas en las situaciones especificadas:</span><span class="sxs-lookup"><span data-stu-id="aa984-310">To prevent you from creating an app that might cause the operating system to crash, DXGI provides the following responses in the specified situations:</span></span>

-   <span data-ttu-id="aa984-311">Si la función [**DllMain**](../dlls/dllmain.md) de la aplicación libera su última referencia a una fábrica de DXGI, dxgi genera una excepción.</span><span class="sxs-lookup"><span data-stu-id="aa984-311">If your app's [**DllMain**](../dlls/dllmain.md) function releases its last reference to a DXGI factory, DXGI raises an exception.</span></span>
-   <span data-ttu-id="aa984-312">Si la función [**DllMain**](../dlls/dllmain.md) de la aplicación crea una fábrica de DXGI, dxgi devuelve un código de error.</span><span class="sxs-lookup"><span data-stu-id="aa984-312">If your app's [**DllMain**](../dlls/dllmain.md) function creates a DXGI factory, DXGI returns an error code.</span></span>

## <a name="dxgi-11-changes"></a><span data-ttu-id="aa984-313">Cambios en DXGI 1,1</span><span class="sxs-lookup"><span data-stu-id="aa984-313">DXGI 1.1 changes</span></span>

<span data-ttu-id="aa984-314">Hemos agregado la siguiente funcionalidad en DXGI 1,1.</span><span class="sxs-lookup"><span data-stu-id="aa984-314">We added the following functionality in DXGI 1.1.</span></span>

-   <span data-ttu-id="aa984-315">Compatibilidad con superficies compartidas sincronizadas</span><span class="sxs-lookup"><span data-stu-id="aa984-315">Synchronized Shared Surfaces Support</span></span>

    <span data-ttu-id="aa984-316">Las superficies compartidas sincronizadas para Direct3D 10,1 y Direct3D 11 permiten el uso compartido de la superficie de lectura y escritura eficaz entre varios dispositivos de Direct3D (es posible el uso compartido entre dispositivos Direct3D 10 y Direct3D 11).</span><span class="sxs-lookup"><span data-stu-id="aa984-316">Synchronized shared surfaces for Direct3D 10.1 and Direct3D 11 enables efficient read and write surface sharing between multiple Direct3D devices (sharing between Direct3D 10 and Direct3D 11 devices is possible).</span></span> <span data-ttu-id="aa984-317">Vea [**IDXGIKeyedMutex:: AcquireSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-acquiresync) y [**IDXGIKeyedMutex:: ReleaseSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-releasesync).</span><span class="sxs-lookup"><span data-stu-id="aa984-317">See [**IDXGIKeyedMutex::AcquireSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-acquiresync) and [**IDXGIKeyedMutex::ReleaseSync**](/windows/win32/api/DXGI/nf-dxgi-idxgikeyedmutex-releasesync).</span></span>

-   <span data-ttu-id="aa984-318">Compatibilidad con colores de alto nivel</span><span class="sxs-lookup"><span data-stu-id="aa984-318">High Color Support</span></span>

    <span data-ttu-id="aa984-319">Admite el formato de DXGI \_ formato \_ R10G10B10 \_ XR \_ \_ a2 \_ UNORM.</span><span class="sxs-lookup"><span data-stu-id="aa984-319">Supports the DXGI\_FORMAT\_R10G10B10\_XR\_BIAS\_A2\_UNORM format.</span></span>

-   <span data-ttu-id="aa984-320">[**IDXGIDevice1:: SetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-setmaximumframelatency) y [ **IDXGIDevice1:: GetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-getmaximumframelatency)</span><span class="sxs-lookup"><span data-stu-id="aa984-320">[**IDXGIDevice1::SetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-setmaximumframelatency) and [**IDXGIDevice1::GetMaximumFrameLatency**](/windows/win32/api/DXGI/nf-dxgi-idxgidevice1-getmaximumframelatency)</span></span>
-   <span data-ttu-id="aa984-321">[**IDXGIFactory1:: EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) enumera los adaptadores locales sin monitores o salidas conectados, así como los adaptadores con salidas adjuntas.</span><span class="sxs-lookup"><span data-stu-id="aa984-321">[**IDXGIFactory1::EnumAdapters1**](/windows/win32/api/DXGI/nf-dxgi-idxgifactory1-enumadapters1) enumerates local adapter(s) without any monitors or outputs attached, as well as adapters(s) with outputs attached.</span></span> <span data-ttu-id="aa984-322">El primer adaptador devuelto será el adaptador local en el que se muestra el servidor principal de escritorio.</span><span class="sxs-lookup"><span data-stu-id="aa984-322">The first adapter returned will be the local adapter on which the Desktop primary is displayed.</span></span>
-   <span data-ttu-id="aa984-323">Compatibilidad con el formato BGRA</span><span class="sxs-lookup"><span data-stu-id="aa984-323">BGRA format support</span></span>

    <span data-ttu-id="aa984-324">Formato \_ \_ de dxgi B8G8R8A8 \_ UNORM y dxgi \_ format \_ B8G8R8A8 \_ UNORM \_ sRGB, vea [**IDXGISurface1:: GetDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-getdc) y [**IDXGISurface1:: ReleaseDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-releasedc).</span><span class="sxs-lookup"><span data-stu-id="aa984-324">DXGI\_FORMAT\_B8G8R8A8\_UNORM and DXGI\_FORMAT\_B8G8R8A8\_UNORM\_SRGB, see [**IDXGISurface1::GetDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-getdc) and [**IDXGISurface1::ReleaseDC**](/windows/win32/api/DXGI/nf-dxgi-idxgisurface1-releasedc).</span></span>

## <a name="dxgi-12-changes"></a><span data-ttu-id="aa984-325">Cambios en DXGI 1,2</span><span class="sxs-lookup"><span data-stu-id="aa984-325">DXGI 1.2 changes</span></span>

<span data-ttu-id="aa984-326">Hemos agregado la siguiente funcionalidad en DXGI 1,2.</span><span class="sxs-lookup"><span data-stu-id="aa984-326">We added the following functionality in DXGI 1.2.</span></span>

-   <span data-ttu-id="aa984-327">Cadena de intercambio estéreo</span><span class="sxs-lookup"><span data-stu-id="aa984-327">Stereo swap chain</span></span>
-   [<span data-ttu-id="aa984-328">Cadena de intercambio de modelo de volteo</span><span class="sxs-lookup"><span data-stu-id="aa984-328">Flip-model swap chain</span></span>](dxgi-flip-model.md)
-   <span data-ttu-id="aa984-329">Presentación optimizada (desplazamiento, rectángulos modificados y giro)</span><span class="sxs-lookup"><span data-stu-id="aa984-329">Optimized presentation (scrolling, dirty rectangles, and rotation)</span></span>
-   <span data-ttu-id="aa984-330">Sincronización y recursos compartidos mejorados</span><span class="sxs-lookup"><span data-stu-id="aa984-330">Improved shared resources and synchronization</span></span>
-   [<span data-ttu-id="aa984-331">Duplicación de escritorio</span><span class="sxs-lookup"><span data-stu-id="aa984-331">Desktop Duplication</span></span>](desktop-dup-api.md)
-   <span data-ttu-id="aa984-332">Uso optimizado de la memoria de vídeo</span><span class="sxs-lookup"><span data-stu-id="aa984-332">Optimized use of video memory</span></span>
-   <span data-ttu-id="aa984-333">Compatibilidad con formatos de 16 bits por píxel (BPP) ( \_ formato de dxgi \_ B5G6R5 \_ UNORM, formato de dxgi \_ \_ B5G5R5A1 \_ UNORM, formato de dxgi \_ \_ B4G4R4A4 \_ UNORM)</span><span class="sxs-lookup"><span data-stu-id="aa984-333">Support for 16 bits per pixel (bpp) formats (DXGI\_FORMAT\_B5G6R5\_UNORM, DXGI\_FORMAT\_B5G5R5A1\_UNORM, DXGI\_FORMAT\_B4G4R4A4\_UNORM)</span></span>
-   <span data-ttu-id="aa984-334">API de depuración</span><span class="sxs-lookup"><span data-stu-id="aa984-334">Debugging APIs</span></span>

<span data-ttu-id="aa984-335">Para obtener más información sobre DXGI 1,2, consulte [mejoras de dxgi 1,2](dxgi-1-2-improvements.md).</span><span class="sxs-lookup"><span data-stu-id="aa984-335">For more info about DXGI 1.2, see [DXGI 1.2 Improvements](dxgi-1-2-improvements.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="aa984-336">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="aa984-336">Related topics</span></span>

[<span data-ttu-id="aa984-337">Guía de programación para DXGI</span><span class="sxs-lookup"><span data-stu-id="aa984-337">Programming Guide for DXGI</span></span>](dx-graphics-dxgi-overviews.md)
