---
description: Como parte de la abstracción de dispositivos telefónicos definida por TSPI, TAPI y el proveedor de servicios deben someterse primero a la inicialización básica.
ms.assetid: cd8bb328-fbd0-409c-8471-34ad4c2c8d93
title: Inicialización de SPI de teléfono
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1d0c54e313c2be3846aeb604217f5324ec0d8a8d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105688000"
---
# <a name="phone-spi-initialization"></a><span data-ttu-id="79b09-103">Inicialización de SPI de teléfono</span><span class="sxs-lookup"><span data-stu-id="79b09-103">Phone SPI Initialization</span></span>

<span data-ttu-id="79b09-104">Como parte de la abstracción de dispositivos telefónicos definida por TSPI, TAPI y el proveedor de servicios deben someterse primero a la inicialización básica.</span><span class="sxs-lookup"><span data-stu-id="79b09-104">As part of the phone device abstraction defined by TSPI, TAPI and the service provider must first undergo basic initialization.</span></span> <span data-ttu-id="79b09-105">Esta inicialización básica se realiza tanto para la mitad de la línea como para la mitad de la interfaz mediante el mismo conjunto de pasos.</span><span class="sxs-lookup"><span data-stu-id="79b09-105">This basic initialization is accomplished both for the line and phone halves of the interface by the same set of steps.</span></span> <span data-ttu-id="79b09-106">El primero de estos pasos es la negociación de la versión de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="79b09-106">The first of these steps is interface version negotiation.</span></span> <span data-ttu-id="79b09-107">Para ello, TAPI llama a la función [**\_ LineNegotiateTSPIVersion de TSPI**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) .</span><span class="sxs-lookup"><span data-stu-id="79b09-107">TAPI performs this by calling the [**TSPI\_lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) function.</span></span> <span data-ttu-id="79b09-108">Esta función se utiliza normalmente para negociar en nombre de un dispositivo de línea individual; distintos dispositivos de línea dentro del mismo proveedor de servicios pueden funcionar según las distintas versiones de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="79b09-108">This function is usually used to negotiate on behalf of an individual line device; different line devices within the same service provider may operate according to different interface versions.</span></span> <span data-ttu-id="79b09-109">TAPI pasa un valor de identificador de dispositivo reservado especial, [**inicializar \_ negociación**](initialize-negotiation.md), para indicar que está negociando una versión de interfaz global para las funciones de inicialización que afectan a todo el proveedor de servicios, tanto para las líneas como para los teléfonos.</span><span class="sxs-lookup"><span data-stu-id="79b09-109">TAPI passes a special reserved device identifier value, [**INITIALIZE\_NEGOTIATION**](initialize-negotiation.md), to indicate that it is negotiating an overall interface version for initialization functions that affect the entire service provider, both for lines and phones.</span></span>

<span data-ttu-id="79b09-110">El resultado de esta negociación se pasa a los procedimientos posteriores hasta que se abre un dispositivo telefónico.</span><span class="sxs-lookup"><span data-stu-id="79b09-110">The result of this negotiation is passed to subsequent procedures until a phone device is opened.</span></span> <span data-ttu-id="79b09-111">En ese momento, el dispositivo telefónico se confirmará en una versión de interfaz determinada.</span><span class="sxs-lookup"><span data-stu-id="79b09-111">At that time, the phone device becomes committed to a particular interface version.</span></span> <span data-ttu-id="79b09-112">Esta versión de la interfaz es implícita hasta que se cierra el teléfono y no es necesario pasarla a las funciones subsiguientes que operan en un teléfono abierto.</span><span class="sxs-lookup"><span data-stu-id="79b09-112">This interface version is implicit until the phone is closed, and does not need to be passed to subsequent functions that operate on an opened phone.</span></span>

<span data-ttu-id="79b09-113">Después de la negociación de la versión general de la interfaz, TAPI llama a la función [**\_ ProviderInit de TSPI**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit) .</span><span class="sxs-lookup"><span data-stu-id="79b09-113">Following overall interface version negotiation, TAPI calls the [**TSPI\_providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit) function.</span></span> <span data-ttu-id="79b09-114">Esta función inicializa el proveedor de servicios, lo que también le permite los parámetros necesarios para la operación subsiguiente.</span><span class="sxs-lookup"><span data-stu-id="79b09-114">This function initializes the service provider, also giving it parameters required for subsequent operation.</span></span> <span data-ttu-id="79b09-115">Estos parámetros incluyen los siguientes:</span><span class="sxs-lookup"><span data-stu-id="79b09-115">These parameters include the following:</span></span>

-   <span data-ttu-id="79b09-116">*dwPermanentProviderID*: especifica el identificador permanente del proveedor de servicios que se está inicializando, único dentro de los proveedores de servicios de este sistema.</span><span class="sxs-lookup"><span data-stu-id="79b09-116">*dwPermanentProviderID*: Specifies the permanent identifier of the service provider being initialized, unique within the service providers on this system.</span></span>
-   <span data-ttu-id="79b09-117">*dwLineDeviceIDBase*: especifica el identificador de dispositivo más bajo para los dispositivos de línea admitidos por este proveedor de servicios.</span><span class="sxs-lookup"><span data-stu-id="79b09-117">*dwLineDeviceIDBase*: Specifies the lowest device identifier for the line devices supported by this service provider.</span></span>
-   <span data-ttu-id="79b09-118">*dwPhoneDeviceIDBase*: especifica el identificador de dispositivo más bajo para los dispositivos telefónicos admitidos por este proveedor de servicios.</span><span class="sxs-lookup"><span data-stu-id="79b09-118">*dwPhoneDeviceIDBase*: Specifies the lowest device identifier for the phone devices supported by this service provider.</span></span> <span data-ttu-id="79b09-119">Los dispositivos de la clase de dispositivo teléfono de telefonía se identifican mediante enteros a partir de cero.</span><span class="sxs-lookup"><span data-stu-id="79b09-119">Devices of the telephony phone device class are identified by integers starting from zero.</span></span> <span data-ttu-id="79b09-120">Este intervalo de identificadores es contiguo en todo el intervalo de dispositivos de teléfono.</span><span class="sxs-lookup"><span data-stu-id="79b09-120">This range of identifiers is contiguous across the full range of phone devices.</span></span> <span data-ttu-id="79b09-121">Dado que puede haber varios proveedores de servicios que administran dispositivos telefónicos en un único sistema, cada proveedor de servicios obtiene una parte contigua del intervalo total.</span><span class="sxs-lookup"><span data-stu-id="79b09-121">Because there may be multiple service providers managing phone devices in a single system, each service provider gets a contiguous portion of the total range.</span></span> <span data-ttu-id="79b09-122">Este parámetro indica al proveedor de servicios el valor más bajo de su parte del intervalo.</span><span class="sxs-lookup"><span data-stu-id="79b09-122">This parameter tells the service provider the lowest value in its portion of the range.</span></span> <span data-ttu-id="79b09-123">El proveedor de servicios, en lugar de TAPI, es responsable de asignar este intervalo de variables a sus propios identificadores de dispositivo internos.</span><span class="sxs-lookup"><span data-stu-id="79b09-123">The service provider, rather than TAPI, is responsible for mapping this variable range to its own internal device identifiers.</span></span> <span data-ttu-id="79b09-124">Esto proporciona al proveedor del proveedor de servicios la flexibilidad suficiente para usar identificadores de dispositivo en extensiones específicas del dispositivo, si así lo desea.</span><span class="sxs-lookup"><span data-stu-id="79b09-124">This gives the service-provider vendor sufficient flexibility to use device identifiers in device-specific extensions if it wants.</span></span> <span data-ttu-id="79b09-125">Dado que el proveedor de servicios sabe qué identificadores de dispositivo aparecen en las estructuras de datos y los parámetros definidos por TAPI, puede usar identificadores de dispositivo coherentes en las estructuras de datos y los parámetros de extensión específicos del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="79b09-125">Because the service provider knows what device identifiers appear in TAPI-defined parameters and data structures, it can use consistent device identifiers in device-specific extension parameters and data structures.</span></span>
-   <span data-ttu-id="79b09-126">*dwNumLines*: especifica el número de dispositivos de línea que admite este proveedor de servicios.</span><span class="sxs-lookup"><span data-stu-id="79b09-126">*dwNumLines*: Specifies how many line devices this service provider supports.</span></span>
-   <span data-ttu-id="79b09-127">*dwNumPhones*: especifica cuántos dispositivos telefónicos admite este proveedor de servicios.</span><span class="sxs-lookup"><span data-stu-id="79b09-127">*dwNumPhones*: Specifies how many phone devices this service provider supports.</span></span>
-   <span data-ttu-id="79b09-128">*lpfnCompletionProc*: especifica el procedimiento al que el proveedor de servicios llama para informar de la finalización de todos los procedimientos operativos de forma asincrónica en los dispositivos de línea y teléfono.</span><span class="sxs-lookup"><span data-stu-id="79b09-128">*lpfnCompletionProc*: Specifies the procedure the service provider calls to report completion of all asynchronously operating procedures on line and phone devices.</span></span>

<span data-ttu-id="79b09-129">Después de [**TSPI \_ providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit), se pueden realizar operaciones normales, como la apertura de teléfonos.</span><span class="sxs-lookup"><span data-stu-id="79b09-129">Following [**TSPI\_providerInit**](/windows/win32/api/tspi/nf-tspi-tspi_providerinit), normal operations such as opening phones can be carried out.</span></span>

 

 
