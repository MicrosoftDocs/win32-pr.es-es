---
title: Autenticación con varios encabezados conocidos
description: La \_ estructura http Multiple \_ knowd \_ headers permite que las aplicaciones de servidor envíen varios desafíos de autenticación al cliente.
ms.assetid: d517fd61-9547-4e1c-b0fd-1eb3d0098db2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8afbce3c2a41ea143003723acebc7eb83dc463d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "105685540"
---
# <a name="authentication-with-multiple-known-headers"></a><span data-ttu-id="1d748-103">Autenticación con varios encabezados conocidos</span><span class="sxs-lookup"><span data-stu-id="1d748-103">Authentication with Multiple Known Headers</span></span>

<span data-ttu-id="1d748-104">La estructura [**http \_ Multiple \_ knowd \_ headers**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) permite que las aplicaciones de servidor envíen varios desafíos de autenticación al cliente.</span><span class="sxs-lookup"><span data-stu-id="1d748-104">The [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure enables server applications to send multiple authentication challenges to the client.</span></span> <span data-ttu-id="1d748-105">Las aplicaciones pueden desafiar al cliente con un esquema de autenticación único proporcionando el tipo de enumeración **HttpHeaderWwwAuthenticate** en el miembro **KnownHeaders** de la estructura de [**\_ \_ encabezados de respuesta http**](/windows/desktop/api/Http/ns-http-http_response_headers) que se incluye en la [**\_ respuesta http**](http-response.md).</span><span class="sxs-lookup"><span data-stu-id="1d748-105">Applications can challenge the client with a single authentication scheme by supplying the **HttpHeaderWwwAuthenticate** enumeration type in the **KnownHeaders** member of the [**HTTP\_RESPONSE\_HEADERS**](/windows/desktop/api/Http/ns-http-http_response_headers) structure contained in [**HTTP\_RESPONSE**](http-response.md).</span></span> <span data-ttu-id="1d748-106">Sin embargo, cuando el servidor desafía con varios esquemas de autenticación, la aplicación utiliza la estructura de [**\_ varios \_ \_ encabezados conocidos de http**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) para proporcionar los tipos de autenticación.</span><span class="sxs-lookup"><span data-stu-id="1d748-106">However, when the server challenges with multiple authentication schemes, the application uses the [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure to provide the authentication types.</span></span>

<span data-ttu-id="1d748-107">Cuando la marca de **información de respuesta http conserva la marca de \_ \_ \_ \_ \_ orden** , http envía los encabezados de autenticación en el orden especificado.</span><span class="sxs-lookup"><span data-stu-id="1d748-107">When the **HTTP\_RESPONSE\_INFO\_FLAGS\_PRESERVE\_ORDER** flag is present, HTTP sends the authentication headers in the specified order.</span></span> <span data-ttu-id="1d748-108">Si el marcador no está presente, HTTP ordena los esquemas de autenticación del más fuerte al más débil como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="1d748-108">If the flag is not present, HTTP orders the authentication schemes from strongest to weakest as follows:</span></span>

1.  <span data-ttu-id="1d748-109">Negotiate</span><span class="sxs-lookup"><span data-stu-id="1d748-109">Negotiate</span></span>
2.  <span data-ttu-id="1d748-110">NTLM</span><span class="sxs-lookup"><span data-stu-id="1d748-110">NTLM</span></span>
3.  <span data-ttu-id="1d748-111">Digest</span><span class="sxs-lookup"><span data-stu-id="1d748-111">Digest</span></span>
4.  <span data-ttu-id="1d748-112">Básico</span><span class="sxs-lookup"><span data-stu-id="1d748-112">Basic</span></span>

<span data-ttu-id="1d748-113">Si el esquema de autenticación no es uno de estos esquemas, la aplicación debe especificar las **\_ marcas de información de respuesta HTTP \_ \_ \_ para conservar \_** el indicador de orden.</span><span class="sxs-lookup"><span data-stu-id="1d748-113">If the authentication scheme is not one of these schemes, the application must specify the **HTTP\_RESPONSE\_INFO\_FLAGS\_PRESERVE\_ORDER** flag.</span></span>

<span data-ttu-id="1d748-114">El miembro **KnownHeader** de [**http \_ Multiple \_ knowers \_**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) apunta a una matriz de estructuras [**de \_ \_ encabezado conocidas de http**](/windows/desktop/api/Http/ns-http-http_known_header) .</span><span class="sxs-lookup"><span data-stu-id="1d748-114">The **KnownHeader** member of [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) points to an array of [**HTTP\_KNOWN\_HEADER**](/windows/desktop/api/Http/ns-http-http_known_header) structures.</span></span> <span data-ttu-id="1d748-115">El miembro **pRawValue** de la estructura de **\_ \_ encabezado conocida http** debe apuntar a una cadena que especifique el nombre del esquema.</span><span class="sxs-lookup"><span data-stu-id="1d748-115">The **pRawValue** member of the **HTTP\_KNOWN\_HEADER** structure must point to a string that specifies the scheme name.</span></span> <span data-ttu-id="1d748-116">HTTP analiza la cadena para determinar el esquema y realiza una de las acciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="1d748-116">HTTP parses the string to determine the scheme and performs one of the following actions:</span></span>

-   <span data-ttu-id="1d748-117">Si la cadena contiene un tipo de autenticación desconocido, o si el tipo de autenticación no está habilitado en el grupo de configuración (ya sea el grupo de direcciones URL o la sesión del servidor) asociado a la solicitud, la API del servidor HTTP anexa la cadena de **pRawValue** al encabezado WWW-Authenticate.</span><span class="sxs-lookup"><span data-stu-id="1d748-117">If the string contains an unknown authentication type, or if the authentication type is not enabled on the configuration group (either the URL group or server session) associated with the request, the HTTP Server API appends the string in **pRawValue** to the WWW-Authenticate header.</span></span> <span data-ttu-id="1d748-118">Por ejemplo, si la aplicación especifica un esquema de autenticación no admitido y **pRawValue** contiene la cadena "CustomAuthString", el texto siguiente se anexa al encabezado de autenticación:</span><span class="sxs-lookup"><span data-stu-id="1d748-118">For example, if the application specifies an unsupported authentication scheme, and **pRawValue** contains the string "CustomAuthString", the following text is appended to the authentication header:</span></span>

    <span data-ttu-id="1d748-119">WWW-Authenticate: CustomAuthSchemeCRLF</span><span class="sxs-lookup"><span data-stu-id="1d748-119">WWW-Authenticate: CustomAuthSchemeCRLF</span></span>

    <span data-ttu-id="1d748-120">Si la aplicación no tiene habilitada la autenticación básica y **pRawValue** contiene la cadena "Basic realm =" BasicRealm "", el encabezado de autenticación contiene el siguiente texto:</span><span class="sxs-lookup"><span data-stu-id="1d748-120">If the application does not have Basic authentication enabled, and **pRawValue** contains the string "Basic realm="BasicRealm"", the authentication header contains the following text:</span></span>

    <span data-ttu-id="1d748-121">WWW-Authenticate: dominio básico = "BasicRealm"</span><span class="sxs-lookup"><span data-stu-id="1d748-121">WWW-Authenticate: Basic realm="BasicRealm"</span></span>

-   <span data-ttu-id="1d748-122">Si la cadena contiene un tipo de autenticación conocido y está presente en el grupo de configuración (ya sea el grupo de direcciones URL o la sesión del servidor) asociado a la solicitud, la API del servidor HTTP genera el encabezado WWW-Authenticate.</span><span class="sxs-lookup"><span data-stu-id="1d748-122">If the string contains a known authentication type and is present on the configuration group (either the URL group or the server session) associated with the request, the HTTP Server API generates the WWW-Authenticate header.</span></span> <span data-ttu-id="1d748-123">Por ejemplo, si la cadena especificada en **pRawValue** es "Digest" y la síntesis está habilitada en la sesión del servidor, la API del servidor http anexa el siguiente texto al encabezado de autenticación:</span><span class="sxs-lookup"><span data-stu-id="1d748-123">For example if the string specified in **pRawValue** is "Digest", and Digest is enabled on the server session, the HTTP Server API appends the following text to the authentication header:</span></span>

    <span data-ttu-id="1d748-124">WWW-Authenticate: Digest realm = " testrealm@host.com "</span><span class="sxs-lookup"><span data-stu-id="1d748-124">WWW-Authenticate: Digest realm="testrealm@host.com"</span></span>

<span data-ttu-id="1d748-125">Si el esquema del miembro **pRawValue** del [**\_ \_ encabezado conocido de http**](/windows/desktop/api/Http/ns-http-http_known_header) es Negotiate o NTLM, el nombre del esquema de autenticación es suficiente.</span><span class="sxs-lookup"><span data-stu-id="1d748-125">If the scheme in the **pRawValue** member of [**HTTP\_KNOWN\_HEADER**](/windows/desktop/api/Http/ns-http-http_known_header) is Negotiate or NTLM, the authentication scheme name is sufficient.</span></span> <span data-ttu-id="1d748-126">Si el esquema especificado es básico, el nombre de dominio Kerberos se anexa al nombre de esquema; no es necesario que la aplicación proporcione el nombre de dominio Kerberos en **pRawValue**.</span><span class="sxs-lookup"><span data-stu-id="1d748-126">If the specified scheme is Basic, the realm name is appended to the scheme name; the application doesn't need to supply the realm name in **pRawValue**.</span></span> <span data-ttu-id="1d748-127">Si el esquema especificado es Digest, HTTP llama a [**AcceptSecurityContext**](../SecAuthN/acceptsecuritycontext--general.md) para generar el desafío que se anexa al nombre de esquema.</span><span class="sxs-lookup"><span data-stu-id="1d748-127">If the specified scheme is Digest, HTTP calls [**AcceptSecurityContext**](../SecAuthN/acceptsecuritycontext--general.md) to generate the challenge that is appended to the scheme name.</span></span> <span data-ttu-id="1d748-128">Los parámetros para el esquema básico (dominio Kerberos) y el esquema de resumen (dominio y dominio) se obtienen de la información de autenticación del grupo de configuración correspondiente.</span><span class="sxs-lookup"><span data-stu-id="1d748-128">The parameters for Basic (realm) and Digest (realm and domain name) scheme are obtained from the corresponding configuration group authentication information.</span></span>

<span data-ttu-id="1d748-129">Cuando la aplicación envía varios desafíos de autenticación al cliente en encabezados de solicitud desconocidos, la API del servidor HTTP los envía al cliente sin intervención.</span><span class="sxs-lookup"><span data-stu-id="1d748-129">When the application sends multiple authentication challenges to the client in Unknown request headers, the HTTP Server API sends these to the client without intervention.</span></span> <span data-ttu-id="1d748-130">Sin embargo, no se recomienda este uso.</span><span class="sxs-lookup"><span data-stu-id="1d748-130">However this usage is not recommended.</span></span>

 

 




