---
description: Con el tiempo, se pueden generar diferentes versiones de TAPI, aplicaciones y proveedores de servicios.
ms.assetid: 994fad0e-5958-4d93-8952-9db2bbe01f44
title: Control de versiones de TSPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dfe405a629ddc64f76535b33554509b1a6fca81d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104542443"
---
# <a name="tspi-versioning"></a><span data-ttu-id="c2f5d-103">Control de versiones de TSPI</span><span class="sxs-lookup"><span data-stu-id="c2f5d-103">TSPI Versioning</span></span>

<span data-ttu-id="c2f5d-104">Con el tiempo, se pueden generar diferentes versiones de TAPI, aplicaciones y proveedores de servicios.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-104">Over time, different versions of TAPI, applications, and service providers may be produced.</span></span> <span data-ttu-id="c2f5d-105">Estas nuevas versiones pueden crear nuevas definiciones, como para nuevas características, nuevos miembros en estructuras de datos y nuevos campos de bits.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-105">These new versions can make new definitions, such as for new features, new members in data structures, and new bit fields.</span></span> <span data-ttu-id="c2f5d-106">Por lo tanto, los números de versión son necesarios para indicar cómo interpretar varias estructuras de datos.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-106">Version numbers are therefore necessary to indicate how to interpret various data structures.</span></span>

<span data-ttu-id="c2f5d-107">Para permitir la interoperabilidad óptima de las distintas versiones de aplicaciones, versiones de TAPI propiamente dichas y versiones de proveedores de servicios de diferentes proveedores, la telefonía de Microsoft proporciona un mecanismo de negociación de la versión simple para las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-107">To allow optimal interoperability of different versions of applications, versions of TAPI itself, and versions of service providers by different vendors, Microsoft Telephony provides a simple version negotiation mechanism for applications.</span></span> <span data-ttu-id="c2f5d-108">En TAPI y el proveedor de servicios de telefonía para cada dispositivo de línea se deben acordar dos versiones diferentes.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-108">There are two different versions that need to be agreed on by TAPI and the telephony service provider for each line device.</span></span> <span data-ttu-id="c2f5d-109">El primero es el número de versión del SPI de telefonía básico y complementario, denominado versión de la *interfaz TSPI*.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-109">The first is the version number for the Basic and Supplementary Telephony SPI, referred to as the *TSPI interface version*.</span></span> <span data-ttu-id="c2f5d-110">El otro es para las extensiones específicas del proveedor, si existen, y se conoce como la *versión* de la extensión.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-110">The other is for provider-specific extensions, if any, and is referred to as the *extension version*.</span></span> <span data-ttu-id="c2f5d-111">El formato de las estructuras de datos y los tipos de datos que usan las características básicas y complementarias de TSPI se define mediante la versión de TSPI, mientras que la versión de la extensión determina el formato de las estructuras de datos definidas por las extensiones específicas del proveedor.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-111">The format of the data structures and datatypes used by TSPI's Basic and Supplementary features is defined by the TSPI version, while the extension version determines the format of data structures defined by the vendor-specific extensions.</span></span>

<span data-ttu-id="c2f5d-112">Estos dos tipos de negociación de versión se controlan mediante dos procedimientos diferentes: [**TSPI \_ lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) se usa para negociar la versión de la interfaz TSPI y [**TSPI \_ lineNegotiateExtVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiateextversion) se usa para negociar la versión de la extensión.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-112">These two types of version negotiation are handled by two different procedures: [**TSPI\_lineNegotiateTSPIVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiatetspiversion) is used to negotiate the TSPI interface version, and [**TSPI\_lineNegotiateExtVersion**](/windows/win32/api/tspi/nf-tspi-tspi_linenegotiateextversion) is used to negotiate the extension version.</span></span> <span data-ttu-id="c2f5d-113">La negociación de la versión de la extensión se puede omitir si no se desean extensiones.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-113">Extension version negotiation can be skipped if extensions are not wanted.</span></span> <span data-ttu-id="c2f5d-114">Si estos intervalos entran en la superposición de la negociación, el proveedor de servicios debe devolver un valor dentro de la parte que se superpone del intervalo como resultado de la negociación.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-114">If these ranges input during negotiation overlap, the service provider must return a value within the overlapping portion of the range as the result of the negotiation.</span></span> <span data-ttu-id="c2f5d-115">Normalmente, debe ser el valor más alto posible.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-115">Usually, this should be the highest possible value.</span></span> <span data-ttu-id="c2f5d-116">Si los intervalos no se superponen, las dos partes son incompatibles y la función devuelve un error.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-116">If the ranges do not overlap, the two parties are incompatible and the function returns an error.</span></span>

<span data-ttu-id="c2f5d-117">Los resultados de una negociación simplemente indican que el proveedor de servicios está dispuesto a operar en un número de versión determinado, pero no confirma el proveedor de servicios para hacerlo.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-117">Results of a negotiation simply indicate that the service provider is willing to operate at a particular version number, but do not commit the service provider to doing so.</span></span> <span data-ttu-id="c2f5d-118">Por ejemplo, TAPI puede volver a negociar para determinar una versión ideal después de haber negociado una versión posible.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-118">For example, TAPI can renegotiate to determine an ideal version after having negotiated a possible version.</span></span> <span data-ttu-id="c2f5d-119">La versión de la interfaz TSPI solo se confirma cuando se abre una línea con [**TSPI \_ lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) y sobrevive hasta que se cierra el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-119">The TSPI interface version is only committed when a line is opened using [**TSPI\_lineOpen**](/windows/win32/api/tspi/nf-tspi-tspi_lineopen) and survives until the device is closed.</span></span> <span data-ttu-id="c2f5d-120">La versión de la extensión se confirma cuando se llama a la función [**\_ LineSelectExtVersion de TSPI**](/windows/win32/api/tspi/nf-tspi-tspi_lineselectextversion) y sobrevive hasta que la selección se cancela seleccionando la versión de extensión cero.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-120">The extension version is committed when the [**TSPI\_lineSelectExtVersion**](/windows/win32/api/tspi/nf-tspi-tspi_lineselectextversion) function is called, and survives until the selection is canceled by selecting extension version zero.</span></span>

<span data-ttu-id="c2f5d-121">La selección de la versión de la extensión puede producirse muchas veces, incluso mientras está en vigor una versión de la extensión.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-121">Extension version selection can happen many times, including while an extension version is in effect.</span></span> <span data-ttu-id="c2f5d-122">Dado que el proveedor de servicios se confirma con la versión de la extensión, su intervalo de versiones admitidas se restringe exactamente a esa versión de la extensión.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-122">Because the service provider is committed to the extension version, its range of supported versions narrows to exactly that extension version.</span></span> <span data-ttu-id="c2f5d-123">Por ejemplo, considere un proveedor de servicios que normalmente es compatible con las versiones de extensión de 1,0 a 5,5.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-123">For example, consider a service provider that is normally compatible with extension versions 1.0 through 5.5.</span></span> <span data-ttu-id="c2f5d-124">Si la versión 3,0 está en vigor mientras un llamador intenta negociar una versión en el intervalo comprendido entre 1,0 y 5,5, la negociación devuelve 3,0.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-124">If version 3.0 is in effect while a caller attempts to negotiate a version within the range 1.0 to 5.5, the negotiation returns 3.0.</span></span>

<span data-ttu-id="c2f5d-125">Dado que TAPI negocia la versión, puede actualizar un proveedor de servicios a nuevas versiones de la interfaz sin necesidad de actualizar también TAPI.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-125">Because TAPI negotiates the version, you can upgrade a service provider to new versions of the interface without requiring that TAPI also be upgraded.</span></span> <span data-ttu-id="c2f5d-126">Del mismo modo, se puede actualizar TAPI, pero todavía se puede usar el proveedor de servicios anterior.</span><span class="sxs-lookup"><span data-stu-id="c2f5d-126">Similarly, TAPI can be upgraded, yet still use your older service provider.</span></span>

 

 
