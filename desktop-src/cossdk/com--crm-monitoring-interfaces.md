---
description: La infraestructura de CRM proporciona un conjunto de interfaces que se pueden usar para supervisar CRMs en una aplicación de servidor determinada.
ms.assetid: b8f40c91-001b-4003-b377-57a918988100
title: Interfaces de supervisión de CRM de COM+
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c893040c46810c980c647cbacdc808200e8d5f5e
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104274899"
---
# <a name="com-crm-monitoring-interfaces"></a><span data-ttu-id="baed4-103">Interfaces de supervisión de CRM de COM+</span><span class="sxs-lookup"><span data-stu-id="baed4-103">COM+ CRM Monitoring Interfaces</span></span>

<span data-ttu-id="baed4-104">La infraestructura de CRM proporciona un conjunto de interfaces que se pueden usar para supervisar CRMs en una aplicación de servidor determinada.</span><span class="sxs-lookup"><span data-stu-id="baed4-104">The CRM infrastructure provides a set of interfaces that can be used for monitoring the CRMs within a particular server application.</span></span> <span data-ttu-id="baed4-105">Para tener acceso a las interfaces de supervisión, un componente que se ejecuta dentro de la aplicación de servidor debe crear primero un funcionario de CRM especializado denominado encargado de recuperación de CRM.</span><span class="sxs-lookup"><span data-stu-id="baed4-105">To access the monitoring interfaces, a component running within the server application must first create a specialized CRM clerk called the CRM recovery clerk.</span></span>

<span data-ttu-id="baed4-106">En el uso normal de CRMs, se espera que las transacciones sean de corta duración y, por lo tanto, los trabajos de CRM y los compensadores de CRM existen durante un breve período de tiempo, normalmente solo unos pocos segundos como máximo.</span><span class="sxs-lookup"><span data-stu-id="baed4-106">In normal use of CRMs, transactions are expected to be short-lived, and hence CRM Workers and CRM Compensators exist for a brief period of time, typically only a few seconds at most.</span></span> <span data-ttu-id="baed4-107">Por tanto, las interfaces de supervisión están diseñadas para proporcionar una instantánea del estado de la CRMs que se ejecuta en un momento determinado.</span><span class="sxs-lookup"><span data-stu-id="baed4-107">The monitoring interfaces are therefore designed to give a snapshot of the state of the executing CRMs at a particular point in time.</span></span> <span data-ttu-id="baed4-108">Si alguno de los CRMs tiene problemas, se pueden usar las interfaces de supervisión para cero en el CRM problemático, para inspeccionar sus entradas de registro y anular su transacción si es necesario.</span><span class="sxs-lookup"><span data-stu-id="baed4-108">If any of the CRMs are having problems, the monitoring interfaces can be used to zero in on the troublesome CRM, to inspect its log records and to abort its transaction if required.</span></span>

<span data-ttu-id="baed4-109">A continuación se muestran las tres interfaces de supervisión de CRM y las descripciones de cómo funcionan.</span><span class="sxs-lookup"><span data-stu-id="baed4-109">Following are the three CRM monitoring interfaces and descriptions of how they work.</span></span>



| <span data-ttu-id="baed4-110">Interfaz</span><span class="sxs-lookup"><span data-stu-id="baed4-110">Interface</span></span>                                                         | <span data-ttu-id="baed4-111">Descripción</span><span class="sxs-lookup"><span data-stu-id="baed4-111">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|-------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="baed4-112">**ICrmMonitor**</span><span class="sxs-lookup"><span data-stu-id="baed4-112">**ICrmMonitor**</span></span>](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmmonitor)<br/>                     | <span data-ttu-id="baed4-113">Mediante [**ICrmMonitor:: GetClerks**](/windows/desktop/api/ComSvcs/nf-comsvcs-icrmmonitor-getclerks), se puede obtener una instantánea del conjunto actual de empleados de CRM activos dentro de la aplicación de servidor.</span><span class="sxs-lookup"><span data-stu-id="baed4-113">Using [**ICrmMonitor::GetClerks**](/windows/desktop/api/ComSvcs/nf-comsvcs-icrmmonitor-getclerks), a snapshot can be obtained of the current set of active CRM clerks within the server application.</span></span> <span data-ttu-id="baed4-114">A partir de este, se puede localizar y consultar un objeto de colección de objetos de interés determinado de CRM, incluido el estado actual de su transacción y las entradas de registro escritas por el CRM.</span><span class="sxs-lookup"><span data-stu-id="baed4-114">From this, a particular CRM clerk collection object of interest can be located and queried, including the current state of its transaction and the log records written by the CRM.</span></span><br/> <span data-ttu-id="baed4-115">Cuando la herramienta de supervisión ha determinado qué funcionario es de interés, llama a [**ICrmMonitor:: HoldClerk**](/windows/desktop/api/ComSvcs/nf-comsvcs-icrmmonitor-holdclerk) para obtener una interfaz [**ICrmMonitorLogRecords**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmmonitorlogrecords) en ese funcionario determinado.</span><span class="sxs-lookup"><span data-stu-id="baed4-115">When the monitoring tool has determined which clerk is of interest, it calls [**ICrmMonitor::HoldClerk**](/windows/desktop/api/ComSvcs/nf-comsvcs-icrmmonitor-holdclerk) to get an [**ICrmMonitorLogRecords**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmmonitorlogrecords) interface on that particular clerk.</span></span> <span data-ttu-id="baed4-116">En este punto, la herramienta de supervisión mantiene una referencia a ese funcionario y, si la transacción se completa, el funcionario se mantiene en la memoria y no se libera hasta que se realiza la herramienta de supervisión.</span><span class="sxs-lookup"><span data-stu-id="baed4-116">At this point, the monitoring tool is holding a reference to that clerk, and if the transaction completes, the clerk is held in memory and is not released until the monitoring tool is done.</span></span><br/>                                                                                                                                                                                                    |
| [<span data-ttu-id="baed4-117">**ICrmMonitorClerks**</span><span class="sxs-lookup"><span data-stu-id="baed4-117">**ICrmMonitorClerks**</span></span>](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmmonitorclerks)<br/>         | <span data-ttu-id="baed4-118">Mediante esta interfaz, se puede examinar el objeto de colección Clerk para obtener información sobre el estado de la colección Clerk en el momento en que se obtuvo.</span><span class="sxs-lookup"><span data-stu-id="baed4-118">Using this interface, the clerk collection object can be browsed for information about the state of the clerk collection at the moment it was obtained.</span></span> <span data-ttu-id="baed4-119">Esta información incluye el número de empleados, el ProgID del compensador de CRM usado por el funcionario, la descripción proporcionada en el momento en que se registró el compensador de CRM (mediante [**ICrmLogControl:: RegisterCompensator**](/windows/desktop/api/ComSvcs/nf-comsvcs-icrmlogcontrol-registercompensator)), el identificador de unidad de trabajo de la transacción y el ID. de actividad.</span><span class="sxs-lookup"><span data-stu-id="baed4-119">This information includes the number of clerks, the ProgID of the CRM Compensator used by the clerk, the description provided at the time the CRM Compensator was registered (using [**ICrmLogControl::RegisterCompensator**](/windows/desktop/api/ComSvcs/nf-comsvcs-icrmlogcontrol-registercompensator)), the transaction unit-of-work ID, and the activity ID.</span></span> <span data-ttu-id="baed4-120">Los empleados individuales también se identifican de forma única mediante un "CLSID de instancia de funcionario", que no es un CLSID COM en el sentido habitual del término, sino simplemente un GUID único que identifica este funcionario concreto para su duración.</span><span class="sxs-lookup"><span data-stu-id="baed4-120">Individual clerks are also uniquely identified by a "clerk instance CLSID," which is not a COM CLSID in the usual sense of the term but simply a unique GUID that identifies this particular clerk for its lifetime.</span></span><br/>                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="baed4-121">**ICrmMonitorLogRecords**</span><span class="sxs-lookup"><span data-stu-id="baed4-121">**ICrmMonitorLogRecords**</span></span>](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmmonitorlogrecords)<br/> | <span data-ttu-id="baed4-122">Esta interfaz se puede usar para consultar el estado actual de la transacción, para averiguar el número de entradas de registro que ha escrito este funcionario de CRM y para obtener los datos de entrada de registro reales.</span><span class="sxs-lookup"><span data-stu-id="baed4-122">This interface can be used to query the current state of the transaction, to find out how many log records this CRM clerk has written, and to get the actual log record data.</span></span> <span data-ttu-id="baed4-123">Las entradas de registro se proporcionan desde la interfaz [**ICrmMonitorLogRecords**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmmonitorlogrecords) en el mismo formato en que se escribieron originalmente (mediante [**ICrmLogControl**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol)).</span><span class="sxs-lookup"><span data-stu-id="baed4-123">The log records are provided from the [**ICrmMonitorLogRecords**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmmonitorlogrecords) interface in the same format that they were originally written (using [**ICrmLogControl**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol)).</span></span> <span data-ttu-id="baed4-124">Además, **ICrmMonitorLogRecords** se puede implementar opcionalmente para convertir las entradas de registro en un formato visible, de forma que se puedan presentar con una herramienta de supervisión genérica.</span><span class="sxs-lookup"><span data-stu-id="baed4-124">In addition, **ICrmMonitorLogRecords** can be optionally implemented to convert the log records to viewable format so they can be presented using a generic monitoring tool.</span></span><br/> <span data-ttu-id="baed4-125">Dado que [**ICrmMonitorLogRecords**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmmonitorlogrecords) se implementa directamente en el funcionario de CRM, puede ejecutar [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)) para [**ICrmLogControl**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol) (también implementado en el distribuidor de CRM).</span><span class="sxs-lookup"><span data-stu-id="baed4-125">Because [**ICrmMonitorLogRecords**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmmonitorlogrecords) is implemented directly on the CRM clerk, you can [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)) for [**ICrmLogControl**](/windows/desktop/api/ComSvcs/nn-comsvcs-icrmlogcontrol) (also implemented on the CRM clerk).</span></span> <span data-ttu-id="baed4-126">A continuación, se puede usar para anular directamente la transacción si es necesario ([**ICrmLogControl:: ForceTransactionToAbort**](/windows/desktop/api/ComSvcs/nf-comsvcs-icrmlogcontrol-forcetransactiontoabort)).</span><span class="sxs-lookup"><span data-stu-id="baed4-126">This can then be used to directly abort the transaction if required ([**ICrmLogControl::ForceTransactionToAbort**](/windows/desktop/api/ComSvcs/nf-comsvcs-icrmlogcontrol-forcetransactiontoabort)).</span></span><br/> |



 

## <a name="related-topics"></a><span data-ttu-id="baed4-127">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="baed4-127">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="baed4-128">Conceptos de Administrador de recursos de compensación de COM+</span><span class="sxs-lookup"><span data-stu-id="baed4-128">COM+ Compensating Resource Manager Concepts</span></span>](com--compensating-resource-manager-concepts.md)
</dt> </dl>

 

