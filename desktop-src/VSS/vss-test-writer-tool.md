---
description: El escritor de pruebas es una utilidad que puede usar para probar las aplicaciones de solicitante de VSS.
ms.assetid: 02434cb9-390c-4cf0-9941-b833ace55685
title: Herramienta de escritura de prueba de VSS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 61ffdbb513697a701866be5ceeb40168e8c28368
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105696457"
---
# <a name="vss-test-writer-tool"></a><span data-ttu-id="525b9-103">Herramienta de escritura de prueba de VSS</span><span class="sxs-lookup"><span data-stu-id="525b9-103">VSS Test Writer Tool</span></span>

<span data-ttu-id="525b9-104">El escritor de pruebas es una utilidad que puede usar para probar las aplicaciones de solicitante de VSS.</span><span class="sxs-lookup"><span data-stu-id="525b9-104">The Test Writer is a utility that you can use to test VSS requester applications.</span></span> <span data-ttu-id="525b9-105">Este escritor puede configurarse para realizar casi todas las acciones que puede realizar un VSS Writer.</span><span class="sxs-lookup"><span data-stu-id="525b9-105">This writer can be configured to perform almost all of the actions that a VSS writer can perform.</span></span> <span data-ttu-id="525b9-106">Además, el escritor de pruebas realiza comprobaciones exhaustivas para asegurarse de que el solicitante ha solucionado correctamente estas acciones del escritor.</span><span class="sxs-lookup"><span data-stu-id="525b9-106">In addition, the Test Writer performs extensive checks to ensure that the requester has dealt with these writer actions correctly.</span></span>

<span data-ttu-id="525b9-107">Cada instancia del escritor se inicializa con un archivo de configuración XML que describe exactamente en qué componentes informará el escritor y cómo se comporta el escritor.</span><span class="sxs-lookup"><span data-stu-id="525b9-107">Each instance of the writer is initialized with an XML configuration file that describes exactly what components the writer will report on, and how the writer behaves.</span></span> <span data-ttu-id="525b9-108">El escritor puede configurarse para informar sobre diversos tipos de escenarios, incluidos escenarios más complicados con las interfaces incrementales y diferenciales.</span><span class="sxs-lookup"><span data-stu-id="525b9-108">The writer can be configured to report on various types of scenarios, including more complicated scenarios using the incremental and differential interfaces.</span></span> <span data-ttu-id="525b9-109">El escritor realizará comprobaciones en varios puntos durante el proceso para asegurarse de que el solicitante se comporta de la manera adecuada.</span><span class="sxs-lookup"><span data-stu-id="525b9-109">The writer will perform checks at various points during the process to ensure that the requester is behaving in a proper manner.</span></span> <span data-ttu-id="525b9-110">Una vez finalizada la restauración, el escritor comprobará que todos los archivos necesarios se han restaurado sin daños.</span><span class="sxs-lookup"><span data-stu-id="525b9-110">After the restore is completed, the writer will check that all necessary files have been restored without corruption.</span></span> <span data-ttu-id="525b9-111">El escritor también puede configurarse para realizar otras operaciones, como errores de eventos específicos.</span><span class="sxs-lookup"><span data-stu-id="525b9-111">The writer can also be configured to perform other operations such as failing specific events.</span></span>

> [!Note]  
> <span data-ttu-id="525b9-112">Esta herramienta se incluye en el kit de desarrollo de software (SDK) de Microsoft Windows para Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="525b9-112">This tool is included in the Microsoft Windows Software Development Kit (SDK) for Windows Vista and later.</span></span> <span data-ttu-id="525b9-113">Puede descargar la Windows SDK desde [https://msdn.microsoft.com/windowsvista](https://msdn.microsoft.com/windows/default.aspx) .</span><span class="sxs-lookup"><span data-stu-id="525b9-113">You can download the Windows SDK from [https://msdn.microsoft.com/windowsvista](https://msdn.microsoft.com/windows/default.aspx).</span></span>

 

<span data-ttu-id="525b9-114">En la instalación de Windows SDK, la herramienta VssSampleProvider se puede encontrar en `%Program Files(x86)%\Windows Kits\8.1\bin\x64` (para Windows de 64 bits) y `%Program Files(x86)%\Windows Kits\8.1\bin\x86` .</span><span class="sxs-lookup"><span data-stu-id="525b9-114">In the Windows SDK installation, the VssSampleProvider tool can be found in `%Program Files(x86)%\Windows Kits\8.1\bin\x64` (for 64-bit Windows) and `%Program Files(x86)%\Windows Kits\8.1\bin\x86`.</span></span>

## <a name="running-the-test-writer-tool"></a><span data-ttu-id="525b9-115">Ejecutar la herramienta de escritura de prueba</span><span class="sxs-lookup"><span data-stu-id="525b9-115">Running the Test Writer Tool</span></span>

<span data-ttu-id="525b9-116">Para iniciar el escritor de pruebas, escriba lo siguiente en el símbolo del sistema:</span><span class="sxs-lookup"><span data-stu-id="525b9-116">To start the Test Writer, type the following at the command prompt:</span></span>

<span data-ttu-id="525b9-117">**vswriter.exe** *config-file*</span><span class="sxs-lookup"><span data-stu-id="525b9-117">**vswriter.exe** *config-file*</span></span>

<span data-ttu-id="525b9-118">donde *config-file* es la ruta de acceso a un archivo de configuración que especifica el comportamiento de este escritor.</span><span class="sxs-lookup"><span data-stu-id="525b9-118">where *config-file* is the path to a configuration file that specifies the behavior of this writer.</span></span>

<span data-ttu-id="525b9-119">Para detener el escritor de pruebas, presione CTRL + C.</span><span class="sxs-lookup"><span data-stu-id="525b9-119">To stop the Test Writer, press CTRL+C.</span></span>

<span data-ttu-id="525b9-120">Se pueden ejecutar varias instancias del escritor de pruebas al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="525b9-120">Multiple instances of the Test Writer can be run at the same time.</span></span> <span data-ttu-id="525b9-121">Sin embargo, cada instancia del escritor informará del mismo ID. de clase del escritor (aunque es un identificador de instancia de escritor diferente), por lo que las rutas de acceso lógicas y los nombres de componente deben ser únicos en todas las instancias en ejecución simultáneas del escritor.</span><span class="sxs-lookup"><span data-stu-id="525b9-121">However, each instance of the writer will report the same writer class ID (though a different writer instance ID), so logical paths and component names must be unique across all simultaneously running instances of the writer.</span></span>

<span data-ttu-id="525b9-122">Para asegurarse de que el escritor puede comprobar correctamente que el solicitante ha respetado las especificaciones de exclusión de archivos, todos los archivos de los que se realizó una copia de seguridad deberían eliminarse del volumen original antes de intentar restaurarlos.</span><span class="sxs-lookup"><span data-stu-id="525b9-122">To ensure that the writer can properly check that the requester has honored the exclude file specifications, all files that were backed up should be deleted from the original volume before attempting to restore them.</span></span> <span data-ttu-id="525b9-123">Se recomienda que se almacene una plantilla de cada escenario del escritor, por lo que el escenario se puede volver a crear fácilmente.</span><span class="sxs-lookup"><span data-stu-id="525b9-123">It is recommended that a template of each writer scenario be stored, so the scenario can be easily recreated.</span></span>

## <a name="using-a-configuration-file"></a><span data-ttu-id="525b9-124">Uso de un archivo de configuración</span><span class="sxs-lookup"><span data-stu-id="525b9-124">Using a Configuration File</span></span>

<span data-ttu-id="525b9-125">El siguiente archivo de configuración de ejemplo, vswriter \_config.xml, se puede encontrar en `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\vsstools` en plataformas x86 y `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\x64\vsstools` en plataformas x64.</span><span class="sxs-lookup"><span data-stu-id="525b9-125">The following sample configuration file, vswriter\_config.xml, can be found in `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\vsstools` on x86 platforms and `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\x64\vsstools` on x64 platforms.</span></span>

``` syntax
<TestWriter usage="USER_DATA">

    <RestoreMethod method="RESTORE_IF_CAN_BE_REPLACED"
                   writerRestore="always"
                   rebootRequired="no" />

    <ExcludeFile path="c:\writerData\notTheseFiles" 
                 filespec="excludeThisFile.txt" 
                 recursive="no"/>

    <Component componentType="filegroup"
               componentName="TestFiles">
        <ComponentFile path="c:\writerData\myFilesHere" 
                       filespec="*"
                       recursive="no" />
    </Component>

</TestWriter>
```

<span data-ttu-id="525b9-126">El elemento raíz de este archivo de configuración se denomina TestWriter.</span><span class="sxs-lookup"><span data-stu-id="525b9-126">The root element in this configuration file is named TestWriter.</span></span> <span data-ttu-id="525b9-127">Todos los demás elementos se organizan bajo el elemento TestWriter.</span><span class="sxs-lookup"><span data-stu-id="525b9-127">All other elements are arranged under the TestWriter element.</span></span>

<span data-ttu-id="525b9-128">Uno de los atributos asociados a TestWriter es el atributo Usage.</span><span class="sxs-lookup"><span data-stu-id="525b9-128">One of the attributes associated with TestWriter is the usage attribute.</span></span> <span data-ttu-id="525b9-129">Este atributo especifica el tipo de uso indicado a través de [**IVssExamineWriterMetadata:: GetIdentity**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getidentity).</span><span class="sxs-lookup"><span data-stu-id="525b9-129">This attribute specifies the usage type reported through [**IVssExamineWriterMetadata::GetIdentity**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getidentity).</span></span> <span data-ttu-id="525b9-130">Uno de los valores posibles para este atributo son los \_ datos de usuario.</span><span class="sxs-lookup"><span data-stu-id="525b9-130">One of the possible values for this attribute is USER\_DATA.</span></span>

<span data-ttu-id="525b9-131">El primer elemento secundario del elemento raíz siempre debe ser un elemento RestoreMethod.</span><span class="sxs-lookup"><span data-stu-id="525b9-131">The first child element of the root element must always be a RestoreMethod element.</span></span> <span data-ttu-id="525b9-132">Este elemento especifica lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="525b9-132">This element specifies the following:</span></span>

-   <span data-ttu-id="525b9-133">El método restore (en este caso, RESTOre \_ If \_ \_ se puede \_ reemplazar)</span><span class="sxs-lookup"><span data-stu-id="525b9-133">The restore method (in this case, RESTORE\_IF\_CAN\_BE\_REPLACED)</span></span>
-   <span data-ttu-id="525b9-134">Si el escritor requiere eventos de restauración (en este caso, siempre)</span><span class="sxs-lookup"><span data-stu-id="525b9-134">Whether the writer requires restore events (in this case, always)</span></span>
-   <span data-ttu-id="525b9-135">Si es necesario un reinicio después de restaurar el escritor (en este caso, no)</span><span class="sxs-lookup"><span data-stu-id="525b9-135">Whether a reboot is required after the writer is restored (in this case, no)</span></span>

<span data-ttu-id="525b9-136">Este elemento puede especificar opcionalmente una asignación de ubicación alternativa.</span><span class="sxs-lookup"><span data-stu-id="525b9-136">This element can optionally specify an alternate-location mapping.</span></span> <span data-ttu-id="525b9-137">(En este caso, no se especifica ninguna ubicación alternativa).</span><span class="sxs-lookup"><span data-stu-id="525b9-137">(In this case, no alternate location is specified.)</span></span>

<span data-ttu-id="525b9-138">El segundo elemento secundario es un elemento ExcludeFile.</span><span class="sxs-lookup"><span data-stu-id="525b9-138">The second child element is an ExcludeFile element.</span></span> <span data-ttu-id="525b9-139">Este elemento hace que el escritor excluya un archivo o un conjunto de archivos de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="525b9-139">This element causes the writer to exclude a file or a set of files from backup.</span></span>

<span data-ttu-id="525b9-140">El tercer elemento secundario es un elemento de componente.</span><span class="sxs-lookup"><span data-stu-id="525b9-140">The third child element is a Component element.</span></span> <span data-ttu-id="525b9-141">Este elemento hace que el escritor agregue un componente a sus metadatos.</span><span class="sxs-lookup"><span data-stu-id="525b9-141">This element causes the writer to add a component to its metadata.</span></span> <span data-ttu-id="525b9-142">Un elemento Component contiene atributos para describir el componente y los elementos secundarios para describir el contenido del componente, como el siguiente:</span><span class="sxs-lookup"><span data-stu-id="525b9-142">A Component element contains attributes to describe the component and child elements to describe the content of the component, such as the following:</span></span>

-   <span data-ttu-id="525b9-143">componentType para indicar si se trata de un grupo de archivos o una base de datos</span><span class="sxs-lookup"><span data-stu-id="525b9-143">componentType to indicate whether this is a filegroup or a database</span></span>
-   <span data-ttu-id="525b9-144">logicalPath para la ruta de acceso lógica del componente</span><span class="sxs-lookup"><span data-stu-id="525b9-144">logicalPath for the component logical path</span></span>
-   <span data-ttu-id="525b9-145">componentName para el nombre del componente</span><span class="sxs-lookup"><span data-stu-id="525b9-145">componentName for the name of the component</span></span>
-   <span data-ttu-id="525b9-146">Selectable para indicar el estado Selectable-for-Backup</span><span class="sxs-lookup"><span data-stu-id="525b9-146">selectable to indicate selectable-for-backup status</span></span>

<span data-ttu-id="525b9-147">El elemento componente también tiene un elemento secundario denominado ComponentFile para agregar una especificación de archivo a este componente.</span><span class="sxs-lookup"><span data-stu-id="525b9-147">The Component element also has a child element named ComponentFile to add a file specification to this component.</span></span> <span data-ttu-id="525b9-148">(Un elemento de componente puede tener un número arbitrario de elementos ComponentFile que se pueden especificar para cada componente). Este elemento ComponentFile tiene los siguientes atributos:</span><span class="sxs-lookup"><span data-stu-id="525b9-148">(A Component element can have an arbitrary number of ComponentFile elements that can be specified for each component.) This ComponentFile element has the following attributes:</span></span>

-   <span data-ttu-id="525b9-149">Ruta de acceso = "c: \\ writerData \\ myFilesHere"</span><span class="sxs-lookup"><span data-stu-id="525b9-149">path="c:\\writerData\\myFilesHere"</span></span>
-   <span data-ttu-id="525b9-150">filespec = " \* "</span><span class="sxs-lookup"><span data-stu-id="525b9-150">filespec="\*"</span></span>
-   <span data-ttu-id="525b9-151">Recursive = "no"</span><span class="sxs-lookup"><span data-stu-id="525b9-151">recursive="no"</span></span>

<span data-ttu-id="525b9-152">Aunque el escritor de pruebas comprueba el comportamiento del solicitante, no comprueba que el archivo de configuración Mantenga siempre la semántica documentada para un escritor.</span><span class="sxs-lookup"><span data-stu-id="525b9-152">Although the Test Writer verifies requester behavior, it does not verify that the configuration file always maintains the documented semantics for a writer.</span></span> <span data-ttu-id="525b9-153">Hay muchas operaciones que un escritor con buen comportamiento no debe hacer (por ejemplo, notificar el mismo archivo en varios componentes) y depende del autor del archivo de configuración XML para mantener estas semánticas.</span><span class="sxs-lookup"><span data-stu-id="525b9-153">There are many operations that a well-behaved writer should not do (such as report the same file in multiple components), and it is up to the author of the XML configuration file to maintain these semantics.</span></span>

## <a name="configuring-writer-attributes"></a><span data-ttu-id="525b9-154">Configuración de atributos del escritor</span><span class="sxs-lookup"><span data-stu-id="525b9-154">Configuring Writer Attributes</span></span>

<span data-ttu-id="525b9-155">El elemento raíz TestWriter contiene atributos que determinan distintos comportamientos del escritor.</span><span class="sxs-lookup"><span data-stu-id="525b9-155">The TestWriter root element contains attributes that determine various behaviors of the writer.</span></span> <span data-ttu-id="525b9-156">Algunos de los comportamientos que se pueden modificar son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="525b9-156">Some of the behaviors that can be altered are the following:</span></span>



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="525b9-157">Atributo</span><span class="sxs-lookup"><span data-stu-id="525b9-157">Attribute</span></span></th>
<th><span data-ttu-id="525b9-158">Descripción</span><span class="sxs-lookup"><span data-stu-id="525b9-158">Description</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="525b9-159"><span id="verbosity"></span><span id="VERBOSITY"></span>detalle</span><span class="sxs-lookup"><span data-stu-id="525b9-159"><span id="verbosity"></span><span id="VERBOSITY"></span>verbosity</span></span><br/></td>
<td><span data-ttu-id="525b9-160">El escritor imprime el estado en la consola a medida que recibe eventos y los procesa.</span><span class="sxs-lookup"><span data-stu-id="525b9-160">The writer prints the status to the console as it receives events and processes them.</span></span> <span data-ttu-id="525b9-161">El nivel de detalle mostrado se especifica mediante el atributo de detalle.</span><span class="sxs-lookup"><span data-stu-id="525b9-161">The level of verbosity displayed is specified by the verbosity attribute.</span></span> <span data-ttu-id="525b9-162">Hay tres niveles de detalle entre los que elegir:</span><span class="sxs-lookup"><span data-stu-id="525b9-162">There are three verbosity levels to choose from:</span></span><br/> <dl> <span data-ttu-id="525b9-163"><dt><span id="low"></span><span id="LOW"></span>habilita</dt> </span><span class="sxs-lookup"><span data-stu-id="525b9-163"><dt><span id="low"></span><span id="LOW"></span>low</dt> </span></span><dd> <span data-ttu-id="525b9-164">Solo se imprimirán los errores del escritor o el comportamiento incorrecto del solicitante.</span><span class="sxs-lookup"><span data-stu-id="525b9-164">Only failures in the writer or incorrect behavior from the requester will be printed.</span></span><br/> </dd> <span data-ttu-id="525b9-165"><dt><span id="medium"></span><span id="MEDIUM"></span>medio</dt> </span><span class="sxs-lookup"><span data-stu-id="525b9-165"><dt><span id="medium"></span><span id="MEDIUM"></span>medium</dt> </span></span><dd> <span data-ttu-id="525b9-166">Todo lo que se encuentra en el nivel de detalle bajo se imprime además de información de estado adicional, como cuando se reciben los eventos.</span><span class="sxs-lookup"><span data-stu-id="525b9-166">Everything at the low verbosity level is printed in addition to extra status information such as when events are received.</span></span> <span data-ttu-id="525b9-167">Es el nivel predeterminado.</span><span class="sxs-lookup"><span data-stu-id="525b9-167">This is the default level.</span></span><br/> </dd> <span data-ttu-id="525b9-168"><dt><span id="high"></span><span id="HIGH"></span>calidad</dt> </span><span class="sxs-lookup"><span data-stu-id="525b9-168"><dt><span id="high"></span><span id="HIGH"></span>high</dt> </span></span><dd> <span data-ttu-id="525b9-169">Se indica información de estado detallada sobre el funcionamiento del escritor.</span><span class="sxs-lookup"><span data-stu-id="525b9-169">Detailed status information about the operation of the writer is reported.</span></span><br/> </dd> </dl></td>
</tr>
<tr class="even">
<td><span data-ttu-id="525b9-170"><span id="deleteFiles"></span><span id="deletefiles"></span><span id="DELETEFILES"></span>deleteFiles</span><span class="sxs-lookup"><span data-stu-id="525b9-170"><span id="deleteFiles"></span><span id="deletefiles"></span><span id="DELETEFILES"></span>deleteFiles</span></span><br/></td>
<td><span data-ttu-id="525b9-171">Para realizar una comprobación adicional, establezca este atributo en &quot; sí &quot; para que el escritor elimine todos sus archivos inmediatamente después de crear la instantánea de volumen.</span><span class="sxs-lookup"><span data-stu-id="525b9-171">To perform extra verification, set this attribute to &quot;yes&quot; to cause the writer to delete all of its files immediately after the volume shadow copy is created.</span></span> <span data-ttu-id="525b9-172">A continuación, el solicitante debe copiar los archivos de la instantánea, ya que ya no existen en el volumen original.</span><span class="sxs-lookup"><span data-stu-id="525b9-172">The requester must then copy the files from the shadow copy, because they no longer exist on the original volume.</span></span> <br/>
<blockquote>
[!Note]<br />
<span data-ttu-id="525b9-173">En el caso de los escritores de asignación, los archivos se eliminan de la ubicación original después de la asignación, pero antes de que se cree la instantánea.</span><span class="sxs-lookup"><span data-stu-id="525b9-173">In the case of spit writers, the files are deleted from the original location after the spit but before the shadow copy is created.</span></span> <span data-ttu-id="525b9-174">Una vez creada la instantánea, los archivos se eliminan del directorio de la.</span><span class="sxs-lookup"><span data-stu-id="525b9-174">After the shadow copy is created, the files are deleted from the spit directory.</span></span>
</blockquote>
<br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="525b9-175"><span id="deletePartialFiles"></span><span id="deletepartialfiles"></span><span id="DELETEPARTIALFILES"></span>deletePartialFiles</span><span class="sxs-lookup"><span data-stu-id="525b9-175"><span id="deletePartialFiles"></span><span id="deletepartialfiles"></span><span id="DELETEPARTIALFILES"></span>deletePartialFiles</span></span><br/></td>
<td><span data-ttu-id="525b9-176">Para eliminar archivos parciales, establezca este atributo en &quot; sí &quot; .</span><span class="sxs-lookup"><span data-stu-id="525b9-176">To delete partial files, set this attribute to &quot;yes&quot;.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="525b9-177"><span id="deleteDifferencedFiles"></span><span id="deletedifferencedfiles"></span><span id="DELETEDIFFERENCEDFILES"></span>deleteDifferencedFiles</span><span class="sxs-lookup"><span data-stu-id="525b9-177"><span id="deleteDifferencedFiles"></span><span id="deletedifferencedfiles"></span><span id="DELETEDIFFERENCEDFILES"></span>deleteDifferencedFiles</span></span><br/></td>
<td><span data-ttu-id="525b9-178">Para eliminar archivos diferenciados, establezca este atributo en &quot; sí &quot; .</span><span class="sxs-lookup"><span data-stu-id="525b9-178">To delete differenced files, set this attribute to &quot;yes&quot;.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="525b9-179"><span id="checkIncludes"></span><span id="checkincludes"></span><span id="CHECKINCLUDES"></span>checkIncludes</span><span class="sxs-lookup"><span data-stu-id="525b9-179"><span id="checkIncludes"></span><span id="checkincludes"></span><span id="CHECKINCLUDES"></span>checkIncludes</span></span><br/></td>
<td><span data-ttu-id="525b9-180">Establezca este atributo en &quot; sí &quot; para que el escritor Compruebe que todos los archivos de los que se ha realizado una copia de seguridad se han restaurado en una ubicación adecuada y que el archivo no está dañado.</span><span class="sxs-lookup"><span data-stu-id="525b9-180">Set this attribute to &quot;yes&quot; to cause the writer to check that every file that has been backed up has been restored to an appropriate location, and that the file has not been corrupted.</span></span> <span data-ttu-id="525b9-181">Los archivos parciales y los archivos diferenciados también se administran correctamente.</span><span class="sxs-lookup"><span data-stu-id="525b9-181">Partial files and differenced files are also correctly handled.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="525b9-182"><span id="checkExcludes"></span><span id="checkexcludes"></span><span id="CHECKEXCLUDES"></span>checkExcludes</span><span class="sxs-lookup"><span data-stu-id="525b9-182"><span id="checkExcludes"></span><span id="checkexcludes"></span><span id="CHECKEXCLUDES"></span>checkExcludes</span></span><br/></td>
<td><span data-ttu-id="525b9-183">Establezca este atributo en &quot; sí &quot; para que el escritor Compruebe que los archivos que coinciden con una especificación de archivo en la lista de exclusión no se restauran.</span><span class="sxs-lookup"><span data-stu-id="525b9-183">Set this attribute to &quot;yes&quot; to cause the writer to check that files matching a file specification in the exclude list are not restored.</span></span> <span data-ttu-id="525b9-184">Para que funcione correctamente, los directorios de restauración se deben vaciar antes de la restauración.</span><span class="sxs-lookup"><span data-stu-id="525b9-184">For this to function correctly, the restore directories must be emptied prior to restore.</span></span><br/></td>
</tr>
</tbody>
</table>



 

## <a name="specifying-alternate-location-mappings"></a><span data-ttu-id="525b9-185">Especificar asignaciones de ubicación alternativas</span><span class="sxs-lookup"><span data-stu-id="525b9-185">Specifying Alternate Location Mappings</span></span>

<span data-ttu-id="525b9-186">Una asignación de ubicación alternativa especifica una ubicación en la que restaurar si el método de restauración es VSS \_ WRE \_ restore \_ en una \_ \_ ubicación alternativa o si se produce un error en la restauración normal de un componente.</span><span class="sxs-lookup"><span data-stu-id="525b9-186">An alternate location mapping specifies a location to restore to if the restore method is VSS\_WRE\_RESTORE\_TO\_ALTERNATE\_LOCATION or if normal restore of a component fails.</span></span> <span data-ttu-id="525b9-187">Un escritor puede informar de las asignaciones de ubicación alternativas al solicitante mediante el método [**IVssExamineWriterMetadata:: GetAlternateLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping) .</span><span class="sxs-lookup"><span data-stu-id="525b9-187">A writer can report its alternate location mappings to the requester by using the [**IVssExamineWriterMetadata::GetAlternateLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getalternatelocationmapping) method.</span></span> <span data-ttu-id="525b9-188">Puede Agregar asignaciones de ubicación alternativas al archivo de configuración del escritor de pruebas agregando subelementos AlternateLocationMapping al elemento RestoreMethod.</span><span class="sxs-lookup"><span data-stu-id="525b9-188">You can add alternate location mappings to the Test Writer configuration file by adding AlternateLocationMapping subelements to the RestoreMethod element.</span></span>

<span data-ttu-id="525b9-189">El siguiente elemento RestoreMethod contiene un subelemento AlternateLocationMapping.</span><span class="sxs-lookup"><span data-stu-id="525b9-189">The following RestoreMethod element contains a AlternateLocationMapping subelement.</span></span>

``` syntax
<RestoreMethod method="RESTORE_IF_CAN_REPLACE"
              writerRestore="always"
              rebootRequired="no">
    <AlternateLocationMapping path="c:\files"
                              filespec="*.txt"
                              recursive="no"
                              alternatePath="c:\altfiles"/>
</RestoreMethod>
```

<span data-ttu-id="525b9-190">Este ejemplo especifica que el solicitante debe intentar primero restaurar todos los archivos que coincidan con c: \\ files \\ \* . txt en el directorio c: \\ files.</span><span class="sxs-lookup"><span data-stu-id="525b9-190">This example specifies that the requester should first attempt to restore all of the files matching c:\\files\\\*.txt to the c:\\files directory.</span></span> <span data-ttu-id="525b9-191">Si uno de estos archivos no se puede reemplazar, el solicitante debe restaurar todos los archivos al directorio c: \\ altfiles en su lugar.</span><span class="sxs-lookup"><span data-stu-id="525b9-191">If one of these files cannot be replaced, the requester should restore all the files to the c:\\altfiles directory instead.</span></span> <span data-ttu-id="525b9-192">El solicitante debe guardar esta asignación de ubicación alternativa mediante el método [**IVssBackupComponents:: AddAlternativeLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addalternativelocationmapping) .</span><span class="sxs-lookup"><span data-stu-id="525b9-192">The requester should save this alternate location mapping by using the [**IVssBackupComponents::AddAlternativeLocationMapping**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addalternativelocationmapping) method.</span></span> <span data-ttu-id="525b9-193">Si el escritor de pruebas está configurado para comprobar si los archivos se han restaurado, también comprobará si el solicitante ha llamado a **AddAlternativeLocationMapping**.</span><span class="sxs-lookup"><span data-stu-id="525b9-193">If the Test Writer is configured to check whether files have been restored, it will also check whether the requester has called **AddAlternativeLocationMapping**.</span></span>

## <a name="specifying-files-to-be-excluded"></a><span data-ttu-id="525b9-194">Especificar los archivos que se van a excluir</span><span class="sxs-lookup"><span data-stu-id="525b9-194">Specifying Files to Be Excluded</span></span>

<span data-ttu-id="525b9-195">Cada escritor puede especificar una lista de especificaciones de archivo que especifican los archivos que el solicitante debe excluir de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="525b9-195">Every writer can specify a list of file specifications that specify files for the requester to exclude from backup.</span></span> <span data-ttu-id="525b9-196">Puede agregar estas especificaciones de archivo al archivo de configuración del escritor de pruebas agregando subelementos ExcludeFile al elemento raíz TestWriter.</span><span class="sxs-lookup"><span data-stu-id="525b9-196">You can add these file specifications to the Test Writer configuration file by adding ExcludeFile subelements to the TestWriter root element.</span></span>

<span data-ttu-id="525b9-197">Este es un ejemplo de un subelemento ExcludeFile que excluye todos los archivos del directorio C: \\ files que coinciden con C: \\ temp \* . \* .</span><span class="sxs-lookup"><span data-stu-id="525b9-197">Here is an example of an ExcludeFile subelement that excludes all files in the C:\\files directory that match C:\\temp\*.\*.</span></span>

``` syntax
    <ExcludeFile path="c:\files" 
                 filespec="temp*.*" 
                 recursive="no"/>
```

## <a name="backing-up-spit-writers"></a><span data-ttu-id="525b9-198">Realizar copias de seguridad de los escritores de</span><span class="sxs-lookup"><span data-stu-id="525b9-198">Backing Up Spit Writers</span></span>

<span data-ttu-id="525b9-199">Muchos escritores actúan como "redactores".</span><span class="sxs-lookup"><span data-stu-id="525b9-199">Many writers act as "spit writers."</span></span> <span data-ttu-id="525b9-200">Un redactor de asignaciones crea archivos intermedios, o "genera archivos", basándose en un conjunto original de archivos, y coloca los archivos de asignación en una ubicación alternativa en el momento de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="525b9-200">A spit writer creates intermediate files, or "spit files," based on an original set of files, and puts the spit files in an alternate location at backup time.</span></span> <span data-ttu-id="525b9-201">El escritor usa el método [**IVssWMFiledesc:: GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) para notificar al solicitante que debe hacer copia de seguridad de estos archivos desde la ubicación alternativa.</span><span class="sxs-lookup"><span data-stu-id="525b9-201">The writer uses the [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) method to notify the requester that it should back these files up from the alternate location.</span></span> <span data-ttu-id="525b9-202">Sin embargo, estos archivos se deben restaurar en la ubicación activa de los archivos originales.</span><span class="sxs-lookup"><span data-stu-id="525b9-202">However, these files should still be restored to the active location of the original files.</span></span> <span data-ttu-id="525b9-203">El escritor de pruebas se puede configurar para que actúe como un escritor de la forma de una especificación de archivo determinada.</span><span class="sxs-lookup"><span data-stu-id="525b9-203">The Test Writer can be configured to act as a spit writer for a particular file specification.</span></span>

<span data-ttu-id="525b9-204">El siguiente elemento ComponentFile contiene un atributo alternatePath:</span><span class="sxs-lookup"><span data-stu-id="525b9-204">The following ComponentFile element contains an alternatePath attribute:</span></span>

``` syntax
    <ComponentFile path="c:\files"
                   filespec="*.txt"
                   recursive="no"
                   alternatePath="c:\files\spit" />
```

<span data-ttu-id="525b9-205">En este ejemplo se configura el escritor de pruebas para copiar todos los archivos que coincidan con c: \\ files \\ \* . txt en el directorio c: \\ files alsign \\ inmediatamente antes de que se cree la instantánea de volumen.</span><span class="sxs-lookup"><span data-stu-id="525b9-205">This example configures the Test Writer to copy all files matching c:\\files\\\*.txt to the c:\\files\\spit directory immediately before the volume shadow copy is created.</span></span> <span data-ttu-id="525b9-206">El solicitante debe hacer una copia de seguridad de los archivos del \\ directorio c: files alliberar \\ .</span><span class="sxs-lookup"><span data-stu-id="525b9-206">The requester must back up the files from the c:\\files\\spit directory.</span></span> <span data-ttu-id="525b9-207">Si el escritor de pruebas está configurado para eliminar archivos, elimina los archivos originales antes de crear la instantánea, por lo que no aparecen en el directorio c: \\ files del volumen de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="525b9-207">If the Test Writer is configured to delete files, it deletes the original files before the shadow copy is created, so they do not appear in the c:\\files directory on the shadow copy volume.</span></span> <span data-ttu-id="525b9-208">En este caso, los archivos de c: \\ los archivos \\ se eliminan después de crear la instantánea, por lo que se les debe hacer una copia de seguridad desde el directorio c: \\ files \\ en el volumen de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="525b9-208">In this case, the files in c:\\files\\spit are deleted after the shadow copy is created, so they must be backed up from the c:\\files\\spit directory on the shadow copy volume.</span></span>

## <a name="reporting-component-dependencies"></a><span data-ttu-id="525b9-209">Dependencias de componentes de informes</span><span class="sxs-lookup"><span data-stu-id="525b9-209">Reporting Component Dependencies</span></span>

<span data-ttu-id="525b9-210">Los escritores pueden especificar una dependencia entre un componente local y un componente que existe en otro escritor.</span><span class="sxs-lookup"><span data-stu-id="525b9-210">Writers can specify a dependency between a local component and a component that exists in another writer.</span></span> <span data-ttu-id="525b9-211">Estas dependencias se envían al solicitante mediante [**IVssWMComponent:: GetDependency**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdependency).</span><span class="sxs-lookup"><span data-stu-id="525b9-211">These dependencies are reported to the requester using [**IVssWMComponent::GetDependency**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdependency).</span></span> <span data-ttu-id="525b9-212">El escritor de pruebas puede configurarse para notificar estas dependencias mediante la adición de uno o varios subelementos de dependencia al elemento de componente.</span><span class="sxs-lookup"><span data-stu-id="525b9-212">The Test Writer can be configured to report these dependencies by adding one or more Dependency subelements to the Component element.</span></span>

<span data-ttu-id="525b9-213">El siguiente elemento de componente contiene un subelemento de dependencia:</span><span class="sxs-lookup"><span data-stu-id="525b9-213">The following Component element contains a Dependency subelement:</span></span>

``` syntax
    <Component componentType="filegroup"
               logicalPath=""
               componentName="WriterComponent"
               selectable="yes">
         <Dependency writerId="<GUID of target writer>"
                     logicalPath="ComponentPath"
                     componentName="Writer2Component" />
    </Component>
```

<span data-ttu-id="525b9-214">La dependencia se especifica como atributos del elemento de dependencia.</span><span class="sxs-lookup"><span data-stu-id="525b9-214">The dependency is specified as attributes of the Dependency element.</span></span> <span data-ttu-id="525b9-215">writerId es el identificador de clase del escritor que contiene el destino de la dependencia, logicalPath es la ruta de acceso lógica al componente en ese escritor y componentName es el nombre del componente.</span><span class="sxs-lookup"><span data-stu-id="525b9-215">writerId is the class id of the writer containing the target of the dependency, logicalPath is the logical path to the component in that writer, and componentName is the name of the component.</span></span> <span data-ttu-id="525b9-216">En este caso, si el solicitante realiza una copia de seguridad de "WriterComponent" en el escritor actual, también debe hacer una copia de seguridad del componente "ComponentPath \\ Writer2Component" en el escritor de destino.</span><span class="sxs-lookup"><span data-stu-id="525b9-216">In this case, if the requester is backing up "WriterComponent" in the current writer, it should also back up the component "ComponentPath\\Writer2Component" in the target writer.</span></span>

> [!Note]  
> <span data-ttu-id="525b9-217">El escritor de pruebas no realiza ninguna comprobación para asegurarse de que se respetan las dependencias.</span><span class="sxs-lookup"><span data-stu-id="525b9-217">The Test Writer performs no checking to ensure dependencies are honored.</span></span>

 

## <a name="failing-events"></a><span data-ttu-id="525b9-218">Eventos con error</span><span class="sxs-lookup"><span data-stu-id="525b9-218">Failing Events</span></span>

<span data-ttu-id="525b9-219">El escritor de pruebas se puede configurar para que se produzca un error en cualquiera de los eventos normales que recibe un escritor.</span><span class="sxs-lookup"><span data-stu-id="525b9-219">The Test Writer can be configured to fail any of the normal events that a writer receives.</span></span> <span data-ttu-id="525b9-220">Estos eventos son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="525b9-220">These events are as follows:</span></span>



| <span data-ttu-id="525b9-221">Evento</span><span class="sxs-lookup"><span data-stu-id="525b9-221">Event</span></span>                                                                                                                                    | <span data-ttu-id="525b9-222">Descripción</span><span class="sxs-lookup"><span data-stu-id="525b9-222">Description</span></span>                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="525b9-223"><span id="Identify"></span><span id="identify"></span><span id="IDENTIFY"></span>Identificar</span><span class="sxs-lookup"><span data-stu-id="525b9-223"><span id="Identify"></span><span id="identify"></span><span id="IDENTIFY"></span>Identify</span></span><br/>                                     | <span data-ttu-id="525b9-224">Se recibe como respuesta a una llamada a [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) .</span><span class="sxs-lookup"><span data-stu-id="525b9-224">Received as a response to a [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) call.</span></span> <span data-ttu-id="525b9-225">Un error aquí hará que no se notifique al escritor.</span><span class="sxs-lookup"><span data-stu-id="525b9-225">Failure here will cause the writer to not be reported.</span></span><br/>                                                                 |
| <span data-ttu-id="525b9-226"><span id="PrepareForBackup"></span><span id="prepareforbackup"></span><span id="PREPAREFORBACKUP"></span>PrepareForBackup</span><span class="sxs-lookup"><span data-stu-id="525b9-226"><span id="PrepareForBackup"></span><span id="prepareforbackup"></span><span id="PREPAREFORBACKUP"></span>PrepareForBackup</span></span><br/>     | <span data-ttu-id="525b9-227">Se recibe como respuesta al solicitante que llama a [**IVssBackupComponents::P repareforbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup).</span><span class="sxs-lookup"><span data-stu-id="525b9-227">Received as a response to the requester calling [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup).</span></span><br/>                                                                                                                 |
| <span data-ttu-id="525b9-228"><span id="PrepareForSnapsot"></span><span id="prepareforsnapsot"></span><span id="PREPAREFORSNAPSOT"></span>PrepareForSnapsot</span><span class="sxs-lookup"><span data-stu-id="525b9-228"><span id="PrepareForSnapsot"></span><span id="prepareforsnapsot"></span><span id="PREPAREFORSNAPSOT"></span>PrepareForSnapsot</span></span><br/> | <span data-ttu-id="525b9-229">Se recibe cuando el solicitante llama a [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), pero antes de crear la instantánea.</span><span class="sxs-lookup"><span data-stu-id="525b9-229">Received when the requester calls [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), but before the shadow copy is created.</span></span><br/>                                                                                              |
| <span data-ttu-id="525b9-230"><span id="Freeze"></span><span id="freeze"></span><span id="FREEZE"></span>Inmovilice</span><span class="sxs-lookup"><span data-stu-id="525b9-230"><span id="Freeze"></span><span id="freeze"></span><span id="FREEZE"></span>Freeze</span></span><br/>                                             | <span data-ttu-id="525b9-231">Se recibe inmediatamente después de [*PrepareForSnapshot*](vssgloss-p.md), pero aún antes de que se cree la instantánea.</span><span class="sxs-lookup"><span data-stu-id="525b9-231">Received immediately after [*PrepareForSnapshot*](vssgloss-p.md), but still before the shadow copy is created.</span></span><br/>                                                                                                      |
| <span data-ttu-id="525b9-232"><span id="Thaw"></span><span id="thaw"></span><span id="THAW"></span>Moviliza</span><span class="sxs-lookup"><span data-stu-id="525b9-232"><span id="Thaw"></span><span id="thaw"></span><span id="THAW"></span>Thaw</span></span><br/>                                                     | <span data-ttu-id="525b9-233">Se recibe una vez finalizada la creación de la instantánea.</span><span class="sxs-lookup"><span data-stu-id="525b9-233">Received after the shadow copy creation is finished.</span></span><br/>                                                                                                                                                                                                     |
| <span data-ttu-id="525b9-234"><span id="PostSnapshot"></span><span id="postsnapshot"></span><span id="POSTSNAPSHOT"></span>Instantánea</span><span class="sxs-lookup"><span data-stu-id="525b9-234"><span id="PostSnapshot"></span><span id="postsnapshot"></span><span id="POSTSNAPSHOT"></span>PostSnapshot</span></span><br/>                     | <span data-ttu-id="525b9-235">Recibido después de que se complete la reanudación, pero antes de que se complete [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) .</span><span class="sxs-lookup"><span data-stu-id="525b9-235">Received after Thaw completes, but before [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) completes.</span></span><br/>                                                                                                                   |
| <span data-ttu-id="525b9-236"><span id="Abort"></span><span id="abort"></span><span id="ABORT"></span>Aborta</span><span class="sxs-lookup"><span data-stu-id="525b9-236"><span id="Abort"></span><span id="abort"></span><span id="ABORT"></span>Abort</span></span><br/>                                                 | <span data-ttu-id="525b9-237">Se recibe si transcurre demasiado tiempo entre [*Freeze*](vssgloss-f.md) e [*reanudación*](vssgloss-t.md) o si el solicitante llama a [**IVssBackupComponents:: AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup).</span><span class="sxs-lookup"><span data-stu-id="525b9-237">Received if too much time elapses between [*Freeze*](vssgloss-f.md) and [*Thaw*](vssgloss-t.md) or if the requester calls [**IVssBackupComponents::AbortBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-abortbackup).</span></span><br/> |
| <span data-ttu-id="525b9-238"><span id="BackupComplete"></span><span id="backupcomplete"></span><span id="BACKUPCOMPLETE"></span>BackupComplete</span><span class="sxs-lookup"><span data-stu-id="525b9-238"><span id="BackupComplete"></span><span id="backupcomplete"></span><span id="BACKUPCOMPLETE"></span>BackupComplete</span></span><br/>             | <span data-ttu-id="525b9-239">Se recibe cuando se cierra el solicitante.</span><span class="sxs-lookup"><span data-stu-id="525b9-239">Received when the requester exits.</span></span> <span data-ttu-id="525b9-240">Los errores aquí nunca se inscribirán.</span><span class="sxs-lookup"><span data-stu-id="525b9-240">Failures here will never be reported.</span></span><br/>                                                                                                                                                                                 |
| <span data-ttu-id="525b9-241"><span id="PreRestore"></span><span id="prerestore"></span><span id="PRERESTORE"></span>Prerestauración</span><span class="sxs-lookup"><span data-stu-id="525b9-241"><span id="PreRestore"></span><span id="prerestore"></span><span id="PRERESTORE"></span>PreRestore</span></span><br/>                             | <span data-ttu-id="525b9-242">Se recibe cuando el solicitante llama a [**IVssBackupComponents::P**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore)volver a restaurar.</span><span class="sxs-lookup"><span data-stu-id="525b9-242">Received when the requester calls [**IVssBackupComponents::PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore).</span></span><br/>                                                                                                                                           |
| <span data-ttu-id="525b9-243"><span id="PostRestore"></span><span id="postrestore"></span><span id="POSTRESTORE"></span>Postrestore</span><span class="sxs-lookup"><span data-stu-id="525b9-243"><span id="PostRestore"></span><span id="postrestore"></span><span id="POSTRESTORE"></span>PostRestore</span></span><br/>                         | <span data-ttu-id="525b9-244">Se recibe cuando el solicitante llama a [**IVssBackupComponents::P ostrestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-postrestore).</span><span class="sxs-lookup"><span data-stu-id="525b9-244">Received when the requester calls [**IVssBackupComponents::PostRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-postrestore).</span></span><br/>                                                                                                                                         |



 

<span data-ttu-id="525b9-245">Estos errores se configuran agregando uno o más subelementos FailEvent al elemento raíz TestWriter.</span><span class="sxs-lookup"><span data-stu-id="525b9-245">These failures are configured by adding one or more FailEvent subelements to the TestWriter root element.</span></span> <span data-ttu-id="525b9-246">Hay dos clases de errores que se pueden establecer: reintentos y no reintentables.</span><span class="sxs-lookup"><span data-stu-id="525b9-246">There are two classes of failures that can be set: retryable and non-retryable.</span></span> <span data-ttu-id="525b9-247">Los errores con posibilidad de reintento son errores que pueden desaparecer si se vuelve a intentar todo el proceso de copia de seguridad, aunque es improbable que los errores no reintentables desaparezcan.</span><span class="sxs-lookup"><span data-stu-id="525b9-247">Retryable errors are errors that may go away if the entire backup process is retried, while non-retryable errors are unlikely to disappear.</span></span> <span data-ttu-id="525b9-248">El tipo de error para el evento se elige en función del atributo de reintento.</span><span class="sxs-lookup"><span data-stu-id="525b9-248">The failure type for the event is chosen based on the retryable attribute.</span></span>

<span data-ttu-id="525b9-249">A continuación se muestra un ejemplo de un error básico no reintentable:</span><span class="sxs-lookup"><span data-stu-id="525b9-249">Here is an example of a basic non-retryable failure:</span></span>

``` syntax
    <FailEvent writerEvent="Freeze"
               retryable="no" />
```

<span data-ttu-id="525b9-250">En este ejemplo se producirá un error en el escritor durante el evento [*Freeze*](vssgloss-f.md) .</span><span class="sxs-lookup"><span data-stu-id="525b9-250">This example will cause the writer to fail during the [*Freeze*](vssgloss-f.md) event.</span></span> <span data-ttu-id="525b9-251">[**IVssBackupComponents:: GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) informará de que el error del escritor es de VSS \_ E \_ WRITERERROR no \_ reintentable.</span><span class="sxs-lookup"><span data-stu-id="525b9-251">[**IVssBackupComponents::GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) will report the writer failure to be VSS\_E\_WRITERERROR\_NONRETRYABLE.</span></span>

<span data-ttu-id="525b9-252">A continuación se muestra un ejemplo de un error de reintento básico:</span><span class="sxs-lookup"><span data-stu-id="525b9-252">Here is an example of a basic retryable error:</span></span>

``` syntax
    <FailEvent writerEvent="Freeze"
               retryable="yes"
               numFailures="2"/>
```

<span data-ttu-id="525b9-253">En este ejemplo se producirá un error en el escritor las dos primeras veces que recibe un evento [*Freeze*](vssgloss-f.md) .</span><span class="sxs-lookup"><span data-stu-id="525b9-253">This example will cause the writer to fail the first two times it receives a [*Freeze*](vssgloss-f.md) event.</span></span> <span data-ttu-id="525b9-254">Después de las dos primeras veces, el escritor siempre se realizará correctamente.</span><span class="sxs-lookup"><span data-stu-id="525b9-254">After the first two times, the writer will always succeed.</span></span> <span data-ttu-id="525b9-255">El error del escritor informado a través de [**GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) será un código de error de reintento aleatorio.</span><span class="sxs-lookup"><span data-stu-id="525b9-255">The writer failure reported through [**GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) will be a random retryable error code.</span></span>

## <a name="declaring-supported-backup-types"></a><span data-ttu-id="525b9-256">Declarar tipos de copia de seguridad admitidos</span><span class="sxs-lookup"><span data-stu-id="525b9-256">Declaring Supported Backup Types</span></span>

<span data-ttu-id="525b9-257">Los escritores comunican qué tipos de copia de seguridad se admiten a través de la llamada a [**IVssExamineWriterMetadata:: GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema)del solicitante.</span><span class="sxs-lookup"><span data-stu-id="525b9-257">Writers communicate what backup types are supported through the requester's calling [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span> <span data-ttu-id="525b9-258">El elemento raíz TestWriter contiene atributos para cada tipo de copia de seguridad para indicar la compatibilidad.</span><span class="sxs-lookup"><span data-stu-id="525b9-258">The TestWriter root element contains attributes for each backup type to indicate support.</span></span> <span data-ttu-id="525b9-259">Estos atributos son supportsCopy, supportsDifferential, supportsIncremental y supportsLog.</span><span class="sxs-lookup"><span data-stu-id="525b9-259">These attributes are supportsCopy, supportsDifferential, supportsIncremental, and supportsLog.</span></span> <span data-ttu-id="525b9-260">Para indicar la compatibilidad con un tipo de copia de seguridad determinado, establezca el atributo correspondiente en "sí".</span><span class="sxs-lookup"><span data-stu-id="525b9-260">To indicate support for a particular backup type, set the corresponding attribute to "yes".</span></span>

<span data-ttu-id="525b9-261">Si el solicitante establece el tipo de copia de seguridad en un tipo de copia de seguridad que no es compatible con el escritor, el escritor notará este hecho durante [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup), pero de otro modo funcionará correctamente.</span><span class="sxs-lookup"><span data-stu-id="525b9-261">If the requester sets the backup type to a backup type that is not supported by the writer, the writer will note this fact during [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup), but otherwise work correctly.</span></span>

## <a name="indicating-the-file-backup-type"></a><span data-ttu-id="525b9-262">Que indica el tipo de copia de seguridad de archivos</span><span class="sxs-lookup"><span data-stu-id="525b9-262">Indicating the File Backup Type</span></span>

<span data-ttu-id="525b9-263">El método [**IVssWMFiledesc:: GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask) devuelve una máscara de archivos al solicitante que indica cómo se debe realizar la copia de seguridad de un archivo.</span><span class="sxs-lookup"><span data-stu-id="525b9-263">The [**IVssWMFiledesc::GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask) method returns a bitmask to the requester indicating how a file should be backed up.</span></span> <span data-ttu-id="525b9-264">Esto indicará si un archivo es necesario o no durante determinados tipos de copia de seguridad y si se requiere una instantánea durante determinados tipos de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="525b9-264">This will indicate whether a file is required or not required during specific types of backup, and also whether a shadow copy is required during specific types of backup.</span></span> <span data-ttu-id="525b9-265">Los tipos de copia de seguridad de esta máscara de caracteres se explican con mayor longitud en el [rol solicitante de documentos en la copia de seguridad de almacenes complejos](requestor-role-in-backing-up-complex-stores.md).</span><span class="sxs-lookup"><span data-stu-id="525b9-265">The backup types in this bitmask are explained at greater length in the document [Requester Role in Backing Up Complex Stores](requestor-role-in-backing-up-complex-stores.md).</span></span>

<span data-ttu-id="525b9-266">En el escritor de pruebas, los elementos de esta máscara de máscara se especifican mediante el establecimiento de atributos en cada elemento ComponentFile.</span><span class="sxs-lookup"><span data-stu-id="525b9-266">In the Test Writer, the elements of this bitmask are specified by setting attributes in each ComponentFile element.</span></span> <span data-ttu-id="525b9-267">Los atributos fullBackupRequired, diffBackupRequired, incBackupRequired y logBackupRequired especifican Cuándo es necesario hacer una copia de seguridad de un archivo.</span><span class="sxs-lookup"><span data-stu-id="525b9-267">The fullBackupRequired, diffBackupRequired, incBackupRequired, and logBackupRequired attributes specify when a file needs to be backed up.</span></span> <span data-ttu-id="525b9-268">Los atributos fullSnapshotRequired, diffSnapshotRequired, incSnapshotRequired y logSnapshotRequired especifican Cuándo se debe realizar una copia de seguridad de un archivo desde una instantánea de un volumen (y nunca desde el volumen original).</span><span class="sxs-lookup"><span data-stu-id="525b9-268">The fullSnapshotRequired, diffSnapshotRequired, incSnapshotRequired, and logSnapshotRequired attributes specify when a file must be backed up from a shadow copy of a volume (and never from the original volume).</span></span> <span data-ttu-id="525b9-269">El valor predeterminado para todos estos valores es "sí", lo que indica que siempre se debe hacer una copia de seguridad de un archivo y se debe realizar una copia de seguridad de una instantánea de un volumen.</span><span class="sxs-lookup"><span data-stu-id="525b9-269">The default for all of these values is "yes", indicating that a file must always be backed up and must be backed up from a shadow copy of a volume.</span></span>

## <a name="adding-partial-files"></a><span data-ttu-id="525b9-270">Agregar archivos parciales</span><span class="sxs-lookup"><span data-stu-id="525b9-270">Adding Partial Files</span></span>

<span data-ttu-id="525b9-271">Durante el procesamiento de [**DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), un escritor tiene la oportunidad de agregar archivos parciales a cada componente.</span><span class="sxs-lookup"><span data-stu-id="525b9-271">During the processing of [**DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), a writer has a chance to add partial files to each component.</span></span> <span data-ttu-id="525b9-272">Estos archivos parciales se muestran mediante [**IVssComponent:: GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span><span class="sxs-lookup"><span data-stu-id="525b9-272">These partial files are reported using [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span></span> <span data-ttu-id="525b9-273">El escritor de pruebas se puede configurar para agregar archivos parciales mediante la especificación de subelementos PartialFile en un elemento componente.</span><span class="sxs-lookup"><span data-stu-id="525b9-273">The Test Writer can be configured to add partial files by specifying PartialFile subelements in a Component element.</span></span>

<span data-ttu-id="525b9-274">A continuación se muestra un ejemplo de un elemento de componente que tiene dos subelementos PartialFile:</span><span class="sxs-lookup"><span data-stu-id="525b9-274">Here is an example of a Component element that has two PartialFile subelements:</span></span>

``` syntax
    <Component componentType="filegroup"
               logicalPath=""
               componentName="WriterComponent"
               selectable="yes">
        <ComponentFile path="c:\files"
                       filespec="*.txt"
                       recursive="no"/>
        <PartialFile path="c:\files"
                     filespec="partial.txt"
                     ranges="0:5,100:20" />
        <PartialFile path="c:\files2"
                     filespec="partial.txt"
                     ranges="0:5,100:20" />
    </Component>
```

<span data-ttu-id="525b9-275">Solo se deben especificar de esta manera los archivos parciales que coincidan parcialmente con un ComponentFile existente (como en el primer archivo parcial del ejemplo) o nuevos archivos parciales que estén en el mismo volumen que un ComponentFile existente (como en el segundo archivo parcial).</span><span class="sxs-lookup"><span data-stu-id="525b9-275">Only partial files that partially match an existing ComponentFile (as in the first partial file in the example) or new partial files that are on the same volume as an existing ComponentFile (as in the second partial file) should be specified this way.</span></span> <span data-ttu-id="525b9-276">Para este componente, el solicitante debe realizar una copia de seguridad completa de todos los archivos que coincidan con c: \\ files \\ \* . txt, excepto partial.txt.</span><span class="sxs-lookup"><span data-stu-id="525b9-276">For this component, the requester must fully back up all files matching c:\\files\\\*.txt except for partial.txt.</span></span> <span data-ttu-id="525b9-277">Después, el solicitante debe hacer una copia de seguridad de los intervalos especificados (donde un intervalo es un desplazamiento seguido de una longitud) para los archivos c: \\ files \\partial.txt y c: \\ files2 \\partial.txt.</span><span class="sxs-lookup"><span data-stu-id="525b9-277">The requester must then back up the specified ranges (where a range is an offset followed by a length) for the files c:\\files\\partial.txt and c:\\files2\\partial.txt.</span></span>

<span data-ttu-id="525b9-278">Si el escritor está configurado para comprobar las restauraciones de archivos, solo se comprobarán los intervalos de copia de seguridad del archivo parcial en el momento de la restauración.</span><span class="sxs-lookup"><span data-stu-id="525b9-278">If the writer is configured to check file restores, only the backed-up ranges of the partial file will be checked at restore time.</span></span> <span data-ttu-id="525b9-279">Las modificaciones realizadas en otras partes del archivo pasarán desapercibidas.</span><span class="sxs-lookup"><span data-stu-id="525b9-279">Modifications to other portions of the file will go unnoticed.</span></span> <span data-ttu-id="525b9-280">Si se establece el atributo deletePartialFiles del elemento raíz TestWriter, los archivos parciales se eliminan del volumen original inmediatamente después de crear la instantánea.</span><span class="sxs-lookup"><span data-stu-id="525b9-280">If the deletePartialFiles attribute of the TestWriter root element is set, the partial files are deleted from the original volume immediately after the shadow copy is created.</span></span>

## <a name="adding-differenced-files"></a><span data-ttu-id="525b9-281">Agregar archivos diferenciados</span><span class="sxs-lookup"><span data-stu-id="525b9-281">Adding Differenced Files</span></span>

<span data-ttu-id="525b9-282">Durante el procesamiento de [**DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), un escritor puede Agregar archivos diferenciados a cada componente.</span><span class="sxs-lookup"><span data-stu-id="525b9-282">During the processing of [**DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), a writer can add differenced files to each component.</span></span> <span data-ttu-id="525b9-283">Estos archivos diferenciados se muestran mediante [**IVssComponent:: GetDifferencedFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile).</span><span class="sxs-lookup"><span data-stu-id="525b9-283">These differenced files are reported using [**IVssComponent::GetDifferencedFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile).</span></span> <span data-ttu-id="525b9-284">El escritor de pruebas se puede configurar para agregar archivos diferenciados mediante la especificación de subelementos DifferencedFile en un elemento componente.</span><span class="sxs-lookup"><span data-stu-id="525b9-284">The Test Writer can be configured to add differenced files by specifying DifferencedFile subelements in a Component element.</span></span>

<span data-ttu-id="525b9-285">A continuación se muestra un ejemplo de un elemento de componente que tiene dos subelementos DifferencedFile:</span><span class="sxs-lookup"><span data-stu-id="525b9-285">Here is an example of a Component element that has two DifferencedFile subelements:</span></span>

``` syntax
    <Component componentType="filegroup"
               logicalPath=""
               componentName="WriterComponent"
               selectable="yes">
        <ComponentFile path="c:\files"
                       filespec="*.txt"
                       recursive="no"/>
        <DifferencedFile path="c:\files"
                         filespec="*.txt"
                         year="2007"
                         month="1"
                         day="22"
                         hour="12"
                         minute="44"
                         second="17" />
        <DifferencedFile path="c:\files2"
                         filespec="*.txt"
                         year="2007"
                         month="1"
                         day="22"
                         hour="12"
                         minute="44"
                         second="17" />
    </Component>
```

<span data-ttu-id="525b9-286">A diferencia de los archivos parciales, los archivos diferenciados nunca deben coincidir parcialmente con una especificación ComponentFile.</span><span class="sxs-lookup"><span data-stu-id="525b9-286">Unlike partial files, differenced files should never partially match a ComponentFile specification.</span></span> <span data-ttu-id="525b9-287">La especificación de archivo en un elemento DifferencedFile debe coincidir exactamente con un ComponentFile (como en el primer archivo diferenciado en el ejemplo) o no debe coincidir en absoluto, sino en un volumen al que se hace referencia en un ComponentFile (como en el segundo archivo diferenciado).</span><span class="sxs-lookup"><span data-stu-id="525b9-287">The file specification in a DifferencedFile element should either exactly match a ComponentFile (as in the first differenced file in the example) or it should not match it at all, but be on a volume that is referenced in a ComponentFile (as in the second differenced file).</span></span> <span data-ttu-id="525b9-288">Los valores de fecha y hora deben ser relativos a la zona horaria local, pero se convertirán a GMT antes de que se notifique al solicitante.</span><span class="sxs-lookup"><span data-stu-id="525b9-288">The date and time values should be relative to the local time zone, but they will be converted to GMT before being reported to the requester.</span></span> <span data-ttu-id="525b9-289">En el ejemplo, solo se realizarán copias de seguridad de los archivos que coincidan con c: \\ files \\ \* . txt o c: \\ files2 \\ \* . txt que se han modificado desde 1/22/2003:12:44:17.</span><span class="sxs-lookup"><span data-stu-id="525b9-289">In the example, only files matching c:\\files\\\*.txt or c:\\files2\\\*.txt that have been modified since 1/22/2003:12:44:17 will be backed up.</span></span>

<span data-ttu-id="525b9-290">Si el escritor de pruebas está configurado para comprobar las restauraciones de archivos, solo se comprobará la restauración de los archivos modificados.</span><span class="sxs-lookup"><span data-stu-id="525b9-290">If the Test Writer is configured to check file restores, only the modified files will be checked for restore.</span></span> <span data-ttu-id="525b9-291">Si se establece el atributo deleteDifferencedFiles del elemento raíz TestWriter, los archivos diferenciados se eliminan del volumen original inmediatamente después de crear la instantánea.</span><span class="sxs-lookup"><span data-stu-id="525b9-291">If the deleteDifferencedFiles attribute of the TestWriter root element is set, the differenced files are deleted from the original volume immediately after the shadow copy is created.</span></span>

## <a name="new-targets"></a><span data-ttu-id="525b9-292">Nuevos destinos</span><span class="sxs-lookup"><span data-stu-id="525b9-292">New Targets</span></span>

<span data-ttu-id="525b9-293">Algunos escritores permiten al solicitante informarles de que se ha elegido una nueva ubicación para restaurar determinados archivos en.</span><span class="sxs-lookup"><span data-stu-id="525b9-293">Certain writers allow the requester to inform them that a new location has been chosen to restore certain files to.</span></span> <span data-ttu-id="525b9-294">El escritor indica que admite este modo como parte de la máscara de la máscara devuelta por [**IVssExamineWriterMetadata:: GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span><span class="sxs-lookup"><span data-stu-id="525b9-294">The writer indicates that it supports this mode as part of the bitmask returned by [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span> <span data-ttu-id="525b9-295">De forma predeterminada, el escritor de pruebas siempre admite nuevos destinos.</span><span class="sxs-lookup"><span data-stu-id="525b9-295">By default, the Test Writer always supports new targets.</span></span> <span data-ttu-id="525b9-296">Esta compatibilidad se puede deshabilitar si se establece el atributo supportsNewTarget del elemento raíz TestWriter en "no".</span><span class="sxs-lookup"><span data-stu-id="525b9-296">This support can be disabled by setting the supportsNewTarget attribute in the TestWriter root element to "no".</span></span>

<span data-ttu-id="525b9-297">Si un escritor admite nuevos destinos, el solicitante puede informar al escritor de nuevos destinos llamando a [**IVssBackupComponents:: AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget).</span><span class="sxs-lookup"><span data-stu-id="525b9-297">If a writer supports new targets, the requester can inform the writer of new targets by calling [**IVssBackupComponents::AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget).</span></span> <span data-ttu-id="525b9-298">El escritor comprobará entonces la nueva ubicación de destino para comprobar la restauración en lugar de la ubicación original.</span><span class="sxs-lookup"><span data-stu-id="525b9-298">The writer will then check the new target location to verify restore rather than the original location.</span></span>

## <a name="more-information"></a><span data-ttu-id="525b9-299">Más información</span><span class="sxs-lookup"><span data-stu-id="525b9-299">More Information</span></span>

<span data-ttu-id="525b9-300">El escritor de pruebas admite más opciones de configuración que no se describen aquí.</span><span class="sxs-lookup"><span data-stu-id="525b9-300">The Test Writer supports more configuration options that are not described here.</span></span> <span data-ttu-id="525b9-301">El esquema completo de todas las capacidades de configuración del escritor de pruebas se especifica en swriter.xml `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\x64\vsstools` (para Windows de 64 bits) y `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\vsstools` (para windows de 32 bits).</span><span class="sxs-lookup"><span data-stu-id="525b9-301">The full schema for all of the configuration capabilities of the Test Writer is specified in swriter.xml in `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\x64\vsstools` (for 64-bit Windows) and `%ProgramFiles%\Microsoft SDKs\Windows\v7.0\bin\vsstools` (for 32-bit Windows).</span></span> <span data-ttu-id="525b9-302">Este archivo contiene un esquema XML que describe completamente todos los elementos y atributos que componen un archivo de configuración.</span><span class="sxs-lookup"><span data-stu-id="525b9-302">This file contains an XML schema that completely describes all of the elements and attributes that make up a configuration file.</span></span> <span data-ttu-id="525b9-303">Cada elemento y cada atributo de este archivo se comentan con una descripción que documenta el uso del atributo o del elemento.</span><span class="sxs-lookup"><span data-stu-id="525b9-303">Each element and each attribute in this file is commented with a description that documents that element's or attribute's use.</span></span>

 

 




