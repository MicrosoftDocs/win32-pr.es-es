---
description: El servicio de ordenación de subprocesos controla la ejecución de uno o más subprocesos de cliente. Garantiza que cada subproceso de cliente se ejecuta una vez durante el período especificado y en el orden relativo.
ms.assetid: 5c37873a-ced4-447e-a6e1-55cfa8ab24b4
title: Servicio de ordenación de subprocesos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 72b3cd12b26124b47d506585425388a4542a70df
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105677825"
---
# <a name="thread-ordering-service"></a><span data-ttu-id="966a3-104">Servicio de ordenación de subprocesos</span><span class="sxs-lookup"><span data-stu-id="966a3-104">Thread Ordering Service</span></span>

<span data-ttu-id="966a3-105">El *servicio de ordenación de subprocesos* controla la ejecución de uno o más subprocesos de cliente.</span><span class="sxs-lookup"><span data-stu-id="966a3-105">The *thread ordering service* controls the execution of one or more client threads.</span></span> <span data-ttu-id="966a3-106">Garantiza que cada subproceso de cliente se ejecuta una vez durante el período especificado y en el orden relativo.</span><span class="sxs-lookup"><span data-stu-id="966a3-106">It ensures that each client thread runs once during the specified period and in relative order.</span></span>

<span data-ttu-id="966a3-107">**Windows Server 2003 y Windows XP:** El servicio de ordenación de subprocesos está disponible a partir de Windows Vista y Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="966a3-107">**Windows Server 2003 and Windows XP:** The thread ordering service is available starting with Windows Vista and Windows Server 2008.</span></span>

<span data-ttu-id="966a3-108">El servicio de ordenación de subprocesos está desactivado de forma predeterminada y el usuario debe iniciarlo.</span><span class="sxs-lookup"><span data-stu-id="966a3-108">The thread ordering service is off by default and must be started by the user.</span></span> <span data-ttu-id="966a3-109">Mientras se ejecuta el servicio de ordenación de subprocesos, se activa cada 5 segundos para comprobar si hay una nueva solicitud, incluso si el sistema está inactivo.</span><span class="sxs-lookup"><span data-stu-id="966a3-109">While the thread ordering service is running, it is activated every 5 seconds to check whether there is a new request, even if the system is idle.</span></span> <span data-ttu-id="966a3-110">Esto evita que el sistema se suspenda durante más de 5 segundos, lo que hace que el sistema consuma más energía.</span><span class="sxs-lookup"><span data-stu-id="966a3-110">This prevents the system from sleeping for longer than 5 seconds, causing the system to consume more power.</span></span> <span data-ttu-id="966a3-111">Si la eficacia energética es fundamental para la aplicación, es mejor no usar el servicio de ordenación de subprocesos y, en su lugar, permitir que el programador del sistema administre la ejecución de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="966a3-111">If energy efficiency is critical to the application, it is better not to use the thread ordering service and instead allow the system scheduler to manage execution of threads.</span></span>

<span data-ttu-id="966a3-112">Cada subproceso de cliente pertenece a un *grupo de pedidos de subprocesos*.</span><span class="sxs-lookup"><span data-stu-id="966a3-112">Each client thread belongs to a *thread ordering group*.</span></span> <span data-ttu-id="966a3-113">El *subproceso primario* crea uno o más grupos de ordenación de subprocesos mediante una llamada a la función [**AvRtCreateThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtcreatethreadorderinggroup) .</span><span class="sxs-lookup"><span data-stu-id="966a3-113">The *parent thread* creates one or more thread ordering groups by calling the [**AvRtCreateThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtcreatethreadorderinggroup) function.</span></span> <span data-ttu-id="966a3-114">El subproceso primario usa esta función para especificar el período del grupo de pedidos de subprocesos y un intervalo de tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="966a3-114">The parent thread uses this function to specify the period for the thread ordering group and a time-out interval.</span></span>

<span data-ttu-id="966a3-115">Los subprocesos de cliente adicionales llaman a la función [**AvRtJoinThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtjointhreadorderinggroup) para unirse a un grupo de pedidos de subprocesos existente.</span><span class="sxs-lookup"><span data-stu-id="966a3-115">Additional client threads call the [**AvRtJoinThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtjointhreadorderinggroup) function to join an existing thread ordering group.</span></span> <span data-ttu-id="966a3-116">Estos subprocesos indican si se trata de un predecesor o sucesor del subproceso primario en el orden de ejecución.</span><span class="sxs-lookup"><span data-stu-id="966a3-116">These threads indicate whether they are to be a predecessor or successor to the parent thread in the execution order.</span></span> <span data-ttu-id="966a3-117">Se espera que cada subproceso de cliente complete una determinada cantidad de procesamiento cada período.</span><span class="sxs-lookup"><span data-stu-id="966a3-117">Each client thread is expected to complete a certain amount of processing each period.</span></span> <span data-ttu-id="966a3-118">Todos los subprocesos del grupo deben completar su ejecución dentro del período más el intervalo de tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="966a3-118">All threads within the group should complete their execution within the period plus the time-out interval.</span></span>

<span data-ttu-id="966a3-119">Los subprocesos de un grupo de ordenación de subprocesos encierran su código de procesamiento dentro de un bucle controlado por la función [**AvRtWaitOnThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtwaitonthreadorderinggroup) .</span><span class="sxs-lookup"><span data-stu-id="966a3-119">The threads of a thread ordering group enclose their processing code within a loop that is controlled by the [**AvRtWaitOnThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtwaitonthreadorderinggroup) function.</span></span> <span data-ttu-id="966a3-120">En primer lugar, los subprocesos predecesores se ejecutan de uno en uno en el orden en que se unen al grupo, mientras que los subprocesos primario y sucesor se bloquean en sus llamadas a **AvRtWaitOnThreadOrderingGroup**.</span><span class="sxs-lookup"><span data-stu-id="966a3-120">First, the predecessor threads are executed one at a time in the order that they joined the group, while the parent and successor threads are blocked on their calls to **AvRtWaitOnThreadOrderingGroup**.</span></span> <span data-ttu-id="966a3-121">Cuando cada subproceso de la predecesora finaliza con su procesamiento, el control de la ejecución vuelve a la parte superior de su bucle de procesamiento y el subproceso llama a **AvRtWaitOnThreadOrderingGroup** de nuevo para bloquear hasta su siguiente activación.</span><span class="sxs-lookup"><span data-stu-id="966a3-121">When each predecessor thread is finished with its processing, control of execution returns to the top of its processing loop and the thread calls **AvRtWaitOnThreadOrderingGroup** again to block until its next turn.</span></span> <span data-ttu-id="966a3-122">Después de que todos los subprocesos predecesores hayan llamado a esta función, el servicio de ordenación de subprocesos puede programar el subproceso primario.</span><span class="sxs-lookup"><span data-stu-id="966a3-122">After all predecessor threads have called this function, the thread ordering service can schedule the parent thread.</span></span> <span data-ttu-id="966a3-123">Por último, cuando el subproceso primario finaliza su procesamiento y llama de nuevo a **AvRtWaitOnThreadOrderingGroup** , el servicio de ordenación de subprocesos puede programar los subprocesos sucesoros de uno en uno en el orden en que se unen al grupo.</span><span class="sxs-lookup"><span data-stu-id="966a3-123">Finally, when the parent thread finishes its processing and calls **AvRtWaitOnThreadOrderingGroup** again, the thread ordering service can schedule the successor threads one at a time in the order that they joined the group.</span></span> <span data-ttu-id="966a3-124">Si todos los subprocesos completan su ejecución antes de que finalice un período, todos los subprocesos esperan hasta que el resto del período transcurre antes de que se ejecute de nuevo.</span><span class="sxs-lookup"><span data-stu-id="966a3-124">If all threads complete their execution before a period ends, all threads wait until the remainder of the period elapses before any are executed again.</span></span>

<span data-ttu-id="966a3-125">Cuando el cliente ya no necesita ejecutarse como parte del grupo de pedidos de subprocesos, llama a la función [**AvRtLeaveThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtleavethreadorderinggroup) para quitarse del grupo.</span><span class="sxs-lookup"><span data-stu-id="966a3-125">When the client need no longer run as part of the thread ordering group, it calls the [**AvRtLeaveThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtleavethreadorderinggroup) function to remove itself from the group.</span></span> <span data-ttu-id="966a3-126">Tenga en cuenta que el subproceso primario no debe quitarse a sí mismo de un grupo de orden de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="966a3-126">Note that the parent thread should not remove itself from a thread ordering group.</span></span> <span data-ttu-id="966a3-127">Si un subproceso no completa su ejecución antes de que transcurra el período más el intervalo de tiempo de espera, se elimina del grupo.</span><span class="sxs-lookup"><span data-stu-id="966a3-127">If a thread does not complete its execution before the period plus the time-out interval elapses, then it is deleted from the group.</span></span>

<span data-ttu-id="966a3-128">El subproceso primario llama a la función [**AvRtDeleteThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtdeletethreadorderinggroup) para eliminar el grupo de orden de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="966a3-128">The parent thread calls the [**AvRtDeleteThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtdeletethreadorderinggroup) function to delete the thread ordering group.</span></span> <span data-ttu-id="966a3-129">El grupo de orden de subprocesos también se destruye si el subproceso primario no completa su ejecución antes de que transcurra el período más tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="966a3-129">The thread ordering group is also destroyed if the parent thread does not complete its execution before the period plus the time-out interval elapses.</span></span> <span data-ttu-id="966a3-130">Cuando se destruye el grupo de orden de subprocesos, se produce un error o el tiempo de espera de las llamadas a [**AvRtWaitOnThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtwaitonthreadorderinggroup) desde los subprocesos de ese grupo.</span><span class="sxs-lookup"><span data-stu-id="966a3-130">When the thread ordering group is destroyed, any calls to [**AvRtWaitOnThreadOrderingGroup**](/windows/desktop/api/Avrt/nf-avrt-avrtwaitonthreadorderinggroup) from threads of that group fail or time out.</span></span>

 

 



