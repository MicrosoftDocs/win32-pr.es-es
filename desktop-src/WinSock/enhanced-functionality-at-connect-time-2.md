---
description: Windows Sockets 2 ofrece un conjunto expandido de operaciones que pueden producirse con coincidencias para establecer una conexión de socket. A continuación se describen los requisitos del proveedor de servicios para implementar estas características.
ms.assetid: fbc7055e-ea25-4d17-8039-f0fef300353c
title: Funcionalidad mejorada en tiempo de conexión
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d33c6d7ee928fe7e97f535363e9e842285eef7fe
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104154287"
---
# <a name="enhanced-functionality-at-connect-time"></a><span data-ttu-id="ec1c0-104">Funcionalidad mejorada en tiempo de conexión</span><span class="sxs-lookup"><span data-stu-id="ec1c0-104">Enhanced Functionality at Connect Time</span></span>

<span data-ttu-id="ec1c0-105">Windows Sockets 2 ofrece un conjunto expandido de operaciones que pueden producirse con coincidencias para establecer una conexión de socket.</span><span class="sxs-lookup"><span data-stu-id="ec1c0-105">Windows Sockets 2 offers an expanded set of operations that can occur coincident to establishing a socket connection.</span></span> <span data-ttu-id="ec1c0-106">A continuación se describen los requisitos del proveedor de servicios para implementar estas características.</span><span class="sxs-lookup"><span data-stu-id="ec1c0-106">The service provider requirements for implementing these features are described below.</span></span>

## <a name="conditional-acceptance"></a><span data-ttu-id="ec1c0-107">Aceptación condicional</span><span class="sxs-lookup"><span data-stu-id="ec1c0-107">Conditional Acceptance</span></span>

<span data-ttu-id="ec1c0-108">Tal y como se ha descrito anteriormente, [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) invoca una función de condición proporcionada por el cliente que usa los parámetros de entrada para proporcionar información sobre la solicitud de conexión pendiente.</span><span class="sxs-lookup"><span data-stu-id="ec1c0-108">As described previously, [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) invokes a client-supplied condition function that uses input parameters to supply information about the pending connection request.</span></span> <span data-ttu-id="ec1c0-109">El cliente puede usar esta información para aceptar o rechazar una solicitud de conexión en función de la información del llamador, como el identificador del autor de la llamada, QoS, etc. Si la función Condition devuelve CF \_ Accept, se crea un nuevo socket con las mismas propiedades que el socket de escucha y se devuelve un identificador al nuevo socket.</span><span class="sxs-lookup"><span data-stu-id="ec1c0-109">This information can be used by the client to accept or reject a connection request based on caller information such as caller identifier, QoS, etc. If the condition function returns CF\_ACCEPT, a new socket is created with the same properties as the listening socket, and a handle to the new socket is returned.</span></span> <span data-ttu-id="ec1c0-110">Si la función Condition devuelve \_ el rechazo CF, se debe rechazar la solicitud de conexión.</span><span class="sxs-lookup"><span data-stu-id="ec1c0-110">If the condition function returns CF\_REJECT, the connection request should be rejected.</span></span> <span data-ttu-id="ec1c0-111">Si la función Condition devuelve el \_ aplazamiento CF, la decisión de aceptación y rechazo no se puede realizar inmediatamente, y el proveedor de servicios debe dejar la solicitud de conexión en la cola de trabajos pendientes.</span><span class="sxs-lookup"><span data-stu-id="ec1c0-111">If the condition function returns CF\_DEFER, the accept/reject decision cannot be made immediately, and the service provider must leave the connection request on the backlog queue.</span></span> <span data-ttu-id="ec1c0-112">El cliente debe llamar de nuevo a **WSPAccept** , cuando esté listo para tomar una decisión y organizar la función de condición para que devuelva el rechazo de CF \_ o de CF \_ .</span><span class="sxs-lookup"><span data-stu-id="ec1c0-112">The client must call **WSPAccept** again, when it is ready to make a decision, and arrange for the condition function to return either CF\_ACCEPT or CF\_REJECT.</span></span> <span data-ttu-id="ec1c0-113">Mientras que una solicitud de conexión diferida se encuentra en la parte superior de la cola de trabajos pendientes, el proveedor de servicios no emite ninguna indicación adicional para las solicitudes de conexión pendientes.</span><span class="sxs-lookup"><span data-stu-id="ec1c0-113">While a deferred connection request is at the top of the backlog queue, the service provider does not issue any further indications for pending connection requests.</span></span>

## <a name="exchanging-user-data-at-connect-time"></a><span data-ttu-id="ec1c0-114">Intercambio de datos de usuario en tiempo de conexión</span><span class="sxs-lookup"><span data-stu-id="ec1c0-114">Exchanging User Data at Connect Time</span></span>

<span data-ttu-id="ec1c0-115">Algunos protocolos permiten que se intercambie una pequeña cantidad de datos de usuario en el momento de la conexión.</span><span class="sxs-lookup"><span data-stu-id="ec1c0-115">Some protocols allow a small amount of user data to be exchanged at connect time.</span></span> <span data-ttu-id="ec1c0-116">Si dichos datos se han recibido desde el host de conexión, se colocan en un búfer del proveedor de servicios y se proporciona un puntero a este búfer junto con un valor de longitud al cliente de Winsock SPI a través de los parámetros de entrada de la función de condición [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) .</span><span class="sxs-lookup"><span data-stu-id="ec1c0-116">If such data has been received from the connecting host, it is placed in a service provider buffer, and a pointer to this buffer along with a length value are supplied to the Winsock SPI client through input parameters to the [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) condition function.</span></span> <span data-ttu-id="ec1c0-117">Si el cliente de Winsock SPI tiene datos de respuesta para volver al host de conexión, puede copiarlos en un búfer proporcionado por el proveedor de servicios.</span><span class="sxs-lookup"><span data-stu-id="ec1c0-117">If the Winsock SPI client has response data to return to the connecting host, it may copy this into a buffer that is supplied by the service provider.</span></span> <span data-ttu-id="ec1c0-118">Un puntero a este búfer y un entero que indica que el tamaño de búfer también se proporciona como parámetros de entrada de la función de condición (si es compatible con el protocolo).</span><span class="sxs-lookup"><span data-stu-id="ec1c0-118">A pointer to this buffer and an integer indicating buffer size are also supplied as condition function input parameters (if supported by the protocol).</span></span>

## <a name="establishing-socket-groups"></a><span data-ttu-id="ec1c0-119">Establecimiento de grupos de sockets</span><span class="sxs-lookup"><span data-stu-id="ec1c0-119">Establishing Socket Groups</span></span>

<span data-ttu-id="ec1c0-120">Todo el uso de grupos de sockets está reservado.</span><span class="sxs-lookup"><span data-stu-id="ec1c0-120">All use of socket groups is reserved.</span></span>

 

 



