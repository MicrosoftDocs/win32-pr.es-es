---
description: Notificaciones de final de secuencia
ms.assetid: cf2b13bc-5b54-4ac7-8a33-7434126fdf31
title: Notificaciones de final de secuencia
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 53fcdfef1225aa5b93b56aeaa0d8ae9d0a8550c9
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104274778"
---
# <a name="end-of-stream-notifications"></a><span data-ttu-id="80cd1-103">Notificaciones de final de secuencia</span><span class="sxs-lookup"><span data-stu-id="80cd1-103">End-of-Stream Notifications</span></span>

<span data-ttu-id="80cd1-104">Cuando un filtro de origen ha terminado de enviar datos, llama al método [**IPin:: EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream) en el PIN de entrada de nivel inferior.</span><span class="sxs-lookup"><span data-stu-id="80cd1-104">When a source filter is done sending data, it calls the [**IPin::EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream) method on the downstream input pin.</span></span> <span data-ttu-id="80cd1-105">El filtro de nivel inferior propaga la llamada al filtro siguiente, y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="80cd1-105">The downstream filter propagates the call to the next filter, and so on.</span></span> <span data-ttu-id="80cd1-106">Cuando la llamada a **EndOfStream** llega al representador, el representador envía un evento [**EC \_ Complete**](ec-complete.md) al administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="80cd1-106">When the **EndOfStream** call reaches the renderer, the renderer sends an [**EC\_COMPLETE**](ec-complete.md) event to the Filter Graph Manager.</span></span> <span data-ttu-id="80cd1-107">Si el representador tiene varios PIN de entrada, entrega el \_ evento de finalización de EC una vez que cada pin de entrada ha recibido la notificación de fin de secuencia.</span><span class="sxs-lookup"><span data-stu-id="80cd1-107">If the renderer has multiple input pins, it delivers the EC\_COMPLETE event after every input pin has received the end-of-stream notification.</span></span>

<span data-ttu-id="80cd1-108">Un filtro debe serializar las llamadas a [**EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream) con otras llamadas de streaming, como [**IMemInputPin:: Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive).</span><span class="sxs-lookup"><span data-stu-id="80cd1-108">A filter must serialize [**EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream) calls with other streaming calls, such as [**IMemInputPin::Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive).</span></span> <span data-ttu-id="80cd1-109">(Es decir, el filtro de nivel inferior debe recibir siempre las llamadas en el orden correcto).</span><span class="sxs-lookup"><span data-stu-id="80cd1-109">(In other words, the downstream filter must always receive the calls in the correct order.)</span></span>

<span data-ttu-id="80cd1-110">En algunos casos, un filtro de nivel inferior podría detectar el final de la secuencia antes que el filtro de origen.</span><span class="sxs-lookup"><span data-stu-id="80cd1-110">In some cases, a downstream filter might detect the end of the stream before the source filter does.</span></span> <span data-ttu-id="80cd1-111">(Por ejemplo, el filtro de nivel inferior podría estar analizando la secuencia). En ese caso, el filtro de nivel inferior puede enviar la notificación de final de secuencia, en cuyo caso debe devolver S \_ false desde [**IMemInputPin:: Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive) hasta que el gráfico se detenga o se vacíe.</span><span class="sxs-lookup"><span data-stu-id="80cd1-111">(For example, the downstream filter might be parsing the stream.) In that case, the downstream filter can send the end-of-stream notification, in which case it should return S\_FALSE from [**IMemInputPin::Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive) until the graph stops or flushes.</span></span> <span data-ttu-id="80cd1-112">El \_ valor devuelto de S false informa al filtro de origen para que deje de enviar datos.</span><span class="sxs-lookup"><span data-stu-id="80cd1-112">The S\_FALSE return value informs the source filter to stop sending data.</span></span>

### <a name="default-handling-of-ec_complete"></a><span data-ttu-id="80cd1-113">Control predeterminado de EC \_ completado</span><span class="sxs-lookup"><span data-stu-id="80cd1-113">Default Handling of EC\_COMPLETE</span></span>

<span data-ttu-id="80cd1-114">De forma predeterminada, el administrador de gráficos de filtro no reenvía \_ a la aplicación todos los eventos de finalización de EC.</span><span class="sxs-lookup"><span data-stu-id="80cd1-114">By default, the Filter Graph Manager does not forward every EC\_COMPLETE event to the application.</span></span> <span data-ttu-id="80cd1-115">En su lugar, espera hasta que todas las secuencias hayan \_ concluido la EC y, a continuación, envíe un solo \_ evento de finalización de EC.</span><span class="sxs-lookup"><span data-stu-id="80cd1-115">Instead, it waits until all streams have signaled EC\_COMPLETE and then sends a single EC\_COMPLETE event.</span></span> <span data-ttu-id="80cd1-116">Por lo tanto, la aplicación recibe el evento después de que se haya completado cada flujo.</span><span class="sxs-lookup"><span data-stu-id="80cd1-116">Thus, the application receives the event after every stream has completed.</span></span>

<span data-ttu-id="80cd1-117">Para determinar el número de secuencias, el administrador de gráficos de filtro cuenta el número de filtros que admiten la búsqueda (a través de [**IMediaSeeking**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking) o [**IMediaPosition**](/windows/desktop/api/Control/nn-control-imediaposition)) y tienen un PIN de entrada *representado* , que se define como un PIN de entrada sin salidas correspondientes.</span><span class="sxs-lookup"><span data-stu-id="80cd1-117">To determine the number of streams, the Filter Graph Manager counts the number of filters that support seeking (through [**IMediaSeeking**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking) or [**IMediaPosition**](/windows/desktop/api/Control/nn-control-imediaposition)) and have a *rendered* input pin, which is defined as an input pin with no corresponding outputs.</span></span> <span data-ttu-id="80cd1-118">El administrador de gráficos de filtro determina si un PIN se representa de una de las dos maneras siguientes:</span><span class="sxs-lookup"><span data-stu-id="80cd1-118">The Filter Graph Manager determines whether a pin is rendered in one of two ways:</span></span>

-   <span data-ttu-id="80cd1-119">El método [**IPin:: QueryInternalConnections**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryinternalconnections) del PIN devuelve cero en el parámetro *nPin* .</span><span class="sxs-lookup"><span data-stu-id="80cd1-119">The pin's [**IPin::QueryInternalConnections**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryinternalconnections) method returns zero in the *nPin* parameter.</span></span>
-   <span data-ttu-id="80cd1-120">El filtro expone la interfaz [**IAMFilterMiscFlags**](/windows/desktop/api/Strmif/nn-strmif-iamfiltermiscflags) y devuelve la marca AM \_ Filter \_ Misc \_ Flags \_ is \_ representator.</span><span class="sxs-lookup"><span data-stu-id="80cd1-120">The filter exposes the [**IAMFilterMiscFlags**](/windows/desktop/api/Strmif/nn-strmif-iamfiltermiscflags) interface and returns the AM\_FILTER\_MISC\_FLAGS\_IS\_RENDERER flag.</span></span>

### <a name="end-of-stream-notifications-in-pull-mode"></a><span data-ttu-id="80cd1-121">Notificaciones de final de secuencia en el modo de extracción</span><span class="sxs-lookup"><span data-stu-id="80cd1-121">End-of-Stream Notifications in Pull Mode</span></span>

<span data-ttu-id="80cd1-122">En una conexión [**IAsyncReader**](/windows/desktop/api/Strmif/nn-strmif-iasyncreader) , el filtro de origen no envía una notificación de final de secuencia.</span><span class="sxs-lookup"><span data-stu-id="80cd1-122">In an [**IAsyncReader**](/windows/desktop/api/Strmif/nn-strmif-iasyncreader) connection, the source filter does not send an end-of-stream notification.</span></span> <span data-ttu-id="80cd1-123">Instread, esto se realiza mediante el filtro de nivel inferior, que suele ser un filtro de analizador.</span><span class="sxs-lookup"><span data-stu-id="80cd1-123">Instread, this is done by the downstream filter, which is typically a parser filter.</span></span> <span data-ttu-id="80cd1-124">El analizador envía la llamada [**EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream) downstream.</span><span class="sxs-lookup"><span data-stu-id="80cd1-124">The parser sends the [**EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream) call downstream.</span></span> <span data-ttu-id="80cd1-125">No envía un flujo ascendente al filtro de origen.</span><span class="sxs-lookup"><span data-stu-id="80cd1-125">It does not send one upstream to the source filter.</span></span>

## <a name="related-topics"></a><span data-ttu-id="80cd1-126">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="80cd1-126">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="80cd1-127">Entrega del final de la secuencia</span><span class="sxs-lookup"><span data-stu-id="80cd1-127">Delivering the End of Stream</span></span>](delivering-the-end-of-stream.md)
</dt> </dl>

 

 



