---
description: NLA es capaz de proporcionar a sus clientes notificaciones de cambios de ubicación de red. El mecanismo usado para solicitar la notificación de eventos de cambio es una combinación de las funciones WSALookupServiceBegin, WSANSPIoctl y WSALookupServiceNext.
ms.assetid: fed5a90d-0bc5-46e7-b3d3-edc4b303d305
title: Notificación de NLA
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 13ee0ad0530725db27c8f5df39b6fc573f7e97c4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104541526"
---
# <a name="notification-from-nla"></a><span data-ttu-id="809b0-104">Notificación de NLA</span><span class="sxs-lookup"><span data-stu-id="809b0-104">Notification from NLA</span></span>

<span data-ttu-id="809b0-105">NLA es capaz de proporcionar a sus clientes notificaciones de cambios de ubicación de red.</span><span class="sxs-lookup"><span data-stu-id="809b0-105">NLA is capable of providing its clients with notification of network location changes.</span></span> <span data-ttu-id="809b0-106">El mecanismo usado para solicitar la notificación de eventos de cambio es una combinación de las funciones [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl)y [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="809b0-106">The mechanism used to request notification of change events is a combination of the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl), and [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) functions.</span></span>

<span data-ttu-id="809b0-107">Para recibir la notificación de cambios de NLA, un cliente debe llamar primero a [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) para obtener un identificador de búsqueda de SP de NLA válido.</span><span class="sxs-lookup"><span data-stu-id="809b0-107">In order to receive change notification from NLA, a client must first call the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) to obtain a valid NLA SP lookup handle.</span></span> <span data-ttu-id="809b0-108">A continuación, el cliente puede llamar a [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) o [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) en cualquier orden; para registrarse para recibir notificaciones, llame a la función **WSANSPIoctl** con el código de control de cambio de notificación SiO \_ NSP \_ \_ en el parámetro *dwControlCode* .</span><span class="sxs-lookup"><span data-stu-id="809b0-108">Next, the client can call [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) or [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) in any order; to register for notification, call the **WSANSPIoctl** function with the SIO\_NSP\_NOTIFY\_CHANGE control code set in the *dwControlCode* parameter.</span></span>

<span data-ttu-id="809b0-109">La función [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) devuelve WSA \_ E \_ no \_ más como delimitador de conjunto.</span><span class="sxs-lookup"><span data-stu-id="809b0-109">The [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function returns WSA\_E\_NO\_MORE as a set delimiter.</span></span> <span data-ttu-id="809b0-110">Cuando un cliente se ha registrado para recibir notificaciones mediante la función [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) y **WSALookupServiceNext** devuelve WSA \_ E \_ no \_ más, al llamar a **WSALookupServiceNext** se revela de nuevo si se ha producido un cambio:</span><span class="sxs-lookup"><span data-stu-id="809b0-110">When a client has registered for notification using the [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function and **WSALookupServiceNext** returns WSA\_E\_NO\_MORE, calling **WSALookupServiceNext** again reveals whether a change has occurred:</span></span>

-   <span data-ttu-id="809b0-111">Si no se ha producido ningún cambio desde el anterior WSA \_ e \_ no \_ más \_ , \_ se devuelve WSA e no \_ más.</span><span class="sxs-lookup"><span data-stu-id="809b0-111">If no changes have occurred since the previous WSA\_E\_NO\_MORE, WSA\_E\_NO\_MORE is returned.</span></span>
-   <span data-ttu-id="809b0-112">Si se ha producido un cambio, o si se ha producido un cambio y se realiza una llamada de sondeo, la llamada a la función [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) devuelve redes como estructuras [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) , con una de las siguientes marcas establecidas en su miembro **dwOutputFlags** :</span><span class="sxs-lookup"><span data-stu-id="809b0-112">If a change has occurred, or if a change has occurred and a polling call is made, the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function call returns networks as [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) structures, with one of the following flags set in its **dwOutputFlags** member:</span></span>

    <dl> <span data-ttu-id="809b0-113">\_se \_ agrega el resultado</span><span class="sxs-lookup"><span data-stu-id="809b0-113">RESULT\_IS\_ADDED</span></span>  
    <span data-ttu-id="809b0-114">el \_ resultado \_ cambia</span><span class="sxs-lookup"><span data-stu-id="809b0-114">RESULT\_IS\_CHANGED</span></span>  
    <span data-ttu-id="809b0-115">el resultado \_ se \_ elimina</span><span class="sxs-lookup"><span data-stu-id="809b0-115">RESULT\_IS\_DELETED</span></span>  
    </dl>

<span data-ttu-id="809b0-116">Se proporciona una notificación de cambios para todos los campos que han cambiado desde que se obtuvo el identificador de búsqueda NLA con la llamada de función [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) , o desde la última enumeración que dio como resultado el error de WSA \_ E \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="809b0-116">Change notification is provided for any fields that changed since the NLA lookup handle was obtained with the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function call, or since the last enumeration that resulted in the WSA\_E\_NO\_MORE error.</span></span> <span data-ttu-id="809b0-117">Cuando se proporciona toda la información de ubicación de red modificada, \_ \_ se devuelve WSA E no \_ más.</span><span class="sxs-lookup"><span data-stu-id="809b0-117">When all changed network location information is provided, WSA\_E\_NO\_MORE is returned.</span></span> <span data-ttu-id="809b0-118">Los clientes pueden volver a emitir una llamada de función [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) en el mismo identificador de consulta en cualquier momento, de una en una, con el \_ indicador de cambio de notificación SiO NSP \_ \_ establecido.</span><span class="sxs-lookup"><span data-stu-id="809b0-118">Clients can reissue a [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function call on the same query handle at any time, one at a time, with the SIO\_NSP\_NOTIFY\_CHANGE flag set.</span></span> <span data-ttu-id="809b0-119">Esta funcionalidad permite a un cliente reciclar el identificador de consulta de manera continua, lo que evita que el cliente tenga que mantener la información de estado de cambio por sí misma.</span><span class="sxs-lookup"><span data-stu-id="809b0-119">This capability enables a client to recycle the query handle on an ongoing basis, thereby relieving the client from having to maintain change-state information on its own.</span></span> <span data-ttu-id="809b0-120">Una vez que un cliente ya no necesita notificaciones de cambio, debe cerrar el identificador de consulta mediante la función [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="809b0-120">Once a client no longer needs change notifications, it should close the query handle using the [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) function.</span></span>

 

 



