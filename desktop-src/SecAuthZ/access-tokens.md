---
description: Un token de acceso es un objeto que describe el contexto de seguridad de un proceso o subproceso.
ms.assetid: 350159c9-2399-427a-ba44-c897a9664299
title: Tokens de acceso
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0993c1f5aebab797ab28e61b36f59507e4d2f1ab
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "103910621"
---
# <a name="access-tokens"></a><span data-ttu-id="b36ab-103">Tokens de acceso</span><span class="sxs-lookup"><span data-stu-id="b36ab-103">Access Tokens</span></span>

<span data-ttu-id="b36ab-104">Un [*token de acceso*](/windows/desktop/SecGloss/a-gly) es un objeto que describe el [*contexto de seguridad*](/windows/desktop/SecGloss/s-gly) de un [*proceso*](/windows/desktop/SecGloss/p-gly) o subproceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-104">An [*access token*](/windows/desktop/SecGloss/a-gly) is an object that describes the [*security context*](/windows/desktop/SecGloss/s-gly) of a [*process*](/windows/desktop/SecGloss/p-gly) or thread.</span></span> <span data-ttu-id="b36ab-105">La información de un token incluye la identidad y los privilegios de la cuenta de usuario asociada con el proceso o subproceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-105">The information in a token includes the identity and privileges of the user account associated with the process or thread.</span></span> <span data-ttu-id="b36ab-106">Cuando un usuario inicia sesión, el sistema comprueba la contraseña del usuario comparándola con la información almacenada en una base de datos de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b36ab-106">When a user logs on, the system verifies the user's password by comparing it with information stored in a security database.</span></span> <span data-ttu-id="b36ab-107">Si la contraseña se [*autentica*](/windows/desktop/SecGloss/a-gly), el sistema genera un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-107">If the password is [*authenticated*](/windows/desktop/SecGloss/a-gly), the system produces an access token.</span></span> <span data-ttu-id="b36ab-108">Cada proceso ejecutado en nombre de este usuario tiene una copia de este token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-108">Every process executed on behalf of this user has a copy of this access token.</span></span>

<span data-ttu-id="b36ab-109">El sistema utiliza un token de acceso para identificar al usuario cuando un subproceso interactúa con un [objeto protegible](securable-objects.md) o intenta realizar una tarea del sistema que requiere privilegios.</span><span class="sxs-lookup"><span data-stu-id="b36ab-109">The system uses an access token to identify the user when a thread interacts with a [securable object](securable-objects.md) or tries to perform a system task that requires privileges.</span></span> <span data-ttu-id="b36ab-110">Los tokens de acceso contienen la siguiente información:</span><span class="sxs-lookup"><span data-stu-id="b36ab-110">Access tokens contain the following information:</span></span>

-   <span data-ttu-id="b36ab-111">El [identificador de seguridad](security-identifiers.md) (SID) de la cuenta del usuario</span><span class="sxs-lookup"><span data-stu-id="b36ab-111">The [security identifier](security-identifiers.md) (SID) for the user's account</span></span>
-   <span data-ttu-id="b36ab-112">SID para los grupos de los que el usuario es miembro</span><span class="sxs-lookup"><span data-stu-id="b36ab-112">SIDs for the groups of which the user is a member</span></span>
-   <span data-ttu-id="b36ab-113">[*SID de inicio de sesión*](/windows/desktop/SecGloss/l-gly) que identifica la sesión de [*Inicio*](/windows/desktop/SecGloss/l-gly) de sesión actual</span><span class="sxs-lookup"><span data-stu-id="b36ab-113">A [*logon SID*](/windows/desktop/SecGloss/l-gly) that identifies the current [*logon session*](/windows/desktop/SecGloss/l-gly)</span></span>
-   <span data-ttu-id="b36ab-114">Una lista de los [privilegios](privileges.md) mantenidos por el usuario o los grupos del usuario</span><span class="sxs-lookup"><span data-stu-id="b36ab-114">A list of the [privileges](privileges.md) held by either the user or the user's groups</span></span>
-   <span data-ttu-id="b36ab-115">Un SID de propietario</span><span class="sxs-lookup"><span data-stu-id="b36ab-115">An owner SID</span></span>
-   <span data-ttu-id="b36ab-116">El SID para el grupo primario</span><span class="sxs-lookup"><span data-stu-id="b36ab-116">The SID for the primary group</span></span>
-   <span data-ttu-id="b36ab-117">[DACL](access-control-lists.md) predeterminada que el sistema utiliza cuando el usuario crea un objeto protegible sin especificar un [*descriptor de seguridad*](/windows/desktop/SecGloss/s-gly) .</span><span class="sxs-lookup"><span data-stu-id="b36ab-117">The default [DACL](access-control-lists.md) that the system uses when the user creates a securable object without specifying a [*security descriptor*](/windows/desktop/SecGloss/s-gly)</span></span>
-   <span data-ttu-id="b36ab-118">El origen del token de acceso</span><span class="sxs-lookup"><span data-stu-id="b36ab-118">The source of the access token</span></span>
-   <span data-ttu-id="b36ab-119">Si el token es un token de [suplantación](client-impersonation.md) o [*principal*](/windows/desktop/SecGloss/p-gly)</span><span class="sxs-lookup"><span data-stu-id="b36ab-119">Whether the token is a [*primary*](/windows/desktop/SecGloss/p-gly) or [impersonation](client-impersonation.md) token</span></span>
-   <span data-ttu-id="b36ab-120">Una lista opcional de [restricción de SID](restricted-tokens.md)</span><span class="sxs-lookup"><span data-stu-id="b36ab-120">An optional list of [restricting SIDs](restricted-tokens.md)</span></span>
-   <span data-ttu-id="b36ab-121">Niveles de suplantación actuales</span><span class="sxs-lookup"><span data-stu-id="b36ab-121">Current impersonation levels</span></span>
-   <span data-ttu-id="b36ab-122">Otras estadísticas</span><span class="sxs-lookup"><span data-stu-id="b36ab-122">Other statistics</span></span>

<span data-ttu-id="b36ab-123">Cada proceso tiene un [*token principal*](/windows/desktop/SecGloss/p-gly) que describe el [*contexto de seguridad*](/windows/desktop/SecGloss/s-gly) de la cuenta de usuario asociada al proceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-123">Every process has a [*primary token*](/windows/desktop/SecGloss/p-gly) that describes the [*security context*](/windows/desktop/SecGloss/s-gly) of the user account associated with the process.</span></span> <span data-ttu-id="b36ab-124">De forma predeterminada, el sistema utiliza el token principal cuando un subproceso del proceso interactúa con un objeto protegible.</span><span class="sxs-lookup"><span data-stu-id="b36ab-124">By default, the system uses the primary token when a thread of the process interacts with a securable object.</span></span> <span data-ttu-id="b36ab-125">Además, un subproceso puede suplantar una cuenta de cliente.</span><span class="sxs-lookup"><span data-stu-id="b36ab-125">Moreover, a thread can impersonate a client account.</span></span> <span data-ttu-id="b36ab-126">La suplantación permite que el subproceso interactúe con objetos protegibles mediante el contexto de seguridad del cliente.</span><span class="sxs-lookup"><span data-stu-id="b36ab-126">Impersonation allows the thread to interact with securable objects using the client's security context.</span></span> <span data-ttu-id="b36ab-127">Un subproceso que suplanta a un cliente tiene un token principal y un [*token de suplantación*](/windows/desktop/SecGloss/i-gly).</span><span class="sxs-lookup"><span data-stu-id="b36ab-127">A thread that is impersonating a client has both a primary token and an [*impersonation token*](/windows/desktop/SecGloss/i-gly).</span></span>

<span data-ttu-id="b36ab-128">Utilice la función [**OpenProcessToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken) para recuperar un identificador para el token primario de un proceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-128">Use the [**OpenProcessToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken) function to retrieve a handle to the primary token of a process.</span></span> <span data-ttu-id="b36ab-129">Utilice la función [**OpenThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openthreadtoken) para recuperar un identificador para el token de suplantación de un subproceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-129">Use the [**OpenThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openthreadtoken) function to retrieve a handle to the impersonation token of a thread.</span></span> <span data-ttu-id="b36ab-130">Para obtener más información, vea [suplantación](client-impersonation.md).</span><span class="sxs-lookup"><span data-stu-id="b36ab-130">For more information, see [Impersonation](client-impersonation.md).</span></span>

<span data-ttu-id="b36ab-131">Puede utilizar las siguientes funciones para manipular los tokens de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-131">You can use the following functions to manipulate access tokens.</span></span>



| <span data-ttu-id="b36ab-132">Función</span><span class="sxs-lookup"><span data-stu-id="b36ab-132">Function</span></span>                                               | <span data-ttu-id="b36ab-133">Descripción</span><span class="sxs-lookup"><span data-stu-id="b36ab-133">Description</span></span>                                                                                                                                                            |
|--------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="b36ab-134">**AdjustTokenGroups**</span><span class="sxs-lookup"><span data-stu-id="b36ab-134">**AdjustTokenGroups**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokengroups)         | <span data-ttu-id="b36ab-135">Cambia la información de grupo en un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-135">Changes the group information in an access token.</span></span>                                                                                                                      |
| [<span data-ttu-id="b36ab-136">**AdjustTokenPrivileges**</span><span class="sxs-lookup"><span data-stu-id="b36ab-136">**AdjustTokenPrivileges**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-adjusttokenprivileges) | <span data-ttu-id="b36ab-137">Habilita o deshabilita los privilegios en un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-137">Enables or disables the privileges in an access token.</span></span> <span data-ttu-id="b36ab-138">No concede nuevos privilegios ni revoca los existentes.</span><span class="sxs-lookup"><span data-stu-id="b36ab-138">It does not grant new privileges or revoke existing ones.</span></span>                                                       |
| [<span data-ttu-id="b36ab-139">**CheckTokenMembership**</span><span class="sxs-lookup"><span data-stu-id="b36ab-139">**CheckTokenMembership**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-checktokenmembership)   | <span data-ttu-id="b36ab-140">Determina si un SID especificado está habilitado en un token de acceso especificado.</span><span class="sxs-lookup"><span data-stu-id="b36ab-140">Determines whether a specified SID is enabled in a specified access token.</span></span>                                                                                             |
| [<span data-ttu-id="b36ab-141">**CreateRestrictedToken**</span><span class="sxs-lookup"><span data-stu-id="b36ab-141">**CreateRestrictedToken**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-createrestrictedtoken) | <span data-ttu-id="b36ab-142">Crea un nuevo token que es una versión restringida de un token existente.</span><span class="sxs-lookup"><span data-stu-id="b36ab-142">Creates a new token that is a restricted version of an existing token.</span></span> <span data-ttu-id="b36ab-143">El token restringido puede tener SID deshabilitados, privilegios eliminados y una lista de SID restringidos.</span><span class="sxs-lookup"><span data-stu-id="b36ab-143">The restricted token can have disabled SIDs, deleted privileges, and a list of restricted SIDs.</span></span> |
| [<span data-ttu-id="b36ab-144">**DuplicateToken**</span><span class="sxs-lookup"><span data-stu-id="b36ab-144">**DuplicateToken**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-duplicatetoken)               | <span data-ttu-id="b36ab-145">Crea un nuevo token de suplantación que duplica un token existente.</span><span class="sxs-lookup"><span data-stu-id="b36ab-145">Creates a new impersonation token that duplicates an existing token.</span></span>                                                                                                   |
| [<span data-ttu-id="b36ab-146">**DuplicateTokenEx**</span><span class="sxs-lookup"><span data-stu-id="b36ab-146">**DuplicateTokenEx**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-duplicatetokenex)           | <span data-ttu-id="b36ab-147">Crea un nuevo token primario o un token de suplantación que duplica un token existente.</span><span class="sxs-lookup"><span data-stu-id="b36ab-147">Creates a new primary token or impersonation token that duplicates an existing token.</span></span>                                                                                  |
| [<span data-ttu-id="b36ab-148">**GetTokenInformation**</span><span class="sxs-lookup"><span data-stu-id="b36ab-148">**GetTokenInformation**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-gettokeninformation)     | <span data-ttu-id="b36ab-149">Recupera información sobre un token.</span><span class="sxs-lookup"><span data-stu-id="b36ab-149">Retrieves information about a token.</span></span>                                                                                                                                   |
| [<span data-ttu-id="b36ab-150">**IsTokenRestricted**</span><span class="sxs-lookup"><span data-stu-id="b36ab-150">**IsTokenRestricted**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-istokenrestricted)         | <span data-ttu-id="b36ab-151">Determina si un token tiene una lista de SID restrictivos.</span><span class="sxs-lookup"><span data-stu-id="b36ab-151">Determines whether a token has a list of restricting SIDs.</span></span>                                                                                                             |
| [<span data-ttu-id="b36ab-152">**OpenProcessToken**</span><span class="sxs-lookup"><span data-stu-id="b36ab-152">**OpenProcessToken**</span></span>](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openprocesstoken)           | <span data-ttu-id="b36ab-153">Recupera un identificador del token de acceso principal para un proceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-153">Retrieves a handle to the primary access token for a process.</span></span>                                                                                                          |
| [<span data-ttu-id="b36ab-154">**OpenThreadToken**</span><span class="sxs-lookup"><span data-stu-id="b36ab-154">**OpenThreadToken**</span></span>](/windows/win32/api/processthreadsapi/nf-processthreadsapi-openthreadtoken)             | <span data-ttu-id="b36ab-155">Recupera un identificador del token de acceso de suplantación para un subproceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-155">Retrieves a handle to the impersonation access token for a thread.</span></span>                                                                                                     |
| [<span data-ttu-id="b36ab-156">**SetThreadToken**</span><span class="sxs-lookup"><span data-stu-id="b36ab-156">**SetThreadToken**</span></span>](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken)               | <span data-ttu-id="b36ab-157">Asigna o quita un token de suplantación para un subproceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-157">Assigns or removes an impersonation token for a thread.</span></span>                                                                                                                |
| [<span data-ttu-id="b36ab-158">**SetTokenInformation**</span><span class="sxs-lookup"><span data-stu-id="b36ab-158">**SetTokenInformation**</span></span>](/windows/win32/api/securitybaseapi/nf-securitybaseapi-settokeninformation)     | <span data-ttu-id="b36ab-159">Cambia el propietario, el grupo primario o la DACL predeterminada de un token.</span><span class="sxs-lookup"><span data-stu-id="b36ab-159">Changes a token's owner, primary group, or default DACL.</span></span>                                                                                                               |



 

<span data-ttu-id="b36ab-160">Las funciones de token de acceso usan las siguientes estructuras para describir las partes de un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-160">The access token functions use the following structures to describe the parts of an access token.</span></span>



| <span data-ttu-id="b36ab-161">Estructura</span><span class="sxs-lookup"><span data-stu-id="b36ab-161">Structure</span></span>                                            | <span data-ttu-id="b36ab-162">Descripción</span><span class="sxs-lookup"><span data-stu-id="b36ab-162">Description</span></span>                                                                                           |
|------------------------------------------------------|-------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="b36ab-163">**CONTROL de TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="b36ab-163">**TOKEN\_CONTROL**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_control)              | <span data-ttu-id="b36ab-164">Información que identifica un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-164">Information that identifies an access token.</span></span>                                                          |
| [<span data-ttu-id="b36ab-165">**\_DACL predeterminada de token \_**</span><span class="sxs-lookup"><span data-stu-id="b36ab-165">**TOKEN\_DEFAULT\_DACL**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_default_dacl)   | <span data-ttu-id="b36ab-166">DACL predeterminada que el sistema utiliza en los descriptores de seguridad de los nuevos objetos creados por un subproceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-166">The default DACL that the system uses in the security descriptors of new objects created by a thread.</span></span> |
| [<span data-ttu-id="b36ab-167">**grupos de TOKENs \_**</span><span class="sxs-lookup"><span data-stu-id="b36ab-167">**TOKEN\_GROUPS**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_groups)                | <span data-ttu-id="b36ab-168">Especifica los SID y los atributos de los SID de grupo en un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-168">Specifies the SIDs and attributes of the group SIDs in an access token.</span></span>                               |
| [<span data-ttu-id="b36ab-169">**propietario del TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="b36ab-169">**TOKEN\_OWNER**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_owner)                  | <span data-ttu-id="b36ab-170">SID del propietario predeterminado para los descriptores de seguridad de los nuevos objetos.</span><span class="sxs-lookup"><span data-stu-id="b36ab-170">The default owner SID for the security descriptors of new objects.</span></span>                                    |
| [<span data-ttu-id="b36ab-171">**\_grupo principal de tokens \_**</span><span class="sxs-lookup"><span data-stu-id="b36ab-171">**TOKEN\_PRIMARY\_GROUP**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_primary_group) | <span data-ttu-id="b36ab-172">SID de grupo principal predeterminado para los descriptores de seguridad de los nuevos objetos.</span><span class="sxs-lookup"><span data-stu-id="b36ab-172">The default primary group SID for the security descriptors of new objects.</span></span>                            |
| [<span data-ttu-id="b36ab-173">**privilegios de TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="b36ab-173">**TOKEN\_PRIVILEGES**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_privileges)        | <span data-ttu-id="b36ab-174">Los privilegios asociados a un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-174">The privileges associated with an access token.</span></span> <span data-ttu-id="b36ab-175">También determina si los privilegios están habilitados.</span><span class="sxs-lookup"><span data-stu-id="b36ab-175">Also determines whether the privileges are enabled.</span></span>   |
| [<span data-ttu-id="b36ab-176">**origen de TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="b36ab-176">**TOKEN\_SOURCE**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_source)                | <span data-ttu-id="b36ab-177">Origen de un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-177">The source of an access token.</span></span>                                                                        |
| [<span data-ttu-id="b36ab-178">**estadísticas de TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="b36ab-178">**TOKEN\_STATISTICS**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_statistics)        | <span data-ttu-id="b36ab-179">Estadísticas asociadas a un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-179">Statistics associated with an access token.</span></span>                                                           |
| [<span data-ttu-id="b36ab-180">**usuario de TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="b36ab-180">**TOKEN\_USER**</span></span>](/windows/desktop/api/Winnt/ns-winnt-token_user)                    | <span data-ttu-id="b36ab-181">SID del usuario asociado a un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-181">The SID of the user associated with an access token.</span></span>                                                  |



 

<span data-ttu-id="b36ab-182">Las funciones de token de acceso usan los siguientes tipos de enumeración.</span><span class="sxs-lookup"><span data-stu-id="b36ab-182">The access token functions use the following enumeration types.</span></span>



| <span data-ttu-id="b36ab-183">Tipo de enumeración</span><span class="sxs-lookup"><span data-stu-id="b36ab-183">Enumeration type</span></span>                                             | <span data-ttu-id="b36ab-184">Especifica</span><span class="sxs-lookup"><span data-stu-id="b36ab-184">Specifies</span></span>                                                                       |
|--------------------------------------------------------------|---------------------------------------------------------------------------------|
| [<span data-ttu-id="b36ab-185">**\_clase de información de token \_**</span><span class="sxs-lookup"><span data-stu-id="b36ab-185">**TOKEN\_INFORMATION\_CLASS**</span></span>](/windows/desktop/api/Winnt/ne-winnt-token_information_class) | <span data-ttu-id="b36ab-186">Identifica el tipo de información que se va a establecer o recuperar de un token de acceso.</span><span class="sxs-lookup"><span data-stu-id="b36ab-186">Identifies the type of information being set or retrieved from an access token.</span></span> |
| [<span data-ttu-id="b36ab-187">**tipo de TOKEN \_**</span><span class="sxs-lookup"><span data-stu-id="b36ab-187">**TOKEN\_TYPE**</span></span>](/windows/desktop/api/Winnt/ne-winnt-token_type)                            | <span data-ttu-id="b36ab-188">Identifica un token de acceso como un token de suplantación o principal.</span><span class="sxs-lookup"><span data-stu-id="b36ab-188">Identifies an access token as a primary or impersonation token.</span></span>                 |



 

 

 
