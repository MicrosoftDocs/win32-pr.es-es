---
title: Escribir secuencias en un archivo
description: Escribir secuencias en un archivo
ms.assetid: a3766f8c-aaa6-4fc5-a306-54aee71018f1
keywords:
- AVIFileCreateStream función)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 370df08534bbdde870f6d28c828d47935abd80db
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/19/2020
ms.locfileid: "103790306"
---
# <a name="writing-streams-to-a-file"></a><span data-ttu-id="474cc-104">Escribir secuencias en un archivo</span><span class="sxs-lookup"><span data-stu-id="474cc-104">Writing Streams to a File</span></span>

<span data-ttu-id="474cc-105">También puede crear un archivo que contenga flujos de datos escribiendo un nuevo flujo de datos en un archivo.</span><span class="sxs-lookup"><span data-stu-id="474cc-105">You can also create a file containing data streams by writing a new data stream to a file.</span></span>

<span data-ttu-id="474cc-106">Puede crear una nueva secuencia en un archivo nuevo o existente mediante la función [**AVIFileCreateStream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) .</span><span class="sxs-lookup"><span data-stu-id="474cc-106">You can create a new stream in a new or existing file by using the [**AVIFileCreateStream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) function.</span></span> <span data-ttu-id="474cc-107">Esta función define una nueva secuencia de acuerdo con las características descritas en una estructura [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) , crea una interfaz de flujo para la nueva secuencia, incrementa el recuento de referencias de la secuencia y devuelve la dirección del puntero de la interfaz de flujo.</span><span class="sxs-lookup"><span data-stu-id="474cc-107">This function defines a new stream according to the characteristics described in an [**AVISTREAMINFO**](/windows/desktop/api/Vfw/ns-vfw-avistreaminfoa) structure, creates a stream interface for the new stream, increments the reference count of the stream, and returns the address of the stream-interface pointer.</span></span>

<span data-ttu-id="474cc-108">Antes de escribir el contenido de la secuencia, debe especificar el formato de la secuencia.</span><span class="sxs-lookup"><span data-stu-id="474cc-108">Before you write the content of the stream, you must specify the stream format.</span></span> <span data-ttu-id="474cc-109">Puede establecer el formato de secuencia mediante la función [**AVIStreamSetFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) .</span><span class="sxs-lookup"><span data-stu-id="474cc-109">You can set the stream format by using the [**AVIStreamSetFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) function.</span></span> <span data-ttu-id="474cc-110">Al establecer el formato de un flujo de vídeo, debe proporcionar una estructura [**bitmapinfo (**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) que contenga la información adecuada.</span><span class="sxs-lookup"><span data-stu-id="474cc-110">When setting the format of a video stream, you must supply this function with a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure containing the appropriate information.</span></span> <span data-ttu-id="474cc-111">Al establecer el formato de una secuencia de audio, debe proporcionar una estructura [**WAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-waveformat) o [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) que contenga la información adecuada.</span><span class="sxs-lookup"><span data-stu-id="474cc-111">When setting the format of an audio stream, you must supply a [**WAVEFORMAT**](/windows/win32/api/mmreg/ns-mmreg-waveformat) or [**WAVEFORMATEX**](/windows/win32/api/mmeapi/ns-mmeapi-waveformatex) structure containing the appropriate information.</span></span> <span data-ttu-id="474cc-112">La información que necesita proporcionar a la función para otros tipos de flujo depende del tipo de flujo y del controlador de flujo.</span><span class="sxs-lookup"><span data-stu-id="474cc-112">The information you need to supply to the function for other stream types depends on the stream type and the stream handler.</span></span>

<span data-ttu-id="474cc-113">Puede escribir el contenido multimedia en una secuencia mediante la función [**AVIStreamWrite**](/windows/desktop/api/Vfw/nf-vfw-avistreamwrite) .</span><span class="sxs-lookup"><span data-stu-id="474cc-113">You can write the multimedia content in a stream by using the [**AVIStreamWrite**](/windows/desktop/api/Vfw/nf-vfw-avistreamwrite) function.</span></span> <span data-ttu-id="474cc-114">Esta función copia los datos sin procesar de un búfer proporcionado por la aplicación en la secuencia especificada.</span><span class="sxs-lookup"><span data-stu-id="474cc-114">This function copies raw data from an application-supplied buffer into the specified stream.</span></span> <span data-ttu-id="474cc-115">El controlador de archivos AVI predeterminado ANEXA información al final de una secuencia.</span><span class="sxs-lookup"><span data-stu-id="474cc-115">The default AVI file handler appends information to the end of a stream.</span></span> <span data-ttu-id="474cc-116">El controlador de onda predeterminado puede escribir datos de audio de forma de onda en una secuencia, así como en el final de una secuencia.</span><span class="sxs-lookup"><span data-stu-id="474cc-116">The default WAVE handler can write waveform-audio data within a stream as well as at the end of a stream.</span></span>

<span data-ttu-id="474cc-117">Puede escribir información complementaria sobre el archivo o la secuencia que no está incluida en la función [**AVIFileCreateStream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) o [**AVIStreamSetFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) mediante las funciones [**AVIFileWriteData**](/windows/desktop/api/Vfw/nf-vfw-avifilewritedata) y [**AVIStreamWriteData**](/windows/desktop/api/Vfw/nf-vfw-avistreamwritedata) .</span><span class="sxs-lookup"><span data-stu-id="474cc-117">You can write supplementary information about the file or stream that is not included in the [**AVIFileCreateStream**](/windows/desktop/api/Vfw/nf-vfw-avifilecreatestream) or [**AVIStreamSetFormat**](/windows/desktop/api/Vfw/nf-vfw-avistreamsetformat) function by using the [**AVIFileWriteData**](/windows/desktop/api/Vfw/nf-vfw-avifilewritedata) and [**AVIStreamWriteData**](/windows/desktop/api/Vfw/nf-vfw-avistreamwritedata) functions.</span></span> <span data-ttu-id="474cc-118">Puede registrar los datos que se aplican a todo el archivo, como la información de copyright y el historial de modificaciones, mediante **AVIFileWriteData**.</span><span class="sxs-lookup"><span data-stu-id="474cc-118">You can record data that is applicable to the entire file, such as copyright information and modification history, by using **AVIFileWriteData**.</span></span> <span data-ttu-id="474cc-119">Puede registrar información específica de la secuencia, como la configuración de compresión y descompresión, mediante **AVIStreamWriteData**.</span><span class="sxs-lookup"><span data-stu-id="474cc-119">You can record stream-specific information, such as compression and decompression settings, by using **AVIStreamWriteData**.</span></span> <span data-ttu-id="474cc-120">La información complementaria se almacena en fragmentos independientes dentro del archivo.</span><span class="sxs-lookup"><span data-stu-id="474cc-120">The supplementary information is stored in separate chunks within the file.</span></span>

<span data-ttu-id="474cc-121">Puede cerrar la secuencia después de terminar de escribir en la nueva secuencia mediante la función [**AVIStreamRelease**](/windows/desktop/api/Vfw/nf-vfw-avistreamrelease) .</span><span class="sxs-lookup"><span data-stu-id="474cc-121">You can close the stream after you finish writing to the new stream by using the [**AVIStreamRelease**](/windows/desktop/api/Vfw/nf-vfw-avistreamrelease) function.</span></span> <span data-ttu-id="474cc-122">Esta función borra los búferes que se usan para registrar los datos de la secuencia y completa y cierra los fragmentos de datos incompletos del archivo.</span><span class="sxs-lookup"><span data-stu-id="474cc-122">This function clears buffers used in recording the stream data, and it completes and closes any incomplete data chunks in the file.</span></span>

## <a name="related-topics"></a><span data-ttu-id="474cc-123">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="474cc-123">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="474cc-124">Operaciones con secuencias</span><span class="sxs-lookup"><span data-stu-id="474cc-124">Stream Operations</span></span>](stream-operations.md)
</dt> </dl>

 

 