---
description: Los búferes de índice, representados por la interfaz IDirect3DIndexBuffer9, son búferes de memoria que contienen datos de índice.
ms.assetid: baa60cd1-a1f0-4dbe-b934-aeb1a5c6b784
title: Búferes de índice (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7151fae6deb72a0c569d269c80e5b13bf946f9d0
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "103906440"
---
# <a name="index-buffers-direct3d-9"></a><span data-ttu-id="1b236-103">Búferes de índice (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="1b236-103">Index Buffers (Direct3D 9)</span></span>

<span data-ttu-id="1b236-104">Los búferes de índice, representados por la interfaz [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) , son búferes de memoria que contienen datos de índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-104">Index buffers, represented by the [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) interface, are memory buffers that contain index data.</span></span> <span data-ttu-id="1b236-105">Los datos de índice, o índices, son desplazamientos enteros en búferes de vértices y se usan para representar primitivas mediante el método [**IDirect3DDevice9::D rawindexedprimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive) .</span><span class="sxs-lookup"><span data-stu-id="1b236-105">Index data, or indices, are integer offsets into vertex buffers and are used to render primitives using the [**IDirect3DDevice9::DrawIndexedPrimitive**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawindexedprimitive) method.</span></span>

<span data-ttu-id="1b236-106">Un búfer de vértice contiene vértices; por lo tanto, puede dibujar un búfer de vértices con o sin primitivos indizados.</span><span class="sxs-lookup"><span data-stu-id="1b236-106">A vertex buffer contains vertices; therefore, you can draw a vertex buffer either with or without indexed primitives.</span></span> <span data-ttu-id="1b236-107">Sin embargo, dado que un búfer de índice contiene índices, no se puede utilizar un búfer de índice sin un búfer de vértices correspondiente.</span><span class="sxs-lookup"><span data-stu-id="1b236-107">However, because an index buffer contains indices, you cannot use an index buffer without a corresponding vertex buffer.</span></span> <span data-ttu-id="1b236-108">(Como nota al margen, [**IDirect3DDevice9::D rawindexedprimitiveup**](/windows/desktop/api) y [**IDirect3DDevice9::D rawprimitiveup**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawprimitiveup) son los únicos métodos de dibujo que dibujan sin un índice o un búfer de vértice).</span><span class="sxs-lookup"><span data-stu-id="1b236-108">(As a side note, [**IDirect3DDevice9::DrawIndexedPrimitiveUP**](/windows/desktop/api) and [**IDirect3DDevice9::DrawPrimitiveUP**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawprimitiveup) are the only draw methods that draw without an index or a vertex buffer.)</span></span>

## <a name="index-buffer-description"></a><span data-ttu-id="1b236-109">Descripción del búfer de índice</span><span class="sxs-lookup"><span data-stu-id="1b236-109">Index Buffer Description</span></span>

<span data-ttu-id="1b236-110">Un búfer de índice se describe en cuanto a sus capacidades, como dónde existe en la memoria, si admite lectura y escritura, y el tipo y el número de índices que puede contener.</span><span class="sxs-lookup"><span data-stu-id="1b236-110">An index buffer is described in terms of its capabilities, such as where it exists in memory, whether it supports reading and writing, and the type and number of indices it can contain.</span></span> <span data-ttu-id="1b236-111">Estos rasgos se encuentran en una estructura [**D3DINDEXBUFFER \_ DESC**](d3dindexbuffer-desc.md) .</span><span class="sxs-lookup"><span data-stu-id="1b236-111">These traits are held in a [**D3DINDEXBUFFER\_DESC**](d3dindexbuffer-desc.md) structure.</span></span>

<span data-ttu-id="1b236-112">Las descripciones del búfer de índice indican a la aplicación cómo se creó un búfer existente.</span><span class="sxs-lookup"><span data-stu-id="1b236-112">Index buffer descriptions tell your application how an existing buffer was created.</span></span> <span data-ttu-id="1b236-113">Proporciona una estructura de Descripción vacía para que el sistema rellene con las capacidades de un búfer de índice creado previamente.</span><span class="sxs-lookup"><span data-stu-id="1b236-113">You provide an empty description structure for the system to fill with the capabilities of a previously created index buffer.</span></span>

-   <span data-ttu-id="1b236-114">El miembro Format describe el formato de superficie de los datos del búfer de índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-114">The Format member describes the surface format of the index buffer data.</span></span>
-   <span data-ttu-id="1b236-115">El tipo identifica el tipo de recurso del búfer de índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-115">The Type identifies the resource type of the index buffer.</span></span>
-   <span data-ttu-id="1b236-116">El miembro de la estructura Usage contiene marcas de capacidad generales.</span><span class="sxs-lookup"><span data-stu-id="1b236-116">The Usage structure member contains general capability flags.</span></span> <span data-ttu-id="1b236-117">La \_ marca D3DUSAGE SOFTWAREPROCESSING indica que el búfer de índice se va a usar con el procesamiento de vértices de software.</span><span class="sxs-lookup"><span data-stu-id="1b236-117">The D3DUSAGE\_SOFTWAREPROCESSING flag indicates that the index buffer is to be used with software vertex processing.</span></span> <span data-ttu-id="1b236-118">La presencia de la \_ marca WRITEONLY de D3DUSAGE en uso indica que la memoria del búfer de índice solo se utiliza para las operaciones de escritura.</span><span class="sxs-lookup"><span data-stu-id="1b236-118">The presence of the D3DUSAGE\_WRITEONLY flag in Usage indicates that the index buffer memory is used only for write operations.</span></span> <span data-ttu-id="1b236-119">Esto libera el controlador para colocar los datos de índice en la mejor ubicación de memoria para habilitar el procesamiento y la representación rápidos.</span><span class="sxs-lookup"><span data-stu-id="1b236-119">This frees the driver to place the index data in the best memory location to enable fast processing and rendering.</span></span> <span data-ttu-id="1b236-120">Si \_ no se usa la marca WRITEONLY de D3DUSAGE, es menos probable que el controlador Coloque los datos en una ubicación que sea ineficaz para las operaciones de lectura.</span><span class="sxs-lookup"><span data-stu-id="1b236-120">If the D3DUSAGE\_WRITEONLY flag is not used, the driver is less likely to put the data in a location that is inefficient for read operations.</span></span> <span data-ttu-id="1b236-121">Esto sacrifica la velocidad de procesamiento y representación.</span><span class="sxs-lookup"><span data-stu-id="1b236-121">This sacrifices some processing and rendering speed.</span></span> <span data-ttu-id="1b236-122">Si no se especifica esta marca, se supone que las aplicaciones realizan operaciones de lectura y escritura en los datos del búfer de índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-122">If this flag is not specified, it is assumed that applications perform read and write operations on the data in the index buffer.</span></span>
-   <span data-ttu-id="1b236-123">Grupo especifica la clase de memoria asignada para el búfer de índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-123">Pool specifies the memory class allocated for the index buffer.</span></span> <span data-ttu-id="1b236-124">La \_ marca D3DPOOL SYSTEMMEM indica que el sistema creó el búfer de índice en la memoria del sistema.</span><span class="sxs-lookup"><span data-stu-id="1b236-124">The D3DPOOL\_SYSTEMMEM flag indicates that the system created the index buffer in system memory.</span></span>
-   <span data-ttu-id="1b236-125">El miembro size almacena el tamaño, en bytes, de los datos del búfer de vértices.</span><span class="sxs-lookup"><span data-stu-id="1b236-125">The Size member stores the size, in bytes, of the vertex buffer data.</span></span>
-   <span data-ttu-id="1b236-126">No se usa el último parámetro pSharedHandle.</span><span class="sxs-lookup"><span data-stu-id="1b236-126">The last parameter pSharedHandle is not used.</span></span> <span data-ttu-id="1b236-127">Establézcalo en **null**.</span><span class="sxs-lookup"><span data-stu-id="1b236-127">Set it to **NULL**.</span></span>

## <a name="index-processing-requirements"></a><span data-ttu-id="1b236-128">Requisitos de procesamiento de índices</span><span class="sxs-lookup"><span data-stu-id="1b236-128">Index Processing Requirements</span></span>

<span data-ttu-id="1b236-129">El rendimiento de las operaciones de procesamiento de índices depende en gran medida de dónde exista el búfer de índice en la memoria y qué tipo de dispositivo de representación se está usando.</span><span class="sxs-lookup"><span data-stu-id="1b236-129">The performance of index processing operations depends heavily on where the index buffer exists in memory and what type of rendering device is being used.</span></span> <span data-ttu-id="1b236-130">Las aplicaciones controlan la asignación de memoria para los búferes de índice cuando se crean.</span><span class="sxs-lookup"><span data-stu-id="1b236-130">Applications control the memory allocation for index buffers when they are created.</span></span> <span data-ttu-id="1b236-131">Cuando \_ se establece la marca de memoria D3DPOOL SYSTEMMEM, el búfer de índice se crea en la memoria del sistema.</span><span class="sxs-lookup"><span data-stu-id="1b236-131">When the D3DPOOL\_SYSTEMMEM memory flag is set, the index buffer is created in system memory.</span></span> <span data-ttu-id="1b236-132">Cuando \_ se usa la marca de memoria predeterminada de D3DPOOL, el controlador de dispositivo determina dónde se asigna mejor la memoria para el búfer de índice, que a menudo se conoce como memoria óptima para el controlador.</span><span class="sxs-lookup"><span data-stu-id="1b236-132">When the D3DPOOL\_DEFAULT memory flag is used, the device driver determines where the memory for the index buffer is best allocated, often referred to as driver-optimal memory.</span></span> <span data-ttu-id="1b236-133">La memoria óptima del controlador puede ser la memoria de vídeo local, la memoria de vídeo no local o la memoria del sistema.</span><span class="sxs-lookup"><span data-stu-id="1b236-133">Driver-optimal memory can be local video memory, non-local video memory, or system memory.</span></span>

<span data-ttu-id="1b236-134">Al establecer la \_ marca de comportamiento D3DUSAGE SOFTWAREPROCESSING cuando se llama al método [**IDirect3DDevice9:: CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) , se especifica que el búfer de índice se va a usar con el procesamiento de vértices de software.</span><span class="sxs-lookup"><span data-stu-id="1b236-134">Setting the D3DUSAGE\_SOFTWAREPROCESSING behavior flag when calling the [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) method specifies that the index buffer is to be used with software vertex processing.</span></span> <span data-ttu-id="1b236-135">Esta marca es necesaria en el procesamiento de vértices en modo mixto (D3DCREATE \_ Mixed \_ VERTEXPROCESSING) cuando se usa el procesamiento de vértices de software.</span><span class="sxs-lookup"><span data-stu-id="1b236-135">This flag is required in mixed mode vertex processing (D3DCREATE\_MIXED\_VERTEXPROCESSING) when software vertex processing is used.</span></span>

<span data-ttu-id="1b236-136">La aplicación puede escribir directamente índices en un búfer de índice asignado en la memoria óptima del controlador.</span><span class="sxs-lookup"><span data-stu-id="1b236-136">The application can directly write indices to a index buffer allocated in driver-optimal memory.</span></span> <span data-ttu-id="1b236-137">Esta técnica evita una operación de copia redundante más adelante.</span><span class="sxs-lookup"><span data-stu-id="1b236-137">This technique prevents a redundant copy operation later.</span></span> <span data-ttu-id="1b236-138">Esta técnica no funciona bien si la aplicación Lee los datos de un búfer de índice, porque las operaciones de lectura realizadas por el host desde la memoria óptima del controlador pueden ser muy lentas.</span><span class="sxs-lookup"><span data-stu-id="1b236-138">This technique does not work well if your application reads data back from an index buffer, because read operations done by the host from driver-optimal memory can be very slow.</span></span> <span data-ttu-id="1b236-139">Por lo tanto, si la aplicación necesita leer durante el procesamiento o escribe datos en el búfer de forma errática, un búfer de índice de la memoria del sistema es una opción mejor.</span><span class="sxs-lookup"><span data-stu-id="1b236-139">Therefore, if your application needs to read during processing or writes data to the buffer erratically, a system-memory index buffer is a better choice.</span></span>

> [!Note]  
> <span data-ttu-id="1b236-140">Use siempre \_ el valor predeterminado de D3DPOOL, excepto si no desea usar memoria de vídeo o usar grandes cantidades de RAM con bloqueo de página cuando el controlador coloca los búferes de vértice o de índice en la memoria AGP.</span><span class="sxs-lookup"><span data-stu-id="1b236-140">Always use D3DPOOL\_DEFAULT, except when you don't want to use video memory or use large amounts of page-locked RAM when the driver is putting vertex or index buffers into AGP memory.</span></span>

 

## <a name="create-an-index-buffer"></a><span data-ttu-id="1b236-141">Crear un búfer de índice</span><span class="sxs-lookup"><span data-stu-id="1b236-141">Create an Index Buffer</span></span>

<span data-ttu-id="1b236-142">Cree un objeto de búfer de índice llamando al método [**IDirect3DDevice9:: CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) , que acepta seis parámetros.</span><span class="sxs-lookup"><span data-stu-id="1b236-142">Create an index buffer object by calling the [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) method, which accepts six parameters.</span></span>

-   <span data-ttu-id="1b236-143">El primer parámetro especifica la longitud del búfer de índice, en bytes.</span><span class="sxs-lookup"><span data-stu-id="1b236-143">The first parameter specifies the index buffer length, in bytes.</span></span>
-   <span data-ttu-id="1b236-144">El segundo parámetro es un conjunto de controles de uso.</span><span class="sxs-lookup"><span data-stu-id="1b236-144">The second parameter is a set of usage controls.</span></span> <span data-ttu-id="1b236-145">Entre otras cosas, su valor determina si los vértices a los que se hace referencia en los índices pueden contener información de recorte.</span><span class="sxs-lookup"><span data-stu-id="1b236-145">Among other things, its value determines whether the vertices being referred to by the indices are capable of containing clipping information.</span></span> <span data-ttu-id="1b236-146">Para mejorar el rendimiento, especifique D3DUSAGE \_ DONOTCLIP cuando no se recorte.</span><span class="sxs-lookup"><span data-stu-id="1b236-146">To improve performance, specify D3DUSAGE\_DONOTCLIP when clipping is not required.</span></span>

    <span data-ttu-id="1b236-147">La \_ marca D3DUSAGE SOFTWAREPROCESSING se puede establecer cuando el procesamiento de vértices de modo mixto o software (D3DCREATE \_ mixto \_ VERTEXPROCESSING/D3DCREATE \_ software \_ VERTEXPROCESSING) está habilitado para ese dispositivo.</span><span class="sxs-lookup"><span data-stu-id="1b236-147">The D3DUSAGE\_SOFTWAREPROCESSING flag can be set when mixed-mode or software vertex processing (D3DCREATE\_MIXED\_VERTEXPROCESSING / D3DCREATE\_SOFTWARE\_VERTEXPROCESSING) is enabled for that device.</span></span> <span data-ttu-id="1b236-148">D3DUSAGE \_ SOFTWAREPROCESSING se debe establecer para que los búferes se usen con el procesamiento de vértices de software en modo mixto, pero no se debe establecer para el mejor rendimiento posible al usar el procesamiento de índices de hardware en modo mixto (D3DCREATE de \_ hardware \_ VERTEXPROCESSING).</span><span class="sxs-lookup"><span data-stu-id="1b236-148">D3DUSAGE\_SOFTWAREPROCESSING must be set for buffers to be used with software vertex processing in mixed mode, but it should not be set for the best possible performance when using hardware index processing in mixed mode (D3DCREATE\_HARDWARE\_VERTEXPROCESSING).</span></span> <span data-ttu-id="1b236-149">Sin embargo, el establecimiento de D3DUSAGE \_ SOFTWAREPROCESSING es la única opción cuando se usa un solo búfer con el procesamiento de vértices de hardware y software.</span><span class="sxs-lookup"><span data-stu-id="1b236-149">However, setting D3DUSAGE\_SOFTWAREPROCESSING is the only option when a single buffer is used with both hardware and software vertex processing.</span></span> <span data-ttu-id="1b236-150">D3DUSAGE \_ SOFTWAREPROCESSING se permite para dispositivos mixtos y de software.</span><span class="sxs-lookup"><span data-stu-id="1b236-150">D3DUSAGE\_SOFTWAREPROCESSING is allowed for mixed and software devices.</span></span>

    <span data-ttu-id="1b236-151">Es posible forzar búferes de vértices y de índices en la memoria del sistema mediante \_ la especificación de D3DPOOL SYSTEMMEM, incluso cuando el procesamiento de índices se realiza en el hardware.</span><span class="sxs-lookup"><span data-stu-id="1b236-151">It is possible to force vertex and index buffers into system memory by specifying D3DPOOL\_SYSTEMMEM, even when the index processing is being done in hardware.</span></span> <span data-ttu-id="1b236-152">Se trata de una manera de evitar grandes cantidades excesivas de memoria bloqueada en páginas cuando un controlador coloca estos búferes en la memoria AGP.</span><span class="sxs-lookup"><span data-stu-id="1b236-152">This is a way to avoid overly large amounts of page-locked memory when a driver is putting these buffers into AGP memory.</span></span>

-   <span data-ttu-id="1b236-153">El tercer parámetro es el miembro D3DFMT \_ INDEX16 o D3DFMT \_ INDEX32 del tipo enumerado [D3DFORMAT](d3dformat.md) que especifica el tamaño de cada índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-153">The third parameter is either the D3DFMT\_INDEX16 or D3DFMT\_INDEX32 member of the [D3DFORMAT](d3dformat.md) enumerated type that specifies the size of each index.</span></span>

-   <span data-ttu-id="1b236-154">El cuarto parámetro es un miembro del tipo enumerado [**D3DPOOL**](./d3dpool.md) que indica al sistema dónde colocar el nuevo búfer de índice en la memoria.</span><span class="sxs-lookup"><span data-stu-id="1b236-154">The fourth parameter is a member of the [**D3DPOOL**](./d3dpool.md) enumerated type that tells the system where in memory to place the new index buffer.</span></span>

-   <span data-ttu-id="1b236-155">El último parámetro que [**IDirect3DDevice9:: CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) acepta es la dirección de una variable que se rellena con un puntero a la nueva interfaz [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) del objeto de búfer de vértices, si la llamada se realiza correctamente.</span><span class="sxs-lookup"><span data-stu-id="1b236-155">The final parameter that [**IDirect3DDevice9::CreateIndexBuffer**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createindexbuffer) accepts is the address of a variable that is filled with a pointer to the new [**IDirect3DIndexBuffer9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dindexbuffer9) interface of the vertex buffer object, if the call succeeds.</span></span>

<span data-ttu-id="1b236-156">En el ejemplo de código de C++ siguiente se muestra cómo la creación de un búfer de índice podría ser similar en el código.</span><span class="sxs-lookup"><span data-stu-id="1b236-156">The following C++ code example shows what creating an index buffer might look like in code.</span></span>


```
/*
 * For the purposes of this example, the d3dDevice variable is the 
 * address of an IDirect3DDevice9 interface exposed by a 
 * Direct3DDevice object, g_IB is a variable of type 
 * LPDIRECT3DINDEXBUFFER9.
 */

if( FAILED( d3dDevice->CreateIndexBuffer( 16384 *sizeof(WORD),
           D3DUSAGE_WRITEONLY, D3DFMT_INDEX16, D3DPOOL_DEFAULT, 
           &g_IB, NULL ) ) )
    return E_FAIL;
```



## <a name="access-an-index-buffer"></a><span data-ttu-id="1b236-157">Acceder a un búfer de índice</span><span class="sxs-lookup"><span data-stu-id="1b236-157">Access an Index Buffer</span></span>

<span data-ttu-id="1b236-158">Los objetos de búfer de índice permiten a las aplicaciones tener acceso directamente a la memoria asignada para los datos de índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-158">Index buffer objects enable applications to directly access the memory allocated for index data.</span></span> <span data-ttu-id="1b236-159">Puede recuperar un puntero a la memoria del búfer de índice llamando al método [**IDirect3DIndexBuffer9:: Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) y, a continuación, accediendo a la memoria según sea necesario para rellenar el búfer con nuevos datos de índice o para leer los datos que contiene.</span><span class="sxs-lookup"><span data-stu-id="1b236-159">You can retrieve a pointer to index buffer memory by calling the [**IDirect3DIndexBuffer9::Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) method, and then accessing the memory as needed to fill the buffer with new index data or to read any data it contains.</span></span> <span data-ttu-id="1b236-160">El método lock acepta cuatro parámetros.</span><span class="sxs-lookup"><span data-stu-id="1b236-160">The Lock method accepts four parameters.</span></span> <span data-ttu-id="1b236-161">El primero, *OffsetToLock*, es el desplazamiento en los datos del índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-161">The first, *OffsetToLock*, is the offset into the index data.</span></span> <span data-ttu-id="1b236-162">El segundo parámetro es el tamaño, medido en bytes, de los datos del índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-162">The second parameter is the size, measured in bytes, of the index data.</span></span> <span data-ttu-id="1b236-163">El tercer parámetro aceptado por el método **IDirect3DIndexBuffer9:: Lock** , *ppbData*, es la dirección de un puntero de bytes rellenado con un puntero a los datos del índice, si la llamada se realiza correctamente.</span><span class="sxs-lookup"><span data-stu-id="1b236-163">The third parameter accepted by the **IDirect3DIndexBuffer9::Lock** method, *ppbData*, is the address of a BYTE pointer filled with a pointer to the index data, if the call succeeds.</span></span>

<span data-ttu-id="1b236-164">El último parámetro, *Flags*, indica al sistema cómo debe bloquearse la memoria.</span><span class="sxs-lookup"><span data-stu-id="1b236-164">The last parameter, *Flags*, tells the system how the memory should be locked.</span></span> <span data-ttu-id="1b236-165">Puede utilizarlo para indicar el modo en que la aplicación tiene acceso a los datos en el búfer.</span><span class="sxs-lookup"><span data-stu-id="1b236-165">You can use it to indicate how the application accesses the data in the buffer.</span></span> <span data-ttu-id="1b236-166">Especifique las constantes del parámetro *Flags* según la forma en que la aplicación tendrá acceso a los datos del índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-166">Specify constants for the *Flags* parameter according to the way the index data will be accessed by your application.</span></span> <span data-ttu-id="1b236-167">Esto permite que el controlador bloquee la memoria y proporcione el mejor rendimiento según el tipo de acceso solicitado.</span><span class="sxs-lookup"><span data-stu-id="1b236-167">This allows the driver to lock the memory and provide the best performance given the requested access type.</span></span> <span data-ttu-id="1b236-168">Use \_ la marca ReadOnly de D3DLOCK si la aplicación solo va a leer desde la memoria del búfer de índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-168">Use D3DLOCK\_READONLY flag if your application will read only from the index buffer memory.</span></span> <span data-ttu-id="1b236-169">La inclusión de esta marca permite a Direct3D optimizar sus procedimientos internos para mejorar la eficacia, dado que el acceso a la memoria será de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="1b236-169">Including this flag enables Direct3D to optimize its internal procedures to improve efficiency, given that access to the memory will be read-only.</span></span>

<span data-ttu-id="1b236-170">Después de rellenar o leer los datos del índice, llame al método [**IDirect3DIndexBuffer9:: Unlock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-unlock) , tal como se muestra en el ejemplo de código siguiente.</span><span class="sxs-lookup"><span data-stu-id="1b236-170">After you fill or read the index data, call the [**IDirect3DIndexBuffer9::Unlock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-unlock) method, as shown in the following code example.</span></span>


```
// This code example assumes the m_pIndexBuffer is a variable of type 
// LPDIRECT3DINDEXBUFFER9 and that g_Indices has been properly 
// initialized with indices.

// To fill the index buffer, you must lock the buffer to gain 
// access to the indices. This mechanism is required because index
// buffers may be in device memory.

VOID* pIndices;

if( FAILED( m_pIndexBuffer->Lock( 
      0,                 // Fill from start of the buffer
      sizeof(g_Indices), // Size of the data to load
      BYTE**)&pIndices,  // Returned index data
      0 ) ) )            // Send default flags to the lock
{
    SAFE_RELEASE(m_pIndexBuffer);
    return E_FAIL;
}

memcpy( pIndices, g_Indices, sizeof(g_Indices) );
m_pIndexBuffer->Unlock();
```



> [!Note]
>
> <span data-ttu-id="1b236-171">Si crea un búfer de índice con la \_ marca WRITEONLY de D3DUSAGE, no use la \_ marca de bloqueo de solo lectura D3DLOCK.</span><span class="sxs-lookup"><span data-stu-id="1b236-171">If you create an index buffer with the D3DUSAGE\_WRITEONLY flag, do not use the D3DLOCK\_READONLY locking flag.</span></span> <span data-ttu-id="1b236-172">Use la \_ marca ReadOnly de D3DLOCK si la aplicación solo va a leer desde la memoria del búfer de índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-172">Use the D3DLOCK\_READONLY flag if your application will read only from the index buffer memory.</span></span> <span data-ttu-id="1b236-173">La inclusión de esta marca permite a Direct3D optimizar sus procedimientos internos para mejorar la eficacia, dado que el acceso a la memoria será de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="1b236-173">Including this flag enables Direct3D to optimize its internal procedures to improve efficiency, given that access to the memory will be read-only.</span></span>
>
> <span data-ttu-id="1b236-174">Para obtener información sobre el uso de D3DLOCK \_ discard o D3DLOCK \_ NOOVERWRITE para el parámetro *Flags* del método [**IDirect3DIndexBuffer9:: Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) , vea [optimizaciones de rendimiento (Direct3D 9)](performance-optimizations.md).</span><span class="sxs-lookup"><span data-stu-id="1b236-174">For information about using D3DLOCK\_DISCARD or D3DLOCK\_NOOVERWRITE for the *Flags* parameter of the [**IDirect3DIndexBuffer9::Lock**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dindexbuffer9-lock) method, see [Performance Optimizations (Direct3D 9)](performance-optimizations.md).</span></span>

 

<span data-ttu-id="1b236-175">En C++, dado que tiene acceso directo a la memoria asignada para el búfer de índice, asegúrese de que la aplicación tenga acceso correctamente a la memoria asignada.</span><span class="sxs-lookup"><span data-stu-id="1b236-175">In C++, because you directly access the memory allocated for the index buffer, make sure your application properly accesses the allocated memory.</span></span> <span data-ttu-id="1b236-176">De lo contrario, se arriesga a representar que la memoria no es válida.</span><span class="sxs-lookup"><span data-stu-id="1b236-176">Otherwise, you risk rendering that memory invalid.</span></span> <span data-ttu-id="1b236-177">Use el paso del formato de índice que utiliza la aplicación para pasar de un índice del búfer asignado a otro.</span><span class="sxs-lookup"><span data-stu-id="1b236-177">Use the stride of the index format your application uses to move from one index in the allocated buffer to another.</span></span>

<span data-ttu-id="1b236-178">Recupere información sobre un búfer de índice mediante una llamada al método [**IDirect3DIndexBuffer9:: GetDesc**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="1b236-178">Retrieve information about an index buffer by calling the [**IDirect3DIndexBuffer9::GetDesc**](/windows/desktop/api) method.</span></span> <span data-ttu-id="1b236-179">Este método rellena los miembros de la estructura [**D3DINDEXBUFFER \_ DESC**](d3dindexbuffer-desc.md) con información sobre el búfer de índice.</span><span class="sxs-lookup"><span data-stu-id="1b236-179">This method fills the members of the [**D3DINDEXBUFFER\_DESC**](d3dindexbuffer-desc.md) structure with information about the index buffer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="1b236-180">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="1b236-180">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1b236-181">Recursos de Direct3D</span><span class="sxs-lookup"><span data-stu-id="1b236-181">Direct3D Resources</span></span>](direct3d-resources.md)
</dt> <dt>

[<span data-ttu-id="1b236-182">Representación de búferes de vértices y de índices (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="1b236-182">Rendering from Vertex and Index Buffers (Direct3D 9)</span></span>](rendering-from-vertex-and-index-buffers.md)
</dt> <dt>

[<span data-ttu-id="1b236-183">Búferes de vértices (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="1b236-183">Vertex Buffers (Direct3D 9)</span></span>](vertex-buffers.md)
</dt> </dl>

 

 
