---
title: Control de errores (RPC)
description: En RPC sincrónico, un cliente realiza una llamada remota que devuelve con un código de error o correcto.
ms.assetid: 7dfc9f84-ce3c-49f3-8f72-b212095133fd
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 017892b94438cc73f88cbfe60c03c088bf3ebcc9
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/10/2020
ms.locfileid: "104078776"
---
# <a name="error-handling-rpc"></a><span data-ttu-id="e4d98-103">Control de errores (RPC)</span><span class="sxs-lookup"><span data-stu-id="e4d98-103">Error Handling (RPC)</span></span>

<span data-ttu-id="e4d98-104">En RPC sincrónico, un cliente realiza una llamada remota que devuelve con un código de error o correcto.</span><span class="sxs-lookup"><span data-stu-id="e4d98-104">In synchronous RPC, a client makes a remote call that returns with either a success or failure code.</span></span> <span data-ttu-id="e4d98-105">RPC asincrónico proporciona más oportunidades para que se produzca un error en una llamada y estos errores se controlan de manera diferente, en función de dónde y cuándo se producen.</span><span class="sxs-lookup"><span data-stu-id="e4d98-105">Asynchronous RPC provides more opportunities for a call to fail, and these failures are handled differently, depending on where and when they occur.</span></span> <span data-ttu-id="e4d98-106">En la tabla siguiente se describen las formas en que se puede producir un error en una llamada y cómo se administra.</span><span class="sxs-lookup"><span data-stu-id="e4d98-106">The following table describes the ways in which a call can fail, and how it is handled.</span></span>

## <a name="client-side-cleanup"></a><span data-ttu-id="e4d98-107">Limpieza del lado cliente</span><span class="sxs-lookup"><span data-stu-id="e4d98-107">Client-side Cleanup</span></span>



| <span data-ttu-id="e4d98-108">Síntoma de error</span><span class="sxs-lookup"><span data-stu-id="e4d98-108">Failure symptom</span></span>                                                                                                                                  | <span data-ttu-id="e4d98-109">Limpieza</span><span class="sxs-lookup"><span data-stu-id="e4d98-109">Cleanup</span></span>                                                                                                                         |
|--------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e4d98-110">El cliente detecta una excepción cuando llama al procedimiento remoto.</span><span class="sxs-lookup"><span data-stu-id="e4d98-110">Client catches an exception when it calls the remote procedure.</span></span>                                                                                  | <span data-ttu-id="e4d98-111">No es necesaria ninguna llamada API de RPC.</span><span class="sxs-lookup"><span data-stu-id="e4d98-111">No RPC API calls are necessary.</span></span> <span data-ttu-id="e4d98-112">Se ha limpiado todo el estado de RPC.</span><span class="sxs-lookup"><span data-stu-id="e4d98-112">All RPC state has been cleaned up.</span></span>                                                              |
| <span data-ttu-id="e4d98-113">El cliente recibe una notificación de llamada completa, pero cuando llama a [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall), recibe un código de error.</span><span class="sxs-lookup"><span data-stu-id="e4d98-113">Client receives a call complete notification, but when it calls [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall), it receives an error code.</span></span> | <span data-ttu-id="e4d98-114">No es necesaria ninguna llamada API de RPC.</span><span class="sxs-lookup"><span data-stu-id="e4d98-114">No RPC API calls are necessary.</span></span> <span data-ttu-id="e4d98-115">Se ha limpiado todo el estado de RPC.</span><span class="sxs-lookup"><span data-stu-id="e4d98-115">All RPC state has been cleaned up.</span></span>                                                              |
| <span data-ttu-id="e4d98-116">El cliente emite una cancelación no anulada o anulada.</span><span class="sxs-lookup"><span data-stu-id="e4d98-116">Client issues non-abortive or abortive cancel.</span></span>                                                                                                   | <span data-ttu-id="e4d98-117">El cliente debe esperar la notificación y llamar a [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) cuando llega la notificación.</span><span class="sxs-lookup"><span data-stu-id="e4d98-117">Client must wait for notification, and call [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) when the notification arrives.</span></span> |



 

<span data-ttu-id="e4d98-118">En la limpieza del lado servidor, un concepto clave es el punto de la mano.</span><span class="sxs-lookup"><span data-stu-id="e4d98-118">In server side cleanup, a key concept is the hand-off point.</span></span> <span data-ttu-id="e4d98-119">Durante el procesamiento del lado servidor de una llamada asincrónica, normalmente se realiza algún procesamiento en el subproceso que recibió la llamada (también conocido como *subproceso de distribuidor*) y, a continuación, opcionalmente, el subproceso de distribuidor coloca el estado suficiente en un bloque de memoria y señala otro subproceso (también conocido como *subproceso de trabajo*) para continuar el procesamiento de la llamada.</span><span class="sxs-lookup"><span data-stu-id="e4d98-119">During the server side processing of an asynchronous call, some processing is usually performed on the thread that received the call (also known as the *dispatcher thread*), and then, optionally, the dispatcher thread puts enough state into a memory block and signals another thread (also known as *worker thread*) to continue processing for the call.</span></span> <span data-ttu-id="e4d98-120">El momento en el que el subproceso de distribuidor indica correctamente que el subproceso de trabajo se denomina *punto de entrega*.</span><span class="sxs-lookup"><span data-stu-id="e4d98-120">The moment at which the dispatcher thread successfully signals that the worker thread is called the *hand-off point*.</span></span>

## <a name="server-side-cleanup"></a><span data-ttu-id="e4d98-121">Limpieza del lado servidor</span><span class="sxs-lookup"><span data-stu-id="e4d98-121">Server Side Cleanup</span></span>



| <span data-ttu-id="e4d98-122">Error detectado</span><span class="sxs-lookup"><span data-stu-id="e4d98-122">Error encountered</span></span>      | <span data-ttu-id="e4d98-123">Limpieza</span><span class="sxs-lookup"><span data-stu-id="e4d98-123">Cleanup</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e4d98-124">Antes del punto de entrega.</span><span class="sxs-lookup"><span data-stu-id="e4d98-124">Before hand-off point.</span></span> | <span data-ttu-id="e4d98-125">Excepción de inicio.</span><span class="sxs-lookup"><span data-stu-id="e4d98-125">Throw exception.</span></span> <span data-ttu-id="e4d98-126">No es necesario realizar ninguna llamada a [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) .</span><span class="sxs-lookup"><span data-stu-id="e4d98-126">No call to [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) is necessary.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="e4d98-127">Después del punto de entrega.</span><span class="sxs-lookup"><span data-stu-id="e4d98-127">After hand-off point.</span></span>  | <span data-ttu-id="e4d98-128">Llame a [**RpcAsyncAbortCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasyncabortcall) o, si el error no es grave, y los resultados todavía se pueden devolver al cliente, [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall).</span><span class="sxs-lookup"><span data-stu-id="e4d98-128">Call [**RpcAsyncAbortCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasyncabortcall) or, if the error is not fatal and results can still be returned to the client, [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall).</span></span> <span data-ttu-id="e4d98-129">Si se produce un error en la llamada a la función **RpcAsyncCompleteCall** , el tiempo de ejecución de RPC libera los parámetros.</span><span class="sxs-lookup"><span data-stu-id="e4d98-129">If the **RpcAsyncCompleteCall** function call fails, the RPC runtime frees the parameters.</span></span> <span data-ttu-id="e4d98-130">El usuario no debe tener acceso a estos parámetros.</span><span class="sxs-lookup"><span data-stu-id="e4d98-130">The user must not access those parameters.</span></span> <span data-ttu-id="e4d98-131">El subproceso del distribuidor no debe realizar ningún procesamiento sustancial que pueda producir un error después del punto de la mano, porque ya no puede anular la llamada de forma segura.</span><span class="sxs-lookup"><span data-stu-id="e4d98-131">The dispatcher thread must not perform any substantial processing that may fail after the hand off point, because it no longer can safely abort the call.</span></span> <span data-ttu-id="e4d98-132">En concreto, no debe producir una excepción después del punto de la mano o el servidor puede bloquearse.</span><span class="sxs-lookup"><span data-stu-id="e4d98-132">Specifically, it must not throw an exception after the hand off point, or the server may crash.</span></span> |



 

## <a name="special-error-handling-cases-for-pipes"></a><span data-ttu-id="e4d98-133">Casos especiales de control de errores para canalizaciones</span><span class="sxs-lookup"><span data-stu-id="e4d98-133">Special Error Handling Cases for Pipes</span></span>

<span data-ttu-id="e4d98-134">Hay casos especiales para el control de errores al usar canalizaciones.</span><span class="sxs-lookup"><span data-stu-id="e4d98-134">There are special cases for error handling when using pipes.</span></span> <span data-ttu-id="e4d98-135">En la lista siguiente se explica el origen del error y cómo controlar el error.</span><span class="sxs-lookup"><span data-stu-id="e4d98-135">The following list explains the source of the failure, and how to handle the error.</span></span>



| <span data-ttu-id="e4d98-136">Origen de error</span><span class="sxs-lookup"><span data-stu-id="e4d98-136">Source of failure</span></span>                                                                                                 | <span data-ttu-id="e4d98-137">Cómo se controla</span><span class="sxs-lookup"><span data-stu-id="e4d98-137">How handled</span></span>                                                                                                |
|-------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e4d98-138">El cliente llama a la extracción y se produce un error en la llamada.</span><span class="sxs-lookup"><span data-stu-id="e4d98-138">Client calls push and the call fails.</span></span>                                                                             | <span data-ttu-id="e4d98-139">No es necesaria ninguna llamada API de RPC.</span><span class="sxs-lookup"><span data-stu-id="e4d98-139">No RPC API calls are necessary.</span></span> <span data-ttu-id="e4d98-140">Se ha limpiado todo el estado de RPC.</span><span class="sxs-lookup"><span data-stu-id="e4d98-140">All RPC state has been cleaned up.</span></span>                                         |
| <span data-ttu-id="e4d98-141">El cliente llama a [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) antes de que se vacíen las canalizaciones [**de**](/windows/desktop/Midl/in) .</span><span class="sxs-lookup"><span data-stu-id="e4d98-141">Client calls [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) before the [**in**](/windows/desktop/Midl/in) pipes are drained.</span></span> | <span data-ttu-id="e4d98-142">Se produce un error en la llamada con el código de error de relleno de canalización adecuado.</span><span class="sxs-lookup"><span data-stu-id="e4d98-142">Call fails with the appropriate pipe-filling error code.</span></span>                                                   |
| <span data-ttu-id="e4d98-143">El cliente llama a Pull y se produce un error en la llamada.</span><span class="sxs-lookup"><span data-stu-id="e4d98-143">Client calls pull and the call fails.</span></span>                                                                             | <span data-ttu-id="e4d98-144">No es necesaria ninguna llamada API de RPC.</span><span class="sxs-lookup"><span data-stu-id="e4d98-144">No RPC API calls are necessary.</span></span> <span data-ttu-id="e4d98-145">Se ha limpiado todo el estado de RPC.</span><span class="sxs-lookup"><span data-stu-id="e4d98-145">All RPC state has been cleaned up.</span></span>                                         |
| <span data-ttu-id="e4d98-146">El cliente o el servidor llama a la inserción o extracción en el orden equivocado.</span><span class="sxs-lookup"><span data-stu-id="e4d98-146">Either client or server calls push or pull in the wrong order.</span></span>                                                    | <span data-ttu-id="e4d98-147">Tiempo de ejecución devuelve el estado de error de rellenado de canalización.</span><span class="sxs-lookup"><span data-stu-id="e4d98-147">Run-time returns pipe-filling error status.</span></span>                                                                |
| <span data-ttu-id="e4d98-148">El servidor llama a la inserción o extracción y se produce un error en la llamada.</span><span class="sxs-lookup"><span data-stu-id="e4d98-148">Server calls push or pull and the call fails.</span></span>                                                                     | <span data-ttu-id="e4d98-149">La extracción devuelve un código de error.</span><span class="sxs-lookup"><span data-stu-id="e4d98-149">Push returns a failure code.</span></span> <span data-ttu-id="e4d98-150">No es necesario realizar ninguna llamada a [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) .</span><span class="sxs-lookup"><span data-stu-id="e4d98-150">No call to [**RpcAsyncCompleteCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasynccompletecall) is necessary.</span></span> |
| <span data-ttu-id="e4d98-151">El servidor llama a **RpcAsyncCompleteCall** antes de que se hayan purgado las canalizaciones.</span><span class="sxs-lookup"><span data-stu-id="e4d98-151">Server calls **RpcAsyncCompleteCall** before the pipes have been drained.</span></span>                                         | <span data-ttu-id="e4d98-152">La llamada de canalización devuelve un estado de error de llenado de canalización.</span><span class="sxs-lookup"><span data-stu-id="e4d98-152">The pipe call returns a pipe filling error status.</span></span>                                                         |
| <span data-ttu-id="e4d98-153">Después del envío, se produce un error en una operación de recepción.</span><span class="sxs-lookup"><span data-stu-id="e4d98-153">After the dispatch, a receive operation fails.</span></span>                                                                    | <span data-ttu-id="e4d98-154">La próxima vez que el servidor llame a pull para recibir los datos de canalización, se devuelve un error.</span><span class="sxs-lookup"><span data-stu-id="e4d98-154">The next time the server calls pull to receive pipe data, an error is returned.</span></span>                            |



 

 

 
