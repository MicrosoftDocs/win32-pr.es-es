---
title: Comparar la aceleración de hardware de Direct2D y GDI
description: Direct2D y GDI son API de representación 2D en modo inmediato y ambos ofrecen cierto grado de aceleración de hardware.
ms.assetid: 0028a0c3-445d-46b7-b55b-46dff3bce9ae
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f05dce8719f4d07d3160c65b88570391c3eb736
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104359015"
---
# <a name="comparing-direct2d-and-gdi-hardware-acceleration"></a><span data-ttu-id="1eb53-103">Comparar la aceleración de hardware de Direct2D y GDI</span><span class="sxs-lookup"><span data-stu-id="1eb53-103">Comparing Direct2D and GDI Hardware Acceleration</span></span>

<span data-ttu-id="1eb53-104">[Direct2D](./direct2d-portal.md) y [GDI](/windows/desktop/gdi/windows-gdi) son API de representación 2D en modo inmediato y ambos ofrecen cierto grado de aceleración de hardware.</span><span class="sxs-lookup"><span data-stu-id="1eb53-104">[Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) are both immediate mode 2D rendering APIs and both offer some degree of hardware acceleration.</span></span> <span data-ttu-id="1eb53-105">En este tema se analizan las diferencias entre Direct2D y GDI, incluidas las diferencias anteriores y las presentes en las características de aceleración de hardware de ambas API.</span><span class="sxs-lookup"><span data-stu-id="1eb53-105">This topic explores the differences between Direct2D and GDI, including past and present differences in the hardware acceleration features of both APIs.</span></span>

<span data-ttu-id="1eb53-106">Este tema consta de las siguientes partes:</span><span class="sxs-lookup"><span data-stu-id="1eb53-106">This topic has the following parts:</span></span>

-   [<span data-ttu-id="1eb53-107">Diferencias entre Direct2D y GDI</span><span class="sxs-lookup"><span data-stu-id="1eb53-107">Differences between Direct2D and GDI</span></span>](#differences-between-direct2d-and-gdi)
-   [<span data-ttu-id="1eb53-108">Aceleración de hardware de GDI y Direct2D</span><span class="sxs-lookup"><span data-stu-id="1eb53-108">GDI and Direct2D hardware acceleration</span></span>](#gdi-and-direct2d-hardware-acceleration)
    -   [<span data-ttu-id="1eb53-109">Aumento de la complejidad y el tamaño de los controladores de pantalla</span><span class="sxs-lookup"><span data-stu-id="1eb53-109">Increasing complexity and size of display drivers</span></span>](#increasing-complexity-and-size-of-display-drivers)
    -   [<span data-ttu-id="1eb53-110">Dificultad en la sincronización de espacios de direcciones de kernel globales y de sesión</span><span class="sxs-lookup"><span data-stu-id="1eb53-110">Difficulty in synchronizing session and global kernel address spaces</span></span>](#difficulty-in-synchronizing-session-and-global-kernel-address-spaces)
    -   [<span data-ttu-id="1eb53-111">Administración de ventanas compuestas</span><span class="sxs-lookup"><span data-stu-id="1eb53-111">Composited window management</span></span>](#composited-window-management)
-   [<span data-ttu-id="1eb53-112">Representación de GDI en Windows 7</span><span class="sxs-lookup"><span data-stu-id="1eb53-112">GDI rendering in Windows 7</span></span>](#gdi-rendering-in-windows-7)
-   [<span data-ttu-id="1eb53-113">Comparación de la aceleración de Direct2D y GDI en Windows 7</span><span class="sxs-lookup"><span data-stu-id="1eb53-113">Contrasting Direct2D and GDI acceleration in Windows 7</span></span>](#contrasting-direct2d-and-gdi-acceleration-in-windows-7)
    -   [<span data-ttu-id="1eb53-114">Ubicación de los recursos</span><span class="sxs-lookup"><span data-stu-id="1eb53-114">Location of resources</span></span>](#location-of-resources)
    -   [<span data-ttu-id="1eb53-115">Método de representación</span><span class="sxs-lookup"><span data-stu-id="1eb53-115">Rendering method</span></span>](#rendering-method)
    -   [<span data-ttu-id="1eb53-116">Escalabilidad</span><span class="sxs-lookup"><span data-stu-id="1eb53-116">Scalability</span></span>](#scalability)
    -   [<span data-ttu-id="1eb53-117">Ubicación</span><span class="sxs-lookup"><span data-stu-id="1eb53-117">Location</span></span>](#location-of-resources)
    -   [<span data-ttu-id="1eb53-118">Disponibilidad de aceleración de hardware</span><span class="sxs-lookup"><span data-stu-id="1eb53-118">Availability of Hardware Acceleration</span></span>](#availability-of-hardware-acceleration)
    -   [<span data-ttu-id="1eb53-119">Modelo de presentación</span><span class="sxs-lookup"><span data-stu-id="1eb53-119">Presentation Model</span></span>](#presentation-model)
-   [<span data-ttu-id="1eb53-120">Conclusión</span><span class="sxs-lookup"><span data-stu-id="1eb53-120">Conclusion</span></span>](#conclusion)

## <a name="differences-between-direct2d-and-gdi"></a><span data-ttu-id="1eb53-121">Diferencias entre Direct2D y GDI</span><span class="sxs-lookup"><span data-stu-id="1eb53-121">Differences between Direct2D and GDI</span></span>

<span data-ttu-id="1eb53-122">[GDI](/windows/desktop/gdi/windows-gdi) representa geometrías opacas y con alias, como polígonos, elipses y líneas.</span><span class="sxs-lookup"><span data-stu-id="1eb53-122">[GDI](/windows/desktop/gdi/windows-gdi) renders opaque, aliased geometries such as polygons, ellipses and lines.</span></span> <span data-ttu-id="1eb53-123">Representa el texto con alias y ClearType, y puede admitir la combinación de transparencia a través de la API de AlphaBlend.</span><span class="sxs-lookup"><span data-stu-id="1eb53-123">It renders aliased and ClearType text, and it can support transparency blending through the AlphaBlend API.</span></span> <span data-ttu-id="1eb53-124">Sin embargo, su control de transparencia es incoherente y la mayoría de las API de GDI simplemente omiten el canal alfa.</span><span class="sxs-lookup"><span data-stu-id="1eb53-124">However, its handling of transparency is inconsistent and most GDI APIs simply ignore the alpha channel.</span></span> <span data-ttu-id="1eb53-125">Algunas API de GDI garantizan lo que contendrá el canal alfa después de una operación.</span><span class="sxs-lookup"><span data-stu-id="1eb53-125">Few GDI APIs guarantee what the alpha channel will contain after an operation.</span></span> <span data-ttu-id="1eb53-126">Lo que es más importante, la representación de GDI no se asigna fácilmente a las operaciones 3D y una GPU moderna se representa de forma más eficaz en la parte 3D de su motor de representación.</span><span class="sxs-lookup"><span data-stu-id="1eb53-126">More importantly, GDI's rendering does not map easily to 3D operations, and a modern GPU renders most efficiently on the 3D portion of its rendering engine.</span></span> <span data-ttu-id="1eb53-127">Por ejemplo, las líneas con alias de [Direct2D](./direct2d-portal.md)están diseñadas para implementarse simplemente como dos triángulos representados en la GPU, mientras que GDI usa el algoritmo de dibujo de líneas de Bresenham.</span><span class="sxs-lookup"><span data-stu-id="1eb53-127">For example, [Direct2D](./direct2d-portal.md)'s aliased lines are designed to be implemented simply as two triangles rendered on the GPU, whereas GDI uses Bresenham's line drawing algorithm.</span></span>

<span data-ttu-id="1eb53-128">[Direct2D](./direct2d-portal.md) representa primitivos opacos, transparentes, con alias y suavizado de contorno.</span><span class="sxs-lookup"><span data-stu-id="1eb53-128">[Direct2D](./direct2d-portal.md) renders opaque, transparent, aliased and anti-aliased primitives.</span></span> <span data-ttu-id="1eb53-129">Las ius modernas suelen usar la transparencia y la animación.</span><span class="sxs-lookup"><span data-stu-id="1eb53-129">Modern UIs often make use of transparency and animation.</span></span> <span data-ttu-id="1eb53-130">Direct2D facilita la creación de una interfaz de usuario moderna porque tiene garantías estrictas sobre cómo acepta y representa el contenido transparente, y todas sus primitivas se representan mediante la aceleración de hardware.</span><span class="sxs-lookup"><span data-stu-id="1eb53-130">Direct2D makes it easier to create a modern UI because it has strict guarantees on how it accepts and renders transparent content, and all of its primitives are rendered using hardware acceleration.</span></span> <span data-ttu-id="1eb53-131">Direct2D no es un supraconjunto puro de [GDI](/windows/desktop/gdi/windows-gdi): los primitivos que se habrían ralentizado excesivamente cuando se implementó en una GPU no están presentes en Direct2D.</span><span class="sxs-lookup"><span data-stu-id="1eb53-131">Direct2D is not a pure superset of [GDI](/windows/desktop/gdi/windows-gdi): primitives that would have been unreasonably slow when implemented on a GPU aren't present in Direct2D.</span></span> <span data-ttu-id="1eb53-132">Dado que Direct2D se crea con este énfasis en la aceleración 3D, también es fácil de usar con Direct3D.</span><span class="sxs-lookup"><span data-stu-id="1eb53-132">Because Direct2D is built with this emphasis on 3D acceleration it is also easy to use with Direct3D.</span></span>

<span data-ttu-id="1eb53-133">Desde Windows NT 4, [GDI](/windows/desktop/gdi/windows-gdi) se ha ejecutado en modo kernel.</span><span class="sxs-lookup"><span data-stu-id="1eb53-133">Since Windows NT 4, [GDI](/windows/desktop/gdi/windows-gdi) has run in kernel mode.</span></span> <span data-ttu-id="1eb53-134">La aplicación llama a GDI que, a continuación, llama a su homólogo en modo kernel, que pasa los primitivos a su propio modelo de controlador.</span><span class="sxs-lookup"><span data-stu-id="1eb53-134">The application calls GDI which then calls its kernel mode counterpart which passes the primitives to its own driver model.</span></span> <span data-ttu-id="1eb53-135">A continuación, este controlador envía los resultados al controlador de pantalla del modo kernel global.</span><span class="sxs-lookup"><span data-stu-id="1eb53-135">This driver then sends the results to the global kernel mode display driver.</span></span>

<span data-ttu-id="1eb53-136">A partir de Windows 2000, [GDI](/windows/desktop/gdi/windows-gdi) y los controladores GDI se han ejecutado en un espacio independiente en el kernel denominado "espacio de sesión".</span><span class="sxs-lookup"><span data-stu-id="1eb53-136">Starting with Windows 2000, [GDI](/windows/desktop/gdi/windows-gdi) and the GDI drivers have run in an independent space in the kernel called "session space."</span></span> <span data-ttu-id="1eb53-137">Se crea un espacio de direcciones de sesión para cada sesión de inicio de sesión y cada instancia de GDI se ejecuta de forma independiente en este espacio de direcciones de modo kernel distinto.</span><span class="sxs-lookup"><span data-stu-id="1eb53-137">A session address space is created for each logon session, and each instance of GDI runs independently in this distinct kernel mode address space.</span></span> <span data-ttu-id="1eb53-138">Sin embargo, Direct2D se ejecuta en modo usuario y pasa los comandos de dibujo a través del controlador de Direct3D modo usuario al controlador de modo kernel.</span><span class="sxs-lookup"><span data-stu-id="1eb53-138">Direct2D, however, runs in user mode and passes drawing commands through the user mode Direct3D driver to the kernel mode driver.</span></span>

![Figura 1: direct2d comparado con GDI](images/direct2d-vs-gdi1.png)

## <a name="gdi-and-direct2d-hardware-acceleration"></a><span data-ttu-id="1eb53-140">Aceleración de hardware de GDI y Direct2D</span><span class="sxs-lookup"><span data-stu-id="1eb53-140">GDI and Direct2D hardware acceleration</span></span>

<span data-ttu-id="1eb53-141">La diferencia más importante entre [Direct2D](./direct2d-portal.md) y la aceleración de hardware de [GDI](/windows/desktop/gdi/windows-gdi) es la tecnología subyacente que las controla.</span><span class="sxs-lookup"><span data-stu-id="1eb53-141">The most important difference between [Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) hardware acceleration is the underlying technology that drives them.</span></span> <span data-ttu-id="1eb53-142">Direct2D está superpuesto en Direct3D y GDI tiene su propio modelo de controlador, la interfaz del controlador de dispositivo GDI (DDI), que corresponde a las primitivas de GDI.</span><span class="sxs-lookup"><span data-stu-id="1eb53-142">Direct2D is layered on top Direct3D and GDI has its own driver model, the GDI Device Driver Interface (DDI), which corresponds to the GDI primitives.</span></span> <span data-ttu-id="1eb53-143">El modelo de controlador de Direct3D corresponde a lo que representa el hardware de representación 3D en una GPU.</span><span class="sxs-lookup"><span data-stu-id="1eb53-143">The Direct3D driver model corresponds to what the 3D rendering hardware in a GPU renders.</span></span> <span data-ttu-id="1eb53-144">Cuando se definió el DDI de GDI por primera vez, la mayoría del hardware de aceleración de pantalla destinaba a los primitivos de GDI.</span><span class="sxs-lookup"><span data-stu-id="1eb53-144">When the GDI DDI was first defined, most display acceleration hardware targeted the GDI primitives.</span></span> <span data-ttu-id="1eb53-145">Con el tiempo, se ha hecho más hincapié en la aceleración de juegos 3D y menos en la aceleración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="1eb53-145">Over time, more and more emphasis was placed on 3D game acceleration and less on application acceleration.</span></span> <span data-ttu-id="1eb53-146">Como consecuencia, la API de BitBlt se aceleró en hardware y la mayoría de las demás operaciones de GDI no.</span><span class="sxs-lookup"><span data-stu-id="1eb53-146">As a consequence the BitBlt API was hardware accelerated and most other GDI operations were not.</span></span>

<span data-ttu-id="1eb53-147">Esto establece la fase para una secuencia de cambios en la forma en que se representa [GDI](/windows/desktop/gdi/windows-gdi) en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="1eb53-147">This set the stage for a sequence of changes to how [GDI](/windows/desktop/gdi/windows-gdi) renders to the display.</span></span> <span data-ttu-id="1eb53-148">En la siguiente ilustración se muestra cómo la representación de pantalla de GDI ha cambiado de Windows XP a Windows 7.</span><span class="sxs-lookup"><span data-stu-id="1eb53-148">The following illustration shows how GDI display rendering has changed from Windows XP to Windows 7.</span></span>

![Figura 2: evolución de la representación de la visualización de GDI](images/direct2d-vs-gdi2.png)

<span data-ttu-id="1eb53-150">También había varios factores adicionales que causaron cambios en el modelo de controlador de [GDI](/windows/desktop/gdi/windows-gdi) , como se explica a continuación.</span><span class="sxs-lookup"><span data-stu-id="1eb53-150">There were also a number of additional factors that caused changes to the [GDI](/windows/desktop/gdi/windows-gdi) driver model, as explained below.</span></span>

### <a name="increasing-complexity-and-size-of-display-drivers"></a><span data-ttu-id="1eb53-151">Aumento de la complejidad y el tamaño de los controladores de pantalla</span><span class="sxs-lookup"><span data-stu-id="1eb53-151">Increasing complexity and size of display drivers</span></span>

<span data-ttu-id="1eb53-152">los controladores 3D se han vuelto más complejos con el tiempo.</span><span class="sxs-lookup"><span data-stu-id="1eb53-152">3D drivers have become more complex over time.</span></span> <span data-ttu-id="1eb53-153">Un código más complejo tiende a tener más defectos, lo que hace que sea beneficioso que el controlador exista en modo de usuario, en el que un error de controlador no puede hacer que se reinicie el sistema.</span><span class="sxs-lookup"><span data-stu-id="1eb53-153">More complex code tends to have more defects making it beneficial for the driver to exist in user-mode where a driver bug can't cause a system reboot.</span></span> <span data-ttu-id="1eb53-154">Como se puede ver en la figura anterior, el controlador de pantalla se divide en un componente de modo de usuario complejo y un componente de modo kernel más sencillo.</span><span class="sxs-lookup"><span data-stu-id="1eb53-154">As can be seen in the figure above, the display driver is divided into a complex user mode component and a simpler kernel mode component.</span></span>

### <a name="difficulty-in-synchronizing-session-and-global-kernel-address-spaces"></a><span data-ttu-id="1eb53-155">Dificultad en la sincronización de espacios de direcciones de kernel globales y de sesión</span><span class="sxs-lookup"><span data-stu-id="1eb53-155">Difficulty in synchronizing session and global kernel address spaces</span></span>

<span data-ttu-id="1eb53-156">En Windows XP, existe un controlador de pantalla en dos espacios de direcciones diferentes: espacio de sesión y espacio del kernel.</span><span class="sxs-lookup"><span data-stu-id="1eb53-156">In Windows XP, a display driver exists in two different address spaces: session space and kernel space.</span></span> <span data-ttu-id="1eb53-157">Las partes del controlador deben responder a eventos como eventos de administración de energía.</span><span class="sxs-lookup"><span data-stu-id="1eb53-157">Parts of the driver need to respond to events such as power management events.</span></span> <span data-ttu-id="1eb53-158">Esto se debe sincronizar con el estado del controlador en el espacio de direcciones de la sesión.</span><span class="sxs-lookup"><span data-stu-id="1eb53-158">This needs to be synchronized with the driver state in the session address space.</span></span> <span data-ttu-id="1eb53-159">Esta es una tarea difícil y puede dar lugar a defectos cuando los controladores de pantalla intentan tratar con estos espacios de direcciones distintos.</span><span class="sxs-lookup"><span data-stu-id="1eb53-159">This is a difficult task and can lead to defects when display drivers attempt to deal with these distinct address spaces.</span></span>

### <a name="composited-window-management"></a><span data-ttu-id="1eb53-160">Administración de ventanas compuestas</span><span class="sxs-lookup"><span data-stu-id="1eb53-160">Composited window management</span></span>

<span data-ttu-id="1eb53-161">El Administrador de ventanas de escritorio (DWM), el administrador de ventanas de composición introducido en Windows 7, representa todas las ventanas en superficies fuera de la pantalla y, a continuación, las compone para que se muestren en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="1eb53-161">The Desktop Window Manager (DWM), the compositing window manager introduced in Windows 7, renders all windows to off-screen surfaces and then composes them together to be displayed on screen.</span></span> <span data-ttu-id="1eb53-162">Esto requiere que [GDI](/windows/desktop/gdi/windows-gdi) sea capaz de representarse en una superficie que Direct3D representará a continuación para que se muestre.</span><span class="sxs-lookup"><span data-stu-id="1eb53-162">This requires [GDI](/windows/desktop/gdi/windows-gdi) to be able to render to a surface which will then be rendered by Direct3D to display.</span></span> <span data-ttu-id="1eb53-163">Esto suponía un problema en el modelo de controladores de XP, ya que GDI y Direct3D eran pilas de controladores paralelas.</span><span class="sxs-lookup"><span data-stu-id="1eb53-163">This posed a problem in the XP driver model, since GDI and Direct3D were parallel driver stacks.</span></span>

<span data-ttu-id="1eb53-164">Como resultado, en Windows Vista, el controlador de visualización DDI de [GDI](/windows/desktop/gdi/windows-gdi) se implementó como el controlador de pantalla canónica (CDC) proporcionado por Microsoft, que representó el contenido GDI en un mapa de bits de memoria del sistema para que se componga en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="1eb53-164">As a result, in Windows Vista, the [GDI](/windows/desktop/gdi/windows-gdi) DDI display driver was implemented as the Microsoft supplied Canonical Display Driver (CDD) which rendered GDI content to a system memory bitmap to be composed to the screen.</span></span>

## <a name="gdi-rendering-in-windows-7"></a><span data-ttu-id="1eb53-165">Representación de GDI en Windows 7</span><span class="sxs-lookup"><span data-stu-id="1eb53-165">GDI rendering in Windows 7</span></span>

<span data-ttu-id="1eb53-166">El modelo de controladores usado en Windows Vista requiere que cada ventana de [GDI](/windows/desktop/gdi/windows-gdi) esté respaldada por una superficie de memoria de vídeo y una superficie de memoria del sistema.</span><span class="sxs-lookup"><span data-stu-id="1eb53-166">The driver model used in Windows Vista required that every [GDI](/windows/desktop/gdi/windows-gdi) window be backed by both a video memory surface and a system memory surface.</span></span> <span data-ttu-id="1eb53-167">Esto dio lugar a que se usara la memoria del sistema para cada ventana de GDI.</span><span class="sxs-lookup"><span data-stu-id="1eb53-167">This resulted in system memory being used for every GDI window.</span></span>

<span data-ttu-id="1eb53-168">Por esta razón, se cambió de nuevo [GDI](/windows/desktop/gdi/windows-gdi) en Windows 7.</span><span class="sxs-lookup"><span data-stu-id="1eb53-168">For this reason, [GDI](/windows/desktop/gdi/windows-gdi) was changed again in Windows 7.</span></span> <span data-ttu-id="1eb53-169">.</span><span class="sxs-lookup"><span data-stu-id="1eb53-169">.</span></span> <span data-ttu-id="1eb53-170">En lugar de representar en una superficie de memoria del sistema, GDI se modificó para representarse en un segmento de memoria de abertura.</span><span class="sxs-lookup"><span data-stu-id="1eb53-170">Instead of rendering to a system memory surface, GDI was modified to render to an aperture memory segment.</span></span> <span data-ttu-id="1eb53-171">La memoria de abertura puede actualizarse desde la superficie de memoria de vídeo que contiene el contenido de la ventana.</span><span class="sxs-lookup"><span data-stu-id="1eb53-171">The aperture memory can be updated from the video memory surface holding the window contents.</span></span> <span data-ttu-id="1eb53-172">GDI puede volver a representarse en la memoria de abertura y el resultado se puede devolver a la superficie de la ventana.</span><span class="sxs-lookup"><span data-stu-id="1eb53-172">GDI can render back to the aperture memory, and the result can then be sent back to the window surface.</span></span> <span data-ttu-id="1eb53-173">Dado que el segmento de memoria de abertura es direccionable por la GPU, la GPU puede acelerar estas actualizaciones en la superficie de memoria de vídeo.</span><span class="sxs-lookup"><span data-stu-id="1eb53-173">Since the aperture memory segment is addressable by the GPU, the GPU can accelerate these updates to the video memory surface.</span></span> <span data-ttu-id="1eb53-174">Por ejemplo, la representación de texto, BitBlts, AlphaBlend, TransparentBlt y StretchBlt se aceleran en estos casos.</span><span class="sxs-lookup"><span data-stu-id="1eb53-174">For example, text rendering, BitBlts, AlphaBlend, TransparentBlt, and StretchBlt are all accelerated in these cases.</span></span>

## <a name="contrasting-direct2d-and-gdi-acceleration-in-windows-7"></a><span data-ttu-id="1eb53-175">Comparación de la aceleración de Direct2D y GDI en Windows 7</span><span class="sxs-lookup"><span data-stu-id="1eb53-175">Contrasting Direct2D and GDI acceleration in Windows 7</span></span>

<span data-ttu-id="1eb53-176">[Direct2D](./direct2d-portal.md) y [GDI](/windows/desktop/gdi/windows-gdi) son dos API de representación en modo inmediato y tienen aceleración de hardware.</span><span class="sxs-lookup"><span data-stu-id="1eb53-176">[Direct2D](./direct2d-portal.md) and [GDI](/windows/desktop/gdi/windows-gdi) are both 2D immediate-mode rendering APIs and are hardware accelerated.</span></span> <span data-ttu-id="1eb53-177">Sin embargo, hay una serie de diferencias que permanecen en ambas API.</span><span class="sxs-lookup"><span data-stu-id="1eb53-177">However, there are a number of differences that remain in both APIs.</span></span>

### <a name="location-of-resources"></a><span data-ttu-id="1eb53-178">Ubicación de los recursos</span><span class="sxs-lookup"><span data-stu-id="1eb53-178">Location of resources</span></span>

<span data-ttu-id="1eb53-179">[GDI](/windows/desktop/gdi/windows-gdi) mantiene sus recursos, en determinados mapas de bits, en la memoria del sistema de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="1eb53-179">[GDI](/windows/desktop/gdi/windows-gdi) maintains its resources, in particular bitmaps, in system memory by default.</span></span> <span data-ttu-id="1eb53-180">[Direct2D](./direct2d-portal.md) mantiene sus recursos en la memoria de vídeo en el adaptador de pantalla.</span><span class="sxs-lookup"><span data-stu-id="1eb53-180">[Direct2D](./direct2d-portal.md) maintains its resources in video memory on the display adapter.</span></span> <span data-ttu-id="1eb53-181">Cuando GDI necesita actualizar la memoria de vídeo, debe realizarse a través del bus, a menos que el recurso ya esté en el segmento de memoria de la abertura o si la operación se puede expresar directamente.</span><span class="sxs-lookup"><span data-stu-id="1eb53-181">When GDI needs to update video memory, this must be done over the bus, unless the resource is already in the aperture memory segment or if the operation can be expressed directly.</span></span> <span data-ttu-id="1eb53-182">En cambio, Direct2D puede traducir simplemente sus primitivas a primitivos de Direct3D porque los recursos ya están en la memoria de vídeo.</span><span class="sxs-lookup"><span data-stu-id="1eb53-182">In contrast, Direct2D can simply translate its primitives to Direct3D primitives because the resources are already in video memory.</span></span>

### <a name="rendering-method"></a><span data-ttu-id="1eb53-183">Método de representación</span><span class="sxs-lookup"><span data-stu-id="1eb53-183">Rendering method</span></span>

<span data-ttu-id="1eb53-184">Con el fin de mantener la compatibilidad, [GDI](/windows/desktop/gdi/windows-gdi) realiza una gran parte de su representación para la abertura de memoria mediante la CPU.</span><span class="sxs-lookup"><span data-stu-id="1eb53-184">In order to maintain compatibility, [GDI](/windows/desktop/gdi/windows-gdi) performs a large part of its rendering to aperture memory using the CPU.</span></span> <span data-ttu-id="1eb53-185">En cambio, [Direct2D](./direct2d-portal.md) traduce sus llamadas de API en primitivas de Direct3D y operaciones de dibujo.</span><span class="sxs-lookup"><span data-stu-id="1eb53-185">In contrast, [Direct2D](./direct2d-portal.md) translates its APIs calls into Direct3D primitives and drawing operations.</span></span> <span data-ttu-id="1eb53-186">A continuación, el resultado se representa en la GPU.</span><span class="sxs-lookup"><span data-stu-id="1eb53-186">The result is then rendered on the GPU.</span></span> <span data-ttu-id="1eb53-187">Parte de la representación de GDI? s se realiza en la GPU cuando la memoria de la abertura se copia en la superficie de memoria de vídeo que representa la ventana de GDI.</span><span class="sxs-lookup"><span data-stu-id="1eb53-187">Some of GDI?s rendering is performed on the GPU when the aperture memory is copied to the video memory surface representing the GDI window.</span></span>

### <a name="scalability"></a><span data-ttu-id="1eb53-188">Escalabilidad</span><span class="sxs-lookup"><span data-stu-id="1eb53-188">Scalability</span></span>

<span data-ttu-id="1eb53-189">Las llamadas de representación de [Direct2D](./direct2d-portal.md)son secuencias de comandos independientes a la GPU.</span><span class="sxs-lookup"><span data-stu-id="1eb53-189">[Direct2D](./direct2d-portal.md)'s rendering calls are all independent command streams to the GPU.</span></span> <span data-ttu-id="1eb53-190">Cada fábrica de Direct2D representa un dispositivo Direct3D diferente.</span><span class="sxs-lookup"><span data-stu-id="1eb53-190">Each Direct2D factory represents a different Direct3D device.</span></span> <span data-ttu-id="1eb53-191">[GDI](/windows/desktop/gdi/windows-gdi) utiliza una secuencia de comandos para todas las aplicaciones del sistema.</span><span class="sxs-lookup"><span data-stu-id="1eb53-191">[GDI](/windows/desktop/gdi/windows-gdi) uses one command stream for all of the applications on the system.</span></span> <span data-ttu-id="1eb53-192">El método de GDI puede producir una acumulación de la sobrecarga de contexto de representación de CPU y GPU.</span><span class="sxs-lookup"><span data-stu-id="1eb53-192">GDI's method can result in a buildup of GPU and CPU rendering context overhead.</span></span>

### <a name="location"></a><span data-ttu-id="1eb53-193">Location</span><span class="sxs-lookup"><span data-stu-id="1eb53-193">Location</span></span>

<span data-ttu-id="1eb53-194">[Direct2D](./direct2d-portal.md) funciona completamente en modo de usuario, incluido el controlador Direct3D en modo usuario y el tiempo de ejecución de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="1eb53-194">[Direct2D](./direct2d-portal.md) operates entirely in user mode, including the Direct3D run time and the user mode Direct3D driver.</span></span> <span data-ttu-id="1eb53-195">Esto ayuda a evitar los bloqueos del sistema causados por defectos de código en el kernel.</span><span class="sxs-lookup"><span data-stu-id="1eb53-195">This helps prevent system crashes caused by code defects in the kernel.</span></span> <span data-ttu-id="1eb53-196">Sin embargo, [GDI](/windows/desktop/gdi/windows-gdi)tiene la mayor parte de su funcionalidad en el espacio de sesión en modo kernel, con su superficie de API en modo de usuario.</span><span class="sxs-lookup"><span data-stu-id="1eb53-196">[GDI](/windows/desktop/gdi/windows-gdi), however, has most of its functionality in session space in kernel mode, with its API surface in user mode.</span></span>

### <a name="availability-of-hardware-acceleration"></a><span data-ttu-id="1eb53-197">Disponibilidad de aceleración de hardware</span><span class="sxs-lookup"><span data-stu-id="1eb53-197">Availability of Hardware Acceleration</span></span>

<span data-ttu-id="1eb53-198">[GDI](/windows/desktop/gdi/windows-gdi) es un hardware acelerado en Windows XP y acelerado en Windows 7 cuando se está ejecutando el administrador de ventanas de escritorio y se está usando un controlador WDDM 1,1.</span><span class="sxs-lookup"><span data-stu-id="1eb53-198">[GDI](/windows/desktop/gdi/windows-gdi) is hardware accelerated on Windows XP, and accelerated on Windows 7 when the Desktop Window Manager is running and a WDDM 1.1 driver is in use.</span></span> <span data-ttu-id="1eb53-199">[Direct2D](./direct2d-portal.md) es el hardware acelerado en casi cualquier controlador WDDM y si DWM está en uso o no.</span><span class="sxs-lookup"><span data-stu-id="1eb53-199">[Direct2D](./direct2d-portal.md) is hardware accelerated on almost any WDDM driver and whether or not DWM is in use.</span></span> <span data-ttu-id="1eb53-200">En vista, GDI siempre se representará en la CPU.</span><span class="sxs-lookup"><span data-stu-id="1eb53-200">On Vista, GDI will always render on the CPU.</span></span>

### <a name="presentation-model"></a><span data-ttu-id="1eb53-201">Modelo de presentación</span><span class="sxs-lookup"><span data-stu-id="1eb53-201">Presentation Model</span></span>

<span data-ttu-id="1eb53-202">Cuando Windows se diseñó por primera vez, no había memoria suficiente para permitir que cada ventana se almacenara en su propio mapa de bits.</span><span class="sxs-lookup"><span data-stu-id="1eb53-202">When Windows was first designed, there was insufficient memory to allow every window to be stored in its own bitmap.</span></span> <span data-ttu-id="1eb53-203">Como resultado, [GDI](/windows/desktop/gdi/windows-gdi) siempre se representa lógicamente directamente en la pantalla, con varias regiones de recorte aplicadas para asegurarse de que una aplicación no se representó fuera de su ventana.</span><span class="sxs-lookup"><span data-stu-id="1eb53-203">As a result, [GDI](/windows/desktop/gdi/windows-gdi) always rendered logically directly to the screen, with various clipping regions applied to ensure that an application did not render outside of its window.</span></span> <span data-ttu-id="1eb53-204">En el modelo de [Direct2D](./direct2d-portal.md) , una aplicación se representa en un búfer de reserva y el resultado se muestra cuando la aplicación finaliza el dibujo.</span><span class="sxs-lookup"><span data-stu-id="1eb53-204">In the [Direct2D](./direct2d-portal.md) model, an application renders to a back-buffer, and the result is displayed when the application is done drawing.</span></span> <span data-ttu-id="1eb53-205">Esto permite a Direct2D administrar escenarios de animación de forma mucho más fluida que GDI.</span><span class="sxs-lookup"><span data-stu-id="1eb53-205">This allows Direct2D to handle animation scenarios much more fluidly than GDI can.</span></span>

## <a name="conclusion"></a><span data-ttu-id="1eb53-206">Conclusión</span><span class="sxs-lookup"><span data-stu-id="1eb53-206">Conclusion</span></span>

<span data-ttu-id="1eb53-207">El código [GDI](/windows/desktop/gdi/windows-gdi) existente seguirá funcionando bien en Windows 7.</span><span class="sxs-lookup"><span data-stu-id="1eb53-207">Existing [GDI](/windows/desktop/gdi/windows-gdi) code will continue to work well under Windows 7.</span></span> <span data-ttu-id="1eb53-208">Sin embargo, al escribir un nuevo código de representación de gráficos, se debe tener en cuenta [Direct2D](./direct2d-portal.md) , ya que aprovecha las GPU modernas.</span><span class="sxs-lookup"><span data-stu-id="1eb53-208">However, when writing new graphics rendering code, [Direct2D](./direct2d-portal.md) should be considered, as it takes better advantage of modern GPUs.</span></span>

 

 