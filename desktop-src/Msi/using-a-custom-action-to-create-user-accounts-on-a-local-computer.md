---
description: Este ejemplo muestra cómo utilizar las acciones personalizadas para crear cuentas de usuario en un equipo local al instalar un componente.
ms.assetid: fc06dd7b-46d7-45a0-85b3-26f808c64f89
title: Usar una acción personalizada para crear cuentas de usuario en un equipo local
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cfd3bf002c0fa1d661c6bfebb6d1a18cbc4b0652
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104360914"
---
# <a name="using-a-custom-action-to-create-user-accounts-on-a-local-computer"></a><span data-ttu-id="593ef-103">Usar una acción personalizada para crear cuentas de usuario en un equipo local</span><span class="sxs-lookup"><span data-stu-id="593ef-103">Using a Custom Action to Create User Accounts on a Local Computer</span></span>

<span data-ttu-id="593ef-104">Este ejemplo muestra cómo utilizar las acciones personalizadas para crear cuentas de usuario en un equipo local al instalar un componente.</span><span class="sxs-lookup"><span data-stu-id="593ef-104">This sample demonstrates how to use custom actions to create user accounts on a local computer when installing a component.</span></span> <span data-ttu-id="593ef-105">Al quitar un componente, se quitan las cuentas de usuario locales creadas por la acción personalizada.</span><span class="sxs-lookup"><span data-stu-id="593ef-105">Removal of a component removes the local user accounts created by the custom action.</span></span> <span data-ttu-id="593ef-106">Se muestran varias acciones personalizadas, incluidas las acciones personalizadas de [ejecución aplazada](deferred-execution-custom-actions.md) y [las acciones personalizadas de reversión](rollback-custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="593ef-106">Several custom actions are demonstrated including [Deferred Execution Custom Actions](deferred-execution-custom-actions.md) and [Rollback Custom Actions](rollback-custom-actions.md).</span></span>

<span data-ttu-id="593ef-107">El ejemplo cumple las siguientes especificaciones.</span><span class="sxs-lookup"><span data-stu-id="593ef-107">The sample meets the following specifications.</span></span>

-   <span data-ttu-id="593ef-108">La instalación de crea cuentas de usuario solo si se ejecuta Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="593ef-108">The installation creates user accounts only if running Windows 2000.</span></span>
-   <span data-ttu-id="593ef-109">La instalación de crea cuentas de usuario solo si el componente se está instalando para ejecutarse localmente.</span><span class="sxs-lookup"><span data-stu-id="593ef-109">The installation creates user accounts only if the component is being installed to run locally.</span></span> <span data-ttu-id="593ef-110">Esto evita la creación de cuentas de usuario durante la reparación o reinstalación del componente.</span><span class="sxs-lookup"><span data-stu-id="593ef-110">This precludes creating user accounts during the repair or reinstallation of the component.</span></span>
-   <span data-ttu-id="593ef-111">El instalador quita las cuentas cuando se quita el componente.</span><span class="sxs-lookup"><span data-stu-id="593ef-111">The Installer removes the accounts when the component is removed.</span></span>
-   <span data-ttu-id="593ef-112">La información de la cuenta de usuario se lee de una tabla personalizada en la base de datos de instalación y no está codificada de forma rígida en el código de acción personalizada.</span><span class="sxs-lookup"><span data-stu-id="593ef-112">User account information is read from a custom table in the installation database and is not hard-coded into the custom action code.</span></span>
-   <span data-ttu-id="593ef-113">Dado que la creación o eliminación de cuentas de usuario requiere privilegios elevados, algunas de las acciones personalizadas deben ser capaces de realizar cambios en el sistema que requieran privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="593ef-113">Because the creation or removal of user accounts requires elevated privileges, some of the custom actions must be capable of making changes to the system that require elevated privileges.</span></span> <span data-ttu-id="593ef-114">Estas acciones personalizadas deben ser acciones personalizadas diferidas que se ejecutan en el script de ejecución.</span><span class="sxs-lookup"><span data-stu-id="593ef-114">These custom actions must be deferred custom actions that run when in the execution script.</span></span>
-   <span data-ttu-id="593ef-115">Cada cuenta tiene una acción personalizada de reversión para asegurarse de que la cuenta se quita al revertir la instalación del componente.</span><span class="sxs-lookup"><span data-stu-id="593ef-115">Each account has a rollback custom action to ensure the account is removed on rollback of the component installation.</span></span> <span data-ttu-id="593ef-116">Esto no incluye la reversión de la eliminación de una cuenta durante la eliminación de un componente.</span><span class="sxs-lookup"><span data-stu-id="593ef-116">This does not include the rollback of an account deletion during the removal of a component.</span></span>
-   <span data-ttu-id="593ef-117">Las acciones personalizadas envían mensajes ActionData para cada cuenta que se crea o se quita.</span><span class="sxs-lookup"><span data-stu-id="593ef-117">Custom actions send ActionData messages for each account that is created or removed.</span></span> <span data-ttu-id="593ef-118">Esto no incluye el suministro de mensajes de progreso para ProgressBar.</span><span class="sxs-lookup"><span data-stu-id="593ef-118">This does not include providing progress messages for the ProgressBar.</span></span>
-   <span data-ttu-id="593ef-119">Las acciones personalizadas notifican un error si no se puede crear una cuenta.</span><span class="sxs-lookup"><span data-stu-id="593ef-119">Custom actions report an error if an account cannot be created.</span></span>
-   <span data-ttu-id="593ef-120">La contraseña de la cuenta se obtiene a través de la interacción del usuario con la interfaz de usuario o, en el caso de una instalación en la interfaz de usuario básica o en ningún [nivel de interfaz de usuario](user-interface-levels.md), como una propiedad pasada en la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="593ef-120">The password for the account is obtained through the user interaction with the user interface, or in the case of an installation at the Basic UI or None [User Interface Levels](user-interface-levels.md), as a property passed on the command line.</span></span>
-   <span data-ttu-id="593ef-121">Los datos confidenciales se ocultan del archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="593ef-121">Sensitive data is hidden from the log file.</span></span>

<span data-ttu-id="593ef-122">El ejemplo incluye un componente hipotético denominado TestAccount.</span><span class="sxs-lookup"><span data-stu-id="593ef-122">The sample includes a hypothetical component named TestAccount.</span></span> <span data-ttu-id="593ef-123">En la explicación de las secciones siguientes se supone que ya ha creado los recursos necesarios para TestAccount y que ha creado la [característica](feature-table.md), el [componente](component-table.md), el [archivo](file-table.md), el [directorio](directory-table.md)y las tablas de [FeatureComponents](featurecomponents-table.md) en la base de datos de ejemplo necesaria para instalar este componente.</span><span class="sxs-lookup"><span data-stu-id="593ef-123">The discussion in the following sections assumes that you have already created the resources required by TestAccount and have authored the [Feature](feature-table.md), [Component](component-table.md), [File](file-table.md), [Directory](directory-table.md), and [FeatureComponents](featurecomponents-table.md) tables in the sample database required to install this component.</span></span> <span data-ttu-id="593ef-124">Para obtener más información, vea [un ejemplo de instalación](an-installation-example.md).</span><span class="sxs-lookup"><span data-stu-id="593ef-124">For more information, see [An Installation Example](an-installation-example.md).</span></span>

<span data-ttu-id="593ef-125">Los temas siguientes contienen información acerca de cómo crear las acciones personalizadas necesarias y agregarlas a un paquete de instalación.</span><span class="sxs-lookup"><span data-stu-id="593ef-125">The following topics contain information about how to create required custom actions and add them to an installation package.</span></span>

-   [<span data-ttu-id="593ef-126">Crear las acciones personalizadas</span><span class="sxs-lookup"><span data-stu-id="593ef-126">Authoring the Custom Actions</span></span>](authoring-the-custom-actions.md)
-   [<span data-ttu-id="593ef-127">Agregar una tabla CustomUserAccounts personalizada</span><span class="sxs-lookup"><span data-stu-id="593ef-127">Adding a Custom CustomUserAccounts Table</span></span>](adding-a-custom-customuseraccounts-table.md)
-   [<span data-ttu-id="593ef-128">Creación de la tabla CustomAction</span><span class="sxs-lookup"><span data-stu-id="593ef-128">Authoring the CustomAction Table</span></span>](authoring-the-customaction-table.md)
-   [<span data-ttu-id="593ef-129">Creación de las tablas de error y de ActionText</span><span class="sxs-lookup"><span data-stu-id="593ef-129">Authoring the ActionText and Error Tables</span></span>](authoring-the-actiontext-and-error-tables.md)
-   [<span data-ttu-id="593ef-130">Crear la tabla InstallExecuteSequence</span><span class="sxs-lookup"><span data-stu-id="593ef-130">Authoring the InstallExecuteSequence Table</span></span>](authoring-the-installexecutesequence-table.md)
-   [<span data-ttu-id="593ef-131">Crear la interfaz de usuario para la entrada de contraseña</span><span class="sxs-lookup"><span data-stu-id="593ef-131">Authoring the User Interface for Password Input</span></span>](authoring-the-user-interface-for-password-input.md)
-   [<span data-ttu-id="593ef-132">Protección de la instalación</span><span class="sxs-lookup"><span data-stu-id="593ef-132">Securing the installation</span></span>](securing-the-installation.md)

 

 



