---
title: Servicios de formato de archivo de intercambio de recursos
description: Servicios de formato de archivo de intercambio de recursos
ms.assetid: 8526794b-7b40-470f-94f7-935d7dbf9151
keywords:
- e/s de archivos multimedia, formato de archivo de intercambio de recursos (RIFF)
- e/s de archivos, formato de archivo de intercambio de recursos (RIFF)
- entrada y salida (e/s), formato de archivo de intercambio de recursos (RIFF)
- E/s (entrada y salida), formato de archivo de intercambio de recursos (RIFF)
- mmioOpen función)
- formato de archivo de intercambio de recursos (RIFF)
- RIFF (formato de archivo de intercambio de recursos)
- RIFF E/S
- Fragmento RIFF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 50cca3792ccded248951065c7b69f2e50d27e0ba
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/19/2020
ms.locfileid: "104358822"
---
# <a name="resource-interchange-file-format-services"></a><span data-ttu-id="0bd08-112">Servicios de formato de archivo de intercambio de recursos</span><span class="sxs-lookup"><span data-stu-id="0bd08-112">Resource Interchange File Format Services</span></span>

<span data-ttu-id="0bd08-113">El formato preferido para los archivos multimedia es el formato de archivo de intercambio de recursos (RIFF).</span><span class="sxs-lookup"><span data-stu-id="0bd08-113">The preferred format for multimedia files is resource interchange file format (RIFF).</span></span> <span data-ttu-id="0bd08-114">Las funciones de e/s de archivos RIFF funcionan con los servicios de e/s de archivos almacenados en búfer y no almacenados en búfer.</span><span class="sxs-lookup"><span data-stu-id="0bd08-114">The RIFF file I/O functions work with the basic buffered and unbuffered file I/O services.</span></span> <span data-ttu-id="0bd08-115">Puede abrir, leer y escribir archivos RIFF de la misma manera que otros tipos de archivo.</span><span class="sxs-lookup"><span data-stu-id="0bd08-115">You can open, read, and write RIFF files in the same way as other file types.</span></span> <span data-ttu-id="0bd08-116">Para obtener información detallada sobre RIFF, vea [AVIFile Functions and macros](avifile-functions-and-macros.md).</span><span class="sxs-lookup"><span data-stu-id="0bd08-116">For detailed information about RIFF, see [AVIFile Functions and Macros](avifile-functions-and-macros.md).</span></span>

<span data-ttu-id="0bd08-117">Los archivos RIFF usan códigos de cuatro caracteres para identificar los elementos de archivo.</span><span class="sxs-lookup"><span data-stu-id="0bd08-117">RIFF files use four-character codes to identify file elements.</span></span> <span data-ttu-id="0bd08-118">Estos códigos son cantidades de 32 bits que representan una secuencia de uno a cuatro caracteres ASCII alfanuméricos, que se rellenan a la derecha con caracteres de espacio.</span><span class="sxs-lookup"><span data-stu-id="0bd08-118">These codes are 32-bit quantities representing a sequence of one to four ASCII alphanumeric characters, padded on the right with space characters.</span></span> <span data-ttu-id="0bd08-119">El tipo de datos para códigos de cuatro caracteres es **FourCC**.</span><span class="sxs-lookup"><span data-stu-id="0bd08-119">The data type for four-character codes is **FOURCC**.</span></span> <span data-ttu-id="0bd08-120">Use la macro [**mmioFOURCC**](/windows/win32/api/vfw/nf-vfw-mmiofourcc) para convertir cuatro caracteres en un código de cuatro caracteres.</span><span class="sxs-lookup"><span data-stu-id="0bd08-120">Use the [**mmioFOURCC**](/windows/win32/api/vfw/nf-vfw-mmiofourcc) macro to convert four characters into a four-character code.</span></span> <span data-ttu-id="0bd08-121">Para convertir una cadena terminada en null en un código de cuatro caracteres, utilice la función [**mmioStringToFOURCC**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiostringtofourcc) .</span><span class="sxs-lookup"><span data-stu-id="0bd08-121">To convert a null-terminated string into a four-character code, use the [**mmioStringToFOURCC**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiostringtofourcc) function.</span></span>

<span data-ttu-id="0bd08-122">El bloque de creación básico de un archivo RIFF es un *fragmento*.</span><span class="sxs-lookup"><span data-stu-id="0bd08-122">The basic building block of a RIFF file is a *chunk*.</span></span> <span data-ttu-id="0bd08-123">Un fragmento es una unidad lógica de datos multimedia, como un solo fotograma en un clip de vídeo.</span><span class="sxs-lookup"><span data-stu-id="0bd08-123">A chunk is a logical unit of multimedia data, such as a single frame in a video clip.</span></span> <span data-ttu-id="0bd08-124">Cada fragmento contiene los campos siguientes:</span><span class="sxs-lookup"><span data-stu-id="0bd08-124">Each chunk contains the following fields:</span></span>

-   <span data-ttu-id="0bd08-125">Un código de cuatro caracteres que especifica el identificador de fragmento</span><span class="sxs-lookup"><span data-stu-id="0bd08-125">A four-character code specifying the chunk identifier</span></span>
-   <span data-ttu-id="0bd08-126">Un valor palabra que especifica el tamaño del miembro de datos del fragmento.</span><span class="sxs-lookup"><span data-stu-id="0bd08-126">A doubleword value specifying the size of the data member in the chunk</span></span>
-   <span data-ttu-id="0bd08-127">Un campo de datos</span><span class="sxs-lookup"><span data-stu-id="0bd08-127">A data field</span></span>

<span data-ttu-id="0bd08-128">En la ilustración siguiente se muestra un fragmento "RIFF" que contiene dos subfragmentos.</span><span class="sxs-lookup"><span data-stu-id="0bd08-128">The following illustration shows a "RIFF" chunk that contains two subchunks.</span></span>

![fragmento riff que contiene dos imágenes de subfragmentos](images/mmio1.gif)

<span data-ttu-id="0bd08-130">Un fragmento contenido en otro fragmento es un *subfragmento*.</span><span class="sxs-lookup"><span data-stu-id="0bd08-130">A chunk contained in another chunk is a *subchunk*.</span></span> <span data-ttu-id="0bd08-131">Los únicos fragmentos que pueden contener subfragmentos son aquellos con un identificador de fragmento "RIFF" o "LIST".</span><span class="sxs-lookup"><span data-stu-id="0bd08-131">The only chunks allowed to contain subchunks are those with a chunk identifier of "RIFF" or "LIST".</span></span> <span data-ttu-id="0bd08-132">Un fragmento que contiene otro fragmento se denomina un *fragmento primario*.</span><span class="sxs-lookup"><span data-stu-id="0bd08-132">A chunk that contains another chunk is called a *parent chunk*.</span></span> <span data-ttu-id="0bd08-133">El primer fragmento de un archivo RIFF debe ser un fragmento "RIFF".</span><span class="sxs-lookup"><span data-stu-id="0bd08-133">The first chunk in a RIFF file must be a "RIFF" chunk.</span></span> <span data-ttu-id="0bd08-134">Todos los demás fragmentos del archivo son subfragmentos del fragmento "RIFF".</span><span class="sxs-lookup"><span data-stu-id="0bd08-134">All other chunks in the file are subchunks of the "RIFF" chunk.</span></span>

<span data-ttu-id="0bd08-135">Los fragmentos "RIFF" incluyen un campo adicional en los cuatro primeros bytes del campo de datos.</span><span class="sxs-lookup"><span data-stu-id="0bd08-135">"RIFF" chunks include an additional field in the first four bytes of the data field.</span></span> <span data-ttu-id="0bd08-136">Este campo adicional proporciona el *tipo de formulario* del campo.</span><span class="sxs-lookup"><span data-stu-id="0bd08-136">This additional field provides the *form type* of the field.</span></span> <span data-ttu-id="0bd08-137">El tipo de formulario es un código de cuatro caracteres que identifica el formato de los datos almacenados en el archivo.</span><span class="sxs-lookup"><span data-stu-id="0bd08-137">The form type is a four-character code identifying the format of the data stored in the file.</span></span> <span data-ttu-id="0bd08-138">Por ejemplo, los archivos de audio de forma de onda de Microsoft tienen un tipo de formulario "WAVE".</span><span class="sxs-lookup"><span data-stu-id="0bd08-138">For example, Microsoft waveform-audio files have a form type of "WAVE".</span></span>

<span data-ttu-id="0bd08-139">Los fragmentos de "lista" también incluyen un campo adicional en los cuatro primeros bytes del campo de datos.</span><span class="sxs-lookup"><span data-stu-id="0bd08-139">"LIST" chunks also include an additional field in the first four bytes of the data field.</span></span> <span data-ttu-id="0bd08-140">Este campo adicional contiene el *tipo de lista* del campo.</span><span class="sxs-lookup"><span data-stu-id="0bd08-140">This additional field contains the *list type* of the field.</span></span> <span data-ttu-id="0bd08-141">El tipo de lista es un código de cuatro caracteres que identifica el contenido de la lista.</span><span class="sxs-lookup"><span data-stu-id="0bd08-141">The list type is a four-character code identifying the contents of the list.</span></span> <span data-ttu-id="0bd08-142">Por ejemplo, un fragmento "LIST" con un tipo de lista "INFO" puede contener fragmentos "ICOP" y "ICRD" que proporcionan información sobre los derechos de autor y la fecha de creación.</span><span class="sxs-lookup"><span data-stu-id="0bd08-142">For example, a "LIST" chunk with a list type of "INFO" can contain "ICOP" and "ICRD" chunks providing copyright and creation date information.</span></span> <span data-ttu-id="0bd08-143">En la ilustración siguiente se muestra un fragmento "RIFF" que contiene un fragmento "LIST" y otro subfragmento (el fragmento "LIST" contiene dos subfragmentos).</span><span class="sxs-lookup"><span data-stu-id="0bd08-143">The following illustration shows a "RIFF" chunk that contains a "LIST" chunk and one other subchunk (the "LIST" chunk contains two subchunks).</span></span>

![fragmento riff que contiene una imagen de fragmento de lista](images/mmio2.gif)

<span data-ttu-id="0bd08-145">Los servicios de e/s de archivos multimedia incluyen dos funciones que puede usar para navegar entre fragmentos en un archivo RIFF: [**mmioAscend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmioascend) y [**mmioDescend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiodescend).</span><span class="sxs-lookup"><span data-stu-id="0bd08-145">Multimedia file I/O services include two functions you can use to navigate among chunks in a RIFF file: [**mmioAscend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmioascend) and [**mmioDescend**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiodescend).</span></span> <span data-ttu-id="0bd08-146">Puede usar estas funciones como funciones de búsqueda de alto nivel.</span><span class="sxs-lookup"><span data-stu-id="0bd08-146">You can use these functions as high-level seek functions.</span></span> <span data-ttu-id="0bd08-147">Cuando desciende en un fragmento, la posición del archivo se establece en el campo de datos del fragmento (8 bytes desde el principio del fragmento).</span><span class="sxs-lookup"><span data-stu-id="0bd08-147">When you descend into a chunk, the file position is set to the data field of the chunk (8 bytes from the beginning of the chunk).</span></span> <span data-ttu-id="0bd08-148">En el caso de los fragmentos "RIFF" y "LIST", la posición del archivo se establece en la ubicación que sigue al tipo de formulario o tipo de lista (12 bytes desde el principio del fragmento).</span><span class="sxs-lookup"><span data-stu-id="0bd08-148">For "RIFF" and "LIST" chunks, the file position is set to the location following the form type or list type (12 bytes from the beginning of the chunk).</span></span> <span data-ttu-id="0bd08-149">Cuando se encuentra en orden ascendente de un fragmento, la posición del archivo se establece en la ubicación que sigue al final del fragmento.</span><span class="sxs-lookup"><span data-stu-id="0bd08-149">When you ascend out of a chunk, the file position is set to the location following the end of the chunk.</span></span>

<span data-ttu-id="0bd08-150">Para crear un fragmento nuevo, utilice la función [**mmioCreateChunk**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiocreatechunk) para escribir un encabezado de fragmentos en la posición actual de un archivo abierto.</span><span class="sxs-lookup"><span data-stu-id="0bd08-150">To create a new chunk, use the [**mmioCreateChunk**](/windows/win32/api/mmiscapi/nf-mmiscapi-mmiocreatechunk) function to write a chunk header at the current position in an open file.</span></span> <span data-ttu-id="0bd08-151">Las funciones **mmioAscend**, **mmioDescend** y **mmioCreateChunk** usan la estructura [**MMCKINFO**](/windows/win32/api/mmiscapi/ns-mmiscapi-mmckinfo) para especificar y recuperar información sobre fragmentos "Riff".</span><span class="sxs-lookup"><span data-stu-id="0bd08-151">The **mmioAscend**, **mmioDescend**, and **mmioCreateChunk** functions use the [**MMCKINFO**](/windows/win32/api/mmiscapi/ns-mmiscapi-mmckinfo) structure to specify and retrieve information about "RIFF" chunks.</span></span>

 

 