---
description: Inicializar el objeto ContentInfo de un nuevo archivo ASF
ms.assetid: a4f6c90e-1b38-4c70-8bc5-e2e16af3d87a
title: Inicializar el objeto ContentInfo de un nuevo archivo ASF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 74826942700f4be8028075fcd9466414834eb8e2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104360265"
---
# <a name="initializing-the-contentinfo-object-of-a-new-asf-file"></a><span data-ttu-id="0d2b0-103">Inicializar el objeto ContentInfo de un nuevo archivo ASF</span><span class="sxs-lookup"><span data-stu-id="0d2b0-103">Initializing the ContentInfo Object of a New ASF File</span></span>

<span data-ttu-id="0d2b0-104">Después de crear un objeto ContentInfo vacío mediante una llamada a la función [**MFCreateASFContentInfo**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfcontentinfo) , la aplicación debe llamar a [**IMFASFContentInfo:: SetProfile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile) para proporcionar el perfil de codificación.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-104">After creating an empty ContentInfo object by calling the [**MFCreateASFContentInfo**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreateasfcontentinfo) function, the application must call [**IMFASFContentInfo::SetProfile**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-setprofile) to provide the encoding profile.</span></span> <span data-ttu-id="0d2b0-105">Para obtener información acerca de cómo crear un perfil, consulte [crear un perfil ASF](creating-an-asf-profile.md).</span><span class="sxs-lookup"><span data-stu-id="0d2b0-105">For information about creating a profile, see [Creating an ASF Profile](creating-an-asf-profile.md).</span></span>

<span data-ttu-id="0d2b0-106">Antes de que se pueda leer la información del perfil, el método **SetProfile** debe validar el objeto de perfil especificado comprobando los identificadores de secuencia o los tipos de medios.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-106">Before information can be read from the profile, the **SetProfile** method must validate the specified profile object by checking the stream identifiers or media types.</span></span> <span data-ttu-id="0d2b0-107">Si el perfil pasa la validación, se generan varios objetos de encabezado, como el objeto de propiedades de archivo, el objeto de propiedades de velocidad de bits de flujo, el objeto de propiedades de la secuencia y el objeto de exclusión mutua.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-107">If the profile passes the validation, various header objects are generated, such as the File Properties Object, the Stream Bitrate Properties Object, the Stream Properties Object, and the Mutual Exclusion Object.</span></span>

<span data-ttu-id="0d2b0-108">**SetProfile** calcula y establece los valores recomendados para ciertas propiedades como, por ejemplo, el valor de preprocesamiento.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-108">**SetProfile** computes and sets recommended values for certain properties, such as the preroll value.</span></span> <span data-ttu-id="0d2b0-109">Si aún no se ha establecido, el valor de preajuste recomendado en milisegundos depende de la ventana de búfer máxima del depósito de fugas especificado para las secuencias del perfil.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-109">If this is not already set, the recommended preroll value in milliseconds depends on the maximum buffer window of the leaky bucket specified for the streams in the profile.</span></span> <span data-ttu-id="0d2b0-110">Del mismo modo, también se establecen los tamaños de paquete de datos mínimo y máximo.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-110">Similarly, the minimum and maximum data packet sizes are also set.</span></span> <span data-ttu-id="0d2b0-111">Los valores recomendados podrían invalidar los tamaños de paquetes que se establecen en el perfil mediante atributos.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-111">The recommended values might override the packet sizes that are set on the profile through attributes.</span></span>

<span data-ttu-id="0d2b0-112">Dado que el archivo está en proceso de creación, el archivo se clasifica como un tipo de difusión, que se indica mediante el campo Flags del objeto de propiedades de archivo.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-112">Because the file is in the process of being created, the file is categorized as a broadcast type, which is denoted by the Flags field of the File Properties Object.</span></span> <span data-ttu-id="0d2b0-113">Algunos valores desconocidos, como el número de paquetes de datos, la duración de la reproducción y la duración del envío, se establecen en cero.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-113">Certain unknown values such as the number of data packets, play duration, and send duration are set to zero.</span></span> <span data-ttu-id="0d2b0-114">Estos valores están representados por los atributos **MF \_ PD \_ ASF \_ XXX** y deben ser actualizados por la aplicación una vez completada la creación del archivo.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-114">These values are represented by **MF\_PD\_ASF\_xxx** attributes and must be updated by the application after file creation is complete.</span></span>

<span data-ttu-id="0d2b0-115">El objeto de perfil especificado reemplaza cualquier perfil existente asociado al objeto ContentInfo, quita los objetos de encabezado a los que se hace referencia y restablece las propiedades de archivo globales, como el tamaño del paquete de datos y el preajuste.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-115">The specified profile object replaces any existing profile associated with the ContentInfo object, removes the referenced header objects, and resets global file properties such as preroll and data packet size.</span></span>

<span data-ttu-id="0d2b0-116">El método **SetProfile** también crea el objeto de datos que representa el objeto de datos ASF.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-116">The **SetProfile** method also creates the data object that represents the ASF Data Object.</span></span> <span data-ttu-id="0d2b0-117">Si reutiliza un objeto ContentInfo que incluye información sobre los paquetes de datos, se produce un error de **SetProfile** y se devuelve el \_ error MF E \_ ya \_ inicializado, lo que indica que ya está asociado a un objeto de datos ASF existente.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-117">If you reuse a ContentInfo object that includes information about any data packets, **SetProfile** fails and returns the MF\_E\_ALREADY\_INITIALIZED error indicating that it is already associated with an existing ASF Data Object.</span></span> <span data-ttu-id="0d2b0-118">De forma predeterminada, para un nuevo objeto ContentInfo, el recuento de paquetes de datos se establece en cero y el tamaño del objeto de datos se establece en 50 bytes.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-118">By default, for a new ContentInfo object, the data packet count is set to zero and the data object size is set to 50 bytes.</span></span> <span data-ttu-id="0d2b0-119">Si usa el multiplexor para generar paquetes de datos, el multiplexor actualiza el objeto ContentInfo para reflejar los nuevos valores, como el recuento de paquetes de datos.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-119">If you use the multiplexer to generate data packets, the multiplexer updates the ContentInfo object to reflect new values such as the data packet count.</span></span> <span data-ttu-id="0d2b0-120">Para obtener más información acerca de la generación de paquetes de datos, consulte [generación de nuevos paquetes de datos ASF](generating-new-asf-data-packets.md).</span><span class="sxs-lookup"><span data-stu-id="0d2b0-120">For more information about data packet generation, see [Generating New ASF Data Packets](generating-new-asf-data-packets.md).</span></span>

<span data-ttu-id="0d2b0-121">Después de agregar todos los objetos de encabezado al objeto de encabezado ASF final, se puede recuperar el tamaño total del encabezado mediante una llamada a [**IMFASFContentInfo:: GetHeaderSize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getheadersize).</span><span class="sxs-lookup"><span data-stu-id="0d2b0-121">After all the Header Objects are added to the final ASF Header Object, the total header size can be retrieved by calling [**IMFASFContentInfo::GetHeaderSize**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getheadersize).</span></span> <span data-ttu-id="0d2b0-122">Este tamaño incluye el tamaño del objeto de datos inicial.</span><span class="sxs-lookup"><span data-stu-id="0d2b0-122">This size includes the initial data object size.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0d2b0-123">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="0d2b0-123">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0d2b0-124">Establecer propiedades en el objeto ContentInfo</span><span class="sxs-lookup"><span data-stu-id="0d2b0-124">Setting Properties in the ContentInfo Object</span></span>](setting-properties-in-the-contentinfo-object.md)
</dt> <dt>

[<span data-ttu-id="0d2b0-125">Escribir un objeto de encabezado ASF para un nuevo archivo</span><span class="sxs-lookup"><span data-stu-id="0d2b0-125">Writing an ASF Header Object for a New File</span></span>](writing-an-asf-header-object-for-a-new-file.md)
</dt> </dl>

 

 



