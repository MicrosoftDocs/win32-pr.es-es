---
description: Los servicios HTTP de Microsoft Windows (WinHTTP) están destinados a las aplicaciones de servidor de nivel intermedio y back-end que requieren acceso a una pila de cliente HTTP.
ms.assetid: 5b0cf321-8f69-4526-a628-e6ca0f9d4a58
title: Trasladar aplicaciones WinINet a WinHTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f64c4ecc825934d32b1d363f010bd04e1484428
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104003014"
---
# <a name="porting-wininet-applications-to-winhttp"></a><span data-ttu-id="218e7-103">Trasladar aplicaciones WinINet a WinHTTP</span><span class="sxs-lookup"><span data-stu-id="218e7-103">Porting WinINet Applications to WinHTTP</span></span>

<span data-ttu-id="218e7-104">Los servicios HTTP de Microsoft Windows (WinHTTP) están destinados a las aplicaciones de servidor de nivel intermedio y back-end que requieren acceso a una pila de cliente HTTP.</span><span class="sxs-lookup"><span data-stu-id="218e7-104">Microsoft Windows HTTP Services (WinHTTP) is targeted at middle-tier and back-end server applications that require access to an HTTP client stack.</span></span> <span data-ttu-id="218e7-105">[Microsoft Windows Internet (WinInet)](winhttp-start-page.md) proporciona una pila de cliente http para las aplicaciones cliente, así como el acceso a los protocolos protocolo de transferencia de archivos (FTP), SOCKSv4 y Gopher.</span><span class="sxs-lookup"><span data-stu-id="218e7-105">[Microsoft Windows Internet (WinINet)](winhttp-start-page.md) provides an HTTP client stack for client applications, as well as access to the File Transfer Protocol (FTP), SOCKSv4, and Gopher protocols.</span></span> <span data-ttu-id="218e7-106">Esta información general puede ayudar a determinar si es beneficioso trasladar las aplicaciones WinINet a WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="218e7-106">This overview can help determine whether porting your WinINet applications to WinHTTP would be beneficial.</span></span> <span data-ttu-id="218e7-107">También se describen los requisitos de conversión específicos.</span><span class="sxs-lookup"><span data-stu-id="218e7-107">It also describes specific conversion requirements.</span></span>

-   [<span data-ttu-id="218e7-108">Aspectos que deben tenerse en cuenta antes de migrar la aplicación WinINet</span><span class="sxs-lookup"><span data-stu-id="218e7-108">Things to Consider Before Porting Your WinINet Application</span></span>](#things-to-consider-before-porting-your-wininet-application)
-   [<span data-ttu-id="218e7-109">Equivalentes de WinHTTP a funciones WinINet</span><span class="sxs-lookup"><span data-stu-id="218e7-109">WinHTTP Equivalents to WinINet Functions</span></span>](#winhttp-equivalents-to-wininet-functions)
-   [<span data-ttu-id="218e7-110">Control diferente de las solicitudes asincrónicas</span><span class="sxs-lookup"><span data-stu-id="218e7-110">Different Handling of Asynchronous Requests</span></span>](#different-handling-of-asynchronous-requests)
-   [<span data-ttu-id="218e7-111">Diferencias en las notificaciones de devolución de llamada de WinHTTP</span><span class="sxs-lookup"><span data-stu-id="218e7-111">Differences in WinHTTP Callback Notifications</span></span>](#differences-in-winhttp-callback-notifications)
-   [<span data-ttu-id="218e7-112">Diferencias de autenticación</span><span class="sxs-lookup"><span data-stu-id="218e7-112">Authentication Differences</span></span>](#authentication-differences)
-   [<span data-ttu-id="218e7-113">Diferencias en las transacciones HTTP seguras</span><span class="sxs-lookup"><span data-stu-id="218e7-113">Differences in Secure HTTP Transactions</span></span>](#differences-in-secure-http-transactions)

## <a name="things-to-consider-before-porting-your-wininet-application"></a><span data-ttu-id="218e7-114">Aspectos que deben tenerse en cuenta antes de migrar la aplicación WinINet</span><span class="sxs-lookup"><span data-stu-id="218e7-114">Things to Consider Before Porting Your WinINet Application</span></span>

<span data-ttu-id="218e7-115">Considere la posibilidad de migrar la aplicación WinINet a WinHTTP si la aplicación se beneficiaría de:</span><span class="sxs-lookup"><span data-stu-id="218e7-115">Consider porting your WinINet application to WinHTTP if your application would benefit from:</span></span>

-   <span data-ttu-id="218e7-116">Una pila de cliente HTTP segura para el servidor.</span><span class="sxs-lookup"><span data-stu-id="218e7-116">A server-safe HTTP client stack.</span></span>
-   <span data-ttu-id="218e7-117">Uso minimizado de la pila.</span><span class="sxs-lookup"><span data-stu-id="218e7-117">Minimized stack usage.</span></span>
-   <span data-ttu-id="218e7-118">Escalabilidad de una aplicación de servidor.</span><span class="sxs-lookup"><span data-stu-id="218e7-118">The scalability of a server application.</span></span>
-   <span data-ttu-id="218e7-119">Menos dependencias en las API relacionadas con la plataforma.</span><span class="sxs-lookup"><span data-stu-id="218e7-119">Fewer dependencies on platform-related APIs.</span></span>
-   <span data-ttu-id="218e7-120">Compatibilidad con la suplantación de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="218e7-120">Support for thread impersonation.</span></span>
-   <span data-ttu-id="218e7-121">Pila HTTP fácil de atender.</span><span class="sxs-lookup"><span data-stu-id="218e7-121">A service-friendly HTTP stack.</span></span>
-   <span data-ttu-id="218e7-122">Acceso al objeto [**WinHttpRequest**](winhttprequest.md) que admite scripts.</span><span class="sxs-lookup"><span data-stu-id="218e7-122">Access to the scriptable [**WinHttpRequest**](winhttprequest.md) object.</span></span>

<span data-ttu-id="218e7-123">No considere la posibilidad de migrar la aplicación WinINet a WinHTTP si debe ser compatible con uno o varios de los siguientes elementos:</span><span class="sxs-lookup"><span data-stu-id="218e7-123">Do not consider porting your WinINet application to WinHTTP if it must support one or more of the following:</span></span>

-   <span data-ttu-id="218e7-124">El protocolo FTP o Gopher de la pila HTTP.</span><span class="sxs-lookup"><span data-stu-id="218e7-124">The FTP or Gopher protocol from the HTTP stack.</span></span>
-   <span data-ttu-id="218e7-125">Compatibilidad con el protocolo SOCKSv4 para comunicarse con servidores proxy SOCKS.</span><span class="sxs-lookup"><span data-stu-id="218e7-125">Support for SOCKSv4 protocol for communicating with SOCKS proxies.</span></span>
-   <span data-ttu-id="218e7-126">Servicios de acceso telefónico automáticos.</span><span class="sxs-lookup"><span data-stu-id="218e7-126">Automatic dial-up services.</span></span>

<span data-ttu-id="218e7-127">Si decide migrar la aplicación a WinHTTP, las siguientes secciones le guiarán a través del proceso de conversión.</span><span class="sxs-lookup"><span data-stu-id="218e7-127">If you decide to port your application to WinHTTP, the following sections guide you through the conversion process.</span></span>

<span data-ttu-id="218e7-128">Para obtener una aplicación de ejemplo para WinINet y WinHTTP, compare el ejemplo AsyncDemo de WinINet con el ejemplo AsyncDemo para WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="218e7-128">For a sample application for both WinINet and WinHTTP, compare the AsyncDemo sample for WinINet with the AsyncDemo sample for WinHTTP.</span></span>

## <a name="winhttp-equivalents-to-wininet-functions"></a><span data-ttu-id="218e7-129">Equivalentes de WinHTTP a funciones WinINet</span><span class="sxs-lookup"><span data-stu-id="218e7-129">WinHTTP Equivalents to WinINet Functions</span></span>

<span data-ttu-id="218e7-130">En la tabla siguiente se enumeran las funciones de WinINet relacionadas con la pila de cliente HTTP junto con los equivalentes de WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="218e7-130">The following table lists WinINet functions related to the HTTP client stack together with the WinHTTP equivalents.</span></span>

<span data-ttu-id="218e7-131">Si la aplicación requiere funciones WinINet que no aparecen en la lista, no lleve la aplicación a WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="218e7-131">If your application requires WinINet functions that are not listed, do not port your application to WinHTTP.</span></span>



| <span data-ttu-id="218e7-132">Función WinINet</span><span class="sxs-lookup"><span data-stu-id="218e7-132">WinINet function</span></span>                                                       | <span data-ttu-id="218e7-133">Equivalente de WinHTTP</span><span class="sxs-lookup"><span data-stu-id="218e7-133">WinHTTP equivalent</span></span>                                                                                                                                                                                     | <span data-ttu-id="218e7-134">Cambios importantes</span><span class="sxs-lookup"><span data-stu-id="218e7-134">Notable changes</span></span>                                                                                                                                                                                                                                                                                                                      |
|------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="218e7-135">**HttpAddRequestHeaders**</span><span class="sxs-lookup"><span data-stu-id="218e7-135">**HttpAddRequestHeaders**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpaddrequestheadersa)             | [<span data-ttu-id="218e7-136">**WinHttpAddRequestHeaders**</span><span class="sxs-lookup"><span data-stu-id="218e7-136">**WinHttpAddRequestHeaders**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpaddrequestheaders)                                                                                                                                           | <span data-ttu-id="218e7-137">Ninguno.</span><span class="sxs-lookup"><span data-stu-id="218e7-137">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="218e7-138">**HttpEndRequest**</span><span class="sxs-lookup"><span data-stu-id="218e7-138">**HttpEndRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpendrequesta)                           | [<span data-ttu-id="218e7-139">**WinHttpReceiveResponse**</span><span class="sxs-lookup"><span data-stu-id="218e7-139">**WinHttpReceiveResponse**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)                                                                                                                                               | <span data-ttu-id="218e7-140">El valor de contexto se establece con [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) o [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="218e7-140">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="218e7-141">Las opciones de solicitud se establecen con [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="218e7-141">Request options are set with [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span> <span data-ttu-id="218e7-142">Se debe llamar a [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) después de enviar una solicitud.</span><span class="sxs-lookup"><span data-stu-id="218e7-142">[**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) must be called after sending a request.</span></span>                      |
| [<span data-ttu-id="218e7-143">**HttpOpenRequest**</span><span class="sxs-lookup"><span data-stu-id="218e7-143">**HttpOpenRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta)                         | [<span data-ttu-id="218e7-144">**WinHttpOpenRequest**</span><span class="sxs-lookup"><span data-stu-id="218e7-144">**WinHttpOpenRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest)                                                                                                                                                       | <span data-ttu-id="218e7-145">El valor de contexto se establece con [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) o [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="218e7-145">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span>                                                                                                                                                                                                      |
| [<span data-ttu-id="218e7-146">**HttpQueryInfo**</span><span class="sxs-lookup"><span data-stu-id="218e7-146">**HttpQueryInfo**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpqueryinfoa)                             | [<span data-ttu-id="218e7-147">**WinHttpQueryHeaders**</span><span class="sxs-lookup"><span data-stu-id="218e7-147">**WinHttpQueryHeaders**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryheaders)                                                                                                                                                     | <span data-ttu-id="218e7-148">Ninguno.</span><span class="sxs-lookup"><span data-stu-id="218e7-148">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="218e7-149">**HttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="218e7-149">**HttpSendRequest**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta)                         | [<span data-ttu-id="218e7-150">**WinHttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="218e7-150">**WinHttpSendRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest)                                                                                                                                                       | <span data-ttu-id="218e7-151">El valor de contexto se puede establecer con [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest).</span><span class="sxs-lookup"><span data-stu-id="218e7-151">The context value can be set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest).</span></span>                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="218e7-152">**HttpSendRequestEx**</span><span class="sxs-lookup"><span data-stu-id="218e7-152">**HttpSendRequestEx**</span></span>](/windows/desktop/api/wininet/nf-wininet-httpsendrequestexa)                     | [<span data-ttu-id="218e7-153">**WinHttpSendRequest**</span><span class="sxs-lookup"><span data-stu-id="218e7-153">**WinHttpSendRequest**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest)                                                                                                                                                       | <span data-ttu-id="218e7-154">No se pueden proporcionar búferes.</span><span class="sxs-lookup"><span data-stu-id="218e7-154">Buffers cannot be provided.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="218e7-155">**InternetCanonicalizeUrl**</span><span class="sxs-lookup"><span data-stu-id="218e7-155">**InternetCanonicalizeUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcanonicalizeurla)         | <span data-ttu-id="218e7-156">No equivalente</span><span class="sxs-lookup"><span data-stu-id="218e7-156">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="218e7-157">Las direcciones URL ahora se colocan en formato canónico en [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="218e7-157">URLs are now put in canonical form in [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span>                                                                                                                                                                                                                                              |
| [<span data-ttu-id="218e7-158">**InternetCheckConnection**</span><span class="sxs-lookup"><span data-stu-id="218e7-158">**InternetCheckConnection**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcheckconnectiona)         | <span data-ttu-id="218e7-159">No equivalente</span><span class="sxs-lookup"><span data-stu-id="218e7-159">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="218e7-160">No se implementa en WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="218e7-160">Not implemented in WinHTTP.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="218e7-161">**InternetCloseHandle**</span><span class="sxs-lookup"><span data-stu-id="218e7-161">**InternetCloseHandle**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetclosehandle)                 | [<span data-ttu-id="218e7-162">**WinHttpCloseHandle**</span><span class="sxs-lookup"><span data-stu-id="218e7-162">**WinHttpCloseHandle**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpclosehandle)                                                                                                                                                       | <span data-ttu-id="218e7-163">Al cerrar un identificador primario en WinHTTP no se cierran de forma recursiva los identificadores secundarios.</span><span class="sxs-lookup"><span data-stu-id="218e7-163">Closing a parent handle in WinHTTP does not recursively close child handles.</span></span>                                                                                                                                                                                                                                                         |
| [<span data-ttu-id="218e7-164">**InternetCombineUrl**</span><span class="sxs-lookup"><span data-stu-id="218e7-164">**InternetCombineUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcombineurla)                   | <span data-ttu-id="218e7-165">No equivalente</span><span class="sxs-lookup"><span data-stu-id="218e7-165">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="218e7-166">Las direcciones URL se pueden ensamblar con la función [**WinHttpCreateUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl) .</span><span class="sxs-lookup"><span data-stu-id="218e7-166">URLs can be assembled with the [**WinHttpCreateUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl) function.</span></span>                                                                                                                                                                                                                                                |
| [<span data-ttu-id="218e7-167">**InternetConfirmZoneCrossing**</span><span class="sxs-lookup"><span data-stu-id="218e7-167">**InternetConfirmZoneCrossing**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetconfirmzonecrossing) | <span data-ttu-id="218e7-168">No equivalente</span><span class="sxs-lookup"><span data-stu-id="218e7-168">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="218e7-169">No se implementa en WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="218e7-169">Not implemented in WinHTTP.</span></span>                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="218e7-170">**InternetConnect**</span><span class="sxs-lookup"><span data-stu-id="218e7-170">**InternetConnect**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetconnecta)                         | [<span data-ttu-id="218e7-171">**WinHttpConnect**</span><span class="sxs-lookup"><span data-stu-id="218e7-171">**WinHttpConnect**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect)                                                                                                                                                               | <span data-ttu-id="218e7-172">El valor de contexto se establece con [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) o [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="218e7-172">The context value is set with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="218e7-173">Las opciones de solicitud se establecen con [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span><span class="sxs-lookup"><span data-stu-id="218e7-173">Request options are set with [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest).</span></span> <span data-ttu-id="218e7-174">Las credenciales de usuario se establecen con [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span><span class="sxs-lookup"><span data-stu-id="218e7-174">User credentials are set with [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span></span>                                 |
| [<span data-ttu-id="218e7-175">**InternetCrackUrl**</span><span class="sxs-lookup"><span data-stu-id="218e7-175">**InternetCrackUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcrackurla)                       | [<span data-ttu-id="218e7-176">**WinHttpCrackUrl**</span><span class="sxs-lookup"><span data-stu-id="218e7-176">**WinHttpCrackUrl**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl)                                                                                                                                                             | <span data-ttu-id="218e7-177">Comportamiento opuesto de la marca de escape de ICU \_ : con [**InternetCrackUrl**](/windows/desktop/api/wininet/nf-wininet-internetcrackurla), esta marca hace que las secuencias de escape (% XX) se conviertan en caracteres, pero con [**WinHttpCrackUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl), hace que los caracteres que se deben escapar de una solicitud HTTP se conviertan en secuencias de escape.</span><span class="sxs-lookup"><span data-stu-id="218e7-177">Opposite behavior of the ICU\_ESCAPE flag: with [**InternetCrackUrl**](/windows/desktop/api/wininet/nf-wininet-internetcrackurla), this flag causes escape sequences (%xx) to be converted to characters, but with [**WinHttpCrackUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcrackurl), it causes characters that must be escaped from in an HTTP request to be converted to escape sequences.</span></span> |
| [<span data-ttu-id="218e7-178">**InternetCreateUrl**</span><span class="sxs-lookup"><span data-stu-id="218e7-178">**InternetCreateUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetcreateurla)                     | [<span data-ttu-id="218e7-179">**WinHttpCreateUrl**</span><span class="sxs-lookup"><span data-stu-id="218e7-179">**WinHttpCreateUrl**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpcreateurl)                                                                                                                                                           | <span data-ttu-id="218e7-180">Ninguno.</span><span class="sxs-lookup"><span data-stu-id="218e7-180">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="218e7-181">**InternetErrorDlg**</span><span class="sxs-lookup"><span data-stu-id="218e7-181">**InternetErrorDlg**</span></span>](/windows/desktop/api/wininet/nf-wininet-interneterrordlg)                       | <span data-ttu-id="218e7-182">No equivalente</span><span class="sxs-lookup"><span data-stu-id="218e7-182">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="218e7-183">Dado que WinHTTP está destinado a aplicaciones del lado servidor, no implementa ninguna interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="218e7-183">Because WinHTTP is targeted at server-side applications, it does not implement any user interface.</span></span>                                                                                                                                                                                                                                   |
| [<span data-ttu-id="218e7-184">**InternetGetCookie**</span><span class="sxs-lookup"><span data-stu-id="218e7-184">**InternetGetCookie**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetgetcookiea)                     | <span data-ttu-id="218e7-185">No equivalente</span><span class="sxs-lookup"><span data-stu-id="218e7-185">No equivalent</span></span>                                                                                                                                                                                          | <span data-ttu-id="218e7-186">WinHTTP no conserva los datos entre sesiones y no puede tener acceso a las cookies de WinINet.</span><span class="sxs-lookup"><span data-stu-id="218e7-186">WinHTTP does not persist data between sessions and cannot access WinINet cookies.</span></span>                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="218e7-187">**InternetOpen**</span><span class="sxs-lookup"><span data-stu-id="218e7-187">**InternetOpen**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetopena)                               | [<span data-ttu-id="218e7-188">**WinHttpOpen**</span><span class="sxs-lookup"><span data-stu-id="218e7-188">**WinHttpOpen**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopen)                                                                                                                                                                     | <span data-ttu-id="218e7-189">Ninguno.</span><span class="sxs-lookup"><span data-stu-id="218e7-189">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="218e7-190">**InternetOpenUrl**</span><span class="sxs-lookup"><span data-stu-id="218e7-190">**InternetOpenUrl**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetopenurla)                         | <span data-ttu-id="218e7-191">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect), [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)</span><span class="sxs-lookup"><span data-stu-id="218e7-191">[**WinHttpConnect**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpconnect), [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest), [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest), [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse)</span></span> | <span data-ttu-id="218e7-192">Esta funcionalidad está disponible en las funciones WinHTTP enumeradas.</span><span class="sxs-lookup"><span data-stu-id="218e7-192">This functionality is available in the WinHTTP functions listed.</span></span>                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="218e7-193">**InternetQueryDataAvailable**</span><span class="sxs-lookup"><span data-stu-id="218e7-193">**InternetQueryDataAvailable**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetquerydataavailable)   | [<span data-ttu-id="218e7-194">**WinHttpQueryDataAvailable**</span><span class="sxs-lookup"><span data-stu-id="218e7-194">**WinHttpQueryDataAvailable**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable)                                                                                                                                         | <span data-ttu-id="218e7-195">No hay parámetros reservados.</span><span class="sxs-lookup"><span data-stu-id="218e7-195">No reserved parameters.</span></span>                                                                                                                                                                                                                                                                                                              |
| [<span data-ttu-id="218e7-196">**InternetQueryOption**</span><span class="sxs-lookup"><span data-stu-id="218e7-196">**InternetQueryOption**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetqueryoptiona)                 | [<span data-ttu-id="218e7-197">**WinHttpQueryOption**</span><span class="sxs-lookup"><span data-stu-id="218e7-197">**WinHttpQueryOption**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryoption)                                                                                                                                                       | <span data-ttu-id="218e7-198">WinHTTP ofrece un conjunto diferente de opciones de WinINet.</span><span class="sxs-lookup"><span data-stu-id="218e7-198">WinHTTP offers a different set of options from WinINet.</span></span> <span data-ttu-id="218e7-199">Para obtener más información y las opciones que ofrece WinHTTP, vea [**marcas de opciones**](option-flags.md).</span><span class="sxs-lookup"><span data-stu-id="218e7-199">For more information and options offered by WinHTTP, see [**Option Flags**](option-flags.md).</span></span>                                                                                                                                                                               |
| [<span data-ttu-id="218e7-200">**InternetReadFile**</span><span class="sxs-lookup"><span data-stu-id="218e7-200">**InternetReadFile**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetreadfile)                       | [<span data-ttu-id="218e7-201">**WinHttpReadData**</span><span class="sxs-lookup"><span data-stu-id="218e7-201">**WinHttpReadData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata)                                                                                                                                                             | <span data-ttu-id="218e7-202">Ninguno.</span><span class="sxs-lookup"><span data-stu-id="218e7-202">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="218e7-203">**InternetReadFileEx**</span><span class="sxs-lookup"><span data-stu-id="218e7-203">**InternetReadFileEx**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetreadfileexa)                   | [<span data-ttu-id="218e7-204">**WinHttpReadData**</span><span class="sxs-lookup"><span data-stu-id="218e7-204">**WinHttpReadData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata)                                                                                                                                                             | <span data-ttu-id="218e7-205">En lugar de una estructura, el búfer es una región de memoria direccionada con un puntero.</span><span class="sxs-lookup"><span data-stu-id="218e7-205">Rather than a structure, the buffer is a region of memory addressed with a pointer.</span></span>                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="218e7-206">**InternetSetOption**</span><span class="sxs-lookup"><span data-stu-id="218e7-206">**InternetSetOption**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona)                     | [<span data-ttu-id="218e7-207">**WinHttpSetOption**</span><span class="sxs-lookup"><span data-stu-id="218e7-207">**WinHttpSetOption**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption)                                                                                                                                                           | <span data-ttu-id="218e7-208">Ninguno.</span><span class="sxs-lookup"><span data-stu-id="218e7-208">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="218e7-209">**InternetSetStatusCallback**</span><span class="sxs-lookup"><span data-stu-id="218e7-209">**InternetSetStatusCallback**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetsetstatuscallback)     | [<span data-ttu-id="218e7-210">**WinHttpSetStatusCallback**</span><span class="sxs-lookup"><span data-stu-id="218e7-210">**WinHttpSetStatusCallback**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback)                                                                                                                                           | <span data-ttu-id="218e7-211">Para obtener más información, vea el tema sobre el control diferente de las solicitudes asincrónicas en este tema.</span><span class="sxs-lookup"><span data-stu-id="218e7-211">For more information, see "Different Handling of Asynchronous Requests" in this topic.</span></span>                                                                                                                                                                                                                                               |
| [<span data-ttu-id="218e7-212">**InternetTimeFromSystemTime**</span><span class="sxs-lookup"><span data-stu-id="218e7-212">**InternetTimeFromSystemTime**</span></span>](/windows/desktop/api/wininet/nf-wininet-internettimefromsystemtime)   | [<span data-ttu-id="218e7-213">**WinHttpTimeFromSystemTime**</span><span class="sxs-lookup"><span data-stu-id="218e7-213">**WinHttpTimeFromSystemTime**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttptimefromsystemtime)                                                                                                                                         | <span data-ttu-id="218e7-214">Ninguno.</span><span class="sxs-lookup"><span data-stu-id="218e7-214">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="218e7-215">**InternetTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="218e7-215">**InternetTimeToSystemTime**</span></span>](/windows/desktop/api/wininet/nf-wininet-internettimetosystemtime)       | [<span data-ttu-id="218e7-216">**WinHttpTimeToSystemTime**</span><span class="sxs-lookup"><span data-stu-id="218e7-216">**WinHttpTimeToSystemTime**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttptimetosystemtime)                                                                                                                                             | <span data-ttu-id="218e7-217">Ninguno.</span><span class="sxs-lookup"><span data-stu-id="218e7-217">None.</span></span>                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="218e7-218">**InternetWriteFile**</span><span class="sxs-lookup"><span data-stu-id="218e7-218">**InternetWriteFile**</span></span>](/windows/desktop/api/wininet/nf-wininet-internetwritefile)                     | [<span data-ttu-id="218e7-219">**WinHttpWriteData**</span><span class="sxs-lookup"><span data-stu-id="218e7-219">**WinHttpWriteData**</span></span>](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata)                                                                                                                                                           | <span data-ttu-id="218e7-220">Ninguno.</span><span class="sxs-lookup"><span data-stu-id="218e7-220">None.</span></span>                                                                                                                                                                                                                                                                                                                                |



 

## <a name="different-handling-of-asynchronous-requests"></a><span data-ttu-id="218e7-221">Control diferente de las solicitudes asincrónicas</span><span class="sxs-lookup"><span data-stu-id="218e7-221">Different Handling of Asynchronous Requests</span></span>

<span data-ttu-id="218e7-222">Tenga en cuenta que en WinINet y WinHTTP, algunas funciones pueden completar solicitudes asincrónicas de forma sincrónica o asincrónica.</span><span class="sxs-lookup"><span data-stu-id="218e7-222">Be aware that in WinINet and WinHTTP, some functions can complete asynchronous requests either synchronously or asynchronously.</span></span> <span data-ttu-id="218e7-223">La aplicación debe controlar cualquiera de las situaciones.</span><span class="sxs-lookup"><span data-stu-id="218e7-223">Your application must handle either situation.</span></span> <span data-ttu-id="218e7-224">Hay diferencias significativas en cómo WinINet y WinHTTP controlan estas funciones potencialmente asincrónicas.</span><span class="sxs-lookup"><span data-stu-id="218e7-224">There are significant differences in how WinINet and WinHTTP handle these potentially asynchronous functions.</span></span>

<span data-ttu-id="218e7-225">WinINet</span><span class="sxs-lookup"><span data-stu-id="218e7-225">WinINet</span></span>

-   <span data-ttu-id="218e7-226">Finalización sincrónica: Si una llamada a una función de WinINet potencialmente asincrónica se completa sincrónicamente, los parámetros de salida de la función devuelven los resultados de la operación.</span><span class="sxs-lookup"><span data-stu-id="218e7-226">Synchronous completion: If a potentially asynchronous WinINet function call completes synchronously, the OUT parameters of the function return the results of the operation.</span></span> <span data-ttu-id="218e7-227">Cuando se produce un error, recupere el código de error llamando a [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) después de la llamada a la función Wininet.</span><span class="sxs-lookup"><span data-stu-id="218e7-227">When an error occurs, retrieve the error code by calling [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) after the WinINet function call.</span></span>

-   <span data-ttu-id="218e7-228">Finalización asincrónica: Si una llamada a una función potencialmente asincrónica se completa de forma asincrónica, los resultados de la operación y los errores se pueden obtener en la función de devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="218e7-228">Asynchronous completion: If a potentially asynchronous function call completes asynchronously, the results of the operation, and any errors, are accessible in the callback function.</span></span> <span data-ttu-id="218e7-229">La función de devolución de llamada se ejecuta en un subproceso de trabajo, no en el subproceso que realizó la llamada de función inicial.</span><span class="sxs-lookup"><span data-stu-id="218e7-229">The callback function is executed on a worker thread, not on the thread that made the initial function call.</span></span>

<span data-ttu-id="218e7-230">En otras palabras, la aplicación debe duplicar la lógica para controlar los resultados de estas operaciones en dos lugares: inmediatamente después de la llamada de función y en la función de devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="218e7-230">In other words, your application must duplicate logic to handle the results of such operations in two places: both immediately after the function call and in the callback function.</span></span>

<span data-ttu-id="218e7-231">WinHTTP simplifica este modelo, ya que permite implementar la lógica operativa solo en la función de devolución de llamada, que recibe una notificación de finalización independientemente de si la operación se completó de forma sincrónica o asincrónica.</span><span class="sxs-lookup"><span data-stu-id="218e7-231">WinHTTP simplifies this model by enabling you to implement the operational logic only in the callback function, which receives a completion notification regardless of whether the operation completed synchronously or asynchronously.</span></span> <span data-ttu-id="218e7-232">Cuando se habilita la operación asincrónica, los parámetros OUT de las funciones WinHTTP no devuelven datos significativos y deben establecerse en **null**.</span><span class="sxs-lookup"><span data-stu-id="218e7-232">When asynchronous operation is enabled, the OUT parameters of WinHTTP functions do not return meaningful data and must be set to **NULL**.</span></span>

<span data-ttu-id="218e7-233">La única diferencia significativa entre la finalización asincrónica y sincrónica en WinHTTP, desde la perspectiva de la aplicación, es donde se ejecuta la función de devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="218e7-233">The only significant difference between asynchronous and synchronous completion in WinHTTP, from the application perspective, is in where the callback function is executed.</span></span>

<span data-ttu-id="218e7-234">WinHTTP</span><span class="sxs-lookup"><span data-stu-id="218e7-234">WinHTTP</span></span>

-   <span data-ttu-id="218e7-235">Finalización sincrónica: cuando una operación se completa de forma sincrónica, los resultados se devuelven en una función de devolución de llamada que se ejecuta en el mismo subproceso que la llamada de función original.</span><span class="sxs-lookup"><span data-stu-id="218e7-235">Synchronous completion: When an operation completes synchronously, the results are returned in a callback function that executes in the same thread as the original function call.</span></span>

-   <span data-ttu-id="218e7-236">Finalización asincrónica: cuando una operación se completa de forma asincrónica, los resultados se devuelven en una función de devolución de llamada que se ejecuta en un subproceso de trabajo.</span><span class="sxs-lookup"><span data-stu-id="218e7-236">Asynchronous completion: When an operation completes asynchronously, the results are returned in a callback function that executes in a worker thread.</span></span>

<span data-ttu-id="218e7-237">Aunque la mayoría de los errores también se pueden controlar por completo dentro de la función de devolución de llamada, las aplicaciones WinHTTP deben estar preparadas para que una función devuelva **false** debido a un error de \_ parámetro no válido \_ u otro error similar recuperado mediante una llamada a [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror).</span><span class="sxs-lookup"><span data-stu-id="218e7-237">Although most errors can also be handled entirely within the callback function, WinHTTP applications must still be prepared for a function to return **FALSE** because of an ERROR\_INVALID\_PARAMETER or other similar error retrieved by calling [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror).</span></span>

<span data-ttu-id="218e7-238">A diferencia de WinINet, que puede ejecutar varias operaciones asincrónicas simultáneamente, WinHTTP aplica una directiva de una operación asincrónica pendiente por identificador de solicitud.</span><span class="sxs-lookup"><span data-stu-id="218e7-238">Unlike WinINet, which can execute multiple asynchronous operations simultaneously, WinHTTP enforces a policy of one pending asynchronous operation per request handle.</span></span> <span data-ttu-id="218e7-239">Si una operación está pendiente y se llama a otra función de WinHTTP, se produce un error en la segunda función y [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) devuelve un error de \_ operación no válida \_ .</span><span class="sxs-lookup"><span data-stu-id="218e7-239">If one operation is pending and another WinHTTP function is called, the second function fails and [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) returns ERROR\_INVALID\_OPERATION.</span></span>

<span data-ttu-id="218e7-240">WinHTTP simplifica este modelo, ya que permite implementar la lógica operativa solo en la función de devolución de llamada, que recibe una notificación de finalización independientemente de si la operación se completó de forma sincrónica o asincrónica.</span><span class="sxs-lookup"><span data-stu-id="218e7-240">WinHTTP simplifies this model by enabling you to implement the operational logic only in the callback function, which receives a completion notification regardless of whether the operation completed synchronously or asynchronously.</span></span> <span data-ttu-id="218e7-241">Cuando se habilita la operación asincrónica, los parámetros OUT de las funciones WinHTTP no devuelven datos significativos y deben establecerse en **null**.</span><span class="sxs-lookup"><span data-stu-id="218e7-241">When asynchronous operation is enabled, the OUT parameters of WinHTTP functions do not return meaningful data and must be set to **NULL**.</span></span>

## <a name="differences-in-winhttp-callback-notifications"></a><span data-ttu-id="218e7-242">Diferencias en las notificaciones de devolución de llamada de WinHTTP</span><span class="sxs-lookup"><span data-stu-id="218e7-242">Differences in WinHTTP Callback Notifications</span></span>

<span data-ttu-id="218e7-243">La función de devolución de llamada de estado recibe actualizaciones sobre el estado de las operaciones a través de marcas de notificación.</span><span class="sxs-lookup"><span data-stu-id="218e7-243">The status callback function receives updates on the status of operations through notification flags.</span></span> <span data-ttu-id="218e7-244">En WinHTTP, las notificaciones se seleccionan mediante el parámetro *dwNotificationFlags* de la función [**WinHttpSetStatusCallback**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback) .</span><span class="sxs-lookup"><span data-stu-id="218e7-244">In WinHTTP, notifications are selected using the *dwNotificationFlags* parameter of the [**WinHttpSetStatusCallback**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetstatuscallback) function.</span></span> <span data-ttu-id="218e7-245">Use la marca de **\_ devolución de llamada WinHTTP \_ marca todas las \_ \_ notificaciones** para recibir notificaciones de todas las actualizaciones de estado.</span><span class="sxs-lookup"><span data-stu-id="218e7-245">Use the **WINHTTP\_CALLBACK\_FLAG\_ALL\_NOTIFICATIONS** flag to be notified of all status updates.</span></span>

<span data-ttu-id="218e7-246">Las notificaciones que indican que se ha completado una operación determinada se denominan notificaciones de finalización o simplemente finalizaciones.</span><span class="sxs-lookup"><span data-stu-id="218e7-246">Notifications that indicate a particular operation is complete are called completion notifications, or just completions.</span></span> <span data-ttu-id="218e7-247">En WinINet, cada vez que la función de devolución de llamada recibe una finalización, el parámetro *lpvStatusInformation* contiene una estructura de [**\_ \_ resultados asincrónica de Internet**](/windows/desktop/api/wininet/ns-wininet-internet_async_result) .</span><span class="sxs-lookup"><span data-stu-id="218e7-247">In WinINet, each time the callback function receives a completion, the *lpvStatusInformation* parameter contains an [**INTERNET\_ASYNC\_RESULT**](/windows/desktop/api/wininet/ns-wininet-internet_async_result) structure.</span></span> <span data-ttu-id="218e7-248">En WinHTTP, esta estructura no está disponible para todas las finalizaciones.</span><span class="sxs-lookup"><span data-stu-id="218e7-248">In WinHTTP, this structure is not available for all completions.</span></span> <span data-ttu-id="218e7-249">Es importante revisar la página de referencia de la [**\_ devolución de \_ llamada de estado de WinHTTP**](/windows/win32/api/winhttp/nc-winhttp-winhttp_status_callback), que contiene información sobre las notificaciones y el tipo de datos que se puede esperar para cada uno.</span><span class="sxs-lookup"><span data-stu-id="218e7-249">It is important to review the reference page for [**WINHTTP\_STATUS\_CALLBACK**](/windows/win32/api/winhttp/nc-winhttp-winhttp_status_callback), which contains information about notifications and what type of data can be expected for each.</span></span>

<span data-ttu-id="218e7-250">En WinHTTP, un **error de solicitud de \_ Estado de devolución de llamada \_ \_ \_ de WinHTTP**, una sola finalización, indica que se produjo un error en una operación.</span><span class="sxs-lookup"><span data-stu-id="218e7-250">In WinHTTP, a single completion, **WINHTTP\_CALLBACK\_STATUS\_REQUEST\_ERROR**, indicates that an operation failed.</span></span> <span data-ttu-id="218e7-251">Todas las demás finalizaciones indican una operación correcta.</span><span class="sxs-lookup"><span data-stu-id="218e7-251">All other completions indicate a successful operation.</span></span>

<span data-ttu-id="218e7-252">Tanto WinINet como WinHTTP usan un valor de contexto definido por el usuario para pasar información del subproceso principal a la función de devolución de llamada de estado, que se puede ejecutar en un subproceso de trabajo.</span><span class="sxs-lookup"><span data-stu-id="218e7-252">Both WinINet and WinHTTP use a user-defined context value to pass information from the main thread to the status callback function, which can be executed on a worker thread.</span></span> <span data-ttu-id="218e7-253">En WinINet, el valor de contexto utilizado por la función de devolución de llamada de estado se establece mediante una llamada a una de varias funciones.</span><span class="sxs-lookup"><span data-stu-id="218e7-253">In WinINet, the context value used by the status callback function is set by calling one of several functions.</span></span> <span data-ttu-id="218e7-254">En WinHTTP, el valor de contexto se establece solo con [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) o [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="218e7-254">In WinHTTP, the context value is set only with [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="218e7-255">Debido a esto, es posible que se produzca una notificación antes de que se establezca un valor de contexto en WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="218e7-255">Because of this, it is possible in WinHTTP for a notification to occur before a context value is set.</span></span> <span data-ttu-id="218e7-256">Si la función de devolución de llamada recibe una notificación antes de que se establezca el valor de contexto, la aplicación debe estar preparada para recibir **null** en el parámetro *dwContext* de la función de devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="218e7-256">If the callback function receives a notification before the context value is set, the application must be prepared to receive **NULL** in the *dwContext* parameter of the callback function.</span></span>

## <a name="authentication-differences"></a><span data-ttu-id="218e7-257">Diferencias de autenticación</span><span class="sxs-lookup"><span data-stu-id="218e7-257">Authentication Differences</span></span>

<span data-ttu-id="218e7-258">En WinINet, las credenciales de usuario se establecen mediante una llamada a la función [**InternetSetOption**](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona) , con código similar al que se proporciona en el ejemplo de código siguiente.</span><span class="sxs-lookup"><span data-stu-id="218e7-258">In WinINet, user credentials are set by calling the [**InternetSetOption**](/windows/desktop/api/wininet/nf-wininet-internetsetoptiona) function, using code similar to that provided in the following code example.</span></span>

``` syntax
// Use the WinINet InternetSetOption function to set the 
// user credentials to the user name contained in strUsername 
// and the password to the contents of strPassword.
       
InternetSetOption( hRequest, INTERNET_OPTION_PROXY_USERNAME, 
                   strUsername, strlen(strUsername) + 1 );

InternetSetOption( hRequest, INTERNET_OPTION_PROXY_PASSWORD, 
                   strPassword, strlen(strPassword) + 1 );
```

<span data-ttu-id="218e7-259">Por compatibilidad, las credenciales de usuario se pueden establecer de forma similar en WinHTTP mediante la función [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) , pero esto no se recomienda porque puede suponer una vulnerabilidad de seguridad.</span><span class="sxs-lookup"><span data-stu-id="218e7-259">For compatibility, user credentials can similarly be set in WinHTTP using the [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) function, but this is not recommended because it can pose a security vulnerability.</span></span>

<span data-ttu-id="218e7-260">En su lugar, cuando una aplicación recibe un código de estado 401 en WinHTTP, el método recomendado para establecer credenciales es primero identificar un esquema de autenticación mediante [**WinHttpQueryAuthSchemes**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes) y, en segundo lugar, establecer las credenciales con [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span><span class="sxs-lookup"><span data-stu-id="218e7-260">Instead, when an application receives a 401 status code in WinHTTP, the recommended method of setting credentials is first to identify an authentication scheme using [**WinHttpQueryAuthSchemes**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryauthschemes) and, second, set the credentials using [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials).</span></span> <span data-ttu-id="218e7-261">En el ejemplo de código siguiente se muestra cómo hacerlo.</span><span class="sxs-lookup"><span data-stu-id="218e7-261">The following code example shows how to do this.</span></span>

``` syntax
DWORD dwSupportedSchemes;
DWORD dwPrefered;
DWORD dwTarget;

// Obtain the supported and first schemes.
WinHttpQueryAuthSchemes( hRequest, &dwSupportedSchemes, &dwPrefered, &dwTarget );

// Set the credentials before resending the request.
WinHttpSetCredentials( hRequest, dwTarget, dwPrefered, strUsername, strPassword, NULL );
```

<span data-ttu-id="218e7-262">Dado que no hay ningún equivalente a [**InternetErrorDlg**](/windows/desktop/api/wininet/nf-wininet-interneterrordlg) en WinHTTP, las aplicaciones que obtienen credenciales a través de una interfaz de usuario deben proporcionar su propia interfaz.</span><span class="sxs-lookup"><span data-stu-id="218e7-262">Because there is no equivalent to [**InternetErrorDlg**](/windows/desktop/api/wininet/nf-wininet-interneterrordlg) in WinHTTP, applications that obtain credentials through a user interface must provide their own interface.</span></span>

<span data-ttu-id="218e7-263">A diferencia de WinINet, WinHTTP no almacena en caché las contraseñas.</span><span class="sxs-lookup"><span data-stu-id="218e7-263">Unlike WinINet, WinHTTP does not cache passwords.</span></span> <span data-ttu-id="218e7-264">Se deben proporcionar credenciales de usuario válidas para cada solicitud.</span><span class="sxs-lookup"><span data-stu-id="218e7-264">Valid user credentials must be supplied for each request.</span></span>

<span data-ttu-id="218e7-265">WinHTTP no admite el esquema de autenticación de contraseña distribuida (DPA) compatible con WinINet.</span><span class="sxs-lookup"><span data-stu-id="218e7-265">WinHTTP does not support the Distributed Password Authentication (DPA) scheme supported by WinINet.</span></span> <span data-ttu-id="218e7-266">Sin embargo, WinHTTP no admite Microsoft Passport 1,4.</span><span class="sxs-lookup"><span data-stu-id="218e7-266">WinHTTP does, however, support Microsoft Passport 1.4.</span></span> <span data-ttu-id="218e7-267">Para obtener más información acerca del uso de la autenticación de Passport en WinHTTP, consulte [autenticación de Passport en WinHTTP](passport-authentication-in-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="218e7-267">For more information about using Passport authentication in WinHTTP, see [Passport Authentication in WinHTTP](passport-authentication-in-winhttp.md).</span></span>

<span data-ttu-id="218e7-268">WinHTTP no depende de la configuración de Internet Explorer para determinar la Directiva de inicio de sesión automático.</span><span class="sxs-lookup"><span data-stu-id="218e7-268">WinHTTP does not rely on Internet Explorer settings to determine the automatic logon policy.</span></span> <span data-ttu-id="218e7-269">En su lugar, la Directiva de inicio de sesión automático se establece con [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span><span class="sxs-lookup"><span data-stu-id="218e7-269">Instead, the auto-logon policy is set with [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption).</span></span> <span data-ttu-id="218e7-270">Para obtener más información acerca de la autenticación en WinHTTP, incluida la Directiva de inicio de sesión automático, consulte [autenticación en WinHTTP](authentication-in-winhttp.md).</span><span class="sxs-lookup"><span data-stu-id="218e7-270">For more information about authentication in WinHTTP, including the auto-logon policy, see [Authentication in WinHTTP](authentication-in-winhttp.md).</span></span>

## <a name="differences-in-secure-http-transactions"></a><span data-ttu-id="218e7-271">Diferencias en las transacciones HTTP seguras</span><span class="sxs-lookup"><span data-stu-id="218e7-271">Differences in Secure HTTP Transactions</span></span>

<span data-ttu-id="218e7-272">En WinINet, inicie una sesión segura con [**HttpOpenRequest**](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta) o [**InternetConnect**](/windows/desktop/api/wininet/nf-wininet-internetconnecta), pero en WinHTTP, debe llamar a [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) mediante la marca **de \_ \_ seguridad de marca WinHTTP** .</span><span class="sxs-lookup"><span data-stu-id="218e7-272">In WinINet, initiate a secure session using either [**HttpOpenRequest**](/windows/desktop/api/wininet/nf-wininet-httpopenrequesta) or [**InternetConnect**](/windows/desktop/api/wininet/nf-wininet-internetconnecta), but in WinHTTP, you must call [**WinHttpOpenRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpopenrequest) using the **WINHTTP\_FLAG\_SECURE** flag.</span></span>

<span data-ttu-id="218e7-273">En una transacción HTTP segura, los certificados de servidor se pueden usar para autenticar un servidor en el cliente.</span><span class="sxs-lookup"><span data-stu-id="218e7-273">In a secure HTTP transaction, server certificates can be used to authenticate a server to the client.</span></span> <span data-ttu-id="218e7-274">En WinINet, si un certificado de servidor contiene errores, [**HttpSendRequest**](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta) produce un error y proporciona detalles sobre los errores de certificado.</span><span class="sxs-lookup"><span data-stu-id="218e7-274">In WinINet, if a server certificate contains errors, [**HttpSendRequest**](/windows/desktop/api/wininet/nf-wininet-httpsendrequesta) fails and provides details about the certificate errors.</span></span>

<span data-ttu-id="218e7-275">En WinHttp, los errores de certificado de servidor se administran según la versión de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="218e7-275">In WinHttp, server certificate errors are handled according to the version as follows:</span></span>

-   <span data-ttu-id="218e7-276">A partir de WinHttp 5,1, si se produce un error en un certificado de servidor o contiene errores, la llamada a [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) notifica un error de protección de **Estado de devolución de \_ llamada \_ \_ \_ de WinHTTP** en la función de devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="218e7-276">Starting with WinHttp 5.1, if a server certificate fails or contains errors, the call to [**WinHttpSendRequest**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsendrequest) reports a **WINHTTP\_CALLBACK\_STATUS\_SECURE\_FAILURE** in the callback function.</span></span> <span data-ttu-id="218e7-277">Si se omite el error generado por **WinHttpSendRequest** , las llamadas posteriores a [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) producirán un error en la \_ \_ operación WinHTTP \_ cancelada.</span><span class="sxs-lookup"><span data-stu-id="218e7-277">If the error generated by **WinHttpSendRequest** is ignored, subsequent calls to [**WinHttpReceiveResponse**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreceiveresponse) fail with an ERROR\_WINHTTP\_OPERATION\_CANCELLED error.</span></span>
-   <span data-ttu-id="218e7-278">En WinHTTP 5,0, los errores en los certificados de servidor no hacen que se produzca un error en una solicitud.</span><span class="sxs-lookup"><span data-stu-id="218e7-278">In WinHTTP 5.0, errors in server certificates do not, by default, cause a request to fail.</span></span> <span data-ttu-id="218e7-279">En su lugar, los errores se notifican en la función de devolución de llamada con la notificación de **\_ \_ \_ \_ error seguro de estado de devolución de llamada de WinHTTP** .</span><span class="sxs-lookup"><span data-stu-id="218e7-279">Instead, the errors are reported in the callback function with the **WINHTTP\_CALLBACK\_STATUS\_SECURE\_FAILURE** notification.</span></span>

<span data-ttu-id="218e7-280">En algunas plataformas anteriores, WinINet admitía los protocolos de tecnología de comunicaciones privada (PCT) y/o Fortezza, aunque no en Windows XP.</span><span class="sxs-lookup"><span data-stu-id="218e7-280">On some earlier platforms, WinINet supported the Private Communication Technology (PCT) and/or Fortezza protocols, although not on Windows XP.</span></span>

<span data-ttu-id="218e7-281">WinHTTP no admite los protocolos PCT y Fortezza en ninguna plataforma y, en su lugar, se basa en Capa de sockets seguros (SSL) 2,0, SSL 3,0 o la seguridad de la capa de transporte (TLS) 1,0.</span><span class="sxs-lookup"><span data-stu-id="218e7-281">WinHTTP does not support the PCT and Fortezza protocols on any platform, and instead relies on Secure Sockets Layer (SSL) 2.0, SSL 3.0, or Transport Layer Security (TLS) 1.0.</span></span>

 

 
