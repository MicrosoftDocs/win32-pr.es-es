---
description: Aunque se recomienda que los proveedores utilicen nombres de instancia únicos, no todos los proveedores.
ms.assetid: 3c8fcb8d-2ea4-4b24-b649-7bd375c1133d
title: Administrar nombres de instancia duplicados
ms.topic: article
ms.date: 08/17/2020
ms.openlocfilehash: 220e5d7d0181a79c1d1415486cc946d484e11952
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105667325"
---
# <a name="handling-duplicate-instance-names"></a><span data-ttu-id="edcfe-103">Administrar nombres de instancia duplicados</span><span class="sxs-lookup"><span data-stu-id="edcfe-103">Handling Duplicate Instance Names</span></span>

<span data-ttu-id="edcfe-104">Aunque se recomienda encarecidamente que los proveedores utilicen nombres de instancia únicos, no todos los proveedores.</span><span class="sxs-lookup"><span data-stu-id="edcfe-104">Although providers are strongly encouraged to use unique instance names, not all providers do.</span></span> <span data-ttu-id="edcfe-105">La Convención para mostrar los nombres de instancia duplicados es anexar un `#` carácter y un número de serie al nombre de instancia, excepto en el caso de la primera aparición del nombre.</span><span class="sxs-lookup"><span data-stu-id="edcfe-105">The convention for displaying duplicate instance names is to append a `#` character and a serial number to the instance name, except for the first occurrence of the name.</span></span> <span data-ttu-id="edcfe-106">Por ejemplo, si hay tres instancias de `svchost` en un ejemplo, los tres nombres se muestran como `svchost` , `svchost#1` y `svchost#2` .</span><span class="sxs-lookup"><span data-stu-id="edcfe-106">For example, if there are three instances of `svchost` in a sample, the three names are displayed as `svchost`, `svchost#1`, and `svchost#2`.</span></span>

<span data-ttu-id="edcfe-107">Desafortunadamente, esta Convención no resuelve completamente el problema.</span><span class="sxs-lookup"><span data-stu-id="edcfe-107">Unfortunately, this convention does not completely resolve the issue.</span></span> <span data-ttu-id="edcfe-108">Los números de serie se asignan en función del orden en el que aparece un nombre de instancia determinado en un ejemplo y este orden puede ser incoherente desde el ejemplo al ejemplo.</span><span class="sxs-lookup"><span data-stu-id="edcfe-108">Serial numbers are assigned based on the order in which a particular instance name appears in a sample, and this order may be inconsistent from sample to sample.</span></span> <span data-ttu-id="edcfe-109">Por ejemplo, el ejemplo A podría ver `svchost` (pid 100), `svchost#1` (PID 200) y `svchost#2` (PID 300).</span><span class="sxs-lookup"><span data-stu-id="edcfe-109">For example, sample A might see `svchost` (PID 100), `svchost#1` (PID 200), and `svchost#2` (PID 300).</span></span> <span data-ttu-id="edcfe-110">Después, si svchost con PID 100 se cierra, el ejemplo siguiente verá `svchost` (pid 200) y `svchost#1` (PID 300).</span><span class="sxs-lookup"><span data-stu-id="edcfe-110">Then if the svchost with PID 100 shuts down, the next sample would see `svchost` (PID 200) and `svchost#1` (PID 300).</span></span> <span data-ttu-id="edcfe-111">La lógica de coincidencia básica intentaría hacer coincidir las estadísticas de ejemplo A `svchost#1` (desde pid 200) con las estadísticas de la muestra b `svchost#1` (desde el PID 300), lo que da lugar a resultados no válidos para el ejemplo b. los errores se producen cuando se muestra una nueva instancia no única en un ejemplo o cuando una instancia no única se detiene en un ejemplo (a menos que la instancia</span><span class="sxs-lookup"><span data-stu-id="edcfe-111">Basic matching logic would try to match sample A's `svchost#1` statistics (from PID 200) against sample B's `svchost#1` statistics (from PID 300), resulting in invalid results for sample B. Errors occur when a new non-unique instance shows up in a sample or when a non-unique instance stops showing up in a sample (unless the added/removed instance was the last one).</span></span>

## <a name="process-counterset"></a><span data-ttu-id="edcfe-112">Procesar CounterSet</span><span class="sxs-lookup"><span data-stu-id="edcfe-112">Process counterset</span></span>

<span data-ttu-id="edcfe-113">Este problema es especialmente problemático para `Process` CounterSet porque solo usa el nombre del archivo exe del proceso como el nombre de la instancia aunque el nombre del archivo exe no sea único.</span><span class="sxs-lookup"><span data-stu-id="edcfe-113">This issue is especially problematic for the `Process` counterset because it uses only the process's EXE name as the instance name even though the EXE name is not unique.</span></span> <span data-ttu-id="edcfe-114">No se puede cambiar el comportamiento predeterminado del `Process` CounterSet en Windows debido a problemas de compatibilidad.</span><span class="sxs-lookup"><span data-stu-id="edcfe-114">The default behavior of the `Process` counterset on Windows cannot be changed due to compatibility issues.</span></span>

<span data-ttu-id="edcfe-115">Puede modificar el comportamiento de los `Process` `Thread` contraconjuntos y para usar nombres de instancia únicos mediante el establecimiento de los `ProcessNameFormat` `ThreadNameFormat` valores del registro o en la `HKLM\System\CurrentControlSet\Services\Perfproc\Performance` clave del registro.</span><span class="sxs-lookup"><span data-stu-id="edcfe-115">You can alter the behavior of the `Process` and `Thread` countersets to use unique instance names by setting the `ProcessNameFormat` or `ThreadNameFormat` registry values under the `HKLM\System\CurrentControlSet\Services\Perfproc\Performance` registry key.</span></span>

> [!CAUTION]
> <span data-ttu-id="edcfe-116">La habilitación de nombres de instancia únicos para `Process` CounterSet puede hacer que algunos programas se comporten de forma incorrecta, ya que muchos programas esperan el patrón de nomenclatura no único.</span><span class="sxs-lookup"><span data-stu-id="edcfe-116">Enabling unique instance names for the `Process` counterset may cause some programs to behave incorrectly, since many programs expect the non-unique naming pattern.</span></span> <span data-ttu-id="edcfe-117">Por ejemplo, un programa que busque una instancia con un nombre de archivo ejecutable conocido específico ya no podrá encontrar esa instancia después de habilitar los nombres de instancia únicos.</span><span class="sxs-lookup"><span data-stu-id="edcfe-117">For example, a program that is looking for an instance with a specific well-known EXE name will no longer be able to find that instance after enabling unique instance names.</span></span>

<span data-ttu-id="edcfe-118">El tipo de registro para estos valores es `REG_DWORD` .</span><span class="sxs-lookup"><span data-stu-id="edcfe-118">The registry type for these values is `REG_DWORD`.</span></span> <span data-ttu-id="edcfe-119">Al establecer el valor en, se `2` anexa el identificador de proceso (PID) al nombre de instancia de proceso y el identificador de subproceso (TID) al nombre de instancia de subproceso.</span><span class="sxs-lookup"><span data-stu-id="edcfe-119">Setting the value to `2` appends the process identifier (PID) to the process instance name and the thread identifier (TID) to the thread instance name.</span></span> <span data-ttu-id="edcfe-120">Para deshabilitar esta característica, establezca el valor en 1 o elimine el valor.</span><span class="sxs-lookup"><span data-stu-id="edcfe-120">To disable this feature, set the value to 1 or delete the value.</span></span>
