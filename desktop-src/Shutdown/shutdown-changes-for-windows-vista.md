---
description: En la tabla siguiente se resumen las diferencias entre el apagado de Windows Vista y Windows XP.
ms.assetid: da7985d2-85c8-47e1-a172-c9e92f450e24
title: Cambios de apagado de Windows Vista
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6e04bb20099349ce378384cf01c39e53ca03a896
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104082703"
---
# <a name="shutdown-changes-for-windows-vista"></a><span data-ttu-id="3e809-103">Cambios de apagado de Windows Vista</span><span class="sxs-lookup"><span data-stu-id="3e809-103">Shutdown Changes for Windows Vista</span></span>

<span data-ttu-id="3e809-104">En la tabla siguiente se resumen las diferencias entre el apagado de Windows Vista y Windows XP.</span><span class="sxs-lookup"><span data-stu-id="3e809-104">The following table summarizes the differences between shutdown on Windows Vista and Windows XP.</span></span>



| <span data-ttu-id="3e809-105">Característica</span><span class="sxs-lookup"><span data-stu-id="3e809-105">Feature</span></span>                 | <span data-ttu-id="3e809-106">Windows XP</span><span class="sxs-lookup"><span data-stu-id="3e809-106">Windows XP</span></span>                                                                                                                                                                                                                                                                                                                                                                                | <span data-ttu-id="3e809-107">Windows Vista</span><span class="sxs-lookup"><span data-stu-id="3e809-107">Windows Vista</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|-------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3e809-108">Bloqueo de cierre</span><span class="sxs-lookup"><span data-stu-id="3e809-108">Blocking shutdown</span></span>       | <span data-ttu-id="3e809-109">Las aplicaciones pueden retrasar la respuesta a [**WM \_ QUERYENDSESSION**](wm-queryendsession.md) durante 5 segundos y, a continuación, el sistema permite al usuario finalizar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3e809-109">Applications can delay responding to [**WM\_QUERYENDSESSION**](wm-queryendsession.md) for 5 seconds, then the system allows the user to terminate the application.</span></span> <span data-ttu-id="3e809-110">Las aplicaciones que devuelven **true** en respuesta a **WM \_ QUERYENDSESSION** pueden retrasar la respuesta a [**WM \_ ENDSESSION**](wm-endsession.md) durante 5 segundos, de modo que el sistema permite al usuario finalizar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3e809-110">Applications that return **TRUE** in response to **WM\_QUERYENDSESSION** can delay responding to [**WM\_ENDSESSION**](wm-endsession.md) for 5 seconds, then the system allows the user to terminate the application.</span></span> | <span data-ttu-id="3e809-111">Las aplicaciones pueden retrasar la respuesta a [**WM \_ QUERYENDSESSION**](wm-queryendsession.md) durante 5 segundos y, a continuación, el sistema permite al usuario continuar o cancelar el cierre.</span><span class="sxs-lookup"><span data-stu-id="3e809-111">Applications can delay responding to [**WM\_QUERYENDSESSION**](wm-queryendsession.md) for 5 seconds, then the system allows the user to continue or cancel shutdown.</span></span> <span data-ttu-id="3e809-112">Las aplicaciones que devuelven **true** en respuesta a **WM \_ QUERYENDSESSION** pueden retrasar la respuesta a [**WM \_ ENDSESSION**](wm-endsession.md) durante 5 segundos, por lo que el sistema permite al usuario continuar o cancelar el cierre.</span><span class="sxs-lookup"><span data-stu-id="3e809-112">Applications that return **TRUE** in response to **WM\_QUERYENDSESSION** can delay responding to [**WM\_ENDSESSION**](wm-endsession.md) for 5 seconds, then the system allows the user to continue or cancel shutdown.</span></span>                                                                                                      |
| <span data-ttu-id="3e809-113">Cancelando apagado</span><span class="sxs-lookup"><span data-stu-id="3e809-113">Canceling shutdown</span></span>      | <span data-ttu-id="3e809-114">Si una aplicación devuelve **false** en respuesta a [**WM \_ QUERYENDSESSION**](wm-queryendsession.md), el cierre se cancela en la mayoría de los casos.</span><span class="sxs-lookup"><span data-stu-id="3e809-114">If an application returns **FALSE** in response to [**WM\_QUERYENDSESSION**](wm-queryendsession.md), shutdown is canceled in most cases.</span></span> <span data-ttu-id="3e809-115">Sin embargo, no se muestra ninguna interfaz de usuario, por lo que es posible que el usuario no tenga en cuenta que se ha cancelado el cierre.</span><span class="sxs-lookup"><span data-stu-id="3e809-115">However, no UI is displayed, so the user may not be aware that shutdown has been canceled.</span></span>                                                                                                                                                      | <span data-ttu-id="3e809-116">Si una aplicación devuelve **false** en respuesta a [**WM \_ QUERYENDSESSION**](wm-queryendsession.md), sigue apareciendo en la interfaz de usuario de apagado.</span><span class="sxs-lookup"><span data-stu-id="3e809-116">If an application returns **FALSE** in response to [**WM\_QUERYENDSESSION**](wm-queryendsession.md), it still appears in the shutdown UI.</span></span> <span data-ttu-id="3e809-117">Tenga en cuenta que el sistema no permite que las aplicaciones de consola o las aplicaciones sin una ventana visible cancele el cierre.</span><span class="sxs-lookup"><span data-stu-id="3e809-117">Note that the system does not allow console applications or applications without a visible window to cancel shutdown.</span></span> <span data-ttu-id="3e809-118">Estas aplicaciones se terminan automáticamente si no responden a **WM \_ QUERYENDSESSION** o a [**WM \_ ENDSESSION**](wm-endsession.md) en 5 segundos o si devuelven **false** en respuesta a **WM \_ QUERYENDSESSION**.</span><span class="sxs-lookup"><span data-stu-id="3e809-118">These applications are automatically terminated if they do not respond to **WM\_QUERYENDSESSION** or [**WM\_ENDSESSION**](wm-endsession.md) within 5 seconds or if they return **FALSE** in response to **WM\_QUERYENDSESSION**.</span></span> |
| <span data-ttu-id="3e809-119">Apagar la interfaz de usuario</span><span class="sxs-lookup"><span data-stu-id="3e809-119">Shutdown user interface</span></span> | <span data-ttu-id="3e809-120">El sistema muestra un cuadro de diálogo para cada aplicación que bloquea el cierre.</span><span class="sxs-lookup"><span data-stu-id="3e809-120">The system displays a dialog box for each application blocking shutdown.</span></span> <span data-ttu-id="3e809-121">Si el usuario hace clic en el botón **finalizar ahora** , la aplicación se termina.</span><span class="sxs-lookup"><span data-stu-id="3e809-121">If the user click the **End Now** button, the application is terminated.</span></span> <span data-ttu-id="3e809-122">Si el usuario hace clic en el botón **Cancelar** , se cancela el cierre y la aplicación continúa ejecutándose.</span><span class="sxs-lookup"><span data-stu-id="3e809-122">If the user clicks the **Cancel** button, shutdown is canceled and the application continues to run.</span></span>                                                                                                                                    | <span data-ttu-id="3e809-123">El sistema muestra una interfaz de usuario de pantalla completa que identifica todas las aplicaciones que bloquean el cierre y sus motivos para hacerlo (si han registrado un motivo mediante [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate)).</span><span class="sxs-lookup"><span data-stu-id="3e809-123">The system displays a full-screen UI that identifies all applications blocking shutdown and their reasons for doing so (if they have registered a reason using [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate)).</span></span>                                                                                                                                                                                                                                                                    |



 

## <a name="best-practices"></a><span data-ttu-id="3e809-124">Prácticas recomendadas</span><span class="sxs-lookup"><span data-stu-id="3e809-124">Best Practices</span></span>

-   <span data-ttu-id="3e809-125">Las aplicaciones no deben bloquear el cierre.</span><span class="sxs-lookup"><span data-stu-id="3e809-125">Applications should not block shutdown.</span></span> <span data-ttu-id="3e809-126">Responder a [**WM \_ QUERYENDSESSION**](wm-queryendsession.md) lo más rápido posible y posponer las actividades de limpieza hasta que se procese el mensaje de la [**\_ ENDSESSION de WM**](wm-endsession.md) .</span><span class="sxs-lookup"><span data-stu-id="3e809-126">Respond to [**WM\_QUERYENDSESSION**](wm-queryendsession.md) as quickly as possible and postpone cleanup activities until processing the [**WM\_ENDSESSION**](wm-endsession.md) message.</span></span>
-   <span data-ttu-id="3e809-127">Las aplicaciones que deben bloquear el cierre deben usar la nueva función [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate) para registrar una cadena que explique el motivo para el usuario.</span><span class="sxs-lookup"><span data-stu-id="3e809-127">Applications that must block shutdown should use the new [**ShutdownBlockReasonCreate**](/windows/desktop/api/Winuser/nf-winuser-shutdownblockreasoncreate) function to register a string that explains the reason to the user.</span></span> <span data-ttu-id="3e809-128">El usuario puede decidir si desea continuar o cancelar el apagado.</span><span class="sxs-lookup"><span data-stu-id="3e809-128">The user can decide whether to continue or cancel shutdown.</span></span>
-   <span data-ttu-id="3e809-129">Las aplicaciones no pueden basarse en la posibilidad de bloquear el cierre.</span><span class="sxs-lookup"><span data-stu-id="3e809-129">Applications cannot rely on being able to block shutdown.</span></span>

 

 



