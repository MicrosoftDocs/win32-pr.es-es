---
title: Capacidades de dibujo de hardware
description: Capacidades de dibujo de hardware
ms.assetid: 3a26de73-cb9e-41a0-8c33-a7cca7d6058e
keywords:
- Administrador de compresión de vídeo (VCM), dibujo
- VCM (Administrador de compresión de vídeo), dibujo
- ICGetInfo función)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ba7d3af8beb7c4ac676e421fe10d427322470d14
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "104075823"
---
# <a name="hardware-drawing-capabilities"></a><span data-ttu-id="35523-106">Capacidades de dibujo de hardware</span><span class="sxs-lookup"><span data-stu-id="35523-106">Hardware Drawing Capabilities</span></span>

<span data-ttu-id="35523-107">Algunos representadores pueden dibujar directamente en el hardware de vídeo a medida que descomprimen fotogramas de vídeo.</span><span class="sxs-lookup"><span data-stu-id="35523-107">Some renderers can draw directly to video hardware as they decompress video frames.</span></span> <span data-ttu-id="35523-108">Estos representadores devuelven la \_ marca VIDCF Draw en respuesta a la función [**ICGetInfo**](/windows/desktop/api/Vfw/nf-vfw-icgetinfo) .</span><span class="sxs-lookup"><span data-stu-id="35523-108">These renderers return the VIDCF\_DRAW flag in response to the [**ICGetInfo**](/windows/desktop/api/Vfw/nf-vfw-icgetinfo) function.</span></span> <span data-ttu-id="35523-109">Cuando se usa este tipo de representador, la aplicación no tiene que controlar los datos descomprimidos.</span><span class="sxs-lookup"><span data-stu-id="35523-109">When using this type of renderer, your application does not have to handle the decompressed data.</span></span> <span data-ttu-id="35523-110">Permite que el representador retenga los datos descomprimidos para dibujar.</span><span class="sxs-lookup"><span data-stu-id="35523-110">It lets the renderer retain the decompressed data for drawing.</span></span>

<span data-ttu-id="35523-111">Si la aplicación usa un representador con funciones de dibujo, debe controlar las siguientes tareas:</span><span class="sxs-lookup"><span data-stu-id="35523-111">If your application uses a renderer with drawing capabilities, it must handle the following tasks:</span></span>

-   <span data-ttu-id="35523-112">Seleccione un representador.</span><span class="sxs-lookup"><span data-stu-id="35523-112">Select a renderer.</span></span>
-   <span data-ttu-id="35523-113">Especificar formatos de imagen.</span><span class="sxs-lookup"><span data-stu-id="35523-113">Specify image formats.</span></span>
-   <span data-ttu-id="35523-114">Inicialice el representador.</span><span class="sxs-lookup"><span data-stu-id="35523-114">Initialize the renderer.</span></span>
-   <span data-ttu-id="35523-115">Dibuje los datos.</span><span class="sxs-lookup"><span data-stu-id="35523-115">Draw the data.</span></span>
-   <span data-ttu-id="35523-116">Controlan los parámetros de dibujo.</span><span class="sxs-lookup"><span data-stu-id="35523-116">Control drawing parameters.</span></span>

## <a name="renderer-selection"></a><span data-ttu-id="35523-117">Selección del representador</span><span class="sxs-lookup"><span data-stu-id="35523-117">Renderer Selection</span></span>

<span data-ttu-id="35523-118">La macro [**ICDrawOpen**](/windows/desktop/api/Vfw/nf-vfw-icdrawopen) abre un representador que puede dibujar imágenes con el formato especificado.</span><span class="sxs-lookup"><span data-stu-id="35523-118">The [**ICDrawOpen**](/windows/desktop/api/Vfw/nf-vfw-icdrawopen) macro opens a renderer that can draw images with the specified format.</span></span> <span data-ttu-id="35523-119">Devuelve un identificador de un representador si es correcto, o bien cero en caso contrario.</span><span class="sxs-lookup"><span data-stu-id="35523-119">It returns a handle of a renderer if it is successful, or zero otherwise.</span></span> <span data-ttu-id="35523-120">Esta macro usa la función [**ICLocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) para abrir el representador.</span><span class="sxs-lookup"><span data-stu-id="35523-120">This macro uses the [**ICLocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) function to open the renderer.</span></span>

## <a name="specifying-image-formats"></a><span data-ttu-id="35523-121">Especificar formatos de imagen</span><span class="sxs-lookup"><span data-stu-id="35523-121">Specifying Image Formats</span></span>

<span data-ttu-id="35523-122">Dado que la aplicación no necesita dibujar los datos descomprimidos, no requiere un formato de salida específico.</span><span class="sxs-lookup"><span data-stu-id="35523-122">Because your application does not need to draw the decompressed data, it does not require a specific output format.</span></span> <span data-ttu-id="35523-123">Sin embargo, debe asegurarse de que el representador puede dibujar con el formato de entrada mediante el mensaje de [**\_ \_ consulta de dibujo ICM**](icm-draw-query.md) (o utilizar la macro [**ICDrawQuery**](/windows/desktop/api/Vfw/nf-vfw-icdrawquery) ).</span><span class="sxs-lookup"><span data-stu-id="35523-123">It must, however, ensure that the renderer can draw using the input format by using the [**ICM\_DRAW\_QUERY**](icm-draw-query.md) message (or use the [**ICDrawQuery**](/windows/desktop/api/Vfw/nf-vfw-icdrawquery) macro).</span></span> <span data-ttu-id="35523-124">Este mensaje no puede determinar si un representador puede dibujar un mapa de bits.</span><span class="sxs-lookup"><span data-stu-id="35523-124">This message cannot determine if a renderer can draw a bitmap.</span></span> <span data-ttu-id="35523-125">Si la aplicación debe determinar si el representador puede dibujar el mapa de bits, use este mensaje con la función [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) .</span><span class="sxs-lookup"><span data-stu-id="35523-125">If your application must determine if the renderer can draw the bitmap, use this message with the [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function.</span></span>

<span data-ttu-id="35523-126">La aplicación puede tener un representador que sugiera un formato de entrada mediante la función [**ICDrawSuggestFormat**](/windows/desktop/api/Vfw/nf-vfw-icdrawsuggestformat) .</span><span class="sxs-lookup"><span data-stu-id="35523-126">Your application can have a renderer suggest an input format by using the [**ICDrawSuggestFormat**](/windows/desktop/api/Vfw/nf-vfw-icdrawsuggestformat) function.</span></span> <span data-ttu-id="35523-127">Esta función se usa cuando un representador separa las funciones de dibujo de las capacidades de descompresión.</span><span class="sxs-lookup"><span data-stu-id="35523-127">This function is used when a renderer separates the drawing capabilities from the decompressing capabilities.</span></span> <span data-ttu-id="35523-128">La mayoría de las aplicaciones que usan las funciones de dibujo no tendrán que determinar el formato de salida.</span><span class="sxs-lookup"><span data-stu-id="35523-128">Most applications using the drawing functions will not need to determine the output format.</span></span>

## <a name="renderer-initialization"></a><span data-ttu-id="35523-129">Inicialización del representador</span><span class="sxs-lookup"><span data-stu-id="35523-129">Renderer Initialization</span></span>

<span data-ttu-id="35523-130">La función [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) Inicializa un representador y le indica el destino del dibujo.</span><span class="sxs-lookup"><span data-stu-id="35523-130">The [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function initializes a renderer and tells it the drawing destination.</span></span> <span data-ttu-id="35523-131">Esta función también puede realizar las siguientes tareas:</span><span class="sxs-lookup"><span data-stu-id="35523-131">This function can also perform the following tasks:</span></span>

-   <span data-ttu-id="35523-132">Determinar si el representador admite un formato de entrada concreto.</span><span class="sxs-lookup"><span data-stu-id="35523-132">Determine whether the renderer supports a specific input format.</span></span>
-   <span data-ttu-id="35523-133">Especifique si la operación de dibujo ocupa una ventana o toda la pantalla.</span><span class="sxs-lookup"><span data-stu-id="35523-133">Specify whether the drawing operation occupies a window or the entire screen.</span></span>
-   <span data-ttu-id="35523-134">Especifique la parte de la imagen que se va a mostrar con el rectángulo de origen.</span><span class="sxs-lookup"><span data-stu-id="35523-134">Specify the part of the image to display using the source rectangle.</span></span>
-   <span data-ttu-id="35523-135">Defina la velocidad de reproducción de la secuencia de la imagen.</span><span class="sxs-lookup"><span data-stu-id="35523-135">Define the playback rate of the image sequence.</span></span>

<span data-ttu-id="35523-136">Algunos representadores almacenan en búfer los datos comprimidos para que funcionen de forma más eficaz.</span><span class="sxs-lookup"><span data-stu-id="35523-136">Some renderers buffer the compressed data to operate more efficiently.</span></span> <span data-ttu-id="35523-137">La aplicación puede enviar el [**mensaje \_ GETBUFFERSWANTED ICM**](icm-getbufferswanted.md) (o usar la macro [**ICGetBuffersWanted**](/windows/desktop/api/Vfw/nf-vfw-icgetbufferswanted) ) para determinar el número de búferes que solicita el representador.</span><span class="sxs-lookup"><span data-stu-id="35523-137">Your application can send the [**ICM\_GETBUFFERSWANTED**](icm-getbufferswanted.md) message (or use the [**ICGetBuffersWanted**](/windows/desktop/api/Vfw/nf-vfw-icgetbufferswanted) macro) to determine the number of buffers the renderer requests.</span></span> <span data-ttu-id="35523-138">La aplicación debe cargar previamente estos búferes y enviarlos al representador antes de dibujar.</span><span class="sxs-lookup"><span data-stu-id="35523-138">Your application should preload these buffers and send them to the renderer before drawing.</span></span>

## <a name="drawing-the-data"></a><span data-ttu-id="35523-139">Dibujar los datos</span><span class="sxs-lookup"><span data-stu-id="35523-139">Drawing the Data</span></span>

<span data-ttu-id="35523-140">Puede usar la función [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) para descomprimir los datos para dibujar.</span><span class="sxs-lookup"><span data-stu-id="35523-140">You can use the [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) function to decompress the data for drawing.</span></span> <span data-ttu-id="35523-141">El representador, sin embargo, no inicia el dibujo de datos hasta que la aplicación envíe el mensaje de [**\_ \_ Inicio de Draw de ICM**](icm-draw-start.md) (o use la macro [**ICDrawStart**](/windows/desktop/api/Vfw/nf-vfw-icdrawstart) ).</span><span class="sxs-lookup"><span data-stu-id="35523-141">The renderer, however, does not start drawing data until your application sends the [**ICM\_DRAW\_START**](icm-draw-start.md) message (or uses the [**ICDrawStart**](/windows/desktop/api/Vfw/nf-vfw-icdrawstart) macro).</span></span> <span data-ttu-id="35523-142">Cuando la aplicación llama a esta función, el representador comienza a dibujar los fotogramas a la velocidad especificada por el parámetro *dwRate* dividido por el parámetro *dwScale* . Estos parámetros se proporcionaron cuando la aplicación inicializó el representador mediante la función [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) .</span><span class="sxs-lookup"><span data-stu-id="35523-142">When your application calls this function, the renderer begins to draw the frames at the rate specified by the *dwRate* parameter divided by the *dwScale* parameter; these parameters were supplied when the application initialized the renderer by using the [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) function.</span></span> <span data-ttu-id="35523-143">El dibujo continúa hasta que la aplicación envía el mensaje de [**\_ \_ detención de Draw ICM**](icm-draw-stop.md) (o usa la macro [**ICDrawStop**](/windows/desktop/api/Vfw/nf-vfw-icdrawstop) ).</span><span class="sxs-lookup"><span data-stu-id="35523-143">Drawing continues until your application sends the [**ICM\_DRAW\_STOP**](icm-draw-stop.md) message (or uses the [**ICDrawStop**](/windows/desktop/api/Vfw/nf-vfw-icdrawstop) macro).</span></span>

> [!Note]  
> <span data-ttu-id="35523-144">Si un representador almacena en búfer los datos antes del dibujo, la aplicación no debe utilizar la macro **ICDrawStart** hasta que haya enviado el número de fotogramas que el representador devolvió para la macro **ICGetBuffersWanted** .</span><span class="sxs-lookup"><span data-stu-id="35523-144">If a renderer buffers the data before drawing, your application should not use the **ICDrawStart** macro until it has sent the number of frames the renderer returned for the **ICGetBuffersWanted** macro.</span></span>

 

<span data-ttu-id="35523-145">El parámetro *lTime* de [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) especifica el tiempo de dibujo de un marco.</span><span class="sxs-lookup"><span data-stu-id="35523-145">The *lTime* parameter of [**ICDraw**](/windows/desktop/api/Vfw/nf-vfw-icdraw) specifies the time to draw a frame.</span></span> <span data-ttu-id="35523-146">El representador divide este entero según la escala de tiempo especificada con [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) para obtener la hora real.</span><span class="sxs-lookup"><span data-stu-id="35523-146">The renderer divides this integer by the time scale specified with [**ICDrawBegin**](/windows/desktop/api/Vfw/nf-vfw-icdrawbegin) to obtain the actual time.</span></span> <span data-ttu-id="35523-147">Las horas de las funciones **ICDraw** son relativas a **ICDrawStart**.</span><span class="sxs-lookup"><span data-stu-id="35523-147">Times for **ICDraw** functions are relative to **ICDrawStart**.</span></span> <span data-ttu-id="35523-148">**ICDrawStart** establece el reloj en cero.</span><span class="sxs-lookup"><span data-stu-id="35523-148">**ICDrawStart** sets the clock to zero.</span></span> <span data-ttu-id="35523-149">Por ejemplo, si la aplicación especifica 1000 para la escala de tiempo y 75 para *lTime*, el representador dibuja el fotograma 75 milisegundos en la secuencia.</span><span class="sxs-lookup"><span data-stu-id="35523-149">For example, if your application specifies 1000 for the time scale and 75 for *lTime*, the renderer draws the frame 75 milliseconds into the sequence.</span></span>

## <a name="controlling-drawing-parameters"></a><span data-ttu-id="35523-150">Controlar los parámetros de dibujo</span><span class="sxs-lookup"><span data-stu-id="35523-150">Controlling Drawing Parameters</span></span>

<span data-ttu-id="35523-151">Para supervisar el reloj de un representador, envíe el [**mensaje \_ \_ GETTIME de Draw ICM**](icm-draw-gettime.md) (o use la macro [**ICDrawGetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawgettime) ), y puede establecer el reloj de un representador que puede dibujar datos mediante el envío del mensaje [**\_ \_ SETTIME de dibujo de ICM**](icm-draw-settime.md) (o use la macro [**ICDrawSetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawsettime) ).</span><span class="sxs-lookup"><span data-stu-id="35523-151">You can monitor the clock of a renderer by sending the [**ICM\_DRAW\_GETTIME**](icm-draw-gettime.md) message (or use the [**ICDrawGetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawgettime) macro), and you can set the clock of a renderer that can draw data by sending the [**ICM\_DRAW\_SETTIME**](icm-draw-settime.md) message (or use the [**ICDrawSetTime**](/windows/desktop/api/Vfw/nf-vfw-icdrawsettime) macro).</span></span>

<span data-ttu-id="35523-152">Para cambiar la posición actual mientras se dibuja un representador, la aplicación puede enviar el mensaje de la [**\_ \_ ventana de dibujo ICM**](icm-draw-window.md) (o utilizar la macro [**ICDrawWindow**](/windows/desktop/api/Vfw/nf-vfw-icdrawwindow) ) para cambiar la posición de la ventana.</span><span class="sxs-lookup"><span data-stu-id="35523-152">To change the current position while a renderer is drawing, your application can send the [**ICM\_DRAW\_WINDOW**](icm-draw-window.md) message (or use the [**ICDrawWindow**](/windows/desktop/api/Vfw/nf-vfw-icdrawwindow) macro) for repositioning the window.</span></span> <span data-ttu-id="35523-153">Normalmente, las aplicaciones usan este mensaje cada vez que cambia la ventana.</span><span class="sxs-lookup"><span data-stu-id="35523-153">Applications typically use this message whenever the window changes.</span></span>

<span data-ttu-id="35523-154">Si la ventana de reproducción obtiene un mensaje de la paleta de la presentación, la aplicación debe enviar el mensaje de error de envío de ICM (o usar la macro [**ICDrawRealize**](/windows/desktop/api/Vfw/nf-vfw-icdrawrealize) ) para que el representador tenga en cuenta la paleta de nuevo para la reproducción. [**\_ \_**](icm-draw-realize.md)</span><span class="sxs-lookup"><span data-stu-id="35523-154">If the playback window gets a realize-palette message, your application must send the [**ICM\_DRAW\_REALIZE**](icm-draw-realize.md) message (or use the [**ICDrawRealize**](/windows/desktop/api/Vfw/nf-vfw-icdrawrealize) macro) to have the renderer realize the palette again for playback.</span></span> <span data-ttu-id="35523-155">Las aplicaciones pueden cambiar la paleta enviando el [**mensaje \_ \_ CHANGEPALETTE de Draw ICM**](icm-draw-changepalette.md) (o usan la macro [**ICDrawChangePalette**](/windows/desktop/api/Vfw/nf-vfw-icdrawchangepalette) ) y obtener la paleta actual mediante el envío del mensaje de la paleta de [**\_ \_ obtención \_ de dibujo ICM**](icm-draw-get-palette.md) .</span><span class="sxs-lookup"><span data-stu-id="35523-155">Applications can change the palette by sending the [**ICM\_DRAW\_CHANGEPALETTE**](icm-draw-changepalette.md) message (or use the [**ICDrawChangePalette**](/windows/desktop/api/Vfw/nf-vfw-icdrawchangepalette) macro) and obtain the current palette by sending the [**ICM\_DRAW\_GET\_PALETTE**](icm-draw-get-palette.md) message.</span></span>

<span data-ttu-id="35523-156">Algunos representadores deben indicarse específicamente para mostrar los fotogramas que se le han pasado.</span><span class="sxs-lookup"><span data-stu-id="35523-156">Some renderers must be specifically instructed to display frames passed to them.</span></span> <span data-ttu-id="35523-157">El envío del mensaje de [**\_ \_ RENDERBUFFER ICM Draw**](icm-draw-renderbuffer.md) (o la utilización de la macro [**ICDrawRenderBuffer**](/windows/desktop/api/Vfw/nf-vfw-icdrawrenderbuffer) ) hace que estos representadores dibujen el marco.</span><span class="sxs-lookup"><span data-stu-id="35523-157">Sending the [**ICM\_DRAW\_RENDERBUFFER**](icm-draw-renderbuffer.md) message (or use the [**ICDrawRenderBuffer**](/windows/desktop/api/Vfw/nf-vfw-icdrawrenderbuffer) macro) causes these renderers to draw the frame.</span></span>

 

 




