---
description: 'Hay varias opciones disponibles para recibir indicaciones de finalización, lo que proporciona a las aplicaciones con los niveles de flexibilidad adecuados. Entre ellos se incluyen: en espera (o bloqueo) en objetos de eventos, objetos de eventos de sondeo y rutinas de finalización de e/s de socket.'
ms.assetid: 071cf198-6b4c-445e-9bd9-044f57f994a3
title: Recibir indicaciones de finalización
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd05d8297af17c26393b5db113fac283b39fcbb3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105706982"
---
# <a name="receiving-completion-indications"></a><span data-ttu-id="f0f9f-104">Recibir indicaciones de finalización</span><span class="sxs-lookup"><span data-stu-id="f0f9f-104">Receiving Completion Indications</span></span>

<span data-ttu-id="f0f9f-105">Hay varias opciones disponibles para recibir indicaciones de finalización, lo que proporciona a las aplicaciones con los niveles de flexibilidad adecuados.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-105">Several options are available for receiving completion indications, thus providing applications with appropriate levels of flexibility.</span></span> <span data-ttu-id="f0f9f-106">Entre ellos se incluyen: en espera (o bloqueo) en objetos de eventos, objetos de eventos de sondeo y rutinas de finalización de e/s de socket.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-106">These include: waiting (or blocking) on event objects, polling event objects, and socket I/O completion routines.</span></span>

## <a name="blocking-and-waiting-for-completion-indication"></a><span data-ttu-id="f0f9f-107">Indicación de bloqueo y espera de finalización</span><span class="sxs-lookup"><span data-stu-id="f0f9f-107">Blocking and Waiting for Completion Indication</span></span>

<span data-ttu-id="f0f9f-108">Las aplicaciones se pueden bloquear mientras se espera a que uno o varios objetos de evento se establezcan con la función [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) .</span><span class="sxs-lookup"><span data-stu-id="f0f9f-108">Applications can block while waiting for one or more event objects to become set using the [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) function.</span></span> <span data-ttu-id="f0f9f-109">En las implementaciones de Windows, el proceso o subproceso realmente se bloquea.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-109">In Windows implementations, the process or thread truly blocks.</span></span> <span data-ttu-id="f0f9f-110">Dado que los objetos de evento de Windows Sockets 2 se implementan como eventos de Windows, la función nativa de Windows, [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects) también puede usarse para este fin.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-110">Since Windows Sockets 2 event objects are implemented as Windows events, the native Windows function, [**WaitForMultipleObjects**](/windows/win32/api/synchapi/nf-synchapi-waitformultipleobjects) can also be used for this purpose.</span></span> <span data-ttu-id="f0f9f-111">Esto es especialmente útil si el subproceso tiene que esperar en los eventos socket y no Socket.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-111">This is especially useful if the thread needs to wait on both socket and nonsocket events.</span></span>

## <a name="polling-for-completion-indication"></a><span data-ttu-id="f0f9f-112">Indicación de finalización de sondeo</span><span class="sxs-lookup"><span data-stu-id="f0f9f-112">Polling for Completion Indication</span></span>

<span data-ttu-id="f0f9f-113">Las aplicaciones que prefieren no bloquearse pueden utilizar la función [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) para sondear el estado de finalización asociado a cualquier objeto de evento determinado.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-113">Applications that prefer not to block can use the [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) function to poll for the completion status associated with any particular event object.</span></span> <span data-ttu-id="f0f9f-114">Esta función indica si se ha completado la operación superpuesta, y si se ha completado, organiza la función [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) para recuperar el estado de error de la operación superpuesta.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-114">This function indicates whether or not the overlapped operation has completed, and if completed, arranges for the [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) function to retrieve the error status of the overlapped operation.</span></span>

## <a name="using-socket-io-completion-routines"></a><span data-ttu-id="f0f9f-115">Usar rutinas de finalización de e/s de socket</span><span class="sxs-lookup"><span data-stu-id="f0f9f-115">Using Socket I/O Completion Routines</span></span>

<span data-ttu-id="f0f9f-116">Las funciones que se usan para iniciar operaciones de e/s superpuestas ( [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend), [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom)) toman *lpCompletionRoutine* como parámetro de entrada opcional.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-116">The functions used to initiate overlapped I/O ( [**WSASend**](/windows/desktop/api/Winsock2/nf-winsock2-wsasend), [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto), [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv), [**WSARecvFrom**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecvfrom)) all take *lpCompletionRoutine* as an optional input parameter.</span></span> <span data-ttu-id="f0f9f-117">Es un puntero a una función específica de la aplicación a la que se llama después de que se complete una operación de e/s superpuesta correctamente iniciada (correcta o incorrectamente).</span><span class="sxs-lookup"><span data-stu-id="f0f9f-117">This is a pointer to an application-specific function that is called after a successfully initiated overlapped I/O operation completes (successfully or otherwise).</span></span> <span data-ttu-id="f0f9f-118">La rutina de finalización sigue las mismas reglas indicadas para las rutinas de finalización de e/s de archivos de Windows.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-118">The completion routine follows the same rules as stipulated for Windows file I/O completion routines.</span></span> <span data-ttu-id="f0f9f-119">Es decir, no se invoca la rutina de finalización hasta que el subproceso se encuentra en un estado de espera de alerta, por ejemplo, cuando se invoca la función [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) con la `fAlertable` marca establecida.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-119">That is, the completion routine is not invoked until the thread is in an alertable wait state, such as when the function [**WSAWaitForMultipleEvents**](/windows/desktop/api/Winsock2/nf-winsock2-wsawaitformultipleevents) is invoked with the `fAlertable` flag set.</span></span> <span data-ttu-id="f0f9f-120">Una aplicación que usa la opción de rutina de finalización para una solicitud de e/s superpuesta determinada no puede usar la opción wait de [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) para esa misma solicitud de e/s superpuesta.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-120">An application that uses the completion routine option for a particular overlapped I/O request may not use the wait option of [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) for that same overlapped I/O request.</span></span>

<span data-ttu-id="f0f9f-121">Los transportes permiten a una aplicación invocar operaciones de envío y recepción desde dentro del contexto de la rutina de finalización de e/s de socket y garantizar que, para un socket determinado, las rutinas de finalización de e/s no estarán anidadas.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-121">The transports allow an application to invoke send and receive operations from within the context of the socket I/O completion routine and guarantee that, for a given socket, I/O completion routines will not be nested.</span></span> <span data-ttu-id="f0f9f-122">Esto permite que las transmisiones de datos que dependen del tiempo se produzcan por completo en un contexto preferente.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-122">This permits time-sensitive data transmissions to occur entirely within a preemptive context.</span></span>

## <a name="summary-of-overlapped-completion-indication-mechanisms"></a><span data-ttu-id="f0f9f-123">Resumen de mecanismos de indicación de finalización superpuestos</span><span class="sxs-lookup"><span data-stu-id="f0f9f-123">Summary of Overlapped Completion Indication Mechanisms</span></span>

<span data-ttu-id="f0f9f-124">La indicación de finalización de e/s superpuestas determinada que se va a utilizar para una operación superpuesta determinada está determinada por si la aplicación proporciona un puntero a una función de finalización, si se hace referencia a una estructura [**WSAOVERLAPPED**](/windows/desktop/api/Winsock2/ns-winsock2-wsaoverlapped) y por el valor del miembro **hEvent** dentro de la estructura **WSAOVERLAPPED** (si se proporciona).</span><span class="sxs-lookup"><span data-stu-id="f0f9f-124">The particular overlapped I/O completion indication to be used for a given overlapped operation is determined by whether the application supplies a pointer to a completion function, whether a [**WSAOVERLAPPED**](/windows/desktop/api/Winsock2/ns-winsock2-wsaoverlapped) structure is referenced, and by the value of the **hEvent** member within the **WSAOVERLAPPED** structure (if supplied).</span></span> <span data-ttu-id="f0f9f-125">En la tabla siguiente se resume la semántica de finalización de un socket superpuesto y se muestran las distintas combinaciones de *lpOverlapped*, **hEvent** y *lpCompletionRoutine*:</span><span class="sxs-lookup"><span data-stu-id="f0f9f-125">The following table summarizes the completion semantics for an overlapped socket and shows the various combinations of *lpOverlapped*, **hEvent**, and *lpCompletionRoutine*:</span></span>

| <span data-ttu-id="f0f9f-126">*lpOverlapped*</span><span class="sxs-lookup"><span data-stu-id="f0f9f-126">*lpOverlapped*</span></span> | <span data-ttu-id="f0f9f-127">hEvent</span><span class="sxs-lookup"><span data-stu-id="f0f9f-127">hEvent</span></span>         | <span data-ttu-id="f0f9f-128">*lpCompletionRoutine*</span><span class="sxs-lookup"><span data-stu-id="f0f9f-128">*lpCompletionRoutine*</span></span> | <span data-ttu-id="f0f9f-129">Indicación de finalización</span><span class="sxs-lookup"><span data-stu-id="f0f9f-129">Completion indication</span></span>                                                                                                                                                                                                    |
|----------------|----------------|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f0f9f-130">NULL</span><span class="sxs-lookup"><span data-stu-id="f0f9f-130">NULL</span></span>           | <span data-ttu-id="f0f9f-131">No aplicable</span><span class="sxs-lookup"><span data-stu-id="f0f9f-131">Not applicable</span></span> | <span data-ttu-id="f0f9f-132">Omitido</span><span class="sxs-lookup"><span data-stu-id="f0f9f-132">Ignored</span></span>               | <span data-ttu-id="f0f9f-133">La operación se completa de forma sincrónica.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-133">Operation completes synchronously.</span></span> <span data-ttu-id="f0f9f-134">Se comporta como si fuera un socket nonoverlapped.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-134">It behaves as if it were a nonoverlapped socket.</span></span>                                                                                                                                      |
| <span data-ttu-id="f0f9f-135">! ACEPTA</span><span class="sxs-lookup"><span data-stu-id="f0f9f-135">!NULL</span></span>          | <span data-ttu-id="f0f9f-136">NULL</span><span class="sxs-lookup"><span data-stu-id="f0f9f-136">NULL</span></span>           | <span data-ttu-id="f0f9f-137">NULL</span><span class="sxs-lookup"><span data-stu-id="f0f9f-137">NULL</span></span>                  | <span data-ttu-id="f0f9f-138">La operación se completa superpuesta, pero no hay ningún mecanismo de finalización compatible con Windows Sockets 2.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-138">Operation completes overlapped, but there is no Windows Sockets 2-supported completion mechanism.</span></span> <span data-ttu-id="f0f9f-139">En este caso, se puede usar el mecanismo de puerto de finalización (si se admite).</span><span class="sxs-lookup"><span data-stu-id="f0f9f-139">The completion port mechanism (if supported) can be used in this case.</span></span> <span data-ttu-id="f0f9f-140">De lo contrario, no hay ninguna notificación de finalización.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-140">Otherwise, there is no completion notification.</span></span> |
| <span data-ttu-id="f0f9f-141">! ACEPTA</span><span class="sxs-lookup"><span data-stu-id="f0f9f-141">!NULL</span></span>          | <span data-ttu-id="f0f9f-142">! ACEPTA</span><span class="sxs-lookup"><span data-stu-id="f0f9f-142">!NULL</span></span>          | <span data-ttu-id="f0f9f-143">NULL</span><span class="sxs-lookup"><span data-stu-id="f0f9f-143">NULL</span></span>                  | <span data-ttu-id="f0f9f-144">La operación se completa y se notifica mediante un objeto de evento de señalización.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-144">Operation completes overlapped, notification by signaling event object.</span></span>                                                                                                                                                  |
| <span data-ttu-id="f0f9f-145">! ACEPTA</span><span class="sxs-lookup"><span data-stu-id="f0f9f-145">!NULL</span></span>          | <span data-ttu-id="f0f9f-146">Omitido</span><span class="sxs-lookup"><span data-stu-id="f0f9f-146">Ignored</span></span>        | <span data-ttu-id="f0f9f-147">! ACEPTA</span><span class="sxs-lookup"><span data-stu-id="f0f9f-147">!NULL</span></span>                 | <span data-ttu-id="f0f9f-148">La operación se completa y se notifica mediante la programación de la rutina de finalización.</span><span class="sxs-lookup"><span data-stu-id="f0f9f-148">Operation completes overlapped, notification by scheduling completion routine.</span></span>                                                                                                                                           |



 

 

 
