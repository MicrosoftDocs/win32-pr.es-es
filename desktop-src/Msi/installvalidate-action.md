---
description: La acción InstallValidate comprueba que todos los volúmenes a los que se ha atribuido el costo tienen suficiente espacio para la instalación. La acción InstallValidate finaliza la instalación con un error irrecuperable si algún volumen tiene poco espacio en disco.
ms.assetid: 1c55794d-1ecc-43bf-956f-96afc5f36964
title: Acción InstallValidate
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e650ce136ac3b1b62e41ce34f79f5d28540d1292
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104278608"
---
# <a name="installvalidate-action"></a><span data-ttu-id="c71ad-104">Acción InstallValidate</span><span class="sxs-lookup"><span data-stu-id="c71ad-104">InstallValidate Action</span></span>

<span data-ttu-id="c71ad-105">La acción InstallValidate comprueba que todos los [*volúmenes*](v-gly.md) a los que se ha atribuido el [*costo*](c-gly.md) tienen suficiente espacio para la instalación.</span><span class="sxs-lookup"><span data-stu-id="c71ad-105">The InstallValidate action verifies that all [*volumes*](v-gly.md) to which [*cost*](c-gly.md) has been attributed have sufficient space for the installation.</span></span> <span data-ttu-id="c71ad-106">La acción InstallValidate finaliza la instalación con un error irrecuperable si algún volumen tiene poco espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="c71ad-106">The InstallValidate action ends the installation with a fatal error if any volume is short of disk space.</span></span>

<span data-ttu-id="c71ad-107">La acción InstallValidate también notifica al usuario si uno o varios archivos que se van a sobrescribir o quitar están actualmente en uso por un proceso activo.</span><span class="sxs-lookup"><span data-stu-id="c71ad-107">The InstallValidate action also notifies the user if one or more files to be overwritten or removed are currently in use by an active process.</span></span> <span data-ttu-id="c71ad-108">Para obtener más información, consulte [reinicios del sistema](system-reboots.md).</span><span class="sxs-lookup"><span data-stu-id="c71ad-108">For more information, see [System Reboots](system-reboots.md).</span></span>

## <a name="sequence-restrictions"></a><span data-ttu-id="c71ad-109">Restricciones de secuencia</span><span class="sxs-lookup"><span data-stu-id="c71ad-109">Sequence Restrictions</span></span>

<span data-ttu-id="c71ad-110">La acción [CostFinalize](costfinalize-action.md) y las secuencias del cuadro de diálogo de la interfaz de usuario que permiten al usuario modificar los Estados y/o directorios de selección se deben secuenciar antes de la acción InstallValidate.</span><span class="sxs-lookup"><span data-stu-id="c71ad-110">The [CostFinalize](costfinalize-action.md) action and any UI dialog box sequences that allow the user to modify selection states and/or directories should be sequenced before the InstallValidate action.</span></span>

<span data-ttu-id="c71ad-111">Las [acciones personalizadas](custom-actions.md) que cambian el estado de la instalación de las características o componentes deben secuenciarse antes de la acción InstallValidate.</span><span class="sxs-lookup"><span data-stu-id="c71ad-111">[Custom actions](custom-actions.md) that change the installation state of features or components must be sequenced before the InstallValidate action.</span></span>

## <a name="actiondata-messages"></a><span data-ttu-id="c71ad-112">Mensajes ActionData</span><span class="sxs-lookup"><span data-stu-id="c71ad-112">ActionData Messages</span></span>

<span data-ttu-id="c71ad-113">No hay mensajes ActionData.</span><span class="sxs-lookup"><span data-stu-id="c71ad-113">There are no ActionData messages.</span></span>

## <a name="remarks"></a><span data-ttu-id="c71ad-114">Observaciones</span><span class="sxs-lookup"><span data-stu-id="c71ad-114">Remarks</span></span>

<span data-ttu-id="c71ad-115">Normalmente, una secuencia del cuadro de diálogo de la interfaz de usuario anterior debe realizar la misma comprobación que la acción InstallValidate cuando el usuario intenta iniciar la copia de archivos.</span><span class="sxs-lookup"><span data-stu-id="c71ad-115">Typically, an earlier UI dialog box sequence should perform the same verification as the InstallValidate action when the user attempts to initiate the copying of files.</span></span> <span data-ttu-id="c71ad-116">Esta secuencia del cuadro de diálogo de la interfaz de usuario debe presentar un cuadro **de diálogo de espacio** insuficiente en el disco si los volúmenes seleccionados no tienen suficiente espacio para la instalación.</span><span class="sxs-lookup"><span data-stu-id="c71ad-116">This UI dialog box sequence should present an **Out of Disk Space** dialog box if the volumes selected do not have enough space for the installation.</span></span> <span data-ttu-id="c71ad-117">Los cuadros de diálogo de la interfaz de usuario deben crearse de forma que el usuario no pueda continuar con la instalación si no hay suficiente espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="c71ad-117">The UI dialog boxes should be authored in a way to prevent the user from proceeding with the installation if there is insufficient disk space.</span></span> <span data-ttu-id="c71ad-118">En el caso de una instalación silenciosa, no hay ninguna interfaz de usuario y la acción InstallValidate finaliza la instalación si no hay suficiente espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="c71ad-118">In the case of a quiet installation, there is no user interface and the InstallValidate action terminates the installation if there is insufficient disk space.</span></span> <span data-ttu-id="c71ad-119">La causa de la finalización prematura se registra en el archivo de registro si está habilitado el registro.</span><span class="sxs-lookup"><span data-stu-id="c71ad-119">The cause of the premature termination is recorded in the log file if logging is enabled.</span></span>

<span data-ttu-id="c71ad-120">Se agrega una entrada a una tabla FilesInUse interna si se sobrescribe o se quita un archivo mientras está abierto para su ejecución o modificación por parte de cualquier proceso durante el [*costo*](c-gly.md)de los archivos.</span><span class="sxs-lookup"><span data-stu-id="c71ad-120">An entry is added to an internal FilesInUse table if any file is overwritten or removed while it is open for execution or modification by any process during file [*costing*](c-gly.md).</span></span> <span data-ttu-id="c71ad-121">La tabla FilesInUse contiene columnas para el nombre y la ruta de acceso completa del archivo.</span><span class="sxs-lookup"><span data-stu-id="c71ad-121">The FilesInUse table contains columns for the name and full path of the file.</span></span> <span data-ttu-id="c71ad-122">Cuando se ejecuta la acción InstallValidate, el instalador consulta la tabla FilesInUse para buscar entradas y determina el nombre del proceso mediante el archivo.</span><span class="sxs-lookup"><span data-stu-id="c71ad-122">When the InstallValidate action executes, the installer queries the FilesInUse table for entries and determines the name of the process using the file.</span></span> <span data-ttu-id="c71ad-123">La acción InstallValidate agrega un registro a la tabla de la interfaz de usuario de [ListBox](listbox-table.md) para cada proceso único identificado por esta consulta.</span><span class="sxs-lookup"><span data-stu-id="c71ad-123">The InstallValidate action adds one record to the [ListBox](listbox-table.md) user interface table for each unique process identified by this query.</span></span> <span data-ttu-id="c71ad-124">El registro contiene los siguientes valores en cada columna:</span><span class="sxs-lookup"><span data-stu-id="c71ad-124">The record contains the following values in each column:</span></span>

<span data-ttu-id="c71ad-125">**Propiedad**: FileInUseProcess</span><span class="sxs-lookup"><span data-stu-id="c71ad-125">**Property**: FileInUseProcess</span></span>

 

<span data-ttu-id="c71ad-126">**Valor**: *nombre del proceso*</span><span class="sxs-lookup"><span data-stu-id="c71ad-126">**Value**: *Name of process*</span></span>

 

<span data-ttu-id="c71ad-127">**Texto**: *texto contenido en el título de la ventana principal del proceso*</span><span class="sxs-lookup"><span data-stu-id="c71ad-127">**Text**: *Text contained in the caption of the main window of the process*</span></span>

<span data-ttu-id="c71ad-128">A continuación, la acción InstallValidate muestra el cuadro **de diálogo archivos en uso** .</span><span class="sxs-lookup"><span data-stu-id="c71ad-128">The InstallValidate action then displays the **Files In Use** dialog box.</span></span> <span data-ttu-id="c71ad-129">Este cuadro de diálogo muestra los procesos que deben cerrarse para evitar el requisito de reiniciar el sistema para reemplazar los archivos en uso.</span><span class="sxs-lookup"><span data-stu-id="c71ad-129">This dialog box displays the processes that must be shut down to avoid the requirement of restarting the system to replace files in use.</span></span>

<span data-ttu-id="c71ad-130">La acción InstallValidate consulta la tabla de [diálogo](dialog-table.md) de un cuadro de diálogo creado con el cuadro de diálogo nombre reservado [FilesInUse](filesinuse-dialog.md) y lo muestra.</span><span class="sxs-lookup"><span data-stu-id="c71ad-130">The InstallValidate action queries the [Dialog](dialog-table.md) table for an authored dialog box with the reserved name [FilesInUse](filesinuse-dialog.md) dialog and displays it.</span></span> <span data-ttu-id="c71ad-131">Este cuadro de diálogo debe contener un control [ListBox](listbox-control.md) que esté asociado a una propiedad denominada FileInUseProcess.</span><span class="sxs-lookup"><span data-stu-id="c71ad-131">This dialog box must contain a [ListBox](listbox-control.md) control that is tied to a property named FileInUseProcess.</span></span> <span data-ttu-id="c71ad-132">Por Convención, este cuadro de diálogo tiene un botón **salir**, **Reintentar** u **omitir** , pero es el autor de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="c71ad-132">By convention, this dialog box has an **Exit**, **Retry**, or **Ignore** button, but this is up to the UI author.</span></span> <span data-ttu-id="c71ad-133">Cada botón debe estar vinculado a un ControlEvent, [EndDialog](enddialog-controlevent.md) en la tabla [ControlEvent,](controlevent-table.md) .</span><span class="sxs-lookup"><span data-stu-id="c71ad-133">Each button should be tied to an [EndDialog](enddialog-controlevent.md) ControlEvent in the [ControlEvent](controlevent-table.md) table.</span></span> <span data-ttu-id="c71ad-134">La acción InstallValidate responde como se indica a continuación al valor devuelto por el ControlEvent, de la [acción](doaction-controlevent.md) , tal y como lo dicta uno de estos argumentos [EndDialog](enddialog-controlevent.md) asociados al botón insertado por el usuario:</span><span class="sxs-lookup"><span data-stu-id="c71ad-134">The InstallValidate action responds as follows to the value returned by the [DoAction](doaction-controlevent.md) ControlEvent, as dictated by one of these [EndDialog](enddialog-controlevent.md) arguments associated with the button pushed by the user:</span></span>

<span data-ttu-id="c71ad-135">**Reintentar**: se borran todos los valores agregados a la tabla de [cuadro de lista](listbox-table.md) y se repite todo el procedimiento de [*costo*](c-gly.md) de archivos, con lo que se vuelve a comprobar los archivos que todavía están en uso.</span><span class="sxs-lookup"><span data-stu-id="c71ad-135">**Retry**: All values added to the [ListBox](listbox-table.md) table are cleared, and the entire file [*costing*](c-gly.md) procedure is repeated, rechecking for files that are still in use.</span></span> <span data-ttu-id="c71ad-136">Si todavía se identifican uno o más procesos como el uso de archivos que se van a sobrescribir o eliminar, el proceso se repite; de lo contrario, InstallValidate devuelve el control al instalador con un estado de msiDoActionStatusSuccess.</span><span class="sxs-lookup"><span data-stu-id="c71ad-136">If one or more processes are still identified as using files to be overwritten or deleted, the process repeats; otherwise, InstallValidate returns control to the installer with a status of msiDoActionStatusSuccess.</span></span>

<span data-ttu-id="c71ad-137">**Exit**: la acción InstallValidate devuelve inmediatamente el control al instalador con un estado de msiDoActionStatusUserExit.</span><span class="sxs-lookup"><span data-stu-id="c71ad-137">**Exit**: The InstallValidate action immediately returns control to the installer with a status of msiDoActionStatusUserExit.</span></span> <span data-ttu-id="c71ad-138">Esto finaliza la instalación.</span><span class="sxs-lookup"><span data-stu-id="c71ad-138">This terminates the installation.</span></span>

<span data-ttu-id="c71ad-139">**Cualquier otro valor devuelto**: la acción InstallValidate devuelve inmediatamente el control al instalador con un estado de msiDoActionStatusSuccess.</span><span class="sxs-lookup"><span data-stu-id="c71ad-139">**Any other return value**: The InstallValidate action immediately returns control to the installer with a status of msiDoActionStatusSuccess.</span></span> <span data-ttu-id="c71ad-140">En este caso, como uno o varios archivos todavía están en uso, las siguientes acciones de [InstallFiles](installfiles-action.md) y/o [InstallAdminPackage](installadminpackage-action.md) deben programar los archivos en uso que se van a reemplazar o eliminar cuando se reinicie el sistema.</span><span class="sxs-lookup"><span data-stu-id="c71ad-140">In this case, since one or more files are still in use, the subsequent [InstallFiles](installfiles-action.md) and/or [InstallAdminPackage](installadminpackage-action.md) actions must schedule the in-use file(s) to be replaced or deleted when the system is restarted.</span></span>

<span data-ttu-id="c71ad-141">Si no hay ninguna tabla [ListBox](listbox-table.md) en la base de datos, InstallValidate se cierra silenciosamente sin un error.</span><span class="sxs-lookup"><span data-stu-id="c71ad-141">If there is no [ListBox](listbox-table.md) table in the database, InstallValidate exits silently without an error.</span></span>

<span data-ttu-id="c71ad-142">El punto y coma es el delimitador de lista para las transformaciones, los orígenes y las revisiones, y no debe usarse en estos nombres de archivo o rutas de acceso.</span><span class="sxs-lookup"><span data-stu-id="c71ad-142">The semicolon is the list delimiter for transforms, sources, and patches, and should not be used in these file names or paths.</span></span>

<span data-ttu-id="c71ad-143">Los archivos marcados como de solo lectura en una ubicación de solo lectura nunca se consideran utilizados por el instalador.</span><span class="sxs-lookup"><span data-stu-id="c71ad-143">Files marked read-only in a read-only location are never considered in use by the installer.</span></span>

<span data-ttu-id="c71ad-144">Si el nivel de la interfaz de usuario es básico, se presenta al usuario un cuadro **de diálogo de espacio en disco** predeterminado que contiene los botones **anular** y **Reintentar** .</span><span class="sxs-lookup"><span data-stu-id="c71ad-144">A default **Out of Disk Space** dialog box containing **Abort** and **Retry** buttons is presented to the user if the user interface level is basic.</span></span>

 

 



