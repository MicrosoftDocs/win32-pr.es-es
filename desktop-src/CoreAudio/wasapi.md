---
description: Acerca de WASAPI
ms.assetid: 452b9725-b0b9-4888-bbb5-a23e0067e840
title: Acerca de WASAPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f869319f3100b797e58c7b43597869c9767ac037
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104000636"
---
# <a name="about-wasapi"></a><span data-ttu-id="f9e68-103">Acerca de WASAPI</span><span class="sxs-lookup"><span data-stu-id="f9e68-103">About WASAPI</span></span>

<span data-ttu-id="f9e68-104">La API de sesión de audio de Windows (WASAPI) permite a las aplicaciones cliente administrar el flujo de datos de audio entre la aplicación y un [dispositivo de punto de conexión de audio](audio-endpoint-devices.md).</span><span class="sxs-lookup"><span data-stu-id="f9e68-104">The Windows Audio Session API (WASAPI) enables client applications to manage the flow of audio data between the application and an [audio endpoint device](audio-endpoint-devices.md).</span></span>

<span data-ttu-id="f9e68-105">Los archivos de encabezado Audioclient. h y Audiopolicy. h definen las interfaces de WASAPI.</span><span class="sxs-lookup"><span data-stu-id="f9e68-105">Header files Audioclient.h and Audiopolicy.h define the WASAPI interfaces.</span></span>

<span data-ttu-id="f9e68-106">Cada secuencia de audio es un miembro de una [sesión de audio](audio-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="f9e68-106">Every audio stream is a member of an [audio session](audio-sessions.md).</span></span> <span data-ttu-id="f9e68-107">A través de la abstracción de la sesión, un cliente de WASAPI puede identificar una secuencia de audio como miembro de un grupo de secuencias de audio relacionadas.</span><span class="sxs-lookup"><span data-stu-id="f9e68-107">Through the session abstraction, a WASAPI client can identify an audio stream as a member of a group of related audio streams.</span></span> <span data-ttu-id="f9e68-108">El sistema puede administrar todas las secuencias de la sesión como una sola unidad.</span><span class="sxs-lookup"><span data-stu-id="f9e68-108">The system can manage all of the streams in the session as a single unit.</span></span>

<span data-ttu-id="f9e68-109">El motor de audio es el [componente de audio de modo de usuario](user-mode-audio-components.md) a través del cual las aplicaciones comparten el acceso a un dispositivo de punto de conexión de audio.</span><span class="sxs-lookup"><span data-stu-id="f9e68-109">The audio engine is the [user-mode audio component](user-mode-audio-components.md) through which applications share access to an audio endpoint device.</span></span> <span data-ttu-id="f9e68-110">El motor de audio transporta datos de audio entre un búfer de punto de conexión y un dispositivo de extremo.</span><span class="sxs-lookup"><span data-stu-id="f9e68-110">The audio engine transports audio data between an endpoint buffer and an endpoint device.</span></span> <span data-ttu-id="f9e68-111">Para reproducir una secuencia de audio a través de un dispositivo de punto de conexión de representación, una aplicación escribe periódicamente datos de audio en un búfer de punto de conexión de representación.</span><span class="sxs-lookup"><span data-stu-id="f9e68-111">To play an audio stream through a rendering endpoint device, an application periodically writes audio data to a rendering endpoint buffer.</span></span> <span data-ttu-id="f9e68-112">El motor de audio mezcla los flujos de las distintas aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="f9e68-112">The audio engine mixes the streams from the various applications.</span></span> <span data-ttu-id="f9e68-113">Para registrar una secuencia de audio desde un dispositivo de punto de conexión de captura, una aplicación Lee periódicamente datos de audio desde un búfer de punto de conexión de captura.</span><span class="sxs-lookup"><span data-stu-id="f9e68-113">To record an audio stream from a capture endpoint device, an application periodically reads audio data from a capture endpoint buffer.</span></span>

<span data-ttu-id="f9e68-114">WASAPI consta de varias interfaces.</span><span class="sxs-lookup"><span data-stu-id="f9e68-114">WASAPI consists of several interfaces.</span></span> <span data-ttu-id="f9e68-115">La primera de ellas es la interfaz [**IAudioClient**](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient) .</span><span class="sxs-lookup"><span data-stu-id="f9e68-115">The first of these is the [**IAudioClient**](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient) interface.</span></span> <span data-ttu-id="f9e68-116">Para acceder a las interfaces de WASAPI, un cliente obtiene primero una referencia a la interfaz **IAudioClient** de un dispositivo de punto de conexión de audio llamando al método [**IMMDevice:: Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) con el *IID* de parámetro establecido en **REFIID** IID \_ IAudioClient.</span><span class="sxs-lookup"><span data-stu-id="f9e68-116">To access the WASAPI interfaces, a client first obtains a reference to the **IAudioClient** interface of an audio endpoint device by calling the [**IMMDevice::Activate**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdevice-activate) method with parameter *iid* set to **REFIID** IID\_IAudioClient.</span></span> <span data-ttu-id="f9e68-117">El cliente llama al método [**IAudioClient:: Initialize**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-initialize) para inicializar una secuencia en un dispositivo de extremo.</span><span class="sxs-lookup"><span data-stu-id="f9e68-117">The client calls the [**IAudioClient::Initialize**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-initialize) method to initialize a stream on an endpoint device.</span></span> <span data-ttu-id="f9e68-118">Después de inicializar un flujo, el cliente puede obtener referencias a las otras interfaces de WASAPI llamando al método [**IAudioClient:: GetService**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-getservice) .</span><span class="sxs-lookup"><span data-stu-id="f9e68-118">After initializing a stream, the client can obtain references to the other WASAPI interfaces by calling the [**IAudioClient::GetService**](/windows/desktop/api/Audioclient/nf-audioclient-iaudioclient-getservice) method.</span></span>

<span data-ttu-id="f9e68-119">Muchos de los métodos de WASAPI devuelven el código de error AUDCLNT \_ E \_ \_ se invalidan si el dispositivo de punto de conexión de audio que utiliza una aplicación cliente no es válido.</span><span class="sxs-lookup"><span data-stu-id="f9e68-119">Many of the methods in WASAPI return error code AUDCLNT\_E\_DEVICE\_INVALIDATED if the audio endpoint device that a client application is using becomes invalid.</span></span> <span data-ttu-id="f9e68-120">Con frecuencia, la aplicación puede recuperarse de este error.</span><span class="sxs-lookup"><span data-stu-id="f9e68-120">Frequently, the application can recover from this error.</span></span> <span data-ttu-id="f9e68-121">Para obtener más información, consulte [recuperación de un error de Invalid-Device](recovering-from-an-invalid-device-error.md).</span><span class="sxs-lookup"><span data-stu-id="f9e68-121">For more information, see [Recovering from an Invalid-Device Error](recovering-from-an-invalid-device-error.md).</span></span>

<span data-ttu-id="f9e68-122">WASAPI implementa las interfaces siguientes.</span><span class="sxs-lookup"><span data-stu-id="f9e68-122">WASAPI implements the following interfaces.</span></span>



| <span data-ttu-id="f9e68-123">Interfaz</span><span class="sxs-lookup"><span data-stu-id="f9e68-123">Interface</span></span>                                            | <span data-ttu-id="f9e68-124">Descripción</span><span class="sxs-lookup"><span data-stu-id="f9e68-124">Description</span></span>                                                                                                                                                     |
|------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="f9e68-125">**IAudioCaptureClient**</span><span class="sxs-lookup"><span data-stu-id="f9e68-125">**IAudioCaptureClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiocaptureclient)   | <span data-ttu-id="f9e68-126">Permite a un cliente leer los datos de entrada de un búfer de extremo de captura.</span><span class="sxs-lookup"><span data-stu-id="f9e68-126">Enables a client to read input data from a capture endpoint buffer.</span></span>                                                                                             |
| [<span data-ttu-id="f9e68-127">**IAudioClient**</span><span class="sxs-lookup"><span data-stu-id="f9e68-127">**IAudioClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclient)                 | <span data-ttu-id="f9e68-128">Permite a un cliente crear e inicializar una secuencia de audio entre una aplicación de audio y el motor de audio o el búfer de hardware de un dispositivo de punto de conexión de audio.</span><span class="sxs-lookup"><span data-stu-id="f9e68-128">Enables a client to create and initialize an audio stream between an audio application and the audio engine or the hardware buffer of an audio endpoint device.</span></span> |
| [<span data-ttu-id="f9e68-129">**IAudioClock**</span><span class="sxs-lookup"><span data-stu-id="f9e68-129">**IAudioClock**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudioclock)                   | <span data-ttu-id="f9e68-130">Permite a un cliente supervisar la velocidad de datos de una secuencia y la posición actual en la secuencia.</span><span class="sxs-lookup"><span data-stu-id="f9e68-130">Enables a client to monitor a stream's data rate and the current position in the stream.</span></span>                                                                        |
| [<span data-ttu-id="f9e68-131">**IAudioRenderClient**</span><span class="sxs-lookup"><span data-stu-id="f9e68-131">**IAudioRenderClient**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiorenderclient)     | <span data-ttu-id="f9e68-132">Permite que un cliente escriba los datos de salida en un búfer de punto de conexión de representación.</span><span class="sxs-lookup"><span data-stu-id="f9e68-132">Enables a client to write output data to a rendering endpoint buffer.</span></span>                                                                                           |
| [<span data-ttu-id="f9e68-133">**IAudioSessionControl**</span><span class="sxs-lookup"><span data-stu-id="f9e68-133">**IAudioSessionControl**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessioncontrol) | <span data-ttu-id="f9e68-134">Permite a un cliente configurar los parámetros de control para una sesión de audio y supervisar los eventos de la sesión.</span><span class="sxs-lookup"><span data-stu-id="f9e68-134">Enables a client to configure the control parameters for an audio session and to monitor events in the session.</span></span>                                                 |
| [<span data-ttu-id="f9e68-135">**IAudioSessionManager**</span><span class="sxs-lookup"><span data-stu-id="f9e68-135">**IAudioSessionManager**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionmanager) | <span data-ttu-id="f9e68-136">Permite que un cliente tenga acceso a los controles de sesión y a los controles de volumen tanto para sesiones de audio de proceso cruzado como de proceso.</span><span class="sxs-lookup"><span data-stu-id="f9e68-136">Enables a client to access the session controls and volume controls for both cross-process and process-specific audio sessions.</span></span>                                 |
| [<span data-ttu-id="f9e68-137">**IAudioStreamVolume**</span><span class="sxs-lookup"><span data-stu-id="f9e68-137">**IAudioStreamVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-iaudiostreamvolume)     | <span data-ttu-id="f9e68-138">Permite a un cliente controlar y supervisar los niveles de volumen de todos los canales de una secuencia de audio.</span><span class="sxs-lookup"><span data-stu-id="f9e68-138">Enables a client to control and monitor the volume levels for all of the channels in an audio stream.</span></span>                                                           |
| [<span data-ttu-id="f9e68-139">**IChannelAudioVolume**</span><span class="sxs-lookup"><span data-stu-id="f9e68-139">**IChannelAudioVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-ichannelaudiovolume)   | <span data-ttu-id="f9e68-140">Permite que un cliente controle los niveles de volumen de todos los canales de la sesión de audio a la que pertenece la secuencia.</span><span class="sxs-lookup"><span data-stu-id="f9e68-140">Enables a client to control the volume levels for all of the channels in the audio session that the stream belongs to.</span></span>                                          |
| [<span data-ttu-id="f9e68-141">**ISimpleAudioVolume**</span><span class="sxs-lookup"><span data-stu-id="f9e68-141">**ISimpleAudioVolume**</span></span>](/windows/desktop/api/Audioclient/nn-audioclient-isimpleaudiovolume)     | <span data-ttu-id="f9e68-142">Permite a un cliente controlar el nivel de volumen maestro de una sesión de audio.</span><span class="sxs-lookup"><span data-stu-id="f9e68-142">Enables a client to control the master volume level of an audio session.</span></span>                                                                                        |



 

<span data-ttu-id="f9e68-143">Los clientes de WASAPI que requieren la notificación de eventos relacionados con la sesión deben implementar la siguiente interfaz.</span><span class="sxs-lookup"><span data-stu-id="f9e68-143">WASAPI clients that require notification of session-related events should implement the following interface.</span></span>



| <span data-ttu-id="f9e68-144">Interfaz</span><span class="sxs-lookup"><span data-stu-id="f9e68-144">Interface</span></span>                                          | <span data-ttu-id="f9e68-145">Descripción</span><span class="sxs-lookup"><span data-stu-id="f9e68-145">Description</span></span>                                                                                                            |
|----------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="f9e68-146">**IAudioSessionEvents**</span><span class="sxs-lookup"><span data-stu-id="f9e68-146">**IAudioSessionEvents**</span></span>](/windows/desktop/api/Audiopolicy/nn-audiopolicy-iaudiosessionevents) | <span data-ttu-id="f9e68-147">Proporciona notificaciones de eventos relacionados con la sesión, como cambios en el nivel de volumen, nombre para mostrar y estado de sesión.</span><span class="sxs-lookup"><span data-stu-id="f9e68-147">Provides notifications of session-related events such as changes in the volume level, display name, and session state.</span></span> |



 

## <a name="related-topics"></a><span data-ttu-id="f9e68-148">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="f9e68-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f9e68-149">Administración de flujos</span><span class="sxs-lookup"><span data-stu-id="f9e68-149">Stream Management</span></span>](stream-management.md)
</dt> <dt>

[<span data-ttu-id="f9e68-150">**Referencia de programación**</span><span class="sxs-lookup"><span data-stu-id="f9e68-150">**Programming Reference**</span></span>](programming-reference.md)
</dt> </dl>

 

 



