---
title: Escenario 1 ejemplo de tiempo de espera HTTP con seguimiento ETW y comandos Netsh
description: A través del seguimiento de ETW, el flujo de datos a través del componente API del servidor HTTP se puede inspeccionar para diagnosticar problemas.
ms.assetid: b6b24161-c3da-4972-b49f-c545da2fc81e
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa50f438aca664651b24db822f2b9e3a30da4682
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/04/2021
ms.locfileid: "104556078"
---
# <a name="scenario-1-http-timeout-example-using-etw-tracing-and-netsh-commands"></a><span data-ttu-id="953f0-103">Escenario 1: ejemplo de tiempo de espera de HTTP usando seguimiento ETW y comandos Netsh</span><span class="sxs-lookup"><span data-stu-id="953f0-103">Scenario 1: HTTP Timeout Example Using ETW Tracing and Netsh Commands</span></span>

<span data-ttu-id="953f0-104">A través del seguimiento de ETW, el flujo de datos a través del componente API del servidor HTTP se puede inspeccionar para diagnosticar problemas.</span><span class="sxs-lookup"><span data-stu-id="953f0-104">Through ETW tracing, the flow of data through the HTTP Server API component can be inspected to diagnose problems.</span></span> <span data-ttu-id="953f0-105">Por ejemplo, los usuarios de una aplicación Web pueden ver mensajes de error en su explorador que no se pueden mostrar en una página web.</span><span class="sxs-lookup"><span data-stu-id="953f0-105">For example, users of a web application may see error messages in their browser that a web page cannot display.</span></span> <span data-ttu-id="953f0-106">En el servidor que hospeda la aplicación Web, el profesional de ti también ve una entrada de tiempo de espera de conexión en el registro de errores HTTP, como se muestra en la figura 1.</span><span class="sxs-lookup"><span data-stu-id="953f0-106">On the server hosting the web application, the IT professional also sees a connection timeout entry within the HTTP Error Log, as shown in Figure 1 below.</span></span> <span data-ttu-id="953f0-107">El registro de errores HTTP se puede encontrar en el directorio siguiente:% WINDIR% \\ system32 \\ logfiles \\ HTTPERR \\ .</span><span class="sxs-lookup"><span data-stu-id="953f0-107">The HTTP Error Log can be found in the following directory: %windir%\\System32\\LogFiles\\HTTPERR\\.</span></span>

![Captura de pantalla que muestra la ventana de comandos Netsh H T T P mostrando un registro de errores H T t P para el tiempo de espera.](images/httperrorlog.png)

<span data-ttu-id="953f0-109">Figura 1: registro de errores de HTTP para el tiempo de espera</span><span class="sxs-lookup"><span data-stu-id="953f0-109">Figure 1: HTTP Error Log for Timeout</span></span>

## <a name="generating-an-etw-trace-report"></a><span data-ttu-id="953f0-110">Generar un informe de seguimiento de ETW</span><span class="sxs-lookup"><span data-stu-id="953f0-110">Generating an ETW Trace Report</span></span>

<span data-ttu-id="953f0-111">Para generar un informe de seguimiento de ETW para el componente de API del servidor HTTP, ejecute los pasos siguientes desde el símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="953f0-111">To generate an ETW trace report for the HTTP Server API component, run the steps below from the command prompt.</span></span> <span data-ttu-id="953f0-112">En este ejemplo, el seguimiento se ejecuta en el servidor desde que hospeda la aplicación Web.</span><span class="sxs-lookup"><span data-stu-id="953f0-112">In this example, the trace is run on the server since it is hosting the web application.</span></span>

<span data-ttu-id="953f0-113">En los pasos siguientes se genera un seguimiento denominado httptrace. ETL y, a continuación, se convierte el seguimiento en un archivo CSV denominado httptrace.csv.</span><span class="sxs-lookup"><span data-stu-id="953f0-113">The steps below generate a trace called httptrace.etl and then convert the trace into a CSV file called httptrace.csv.</span></span> <span data-ttu-id="953f0-114">Como se muestra a continuación, el proveedor ETW de la API del servidor HTTP se denomina Microsoft-Windows-HttpService.</span><span class="sxs-lookup"><span data-stu-id="953f0-114">As shown below, the ETW provider for the HTTP Server API is called Microsoft-Windows-HttpService.</span></span> <span data-ttu-id="953f0-115">La opción de línea de comandos 0xFFF indica que se deben capturar todos los eventos ETW para este proveedor.</span><span class="sxs-lookup"><span data-stu-id="953f0-115">The 0xFFF command-line option indicates that all ETW events for this provider should be captured.</span></span>

<span data-ttu-id="953f0-116">**Generar un informe de seguimiento de ETW**</span><span class="sxs-lookup"><span data-stu-id="953f0-116">**Generate an ETW Trace Report**</span></span>

1.  <span data-ttu-id="953f0-117">Iniciar seguimiento de ETW para el componente de API de servidor HTTP: l **ogman.exe Start httptrace-p Microsoft-Windows-HTTPService 0xFFFF-o httptrace. ETL – ETS**</span><span class="sxs-lookup"><span data-stu-id="953f0-117">Start ETW trace for HTTP Server API component: l **ogman.exe start httptrace -p Microsoft-Windows-HttpService 0xFFFF -o httptrace.etl –ets**</span></span>
2.  <span data-ttu-id="953f0-118">Reproduzca el problema para que se pueda capturar en el seguimiento.</span><span class="sxs-lookup"><span data-stu-id="953f0-118">Reproduce the issue so that it can be captured in the trace.</span></span> <span data-ttu-id="953f0-119">En este ejemplo, se tiene acceso a la aplicación web desde un equipo cliente, lo que da lugar a que se muestre el mensaje "**no se puede mostrar la página**" en el cliente.</span><span class="sxs-lookup"><span data-stu-id="953f0-119">In this example, access the web application from a client machine, resulting in the "**page cannot be displayed**" message being shown on the client.</span></span>
3.  <span data-ttu-id="953f0-120">Ahora que se ha reproducido el problema, detenga el seguimiento: **logman.exe STOP httptrace – ETS**</span><span class="sxs-lookup"><span data-stu-id="953f0-120">Now that the issue has been reproduced, stop the trace: **logman.exe stop httptrace –ets**</span></span>
4.  <span data-ttu-id="953f0-121">Convierta el informe en formato CSV: **tracerpt.exe httptrace. ETL-de CSV-o httptrace.csv**</span><span class="sxs-lookup"><span data-stu-id="953f0-121">Convert the report into CSV format: **tracerpt.exe httptrace.etl -of CSV -o httptrace.csv**</span></span>
5.  <span data-ttu-id="953f0-122">Ver el informe de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="953f0-122">View the trace report.</span></span> <span data-ttu-id="953f0-123">A continuación se muestra un extracto de un seguimiento de CSV en la tabla 1.</span><span class="sxs-lookup"><span data-stu-id="953f0-123">An excerpt from a CSV trace is shown below in Table 1.</span></span>

## <a name="viewing-the-trace-and-diagnosing"></a><span data-ttu-id="953f0-124">Ver el seguimiento y el diagnóstico</span><span class="sxs-lookup"><span data-stu-id="953f0-124">Viewing the Trace and Diagnosing</span></span>

<span data-ttu-id="953f0-125">El archivo CSV resultante para seguimientos se puede ver en Excel o en cualquier herramienta que admita el formato CSV.</span><span class="sxs-lookup"><span data-stu-id="953f0-125">The resulting CSV file for traces can be viewed in Excel or any tool that supports the CSV format.</span></span> <span data-ttu-id="953f0-126">En la tabla 1 siguiente se muestran fragmentos de un archivo de seguimiento de ejemplo (httptrace.csv).</span><span class="sxs-lookup"><span data-stu-id="953f0-126">Table 1 below shows excerpts from a sample trace file (httptrace.csv).</span></span> <span data-ttu-id="953f0-127">En el informe de seguimiento, la columna "nivel" muestra una entrada con un valor de "3", que corresponde a una advertencia en ETW.</span><span class="sxs-lookup"><span data-stu-id="953f0-127">In the trace report, the "Level" column shows an entry with a value of "3", which corresponds to a warning in ETW.</span></span> <span data-ttu-id="953f0-128">El componente API del servidor HTTP sigue los niveles de ETW definidos en el artículo siguiente: ( https://msdn2.microsoft.com/library/aa382793.aspx) .</span><span class="sxs-lookup"><span data-stu-id="953f0-128">The HTTP Server API component follows the ETW Levels defined in the following article: (https://msdn2.microsoft.com/library/aa382793.aspx).</span></span> <span data-ttu-id="953f0-129">Los niveles de ETW incluyen:</span><span class="sxs-lookup"><span data-stu-id="953f0-129">The ETW levels include:</span></span>



| <span data-ttu-id="953f0-130">Nivel</span><span class="sxs-lookup"><span data-stu-id="953f0-130">Level</span></span> | <span data-ttu-id="953f0-131">Significado</span><span class="sxs-lookup"><span data-stu-id="953f0-131">Meaning</span></span>      |
|-------|--------------|
| <span data-ttu-id="953f0-132">1</span><span class="sxs-lookup"><span data-stu-id="953f0-132">1</span></span>     | <span data-ttu-id="953f0-133">Crítico</span><span class="sxs-lookup"><span data-stu-id="953f0-133">Critical</span></span>     |
| <span data-ttu-id="953f0-134">2</span><span class="sxs-lookup"><span data-stu-id="953f0-134">2</span></span>     | <span data-ttu-id="953f0-135">Error</span><span class="sxs-lookup"><span data-stu-id="953f0-135">Error</span></span>        |
| <span data-ttu-id="953f0-136">3</span><span class="sxs-lookup"><span data-stu-id="953f0-136">3</span></span>     | <span data-ttu-id="953f0-137">Advertencia</span><span class="sxs-lookup"><span data-stu-id="953f0-137">Warning</span></span>      |
| <span data-ttu-id="953f0-138">4</span><span class="sxs-lookup"><span data-stu-id="953f0-138">4</span></span>     | <span data-ttu-id="953f0-139">Infomational</span><span class="sxs-lookup"><span data-stu-id="953f0-139">Infomational</span></span> |
| <span data-ttu-id="953f0-140">5</span><span class="sxs-lookup"><span data-stu-id="953f0-140">5</span></span>     | <span data-ttu-id="953f0-141">Verbose</span><span class="sxs-lookup"><span data-stu-id="953f0-141">Verbose</span></span>      |



 

<span data-ttu-id="953f0-142">Con esta advertencia, el tipo de evento (columna de tipo) notifica "ConnTimedOut".</span><span class="sxs-lookup"><span data-stu-id="953f0-142">With this warning, the event type (Type column) reports "ConnTimedOut".</span></span> <span data-ttu-id="953f0-143">En las columnas subsiguientes del evento ConnTimeOut, el temporizador específico que expiró se muestra como "TIMER \_ ConnectionIdle".</span><span class="sxs-lookup"><span data-stu-id="953f0-143">In the subsequent columns for the ConnTimeOut event, the specific timer that expired is reported as "Timer\_ConnectionIdle".</span></span> <span data-ttu-id="953f0-144">Tenga en cuenta que la columna con la entrada "TIMER \_ ConnectionIdle" no se incluye en la tabla por razones de brevedad y para evitar el extracto de columnas no contiguas.</span><span class="sxs-lookup"><span data-stu-id="953f0-144">Note the column with the "Timer\_ConnectionIdle" entry is not included in the table for the sake brevity and to avoid excerpting noncontiguous columns.</span></span>



| <span data-ttu-id="953f0-145">Nombre del evento</span><span class="sxs-lookup"><span data-stu-id="953f0-145">Event name</span></span>                    | <span data-ttu-id="953f0-146">Tipo</span><span class="sxs-lookup"><span data-stu-id="953f0-146">Type</span></span>            | <span data-ttu-id="953f0-147">Id. de evento</span><span class="sxs-lookup"><span data-stu-id="953f0-147">Event ID</span></span> | <span data-ttu-id="953f0-148">Versión</span><span class="sxs-lookup"><span data-stu-id="953f0-148">Version</span></span> | <span data-ttu-id="953f0-149">Canal</span><span class="sxs-lookup"><span data-stu-id="953f0-149">Channel</span></span> | <span data-ttu-id="953f0-150">Nivel</span><span class="sxs-lookup"><span data-stu-id="953f0-150">Level</span></span> |
|-------------------------------|-----------------|----------|---------|---------|-------|
| <span data-ttu-id="953f0-151">Eventtracer</span><span class="sxs-lookup"><span data-stu-id="953f0-151">EventTrace</span></span>                    | <span data-ttu-id="953f0-152">Encabezado</span><span class="sxs-lookup"><span data-stu-id="953f0-152">Header</span></span>          | <span data-ttu-id="953f0-153">0</span><span class="sxs-lookup"><span data-stu-id="953f0-153">0</span></span>        | <span data-ttu-id="953f0-154">2</span><span class="sxs-lookup"><span data-stu-id="953f0-154">2</span></span>       | <span data-ttu-id="953f0-155">0</span><span class="sxs-lookup"><span data-stu-id="953f0-155">0</span></span>       | <span data-ttu-id="953f0-156">0</span><span class="sxs-lookup"><span data-stu-id="953f0-156">0</span></span>     |
| <span data-ttu-id="953f0-157">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-157">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-158">ChgUrlGrpProp</span><span class="sxs-lookup"><span data-stu-id="953f0-158">ChgUrlGrpProp</span></span>   | <span data-ttu-id="953f0-159">28</span><span class="sxs-lookup"><span data-stu-id="953f0-159">28</span></span>       | <span data-ttu-id="953f0-160">0</span><span class="sxs-lookup"><span data-stu-id="953f0-160">0</span></span>       | <span data-ttu-id="953f0-161">16</span><span class="sxs-lookup"><span data-stu-id="953f0-161">16</span></span>      | <span data-ttu-id="953f0-162">4</span><span class="sxs-lookup"><span data-stu-id="953f0-162">4</span></span>     |
| <span data-ttu-id="953f0-163">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-163">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-164">AddUrl</span><span class="sxs-lookup"><span data-stu-id="953f0-164">AddUrl</span></span>          | <span data-ttu-id="953f0-165">31</span><span class="sxs-lookup"><span data-stu-id="953f0-165">31</span></span>       | <span data-ttu-id="953f0-166">0</span><span class="sxs-lookup"><span data-stu-id="953f0-166">0</span></span>       | <span data-ttu-id="953f0-167">16</span><span class="sxs-lookup"><span data-stu-id="953f0-167">16</span></span>      | <span data-ttu-id="953f0-168">4</span><span class="sxs-lookup"><span data-stu-id="953f0-168">4</span></span>     |
| <span data-ttu-id="953f0-169">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-169">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-170">ChgReqQueueProp</span><span class="sxs-lookup"><span data-stu-id="953f0-170">ChgReqQueueProp</span></span> | <span data-ttu-id="953f0-171">30</span><span class="sxs-lookup"><span data-stu-id="953f0-171">30</span></span>       | <span data-ttu-id="953f0-172">0</span><span class="sxs-lookup"><span data-stu-id="953f0-172">0</span></span>       | <span data-ttu-id="953f0-173">16</span><span class="sxs-lookup"><span data-stu-id="953f0-173">16</span></span>      | <span data-ttu-id="953f0-174">4</span><span class="sxs-lookup"><span data-stu-id="953f0-174">4</span></span>     |
| <span data-ttu-id="953f0-175">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-175">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-176">ChgUrlGrpProp</span><span class="sxs-lookup"><span data-stu-id="953f0-176">ChgUrlGrpProp</span></span>   | <span data-ttu-id="953f0-177">28</span><span class="sxs-lookup"><span data-stu-id="953f0-177">28</span></span>       | <span data-ttu-id="953f0-178">0</span><span class="sxs-lookup"><span data-stu-id="953f0-178">0</span></span>       | <span data-ttu-id="953f0-179">16</span><span class="sxs-lookup"><span data-stu-id="953f0-179">16</span></span>      | <span data-ttu-id="953f0-180">4</span><span class="sxs-lookup"><span data-stu-id="953f0-180">4</span></span>     |
| <span data-ttu-id="953f0-181">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-181">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-182">ChgSrvSesProp</span><span class="sxs-lookup"><span data-stu-id="953f0-182">ChgSrvSesProp</span></span>   | <span data-ttu-id="953f0-183">29</span><span class="sxs-lookup"><span data-stu-id="953f0-183">29</span></span>       | <span data-ttu-id="953f0-184">0</span><span class="sxs-lookup"><span data-stu-id="953f0-184">0</span></span>       | <span data-ttu-id="953f0-185">16</span><span class="sxs-lookup"><span data-stu-id="953f0-185">16</span></span>      | <span data-ttu-id="953f0-186">4</span><span class="sxs-lookup"><span data-stu-id="953f0-186">4</span></span>     |
| <span data-ttu-id="953f0-187">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-187">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-188">ChgSrvSesProp</span><span class="sxs-lookup"><span data-stu-id="953f0-188">ChgSrvSesProp</span></span>   | <span data-ttu-id="953f0-189">29</span><span class="sxs-lookup"><span data-stu-id="953f0-189">29</span></span>       | <span data-ttu-id="953f0-190">0</span><span class="sxs-lookup"><span data-stu-id="953f0-190">0</span></span>       | <span data-ttu-id="953f0-191">16</span><span class="sxs-lookup"><span data-stu-id="953f0-191">16</span></span>      | <span data-ttu-id="953f0-192">4</span><span class="sxs-lookup"><span data-stu-id="953f0-192">4</span></span>     |
| <span data-ttu-id="953f0-193">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-193">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-194">ConnConnect</span><span class="sxs-lookup"><span data-stu-id="953f0-194">ConnConnect</span></span>     | <span data-ttu-id="953f0-195">21</span><span class="sxs-lookup"><span data-stu-id="953f0-195">21</span></span>       | <span data-ttu-id="953f0-196">0</span><span class="sxs-lookup"><span data-stu-id="953f0-196">0</span></span>       | <span data-ttu-id="953f0-197">16</span><span class="sxs-lookup"><span data-stu-id="953f0-197">16</span></span>      | <span data-ttu-id="953f0-198">4</span><span class="sxs-lookup"><span data-stu-id="953f0-198">4</span></span>     |
| <span data-ttu-id="953f0-199">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-199">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-200">ConnIdAssgn</span><span class="sxs-lookup"><span data-stu-id="953f0-200">ConnIdAssgn</span></span>     | <span data-ttu-id="953f0-201">22</span><span class="sxs-lookup"><span data-stu-id="953f0-201">22</span></span>       | <span data-ttu-id="953f0-202">0</span><span class="sxs-lookup"><span data-stu-id="953f0-202">0</span></span>       | <span data-ttu-id="953f0-203">16</span><span class="sxs-lookup"><span data-stu-id="953f0-203">16</span></span>      | <span data-ttu-id="953f0-204">4</span><span class="sxs-lookup"><span data-stu-id="953f0-204">4</span></span>     |
| <span data-ttu-id="953f0-205">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-205">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-206">RecvReq</span><span class="sxs-lookup"><span data-stu-id="953f0-206">RecvReq</span></span>         | <span data-ttu-id="953f0-207">1</span><span class="sxs-lookup"><span data-stu-id="953f0-207">1</span></span>        | <span data-ttu-id="953f0-208">0</span><span class="sxs-lookup"><span data-stu-id="953f0-208">0</span></span>       | <span data-ttu-id="953f0-209">16</span><span class="sxs-lookup"><span data-stu-id="953f0-209">16</span></span>      | <span data-ttu-id="953f0-210">4</span><span class="sxs-lookup"><span data-stu-id="953f0-210">4</span></span>     |
| <span data-ttu-id="953f0-211">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-211">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-212">Analizar</span><span class="sxs-lookup"><span data-stu-id="953f0-212">Parse</span></span>           | <span data-ttu-id="953f0-213">2</span><span class="sxs-lookup"><span data-stu-id="953f0-213">2</span></span>        | <span data-ttu-id="953f0-214">0</span><span class="sxs-lookup"><span data-stu-id="953f0-214">0</span></span>       | <span data-ttu-id="953f0-215">16</span><span class="sxs-lookup"><span data-stu-id="953f0-215">16</span></span>      | <span data-ttu-id="953f0-216">4</span><span class="sxs-lookup"><span data-stu-id="953f0-216">4</span></span>     |
| <span data-ttu-id="953f0-217">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-217">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-218">LogFileWrite</span><span class="sxs-lookup"><span data-stu-id="953f0-218">LogFileWrite</span></span>    | <span data-ttu-id="953f0-219">51</span><span class="sxs-lookup"><span data-stu-id="953f0-219">51</span></span>       | <span data-ttu-id="953f0-220">0</span><span class="sxs-lookup"><span data-stu-id="953f0-220">0</span></span>       | <span data-ttu-id="953f0-221">16</span><span class="sxs-lookup"><span data-stu-id="953f0-221">16</span></span>      | <span data-ttu-id="953f0-222">4</span><span class="sxs-lookup"><span data-stu-id="953f0-222">4</span></span>     |
| <span data-ttu-id="953f0-223">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-223">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-224">ConnCleanup</span><span class="sxs-lookup"><span data-stu-id="953f0-224">ConnCleanup</span></span>     | <span data-ttu-id="953f0-225">24</span><span class="sxs-lookup"><span data-stu-id="953f0-225">24</span></span>       | <span data-ttu-id="953f0-226">0</span><span class="sxs-lookup"><span data-stu-id="953f0-226">0</span></span>       | <span data-ttu-id="953f0-227">16</span><span class="sxs-lookup"><span data-stu-id="953f0-227">16</span></span>      | <span data-ttu-id="953f0-228">4</span><span class="sxs-lookup"><span data-stu-id="953f0-228">4</span></span>     |
| <span data-ttu-id="953f0-229">Microsoft-Windows-HttpService</span><span class="sxs-lookup"><span data-stu-id="953f0-229">Microsoft-Windows-HttpService</span></span> | <span data-ttu-id="953f0-230">ConnTimedOut</span><span class="sxs-lookup"><span data-stu-id="953f0-230">ConnTimedOut</span></span>    | <span data-ttu-id="953f0-231">53</span><span class="sxs-lookup"><span data-stu-id="953f0-231">53</span></span>       | <span data-ttu-id="953f0-232">0</span><span class="sxs-lookup"><span data-stu-id="953f0-232">0</span></span>       | <span data-ttu-id="953f0-233">16</span><span class="sxs-lookup"><span data-stu-id="953f0-233">16</span></span>      | <span data-ttu-id="953f0-234">3</span><span class="sxs-lookup"><span data-stu-id="953f0-234">3</span></span>     |



 

<span data-ttu-id="953f0-235">Tabla 1: extractos de un informe de seguimiento de ejemplo para un problema de temporizador</span><span class="sxs-lookup"><span data-stu-id="953f0-235">Table 1: Excerpts from a Sample Trace Report for a Timer Issue</span></span>

<span data-ttu-id="953f0-236">En este ejemplo, la expiración (evento ConnTimeOut) del temporizador de encabezado (temporizador \_ ConnectionIdle) es el motivo por el que los usuarios finales ven el mensaje "no se puede mostrar la página" en sus clientes Web.</span><span class="sxs-lookup"><span data-stu-id="953f0-236">In this example, the expiration (ConnTimeOut event) of the header timer (Timer\_ConnectionIdle) is the reason end-users see the "page cannot be displayed" message in their web clients.</span></span> <span data-ttu-id="953f0-237">Una posible razón para el tiempo de espera puede ser que los clientes web envíen lentamente debido a conexiones lentas.</span><span class="sxs-lookup"><span data-stu-id="953f0-237">A potential reason for the timeout may be that Web clients are sending slowly due to slow connections.</span></span> <span data-ttu-id="953f0-238">Para solucionar este problema, el valor de tiempo de espera se puede ajustar a través de los comandos Netsh.</span><span class="sxs-lookup"><span data-stu-id="953f0-238">To address this issue, the timeout value can be adjusted through Netsh commands.</span></span>

## <a name="adjusting-timeout-through-netsh-and-verifying-the-solution"></a><span data-ttu-id="953f0-239">Ajuste del tiempo de espera a través de Netsh y comprobación de la solución</span><span class="sxs-lookup"><span data-stu-id="953f0-239">Adjusting Timeout through Netsh and Verifying the Solution</span></span>

<span data-ttu-id="953f0-240">Los comandos Netsh para HTTP que se enumeran a continuación permiten a los profesionales de ti ver y configurar los valores de configuración en el componente API del servidor HTTP.</span><span class="sxs-lookup"><span data-stu-id="953f0-240">The Netsh commands for HTTP listed below allow an IT professional to view and configure setting values on the HTTP Server API component.</span></span> <span data-ttu-id="953f0-241">Los cambios a través de los comandos Netsh HTTP afectan a todas las aplicaciones de servidor hospedadas por el componente de API de servidor HTTP para ese equipo.</span><span class="sxs-lookup"><span data-stu-id="953f0-241">Changes through Netsh HTTP commands affect all server applications hosted by the HTTP Server API component for that machine.</span></span> <span data-ttu-id="953f0-242">Estos cambios se conservan a lo largo del reinicio del componente y se reinician de la máquina.</span><span class="sxs-lookup"><span data-stu-id="953f0-242">These changes persist across restarts of the component and reboots of the machine.</span></span> <span data-ttu-id="953f0-243">Los comandos Netsh HTTP están disponibles en Windows Vista y Windows Server 2008 y reemplazan la herramienta HttpCfg.exe del kit de recursos de Windows Server 2003 cuando se ejecutan en Windows Vista y Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="953f0-243">The Netsh HTTP commands are available in Windows Vista and Windows Server 2008 and replace the Windows Server 2003 Resource Kit's HttpCfg.exe tool when running on Windows Vista and Windows Server 2008.</span></span> <span data-ttu-id="953f0-244">En este escenario, se ajustará un valor de tiempo de espera y se comprobará la solución.</span><span class="sxs-lookup"><span data-stu-id="953f0-244">In this scenario, we will adjust a timeout value and then verify the solution.</span></span> <span data-ttu-id="953f0-245">Existen temporizadores en el componente API del servidor HTTP para garantizar la disponibilidad y protegerse frente al uso excesivo por parte de un usuario malintencionado o mal configurado.</span><span class="sxs-lookup"><span data-stu-id="953f0-245">Timers exist in the HTTP Server API component to ensure availability and protect against overconsumption by a misconfigured or malicious user.</span></span> <span data-ttu-id="953f0-246">El ajuste de los temporizadores a partir de los valores predeterminados debe evaluarse detenidamente frente a posibles ataques de DoS.</span><span class="sxs-lookup"><span data-stu-id="953f0-246">Adjusting timers from default values should be carefully evaluated against a potential DoS attack.</span></span>

<span data-ttu-id="953f0-247">En este ejemplo, los clientes web están detrás de una conexión de red lenta, lo que produce el \_ evento ETW ConnectionIdle de Timer.</span><span class="sxs-lookup"><span data-stu-id="953f0-247">In this example, the web clients are behind a slow network connection, resulting in the Timer\_ConnectionIdle ETW event.</span></span> <span data-ttu-id="953f0-248">Después de considerar la causa de los tiempos de espera y el equilibrio con el impacto en la carga del servidor, se toma la decisión de aumentar los valores de tiempo de espera a un valor de 240 segundos.</span><span class="sxs-lookup"><span data-stu-id="953f0-248">After consideration of the cause of the timeouts and balancing with the impact on the server's load, the decision is made to increase the timeout values to a value of 240 seconds.</span></span> <span data-ttu-id="953f0-249">Puede ver y configurar el temporizador con el siguiente procedimiento.</span><span class="sxs-lookup"><span data-stu-id="953f0-249">You can view and then configure the timer with the following procedure.</span></span>

<span data-ttu-id="953f0-250">**Configurar el temporizador de conexión inactiva (temporizador \_ ConnectionIdle) con netsh**</span><span class="sxs-lookup"><span data-stu-id="953f0-250">**Configure the idle connection timer (Timer\_ConnectionIdle) with Netsh**</span></span>

1.  <span data-ttu-id="953f0-251">En el servidor, abra una ventana de comandos con privilegios elevados y ejecute los pasos siguientes para ver y configurar el valor de tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="953f0-251">On the server, open an elevated command window and run the steps below to view and configure the timeout value.</span></span> <span data-ttu-id="953f0-252">En la figura 2 se muestra una captura de pantalla del comando netsh HTTP.</span><span class="sxs-lookup"><span data-stu-id="953f0-252">A screenshot of the Netsh HTTP command is shown in Figure 2 below.</span></span>
2.  <span data-ttu-id="953f0-253">Mostrar los valores de tiempo de espera actuales: **netsh http show timeout**</span><span class="sxs-lookup"><span data-stu-id="953f0-253">Show the current timeout values: **Netsh http show timeout**</span></span>
3.  <span data-ttu-id="953f0-254">Configure el \_ valor de tiempo de espera del temporizador ConnectionIdle.</span><span class="sxs-lookup"><span data-stu-id="953f0-254">Configure the Timer\_ConnectionIdle timeout value.</span></span> <span data-ttu-id="953f0-255">En este ejemplo, el valor se cambia a 240 segundos: **netsh http Add timeout timeouttype = idleconnectiontimeout, Value = 240**</span><span class="sxs-lookup"><span data-stu-id="953f0-255">In this example, the value is changed to 240 seconds: **Netsh http add timeout timeouttype=idleconnectiontimeout value=240**</span></span>

![netsh http (ventana de comandos)](images/netshhttpcommand.png)

<span data-ttu-id="953f0-257">Figura 2: ventana de comandos Netsh HTTP</span><span class="sxs-lookup"><span data-stu-id="953f0-257">Figure 2: Netsh HTTP command window</span></span>

<span data-ttu-id="953f0-258">Después de configurar el valor de tiempo de espera, vuelva a ejecutar los pasos de diagnóstico de ETW.</span><span class="sxs-lookup"><span data-stu-id="953f0-258">After configuring the timeout value, rerun the ETW diagnosis steps.</span></span> <span data-ttu-id="953f0-259">Si la condición de error se corrige, el seguimiento de ETW ya no debe mostrar un tiempo de espera con un nivel ETW de "3" para el temporizador de inactividad de la conexión.</span><span class="sxs-lookup"><span data-stu-id="953f0-259">If the error condition is corrected, the ETW trace should no longer show a timeout with an ETW level of "3" for the connection idle timer.</span></span>

 

 




