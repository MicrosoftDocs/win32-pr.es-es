---
description: Habilita el componente de servidor de una aplicación de transporte para establecer un [*contexto de seguridad*](../secgloss/s-gly.md) entre el servidor y un cliente remoto.
ms.assetid: eaa15fed-4438-4e43-9be3-aa100ca453c7
title: AcceptSecurityContext (general) (función) (SSPI. h)
ms.topic: reference
ms.date: 07/25/2019
ms.openlocfilehash: 41b3220e9304f63e1a6ac4f77b609e3cbbac8741
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "103910350"
---
# <a name="acceptsecuritycontext-general-function"></a><span data-ttu-id="067bf-103">AcceptSecurityContext (general), función</span><span class="sxs-lookup"><span data-stu-id="067bf-103">AcceptSecurityContext (General) function</span></span>

<span data-ttu-id="067bf-104">La función **AcceptSecurityContext (general)** permite al componente de servidor de una aplicación de transporte establecer un [*contexto de seguridad*](../secgloss/s-gly.md) entre el servidor y un cliente remoto.</span><span class="sxs-lookup"><span data-stu-id="067bf-104">The **AcceptSecurityContext (General)** function enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client.</span></span> <span data-ttu-id="067bf-105">El cliente remoto utiliza la función [**InitializeSecurityContext (general)**](initializesecuritycontext--general.md) para iniciar el proceso de establecer un [*contexto de seguridad*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="067bf-105">The remote client uses the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function to start the process of establishing a [*security context*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="067bf-106">El servidor puede requerir uno o más tokens de respuesta del cliente remoto para completar el establecimiento del [*contexto de seguridad*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="067bf-106">The server can require one or more reply tokens from the remote client to complete establishing the [*security context*](../secgloss/s-gly.md).</span></span>

<span data-ttu-id="067bf-107">Para obtener información sobre el uso de esta función con un [*proveedor de compatibilidad de seguridad*](../secgloss/s-gly.md) (SSP) específico, vea los temas siguientes.</span><span class="sxs-lookup"><span data-stu-id="067bf-107">For information about using this function with a specific [*security support provider*](../secgloss/s-gly.md) (SSP), see the following topics.</span></span>



| <span data-ttu-id="067bf-108">Tema</span><span class="sxs-lookup"><span data-stu-id="067bf-108">Topic</span></span>                                                                          | <span data-ttu-id="067bf-109">Descripción</span><span class="sxs-lookup"><span data-stu-id="067bf-109">Description</span></span>                                                                                                                                                                                                                                                                      |
|--------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="067bf-110">**AcceptSecurityContext (CredSSP)**</span><span class="sxs-lookup"><span data-stu-id="067bf-110">**AcceptSecurityContext (CredSSP)**</span></span>](acceptsecuritycontext--credssp.md)     | <span data-ttu-id="067bf-111">Permite que el componente de servidor de una aplicación de transporte establezca un [*contexto de seguridad*](../secgloss/s-gly.md) entre el servidor y un cliente remoto mediante el proveedor de compatibilidad para seguridad de credenciales (CredSSP).</span><span class="sxs-lookup"><span data-stu-id="067bf-111">Allows the server component of a transport application establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client by using Credential Security Support Provider (CredSSP).</span></span><br/> |
| [<span data-ttu-id="067bf-112">**AcceptSecurityContext (Resumen)**</span><span class="sxs-lookup"><span data-stu-id="067bf-112">**AcceptSecurityContext (Digest)**</span></span>](acceptsecuritycontext--digest.md)       | <span data-ttu-id="067bf-113">Habilita el componente de servidor de una aplicación de transporte para establecer un [*contexto de seguridad*](../secgloss/s-gly.md) entre el servidor y un cliente remoto que usa la síntesis.</span><span class="sxs-lookup"><span data-stu-id="067bf-113">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Digest.</span></span><br/>                                                                                                                  |
| [<span data-ttu-id="067bf-114">**AcceptSecurityContext (Kerberos)**</span><span class="sxs-lookup"><span data-stu-id="067bf-114">**AcceptSecurityContext (Kerberos)**</span></span>](acceptsecuritycontext--kerberos.md)   | <span data-ttu-id="067bf-115">Habilita el componente de servidor de una aplicación de transporte para establecer un [*contexto de seguridad*](../secgloss/s-gly.md) entre el servidor y un cliente remoto que usa Kerberos.</span><span class="sxs-lookup"><span data-stu-id="067bf-115">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Kerberos.</span></span><br/>                                                                                                                |
| [<span data-ttu-id="067bf-116">**AcceptSecurityContext (Negotiate)**</span><span class="sxs-lookup"><span data-stu-id="067bf-116">**AcceptSecurityContext (Negotiate)**</span></span>](acceptsecuritycontext--negotiate.md) | <span data-ttu-id="067bf-117">Habilita el componente de servidor de una aplicación de transporte para establecer un [*contexto de seguridad*](../secgloss/s-gly.md) entre el servidor y un cliente remoto que utiliza Negotiate.</span><span class="sxs-lookup"><span data-stu-id="067bf-117">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Negotiate.</span></span><br/>                                                                                                               |
| [<span data-ttu-id="067bf-118">**AcceptSecurityContext (NTLM)**</span><span class="sxs-lookup"><span data-stu-id="067bf-118">**AcceptSecurityContext (NTLM)**</span></span>](acceptsecuritycontext--ntlm.md)           | <span data-ttu-id="067bf-119">Habilita el componente de servidor de una aplicación de transporte para establecer un [*contexto de seguridad*](../secgloss/s-gly.md) entre el servidor y un cliente remoto que usa NTLM.</span><span class="sxs-lookup"><span data-stu-id="067bf-119">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using NTLM.</span></span><br/>                                                                                                                    |
| [<span data-ttu-id="067bf-120">**AcceptSecurityContext (Schannel)**</span><span class="sxs-lookup"><span data-stu-id="067bf-120">**AcceptSecurityContext (Schannel)**</span></span>](acceptsecuritycontext--schannel.md)   | <span data-ttu-id="067bf-121">Habilita el componente de servidor de una aplicación de transporte para establecer un [*contexto de seguridad*](../secgloss/s-gly.md) entre el servidor y un cliente remoto que usa Schannel.</span><span class="sxs-lookup"><span data-stu-id="067bf-121">Enables the server component of a transport application to establish a [*security context*](../secgloss/s-gly.md) between the server and a remote client that is using Schannel.</span></span><br/>                                                                                                                |



 

## <a name="syntax"></a><span data-ttu-id="067bf-122">Sintaxis</span><span class="sxs-lookup"><span data-stu-id="067bf-122">Syntax</span></span>


```C++
SECURITY_STATUS SEC_Entry AcceptSecurityContext(
  _In_opt_    PCredHandle    phCredential,
  _Inout_opt_ PCtxtHandle    phContext,
  _In_opt_    PSecBufferDesc pInput,
  _In_        ULONG          fContextReq,
  _In_        ULONG          TargetDataRep,
  _Inout_opt_ PCtxtHandle    phNewContext,
  _Inout_opt_ PSecBufferDesc pOutput,
  _Out_       PULONG         pfContextAttr,
  _Out_opt_   PTimeStamp     ptsExpiry
);
```



## <a name="parameters"></a><span data-ttu-id="067bf-123">Parámetros</span><span class="sxs-lookup"><span data-stu-id="067bf-123">Parameters</span></span>

<dl> <dt>

<span data-ttu-id="067bf-124">*phCredential* \[ en, opcional\]</span><span class="sxs-lookup"><span data-stu-id="067bf-124">*phCredential* \[in, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="067bf-125">Identificador de las credenciales del servidor.</span><span class="sxs-lookup"><span data-stu-id="067bf-125">A handle to the credentials of the server.</span></span> <span data-ttu-id="067bf-126">El servidor llama a la función [**AcquireCredentialsHandle (general)**](acquirecredentialshandle--general.md) con el marcador de SECPKG \_ CRED \_ entrante o SECPKG \_ CRED \_ ambos establecidos para recuperar este identificador.</span><span class="sxs-lookup"><span data-stu-id="067bf-126">The server calls the [**AcquireCredentialsHandle (General)**](acquirecredentialshandle--general.md) function with either the SECPKG\_CRED\_INBOUND or SECPKG\_CRED\_BOTH flag set to retrieve this handle.</span></span>

</dd> <dt>

<span data-ttu-id="067bf-127">*phContext* \[ in, out\]</span><span class="sxs-lookup"><span data-stu-id="067bf-127">*phContext* \[in, out\]</span></span>
</dt> <dd>

<span data-ttu-id="067bf-128">Puntero a una estructura [CtxtHandle](sspi-handles.md) .</span><span class="sxs-lookup"><span data-stu-id="067bf-128">A pointer to a [CtxtHandle](sspi-handles.md) structure.</span></span> <span data-ttu-id="067bf-129">En la primera llamada a **AcceptSecurityContext (general)**, este puntero es **null**.</span><span class="sxs-lookup"><span data-stu-id="067bf-129">On the first call to **AcceptSecurityContext (General)**, this pointer is **NULL**.</span></span> <span data-ttu-id="067bf-130">En las llamadas posteriores, *phContext* es el identificador del contexto parcialmente formado que se devolvió en el parámetro *phNewContext* por la primera llamada.</span><span class="sxs-lookup"><span data-stu-id="067bf-130">On subsequent calls, *phContext* is the handle to the partially formed context that was returned in the *phNewContext* parameter by the first call.</span></span>

</dd> <dt>

<span data-ttu-id="067bf-131">*pInput* \[ en, opcional\]</span><span class="sxs-lookup"><span data-stu-id="067bf-131">*pInput* \[in, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="067bf-132">Puntero a una estructura [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) generada por una llamada de cliente a [**InitializeSecurityContext (general)**](initializesecuritycontext--general.md) que contiene el descriptor de búfer de entrada.</span><span class="sxs-lookup"><span data-stu-id="067bf-132">A pointer to a [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) structure generated by a client call to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) that contains the input buffer descriptor.</span></span>

<span data-ttu-id="067bf-133">Cuando se usa Schannel SSP, el primer búfer debe ser del tipo SECBUFFER \_ token y contener el token de seguridad recibido del cliente.</span><span class="sxs-lookup"><span data-stu-id="067bf-133">When using the Schannel SSP, the first buffer must be of type SECBUFFER\_TOKEN and contain the security token received from the client.</span></span> <span data-ttu-id="067bf-134">El segundo búfer debe ser de tipo SECBUFFER \_ vacío.</span><span class="sxs-lookup"><span data-stu-id="067bf-134">The second buffer should be of type SECBUFFER\_EMPTY.</span></span>

<span data-ttu-id="067bf-135">Al usar los SSP Negotiate, Kerberos o NTLM, se puede especificar la información de enlace de canal pasando una estructura [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) de los **\_ \_ enlaces de canal** de tipo SecBuffer, además de los búferes generados por la llamada a la función [**InitializeSecurityContext (general)**](initializesecuritycontext--general.md) .</span><span class="sxs-lookup"><span data-stu-id="067bf-135">When using the Negotiate, Kerberos, or NTLM SSPs, channel binding information can be specified by passing in a [**SecBuffer**](/windows/win32/api/sspi/ns-sspi-secbuffer) structure of type **SECBUFFER\_CHANNEL\_BINDINGS** in addition to the buffers generated by the call to the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function.</span></span> <span data-ttu-id="067bf-136">La información de enlace del canal para el búfer de enlace de canal se puede obtener llamando a la función [**QueryContextAttributes (Schannel)**](querycontextattributes--schannel.md) en el contexto de Schannel que el cliente usó para autenticar.</span><span class="sxs-lookup"><span data-stu-id="067bf-136">The channel binding information for the channel binding buffer can be obtained by calling the [**QueryContextAttributes (Schannel)**](querycontextattributes--schannel.md) function on the Schannel context the client used to authenticate.</span></span>

</dd> <dt>

<span data-ttu-id="067bf-137">*fContextReq* \[ de\]</span><span class="sxs-lookup"><span data-stu-id="067bf-137">*fContextReq* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="067bf-138">Marcas de bits que especifican los atributos requeridos por el servidor para establecer el contexto.</span><span class="sxs-lookup"><span data-stu-id="067bf-138">Bit flags that specify the attributes required by the server to establish the context.</span></span> <span data-ttu-id="067bf-139">**Las marcas de bits** se pueden combinar mediante operaciones OR bit a bit.</span><span class="sxs-lookup"><span data-stu-id="067bf-139">Bit flags can be combined by using bitwise-**OR** operations.</span></span> <span data-ttu-id="067bf-140">Este parámetro puede ser uno o varios de los valores siguientes.</span><span class="sxs-lookup"><span data-stu-id="067bf-140">This parameter can be one or more of the following values.</span></span>



| <span data-ttu-id="067bf-141">Value</span><span class="sxs-lookup"><span data-stu-id="067bf-141">Value</span></span>                                                                                                                                                                                                                                          | <span data-ttu-id="067bf-142">Significado</span><span class="sxs-lookup"><span data-stu-id="067bf-142">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="ASC_REQ_ALLOCATE_MEMORY"></span><span id="asc_req_allocate_memory"></span><dl> <span data-ttu-id="067bf-143"><dt>**ASC \_ req \_ asignar \_ memoria**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-143"><dt>**ASC\_REQ\_ALLOCATE\_MEMORY**</dt></span></span> </dl>                                                  | <span data-ttu-id="067bf-144">Digest y Schannel asignarán los búferes de salida automáticamente.</span><span class="sxs-lookup"><span data-stu-id="067bf-144">Digest and Schannel will allocate output buffers for you.</span></span> <span data-ttu-id="067bf-145">Cuando haya terminado de usar los búferes de salida, liberelos mediante una llamada a la función [**FreeContextBuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer) .</span><span class="sxs-lookup"><span data-stu-id="067bf-145">When you have finished using the output buffers, free them by calling the [**FreeContextBuffer**](/windows/win32/api/sspi/nf-sspi-freecontextbuffer) function.</span></span><br/>                                                                                                                                                                                                                                                                                |
| <span id="ASC_REQ_ALLOW_MISSING_BINDINGS"></span><span id="asc_req_allow_missing_bindings"></span><dl> <span data-ttu-id="067bf-146"><dt>**ASC \_ req \_ permitir \_ enlaces que faltan \_**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-146"><dt>**ASC\_REQ\_ALLOW\_MISSING\_BINDINGS**</dt></span></span> </dl>                            | <span data-ttu-id="067bf-147">Indica que el resumen no requiere enlaces de canal para los canales internos y externos.</span><span class="sxs-lookup"><span data-stu-id="067bf-147">Indicates that Digest does not require channel bindings for both inner and outer channels.</span></span> <span data-ttu-id="067bf-148">Este valor se utiliza por compatibilidad con versiones anteriores cuando no se conoce la compatibilidad con el enlace de canal de extremo.</span><span class="sxs-lookup"><span data-stu-id="067bf-148">This value is used for backward compatibility when support for endpoint channel binding is not known.</span></span><br/> <span data-ttu-id="067bf-149">Este valor es mutuamente excluyente con los **\_ enlaces de \_ proxy \_ de REQ**.</span><span class="sxs-lookup"><span data-stu-id="067bf-149">This value is mutually exclusive with **ASC\_REQ\_PROXY\_BINDINGS**.</span></span><br/> <span data-ttu-id="067bf-150">Este valor solo es compatible con el SSP de síntesis.</span><span class="sxs-lookup"><span data-stu-id="067bf-150">This value is supported only by the Digest SSP.</span></span><br/> <span data-ttu-id="067bf-151">**Windows server 2008, Windows Vista, Windows server 2003 y Windows XP:** Este valor no se admite.</span><span class="sxs-lookup"><span data-stu-id="067bf-151">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** This value is not supported.</span></span><br/> <br/> |
| <span id="ASC_REQ_CONFIDENTIALITY"></span><span id="asc_req_confidentiality"></span><dl> <span data-ttu-id="067bf-152"><dt>**\_confidencialidad de REQ. \_**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-152"><dt>**ASC\_REQ\_CONFIDENTIALITY**</dt></span></span> </dl>                                                   | <span data-ttu-id="067bf-153">Cifrar y descifrar mensajes.</span><span class="sxs-lookup"><span data-stu-id="067bf-153">Encrypt and decrypt messages.</span></span> <br/> <span data-ttu-id="067bf-154">El SSP de síntesis solo admite esta marca para SASL.</span><span class="sxs-lookup"><span data-stu-id="067bf-154">The Digest SSP supports this flag for SASL only.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="ASC_REQ_CONNECTION"></span><span id="asc_req_connection"></span><dl> <span data-ttu-id="067bf-155"><dt>**\_conexión de REQ de ASC \_**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-155"><dt>**ASC\_REQ\_CONNECTION**</dt></span></span> </dl>                                                                  | <span data-ttu-id="067bf-156">El [*contexto de seguridad*](../secgloss/s-gly.md) no controlará los mensajes de formato.</span><span class="sxs-lookup"><span data-stu-id="067bf-156">The [*security context*](../secgloss/s-gly.md) will not handle formatting messages.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="ASC_REQ_DELEGATE"></span><span id="asc_req_delegate"></span><dl> <span data-ttu-id="067bf-157"><dt>**\_delegado de REQ de ASC \_**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-157"><dt>**ASC\_REQ\_DELEGATE**</dt></span></span> </dl>                                                                        | <span data-ttu-id="067bf-158">El servidor puede suplantar al cliente.</span><span class="sxs-lookup"><span data-stu-id="067bf-158">The server is allowed to impersonate the client.</span></span> <span data-ttu-id="067bf-159">Válido para Kerberos.</span><span class="sxs-lookup"><span data-stu-id="067bf-159">Valid for Kerberos.</span></span> <span data-ttu-id="067bf-160">Omita esta marca para la [*delegación restringida*](../secgloss/c-gly.md).</span><span class="sxs-lookup"><span data-stu-id="067bf-160">Ignore this flag for [*constrained delegation*](../secgloss/c-gly.md).</span></span><br/>                                                                                                                                                                                                                                                             |
| <span id="ASC_REQ_EXTENDED_ERROR"></span><span id="asc_req_extended_error"></span><dl> <span data-ttu-id="067bf-161"><dt>**\_error de solicitud \_ EXTENDIda ASC \_**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-161"><dt>**ASC\_REQ\_EXTENDED\_ERROR**</dt></span></span> </dl>                                                     | <span data-ttu-id="067bf-162">Cuando se produzcan errores, se notificará a la parte remota.</span><span class="sxs-lookup"><span data-stu-id="067bf-162">When errors occur, the remote party will be notified.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span id="ASC_REQ_HTTP__0x10000000_"></span><span id="asc_req_http__0x10000000_"></span><span id="ASC_REQ_HTTP__0X10000000_"></span><dl> <span data-ttu-id="067bf-163"><dt>**ASC \_ req \_ http (0x10000000)**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-163"><dt>**ASC\_REQ\_HTTP (0x10000000)**</dt></span></span> </dl> | <span data-ttu-id="067bf-164">Usar síntesis para HTTP.</span><span class="sxs-lookup"><span data-stu-id="067bf-164">Use Digest for HTTP.</span></span> <span data-ttu-id="067bf-165">Omita esta marca para usar Digest como mecanismo SASL.</span><span class="sxs-lookup"><span data-stu-id="067bf-165">Omit this flag to use Digest as an SASL mechanism.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span id="ASC_REQ_INTEGRITY"></span><span id="asc_req_integrity"></span><dl> <span data-ttu-id="067bf-166"><dt>**\_integridad de REQ de ASC \_**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-166"><dt>**ASC\_REQ\_INTEGRITY**</dt></span></span> </dl>                                                                     | <span data-ttu-id="067bf-167">Firmar mensajes y comprobar firmas.</span><span class="sxs-lookup"><span data-stu-id="067bf-167">Sign messages and verify signatures.</span></span><br/> <span data-ttu-id="067bf-168">Schannel no admite esta marca.</span><span class="sxs-lookup"><span data-stu-id="067bf-168">Schannel does not support this flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                        |
| <span id="ASC_REQ_MUTUAL_AUTH"></span><span id="asc_req_mutual_auth"></span><dl> <span data-ttu-id="067bf-169"><dt>**\_ \_ autenticación mutua de \_ req**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-169"><dt>**ASC\_REQ\_MUTUAL\_AUTH**</dt></span></span> </dl>                                                              | <span data-ttu-id="067bf-170">El cliente debe proporcionar un certificado que se usará para la autenticación del cliente.</span><span class="sxs-lookup"><span data-stu-id="067bf-170">The client is required to supply a certificate to be used for client authentication.</span></span><br/> <span data-ttu-id="067bf-171">Esta marca solo es compatible con Schannel.</span><span class="sxs-lookup"><span data-stu-id="067bf-171">This flag is supported only by Schannel.</span></span><br/>                                                                                                                                                                                                                                                                                                                                    |
| <span id="ASC_REQ_PROXY_BINDINGS"></span><span id="asc_req_proxy_bindings"></span><dl> <span data-ttu-id="067bf-172"><dt>**\_enlaces de \_ proxy de REQ de ASC \_**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-172"><dt>**ASC\_REQ\_PROXY\_BINDINGS**</dt></span></span> </dl>                                                     | <span data-ttu-id="067bf-173">Indica que el Resumen requiere un enlace de canal.</span><span class="sxs-lookup"><span data-stu-id="067bf-173">Indicates that Digest requires channel binding.</span></span><br/> <span data-ttu-id="067bf-174">Este valor es mutuamente excluyente **con \_ ASC \_ req \_ permitir \_ enlaces que faltan**.</span><span class="sxs-lookup"><span data-stu-id="067bf-174">This value is mutually exclusive with **ASC\_REQ\_ALLOW\_MISSING\_BINDINGS**.</span></span><br/> <span data-ttu-id="067bf-175">Este valor solo es compatible con el SSP de síntesis.</span><span class="sxs-lookup"><span data-stu-id="067bf-175">This value is supported only by the Digest SSP.</span></span><br/> <span data-ttu-id="067bf-176">**Windows server 2008, Windows Vista, Windows server 2003 y Windows XP:** Este valor no se admite.</span><span class="sxs-lookup"><span data-stu-id="067bf-176">**Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:** This value is not supported.</span></span><br/> <br/>                                                                                                                                         |
| <span id="ASC_REQ_REPLAY_DETECT"></span><span id="asc_req_replay_detect"></span><dl> <span data-ttu-id="067bf-177"><dt>**\_detección de \_ repeticiones de ASC req \_**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-177"><dt>**ASC\_REQ\_REPLAY\_DETECT**</dt></span></span> </dl>                                                        | <span data-ttu-id="067bf-178">Detectar paquetes reproducidos.</span><span class="sxs-lookup"><span data-stu-id="067bf-178">Detect replayed packets.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="ASC_REQ_SEQUENCE_DETECT"></span><span id="asc_req_sequence_detect"></span><dl> <span data-ttu-id="067bf-179"><dt>**\_detección de \_ secuencia de REQ de ASC \_**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-179"><dt>**ASC\_REQ\_SEQUENCE\_DETECT**</dt></span></span> </dl>                                                  | <span data-ttu-id="067bf-180">Detecta mensajes recibidos de la secuencia.</span><span class="sxs-lookup"><span data-stu-id="067bf-180">Detect messages received out of sequence.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="ASC_REQ_STREAM"></span><span id="asc_req_stream"></span><dl> <span data-ttu-id="067bf-181"><dt>**\_flujo de REQ de ASC \_**</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-181"><dt>**ASC\_REQ\_STREAM**</dt></span></span> </dl>                                                                              | <span data-ttu-id="067bf-182">Admitir una conexión orientada a flujos.</span><span class="sxs-lookup"><span data-stu-id="067bf-182">Support a stream-oriented connection.</span></span><br/> <span data-ttu-id="067bf-183">Esta marca solo es compatible con Schannel.</span><span class="sxs-lookup"><span data-stu-id="067bf-183">This flag is supported only by Schannel.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                   |



 

<span data-ttu-id="067bf-184">Para ver posibles marcas de atributo y su significado, vea [requisitos de contexto](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="067bf-184">For possible attribute flags and their meanings, see [Context Requirements](context-requirements.md).</span></span> <span data-ttu-id="067bf-185">Las marcas usadas para este parámetro llevan el prefijo ASC \_ req, por ejemplo, \_ el \_ delegado de REQ.</span><span class="sxs-lookup"><span data-stu-id="067bf-185">Flags used for this parameter are prefixed with ASC\_REQ, for example, ASC\_REQ\_DELEGATE.</span></span>

<span data-ttu-id="067bf-186">Es posible que el cliente no admita los atributos solicitados.</span><span class="sxs-lookup"><span data-stu-id="067bf-186">The requested attributes may not be supported by the client.</span></span> <span data-ttu-id="067bf-187">Para obtener más información, consulte el parámetro *pfContextAttr* .</span><span class="sxs-lookup"><span data-stu-id="067bf-187">For more information, see the *pfContextAttr* parameter.</span></span>

</dd> <dt>

<span data-ttu-id="067bf-188">*TargetDataRep* \[ de\]</span><span class="sxs-lookup"><span data-stu-id="067bf-188">*TargetDataRep* \[in\]</span></span>
</dt> <dd>

<span data-ttu-id="067bf-189">Representación de los datos, como el orden de los bytes, en el destino.</span><span class="sxs-lookup"><span data-stu-id="067bf-189">The data representation, such as byte ordering, on the target.</span></span> <span data-ttu-id="067bf-190">Este parámetro puede ser \_ \_ DREP nativo de seguridad o DREP de seguridad de \_ red \_ .</span><span class="sxs-lookup"><span data-stu-id="067bf-190">This parameter can be either SECURITY\_NATIVE\_DREP or SECURITY\_NETWORK\_DREP.</span></span>

<span data-ttu-id="067bf-191">Este parámetro no se usa con Schannel o SSP de síntesis.</span><span class="sxs-lookup"><span data-stu-id="067bf-191">This parameter is not used with Schannel or Digest SSPs.</span></span> <span data-ttu-id="067bf-192">Al usar Schannel o SSP de síntesis, especifique cero para este parámetro.</span><span class="sxs-lookup"><span data-stu-id="067bf-192">When you use Schannel or Digest SSPs, specify zero for this parameter.</span></span>

</dd> <dt>

<span data-ttu-id="067bf-193">*phNewContext* \[ in, out, opcional\]</span><span class="sxs-lookup"><span data-stu-id="067bf-193">*phNewContext* \[in, out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="067bf-194">Puntero a una estructura [CtxtHandle](sspi-handles.md) .</span><span class="sxs-lookup"><span data-stu-id="067bf-194">A pointer to a [CtxtHandle](sspi-handles.md) structure.</span></span> <span data-ttu-id="067bf-195">En la primera llamada a **AcceptSecurityContext (general)**, este puntero recibe el nuevo identificador de contexto.</span><span class="sxs-lookup"><span data-stu-id="067bf-195">On the first call to **AcceptSecurityContext (General)**, this pointer receives the new context handle.</span></span> <span data-ttu-id="067bf-196">En las llamadas posteriores, *phNewContext* puede ser el mismo que el identificador especificado en el parámetro *phContext* .</span><span class="sxs-lookup"><span data-stu-id="067bf-196">On subsequent calls, *phNewContext* can be the same as the handle specified in the *phContext* parameter.</span></span>

</dd> <dt>

<span data-ttu-id="067bf-197">*pOutput* \[ in, out, opcional\]</span><span class="sxs-lookup"><span data-stu-id="067bf-197">*pOutput* \[in, out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="067bf-198">Puntero a una estructura [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) que contiene el descriptor del búfer de salida.</span><span class="sxs-lookup"><span data-stu-id="067bf-198">A pointer to a [**SecBufferDesc**](/windows/win32/api/sspi/ns-sspi-secbufferdesc) structure that contains the output buffer descriptor.</span></span> <span data-ttu-id="067bf-199">Este búfer se envía al cliente para la entrada en llamadas adicionales a [**InitializeSecurityContext (general)**](initializesecuritycontext--general.md).</span><span class="sxs-lookup"><span data-stu-id="067bf-199">This buffer is sent to the client for input into additional calls to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md).</span></span> <span data-ttu-id="067bf-200">Se puede generar un búfer de salida aunque la función devuelva SEC \_ E \_ Aceptar.</span><span class="sxs-lookup"><span data-stu-id="067bf-200">An output buffer may be generated even if the function returns SEC\_E\_OK.</span></span> <span data-ttu-id="067bf-201">Cualquier búfer generado debe volver a enviarse a la aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="067bf-201">Any buffer generated must be sent back to the client application.</span></span>

<span data-ttu-id="067bf-202">Cuando se usa Schannel, en la salida, este búfer recibe un token para el [*contexto de seguridad*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="067bf-202">When using Schannel, on output, this buffer receives a token for the [*security context*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="067bf-203">El token se debe enviar al cliente.</span><span class="sxs-lookup"><span data-stu-id="067bf-203">The token must be sent to the client.</span></span> <span data-ttu-id="067bf-204">La función también puede devolver un búfer de tipo SECBUFFER \_ extra.</span><span class="sxs-lookup"><span data-stu-id="067bf-204">The function can also return a buffer of type SECBUFFER\_EXTRA.</span></span> <span data-ttu-id="067bf-205">Además, el llamador debe pasar un búfer de tipo **SECBUFFER \_ Alert**.</span><span class="sxs-lookup"><span data-stu-id="067bf-205">In addition, the caller must pass in a buffer of type **SECBUFFER\_ALERT**.</span></span> <span data-ttu-id="067bf-206">En la salida, si se genera una alerta, este búfer contiene información sobre esa alerta y se produce un error en la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-206">On output, if an alert is generated, this buffer contains information about that alert, and the function fails.</span></span>

</dd> <dt>

<span data-ttu-id="067bf-207">*pfContextAttr* \[ enuncia\]</span><span class="sxs-lookup"><span data-stu-id="067bf-207">*pfContextAttr* \[out\]</span></span>
</dt> <dd>

<span data-ttu-id="067bf-208">Puntero a una variable que recibe un conjunto de marcadores de bits que indican los atributos del contexto establecido.</span><span class="sxs-lookup"><span data-stu-id="067bf-208">A pointer to a variable that receives a set of bit flags that indicate the attributes of the established context.</span></span> <span data-ttu-id="067bf-209">Para obtener una descripción de los distintos atributos, vea [requisitos de contexto](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="067bf-209">For a description of the various attributes, see [Context Requirements](context-requirements.md).</span></span> <span data-ttu-id="067bf-210">Las marcas usadas para este parámetro tienen el prefijo ASC \_ RET, por ejemplo, el delegado de ASC \_ RET \_ .</span><span class="sxs-lookup"><span data-stu-id="067bf-210">Flags used for this parameter are prefixed with ASC\_RET, for example, ASC\_RET\_DELEGATE.</span></span>

<span data-ttu-id="067bf-211">No Compruebe los atributos relacionados con la seguridad hasta que la llamada a la función final se devuelva correctamente.</span><span class="sxs-lookup"><span data-stu-id="067bf-211">Do not check for security-related attributes until the final function call returns successfully.</span></span> <span data-ttu-id="067bf-212">Las marcas de atributo no relacionadas con la seguridad, como \_ la \_ marca ASC RET asignado \_ memoria, se pueden comprobar antes de la devolución final.</span><span class="sxs-lookup"><span data-stu-id="067bf-212">Attribute flags not related to security, such as the ASC\_RET\_ALLOCATED\_MEMORY flag, can be checked before the final return.</span></span>

</dd> <dt>

<span data-ttu-id="067bf-213">*ptsTimeStamp* \[ out, opcional\]</span><span class="sxs-lookup"><span data-stu-id="067bf-213">*ptsTimeStamp* \[out, optional\]</span></span>
</dt> <dd>

<span data-ttu-id="067bf-214">Puntero a una estructura de [**marca**](timestamp.md) de tiempo que recibe la hora de expiración del contexto.</span><span class="sxs-lookup"><span data-stu-id="067bf-214">A pointer to a [**TimeStamp**](timestamp.md) structure that receives the expiration time of the context.</span></span> <span data-ttu-id="067bf-215">Se recomienda que el [*paquete de seguridad*](../secgloss/s-gly.md) devuelva siempre este valor en la hora local.</span><span class="sxs-lookup"><span data-stu-id="067bf-215">We recommend that the [*security package*](../secgloss/s-gly.md) always return this value in local time.</span></span>

<span data-ttu-id="067bf-216">Este parámetro se establece en un tiempo máximo constante.</span><span class="sxs-lookup"><span data-stu-id="067bf-216">This parameter is set to a constant maximum time.</span></span> <span data-ttu-id="067bf-217">No hay ningún tiempo de expiración para las credenciales o el [*contexto de seguridad*](../secgloss/s-gly.md)implícita o cuando se usa el SSP de síntesis.</span><span class="sxs-lookup"><span data-stu-id="067bf-217">There is no expiration time for Digest [*security context*](../secgloss/s-gly.md)s or credentials or when using the Digest SSP.</span></span>

<span data-ttu-id="067bf-218">Esto es opcional cuando se usa el SSP de Schannel.</span><span class="sxs-lookup"><span data-stu-id="067bf-218">This is optional when using the Schannel SSP.</span></span> <span data-ttu-id="067bf-219">Cuando la parte remota ha proporcionado un certificado que se va a utilizar para la autenticación, este parámetro recibe la hora de expiración de ese certificado.</span><span class="sxs-lookup"><span data-stu-id="067bf-219">When the remote party has supplied a certificate to be used for authentication, this parameter receives the expiration time for that certificate.</span></span> <span data-ttu-id="067bf-220">Si no se ha proporcionado ningún certificado, se devuelve un valor de tiempo máximo.</span><span class="sxs-lookup"><span data-stu-id="067bf-220">If no certificate was supplied, a maximum time value is returned.</span></span>

> [!Note]  
> <span data-ttu-id="067bf-221">Hasta la última llamada del proceso de autenticación, la hora de expiración del contexto puede ser incorrecta porque se proporcionará más información en las fases posteriores de la negociación.</span><span class="sxs-lookup"><span data-stu-id="067bf-221">Until the last call of the authentication process, the expiration time for the context can be incorrect because more information will be provided during later stages of the negotiation.</span></span> <span data-ttu-id="067bf-222">Por lo tanto, *ptsTimeStamp* debe ser **null** hasta la última llamada a la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-222">Therefore, *ptsTimeStamp* must be **NULL** until the last call to the function.</span></span>

 

</dd> </dl>

## <a name="return-value"></a><span data-ttu-id="067bf-223">Valor devuelto</span><span class="sxs-lookup"><span data-stu-id="067bf-223">Return value</span></span>

<span data-ttu-id="067bf-224">Esta función devuelve uno de los valores siguientes.</span><span class="sxs-lookup"><span data-stu-id="067bf-224">This function returns one of the following values.</span></span>



<table><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><thead><tr class="header"><th><span data-ttu-id="067bf-225">Código o valor devuelto</span><span class="sxs-lookup"><span data-stu-id="067bf-225">Return code/value</span></span></th><th><span data-ttu-id="067bf-226">Descripción</span><span class="sxs-lookup"><span data-stu-id="067bf-226">Description</span></span></th></tr></thead><tbody><tr class="odd"><td><dl> <span data-ttu-id="067bf-227"><dt><strong>SEC_E_BAD_BINDINGS</strong></dt> <dt>0x80090346L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-227"><dt><strong>SEC_E_BAD_BINDINGS</strong></dt> <dt>0x80090346L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-228">Error en la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-228">The function failed.</span></span> <span data-ttu-id="067bf-229">No se ha satisfecho la Directiva de enlace de canal.</span><span class="sxs-lookup"><span data-stu-id="067bf-229">Channel binding policy was not satisfied.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="067bf-230"><dt><strong>SEC_E_INCOMPLETE_MESSAGE</strong></dt> <dt>0x80090318L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-230"><dt><strong>SEC_E_INCOMPLETE_MESSAGE</strong></dt> <dt>0x80090318L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-231">La función se ha realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="067bf-231">The function succeeded.</span></span> <span data-ttu-id="067bf-232">Los datos del búfer de entrada están incompletos.</span><span class="sxs-lookup"><span data-stu-id="067bf-232">The data in the input buffer is incomplete.</span></span> <span data-ttu-id="067bf-233">La aplicación debe leer datos adicionales del cliente y llamar de nuevo a [<strong>AcceptSecurityContext (general)</strong>] (AcceptSecurityContext--general.MD).</span><span class="sxs-lookup"><span data-stu-id="067bf-233">The application must read additional data from the client and call [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md) again.</span></span><br/> <span data-ttu-id="067bf-234">Este valor se puede devolver al usar el SSP de Schannel.</span><span class="sxs-lookup"><span data-stu-id="067bf-234">This value can be returned when using the Schannel SSP.</span></span> <span data-ttu-id="067bf-235">Para obtener más información acerca de este valor devuelto, vea [<strong>AcceptSecurityContext (Schannel)</strong>] (AcceptSecurityContext--Schannel.MD).</span><span class="sxs-lookup"><span data-stu-id="067bf-235">For more information about this return value, see [<strong>AcceptSecurityContext (Schannel)</strong>](acceptsecuritycontext--schannel.md).</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="067bf-236"><dt><strong>SEC_E_INSUFFICIENT_MEMORY</strong></dt> <dt>0x80090300L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-236"><dt><strong>SEC_E_INSUFFICIENT_MEMORY</strong></dt> <dt>0x80090300L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-237">Error en la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-237">The function failed.</span></span> <span data-ttu-id="067bf-238">No hay suficiente memoria disponible para completar la acción solicitada.</span><span class="sxs-lookup"><span data-stu-id="067bf-238">There is not enough memory available to complete the requested action.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="067bf-239"><dt><strong>SEC_E_INTERNAL_ERROR</strong></dt> <dt>0x80090304L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-239"><dt><strong>SEC_E_INTERNAL_ERROR</strong></dt> <dt>0x80090304L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-240">Error en la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-240">The function failed.</span></span> <span data-ttu-id="067bf-241">Error que no se ha asignado a un código de error SSPI.</span><span class="sxs-lookup"><span data-stu-id="067bf-241">An error occurred that did not map to an SSPI error code.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="067bf-242"><dt><strong>SEC_E_INVALID_HANDLE</strong></dt> <dt>0x80100003L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-242"><dt><strong>SEC_E_INVALID_HANDLE</strong></dt> <dt>0x80100003L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-243">Error en la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-243">The function failed.</span></span> <span data-ttu-id="067bf-244">El identificador pasado a la función no es válido.</span><span class="sxs-lookup"><span data-stu-id="067bf-244">The handle passed to the function is not valid.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="067bf-245"><dt><strong>SEC_E_INVALID_TOKEN</strong></dt> <dt>0x80090308L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-245"><dt><strong>SEC_E_INVALID_TOKEN</strong></dt> <dt>0x80090308L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-246">Error en la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-246">The function failed.</span></span> <span data-ttu-id="067bf-247">El token que se ha pasado a la función no es válido.</span><span class="sxs-lookup"><span data-stu-id="067bf-247">The token passed to the function is not valid.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="067bf-248"><dt><strong>SEC_E_LOGON_DENIED</strong></dt> <dt>0x8009030CL</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-248"><dt><strong>SEC_E_LOGON_DENIED</strong></dt> <dt>0x8009030CL</dt> </span></span></dl></td><td><span data-ttu-id="067bf-249">Error de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="067bf-249">The logon failed.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="067bf-250"><dt><strong>SEC_E_NO_AUTHENTICATING_AUTHORITY</strong></dt> <dt>0x80090311L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-250"><dt><strong>SEC_E_NO_AUTHENTICATING_AUTHORITY</strong></dt> <dt>0x80090311L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-251">Error en la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-251">The function failed.</span></span> <span data-ttu-id="067bf-252">No se pudo establecer contacto con ninguna autoridad para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="067bf-252">No authority could be contacted for authentication.</span></span> <span data-ttu-id="067bf-253">Esto puede deberse a las siguientes condiciones:</span><span class="sxs-lookup"><span data-stu-id="067bf-253">This could be due to the following conditions:</span></span><br/><ul><li><span data-ttu-id="067bf-254">El nombre de dominio de la entidad de autenticación no es correcto.</span><span class="sxs-lookup"><span data-stu-id="067bf-254">The domain name of the authenticating party is incorrect.</span></span></li><li><span data-ttu-id="067bf-255">El dominio no está disponible.</span><span class="sxs-lookup"><span data-stu-id="067bf-255">The domain is unavailable.</span></span></li><li><span data-ttu-id="067bf-256">Error en la relación de confianza.</span><span class="sxs-lookup"><span data-stu-id="067bf-256">The trust relationship has failed.</span></span></li></ul></td></tr><tr class="odd"><td><dl> <span data-ttu-id="067bf-257"><dt><strong>SEC_E_NO_CREDENTIALS</strong></dt> <dt>0x8009030EL</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-257"><dt><strong>SEC_E_NO_CREDENTIALS</strong></dt> <dt>0x8009030EL</dt> </span></span></dl></td><td><span data-ttu-id="067bf-258">Error en la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-258">The function failed.</span></span> <span data-ttu-id="067bf-259">El identificador de credenciales especificado en el parámetro <em>phCredential</em> no es válido.</span><span class="sxs-lookup"><span data-stu-id="067bf-259">The credentials handle specified in the <em>phCredential</em> parameter is not valid.</span></span> <span data-ttu-id="067bf-260">Este valor se puede devolver cuando se usa la síntesis o el SSP de Schannel.</span><span class="sxs-lookup"><span data-stu-id="067bf-260">This value can be returned when using the Digest or Schannel SSP.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="067bf-261"><dt><strong>SEC_E_OK</strong></dt> <dt>0x00000000L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-261"><dt><strong>SEC_E_OK</strong></dt> <dt>0x00000000L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-262">La función se ha realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="067bf-262">The function succeeded.</span></span> <span data-ttu-id="067bf-263">Se aceptó el [*contexto de seguridad*](../secgloss/s-gly.md) recibido del cliente.</span><span class="sxs-lookup"><span data-stu-id="067bf-263">The [*security context*](../secgloss/s-gly.md) received from the client was accepted.</span></span> <span data-ttu-id="067bf-264">Si la función generó un token de salida, se debe enviar al proceso del cliente.</span><span class="sxs-lookup"><span data-stu-id="067bf-264">If an output token was generated by the function, it must be sent to the client process.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="067bf-265"><dt><strong>SEC_E_SECURITY_QOS_FAILED</strong></dt> <dt>0x80090332L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-265"><dt><strong>SEC_E_SECURITY_QOS_FAILED</strong></dt> <dt>0x80090332L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-266">Error en la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-266">The function failed.</span></span> <span data-ttu-id="067bf-267">Se especificó una marca de atributo de contexto que no es válida en el parámetro <em>fContextReq</em> .</span><span class="sxs-lookup"><span data-stu-id="067bf-267">A context attribute flag that is not valid was specified in the <em>fContextReq</em> parameter.</span></span> <span data-ttu-id="067bf-268">Este valor se puede devolver cuando se usa el SSP de síntesis.</span><span class="sxs-lookup"><span data-stu-id="067bf-268">This value can be returned when using the Digest SSP.</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="067bf-269"><dt><strong>SEC_E_UNSUPPORTED_FUNCTION</strong></dt> <dt>0x80090302L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-269"><dt><strong>SEC_E_UNSUPPORTED_FUNCTION</strong></dt> <dt>0x80090302L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-270">Error en la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-270">The function failed.</span></span> <span data-ttu-id="067bf-271">Se especificó una marca de atributo de contexto que no es válida (ASC_REQ_DELEGATE o ASC_REQ_PROMPT_FOR_CREDS) en el parámetro <em>fContextReq</em> .</span><span class="sxs-lookup"><span data-stu-id="067bf-271">A context attribute flag that is not valid (ASC_REQ_DELEGATE or ASC_REQ_PROMPT_FOR_CREDS) was specified in the <em>fContextReq</em> parameter.</span></span> <span data-ttu-id="067bf-272">Este valor se puede devolver al usar el SSP de Schannel.</span><span class="sxs-lookup"><span data-stu-id="067bf-272">This value can be returned when using the Schannel SSP.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="067bf-273"><dt><strong>SEC_I_COMPLETE_AND_CONTINUE</strong></dt> <dt>0x00090314L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-273"><dt><strong>SEC_I_COMPLETE_AND_CONTINUE</strong></dt> <dt>0x00090314L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-274">La función se ha realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="067bf-274">The function succeeded.</span></span> <span data-ttu-id="067bf-275">El servidor debe llamar a [<strong>CompleteAuthToken</strong>] (/Windows/Win32/API/SSPI/NF-SSPI-completeauthtoken) y pasar el token de salida al cliente.</span><span class="sxs-lookup"><span data-stu-id="067bf-275">The server must call [<strong>CompleteAuthToken</strong>](/windows/win32/api/sspi/nf-sspi-completeauthtoken) and pass the output token to the client.</span></span> <span data-ttu-id="067bf-276">Después, el servidor espera un token de devolución del cliente y, a continuación, realiza otra llamada a [<strong>AcceptSecurityContext (general)</strong>] (AcceptSecurityContext--general.MD).</span><span class="sxs-lookup"><span data-stu-id="067bf-276">The server then waits for a return token from the client and then makes another call to [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md).</span></span> <br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="067bf-277"><dt><strong>SEC_I_COMPLETE_NEEDED</strong></dt> <dt>0x00090313L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-277"><dt><strong>SEC_I_COMPLETE_NEEDED</strong></dt> <dt>0x00090313L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-278">La función se ha realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="067bf-278">The function succeeded.</span></span> <span data-ttu-id="067bf-279">El servidor debe terminar de compilar el mensaje desde el cliente y, a continuación, llamar a la función [<strong>CompleteAuthToken</strong>] (/Windows/Win32/API/SSPI/NF-SSPI-completeauthtoken).</span><span class="sxs-lookup"><span data-stu-id="067bf-279">The server must finish building the message from the client and then call the [<strong>CompleteAuthToken</strong>](/windows/win32/api/sspi/nf-sspi-completeauthtoken) function.</span></span><br/></td></tr><tr class="odd"><td><dl> <span data-ttu-id="067bf-280"><dt><strong>SEC_I_CONTINUE_NEEDED</strong></dt> <dt>0x00090312L</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-280"><dt><strong>SEC_I_CONTINUE_NEEDED</strong></dt> <dt>0x00090312L</dt> </span></span></dl></td><td><span data-ttu-id="067bf-281">La función se ha realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="067bf-281">The function succeeded.</span></span> <span data-ttu-id="067bf-282">El servidor debe enviar el token de salida al cliente y esperar un token devuelto.</span><span class="sxs-lookup"><span data-stu-id="067bf-282">The server must send the output token to the client and wait for a returned token.</span></span> <span data-ttu-id="067bf-283">El token devuelto se debe pasar en <em>pInput</em> para otra llamada a [<strong>AcceptSecurityContext (general)</strong>] (AcceptSecurityContext--general.MD).</span><span class="sxs-lookup"><span data-stu-id="067bf-283">The returned token should be passed in <em>pInput</em> for another call to [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md).</span></span><br/></td></tr><tr class="even"><td><dl> <span data-ttu-id="067bf-284"><dt><strong>STATUS_LOGON_FAILURE</strong></dt> <dt>0xC000006DL</dt> </span><span class="sxs-lookup"><span data-stu-id="067bf-284"><dt><strong>STATUS_LOGON_FAILURE</strong></dt> <dt>0xC000006DL</dt> </span></span></dl></td><td><span data-ttu-id="067bf-285">Error en la función.</span><span class="sxs-lookup"><span data-stu-id="067bf-285">The function failed.</span></span> <span data-ttu-id="067bf-286">Se llamó a la función [<strong>AcceptSecurityContext (general)</strong>] (AcceptSecurityContext--general.MD) después de establecer el contexto especificado.</span><span class="sxs-lookup"><span data-stu-id="067bf-286">The [<strong>AcceptSecurityContext (General)</strong>](acceptsecuritycontext--general.md) function was called after the specified context was established.</span></span> <span data-ttu-id="067bf-287">Este valor se puede devolver cuando se usa el SSP de síntesis.</span><span class="sxs-lookup"><span data-stu-id="067bf-287">This value can be returned when using the Digest SSP.</span></span><br/></td></tr></tbody></table>



 

## <a name="remarks"></a><span data-ttu-id="067bf-288">Observaciones</span><span class="sxs-lookup"><span data-stu-id="067bf-288">Remarks</span></span>

<span data-ttu-id="067bf-289">La función **AcceptSecurityContext (general)** es el homólogo del servidor para la función [**InitializeSecurityContext (general)**](initializesecuritycontext--general.md) .</span><span class="sxs-lookup"><span data-stu-id="067bf-289">The **AcceptSecurityContext (General)** function is the server counterpart to the [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md) function.</span></span>

<span data-ttu-id="067bf-290">Cuando el servidor recibe una solicitud de un cliente, el servidor usa el parámetro *fContextReq* para especificar lo que requiere de la sesión.</span><span class="sxs-lookup"><span data-stu-id="067bf-290">When the server receives a request from a client, the server uses the *fContextReq* parameter to specify what it requires of the session.</span></span> <span data-ttu-id="067bf-291">De este modo, un servidor puede especificar que los clientes deben ser capaces de usar una sesión confidencial o comprobada por [*integridad*](../secgloss/i-gly.md), y puede rechazar clientes que no puedan satisfacer esa demanda.</span><span class="sxs-lookup"><span data-stu-id="067bf-291">In this fashion, a server can specify that clients must be capable of using a confidential or [*integrity*](../secgloss/i-gly.md)-checked session, and it can reject clients that cannot meet that demand.</span></span> <span data-ttu-id="067bf-292">Como alternativa, un servidor no puede necesitar nada y lo que el cliente puede proporcionar o requiera se devuelve en el parámetro *pfContextAttr* .</span><span class="sxs-lookup"><span data-stu-id="067bf-292">Alternatively, a server can require nothing, and whatever the client can provide or requires is returned in the *pfContextAttr* parameter.</span></span>

<span data-ttu-id="067bf-293">Para un paquete que admite la autenticación de varios tramos, como la autenticación mutua, la secuencia de llamada es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="067bf-293">For a package that supports multiple-leg authentication, such as mutual authentication, the calling sequence is as follows:</span></span>

1.  <span data-ttu-id="067bf-294">El cliente transmite un token al servidor.</span><span class="sxs-lookup"><span data-stu-id="067bf-294">The client transmits a token to the server.</span></span>
2.  <span data-ttu-id="067bf-295">El servidor llama a **AcceptSecurityContext (general)** la primera vez, que genera un token de respuesta que se envía al cliente.</span><span class="sxs-lookup"><span data-stu-id="067bf-295">The server calls **AcceptSecurityContext (General)** the first time, which generates a reply token that is then sent to the client.</span></span>
3.  <span data-ttu-id="067bf-296">El cliente recibe el token y lo pasa a [**InitializeSecurityContext (general)**](initializesecuritycontext--general.md).</span><span class="sxs-lookup"><span data-stu-id="067bf-296">The client receives the token and passes it to [**InitializeSecurityContext (General)**](initializesecuritycontext--general.md).</span></span> <span data-ttu-id="067bf-297">Si **InitializeSecurityContext (general)** devuelve sec \_ E \_ OK, se ha completado la autenticación mutua y se puede iniciar una sesión segura.</span><span class="sxs-lookup"><span data-stu-id="067bf-297">If **InitializeSecurityContext (General)** returns SEC\_E\_OK, mutual authentication has been completed and a secure session can begin.</span></span> <span data-ttu-id="067bf-298">Si **InitializeSecurityContext (general)** devuelve un código de error, finaliza la negociación de autenticación mutua.</span><span class="sxs-lookup"><span data-stu-id="067bf-298">If **InitializeSecurityContext (General)** returns an error code, the mutual authentication negotiation ends.</span></span> <span data-ttu-id="067bf-299">De lo contrario, el token de seguridad devuelto por **InitializeSecurityContext (general)** se envía al cliente y se repiten los pasos 2 y 3.</span><span class="sxs-lookup"><span data-stu-id="067bf-299">Otherwise, the security token returned by **InitializeSecurityContext (General)** is sent to the client, and steps 2 and 3 are repeated.</span></span>

<span data-ttu-id="067bf-300">Los parámetros *fContextReq* y *pfContextAttr* son máscaras de texto que representan varios atributos de contexto.</span><span class="sxs-lookup"><span data-stu-id="067bf-300">The *fContextReq* and *pfContextAttr* parameters are bitmasks that represent various context attributes.</span></span> <span data-ttu-id="067bf-301">Para obtener una descripción de los distintos atributos, vea [requisitos de contexto](context-requirements.md).</span><span class="sxs-lookup"><span data-stu-id="067bf-301">For a description of the various attributes, see [Context Requirements](context-requirements.md).</span></span>

> [!Note]  
> <span data-ttu-id="067bf-302">El parámetro *pfContextAttr* es válido en cualquier devolución correcta, pero solo en la devolución correcta final debe examinar las marcas que pertenecen a los aspectos de seguridad del contexto.</span><span class="sxs-lookup"><span data-stu-id="067bf-302">The *pfContextAttr* parameter is valid on any successful return, but only on the final successful return should you examine the flags pertaining to security aspects of the context.</span></span> <span data-ttu-id="067bf-303">Las devoluciones intermedias se pueden establecer, por ejemplo, la \_ \_ marca de memoria asignada de ISC \_ .</span><span class="sxs-lookup"><span data-stu-id="067bf-303">Intermediate returns can set, for example, the ISC\_RET\_ALLOCATED\_MEMORY flag.</span></span>

 

<span data-ttu-id="067bf-304">El autor de la llamada es responsable de determinar si los atributos de contexto finales son suficientes.</span><span class="sxs-lookup"><span data-stu-id="067bf-304">The caller is responsible for determining whether the final context attributes are sufficient.</span></span> <span data-ttu-id="067bf-305">Si, por ejemplo, se solicitó la confidencialidad (cifrado), pero no se pudo establecer, algunas aplicaciones pueden optar por cerrar la conexión inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="067bf-305">If, for example, confidentiality (encryption) was requested, but could not be established, some applications may choose to shut down the connection immediately.</span></span> <span data-ttu-id="067bf-306">Si no se puede establecer el [*contexto de seguridad*](../secgloss/s-gly.md) , el servidor debe liberar el contexto creado parcialmente mediante una llamada a la función [**DeleteSecurityContext**](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="067bf-306">If the [*security context*](../secgloss/s-gly.md) cannot be established, the server must free the partially created context by calling the [**DeleteSecurityContext**](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext) function.</span></span> <span data-ttu-id="067bf-307">Para obtener información sobre cuándo se debe llamar a la función **DeleteSecurityContext** , vea **DeleteSecurityContext**.</span><span class="sxs-lookup"><span data-stu-id="067bf-307">For information about when to call the **DeleteSecurityContext** function, see **DeleteSecurityContext**.</span></span>

<span data-ttu-id="067bf-308">Una vez establecido el [*contexto de seguridad*](../secgloss/s-gly.md) , la aplicación de servidor puede usar la función [**QuerySecurityContextToken**](/windows/win32/api/sspi/nf-sspi-querysecuritycontexttoken) para recuperar un identificador de la cuenta de usuario a la que se asignó el certificado de cliente.</span><span class="sxs-lookup"><span data-stu-id="067bf-308">After the [*security context*](../secgloss/s-gly.md) has been established, the server application can use the [**QuerySecurityContextToken**](/windows/win32/api/sspi/nf-sspi-querysecuritycontexttoken) function to retrieve a handle to the user account to which the client certificate was mapped.</span></span> <span data-ttu-id="067bf-309">Además, el servidor puede usar la función [**ImpersonateSecurityContext**](/windows/win32/api/sspi/nf-sspi-impersonatesecuritycontext) para suplantar al usuario.</span><span class="sxs-lookup"><span data-stu-id="067bf-309">Also, the server can use the [**ImpersonateSecurityContext**](/windows/win32/api/sspi/nf-sspi-impersonatesecuritycontext) function to impersonate the user.</span></span>

## <a name="requirements"></a><span data-ttu-id="067bf-310">Requisitos</span><span class="sxs-lookup"><span data-stu-id="067bf-310">Requirements</span></span>



| <span data-ttu-id="067bf-311">Requisito</span><span class="sxs-lookup"><span data-stu-id="067bf-311">Requirement</span></span> | <span data-ttu-id="067bf-312">Value</span><span class="sxs-lookup"><span data-stu-id="067bf-312">Value</span></span> |
|-------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="067bf-313">Cliente mínimo compatible</span><span class="sxs-lookup"><span data-stu-id="067bf-313">Minimum supported client</span></span><br/> | <span data-ttu-id="067bf-314">Solo aplicaciones de escritorio de Windows XP \[\]</span><span class="sxs-lookup"><span data-stu-id="067bf-314">Windows XP \[desktop apps only\]</span></span><br/>                                                            |
| <span data-ttu-id="067bf-315">Servidor mínimo compatible</span><span class="sxs-lookup"><span data-stu-id="067bf-315">Minimum supported server</span></span><br/> | <span data-ttu-id="067bf-316">Solo aplicaciones de escritorio de Windows Server 2003 \[\]</span><span class="sxs-lookup"><span data-stu-id="067bf-316">Windows Server 2003 \[desktop apps only\]</span></span><br/>                                                   |
| <span data-ttu-id="067bf-317">Encabezado</span><span class="sxs-lookup"><span data-stu-id="067bf-317">Header</span></span><br/>                   | <dl> <span data-ttu-id="067bf-318"><dt>SSPI. h (incluir Security. h)</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-318"><dt>Sspi.h (include Security.h)</dt></span></span> </dl> |
| <span data-ttu-id="067bf-319">Biblioteca</span><span class="sxs-lookup"><span data-stu-id="067bf-319">Library</span></span><br/>                  | <dl> <span data-ttu-id="067bf-320"><dt>SECUR32. lib</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-320"><dt>Secur32.lib</dt></span></span> </dl>                 |
| <span data-ttu-id="067bf-321">Archivo DLL</span><span class="sxs-lookup"><span data-stu-id="067bf-321">DLL</span></span><br/>                      | <dl> <span data-ttu-id="067bf-322"><dt>Secur32.dll</dt></span><span class="sxs-lookup"><span data-stu-id="067bf-322"><dt>Secur32.dll</dt></span></span> </dl>                 |



## <a name="see-also"></a><span data-ttu-id="067bf-323">Vea también</span><span class="sxs-lookup"><span data-stu-id="067bf-323">See also</span></span>

<dl> <dt>

[<span data-ttu-id="067bf-324">Funciones SSPI</span><span class="sxs-lookup"><span data-stu-id="067bf-324">SSPI Functions</span></span>](authentication-functions.md#sspi-functions)
</dt> <dt>

[<span data-ttu-id="067bf-325">**DeleteSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="067bf-325">**DeleteSecurityContext**</span></span>](/windows/win32/api/sspi/nf-sspi-deletesecuritycontext)
</dt> <dt>

[<span data-ttu-id="067bf-326">**InitializeSecurityContext (general)**</span><span class="sxs-lookup"><span data-stu-id="067bf-326">**InitializeSecurityContext (General)**</span></span>](initializesecuritycontext--general.md)
</dt> </dl>

 

 
