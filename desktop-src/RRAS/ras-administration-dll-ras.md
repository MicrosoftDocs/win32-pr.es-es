---
title: DLL de administración de RAS
description: El archivo DLL exporta las funciones a las que el servidor RAS llama cada vez que un usuario intenta conectarse o desconectarse.
ms.assetid: 014ab85d-8924-4c7a-89ed-f83e75318ca6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f0908032e0916f0937e964408b1551d3f1515dea
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/23/2019
ms.locfileid: "104358520"
---
# <a name="ras-administration-dll"></a><span data-ttu-id="b8df6-103">DLL de administración de RAS</span><span class="sxs-lookup"><span data-stu-id="b8df6-103">RAS administration DLL</span></span>

<span data-ttu-id="b8df6-104">El archivo DLL exporta las funciones a las que el servidor RAS llama cada vez que un usuario intenta conectarse o desconectarse.</span><span class="sxs-lookup"><span data-stu-id="b8df6-104">The DLL exports functions that the RAS server calls whenever a user tries to connect or disconnect.</span></span> <span data-ttu-id="b8df6-105">Puede usar el archivo DLL para realizar las siguientes funciones administrativas:</span><span class="sxs-lookup"><span data-stu-id="b8df6-105">You can use the DLL to perform the following administrative functions:</span></span>

-   <span data-ttu-id="b8df6-106">Decida si desea permitir que un usuario se conecte al servidor.</span><span class="sxs-lookup"><span data-stu-id="b8df6-106">Decide whether to allow a user to connect to the server.</span></span> <span data-ttu-id="b8df6-107">Esto puede proporcionar una comprobación de seguridad además de la autenticación de usuario de RAS estándar.</span><span class="sxs-lookup"><span data-stu-id="b8df6-107">This can provide a security check in addition to the standard RAS user authentication.</span></span>
-   <span data-ttu-id="b8df6-108">Registra la hora a la que cada usuario se conecta y desconecta del servidor.</span><span class="sxs-lookup"><span data-stu-id="b8df6-108">Record the time that each user connects to and disconnects from the server.</span></span> <span data-ttu-id="b8df6-109">Esto puede ser útil para fines de facturación o auditoría.</span><span class="sxs-lookup"><span data-stu-id="b8df6-109">This can be useful for billing or auditing purposes.</span></span>
-   <span data-ttu-id="b8df6-110">Asigne una dirección IP a cada usuario.</span><span class="sxs-lookup"><span data-stu-id="b8df6-110">Assign an IP address to each user.</span></span> <span data-ttu-id="b8df6-111">Esto puede ser útil por motivos de seguridad para asignar la conexión de un usuario a un equipo específico.</span><span class="sxs-lookup"><span data-stu-id="b8df6-111">This can be useful for security purposes to map a user's connection to a specific computer.</span></span>

<span data-ttu-id="b8df6-112">Implemente las siguientes funciones al desarrollar un archivo DLL de administración del servidor RAS.</span><span class="sxs-lookup"><span data-stu-id="b8df6-112">Implement the following functions when developing a RAS server administration DLL.</span></span>

-   [<span data-ttu-id="b8df6-113">**RasAdminAcceptNewConnection**</span><span class="sxs-lookup"><span data-stu-id="b8df6-113">**RasAdminAcceptNewConnection**</span></span>](rasadminacceptnewconnection.md)
-   [<span data-ttu-id="b8df6-114">**RasAdminConnectionHangupNotification**</span><span class="sxs-lookup"><span data-stu-id="b8df6-114">**RasAdminConnectionHangupNotification**</span></span>](rasadminconnectionhangupnotification.md)
-   [<span data-ttu-id="b8df6-115">**RasAdminGetIpAddressForUser**</span><span class="sxs-lookup"><span data-stu-id="b8df6-115">**RasAdminGetIpAddressForUser**</span></span>](rasadmingetipaddressforuser.md)
-   [<span data-ttu-id="b8df6-116">**RasAdminReleaseIpAddress**</span><span class="sxs-lookup"><span data-stu-id="b8df6-116">**RasAdminReleaseIpAddress**</span></span>](rasadminreleaseipaddress.md)

<span data-ttu-id="b8df6-117">Un archivo DLL de administración de RAS debe implementar y exportar todas las funciones anteriores.</span><span class="sxs-lookup"><span data-stu-id="b8df6-117">A RAS administration DLL must implement and export all of the above functions.</span></span> <span data-ttu-id="b8df6-118">Si alguna de las funciones no está implementada, el servicio de acceso remoto no se iniciará.</span><span class="sxs-lookup"><span data-stu-id="b8df6-118">If any of the functions are not implemented, the remote access service will fail to start.</span></span>

<span data-ttu-id="b8df6-119">Las funciones [**RasAdminAcceptNewConnection**](rasadminacceptnewconnection.md) y [**RasAdminConnectionHangupNotification**](rasadminconnectionhangupnotification.md) permiten a la dll auditar las conexiones de usuario al servidor.</span><span class="sxs-lookup"><span data-stu-id="b8df6-119">The [**RasAdminAcceptNewConnection**](rasadminacceptnewconnection.md) and [**RasAdminConnectionHangupNotification**](rasadminconnectionhangupnotification.md) functions enable the DLL to audit user connections to the server.</span></span> <span data-ttu-id="b8df6-120">Un servidor RAS de Windows NT/Windows 2000 llama a la función **RasAdminAcceptNewConnection** cada vez que un usuario intenta conectarse.</span><span class="sxs-lookup"><span data-stu-id="b8df6-120">A Windows NT/Windows 2000 RAS server calls the **RasAdminAcceptNewConnection** function whenever a user tries to connect.</span></span> <span data-ttu-id="b8df6-121">La función puede impedir que el usuario se conecte.</span><span class="sxs-lookup"><span data-stu-id="b8df6-121">The function can prevent the user from connecting.</span></span> <span data-ttu-id="b8df6-122">También puede usar la función para generar una entrada en un registro para la facturación o la auditoría.</span><span class="sxs-lookup"><span data-stu-id="b8df6-122">You can also use the function to generate an entry in a log for billing or auditing.</span></span> <span data-ttu-id="b8df6-123">Cuando el usuario se desconecta, el servidor RAS llama a la función **RasAdminConnectionHangupNotification** , que puede registrar la hora a la que el usuario se desconectó.</span><span class="sxs-lookup"><span data-stu-id="b8df6-123">When the user disconnects, the RAS server calls the **RasAdminConnectionHangupNotification** function, which can log the time at which the user disconnected.</span></span>

<span data-ttu-id="b8df6-124">Una vez que el servidor RAS ha autenticado a un llamador, llama a la función [**RasAdminGetIpAddressForUser**](rasadmingetipaddressforuser.md) para obtener una dirección IP para el cliente remoto.</span><span class="sxs-lookup"><span data-stu-id="b8df6-124">After the RAS server has authenticated a caller, it calls the [**RasAdminGetIpAddressForUser**](rasadmingetipaddressforuser.md) function to get an IP address for the remote client.</span></span> <span data-ttu-id="b8df6-125">El archivo DLL puede utilizar esta función para proporcionar un esquema alternativo para asignar una dirección IP a un usuario de acceso telefónico.</span><span class="sxs-lookup"><span data-stu-id="b8df6-125">The DLL can use this function to provide an alternate scheme for mapping an IP address to a dial-in user.</span></span> <span data-ttu-id="b8df6-126">Si **RasAdminGetIpAddressForUser** no está implementado, un servidor RAS conecta a un usuario remoto con una dirección IP seleccionada desde un grupo estático de direcciones IP, o bien una seleccionada por un servidor de protocolo de configuración dinámica de host (DHCP).</span><span class="sxs-lookup"><span data-stu-id="b8df6-126">If **RasAdminGetIpAddressForUser** is not implemented, a RAS server connects a remote user to an IP address selected from a static pool of IP addresses, or one selected by a Dynamic Host Configuration Protocol (DHCP) server.</span></span> <span data-ttu-id="b8df6-127">La función **RasAdminGetIpAddressForUser** permite que el archivo dll invalide esta dirección IP predeterminada y especifique una dirección IP determinada para cada usuario.</span><span class="sxs-lookup"><span data-stu-id="b8df6-127">The **RasAdminGetIpAddressForUser** function allows the DLL to override this default IP address and specify a particular IP address for each user.</span></span> <span data-ttu-id="b8df6-128">La función **RasAdminGetIpAddressForUser** puede establecer una marca que haga que ras llame a la función [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) cuando el usuario se desconecte.</span><span class="sxs-lookup"><span data-stu-id="b8df6-128">The **RasAdminGetIpAddressForUser** function can set a flag that causes RAS to call the [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) function when the user disconnects.</span></span> <span data-ttu-id="b8df6-129">El archivo DLL puede utilizar [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) para actualizar su asignación de usuario a dirección IP.</span><span class="sxs-lookup"><span data-stu-id="b8df6-129">The DLL can use [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) to update its user-to-IP-address map.</span></span>

<span data-ttu-id="b8df6-130">RAS serializa las llamadas en el archivo DLL de administración.</span><span class="sxs-lookup"><span data-stu-id="b8df6-130">RAS serializes calls into the administration DLL.</span></span> <span data-ttu-id="b8df6-131">Una llamada a una de las funciones del archivo DLL para un cliente RAS determinado nunca se retendrá si se realiza una llamada a esa función para un cliente RAS diferente; se garantiza que la llamada inicial se completará antes de que RAS llame a la función para el otro cliente.</span><span class="sxs-lookup"><span data-stu-id="b8df6-131">A call into one of the DLL's functions for a given RAS client will never be preempted by a call to that function for a different RAS client; the initial call is guaranteed to be complete before RAS calls the function for the other client.</span></span> <span data-ttu-id="b8df6-132">Además, la serialización se extiende a determinados grupos de funciones.</span><span class="sxs-lookup"><span data-stu-id="b8df6-132">Furthermore, serialization extends to certain groups of functions.</span></span> <span data-ttu-id="b8df6-133">Las funciones de dirección IP se serializan como un grupo; una llamada a [**RasAdminGetIpAddressForUser**](rasadmingetipaddressforuser.md) o [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) bloqueará las llamadas en ambos hasta que se complete la llamada inicial.</span><span class="sxs-lookup"><span data-stu-id="b8df6-133">The IP address functions are serialized as a group; a call into either [**RasAdminGetIpAddressForUser**](rasadmingetipaddressforuser.md) or [**RasAdminReleaseIpAddress**](rasadminreleaseipaddress.md) will block calls into both until the initial call is complete.</span></span> <span data-ttu-id="b8df6-134">[**RasAdminAcceptNewConnection**](rasadminacceptnewconnection.md) y [**RasAdminConnectionHangupNotification**](rasadminconnectionhangupnotification.md) también se serializan como un grupo.</span><span class="sxs-lookup"><span data-stu-id="b8df6-134">[**RasAdminAcceptNewConnection**](rasadminacceptnewconnection.md) and [**RasAdminConnectionHangupNotification**](rasadminconnectionhangupnotification.md) are also serialized as a group.</span></span>

<span data-ttu-id="b8df6-135">RAS ejecuta las funciones para asignar las direcciones IP en un proceso y ejecuta las funciones para las notificaciones de conexión y desconexión en otro proceso.</span><span class="sxs-lookup"><span data-stu-id="b8df6-135">RAS executes the functions for assigning IP addresses in one process and executes the functions for connection and disconnection notifications in another process.</span></span> <span data-ttu-id="b8df6-136">Por consiguiente, la DLL no debe depender de los datos compartidos entre los dos conjuntos de funciones.</span><span class="sxs-lookup"><span data-stu-id="b8df6-136">Consequently, the DLL should not depend on shared data between the two sets of functions.</span></span>

<span data-ttu-id="b8df6-137">El servidor RAS registra un error en el registro de eventos del sistema si se produce un error al intentar cargar un archivo DLL de administración de RAS o al llamar a una de las funciones del archivo DLL.</span><span class="sxs-lookup"><span data-stu-id="b8df6-137">The RAS server logs an error in the system event log if an error occurs when it tries to load a RAS administration DLL or when calling one of the DLL's functions.</span></span> <span data-ttu-id="b8df6-138">Esto puede ocurrir, por ejemplo, si el archivo DLL especifica un nombre incorrecto para una función exportada, o si no incluyó el nombre de función en el archivo. def.</span><span class="sxs-lookup"><span data-stu-id="b8df6-138">This can happen, for example, if the DLL specified the wrong name for an exported function, or if it did not include the function name in the .def file.</span></span> <span data-ttu-id="b8df6-139">La entrada del registro de eventos indica el motivo del error.</span><span class="sxs-lookup"><span data-stu-id="b8df6-139">The entry in the event log indicates the reason for the failure.</span></span>

<span data-ttu-id="b8df6-140">**Windows 2000 Server y versiones posteriores:** Los archivos dll de administración de RAS que implementan esta interfaz de función ya no funcionan.</span><span class="sxs-lookup"><span data-stu-id="b8df6-140">**Windows 2000 Server and later:** RAS administration DLLs that implement this function interface no longer work.</span></span> <span data-ttu-id="b8df6-141">En su lugar, use la interfaz de la función MprAdmin que se proporciona con las versiones más recientes de Windows.</span><span class="sxs-lookup"><span data-stu-id="b8df6-141">Instead, use the MprAdmin function interface provided with the more recent versions of Windows.</span></span> <span data-ttu-id="b8df6-142">Para obtener más información, consulte la [referencia de administración de Ras](remote-access-service-administration-reference.md) en la documentación de enrutamiento y ras.</span><span class="sxs-lookup"><span data-stu-id="b8df6-142">For more information, see the [RAS Administration Reference](remote-access-service-administration-reference.md) in the Routing and RAS documentation.</span></span>

 

 




