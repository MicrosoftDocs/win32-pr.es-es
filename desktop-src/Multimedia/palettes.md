---
title: Las paletas
description: Las paletas
ms.assetid: ee048f9a-3036-40dc-a6d7-f612b9ef767c
keywords:
- DrawDib, paletas
- DrawDibRealize función)
- DrawDibDraw función)
- DrawDibSetPalette función)
- DrawDibGetPalette función)
- DrawDibChangePalette función)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f5935831d8996c424a386f86082282f9cf7c1c12
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/19/2020
ms.locfileid: "103995211"
---
# <a name="palettes"></a><span data-ttu-id="7cb4a-109">Las paletas</span><span class="sxs-lookup"><span data-stu-id="7cb4a-109">Palettes</span></span>

<span data-ttu-id="7cb4a-110">Las funciones DrawDib requieren que una aplicación responda a dos mensajes orientados a la paleta: [**WM \_ QUERYNEWPALETTE**](/windows/desktop/gdi/wm-querynewpalette) y [**WM \_ PALETTECHANGED**](/windows/desktop/gdi/wm-palettechanged).</span><span class="sxs-lookup"><span data-stu-id="7cb4a-110">The DrawDib functions require that an application respond to two palette-oriented messages: [**WM\_QUERYNEWPALETTE**](/windows/desktop/gdi/wm-querynewpalette) and [**WM\_PALETTECHANGED**](/windows/desktop/gdi/wm-palettechanged).</span></span> <span data-ttu-id="7cb4a-111">Si la aplicación no tiene en cuenta la paleta, tendrá que agregar un controlador para cada uno de estos mensajes.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-111">If your application is not palette-aware, you will need to add a handler for each of these messages.</span></span> <span data-ttu-id="7cb4a-112">Para obtener más información sobre el procesamiento de los mensajes de **WM \_ QUERYNEWPALETTE** y **WM \_ PALETTECHANGED** , consulte [agregar controladores de mensajes de paleta](adding-palette-message-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="7cb4a-112">For more information about processing the **WM\_QUERYNEWPALETTE** and **WM\_PALETTECHANGED** messages, see [Adding Palette Message Handlers](adding-palette-message-handlers.md).</span></span>

<span data-ttu-id="7cb4a-113">Puede obtener la paleta DrawDib actual en el controlador de dominio mediante la función [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) .</span><span class="sxs-lookup"><span data-stu-id="7cb4a-113">You can realize the current DrawDib palette to the DC by using the [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) function.</span></span> <span data-ttu-id="7cb4a-114">Debe obtener la paleta en respuesta al mensaje de [**\_ QUERYNEWPALETTE de WM**](/windows/desktop/gdi/wm-querynewpalette) o [**WM \_ PALETTECHANGED**](/windows/desktop/gdi/wm-palettechanged) , o bien al preparar la presentación de una secuencia de imagen mediante la función [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) .</span><span class="sxs-lookup"><span data-stu-id="7cb4a-114">You should realize the palette in response to the [**WM\_QUERYNEWPALETTE**](/windows/desktop/gdi/wm-querynewpalette) or [**WM\_PALETTECHANGED**](/windows/desktop/gdi/wm-palettechanged) message, or when you prepare to display an image sequence by using the [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) function.</span></span>

<span data-ttu-id="7cb4a-115">Puede dibujar una imagen asignada a otra paleta mediante la función [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) .</span><span class="sxs-lookup"><span data-stu-id="7cb4a-115">You can draw an image mapped to another palette by using the [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) function.</span></span> <span data-ttu-id="7cb4a-116">Esta función obliga a que el controlador de dominio de DrawDib use la paleta especificada, lo que puede afectar a la calidad de la imagen.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-116">This function forces the DrawDib DC to use the specified palette, which can affect the image quality.</span></span> <span data-ttu-id="7cb4a-117">Por ejemplo, una aplicación que tenga en cuenta la paleta podría haber realizado una paleta y necesita evitar que DrawDib en su propia paleta.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-117">For example, an application that is palette-aware might have realized a palette and needs to prevent DrawDib from realizing its own palette.</span></span> <span data-ttu-id="7cb4a-118">La aplicación puede utilizar **DrawDibSetPalette** para notificar a DrawDib de la paleta que se va a usar.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-118">The application can use **DrawDibSetPalette** to notify DrawDib of the palette to use.</span></span>

<span data-ttu-id="7cb4a-119">Puede obtener un identificador de la paleta de primer plano actual mediante la función [**DrawDibGetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibgetpalette) .</span><span class="sxs-lookup"><span data-stu-id="7cb4a-119">You can obtain a handle of the current foreground palette by using the [**DrawDibGetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibgetpalette) function.</span></span> <span data-ttu-id="7cb4a-120">Si la aplicación usa la paleta de primer plano actual, no tiene el uso exclusivo de la paleta y otra aplicación puede invalidar el identificador de la paleta.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-120">If your application uses the current foreground palette, it does not have exclusive use of the palette and another application can invalidate the palette handle.</span></span> <span data-ttu-id="7cb4a-121">La aplicación no debe liberar la paleta cuando termine de usarla.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-121">Your application should not free the palette when you finish using it.</span></span> <span data-ttu-id="7cb4a-122">La liberación de la paleta podría invalidar el identificador de la paleta para otra aplicación.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-122">Freeing the palette could invalidate the palette handle for another application.</span></span>

<span data-ttu-id="7cb4a-123">Puede preparar DrawDib para recibir nuevos valores de color para su paleta mediante la función [**DrawDibChangePalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibchangepalette) .</span><span class="sxs-lookup"><span data-stu-id="7cb4a-123">You can prepare DrawDib to receive new color values for its palette by using the [**DrawDibChangePalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibchangepalette) function.</span></span> <span data-ttu-id="7cb4a-124">En el código siguiente a **DrawDibChangePalette**, se asignan nuevos valores para la tabla de colores de la paleta.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-124">In the code following **DrawDibChangePalette**, you assign new values for the palette color table.</span></span> <span data-ttu-id="7cb4a-125">Si no se establece la marca de **\_ animación de DDF** en el controlador de dominio de DrawDib al llamar a **DrawDibChangePalette**, puede realizar los cambios de la paleta mediante [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) para obtener la paleta.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-125">If the **DDF\_ANIMATE** flag is not set in the DrawDib DC when you call **DrawDibChangePalette**, you can enact the palette changes by using [**DrawDibRealize**](/windows/desktop/api/Vfw/nf-vfw-drawdibrealize) to realize the palette.</span></span> <span data-ttu-id="7cb4a-126">Después, puede usar [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) para volver a dibujar la imagen.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-126">You can then use [**DrawDibDraw**](/windows/desktop/api/Vfw/nf-vfw-drawdibdraw) to redraw the image.</span></span> <span data-ttu-id="7cb4a-127">Si se establece la marca de **\_ animación de DDF** en el controlador de dominio DrawDib, puede animar la paleta y los colores del mapa de bits mostrado mediante **DrawDibDraw** o **DrawDibRealize**.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-127">If the **DDF\_ANIMATE** flag is set in the DrawDib DC, you can animate the palette and the colors of the displayed bitmap by using **DrawDibDraw** or **DrawDibRealize**.</span></span> <span data-ttu-id="7cb4a-128">Puede actualizar la marca **de \_ animación de DDF** mediante las funciones [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend) y [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) .</span><span class="sxs-lookup"><span data-stu-id="7cb4a-128">You can update the **DDF\_ANIMATE** flag by using the [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend) and [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) functions.</span></span>

> [!Note]  
> <span data-ttu-id="7cb4a-129">Si libera la paleta DrawDib mientras está seleccionada por un controlador de dominio, se puede producir un error de la interfaz de dispositivo gráfico (GDI) cuando el controlador de dominio use la paleta.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-129">If you free the DrawDib palette while it is selected by a DC, a graphics device interface (GDI) error can result when the DC uses the palette.</span></span> <span data-ttu-id="7cb4a-130">En su lugar, la aplicación debe usar [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) para cambiar el controlador de dominio de DrawDib para que use la paleta predeterminada u otra paleta.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-130">Instead, your application should use [**DrawDibSetPalette**](/windows/desktop/api/Vfw/nf-vfw-drawdibsetpalette) to change the DrawDib DC to use the default palette or another palette.</span></span>

 

<span data-ttu-id="7cb4a-131">Las funciones [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend), [**DrawDibClose**](/windows/desktop/api/Vfw/nf-vfw-drawdibclose)y [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) pueden liberar la paleta DrawDib.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-131">The [**DrawDibEnd**](/windows/desktop/api/Vfw/nf-vfw-drawdibend), [**DrawDibClose**](/windows/desktop/api/Vfw/nf-vfw-drawdibclose), and [**DrawDibBegin**](/windows/desktop/api/Vfw/nf-vfw-drawdibbegin) functions can free the DrawDib palette.</span></span> <span data-ttu-id="7cb4a-132">Sin embargo, estas funciones solo deben usarse cuando el controlador de dominio no ha seleccionado la paleta.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-132">However, these functions should be used only when the palette has not been selected by the DC.</span></span> <span data-ttu-id="7cb4a-133">La función DrawDibDraw también puede liberar la paleta cuando usa el mismo controlador de dominio DrawDib, pero especifica distintos parámetros de dibujo (*lpbi*, *dxDst*, *dyDst*, *dxSrc* o *dySrc*) o un formato diferente.</span><span class="sxs-lookup"><span data-stu-id="7cb4a-133">The DrawDibDraw function can also free the palette when it uses the same DrawDib DC, but specifies different drawing parameters (*lpbi*, *dxDst*, *dyDst*, *dxSrc*, or *dySrc*) or a different format.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7cb4a-134">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="7cb4a-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7cb4a-135">Representación de imágenes</span><span class="sxs-lookup"><span data-stu-id="7cb4a-135">Image Rendering</span></span>](image-rendering.md)
</dt> </dl>

 

 