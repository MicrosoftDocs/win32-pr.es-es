---
title: Entrada y salida de cinta
description: Hay varias funciones que las aplicaciones pueden usar para realizar operaciones de entrada y salida (e/s) en una unidad de cinta. La e/s de cinta es similar a la e/s realizada en un dispositivo de comunicaciones.
ms.assetid: 1862c267-0070-4fe8-bb77-40167913978a
keywords:
- Copia de seguridad de entrada y salida de cinta
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5946659f1ad0246e37981201e4e08611b45b70b1
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104359228"
---
# <a name="tape-input-and-output"></a><span data-ttu-id="c0169-105">Entrada y salida de cinta</span><span class="sxs-lookup"><span data-stu-id="c0169-105">Tape Input and Output</span></span>

<span data-ttu-id="c0169-106">Hay varias funciones que las aplicaciones pueden usar para realizar operaciones de entrada y salida (e/s) en una unidad de cinta.</span><span class="sxs-lookup"><span data-stu-id="c0169-106">There are several functions that applications can use to perform input and output (I/O) on a tape drive.</span></span> <span data-ttu-id="c0169-107">La e/s de cinta es similar a la e/s realizada en un dispositivo de comunicaciones.</span><span class="sxs-lookup"><span data-stu-id="c0169-107">Tape I/O is similar to I/O performed on a communications device.</span></span>

<span data-ttu-id="c0169-108">Al realizar la e/s de cinta, algunas unidades de cinta almacenan información de firmware de cinta en los primeros bloques de una cinta, normalmente con una parte de los primeros 100 bloques.</span><span class="sxs-lookup"><span data-stu-id="c0169-108">When performing tape I/O, some tape drives store tape firmware information in the first few blocks on a tape, typically using some portion of the first 100 blocks.</span></span> <span data-ttu-id="c0169-109">Las aplicaciones no deben usar estos bloques.</span><span class="sxs-lookup"><span data-stu-id="c0169-109">Applications should not use those blocks.</span></span> <span data-ttu-id="c0169-110">La información más específica sobre este tema está disponible para los fabricantes de sistemas de cintas individuales.</span><span class="sxs-lookup"><span data-stu-id="c0169-110">More specific information on this subject is available from individual tape system manufacturers.</span></span> <span data-ttu-id="c0169-111">En general, una aplicación que omite los primeros 100 bloques de una cinta evitará la idiosincrasia de la unidad de cinta.</span><span class="sxs-lookup"><span data-stu-id="c0169-111">In general, an application that skips the first 100 blocks on a tape will avoid tape drive idiosyncrasies.</span></span>

<span data-ttu-id="c0169-112">Las funciones [**GetTapePosition**](/windows/desktop/api/Winbase/nf-winbase-gettapeposition) y [**SetTapePosition**](/windows/desktop/api/Winbase/nf-winbase-settapeposition) recuperan y mueven la posición de la cinta actual.</span><span class="sxs-lookup"><span data-stu-id="c0169-112">The [**GetTapePosition**](/windows/desktop/api/Winbase/nf-winbase-gettapeposition) and [**SetTapePosition**](/windows/desktop/api/Winbase/nf-winbase-settapeposition) functions retrieve and move the current tape position.</span></span> <span data-ttu-id="c0169-113">La función [**WriteTapemark**](/windows/desktop/api/Winbase/nf-winbase-writetapemark) escribe un número especificado de setmarks, filemarks, Short filemarks y Long filemarks.</span><span class="sxs-lookup"><span data-stu-id="c0169-113">The [**WriteTapemark**](/windows/desktop/api/Winbase/nf-winbase-writetapemark) function writes a specified number of setmarks, filemarks, short filemarks, and long filemarks.</span></span> <span data-ttu-id="c0169-114">La función [**EraseTape**](/windows/desktop/api/Winbase/nf-winbase-erasetape) borra todo o parte de una cinta.</span><span class="sxs-lookup"><span data-stu-id="c0169-114">The [**EraseTape**](/windows/desktop/api/Winbase/nf-winbase-erasetape) function erases all or part of a tape.</span></span>

<span data-ttu-id="c0169-115">Las funciones [**readfile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) y [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) leen y escriben datos de archivo desde y hacia la cinta.</span><span class="sxs-lookup"><span data-stu-id="c0169-115">The [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) and [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) functions read and write file data from and to the tape.</span></span> <span data-ttu-id="c0169-116">Los datos se leen y se escriben en bloques completos.</span><span class="sxs-lookup"><span data-stu-id="c0169-116">The data is read and written in complete blocks.</span></span> <span data-ttu-id="c0169-117">Si el tamaño de bloque de la cinta es de 512 bytes, todas las operaciones de lectura y escritura deben usar búferes que sean múltiplos de entero sencillos de ese tamaño de bloque: 512, 1024, 1536, 2048, etc.</span><span class="sxs-lookup"><span data-stu-id="c0169-117">If the tape's block size is 512 bytes, all read and write operations must use buffers that are simple integer multiples of that block size: 512, 1024, 1536, 2048, and so on.</span></span> <span data-ttu-id="c0169-118">La mayoría de las unidades, si no todas, solo permiten una operación de escritura después de rebobinar la cinta o después de que una operación de lectura genere un mensaje de error de final de datos.</span><span class="sxs-lookup"><span data-stu-id="c0169-118">Most, if not all, drives only allow a write operation after the tape is rewound or after a read operation produces an end-of-data error message.</span></span>

<span data-ttu-id="c0169-119">Para leer o escribir datos de archivo en o desde una cinta en modo de bloque de longitud variable, realice los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="c0169-119">To read or write file data to or from a tape in variable-length block mode, perform the following steps:</span></span>

1.  <span data-ttu-id="c0169-120">Determine si la unidad de cinta admite el modo de bloqueo de longitud variable mediante una llamada a la función [**GetTapeParameters**](/windows/desktop/api/Winbase/nf-winbase-gettapeparameters) y compruebe el \_ \_ \_ bit de bloque de variable de la unidad de cinta del miembro **FeaturesLow** de la estructura de parámetros de [**unidad de cinta \_ Get \_ \_**](/windows/desktop/api/Winnt/ns-winnt-tape_get_drive_parameters) devuelta.</span><span class="sxs-lookup"><span data-stu-id="c0169-120">Determine whether the tape drive supports variable-length block mode by calling the [**GetTapeParameters**](/windows/desktop/api/Winbase/nf-winbase-gettapeparameters) function and checking the TAPE\_DRIVE\_VARIABLE\_BLOCK bit of the **FeaturesLow** member of the returned [**TAPE\_GET\_DRIVE\_PARAMETERS**](/windows/desktop/api/Winnt/ns-winnt-tape_get_drive_parameters) structure.</span></span>
2.  <span data-ttu-id="c0169-121">Especifique el modo de tamaño de bloque de variables mediante una llamada a la función [**SetTapeParameters**](/windows/desktop/api/Winbase/nf-winbase-settapeparameters) , estableciendo el miembro **blocksize** de la estructura de parámetros de medios del conjunto de cintas en cero. [**\_ \_ \_**](/windows/desktop/api/Winnt/ns-winnt-tape_set_media_parameters)</span><span class="sxs-lookup"><span data-stu-id="c0169-121">Specify the variable block size mode by calling the [**SetTapeParameters**](/windows/desktop/api/Winbase/nf-winbase-settapeparameters) function, setting the **BlockSize** member of the [**TAPE\_SET\_MEDIA\_PARAMETERS**](/windows/desktop/api/Winnt/ns-winnt-tape_set_media_parameters) structure to zero.</span></span> <span data-ttu-id="c0169-122">A continuación, use [**readfile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) o [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) para leer o escribir los datos del archivo.</span><span class="sxs-lookup"><span data-stu-id="c0169-122">Then, use [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) or [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) to read or write the file data.</span></span>

<span data-ttu-id="c0169-123">Si [**readfile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) encuentra una marca de acción, se leen los datos hasta la marca de registro y se produce un error en la función.</span><span class="sxs-lookup"><span data-stu-id="c0169-123">If [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) encounters a filemark, the data up to the filemark is read and the function fails.</span></span> <span data-ttu-id="c0169-124">(La función [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) devuelve un código de error que indica el tipo de marca de código que se encontró). El sistema operativo mueve la cinta más allá de la marca de desplazamiento y una aplicación puede volver a llamar a **readfile** para seguir leyendo.</span><span class="sxs-lookup"><span data-stu-id="c0169-124">(The [**GetLastError**](/windows/desktop/api/errhandlingapi/nf-errhandlingapi-getlasterror) function returns an error code indicating the type of filemark that was encountered.) The operating system moves the tape past the filemark, and an application can call **ReadFile** again to continue reading.</span></span>

<span data-ttu-id="c0169-125">[**Readfile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) y [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) leen y escriben solo el flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="c0169-125">[**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) and [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile) read and write only the data stream.</span></span> <span data-ttu-id="c0169-126">Las funciones [**BackupRead**](/windows/desktop/api/Winbase/nf-winbase-backupread) y [**BackupWrite**](/windows/desktop/api/Winbase/nf-winbase-backupwrite) leen y escriben todas las secuencias asociadas a un archivo.</span><span class="sxs-lookup"><span data-stu-id="c0169-126">The [**BackupRead**](/windows/desktop/api/Winbase/nf-winbase-backupread) and [**BackupWrite**](/windows/desktop/api/Winbase/nf-winbase-backupwrite) functions read and write all the streams associated with a file.</span></span> <span data-ttu-id="c0169-127">Entre ellos se incluyen datos, atributos extendidos, seguridad y flujos de datos alternativos.</span><span class="sxs-lookup"><span data-stu-id="c0169-127">These include data, extended attributes, security, and alternative data streams.</span></span> <span data-ttu-id="c0169-128">La seguridad y los flujos de datos alternativos solo son relevantes en la partición del sistema de archivos NTFS.</span><span class="sxs-lookup"><span data-stu-id="c0169-128">The security and alternate data streams are relevant only on the NTFS file system partition.</span></span>

<span data-ttu-id="c0169-129">La función [**BackupSeek**](/windows/desktop/api/Winbase/nf-winbase-backupseek) busca hacia delante en un archivo al que tiene acceso inicialmente [**BackupRead**](/windows/desktop/api/Winbase/nf-winbase-backupread) o [**BackupWrite**](/windows/desktop/api/Winbase/nf-winbase-backupwrite).</span><span class="sxs-lookup"><span data-stu-id="c0169-129">The [**BackupSeek**](/windows/desktop/api/Winbase/nf-winbase-backupseek) function seeks forward in a file initially accessed by [**BackupRead**](/windows/desktop/api/Winbase/nf-winbase-backupread) or [**BackupWrite**](/windows/desktop/api/Winbase/nf-winbase-backupwrite).</span></span> <span data-ttu-id="c0169-130">Esta función permite a una aplicación omitir la información que produce errores de acceso.</span><span class="sxs-lookup"><span data-stu-id="c0169-130">This function enables an application to skip information that causes access errors.</span></span>

<span data-ttu-id="c0169-131">Si una aplicación necesita acceder únicamente a los datos del archivo, debe usar [**readfile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) y [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile).</span><span class="sxs-lookup"><span data-stu-id="c0169-131">If an application needs to access only the file data, it should use [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile) and [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile).</span></span> <span data-ttu-id="c0169-132">Estas funciones también pueden leer flujos de datos alternativos si las secuencias se crearon con la función [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) .</span><span class="sxs-lookup"><span data-stu-id="c0169-132">These functions can also read alternative data streams if the streams were created by using the [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) function.</span></span>

<span data-ttu-id="c0169-133">Una aplicación de copia de seguridad en cinta debe usar [**BackupRead**](/windows/desktop/api/Winbase/nf-winbase-backupread) y [**BackupWrite**](/windows/desktop/api/Winbase/nf-winbase-backupwrite) para copiar toda la información relativa a un archivo.</span><span class="sxs-lookup"><span data-stu-id="c0169-133">A tape-backup application must use [**BackupRead**](/windows/desktop/api/Winbase/nf-winbase-backupread) and [**BackupWrite**](/windows/desktop/api/Winbase/nf-winbase-backupwrite) to copy all information pertaining to a file.</span></span> <span data-ttu-id="c0169-134">Sin embargo, estas funciones no leen ni escriben características de archivos como atributos, tiempo de creación de archivos, etc.</span><span class="sxs-lookup"><span data-stu-id="c0169-134">However, these functions do not read or write file characteristics such as attributes, file creation time, and so on.</span></span> <span data-ttu-id="c0169-135">Las aplicaciones deben usar las funciones de entrada y salida de archivo, como [**GetFileAttributes**](/windows/desktop/api/fileapi/nf-fileapi-getfileattributesa) y [**SetFileAttributes**](/windows/desktop/api/fileapi/nf-fileapi-setfileattributesa), para recuperar y establecer esos valores.</span><span class="sxs-lookup"><span data-stu-id="c0169-135">Applications must use the file input and output functions, such as [**GetFileAttributes**](/windows/desktop/api/fileapi/nf-fileapi-getfileattributesa) and [**SetFileAttributes**](/windows/desktop/api/fileapi/nf-fileapi-setfileattributesa), to retrieve and set those values.</span></span>

 

 