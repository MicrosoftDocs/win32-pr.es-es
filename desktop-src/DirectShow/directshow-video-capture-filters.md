---
description: Filtros de captura de vídeo de DirectShow
ms.assetid: e4d1452d-ceac-4b5c-b9ba-ad4722ecff76
title: Filtros de captura de vídeo de DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 238f18dd77bc40011fa9fc0dbab3192ea81a223f
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104494410"
---
# <a name="directshow-video-capture-filters"></a><span data-ttu-id="976c1-103">Filtros de captura de vídeo de DirectShow</span><span class="sxs-lookup"><span data-stu-id="976c1-103">DirectShow Video Capture Filters</span></span>

<span data-ttu-id="976c1-104">Los filtros de captura en DirectShow tienen algunas características que los distinguen de otros tipos de filtros.</span><span class="sxs-lookup"><span data-stu-id="976c1-104">Capture filters in DirectShow have some features that distinguish them from other kinds of filters.</span></span> <span data-ttu-id="976c1-105">Aunque el [generador de gráficos de captura](capture-graph-builder.md) oculta muchos de los detalles, es una buena idea leer esta sección, con el fin de tener conocimientos generales sobre los gráficos de captura de DirectShow.</span><span class="sxs-lookup"><span data-stu-id="976c1-105">Although the [Capture Graph Builder](capture-graph-builder.md) hides many of the details, it is a good idea to read this section, in order to have a general understanding of DirectShow capture graphs.</span></span>

<span data-ttu-id="976c1-106">**Anclar categorías**</span><span class="sxs-lookup"><span data-stu-id="976c1-106">**Pin Categories**</span></span>

<span data-ttu-id="976c1-107">Un filtro de captura suele tener dos o más clavijas de salida que proporcionan el mismo tipo de datos, por ejemplo, un PIN de vista previa y un PIN de captura.</span><span class="sxs-lookup"><span data-stu-id="976c1-107">A capture filter often has two or more output pins that deliver the same kind of data—for example, a preview pin and a capture pin.</span></span> <span data-ttu-id="976c1-108">Por lo tanto, los tipos de medios no son una buena manera de distinguir los pin.</span><span class="sxs-lookup"><span data-stu-id="976c1-108">Therefore, media types are not a good way to distinguish the pins.</span></span> <span data-ttu-id="976c1-109">En su lugar, las clavijas se distinguen por su funcionalidad, que se identifica mediante un GUID, denominada *categoría PIN*.</span><span class="sxs-lookup"><span data-stu-id="976c1-109">Instead, the pins are distinguished by their functionality, which is identified using a GUID, called the *pin category*.</span></span>

<span data-ttu-id="976c1-110">Para obtener una explicación sobre cómo consultar los pin de su categoría, consulte [trabajar con categorías de PIN](working-with-pin-categories.md).</span><span class="sxs-lookup"><span data-stu-id="976c1-110">For a discussion of how to query pins for their category, see [Working with Pin Categories](working-with-pin-categories.md).</span></span> <span data-ttu-id="976c1-111">Sin embargo, para la mayoría de las aplicaciones, no tendrá que consultar directamente las clavijas.</span><span class="sxs-lookup"><span data-stu-id="976c1-111">For most applications, however, you will not have to query pins directly.</span></span> <span data-ttu-id="976c1-112">En su lugar, varios métodos [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) toman parámetros que especifican la categoría de PIN en la que se va a operar.</span><span class="sxs-lookup"><span data-stu-id="976c1-112">Instead, various [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) methods take parameters that specify the pin category on which to operate.</span></span> <span data-ttu-id="976c1-113">El generador de gráficos de captura localiza automáticamente el PIN correcto.</span><span class="sxs-lookup"><span data-stu-id="976c1-113">The Capture Graph Builder automatically locates the correct pin.</span></span>

<span data-ttu-id="976c1-114">**PIN de vista previa y clavijas de captura**</span><span class="sxs-lookup"><span data-stu-id="976c1-114">**Preview Pins and Capture Pins**</span></span>

<span data-ttu-id="976c1-115">Algunos dispositivos de captura de vídeo tienen clavijas de salida independientes para la vista previa y la captura.</span><span class="sxs-lookup"><span data-stu-id="976c1-115">Some video capture devices have separate output pins for preview and capture.</span></span> <span data-ttu-id="976c1-116">El PIN de vista previa se usa para representar el vídeo en la pantalla, mientras que el PIN de captura se usa para escribir vídeo en un archivo.</span><span class="sxs-lookup"><span data-stu-id="976c1-116">The preview pin is used to render video to the screen, while the capture pin is used to write video to a file.</span></span>

<span data-ttu-id="976c1-117">Un PIN de vista previa y un PIN de captura tienen las siguientes diferencias:</span><span class="sxs-lookup"><span data-stu-id="976c1-117">A preview pin and a capture pin have the following differences:</span></span>

-   <span data-ttu-id="976c1-118">Un PIN de vista previa quita los fotogramas según sea necesario para mantener el rendimiento en el PIN de captura.</span><span class="sxs-lookup"><span data-stu-id="976c1-118">A preview pin drops frames as needed to maintain throughput on the capture pin.</span></span>
-   <span data-ttu-id="976c1-119">Cada fotograma de un PIN de captura tiene una marca de tiempo con el tiempo de flujo cuando se capturó el fotograma.</span><span class="sxs-lookup"><span data-stu-id="976c1-119">Each frame from a capture pin is time-stamped with the stream time when the frame was captured.</span></span> <span data-ttu-id="976c1-120">Un PIN de vista previa no realiza la marca de tiempo de los ejemplos que entrega.</span><span class="sxs-lookup"><span data-stu-id="976c1-120">A preview pin does not time stamp the samples it delivers.</span></span>

<span data-ttu-id="976c1-121">La razón por la que los marcos de vista previa no tienen marcas de tiempo es que el gráfico de filtro introduce una pequeña cantidad de latencia en la secuencia.</span><span class="sxs-lookup"><span data-stu-id="976c1-121">The reason that preview frames do not have time stamps is that the filter graph introduces a small amount of latency into the stream.</span></span> <span data-ttu-id="976c1-122">Si se usa la hora de captura como el tiempo de presentación, el representador de vídeo trata cada muestra como ligeramente más atrasada.</span><span class="sxs-lookup"><span data-stu-id="976c1-122">If the capture time is used as the presentation time, the video renderer treats every sample as being slightly late.</span></span> <span data-ttu-id="976c1-123">Esto puede hacer que el representador de vídeo Coloque fotogramas mientras intenta ponerse al día.</span><span class="sxs-lookup"><span data-stu-id="976c1-123">This can cause the video renderer to drop frames while it tries to catch up.</span></span> <span data-ttu-id="976c1-124">Al quitar las marcas de tiempo, se asegura de que el representador presenta cada ejemplo cuando llega, sin quitar fotogramas.</span><span class="sxs-lookup"><span data-stu-id="976c1-124">Removing the time stamps ensures that the renderer presents each sample when it arrives, without dropping frames.</span></span>

<span data-ttu-id="976c1-125">La categoría de PIN para los pin de vista previa es PIN \_ categoría \_ vista previa.</span><span class="sxs-lookup"><span data-stu-id="976c1-125">The pin category for preview pins is PIN\_CATEGORY\_PREVIEW.</span></span> <span data-ttu-id="976c1-126">La categoría de las clavijas de captura es la captura de categoría de PIN \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="976c1-126">The category for capture pins is PIN\_CATEGORY\_CAPTURE.</span></span>

<span data-ttu-id="976c1-127">**PIN de puerto de vídeo**</span><span class="sxs-lookup"><span data-stu-id="976c1-127">**Video Port Pins**</span></span>

<span data-ttu-id="976c1-128">Un puerto de vídeo es una conexión de hardware entre un dispositivo de vídeo (por ejemplo, un sintonizador de TV analógico) y la tarjeta de vídeo.</span><span class="sxs-lookup"><span data-stu-id="976c1-128">A video port is a hardware connection between a video device (such as an analog TV tuner) and the video card.</span></span> <span data-ttu-id="976c1-129">Un puerto de vídeo permite que el dispositivo envíe datos de vídeo directamente a la tarjeta gráfica.</span><span class="sxs-lookup"><span data-stu-id="976c1-129">A video port enables the device to send video data directly to the graphics card.</span></span> <span data-ttu-id="976c1-130">El vídeo se muestra en la pantalla con una superposición de hardware.</span><span class="sxs-lookup"><span data-stu-id="976c1-130">The video is displayed on the screen using a hardware overlay.</span></span> <span data-ttu-id="976c1-131">Un puerto de vídeo puede ser un cable real que conecta dos dispositivos en tarjetas independientes; o bien, podría ser una conexión cableada en la misma tarjeta.</span><span class="sxs-lookup"><span data-stu-id="976c1-131">A video port might be an actual cable that connects two devices on separate cards; or it might be a hard-wired connection on the same card.</span></span>

<span data-ttu-id="976c1-132">La ventaja de un puerto de vídeo es que el vídeo se dirige directamente a la memoria de vídeo, sin ningún trabajo de la CPU.</span><span class="sxs-lookup"><span data-stu-id="976c1-132">The advantage of a video port is that the video goes directly into video memory, without any work by the CPU.</span></span> <span data-ttu-id="976c1-133">Sin embargo, los puertos de vídeo tienen algunas desventajas:</span><span class="sxs-lookup"><span data-stu-id="976c1-133">However, video ports have some drawbacks:</span></span>

-   <span data-ttu-id="976c1-134">Un puerto de vídeo siempre usa la superficie de superposición durante la captura, independientemente de si desea obtener una vista previa del vídeo.</span><span class="sxs-lookup"><span data-stu-id="976c1-134">A video port always uses the overlay surface during capture, regardless of whether you want to preview the video.</span></span>
-   <span data-ttu-id="976c1-135">El volteo entre fotogramas se produce automáticamente, lo que dificulta la sincronización del volteo con otras operaciones de vídeo.</span><span class="sxs-lookup"><span data-stu-id="976c1-135">Flipping between frames occurs automatically, which makes it difficult to synchronize the flip with other video operations.</span></span>

<span data-ttu-id="976c1-136">Si un dispositivo de captura usa un puerto de vídeo, el filtro de captura tiene un PIN de puerto de vídeo en lugar de un PIN de vista previa.</span><span class="sxs-lookup"><span data-stu-id="976c1-136">If a capture device uses a video port, the capture filter has a video port pin instead of a preview pin.</span></span> <span data-ttu-id="976c1-137">La categoría PIN de los PIN del puerto de vídeo es el puerto de videojuego \_ categoría \_ .</span><span class="sxs-lookup"><span data-stu-id="976c1-137">The pin category for video port pins is PIN\_CATEGORY\_VIDEOPORT.</span></span>

<span data-ttu-id="976c1-138">Cada filtro de captura tiene al menos un PIN de captura.</span><span class="sxs-lookup"><span data-stu-id="976c1-138">Every capture filter has at least one capture pin.</span></span> <span data-ttu-id="976c1-139">Además, podría tener un PIN de vista previa o un PIN de puerto de vídeo, pero nunca ambos.</span><span class="sxs-lookup"><span data-stu-id="976c1-139">In addition it might have a preview pin or a video port pin, but never both.</span></span> <span data-ttu-id="976c1-140">Los filtros pueden tener varias clavijas de captura y versiones preliminares, cada una de las cuales proporciona un tipo de medio independiente.</span><span class="sxs-lookup"><span data-stu-id="976c1-140">Filters can have multiple capture pins and preview pins, each delivering a separate media type.</span></span> <span data-ttu-id="976c1-141">Por lo tanto, un solo filtro podría tener un PIN de captura de vídeo, un PIN de vista previa de vídeo, un PIN de captura de audio y un PIN de vista previa de audio.</span><span class="sxs-lookup"><span data-stu-id="976c1-141">Thus, a single filter could have a video capture pin, a video preview pin, an audio capture pin, and an audio preview pin.</span></span> <span data-ttu-id="976c1-142">Sin embargo, no hay nada equivalente a un puerto de vídeo para audio.</span><span class="sxs-lookup"><span data-stu-id="976c1-142">(There is nothing equivalent to a video port for audio, however.)</span></span>

<span data-ttu-id="976c1-143">**Filtros WDM ascendentes**</span><span class="sxs-lookup"><span data-stu-id="976c1-143">**Upstream WDM Filters**</span></span>

<span data-ttu-id="976c1-144">Es posible que los dispositivos Modelo de controlador de Windows (WDM) requieran algunos filtros adicionales ascendentes desde el filtro de captura.</span><span class="sxs-lookup"><span data-stu-id="976c1-144">Windows Driver Model (WDM) devices may require some additional filters upstream from the capture filter.</span></span> <span data-ttu-id="976c1-145">Estos filtros incluyen los siguientes:</span><span class="sxs-lookup"><span data-stu-id="976c1-145">These filters include the following:</span></span>

-   <span data-ttu-id="976c1-146">[Filtro de sintonizador de TV](tv-tuner-filter.md).</span><span class="sxs-lookup"><span data-stu-id="976c1-146">[TV Tuner Filter](tv-tuner-filter.md).</span></span> <span data-ttu-id="976c1-147">Controla la optimización de sintonizadores de TV analógicas.</span><span class="sxs-lookup"><span data-stu-id="976c1-147">Controls tuning for analog TV tuners.</span></span>
-   <span data-ttu-id="976c1-148">[Filtro de audio de TV](tv-audio-filter.md).</span><span class="sxs-lookup"><span data-stu-id="976c1-148">[TV Audio Filter](tv-audio-filter.md).</span></span> <span data-ttu-id="976c1-149">Controla la configuración de audio para sintonizadores de TV analógicos.</span><span class="sxs-lookup"><span data-stu-id="976c1-149">Controls audio settings for analog TV tuners.</span></span>
-   <span data-ttu-id="976c1-150">[Filtro de barras de vídeos analógicos](analog-video-crossbar-filter.md).</span><span class="sxs-lookup"><span data-stu-id="976c1-150">[Analog Video Crossbar Filter](analog-video-crossbar-filter.md).</span></span> <span data-ttu-id="976c1-151">Enruta las señales de vídeo y audio a través del dispositivo de hardware.</span><span class="sxs-lookup"><span data-stu-id="976c1-151">Routes video and audio signals through the hardware device.</span></span> <span data-ttu-id="976c1-152">Por ejemplo, un dispositivo puede tener varias entradas, como S-video y vídeo compuesto.</span><span class="sxs-lookup"><span data-stu-id="976c1-152">For example, a device might have multiple inputs, such as S-Video and composite video.</span></span> <span data-ttu-id="976c1-153">El filtro de barras cruzadas permite a la aplicación seleccionar la entrada.</span><span class="sxs-lookup"><span data-stu-id="976c1-153">The crossbar filter enables the application to select the input.</span></span>

<span data-ttu-id="976c1-154">Aunque se trata de filtros independientes en DirectShow, normalmente representan el mismo dispositivo de hardware.</span><span class="sxs-lookup"><span data-stu-id="976c1-154">Although these are separate filters in DirectShow, they typically represent the same hardware device.</span></span> <span data-ttu-id="976c1-155">Cada filtro controla una función diferente del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="976c1-155">Each filter controls a different function of the device.</span></span> <span data-ttu-id="976c1-156">Los filtros están conectados mediante PIN, pero no se mueven datos multimedia a través de las conexiones del PIN.</span><span class="sxs-lookup"><span data-stu-id="976c1-156">The filters are connected by pins, but no media data moves across the pin connections.</span></span> <span data-ttu-id="976c1-157">Por lo tanto, los pin de estos filtros no se conectan estableciendo un tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="976c1-157">Therefore, the pins on these filters do not connect by establishing a media type.</span></span> <span data-ttu-id="976c1-158">En su lugar, usan valores GUID denominados *medios*.</span><span class="sxs-lookup"><span data-stu-id="976c1-158">Instead, they use GUID values called *mediums*.</span></span> <span data-ttu-id="976c1-159">Los GUID de medio se definen de forma única para un minicontrolador de dispositivo determinado.</span><span class="sxs-lookup"><span data-stu-id="976c1-159">Medium GUIDs are uniquely defined for a given device minidriver.</span></span> <span data-ttu-id="976c1-160">Por ejemplo, el filtro de sintonizador de TV y el filtro de captura de vídeo para la misma tarjeta de TV admiten el mismo medio, lo que permite a la aplicación crear el gráfico correctamente.</span><span class="sxs-lookup"><span data-stu-id="976c1-160">For example, the TV Tuner filter and the Video Capture filter for the same TV card will both support the same medium, which enables the application to build the graph correctly.</span></span>

<span data-ttu-id="976c1-161">En la práctica, siempre que use **ICaptureGraphBuilder2** para compilar los gráficos de captura, estos filtros se agregan automáticamente al gráfico.</span><span class="sxs-lookup"><span data-stu-id="976c1-161">In practice, as long as you are using **ICaptureGraphBuilder2** to build your capture graphs, these filters are added to the graph automatically.</span></span> <span data-ttu-id="976c1-162">Para obtener una explicación más detallada, consulte [filtros de controlador de clase WDM](wdm-class-driver-filters.md).</span><span class="sxs-lookup"><span data-stu-id="976c1-162">For a more detailed discussion, see [WDM Class Driver Filters](wdm-class-driver-filters.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="976c1-163">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="976c1-163">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="976c1-164">Acerca de la captura de vídeo en DirectShow</span><span class="sxs-lookup"><span data-stu-id="976c1-164">About Video Capture in DirectShow</span></span>](about-video-capture-in-directshow.md)
</dt> </dl>

 

 



