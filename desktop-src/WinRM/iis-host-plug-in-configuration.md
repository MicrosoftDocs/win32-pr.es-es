---
title: Configuración del complemento host de IIS
description: La configuración del complemento host Internet Information Services (IIS) de administración remota de Windows (WinRM) proporciona un mecanismo de hospedaje que permite a complementos de WinRM de terceros exponer datos de administración dentro de la infraestructura de WinRM.
ms.assetid: 234e6f7b-310f-499a-83e4-699ecf3816f0
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9547c96aedc5af23f2194bb9887238525b4ecf6fc6dc0ef8060b1318a960d637
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/11/2021
ms.locfileid: "119997645"
---
# <a name="iis-host-plug-in-configuration"></a>Configuración del complemento host de IIS

La configuración del complemento host Internet Information Services (IIS) de administración remota de Windows (WinRM) proporciona un mecanismo de hospedaje que permite a complementos de WinRM de terceros exponer datos de administración dentro de la infraestructura de WinRM.

En las secciones siguientes se describe la configuración del complemento de host de IIS:

-   [Detalles de hospedaje de IIS](#iis-hosting-details)
-   [Modelo de configuración de host de IIS](#iis-host-configuration-model)
-   [Configuración y detalles del host de IIS (WinRM)](/windows)
-   [Lectura de la configuración del host de IIS](#reading-iis-host-configuration)
-   [Enumeración de complementos en el servicio WinRM](#enumerating-plug-ins-on-the-winrm-service)

## <a name="iis-hosting-details"></a>Detalles de hospedaje de IIS

Una aplicación que configura e inicializa el procesador SOAP De WinRM en IIS recibirá solicitudes directamente de un cliente WinRM en otro equipo mediante el protocolo WS-Management. La aplicación también debe configurar un punto de conexión HTTP que identifique la aplicación para asegurarse de que todas las solicitudes se enrutar directamente a los complementos específicos de la aplicación. La aplicación también debe configurar qué complementos se van a cargar en el host de IIS y los mecanismos de autorización y autenticación necesarios. Al usar el servicio WinRM en IIS, se deben tener en cuenta los siguientes factores:

-   IIS no admite la autenticación Kerberos de forma predeterminada. Sin embargo, se puede crear un módulo iis para admitir la autenticación Kerberos.
-   El servicio IIS no aceptará solicitudes cifradas del servicio WinRM a través de HTTP.
-   Después de configurar un punto de conexión de IIS, se producirá un error en la primera solicitud que envíe con credenciales implícitas. sin embargo, todas las solicitudes posteriores se realizará correctamente. Se trata de un problema conocido con un sitio iis configurado con la autenticación en modo kernel predeterminada. Si se trata de un problema de bloqueo, se recomienda desactivar la autenticación en modo kernel.

## <a name="iis-host-configuration-model"></a>Modelo de configuración de host de IIS

Todas las aplicaciones que hospedan un procesador soap (Protocolo simple de acceso a objetos) de WinRM en IIS requieren configuración antes de que funcionen.

Cada configuración de aplicación es independiente de la de otras aplicaciones. Los siguientes conjuntos de configuraciones son necesarios, aunque posiblemente no es necesario cambiar todas las configuraciones, y se realizan a través del servicio WinRM principal:

-   Configuración general de la aplicación, incluidos los tiempos de espera de la operación.
-   Un complemento de autorización para autorizar solicitudes LiveID o asignar la cuenta Windows usuario a una cuenta de servicio más genérica.
-   Complementos de operación que el procesador SOAP de WinRM va a hospedar y usar para llevar a cabo las solicitudes reales.

Es posible que sea necesario configurar las siguientes configuraciones en IIS:

-   [*Información del*](windows-remote-management-glossary.md) punto de conexión del agente de escucha que define qué puertos y direcciones escuchan las solicitudes junto con cualquier certificado Capa de sockets seguros (SSL).
-   Asignación de certificados de cliente para asignar certificados de cliente a cuentas de usuario.
-   Configuración de autorización para limitar quién tiene acceso al sitio virtual.

El servicio WinRM registra el puerto 5985 con el prefijo "wsman" de forma predeterminada. Si el agente de escucha HTTP de compatibilidad está habilitado, el servicio WinRM registra el puerto 80 con el prefijo "wsman" de forma predeterminada. Dado que IIS también escucha en el puerto 80 de forma predeterminada, se recomienda que los servicios host de IIS creen agentes de escucha [*en*](windows-remote-management-glossary.md) otro puerto.

Si iis y el servicio WinRM comparten el puerto 80, se necesita la siguiente configuración para compartir el puerto:

-   El servicio host de IIS debe habilitar WinRM en una aplicación en el sitio.
-   El nombre de la aplicación debe agregarse al URI. Por ejemplo: https://servername/myapplication.

Cada aplicación host de IIS se almacena en la configuración de IIS como un archivo web.config que reside en el directorio físico correspondiente al directorio virtual configurado. En la sección siguiente se describe cómo funciona el sistema de configuración de IIS y cómo se puede ampliar para admitir la configuración del host de IIS de WinRM.

### <a name="how-iis-configuration-works"></a>Funcionamiento de la configuración de IIS

La infraestructura de configuración de IIS consta de un conjunto de archivos XML que se usan para almacenar datos de configuración y un conjunto de archivos de esquema que se usan para validar los datos escritos en las API de administración de IIS o leer a través de ellos. En el nivel raíz, hay un archivo ApplicationHost.config en el mismo directorio que IIS (normalmente, %windir% \\ System32 \\ InetSrv \\ Config). Este es el archivo de configuración principal de IIS, donde se almacena la lista de sitios, aplicaciones, directorios virtuales, configuración general, registro, almacenamiento en caché, entre otros. Los datos de configuración se dividen en las secciones y se accede a estos como **entidades independientes.**

Por ejemplo, hay secciones independientes **para** sitios, registro, almacenamiento en caché, y así sucesivamente. Los datos de configuración contenidos en ApplicationHost.config se aplican a todos los sitios, aplicaciones y directorios virtuales configurados en IIS. En el nivel de directorio virtual, un archivo web.config define los datos de configuración específicos de la aplicación, posiblemente reemplazando otros datos ya definidos en ApplicationHost.config. Web.config archivos se almacenan en la raíz (directorio físico) correspondiente al sitio, la aplicación o el directorio virtual al que se aplica la configuración.

Para obtener más información sobre la configuración de IIS, vea lo siguiente:

-   [Esquema de Configuración IIS 7.0](/previous-versions/iis/settings-schema/aa347559(v=vs.90))
-   [/archive/blogs/carlosag/](/archive/blogs/carlosag/)
-   [https://www.iis.net/articles/view.aspx/IIS7/Use-IIS7-Administration-Tools/Using-XML-Configuration/Deep-Dive-into-IIS7](https://www.iis.net/learn/get-started/planning-your-iis-architecture/deep-dive-into-iis-configuration-with-iis-7-and-iis-8)

El esquema de configuración de IIS que se usa para validar los datos de configuración de IIS es archivos XML almacenados en el directorio de esquema de IIS (normalmente, %windir% \\ System32 \\ InetSrv \\ Config \\ Schema). El esquema de configuración de IIS no es XSD. La configuración de IIS admite la extensibilidad. Las nuevas secciones de configuración se pueden integrar directamente en el sistema de configuración de IIS y la configuración del sistema de configuración de IIS se puede manipular mediante las API de administración existentes.

Estos son los pasos principales implicados:

-   Defina una nueva sección de configuración en un archivo de esquema XML.
-   Coloque el archivo en el directorio de esquema de IIS 7 (%windir% \\ System32 \\ InetSrv \\ Config \\ Schema).
-   Registre la nueva sección en el archivo de configuración global de IIS (ApplicationHost.config).

## <a name="iis-host-winrm-configuration-setup-and-details"></a>Configuración y detalles del host de IIS (WinRM)

En esta sección se describen los pasos que se deben realizar durante la instalación para integrar e inicializar la configuración del host de IIS. Aquí, la configuración del host de IIS hace referencia a los datos de configuración necesarios para ejecutar el servicio WinRM en IIS. El módulo de extensión IIS de WinRM es un componente opcional que se instala mediante **el Administrador del servidor**.

La sección de configuración de IIS que define la configuración necesaria se **denominasystem.management.wsmanagement.config**. Normalmente, la configuración del host de IIS se define durante la instalación. Para ello, cree un archivo web.config y agregue el XML adecuado. Cualquier cambio en el archivo web.config requiere reiniciar el sitio que hospeda el servicio WinRM.

En el procedimiento siguiente se describe la configuración de la extensión DE IIS de WinRM en detalle.

**Para instalar la extensión de IIS de WinRM**

1.  En la **sección Resumen de características** de la Administrador del servidor , haga clic en Agregar **características.** 
2.  En el Asistente para agregar características, seleccione Extensión IIS de WinRM.
3.  Siga las instrucciones del asistente, incluida la instalación del software necesario si se indica alguno. Para obtener más información sobre el uso del Asistente para agregar características, consulte el Administrador del servidor **en** línea.

### <a name="initializing-winrm-configuration-for-the-hosted-application"></a>Inicialización de la configuración de WinRM para la aplicación hospedada

Este paso implica definir el XML de configuración del host de IIS en el web.config archivo. Este archivo reside en el directorio físico correspondiente al directorio virtual donde está configurada la aplicación hospedada. El contenido XML de la **secciónsystem.management.wsmanagement.config** debe ajustarse al esquema definido en wsmanconfigschema.xml; de lo contrario, las API de administración de IIS no podrán \_ procesarlo. A continuación se muestra un ejemplo de contenido XML que podría incluirse en el web.config archivo:


```XML
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
 <system.webServer>
  <system.management.wsmanagement.config>
   <OperationsConfiguration MaxEnvelopeSizeKB="150" 
                            MaxOperationTimeoutSeconds="60"  
                            MaxEnumerateIdleTimeoutSeconds="60"  
                            MaxSubscribeIdleTimeoutSeconds="60"  
                            MaxShellIdleTimeoutMinutes="15"
                            QuotaRefreshIntervalSeconds="900"
                            QuotaSystemWindowSeconds="2"
                            QuotaSystemWindowOperations-"1000"/>
    <PluginModules>
     <AuthorizationPlugin Name="Auth1" Filename="Auth.dll" SDKVersion="1" SupportsQuota="true"/>
     <OperationsPlugins>
      <Plugin Name="PL1" Filename="PL1.dll" SDKVersion="1" XmlRenderingType="text">
       <InitializationParameters>
        <Param name="myParam1" value="myValue1"/>
       </InitializationParameters>
       <Resources>
        <Resource ResourceUri="myUri1">
        <Capability Type="Shell"/>
        </Resource>
       </Resources>
      </Plugin>
      <Plugin Name="PL2" Filename="PL2.dll" SDKVersion="1" XmlRenderingType="text">
       <InitializationParameters/>
       <Resources>
        <Resource ResourceUri="myUri1">
         <Capability Type="Get"/>
         <Capability Type="Put"/>
         <Capability Type="Delete"/>
        </Resource>
       </Resources>
      </Plugin>
     </OperationsPlugins>
    </PluginModules>
   </OperationsConfiguration>
  </system.management.wsmanagement.config>
 </system.webServer>
</configuration>
```



En la lista siguiente se describen los elementos XML con más detalle y va seguido de un ejemplo de un archivoschema.xml \_ wsmanconfig.



| Elemento                                                        | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|----------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| OperationsConfiguration/MaxEnvelopeSizeKB                      | Tamaño máximo de los paquetes SOAP que procesará el servicio WinRM. El valor predeterminado es 150 KB.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| OperationsConfiguration/MaxOperationTimeoutSeconds             | Intervalo de tiempo de espera máximo para todas las operaciones. Este valor invalida cualquier valor que se reciba en un paquete SOAP. Si un proveedor supera este valor, se envía un tiempo de espera al cliente y se cancelará la operación. (Algunas operaciones, como las enumeraciones, pueden mantener una enumeración abierta después de un tiempo de espera). El valor predeterminado es 60 segundos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| OperationsConfiguration/MaxEnumerationIdleTimeoutSeconds       | Intervalo de tiempo de espera máximo para enumeraciones. Si el tiempo entre las solicitudes de enumeración es mayor que este valor, se cancela la enumeración y el contexto de enumeración emitido previamente ya no es válido. El valor predeterminado es 60 segundos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| OperationsConfiguration/MaxSubscribeIdleTimeoutSeconds         | Intervalo de tiempo de espera máximo para las operaciones de suscripción. El valor predeterminado es 60 segundos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| OperationsConfiguration/MaxShellIdleTimeoutMinutes             | Tiempo máximo en minutos antes de que se elimine un shell remoto inactivo. El valor predeterminado es 15 minutos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| OperationsConfiguration/QuotaRefreshIntervalSeconds            | Intervalo anterior a la actualización de la información de cuota de un usuario. Las solicitudes pendientes para el usuario especificado continúan ejecutándose en el contexto de autorización y cuota anterior hasta que se complete la actualización. El valor predeterminado es 900 segundos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| OperationsConfiguration/QuotaSystemWindowSeconds               | Duración de la ventana deslizante del acelerador del sistema. El valor predeterminado es de 2 segundos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| OperationsConfiguration/QuotaSystemWindowOperations            | Número de operaciones que se admiten a través de la limitación del sistema durante la ventana deslizante. El valor predeterminado es 1000 operaciones.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| PlugInModules/AuthorizationPlugin                              | Este nodo es opcional. Un complemento de autorización permite una manera mediante programación de aceptar o rechazar a un usuario entrante en función de esquemas de autenticación diferentes.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| PlugInModules/AuthorizationPlugin/Name                         | Especifica el nombre para mostrar que se usará para el complemento. Si se devuelve un error desde el complemento, este nombre se colocará en el XML de error que se devuelve a la aplicación cliente. El nombre no es específico de la configuración regional.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| PlugInModules/AuthorizationPlugin/Filename                     | Especifica el nombre de archivo del complemento de autorización. Las variables de entorno que se coloquen en esta entrada se expandirán en función de la identidad en la que se ejecuta el host de IIS, como Servicio de red. El valor predeterminado de esta entrada está vacío, lo que significa que no se usa ningún complemento de autorización.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| PlugInModules/AuthorizationPlugin/SDKVersion                   | Especifica la versión del kit de desarrollo de software (SDK) para la que se escribió un complemento determinado. Este elemento debe establecerse en 1.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| PlugInModules/AuthorizationPlugin/SupportsQuota                | Especifica si el complemento de autorización admite cuotas.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| PlugInModules/OperationsPlugins/Name                           | Especifica el nombre para mostrar que se usará para el complemento. Si se devuelve un error desde el complemento, este nombre se colocará en el XML de error que se devuelve a la aplicación cliente. El nombre no es específico de la configuración regional.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| PlugInModules/OperationsPlugins/FileName                       | Especifica el nombre de archivo del complemento de operación. Las variables de entorno que se coloquen en esta entrada se expandirán en el contexto del usuario cuando llegue una solicitud. Cada usuario podría tener una versión diferente de la misma variable de entorno, por lo que cada usuario podría terminar con un complemento diferente. Esta entrada no puede estar en blanco y debe apuntar a un complemento válido.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| PlugInModules/OperationsPlugins/SDKVersion                     | Especifica la versión del SDK para la que se escribió un complemento determinado. Este elemento debe establecerse en 1.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| PlugInModules/OperationsPlugins/XmlRenderingType               | Configura el formato en el que xml se pasa a los complementos a través del [**objeto DATA de WSMAN. \_**](/windows/desktop/api/Wsman/ns-wsman-wsman_data) **XmlRenderingType** se establece en texto. Los datos XML entrantes se encuentran en una estructura TEXT de tipo de datos de WSMAN, que representa el XML como \_ \_ búfer de memoria \_ **PCWSTR.**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| PlugInModules/OperationsPlugins/InitializationParameters       | Este nodo es opcional y permite que un complemento configure XML adicional que se pasará al [**método WSManPluginStartup.**](/windows/desktop/api/Wsman/nc-wsman-wsman_plugin_startup) La mayoría de los complementos no necesitarán esta información adicional, pero si es necesario usar un complemento en más de un escenario que requiera semántica en tiempo de ejecución diferente, este XML dará al complemento la flexibilidad necesaria.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| PlugInModules/OperationsPlugins/Resources                      | Especifica una lista de uri [*de recursos*](windows-remote-management-glossary.md) que admite este complemento. Se debe especificar al menos una entrada **ResourceUri;** De lo contrario, se rechazará el XML.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| PlugInModules/OperationsPlugins/Resources/Resource             | Representa una configuración de [*URI de recurso*](windows-remote-management-glossary.md) único.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| PlugInModules/OperationsPlugins/Resources/Resource/ResourceUri | Especifica un uri de [*recurso único*](windows-remote-management-glossary.md) completo o como una cadena de coincidencia parcial basada en el **atributo ExactMatch.** Si **ExactMatch** no está presente, el valor predeterminado es **False,** lo que significa que el procesador SOAP de WinRM hará una coincidencia parcial con el inicio del *URI* del recurso y, si hay una coincidencia, lo pasará al complemento. El **atributo SupportsOptions** se puede especificar si este *URI* de recurso puede tener cualquier opción pasada. De forma predeterminada, no se admite ninguna opción y, si hay alguna en la solicitud de cliente, se devolverá un error. Si el complemento admite opciones, es importante que el complemento devuelva el error correcto si hay una opción que el complemento no entiende cuando la marca **mustUnderstand** está establecida en **TRUE.**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| PlugInModules/OperationsPlugins/Resource/Capability            | Especifica una funcionalidad que está disponible en este [*URI de recurso.*](windows-remote-management-glossary.md) Habrá una entrada para cada tipo de operación que admita. Están disponibles las opciones siguientes:<br/> <dl> <dt><span id="Get"></span><span id="get"></span><span id="GET"></span>Obtener</dt> <dd> Las operaciones get se admiten en el [*URI del recurso.*](windows-remote-management-glossary.md) El **atributo SupportFragment** se usa si la operación get admite el concepto . El **atributo SupportFiltering** no es válido y debe establecerse en **False.** Esta funcionalidad no es válida para un *URI de recurso* si también se admiten operaciones de shell.<br/> </dd> <dt><span id="Put"></span><span id="put"></span><span id="PUT"></span>Poner</dt> <dd> Las operaciones put se admiten en el [*URI del recurso.*](windows-remote-management-glossary.md) El **atributo SupportFragment** se usa si la operación put admite el concepto . El **atributo SupportFiltering** no es válido y debe establecerse en **False.** Esta funcionalidad no es válida para un *URI de recurso* si también se admiten operaciones de shell.<br/> </dd> <dt><span id="Create"></span><span id="create"></span><span id="CREATE"></span>Crear</dt> <dd> Las operaciones de creación se admiten en el [*URI del recurso.*](windows-remote-management-glossary.md) El **atributo SupportFragment** se usa si la operación de creación admite el concepto . El **atributo SupportFiltering** no es válido y debe establecerse en **False.** Esta funcionalidad no es válida para un *URI de recurso* si también se admiten operaciones de shell.<br/> </dd> <dt><span id="Delete"></span><span id="delete"></span><span id="DELETE"></span>Eliminar</dt> <dd> Las operaciones de eliminación se admiten en el [*URI del recurso.*](windows-remote-management-glossary.md) El **atributo SupportFragment** se usa si la operación de eliminación admite el concepto . El **atributo SupportFiltering** no es válido y debe establecerse en **False.** Esta funcionalidad no es válida para un *URI de recurso* si también se admiten operaciones de shell.<br/> </dd> <dt><span id="Invoke"></span><span id="invoke"></span><span id="INVOKE"></span>Invocar</dt> <dd> Las operaciones de invocación se admiten en el [*URI del recurso.*](windows-remote-management-glossary.md) El **atributo SupportFragment no** se admite para las operaciones de invocación y debe establecerse en **False.** El **atributo SupportFiltering** no es válido y debe establecerse en **False.** Esta funcionalidad no es válida para un *URI de recurso* si también se admiten operaciones de shell.<br/> </dd> <dt><span id="Enumerate"></span><span id="enumerate"></span><span id="ENUMERATE"></span>Enumerar</dt> <dd> Las operaciones de enumeración se admiten en el [*URI del recurso*](windows-remote-management-glossary.md). El **atributo SupportFragment** no se admite para las operaciones de enumeración y debe establecerse en **False.** El **atributo SupportFiltering** es válido y, si el complemento admite el filtrado, este atributo debe establecerse en **True.** Esta funcionalidad no es válida para un *URI de recurso* si también se admiten operaciones de shell.<br/> </dd> <dt><span id="Subscribe"></span><span id="subscribe"></span><span id="SUBSCRIBE"></span>Suscribirse</dt> <dd> Las operaciones de suscripción se admiten en el [*URI del recurso.*](windows-remote-management-glossary.md) El **atributo SupportFragment no** se admite para las operaciones de suscripción y debe establecerse en **False.** El **atributo SupportFiltering** no es válido y debe establecerse en **False.** Esta funcionalidad no es válida para un *URI de recurso* si también se admiten operaciones de shell.<br/> </dd> <dt><span id="Shell"></span><span id="shell"></span><span id="SHELL"></span>Shell</dt> <dd> Las operaciones de shell se admiten en el [*URI del recurso*](windows-remote-management-glossary.md). El **atributo SupportFragment no** se admite para las operaciones de shell y debe establecerse en **False.** El **atributo SupportFiltering** no es válido y debe establecerse en **False.** Esta funcionalidad no es válida para un *URI de recurso* si también se admite cualquier otra funcionalidad de operación. Si se configura una funcionalidad de operación de shell para un *URI* de recurso, las operaciones get, put, create, delete, invoke y enumerate se procesan internamente en el servicio WinRM para administrar shells. Como resultado, el complemento no puede tratar con las propias operaciones.<br/> </dd> </dl> |



 

### <a name="example-wsmanconfig_schemaxml-file"></a>Ejemplo de archivoschema.xml \_ wsmanconfig

Durante la configuración, se descarta un archivo XMLschema.xml wsmanconfig que contiene el siguiente contenido \_ en el directorio de esquema iis:


```XML
<configSchema>
 <sectionSchema name="system.webServer/system.management.wsmanagement.config">
  <element name="OperationsConfiguration">
   <attribute name="MaxEnvelopeSizeKB" 
              type="uint" 
              defaultValue="150" 
              validationType="integerRange" 
              validationParameter="32,4294967295"/>
   <attribute name="MaxOperationTimeoutSeconds" 
              type="uint" 
              defaultValue="60" 
              validationType="integerRange" 
              validationParameter="1,4294967295"/>
   <attribute name="MaxEnumerateIdleTimeoutSeconds" 
              type="uint" 
              defaultValue="60" 
              validationType="integerRange" 
              validationParameter="1,4294967295"/>
   <attribute name="MaxSubscribeIdleTimeoutSeconds" 
              type="uint" 
              defaultValue="60" 
              validationType="integerRange" 
              validationParameter="1,4294967295"/>
   <attribute name="MaxShellIdleTimeoutMinutes" 
              type="uint" 
              defaultValue="15" 
              validationType="integerRange" 
              validationParameter="0,4294967295"/>
   <attribute name="QuotaRefreshIntervalSeconds" 
              type="uint" 
              defaultValue="900" 
              validationType="integerRange" 
              validationParameter="0,4294967295"/>
   <attribute name="QuotaSystemWindowSeconds" 
              type="uint" 
              defaultValue="2" 
              validationType="integerRange" 
              validationParameter="0,4294967295"/>
   <attribute name="QuotaSystemWindowOperations" 
              type="uint" 
              defaultValue="1000" 
              validationType="integerRange" 
              validationParameter="0,4294967295"/>
  </element>
  <element name="PluginModules">
   <collection addElement="AuthorizationPlugin">
    <attribute name="Name" type="string" isUniqueKey="true" required="true" validationType="nonEmptyString"/>
    <attribute name="Filename" type="string" required="true" validationType="nonEmptyString"/>
    <attribute name="SDKVersion" type="uint" required="true"/>
    <attribute name="SupportsQuota" type="bool" defaultValue="false"/>
   </collection>
   <element name="OperationsPlugins">
    <collection addElement="Plugin">
     <attribute name="Name" type="string" isUniqueKey="true" required="true" validationType="nonEmptyString"/>
     <attribute name="Filename" type="string" required="true" validationType="nonEmptyString"/>
     <attribute name="SDKVersion" type="uint" required="true"/>
     <attribute name="XmlRenderingType" type="enum" defaultValue="text">
      <enum name="text" value="1"/>
      <enum name="XmlReader" value="2"/>
     </attribute>
     <attribute name="Enabled" type="bool" defaultValue="true"/>
     <element name="InitializationParameters">
      <collection addElement="Param">
       <attribute name="Name" type="string" isUniqueKey="true" required="true" validationType="nonEmptyString"/>
       <attribute name="Value" type="string" required="true" validationType="nonEmptyString"/>
      </collection>
     </element>
     <element name="Resources">
      <collection addElement="Resource">
       <attribute name="ResourceUri" type="string" isUniqueKey="true" required="true" validationType="nonEmptyString"/>
       <attribute name="SupportsOptions" type="bool" defaultValue="false"/>
       <attribute name="ExactMatch" type="bool" defaultValue="false"/>
       <collection addElement="Capability">
        <attribute name="Type" type="enum" isUniqueKey="true" required="true">
         <enum name="Get" value="1"/>
         <enum name="Put" value="2"/>
         <enum name="Create" value="3"/>
         <enum name="Delete" value="4"/>
         <enum name="Invoke" value="5"/>
         <enum name="Enumerate" value="6"/>
         <enum name="Subscribe" value="7"/>
         <enum name="Shell" value="8"/>
        </attribute>
        <attribute name="SupportsFragment" type="bool" default="false"/>
        <attribute name="SupportsFiltering" type="bool" default="false"/>
       </collection>
      </collection>
     </element>
    </collection>
   </element>
  </element>
 </sectionSchema>
</configSchema>
```



## <a name="reading-iis-host-configuration"></a>Lectura de la configuración del host de IIS

La configuración del host de IIS se lee durante el proceso de inicio del procesador SOAP en la aplicación hospedada. Dado web.config archivos se pueden editar manualmente y, por lo tanto, son propensos a errores de validación de esquema, puede haber problemas al leer una configuración. Durante un error de lectura o validación de la configuración, la aplicación hospedada no se iniciará y devolverá un mensaje de error adecuado al cliente. Se registrará un evento que contiene una descripción detallada de lo que produjo el error.

Entre los errores comunes se incluyen los siguientes:

-   Acceso denegado
-   XML de configuración no válido
-   No hay ningún complemento configurado (se requiere al menos uno)

Los complementos estándar no están configurados de forma predeterminada. Deben configurarse explícitamente en el archivo web.config para que empiecen a recibir solicitudes.

## <a name="enumerating-plug-ins-on-the-winrm-service"></a>Enumeración de complementos en el servicio WinRM

El siguiente comando muestra cómo usar la utilidad winrm para determinar qué complementos están disponibles en el servicio WinRM: **winrm enumerar winrm/config/plugin -format:pretty**.

 

