---
description: El proceso de codificación es el inverso del proceso de descodificación descrito en descodificar una estructura de información de certificado \_ .
ms.assetid: 5d3311e5-a2fb-46f7-aa76-f232b39b34fd
title: Codificar una estructura de CERT_INFO
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 645a1d3054546a7b11c57d4f515dc7d3e26b5fe0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105669815"
---
# <a name="encoding-a-cert_info-structure"></a><span data-ttu-id="2f07b-103">Codificar una estructura de información de certificado \_</span><span class="sxs-lookup"><span data-stu-id="2f07b-103">Encoding a CERT\_INFO Structure</span></span>

<span data-ttu-id="2f07b-104">El proceso de codificación es el inverso del proceso de descodificación descrito en [descodificar una \_ estructura de información de certificado](decoding-a-cert-info-structure.md).</span><span class="sxs-lookup"><span data-stu-id="2f07b-104">The encoding process is the reverse of the decoding process described in [Decoding a CERT\_INFO Structure](decoding-a-cert-info-structure.md).</span></span> <span data-ttu-id="2f07b-105">Por ejemplo, el siguiente procedimiento agregaría un **emisor** codificado a una estructura de [**\_ información de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) .</span><span class="sxs-lookup"><span data-stu-id="2f07b-105">For example, the following procedure would add an encoded **Issuer** to a [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) structure.</span></span> <span data-ttu-id="2f07b-106">Vea también la ilustración que sigue al procedimiento.</span><span class="sxs-lookup"><span data-stu-id="2f07b-106">Also see the illustration that follows the procedure.</span></span>

<span data-ttu-id="2f07b-107">**Para agregar un emisor codificado a una estructura de información de certificado \_**</span><span class="sxs-lookup"><span data-stu-id="2f07b-107">**To add an encoded Issuer to a CERT\_INFO structure**</span></span>

1.  <span data-ttu-id="2f07b-108">Cree una cadena que contenga el nombre del emisor que se va a usar.</span><span class="sxs-lookup"><span data-stu-id="2f07b-108">Create a string containing the issuer name to be used.</span></span>
2.  <span data-ttu-id="2f07b-109">Cree una matriz de estructuras [**CERT \_ RDN \_ ATTR**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) , que se inicializará para contener la información adecuada sobre la cadena del nombre del emisor que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="2f07b-109">Create an array of [**CERT\_RDN\_ATTR**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) structures, which will be initialized to contain the proper information about the issuer name string just created.</span></span>
3.  <span data-ttu-id="2f07b-110">Cree una matriz de [**estructuras \_ RDN de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) , una de las cuales tiene la información sobre la matriz de estructuras de [**CERT \_ RDN \_**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) que se acaba de inicializar.</span><span class="sxs-lookup"><span data-stu-id="2f07b-110">Create an array of [**CERT\_RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) structures, one of which has the information about the array of [**CERT\_RDN\_ATTR**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn_attr) structures just initialized.</span></span>
4.  <span data-ttu-id="2f07b-111">Cree una estructura de [**\_ \_ información de nombre de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) que tenga un puntero a la matriz de estructuras de [**CERT \_ RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="2f07b-111">Create a [**CERT\_NAME\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) structure that has a pointer to the array of [**CERT\_RDN**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_rdn) structures that just created.</span></span>
5.  <span data-ttu-id="2f07b-112">Llame a [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) para obtener el tamaño del BLOB codificado de salida, pasándole la dirección de la estructura de [**\_ \_ información del nombre de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) que acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="2f07b-112">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) to get the size of the output encoded BLOB, passing it the address of the [**CERT\_NAME\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_name_info) structure that you just created.</span></span>
6.  <span data-ttu-id="2f07b-113">Asigne memoria para el BLOB codificado de salida.</span><span class="sxs-lookup"><span data-stu-id="2f07b-113">Allocate memory for the output encoded BLOB.</span></span>
7.  <span data-ttu-id="2f07b-114">Vuelva a llamar a [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) , pasándole la misma información, pero ahora pásele la dirección de la memoria que acaba de asignar.</span><span class="sxs-lookup"><span data-stu-id="2f07b-114">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) again, passing it the same information, but now passing it the address of the memory just allocated.</span></span>
8.  <span data-ttu-id="2f07b-115">Establezca el miembro **issuer. cbData** de la estructura de [**\_ información de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) en el tamaño devuelto en el paso 5 y el miembro **issuer. pbData** en la dirección obtenida en el paso 6.</span><span class="sxs-lookup"><span data-stu-id="2f07b-115">Set the **Issuer.cbData** member of the [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) structure to the size returned in step 5, and the **Issuer.pbData** member to the address obtained in step 6.</span></span> <span data-ttu-id="2f07b-116">El BLOB de **emisor** codificado ahora reside allí.</span><span class="sxs-lookup"><span data-stu-id="2f07b-116">The encoded **Issuer** BLOB now resides there.</span></span>

![Agregar un emisor codificado a una estructura de información de certificado \-](images/encflow.png)

<span data-ttu-id="2f07b-118">Para inicializar y codificar parte de la información de la extensión del certificado, use el procedimiento siguiente.</span><span class="sxs-lookup"><span data-stu-id="2f07b-118">To initialize and encode some certificate extension information, use the following procedure.</span></span> <span data-ttu-id="2f07b-119">Vea también la ilustración que sigue al procedimiento.</span><span class="sxs-lookup"><span data-stu-id="2f07b-119">Also see the illustration that follows the procedure.</span></span>

<span data-ttu-id="2f07b-120">**Para agregar información de extensión codificada a una estructura de información de certificado \_**</span><span class="sxs-lookup"><span data-stu-id="2f07b-120">**To add encoded extension information to a CERT\_INFO structure**</span></span>

1.  <span data-ttu-id="2f07b-121">Crear e inicializar una estructura de información de la extensión: en este ejemplo, es una estructura de información de [**\_ \_ restricciones \_ básicas de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_basic_constraints_info) .</span><span class="sxs-lookup"><span data-stu-id="2f07b-121">Create and initialize an extension information structure—for this example, it is a [**CERT\_BASIC\_CONSTRAINTS\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_basic_constraints_info) structure.</span></span>
2.  <span data-ttu-id="2f07b-122">Llame a [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject), pasándole la dirección de la estructura que acaba de crear, para obtener el tamaño del BLOB codificado de salida.</span><span class="sxs-lookup"><span data-stu-id="2f07b-122">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject), passing it the address of the structure just created, to get the size of the output encoded BLOB.</span></span>
3.  <span data-ttu-id="2f07b-123">Asigne memoria para el BLOB codificado de salida.</span><span class="sxs-lookup"><span data-stu-id="2f07b-123">Allocate memory for the output encoded BLOB.</span></span>
4.  <span data-ttu-id="2f07b-124">Llame de nuevo a [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) , pasando la misma información, excepto que ahora pasa la dirección de la memoria asignada.</span><span class="sxs-lookup"><span data-stu-id="2f07b-124">Call [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject) again, passing the same information, except now pass in the address of the allocated memory.</span></span>
5.  <span data-ttu-id="2f07b-125">Cree una matriz de estructuras de [**\_ extensión de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) .</span><span class="sxs-lookup"><span data-stu-id="2f07b-125">Create an array of [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) structures.</span></span>
6.  <span data-ttu-id="2f07b-126">Inicialice una de las estructuras de [**\_ extensión de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) para **que pszObjId** sea la cadena adecuada para los datos contenidos en el **valor** y ese **valor** contenga el BLOB de datos cifrados que se ha generado desde la llamada a [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject).</span><span class="sxs-lookup"><span data-stu-id="2f07b-126">Initialize one of the [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) structures so that the **pszObjId** is the proper string for the data contained in **Value**, and that **Value** contains the encrypted data BLOB that was output from the call to [**CryptEncodeObject**](/windows/desktop/api/Wincrypt/nf-wincrypt-cryptencodeobject).</span></span>
7.  <span data-ttu-id="2f07b-127">Inicialice el miembro **rgExtension** de la estructura de [**\_ información de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) para que apunte a la matriz de estructuras de [**\_ extensión de certificado**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) .</span><span class="sxs-lookup"><span data-stu-id="2f07b-127">Initialize the **rgExtension** member of the [**CERT\_INFO**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_info) structure to point to the array of [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) structures.</span></span>

![agregar información de extensión codificada a una estructura de información de certificado \-](images/xtenflow.png)

 

 



