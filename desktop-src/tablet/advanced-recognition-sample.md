---
description: En el ejemplo de reconocimiento avanzado se muestran las características avanzadas de la interfaz de programación de aplicaciones (API) de automatización de Microsoft Tablet PC que se usa para el reconocimiento de escritura a mano.
ms.assetid: 4c9b9f31-c317-43fd-8404-35295b41d093
title: Ejemplo de reconocimiento avanzado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7e23a078ded9c6967f8e45780f8cb3a739b246f6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103807988"
---
# <a name="advanced-recognition-sample"></a><span data-ttu-id="cd964-103">Ejemplo de reconocimiento avanzado</span><span class="sxs-lookup"><span data-stu-id="cd964-103">Advanced Recognition Sample</span></span>

<span data-ttu-id="cd964-104">En el ejemplo de reconocimiento avanzado se muestran las características avanzadas de la interfaz de programación de aplicaciones (API) de automatización de Microsoft Tablet PC que se usa para el reconocimiento de escritura a mano.</span><span class="sxs-lookup"><span data-stu-id="cd964-104">The advanced recognition sample demonstrates advanced features of the Microsoft Tablet PC Automation application programming interface (API) used for handwriting recognition.</span></span>

<span data-ttu-id="cd964-105">Contiene las características siguientes:</span><span class="sxs-lookup"><span data-stu-id="cd964-105">It includes the following features:</span></span>

-   <span data-ttu-id="cd964-106">Enumerar el reconocedor instalado</span><span class="sxs-lookup"><span data-stu-id="cd964-106">Enumerating the installed recognizer</span></span>
-   <span data-ttu-id="cd964-107">Crear un contexto de reconocedor con un idioma específico</span><span class="sxs-lookup"><span data-stu-id="cd964-107">Creating a recognizer context with a specific language</span></span>
-   <span data-ttu-id="cd964-108">Usar el objeto Recognizer</span><span class="sxs-lookup"><span data-stu-id="cd964-108">Using the recognizer object</span></span>
-   <span data-ttu-id="cd964-109">Configuración de Factoid de reconocimiento y listas de palabras</span><span class="sxs-lookup"><span data-stu-id="cd964-109">Setting recognition factoid and word lists</span></span>
-   <span data-ttu-id="cd964-110">Usar guías para mejorar la calidad del reconocimiento</span><span class="sxs-lookup"><span data-stu-id="cd964-110">Using guides to improve the recognition quality</span></span>
-   <span data-ttu-id="cd964-111">Reconocimiento en segundo plano dinámico</span><span class="sxs-lookup"><span data-stu-id="cd964-111">Dynamic background recognition</span></span>
-   <span data-ttu-id="cd964-112">Reconocimiento de gestos</span><span class="sxs-lookup"><span data-stu-id="cd964-112">Gesture recognition</span></span>

<span data-ttu-id="cd964-113">Las interfaces utilizadas son: [**IInkRecognizer**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognizer), **IInkRecoContext**, [**IInkRecognitionResult**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionresult), **IInkRecognitionGuide**, **IInkWordList**, [**IInkGesture**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkgesture), **IInkCollector**, **IInkDisp**, **IInkRenderer**, **IInkDrawingAttributes**, **IInkStrokes** y **IInkStroke**.</span><span class="sxs-lookup"><span data-stu-id="cd964-113">The interfaces used are: [**IInkRecognizer**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognizer), **IInkRecoContext**, [**IInkRecognitionResult**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkrecognitionresult), **IInkRecognitionGuide**, **IInkWordList**, [**IInkGesture**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkgesture), **IInkCollector**, **IInkDisp**, **IInkRenderer**, **IInkDrawingAttributes**, **IInkStrokes**, and **IInkStroke**.</span></span>

## <a name="ink-and-project-headers"></a><span data-ttu-id="cd964-114">Encabezados de lápiz y de proyecto</span><span class="sxs-lookup"><span data-stu-id="cd964-114">Ink and Project Headers</span></span>

<span data-ttu-id="cd964-115">En primer lugar, incluya los encabezados de las interfaces de automatización de Tablet PC.</span><span class="sxs-lookup"><span data-stu-id="cd964-115">First, include the headers for Tablet PC Automation interfaces.</span></span> <span data-ttu-id="cd964-116">Se instalan con el SDK de la plataforma de Tablet PC.</span><span class="sxs-lookup"><span data-stu-id="cd964-116">These are installed with the Tablet PC Platform SDK.</span></span> <span data-ttu-id="cd964-117">El archivo TpcError. h contiene las definiciones de código de error de la API de Tablet PC.</span><span class="sxs-lookup"><span data-stu-id="cd964-117">The TpcError.h file contains the Tablet PC API Error Code definitions.</span></span>


```C++
#include <msinkaut.h>
#include <msinkaut_i.c>
#include <TpcError.h>
```



<span data-ttu-id="cd964-118">El archivo EventSinks. h define las interfaces **IInkEventsImpl** y **IInkRecognitionEventsImpl** , y configura los eventos [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md), [**Stroke**](inkcollector-stroke.md)y [**gesto**](inkcollector-gesture.md) .</span><span class="sxs-lookup"><span data-stu-id="cd964-118">The EventSinks.h file defines the **IInkEventsImpl** and **IInkRecognitionEventsImpl** interfaces, and sets up the [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md), [**Stroke**](inkcollector-stroke.md), and [**Gesture**](inkcollector-gesture.md) events.</span></span>


```C++
#include "EventSinks.h"
```



<span data-ttu-id="cd964-119">El archivo ChildWnds. h contiene las definiciones de las clases **CInkInputWnd** y **CRecoOutputWnd**, que se derivan del CWindowImpl de ATL y se usan para crear las ventanas secundarias del ejemplo.</span><span class="sxs-lookup"><span data-stu-id="cd964-119">The ChildWnds.h file contains the definitions of the classes **CInkInputWnd** and **CRecoOutputWnd**, which are derived from the ATL's CWindowImpl and used for creating the sample's child windows.</span></span>


```C++
#include "ChildWnds.h"
```



<span data-ttu-id="cd964-120">El archivo AdvReco. h declara la clase **CAdvRecoApp** , que es la clase de ventana de la aplicación para este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="cd964-120">The AdvReco.h file declares the **CAdvRecoApp** class, which is the application window class for this sample.</span></span>


```C++
#include "AdvReco.h"
```



## <a name="initializing-the-application-window"></a><span data-ttu-id="cd964-121">Inicialización de la ventana de la aplicación</span><span class="sxs-lookup"><span data-stu-id="cd964-121">Initializing the Application Window</span></span>

<span data-ttu-id="cd964-122">El método de la ventana `Run` configura el objeto **CAdvRecoApp** , carga el menú y el icono de la ventana, crea un objeto [**InkRecognizerContext**](inkrecognizercontext-class.md) para el reconocedor predeterminado e inicia el bucle de mensajes de la ventana.</span><span class="sxs-lookup"><span data-stu-id="cd964-122">The window's `Run` method sets up the **CAdvRecoApp** object, loads the menu and icon for the window, creates an [**InkRecognizerContext**](inkrecognizercontext-class.md) object for the default recognizer, and starts the window's message loop.</span></span>

<span data-ttu-id="cd964-123">El método **alcrear** de la ventana controla el evento de **\_ creación de WM** y crea las ventanas secundarias.</span><span class="sxs-lookup"><span data-stu-id="cd964-123">The window's **OnCreate** method handles the **WM\_CREATE** event and creates the child windows.</span></span> <span data-ttu-id="cd964-124">Un objeto [**InkCollector**](inkcollector-class.md) se conecta al origen de eventos del recopilador de tinta y habilita la entrada de lápiz en la ventana de entrada.</span><span class="sxs-lookup"><span data-stu-id="cd964-124">An [**InkCollector**](inkcollector-class.md) object connects to the ink collector's event source, and enables ink input on the input window.</span></span> <span data-ttu-id="cd964-125">A continuación, se crea un objeto [**InkRecognizerGuide**](inkrecognizerguide-class.md) y se usa la propiedad [**representador**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_renderer) del recopilador de tinta para convertir los rectángulos del cuadro guía de reconocimiento en el espacio de tinta.</span><span class="sxs-lookup"><span data-stu-id="cd964-125">Then it creates an [**InkRecognizerGuide**](inkrecognizerguide-class.md) object and uses the ink collector's [**Renderer**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_renderer) property to convert the recognition guide box rectangles to ink space.</span></span> <span data-ttu-id="cd964-126">Por último, el método **alcrear** crea un objeto [**InkWordList**](inkwordlist-class.md) .</span><span class="sxs-lookup"><span data-stu-id="cd964-126">Finally, the **OnCreate** method creates an [**InkWordList**](inkwordlist-class.md) object.</span></span>

## <a name="handling-ink-collector-events"></a><span data-ttu-id="cd964-127">Controlar eventos del recopilador de tinta</span><span class="sxs-lookup"><span data-stu-id="cd964-127">Handling Ink Collector Events</span></span>

<span data-ttu-id="cd964-128">El método stroke de la ventana controla el evento [**Stroke**](inkcollector-stroke.md) del recopilador **de tinta** .</span><span class="sxs-lookup"><span data-stu-id="cd964-128">The window's **OnStroke** method handles the ink collector's [**Stroke**](inkcollector-stroke.md) event.</span></span> <span data-ttu-id="cd964-129">El nuevo objeto [**IInkStrokeDisp**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) se agrega al [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) de la propiedad [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) del recopilador de tinta.</span><span class="sxs-lookup"><span data-stu-id="cd964-129">The new [**IInkStrokeDisp**](/windows/desktop/api/msinkaut/nn-msinkaut-iinkstrokedisp) object is added to the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector's [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) property.</span></span>

<span data-ttu-id="cd964-130">El método de **gestos** de la ventana controla el evento de [**gesto**](inkcollector-gesture.md) del recopilador de tinta.</span><span class="sxs-lookup"><span data-stu-id="cd964-130">The window's **OnGesture** method handles the ink collector's [**Gesture**](inkcollector-gesture.md) event.</span></span> <span data-ttu-id="cd964-131">El método de **gestos de movimiento** identifica el gesto, utilizando primero el gesto de mayor confianza y comprueba si la ventana admite este gesto en particular.</span><span class="sxs-lookup"><span data-stu-id="cd964-131">The **OnGesture** method identifies the gesture, using the highest confidence gesture first, and checks if the window supports this particular gesture.</span></span> <span data-ttu-id="cd964-132">Si se admite el gesto, se invalida el rectángulo de selección del gesto, ya que el gesto se quita de la colección de trazos.</span><span class="sxs-lookup"><span data-stu-id="cd964-132">If the gesture is supported, the gesture's bounding box is invalidated, as the gesture is removed from the strokes collection.</span></span> <span data-ttu-id="cd964-133">Si no se admite el gesto, se cancela el evento de **gesto** , lo que hace que el recopilador de tinta genere un evento de [**trazo**](inkcollector-stroke.md) .</span><span class="sxs-lookup"><span data-stu-id="cd964-133">If the gesture is not supported, the **Gesture** event is canceled, which causes the ink collector to raise a [**Stroke**](inkcollector-stroke.md) event.</span></span> <span data-ttu-id="cd964-134">Por último, se actualiza la ventana resultados.</span><span class="sxs-lookup"><span data-stu-id="cd964-134">Finally, the results window is updated.</span></span>

## <a name="handling-recognizer-context-events"></a><span data-ttu-id="cd964-135">Controlar eventos de contexto de reconocedor</span><span class="sxs-lookup"><span data-stu-id="cd964-135">Handling Recognizer Context Events</span></span>

<span data-ttu-id="cd964-136">El método **OnRecognitionWithAlternates** de la ventana controla el evento [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md) del contexto del reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-136">The window's **OnRecognitionWithAlternates** method handles the recognizer context's [**RecognitionWithAlternates**](inkrecognizercontext-recognitionwithalternates.md) event.</span></span> <span data-ttu-id="cd964-137">El método **OnRecognitionWithAlternates** muestra los resultados del reconocimiento en la ventana resultados.</span><span class="sxs-lookup"><span data-stu-id="cd964-137">The **OnRecognitionWithAlternates** method displays the recognition results in the results window.</span></span>

## <a name="handling-menu-commands"></a><span data-ttu-id="cd964-138">Control de comandos de menú</span><span class="sxs-lookup"><span data-stu-id="cd964-138">Handling Menu Commands</span></span>

<span data-ttu-id="cd964-139">El método de **reconocedor** de la ventana controla los comandos en el menú del reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-139">The window's **OnRecognizer** method handles the commands on the Recognizer menu.</span></span> <span data-ttu-id="cd964-140">Si se selecciona el comando **predeterminado** , se utiliza el método [**GetDefaultRecognizer**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizers-getdefaultrecognizer) de [InkRecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85)) para recuperar el reconocedor predeterminado; de lo contrario, se recupera el reconocedor seleccionado.</span><span class="sxs-lookup"><span data-stu-id="cd964-140">If the **Default** command was selected, the [**GetDefaultRecognizer**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizers-getdefaultrecognizer) method of the [InkRecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85)) is used to retrieve the default recognizer; otherwise, the selected recognizer is retrieved.</span></span> <span data-ttu-id="cd964-141">A continuación, se crea y se usa un contexto de reconocedor y se actualiza el menú y la barra de estado.</span><span class="sxs-lookup"><span data-stu-id="cd964-141">Then, a recognizer context is created and used, and menu and status bar are updated.</span></span>

<span data-ttu-id="cd964-142">El método **OnFactoidWordlist** de la ventana controla el comando usar la franja de **palabras** en el menú **Factoid** .</span><span class="sxs-lookup"><span data-stu-id="cd964-142">The window's **OnFactoidWordlist** method handles the **Use Wordlist** command on the **Factoid** menu.</span></span> <span data-ttu-id="cd964-143">La propiedad [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) del contexto del reconocedor se establece en **null** para restablecer el contexto del reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-143">The recognizer context's [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property is set to **NULL** to reset the recognizer context.</span></span> <span data-ttu-id="cd964-144">Si la opción usar la de **palabras** es desactivada, la propiedad de la definición de [**palabras**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) del contexto del reconocedor se establece en **null**. de lo contrario, **la propiedad de** la definición de tipo del contexto del reconocedor se establece en el [**InkWordList**](inkwordlist-class.md) que se creó en el método **alcrear** .</span><span class="sxs-lookup"><span data-stu-id="cd964-144">If the **Use Wordlist** option is turned off, the recognizer context's [**WordList**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) property is set to **NULL**; otherwise, the recognizer context's **WordList** property is set to the [**InkWordList**](inkwordlist-class.md) that was created in the **OnCreate** method.</span></span> <span data-ttu-id="cd964-145">Por último, el [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) del recopilador de tinta se vuelve a adjuntar al contexto del reconocedor, se llama al método [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) del contexto del reconocedor y se actualiza el menú.</span><span class="sxs-lookup"><span data-stu-id="cd964-145">Finally, the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector is reattached to the recognizer context, the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method is called, and the menu is updated.</span></span>

<span data-ttu-id="cd964-146">El método **OnFactoid** de la ventana controla los comandos Factoid en el menú **Factoid** .</span><span class="sxs-lookup"><span data-stu-id="cd964-146">The window's **OnFactoid** method handles the factoid commands on the **Factoid** menu.</span></span> <span data-ttu-id="cd964-147">Primero establece la propiedad [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) del contexto del reconocedor en **null**, establece la propiedad [**Factoid**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) del contexto del reconocedor en el Factoid seleccionado y reasigna el [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) del recopilador de tinta al contexto del reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-147">It first sets the recognizer context's [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property to **NULL**, sets the recognizer context's [**Factoid**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) property to the selected factoid, and reassigns the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector to the recognizer context.</span></span> <span data-ttu-id="cd964-148">Si el objeto [Factoid](factoid-constants.md) es compatible con el contexto del reconocedor, se llama al método [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) del contexto del reconocedor; de lo contrario, se muestra un mensaje de error.</span><span class="sxs-lookup"><span data-stu-id="cd964-148">If the [Factoid](factoid-constants.md) object is supported by the recognizer context, the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method is called; otherwise, an error message is displayed.</span></span> <span data-ttu-id="cd964-149">Por último, se actualizan el menú y la barra de estado.</span><span class="sxs-lookup"><span data-stu-id="cd964-149">Finally, the menu and status bar are updated.</span></span>

<span data-ttu-id="cd964-150">El método en la **Guía** de la ventana controla los comandos del menú **Guía** .</span><span class="sxs-lookup"><span data-stu-id="cd964-150">The window's **OnGuide** method handles the commands on the **Guide** menu.</span></span> <span data-ttu-id="cd964-151">Si el contexto del reconocedor admite las **Opciones de la** guía, el método InkStrokes establece la propiedad [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) del contexto del reconocedor en **null**, establece la propiedad [**Guide**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) del contexto del reconocedor en la configuración de la guía seleccionada, vuelve a asignar el [](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) del recopilador de tinta al contexto del reconocedor y llama al método [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) del contexto del reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-151">If the recognizer context supports the guide options, the **OnGuide** method sets the recognizer context's [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property to **NULL**, sets the recognizer context's [**Guide**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) property to the selected guide setting, reassigns the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector to the recognizer context, and calls the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method.</span></span> <span data-ttu-id="cd964-152">De lo contrario, se muestra un mensaje de error.</span><span class="sxs-lookup"><span data-stu-id="cd964-152">Otherwise, an error message is displayed.</span></span> <span data-ttu-id="cd964-153">Por último, se actualizan la ventana de entrada, el menú y la barra de estado.</span><span class="sxs-lookup"><span data-stu-id="cd964-153">Finally, the input window, menu, and status bar are updated.</span></span>

<span data-ttu-id="cd964-154">El método **bimode** de la ventana controla los comandos del menú **modo** .</span><span class="sxs-lookup"><span data-stu-id="cd964-154">The window's **OnMode** method handles the commands on the **Mode** menu.</span></span> <span data-ttu-id="cd964-155">Deshabilita el recopilador de tinta, actualiza la propiedad [**si CollectionMode es**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_collectionmode) del recopilador de tinta, actualiza el menú y muestra u oculta las listas de gestos.</span><span class="sxs-lookup"><span data-stu-id="cd964-155">It disables the ink collector, updates the ink collector's [**CollectionMode**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_collectionmode) property, updates the menu, and shows or hides the gesture lists.</span></span> <span data-ttu-id="cd964-156">Por último, el recopilador de tinta está habilitado.</span><span class="sxs-lookup"><span data-stu-id="cd964-156">Finally, the ink collector is enabled.</span></span>

<span data-ttu-id="cd964-157">El método **alrecognize** de la ventana controla el comando **Recognize** en el menú de entrada manuscrita.</span><span class="sxs-lookup"><span data-stu-id="cd964-157">The window's **OnRecognize** method handles the **Recognize** command on the Ink menu.</span></span> <span data-ttu-id="cd964-158">Llama al método [**EndInkInput**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-endinkinput) del contexto del reconocedor para mantener la entrada de lápiz en el contexto del reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-158">It calls the recognizer context's [**EndInkInput**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-endinkinput) method to keep ink from being added to the recognizer context.</span></span> <span data-ttu-id="cd964-159">A veces, esto es necesario, ya que no todos los reconocedores admiten el reconocimiento parcial.</span><span class="sxs-lookup"><span data-stu-id="cd964-159">This is sometimes necessary, as not all recognizers support partial recognition.</span></span> <span data-ttu-id="cd964-160">A continuación, llama al método [**Recognize**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-recognize) del contexto del reconocedor y pasa los resultados al método **OnRecognitionWithAlternates** de la ventana.</span><span class="sxs-lookup"><span data-stu-id="cd964-160">Then it calls the recognizer context's [**Recognize**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-recognize) method, and passes the results to the window's **OnRecognitionWithAlternates** method.</span></span> <span data-ttu-id="cd964-161">Por último, el [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) del recopilador de tinta se reasigna al contexto del reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-161">Finally, the [InkStrokes](/previous-versions/windows/desktop/legacy/ms703293(v=vs.85)) of the ink collector is reassigned to the recognizer context.</span></span>

<span data-ttu-id="cd964-162">El método **unclear** de la ventana controla el comando **Borrar** en el menú de **entrada manuscrita** .</span><span class="sxs-lookup"><span data-stu-id="cd964-162">The window's **OnClear** method handles the **Clear** command on the **Ink** menu.</span></span> <span data-ttu-id="cd964-163">Elimina los trazos de la propiedad [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) del recopilador de tinta, libera la colección de trazos anteriores y crea una nueva para la propiedad **Ink** del recopilador de tinta y adjunta la nueva colección Strokes al contexto del reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-163">It deletes the strokes from the ink collector's [**Ink**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkcollector-get_ink) property, releases the old strokes collection and creates a new one for the ink collector's **Ink** property, and attaches the new strokes collection to the recognizer context.</span></span>

<span data-ttu-id="cd964-164">El **método OnExit** de la ventana controla el comando **Exit** en el menú de **entrada manuscrita** y genera el evento de cierre de WM \_ .</span><span class="sxs-lookup"><span data-stu-id="cd964-164">The window's **OnExit** method handles the **Exit** command on the **Ink** menu, and raises the WM\_CLOSE event.</span></span>

## <a name="helper-methods"></a><span data-ttu-id="cd964-165">métodos del asistente</span><span class="sxs-lookup"><span data-stu-id="cd964-165">Helper Methods</span></span>

<span data-ttu-id="cd964-166">Se llama al método **LoadMenu** de la ventana desde el método **Run** de la ventana y se agrega la lista de reconocedores admitidos y la lista de Factoids admitidos al menú.</span><span class="sxs-lookup"><span data-stu-id="cd964-166">The window's **LoadMenu** method is called from the window's **Run** method, and adds the list of supported recognizers and the list of supported factoids to the menu.</span></span> <span data-ttu-id="cd964-167">En primer lugar, recupera el [InkRecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="cd964-167">First, it retrieves the [InkRecognizers](/previous-versions/windows/desktop/legacy/ms702438(v=vs.85)).</span></span> <span data-ttu-id="cd964-168">A continuación, recorre en iteración los reconocedores disponibles y solo selecciona aquellos que tengan una lista de idiomas en la propiedad **Languages** , que se agrega al menú de **reconocedor** .</span><span class="sxs-lookup"><span data-stu-id="cd964-168">Then it iterates through the available recognizers and only selects ones that have a list of languages in the **Languages** property, which it adds to the **Recognizer** menu.</span></span> <span data-ttu-id="cd964-169">Por último, rellena el menú **Factoid** con la lista de Factoids definida como constante global.</span><span class="sxs-lookup"><span data-stu-id="cd964-169">Finally, it populates the **Factoid** menu with the list of factoids defined as a global constant.</span></span>

<span data-ttu-id="cd964-170">El método **UseRecognizer** de la ventana se llama desde el método de **reconocedor** de la ventana cuando el usuario selecciona un nuevo reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-170">The window's **UseRecognizer** method is called from the window's **OnRecognizer** method when the user selects a new recognizer.</span></span> <span data-ttu-id="cd964-171">Crea un contexto de reconocedor, Desasocia el contexto anterior del receptor de eventos del reconocedor, borra y libera el contexto anterior y asocia el nuevo contexto al receptor de eventos del reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-171">It creates a recognizer context, detaches the old context from the recognizer event sink, clears and releases the old context, and attaches the new context to the recognizer event sink.</span></span>

<span data-ttu-id="cd964-172">A continuación, el método **UseRecognizer** comprueba la propiedad [**Capabilities**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizer-get_capabilities) del reconocedor, que devuelve un valor [**InkRecognizerCapabilities**](/windows/desktop/api/msinkaut/ne-msinkaut-inkrecognizercapabilities) .</span><span class="sxs-lookup"><span data-stu-id="cd964-172">Then, the **UseRecognizer** method checks the recognizer's [**Capabilities**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizer-get_capabilities) property, which returns an [**InkRecognizerCapabilities**](/windows/desktop/api/msinkaut/ne-msinkaut-inkrecognizercapabilities) value.</span></span> <span data-ttu-id="cd964-173">Si el reconocedor admite la entrada alineada, el comando **líneas** del menú **Guía** está habilitado.</span><span class="sxs-lookup"><span data-stu-id="cd964-173">If the recognizer supports lined input, the **Lines** command on the **Guide** menu is enabled.</span></span> <span data-ttu-id="cd964-174">Si el reconocedor admite la entrada de conversión boxing, el comando de **cuadros** está habilitado.</span><span class="sxs-lookup"><span data-stu-id="cd964-174">If the recognizer supports boxed input, the **Boxes** command is enabled.</span></span> <span data-ttu-id="cd964-175">Si el Reconocedor no admite la entrada libre, el comando **None** se deshabilita.</span><span class="sxs-lookup"><span data-stu-id="cd964-175">If the recognizer does not support free input, the **None** command is disabled.</span></span> <span data-ttu-id="cd964-176">Si no se admite la selección de la guía actual, se actualizan la propiedad [**Guía**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) del contexto del reconocedor y el menú.</span><span class="sxs-lookup"><span data-stu-id="cd964-176">If the current guide selection is not supported, both the [**Guide**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_guide) property of the recognizer context and the menu are updated.</span></span>

<span data-ttu-id="cd964-177">A continuación, el método **UseRecognizer** intenta establecer las propiedades de la definición de [**palabras**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) y [**Factoid**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) del contexto del reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-177">Then, the **UseRecognizer** method attempts to set the [**WordList**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_wordlist) and [**Factoid**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-get_factoid) properties of the recognizer context.</span></span> <span data-ttu-id="cd964-178">Si el Reconocedor no admite cualquiera de las opciones de configuración, se usa el valor predeterminado y se actualiza el menú.</span><span class="sxs-lookup"><span data-stu-id="cd964-178">If either setting is not supported by the recognizer, then the default value is used and the menu is updated.</span></span>

<span data-ttu-id="cd964-179">Por último, el método **UseRecognizer** asocia la propiedad [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) del objeto [**InkDisp**](inkdisp-class.md) del recopilador de tinta al contexto del reconocedor, cambia la fuente de la ventana de salida a una compatible con el idioma del reconocedor, restablece la ventana de salida y actualiza los resultados del reconocimiento llamando al método [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) del contexto del reconocedor.</span><span class="sxs-lookup"><span data-stu-id="cd964-179">Finally, the **UseRecognizer** method attaches the [**Strokes**](/windows/desktop/api/msinkaut15/nf-msinkaut15-iinkdivisionresult-get_strokes) property of the ink collector's [**InkDisp**](inkdisp-class.md) object to the recognizer context, changes the output window's font to one supported by the language of the recognizer, resets the output window, and updates the recognition results by calling the recognizer context's [**BackgroundRecognizeWithAlternates**](/windows/desktop/api/msinkaut/nf-msinkaut-iinkrecognizercontext-backgroundrecognizewithalternates) method.</span></span>

<span data-ttu-id="cd964-180">Se llama al método **GetGestureName** de la ventana desde el método de **gestos** de la ventana.</span><span class="sxs-lookup"><span data-stu-id="cd964-180">The window's **GetGestureName** method is called from the window's **OnGesture** method.</span></span> <span data-ttu-id="cd964-181">Busca el gesto y devuelve un índice al nombre del gesto, que se almacena en una tabla de cadenas en el archivo AdvReco. rc.</span><span class="sxs-lookup"><span data-stu-id="cd964-181">It searches for the gesture and returns an index to the gesture's name, which is stored in a string table in the AdvReco.rc file.</span></span>

 

 
