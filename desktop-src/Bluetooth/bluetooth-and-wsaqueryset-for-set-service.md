---
title: Bluetooth y WSAQUERYSET para Set Service
description: Uso de la estructura WSAQUERYSET con la función WSASetService para registrar o quitar instancias de servicio en el espacio de nombres Bluetooth (NS \_ BTH).
ms.assetid: e582156d-a298-4d9b-8ed1-4c558fa4f203
keywords:
- Bluetooth y WSAQUERYSET para Set Service Bluetooth
- WSAQUERYSET Bluetooth, para Set Service
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 64a632cad2c813856367d4565bc69e0d4baf2eba
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "103995339"
---
# <a name="bluetooth-and-wsaqueryset-for-set-service"></a>Bluetooth y WSAQUERYSET para Set Service

Bluetooth usa la estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) para facilitar la detección de dispositivos y servicios en el espacio de nombres Bluetooth, NS \_ BTH.

La función [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea) usa la estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) para registrar o quitar instancias de servicio en el espacio de nombres Bluetooth. En la tabla siguiente se enumeran los valores de miembro de la estructura **WSAQUERYSET** .

| Miembro                      | Valor necesario (entrada)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Output                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **dwSize**                  | Debe establecerse en **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)). Se usa como mecanismo de control de versiones.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwOutputFlags**           | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszServiceInstanceName** | Opcional pero recomendable. Se usa para construir el atributo ServiceName de Bluetooth.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpServiceClassId**        | Obligatorio. GUID correspondiente a la clase de servicio. Este valor debe corresponder a un GUID del documento de números asignados de Bluetooth para perfiles conocidos o un UUID único generado por la aplicación para aplicaciones que no se basan en perfiles. Se usa para construir una secuencia de atributo ServiceClassIdList con este como único miembro.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpVersion**               | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszComment**             | Opcional. Se usa para construir el atributo ServiceDescription de Bluetooth.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNameSpace**             | Espacio de nombres en el que se va a restringir el servicio. Debe ser NS \_ BTH.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpNSProviderId**          | No se requiere.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszContext**             | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNumberOfProtocols**     | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpafpProtocols**          | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpszQueryString**         | No se utiliza.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **dwNumberOfCsAddrs**       | Número de direcciones que se van a registrar. Debe ser 1.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpcsaBuffer**             | Obligatorio si **lpBlob** no se ha rellenado con una secuencia SDP sin procesar. Puntero a una estructura de [**\_ información de CSADDR**](/windows/desktop/api/nspapi/ns-nspapi-csaddr_info) con su miembro **LocalAddr. lpSockaddr** que apunta al [**\_ BTH de SOCKADDR**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) en el que el servidor escucha las conexiones. La función [**getsockname**](/windows/desktop/api/winsock/nf-winsock-getsockname) se puede usar para devolver la estructura **SOCKADDR \_ BTH** para un socket enlazado. El sistema utiliza la información del miembro **lpcsaBuffer** para construir el atributo SDP ProtocolDescriptorList de Bluetooth. El protocolo y el puerto proporcionados en **lpcsaBuffer** deben ser únicos (no registrados previamente) y se usan para indizar el registro de las llamadas subsiguientes que se van a eliminar. Se usa para construir el atributo ProtocolDescriptorList de Bluetooth del registro SDP. | Ninguno.                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **lpBlob**                  | Opcional. Puntero a una estructura de [**BLOB**](/windows/desktop/api/nspapi/ns-nspapi-blob) que apunta a una estructura de [**servicio de \_ conjunto \_ de BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) , que permite al cliente proporcionar una estructura específica de Bluetooth que contiene un registro SDP binario construido por la aplicación. Si **lpBlob** se proporciona a la función [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea) , se omiten todos los demás miembros de la estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) excepto **dwSize** y **dwNameSpace** . Consulte [Bluetooth y BLOB](bluetooth-and-blob.md) para obtener más información. Es necesario enviar un registro SDP binario en muchos casos, ya que se puede convertir un número limitado de atributos SDP de la estructura **WSAQUERYSET** , y las cadenas solo se convierten en la codificación UTF-8 de idioma predeterminado.           | Si se han proporcionado las estructuras opcionales de servicio [**BLOB**](/windows/desktop/api/nspapi/ns-nspapi-blob) y [**BTH \_ set \_**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) en la entrada, junto con la versión ulong y los valores de control a los que debe apuntar el **\_ \_ servicio BTH Set**, la versión se actualiza para que contenga el \_ valor de la versión de BTH SDP \_ para el proveedor de Windows Sockets Bluetooth y se proporciona el identificador, que es necesario para eliminar el registro posteriormente. |



 

> [!Note]  
> Para quitar un servicio, los únicos miembros necesarios en la estructura de [**\_ \_ servicio del conjunto BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service) son los miembros **pSdpVersion** y **pRecordHandle** .

 

## <a name="related-topics"></a>Temas relacionados

<dl> <dt>

[Bluetooth y WSAQUERYSET para la consulta de dispositivo](bluetooth-and-wsaqueryset-for-device-inquiry.md)
</dt> <dt>

[Bluetooth y WSAQUERYSET para la consulta de servicio](bluetooth-and-wsaqueryset-for-service-inquiry.md)
</dt> <dt>

[Bluetooth y BLOB](bluetooth-and-blob.md)
</dt> <dt>

[Bluetooth y WSASetService](bluetooth-and-wsasetservice.md)
</dt> <dt>

[**BLOB**](/windows/desktop/api/nspapi/ns-nspapi-blob)
</dt> <dt>

[**BTH \_ establecer \_ servicio**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_set_service)
</dt> <dt>

[**información de CSADDR \_**](/windows/desktop/api/nspapi/ns-nspapi-csaddr_info)
</dt> <dt>

[**getsockname**](/windows/desktop/api/winsock/nf-winsock-getsockname)
</dt> <dt>

[**SOCKADDR \_ BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth)
</dt> <dt>

[**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)
</dt> <dt>

[Windows Sockets](/windows/desktop/WinSock/windows-sockets-start-page-2)
</dt> </dl>

 

 