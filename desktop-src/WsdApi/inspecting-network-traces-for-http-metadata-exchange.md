---
description: Cualquier analizador de paquetes de red que pueda mostrar paquetes sin procesar se puede usar para inspeccionar las solicitudes de intercambio de metadatos HTTP. Se recomienda Monitor de red de Microsoft 3 (Netmon). Para obtener más información acerca de Netmon, consulte descarga de los filtros Netmon y DPWS de ejemplo.
ms.assetid: b3b6c4d1-5fa3-41fb-ae1d-067638e385b0
title: Inspeccionando seguimientos de red para el intercambio de metadatos HTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0c9993c542789b7f11eb35344dd6b0b03bfbafc3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104276235"
---
# <a name="inspecting-network-traces-for-http-metadata-exchange"></a><span data-ttu-id="11c2c-105">Inspeccionando seguimientos de red para el intercambio de metadatos HTTP</span><span class="sxs-lookup"><span data-stu-id="11c2c-105">Inspecting Network Traces for HTTP Metadata Exchange</span></span>

<span data-ttu-id="11c2c-106">Cualquier analizador de paquetes de red que pueda mostrar paquetes sin procesar se puede usar para inspeccionar las solicitudes de intercambio de metadatos HTTP.</span><span class="sxs-lookup"><span data-stu-id="11c2c-106">Any network packet analyzer that can display raw packets can be used to inspect HTTP metadata exchange requests.</span></span> <span data-ttu-id="11c2c-107">Se recomienda Monitor de red de Microsoft 3 (Netmon).</span><span class="sxs-lookup"><span data-stu-id="11c2c-107">Microsoft Network Monitor 3 (Netmon) is recommended.</span></span> <span data-ttu-id="11c2c-108">Para obtener más información acerca de Netmon, consulte [descarga de los filtros Netmon y DPWS de ejemplo](downloading-netmon-and-sample-dpws-filters.md).</span><span class="sxs-lookup"><span data-stu-id="11c2c-108">For more information about Netmon, see [Downloading Netmon and Sample DPWS Filters](downloading-netmon-and-sample-dpws-filters.md).</span></span>

<span data-ttu-id="11c2c-109">Este procedimiento de diagnóstico puede no ser tan útil para los clientes y hosts que usan un canal seguro para las comunicaciones porque el contenido del mensaje está cifrado.</span><span class="sxs-lookup"><span data-stu-id="11c2c-109">This diagnostic procedure may not be as useful for clients and hosts using a secure channel for communications because the message contents are encrypted.</span></span>

<span data-ttu-id="11c2c-110">**Para inspeccionar los seguimientos de red para el intercambio de metadatos HTTP**</span><span class="sxs-lookup"><span data-stu-id="11c2c-110">**To inspect network traces for HTTP metadata exchange**</span></span>

1.  <span data-ttu-id="11c2c-111">Configure el host y el cliente para que se ejecuten en la red (es decir, asegúrese de que el host y el cliente funcionarán en equipos diferentes).</span><span class="sxs-lookup"><span data-stu-id="11c2c-111">Configure the host and client to run across the network (that is, make sure that the host and client will operate on different machines).</span></span>
2.  <span data-ttu-id="11c2c-112">Instale el analizador de paquetes (Netmon) en el cliente o en el host.</span><span class="sxs-lookup"><span data-stu-id="11c2c-112">Install the packet analyzer (Netmon) on either the client or the host.</span></span>
3.  <span data-ttu-id="11c2c-113">Configure el analizador de paquetes para capturar el tráfico en el adaptador de red que conecta el host y el cliente.</span><span class="sxs-lookup"><span data-stu-id="11c2c-113">Configure the packet analyzer to capture traffic on the network adapter connecting the host and the client.</span></span>
4.  <span data-ttu-id="11c2c-114">Reproduzca el error iniciando el host y el cliente, o presionando F5 en el explorador de red.</span><span class="sxs-lookup"><span data-stu-id="11c2c-114">Reproduce the failure by starting the host and client or by pressing F5 in the Network Explorer.</span></span>
5.  <span data-ttu-id="11c2c-115">Filtre los resultados para aislar WS-Discovery y el tráfico de intercambio de metadatos.</span><span class="sxs-lookup"><span data-stu-id="11c2c-115">Filter the results to isolate WS-Discovery and metadata exchange traffic.</span></span> <span data-ttu-id="11c2c-116">Para ver los filtros de ejemplo de Netmon, consulte [descarga de los filtros Netmon y DPWS de ejemplo](downloading-netmon-and-sample-dpws-filters.md).</span><span class="sxs-lookup"><span data-stu-id="11c2c-116">To view sample Netmon filters, see [Downloading Netmon and Sample DPWS Filters](downloading-netmon-and-sample-dpws-filters.md).</span></span>
    > [!Note]  
    > <span data-ttu-id="11c2c-117">Este paso es opcional.</span><span class="sxs-lookup"><span data-stu-id="11c2c-117">This step is optional.</span></span>

     

6.  <span data-ttu-id="11c2c-118">Compruebe que los mensajes enviados entre el cliente y el host cumplan los requisitos de tráfico básicos.</span><span class="sxs-lookup"><span data-stu-id="11c2c-118">Verify that messages sent between client and host meet basic traffic requirements.</span></span>

## <a name="verifying-that-messages-meet-traffic-requirements"></a><span data-ttu-id="11c2c-119">Comprobando que los mensajes cumplen los requisitos de tráfico</span><span class="sxs-lookup"><span data-stu-id="11c2c-119">Verifying that messages meet traffic requirements</span></span>

<span data-ttu-id="11c2c-120">Los clientes y hosts WSDAPI deben enviar mensajes que cumplan los criterios siguientes.</span><span class="sxs-lookup"><span data-stu-id="11c2c-120">WSDAPI clients and hosts must send messages that conform to the following criteria.</span></span> <span data-ttu-id="11c2c-121">Para obtener información general acerca de los patrones de mensajes, consulte [patrones de mensajes de intercambio de metadatos y detección](discovery-and-metadata-exchange-message-patterns.md).</span><span class="sxs-lookup"><span data-stu-id="11c2c-121">For general information about message patterns, see [Discovery and Metadata Exchange Message Patterns](discovery-and-metadata-exchange-message-patterns.md).</span></span>

-   <span data-ttu-id="11c2c-122">Los mensajes deben cumplir los requisitos de tráfico que se proporcionan en el tema [inspeccionando los seguimientos de red para WS-Discovery de UDP](inspecting-network-traces-for-udp-ws-discovery.md), a menos que esté absolutamente seguro de que WS-Discovery no se utiliza para el intercambio de metadatos.</span><span class="sxs-lookup"><span data-stu-id="11c2c-122">Messages must meet the traffic requirements provided in the topic [Inspecting Network Traces for UDP WS-Discovery](inspecting-network-traces-for-udp-ws-discovery.md), unless it is absolutely certain that WS-Discovery is not being used for metadata exchange.</span></span>
-   <span data-ttu-id="11c2c-123">Se debe establecer una conexión TCP entre el cliente y la primera dirección de transporte proporcionada en el elemento **XAddrs** de un mensaje [ProbeMatches](probematches-message.md) o [ResolveMatches](resolvematches-message.md) .</span><span class="sxs-lookup"><span data-stu-id="11c2c-123">A TCP connection must be established between the client and the first transport address provided in the **XAddrs** element of a [ProbeMatches](probematches-message.md) or [ResolveMatches](resolvematches-message.md) message.</span></span> <span data-ttu-id="11c2c-124">La siguiente lista muestra un intercambio de paquetes típico que se usa para establecer una conexión TCP.</span><span class="sxs-lookup"><span data-stu-id="11c2c-124">The following list shows a typical packet exchange used to establish a TCP connection.</span></span>
    -   <span data-ttu-id="11c2c-125">El cliente envía un paquete TCP SYN al host en un puerto especificado.</span><span class="sxs-lookup"><span data-stu-id="11c2c-125">The client sends a TCP SYN packet to the host at a specified port.</span></span>
    -   <span data-ttu-id="11c2c-126">El host envía un paquete TCP SYN/ACK al cliente.</span><span class="sxs-lookup"><span data-stu-id="11c2c-126">The host sends a TCP SYN/ACK packet to the client.</span></span>
    -   <span data-ttu-id="11c2c-127">El cliente envía un paquete de confirmación TCP al host en un puerto especificado.</span><span class="sxs-lookup"><span data-stu-id="11c2c-127">The client sends a TCP ACK packet to the host at a specified port.</span></span>

    <span data-ttu-id="11c2c-128">Una vez que el cliente ha enviado un paquete de confirmación TCP, se establece la conexión TCP.</span><span class="sxs-lookup"><span data-stu-id="11c2c-128">Once the client has sent a TCP ACK packet, the TCP connection is established.</span></span> <span data-ttu-id="11c2c-129">Tenga en cuenta que este intercambio de mensajes no se producirá si se ha establecido previamente una conexión TCP.</span><span class="sxs-lookup"><span data-stu-id="11c2c-129">Note that this message exchange will not occur if a TCP connection has previously been established.</span></span>
-   <span data-ttu-id="11c2c-130">El cliente debe enviar un mensaje y una solicitud HTTP [Get](get--metadata-exchange--http-request-and-message.md) válidos.</span><span class="sxs-lookup"><span data-stu-id="11c2c-130">The client must send a valid [Get](get--metadata-exchange--http-request-and-message.md) HTTP request and message.</span></span>
-   <span data-ttu-id="11c2c-131">El host debe estar escuchando en la ruta de acceso de la dirección URL especificada en la solicitud [Get](get--metadata-exchange--http-request-and-message.md) http.</span><span class="sxs-lookup"><span data-stu-id="11c2c-131">The host must be listening on the URL path specified in the [Get](get--metadata-exchange--http-request-and-message.md) HTTP request.</span></span>
-   <span data-ttu-id="11c2c-132">El elemento **to** de un mensaje [Get](get--metadata-exchange--http-request-and-message.md) Metadata debe estar presente y no estar vacío.</span><span class="sxs-lookup"><span data-stu-id="11c2c-132">The **To** element of a [Get](get--metadata-exchange--http-request-and-message.md) metadata message must be present and not empty.</span></span> <span data-ttu-id="11c2c-133">El valor del elemento **to** debe coincidir con una de las direcciones de punto de conexión del host.</span><span class="sxs-lookup"><span data-stu-id="11c2c-133">The value of the **To** element must match one of the host's endpoint addresses.</span></span> <span data-ttu-id="11c2c-134">La dirección del punto de conexión de un host se anuncia normalmente en un mensaje [ProbeMatches](probematches-message.md) o [ResolveMatches](resolvematches-message.md) .</span><span class="sxs-lookup"><span data-stu-id="11c2c-134">A host's endpoint address is typically advertised in a [ProbeMatches](probematches-message.md) or [ResolveMatches](resolvematches-message.md) message.</span></span>
-   <span data-ttu-id="11c2c-135">El host debe enviar un encabezado de respuesta HTTP válido.</span><span class="sxs-lookup"><span data-stu-id="11c2c-135">The host must send a valid HTTP response header.</span></span> <span data-ttu-id="11c2c-136">Si la solicitud inicial se realizó correctamente, el encabezado de respuesta debe contener el código de Estado HTTP/1.1 200.</span><span class="sxs-lookup"><span data-stu-id="11c2c-136">If the initial request was successful, the response header should contain the HTTP/1.1 200 status code.</span></span>
-   <span data-ttu-id="11c2c-137">El host debe enviar un mensaje de [GetResponse](getresponse--metadata-exchange--message.md) válido.</span><span class="sxs-lookup"><span data-stu-id="11c2c-137">The host must send a valid [GetResponse](getresponse--metadata-exchange--message.md) message.</span></span>
-   <span data-ttu-id="11c2c-138">El **elemento** de la reutilización de un mensaje [GetResponse](getresponse--metadata-exchange--message.md) debe estar presente y no debe estar vacío.</span><span class="sxs-lookup"><span data-stu-id="11c2c-138">The **RelatesTo** element of a [GetResponse](getresponse--metadata-exchange--message.md) message must be present and must not be empty.</span></span> <span data-ttu-id="11c2c-139">Su valor debe coincidir con el valor del elemento **MessageId** del mensaje [Get](get--metadata-exchange--http-request-and-message.md) correspondiente.</span><span class="sxs-lookup"><span data-stu-id="11c2c-139">Its value must match the value of the **MessageId** element from the corresponding [Get](get--metadata-exchange--http-request-and-message.md) message.</span></span>

<span data-ttu-id="11c2c-140">Si las solicitudes HTTP o los mensajes de intercambio de metadatos enviados por el programa no cumplen estos requisitos de tráfico, la causa del problema se ha identificado correctamente y no es necesario realizar más pasos de solución de problemas.</span><span class="sxs-lookup"><span data-stu-id="11c2c-140">If the HTTP requests or metadata exchange messages sent by the program do not conform to these traffic requirements, the cause of the problem has been successfully identified and no further troubleshooting steps are necessary.</span></span> <span data-ttu-id="11c2c-141">Vuelva a escribir el programa para que genere mensajes y solicitudes compatibles y vuelva a probar el programa.</span><span class="sxs-lookup"><span data-stu-id="11c2c-141">Rewrite the program so that it generates conformant messages and requests and retest the program.</span></span>

<span data-ttu-id="11c2c-142">Si aún no se puede identificar el origen del problema, póngase en contacto con el soporte técnico de Microsoft para obtener ayuda.</span><span class="sxs-lookup"><span data-stu-id="11c2c-142">If the source of the problem still cannot be identified, contact Microsoft support for assistance.</span></span> <span data-ttu-id="11c2c-143">Antes de ponerse en contacto con el servicio de soporte técnico, recopile los archivos de registro adecuados para ayudar a identificar la causa principal del problema.</span><span class="sxs-lookup"><span data-stu-id="11c2c-143">Before contacting support, collect the appropriate log files to help identify the root cause of the problem.</span></span> <span data-ttu-id="11c2c-144">Para obtener más información, vea [Habilitar el seguimiento de WSDAPI](enabling-wsdapi-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="11c2c-144">For more information, see [Enabling WSDAPI Tracing](enabling-wsdapi-tracing.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="11c2c-145">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="11c2c-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="11c2c-146">Procedimientos de diagnóstico de WSDAPI</span><span class="sxs-lookup"><span data-stu-id="11c2c-146">WSDAPI Diagnostic Procedures</span></span>](wsdapi-diagnostic-procedures.md)
</dt> <dt>

[<span data-ttu-id="11c2c-147">Introducción con la solución de problemas de WSDAPI</span><span class="sxs-lookup"><span data-stu-id="11c2c-147">Getting Started with WSDAPI Troubleshooting</span></span>](getting-started-with-wsdapi-troubleshooting.md)
</dt> <dt>

[<span data-ttu-id="11c2c-148">Descarga de los filtros Netmon y DPWS de ejemplo</span><span class="sxs-lookup"><span data-stu-id="11c2c-148">Downloading Netmon and Sample DPWS Filters</span></span>](downloading-netmon-and-sample-dpws-filters.md)
</dt> </dl>

 

 



