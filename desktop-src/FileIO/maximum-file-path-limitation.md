---
description: Limitación de longitud máxima de la ruta de acceso.
title: Limitación de longitud máxima de ruta de acceso
ms.topic: article
ms.custom: contperf-fy21q1
ms.date: 09/15/2020
ms.openlocfilehash: 4bf5050f24827a2033c1e56fd9413c04f4e59500
ms.sourcegitcommit: ece80b9b7082415b2f894b0696b6b3f0c8544d72
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/22/2021
ms.locfileid: "107899744"
---
# <a name="maximum-path-length-limitation"></a><span data-ttu-id="3b143-103">Limitación de longitud máxima de ruta de acceso</span><span class="sxs-lookup"><span data-stu-id="3b143-103">Maximum Path Length Limitation</span></span>

<span data-ttu-id="3b143-104">En la API de Windows (con algunas excepciones analizadas en los párrafos siguientes), la longitud máxima de una ruta de acceso es **MAX \_ PATH,** que se define como 260 caracteres.</span><span class="sxs-lookup"><span data-stu-id="3b143-104">In the Windows API (with some exceptions discussed in the following paragraphs), the maximum length for a path is **MAX\_PATH**, which is defined as 260 characters.</span></span> <span data-ttu-id="3b143-105">Una ruta de acceso local se estructura en el orden siguiente: letra de unidad, dos puntos, barra diagonal inversa, componentes de nombre separados por barras diagonales inversas y un carácter nulo de terminación.</span><span class="sxs-lookup"><span data-stu-id="3b143-105">A local path is structured in the following order: drive letter, colon, backslash, name components separated by backslashes, and a terminating null character.</span></span> <span data-ttu-id="3b143-106">Por ejemplo, la ruta de acceso máxima en la unidad D es "D: una cadena de ruta de acceso de \\ *256* caracteres &lt; NUL" donde &gt; &lt; "NUL" representa el carácter nulo de terminación invisible para la página de códigos del sistema &gt; actual.</span><span class="sxs-lookup"><span data-stu-id="3b143-106">For example, the maximum path on drive D is "D:\\*some 256-character path string*&lt;NUL&gt;" where "&lt;NUL&gt;" represents the invisible terminating null character for the current system codepage.</span></span> <span data-ttu-id="3b143-107">(Los caracteres < > se usan aquí para mayor claridad visual y no pueden formar parte de una cadena de ruta de acceso válida).</span><span class="sxs-lookup"><span data-stu-id="3b143-107">(The characters < > are used here for visual clarity and cannot be part of a valid path string.)</span></span>

<span data-ttu-id="3b143-108">Por ejemplo, puede alcanzar esta limitación si está clonando un repositorio de Git que tiene nombres de archivo largos en una carpeta que a su vez tiene un nombre largo.</span><span class="sxs-lookup"><span data-stu-id="3b143-108">For example, you may hit this limitation if you are cloning a git repo that has long file names into a folder that itself has a long name.</span></span>


> [!Note]  
> <span data-ttu-id="3b143-109">Las funciones de E/S de archivos de la API de Windows convierten "/" en " " como parte de la conversión del nombre en un nombre de estilo NT, excepto cuando se usa el prefijo " ? " como se detalla en las secciones \\ \\ \\ \\ siguientes.</span><span class="sxs-lookup"><span data-stu-id="3b143-109">File I/O functions in the Windows API convert "/" to "\\" as part of converting the name to an NT-style name, except when using the "\\\\?\\" prefix as detailed in the following sections.</span></span>

<span data-ttu-id="3b143-110">La API de Windows tiene muchas funciones que también tienen versiones Unicode para permitir una ruta de acceso de longitud extendida para una longitud total máxima de ruta de acceso de 32 767 caracteres.</span><span class="sxs-lookup"><span data-stu-id="3b143-110">The Windows API has many functions that also have Unicode versions to permit an extended-length path for a maximum total path length of 32,767 characters.</span></span> <span data-ttu-id="3b143-111">Este tipo de ruta de acceso se compone de componentes separados por barras diagonales inversas, cada uno hasta el valor devuelto en el parámetro *lpMaximumComponentLength* de la función [**GetVolumeInformation**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumeinformationa) (este valor normalmente tiene 255 caracteres).</span><span class="sxs-lookup"><span data-stu-id="3b143-111">This type of path is composed of components separated by backslashes, each up to the value returned in the *lpMaximumComponentLength* parameter of the [**GetVolumeInformation**](/windows/desktop/api/FileAPI/nf-fileapi-getvolumeinformationa) function (this value is commonly 255 characters).</span></span> <span data-ttu-id="3b143-112">Para especificar una ruta de acceso de longitud extendida, use el prefijo " \\ \\ ? \\ ".</span><span class="sxs-lookup"><span data-stu-id="3b143-112">To specify an extended-length path, use the "\\\\?\\" prefix.</span></span> <span data-ttu-id="3b143-113">Por ejemplo, " \\ \\ ? \\ D: \\ *ruta de acceso muy larga*".</span><span class="sxs-lookup"><span data-stu-id="3b143-113">For example, "\\\\?\\D:\\*very long path*".</span></span>

> [!Note]  
> <span data-ttu-id="3b143-114">La ruta de acceso máxima de 32 767 caracteres es aproximada, porque el sistema puede expandir el prefijo " ? " a una cadena más larga en tiempo de ejecución y esta expansión se aplica a la \\ \\ \\ longitud total.</span><span class="sxs-lookup"><span data-stu-id="3b143-114">The maximum path of 32,767 characters is approximate, because the "\\\\?\\" prefix may be expanded to a longer string by the system at run time, and this expansion applies to the total length.</span></span>

<span data-ttu-id="3b143-115">El prefijo " ? " también se puede usar con rutas de acceso construidas según \\ \\ la convención de nomenclatura \\ universal (UNC).</span><span class="sxs-lookup"><span data-stu-id="3b143-115">The "\\\\?\\" prefix can also be used with paths constructed according to the universal naming convention (UNC).</span></span> <span data-ttu-id="3b143-116">Para especificar dicha ruta de acceso mediante UNC, use " \\ \\ ? \\ Prefijo UNC \\ ".</span><span class="sxs-lookup"><span data-stu-id="3b143-116">To specify such a path using UNC, use the "\\\\?\\UNC\\" prefix.</span></span> <span data-ttu-id="3b143-117">Por ejemplo, " \\ \\ ? \\ Recurso compartido de servidor UNC", donde "servidor" es el nombre del equipo y \\ \\ "recurso compartido" es el nombre de la carpeta compartida.</span><span class="sxs-lookup"><span data-stu-id="3b143-117">For example, "\\\\?\\UNC\\server\\share", where "server" is the name of the computer and "share" is the name of the shared folder.</span></span> <span data-ttu-id="3b143-118">Estos prefijos no se usan como parte de la propia ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="3b143-118">These prefixes are not used as part of the path itself.</span></span> <span data-ttu-id="3b143-119">Indican que la ruta de acceso se debe pasar al sistema con una modificación mínima, lo que significa que no se pueden usar barras diagonales para representar separadores de ruta de acceso, un punto para representar el directorio actual o puntos dobles para representar el directorio primario.</span><span class="sxs-lookup"><span data-stu-id="3b143-119">They indicate that the path should be passed to the system with minimal modification, which means that you cannot use forward slashes to represent path separators, or a period to represent the current directory, or double dots to represent the parent directory.</span></span> <span data-ttu-id="3b143-120">Dado que no se puede usar el prefijo " ? " con una ruta de acceso relativa, las rutas de acceso relativas siempre se limitan \\ \\ a un total de caracteres \\ **MAX \_ PATH.**</span><span class="sxs-lookup"><span data-stu-id="3b143-120">Because you cannot use the "\\\\?\\" prefix with a relative path, relative paths are always limited to a total of **MAX\_PATH** characters.</span></span>

<span data-ttu-id="3b143-121">No es necesario realizar ninguna normalización Unicode en las cadenas de nombre de archivo y ruta de acceso para su uso por las funciones de LA API de E/S de archivos de Windows porque el sistema de archivos trata los nombres de ruta de acceso y de archivo como una secuencia opaca de **WCHAR.**</span><span class="sxs-lookup"><span data-stu-id="3b143-121">There is no need to perform any Unicode normalization on path and file name strings for use by the Windows file I/O API functions because the file system treats path and file names as an opaque sequence of **WCHAR** s.</span></span> <span data-ttu-id="3b143-122">Cualquier normalización que requiera la aplicación debe realizarse con esto en mente, fuera de las llamadas a funciones de API de E/S de archivos de Windows relacionadas.</span><span class="sxs-lookup"><span data-stu-id="3b143-122">Any normalization that your application requires should be performed with this in mind, external of any calls to related Windows file I/O API functions.</span></span>

<span data-ttu-id="3b143-123">Cuando se usa una API para crear un directorio, la ruta de acceso especificada no puede ser tan larga que no se pueda anexar un nombre de archivo 8.3 (es decir, el nombre del directorio no puede superar **MAX \_ PATH** menos 12).</span><span class="sxs-lookup"><span data-stu-id="3b143-123">When using an API to create a directory, the specified path cannot be so long that you cannot append an 8.3 file name (that is, the directory name cannot exceed **MAX\_PATH** minus 12).</span></span>

<span data-ttu-id="3b143-124">El shell y el sistema de archivos tienen requisitos diferentes.</span><span class="sxs-lookup"><span data-stu-id="3b143-124">The shell and the file system have different requirements.</span></span> <span data-ttu-id="3b143-125">Es posible crear una ruta de acceso con la API de Windows que la interfaz de usuario del shell no pueda interpretar correctamente.</span><span class="sxs-lookup"><span data-stu-id="3b143-125">It is possible to create a path with the Windows API that the shell user interface is not able to interpret properly.</span></span>

## <a name="enable-long-paths-in-windows-10-version-1607-and-later"></a><span data-ttu-id="3b143-126">Habilitar rutas de acceso largas Windows 10, versión 1607 y posteriores</span><span class="sxs-lookup"><span data-stu-id="3b143-126">Enable Long Paths in Windows 10, Version 1607, and Later</span></span>

<span data-ttu-id="3b143-127">A partir Windows 10, versión 1607, se han quitado las limitaciones de **\_ MAX PATH** de las funciones comunes de archivos y directorios win32.</span><span class="sxs-lookup"><span data-stu-id="3b143-127">Starting in Windows 10, version 1607, **MAX\_PATH** limitations have been removed from common Win32 file and directory functions.</span></span> <span data-ttu-id="3b143-128">Sin embargo, debe participar en el nuevo comportamiento.</span><span class="sxs-lookup"><span data-stu-id="3b143-128">However, you must opt-in to the new behavior.</span></span>

<span data-ttu-id="3b143-129">Para habilitar el nuevo comportamiento de ruta de acceso larga, deben cumplirse las dos condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="3b143-129">To enable the new long path behavior, both of the following conditions must be met:</span></span>

* <span data-ttu-id="3b143-130">La clave del `Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type: REG_DWORD)` Registro debe existir y establecerse en 1.</span><span class="sxs-lookup"><span data-stu-id="3b143-130">The registry key `Computer\HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem\LongPathsEnabled (Type: REG_DWORD)` must exist and be set to 1.</span></span> <span data-ttu-id="3b143-131">El sistema almacenará en caché el valor de la clave (por proceso) después de la primera llamada a una función de directorio o archivo win32 afectada (consulte a continuación la lista de funciones).</span><span class="sxs-lookup"><span data-stu-id="3b143-131">The key's value will be cached by the system (per process) after the first call to an affected Win32 file or directory function (see below for the list of functions).</span></span> <span data-ttu-id="3b143-132">La clave del Registro no se volverá a cargar durante la vigencia del proceso.</span><span class="sxs-lookup"><span data-stu-id="3b143-132">The registry key will not be reloaded during the lifetime of the process.</span></span> <span data-ttu-id="3b143-133">Para que todas las aplicaciones del sistema reconozcan el valor de la clave, puede ser necesario reiniciar porque es posible que algunos procesos se hubieran iniciado antes de establecer la clave.</span><span class="sxs-lookup"><span data-stu-id="3b143-133">In order for all apps on the system to recognize the value of the key, a reboot might be required because some processes may have started before the key was set.</span></span>

<span data-ttu-id="3b143-134">También puede copiar este código en un archivo que pueda establecerlo por usted o usar el comando de PowerShell desde una ventana `.reg` de terminal con privilegios elevados:</span><span class="sxs-lookup"><span data-stu-id="3b143-134">You can also copy this code to a `.reg` file which can set this for you, or use the PowerShell command from a terminal window with elevated privileges:</span></span>
# <a name="cmd"></a>[<span data-ttu-id="3b143-135">cmd</span><span class="sxs-lookup"><span data-stu-id="3b143-135">cmd</span></span>](#tab/cmd)

```cmd
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem]
"LongPathsEnabled"=dword:00000001

```

# <a name="powershell"></a>[<span data-ttu-id="3b143-136">PowerShell</span><span class="sxs-lookup"><span data-stu-id="3b143-136">PowerShell</span></span>](#tab/powershell)

```powershell
New-ItemProperty -Path "HKLM:\SYSTEM\CurrentControlSet\Control\FileSystem" `
-Name "LongPathsEnabled" -Value 1 -PropertyType DWORD -Force

```

---

> [!NOTE]  
> <span data-ttu-id="3b143-137">Esta clave del Registro también se puede controlar a través directiva de grupo en `Computer Configuration > Administrative Templates > System > Filesystem > Enable Win32 long paths` .</span><span class="sxs-lookup"><span data-stu-id="3b143-137">This registry key can also be controlled via Group Policy at `Computer Configuration > Administrative Templates > System > Filesystem > Enable Win32 long paths`.</span></span>

* <span data-ttu-id="3b143-138">El [manifiesto de aplicación](../sbscs/application-manifests.md) también debe incluir el elemento `longPathAware` .</span><span class="sxs-lookup"><span data-stu-id="3b143-138">The [application manifest](../sbscs/application-manifests.md) must also include the `longPathAware` element.</span></span>

    ```XML
    <application xmlns="urn:schemas-microsoft-com:asm.v3">
        <windowsSettings xmlns:ws2="http://schemas.microsoft.com/SMI/2016/WindowsSettings">
            <ws2:longPathAware>true</ws2:longPathAware>
        </windowsSettings>
    </application>
    ```

<span data-ttu-id="3b143-139">Estas son las funciones de administración de directorios que ya no tienen restricciones **de MAX \_ PATH** si opta por el comportamiento de ruta de acceso larga: CreateDirectoryW, CreateDirectoryExW GetCurrentDirectoryW RemoveDirectoryW SetCurrentDirectoryW.</span><span class="sxs-lookup"><span data-stu-id="3b143-139">These are the directory management functions that no longer have **MAX\_PATH** restrictions if you opt-in to long path behavior: CreateDirectoryW, CreateDirectoryExW GetCurrentDirectoryW RemoveDirectoryW SetCurrentDirectoryW.</span></span>

<span data-ttu-id="3b143-140">Estas son las funciones de administración de archivos que ya no tienen restricciones **MAX \_ PATH** si opta por el comportamiento de ruta de acceso larga: CopyFileW, CopyFile2, CopyFileExW, CreateFileW, CreateFile2, CreateHardLinkW, CreateSymbolicLinkW, DeleteFileW, FindFirstFileW, FindFirstFileExW, FindNextFileW, GetFileAttributesW, GetFileAttributesExW, SetFileAttributesW, GetFullPathNameW, GetLongPathNameW, MoveFileW, MoveFileExW, MoveFileWithProgressW, ReplaceFileW, SearchPathW, FindFirstFileNameW, FindNextFileNameW, FindFirstStreamW, FindNextStreamW, GetCompressedFileSizeW, GetFinalPathNameByHandleW.</span><span class="sxs-lookup"><span data-stu-id="3b143-140">These are the file management functions that no longer have **MAX\_PATH** restrictions if you opt-in to long path behavior: CopyFileW, CopyFile2, CopyFileExW, CreateFileW, CreateFile2, CreateHardLinkW, CreateSymbolicLinkW, DeleteFileW, FindFirstFileW, FindFirstFileExW, FindNextFileW, GetFileAttributesW, GetFileAttributesExW, SetFileAttributesW, GetFullPathNameW, GetLongPathNameW, MoveFileW, MoveFileExW, MoveFileWithProgressW, ReplaceFileW, SearchPathW, FindFirstFileNameW, FindNextFileNameW, FindFirstStreamW, FindNextStreamW, GetCompressedFileSizeW, GetFinalPathNameByHandleW.</span></span>
