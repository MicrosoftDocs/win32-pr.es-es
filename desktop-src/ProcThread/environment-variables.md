---
description: 'Cada proceso tiene un bloque de entorno que contiene un conjunto de variables de entorno y sus valores. Hay dos tipos de variables de entorno: las variables de entorno de usuario (establecidas para cada usuario) y las variables de entorno del sistema (establecidas para todos).'
ms.assetid: 6732b12f-ced1-4769-b947-79da8fd2237a
title: Variables de entorno
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6f50226d12286d01c77025d1cc38e33e2778392a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105677862"
---
# <a name="environment-variables"></a><span data-ttu-id="b3474-104">Variables de entorno</span><span class="sxs-lookup"><span data-stu-id="b3474-104">Environment Variables</span></span>

<span data-ttu-id="b3474-105">Cada proceso tiene un bloque de entorno que contiene un conjunto de variables de entorno y sus valores.</span><span class="sxs-lookup"><span data-stu-id="b3474-105">Every process has an environment block that contains a set of environment variables and their values.</span></span> <span data-ttu-id="b3474-106">Hay dos tipos de variables de entorno: las variables de entorno de usuario (establecidas para cada usuario) y las variables de entorno del sistema (establecidas para todos).</span><span class="sxs-lookup"><span data-stu-id="b3474-106">There are two types of environment variables: user environment variables (set for each user) and system environment variables (set for everyone).</span></span>

<span data-ttu-id="b3474-107">De forma predeterminada, un proceso secundario hereda las variables de entorno de su proceso primario.</span><span class="sxs-lookup"><span data-stu-id="b3474-107">By default, a child process inherits the environment variables of its parent process.</span></span> <span data-ttu-id="b3474-108">Los programas iniciados por el procesador de comandos heredan las variables de entorno del procesador de comandos.</span><span class="sxs-lookup"><span data-stu-id="b3474-108">Programs started by the command processor inherit the command processor's environment variables.</span></span> <span data-ttu-id="b3474-109">Para especificar un entorno diferente para un proceso secundario, cree un nuevo bloque de entorno y pase un puntero a él como parámetro a la función [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) .</span><span class="sxs-lookup"><span data-stu-id="b3474-109">To specify a different environment for a child process, create a new environment block and pass a pointer to it as a parameter to the [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa) function.</span></span>

<span data-ttu-id="b3474-110">El procesador de comandos proporciona el comando **set** para mostrar su bloque de entorno o para crear nuevas variables de entorno.</span><span class="sxs-lookup"><span data-stu-id="b3474-110">The command processor provides the **set** command to display its environment block or to create new environment variables.</span></span> <span data-ttu-id="b3474-111">También puede ver o modificar las variables de entorno; para ello, seleccione **sistema** en el **Panel de control**, seleccione **Configuración avanzada del sistema** y, a continuación, haga clic en **variables de entorno**.</span><span class="sxs-lookup"><span data-stu-id="b3474-111">You can also view or modify the environment variables by selecting **System** from the **Control Panel**, selecting **Advanced system settings**, and clicking **Environment Variables**.</span></span>

<span data-ttu-id="b3474-112">Cada bloque de entorno contiene las variables de entorno con el siguiente formato:</span><span class="sxs-lookup"><span data-stu-id="b3474-112">Each environment block contains the environment variables in the following format:</span></span><dl> <span data-ttu-id="b3474-113">*Var1* = *Valor1* \\ 0,1</span><span class="sxs-lookup"><span data-stu-id="b3474-113">*Var1*=*Value1*\\0</span></span>  
<span data-ttu-id="b3474-114">*Var2* = *Valor2* \\ 0,1</span><span class="sxs-lookup"><span data-stu-id="b3474-114">*Var2*=*Value2*\\0</span></span>  
<span data-ttu-id="b3474-115">*Var3* = *Value3* \\ 0,1</span><span class="sxs-lookup"><span data-stu-id="b3474-115">*Var3*=*Value3*\\0</span></span>  
<span data-ttu-id="b3474-116">...</span><span class="sxs-lookup"><span data-stu-id="b3474-116">...</span></span>  
<span data-ttu-id="b3474-117">*VarN* = *Valor de* \\ 0 \\ 0</span><span class="sxs-lookup"><span data-stu-id="b3474-117">*VarN*=*ValueN*\\0\\0</span></span>  
</dl>

<span data-ttu-id="b3474-118">El nombre de una variable de entorno no puede incluir un signo igual (=).</span><span class="sxs-lookup"><span data-stu-id="b3474-118">The name of an environment variable cannot include an equal sign (=).</span></span>

<span data-ttu-id="b3474-119">La función [**GetEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-getenvironmentstrings) devuelve un puntero al bloque de entorno del proceso de llamada.</span><span class="sxs-lookup"><span data-stu-id="b3474-119">The [**GetEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-getenvironmentstrings) function returns a pointer to the environment block of the calling process.</span></span> <span data-ttu-id="b3474-120">Esto se debe tratar como un bloque de solo lectura; no lo modifique directamente.</span><span class="sxs-lookup"><span data-stu-id="b3474-120">This should be treated as a read-only block; do not modify it directly.</span></span> <span data-ttu-id="b3474-121">En su lugar, use la función [**SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) para cambiar una variable de entorno.</span><span class="sxs-lookup"><span data-stu-id="b3474-121">Instead, use the [**SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) function to change an environment variable.</span></span> <span data-ttu-id="b3474-122">Cuando haya terminado con el bloque de entorno Obtenido de **GetEnvironmentStrings**, llame a la función [**FreeEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-freeenvironmentstringsa) para liberar el bloque.</span><span class="sxs-lookup"><span data-stu-id="b3474-122">When you are finished with the environment block obtained from **GetEnvironmentStrings**, call the [**FreeEnvironmentStrings**](/windows/win32/api/processenv/nf-processenv-freeenvironmentstringsa) function to free the block.</span></span>

<span data-ttu-id="b3474-123">La llamada a [**SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) no tiene ningún efecto en las variables de entorno del sistema.</span><span class="sxs-lookup"><span data-stu-id="b3474-123">Calling [**SetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-setenvironmentvariable) has no effect on the system environment variables.</span></span> <span data-ttu-id="b3474-124">Para agregar o modificar mediante programación variables de entorno del sistema, agréguelas a la clave del registro **HKEY \_ local \_ Machine \\ System \\ CurrentControlSet \\ control \\ Session Manager \\** y, a continuación, difunde un mensaje de [**WM \_ SETTINGCHANGE**](/windows/desktop/winmsg/wm-settingchange) con *lParam* establecido en la cadena "Environment".</span><span class="sxs-lookup"><span data-stu-id="b3474-124">To programmatically add or modify system environment variables, add them to the **HKEY\_LOCAL\_MACHINE\\System\\CurrentControlSet\\Control\\Session Manager\\Environment** registry key, then broadcast a [**WM\_SETTINGCHANGE**](/windows/desktop/winmsg/wm-settingchange) message with *lParam* set to the string "Environment".</span></span> <span data-ttu-id="b3474-125">Esto permite a las aplicaciones, como el Shell, seleccionar las actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="b3474-125">This allows applications, such as the shell, to pick up your updates.</span></span>

<span data-ttu-id="b3474-126">El tamaño máximo de una variable de entorno definida por el usuario es de 32.767 caracteres.</span><span class="sxs-lookup"><span data-stu-id="b3474-126">The maximum size of a user-defined environment variable is 32,767 characters.</span></span> <span data-ttu-id="b3474-127">No hay ninguna limitación técnica en cuanto al tamaño del bloque de entorno.</span><span class="sxs-lookup"><span data-stu-id="b3474-127">There is no technical limitation on the size of the environment block.</span></span> <span data-ttu-id="b3474-128">Sin embargo, hay límites prácticos según el mecanismo utilizado para tener acceso al bloque.</span><span class="sxs-lookup"><span data-stu-id="b3474-128">However, there are practical limits depending on the mechanism used to access the block.</span></span> <span data-ttu-id="b3474-129">Por ejemplo, un archivo por lotes no puede establecer una variable que sea mayor que la longitud máxima de la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="b3474-129">For example, a batch file cannot set a variable that is longer than the maximum command line length.</span></span>

<span data-ttu-id="b3474-130">**Windows Server 2003 y Windows XP:** El tamaño máximo del bloque de entorno para el proceso es de 32.767 caracteres.</span><span class="sxs-lookup"><span data-stu-id="b3474-130">**Windows Server 2003 and Windows XP:** The maximum size of the environment block for the process is 32,767 characters.</span></span> <span data-ttu-id="b3474-131">A partir de Windows Vista y Windows Server 2008, no hay ninguna limitación técnica en cuanto al tamaño del bloque de entorno.</span><span class="sxs-lookup"><span data-stu-id="b3474-131">Starting with Windows Vista and Windows Server 2008, there is no technical limitation on the size of the environment block.</span></span>

<span data-ttu-id="b3474-132">La función [**GetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-getenvironmentvariable) determina si una variable especificada está definida en el entorno del proceso de llamada y, en ese caso, cuál es su valor.</span><span class="sxs-lookup"><span data-stu-id="b3474-132">The [**GetEnvironmentVariable**](/windows/desktop/api/WinBase/nf-winbase-getenvironmentvariable) function determines whether a specified variable is defined in the environment of the calling process, and, if so, what its value is.</span></span>

<span data-ttu-id="b3474-133">Para recuperar una copia del bloque de entorno para un usuario determinado, use la función [**CreateEnvironmentBlock**](/windows/win32/api/userenv/nf-userenv-createenvironmentblock) .</span><span class="sxs-lookup"><span data-stu-id="b3474-133">To retrieve a copy of the environment block for a given user, use the [**CreateEnvironmentBlock**](/windows/win32/api/userenv/nf-userenv-createenvironmentblock) function.</span></span>

<span data-ttu-id="b3474-134">Para expandir cadenas de variables de entorno, utilice la función [**ExpandEnvironmentStrings**](/windows/desktop/api/processenv/nf-processenv-expandenvironmentstringsa) .</span><span class="sxs-lookup"><span data-stu-id="b3474-134">To expand environment-variable strings, use the [**ExpandEnvironmentStrings**](/windows/desktop/api/processenv/nf-processenv-expandenvironmentstringsa) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b3474-135">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="b3474-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b3474-136">Cambiar variables de entorno</span><span class="sxs-lookup"><span data-stu-id="b3474-136">Changing Environment Variables</span></span>](changing-environment-variables.md)
</dt> <dt>

[<span data-ttu-id="b3474-137">Variables de entorno de usuario</span><span class="sxs-lookup"><span data-stu-id="b3474-137">User Environment Variables</span></span>](../shell/user-environment-variables.md)
</dt> </dl>

 

 
