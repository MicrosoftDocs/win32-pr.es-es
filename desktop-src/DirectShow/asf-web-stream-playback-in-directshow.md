---
description: Reproducción de secuencias web ASF en DirectShow
ms.assetid: c7818c62-24af-4eac-84b8-f76be4ca6c09
title: Reproducción de secuencias web ASF en DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2d14a83d2baf9c11aa824f5d6358f62790c16b30
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104359986"
---
# <a name="asf-web-stream-playback-in-directshow"></a><span data-ttu-id="ca903-103">Reproducción de secuencias web ASF en DirectShow</span><span class="sxs-lookup"><span data-stu-id="ca903-103">ASF Web Stream Playback in DirectShow</span></span>

<span data-ttu-id="ca903-104">Microsoft DirectShow admite secuencias Web en escenarios de reproducción de archivos a través del filtro de [lector ASF de WM](wm-asf-reader-filter.md) , pero debe escribir su propio filtro de DirectShow para capturar y conservar la secuencia.</span><span class="sxs-lookup"><span data-stu-id="ca903-104">Microsoft DirectShow supports web streams in file playback scenarios through the [WM ASF Reader](wm-asf-reader-filter.md) filter, but you must write your own DirectShow filter to capture and persist the stream.</span></span>

> [!Note]  
> <span data-ttu-id="ca903-105">Para reproducir secuencias Web en el contenido que se transmite desde un servidor que ejecuta Windows Media Services, use el control ActiveX® de la serie Windows Media Player 9 incrustado en una página web.</span><span class="sxs-lookup"><span data-stu-id="ca903-105">To play back web streams in content that is being streamed from a server running Windows Media Services, use the Windows Media Player 9 Series ActiveX® control embedded in a web page.</span></span>

 

<span data-ttu-id="ca903-106">Cuando se proporciona un archivo que contiene secuencias de tipo WMMEDIATYPE \_ FileTransfer, el lector ASF de WM creará un PIN de salida para él.</span><span class="sxs-lookup"><span data-stu-id="ca903-106">When given a file containing streams of type WMMEDIATYPE\_FileTransfer, the WM ASF Reader will create an output pin for it.</span></span> <span data-ttu-id="ca903-107">El bloque de formato será una estructura de [**\_ \_ formato de Webstream de WMT**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_format) .</span><span class="sxs-lookup"><span data-stu-id="ca903-107">The format block will be a [**WMT\_WEBSTREAM\_FORMAT**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_format) structure.</span></span> <span data-ttu-id="ca903-108">(Esta estructura se documenta en la documentación del SDK de Windows Media Format). Si no hay ningún filtro de nivel inferior disponible que pueda controlar ese tipo de medio, el PIN permanecerá sin conexión, pero el archivo seguirá reproduciendo las secuencias de audio o vídeo.</span><span class="sxs-lookup"><span data-stu-id="ca903-108">(This structure is documented in the Windows Media Format SDK documentation.) If no downstream filter is available that can handle that media type, then the pin will remain unconnected, but the file will still play the audio and/or video streams.</span></span>

<span data-ttu-id="ca903-109">Cada ejemplo multimedia de una secuencia web contiene una estructura de [**\_ encabezado de \_ ejemplo \_ WMT Webstream**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_sample_header) , que se documenta en la documentación del SDK de Windows Media Format.</span><span class="sxs-lookup"><span data-stu-id="ca903-109">Each media sample in a web stream contains a [**WMT\_WEBSTREAM\_SAMPLE\_HEADER**](/previous-versions/windows/desktop/api/wmsdkidl/ns-wmsdkidl-wmt_webstream_sample_header) structure, which is documented in the Windows Media Format SDK documentation.</span></span> <span data-ttu-id="ca903-110">La estructura tiene una longitud variable en función de la longitud de su miembro **wszURL** .</span><span class="sxs-lookup"><span data-stu-id="ca903-110">The structure has a variable length depending on the length of its **wszURL** member.</span></span> <span data-ttu-id="ca903-111">El puntero a los datos de ejemplo apunta inicialmente a esta estructura y debe avanzar el puntero más allá de la estructura para obtener acceso a los datos reales de la secuencia.</span><span class="sxs-lookup"><span data-stu-id="ca903-111">The pointer to the sample data initially points to this structure, and you must advance the pointer past the structure in order to access the actual data in the stream.</span></span>

<span data-ttu-id="ca903-112">El filtro del controlador de la secuencia Web se debe basar en la clase [**CBaseRenderer**](cbaserenderer.md) .</span><span class="sxs-lookup"><span data-stu-id="ca903-112">Your web stream handler filter should be based on the [**CBaseRenderer**](cbaserenderer.md) class.</span></span> <span data-ttu-id="ca903-113">En el método [**CBaseRenderer::D orendersample**](cbaserenderer-dorendersample.md) , el filtro deberá analizar la estructura para obtener información sobre la secuencia web y, a continuación, realizar la acción adecuada.</span><span class="sxs-lookup"><span data-stu-id="ca903-113">In the [**CBaseRenderer::DoRenderSample**](cbaserenderer-dorendersample.md) method, the filter will need to parse the structure for information about the web stream, and then perform the appropriate action.</span></span> <span data-ttu-id="ca903-114">Normalmente, esto implicará guardar el archivo en el disco y, a continuación, llamar a las funciones [**CreateUrlCacheEntry**](/windows/desktop/api/wininet/nf-wininet-createurlcacheentrya) y [**CommitUrlCacheEntryW**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentryw) o [**CommitUrlCacheEntryA**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentrya) para colocar los archivos en la memoria caché de Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="ca903-114">Typically, this will involve saving the file to disk, and then calling the [**CreateUrlCacheEntry**](/windows/desktop/api/wininet/nf-wininet-createurlcacheentrya) and [**CommitUrlCacheEntryW**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentryw) or [**CommitUrlCacheEntryA**](/windows/desktop/api/wininet/nf-wininet-commiturlcacheentrya) functions to place the files into the Internet Explorer cache.</span></span> <span data-ttu-id="ca903-115">El filtro debe administrar los archivos de varias partes, es decir, los archivos que son más grandes que un ejemplo y también debe controlar los comandos de representación, que se especifican en el miembro **\_ Header de ejemplo Webstream de WMT \_ \_ . wSampleType** .</span><span class="sxs-lookup"><span data-stu-id="ca903-115">The filter must handle multipart files, that is, files that are larger than one sample, and also must handle render commands, which are specified by the **WMT\_WEBSTREAM\_SAMPLE\_HEADER.wSampleType** member.</span></span> <span data-ttu-id="ca903-116">El filtro envía un evento de [**\_ \_ evento OLE de EC**](ec-ole-event.md) a la aplicación, junto con el texto de la cadena de **ejemplo de \_ Webstream \_ \_ . wszURL de WMT** que contiene el nombre del archivo que se va a representar.</span><span class="sxs-lookup"><span data-stu-id="ca903-116">The filter sends an [**EC\_OLE\_EVENT**](ec-ole-event.md) event to the application, along with the text of the **WMT\_WEBSTREAM\_SAMPLE\_HEADER.wszURL** string which contains the name of the file to be rendered.</span></span> <span data-ttu-id="ca903-117">A continuación, la aplicación hace que el explorador muestre la página especificada.</span><span class="sxs-lookup"><span data-stu-id="ca903-117">The application then causes the browser to display the specified page.</span></span> <span data-ttu-id="ca903-118">Si la secuencia Web se ha creado correctamente, el archivo ya debe estar en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="ca903-118">If the web stream has been authored correctly, the file should already be in the cache.</span></span>

<span data-ttu-id="ca903-119">Para obtener más información sobre \_ el formato de WEBstream de WMT \_ y \_ el encabezado de ejemplo de Webstream WMT \_ \_ , vea la documentación del SDK de Windows Media Format.</span><span class="sxs-lookup"><span data-stu-id="ca903-119">For more information on WMT\_WEBSTREAM\_FORMAT and WMT\_WEBSTREAM\_SAMPLE\_HEADER, see the Windows Media Format SDK documentation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ca903-120">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="ca903-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ca903-121">Leer archivos ASF en DirectShow</span><span class="sxs-lookup"><span data-stu-id="ca903-121">Reading ASF Files in DirectShow</span></span>](reading-asf-files-in-directshow.md)
</dt> </dl>

 

 
