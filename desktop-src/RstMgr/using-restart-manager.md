---
title: Uso del administrador de reinicio
description: En las secciones siguientes se describe el uso de la API del administrador de reinicio.
ms.assetid: 78448d5e-20f6-45b6-b833-7d7791e5e4c6
keywords:
- Admin. de reinicio del administrador, uso
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6e4ac72edb9f2395bbd67236806c3ab3029372cc
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "103904763"
---
# <a name="using-restart-manager"></a><span data-ttu-id="0d835-104">Uso del administrador de reinicio</span><span class="sxs-lookup"><span data-stu-id="0d835-104">Using Restart Manager</span></span>

<span data-ttu-id="0d835-105">En las secciones siguientes se describe el uso de la API del administrador de reinicio.</span><span class="sxs-lookup"><span data-stu-id="0d835-105">The following sections describe using the Restart Manager API.</span></span> <span data-ttu-id="0d835-106">Las aplicaciones y los servicios también deben seguir las [instrucciones para aplicaciones y servicios](guidelines-for-applications-and-services.md).</span><span class="sxs-lookup"><span data-stu-id="0d835-106">Your applications and services should also follow the [Guidelines for Applications and Services](guidelines-for-applications-and-services.md).</span></span>

## <a name="using-the-microsoft-windows-installer"></a><span data-ttu-id="0d835-107">Usar el Microsoft Windows Installer</span><span class="sxs-lookup"><span data-stu-id="0d835-107">Using the Microsoft Windows Installer</span></span>

<span data-ttu-id="0d835-108">La versión [Microsoft Windows Installer](/windows/desktop/Msi/windows-installer-portal) 4,0 es el servicio de instalación de aplicaciones de Windows Vista o windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="0d835-108">The [Microsoft Windows Installer](/windows/desktop/Msi/windows-installer-portal) Version 4.0 is the application installation service of Windows Vista or Windows Server 2008.</span></span> <span data-ttu-id="0d835-109">Las aplicaciones que utilizan la Windows Installer versión 4,0 para la instalación y el mantenimiento usan automáticamente el administrador de reinicio para reducir los reinicios del sistema.</span><span class="sxs-lookup"><span data-stu-id="0d835-109">Applications that use the Windows Installer version 4.0 for installation and servicing automatically use the Restart Manager to reduce system restarts.</span></span> <span data-ttu-id="0d835-110">Los instaladores personalizados también pueden diseñarse para que llamen a la API del administrador de reinicio para apagar y reiniciar aplicaciones y servicios directamente para evitar que se reinicie el sistema.</span><span class="sxs-lookup"><span data-stu-id="0d835-110">Custom installers can also be designed to call the Restart Manager API to shut down and restart applications and services directly to avoid requiring a system restart.</span></span> <span data-ttu-id="0d835-111">En los casos en los que no se puede evitar el reinicio del sistema, los instaladores pueden utilizar la función [**InitiateShutdown**](/windows/desktop/api/winreg/nf-winreg-initiateshutdowna) o [**ExitWindowsEx**](/windows/desktop/api/winuser/nf-winuser-exitwindowsex) para programarlos de forma que se minimice la interrupción para el usuario.</span><span class="sxs-lookup"><span data-stu-id="0d835-111">In cases where a system restart is unavoidable, installers can use the [**InitiateShutdown**](/windows/desktop/api/winreg/nf-winreg-initiateshutdowna) or [**ExitWindowsEx**](/windows/desktop/api/winuser/nf-winuser-exitwindowsex) function to schedule it in such a way that it minimizes the disruption to the user.</span></span> <span data-ttu-id="0d835-112">Los paquetes Windows Installer interactivos deben implementar una interfaz de usuario que incluya un cuadro de diálogo [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) .</span><span class="sxs-lookup"><span data-stu-id="0d835-112">Interactive Windows Installer packages should implement a user interface that includes a [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) dialog box.</span></span> <span data-ttu-id="0d835-113">Para obtener más información, consulte [uso de Windows Installer con el administrador de reinicio](/windows/desktop/Msi/using-windows-installer-with-restart-manager) en la documentación del SDK de Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="0d835-113">For more information, see [Using Windows Installer with Restart Manager](/windows/desktop/Msi/using-windows-installer-with-restart-manager) in the Windows Installer SDK documentation.</span></span>

## <a name="using-the-restart-manager-api-with-custom-installers"></a><span data-ttu-id="0d835-114">Uso de la API del administrador de reinicio con instaladores personalizados</span><span class="sxs-lookup"><span data-stu-id="0d835-114">Using the Restart Manager API with Custom Installers</span></span>

<span data-ttu-id="0d835-115">Los instaladores personalizados, o un paquete de Windows Installer que contiene acciones personalizadas que provocan un reinicio del sistema, pueden usar la API del administrador de reinicio para apagar y reiniciar aplicaciones y servicios.</span><span class="sxs-lookup"><span data-stu-id="0d835-115">Custom installers, or a Windows Installer package that contains custom actions that cause a system restart, can use the Restart Manager API to shut down and restart applications and services.</span></span>

-   <span data-ttu-id="0d835-116">Todas las operaciones que se realizan con la API del administrador de reinicio deben estar asociadas a una sesión.</span><span class="sxs-lookup"><span data-stu-id="0d835-116">All operations that are performed using the Restart Manager API must be associated with a session.</span></span> <span data-ttu-id="0d835-117">Puede haber un máximo de 64 sesiones del administrador de reinicio por sesión de usuario abiertas en el sistema al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="0d835-117">A maximum of 64 Restart Manager sessions per user session can be open on the system at the same time.</span></span> <span data-ttu-id="0d835-118">El instalador principal inicia y finaliza la sesión del administrador de reinicio.</span><span class="sxs-lookup"><span data-stu-id="0d835-118">The primary installer starts and ends the Restart Manager session.</span></span> <span data-ttu-id="0d835-119">Para obtener más información acerca del uso del administrador de reinicio con un solo instalador, consulte [uso del administrador de reinicio con un instalador principal](using-restart-manager-with-a-primary-installer.md).</span><span class="sxs-lookup"><span data-stu-id="0d835-119">For more information about using Restart Manager with a single installer, see [Using Restart Manager with a Primary Installer](using-restart-manager-with-a-primary-installer.md).</span></span>
-   <span data-ttu-id="0d835-120">Si es necesario para la instalación, uno o varios instaladores secundarios pueden unirse a la sesión del administrador de reinicio y pueden ejecutarse en proceso o fuera de proceso del instalador principal.</span><span class="sxs-lookup"><span data-stu-id="0d835-120">If necessary for the installation, one or more secondary installers can be joined to the Restart Manager session and can run either in-process or out-of-process of the primary installer.</span></span> <span data-ttu-id="0d835-121">Los instaladores secundarios requieren que el instalador principal proporcione la clave de sesión para unirse a una sesión.</span><span class="sxs-lookup"><span data-stu-id="0d835-121">Secondary installers require that the session key be provided by the primary installer to join a session.</span></span> <span data-ttu-id="0d835-122">Para obtener más información y un ejemplo del uso de instaladores secundarios, consulte [uso del administrador de reinicio con un instalador secundario](using-restart-manager-with-a-secondary-installer.md).</span><span class="sxs-lookup"><span data-stu-id="0d835-122">For more information and an example of using secondary installers, see [Using Restart Manager with a Secondary Installer](using-restart-manager-with-a-secondary-installer.md).</span></span>
-   <span data-ttu-id="0d835-123">Los instaladores interactivos deben implementar una interfaz de usuario que incluye un cuadro de diálogo [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) que puede pedir a los usuarios que cierren las aplicaciones y los servicios.</span><span class="sxs-lookup"><span data-stu-id="0d835-123">Interactive installers should implement a user interface that includes an [MsiRMFilesInUse](/windows/desktop/Msi/msirmfilesinuse-dialog) dialog box that can ask users to close applications and services.</span></span> <span data-ttu-id="0d835-124">Para obtener más información, consulte [uso de Windows Installer con el administrador de reinicio](/windows/desktop/Msi/using-windows-installer-with-restart-manager) en la documentación del SDK de Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="0d835-124">For more information, see [Using Windows Installer with Restart Manager](/windows/desktop/Msi/using-windows-installer-with-restart-manager) in the Windows Installer SDK documentation.</span></span>
-   <span data-ttu-id="0d835-125">Los instaladores pueden llamar a la API del administrador de reinicio para cambiar, cancelar y obtener el estado de la operación del administrador de reinicio actual.</span><span class="sxs-lookup"><span data-stu-id="0d835-125">Installers can call the Restart Manager API to change, cancel, and get the status of the current Restart Manager operation.</span></span> <span data-ttu-id="0d835-126">Para obtener más información, vea los temas siguientes: [obtener el estado de una operación del administrador de reinicio](getting-the-status-of-a-restart-manager-operation.md) y [cancelar la operación actual del administrador de reinicio](canceling-the-current-restart-manager-operation.md).</span><span class="sxs-lookup"><span data-stu-id="0d835-126">For more information, see the following topics: [Getting the Status of a Restart Manager Operation](getting-the-status-of-a-restart-manager-operation.md) and [Canceling the Current Restart Manager Operation](canceling-the-current-restart-manager-operation.md).</span></span>
-   <span data-ttu-id="0d835-127">Los instaladores no deben deshabilitar la redirección del sistema de archivos antes de llamar a la API del administrador de reinicio.</span><span class="sxs-lookup"><span data-stu-id="0d835-127">Installers should not disable file system redirection before calling the Restart Manager API.</span></span> <span data-ttu-id="0d835-128">Algunos instaladores de 32 bits que se ejecutan en Windows de 64 bits pueden no poder registrar un archivo en el directorio% WINDIR% \\ system32.</span><span class="sxs-lookup"><span data-stu-id="0d835-128">Some 32-bit installers run on 64-bit Windows may be unable to register a file in the %windir%\\system32 directory.</span></span>

 

 