---
title: Enlazar con cifrado
description: Se debe cifrar la información confidencial intercambiada a través de una red.
ms.assetid: 51fe2131-5f7d-41b1-ad88-d965cbb4d630
ms.tgt_platform: multiple
keywords:
- ADSI ADSI, usar, enlazar con cifrado
- Enlazar con cifrado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8cf19747a8356459f4ab50c0aa409f69b58eb224
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "103993868"
---
# <a name="binding-with-encryption"></a><span data-ttu-id="a40ac-105">Enlazar con cifrado</span><span class="sxs-lookup"><span data-stu-id="a40ac-105">Binding With Encryption</span></span>

<span data-ttu-id="a40ac-106">Se debe cifrar la información confidencial intercambiada a través de una red.</span><span class="sxs-lookup"><span data-stu-id="a40ac-106">Sensitive data exchanged over a network should be encrypted.</span></span> <span data-ttu-id="a40ac-107">Para permitirlo, ADSI admite dos tipos de cifrado, Kerberos y Capa de sockets seguros (SSL).</span><span class="sxs-lookup"><span data-stu-id="a40ac-107">To allow this, ADSI supports two types of encryption, Kerberos and Secure Sockets Layer (SSL).</span></span> <span data-ttu-id="a40ac-108">Ambos tipos de cifrado requieren el uso de [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) o [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) para el enlace.</span><span class="sxs-lookup"><span data-stu-id="a40ac-108">Both types of encryption require the use of [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) for binding.</span></span>

<span data-ttu-id="a40ac-109">No se puede usar **GetObject** y [**ADsGetObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsgetobject) para el enlace en este caso porque estas funciones hacen que las solicitudes LDAP usadas por ADSI y los datos devueltos del servidor de directorio se transmitan a través de la red como texto sin formato.</span><span class="sxs-lookup"><span data-stu-id="a40ac-109">**GetObject** and [**ADsGetObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsgetobject) cannot be used for binding in this case because these functions cause the LDAP requests used by ADSI and the data returned from the directory server to transmit across the network as plaintext.</span></span> <span data-ttu-id="a40ac-110">Con fines de depuración, resulta útil desactivar el cifrado, por lo que el Monitor de red se puede usar para ver las solicitudes LDAP y los datos entre el cliente y el servidor de directorio.</span><span class="sxs-lookup"><span data-stu-id="a40ac-110">For debugging purposes, it is helpful to turn encryption off so the Network Monitor can be used to view the LDAP requests and data between the client and the directory server.</span></span>

## <a name="kerberos-based-encryption"></a><span data-ttu-id="a40ac-111">Cifrado basado en Kerberos</span><span class="sxs-lookup"><span data-stu-id="a40ac-111">Kerberos-based Encryption</span></span>

<span data-ttu-id="a40ac-112">Para usar el cifrado basado en Kerberos, especifique la marca de **\_ \_ sellado usar de ADS** al llamar a [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) o [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span><span class="sxs-lookup"><span data-stu-id="a40ac-112">To use Kerberos-based encryption, specify the **ADS\_USE\_SEALING** flag when calling [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span></span> <span data-ttu-id="a40ac-113">La marca de **\_ \_ sellado usar** también puede usarse para comprobar la integridad de los datos, es decir, para asegurarse de que los datos recibidos son los mismos que los datos enviados.</span><span class="sxs-lookup"><span data-stu-id="a40ac-113">The **ADS\_USE\_SEALING** flag can also be used to verify data integrity, that is, to ensure the data received is the same as the data sent.</span></span> <span data-ttu-id="a40ac-114">Si se especifica la marca de **\_ sellado usar el \_ sellado** , la marca de **\_ \_ firma usar** también se especifica automáticamente.</span><span class="sxs-lookup"><span data-stu-id="a40ac-114">If the **ADS\_USE\_SEALING** flag is specified, the **ADS\_USE\_SIGNING** flag is automatically specified as well.</span></span> <span data-ttu-id="a40ac-115">Ambas marcas requieren la autenticación Kerberos, que solo funciona en las siguientes condiciones:</span><span class="sxs-lookup"><span data-stu-id="a40ac-115">Both flags require Kerberos authentication, which works only under the following conditions:</span></span>

-   <span data-ttu-id="a40ac-116">El equipo cliente debe haber iniciado sesión en el dominio de Windows o en un dominio de confianza para un dominio de Windows.</span><span class="sxs-lookup"><span data-stu-id="a40ac-116">The client computer must be logged on to the Windows domain, or to a domain trusted by a Windows domain.</span></span>
-   <span data-ttu-id="a40ac-117">Se debe llamar a [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) o [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) con credenciales null; es decir, no se pueden especificar credenciales alternativas.</span><span class="sxs-lookup"><span data-stu-id="a40ac-117">[**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject) must be called with null credentials; that is, alternate credentials cannot be specified.</span></span>

## <a name="ssl-based-encryption"></a><span data-ttu-id="a40ac-118">Cifrado basado en SSL</span><span class="sxs-lookup"><span data-stu-id="a40ac-118">SSL-based Encryption</span></span>

<span data-ttu-id="a40ac-119">Para usar el cifrado basado en SSL, especifique la marca **ADS \_ use \_ SSL** al llamar a [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) o [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span><span class="sxs-lookup"><span data-stu-id="a40ac-119">To use SSL-based encryption, specify the **ADS\_USE\_SSL** flag when calling [**ADsOpenObject**](/windows/desktop/api/Adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/Iads/nf-iads-iadsopendsobject-opendsobject).</span></span> <span data-ttu-id="a40ac-120">Si solo se especifica la marca de **\_ uso de \_ SSL de ADS** , ADSI abre el puerto SSL 636 y, a continuación, realiza un enlace simple a través de ese canal SSL.</span><span class="sxs-lookup"><span data-stu-id="a40ac-120">If only the **ADS\_USE\_SSL** flag is specified, ADSI opens SSL port 636 and then performs a simple bind over that SSL channel.</span></span> <span data-ttu-id="a40ac-121">Si se especifican las marcas SSL de **ADS \_ Secure \_ Authentication** y **ADS \_ use \_** , el comportamiento del enlace depende del cliente desde el que se realiza la llamada.</span><span class="sxs-lookup"><span data-stu-id="a40ac-121">If both the **ADS\_SECURE\_AUTHENTICATION** and **ADS\_USE\_SSL** flags are specified, the binding behavior depends on the client that the call is made from.</span></span> <span data-ttu-id="a40ac-122">En las versiones no admitidas de Windows, ADSI abre primero un canal SSL y realiza un enlace simple con el nombre de usuario y la contraseña especificados o el contexto del usuario actual si el nombre de usuario y la contraseña son NULL.</span><span class="sxs-lookup"><span data-stu-id="a40ac-122">On unsupported versions of Windows, ADSI first opened an SSL channel and performs a simple bind using the specified user name and password or the current user context if both user name and password are null.</span></span> <span data-ttu-id="a40ac-123">En las versiones compatibles de Windows, ADSI realiza una autenticación segura en lugar de un enlace simple.</span><span class="sxs-lookup"><span data-stu-id="a40ac-123">On supported versions of Windows, ADSI performs a secure authentication rather than a simple bind.</span></span>

<span data-ttu-id="a40ac-124">Para usar el cifrado basado en SSL mientras se comunica con Active Directory, Active Directory debe tener habilitada la infraestructura de clave pública (PKI).</span><span class="sxs-lookup"><span data-stu-id="a40ac-124">To use SSL-based encryption while communicating with Active Directory, Active Directory must have enabled Public Key Infrastructure (PKI).</span></span> <span data-ttu-id="a40ac-125">La PKI se puede habilitar mediante la configuración de una entidad de certificación empresarial en uno de los servidores de Active Directory, incluido uno de los servidores de Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a40ac-125">PKI can be enabled by setting up an enterprise certification authority on one of the servers in Active Directory, including one of the Active Directory servers itself.</span></span> <span data-ttu-id="a40ac-126">La configuración de una entidad de certificación empresarial hace que un servidor de Active Directory obtenga un certificado de servidor que se puede usar para realizar el cifrado basado en SSL.</span><span class="sxs-lookup"><span data-stu-id="a40ac-126">Setting up an enterprise certification authority causes an Active Directory server to get a server certificate that can then be used to do SSL-based encryption.</span></span>

 

 




