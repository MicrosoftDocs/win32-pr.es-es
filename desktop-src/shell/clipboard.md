---
description: Los formatos del portapapeles de Shell se usan para identificar el tipo de datos de Shell que se transfieren a través del portapapeles.
ms.assetid: fb8ce5d3-3215-4e05-a916-4d4a803464d2
title: Formatos del portapapeles de Shell
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 674ccc33db3a35a1a60abb549f5e1ab5b5c96760
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103808851"
---
# <a name="shell-clipboard-formats"></a><span data-ttu-id="16250-103">Formatos del portapapeles de Shell</span><span class="sxs-lookup"><span data-stu-id="16250-103">Shell Clipboard Formats</span></span>

<span data-ttu-id="16250-104">Los formatos del portapapeles de Shell se usan para identificar el tipo de datos de Shell que se transfieren a través del portapapeles.</span><span class="sxs-lookup"><span data-stu-id="16250-104">Shell clipboard formats are used to identify the type of Shell data being transferred through the clipboard.</span></span> <span data-ttu-id="16250-105">La mayoría de los formatos del Portapapeles del shell identifican un tipo de datos, como una lista de nombres de archivo o punteros a listas de identificadores de elementos (PIDL).</span><span class="sxs-lookup"><span data-stu-id="16250-105">Most Shell clipboard formats identify a type of data, such as a list of file names or pointers to item identifier lists (PIDLs).</span></span> <span data-ttu-id="16250-106">Sin embargo, se usan algunos formatos para la comunicación entre el origen y el destino.</span><span class="sxs-lookup"><span data-stu-id="16250-106">However, some formats are used for communication between source and target.</span></span> <span data-ttu-id="16250-107">Pueden agilizar el proceso de transferencia de datos al admitir operaciones de shell como el movimiento y el [delete_on_paste](datascenarios.md) [optimizados](datascenarios.md) .</span><span class="sxs-lookup"><span data-stu-id="16250-107">They can expedite the data transfer process by supporting Shell operations such as [optimized move](datascenarios.md) and [delete_on_paste](datascenarios.md).</span></span> <span data-ttu-id="16250-108">Los datos de Shell siempre están contenidos en un [objeto de datos](dataobject.md) que usa una estructura [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) como una forma más general de caracterizar los datos.</span><span class="sxs-lookup"><span data-stu-id="16250-108">Shell data is always contained in a [data object](dataobject.md) that uses a [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) structure as a more general way to characterize data.</span></span> <span data-ttu-id="16250-109">El miembro **cfFormat** de la estructura se establece en el formato del portapapeles para el elemento de datos determinado.</span><span class="sxs-lookup"><span data-stu-id="16250-109">The structure's **cfFormat** member is set to the clipboard format for the particular item of data.</span></span> <span data-ttu-id="16250-110">Los demás miembros proporcionan información adicional, como el mecanismo de transferencia de datos.</span><span class="sxs-lookup"><span data-stu-id="16250-110">The other members provide additional information, such as the data transfer mechanism.</span></span> <span data-ttu-id="16250-111">Los datos se encuentran en una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) adjunta.</span><span class="sxs-lookup"><span data-stu-id="16250-111">The data is contained in an accompanying [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure.</span></span>

> [!Note]  
> <span data-ttu-id="16250-112">Los identificadores de formato del portapapeles estándar tienen el formato CF_ *XXX*.</span><span class="sxs-lookup"><span data-stu-id="16250-112">Standard clipboard format identifiers have the form CF_ *XXX*.</span></span> <span data-ttu-id="16250-113">Un ejemplo común es CF_TEXT, que se usa para transferir datos de texto ANSI.</span><span class="sxs-lookup"><span data-stu-id="16250-113">A common example is CF_TEXT, which is used for transferring ANSI text data.</span></span> <span data-ttu-id="16250-114">Estos identificadores tienen valores predefinidos y se pueden utilizar directamente con estructuras [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) .</span><span class="sxs-lookup"><span data-stu-id="16250-114">These identifiers have predefined values and can be used directly with [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) structures.</span></span> <span data-ttu-id="16250-115">A excepción de [CF_HDROP](#cf_hdrop), los identificadores de formato de Shell no están predefinidos.</span><span class="sxs-lookup"><span data-stu-id="16250-115">With the exception of [CF_HDROP](#cf_hdrop), Shell format identifiers are not predefined.</span></span> <span data-ttu-id="16250-116">Con la excepción de DragWindow, tienen el formato CFSTR_ *XXX*.</span><span class="sxs-lookup"><span data-stu-id="16250-116">With the exception of DragWindow, they have the form CFSTR_ *XXX*.</span></span> <span data-ttu-id="16250-117">Para diferenciar estos valores de los formatos predefinidos, a menudo se les denomina simplemente *formatos*.</span><span class="sxs-lookup"><span data-stu-id="16250-117">To differentiate these values from predefined formats, they are often referred to as simply *formats*.</span></span> <span data-ttu-id="16250-118">Sin embargo, a diferencia de los formatos predefinidos, se deben registrar tanto en el origen como en el destino antes de que se puedan usar para transferir datos.</span><span class="sxs-lookup"><span data-stu-id="16250-118">However, unlike predefined formats, they must be registered by both source and target before they can be used to transfer data.</span></span> <span data-ttu-id="16250-119">Para registrar un formato de Shell, incluya el archivo de encabezado ShlObj. h y pase el identificador de formato de CFSTR_ *XXX* a [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata).</span><span class="sxs-lookup"><span data-stu-id="16250-119">To register a Shell format, include the Shlobj.h header file and pass the CFSTR_ *XXX* format identifier to [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata).</span></span> <span data-ttu-id="16250-120">Esta función devuelve un valor de formato de Portapapeles válido, que se puede usar como miembro **cfFormat** de una estructura **FORMATETC** .</span><span class="sxs-lookup"><span data-stu-id="16250-120">This function returns a valid clipboard format value, which can then be used as the **cfFormat** member of a **FORMATETC** structure.</span></span>

 

<span data-ttu-id="16250-121">Los formatos del portapapeles de Shell se organizan aquí en tres grupos, en función de cómo se utilicen.</span><span class="sxs-lookup"><span data-stu-id="16250-121">The Shell clipboard formats are organized here into three groups, based on how they are used.</span></span>

-   [<span data-ttu-id="16250-122">Formatos para transferir objetos del sistema de archivos</span><span class="sxs-lookup"><span data-stu-id="16250-122">Formats for Transferring File System Objects</span></span>](#formats-for-transferring-file-system-objects)
    -   [<span data-ttu-id="16250-123">CF_HDROP</span><span class="sxs-lookup"><span data-stu-id="16250-123">CF_HDROP</span></span>](#cf_hdrop)
    -   [<span data-ttu-id="16250-124">CFSTR_FILECONTENTS</span><span class="sxs-lookup"><span data-stu-id="16250-124">CFSTR_FILECONTENTS</span></span>](#cfstr_filecontents)
    -   [<span data-ttu-id="16250-125">CFSTR_FILEDESCRIPTOR</span><span class="sxs-lookup"><span data-stu-id="16250-125">CFSTR_FILEDESCRIPTOR</span></span>](#cfstr_filedescriptor)
    -   [<span data-ttu-id="16250-126">CFSTR_FILENAME</span><span class="sxs-lookup"><span data-stu-id="16250-126">CFSTR_FILENAME</span></span>](#cfstr_filename)
    -   [<span data-ttu-id="16250-127">CFSTR_FILENAMEMAP</span><span class="sxs-lookup"><span data-stu-id="16250-127">CFSTR_FILENAMEMAP</span></span>](#cfstr_filenamemap)
    -   [<span data-ttu-id="16250-128">CFSTR_MOUNTEDVOLUME</span><span class="sxs-lookup"><span data-stu-id="16250-128">CFSTR_MOUNTEDVOLUME</span></span>](#cfstr_mountedvolume)
    -   [<span data-ttu-id="16250-129">CFSTR_SHELLIDLIST</span><span class="sxs-lookup"><span data-stu-id="16250-129">CFSTR_SHELLIDLIST</span></span>](#cfstr_shellidlist)
    -   [<span data-ttu-id="16250-130">CFSTR_SHELLIDLISTOFFSET</span><span class="sxs-lookup"><span data-stu-id="16250-130">CFSTR_SHELLIDLISTOFFSET</span></span>](#cfstr_shellidlistoffset)
-   [<span data-ttu-id="16250-131">Formatos para transferir objetos virtuales</span><span class="sxs-lookup"><span data-stu-id="16250-131">Formats for Transferring Virtual Objects</span></span>](#formats-for-transferring-virtual-objects)
    -   [<span data-ttu-id="16250-132">CFSTR_NETRESOURCES</span><span class="sxs-lookup"><span data-stu-id="16250-132">CFSTR_NETRESOURCES</span></span>](#cfstr_netresources)
    -   [<span data-ttu-id="16250-133">CFSTR_PRINTERGROUP</span><span class="sxs-lookup"><span data-stu-id="16250-133">CFSTR_PRINTERGROUP</span></span>](#cfstr_printergroup)
    -   [<span data-ttu-id="16250-134">CFSTR_INETURL</span><span class="sxs-lookup"><span data-stu-id="16250-134">CFSTR_INETURL</span></span>](#cfstr_ineturl)
    -   [<span data-ttu-id="16250-135">CFSTR_SHELLURL (desusado)</span><span class="sxs-lookup"><span data-stu-id="16250-135">CFSTR_SHELLURL (deprecated)</span></span>](#cfstr_shellurl-deprecated)
-   [<span data-ttu-id="16250-136">Formatos para la comunicación entre el origen y el destino</span><span class="sxs-lookup"><span data-stu-id="16250-136">Formats for Communication Between Source and Target</span></span>](#formats-for-communication-between-source-and-target)
    -   [<span data-ttu-id="16250-137">CFSTR_INDRAGLOOP</span><span class="sxs-lookup"><span data-stu-id="16250-137">CFSTR_INDRAGLOOP</span></span>](#cfstr_indragloop)
    -   [<span data-ttu-id="16250-138">CFSTR_LOGICALPERFORMEDDROPEFFECT</span><span class="sxs-lookup"><span data-stu-id="16250-138">CFSTR_LOGICALPERFORMEDDROPEFFECT</span></span>](#cfstr_logicalperformeddropeffect)
    -   [<span data-ttu-id="16250-139">CFSTR_PASTESUCCEEDED</span><span class="sxs-lookup"><span data-stu-id="16250-139">CFSTR_PASTESUCCEEDED</span></span>](#cfstr_pastesucceeded)
    -   [<span data-ttu-id="16250-140">CFSTR_PERFORMEDDROPEFFECT</span><span class="sxs-lookup"><span data-stu-id="16250-140">CFSTR_PERFORMEDDROPEFFECT</span></span>](#cfstr_performeddropeffect)
    -   [<span data-ttu-id="16250-141">CFSTR_PREFERREDDROPEFFECT</span><span class="sxs-lookup"><span data-stu-id="16250-141">CFSTR_PREFERREDDROPEFFECT</span></span>](#cfstr_preferreddropeffect)
    -   [<span data-ttu-id="16250-142">CFSTR_TARGETCLSID</span><span class="sxs-lookup"><span data-stu-id="16250-142">CFSTR_TARGETCLSID</span></span>](#cfstr_targetclsid)
    -   [<span data-ttu-id="16250-143">CFSTR_UNTRUSTEDDRAGDROP</span><span class="sxs-lookup"><span data-stu-id="16250-143">CFSTR_UNTRUSTEDDRAGDROP</span></span>](#cfstr_untrusteddragdrop)
    -   [<span data-ttu-id="16250-144">DragWindow</span><span class="sxs-lookup"><span data-stu-id="16250-144">DragWindow</span></span>](#dragwindow)

## <a name="formats-for-transferring-file-system-objects"></a><span data-ttu-id="16250-145">Formatos para transferir objetos del sistema de archivos</span><span class="sxs-lookup"><span data-stu-id="16250-145">Formats for Transferring File System Objects</span></span>

<span data-ttu-id="16250-146">Estos formatos se utilizan para transferir uno o varios archivos u otros objetos de Shell.</span><span class="sxs-lookup"><span data-stu-id="16250-146">These formats are used to transfer one or more files or other Shell objects.</span></span>

-   [<span data-ttu-id="16250-147">CF_HDROP</span><span class="sxs-lookup"><span data-stu-id="16250-147">CF_HDROP</span></span>](#cf_hdrop)
-   [<span data-ttu-id="16250-148">CFSTR_FILECONTENTS</span><span class="sxs-lookup"><span data-stu-id="16250-148">CFSTR_FILECONTENTS</span></span>](#cfstr_filecontents)
-   [<span data-ttu-id="16250-149">CFSTR_FILEDESCRIPTOR</span><span class="sxs-lookup"><span data-stu-id="16250-149">CFSTR_FILEDESCRIPTOR</span></span>](#cfstr_filedescriptor)
-   [<span data-ttu-id="16250-150">CFSTR_FILENAME</span><span class="sxs-lookup"><span data-stu-id="16250-150">CFSTR_FILENAME</span></span>](#cfstr_filename)
-   [<span data-ttu-id="16250-151">CFSTR_FILENAMEMAP</span><span class="sxs-lookup"><span data-stu-id="16250-151">CFSTR_FILENAMEMAP</span></span>](#cfstr_filenamemap)
-   [<span data-ttu-id="16250-152">CFSTR_MOUNTEDVOLUME</span><span class="sxs-lookup"><span data-stu-id="16250-152">CFSTR_MOUNTEDVOLUME</span></span>](#cfstr_mountedvolume)
-   [<span data-ttu-id="16250-153">CFSTR_SHELLIDLIST</span><span class="sxs-lookup"><span data-stu-id="16250-153">CFSTR_SHELLIDLIST</span></span>](#cfstr_shellidlist)
-   [<span data-ttu-id="16250-154">CFSTR_SHELLIDLISTOFFSET</span><span class="sxs-lookup"><span data-stu-id="16250-154">CFSTR_SHELLIDLISTOFFSET</span></span>](#cfstr_shellidlistoffset)

### <a name="cf_hdrop"></a><span data-ttu-id="16250-155">CF_HDROP</span><span class="sxs-lookup"><span data-stu-id="16250-155">CF_HDROP</span></span>

<span data-ttu-id="16250-156">Este formato del portapapeles se usa al transferir las ubicaciones de un grupo de archivos existentes.</span><span class="sxs-lookup"><span data-stu-id="16250-156">This clipboard format is used when transferring the locations of a group of existing files.</span></span> <span data-ttu-id="16250-157">A diferencia de los demás formatos de Shell, está predefinido, por lo que no es necesario llamar a [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata).</span><span class="sxs-lookup"><span data-stu-id="16250-157">Unlike the other Shell formats, it is predefined, so there is no need to call [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata).</span></span> <span data-ttu-id="16250-158">Los datos están formados por una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-158">The data consists of an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-159">El miembro **HGLOBAL** de la estructura apunta a una estructura [**DROPFILES**](/windows/desktop/api/shlobj_core/ns-shlobj_core-dropfiles) como su miembro **HGLOBAL** .</span><span class="sxs-lookup"><span data-stu-id="16250-159">The structure's **hGlobal** member points to a [**DROPFILES**](/windows/desktop/api/shlobj_core/ns-shlobj_core-dropfiles) structure as its **hGlobal** member.</span></span>

<span data-ttu-id="16250-160">El miembro **archivos pfile** de la estructura [**DROPFILES**](/windows/desktop/api/shlobj_core/ns-shlobj_core-dropfiles) contiene un desplazamiento a una matriz de caracteres doble terminada en **null** que contiene los nombres de archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-160">The **pFiles** member of the [**DROPFILES**](/windows/desktop/api/shlobj_core/ns-shlobj_core-dropfiles) structure contains an offset to a double **null**-terminated character array that contains the file names.</span></span> <span data-ttu-id="16250-161">Si va a extraer un formato de CF_HDROP de un objeto de datos, puede usar [**DragQueryFile**](/windows/desktop/api/Shellapi/nf-shellapi-dragqueryfilea) para extraer nombres de archivo individuales del objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-161">If you are extracting a CF_HDROP format from a data object, you can use [**DragQueryFile**](/windows/desktop/api/Shellapi/nf-shellapi-dragqueryfilea) to extract individual file names from the global memory object.</span></span> <span data-ttu-id="16250-162">Si va a crear un formato de CF_HDROP para colocarlo en un objeto de datos, deberá crear la matriz de nombres de archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-162">If you are creating a CF_HDROP format to place in a data object, you will need to construct the file name array.</span></span>

<span data-ttu-id="16250-163">La matriz de nombres de archivo consta de una serie de cadenas, cada una de las cuales contiene la ruta de acceso completa de un archivo, incluido el carácter **nulo** de terminación.</span><span class="sxs-lookup"><span data-stu-id="16250-163">The file name array consists of a series of strings, each containing one file's fully qualified path, including the terminating **NULL** character.</span></span> <span data-ttu-id="16250-164">Se anexa un carácter **nulo** adicional a la cadena final para finalizar la matriz.</span><span class="sxs-lookup"><span data-stu-id="16250-164">An additional **null** character is appended to the final string to terminate the array.</span></span> <span data-ttu-id="16250-165">Por ejemplo, si \\ se transfieren los archivos c:temp1.txt y c: \\temp2.txt, la matriz de caracteres tiene el siguiente aspecto:</span><span class="sxs-lookup"><span data-stu-id="16250-165">For example, if the files c:\\temp1.txt and c:\\temp2.txt are being transferred, the character array looks like this:</span></span>


```CMD
c:\temp1.txt'\0'c:\temp2.txt'\0''\0'
```

> [!Note]  
> <span data-ttu-id="16250-166">En este ejemplo, \\ se usa "0" para representar el carácter **nulo** , no los caracteres literales que se deben incluir.</span><span class="sxs-lookup"><span data-stu-id="16250-166">In this example, '\\0' is used to represent the **null** character, not the literal characters that should be included.</span></span>


<span data-ttu-id="16250-167">Si el objeto se copió en el portapapeles como parte de una operación de arrastrar y colocar, el miembro **PT** de la estructura [**DROPFILES**](/windows/desktop/api/shlobj_core/ns-shlobj_core-dropfiles) contiene las coordenadas del punto en el que se quitó el objeto.</span><span class="sxs-lookup"><span data-stu-id="16250-167">If the object was copied to the clipboard as part of a drag-and-drop operation, the **pt** member of the [**DROPFILES**](/windows/desktop/api/shlobj_core/ns-shlobj_core-dropfiles) structure contains the coordinates of the point where the object was dropped.</span></span> <span data-ttu-id="16250-168">Puede usar [**DragQueryPoint**](/windows/desktop/api/Shellapi/nf-shellapi-dragquerypoint) para extraer las coordenadas del cursor.</span><span class="sxs-lookup"><span data-stu-id="16250-168">You can use [**DragQueryPoint**](/windows/desktop/api/Shellapi/nf-shellapi-dragquerypoint) to extract the cursor coordinates.</span></span>

<span data-ttu-id="16250-169">Si este formato está presente en un objeto de datos, un bucle de arrastre OLE simula [**WM_DROPFILES**](wm-dropfiles.md) funcionalidad con destinos de colocación que no son de OLE.</span><span class="sxs-lookup"><span data-stu-id="16250-169">If this format is present in a data object, an OLE drag loop simulates [**WM_DROPFILES**](wm-dropfiles.md) functionality with non-OLE drop targets.</span></span> <span data-ttu-id="16250-170">Esto es importante si la aplicación es el origen de una operación de arrastrar y colocar en un sistema de Windows 3,1.</span><span class="sxs-lookup"><span data-stu-id="16250-170">This is important if your application is the source of a drag-and-drop operation on a Windows 3.1 system.</span></span>

### <a name="cfstr_filecontents"></a><span data-ttu-id="16250-171">CFSTR_FILECONTENTS</span><span class="sxs-lookup"><span data-stu-id="16250-171">CFSTR_FILECONTENTS</span></span>

<span data-ttu-id="16250-172">Este identificador de formato se usa con el formato de [CFSTR_FILEDESCRIPTOR](#cfstr_filedescriptor) para transferir los datos como si fuera un archivo, independientemente de cómo se almacenen realmente.</span><span class="sxs-lookup"><span data-stu-id="16250-172">This format identifier is used with the [CFSTR_FILEDESCRIPTOR](#cfstr_filedescriptor) format to transfer data as if it were a file, regardless of how it is actually stored.</span></span> <span data-ttu-id="16250-173">Los datos están formados por una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que representa el contenido de un archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-173">The data consists of an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that represents the contents of one file.</span></span> <span data-ttu-id="16250-174">Normalmente, el archivo se representa como un objeto de flujo, lo que evita tener que colocar el contenido del archivo en la memoria.</span><span class="sxs-lookup"><span data-stu-id="16250-174">The file is normally represented as a stream object, which avoids having to place the contents of the file in memory.</span></span> <span data-ttu-id="16250-175">En ese caso, el miembro **tymed** de la estructura **STGMEDIUM** se establece en TYMED_ISTREAM y el archivo se representa mediante una interfaz [**ISTREAM**](/windows/win32/api/objidl/nn-objidl-istream) .</span><span class="sxs-lookup"><span data-stu-id="16250-175">In that case, the **tymed** member of the **STGMEDIUM** structure is set to TYMED_ISTREAM, and the file is represented by an [**IStream**](/windows/win32/api/objidl/nn-objidl-istream) interface.</span></span> <span data-ttu-id="16250-176">El archivo también puede ser un objeto de almacenamiento o de memoria global (TYMED_ISTORAGE o TYMED_HGLOBAL).</span><span class="sxs-lookup"><span data-stu-id="16250-176">The file can also be a storage or global memory object (TYMED_ISTORAGE or TYMED_HGLOBAL).</span></span> <span data-ttu-id="16250-177">El formato de CFSTR_FILEDESCRIPTOR asociado contiene una estructura [**FILEDESCRIPTOR**](/windows/win32/api/shlobj_core/ns-shlobj_core-filedescriptora) para cada archivo que especifica el nombre y los atributos del archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-177">The associated CFSTR_FILEDESCRIPTOR format contains a [**FILEDESCRIPTOR**](/windows/win32/api/shlobj_core/ns-shlobj_core-filedescriptora) structure for each file that specifies the file's name and attributes.</span></span>

<span data-ttu-id="16250-178">El destino trata los datos asociados a un formato de CFSTR_FILECONTENTS como si fuera un archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-178">The target treats the data associated with a CFSTR_FILECONTENTS format as if it were a file.</span></span> <span data-ttu-id="16250-179">Cuando el destino llama a [**IDataObject:: GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) para extraer los datos, especifica un archivo determinado estableciendo el miembro **lIndex** de la estructura [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) en el índice de base cero de la estructura [**FILEDESCRIPTOR**](/windows/win32/api/shlobj_core/ns-shlobj_core-filedescriptora) del archivo en el formato de [CFSTR_FILEDESCRIPTOR](#cfstr_filedescriptor) que lo acompaña.</span><span class="sxs-lookup"><span data-stu-id="16250-179">When the target calls [**IDataObject::GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) to extract the data, it specifies a particular file by setting the **lindex** member of the [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) structure to the zero-based index of the file's [**FILEDESCRIPTOR**](/windows/win32/api/shlobj_core/ns-shlobj_core-filedescriptora) structure in the accompanying [CFSTR_FILEDESCRIPTOR](#cfstr_filedescriptor) format.</span></span> <span data-ttu-id="16250-180">A continuación, el destino usa el puntero de interfaz devuelto o el identificador de memoria global para extraer los datos.</span><span class="sxs-lookup"><span data-stu-id="16250-180">The target then uses the returned interface pointer or global memory handle to extract the data.</span></span>

### <a name="cfstr_filedescriptor"></a><span data-ttu-id="16250-181">CFSTR_FILEDESCRIPTOR</span><span class="sxs-lookup"><span data-stu-id="16250-181">CFSTR_FILEDESCRIPTOR</span></span>

<span data-ttu-id="16250-182">Este identificador de formato se usa con el formato [CFSTR_FILECONTENTS](#cfstr_filecontents) para transferir datos como un grupo de archivos.</span><span class="sxs-lookup"><span data-stu-id="16250-182">This format identifier is used with the [CFSTR_FILECONTENTS](#cfstr_filecontents) format to transfer data as a group of files.</span></span> <span data-ttu-id="16250-183">Estos dos formatos son la manera preferida de transferir objetos de Shell que no se almacenan como archivos de sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="16250-183">These two formats are the preferred way to transfer Shell objects that are not stored as file-system files.</span></span> <span data-ttu-id="16250-184">Por ejemplo, estos formatos se pueden usar para transferir un grupo de mensajes de correo electrónico como archivos individuales, aunque cada correo electrónico se almacena realmente como un bloque de datos en una base de datos.</span><span class="sxs-lookup"><span data-stu-id="16250-184">For example, these formats can be used to transfer a group of email messages as individual files, even though each email is actually stored as a block of data in a database.</span></span> <span data-ttu-id="16250-185">Los datos están formados por una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-185">The data consists of an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-186">El miembro **hGlobal** de la estructura apunta a una estructura [**FILEGROUPDESCRIPTOR**](/windows/win32/api/shlobj_core/ns-shlobj_core-filegroupdescriptora) seguida de una matriz que contiene una estructura [**FILEDESCRIPTOR**](/windows/win32/api/shlobj_core/ns-shlobj_core-filedescriptora) para cada archivo del grupo.</span><span class="sxs-lookup"><span data-stu-id="16250-186">The structure's **hGlobal** member points to a [**FILEGROUPDESCRIPTOR**](/windows/win32/api/shlobj_core/ns-shlobj_core-filegroupdescriptora) structure that is followed by an array containing one [**FILEDESCRIPTOR**](/windows/win32/api/shlobj_core/ns-shlobj_core-filedescriptora) structure for each file in the group.</span></span> <span data-ttu-id="16250-187">Para cada estructura de **FILEDESCRIPTOR** , hay un formato de CFSTR_FILECONTENTS independiente que incluye el contenido del archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-187">For each **FILEDESCRIPTOR** structure, there is a separate CFSTR_FILECONTENTS format that contains the contents of the file.</span></span> <span data-ttu-id="16250-188">Para identificar el formato de CFSTR_FILECONTENTS de un archivo determinado, establezca el valor **lIndex** de la estructura [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) en el índice de base cero de la estructura **FILEDESCRIPTOR** del archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-188">To identify a particular file's CFSTR_FILECONTENTS format, set the **lIndex** value of the [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) structure to the zero-based index of the file's **FILEDESCRIPTOR** structure.</span></span>

<span data-ttu-id="16250-189">El formato de CFSTR_FILEDESCRIPTOR se usa normalmente para transferir datos como si fuera un grupo de archivos, independientemente de cómo se almacenen realmente.</span><span class="sxs-lookup"><span data-stu-id="16250-189">The CFSTR_FILEDESCRIPTOR format is commonly used to transfer data as if it were a group of files, regardless of how it is actually stored.</span></span> <span data-ttu-id="16250-190">Desde la perspectiva del destino, cada formato de CFSTR_FILECONTENTS representa un único archivo y se trata en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="16250-190">From the target's perspective, each CFSTR_FILECONTENTS format represents a single file and is treated accordingly.</span></span> <span data-ttu-id="16250-191">Sin embargo, el origen puede almacenar los datos de la forma que elija.</span><span class="sxs-lookup"><span data-stu-id="16250-191">However, the source can store the data in any way it chooses.</span></span> <span data-ttu-id="16250-192">Aunque un formato de CSFTR_FILECONTENTS podría corresponder a un solo archivo, también podría representar los datos extraídos por el origen de una base de datos o un documento de texto.</span><span class="sxs-lookup"><span data-stu-id="16250-192">While a CSFTR_FILECONTENTS format might correspond to a single file, it could also, for example, represent data extracted by the source from a database or text document.</span></span>

### <a name="cfstr_filename"></a><span data-ttu-id="16250-193">CFSTR_FILENAME</span><span class="sxs-lookup"><span data-stu-id="16250-193">CFSTR_FILENAME</span></span>

<span data-ttu-id="16250-194">Este identificador de formato se utiliza para transferir un solo archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-194">This format identifier is used to transfer a single file.</span></span> <span data-ttu-id="16250-195">Los datos están formados por una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-195">The data consists of an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-196">El miembro **hGlobal** de la estructura apunta a una sola cadena terminada en **null** que contiene la ruta de acceso completa del archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-196">The structure's **hGlobal** member points to a single **null**-terminated string containing the file's fully qualified file path.</span></span> <span data-ttu-id="16250-197">[CF_HDROP](#cf_hdrop)ha reemplazado este formato, pero se admite por compatibilidad con versiones anteriores de las aplicaciones de Windows 3,1.</span><span class="sxs-lookup"><span data-stu-id="16250-197">This format has been superseded by [CF_HDROP](#cf_hdrop), but it is supported for backward compatibility with Windows 3.1 applications.</span></span>

### <a name="cfstr_filenamemap"></a><span data-ttu-id="16250-198">CFSTR_FILENAMEMAP</span><span class="sxs-lookup"><span data-stu-id="16250-198">CFSTR_FILENAMEMAP</span></span>

<span data-ttu-id="16250-199">Este identificador de formato se usa cuando se cambia el nombre de un grupo de archivos en [CF_HDROP](#cf_hdrop) formato y se transfieren.</span><span class="sxs-lookup"><span data-stu-id="16250-199">This format identifier is used when a group of files in [CF_HDROP](#cf_hdrop) format is being renamed as well as transferred.</span></span> <span data-ttu-id="16250-200">Los datos están formados por una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-200">The data consists of an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-201">El miembro **hGlobal** de la estructura apunta a una matriz de caracteres doble terminada en **null**.</span><span class="sxs-lookup"><span data-stu-id="16250-201">The structure's **hGlobal** member points to a double **null**-terminated character array.</span></span> <span data-ttu-id="16250-202">Esta matriz contiene un nombre nuevo para cada archivo, en el mismo orden en que se muestran los archivos en el formato de CF_HDROP que lo acompaña.</span><span class="sxs-lookup"><span data-stu-id="16250-202">This array contains a new name for each file, in the same order that the files are listed in the accompanying CF_HDROP format.</span></span> <span data-ttu-id="16250-203">El formato de la matriz de caracteres es el mismo que el utilizado por CF_HDROP para enumerar los archivos transferidos.</span><span class="sxs-lookup"><span data-stu-id="16250-203">The format of the character array is the same as that used by CF_HDROP to list the transferred files.</span></span>

### <a name="cfstr_mountedvolume"></a><span data-ttu-id="16250-204">CFSTR_MOUNTEDVOLUME</span><span class="sxs-lookup"><span data-stu-id="16250-204">CFSTR_MOUNTEDVOLUME</span></span>

<span data-ttu-id="16250-205">Este identificador de formato se usa para transferir una ruta de acceso en un volumen montado.</span><span class="sxs-lookup"><span data-stu-id="16250-205">This format identifier is used to transfer a path on a mounted volume.</span></span> <span data-ttu-id="16250-206">Es similar a [CF_HDROP](#cf_hdrop), pero contiene una sola ruta de acceso y puede controlar las cadenas de ruta de acceso más largas que podrían ser necesarias para representar una ruta de acceso cuando el volumen se monta en una carpeta.</span><span class="sxs-lookup"><span data-stu-id="16250-206">It is similar to [CF_HDROP](#cf_hdrop), but it contains only a single path and can handle the longer path strings that might be needed to represent a path when the volume is mounted on a folder.</span></span> <span data-ttu-id="16250-207">Los datos están formados por una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-207">The data consists of an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-208">El miembro **hGlobal** de la estructura apunta a una sola cadena terminada en **null** que contiene la ruta de acceso completa del archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-208">The structure's **hGlobal** member points to a single **null**-terminated string containing the fully qualified file path.</span></span> <span data-ttu-id="16250-209">La cadena de ruta de acceso debe terminar con un \\ carácter ' ', seguido del **valor null** final.</span><span class="sxs-lookup"><span data-stu-id="16250-209">The path string must end with a '\\' character, followed by the terminating **NULL**.</span></span>

<span data-ttu-id="16250-210">Antes de Windows 2000, los volúmenes solo se podían montar en Letras de unidad.</span><span class="sxs-lookup"><span data-stu-id="16250-210">Prior to Windows 2000, volumes could be mounted only on drive letters.</span></span> <span data-ttu-id="16250-211">Para Windows 2000 y sistemas posteriores con una unidad con formato NTFS, también puede montar volúmenes en carpetas vacías.</span><span class="sxs-lookup"><span data-stu-id="16250-211">For Windows 2000 and later systems with an NTFS formatted drive, you can also mount volumes on empty folders.</span></span> <span data-ttu-id="16250-212">Esta característica permite montar un volumen sin ocupar una letra de unidad.</span><span class="sxs-lookup"><span data-stu-id="16250-212">This feature allows a volume to be mounted without taking up a drive letter.</span></span> <span data-ttu-id="16250-213">El volumen montado puede usar cualquier formato admitido actualmente, como FAT, FAT32, NTFS y CDFS.</span><span class="sxs-lookup"><span data-stu-id="16250-213">The mounted volume can use any currently supported format, including FAT, FAT32, NTFS, and CDFS.</span></span>

<span data-ttu-id="16250-214">Puede agregar páginas a la hoja de propiedades de las propiedades de la unidad implementando un controlador de la [hoja de propiedades](propsheet-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="16250-214">You can add pages to a Drive Properties property sheet by implementing a [property sheet handler](propsheet-handlers.md).</span></span> <span data-ttu-id="16250-215">Si el volumen se monta en una letra de unidad, el shell pasa información de la ruta de acceso al controlador con el formato de [CF_HDROP](#cf_hdrop) .</span><span class="sxs-lookup"><span data-stu-id="16250-215">If the volume is mounted on a drive letter, the Shell passes path information to the handler with the [CF_HDROP](#cf_hdrop) format.</span></span> <span data-ttu-id="16250-216">Con Windows 2000 y sistemas posteriores, el formato de CF_HDROP se usa cuando un volumen se monta en una letra de unidad, al igual que con sistemas anteriores.</span><span class="sxs-lookup"><span data-stu-id="16250-216">With Windows 2000 and later systems, the CF_HDROP format is used when a volume is mounted on a drive letter, just as with earlier systems.</span></span> <span data-ttu-id="16250-217">Sin embargo, si se monta un volumen en una carpeta, se usa el identificador de formato [CFSTR_MOUNTEDVOLUME](#cfstr_mountedvolume) en lugar de CF_HDROP.</span><span class="sxs-lookup"><span data-stu-id="16250-217">However, if a volume is mounted on a folder, the [CFSTR_MOUNTEDVOLUME](#cfstr_mountedvolume) format identifier is used instead of CF_HDROP.</span></span>

<span data-ttu-id="16250-218">Si solo se usarán Letras de unidad para montar volúmenes, solo se utilizará [CF_HDROP](#cf_hdrop) y los controladores de hoja de propiedades existentes funcionarán como lo hacían con sistemas anteriores.</span><span class="sxs-lookup"><span data-stu-id="16250-218">If only drive letters will be used to mount volumes, only [CF_HDROP](#cf_hdrop) will be used, and existing property sheet handlers will work as they did with earlier systems.</span></span> <span data-ttu-id="16250-219">Sin embargo, si desea que el controlador muestre una página para los volúmenes montados en carpetas y Letras de unidad, el controlador debe ser capaz de comprender los formatos CSFTR_MOUNTEDVOLUME y CF_HDROP.</span><span class="sxs-lookup"><span data-stu-id="16250-219">However, if you want your handler to display a page for volumes that are mounted on folders as well as drive letters, the handler must be able to understand both the CSFTR_MOUNTEDVOLUME and CF_HDROP formats.</span></span>

### <a name="cfstr_shellidlist"></a><span data-ttu-id="16250-220">CFSTR_SHELLIDLIST</span><span class="sxs-lookup"><span data-stu-id="16250-220">CFSTR_SHELLIDLIST</span></span>

<span data-ttu-id="16250-221">Este identificador de formato se usa al transferir las ubicaciones de uno o más objetos de espacio de nombres existentes.</span><span class="sxs-lookup"><span data-stu-id="16250-221">This format identifier is used when transferring the locations of one or more existing namespace objects.</span></span> <span data-ttu-id="16250-222">Se usa de forma muy similar a [CF_HDROP](#cf_hdrop), pero contiene PIDL en lugar de rutas de acceso del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="16250-222">It is used in much the same way as [CF_HDROP](#cf_hdrop), but it contains PIDLs instead of file system paths.</span></span> <span data-ttu-id="16250-223">El uso de PIDL permite que el formato de CFSTR_SHELLIDLIST controle los objetos virtuales y los objetos del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="16250-223">Using PIDLs allows the CFSTR_SHELLIDLIST format to handle virtual objects as well as file system objects.</span></span> <span data-ttu-id="16250-224">Los datos son una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-224">The data is an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-225">El miembro **hGlobal** de [**la estructura apunta a una**](/windows/win32/api/shlobj_core/ns-shlobj_core-cida) subestructura.</span><span class="sxs-lookup"><span data-stu-id="16250-225">The structure's **hGlobal** member points to a [**CIDA**](/windows/win32/api/shlobj_core/ns-shlobj_core-cida) structure.</span></span>

<span data-ttu-id="16250-226">El miembro **aoffset** de la interfaz [**biocida**](/windows/win32/api/shlobj_core/ns-shlobj_core-cida) es una matriz que contiene los desplazamientos al principio de la estructura [**ITEMIDLIST**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) para cada PIDL que se va a transferir.</span><span class="sxs-lookup"><span data-stu-id="16250-226">The **aoffset** member of the [**CIDA**](/windows/win32/api/shlobj_core/ns-shlobj_core-cida) structure is an array containing offsets to the beginning of the [**ITEMIDLIST**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) structure for each PIDL that is being transferred.</span></span> <span data-ttu-id="16250-227">Para extraer un PIDL determinado, determine primero su índice.</span><span class="sxs-lookup"><span data-stu-id="16250-227">To extract a particular PIDL, first determine its index.</span></span> <span data-ttu-id="16250-228">A continuación, agregue el valor **aoffset** que corresponde a ese índice a la dirección de la **subestructura.**</span><span class="sxs-lookup"><span data-stu-id="16250-228">Then, add the **aoffset** value that corresponds to that index to the address of the **CIDA** structure.</span></span>

<span data-ttu-id="16250-229">El primer elemento de **aoffset** contiene un desplazamiento a la PIDL completa de una carpeta principal.</span><span class="sxs-lookup"><span data-stu-id="16250-229">The first element of **aoffset** contains an offset to the fully qualified PIDL of a parent folder.</span></span> <span data-ttu-id="16250-230">Si esta PIDL está vacía, la carpeta principal es el escritorio.</span><span class="sxs-lookup"><span data-stu-id="16250-230">If this PIDL is empty, the parent folder is the desktop.</span></span> <span data-ttu-id="16250-231">Cada uno de los elementos restantes de la matriz contiene un desplazamiento a uno de los PIDL que se van a transferir.</span><span class="sxs-lookup"><span data-stu-id="16250-231">Each of the remaining elements of the array contains an offset to one of the PIDLs to be transferred.</span></span> <span data-ttu-id="16250-232">Todos estos PIDL son relativos al PIDL de la carpeta principal.</span><span class="sxs-lookup"><span data-stu-id="16250-232">All of these PIDLs are relative to the PIDL of the parent folder.</span></span>

<span data-ttu-id="16250-233">Las dos macros siguientes se pueden usar para recuperar PIDL [**de una**](/windows/win32/api/shlobj_core/ns-shlobj_core-cida) subestructura.</span><span class="sxs-lookup"><span data-stu-id="16250-233">The following two macros can be used to retrieve PIDLs from a [**CIDA**](/windows/win32/api/shlobj_core/ns-shlobj_core-cida) structure.</span></span> <span data-ttu-id="16250-234">La primera toma un puntero a la estructura y recupera el PIDL de la carpeta principal.</span><span class="sxs-lookup"><span data-stu-id="16250-234">The first takes a pointer to the structure and retrieves the PIDL of the parent folder.</span></span> <span data-ttu-id="16250-235">La segunda toma un puntero a la estructura y recupera uno de los otros PIDL, identificado por su índice basado en cero.</span><span class="sxs-lookup"><span data-stu-id="16250-235">The second takes a pointer to the structure and retrieves one of the other PIDLs, identified by its zero-based index.</span></span>


```C++
#define GetPIDLFolder(pida) (LPCITEMIDLIST)(((LPBYTE)pida)+(pida)->aoffset[0])

#define GetPIDLItem(pida, i) (LPCITEMIDLIST)(((LPBYTE)pida)+(pida)->aoffset[i+1])
```

> [!Note]  
> <span data-ttu-id="16250-236">El valor devuelto por estas macros es un puntero a la estructura [**ITEMIDLIST**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) de PIDL.</span><span class="sxs-lookup"><span data-stu-id="16250-236">The value that is returned by these macros is a pointer to the PIDL's [**ITEMIDLIST**](/windows/desktop/api/Shtypes/ns-shtypes-itemidlist) structure.</span></span> <span data-ttu-id="16250-237">Dado que estas estructuras tienen una longitud diferente, debe determinar el final de la estructura recorriendo cada una de las estructuras de [**SHITEMID**](/windows/desktop/api/Shtypes/ns-shtypes-shitemid) de la estructura **ITEMIDLIST** hasta llegar al **valor null** de dos bytes que marca el final.</span><span class="sxs-lookup"><span data-stu-id="16250-237">Since these structures vary in length, you must determine the end of the structure by walking through each of the **ITEMIDLIST** structure's [**SHITEMID**](/windows/desktop/api/Shtypes/ns-shtypes-shitemid) structures until you reach the two-byte **NULL** that marks the end.</span></span>

### <a name="cfstr_shellidlistoffset"></a><span data-ttu-id="16250-238">CFSTR_SHELLIDLISTOFFSET</span><span class="sxs-lookup"><span data-stu-id="16250-238">CFSTR_SHELLIDLISTOFFSET</span></span>

<span data-ttu-id="16250-239">Este identificador de formato se usa con formatos como [CF_HDROP](#cf_hdrop), [CFSTR_SHELLIDLIST](#cfstr_shellidlist)y [CFSTR_FILECONTENTS](#cfstr_filecontents) para especificar la posición de un grupo de objetos después de una transferencia.</span><span class="sxs-lookup"><span data-stu-id="16250-239">This format identifier is used with formats such as [CF_HDROP](#cf_hdrop), [CFSTR_SHELLIDLIST](#cfstr_shellidlist), and [CFSTR_FILECONTENTS](#cfstr_filecontents) to specify the position of a group of objects following a transfer.</span></span> <span data-ttu-id="16250-240">Los datos están formados por una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-240">The data consists of an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-241">El miembro **hGlobal** de la estructura apunta a una matriz de estructuras de [**puntos**](/previous-versions//dd162805(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="16250-241">The structure's **hGlobal** member points to an array of [**POINT**](/previous-versions//dd162805(v=vs.85)) structures.</span></span> <span data-ttu-id="16250-242">La primera estructura especifica las coordenadas de la pantalla, en píxeles, de la esquina superior izquierda del rectángulo que incluye el grupo.</span><span class="sxs-lookup"><span data-stu-id="16250-242">The first structure specifies the screen coordinates, in pixels, of the upper-left corner of the rectangle that encloses the group.</span></span> <span data-ttu-id="16250-243">El resto de las estructuras especifican las ubicaciones de los objetos individuales en relación con la posición del grupo.</span><span class="sxs-lookup"><span data-stu-id="16250-243">The remainder of the structures specify the locations of the individual objects relative to the group's position.</span></span> <span data-ttu-id="16250-244">Deben estar en el mismo orden que se usa para enumerar los objetos en el formato asociado.</span><span class="sxs-lookup"><span data-stu-id="16250-244">They must be in the same order as that used to list the objects in the associated format.</span></span>

## <a name="formats-for-transferring-virtual-objects"></a><span data-ttu-id="16250-245">Formatos para transferir objetos virtuales</span><span class="sxs-lookup"><span data-stu-id="16250-245">Formats for Transferring Virtual Objects</span></span>

<span data-ttu-id="16250-246">El formato de CFSTR_SHELLIDLIST se puede utilizar para transferir los objetos virtuales y del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="16250-246">The CFSTR_SHELLIDLIST format can be used to transfer both file system and virtual objects.</span></span> <span data-ttu-id="16250-247">Sin embargo, también hay varios formatos especializados para transferir determinados tipos de objetos virtuales.</span><span class="sxs-lookup"><span data-stu-id="16250-247">However, there are also several specialized formats for transferring particular types of virtual objects.</span></span>

-   [<span data-ttu-id="16250-248">CFSTR_NETRESOURCES</span><span class="sxs-lookup"><span data-stu-id="16250-248">CFSTR_NETRESOURCES</span></span>](#cfstr_netresources)
-   [<span data-ttu-id="16250-249">CFSTR_PRINTERGROUP</span><span class="sxs-lookup"><span data-stu-id="16250-249">CFSTR_PRINTERGROUP</span></span>](#cfstr_printergroup)
-   [<span data-ttu-id="16250-250">CFSTR_INETURL</span><span class="sxs-lookup"><span data-stu-id="16250-250">CFSTR_INETURL</span></span>](#cfstr_ineturl)
-   [<span data-ttu-id="16250-251">CFSTR_SHELLURL (desusado)</span><span class="sxs-lookup"><span data-stu-id="16250-251">CFSTR_SHELLURL (deprecated)</span></span>](#cfstr_shellurl-deprecated)

### <a name="cfstr_netresources"></a><span data-ttu-id="16250-252">CFSTR_NETRESOURCES</span><span class="sxs-lookup"><span data-stu-id="16250-252">CFSTR_NETRESOURCES</span></span>

<span data-ttu-id="16250-253">Este identificador de formato se usa al transferir recursos de red, como un dominio o un servidor.</span><span class="sxs-lookup"><span data-stu-id="16250-253">This format identifier is used when transferring network resources, such as a domain or server.</span></span> <span data-ttu-id="16250-254">Los datos son una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-254">The data is an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-255">El miembro **hGlobal** de la estructura apunta a una estructura [**NRESARRAY**](/windows/desktop/api/shlobj_core/ns-shlobj_core-nresarray) .</span><span class="sxs-lookup"><span data-stu-id="16250-255">The structure's **hGlobal** member points to a [**NRESARRAY**](/windows/desktop/api/shlobj_core/ns-shlobj_core-nresarray) structure.</span></span> <span data-ttu-id="16250-256">El miembro **NR** de esa estructura indica una estructura [**NETRESOURCE**](/windows/win32/api/rrascfg/nn-rrascfg-ieapproviderconfig) cuyo miembro **lpRemoteName** contiene una cadena terminada en **null** que identifica el recurso de red.</span><span class="sxs-lookup"><span data-stu-id="16250-256">The **nr** member of that structure indicates a [**NETRESOURCE**](/windows/win32/api/rrascfg/nn-rrascfg-ieapproviderconfig) structure whose **lpRemoteName** member contains a **null**-terminated string identifying the network resource.</span></span> <span data-ttu-id="16250-257">A continuación, el destino de colocación puede usar los datos con cualquiera de las funciones de la API de [redes de Windows (WNet)](../wnet/windows-networking-wnet-.md) , como [**WNetAddConnection**](/windows/win32/api/winnetwk/nf-winnetwk-wnetaddconnectiona), para realizar operaciones de red en el objeto.</span><span class="sxs-lookup"><span data-stu-id="16250-257">The drop target can then use the data with any of the [Windows Networking (WNet)](../wnet/windows-networking-wnet-.md) API functions, such as [**WNetAddConnection**](/windows/win32/api/winnetwk/nf-winnetwk-wnetaddconnectiona), to perform network operations on the object.</span></span>

### <a name="cfstr_printergroup"></a><span data-ttu-id="16250-258">CFSTR_PRINTERGROUP</span><span class="sxs-lookup"><span data-stu-id="16250-258">CFSTR_PRINTERGROUP</span></span>

<span data-ttu-id="16250-259">Este identificador de formato se usa al transferir los nombres descriptivos de las impresoras.</span><span class="sxs-lookup"><span data-stu-id="16250-259">This format identifier is used when transferring the friendly names of printers.</span></span> <span data-ttu-id="16250-260">Los datos son una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-260">The data is an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-261">El miembro **hGlobal** de la estructura apunta a una cadena en el mismo formato que el utilizado con [CF_HDROP](#cf_hdrop).</span><span class="sxs-lookup"><span data-stu-id="16250-261">The structure's **hGlobal** member points to a string in the same format as that used with [CF_HDROP](#cf_hdrop).</span></span> <span data-ttu-id="16250-262">Sin embargo, el miembro **archivos pfile** de la estructura [**DROPFILES**](/windows/desktop/api/shlobj_core/ns-shlobj_core-dropfiles) contiene uno o más nombres descriptivos de las impresoras en lugar de rutas de acceso de archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-262">However, the **pFiles** member of the [**DROPFILES**](/windows/desktop/api/shlobj_core/ns-shlobj_core-dropfiles) structure contains one or more friendly names of printers instead of file paths.</span></span>

### <a name="cfstr_ineturl"></a><span data-ttu-id="16250-263">CFSTR_INETURL</span><span class="sxs-lookup"><span data-stu-id="16250-263">CFSTR_INETURL</span></span>

<span data-ttu-id="16250-264">Este identificador de formato reemplaza [CFSTR_SHELLURL (desusado)](#cfstr_shellurl-deprecated).</span><span class="sxs-lookup"><span data-stu-id="16250-264">This format identifier replaces [CFSTR_SHELLURL (deprecated)](#cfstr_shellurl-deprecated).</span></span> <span data-ttu-id="16250-265">Si desea que la aplicación manipule las direcciones URL del portapapeles, use CFSTR_INETURL en lugar de CFSTR_SHELLURL (en desuso).</span><span class="sxs-lookup"><span data-stu-id="16250-265">If you want your application to manipulate clipboard URLs, use CFSTR_INETURL instead of CFSTR_SHELLURL (deprecated).</span></span> <span data-ttu-id="16250-266">Este formato proporciona la mejor representación del portapapeles de una sola dirección URL.</span><span class="sxs-lookup"><span data-stu-id="16250-266">This format gives the best clipboard representation of a single URL.</span></span> <span data-ttu-id="16250-267">Si no se define Unicode, la aplicación recupera la versión CF_TEXT/CFSTR_SHELLURL de la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="16250-267">If UNICODE is not defined, the application retrieves the CF_TEXT/CFSTR_SHELLURL version of the URL.</span></span> <span data-ttu-id="16250-268">Si se define Unicode, la aplicación recupera la versión CF_UNICODE de la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="16250-268">If UNICODE is defined, the application retrieves the CF_UNICODE version of the URL.</span></span>

### <a name="cfstr_shellurl-deprecated"></a><span data-ttu-id="16250-269">CFSTR_SHELLURL (desusado)</span><span class="sxs-lookup"><span data-stu-id="16250-269">CFSTR_SHELLURL (deprecated)</span></span>

> [!Note]  
> <span data-ttu-id="16250-270">Este identificador de formato ha quedado en desuso; en su lugar, use CFSTR_INETURL.</span><span class="sxs-lookup"><span data-stu-id="16250-270">This format identifier has been deprecated; use CFSTR_INETURL instead.</span></span>

 

## <a name="formats-for-communication-between-source-and-target"></a><span data-ttu-id="16250-271">Formatos para la comunicación entre el origen y el destino</span><span class="sxs-lookup"><span data-stu-id="16250-271">Formats for Communication Between Source and Target</span></span>

<span data-ttu-id="16250-272">Estos identificadores de formato permiten la comunicación entre el origen y el destino.</span><span class="sxs-lookup"><span data-stu-id="16250-272">These format identifiers allow communication between source and target.</span></span> <span data-ttu-id="16250-273">Los formatos acompañan a los datos y proporcionan a las aplicaciones un mayor grado de control sobre las operaciones de arrastrar y colocar que afectan a los objetos de Shell.</span><span class="sxs-lookup"><span data-stu-id="16250-273">The formats accompany the data and give applications a greater degree of control over move-copy-paste or drag-and-drop operations involving Shell objects.</span></span>

-   [<span data-ttu-id="16250-274">CFSTR_INDRAGLOOP</span><span class="sxs-lookup"><span data-stu-id="16250-274">CFSTR_INDRAGLOOP</span></span>](#cfstr_indragloop)
-   [<span data-ttu-id="16250-275">CFSTR_LOGICALPERFORMEDDROPEFFECT</span><span class="sxs-lookup"><span data-stu-id="16250-275">CFSTR_LOGICALPERFORMEDDROPEFFECT</span></span>](#cfstr_logicalperformeddropeffect)
-   [<span data-ttu-id="16250-276">CFSTR_PASTESUCCEEDED</span><span class="sxs-lookup"><span data-stu-id="16250-276">CFSTR_PASTESUCCEEDED</span></span>](#cfstr_pastesucceeded)
-   [<span data-ttu-id="16250-277">CFSTR_PERFORMEDDROPEFFECT</span><span class="sxs-lookup"><span data-stu-id="16250-277">CFSTR_PERFORMEDDROPEFFECT</span></span>](#cfstr_performeddropeffect)
-   [<span data-ttu-id="16250-278">CFSTR_PREFERREDDROPEFFECT</span><span class="sxs-lookup"><span data-stu-id="16250-278">CFSTR_PREFERREDDROPEFFECT</span></span>](#cfstr_preferreddropeffect)
-   [<span data-ttu-id="16250-279">CFSTR_TARGETCLSID</span><span class="sxs-lookup"><span data-stu-id="16250-279">CFSTR_TARGETCLSID</span></span>](#cfstr_targetclsid)
-   [<span data-ttu-id="16250-280">CFSTR_UNTRUSTEDDRAGDROP</span><span class="sxs-lookup"><span data-stu-id="16250-280">CFSTR_UNTRUSTEDDRAGDROP</span></span>](#cfstr_untrusteddragdrop)
-   [<span data-ttu-id="16250-281">DragWindow</span><span class="sxs-lookup"><span data-stu-id="16250-281">DragWindow</span></span>](#dragwindow)

### <a name="cfstr_indragloop"></a><span data-ttu-id="16250-282">CFSTR_INDRAGLOOP</span><span class="sxs-lookup"><span data-stu-id="16250-282">CFSTR_INDRAGLOOP</span></span>

<span data-ttu-id="16250-283">Un objeto de datos usa este identificador de formato para indicar si está en un bucle de arrastrar y colocar.</span><span class="sxs-lookup"><span data-stu-id="16250-283">This format identifier is used by a data object to indicate whether it is in a drag-and-drop loop.</span></span> <span data-ttu-id="16250-284">Los datos son una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-284">The data is an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-285">El miembro **hGlobal** de la estructura apunta a un valor **DWORD** .</span><span class="sxs-lookup"><span data-stu-id="16250-285">The structure's **hGlobal** member points to a **DWORD** value.</span></span> <span data-ttu-id="16250-286">Si el valor **DWORD** es distinto de cero, el objeto de datos se encuentra dentro de un bucle de arrastrar y colocar.</span><span class="sxs-lookup"><span data-stu-id="16250-286">If the **DWORD** value is nonzero, the data object is within a drag-and-drop loop.</span></span> <span data-ttu-id="16250-287">Si el valor se establece en cero, el objeto de datos no se encuentra dentro de un bucle de arrastrar y colocar.</span><span class="sxs-lookup"><span data-stu-id="16250-287">If the value is set to zero, the data object is not within a drag-and-drop loop.</span></span>

<span data-ttu-id="16250-288">Algunos destinos de colocación pueden llamar a [**IDataObject:: GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) e intentar extraer datos mientras el objeto todavía está dentro del bucle de arrastrar y colocar.</span><span class="sxs-lookup"><span data-stu-id="16250-288">Some drop targets might call [**IDataObject::GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) and attempt to extract data while the object is still within the drag-and-drop loop.</span></span> <span data-ttu-id="16250-289">La representación completa del objeto para cada uno de estos casos podría provocar que se detenga el cursor de arrastre.</span><span class="sxs-lookup"><span data-stu-id="16250-289">Fully rendering the object for each such occurrence might cause the drag cursor to stall.</span></span> <span data-ttu-id="16250-290">Si el objeto de datos admite [CFSTR_INDRAGLOOP](#cfstr_indragloop), el destino puede usar en su lugar ese formato para comprobar el estado del bucle de arrastrar y colocar y evitar la representación intensiva de memoria del objeto hasta que realmente se quite.</span><span class="sxs-lookup"><span data-stu-id="16250-290">If the data object supports [CFSTR_INDRAGLOOP](#cfstr_indragloop), the target can instead use that format to check the status of the drag-and-drop loop and avoid memory intensive rendering of the object until it is actually dropped.</span></span> <span data-ttu-id="16250-291">Los formatos que consumen mucha memoria para representarse deben seguir incluidos en el enumerador [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) y en las llamadas a [**IDataObject:: QueryGetData**](/windows/win32/api/objidl/nf-objidl-idataobject-querygetdata).</span><span class="sxs-lookup"><span data-stu-id="16250-291">The formats that are memory intensive to render should still be included in the [**FORMATETC**](/windows/win32/api/objidl/ns-objidl-formatetc) enumerator and in calls to [**IDataObject::QueryGetData**](/windows/win32/api/objidl/nf-objidl-idataobject-querygetdata).</span></span> <span data-ttu-id="16250-292">Si el objeto de datos no establece CFSTR_INDRAGLOOP, debe actuar como si el valor se establece en cero.</span><span class="sxs-lookup"><span data-stu-id="16250-292">If the data object does not set CFSTR_INDRAGLOOP, it should act as if the value is set to zero.</span></span>

### <a name="cfstr_logicalperformeddropeffect"></a><span data-ttu-id="16250-293">CFSTR_LOGICALPERFORMEDDROPEFFECT</span><span class="sxs-lookup"><span data-stu-id="16250-293">CFSTR_LOGICALPERFORMEDDROPEFFECT</span></span>

<span data-ttu-id="16250-294">[Versión 5,0.](versions.md) Este identificador de formato permite a un origen de colocación llamar al método [**IDataObject:: GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) del objeto de datos para determinar el resultado de una transferencia de datos de Shell.</span><span class="sxs-lookup"><span data-stu-id="16250-294">[Version 5.0.](versions.md)This format identifier allows a drop source to call the data object's [**IDataObject::GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) method to determine the outcome of a Shell data transfer.</span></span> <span data-ttu-id="16250-295">Los datos son una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-295">The data is an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-296">El miembro **hGlobal** de la estructura apunta a un DWORD que contiene un valor de [**DROPEFFECT**](../com/dropeffect-constants.md) .</span><span class="sxs-lookup"><span data-stu-id="16250-296">The structure's **hGlobal** member points to a DWORD containing a [**DROPEFFECT**](../com/dropeffect-constants.md) value.</span></span>

<span data-ttu-id="16250-297">El identificador de formato de [CFSTR_PERFORMEDDROPEFFECT](#cfstr_performeddropeffect) estaba diseñado para permitir que el destino indique al objeto de datos qué operación tuvo lugar realmente.</span><span class="sxs-lookup"><span data-stu-id="16250-297">The [CFSTR_PERFORMEDDROPEFFECT](#cfstr_performeddropeffect) format identifier was intended to allow the target to indicate to the data object what operation actually took place.</span></span> <span data-ttu-id="16250-298">Sin embargo, el shell utiliza [movimientos optimizados](datascenarios.md) para objetos del sistema de archivos siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="16250-298">However, the Shell uses [optimized moves](datascenarios.md) for file system objects whenever possible.</span></span> <span data-ttu-id="16250-299">En ese caso, el Shell establece normalmente el valor CFSTR_PERFORMEDDROPEFFECT en DROPEFFECT_NONE, para indicar al objeto de datos que se han eliminado los datos originales.</span><span class="sxs-lookup"><span data-stu-id="16250-299">In that case, the Shell normally sets the CFSTR_PERFORMEDDROPEFFECT value to DROPEFFECT_NONE, to indicate to the data object that the original data has been deleted.</span></span> <span data-ttu-id="16250-300">Por lo tanto, el origen no puede usar el valor CFSTR_PERFORMEDDROPEFFECT para determinar la operación que ha tenido lugar.</span><span class="sxs-lookup"><span data-stu-id="16250-300">Thus, the source cannot use the CFSTR_PERFORMEDDROPEFFECT value to determine which operation has taken place.</span></span> <span data-ttu-id="16250-301">Aunque la mayoría de los orígenes no necesitan esta información, hay algunas excepciones.</span><span class="sxs-lookup"><span data-stu-id="16250-301">While most sources do not need this information, there are some exceptions.</span></span> <span data-ttu-id="16250-302">Por ejemplo, aunque los movimientos optimizados eliminan la necesidad de que un origen elimine los datos, es posible que el origen aún tenga que actualizar una base de datos relacionada para indicar que los archivos se han trasladado o copiado.</span><span class="sxs-lookup"><span data-stu-id="16250-302">For instance, even though optimized moves eliminate the need for a source to delete any data, the source might still need to update a related database to indicate that the files have been moved or copied.</span></span>

<span data-ttu-id="16250-303">Si un origen necesita saber qué operación tuvo lugar, puede llamar al método [**IDataObject:: GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) del objeto de datos y solicitar el formato de CFSTR_LOGICALPERFORMEDDROPEFFECT.</span><span class="sxs-lookup"><span data-stu-id="16250-303">If a source needs to know which operation took place, it can call the data object's [**IDataObject::GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) method and request the CFSTR_LOGICALPERFORMEDDROPEFFECT format.</span></span> <span data-ttu-id="16250-304">Este formato refleja básicamente lo que sucede desde el punto de vista del usuario una vez completada la operación.</span><span class="sxs-lookup"><span data-stu-id="16250-304">This format essentially reflects what happens from the user's point of view after the operation is complete.</span></span> <span data-ttu-id="16250-305">Si se crea un nuevo archivo y se elimina el archivo original, el usuario ve una operación de movimiento y el valor de los datos del formato se establece en DROPEFFECT_MOVE.</span><span class="sxs-lookup"><span data-stu-id="16250-305">If a new file is created and the original file is deleted, the user sees a move operation and the format's data value is set to DROPEFFECT_MOVE.</span></span> <span data-ttu-id="16250-306">Si el archivo original todavía existe, el usuario verá una operación de copia y el valor de los datos del formato se establecerá en DROPEFFECT_COPY.</span><span class="sxs-lookup"><span data-stu-id="16250-306">If the original file is still there, the user sees a copy operation and the format's data value is set to DROPEFFECT_COPY.</span></span> <span data-ttu-id="16250-307">Si se ha creado un vínculo, el valor de los datos del formato será DROPEFFECT_LINK.</span><span class="sxs-lookup"><span data-stu-id="16250-307">If a link was created, the format's data value will be DROPEFFECT_LINK.</span></span>

### <a name="cfstr_pastesucceeded"></a><span data-ttu-id="16250-308">CFSTR_PASTESUCCEEDED</span><span class="sxs-lookup"><span data-stu-id="16250-308">CFSTR_PASTESUCCEEDED</span></span>

<span data-ttu-id="16250-309">El destino utiliza este identificador de formato para informar al objeto de datos, a través de su método [**IDataObject:: SetData**](/windows/win32/api/objidl/nf-objidl-idataobject-setdata) , que la operación de eliminación en pegado se realizó correctamente.</span><span class="sxs-lookup"><span data-stu-id="16250-309">This format identifier is used by the target to inform the data object, through its [**IDataObject::SetData**](/windows/win32/api/objidl/nf-objidl-idataobject-setdata) method, that a delete-on-paste operation succeeded.</span></span> <span data-ttu-id="16250-310">Los datos son una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-310">The data is an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-311">El miembro **hGlobal** de la estructura apunta a un **DWORD** que contiene un valor de [**DROPEFFECT**](../com/dropeffect-constants.md) .</span><span class="sxs-lookup"><span data-stu-id="16250-311">The structure's **hGlobal** member points to a **DWORD** containing a [**DROPEFFECT**](../com/dropeffect-constants.md) value.</span></span> <span data-ttu-id="16250-312">Este formato se utiliza para notificar al objeto de datos que debe completar la operación de cortar y eliminar los datos originales, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="16250-312">This format is used to notify the data object that it should complete the cut operation and delete the original data, if necessary.</span></span> <span data-ttu-id="16250-313">Para obtener más información, consulte [operaciones de eliminación y pegado](datascenarios.md).</span><span class="sxs-lookup"><span data-stu-id="16250-313">For more information, see [Delete-on-Paste Operations](datascenarios.md).</span></span>

### <a name="cfstr_performeddropeffect"></a><span data-ttu-id="16250-314">CFSTR_PERFORMEDDROPEFFECT</span><span class="sxs-lookup"><span data-stu-id="16250-314">CFSTR_PERFORMEDDROPEFFECT</span></span>

<span data-ttu-id="16250-315">El destino utiliza este identificador de formato para informar al objeto de datos a través de su método [**IDataObject:: SetData**](/windows/win32/api/objidl/nf-objidl-idataobject-setdata) del resultado de una transferencia de datos.</span><span class="sxs-lookup"><span data-stu-id="16250-315">This format identifier is used by the target to inform the data object through its [**IDataObject::SetData**](/windows/win32/api/objidl/nf-objidl-idataobject-setdata) method of the outcome of a data transfer.</span></span> <span data-ttu-id="16250-316">Los datos son una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-316">The data is an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-317">El miembro **hGlobal** de la estructura apunta a una **DWORD** establecida en el valor [**DROPEFFECT**](../com/dropeffect-constants.md) adecuado, normalmente DROPEFFECT_MOVE o DROPEFFECT_COPY.</span><span class="sxs-lookup"><span data-stu-id="16250-317">The structure's **hGlobal** member points to a **DWORD** set to the appropriate [**DROPEFFECT**](../com/dropeffect-constants.md) value, normally DROPEFFECT_MOVE or DROPEFFECT_COPY.</span></span>

<span data-ttu-id="16250-318">Este formato se utiliza normalmente cuando el resultado de una operación puede ser movimiento o copia, como en una operación de [movimiento o eliminación optimizada](datascenarios.md) .</span><span class="sxs-lookup"><span data-stu-id="16250-318">This format is normally used when the outcome of an operation can be either move or copy, such as in an [optimized move](datascenarios.md) or delete-on-paste operation.</span></span> <span data-ttu-id="16250-319">Proporciona un método confiable para que el destino indique al objeto de datos lo que ha sucedido realmente.</span><span class="sxs-lookup"><span data-stu-id="16250-319">It provides a reliable way for the target to tell the data object what actually happened.</span></span> <span data-ttu-id="16250-320">Se presentó porque el valor de *pdwEffect* devuelto por [**DoDragDrop**](/windows/win32/api/ole2/nf-ole2-dodragdrop) no indicaba de forma confiable qué operación había tenido lugar.</span><span class="sxs-lookup"><span data-stu-id="16250-320">It was introduced because the value of *pdwEffect* returned by [**DoDragDrop**](/windows/win32/api/ole2/nf-ole2-dodragdrop) did not reliably indicate which operation had taken place.</span></span> <span data-ttu-id="16250-321">El formato de [CFSTR_PERFORMEDDROPEFFECT](#cfstr_performeddropeffect) es la forma confiable de indicar que se ha producido un movimiento no optimizado.</span><span class="sxs-lookup"><span data-stu-id="16250-321">The [CFSTR_PERFORMEDDROPEFFECT](#cfstr_performeddropeffect) format is the reliable way to indicate that an unoptimized move has taken place.</span></span>

### <a name="cfstr_preferreddropeffect"></a><span data-ttu-id="16250-322">CFSTR_PREFERREDDROPEFFECT</span><span class="sxs-lookup"><span data-stu-id="16250-322">CFSTR_PREFERREDDROPEFFECT</span></span>

<span data-ttu-id="16250-323">El origen usa este identificador de formato para especificar si su método preferido de transferencia de datos es Move o Copy.</span><span class="sxs-lookup"><span data-stu-id="16250-323">This format identifier is used by the source to specify whether its preferred method of data transfer is move or copy.</span></span> <span data-ttu-id="16250-324">Un destino de colocación solicita este formato llamando al método [**IDataObject:: GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) del objeto de datos.</span><span class="sxs-lookup"><span data-stu-id="16250-324">A drop target requests this format by calling the data object's [**IDataObject::GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) method.</span></span> <span data-ttu-id="16250-325">Los datos son una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-325">The data is an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-326">El miembro **hGlobal** de la estructura apunta a un valor **DWORD** .</span><span class="sxs-lookup"><span data-stu-id="16250-326">The structure's **hGlobal** member points to a **DWORD** value.</span></span> <span data-ttu-id="16250-327">Este valor se establece en DROPEFFECT_MOVE si se prefiere una operación de movimiento o DROPEFFECT_COPY si se prefiere una operación de copia.</span><span class="sxs-lookup"><span data-stu-id="16250-327">This value is set to DROPEFFECT_MOVE if a move operation is preferred or DROPEFFECT_COPY if a copy operation is preferred.</span></span>

<span data-ttu-id="16250-328">Esta característica se utiliza cuando un origen puede admitir una operación de movimiento o copia.</span><span class="sxs-lookup"><span data-stu-id="16250-328">This feature is used when a source can support either a move or copy operation.</span></span> <span data-ttu-id="16250-329">Utiliza el formato de [CFSTR_PREFERREDDROPEFFECT](#cfstr_preferreddropeffect) para comunicar sus preferencias al destino.</span><span class="sxs-lookup"><span data-stu-id="16250-329">It uses the [CFSTR_PREFERREDDROPEFFECT](#cfstr_preferreddropeffect) format to communicate its preference to the target.</span></span> <span data-ttu-id="16250-330">Dado que el destino no está obligado a respetar la solicitud, el destino debe llamar al método [**IDataObject:: SetData**](/windows/win32/api/objidl/nf-objidl-idataobject-setdata) del origen con un formato de [CFSTR_PERFORMEDDROPEFFECT](#cfstr_performeddropeffect) para indicar al objeto de datos qué operación se realizó realmente.</span><span class="sxs-lookup"><span data-stu-id="16250-330">Because the target is not obligated to honor the request, the target must call the source's [**IDataObject::SetData**](/windows/win32/api/objidl/nf-objidl-idataobject-setdata) method with a [CFSTR_PERFORMEDDROPEFFECT](#cfstr_performeddropeffect) format to tell the data object which operation was actually performed.</span></span>

<span data-ttu-id="16250-331">Con una operación de [eliminar al pegar](datascenarios.md) , se usa el formato de CFSTR_PREFERREDDROPFORMAT para indicar al destino si el origen hizo un corte o una copia.</span><span class="sxs-lookup"><span data-stu-id="16250-331">With a [delete-on-paste](datascenarios.md) operation, the CFSTR_PREFERREDDROPFORMAT format is used to tell the target whether the source did a cut or copy.</span></span> <span data-ttu-id="16250-332">Con una operación de arrastrar y colocar, puede usar CFSTR_PREFERREDDROPFORMAT para especificar la acción del shell.</span><span class="sxs-lookup"><span data-stu-id="16250-332">With a drag-and-drop operation, you can use CFSTR_PREFERREDDROPFORMAT to specify the Shell's action.</span></span> <span data-ttu-id="16250-333">Si este formato no está presente, el shell realiza una acción predeterminada basada en el contexto.</span><span class="sxs-lookup"><span data-stu-id="16250-333">If this format is not present, the Shell performs a default action, based on context.</span></span> <span data-ttu-id="16250-334">Por ejemplo, si un usuario arrastra un archivo de un volumen y lo coloca en otro volumen, la acción predeterminada del shell es copiar el archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-334">For instance, if a user drags a file from one volume and drops it on another volume, the Shell's default action is to copy the file.</span></span> <span data-ttu-id="16250-335">Al incluir un CFSTR_PREFERREDDROPFORMAT formato en el objeto de datos, puede invalidar la acción predeterminada y indicar explícitamente al shell que copie, mueva o vincule el archivo.</span><span class="sxs-lookup"><span data-stu-id="16250-335">By including a CFSTR_PREFERREDDROPFORMAT format in the data object, you can override the default action and explicitly tell the Shell to copy, move, or link the file.</span></span> <span data-ttu-id="16250-336">Si el usuario elige arrastrar con el botón derecho, CFSTR_PREFERREDDROPFORMAT especifica el comando predeterminado en el menú contextual de [arrastrar y colocar](context-menu-handlers.md) .</span><span class="sxs-lookup"><span data-stu-id="16250-336">If the user chooses to drag with the right button, CFSTR_PREFERREDDROPFORMAT specifies the default command on the [drag-and-drop](context-menu-handlers.md) shortcut menu.</span></span> <span data-ttu-id="16250-337">El usuario sigue siendo gratuito para elegir otros comandos en el menú.</span><span class="sxs-lookup"><span data-stu-id="16250-337">The user is still free to choose other commands on the menu.</span></span>

<span data-ttu-id="16250-338">Antes de Microsoft Internet Explorer 4,0, una aplicación indica que se transfieren los tipos de archivo de acceso directo estableciendo FD_LINKUI en el miembro **dwFlags** de la estructura [**FILEDESCRIPTOR**](/windows/win32/api/shlobj_core/ns-shlobj_core-filedescriptora) .</span><span class="sxs-lookup"><span data-stu-id="16250-338">Before Microsoft Internet Explorer 4.0, an application indicated that it was transferring shortcut file types by setting FD_LINKUI in the **dwFlags** member of the [**FILEDESCRIPTOR**](/windows/win32/api/shlobj_core/ns-shlobj_core-filedescriptora) structure.</span></span> <span data-ttu-id="16250-339">Los destinos tenían que usar una llamada potencialmente lenta a [**IDataObject:: GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) para averiguar si se ha establecido la marca de FD_LINKUI.</span><span class="sxs-lookup"><span data-stu-id="16250-339">Targets then had to use a potentially time-consuming call to [**IDataObject::GetData**](/windows/win32/api/objidl/nf-objidl-idataobject-getdata) to find out if the FD_LINKUI flag was set.</span></span> <span data-ttu-id="16250-340">Ahora, la mejor manera de indicar que los métodos abreviados se están transfiriendo es usar el formato CFSTR_PREFERREDDROPEFFECT establecido en DROPEFFECT_LINK.</span><span class="sxs-lookup"><span data-stu-id="16250-340">Now, the preferred way to indicate that shortcuts are being transferred is to use the CFSTR_PREFERREDDROPEFFECT format set to DROPEFFECT_LINK.</span></span> <span data-ttu-id="16250-341">Sin embargo, para la compatibilidad con versiones anteriores de sistemas anteriores, los orígenes deberían seguir configurando la marca de FD_LINKUI.</span><span class="sxs-lookup"><span data-stu-id="16250-341">However, for backward compatibility with older systems, sources should still set the FD_LINKUI flag.</span></span>

### <a name="cfstr_targetclsid"></a><span data-ttu-id="16250-342">CFSTR_TARGETCLSID</span><span class="sxs-lookup"><span data-stu-id="16250-342">CFSTR_TARGETCLSID</span></span>

<span data-ttu-id="16250-343">Un destino utiliza este identificador de formato para proporcionar su CLSID al origen.</span><span class="sxs-lookup"><span data-stu-id="16250-343">This format identifier is used by a target to provide its CLSID to the source.</span></span> <span data-ttu-id="16250-344">Los datos son una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-344">The data is an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-345">El miembro **hGlobal** de la estructura apunta al GUID de CLSID del destino de colocación.</span><span class="sxs-lookup"><span data-stu-id="16250-345">The structure's **hGlobal** member points to the CLSID GUID of the drop target.</span></span>

<span data-ttu-id="16250-346">Este formato se usa principalmente para permitir la eliminación de objetos arrastrándolos a la papelera de reciclaje.</span><span class="sxs-lookup"><span data-stu-id="16250-346">This format is used primarily to allow objects to be deleted by dragging them to the Recycle Bin.</span></span> <span data-ttu-id="16250-347">Cuando se coloca un objeto en la papelera de reciclaje, se llama al método [**IDataObject:: SetData**](/windows/win32/api/objidl/nf-objidl-idataobject-setdata) del origen con un formato CFSTR_TARGETCLSID establecido en el CLSID de la papelera de reciclaje (CLSID_RecycleBin).</span><span class="sxs-lookup"><span data-stu-id="16250-347">When an object is dropped in the Recycle Bin, the source's [**IDataObject::SetData**](/windows/win32/api/objidl/nf-objidl-idataobject-setdata) method is called with a CFSTR_TARGETCLSID format set to the Recycle Bin's CLSID (CLSID_RecycleBin).</span></span> <span data-ttu-id="16250-348">Después, el origen puede eliminar el objeto original.</span><span class="sxs-lookup"><span data-stu-id="16250-348">The source can then delete the original object.</span></span>

### <a name="cfstr_untrusteddragdrop"></a><span data-ttu-id="16250-349">CFSTR_UNTRUSTEDDRAGDROP</span><span class="sxs-lookup"><span data-stu-id="16250-349">CFSTR_UNTRUSTEDDRAGDROP</span></span>

<span data-ttu-id="16250-350">Windows Internet Explorer y el shell de Windows usan este identificador de formato para proporcionar un mecanismo a través del cual bloquear o solicitar las operaciones de arrastrar y colocar que se originan en Internet Explorer junto con la marca de [**URLACTION_SHELL_ENHANCED_DRAGDROP_SECURITY**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537178(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="16250-350">This format identifier is used by Windows Internet Explorer and the Windows Shell to provide a mechanism through which to block or prompt for drag-and-drop operations originating from Internet Explorer in conjunction with the [**URLACTION_SHELL_ENHANCED_DRAGDROP_SECURITY**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537178(v=vs.85)) flag.</span></span>

<span data-ttu-id="16250-351">El origen de una operación de arrastrar y colocar agrega **CFSTR_UNTRUSTEDDRAGDROP** para especificar que el objeto de datos puede contener datos no confiables.</span><span class="sxs-lookup"><span data-stu-id="16250-351">**CFSTR_UNTRUSTEDDRAGDROP** is added by the source of a drag-and-drop operation to specify that the data object might contain untrustworthy data.</span></span> <span data-ttu-id="16250-352">Los datos se representan mediante una estructura [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) que contiene un objeto de memoria global.</span><span class="sxs-lookup"><span data-stu-id="16250-352">The data is represented by an [**STGMEDIUM**](/windows/win32/api/objidl/ns-objidl-ustgmedium-r1) structure that contains a global memory object.</span></span> <span data-ttu-id="16250-353">El miembro **hGlobal** de la estructura apunta a **un valor DWORD** establecido en una marca de [**acción de dirección URL**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537178(v=vs.85)) adecuada para que se produzca una comprobación de directiva a través del método [**IInternetSecurityManager::P rocessurlaction**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537136(v=vs.85)) , mediante el uso de la marca [**PUAF_ENFORCERESTRICTED**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537171(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="16250-353">The structure's **hGlobal** member points to a **DWORD** set to an appropriate [**URL Action**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537178(v=vs.85)) flag to cause a policy check through the [**IInternetSecurityManager::ProcessUrlAction**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537136(v=vs.85)) method, using the [**PUAF_ENFORCERESTRICTED**](/previous-versions/windows/internet-explorer/ie-developer/platform-apis/ms537171(v=vs.85)) flag.</span></span>

### <a name="dragwindow"></a><span data-ttu-id="16250-354">DragWindow</span><span class="sxs-lookup"><span data-stu-id="16250-354">DragWindow</span></span>

<span data-ttu-id="16250-355">Este formato se usa en una operación de arrastrar y colocar para identificar la imagen de arrastre (ventana) de un objeto de modo que su información visual se pueda actualizar dinámicamente.</span><span class="sxs-lookup"><span data-stu-id="16250-355">This format is used in a drag-and-drop operation to identify an object's drag image (window) so that its visual information can be updated dynamically.</span></span> <span data-ttu-id="16250-356">Cuando se arrastra un objeto sobre un destino de colocación, una aplicación actualiza su estructura [**DROPDESCRIPTION**](/windows/desktop/api/shlobj_core/ns-shlobj_core-dropdescription) en respuesta al método [**IDropTarget::D ragover**](/windows/win32/api/oleidl/nf-oleidl-idroptarget-dragover) o [**IDropSource:: GiveFeedback**](/windows/win32/api/oleidl/nf-oleidl-idropsource-givefeedback) .</span><span class="sxs-lookup"><span data-stu-id="16250-356">When an object is dragged over a drop target, an application updates its [**DROPDESCRIPTION**](/windows/desktop/api/shlobj_core/ns-shlobj_core-dropdescription) structure in response to the [**IDropTarget::DragOver**](/windows/win32/api/oleidl/nf-oleidl-idroptarget-dragover) or [**IDropSource::GiveFeedback**](/windows/win32/api/oleidl/nf-oleidl-idropsource-givefeedback) method.</span></span> <span data-ttu-id="16250-357">**DROPDESCRIPTION** se actualiza con un nuevo valor de [**DROPIMAGETYPE**](/windows/desktop/api/shlobj_core/ne-shlobj_core-dropimagetype) que indica la decoración que se va a aplicar al visual de la ventana de arrastre. por ejemplo, indica que el archivo se está copiando en lugar de moverse o que el objeto no se puede quitar a esa ubicación.</span><span class="sxs-lookup"><span data-stu-id="16250-357">The **DROPDESCRIPTION** is updated with a new [**DROPIMAGETYPE**](/windows/desktop/api/shlobj_core/ne-shlobj_core-dropimagetype) value that indicates the decoration to be applied to the drag window's visual; for instance, an indication that the file is being copied rather than moved or that the object cannot be dropped to that location.</span></span> <span data-ttu-id="16250-358">Sin embargo, hasta que el objeto recibe un mensaje de [**DDWM_UPDATEWINDOW**](ddwm-updatewindow.md) , no se actualizan los objetos visuales.</span><span class="sxs-lookup"><span data-stu-id="16250-358">However, until the object receives a [**DDWM_UPDATEWINDOW**](ddwm-updatewindow.md) message, the visuals are not updated.</span></span> <span data-ttu-id="16250-359">Este formato proporciona el **hWnd** de la ventana de arrastre del destinatario al remitente del mensaje de **DDWM_UPDATEWINDOW** .</span><span class="sxs-lookup"><span data-stu-id="16250-359">This format provides the **HWND** of the recipient drag window to the sender of the **DDWM_UPDATEWINDOW** message.</span></span>

<span data-ttu-id="16250-360">Los datos del portapapeles son del tipo [**TYMED_HGLOBAL**](/windows/win32/api/objidl/ne-objidl-tymed).</span><span class="sxs-lookup"><span data-stu-id="16250-360">The clipboard data is of type [**TYMED_HGLOBAL**](/windows/win32/api/objidl/ne-objidl-tymed).</span></span> <span data-ttu-id="16250-361">Es una representación **DWORD** de un **hWnd**.</span><span class="sxs-lookup"><span data-stu-id="16250-361">It is a **DWORD** representation of an **HWND**.</span></span> <span data-ttu-id="16250-362">Los datos se pueden pasar a la función **ULongToHandle** , definida en Basetsd. h, para proporcionar un **hWnd** de 64 bits para su uso en Windows de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="16250-362">The data can be passed to the **ULongToHandle** function, defined in Basetsd.h, to provide a 64-bit **HWND** for use on 64-bit Windows.</span></span>

<span data-ttu-id="16250-363">Este formato no requiere la inclusión de ShlObj. h.</span><span class="sxs-lookup"><span data-stu-id="16250-363">This format does not require the inclusion of Shlobj.h.</span></span>

 

 
