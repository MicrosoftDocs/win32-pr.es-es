---
title: Sustitución de protocolo
description: Sustitución de protocolo
ms.assetid: 61db5e2b-4858-446e-9a27-e0305b46683d
keywords:
- SDK de Windows Media Format, sustitución de protocolo
- Advanced Systems Format (ASF), sustitución de protocolo
- ASF (formato de sistemas avanzados), sustitución de protocolo
- sustitución de protocolo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2de8d0496467535f5740a10082f82e285c11ef6
ms.sourcegitcommit: 48d1c892045445bcbd0f22bafa2fd3861ffaa6e7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/19/2020
ms.locfileid: "104077320"
---
# <a name="protocol-rollover"></a><span data-ttu-id="5dfee-107">Sustitución de protocolo</span><span class="sxs-lookup"><span data-stu-id="5dfee-107">Protocol Rollover</span></span>

<span data-ttu-id="5dfee-108">La sustitución de protocolos es un proceso por el que el objeto lector detecta el mejor protocolo de streaming disponible en un servidor.</span><span class="sxs-lookup"><span data-stu-id="5dfee-108">Protocol rollover is a process whereby the reader object discovers the best streaming protocol available from a server.</span></span> <span data-ttu-id="5dfee-109">El lector utiliza la sustitución de protocolo cada vez que abre una dirección URL que contiene un esquema "MMS".</span><span class="sxs-lookup"><span data-stu-id="5dfee-109">The reader uses protocol rollover whenever it opens a URL that contains an "mms" scheme.</span></span>

<span data-ttu-id="5dfee-110">El lector admite varios protocolos:</span><span class="sxs-lookup"><span data-stu-id="5dfee-110">The reader supports several protocols:</span></span>

-   <span data-ttu-id="5dfee-111">Protocolo de streaming en tiempo real (RTSP)</span><span class="sxs-lookup"><span data-stu-id="5dfee-111">Real Time Streaming Protocol (RTSP)</span></span>
-   <span data-ttu-id="5dfee-112">Protocolo de transferencia de hipertexto (HTTP)</span><span class="sxs-lookup"><span data-stu-id="5dfee-112">Hypertext Transfer Protocol (HTTP)</span></span>
-   <span data-ttu-id="5dfee-113">Microsoft Media Server (MMS)</span><span class="sxs-lookup"><span data-stu-id="5dfee-113">Microsoft Media Server (MMS)</span></span>

<span data-ttu-id="5dfee-114">Los protocolos RTSP y MMS tienen dos versiones: una con [*UDP*](wmformat-glossary.md) como el protocolo de entrega subyacente y la otra mediante TCP.</span><span class="sxs-lookup"><span data-stu-id="5dfee-114">The RTSP and MMS protocols both come in two flavors, one using [*UDP*](wmformat-glossary.md) as the underlying delivery protocol, and the other using TCP.</span></span>

<span data-ttu-id="5dfee-115">El objeto lector siempre usa TCP para los comandos de control de reproducción, pero puede usar TCP o UDP para la entrega del contenido transmitido por secuencias.</span><span class="sxs-lookup"><span data-stu-id="5dfee-115">The reader object always uses TCP for playback control commands, but it can use either TCP or UDP for delivery of the streamed content.</span></span> <span data-ttu-id="5dfee-116">UDP es preferible para la entrega de contenido, porque impone menos sobrecarga de ancho de banda que TCP.</span><span class="sxs-lookup"><span data-stu-id="5dfee-116">UDP is preferred for content delivery, because it imposes less bandwidth overhead than TCP.</span></span> <span data-ttu-id="5dfee-117">El protocolo TCP garantiza un transporte confiable a través del uso de "circuitos virtuales", pero el costo de hacerlo significa que TCP no es tan adecuado para flujos multimedia digitales, donde el uso eficaz del ancho de banda es más importante que los paquetes perdidos ocasionales.</span><span class="sxs-lookup"><span data-stu-id="5dfee-117">The TCP protocol ensures reliable transport through the use of "virtual circuits," but the cost of doing so means that TCP is not as well suited for digital media streams, where efficient use of bandwidth is more important that occasional lost packets.</span></span>

<span data-ttu-id="5dfee-118">Cuando una dirección URL especifica "mms://", el lector intenta usar los siguientes protocolos para la entrega de datos, en el siguiente orden:</span><span class="sxs-lookup"><span data-stu-id="5dfee-118">When a URL specifies "mms://", the reader attempts to use the following protocols for data delivery, in the following order:</span></span>

1.  <span data-ttu-id="5dfee-119">RTSPU (RTSP con UDP)</span><span class="sxs-lookup"><span data-stu-id="5dfee-119">RTSPU (RTSP using UDP)</span></span>
2.  <span data-ttu-id="5dfee-120">RTSPt (RTSP con TCP)</span><span class="sxs-lookup"><span data-stu-id="5dfee-120">RTSPT (RTSP using TCP)</span></span>
3.  <span data-ttu-id="5dfee-121">MMSU (MMS mediante UDP)</span><span class="sxs-lookup"><span data-stu-id="5dfee-121">MMSU (MMS using UDP)</span></span>
4.  <span data-ttu-id="5dfee-122">MMST (MMS con TCP)</span><span class="sxs-lookup"><span data-stu-id="5dfee-122">MMST (MMS using TCP)</span></span>
5.  <span data-ttu-id="5dfee-123">HTTP</span><span class="sxs-lookup"><span data-stu-id="5dfee-123">HTTP</span></span>

<span data-ttu-id="5dfee-124">HTTP es un protocolo unidireccional basado en TCP y es el protocolo que usan los servidores Web.</span><span class="sxs-lookup"><span data-stu-id="5dfee-124">HTTP is a one-way protocol based on TCP, and is the protocol used by Web servers.</span></span> <span data-ttu-id="5dfee-125">El streaming con HTTP es menos eficaz que el uso de RTSP.</span><span class="sxs-lookup"><span data-stu-id="5dfee-125">Streaming with HTTP is less efficient that using RTSP.</span></span> <span data-ttu-id="5dfee-126">Sin embargo, la mayoría de los firewalls están configurados para aceptar solicitudes HTTP, mientras que normalmente rechazan otros protocolos de streaming.</span><span class="sxs-lookup"><span data-stu-id="5dfee-126">However, most firewalls are configured to accept HTTP requests, whereas they typically reject other streaming protocols.</span></span>

<span data-ttu-id="5dfee-127">Windows Media Services 9 series en Microsoft Windows Server 2003 rechazará todas las solicitudes de MMSU o MMST de un lector del SDK de Windows Media Format, ya que RTSP es el protocolo de streaming preferido.</span><span class="sxs-lookup"><span data-stu-id="5dfee-127">Windows Media Services 9 Series in Microsoft Windows Server 2003 will reject any MMSU or MMST requests from a Windows Media Format SDK reader, because RTSP is the preferred streaming protocol.</span></span> <span data-ttu-id="5dfee-128">Windows Media Services versión 4,1 y versiones anteriores no son compatibles con RTSP.</span><span class="sxs-lookup"><span data-stu-id="5dfee-128">Windows Media Services version 4.1 and earlier do not support RTSP.</span></span> <span data-ttu-id="5dfee-129">En este caso, el objeto de lector recurre a MMSU o HTTP.</span><span class="sxs-lookup"><span data-stu-id="5dfee-129">In this case the reader object falls back to MMSU or HTTP.</span></span>

<span data-ttu-id="5dfee-130">La sustitución de protocolos no se aplica si el esquema de direcciones URL proporciona un protocolo específico, como "rtspu://" para RTSPU o "https://" para HTTP.</span><span class="sxs-lookup"><span data-stu-id="5dfee-130">Protocol rollover does not apply if the URL scheme gives a specific protocol, such as "rtspu://" for RTSPU or "https://" for HTTP.</span></span> <span data-ttu-id="5dfee-131">Si el esquema de la dirección URL es "rtsp://", el lector intenta RTSPU y RTSPt, pero no otros.</span><span class="sxs-lookup"><span data-stu-id="5dfee-131">If the URL scheme is "rtsp://", the reader tries RTSPU and RTSPT, but no others.</span></span>

<span data-ttu-id="5dfee-132">Después de que el lector abra un archivo, puede consultar el protocolo que está usando llamando al método [**IWMReaderAdvanced2:: GetProtocolName**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getprotocolname) en el lector.</span><span class="sxs-lookup"><span data-stu-id="5dfee-132">After the reader opens a file, you can query which protocol it is using by calling the [**IWMReaderAdvanced2::GetProtocolName**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreaderadvanced2-getprotocolname) method on the reader.</span></span> <span data-ttu-id="5dfee-133">Mientras el contenido se transmite o se descarga, este método devuelve el nombre en cuanto el contenido se almacena por completo en la memoria caché, el método **GetProtocolName** devuelve la cadena "cache".</span><span class="sxs-lookup"><span data-stu-id="5dfee-133">While the content is being streamed or downloaded, this method returns the name as soon as the content is completely cached, the **GetProtocolName** method returns the string "Cache."</span></span>

<span data-ttu-id="5dfee-134">Para obtener los nombres de todos los protocolos de Windows Media Server que admite el lector, llame al método [**IWMReaderNetworkConfig:: GetSupportedProtocolName**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-getsupportedprotocolname) en el lector.</span><span class="sxs-lookup"><span data-stu-id="5dfee-134">To get the names of all the Windows Media server protocols that the reader supports, call the [**IWMReaderNetworkConfig::GetSupportedProtocolName**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-getsupportedprotocolname) method on the reader.</span></span> <span data-ttu-id="5dfee-135">Puede deshabilitar uno o varios de los protocolos en la lista de sustitución de protocolos del lector mediante la interfaz **IWMReaderNetworkConfig** .</span><span class="sxs-lookup"><span data-stu-id="5dfee-135">You can disable one or more of the protocols in the reader's protocol rollover list, using **IWMReaderNetworkConfig** interface.</span></span> <span data-ttu-id="5dfee-136">Por ejemplo, el método [**IWMReaderNetworkConfig:: SetEnableTCP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenabletcp) habilita o deshabilita los protocolos basados en TCP y [**IWMReaderNetworkConfig:: SetEnableUDP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenableudp) habilita o deshabilita los protocolos basados en UDP.</span><span class="sxs-lookup"><span data-stu-id="5dfee-136">For example, the [**IWMReaderNetworkConfig::SetEnableTCP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenabletcp) method enables or disables the TCP-based protocols, and [**IWMReaderNetworkConfig::SetEnableUDP**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmreadernetworkconfig-setenableudp) enables or disables the UDP-based protocols.</span></span> <span data-ttu-id="5dfee-137">Estos métodos solo se aplican a la sustitución de protocolo; los protocolos siguen estando disponibles si el esquema de direcciones URL contiene un protocolo específico.</span><span class="sxs-lookup"><span data-stu-id="5dfee-137">These methods apply only to protocol rollover; the protocols are still available if the URL scheme contains a specific protocol.</span></span> <span data-ttu-id="5dfee-138">Normalmente no hay ningún motivo para deshabilitar cualquiera de los protocolos que se usan en la sustitución del protocolo. Si lo hace, puede degradar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="5dfee-138">There is usually no reason to disable any of the protocols used in protocol rollover; doing so can degrade performance.</span></span> <span data-ttu-id="5dfee-139">Sin embargo, puede ser útil para realizar pruebas.</span><span class="sxs-lookup"><span data-stu-id="5dfee-139">However, it might be useful for testing.</span></span>

 

 




