---
title: Devoluciones de llamada (RPC)
description: A menudo, el modelo de programación requiere una devolución de llamada de servidor a un cliente a través de una llamada a procedimiento remoto (RPC) o llamadas de cliente a un servidor que no es de confianza. Esto presenta muchos problemas potenciales.
ms.assetid: a4f3ea26-ac4b-41e5-abde-96b4baedf2ae
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6260e2cff2cbaff86f210764e89d55859c4d33af
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/10/2020
ms.locfileid: "104078777"
---
# <a name="callbacks-rpc"></a><span data-ttu-id="b780e-104">Devoluciones de llamada (RPC)</span><span class="sxs-lookup"><span data-stu-id="b780e-104">Callbacks (RPC)</span></span>

<span data-ttu-id="b780e-105">A menudo, el modelo de programación requiere una devolución de llamada de servidor a un cliente a través de una llamada a procedimiento remoto (RPC) o llamadas de cliente a un servidor que no es de confianza.</span><span class="sxs-lookup"><span data-stu-id="b780e-105">Often the programming model necessitates a server callback to a client through a remote procedure call (RPC), or client calls into an untrusted server.</span></span> <span data-ttu-id="b780e-106">Esto presenta muchos problemas potenciales.</span><span class="sxs-lookup"><span data-stu-id="b780e-106">This introduces many potential pitfalls.</span></span>

<span data-ttu-id="b780e-107">En primer lugar, la devolución de llamada al cliente debe realizarse con un nivel de suplantación suficientemente bajo.</span><span class="sxs-lookup"><span data-stu-id="b780e-107">First, callback to the client must be made with a sufficiently low impersonation level.</span></span> <span data-ttu-id="b780e-108">Si el servidor es un servicio de sistema con privilegios elevados, la devolución de una llamada a un cliente local con un nivel de suplantación de suplantación o superior puede proporcionar al cliente privilegios suficientes para asumir el sistema.</span><span class="sxs-lookup"><span data-stu-id="b780e-108">If the server is a highly privileged system service, calling back a local client with an impersonation level of impersonate or higher can provide the client with privileges sufficient to take over the system.</span></span> <span data-ttu-id="b780e-109">Llamar a un cliente remoto con un nivel de suplantación superior al necesario también puede provocar consecuencias no deseadas.</span><span class="sxs-lookup"><span data-stu-id="b780e-109">Calling back a remote client with higher impersonation level than necessary can also lead to undesirable consequences.</span></span>

<span data-ttu-id="b780e-110">En segundo lugar, si un atacante induce el servicio para realizar una devolución de llamada, puede iniciar lo que se denomina un *agujero negro*: ataque de denegación de servicio.</span><span class="sxs-lookup"><span data-stu-id="b780e-110">Second, if an attacker induces your service to perform a callback, it can launch what is called a *black hole*—denial of service attack.</span></span> <span data-ttu-id="b780e-111">Estos ataques no son específicos de RPC; en estos ataques, un equipo induce que le envíe tráfico, pero no responde a las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="b780e-111">Such attacks are not specific to RPC; in these attacks, a machine induces you to send traffic to it, but it does not respond to your requests.</span></span> <span data-ttu-id="b780e-112">Puede recibir más recursos y más para llamar al agujero negro, pero nunca vuelven.</span><span class="sxs-lookup"><span data-stu-id="b780e-112">You sink more and more resources into calling the black hole, but they never come back.</span></span> <span data-ttu-id="b780e-113">Un ejemplo genérico de este tipo de ataque es un ataque de nivel TCP denominado ataque de desbordamiento SYN de TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="b780e-113">One generic example of such an attack is a TCP-level attack called a TCP/IP SYN flood attack.</span></span>

<span data-ttu-id="b780e-114">En el nivel de RPC, se produce un ataque de agujero negro simple cuando un atacante llama a una interfaz y solicita al servidor que vuelva a llamar a la interfaz.</span><span class="sxs-lookup"><span data-stu-id="b780e-114">On the RPC level, a simple black-hole attack occurs when an attacker calls an interface, and requests the server to call the interface back.</span></span> <span data-ttu-id="b780e-115">La interfaz es compatible, pero el atacante nunca devuelve la llamada: un subproceso del servidor está conectado.</span><span class="sxs-lookup"><span data-stu-id="b780e-115">The interface complies, but the attacker never returns the call: one thread on the server is tied up.</span></span> <span data-ttu-id="b780e-116">El atacante realiza esta 100 veces y vincula los subprocesos 100 en el servidor.</span><span class="sxs-lookup"><span data-stu-id="b780e-116">The attacker does this 100 times, tying 100 threads on the server.</span></span> <span data-ttu-id="b780e-117">Finalmente, el servidor se queda sin memoria.</span><span class="sxs-lookup"><span data-stu-id="b780e-117">Eventually the server runs out of memory.</span></span> <span data-ttu-id="b780e-118">La depuración del servidor puede revelar potencialmente la identidad del autor de la llamada de agujero negro, pero a menudo el servidor se reiniciará sin suponer un reinicio de infrecuente, o puede que no haya suficientes conocimientos para determinar el atacante.</span><span class="sxs-lookup"><span data-stu-id="b780e-118">Debugging the server can potentially reveal the identity of the black-hole caller, but often the server will be restarted without suspecting foul play, or there may not be enough expertise available to determine the attacker.</span></span>

<span data-ttu-id="b780e-119">El tercer problema está en el cliente.</span><span class="sxs-lookup"><span data-stu-id="b780e-119">The third pitfall is on the client.</span></span> <span data-ttu-id="b780e-120">A menudo, un cliente realiza una llamada al servidor que informa al servidor de cómo volver a llamarlo (normalmente un enlace de cadena) y, a continuación, espera a que llegue una llamada del servidor, aceptando ciegamente cualquier llamada en ese punto de conexión que notifica que proceda del servidor.</span><span class="sxs-lookup"><span data-stu-id="b780e-120">Often a client makes a call to the server informing the server how to call it back (usually a string binding), and then waits for a call from the server to arrive, blindly accepting any call on that endpoint that claims to come from the server.</span></span> <span data-ttu-id="b780e-121">El protocolo de devolución de llamada del servidor al cliente debe incluir algún mecanismo de comprobación para asegurarse de que, cuando llegue la devolución de llamada al cliente, realmente se originó en el servidor.</span><span class="sxs-lookup"><span data-stu-id="b780e-121">The callback protocol from the server to the client should include some verification mechanism to ensure that when the callback comes to the client, it actually originated on the server.</span></span>

 

 




