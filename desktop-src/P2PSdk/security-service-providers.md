---
description: La interfaz del proveedor de servicios de seguridad (SSPI) proporciona una interfaz universal estándar del sector para aplicaciones distribuidas seguras.
ms.assetid: c3cebb9d-9094-493f-96d3-763a0c282dfb
title: Proveedores de servicios de seguridad
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b2121940337d0f4e06c53981cf30f0125180c466
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105668056"
---
# <a name="security-service-providers"></a><span data-ttu-id="4f895-103">Proveedores de servicios de seguridad</span><span class="sxs-lookup"><span data-stu-id="4f895-103">Security Service Providers</span></span>

<span data-ttu-id="4f895-104">La interfaz del proveedor de servicios de seguridad (SSPI) proporciona una interfaz universal estándar del sector para aplicaciones distribuidas seguras.</span><span class="sxs-lookup"><span data-stu-id="4f895-104">The Security Service Provider Interface (SSPI) provides a universal, industry-standard interface for secure distributed applications.</span></span> <span data-ttu-id="4f895-105">La API de gráficos del mismo nivel proporciona a las aplicaciones una manera de proteger los vínculos de un gráfico mediante la especificación de un proveedor de servicios de seguridad (SSP), que es un archivo DLL que implementa una interfaz SSPI.</span><span class="sxs-lookup"><span data-stu-id="4f895-105">The Peer Graphing API provides a way for applications to secure links in a graph by specifying a Security Service Provider (SSP), which is a DLL that implements an SSPI interface.</span></span> <span data-ttu-id="4f895-106">Una aplicación especifica un SSP cuando crea un grafo con [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span><span class="sxs-lookup"><span data-stu-id="4f895-106">An application specifies an SSP when it creates a graph by using [**PeerGraphCreate**](/windows/desktop/api/P2P/nf-p2p-peergraphcreate).</span></span>

<span data-ttu-id="4f895-107">Para obtener más información sobre la creación de su propio SSP, consulte el vínculo de documentación de SSPI en la lista de [vínculos de referencia de gráficos](graphing-reference-links.md).</span><span class="sxs-lookup"><span data-stu-id="4f895-107">For more information about creating your own SSP, see the SSPI documentation link in the list of [Graphing Reference Links](graphing-reference-links.md).</span></span>

## <a name="programming-considerations-for-implementing-an-ssp"></a><span data-ttu-id="4f895-108">Consideraciones de programación para implementar un SSP</span><span class="sxs-lookup"><span data-stu-id="4f895-108">Programming Considerations for Implementing an SSP</span></span>

<span data-ttu-id="4f895-109">Tenga cuidado al llamar a una aplicación desde dentro de un SSP.</span><span class="sxs-lookup"><span data-stu-id="4f895-109">Use caution when calling into an application from within an SSP.</span></span> <span data-ttu-id="4f895-110">Las siguientes consideraciones se aplican a las devoluciones de llamada de SSP:</span><span class="sxs-lookup"><span data-stu-id="4f895-110">The following considerations apply to SSP callbacks:</span></span>

-   <span data-ttu-id="4f895-111">Las devoluciones de llamada no deben tardar mucho tiempo en devolverse, porque se llama durante la negociación de la conexión.</span><span class="sxs-lookup"><span data-stu-id="4f895-111">Callbacks should not take a long time to return, because they are called during connection negotiation.</span></span> <span data-ttu-id="4f895-112">Si tarda demasiado tiempo en establecerse una conexión, la conexión se puede quitar.</span><span class="sxs-lookup"><span data-stu-id="4f895-112">If it takes too long for a connection to be established, the connection can be dropped.</span></span>
-   <span data-ttu-id="4f895-113">La API de gráficos del mismo nivel ajusta dinámicamente los valores de tiempo de espera de conexión, en función de la carga real de un sistema.</span><span class="sxs-lookup"><span data-stu-id="4f895-113">The Peer Graphing API dynamically adjusts connection timeout values, based on the actual load of a system.</span></span> <span data-ttu-id="4f895-114">El valor de tiempo de espera más bajo es de 20 segundos.</span><span class="sxs-lookup"><span data-stu-id="4f895-114">The lowest timeout value is 20 seconds.</span></span>
-   <span data-ttu-id="4f895-115">Para evitar posibles situaciones de interbloqueo, una aplicación no debe tener acceso a la base de datos de gráficos del mismo nivel desde una devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="4f895-115">To avoid potential deadlock situations, an application must not access the peer graphing database from a callback.</span></span> <span data-ttu-id="4f895-116">Si una aplicación requiere información de la base de datos de gráficos, la aplicación puede almacenar en caché la información necesaria y, a continuación, hacer referencia a la memoria caché desde dentro de la devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="4f895-116">If an application requires information from the graphing database, the application can cache the necessary information, and then refer to the cache from within the callback.</span></span> <span data-ttu-id="4f895-117">El almacenamiento en caché también puede ayudar a reducir el tiempo de conexión.</span><span class="sxs-lookup"><span data-stu-id="4f895-117">Caching can also help decrease connection time.</span></span>

<span data-ttu-id="4f895-118">Al llamar a los puntos de entrada SSPI, la infraestructura de gráficos del mismo nivel requiere valores específicos para parámetros específicos de cinco (5) funciones.</span><span class="sxs-lookup"><span data-stu-id="4f895-118">When calling the SSPI entry points, the Peer Graphing Infrastructure requires specific values for specific parameters of five (5) functions.</span></span> <span data-ttu-id="4f895-119">No se pueden cambiar estos valores de parámetro proporcionados por SSP y el SSP puede omitir los valores de los cinco parámetros o controlarlos correctamente.</span><span class="sxs-lookup"><span data-stu-id="4f895-119">You cannot change these parameter values provided to SSP, and the SSP can either ignore the values for the five parameters or handle them gracefully.</span></span> <span data-ttu-id="4f895-120">En la lista siguiente se identifican estos parámetros específicos y los valores necesarios:</span><span class="sxs-lookup"><span data-stu-id="4f895-120">The following list identifies these specific parameters and required values:</span></span>

-   [<span data-ttu-id="4f895-121">**AcquireCredentialsHandle**</span><span class="sxs-lookup"><span data-stu-id="4f895-121">**AcquireCredentialsHandle**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="4f895-122">Especifique un (1) para el parámetro *pvGetKeyArgument* .</span><span class="sxs-lookup"><span data-stu-id="4f895-122">Specify one (1) for the *pvGetKeyArgument* parameter.</span></span> <span data-ttu-id="4f895-123">Especifica **null** para los parámetros *pszPrincipal*, *pvLogonID* y *pGetKeyFn* .</span><span class="sxs-lookup"><span data-stu-id="4f895-123">Specifies **NULL** for the *pszPrincipal*, *pvLogonID*, and *pGetKeyFn* parameters.</span></span>

-   [<span data-ttu-id="4f895-124">**InitializeSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="4f895-124">**InitializeSecurityContext**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="4f895-125">Especifique las marcas siguientes para el parámetro *fContextReq* : **ISC \_ req \_ Mutual \_ auth \| ISC req confidencialidad de ISC \_ \_ req Integrity de ISC req \| \_ \_ \| \_ \_ Sequence \_ detectar \| ISC \_ req Stream de \_ \| ISC \_ req \_ asignar \_ memoria**.</span><span class="sxs-lookup"><span data-stu-id="4f895-125">Specify the following flags for the *fContextReq* parameter: **ISC\_REQ\_MUTUAL\_AUTH \| ISC\_REQ\_CONFIDENTIALITY \| ISC\_REQ\_INTEGRITY \| ISC\_REQ\_SEQUENCE\_DETECT \| ISC\_REQ\_STREAM \| ISC\_REQ\_ALLOCATE\_MEMORY**.</span></span>

-   [<span data-ttu-id="4f895-126">**AcceptSecurityContext**</span><span class="sxs-lookup"><span data-stu-id="4f895-126">**AcceptSecurityContext**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="4f895-127">Especifique las marcas siguientes para el parámetro *fContextReq* : ASC req **\_ \_ Mutual \_ auth \| ASC \_ req \_ confidencialidad \| ASC \_ req secuencia de \_ \| \_ solicitud \_ \_ \| \_ \_ \| \_ \_ \_** de solicitud de inversión de ASC req Stream req solicitud de asignación de memoria.</span><span class="sxs-lookup"><span data-stu-id="4f895-127">Specify the following flags for the *fContextReq* parameter: **ASC\_REQ\_MUTUAL\_AUTH \| ASC\_REQ\_CONFIDENTIALITY \| ASC\_REQ\_INTEGRITY \| ASC\_REQ\_SEQUENCE\_DETECT \| ASC\_REQ\_STREAM \| ASC\_REQ\_ALLOCATE\_MEMORY**.</span></span>

-   [<span data-ttu-id="4f895-128">**EncryptMessage**</span><span class="sxs-lookup"><span data-stu-id="4f895-128">**EncryptMessage**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="4f895-129">Especifique cero (0) para los parámetros *fQOP* y *MessageSeqNo* .</span><span class="sxs-lookup"><span data-stu-id="4f895-129">Specify zero (0) for the *fQOP* and *MessageSeqNo* parameters.</span></span>

-   [<span data-ttu-id="4f895-130">**DecryptMessage**</span><span class="sxs-lookup"><span data-stu-id="4f895-130">**DecryptMessage**</span></span>](graphing-reference-links.md)

    <span data-ttu-id="4f895-131">Especifique cero (0) para el parámetro *MessageSeqNo* y **null** para el parámetro *pfQOP* .</span><span class="sxs-lookup"><span data-stu-id="4f895-131">Specify zero (0) for the *MessageSeqNo* parameter and **NULL** for the *pfQOP* parameter.</span></span>

<span data-ttu-id="4f895-132">Al llamar a [**EncryptMessage**](graphing-reference-links.md), se pasan cuatro búferes en la estructura **SecBufferDesc** .</span><span class="sxs-lookup"><span data-stu-id="4f895-132">When calling [**EncryptMessage**](graphing-reference-links.md), four buffers are passed in the **SecBufferDesc** structure.</span></span> <span data-ttu-id="4f895-133">En la tabla siguiente se identifica el orden de pasar los búferes.</span><span class="sxs-lookup"><span data-stu-id="4f895-133">The following table identifies the order to pass the buffers.</span></span>

| <span data-ttu-id="4f895-134">Estructura específica de SSP</span><span class="sxs-lookup"><span data-stu-id="4f895-134">SSP-specific structure</span></span>         | <span data-ttu-id="4f895-135">Descripción</span><span class="sxs-lookup"><span data-stu-id="4f895-135">Description</span></span>                                                                                                                                                                                                       |
|--------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="4f895-136">**SECBUFFER \_ encabezado de secuencia \_**</span><span class="sxs-lookup"><span data-stu-id="4f895-136">**SECBUFFER\_STREAM\_HEADER**</span></span>  | <span data-ttu-id="4f895-137">Contiene los datos del encabezado de seguridad.</span><span class="sxs-lookup"><span data-stu-id="4f895-137">Contains the security header data.</span></span> <span data-ttu-id="4f895-138">El tamaño del búfer de encabezado se obtiene llamando a [**QueryContextAttributes**](graphing-reference-links.md) y especificando el atributo **SECPKG \_ ATTR \_ Stream \_ sizes** .</span><span class="sxs-lookup"><span data-stu-id="4f895-138">The size of the header buffer is obtained by calling [**QueryContextAttributes**](graphing-reference-links.md) and specifying the **SECPKG\_ATTR\_STREAM\_SIZES** attribute.</span></span>  |
| <span data-ttu-id="4f895-139">**datos de SECBUFFER \_**</span><span class="sxs-lookup"><span data-stu-id="4f895-139">**SECBUFFER\_DATA**</span></span>            | <span data-ttu-id="4f895-140">Contiene el mensaje de texto sin formato que se va a cifrar.</span><span class="sxs-lookup"><span data-stu-id="4f895-140">Contains the plain-text message to be encrypted.</span></span>                                                                                                                                                                  |
| <span data-ttu-id="4f895-141">**\_finalizador de flujo SECBUFFER \_**</span><span class="sxs-lookup"><span data-stu-id="4f895-141">**SECBUFFER\_STREAM\_TRAILER**</span></span> | <span data-ttu-id="4f895-142">Contiene los datos del finalizador de seguridad.</span><span class="sxs-lookup"><span data-stu-id="4f895-142">Contains the security trailer data.</span></span> <span data-ttu-id="4f895-143">El tamaño del búfer de encabezado se obtiene llamando a [**QueryContextAttributes**](graphing-reference-links.md) y especificando el atributo **SECPKG \_ ATTR \_ Stream \_ sizes** .</span><span class="sxs-lookup"><span data-stu-id="4f895-143">The size of the header buffer is obtained by calling [**QueryContextAttributes**](graphing-reference-links.md) and specifying the **SECPKG\_ATTR\_STREAM\_SIZES** attribute.</span></span> |
| <span data-ttu-id="4f895-144">**SECBUFFER \_ vacío**</span><span class="sxs-lookup"><span data-stu-id="4f895-144">**SECBUFFER\_EMPTY**</span></span>           | <span data-ttu-id="4f895-145">No inicializado.</span><span class="sxs-lookup"><span data-stu-id="4f895-145">Not initialized.</span></span> <span data-ttu-id="4f895-146">El tamaño de este búfer es cero (0).</span><span class="sxs-lookup"><span data-stu-id="4f895-146">The size of this buffer is zero (0).</span></span>                                                                                                                                                             |



 

<span data-ttu-id="4f895-147">Al llamar a [**DecryptMessage**](graphing-reference-links.md), la API de gráficos del mismo nivel pasa exactamente cuatro estructuras **SecBuffer** .</span><span class="sxs-lookup"><span data-stu-id="4f895-147">When calling [**DecryptMessage**](graphing-reference-links.md), the Peer Graphing API passes exactly four **SecBuffer** structures.</span></span> <span data-ttu-id="4f895-148">El primer búfer es **SECBUFFER \_ Data** y contiene un mensaje cifrado.</span><span class="sxs-lookup"><span data-stu-id="4f895-148">The first buffer is **SECBUFFER\_DATA**, and contains an encrypted message.</span></span> <span data-ttu-id="4f895-149">Los búferes restantes se utilizan para la salida y son del tipo **SECBUFFER \_ vacío**.</span><span class="sxs-lookup"><span data-stu-id="4f895-149">The remaining buffers are used for output, and are of type **SECBUFFER\_EMPTY**.</span></span>

<span data-ttu-id="4f895-150">El SSP debe admitir el cifrado y descifrado de los búferes de datos de usuario con tamaños de 16 k y mayores en una llamada.</span><span class="sxs-lookup"><span data-stu-id="4f895-150">The SSP needs to support encrypting and decrypting user data buffers with sizes of 16K and greater in one call.</span></span>

 

 



