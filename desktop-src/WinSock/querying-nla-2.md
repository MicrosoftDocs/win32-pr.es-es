---
description: Para obtener la notificación de redes lógicas invalidadas, use la función WSANSPIoctl para registrar los eventos de cambio de ubicación de red.
ms.assetid: 531b6269-5f35-44c1-ad0f-c5f103029893
title: Consultando NLA
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0ac7a4f57e14bb967b04d3a9fd6fe66717da3878
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105706197"
---
# <a name="querying-nla"></a><span data-ttu-id="bee77-103">Consultando NLA</span><span class="sxs-lookup"><span data-stu-id="bee77-103">Querying NLA</span></span>

<span data-ttu-id="bee77-104">Para obtener la notificación de redes lógicas invalidadas, use la función [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) para registrar los eventos de cambio de ubicación de red.</span><span class="sxs-lookup"><span data-stu-id="bee77-104">To obtain notification of invalidated logical networks, use the [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function to register for network location change events.</span></span> <span data-ttu-id="bee77-105">Se pueden usar dos métodos para determinar si una ubicación de red válida previamente ha dejado de ser válida: métodos de sondeo o notificación con e/s superpuestas o mensajería de Windows.</span><span class="sxs-lookup"><span data-stu-id="bee77-105">Two methods can be used to determine whether a previously valid network location has become invalid: polling methods, or notification using overlapped I/O or Windows messaging.</span></span>

<span data-ttu-id="bee77-106">Las consultas se crean mediante las funciones [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) y [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) para enumerar todas las redes lógicas disponibles.</span><span class="sxs-lookup"><span data-stu-id="bee77-106">Queries are formed using the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext,**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) and [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) functions to enumerate all available logical networks.</span></span> <span data-ttu-id="bee77-107">El uso de cada una de estas funciones se explica individualmente en el resto de esta sección, comenzando por la función **WSALookupServiceBegin** .</span><span class="sxs-lookup"><span data-stu-id="bee77-107">The use of each of these functions is explained individually throughout the remainder of this section, beginning with the **WSALookupServiceBegin** function.</span></span>

> [!Note]  
> <span data-ttu-id="bee77-108">NLA requiere el archivo de encabezado mswsock. h, que, de forma predeterminada, no se incluye en el archivo WinSock2. h.</span><span class="sxs-lookup"><span data-stu-id="bee77-108">NLA requires the Mswsock.h header file, which by default is not included in the Winsock2.h file.</span></span>

 

## <a name="step-1-initiate-the-query"></a><span data-ttu-id="bee77-109">Paso 1: iniciar la consulta</span><span class="sxs-lookup"><span data-stu-id="bee77-109">Step 1: Initiate the Query</span></span>

<span data-ttu-id="bee77-110">Para una referencia rápida, la función [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) tiene la siguiente sintaxis:</span><span class="sxs-lookup"><span data-stu-id="bee77-110">For quick reference, the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function has the following syntax:</span></span>

``` syntax
INT WSALookupServiceBegin(
  LPWSAQUERYSET lpqsRestrictions,
  DWORD dwControlFlags,
  LPHANDLE lphLookup
);
```

<span data-ttu-id="bee77-111">NLA admite las siguientes marcas de búsqueda de *dwControlFlags* :</span><span class="sxs-lookup"><span data-stu-id="bee77-111">NLA supports the following *dwControlFlags* lookup flags:</span></span>

<dl> <span data-ttu-id="bee77-112">\_nombre devuelto de LUP \_</span><span class="sxs-lookup"><span data-stu-id="bee77-112">LUP\_RETURN\_NAME</span></span>  
<span data-ttu-id="bee77-113">LUP \_ Comentario devuelto \_</span><span class="sxs-lookup"><span data-stu-id="bee77-113">LUP\_RETURN\_COMMENT</span></span>  
<span data-ttu-id="bee77-114">LUP \_ devolver \_ BLOB</span><span class="sxs-lookup"><span data-stu-id="bee77-114">LUP\_RETURN\_BLOB</span></span>  
<span data-ttu-id="bee77-115">LUP \_ devolver \_ todo</span><span class="sxs-lookup"><span data-stu-id="bee77-115">LUP\_RETURN\_ALL</span></span>  
<span data-ttu-id="bee77-116">LUP \_ Deep</span><span class="sxs-lookup"><span data-stu-id="bee77-116">LUP\_DEEP</span></span>  
</dl>

<span data-ttu-id="bee77-117">Estas marcas restringen los conjuntos de resultados devueltos en las llamadas subsiguientes a [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), la función a redes que contienen campos del tipo especificado.</span><span class="sxs-lookup"><span data-stu-id="bee77-117">These flags restrict the result sets returned in subsequent calls to the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function to networks that contain fields of the specified type.</span></span> <span data-ttu-id="bee77-118">Por ejemplo, si se especifica LUP \_ Return \_ BLOB en el parámetro *dwControlFlags* de la llamada a la función [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) , se restringen los conjuntos de resultados de las llamadas posteriores a **WSALookupServiceNext** a las redes que contienen información de BLOB.</span><span class="sxs-lookup"><span data-stu-id="bee77-118">For example, specifying LUP\_RETURN\_BLOB in the *dwControlFlags* parameter of the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function call restricts result sets from subsequent calls to **WSALookupServiceNext**, to networks that contain BLOB information.</span></span> <span data-ttu-id="bee77-119">El uso de la \_ marca LUP Return \_ All es equivalente a especificar LUP \_ Return \_ Name, LUP REturn \_ \_ comment y LUP \_ Return \_ BLOB, pero no LUP \_ Deep.</span><span class="sxs-lookup"><span data-stu-id="bee77-119">Using the LUP\_RETURN\_ALL flag is equivalent to specifying LUP\_RETURN\_NAME, LUP\_RETURN\_COMMENT, and LUP\_RETURN\_BLOB, but not LUP\_DEEP.</span></span>

<span data-ttu-id="bee77-120">Para obtener una explicación de estas marcas de búsqueda, consulte la página de referencia de la función [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) .</span><span class="sxs-lookup"><span data-stu-id="bee77-120">For an explanation of these lookup flags, consult the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function reference page.</span></span>

<span data-ttu-id="bee77-121">El identificador de búsqueda devuelto por NLA en el parámetro *lphLookup* es privado a NLA y no debe modificarse.</span><span class="sxs-lookup"><span data-stu-id="bee77-121">The lookup handle returned by NLA in the *lphLookup* parameter is private to NLA, and should not be modified.</span></span> <span data-ttu-id="bee77-122">Puesto que el identificador devuelto es privado para NLA, las funciones como [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) no están disponibles.</span><span class="sxs-lookup"><span data-stu-id="bee77-122">Since the returned handle is private to NLA, functions such as [**WSAGetOverlappedResult**](/windows/desktop/api/Winsock2/nf-winsock2-wsagetoverlappedresult) are not available.</span></span>

<span data-ttu-id="bee77-123">NLA devuelve cero cuando se completa correctamente, tal como se define en la página de referencia de la función [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) .</span><span class="sxs-lookup"><span data-stu-id="bee77-123">NLA returns zero upon successful completion, as defined in the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function reference page.</span></span> <span data-ttu-id="bee77-124">De lo contrario, NLA admite los siguientes códigos de error.</span><span class="sxs-lookup"><span data-stu-id="bee77-124">Otherwise, NLA supports the following error codes.</span></span>

| <span data-ttu-id="bee77-125">Error</span><span class="sxs-lookup"><span data-stu-id="bee77-125">Error</span></span>                    | <span data-ttu-id="bee77-126">Significado</span><span class="sxs-lookup"><span data-stu-id="bee77-126">Meaning</span></span>                                                                                                                                                     |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bee77-127">WSANOTINITIALISED</span><span class="sxs-lookup"><span data-stu-id="bee77-127">WSANOTINITIALISED</span></span>        | <span data-ttu-id="bee77-128">No se realizó una llamada correcta a la función [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) para inicializar NLA.</span><span class="sxs-lookup"><span data-stu-id="bee77-128">A successful call to the [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) function to initialize NLA was not performed.</span></span>                                                   |
| <span data-ttu-id="bee77-129">WSAEINVAL</span><span class="sxs-lookup"><span data-stu-id="bee77-129">WSAEINVAL</span></span>                | <span data-ttu-id="bee77-130">Uno o varios parámetros no eran válidos o los parámetros especificados en la llamada de función se aplican a protocolos distintos de IP.</span><span class="sxs-lookup"><span data-stu-id="bee77-130">One or more parameters were invalid, or parameters specified in the function call apply to protocols other than IP.</span></span>                                         |
| <span data-ttu-id="bee77-131">\_no \_ se encontró WSASERVICE</span><span class="sxs-lookup"><span data-stu-id="bee77-131">WSASERVICE\_NOT\_FOUND</span></span>   | <span data-ttu-id="bee77-132">El parámetro *lpServiceClassId* de la estructura [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) pasada en el parámetro *lpqsRestrictions* contiene un GUID no válido.</span><span class="sxs-lookup"><span data-stu-id="bee77-132">The *lpServiceClassId* parameter of the [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) structure passed in the *lpqsRestrictions* parameter contains an invalid GUID.</span></span> |
| <span data-ttu-id="bee77-133">datos de WSANO \_</span><span class="sxs-lookup"><span data-stu-id="bee77-133">WSANO\_DATA</span></span>              | <span data-ttu-id="bee77-134">La \_ marca de contenedores LUP se especificó en el parámetro *dwControlFlags* .</span><span class="sxs-lookup"><span data-stu-id="bee77-134">The LUP\_CONTAINERS flag was specified in *dwControlFlags* parameter.</span></span>                                                                                       |
| <span data-ttu-id="bee77-135">WSAEFAULT</span><span class="sxs-lookup"><span data-stu-id="bee77-135">WSAEFAULT</span></span>                | <span data-ttu-id="bee77-136">Se ha producido una infracción de acceso al intentar obtener acceso a los parámetros proporcionados por el usuario.</span><span class="sxs-lookup"><span data-stu-id="bee77-136">An access violation occurred when attempting to access user-supplied parameters.</span></span>                                                                            |
| <span data-ttu-id="bee77-137">WSASYSNOTREADY</span><span class="sxs-lookup"><span data-stu-id="bee77-137">WSASYSNOTREADY</span></span>           | <span data-ttu-id="bee77-138">El servicio NLA no está disponible para procesar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="bee77-138">The NLA service is unavailable to process the request.</span></span>                                                                                                      |
| <span data-ttu-id="bee77-139">WSA \_ no \_ hay suficiente \_ memoria</span><span class="sxs-lookup"><span data-stu-id="bee77-139">WSA\_NOT\_ENOUGH\_MEMORY</span></span> | <span data-ttu-id="bee77-140">NLA o el servicio NLA no pudo asignar suficiente memoria para procesar esta solicitud.</span><span class="sxs-lookup"><span data-stu-id="bee77-140">NLA or the NLA service was unable to allocate enough memory to process this request.</span></span>                                                                        |



 

## <a name="step-2-perform-the-query"></a><span data-ttu-id="bee77-141">Paso 2: realizar la consulta</span><span class="sxs-lookup"><span data-stu-id="bee77-141">Step 2: Perform the Query</span></span>

<span data-ttu-id="bee77-142">El siguiente paso para consultar NLA requiere el uso de la función [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="bee77-142">The next step in querying NLA requires use of the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span> <span data-ttu-id="bee77-143">Para una referencia rápida, la función **WSALookupServiceNext** tiene la siguiente sintaxis:</span><span class="sxs-lookup"><span data-stu-id="bee77-143">For quick reference, the **WSALookupServiceNext**, function has the following syntax:</span></span>

``` syntax
INT WSALookupServiceNext(
  HANDLE hLookup,
  DWORD dwControlFlags,
  LPDWORD lpdwBufferLength,
  LPWSAQUERYSET lpqsResults
);
```

<span data-ttu-id="bee77-144">El parámetro *lLookup* es el identificador de búsqueda devuelto de la llamada anterior a la función [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) .</span><span class="sxs-lookup"><span data-stu-id="bee77-144">The *lLookup* parameter is the lookup handle returned from the previous call to the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function.</span></span>

<span data-ttu-id="bee77-145">El parámetro *dwControlFlags* admite las marcas siguientes:</span><span class="sxs-lookup"><span data-stu-id="bee77-145">The *dwControlFlags* parameter supports the following flags:</span></span>

<dl> <span data-ttu-id="bee77-146">\_nombre devuelto de LUP \_</span><span class="sxs-lookup"><span data-stu-id="bee77-146">LUP\_RETURN\_NAME</span></span>  
<span data-ttu-id="bee77-147">LUP \_ Comentario devuelto \_</span><span class="sxs-lookup"><span data-stu-id="bee77-147">LUP\_RETURN\_COMMENT</span></span>  
<span data-ttu-id="bee77-148">LUP \_ devolver \_ BLOB</span><span class="sxs-lookup"><span data-stu-id="bee77-148">LUP\_RETURN\_BLOB</span></span>  
<span data-ttu-id="bee77-149">LUP \_ devolver \_ todo</span><span class="sxs-lookup"><span data-stu-id="bee77-149">LUP\_RETURN\_ALL</span></span>  
<span data-ttu-id="bee77-150">LUP \_ FLUSHPREVIOUS</span><span class="sxs-lookup"><span data-stu-id="bee77-150">LUP\_FLUSHPREVIOUS</span></span>  
</dl>

<span data-ttu-id="bee77-151">Estas marcas son independientes de las marcas admitidas en la llamada a la función [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) .</span><span class="sxs-lookup"><span data-stu-id="bee77-151">These flags are independent of the flags supported in the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function call.</span></span> <span data-ttu-id="bee77-152">Tenga en cuenta que las restricciones especificadas en la llamada anterior a la función **WSALookupServiceBegin** restringen la búsqueda; la adición de marcas con la función [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) en un intento de ampliar la consulta más allá de las restricciones especificadas en la llamada a **WSALookupServiceBegin** se pasa por alto de forma silenciosa.</span><span class="sxs-lookup"><span data-stu-id="bee77-152">Note that any constraints specified in the previous call to the **WSALookupServiceBegin** function constrain the lookup; adding flags with the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function in an attempt to broaden the query beyond the constraints specified in the **WSALookupServiceBegin** call are silently ignored.</span></span> <span data-ttu-id="bee77-153">Sin embargo, se permite especificar un conjunto de marcas más restrictivo que el especificado en la llamada **WSALookupServiceBegin** .</span><span class="sxs-lookup"><span data-stu-id="bee77-153">Specifying a more restrictive set of flags than that specified in the **WSALookupServiceBegin** call, however, is allowed.</span></span>

<span data-ttu-id="bee77-154">Si la red detallada en *lpqsResults* es una red activa, se anexa una serie de estructuras de **\_ blobs NLA** tal como se especifica en el miembro **lpBlob** de la estructura [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) devuelta en *lpqsResults*.</span><span class="sxs-lookup"><span data-stu-id="bee77-154">If the network detailed in *lpqsResults* is an active network, a series of **NLA\_BLOB** structures is appended as specified in the **lpBlob** member of the [**WSAQUERYSET**](/windows/desktop/api/Winsock2/ns-winsock2-wsaquerysetw) structure returned in *lpqsResults*.</span></span> <span data-ttu-id="bee77-155">Estas estructuras de **\_ blobs NLA** se pueden encadenar y se pueden enumerar recorriendo la lista mientras que NLA \_ BLOB. header. nextOffset es distinto de cero.</span><span class="sxs-lookup"><span data-stu-id="bee77-155">These **NLA\_BLOB** structures may be chained, and can be enumerated by traversing the list while NLA\_BLOB.header.nextOffset is nonzero.</span></span> <span data-ttu-id="bee77-156">Para obtener los resultados de toda la información de ubicación de red, siga llamando a [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), función hasta que \_ \_ no \_ se devuelva el error WSA E, tal como se explica en la página de referencia de **WSALookupServiceNext**.</span><span class="sxs-lookup"><span data-stu-id="bee77-156">To obtain results for all network location information, continue calling the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function until the WSA\_E\_NO\_MORE error is returned, as explained in the **WSALookupServiceNext**, reference page.</span></span>

<span data-ttu-id="bee77-157">La función [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) también se utiliza junto con la función [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) para recibir la notificación de cambios en la red.</span><span class="sxs-lookup"><span data-stu-id="bee77-157">The [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function is also used in conjunction with the [**WSANSPIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsanspioctl) function to receive notification of network changes.</span></span> <span data-ttu-id="bee77-158">Vea la [notificación de NLA](notification-from-nla-2.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="bee77-158">See [Notification from NLA](notification-from-nla-2.md) for more information.</span></span>

<span data-ttu-id="bee77-159">NLA devuelve cero tras una finalización correcta.</span><span class="sxs-lookup"><span data-stu-id="bee77-159">NLA returns zero upon successful completion.</span></span> <span data-ttu-id="bee77-160">Los clientes de NLA deben seguir llamando a [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), función hasta \_ que \_ \_ se devuelva WSA E, lo que indica que se ha devuelto toda la información sobre las redes disponibles.</span><span class="sxs-lookup"><span data-stu-id="bee77-160">Clients of NLA should continue calling the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function until WSA\_E\_NO\_MORE is returned, indicating that all of the information about available networks has been returned.</span></span>

<span data-ttu-id="bee77-161">De lo contrario, al llamar a la función [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta)para NLA, se admiten los siguientes códigos de error.</span><span class="sxs-lookup"><span data-stu-id="bee77-161">Otherwise, calling the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta), function for NLA supports the following error codes.</span></span>

| <span data-ttu-id="bee77-162">Error</span><span class="sxs-lookup"><span data-stu-id="bee77-162">Error</span></span>                    | <span data-ttu-id="bee77-163">Significado</span><span class="sxs-lookup"><span data-stu-id="bee77-163">Meaning</span></span>                                                                                                                                                                                                                                                                                                                                                                                                     |
|--------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bee77-164">WSANOTINITIALISED</span><span class="sxs-lookup"><span data-stu-id="bee77-164">WSANOTINITIALISED</span></span>        | <span data-ttu-id="bee77-165">No se realizó una llamada correcta a la función [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) que no se ha inicializado NLA.</span><span class="sxs-lookup"><span data-stu-id="bee77-165">A successful call to the [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) function that initialized NLA was not performed.</span></span>                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="bee77-166">\_identificador no válido de WSA \_</span><span class="sxs-lookup"><span data-stu-id="bee77-166">WSA\_INVALID\_HANDLE</span></span>     | <span data-ttu-id="bee77-167">El identificador de búsqueda proporcionado en el parámetro *BUSCARH* no era un identificador de SP NLA válido.</span><span class="sxs-lookup"><span data-stu-id="bee77-167">The lookup handle provided in the *hLookup* parameter was not a valid NLA SP handle.</span></span> <span data-ttu-id="bee77-168">Los clientes deben llamar primero a la función [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) y recibir un identificador de SP NLA válido para obtener los resultados de la consulta.</span><span class="sxs-lookup"><span data-stu-id="bee77-168">Clients must first call the [**WSALookupServiceBegin**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicebegina) function and receive a valid NLA SP handle to obtain query results.</span></span>                                                                                                                                                               |
| <span data-ttu-id="bee77-169">WSAESYSNOTREADY</span><span class="sxs-lookup"><span data-stu-id="bee77-169">WSAESYSNOTREADY</span></span>          | <span data-ttu-id="bee77-170">El servicio NLA no está disponible para procesar esta solicitud.</span><span class="sxs-lookup"><span data-stu-id="bee77-170">The NLA service is unavailable to process this request.</span></span>                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="bee77-171">WSAEFAULT</span><span class="sxs-lookup"><span data-stu-id="bee77-171">WSAEFAULT</span></span>                | <span data-ttu-id="bee77-172">El tamaño de búfer especificado en el parámetro *lpdwBufferLength* era insuficiente para contener los resultados a los que apunta *lpqsResults*.</span><span class="sxs-lookup"><span data-stu-id="bee77-172">The buffer size specified in the *lpdwBufferLength* parameter was insufficient to hold the results pointed to by *lpqsResults*.</span></span> <span data-ttu-id="bee77-173">El búfer necesario se especifica en *lpdwBufferLength*; Si el cliente no puede proporcionar un búfer suficientemente grande, el cliente puede llamar a la función [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) con *DWCONTROLFLAGS* establecido en LUP \_ FLUSHPREVIOUS para omitir la entrada.</span><span class="sxs-lookup"><span data-stu-id="bee77-173">The required buffer is specified in *lpdwBufferLength*; if the client cannot supply a sufficiently large buffer, the client can call the [**WSALookupServiceNext**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupservicenexta) function with *dwControlFlags* set to LUP\_FLUSHPREVIOUS to skip the entry.</span></span> |
| <span data-ttu-id="bee77-174">WSA \_ no \_ hay suficiente \_ memoria</span><span class="sxs-lookup"><span data-stu-id="bee77-174">WSA\_NOT\_ENOUGH\_MEMORY</span></span> | <span data-ttu-id="bee77-175">NLA no puede obtener información de red del servicio de sistema NLA debido a que no hay memoria suficiente en el proceso de llamada.</span><span class="sxs-lookup"><span data-stu-id="bee77-175">NLA is unable to obtain network information from the NLA system service due to insufficient memory in the calling process.</span></span>                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="bee77-176">WSA \_ E \_ no \_ más</span><span class="sxs-lookup"><span data-stu-id="bee77-176">WSA\_E\_NO\_MORE</span></span>         | <span data-ttu-id="bee77-177">No hay ninguna red adicional que enumerar para la consulta.</span><span class="sxs-lookup"><span data-stu-id="bee77-177">There are no additional networks to enumerate for the query.</span></span>                                                                                                                                                                                                                                                                                                                                                |



 

## <a name="step-3-terminate-the-query"></a><span data-ttu-id="bee77-178">Paso 3: finalizar la consulta</span><span class="sxs-lookup"><span data-stu-id="bee77-178">Step 3: Terminate the Query</span></span>

<span data-ttu-id="bee77-179">Cuando se completan todas las consultas a NLA y una aplicación ya no requiere el uso de NLA, se debe realizar una llamada a la función [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="bee77-179">When all queries to NLA are complete and an application no longer requires use of NLA, a call to the [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) function should be made.</span></span> <span data-ttu-id="bee77-180">No llame a **WSALookupServiceEnd** si la aplicación va a recibir la notificación de cambios basada en la consulta enviada.</span><span class="sxs-lookup"><span data-stu-id="bee77-180">Do not call **WSALookupServiceEnd** if the application will receive change notification based on the submitted query.</span></span> <span data-ttu-id="bee77-181">Consulte [notificación desde NLA](notification-from-nla-2.md) para obtener más información sobre la recepción de notificaciones.</span><span class="sxs-lookup"><span data-stu-id="bee77-181">See [Notification from NLA](notification-from-nla-2.md) for more information on receiving notification.</span></span> <span data-ttu-id="bee77-182">Como la mayoría de los proveedores de servicios de Windows Sockets, NLA mantiene un recuento de referencias para sus clientes.</span><span class="sxs-lookup"><span data-stu-id="bee77-182">Like most Windows Sockets service providers, NLA maintains a reference count for its clients.</span></span> <span data-ttu-id="bee77-183">La llamada a la función **WSALookupServiceEnd** cuando se completan las consultas a NLA habilita los recursos del sistema que NLA ya no necesita para liberarlos.</span><span class="sxs-lookup"><span data-stu-id="bee77-183">Calling the **WSALookupServiceEnd** function when queries to NLA are completed enables system resources no longer required by NLA to be freed.</span></span>

<span data-ttu-id="bee77-184">NLA admite los siguientes códigos de error para las llamadas a funciones [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="bee77-184">NLA supports the following error codes for [**WSALookupServiceEnd**](/windows/desktop/api/Winsock2/nf-winsock2-wsalookupserviceend) function calls.</span></span>

| <span data-ttu-id="bee77-185">Error</span><span class="sxs-lookup"><span data-stu-id="bee77-185">Error</span></span>                | <span data-ttu-id="bee77-186">Significado</span><span class="sxs-lookup"><span data-stu-id="bee77-186">Meaning</span></span>                                                                                                   |
|----------------------|-----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bee77-187">WSANOTINITIALISED</span><span class="sxs-lookup"><span data-stu-id="bee77-187">WSANOTINITIALISED</span></span>    | <span data-ttu-id="bee77-188">No se realizó una llamada correcta a la función [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) para inicializar NLA.</span><span class="sxs-lookup"><span data-stu-id="bee77-188">A successful call to the [**WSAStartup**](/windows/desktop/api/winsock/nf-winsock-wsastartup) function to initialize NLA was not performed.</span></span> |
| <span data-ttu-id="bee77-189">\_identificador no válido de WSA \_</span><span class="sxs-lookup"><span data-stu-id="bee77-189">WSA\_INVALID\_HANDLE</span></span> | <span data-ttu-id="bee77-190">El identificador proporcionado en el parámetro *BUSCARH* no era un identificador SP de NLA válido.</span><span class="sxs-lookup"><span data-stu-id="bee77-190">The handle provided in the *hLookup* parameter was not a valid NLA SP handle.</span></span>                             |



 

 

 



