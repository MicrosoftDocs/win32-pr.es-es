---
title: Prácticas recomendadas al usar BITS
description: Esta sección contiene información que debe tener en cuenta al diseñar una aplicación que usa BITS.
ms.assetid: f4a09a80-2a85-4b59-b0fd-c23c128973f7
ms.topic: article
ms.date: 7/12/2019
ms.openlocfilehash: bbf69e75b99994eea3e8986d1be9920ff1a12bc5
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "103993997"
---
# <a name="best-practices-when-using-bits"></a><span data-ttu-id="e3d4f-103">Prácticas recomendadas al usar BITS</span><span class="sxs-lookup"><span data-stu-id="e3d4f-103">Best Practices When Using BITS</span></span>

<span data-ttu-id="e3d4f-104">Esta sección contiene información que debe tener en cuenta al diseñar una aplicación que usa BITS.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-104">This section contains information you should consider when designing an application that uses BITS.</span></span>

## <a name="user-context-or-service-context"></a><span data-ttu-id="e3d4f-105">Contexto de usuario o de servicio</span><span class="sxs-lookup"><span data-stu-id="e3d4f-105">User context or service context</span></span>

<span data-ttu-id="e3d4f-106">BITS transfiere archivos solo cuando el propietario del trabajo inicia sesión en el equipo (el usuario debe haber iniciado sesión de forma interactiva).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-106">BITS transfers files only when the job's owner is logged on to the computer (the user must have logged on interactively).</span></span> <span data-ttu-id="e3d4f-107">BITS no admite el comando **runas** .</span><span class="sxs-lookup"><span data-stu-id="e3d4f-107">BITS does not support the **RunAs** command.</span></span> <span data-ttu-id="e3d4f-108">Para obtener más información, consulte [usuarios y conexiones de red](users-and-network-connections.md).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-108">For more details, see [Users and Network Connections](users-and-network-connections.md).</span></span>

<span data-ttu-id="e3d4f-109">Si no necesita el contexto de un usuario para su aplicación, considere la posibilidad de escribir en su lugar un servicio que se ejecute como LocalSystem, LocalService o NetworkService.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-109">If you do not require a user's context for your application, consider writing a service running as LocalSystem, LocalService, or NetworkService instead.</span></span> <span data-ttu-id="e3d4f-110">Estas cuentas del sistema siempre inician sesión, por lo que la transferencia no está sujeta a un cierre de sesión del usuario.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-110">These system accounts are always logged on, so the transfer is not subject to a user logging off.</span></span> <span data-ttu-id="e3d4f-111">Sin embargo, si suplanta a un usuario al crear el trabajo, se aplican las reglas de inicio de sesión interactivo.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-111">However, if you impersonate a user when you create the job, the interactive logon rules apply.</span></span> <span data-ttu-id="e3d4f-112">Para obtener más información, consulte [cuentas de servicio y bits](service-accounts-and-bits.md).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-112">For more details, see [Service Accounts and BITS](service-accounts-and-bits.md).</span></span>

## <a name="jobs-are-persistent"></a><span data-ttu-id="e3d4f-113">Los trabajos son persistentes</span><span class="sxs-lookup"><span data-stu-id="e3d4f-113">Jobs are persistent</span></span>

<span data-ttu-id="e3d4f-114">Los trabajos permanecen en la cola hasta que se llama al método [**IBackgroundCopyJob:: Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) o [**IBackgroundCopyJob:: CANCEL**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) .</span><span class="sxs-lookup"><span data-stu-id="e3d4f-114">Jobs remain in the queue until you call the [**IBackgroundCopyJob::Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) or [**IBackgroundCopyJob::Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) method.</span></span> <span data-ttu-id="e3d4f-115">Los archivos del trabajo no están disponibles para el usuario hasta que se llama a **Complete**.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-115">The files in the job are not available to the user until you call **Complete**.</span></span> <span data-ttu-id="e3d4f-116">Normalmente, se llama a **Complete** cuando el estado del trabajo es **\_ \_ \_ transferencia de estado del trabajo de BG** y se llama a **Cancel** cuando el trabajo se encuentra en estado de **trabajo de BG \_ \_ \_ \_ error transitorio** o estado de **\_ \_ \_ error de estado de trabajo de BG** y ya no puede progresar.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-116">Typically, you call **Complete** when the state of the job is **BG\_JOB\_STATE\_TRANSFERRED**, and you call **Cancel** when the job is in the **BG\_JOB\_STATE\_TRANSIENT\_ERROR** or **BG\_JOB\_STATE\_ERROR** state and can no longer make progress.</span></span>

<span data-ttu-id="e3d4f-117">Si no llama al método [**Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) o al método [**Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) en 90 días (el valor predeterminado [valor jobinactivitytimeout](group-policies.md) Directiva de grupo), el servicio cancela el trabajo.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-117">If you do not call the [**Complete**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-complete) method or the [**Cancel**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-cancel) method within 90 days (default [JobInactivityTimeout](group-policies.md) Group Policy), the service cancels the job.</span></span> <span data-ttu-id="e3d4f-118">Siempre debe llamar al método **Complete** o **Cancel** y no confiar en la Directiva valor jobinactivitytimeout para limpiar los trabajos.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-118">You should always call the **Complete** or the **Cancel** method and not rely on the JobInactivityTimeout policy to cleanup your jobs.</span></span> <span data-ttu-id="e3d4f-119">Los trabajos que quedan en la cola pueden impedir que los usuarios creen otros trabajos si se alcanza el límite de la Directiva MaxJobsPerUser o MaxJobsPerMachine.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-119">Jobs left in the queue may prevent users from creating other jobs if the MaxJobsPerUser or MaxJobsPerMachine policy limit is reached.</span></span>

## <a name="when-to-use-foreground-or-background-priority"></a><span data-ttu-id="e3d4f-120">Cuándo usar la prioridad de primer o segundo plano</span><span class="sxs-lookup"><span data-stu-id="e3d4f-120">When to use foreground or background priority</span></span>

<span data-ttu-id="e3d4f-121">A menos que el trabajo sea crítico para el tiempo o el usuario esté esperando de forma activa, siempre debe usar una prioridad de fondo.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-121">Unless the job is time critical or the user is actively waiting, you should always use a background priority.</span></span> <span data-ttu-id="e3d4f-122">Sin embargo, hay ocasiones en las que puede que desee cambiar de la prioridad de fondo a la prioridad de primer plano, por ejemplo, cuando el proxy o el servidor no admiten el encabezado Content-Range, o el software antivirus en el cliente quita la solicitud de encabezado de intervalo.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-122">However, there are times when you may want to switch from background priority to foreground priority, for example, when the proxy or server does not support the Content-Range header, or antivirus software on the client removes the range header request.</span></span> <span data-ttu-id="e3d4f-123">Cambiar a la prioridad de primer plano solo funciona con los archivos cuyo tamaño de archivo sea inferior a 2 GB.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-123">Switching to foreground priority works only for those files whose file size is less than 2 GB.</span></span> <span data-ttu-id="e3d4f-124">Para obtener un ejemplo, vea la implementación de para el método [**IBackgroundCopyCallback:: JobError**](/windows/desktop/api/Bits/nn-bits-ibackgroundcopycallback) .</span><span class="sxs-lookup"><span data-stu-id="e3d4f-124">For an example, see the implementation for the [**IBackgroundCopyCallback::JobError**](/windows/desktop/api/Bits/nn-bits-ibackgroundcopycallback) method.</span></span> <span data-ttu-id="e3d4f-125">Tenga en cuenta también que si el trabajo en primer plano se interrumpe debido a una desconexión de la red o el usuario cierra la sesión, el trabajo producirá un error porque BITS enviará una solicitud de intervalo para intentar reiniciar la transferencia desde donde se quedó.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-125">Also note that if the foreground job is then interrupted due to a network disconnect or the user logging off, the job will fail because BITS will send a range request to try to restart the transfer from where it left off.</span></span>

<span data-ttu-id="e3d4f-126">A partir de Windows 8, debe configurar los trabajos de descarga con el **\_ \_ \_ \_ contenido dinámico** de la propiedad de trabajo de bits y la prioridad del trabajo de BG en **\_ \_ \_ primer plano** cuando los servidores de destino no cumplen los [requisitos de http para las descargas de bits](http-requirements-for-bits-downloads.md).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-126">Starting with Windows 8, you should configure download jobs with **BITS\_JOB\_PROPERTY\_DYNAMIC\_CONTENT** and **BG\_JOB\_PRIORITY\_FOREGROUND** when targeting servers that do not meet the [HTTP Requirements for BITS Downloads](http-requirements-for-bits-downloads.md).</span></span> <span data-ttu-id="e3d4f-127">Tenga en cuenta que esto hará que BITS tenga que reiniciar la descarga desde el principio si alguna vez se interrumpe (por ejemplo, debido a problemas de conectividad o al reinicio del sistema).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-127">Bear in mind that this will result in BITS having to restart the download from the beginning if it ever gets interrupted (for example, due to connectivity issues or system reboot).</span></span>

<span data-ttu-id="e3d4f-128">Para obtener información sobre las prioridades disponibles y el modo en que BITS usa el nivel de prioridad para programar trabajos, vea [**BG \_ Job \_ Priority**](/windows/desktop/api/Bits/ne-bits-bg_job_priority).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-128">For information on the available priorities and how BITS uses the priority level to schedule jobs, see [**BG\_JOB\_PRIORITY**](/windows/desktop/api/Bits/ne-bits-bg_job_priority).</span></span>

## <a name="transient-and-fatal-errors"></a><span data-ttu-id="e3d4f-129">Errores transitorios y graves</span><span class="sxs-lookup"><span data-stu-id="e3d4f-129">Transient and fatal errors</span></span>

<span data-ttu-id="e3d4f-130">Algunos errores son recuperables y otros no.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-130">Some errors are recoverable and some are not.</span></span> <span data-ttu-id="e3d4f-131">Por ejemplo, el error "el servidor no está disponible" es un error recuperable y el error "acceso denegado" es un error irrecuperable.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-131">For example, the error "Server is Unavailable" is a recoverable error, and the error "Access Denied" is a fatal error.</span></span> <span data-ttu-id="e3d4f-132">BITS coloca errores recuperables en un estado de error transitorio y vuelve a intentar el trabajo después de un intervalo especificado.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-132">BITS puts recoverable errors in a transient error state and tries the job again after a specified interval.</span></span> <span data-ttu-id="e3d4f-133">Si el trabajo no puede realizar el progreso, BITS mueve el trabajo a un estado de error irrecuperable.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-133">If the job is unable to make progress, BITS moves the job to a fatal error state.</span></span> <span data-ttu-id="e3d4f-134">Use los métodos [**IBackgroundCopyJob:: SetMinimumRetryDelay**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) y [**IBackgroundCopyJob:: SetNoProgressTimeout**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) para controlar el modo en que bits procesa los errores transitorios.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-134">Use the [**IBackgroundCopyJob::SetMinimumRetryDelay**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) and [**IBackgroundCopyJob::SetNoProgressTimeout**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) methods to control how BITS processes transient errors.</span></span>

<span data-ttu-id="e3d4f-135">En el caso de los trabajos en primer plano, debe limitar la cantidad de tiempo que deja que un trabajo permanezca en el estado de error transitorio e intente realizar la recuperación.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-135">For foreground jobs, you should limit the amount of time you let a job stay in the transient error state and try to recover.</span></span> <span data-ttu-id="e3d4f-136">Use el método [**SetNoProgressTimeout**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) para limitar la cantidad de tiempo que un trabajo permanece en el estado de error transitorio o para forzar el trabajo en el estado de error irrecuperable.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-136">Use the [**SetNoProgressTimeout**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setnoprogresstimeout) method to limit the amount of time a job stays in the transient error state or to force the job into the fatal error state.</span></span> <span data-ttu-id="e3d4f-137">Si permite que el trabajo intente la recuperación, debe usar el método [**SetMinimumRetryDelay**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) para establecer el intervalo mínimo de reintentos en 60 segundos o llamar al método [**IBackgroundCopyJob:: resume**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume) para activar el trabajo de nuevo.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-137">If you let the job try to recover, you should use the [**SetMinimumRetryDelay**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setminimumretrydelay) method to set the minimum retry delay to 60 seconds or call the [**IBackgroundCopyJob::Resume**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-resume) method to activate the job again.</span></span>

<span data-ttu-id="e3d4f-138">Para obtener más información, [**consulte \_ \_ Estado del trabajo de BG**](/windows/desktop/api/Bits/ne-bits-bg_job_state), [ciclo de vida de un trabajo de bits](life-cycle-of-a-bits-job.md)y [control de errores](handling-errors.md).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-138">For more information, see [**BG\_JOB\_STATE**](/windows/desktop/api/Bits/ne-bits-bg_job_state), [Life Cycle of a BITS Job](life-cycle-of-a-bits-job.md), and [Handling Errors](handling-errors.md).</span></span>

## <a name="measuring-network-bandwidth-usage"></a><span data-ttu-id="e3d4f-139">Medición del uso del ancho de banda de red</span><span class="sxs-lookup"><span data-stu-id="e3d4f-139">Measuring network bandwidth usage</span></span>

<span data-ttu-id="e3d4f-140">BITS podría usar el adaptador de red del cliente para estimar el ancho de banda de red disponible.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-140">BITS might use the client's network adapter to estimate available network bandwidth.</span></span> <span data-ttu-id="e3d4f-141">Dado que BITS no puede medir el ancho de banda más allá del cliente, BITS puede congestionar el vínculo WAN.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-141">Because BITS is not able to measure bandwidth beyond the client, BITS may congest the WAN link.</span></span> <span data-ttu-id="e3d4f-142">Para reducir la congestión en el vínculo WAN, puede usar la Directiva de grupo **MaxInternetBandwidth** para limitar la cantidad de ancho de banda que usa el cliente.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-142">To reduce congestion on the WAN link, you can use the **MaxInternetBandwidth** group policy to limit the amount of bandwidth that the client uses.</span></span> <span data-ttu-id="e3d4f-143">Para obtener más información, vea [ancho de banda de red](network-bandwidth.md) y directivas de [Grupo](group-policies.md).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-143">For more information, see [Network Bandwidth](network-bandwidth.md) and [Group Policies](group-policies.md).</span></span>

<span data-ttu-id="e3d4f-144">Si está escribiendo una aplicación que muchos clientes usarán para descargar archivos de un servidor determinado, debe considerar un esquema que escalona las solicitudes de descarga para no sobrecargar el servidor con las solicitudes.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-144">If you are writing an application that many clients will use to download files from a given server, you should consider a scheme that staggers the download requests so you do not overload the server with requests.</span></span>

## <a name="setting-credentials-for-proxy-and-server-authentication"></a><span data-ttu-id="e3d4f-145">Establecimiento de credenciales para la autenticación de servidor y proxy</span><span class="sxs-lookup"><span data-stu-id="e3d4f-145">Setting credentials for proxy and server authentication</span></span>

<span data-ttu-id="e3d4f-146">Si espera que el proxy o el servidor requieran credenciales de usuario, debe proporcionar las credenciales a BITS.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-146">If you expect the proxy or server to require user credentials, you must provide the credentials to BITS.</span></span> <span data-ttu-id="e3d4f-147">Para especificar las credenciales, llame al método [**IBackgroundCopyJob2:: SetCredentials**](/windows/desktop/api/Bits1_5/nf-bits1_5-ibackgroundcopyjob2-setcredentials) .</span><span class="sxs-lookup"><span data-stu-id="e3d4f-147">To specify the credentials, call the [**IBackgroundCopyJob2::SetCredentials**](/windows/desktop/api/Bits1_5/nf-bits1_5-ibackgroundcopyjob2-setcredentials) method.</span></span> <span data-ttu-id="e3d4f-148">BITS admite esquemas de autenticación Basic, Digest, Negotiate, NTLM y Passport.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-148">BITS supports Basic, Digest, Negotiate, NTLM, and Passport authentication schemes.</span></span>

<span data-ttu-id="e3d4f-149">Para obtener más información sobre la autenticación, vea [autenticación](authentication.md).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-149">For details on authentication, see [Authentication](authentication.md).</span></span>

## <a name="specifying-proxy-settings-for-user-accounts-and-service-accounts"></a><span data-ttu-id="e3d4f-150">Especificación de la configuración de proxy para cuentas de usuario y cuentas de servicio</span><span class="sxs-lookup"><span data-stu-id="e3d4f-150">Specifying proxy settings for user accounts and service accounts</span></span>

<span data-ttu-id="e3d4f-151">De forma predeterminada, BITS usa la configuración de proxy de Internet Explorer del usuario.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-151">By default, BITS uses the user's Internet Explorer proxy settings.</span></span> <span data-ttu-id="e3d4f-152">Para invalidar la configuración de proxy de Internet Explorer del usuario, llame al método [**IBackgroundCopyJob:: SetProxySettings**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setproxysettings) .</span><span class="sxs-lookup"><span data-stu-id="e3d4f-152">To override the user's Internet Explorer proxy settings, call the [**IBackgroundCopyJob::SetProxySettings**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setproxysettings) method.</span></span>

<span data-ttu-id="e3d4f-153">La configuración de proxy de Internet Explorer no se aplica a las cuentas del sistema, por lo que el comportamiento del proxy predeterminado (**\_ \_ \_ \_ preconfiguración de uso del proxy de trabajo de BG**) solo funcionará correctamente en las implementaciones del Protocolo de detección automática de proxy web (WPAD), a menos que se lleven a cabo pasos de configuración adicionales.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-153">The Internet Explorer proxy settings do not apply to system accounts, so the default proxy behavior (**BG\_JOB\_PROXY\_USAGE\_PRECONFIG**) will only work correctly in Web Proxy Auto-Discovery Protocol (WPAD) deployments, unless additional configuration steps are taken.</span></span> <span data-ttu-id="e3d4f-154">Si la aplicación es un servicio que se ejecuta como LocalSystem, LocalService o NetworkService, considere la posibilidad de configurar un token auxiliar en los trabajos de BITS o establecer explícitamente la configuración de proxy correcta mediante una llamada a [**IBackgroundCopyJob:: SetProxySettings**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setproxysettings) con la **\_ \_ \_ \_ invalidación del uso del proxy del trabajo de BG**.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-154">If your application is a service running as LocalSystem, LocalService, or NetworkService, consider configuring a helper token on your BITS jobs, or explicitly setting the correct proxy settings by calling [**IBackgroundCopyJob::SetProxySettings**](/windows/desktop/api/Bits/nf-bits-ibackgroundcopyjob-setproxysettings) with **BG\_JOB\_PROXY\_USAGE\_OVERRIDE**.</span></span> <span data-ttu-id="e3d4f-155">Como alternativa, puede usar los modificadores de **/util/SetIEProxy** de BitsAdmin.exe para establecer la configuración de proxy de Internet Explorer para la cuenta de sistema LocalSystem, LocalService o NetworkService.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-155">As an alternative, you can use the **/Util /SetIEProxy** switches of BitsAdmin.exe to set Internet Explorer proxy settings for the LocalSystem, LocalService, or NetworkService system account.</span></span> <span data-ttu-id="e3d4f-156">Para obtener más información, consulte la [herramienta BitsAdmin](bitsadmin-tool.md).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-156">For details, see [BitsAdmin Tool](bitsadmin-tool.md).</span></span>

<span data-ttu-id="e3d4f-157">BITS no reconoce la configuración de proxy que se establece mediante el archivo de Proxycfg.exe.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-157">BITS does not recognize the proxy settings that are set using the Proxycfg.exe file.</span></span>

<span data-ttu-id="e3d4f-158">A partir de la actualización 2018 de octubre de Windows 10 (10,0; Compilación 17763), BITS usa el mismo orden de proxy que usa WinHttp con AUTOMATIC_PROXY.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-158">Starting with the Windows 10 October 2018 Update (10.0; Build 17763), BITS uses the same proxy order that WinHttp uses with AUTOMATIC_PROXY.</span></span> <span data-ttu-id="e3d4f-159">BITS usa este orden más compatible cuando se especifica BG_JOB_PROXY_USAGE_PRECONFIG.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-159">BITS uses this more compatible ordering when BG_JOB_PROXY_USAGE_PRECONFIG is specified.</span></span> <span data-ttu-id="e3d4f-160">BG_JOB_PROXY_USAGE_PRECONFIG es el valor predeterminado para especificar el proxy HTTP.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-160">BG_JOB_PROXY_USAGE_PRECONFIG is the default value for specifying the HTTP proxy.</span></span>

## <a name="specifying-user-specific-settings-for-authenticating-proxies"></a><span data-ttu-id="e3d4f-161">Especificar la configuración específica del usuario para autenticar servidores proxy</span><span class="sxs-lookup"><span data-stu-id="e3d4f-161">Specifying user-specific settings for authenticating proxies</span></span>

<span data-ttu-id="e3d4f-162">Si usa BITS en un entorno que requiere autenticación de proxy mientras se ejecuta como una cuenta sin credenciales NTLM o Kerberos que se pueden usar en el dominio de red del equipo, debe realizar pasos adicionales para autenticarse correctamente mediante el uso de las credenciales de otra cuenta de usuario que tenga credenciales en el dominio.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-162">If you are using BITS in an environment that requires proxy authentication while running as an account without usable NTLM or Kerberos credentials in the machine's network domain, you must take extra steps to authenticate properly by using the credentials of another user account that does have credentials on the domain.</span></span> <span data-ttu-id="e3d4f-163">Se trata de un escenario típico en el que el código BITS se ejecuta como un servicio del sistema como LocalService, NetworkService o LocalSystem, ya que esas cuentas no tienen credenciales NTLM o Kerberos que se puedan usar.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-163">This is a typical scenario when your BITS code is running as a system service such as LocalService, NetworkService, or LocalSystem, as those accounts do not have usable NTLM or Kerberos credentials.</span></span>

<span data-ttu-id="e3d4f-164">Para obtener más información sobre cómo funciona la autenticación en este escenario, vea [autenticación.](authentication.md)</span><span class="sxs-lookup"><span data-stu-id="e3d4f-164">For details on how authentication works in this scenario, see [Authentication.](authentication.md)</span></span>

## <a name="scalability"></a><span data-ttu-id="e3d4f-165">Escalabilidad</span><span class="sxs-lookup"><span data-stu-id="e3d4f-165">Scalability</span></span>

<span data-ttu-id="e3d4f-166">Si hay más de 100 trabajos en la cola, el rendimiento puede empezar a disminuir en función de la composición del trabajo.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-166">If more than 100 jobs are in the queue, performance may start to decrease depending on the composition of the job.</span></span> <span data-ttu-id="e3d4f-167">BITS usa la configuración de directiva [MaxJobsPerMachine](group-policies.md) para imponer un límite máximo en el número de trabajos de la cola.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-167">BITS uses the [MaxJobsPerMachine](group-policies.md) policy setting to impose a hard limit on the number of jobs in the queue.</span></span> <span data-ttu-id="e3d4f-168">Las aplicaciones deben limitar el número de trabajos a aproximadamente 10, de modo que varias aplicaciones tengan menos posibilidades de superar la directriz 100-Job.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-168">Applications should limit the number of their jobs to about 10, so that multiple applications will have less of a chance of exceeding the 100-job guideline.</span></span> <span data-ttu-id="e3d4f-169">Normalmente, una aplicación con un gran número de trabajos que se van a enviar enviará primero 10 trabajos y, a continuación, enviará uno cada vez a medida que cada trabajo finalice.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-169">Typically, an application with a large number of jobs to submit would first submit 10 jobs and then submit one at a time as each job finishes.</span></span>

<span data-ttu-id="e3d4f-170">El número de archivos del trabajo también debe estar limitado a un máximo de 10 archivos.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-170">The number of files in the job should also be limited to a maximum of 10 files.</span></span> <span data-ttu-id="e3d4f-171">Si desea transferir un gran número de archivos para un trabajo, considere la posibilidad de crear en su lugar un archivo. CAB que contenga todos los archivos.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-171">If you want to transfer a large number of files for a job, consider creating a CAB file that contains all the files instead.</span></span>

## <a name="http-headers-can-be-in-any-case"></a><span data-ttu-id="e3d4f-172">Los encabezados HTTP pueden estar en cualquier caso</span><span class="sxs-lookup"><span data-stu-id="e3d4f-172">HTTP Headers can be in any case</span></span>

<span data-ttu-id="e3d4f-173">Los estándares HTTP siempre han explicado que los encabezados HTTP deben tratarse sin distinción de mayúsculas y minúsculas (sección 3,2 de RFC 7230).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-173">The HTTP standards have always said that HTTP headers must be treated as case-insensitive (RFC 7230 section 3.2).</span></span> <span data-ttu-id="e3d4f-174">El estándar HTTP más reciente, RFC 7540, va más allá y indica que el tráfico HTTP/2 debe comparar los encabezados sin distinguir entre mayúsculas y minúsculas, y debe presentar los encabezados en minúsculas (RFC 6540, sección 8.1.2).</span><span class="sxs-lookup"><span data-stu-id="e3d4f-174">The most recent HTTP standard, RFC 7540, goes further and says that HTTP/2 traffic must compare the headers as case-insensitive and must present headers in lower case (RFC 6540, section 8.1.2).</span></span> <span data-ttu-id="e3d4f-175">Incluso cuando el tráfico se envía con encabezados que no están en minúsculas, los proxies pueden optar por forzar los encabezados a minúsculas.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-175">Even when traffic is sent with non lower-case headers, proxies may well choose to force the headers to lower-case.</span></span>

## <a name="avoiding-personally-identifiable-information-pii"></a><span data-ttu-id="e3d4f-176">Evitar la información de identificación personal (PII)</span><span class="sxs-lookup"><span data-stu-id="e3d4f-176">Avoiding personally identifiable information (PII)</span></span>

<span data-ttu-id="e3d4f-177">Los trabajos de BITS que incluyen el nombre para mostrar del trabajo y la descripción y los nombres de archivo son visibles para todos los usuarios con privilegios de administrador.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-177">BITS jobs including the job display name and description and file names are visible to all users with admin privileges.</span></span> <span data-ttu-id="e3d4f-178">También se pueden agregar a la telemetría de Windows.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-178">They may also be added to Windows Telemetry.</span></span> <span data-ttu-id="e3d4f-179">Debe evitar incluir datos confidenciales (como el nombre del usuario) en los detalles del trabajo.</span><span class="sxs-lookup"><span data-stu-id="e3d4f-179">You should avoid putting sensitive data (like the user's own name) in the job details.</span></span>
