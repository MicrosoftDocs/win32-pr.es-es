---
description: Distribuidores de complementos
ms.assetid: 80ff713d-f704-40d3-9317-cbf33d932207
title: Distribuidores de complementos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f7817e5e31b29444cc596b0be583be2198adc018
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "105686328"
---
# <a name="plug-in-distributors"></a><span data-ttu-id="8ec18-103">Distribuidores de complementos</span><span class="sxs-lookup"><span data-stu-id="8ec18-103">Plug-in Distributors</span></span>

<span data-ttu-id="8ec18-104">Los distribuidores de complementos (PID) son una forma de ampliar la funcionalidad del administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="8ec18-104">Plug-in distributors (PIDs) are a way to extend the functionality of the filter graph manager.</span></span> <span data-ttu-id="8ec18-105">Un distribuidor de complementos es un objeto COM que el administrador de gráficos de filtro agrega en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="8ec18-105">A plug-in distributor is a COM object that the filter graph manager aggregates at run time.</span></span> <span data-ttu-id="8ec18-106">Las aplicaciones obtienen acceso al PID a través del administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="8ec18-106">Applications obtain access to the PID through the filter graph manager.</span></span>

<span data-ttu-id="8ec18-107">Cuando se consulta el administrador de gráficos de filtro para una interfaz que no admite, busca una clave en el registro con el siguiente formato:</span><span class="sxs-lookup"><span data-stu-id="8ec18-107">When the filter graph manager is queried for an interface that it does not support, it searches the registry for a key with the following form:</span></span>


```C++
HKEY_CLASSES_ROOT\Interface\IID\Distributor
```



<span data-ttu-id="8ec18-108">`IID` es una cadena que contiene el identificador de interfaz.</span><span class="sxs-lookup"><span data-stu-id="8ec18-108">`IID` is a string containing the interface identifier.</span></span> <span data-ttu-id="8ec18-109">Si existe la entrada del registro, el valor de la entrada define el identificador de clase (CLSID) de un PID que admite la interfaz.</span><span class="sxs-lookup"><span data-stu-id="8ec18-109">If the registry entry exists, the value of the entry defines the class identifier (CLSID) of a PID that supports the interface.</span></span> <span data-ttu-id="8ec18-110">El administrador de gráficos de filtros agrega el PID y devuelve un puntero de interfaz, con lo que actúa como **IUnknown** exterior para el PID.</span><span class="sxs-lookup"><span data-stu-id="8ec18-110">The filter graph manager aggregates the PID and returns an interface pointer, thereby acting as the outer **IUnknown** for the PID.</span></span> <span data-ttu-id="8ec18-111">Cuando la aplicación llama a métodos en la interfaz, realmente los llama en el PID.</span><span class="sxs-lookup"><span data-stu-id="8ec18-111">When the application calls methods on the interface, it is actually calling them on the PID.</span></span> <span data-ttu-id="8ec18-112">Sin embargo, la existencia del PID es transparente para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="8ec18-112">However, the existence of the PID is transparent to the application.</span></span>

<span data-ttu-id="8ec18-113">El término *distribuidor* se deriva del hecho de que un PID puede consultar su puntero **IUnknown** externo para las interfaces en el administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="8ec18-113">The term *distributor* stems from the fact that a PID can query its outer **IUnknown** pointer for interfaces on the filter graph manager.</span></span> <span data-ttu-id="8ec18-114">Al llamar al método [**IFilterGraph:: EnumFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-enumfilters) , el PID puede enumerar los filtros del gráfico y distribuir las llamadas de método a esos filtros.</span><span class="sxs-lookup"><span data-stu-id="8ec18-114">By calling the [**IFilterGraph::EnumFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-enumfilters) method, the PID can enumerate the filters in the graph and distribute method calls to those filters.</span></span> <span data-ttu-id="8ec18-115">De esta manera, un PID puede actuar como un único punto de control para que la aplicación llame a métodos en filtros.</span><span class="sxs-lookup"><span data-stu-id="8ec18-115">In this way, a PID can serve as a single control point for the application to call methods on filters.</span></span>

<span data-ttu-id="8ec18-116">Cuando el administrador de gráficos de filtro agrega un PID, consulta el PID de la interfaz [**IDistributorNotify**](/windows/desktop/api/Strmif/nn-strmif-idistributornotify) .</span><span class="sxs-lookup"><span data-stu-id="8ec18-116">When the filter graph manager aggregates a PID, it queries the PID for the [**IDistributorNotify**](/windows/desktop/api/Strmif/nn-strmif-idistributornotify) interface.</span></span> <span data-ttu-id="8ec18-117">Si el PID es compatible con esta interfaz, el administrador de gráficos de filtros la usa para notificar a los PID los cambios en el gráfico:</span><span class="sxs-lookup"><span data-stu-id="8ec18-117">If the PID supports this interface, the filter graph manager uses it to notify the PID about changes in the graph:</span></span>

-   <span data-ttu-id="8ec18-118">Cuando el gráfico de filtro cambia entre los Estados de ejecución, pausa y detenida, llama a [**IDistributorNotify:: Run**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-run), [**IDistributorNotify::P ause**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-pause)o [**IDistributorNotify:: Stop**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-stop).</span><span class="sxs-lookup"><span data-stu-id="8ec18-118">When the filter graph switches between run, paused, and stopped states, it calls [**IDistributorNotify::Run**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-run), [**IDistributorNotify::Pause**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-pause), or [**IDistributorNotify::Stop**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-stop).</span></span>
-   <span data-ttu-id="8ec18-119">Cuando se establece un reloj de referencia, el administrador de gráficos de filtros llama a [**IDistributorNotify:: SetSyncSource**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-setsyncsource).</span><span class="sxs-lookup"><span data-stu-id="8ec18-119">When a reference clock is set, the filter graph manager calls [**IDistributorNotify::SetSyncSource**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-setsyncsource).</span></span>
-   <span data-ttu-id="8ec18-120">Cuando se agregan o quitan filtros o se cambian las conexiones de PIN, el administrador de gráficos de filtros llama a [**IDistributorNotify:: NotifyGraphChange**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-notifygraphchange).</span><span class="sxs-lookup"><span data-stu-id="8ec18-120">When filters are added or removed, or pin connections are changed, the filter graph manager calls [**IDistributorNotify::NotifyGraphChange**](/windows/desktop/api/Strmif/nf-strmif-idistributornotify-notifygraphchange).</span></span>

<span data-ttu-id="8ec18-121">Para implementar un PID personalizado, cree un objeto COM que admita la agregación.</span><span class="sxs-lookup"><span data-stu-id="8ec18-121">To implement a custom PID, create a COM object that supports aggregation.</span></span> <span data-ttu-id="8ec18-122">Debe ser compatible con una interfaz que no admita el administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="8ec18-122">It must support an interface that the filter graph manager does not already support.</span></span> <span data-ttu-id="8ec18-123">Opcionalmente, puede admitir la interfaz **IDistributorNotify** .</span><span class="sxs-lookup"><span data-stu-id="8ec18-123">Optionally, it can support the **IDistributorNotify** interface.</span></span>

<span data-ttu-id="8ec18-124">Si el PID obtiene todos los punteros de interfaz del administrador de gráficos de filtro, debe liberarlos inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="8ec18-124">If the PID obtains any interface pointers from the filter graph manager, it should release them immediately.</span></span> <span data-ttu-id="8ec18-125">De lo contrario, podría crear un recuento de referencias circulares, lo que podría impedir que se destruyese el administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="8ec18-125">Otherwise, it might create a circular reference count, which could prevent the filter graph manager from being destroyed.</span></span> <span data-ttu-id="8ec18-126">No es necesario mantener un recuento de referencias en el administrador de gráficos de filtro en ningún caso, ya que el administrador de gráficos de filtro controla la duración del PID.</span><span class="sxs-lookup"><span data-stu-id="8ec18-126">Holding a reference count on the filter graph manager is unnecessary in any case, because the filter graph manager controls the PID's lifetime.</span></span>

<span data-ttu-id="8ec18-127">Dado que un PID está diseñado específicamente para la agregación mediante el administrador de gráficos de filtro, es posible que desee aplicar esto en el método de constructor del PID.</span><span class="sxs-lookup"><span data-stu-id="8ec18-127">Because a PID is designed specifically for aggregation by the filter graph manager, you might want to enforce this in the PID's constructor method.</span></span> <span data-ttu-id="8ec18-128">Compruebe si el puntero **IUnknown** externo es **null** y, en caso afirmativo, devuelva el código de error VFW \_ E \_ necesito \_ Owner.</span><span class="sxs-lookup"><span data-stu-id="8ec18-128">Check whether the outer **IUnknown** pointer is **NULL**, and if so, return the error code VFW\_E\_NEED\_OWNER.</span></span> <span data-ttu-id="8ec18-129">(Consulte los [códigos de error y de éxito](error-and-success-codes.md)). Además, para evitar que otros objetos agreguen el PID, puede consultar el puntero **IUnknown** externo de la interfaz [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) .</span><span class="sxs-lookup"><span data-stu-id="8ec18-129">(See [Error and Success Codes](error-and-success-codes.md).) Also, to prevent other objects from aggregating the PID, you can query the outer **IUnknown** pointer for the [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) interface.</span></span> <span data-ttu-id="8ec18-130">Devuelve un código de error si el objeto no expone **IGraphBuilder**.</span><span class="sxs-lookup"><span data-stu-id="8ec18-130">Return an error code if the object does not expose **IGraphBuilder**.</span></span>

 

 



