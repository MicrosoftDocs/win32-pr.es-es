---
title: Portar de Direct3D 11 a Direct3D 12
description: En esta sección se proporcionan instrucciones sobre cómo migrar desde un motor de gráficos de Direct3D 11 personalizado a Direct3D 12.
ms.assetid: 9EB4AC6B-AFDD-4673-8EB3-54272C151784
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 14b5bc6784d6f96c3c1599a601a57bf68b0d612d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104549158"
---
# <a name="porting-from-direct3d-11-to-direct3d-12"></a><span data-ttu-id="5ff43-103">Portar de Direct3D 11 a Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="5ff43-103">Porting from Direct3D 11 to Direct3D 12</span></span>

<span data-ttu-id="5ff43-104">En esta sección se proporcionan instrucciones sobre cómo migrar desde un motor de gráficos de Direct3D 11 personalizado a Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="5ff43-104">This section provides some guidance on porting from a custom Direct3D 11 graphics engine to Direct3D 12.</span></span>

-   [<span data-ttu-id="5ff43-105">Creación de dispositivos</span><span class="sxs-lookup"><span data-stu-id="5ff43-105">Device creation</span></span>](#device-creation)
-   [<span data-ttu-id="5ff43-106">Recursos confirmados</span><span class="sxs-lookup"><span data-stu-id="5ff43-106">Committed resources</span></span>](#committed-resources)
-   [<span data-ttu-id="5ff43-107">Recursos reservados</span><span class="sxs-lookup"><span data-stu-id="5ff43-107">Reserved resources</span></span>](#reserved-resources)
-   [<span data-ttu-id="5ff43-108">Cargar datos</span><span class="sxs-lookup"><span data-stu-id="5ff43-108">Uploading data</span></span>](#uploading-data)
-   [<span data-ttu-id="5ff43-109">Sombreadores y objetos de sombreador</span><span class="sxs-lookup"><span data-stu-id="5ff43-109">Shaders and shader objects</span></span>](#shaders-and-shader-objects)
-   [<span data-ttu-id="5ff43-110">Enviar trabajo a la GPU</span><span class="sxs-lookup"><span data-stu-id="5ff43-110">Submitting work to the GPU</span></span>](#submitting-work-to-the-gpu)
-   [<span data-ttu-id="5ff43-111">Sincronización de CPU/GPU</span><span class="sxs-lookup"><span data-stu-id="5ff43-111">CPU/GPU Synchronization</span></span>](#cpugpu-synchronization)
-   [<span data-ttu-id="5ff43-112">Enlace de recursos</span><span class="sxs-lookup"><span data-stu-id="5ff43-112">Resource Binding</span></span>](#resource-binding)
-   [<span data-ttu-id="5ff43-113">Estado del recurso</span><span class="sxs-lookup"><span data-stu-id="5ff43-113">Resource state</span></span>](#resource-state)
-   [<span data-ttu-id="5ff43-114">Intercambio</span><span class="sxs-lookup"><span data-stu-id="5ff43-114">Swapchains</span></span>](#swapchains)
-   [<span data-ttu-id="5ff43-115">Representación de funciones fijas</span><span class="sxs-lookup"><span data-stu-id="5ff43-115">Fixed function rendering</span></span>](#fixed-function-rendering)
-   [<span data-ttu-id="5ff43-116">Probabilidades y finalización</span><span class="sxs-lookup"><span data-stu-id="5ff43-116">Odds and ends</span></span>](#odds-and-ends)
-   [<span data-ttu-id="5ff43-117">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="5ff43-117">Related topics</span></span>](#related-topics)

## <a name="device-creation"></a><span data-ttu-id="5ff43-118">Creación de dispositivos</span><span class="sxs-lookup"><span data-stu-id="5ff43-118">Device creation</span></span>

<span data-ttu-id="5ff43-119">Tanto Direct3D 11 como Direct3D 12 comparten un patrón de creación de dispositivos como.</span><span class="sxs-lookup"><span data-stu-id="5ff43-119">Both Direct3D 11 and Direct3D 12 share a simliar device creation pattern.</span></span> <span data-ttu-id="5ff43-120">Los controladores de Direct3D 12 existentes son **D3D_FEATURE_LEVEL_11_0** o mejores, por lo que puede omitir los niveles de características más antiguos y los lmitations asociados.</span><span class="sxs-lookup"><span data-stu-id="5ff43-120">Existing Direct3D 12 drivers are all **D3D_FEATURE_LEVEL_11_0** or better, so you can ignore the older feature levels and associated lmitations.</span></span>

<span data-ttu-id="5ff43-121">Tenga en cuenta también que con Direct3D 12, debe enumerar explícitamente la información del dispositivo mediante interfaces de DXGI.</span><span class="sxs-lookup"><span data-stu-id="5ff43-121">Also keep in mind that with Direct3D 12, you should explicitly enumerate device information using DXGI interfaces.</span></span> <span data-ttu-id="5ff43-122">En Direct3D 11, podría *encadenar de nuevo* al dispositivo DXGI desde el dispositivo Direct3D y esto no es compatible con Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="5ff43-122">In Direct3D 11, you could *chain back* to the DXGI device from the Direct3D device, and this is not supported for Direct3D 12.</span></span>

<span data-ttu-id="5ff43-123">La creación de un dispositivo de software dewarp en Direct3D 12 se realiza proporcionando un adaptador explícito Obtenido de **IDXGIFcatory4:: EnumWarpAdapter**.</span><span class="sxs-lookup"><span data-stu-id="5ff43-123">Creating a WARP software device on Direct3D 12 is done by providing an explicit adapter obtained from **IDXGIFcatory4::EnumWarpAdapter**.</span></span> <span data-ttu-id="5ff43-124">El dispositivo WARP para Direct3D 12 solo está disponible en sistemas con la característica opcional **herramientas de gráficos** habilitada.</span><span class="sxs-lookup"><span data-stu-id="5ff43-124">The WARP device for Direct3D 12 is available only on systems with the **Graphics Tools** optional feature enabled.</span></span>

> [!NOTE]
> <span data-ttu-id="5ff43-125">No hay ningún equivalente a **D3D11CreateDeviceAndSwapChain**.</span><span class="sxs-lookup"><span data-stu-id="5ff43-125">There is no equivalent to **D3D11CreateDeviceAndSwapChain**.</span></span> <span data-ttu-id="5ff43-126">Incluso con Direct3D 11, se desaconseja el uso de esta función ya que a menudo es mejor crear el dispositivo y intercambio en pasos distintos.</span><span class="sxs-lookup"><span data-stu-id="5ff43-126">Even with Direct3D 11, we discourage the use of this function as it's often better to create the device and swapchain in distinct steps.</span></span>

## <a name="committed-resources"></a><span data-ttu-id="5ff43-127">Recursos confirmados</span><span class="sxs-lookup"><span data-stu-id="5ff43-127">Committed resources</span></span>

<span data-ttu-id="5ff43-128">Los objetos creados con las siguientes interfaces en Direct3D 11, se traducen a lo que se denominan "recursos asignados" en Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="5ff43-128">Objects created with the following interfaces in Direct3D 11, translate to what are called "committed resources" in Direct3D 12.</span></span> <span data-ttu-id="5ff43-129">Un recurso confirmado es un recurso que tiene asociado tanto el espacio de direcciones virtuales como las páginas físicas.</span><span class="sxs-lookup"><span data-stu-id="5ff43-129">A committed resource is a resource which has both virtual address space and physical pages associated with it.</span></span> <span data-ttu-id="5ff43-130">Este es un concepto del modelo de memoria de controlador de dispositivos de Microsoft Windows 2 (WDD2), en el que se basa Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="5ff43-130">This is a concept of the Microsoft Windows Device Driver 2 (WDD2) Memory Model, on which Direct3D 12 is based.</span></span>

<span data-ttu-id="5ff43-131">Recursos de Direct3D 11:</span><span class="sxs-lookup"><span data-stu-id="5ff43-131">Direct3D 11 resources:</span></span>

-   [<span data-ttu-id="5ff43-132">**ID3D11Resource**</span><span class="sxs-lookup"><span data-stu-id="5ff43-132">**ID3D11Resource**</span></span>](/windows/win32/api/d3d11/nn-d3d11-id3d11resource)
-   <span data-ttu-id="5ff43-133">[**ID3D11Buffer**](/windows/win32/api/d3d11/nn-d3d11-id3d11buffer) y [ **ID3D11Device:: CreateBuffer**](/windows/win32/api/d3d11/nf-d3d11-id3d11device-createbuffer)</span><span class="sxs-lookup"><span data-stu-id="5ff43-133">[**ID3D11Buffer**](/windows/win32/api/d3d11/nn-d3d11-id3d11buffer) and [**ID3D11Device::CreateBuffer**](/windows/win32/api/d3d11/nf-d3d11-id3d11device-createbuffer)</span></span>
-   <span data-ttu-id="5ff43-134">[**ID3D11Texture1D**](/windows/win32/api/d3d11/nn-d3d11-id3d11texture1d) y [ **ID3D11Device: CreateTexture1D**](/windows/win32/api/d3d11/nf-d3d11-id3d11device-createtexture1d)</span><span class="sxs-lookup"><span data-stu-id="5ff43-134">[**ID3D11Texture1D**](/windows/win32/api/d3d11/nn-d3d11-id3d11texture1d) and [**ID3D11Device:CreateTexture1D**](/windows/win32/api/d3d11/nf-d3d11-id3d11device-createtexture1d)</span></span>
-   <span data-ttu-id="5ff43-135">[**ID3D11Texture2D**](/windows/win32/api/d3d11/nn-d3d11-id3d11texture2d) y [ **ID3D11Device:: CreateTexture2D**](/windows/win32/api/d3d11/nf-d3d11-id3d11device-createtexture2d)</span><span class="sxs-lookup"><span data-stu-id="5ff43-135">[**ID3D11Texture2D**](/windows/win32/api/d3d11/nn-d3d11-id3d11texture2d) and [**ID3D11Device::CreateTexture2D**](/windows/win32/api/d3d11/nf-d3d11-id3d11device-createtexture2d)</span></span>
-   <span data-ttu-id="5ff43-136">[**ID3D11Texture3D**](/windows/win32/api/d3d11/nn-d3d11-id3d11texture3d) y [ **ID3D11Device:: CreateTexture3D**](/windows/win32/api/d3d11/nf-d3d11-id3d11device-createtexture3d)</span><span class="sxs-lookup"><span data-stu-id="5ff43-136">[**ID3D11Texture3D**](/windows/win32/api/d3d11/nn-d3d11-id3d11texture3d) and [**ID3D11Device::CreateTexture3D**](/windows/win32/api/d3d11/nf-d3d11-id3d11device-createtexture3d)</span></span>

<span data-ttu-id="5ff43-137">En Direct3D 12, todos se representan mediante [**ID3D12Resource**](/windows/win32/api/d3d12/nn-d3d12-id3d12resource) y [**ID3D12Device:: CreateCommittedResource**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createcommittedresource).</span><span class="sxs-lookup"><span data-stu-id="5ff43-137">In Direct3D 12 these are all represented by [**ID3D12Resource**](/windows/win32/api/d3d12/nn-d3d12-id3d12resource) and [**ID3D12Device::CreateCommittedResource**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createcommittedresource).</span></span>

## <a name="reserved-resources"></a><span data-ttu-id="5ff43-138">Recursos reservados</span><span class="sxs-lookup"><span data-stu-id="5ff43-138">Reserved resources</span></span>

<span data-ttu-id="5ff43-139">Los recursos reservados son recursos donde solo se ha asignado el espacio de direcciones virtuales; la memoria física no se asigna hasta que haya una llamada a [**ID3D12Device:: CreateHeap**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createheap).</span><span class="sxs-lookup"><span data-stu-id="5ff43-139">Reserved resources are resources where only virtual address space has been allocated, physical memory is not allocated until there is a call to [**ID3D12Device::CreateHeap**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createheap).</span></span> <span data-ttu-id="5ff43-140">Este es esencialmente el mismo concepto que los recursos en mosaico en Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="5ff43-140">This is essentially the same concept as tiled resources in Direct3D 11.</span></span>

<span data-ttu-id="5ff43-141">Las marcas ([**\_ \_ \_ marca de recursos varios de D3D11**](/windows/win32/api/d3d11/ne-d3d11-d3d11_resource_misc_flag)) usadas en Direct3D 11 para configurar recursos en mosaico y, a continuación, asignarlas a la memoria física.</span><span class="sxs-lookup"><span data-stu-id="5ff43-141">The flags ([**D3D11\_RESOURCE\_MISC\_FLAG**](/windows/win32/api/d3d11/ne-d3d11-d3d11_resource_misc_flag)) used in Direct3D 11 to set up tiled resources, then map them to physical memory.</span></span>

-   <span data-ttu-id="5ff43-142">\_Recurso D3D11 \_ varios en \_ mosaico</span><span class="sxs-lookup"><span data-stu-id="5ff43-142">D3D11\_RESOURCE\_MISC\_TILED</span></span>
-   <span data-ttu-id="5ff43-143">\_Grupo de \_ iconos de varios recursos \_ de D3D11 \_</span><span class="sxs-lookup"><span data-stu-id="5ff43-143">D3D11\_RESOURCE\_MISC\_TILE\_POOL</span></span>

## <a name="uploading-data"></a><span data-ttu-id="5ff43-144">Cargar datos</span><span class="sxs-lookup"><span data-stu-id="5ff43-144">Uploading data</span></span>

<span data-ttu-id="5ff43-145">En Direct3D 11 hay la apariencia de una sola escala de tiempo (llama a después de una secuencia, como los datos inicializados con los [**\_ \_ datos de subrecurso D3D11**](/windows/win32/api/d3d11/ns-d3d11-d3d11_subresource_data), se realiza una llamada a [**ID3D11DeviceContext:: UpdateSubresource**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-updatesubresource)y, a continuación, una llamada a [**ID3D11DeviceContext:: Map**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-map)).</span><span class="sxs-lookup"><span data-stu-id="5ff43-145">In Direct3D 11 there is the appearance of a single timeline (calls following a sequence, such as data initialized with [**D3D11\_SUBRESOURCE\_DATA**](/windows/win32/api/d3d11/ns-d3d11-d3d11_subresource_data), then a call is made to [**ID3D11DeviceContext::UpdateSubresource**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-updatesubresource), and then a call to [**ID3D11DeviceContext::Map**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-map)).</span></span> <span data-ttu-id="5ff43-146">El número de copias creadas de los datos no es obvio para un desarrollador de Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="5ff43-146">The number of copies created of the data is not obvious to a Direct3D 11 developer.</span></span>

<span data-ttu-id="5ff43-147">En Direct3D 12 hay dos escalas de tiempo: la escala de tiempo de la GPU (configurada mediante llamadas a [**CopyTextureRegion**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copytextureregion)y [**CopyBufferRegion**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copybufferregion) desde la memoria asignable) y la escala de tiempo de la CPU (determinada por las llamadas a [**map**](/windows/win32/api/d3d12/nf-d3d12-id3d12resource-map)).</span><span class="sxs-lookup"><span data-stu-id="5ff43-147">In Direct3D 12 there are two timelines, the GPU timeline (set up by calls to [**CopyTextureRegion**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copytextureregion), and [**CopyBufferRegion**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-copybufferregion) from mappable memory) and the CPU timeline (determined by calls to [**Map**](/windows/win32/api/d3d12/nf-d3d12-id3d12resource-map)).</span></span> <span data-ttu-id="5ff43-148">Se proporcionan funciones auxiliares (en el archivo d3dx12. h) llamadas [**Updatesubresources**](updatesubresources1.md) que usan una escala de tiempo compartida.</span><span class="sxs-lookup"><span data-stu-id="5ff43-148">Helper functions are provided (in the d3dx12.h file) called [**Updatesubresources**](updatesubresources1.md) that use a shared timeline.</span></span> <span data-ttu-id="5ff43-149">Hay varias variaciones de esta función auxiliar, una que usa [**ID3D12Device:: GetCopyableFootprints**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getcopyablefootprints), otra que usa un mecanismo de asignación de montones y otra que usa un mecanismo de asignación de pila.</span><span class="sxs-lookup"><span data-stu-id="5ff43-149">There are several variations of this helper function, one that uses [**ID3D12Device::GetCopyableFootprints**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-getcopyablefootprints), another that uses a heap-allocating mechanism, and another that uses a stack-allocating mechanism.</span></span> <span data-ttu-id="5ff43-150">Estas funciones auxiliares copian recursos en la GPU y la CPU, a través de un área de almacenamiento provisional intermedia de la memoria.</span><span class="sxs-lookup"><span data-stu-id="5ff43-150">These helper functions copy resources to both the GPU and CPU, via an intermediate staging area of memory.</span></span>

<span data-ttu-id="5ff43-151">Normalmente, la GPU y la CPU tienen su propia copia de un recurso enlazada a su propia escala de tiempo.</span><span class="sxs-lookup"><span data-stu-id="5ff43-151">Typically the GPU and CPU each have their own copy of a resource tied to their own timeline.</span></span> <span data-ttu-id="5ff43-152">De forma similar, el enfoque de la escala de tiempo compartida mantiene dos copias.</span><span class="sxs-lookup"><span data-stu-id="5ff43-152">The shared timeline approach similarly maintains two copies.</span></span>

## <a name="shaders-and-shader-objects"></a><span data-ttu-id="5ff43-153">Sombreadores y objetos de sombreador</span><span class="sxs-lookup"><span data-stu-id="5ff43-153">Shaders and shader objects</span></span>

<span data-ttu-id="5ff43-154">En Direct3D 11 hay una gran cantidad de creación de objetos de sombreador y de estado, y el establecimiento del estado de esos objetos mediante los métodos de creación de [**ID3D11Device**](/windows/win32/api/d3d11/nn-d3d11-id3d11device) y los métodos de conjunto de [**ID3D11DeviceContext**](/windows/win32/api/d3d11/nn-d3d11-id3d11devicecontext) .</span><span class="sxs-lookup"><span data-stu-id="5ff43-154">In Direct3D 11 there is a lot of creation of shader and state objects, and setting the state of those objects, using the [**ID3D11Device**](/windows/win32/api/d3d11/nn-d3d11-id3d11device) creation methods and the [**ID3D11DeviceContext**](/windows/win32/api/d3d11/nn-d3d11-id3d11devicecontext) set methods.</span></span> <span data-ttu-id="5ff43-155">Normalmente se realiza un gran número de llamadas a estos métodos, que luego se combinan en el momento de dibujar por el controlador para establecer el estado correcto de la canalización.</span><span class="sxs-lookup"><span data-stu-id="5ff43-155">Typically a large number of calls are made to these methods, which are then combined at draw time by the driver to set the correct pipeline state.</span></span>

<span data-ttu-id="5ff43-156">En Direct3D 12, este valor de estado de la canalización se ha combinado en un único objeto ([**CreateComputePipelineState**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createcomputepipelinestate) para un motor de proceso y [**CreateGraphicsPipelineState**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-creategraphicspipelinestate) para un motor de gráficos), que después se adjunta a una lista de comandos antes de la llamada a Draw con una llamada a [**SetPipelineState**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setpipelinestate).</span><span class="sxs-lookup"><span data-stu-id="5ff43-156">In Direct3D 12 this setting of pipeline state has been combined into a single object ([**CreateComputePipelineState**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createcomputepipelinestate) for a compute engine, and [**CreateGraphicsPipelineState**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-creategraphicspipelinestate) for a graphics engine), which is then attached to a command list before the draw call with a call to [**SetPipelineState**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setpipelinestate).</span></span>

<span data-ttu-id="5ff43-157">Estas llamadas reemplazan todas las llamadas individuales para establecer sombreadores, el diseño de entrada, el estado de Blend, el estado de rasterizador, el estado de estarcido de profundidad, etc., en Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="5ff43-157">These calls replace all the individual calls to set shaders, input layout, blend state, rasterizer state, depth stencil state, and so on, in Direct3D 11</span></span>

- <span data-ttu-id="5ff43-158">Métodos de dispositivo 11: ``CreateInputLayout`` , ``CreateXShader`` , ``CreateDepthStencilState`` , andD ``CreateRasterizerState`` .</span><span class="sxs-lookup"><span data-stu-id="5ff43-158">Device 11 methods: ``CreateInputLayout``, ``CreateXShader``, ``CreateDepthStencilState``, andD ``CreateRasterizerState``.</span></span>
- <span data-ttu-id="5ff43-159">Métodos de contexto de dispositivo 11:  ``IASetInputLayout`` , ``xxSetShader`` , ``OMSetBlendState`` , ``OMSetDepthStencilState`` y ``RSSetState`` .</span><span class="sxs-lookup"><span data-stu-id="5ff43-159">Device Context 11 methods:  ``IASetInputLayout``, ``xxSetShader``, ``OMSetBlendState``, ``OMSetDepthStencilState``, and ``RSSetState``.</span></span>

<span data-ttu-id="5ff43-160">Aunque Direct3D 12 admite blobs compilados más antiguos, los sombreadores se deben compilar con el modelo de sombreador 5,1 con las API de FXC/D3DCompile o con el modelo de sombreador 6 mediante el compilador DXIL DXC.</span><span class="sxs-lookup"><span data-stu-id="5ff43-160">While Direct3D 12 can support older compiled shader blobs, shaders should be built using either Shader Model 5.1 with the FXC/D3DCompile APIs, or using Shader Model 6 using the DXIL DXC compiler.</span></span> <span data-ttu-id="5ff43-161">Debe validar la compatibilidad con el modelo de sombreador 6 con [**CheckFeatureSupport**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-checkfeaturesupport) y **D3D12_FEATURE_SHADER_MODEL**.</span><span class="sxs-lookup"><span data-stu-id="5ff43-161">You should validate Shader Model 6 support with [**CheckFeatureSupport**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-checkfeaturesupport) and **D3D12_FEATURE_SHADER_MODEL**.</span></span>

## <a name="submitting-work-to-the-gpu"></a><span data-ttu-id="5ff43-162">Enviar trabajo a la GPU</span><span class="sxs-lookup"><span data-stu-id="5ff43-162">Submitting work to the GPU</span></span>

<span data-ttu-id="5ff43-163">en Direct3D 11, hay poco control sobre la forma en que se envía el trabajo, que se controla en gran medida por el controlador, aunque algún control se habilita a través de las llamadas [**ID3D11DeviceContext:: Flush**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-flush) y [**IDXGISwapChain1::P resent1**](/windows/win32/api/dxgi1_2/nf-dxgi1_2-idxgiswapchain1-present1) .</span><span class="sxs-lookup"><span data-stu-id="5ff43-163">in Direct3D 11 there is little control over actually how work is submitted, it is largely handled by the driver, though some control is enabled through the [**ID3D11DeviceContext::Flush**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-flush) and [**IDXGISwapChain1::Present1**](/windows/win32/api/dxgi1_2/nf-dxgi1_2-idxgiswapchain1-present1) calls.</span></span>

<span data-ttu-id="5ff43-164">En Direct3D 12, el envío de trabajo es muy explícito y está controlado por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5ff43-164">In Direct3D 12 work submission is very explicit and controlled by the app.</span></span> <span data-ttu-id="5ff43-165">La construcción principal para el trabajo de envío es [**ID3D12GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist), que se usa para registrar todos los comandos de aplicaciones (y es bastante similar en concepto al contexto diferido de ID3D11).</span><span class="sxs-lookup"><span data-stu-id="5ff43-165">The primary construct for submitting work is the [**ID3D12GraphicsCommandList**](/windows/win32/api/d3d12/nn-d3d12-id3d12graphicscommandlist), which is used to record all the apps commands (and is quite similar in concept to the ID3D11 deferred context).</span></span> <span data-ttu-id="5ff43-166">La copia de seguridad de una lista de comandos la proporciona el [**ID3D12CommandAllocator**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandallocator), que permite que la aplicación administre el uso de memoria de la lista de comandos al exponer realmente la memoria que el controlador de Direct3D 12 va a usar para almacenar la lista de comandos.</span><span class="sxs-lookup"><span data-stu-id="5ff43-166">Backing store for a command list is provided by the [**ID3D12CommandAllocator**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandallocator), which enables the app to manage the memory utilization of the command list by actually exposing the memory that the Direct3D 12 driver is going to use to store the command list.</span></span>

<span data-ttu-id="5ff43-167">Por último, [**ID3D12CommandQueue**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandqueue) es una cola primero en salir que almacena el orden correcto de las listas de comandos para su envío a la GPU.</span><span class="sxs-lookup"><span data-stu-id="5ff43-167">Finally the [**ID3D12CommandQueue**](/windows/win32/api/d3d12/nn-d3d12-id3d12commandqueue) is a first-in first-out queue, that stores the correct order of the command lists for submission to the GPU.</span></span> <span data-ttu-id="5ff43-168">Solo cuando se haya completado la ejecución de una lista de comandos en la GPU, el controlador enviará la siguiente lista de comandos de la cola.</span><span class="sxs-lookup"><span data-stu-id="5ff43-168">Only when one command list has completed execution on the GPU, will the next command list from the queue be submitted by the driver.</span></span>

<span data-ttu-id="5ff43-169">En Direct3D 11 no hay ningún concepto explícito de una cola de comandos.</span><span class="sxs-lookup"><span data-stu-id="5ff43-169">In Direct3D 11 there is no explicit concept of a command queue.</span></span> <span data-ttu-id="5ff43-170">En la configuración común de Direct3D 12, la lista de comandos abierta actualmente **D3D12_COMMAND_LIST_TYPE_DIRECT** del marco actual se puede considerar análoga al contexto inmediato de Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="5ff43-170">In the common setup for Direct3D 12, the currently open **D3D12_COMMAND_LIST_TYPE_DIRECT** command list for the current frame can be considered analogous to the Direct3D 11 immediate context.</span></span> <span data-ttu-id="5ff43-171">Esto proporciona muchas de las mismas funciones.</span><span class="sxs-lookup"><span data-stu-id="5ff43-171">This provides many of the same functions.</span></span>


| <span data-ttu-id="5ff43-172">D3D11DeviceContext</span><span class="sxs-lookup"><span data-stu-id="5ff43-172">D3D11DeviceContext</span></span>                  | <span data-ttu-id="5ff43-173">Lista de ID3D12GraphicsCommand</span><span class="sxs-lookup"><span data-stu-id="5ff43-173">ID3D12GraphicsCommand List</span></span>     |
|-------------------------------------|--------------------------------|
| <span data-ttu-id="5ff43-174">ClearDepthStencilView</span><span class="sxs-lookup"><span data-stu-id="5ff43-174">ClearDepthStencilView</span></span>               | <span data-ttu-id="5ff43-175">ClearDepthStencilView</span><span class="sxs-lookup"><span data-stu-id="5ff43-175">ClearDepthStencilView</span></span>          |
| <span data-ttu-id="5ff43-176">ClearRenderTargetView</span><span class="sxs-lookup"><span data-stu-id="5ff43-176">ClearRenderTargetView</span></span>               | <span data-ttu-id="5ff43-177">ClearRenderTargetView</span><span class="sxs-lookup"><span data-stu-id="5ff43-177">ClearRenderTargetView</span></span>          |
| <span data-ttu-id="5ff43-178">ClearUnorderedAccess\*</span><span class="sxs-lookup"><span data-stu-id="5ff43-178">ClearUnorderedAccess\*</span></span>               | <span data-ttu-id="5ff43-179">ClearUnorderedAccess\*</span><span class="sxs-lookup"><span data-stu-id="5ff43-179">ClearUnorderedAccess\*</span></span>          |
| <span data-ttu-id="5ff43-180">Draw, DrawInstanced</span><span class="sxs-lookup"><span data-stu-id="5ff43-180">Draw, DrawInstanced</span></span>                 | <span data-ttu-id="5ff43-181">DrawInstanced</span><span class="sxs-lookup"><span data-stu-id="5ff43-181">DrawInstanced</span></span>                  |
| <span data-ttu-id="5ff43-182">DrawIndexed, DrawIndexedInstanced</span><span class="sxs-lookup"><span data-stu-id="5ff43-182">DrawIndexed, DrawIndexedInstanced</span></span>   | <span data-ttu-id="5ff43-183">DrawIndexedInstanced</span><span class="sxs-lookup"><span data-stu-id="5ff43-183">DrawIndexedInstanced</span></span>           |
| <span data-ttu-id="5ff43-184">Dispatch</span><span class="sxs-lookup"><span data-stu-id="5ff43-184">Dispatch</span></span>                            | <span data-ttu-id="5ff43-185">Dispatch</span><span class="sxs-lookup"><span data-stu-id="5ff43-185">Dispatch</span></span>                       |
| <span data-ttu-id="5ff43-186">IASetInputLayout, xxSetShader, etc.</span><span class="sxs-lookup"><span data-stu-id="5ff43-186">IASetInputLayout, xxSetShader, etc.</span></span> | <span data-ttu-id="5ff43-187">SetPipelineState</span><span class="sxs-lookup"><span data-stu-id="5ff43-187">SetPipelineState</span></span>               |
| <span data-ttu-id="5ff43-188">OMSetBlendState</span><span class="sxs-lookup"><span data-stu-id="5ff43-188">OMSetBlendState</span></span>                     | <span data-ttu-id="5ff43-189">OMSetBlendFactor</span><span class="sxs-lookup"><span data-stu-id="5ff43-189">OMSetBlendFactor</span></span>               |
| <span data-ttu-id="5ff43-190">OMSetDepthStencilState</span><span class="sxs-lookup"><span data-stu-id="5ff43-190">OMSetDepthStencilState</span></span>              | <span data-ttu-id="5ff43-191">OMSetStencilRef</span><span class="sxs-lookup"><span data-stu-id="5ff43-191">OMSetStencilRef</span></span>                |
| <span data-ttu-id="5ff43-192">OMSetRenderTargets</span><span class="sxs-lookup"><span data-stu-id="5ff43-192">OMSetRenderTargets</span></span>                  | <span data-ttu-id="5ff43-193">OMSetRenderTargets</span><span class="sxs-lookup"><span data-stu-id="5ff43-193">OMSetRenderTargets</span></span>             |
| <span data-ttu-id="5ff43-194">RSSetViewports</span><span class="sxs-lookup"><span data-stu-id="5ff43-194">RSSetViewports</span></span>                      | <span data-ttu-id="5ff43-195">RSSetViewports</span><span class="sxs-lookup"><span data-stu-id="5ff43-195">RSSetViewports</span></span>                 |
| <span data-ttu-id="5ff43-196">RSSetScissorRects</span><span class="sxs-lookup"><span data-stu-id="5ff43-196">RSSetScissorRects</span></span>                   | <span data-ttu-id="5ff43-197">RSSetScissorRects</span><span class="sxs-lookup"><span data-stu-id="5ff43-197">RSSetScissorRects</span></span>              |
| <span data-ttu-id="5ff43-198">IASetPrimitiveTopology</span><span class="sxs-lookup"><span data-stu-id="5ff43-198">IASetPrimitiveTopology</span></span>              | <span data-ttu-id="5ff43-199">IASetPrimitiveTopology</span><span class="sxs-lookup"><span data-stu-id="5ff43-199">IASetPrimitiveTopology</span></span>         |
| <span data-ttu-id="5ff43-200">IASetVertexBuffers</span><span class="sxs-lookup"><span data-stu-id="5ff43-200">IASetVertexBuffers</span></span>                  | <span data-ttu-id="5ff43-201">IASetVertexBuffers</span><span class="sxs-lookup"><span data-stu-id="5ff43-201">IASetVertexBuffers</span></span>             |
| <span data-ttu-id="5ff43-202">IASetIndexBuffer</span><span class="sxs-lookup"><span data-stu-id="5ff43-202">IASetIndexBuffer</span></span>                    | <span data-ttu-id="5ff43-203">IASetIndexBuffer</span><span class="sxs-lookup"><span data-stu-id="5ff43-203">IASetIndexBuffer</span></span>               |
| <span data-ttu-id="5ff43-204">ResolveSubresource</span><span class="sxs-lookup"><span data-stu-id="5ff43-204">ResolveSubresource</span></span>                  | <span data-ttu-id="5ff43-205">ResolveSubresource</span><span class="sxs-lookup"><span data-stu-id="5ff43-205">ResolveSubresource</span></span>             |
| <span data-ttu-id="5ff43-206">CopySubresourceRegion</span><span class="sxs-lookup"><span data-stu-id="5ff43-206">CopySubresourceRegion</span></span>               | <span data-ttu-id="5ff43-207">CopyBufferRegion</span><span class="sxs-lookup"><span data-stu-id="5ff43-207">CopyBufferRegion</span></span>               |
| <span data-ttu-id="5ff43-208">UpdateSubresource</span><span class="sxs-lookup"><span data-stu-id="5ff43-208">UpdateSubresource</span></span>                   | <span data-ttu-id="5ff43-209">CopyTextureRegion</span><span class="sxs-lookup"><span data-stu-id="5ff43-209">CopyTextureRegion</span></span>              |
| <span data-ttu-id="5ff43-210">CopyResource</span><span class="sxs-lookup"><span data-stu-id="5ff43-210">CopyResource</span></span>                        | <span data-ttu-id="5ff43-211">CopyResource</span><span class="sxs-lookup"><span data-stu-id="5ff43-211">CopyResource</span></span>                   |

> [!NOTE]
> <span data-ttu-id="5ff43-212">Una lista de comandos creada con **D3D12_COMMAND_LIST_TYPE_BUNDLE** se como a un contexto diferido.</span><span class="sxs-lookup"><span data-stu-id="5ff43-212">A command list created with **D3D12_COMMAND_LIST_TYPE_BUNDLE** is simliar to a deferred context.</span></span> <span data-ttu-id="5ff43-213">Direct3D 12 también admite el abiilty para tener acceso a algunas características de un *contexto inmediato* de forma simultánea para la representación a través de **D3D12_COMMAND_LIST_TYPE_COPY** y **D3D12_COMMAND_LIST_TYPE_COMPUTE** tipos de lista de comandos.</span><span class="sxs-lookup"><span data-stu-id="5ff43-213">Direct3D 12 also supports the abiilty to access some features of an *immediate context* simultaneous to rendering via **D3D12_COMMAND_LIST_TYPE_COPY** and **D3D12_COMMAND_LIST_TYPE_COMPUTE** command list types.</span></span>

## <a name="cpugpu-synchronization"></a><span data-ttu-id="5ff43-214">Sincronización de CPU/GPU</span><span class="sxs-lookup"><span data-stu-id="5ff43-214">CPU/GPU Synchronization</span></span>

<span data-ttu-id="5ff43-215">En Direct3D 11, la sincronización de CPU/GPU era en gran medida automática y no había necesidad de que la aplicación conserve el estado de la memoria física.</span><span class="sxs-lookup"><span data-stu-id="5ff43-215">In Direct3D 11 CPU/GPU synchronization was largely automatic, and there was no need for the app to maintain the status of physical memory.</span></span>

<span data-ttu-id="5ff43-216">en Direct3D 12, la aplicación debe administrar las dos escalas de tiempo (CPU y GPU) explícitamente.</span><span class="sxs-lookup"><span data-stu-id="5ff43-216">in Direct3D 12 the app must manage the two timelines (CPU and GPU) explicitly.</span></span> <span data-ttu-id="5ff43-217">Esto requiere que la aplicación tenga que mantener la información, en qué recursos necesita la GPU y durante cuánto tiempo.</span><span class="sxs-lookup"><span data-stu-id="5ff43-217">This requires that information needs to be maintained, by the app, on what resources are required by the GPU, and for how long.</span></span> <span data-ttu-id="5ff43-218">Esto también significa que la aplicación es responsable de garantizar que el contenido de los recursos (por ejemplo, los recursos confirmados, los montones, los asignadores de comandos) no cambie hasta que la GPU haya terminado de usarlas.</span><span class="sxs-lookup"><span data-stu-id="5ff43-218">This also means that the app is responsible for ensuring the contents of resources (committed resources, heaps, command allocators, for example) do not change until the GPU has finished using them.</span></span>

<span data-ttu-id="5ff43-219">El objeto principal para sincronizar las escalas de tiempo es el objeto [**ID3D12Fence**](/windows/win32/api/d3d12/nn-d3d12-id3d12fence) .</span><span class="sxs-lookup"><span data-stu-id="5ff43-219">The main object for synchronizing the timelines is the [**ID3D12Fence**](/windows/win32/api/d3d12/nn-d3d12-id3d12fence) object.</span></span> <span data-ttu-id="5ff43-220">La operación de vallas es sencilla y permite que la GPU señale Cuándo se ha completado una tarea.</span><span class="sxs-lookup"><span data-stu-id="5ff43-220">The operation of fences is failry simple, they enable the GPU to signal when it has completed a task.</span></span> <span data-ttu-id="5ff43-221">La GPU y la CPU pueden señalar y pueden esperar en las barreras.</span><span class="sxs-lookup"><span data-stu-id="5ff43-221">The GPU and CPU can both signal, and can both wait on fences.</span></span>

<span data-ttu-id="5ff43-222">Normalmente, el enfoque es que cuando se envía una lista de comandos para su ejecución, la GPU transmite una señal de barrera al finalizar (cuando ha terminado de leer los datos), lo que permite que la CPU reutilice o destruya los recursos.</span><span class="sxs-lookup"><span data-stu-id="5ff43-222">Typically the approach is that when submitting a command list for execution, a fence signal is transmitted by the GPU on completion (when it has finished reading the data), enabling the CPU to reuse or destroy the resources.</span></span>

<span data-ttu-id="5ff43-223">En Direct3D 11, la marca [**ID3D11DeviceContext:: Map**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-map) D3D11 de \_ escritura de asignación \_ \_ trata esencialmente cada recurso como un suministro interminable de memoria en el que la aplicación podría escribir (un proceso conocido como "cambio de nombre").</span><span class="sxs-lookup"><span data-stu-id="5ff43-223">In Direct3D 11 the [**ID3D11DeviceContext::Map**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-map) flag D3D11\_MAP\_WRITE\_DISCARD essentially treated each resource as an endless supply of memory the app could write to (a process known as "renaming").</span></span> <span data-ttu-id="5ff43-224">En Direct3D 12 de nuevo, el proceso es explícito: debe asignarse memoria adicional y deben usarse barreras para sincronizar las operaciones.</span><span class="sxs-lookup"><span data-stu-id="5ff43-224">In Direct3D 12 again the process is explicit: additional memory needs to be allocated, and fences should be used to sync the operations.</span></span> <span data-ttu-id="5ff43-225">Los búferes de anillo (que se componen de búferes grandes) pueden ser una buena técnica para esto; consulte el escenario de búfer de anillo en la [Administración de recursos basada en valla](fence-based-resource-management.md).</span><span class="sxs-lookup"><span data-stu-id="5ff43-225">Ring buffers (consisting of large buffers) might be a good technique for this, refer to the ring buffer scenario in [Fence-Based Resource Management](fence-based-resource-management.md).</span></span>

![usar un búfer en anillo](images/ring-buffer-1.png)

## <a name="resource-binding"></a><span data-ttu-id="5ff43-227">Enlace de recursos</span><span class="sxs-lookup"><span data-stu-id="5ff43-227">Resource Binding</span></span>

<span data-ttu-id="5ff43-228">Las vistas de Direct3D 11 (vistas de recursos del sombreador, vistas de destino de representación, etc.), se han reemplazado en Direct3D 12 con el concepto de descriptor.</span><span class="sxs-lookup"><span data-stu-id="5ff43-228">Views in Direct3D 11 (shader resource views, render target views, and so on), have largely been replaced in Direct3D 12 with the concept of a descriptor.</span></span> <span data-ttu-id="5ff43-229">Los métodos de creación todavía existen en Direct3D 12 (como [**CreateShaderResourceView**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createshaderresourceview) y [**CreateRenderTargetView**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createrendertargetview)), a los que se llama después de haber creado el montón de descriptores, para escribir los datos en el montón.</span><span class="sxs-lookup"><span data-stu-id="5ff43-229">The creation methods still exist in Direct3D 12 (such as [**CreateShaderResourceView**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createshaderresourceview) and [**CreateRenderTargetView**](/windows/win32/api/d3d12/nf-d3d12-id3d12device-createrendertargetview)), which are called after the descriptor heap has been created, to write the data into the heap.</span></span> <span data-ttu-id="5ff43-230">Ahora, los identificadores de descriptor descritos en una firma raíz controlan el enlace en Direct3D 12 y se envían mediante los métodos [**SetGraphicsRootDescriptorTable**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setgraphicsrootdescriptortable) o [**SetComputeRootDescriptorTable**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setcomputerootdescriptortable) .</span><span class="sxs-lookup"><span data-stu-id="5ff43-230">Binding in Direct3D 12 is now handled by descriptor handles described in a root signature, and submitted using the [**SetGraphicsRootDescriptorTable**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setgraphicsrootdescriptortable) or [**SetComputeRootDescriptorTable**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-setcomputerootdescriptortable) methods.</span></span>

<span data-ttu-id="5ff43-231">Las firmas de raíz detallan las asignaciones entre el número de la ranura de firma raíz y las tablas de descriptor, donde la tabla de descriptores puede contener referencias a los recursos disponibles para los sombreadores de vértices, sombreadores de píxeles y otros sombreadores, como los búferes de constantes, las vistas de recursos del sombreador y los muestreadores.</span><span class="sxs-lookup"><span data-stu-id="5ff43-231">Root signatures details mappings between the root signature slot number and descriptor tables, where the descriptor table can contain references to resources available to vertex shaders, pixel shaders, and the other shaders, such as constant buffers, shader resource views and samplers.</span></span> <span data-ttu-id="5ff43-232">Esta flexibilidad desconecta el espacio de registro de HLSL del espacio de enlace de la API en Direct3D 12, a diferencia de Direct3D 11, donde hay una asignación de uno a uno entre ellos.</span><span class="sxs-lookup"><span data-stu-id="5ff43-232">This flexibility disconnects the HLSL register space from the API binding space in Direct3D 12, unlike Direct3D 11 where there is a one to one mapping between these.</span></span>

<span data-ttu-id="5ff43-233">Una de las implicaciones de este sistema es que la aplicación es responsable de cambiar el nombre de las tablas de descriptores, lo que permite a los desarrolladores comprender el costo de rendimiento de cambiar incluso un único descriptor por llamada a Draw.</span><span class="sxs-lookup"><span data-stu-id="5ff43-233">One of the implications of this system is that the app is responsible for renaming descriptor tables, which enables developers to understand the performance cost of changing even a single descriptor per draw call.</span></span>

<span data-ttu-id="5ff43-234">Una nueva característica de Direct3D 12 es que una aplicación puede controlar qué descriptores se comparten entre las fases del sombreador.</span><span class="sxs-lookup"><span data-stu-id="5ff43-234">A new feature of Direct3D 12 is that an app can control which descriptors are shared between which shader stages.</span></span> <span data-ttu-id="5ff43-235">En Direct3D 11, los recursos como UAVs se comparten entre todas las fases del sombreador.</span><span class="sxs-lookup"><span data-stu-id="5ff43-235">In Direct3D 11 resources such as UAVs are shared between all shader stages.</span></span> <span data-ttu-id="5ff43-236">Al habilitar los descriptores para que se deshabiliten en determinadas fases del sombreador, los registros utilizados por los descriptores que se han deshabilitado están disponibles para que los descriptores que están habilitados para una fase de sombreador determinada puedan usarlos.</span><span class="sxs-lookup"><span data-stu-id="5ff43-236">By enabling descriptors to be disabled for certain shader stages, the registers used by descriptors that have been disabled are available to be used by descriptors which are enabled for a particular shader stage.</span></span>

<span data-ttu-id="5ff43-237">En la tabla siguiente se muestra una firma raíz de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5ff43-237">The following table shows an example root signature.</span></span>



| <span data-ttu-id="5ff43-238">Espacio de parámetros raíz</span><span class="sxs-lookup"><span data-stu-id="5ff43-238">Root Parameter Slot</span></span> | <span data-ttu-id="5ff43-239">Entrada de la tabla de descriptores</span><span class="sxs-lookup"><span data-stu-id="5ff43-239">Descriptor Table Entry</span></span>         |
|---------------------|--------------------------------|
| <span data-ttu-id="5ff43-240">0</span><span class="sxs-lookup"><span data-stu-id="5ff43-240">0</span></span>                   | <span data-ttu-id="5ff43-241">Rango de descriptores de VS B0-B13</span><span class="sxs-lookup"><span data-stu-id="5ff43-241">VS Descriptor Range b0-b13</span></span>     |
| <span data-ttu-id="5ff43-242">1</span><span class="sxs-lookup"><span data-stu-id="5ff43-242">1</span></span>                   | <span data-ttu-id="5ff43-243">Rango de descriptores de VS T0-T127</span><span class="sxs-lookup"><span data-stu-id="5ff43-243">VS Descriptor Range t0-t127</span></span>    |
| <span data-ttu-id="5ff43-244">2</span><span class="sxs-lookup"><span data-stu-id="5ff43-244">2</span></span>                   | <span data-ttu-id="5ff43-245">Rango de descriptores de VS S0-S16</span><span class="sxs-lookup"><span data-stu-id="5ff43-245">VS Descriptor Range s0-s16</span></span>     |
| <span data-ttu-id="5ff43-246">3</span><span class="sxs-lookup"><span data-stu-id="5ff43-246">3</span></span>                   | <span data-ttu-id="5ff43-247">Rango de descriptores de PS B0-B13</span><span class="sxs-lookup"><span data-stu-id="5ff43-247">PS Descriptor Range b0-b13</span></span>     |
| <span data-ttu-id="5ff43-248">...</span><span class="sxs-lookup"><span data-stu-id="5ff43-248">...</span></span>                 |                                |
| <span data-ttu-id="5ff43-249">14</span><span class="sxs-lookup"><span data-stu-id="5ff43-249">14</span></span>                  | <span data-ttu-id="5ff43-250">Rango de descriptores de DS S0-16</span><span class="sxs-lookup"><span data-stu-id="5ff43-250">DS Descriptor Range s0-16</span></span>      |
| <span data-ttu-id="5ff43-251">15</span><span class="sxs-lookup"><span data-stu-id="5ff43-251">15</span></span>                  | <span data-ttu-id="5ff43-252">Intervalo de descriptor compartido U0-U63</span><span class="sxs-lookup"><span data-stu-id="5ff43-252">Shared Descriptor Range u0-u63</span></span> |



 

## <a name="resource-state"></a><span data-ttu-id="5ff43-253">Estado del recurso</span><span class="sxs-lookup"><span data-stu-id="5ff43-253">Resource state</span></span>

<span data-ttu-id="5ff43-254">En Direct3D 11, el estado de los recursos no es mantenido por la aplicación, sino por el controlador.</span><span class="sxs-lookup"><span data-stu-id="5ff43-254">In Direct3D 11 resource state is not maintained by the app, but by the driver.</span></span>

<span data-ttu-id="5ff43-255">En Direct3D 12, mantener el estado de los recursos se convierte en la responsabilidad de la aplicación, para habilitar el paralelismo completo en la grabación de las listas de comandos: la aplicación debe controlar las escalas de tiempo de grabación para las listas de comandos (que se pueden realizar en paralelo) y las escalas de tiempo de ejecución que deben ser secuenciales.</span><span class="sxs-lookup"><span data-stu-id="5ff43-255">In Direct3D 12 maintaining resource state becomes the responsibility of the app, to enable full parallelism in the recording of command lists: the app must handle the recording timelines for command lists (which can be done in parallel), and the execution timelines which must be sequential.</span></span>

<span data-ttu-id="5ff43-256">El método [**ResourceBarrier**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-resourcebarrier) controla la transición de estado de los recursos.</span><span class="sxs-lookup"><span data-stu-id="5ff43-256">A resource state transition is handled by the [**ResourceBarrier**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-resourcebarrier) method.</span></span> <span data-ttu-id="5ff43-257">Principalmente, la aplicación debe informar al controlador cuando el uso de recursos cambia.</span><span class="sxs-lookup"><span data-stu-id="5ff43-257">Primarily the app must inform the driver when resource usage is changing.</span></span> <span data-ttu-id="5ff43-258">Por ejemplo, si un recurso se usa como destino de representación y, a continuación, se va a utilizar como entrada para un sombreador de vértices en la siguiente llamada a Draw, esto podría requerir una breve operación de detención en la GPU para completar la operación de destino de representación antes de controlar el sombreador de vértices.</span><span class="sxs-lookup"><span data-stu-id="5ff43-258">For example if a resource is being used as a render target, and then it is to be used as input to a vertex shader on the next draw call, then this might require a short stall in GPU operation to complete the render target operation before handling the vertex shader.</span></span>

<span data-ttu-id="5ff43-259">Este sistema permite la sincronización exhaustiva (la GPU se detiene) de la canalización de gráficos, así como los vaciados de caché y, posiblemente, algunos cambios de diseño de memoria (como la vista de destino de representación para la descompresión de la vista de estarcido de profundidad).</span><span class="sxs-lookup"><span data-stu-id="5ff43-259">This system enables fine grain synchronization (the GPU stalls) of the graphics pipeline, as well as cache flushes and possibly some memory layout changes (such as render target view to depth stencil view decompression).</span></span>

<span data-ttu-id="5ff43-260">Esto se conoce como barrera de transición.</span><span class="sxs-lookup"><span data-stu-id="5ff43-260">This is known as a transition barrier.</span></span> <span data-ttu-id="5ff43-261">Hay otros tipos de barreras, en Direct3D 11, [**ID3D11DeviceContext2:: TiledResourceBarrier**](/windows/win32/api/d3d11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) ha habilitado la misma memoria física que van a usar dos recursos en mosaico diferentes.</span><span class="sxs-lookup"><span data-stu-id="5ff43-261">There are other kinds of barriers, in Direct3D 11 the [**ID3D11DeviceContext2::TiledResourceBarrier**](/windows/win32/api/d3d11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) enabled the same physical memory to be used by two different tiled resources.</span></span> <span data-ttu-id="5ff43-262">En Direct3D 12, esto se conoce como "barrera de alias".</span><span class="sxs-lookup"><span data-stu-id="5ff43-262">In Direct3D 12 this is referred to as an "aliasing barrier".</span></span> <span data-ttu-id="5ff43-263">Las barreras de alias se pueden usar para los recursos en mosaico y colocados en Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="5ff43-263">Aliasing barriers can be used for both tiled and placed resources in Direct3D 12.</span></span> <span data-ttu-id="5ff43-264">Además, hay una barrera UAV.</span><span class="sxs-lookup"><span data-stu-id="5ff43-264">Additionally there is the UAV barrier.</span></span> <span data-ttu-id="5ff43-265">En Direct3D 11, es necesario serializar todas las operaciones de envío y dibujo de UAV, aunque estas operaciones se pueden canalizar o trabajar en paralelo.</span><span class="sxs-lookup"><span data-stu-id="5ff43-265">In Direct3D 11 all UAV dispatch and draw operations are required to be serialized, even though these operations can be pipelined or work in parallel.</span></span> <span data-ttu-id="5ff43-266">En Direct3D 12, esta restricción se quita mediante la adición de una barrera UAV.</span><span class="sxs-lookup"><span data-stu-id="5ff43-266">For Direct3D 12 this restriction is removed by the addition of a UAV barrier.</span></span> <span data-ttu-id="5ff43-267">Una barrera UAV garantiza que las operaciones de UAV son secuenciales, por lo que si una segunda operación requiere que la primera se complete, la segunda se forzará a esperar por la adición de la barrera.</span><span class="sxs-lookup"><span data-stu-id="5ff43-267">A UAV barrier ensures that UAV operations are sequential, so if a second operation requires that the first complete, the second will be forced to wait by the addition of the barrier.</span></span> <span data-ttu-id="5ff43-268">La operación predeterminada para UAVs es simplemente que las operaciones se realizarán lo más rápido posible.</span><span class="sxs-lookup"><span data-stu-id="5ff43-268">The default operation for UAVs is simply that the operations will proceed as quickly as possible.</span></span>

<span data-ttu-id="5ff43-269">Claramente hay mejoras de rendimiento si se puede ejecutar una carga de trabajo en paralelo.</span><span class="sxs-lookup"><span data-stu-id="5ff43-269">Clearly there are performance gains if a workload can be parallelized.</span></span>

## <a name="swapchains"></a><span data-ttu-id="5ff43-270">Intercambio</span><span class="sxs-lookup"><span data-stu-id="5ff43-270">Swapchains</span></span>

<span data-ttu-id="5ff43-271">La cadena de intercambio de DXGI es la base de las cadenas de intercambio en Direct3D 11 y 12.</span><span class="sxs-lookup"><span data-stu-id="5ff43-271">The DXGI swap chain is the basis for swap chains in both Direct3D 11 and 12.</span></span> <span data-ttu-id="5ff43-272">Hay algunas pequeñas diferencias, en Direct3D 11, los tres tipos de cadena de intercambio son SECUENCIAles, discard y FLIP \_ secuencial.</span><span class="sxs-lookup"><span data-stu-id="5ff43-272">There are some minor differences, in Direct3D 11 the three types of swap chain are SEQUENTIAL, DISCARD, and FLIP\_SEQUENTIAL.</span></span> <span data-ttu-id="5ff43-273">En Direct3D 12 hay solo dos tipos: FLIP \_ Sequential y flip \_ discard.</span><span class="sxs-lookup"><span data-stu-id="5ff43-273">For Direct3D 12 there are just two types: FLIP\_SEQUENTIAL and FLIP\_DISCARD.</span></span> <span data-ttu-id="5ff43-274">Como se indicó anteriormente, debe crear explícitamente el intercambio a través de **IDXGIFactory4**, o una versión posterior, y usar la misma interfaz para cualquier enumeración de adaptador.</span><span class="sxs-lookup"><span data-stu-id="5ff43-274">As noted above, you should be explicitly creating your swapchain via **IDXGIFactory4**, or later, and using the same interface for any adapter enumeration.</span></span>

<span data-ttu-id="5ff43-275">En Direct3D 11 hay una rotación de búferes pendientes automática: solo se necesita una vista de destino de representación para el búfer de reserva 0.</span><span class="sxs-lookup"><span data-stu-id="5ff43-275">In Direct3D 11 there is automatic backbuffer rotation: only one render target view is needed for back buffer 0.</span></span> <span data-ttu-id="5ff43-276">En Direct3D 12, la rotación del búfer es explícita, debe haber una vista de destino de representación para cada búfer de reserva.</span><span class="sxs-lookup"><span data-stu-id="5ff43-276">In Direct3D 12 buffer rotation is explicit, there needs to be a render target view for each back buffer.</span></span> <span data-ttu-id="5ff43-277">Use el método [**IDXGISwapChain3:: GetCurrentBackBufferIndex**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiswapchain3-getcurrentbackbufferindex) para seleccionar el que se va a representar.</span><span class="sxs-lookup"><span data-stu-id="5ff43-277">Use the [**IDXGISwapChain3::GetCurrentBackBufferIndex**](/windows/win32/api/dxgi1_4/nf-dxgi1_4-idxgiswapchain3-getcurrentbackbufferindex) method to select which one to render to.</span></span> <span data-ttu-id="5ff43-278">De nuevo, esta flexibilidad adicional permite una mayor paralelización.</span><span class="sxs-lookup"><span data-stu-id="5ff43-278">Again this additional flexibility enables greater parallelization.</span></span>

> [!NOTE]
> <span data-ttu-id="5ff43-279">Aunque hay muchas maneras de configurar la aplicación, las aplicaciones suelen tener un **ID3D12CommandAllocator** por cada búfer de cadena de intercambio.</span><span class="sxs-lookup"><span data-stu-id="5ff43-279">While there are numerous ways to set up your application, generally applications have one **ID3D12CommandAllocator** per swap-chain buffer.</span></span> <span data-ttu-id="5ff43-280">Esto permite a la aplicación continuar con la creación de un conjunto de comandos para el siguiente fotograma mientras la GPU representa el anterior.</span><span class="sxs-lookup"><span data-stu-id="5ff43-280">This allows the application to proceed to building up a set of commands for the next frame while the GPU renders the previous.</span></span>

## <a name="fixed-function-rendering"></a><span data-ttu-id="5ff43-281">Representación de funciones fijas</span><span class="sxs-lookup"><span data-stu-id="5ff43-281">Fixed function rendering</span></span>

<span data-ttu-id="5ff43-282">En Direct3D 11, había algunos métodos que simplificaban varias operaciones de nivel superior, como [**GenerateMips**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-generatemips) (crear cadenas MIP completas) y [**DrawAuto**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-drawauto) (mediante la salida de flujo como entrada de sombreador sin ninguna otra entrada de la aplicación).</span><span class="sxs-lookup"><span data-stu-id="5ff43-282">In Direct3D 11 there were a few methods that simplified various higher level operations, such as [**GenerateMips**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-generatemips) (creating full mip chains) and [**DrawAuto**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-drawauto) (using stream output as shader input without further input from the app).</span></span> <span data-ttu-id="5ff43-283">Estos métodos no están disponibles en Direct3D 12, ya que la aplicación necesita controlar estas operaciones mediante la creación de sombreadores para realizarlos.</span><span class="sxs-lookup"><span data-stu-id="5ff43-283">These methods are not available in Direct3D 12, the app needs to handle these operations by creating shaders to perform them.</span></span>

## <a name="odds-and-ends"></a><span data-ttu-id="5ff43-284">Probabilidades y finalización</span><span class="sxs-lookup"><span data-stu-id="5ff43-284">Odds and ends</span></span>

<span data-ttu-id="5ff43-285">En la tabla siguiente se muestran varias características similares a las de Direct3D 11 y 12, pero no son idénticas.</span><span class="sxs-lookup"><span data-stu-id="5ff43-285">The following table shows a number of features that are similar between Direct3D 11 and 12, but are not identical.</span></span>



| <span data-ttu-id="5ff43-286">Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="5ff43-286">Direct3D 11</span></span>                                                                            | <span data-ttu-id="5ff43-287">Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="5ff43-287">Direct3D 12</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                              |
|----------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5ff43-288">**ID3D11Query**</span><span class="sxs-lookup"><span data-stu-id="5ff43-288">**ID3D11Query**</span></span>](/windows/win32/api/d3d11/nn-d3d11-id3d11query)                                              | <span data-ttu-id="5ff43-289">[**ID3D12QueryHeap**](/windows/win32/api/d3d12/nn-d3d12-id3d12queryheap) permite agrupar las consultas, lo que reduce el costo.</span><span class="sxs-lookup"><span data-stu-id="5ff43-289">[**ID3D12QueryHeap**](/windows/win32/api/d3d12/nn-d3d12-id3d12queryheap) allows queries to be grouped together, reducing the cost.</span></span>                                                                                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="5ff43-290">**ID3D11Predicate**</span><span class="sxs-lookup"><span data-stu-id="5ff43-290">**ID3D11Predicate**</span></span>](/windows/win32/api/d3d11/nn-d3d11-id3d11predicate)                                      | <span data-ttu-id="5ff43-291">Ahora, Predication se habilita mediante el uso de datos en un búfer completamente transparente.</span><span class="sxs-lookup"><span data-stu-id="5ff43-291">Predication is now enabled by having data in a fully transparent buffer.</span></span> <span data-ttu-id="5ff43-292">El objeto [**ID3D11Predicate**](/windows/win32/api/d3d11/nn-d3d11-id3d11predicate) de Direct3D 11 se ha reemplazado por [**ID3D12Resource:: Map**](/windows/win32/api/d3d12/nf-d3d12-id3d12resource-map), que debe seguir una llamada a [**ResolveQueryData**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-resolvequerydata) y una operación de sincronización de GPU mediante una barrera para esperar a que los datos estén listos.</span><span class="sxs-lookup"><span data-stu-id="5ff43-292">The Direct3D 11 [**ID3D11Predicate**](/windows/win32/api/d3d11/nn-d3d11-id3d11predicate) object is replaced by [**ID3D12Resource::Map**](/windows/win32/api/d3d12/nf-d3d12-id3d12resource-map), which must follow a call to [**ResolveQueryData**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-resolvequerydata) and a GPU sync operation using a fence to wait for the data to be ready.</span></span> <span data-ttu-id="5ff43-293">Consulte [Predication](predication.md).</span><span class="sxs-lookup"><span data-stu-id="5ff43-293">Refer to [Predication](predication.md).</span></span> |
| <span data-ttu-id="5ff43-294">UAV/SO oculto contador</span><span class="sxs-lookup"><span data-stu-id="5ff43-294">UAV/SO hidden counter</span></span>                                                                  | <span data-ttu-id="5ff43-295">La aplicación es responsable de la asignación y administración de los contadores de SO/UAV.</span><span class="sxs-lookup"><span data-stu-id="5ff43-295">The app is responsible for allocation and management of SO/UAV counters.</span></span> <span data-ttu-id="5ff43-296">Consulte los contadores de [salida de Stream](stream-output-counters.md) y los [contadores de UAV](uav-counters.md).</span><span class="sxs-lookup"><span data-stu-id="5ff43-296">Refer to [Stream Output Counters](stream-output-counters.md) and [UAV Counters](uav-counters.md).</span></span>                                                                                                                                                                                                                                                             |
| <span data-ttu-id="5ff43-297">Resource Dynamic MinLOD (nivel de detalle de los detalles)</span><span class="sxs-lookup"><span data-stu-id="5ff43-297">Resource dynamic MinLOD (minium level of detail)</span></span>                                       | <span data-ttu-id="5ff43-298">Esto se ha pasado a la MinLOD estática del descriptor SRV.</span><span class="sxs-lookup"><span data-stu-id="5ff43-298">This has been moved to the SRV descriptor static MinLOD.</span></span>                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="5ff43-299">Dibujo \* indirecto/[**DispatchIndirect**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-dispatchindirect)</span><span class="sxs-lookup"><span data-stu-id="5ff43-299">Draw\*Indirect/[**DispatchIndirect**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-dispatchindirect)</span></span> | <span data-ttu-id="5ff43-300">Los métodos indirectos de dibujo se combinan en el método de un [**ExecuteIndirect**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-executeindirect) .</span><span class="sxs-lookup"><span data-stu-id="5ff43-300">Drawing indirect methods are all merged into the one [**ExecuteIndirect**](/windows/win32/api/d3d12/nf-d3d12-id3d12graphicscommandlist-executeindirect) method.</span></span>                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="5ff43-301">Los formatos de DepthStencil se intercalan</span><span class="sxs-lookup"><span data-stu-id="5ff43-301">DepthStencil formats are interleaved</span></span>                                                   | <span data-ttu-id="5ff43-302">Los formatos de DepthStencil son planos.</span><span class="sxs-lookup"><span data-stu-id="5ff43-302">DepthStencil formats are planar.</span></span> <span data-ttu-id="5ff43-303">Por ejemplo, un formato de 24 bits de profundidad, 8 bits de la galería de símbolos se almacenaría en el formato 24/8/24/8... etc. en Direct3D 11, pero como 24/24/24... seguido de 8/8/8... en Direct3D 12.</span><span class="sxs-lookup"><span data-stu-id="5ff43-303">For example a format of 24 bits of depth, 8 bits of stencil would be stored in the format 24/8/24/8... etc in Direct3D 11, but as 24/24/24... followed by 8/8/8... in Direct3D 12.</span></span> <span data-ttu-id="5ff43-304">Tenga en cuenta que cada plano es su propio subrecurso en D3D12 (consulte [Subrecursos](subresources.md)).</span><span class="sxs-lookup"><span data-stu-id="5ff43-304">Note that each plane is its own subresource in D3D12 (refer to [Subresources](subresources.md)).</span></span>                                                                                                                    |
| [<span data-ttu-id="5ff43-305">**ResizeTilePool**</span><span class="sxs-lookup"><span data-stu-id="5ff43-305">**ResizeTilePool**</span></span>](/windows/win32/api/d3d11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool)                   | <span data-ttu-id="5ff43-306">Los recursos reservados se pueden asignar a varios montones.</span><span class="sxs-lookup"><span data-stu-id="5ff43-306">Reserved resources can be mapped to multiple heaps.</span></span> <span data-ttu-id="5ff43-307">Cuando un grupo de mosaicos se hubiera crecido en D3D11, se puede asignar un montón adicional en D3D12 en su lugar.</span><span class="sxs-lookup"><span data-stu-id="5ff43-307">When a tile pool would have been grown in D3D11, an additional heap can be allocated in D3D12 instead.</span></span>                                                                                                                                                                                                                                                                               |



 

## <a name="related-topics"></a><span data-ttu-id="5ff43-308">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="5ff43-308">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5ff43-309">Tutoriales de vídeo de aprendizaje avanzado de DirectX: Guía de migración de DirectX 11 a DirectX 12</span><span class="sxs-lookup"><span data-stu-id="5ff43-309">DirectX advanced learning video tutorials : DirectX 11 to DirectX 12 porting guide</span></span>](https://www.youtube.com/watch?v=BV64mdOCgZo)
</dt> <dt>

[<span data-ttu-id="5ff43-310">Descripción de Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="5ff43-310">Understanding Direct3D 12</span></span>](directx-12-getting-started.md)
</dt> <dt>

[<span data-ttu-id="5ff43-311">Trabajar con Direct3D 11, Direct3D 10 y Direct2D</span><span class="sxs-lookup"><span data-stu-id="5ff43-311">Working with Direct3D 11, Direct3D 10 and Direct2D</span></span>](direct3d-12-interop.md)
</dt> </dl>