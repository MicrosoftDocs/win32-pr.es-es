---
title: Calidad de servicio (RPC)
description: Los programas cliente pueden usar la función RpcBindingSetAuthInfoEx en lugar de la función RpcBindingSetAuthInfo para crear un enlace autenticado.
ms.assetid: bc3d47ba-3c1b-4aba-8fe3-b4501a621931
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ee93b1aa376c9d6f4e2b3eedab73c91471d42498
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/10/2020
ms.locfileid: "103904941"
---
# <a name="quality-of-service-rpc"></a><span data-ttu-id="a8c03-103">Calidad de servicio (RPC)</span><span class="sxs-lookup"><span data-stu-id="a8c03-103">Quality of Service (RPC)</span></span>

<span data-ttu-id="a8c03-104">Los programas cliente pueden usar la función [**RpcBindingSetAuthInfoEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfoexa) en lugar de la función [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) para crear un enlace autenticado.</span><span class="sxs-lookup"><span data-stu-id="a8c03-104">Client programs can use the [**RpcBindingSetAuthInfoEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfoexa) function rather than the [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) function to create an authenticated binding.</span></span> <span data-ttu-id="a8c03-105">Si lo hacen, pasan un puntero a una estructura [**\_ \_ QoS de seguridad RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) como el último parámetro de **RpcBindingSetAuthInfoEx**.</span><span class="sxs-lookup"><span data-stu-id="a8c03-105">If they do, they pass a pointer to an [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure as the final parameter of **RpcBindingSetAuthInfoEx**.</span></span> <span data-ttu-id="a8c03-106">Esta estructura contiene información sobre la calidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="a8c03-106">This structure contains information about the quality of service.</span></span> <span data-ttu-id="a8c03-107">Los programas cliente también pueden especificar el seguimiento de identidades y seleccionar el tipo de suplantación.</span><span class="sxs-lookup"><span data-stu-id="a8c03-107">Client programs can also specify the identity tracking and select the impersonation type.</span></span>

<span data-ttu-id="a8c03-108">Use el miembro **Capabilities** de la [**estructura \_ \_ QoS de seguridad RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) para establecer qué partes de la aplicación cliente/servidor se autentican.</span><span class="sxs-lookup"><span data-stu-id="a8c03-108">Use the **Capabilities** member of the [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure to set which portions of the client/server application are authenticated.</span></span> <span data-ttu-id="a8c03-109">Si \_ \_ \_ está seleccionada la opción predeterminada de capacidades QoS de RPC C \_ , la biblioteca en tiempo de ejecución de RPC autentica el cliente o el servidor de acuerdo con el valor predeterminado para el SSP.</span><span class="sxs-lookup"><span data-stu-id="a8c03-109">If RPC\_C\_QOS\_CAPABILITIES\_DEFAULT is selected, the RPC run-time library authenticates the client or server according to the default for the SSP.</span></span> <span data-ttu-id="a8c03-110">De forma predeterminada, el SSP del protocolo Kerberos autentica tanto el cliente como el servidor.</span><span class="sxs-lookup"><span data-stu-id="a8c03-110">By default, the Kerberos protocol SSP authenticates both the client and the server.</span></span> <span data-ttu-id="a8c03-111">El valor predeterminado para todos los demás SSP que Microsoft proporciona es autenticar el cliente en el servidor, pero no autenticar el servidor en el cliente.</span><span class="sxs-lookup"><span data-stu-id="a8c03-111">The default for all other SSPs that Microsoft provides is to authenticate the client to the server, but not to authenticate the server to the client.</span></span>

<span data-ttu-id="a8c03-112">Si el cliente y el servidor siempre se deben autenticar entre sí, establezca el miembro **Capabilities** de la [**estructura \_ \_ QoS de seguridad RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) en la \_ \_ \_ autenticación mutua de las funciones QoS de RPC C \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="a8c03-112">If the client and the server should always authenticate to each other, set the **Capabilities** member of the [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure to RPC\_C\_QOS\_CAPABILITIES\_MUTUAL\_AUTH.</span></span> <span data-ttu-id="a8c03-113">Es posible que algunos proveedores de seguridad no admitan la autenticación mutua.</span><span class="sxs-lookup"><span data-stu-id="a8c03-113">Some security providers may not support mutual authentication.</span></span> <span data-ttu-id="a8c03-114">Si se \_ \_ \_ \_ especifica la autenticación mutua de las funciones QoS de RPC C \_ para estos proveedores de seguridad, se devuelve un error cuando se realiza una llamada a procedimiento remoto.</span><span class="sxs-lookup"><span data-stu-id="a8c03-114">If RPC\_C\_QOS\_CAPABILITIES\_MUTUAL\_AUTH is specified for such security providers, an error is returned when a remote procedure call is made.</span></span> <span data-ttu-id="a8c03-115">Cuando se usa SCHANNEL SSP, también es posible establecer el miembro **Capabilities** en las \_ funciones QoS de RPC C en \_ \_ \_ cualquier \_ entidad.</span><span class="sxs-lookup"><span data-stu-id="a8c03-115">When using the SCHANNEL SSP, it is possible to also set the **Capabilities** member to RPC\_C\_QOS\_CAPABILITIES\_ANY\_AUTHORITY.</span></span> <span data-ttu-id="a8c03-116">Esta constante especifica que el SSP debe validar la llamada a procedimiento remoto, incluso si la entidad de certificación que emitió el certificado de autenticación del cliente no está en el almacén de certificados raíz del SSP.</span><span class="sxs-lookup"><span data-stu-id="a8c03-116">This constant specifies that the SSP shall validate the remote procedure call even if the certificate authority that issued the client's authentication certificate is not in the SSP's root certificate store.</span></span> <span data-ttu-id="a8c03-117">El valor predeterminado es rechazar el certificado si el SSP no reconoce la entidad de certificación.</span><span class="sxs-lookup"><span data-stu-id="a8c03-117">The default is to reject the certificate if the SSP does not recognize the certificate authority.</span></span> <span data-ttu-id="a8c03-118">La entidad de certificación es una empresa u organización independiente, como VeriSign, que emite certificados de autenticación.</span><span class="sxs-lookup"><span data-stu-id="a8c03-118">The certificate authority is an independent company or organization, such as VeriSign, that issues authentication certificates.</span></span>

<span data-ttu-id="a8c03-119">Las aplicaciones también pueden establecer el seguimiento de identidades que utiliza la biblioteca en tiempo de ejecución de RPC.</span><span class="sxs-lookup"><span data-stu-id="a8c03-119">Applications can also set the identity tracking that the RPC run-time library uses.</span></span> <span data-ttu-id="a8c03-120">Los programas suelen usar el [*seguimiento de identidad estático*](s-glos.md).</span><span class="sxs-lookup"><span data-stu-id="a8c03-120">Programs generally use [*static identity tracking*](s-glos.md).</span></span> <span data-ttu-id="a8c03-121">Con el seguimiento estático, las credenciales del cliente se establecen cuando llama a la función [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) .</span><span class="sxs-lookup"><span data-stu-id="a8c03-121">With static tracking, the client's credentials are set when it calls the [**RpcBindingSetAuthInfo**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetauthinfo) function.</span></span> <span data-ttu-id="a8c03-122">A continuación, la biblioteca en tiempo de ejecución de RPC utiliza esas credenciales para todas las llamadas RPC en el enlace, independientemente de los cambios en la identidad del subproceso que realiza la llamada o del proceso de llamada.</span><span class="sxs-lookup"><span data-stu-id="a8c03-122">The RPC run-time library then uses those credentials for all RPC calls on the binding, regardless of changes in the identity of the calling thread or the calling process.</span></span> <span data-ttu-id="a8c03-123">Las aplicaciones también pueden seleccionar el [*seguimiento dinámico de identidades*](d-glos.md).</span><span class="sxs-lookup"><span data-stu-id="a8c03-123">Applications can also select [*dynamic identity tracking*](d-glos.md).</span></span> <span data-ttu-id="a8c03-124">El seguimiento de identidad dinámica indica a la biblioteca en tiempo de ejecución de RPC que use las credenciales del subproceso que realiza la llamada en el momento de cada llamada, en lugar del identificador de enlace.</span><span class="sxs-lookup"><span data-stu-id="a8c03-124">Dynamic identity tracking instructs the RPC run-time library to use the credentials of the calling thread at the time of each call, rather than the binding handle.</span></span> <span data-ttu-id="a8c03-125">El seguimiento de identidad predeterminado es estático.</span><span class="sxs-lookup"><span data-stu-id="a8c03-125">The default identity tracking is static.</span></span>

<span data-ttu-id="a8c03-126">Si la identidad del cliente no va a cambiar, el seguimiento de identidades estáticas puede tener mejores características de rendimiento y puede ahorrar tiempo de ejecución de RPC al comprobar si la identidad del subproceso que realiza la llamada es la misma que la especificada en el sistema de seguridad.</span><span class="sxs-lookup"><span data-stu-id="a8c03-126">If the identity of the client is not going to change, static identity tracking can have better performance characteristics, and can save the RPC run time from checking each time whether the identity on the calling thread is the same as the identity given to the security system.</span></span> <span data-ttu-id="a8c03-127">Si la identidad del subproceso que realiza la llamada puede cambiar entre llamadas y el servidor necesita reconocer esos cambios, es mejor especificar el seguimiento de identidad dinámica: el tiempo de ejecución de RPC realiza un seguimiento silencioso y eficaz de la identidad y, si la identidad cambia, administra ese cambio en su nombre.</span><span class="sxs-lookup"><span data-stu-id="a8c03-127">If the identity of the calling thread may change between calls, and the server needs to recognize those changes, it is best to specify dynamic identity tracking—the RPC run time quietly and efficiently tracks the identity for you, and if the identity changes, manages that change on your behalf.</span></span>

> [!Note]  
> <span data-ttu-id="a8c03-128">En el caso de las llamadas **ncalrpc** , el seguimiento de identidades estáticas y dinámicas tiene diferentes características de rendimiento y, en función de las circunstancias, es posible que sea más rápido.</span><span class="sxs-lookup"><span data-stu-id="a8c03-128">For **ncalrpc** calls, static and dynamic identity tracking have different performance characteristics, and depending on the circumstances, either may be faster.</span></span>

 

<span data-ttu-id="a8c03-129">Como parte de la especificación de QOS, el programa cliente también puede establecer el tipo de suplantación que puede realizar un programa de servidor en su nombre.</span><span class="sxs-lookup"><span data-stu-id="a8c03-129">As part of the QOS specification, the client program can also set the type of impersonation that a server program can perform on its behalf.</span></span> <span data-ttu-id="a8c03-130">Para obtener más información, vea [suplantación de cliente](client-impersonation.md).</span><span class="sxs-lookup"><span data-stu-id="a8c03-130">For more information, see [Client Impersonation](client-impersonation.md).</span></span>

<span data-ttu-id="a8c03-131">El campo número de versión de la estructura [**\_ \_ QoS de seguridad de RPC**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) siempre debe establecerse en la versión de QoS de seguridad de RPC \_ C \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="a8c03-131">The version number field of the [**RPC\_SECURITY\_QOS**](/windows/desktop/api/Rpcdce/ns-rpcdce-rpc_security_qos) structure should always be set to RPC\_C\_SECURITY\_QOS\_VERSION.</span></span>

 

 




