---
description: Dado que el control de cuentas de usuario (UAC) de Windows Vista restringe los privilegios durante una instalación, los desarrolladores de Windows Installer paquetes no deben suponer que su instalación siempre tenga acceso a todas las partes del sistema.
ms.assetid: 8e3b4ad8-b978-4e27-b060-1d023846718f
title: Directrices para paquetes
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: db228c2dff443d421ddc089074f0fcce6ae93e2f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "103910941"
---
# <a name="guidelines-for-packages"></a><span data-ttu-id="1dd0f-103">Directrices para paquetes</span><span class="sxs-lookup"><span data-stu-id="1dd0f-103">Guidelines for Packages</span></span>

<span data-ttu-id="1dd0f-104">Dado que el [*control de cuentas de usuario*](u-gly.md) (UAC) de Windows Vista restringe los privilegios durante una instalación, los desarrolladores de Windows Installer paquetes no deben suponer que su instalación siempre tenga acceso a todas las partes del sistema.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-104">Because [*User Account Control*](u-gly.md) (UAC) in Windows Vista restricts privileges during an installation, developers of Windows Installer packages should not assume that their installation always has access to all parts of the system.</span></span>

<span data-ttu-id="1dd0f-105">Un paquete del instalador que se puede implementar correctamente en los usuarios estándar a través de [Directiva de grupo](/previous-versions/windows/desktop/Policy/group-policy-start-page) debe, en la mayoría de los casos, funcionar con UAC en Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-105">An installer package that can be successfully deployed to standard users via [Group Policy](/previous-versions/windows/desktop/Policy/group-policy-start-page) should in most cases also work with UAC in Windows Vista.</span></span> <span data-ttu-id="1dd0f-106">Las excepciones a esto pueden producirse si la [tabla InstallUISequence](installuisequence-table.md) contiene la [acción LaunchConditions](launchconditions-action.md) o la [tabla LaunchCondition](launchcondition-table.md) contiene una condición basada en la [propiedad privileged](privileged.md).</span><span class="sxs-lookup"><span data-stu-id="1dd0f-106">Exceptions to this can occur if the [InstallUISequence table](installuisequence-table.md) contains the [LaunchConditions action](launchconditions-action.md) or the [LaunchCondition table](launchcondition-table.md) contains a condition based on the [Privileged property](privileged.md).</span></span> <span data-ttu-id="1dd0f-107">Por lo tanto, los desarrolladores de paquetes de Windows Installer deben cumplir las siguientes directrices para asegurarse de que su paquete funciona con UAC y Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-107">Windows Installer package developers should therefore adhere to the following guidelines to ensure their package works with UAC and Windows Vista.</span></span>

-   <span data-ttu-id="1dd0f-108">Al incluir una condición de [*contexto de instalación*](i-gly.md) con una acción en la [tabla InstallUISequence](installuisequence-table.md), use una instrucción condicional basada en la [propiedad privileged](privileged.md).</span><span class="sxs-lookup"><span data-stu-id="1dd0f-108">When including an [*installation context*](i-gly.md) condition with an action in the [InstallUISequence table](installuisequence-table.md), use a conditional statement based on the [Privileged property](privileged.md).</span></span> <span data-ttu-id="1dd0f-109">No use una condición basada en la propiedad [**AdminUser**](adminuser.md) .</span><span class="sxs-lookup"><span data-stu-id="1dd0f-109">Do not use a condition based on the [**AdminUser**](adminuser.md) property.</span></span>
-   <span data-ttu-id="1dd0f-110">Al incluir el contexto de instalación con las condiciones de inicio de la instalación, use una [acción personalizada tipo 19](custom-action-type-19.md) en la [tabla InstallExecuteSequence](installexecutesequence-table.md) y haga que la acción personalizada sea condicional en función de la [propiedad privilegiada](privileged.md).</span><span class="sxs-lookup"><span data-stu-id="1dd0f-110">When including the installation context with the installation launch conditions, use a [Custom Action Type 19](custom-action-type-19.md) in the [InstallExecuteSequence table](installexecutesequence-table.md) and make the custom action conditional upon the [Privileged property](privileged.md).</span></span> <span data-ttu-id="1dd0f-111">No utilice una acción en la [tabla LaunchCondition](launchcondition-table.md) con una condición basada en la [propiedad AdminUser](adminuser.md) o la propiedad privilegiada.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-111">Do not use an action in the [LaunchCondition table](launchcondition-table.md) with a condition based on the [AdminUser property](adminuser.md) or Privileged property.</span></span>
-   <span data-ttu-id="1dd0f-112">Para leer o modificar la configuración del sistema, utilice una [acción personalizada de ejecución aplazada](deferred-execution-custom-actions.md) en la [tabla InstallExecuteSequence](installexecutesequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="1dd0f-112">To read or modify the system configuration, use a [deferred execution custom action](deferred-execution-custom-actions.md) in the [InstallExecuteSequence table](installexecutesequence-table.md).</span></span> <span data-ttu-id="1dd0f-113">No use acciones personalizadas de ejecución inmediata en la [tabla InstallUISequence](installuisequence-table.md) para modificar la configuración del sistema.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-113">Do not use immediate execution custom actions in the [InstallUISequence table](installuisequence-table.md) to modify the system configuration.</span></span>
-   <span data-ttu-id="1dd0f-114">Para modificar partes del sistema que no son específicas del usuario, use una acción personalizada diferida en la [tabla InstallExecuteSequence](installexecutesequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="1dd0f-114">To modify parts of the system that are not user specific, use a deferred custom action in the [InstallExecuteSequence table](installexecutesequence-table.md).</span></span> <span data-ttu-id="1dd0f-115">Debe incluir el bit msidbCustomActionTypeNoImpersonate en el tipo de acción personalizada.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-115">You should include the msidbCustomActionTypeNoImpersonate bit in the custom action type.</span></span>
-   <span data-ttu-id="1dd0f-116">Omita el bit 3 del valor de la propiedad de Resumen de [**recuento de palabras**](word-count-summary.md) para indicar que el paquete puede ser necesario para ser elevado.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-116">Omit Bit 3 from the value of the [**Word Count**](word-count-summary.md) Summary Property to indicate that the package can be required to be elevated.</span></span> <span data-ttu-id="1dd0f-117">No incluya este bit a menos que no se requieran privilegios elevados para instalar este paquete.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-117">Do not include this bit unless elevated privileges are not required to install this package.</span></span>
-   <span data-ttu-id="1dd0f-118">Incluya un manifiesto con el nivel de ejecución solicitado de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-118">Include a manifest with the application's Requested Execution Level.</span></span>
-   <span data-ttu-id="1dd0f-119">Incluya un certificado en la tabla [MsiPatchCertificate](msipatchcertificate-table.md) de paquete original y firme todas las revisiones con el mismo certificado.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-119">Include a certificate in the [MsiPatchCertificate](msipatchcertificate-table.md) table of original package and sign all patches with the same certificate.</span></span>
-   <span data-ttu-id="1dd0f-120">Si se requieren privilegios elevados para instalar un paquete de Windows Installer, el autor del paquete debe incluir el atributo [ElevationShield](elevationshield-attribute.md) para el [control Pushbutton](pushbutton-control.md) que se usa para iniciar la instalación.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-120">If elevated privileges are required to install a Windows Installer package, the author of the package should include the [ElevationShield](elevationshield-attribute.md) attribute for the [PushButton control](pushbutton-control.md) used to start the installation.</span></span> <span data-ttu-id="1dd0f-121">Esto le avisará al usuario de que al hacer clic en el botón se mostrará el cuadro de diálogo de UAC que solicita la autorización del administrador para continuar con la instalación.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-121">This will alert the user that clicking on the button will display the UAC dialog box requesting administrator authorization to continue the installation.</span></span>
-   <span data-ttu-id="1dd0f-122">Establezca la propiedad [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) en 1 para indicar al Windows Installer que el paquete se ha creado y probado para cumplir con UAC en Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-122">Set the [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) property to 1 to indicate to the Windows Installer that the package has been authored and tested to comply with UAC in Windows Vista.</span></span> <span data-ttu-id="1dd0f-123">Si no se establece esta propiedad, el instalador determina si el paquete cumple con UAC.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-123">If this property is not set, the installer determines whether the package complies with UAC.</span></span>

<span data-ttu-id="1dd0f-124">Fuera de [Directiva de grupo](/previous-versions/windows/desktop/Policy/group-policy-start-page), se puede usar la siguiente comprobación de compatibilidad con UAC en Windows XP.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-124">Outside of [Group Policy](/previous-versions/windows/desktop/Policy/group-policy-start-page), the following check for UAC compliance can be used on Windows XP.</span></span>

<span data-ttu-id="1dd0f-125">**Para comprobar la compatibilidad de UAC fuera de directiva de grupo**</span><span class="sxs-lookup"><span data-stu-id="1dd0f-125">**To check for UAC compliance outside of Group Policy**</span></span>

1.  <span data-ttu-id="1dd0f-126">Inicie una sesión en el equipo como administrador.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-126">Log on to the computer as an administrator.</span></span>
2.  <span data-ttu-id="1dd0f-127">Anunciar el paquete para una instalación por equipo:</span><span class="sxs-lookup"><span data-stu-id="1dd0f-127">Advertise the package for a per-machine installation:</span></span>

    <span data-ttu-id="1dd0f-128">**msiexec/jm** *package.msi*</span><span class="sxs-lookup"><span data-stu-id="1dd0f-128">**msiexec /jm** *package.msi*</span></span>

3.  <span data-ttu-id="1dd0f-129">Cierre la sesión del equipo.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-129">Log off the computer.</span></span>
4.  <span data-ttu-id="1dd0f-130">Inicie sesión en el equipo como usuario estándar.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-130">Log on to the computer as a standard user.</span></span>
5.  <span data-ttu-id="1dd0f-131">Intente instalar el paquete anunciado:</span><span class="sxs-lookup"><span data-stu-id="1dd0f-131">Attempt to install the advertised package:</span></span>

    <span data-ttu-id="1dd0f-132">**msiexec/i** *package.msi*</span><span class="sxs-lookup"><span data-stu-id="1dd0f-132">**msiexec /i** *package.msi*</span></span>

6.  <span data-ttu-id="1dd0f-133">En la mayoría de los casos, si la instalación se realiza correctamente, el paquete es compatible con UAC.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-133">In most cases, if the installation is successful, the package is UAC compliant.</span></span>
7.  <span data-ttu-id="1dd0f-134">Establezca la propiedad [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) del paquete en 1.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-134">Set the [**MSIDEPLOYMENTCOMPLIANT**](msideploymentcompliant.md) property in the package to 1.</span></span>
8.  <span data-ttu-id="1dd0f-135">Compruebe si la instalación del paquete es correcta mediante Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="1dd0f-135">Test for correct installation of the package using Windows Vista.</span></span>

 

 
