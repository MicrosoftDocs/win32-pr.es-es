---
description: Los mapas de entorno esféricos, o mapas de esferas, son texturas especiales que contienen una imagen de la escena que rodea un objeto o los efectos de iluminación alrededor del objeto.
ms.assetid: b4a8defc-876f-4a23-a12e-e7423a1e8f89
title: Asignación de entorno esférico (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e9b0e7aaa123478ecc7cc327dca0b13a8aae3d0c
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "105677141"
---
# <a name="spherical-environment-mapping-direct3d-9"></a><span data-ttu-id="38839-103">Asignación de entorno esférico (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="38839-103">Spherical Environment Mapping (Direct3D 9)</span></span>

<span data-ttu-id="38839-104">Los mapas de entorno esféricos, o mapas de esferas, son texturas especiales que contienen una imagen de la escena que rodea un objeto o los efectos de iluminación alrededor del objeto.</span><span class="sxs-lookup"><span data-stu-id="38839-104">Spherical environment maps, or sphere maps, are special textures that contain an image of the scene surrounding an object, or the lighting effects around the object.</span></span> <span data-ttu-id="38839-105">A diferencia de los mapas de entorno cúbicos, los mapas de esfera no representan directamente el entorno de un objeto.</span><span class="sxs-lookup"><span data-stu-id="38839-105">Unlike cubic environment maps, sphere maps don't directly represent an object's surroundings.</span></span> <span data-ttu-id="38839-106">En el tema de la imagen de tetera en la [asignación de entorno (Direct3D 9)](environment-mapping.md) se muestran los efectos de reflexión que se pueden lograr con la asignación de esferas.</span><span class="sxs-lookup"><span data-stu-id="38839-106">The teapot image in [Environment Mapping (Direct3D 9)](environment-mapping.md) topic shows the reflection effects you can achieve with sphere mapping.</span></span> <span data-ttu-id="38839-107">Un mapa de esfera es una representación 2D de la vista completa de 360 grados de la escena que rodea a un objeto, como si se hubiera tomado a través de un objetivo de ojos pesqueros, como se muestra en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="38839-107">A sphere map is a 2D representation of the full 360-degree view of the scene surrounding of an object, as if taken through a fish-eye lens, as shown in the following illustration.</span></span>

![Ilustración de un mapa de esfera del interior de un edificio](images/spheremap.png)

## <a name="texture-coordinates-for-spherical-environment-maps"></a><span data-ttu-id="38839-109">Coordenadas de textura para mapas de entorno esféricos</span><span class="sxs-lookup"><span data-stu-id="38839-109">Texture Coordinates for Spherical Environment Maps</span></span>

<span data-ttu-id="38839-110">Las coordenadas de textura que se especifican para cada vértice que recibe una asignación de entorno deben abordar la textura como una función de la distorsión reflectante creada por la curvatura de la superficie.</span><span class="sxs-lookup"><span data-stu-id="38839-110">The texture coordinates that you specify for each vertex receiving an environment mapping should address the texture as a function of the reflective distortion created by the curvature of the surface.</span></span> <span data-ttu-id="38839-111">Las aplicaciones deben calcular estas coordenadas de textura para cada vértice para lograr el efecto deseado.</span><span class="sxs-lookup"><span data-stu-id="38839-111">Applications must compute these texture coordinates for each vertex to achieve the desired effect.</span></span> <span data-ttu-id="38839-112">Una manera sencilla y eficaz de generar coordenadas de textura usa el vértice normal como entrada.</span><span class="sxs-lookup"><span data-stu-id="38839-112">One simple and effective way to generate texture coordinates uses the vertex normal as input.</span></span> <span data-ttu-id="38839-113">Aunque existen varios métodos, la siguiente ecuación es común entre las aplicaciones que realizan la asignación de entorno con mapas de esferas.</span><span class="sxs-lookup"><span data-stu-id="38839-113">Although several methods exist, the following equation is common among applications that perform environment mapping with sphere maps.</span></span>

![ecuación de las coordenadas de textura de cálculo para un mapa de esfera](images/spheremap-formula.png)

<span data-ttu-id="38839-115">En estas fórmulas, usted y v son las coordenadas de textura que se están calculando y N<sub>X</sub> y n<sub>y</sub> son los componentes X e y del vértice del espacio de la cámara normal.</span><span class="sxs-lookup"><span data-stu-id="38839-115">In these formulas, u and v are the texture coordinates being computed, and N<sub>X</sub> and N<sub>Y</sub> are the x and y components of the camera-space vertex normal.</span></span> <span data-ttu-id="38839-116">La fórmula es sencilla pero eficaz.</span><span class="sxs-lookup"><span data-stu-id="38839-116">The formula is simple but effective.</span></span> <span data-ttu-id="38839-117">Si el normal tiene un componente x positivo, el normal apunta a la derecha y la coordenada u se ajusta para abordar la textura correctamente.</span><span class="sxs-lookup"><span data-stu-id="38839-117">If the normal has a positive x component, the normal points to the right, and the u coordinate is adjusted to address the texture appropriately.</span></span> <span data-ttu-id="38839-118">Del mismo modo que la coordenada v: y positivo indica que el punto normal es.</span><span class="sxs-lookup"><span data-stu-id="38839-118">Likewise for the v coordinate: positive y indicates that the normal points up.</span></span> <span data-ttu-id="38839-119">Lo contrario se aplica a los valores negativos en cada componente.</span><span class="sxs-lookup"><span data-stu-id="38839-119">The opposite is true for negative values in each component.</span></span>

<span data-ttu-id="38839-120">Si el punto normal apunta directamente a la cámara, las coordenadas resultantes no recibirán ninguna distorsión.</span><span class="sxs-lookup"><span data-stu-id="38839-120">If the normal points directly at the camera, the resulting coordinates should receive no distortion.</span></span> <span data-ttu-id="38839-121">La diferencia entre + 0,5 y ambas coordenadas coloca el punto de la distorsión cero en el centro del mapa de esfera y el de un vértice normal de (0,0) se dirige a este punto.</span><span class="sxs-lookup"><span data-stu-id="38839-121">The +0.5 bias to both coordinates places the point of zero-distortion at the center of the sphere map, and a vertex normal of (0, 0, z) addresses this point.</span></span> <span data-ttu-id="38839-122">Esta fórmula no tiene en cuenta el componente z de la normal, pero las aplicaciones que usan la fórmula pueden optimizar los cálculos omitiendo los vértices con un normal que tiene un elemento z positivo.</span><span class="sxs-lookup"><span data-stu-id="38839-122">This formula doesn't account for the z component of the normal, but applications that use the formula can optimize computations by skipping vertices with a normal that has a positive z element.</span></span> <span data-ttu-id="38839-123">Esto funciona para los objetos con sombra plana porque, en el espacio de la cámara, si el punto normal se aleja de la cámara (positivo z), el vértice se selecciona cuando se representa el objeto.</span><span class="sxs-lookup"><span data-stu-id="38839-123">This works for flat-shaded objects because, in camera space, if the normal points away from the camera (positive z), the vertex is culled when the object is rendered.</span></span> <span data-ttu-id="38839-124">En el caso de los objetos con sombreado Gouraud, una normal puede apuntar a la cámara (x positivo) y el triángulo que contiene el vértice puede seguir siendo visible.</span><span class="sxs-lookup"><span data-stu-id="38839-124">For Gouraud-shaded objects, a normal can point away from the camera (positive x), and the triangle containing the vertex can still be visible.</span></span> <span data-ttu-id="38839-125">Si no calcula usted y v para este vértice, la esfera podría seguir utilizándose, lo que produce un comportamiento inesperado.</span><span class="sxs-lookup"><span data-stu-id="38839-125">If you don't compute u and v for this vertex, the face might still be used, resulting in unexpected behavior.</span></span>

## <a name="applying-spherical-environment-maps"></a><span data-ttu-id="38839-126">Aplicación de mapas de entorno esféricos</span><span class="sxs-lookup"><span data-stu-id="38839-126">Applying Spherical Environment Maps</span></span>

<span data-ttu-id="38839-127">Para aplicar un mapa de entorno a objetos de la misma manera que para cualquier otra textura, establezca la textura en la fase de textura adecuada con el método [**IDirect3DDevice9:: SetTexture**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="38839-127">You apply an environment map to objects in the same manner as for any other texture, by setting the texture to the appropriate texture stage with the [**IDirect3DDevice9::SetTexture**](/windows/desktop/api) method.</span></span> <span data-ttu-id="38839-128">Establezca el primer parámetro en el índice de la fase de textura deseada y establezca el segundo parámetro en la dirección de la interfaz [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) que se devuelve al crear la textura para el mapa de entorno.</span><span class="sxs-lookup"><span data-stu-id="38839-128">Set the first parameter to the index for the desired texture stage, and set the second parameter to the address of the [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) interface returned when you created the texture for the environment map.</span></span> <span data-ttu-id="38839-129">Puede establecer las operaciones y los argumentos de combinación de colores y alfa según sea necesario para lograr los efectos de combinación de texturas deseados.</span><span class="sxs-lookup"><span data-stu-id="38839-129">You can set the color and alpha blending operations and arguments as needed to achieve the desired texture blending effects.</span></span>

## <a name="related-topics"></a><span data-ttu-id="38839-130">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="38839-130">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="38839-131">Asignación de entorno</span><span class="sxs-lookup"><span data-stu-id="38839-131">Environment Mapping</span></span>](environment-mapping.md)
</dt> </dl>

 

 
