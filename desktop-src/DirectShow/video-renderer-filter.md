---
description: Filtro de representador de vídeo
ms.assetid: 7719ed9d-e3b9-4c84-b587-4e120b5cabf8
title: Filtro de representador de vídeo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5ca3becb4fbdbb52a9968481aade07d14d963828
ms.sourcegitcommit: 63753fcfb0afbbe5ec283fb8316e62c2dc950f66
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/22/2021
ms.locfileid: "107908423"
---
# <a name="video-renderer-filter"></a><span data-ttu-id="bf1f5-103">Filtro de representador de vídeo</span><span class="sxs-lookup"><span data-stu-id="bf1f5-103">Video Renderer Filter</span></span>

<span data-ttu-id="bf1f5-104">El filtro Video Renderer es un representador de vídeo sólido y de uso general.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-104">The Video Renderer filter is a robust, all-purpose video renderer.</span></span>

> [!Note]  
> <span data-ttu-id="bf1f5-105">En Windows XP y versiones posteriores, el representador de vídeo predeterminado es el filtro de representador de mezcla de vídeo [7](video-mixing-renderer-filter-7.md) (VMR-7).</span><span class="sxs-lookup"><span data-stu-id="bf1f5-105">On Windows XP and later, the default video renderer is the [Video Mixing Renderer Filter 7](video-mixing-renderer-filter-7.md) (VMR-7).</span></span> <span data-ttu-id="bf1f5-106">El VMR-7 y el representador de vídeo tienen el nombre descriptivo "Representador de vídeo".</span><span class="sxs-lookup"><span data-stu-id="bf1f5-106">The VMR-7 and the Video Renderer both have the friendly name "Video Renderer."</span></span> <span data-ttu-id="bf1f5-107">En plataformas anteriores, el representador de vídeo es el representador predeterminado.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-107">On earlier platforms, the Video Renderer is the default renderer.</span></span> <span data-ttu-id="bf1f5-108">Consulte [Elección del representador derecho.](choosing-the-right-renderer.md)</span><span class="sxs-lookup"><span data-stu-id="bf1f5-108">See [Choosing the Right Renderer](choosing-the-right-renderer.md).</span></span>

 

<span data-ttu-id="bf1f5-109">El representador de vídeo usa DirectDraw y superficies superpuestas, si la tarjeta de vídeo las admite.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-109">The Video Renderer uses DirectDraw and overlay surfaces, if the video card supports them.</span></span> <span data-ttu-id="bf1f5-110">El Administrador de gráficos de filtros expone la [**interfaz IVideoWindow,**](/windows/desktop/api/Control/nn-control-ivideowindow) que permite a las aplicaciones establecer y recuperar propiedades en el representador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-110">The Filter Graph Manager exposes the [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) interface, which enables applications to set and retrieve properties on the Video Renderer.</span></span> <span data-ttu-id="bf1f5-111">Con las tarjetas de vídeo más recientes, el representador de vídeo admite la representación a pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-111">With newer video cards, the Video Renderer supports full-screen rendering.</span></span> <span data-ttu-id="bf1f5-112">De lo contrario, el Administrador de gráficos de filtros cambia automáticamente al [filtro Representador de pantalla](full-screen-renderer-filter.md) completa para el modo de pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-112">Otherwise, the Filter Graph Manager automatically switches to the [Full Screen Renderer](full-screen-renderer-filter.md) filter for full-screen mode.</span></span> <span data-ttu-id="bf1f5-113">Vea [**IVideoWindow::p ut \_ FullScreenMode**](/windows/desktop/api/Control/nf-control-ivideowindow-put_fullscreenmode) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-113">See [**IVideoWindow::put\_FullScreenMode**](/windows/desktop/api/Control/nf-control-ivideowindow-put_fullscreenmode) for more information.</span></span>

-   <span data-ttu-id="bf1f5-114">\[! Importante\]</span><span class="sxs-lookup"><span data-stu-id="bf1f5-114">\[!Important\]</span></span>  
    > <span data-ttu-id="bf1f5-115">Normalmente, la ventana de vídeo de este filtro procesa mensajes en un subproceso de trabajo creado por el Administrador de gráficos de filtros.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-115">Normally, this filter's video window processes messages on a worker thread created by the Filter Graph Manager.</span></span> <span data-ttu-id="bf1f5-116">Howerver, si una aplicación crea directamente el filtro mediante **CoCreateInstance**, la ventana de vídeo procesa los mensajes en el subproceso de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-116">Howerver, if an application directly creates the filter using **CoCreateInstance**, the video window processes messages on the application thread.</span></span> <span data-ttu-id="bf1f5-117">En ese caso, el subproceso de aplicación debe tener un bucle de mensajes para enviar mensajes a la ventana de vídeo.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-117">In that case, the application thread must have a message loop, to dispatch messages to the video window.</span></span> <span data-ttu-id="bf1f5-118">Además, el subproceso no debe salir hasta la última llamada **de** versión al representador de vídeo, que se produce cuando se cierra el Administrador de gráficos de filtros.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-118">Also, the thread must not exit until the final **Release** call to the Video Renderer, which occurs when the Filter Graph Manager shuts down.</span></span> <span data-ttu-id="bf1f5-119">De lo contrario, la aplicación podría interbloqueo.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-119">Otherwise, the application might deadlock.</span></span>

     



| <span data-ttu-id="bf1f5-120">Etiqueta</span><span class="sxs-lookup"><span data-stu-id="bf1f5-120">Label</span></span> | <span data-ttu-id="bf1f5-121">Value</span><span class="sxs-lookup"><span data-stu-id="bf1f5-121">Value</span></span> |
|------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bf1f5-122">Interfaces de filtro</span><span class="sxs-lookup"><span data-stu-id="bf1f5-122">Filter Interfaces</span></span>                        | <span data-ttu-id="bf1f5-123">[**IBaseFilter,**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter) [**IBasicVideo,**](/windows/desktop/api/Control/nn-control-ibasicvideo) [**IBasicVideo2,**](/windows/desktop/api/Control/nn-control-ibasicvideo2) [**IDirectDrawVideo,**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-idirectdrawvideo) [**IKsPropertySet,**](ikspropertyset.md) [**IMediaPosition,**](/windows/desktop/api/Control/nn-control-imediaposition) [**IMediaSeeking,**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking) [**IQualityControl,**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol) [**IQualProp,**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop) [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow)</span><span class="sxs-lookup"><span data-stu-id="bf1f5-123">[**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**IBasicVideo**](/windows/desktop/api/Control/nn-control-ibasicvideo), [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2), [**IDirectDrawVideo**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-idirectdrawvideo), [**IKsPropertySet**](ikspropertyset.md), [**IMediaPosition**](/windows/desktop/api/Control/nn-control-imediaposition), [**IMediaSeeking**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol), [**IQualProp**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow)</span></span> |
| <span data-ttu-id="bf1f5-124">Tipos de medios de pin de entrada</span><span class="sxs-lookup"><span data-stu-id="bf1f5-124">Input Pin Media Types</span></span>                    | <span data-ttu-id="bf1f5-125">Formatos de vídeo sin comprimir.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-125">Uncompressed video formats.</span></span>                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="bf1f5-126">Interfaces de pin de entrada</span><span class="sxs-lookup"><span data-stu-id="bf1f5-126">Input Pin Interfaces</span></span>                     | <span data-ttu-id="bf1f5-127">[**IMemInputPin,**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) [**IOverlay,**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) [**IPin,**](/windows/desktop/api/Strmif/nn-strmif-ipin) [**IPinConnection,**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection) [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span><span class="sxs-lookup"><span data-stu-id="bf1f5-127">[**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay), [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span></span>                                                                                                                                                                                                                           |
| <span data-ttu-id="bf1f5-128">Tipos de medios de pin de salida</span><span class="sxs-lookup"><span data-stu-id="bf1f5-128">Output Pin Media Types</span></span>                   | <span data-ttu-id="bf1f5-129">No es aplicable.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-129">Not applicable.</span></span>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="bf1f5-130">Interfaces de pin de salida</span><span class="sxs-lookup"><span data-stu-id="bf1f5-130">Output Pin Interfaces</span></span>                    | <span data-ttu-id="bf1f5-131">No es aplicable.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-131">Not applicable.</span></span>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="bf1f5-132">Filtrar CLSID</span><span class="sxs-lookup"><span data-stu-id="bf1f5-132">Filter CLSID</span></span>                             | <span data-ttu-id="bf1f5-133">Representador de \_ vídeo CLSID</span><span class="sxs-lookup"><span data-stu-id="bf1f5-133">CLSID\_VideoRenderer</span></span>                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="bf1f5-134">CLSID de la página de propiedades</span><span class="sxs-lookup"><span data-stu-id="bf1f5-134">Property Page CLSID</span></span>                      | <span data-ttu-id="bf1f5-135">No hay ninguna página de propiedades.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-135">No property page.</span></span>                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="bf1f5-136">Executable</span><span class="sxs-lookup"><span data-stu-id="bf1f5-136">Executable</span></span>                               | <span data-ttu-id="bf1f5-137">quartz.dll</span><span class="sxs-lookup"><span data-stu-id="bf1f5-137">quartz.dll</span></span>                                                                                                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="bf1f5-138">Mérito</span><span class="sxs-lookup"><span data-stu-id="bf1f5-138">Merit</span></span>](merit.md)                       | <span data-ttu-id="bf1f5-139">Windows XP y versiones posteriores: **UNLIKELY \_**</span><span class="sxs-lookup"><span data-stu-id="bf1f5-139">Windows XP and later: **MERIT\_UNLIKELY**</span></span>                                                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="bf1f5-140">Categoría de filtro</span><span class="sxs-lookup"><span data-stu-id="bf1f5-140">Filter Category</span></span>](filter-categories.md) | <span data-ttu-id="bf1f5-141">**CLSID \_ LegacyAmFilterCategory**</span><span class="sxs-lookup"><span data-stu-id="bf1f5-141">**CLSID\_LegacyAmFilterCategory**</span></span>                                                                                                                                                                                                                                                                                                                                                                        |



 

## <a name="remarks"></a><span data-ttu-id="bf1f5-142">Comentarios</span><span class="sxs-lookup"><span data-stu-id="bf1f5-142">Remarks</span></span>

<span data-ttu-id="bf1f5-143">En la versión de depuración de Quartz.dll, si el nivel de depuración LOG TRACE está establecido en 5 o superior, el representador de vídeo muestra las marcas de tiempo de cada fotograma en la ventana \_ de vídeo.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-143">In the debug version of Quartz.dll, if the LOG\_TRACE debug level is set to 5 or higher, the Video Renderer displays each frame's time stamps on the video window.</span></span> <span data-ttu-id="bf1f5-144">Estos números no aparecen en la versión comercial del archivo DLL.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-144">These numbers do not appear in the retail version of the DLL.</span></span> <span data-ttu-id="bf1f5-145">Para obtener más información, vea [Depurar funciones de salida](debug-output-functions.md).</span><span class="sxs-lookup"><span data-stu-id="bf1f5-145">For more information, see [Debug Output Functions](debug-output-functions.md).</span></span>

<span data-ttu-id="bf1f5-146">Los comentarios siguientes están destinados a los desarrolladores de filtros:</span><span class="sxs-lookup"><span data-stu-id="bf1f5-146">The following remarks are intended for filter developers:</span></span>

<span data-ttu-id="bf1f5-147">El representador de vídeo acepta formatos YUV si la tarjeta gráfica de vídeo admite superficies superpuestas de YUV.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-147">The Video Renderer accepts YUV formats if the video graphics card supports YUV overlay surfaces.</span></span> <span data-ttu-id="bf1f5-148">Sin embargo, la primera vez que se conecta al filtro ascendente, el representador de vídeo requiere un formato RGB que coincida con la profundidad de color de la configuración actual del monitor.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-148">When it first connects to the upstream filter, however, the Video Renderer requires an RGB format that matches the color depth of the current monitor settings.</span></span> <span data-ttu-id="bf1f5-149">Por ejemplo, si la configuración de pantalla actual es de color de 24 bits, el filtro ascendente debe ser capaz de proporcionar vídeo RGB de 24 bits.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-149">For example, if the current display setting is 24-bit color, the upstream filter must be able to provide 24-bit RGB video.</span></span> <span data-ttu-id="bf1f5-150">Cuando el gráfico de filtro cambia a un estado de ejecución, el representador de vídeo negocia un cambio de formato dinámico en el espacio de color YUV adecuado.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-150">When the filter graph switches to a runing state, the Video Renderer negotiates a dynamic format change to the appropriate YUV color space.</span></span>

<span data-ttu-id="bf1f5-151">Al conectarse con un tipo RGB, el representador de vídeo garantiza que puede usar GDI en caso de que DirectDraw no esté disponible.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-151">By connecting with an RGB type, the Video Renderer ensures that it can use GDI in case DirectDraw is not available.</span></span> <span data-ttu-id="bf1f5-152">Cambiará a GDI si otra aplicación usa la memoria de vídeo, si el rectángulo de vídeo se desfila dos monitores en un sistema de varios monitores o si el rectángulo de vídeo está completamente oculto por otra ventana.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-152">It will switch to GDI if another application is using the video memory, if the video rectangle straddles two monitors on a multi-monitor system, or if the video rectangle is completely obscured by another window.</span></span>

> [!Note]  
> <span data-ttu-id="bf1f5-153">El representador de mezcla de vídeo no realiza este tipo de cambio de formato dinámico y no requiere un tipo de medio RGB, ya que nunca usa GDI para la representación.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-153">The Video Mixing Renderer does not perform this type of dynamic format change, and does not require an RGB media type, because it never uses GDI for rendering.</span></span>

 

<span data-ttu-id="bf1f5-154">Para negociar un cambio de formato, el representador de vídeo llama a [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) con el nuevo tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-154">To negotiate a format change, the Video Renderer calls [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) with the new media type.</span></span> <span data-ttu-id="bf1f5-155">Si el filtro ascendente devuelve S \_ OK, el representador de vídeo asocia el nuevo medio al ejemplo siguiente.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-155">If the upstream filter returns S\_OK, the Video Renderer attaches the new media to the next sample.</span></span> <span data-ttu-id="bf1f5-156">El filtro ascendente debe llamar a [**IMediaSample::GetMediaType en**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getmediatype) cada ejemplo.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-156">The upstream filter should call [**IMediaSample::GetMediaType**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getmediatype) on each sample.</span></span> <span data-ttu-id="bf1f5-157">Si **GetMediaType** devuelve un valor distinto de **NULL,** indica un cambio de formato y el filtro ascendente debe responder cambiando los tipos de salida.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-157">If **GetMediaType** returns a non-**NULL** value, it indicates a format change, and the upstream filter should respond by switching output types.</span></span> <span data-ttu-id="bf1f5-158">(No cambie los tipos en el **método QueryAccept).** El filtro ascendente debe aceptar al menos los tipos RGB principales e idealmente debe admitir los tipos YUV comunes.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-158">(Do not switch types in the **QueryAccept** method.) The upstream filter should accept at least the major RGB types, and ideally should support the common YUV types.</span></span> <span data-ttu-id="bf1f5-159">Durante el streaming, el representador de vídeo puede cambiar entre los tipos YUV y RGB varias veces.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-159">During streaming, the Video Renderer might switch back and forth between YUV and RGB types any number of times.</span></span> <span data-ttu-id="bf1f5-160">El representador de vídeo no acepta cambios de formato dinámico iniciados por el filtro ascendente.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-160">The Video Renderer does not accept dynamic format changes initiated by the upstream filter.</span></span>

<span data-ttu-id="bf1f5-161">Cuando el representador de vídeo se dibuja en una superficie superpuesta de DirectDraw, asigna un único búfer para su pin de entrada.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-161">When the Video Renderer draws to a DirectDraw overlay surface, it allocates a single buffer for its input pin.</span></span> <span data-ttu-id="bf1f5-162">Si el filtro ascendente intenta forzar una conexión mediante varios búferes, el representador de vídeo no podrá usar la superficie superpuesta.</span><span class="sxs-lookup"><span data-stu-id="bf1f5-162">If the upstream filter attempts to force a connection using multiple buffers, the Video Renderer will be unable to use the overlay surface.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bf1f5-163">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="bf1f5-163">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bf1f5-164">Filtros de DirectShow</span><span class="sxs-lookup"><span data-stu-id="bf1f5-164">DirectShow Filters</span></span>](directshow-filters.md)
</dt> </dl>

 

 



