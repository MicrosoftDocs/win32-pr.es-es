---
title: Mapas en un grupo de iconos
description: Cuando un recurso se crea con la \_ marca D3D11 \_ de recursos varios \_ en mosaico, los mosaicos que componen el recurso provienen de apuntar a ubicaciones de un grupo de mosaicos.
ms.assetid: 1DBE23B2-A1E6-4491-9B74-4E92508A68FC
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1537113d6685e39cab94445c8d3f16d406638820
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104997052"
---
# <a name="mappings-are-into-a-tile-pool"></a><span data-ttu-id="b37cd-103">Mapas en un grupo de iconos</span><span class="sxs-lookup"><span data-stu-id="b37cd-103">Mappings are into a tile pool</span></span>

<span data-ttu-id="b37cd-104">Cuando un recurso se crea con la marca [**D3D11 de \_ recursos varios en \_ \_ mosaico**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) , los mosaicos que componen el recurso provienen de apuntar a ubicaciones de un grupo de mosaicos.</span><span class="sxs-lookup"><span data-stu-id="b37cd-104">When a resource is created with the [**D3D11\_RESOURCE\_MISC\_TILED**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) flag, the tiles that make up the resource come from pointing at locations in a tile pool.</span></span> <span data-ttu-id="b37cd-105">Un grupo de mosaicos es un grupo de memoria (respaldado por una o varias asignaciones en segundo plano, no detectadas por la aplicación).</span><span class="sxs-lookup"><span data-stu-id="b37cd-105">A tile pool is a pool of memory (backed by one or more allocations behind the scenes - unseen by the application).</span></span> <span data-ttu-id="b37cd-106">El sistema operativo y el controlador de pantalla administran este grupo de memoria y la superficie de memoria se entiende fácilmente por parte de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="b37cd-106">The operating system and display driver manage this pool of memory, and the memory footprint is easily understood by an application.</span></span> <span data-ttu-id="b37cd-107">Los recursos en mosaico asignan regiones de 64 KB apuntando a ubicaciones de un grupo de mosaicos.</span><span class="sxs-lookup"><span data-stu-id="b37cd-107">Tiled resources map 64KB regions by pointing to locations in a tile pool.</span></span> <span data-ttu-id="b37cd-108">Una Fallout de esta configuración permite que varios recursos compartan y reutilicen los mismos mosaicos, y que también se reutilicen los mismos mosaicos en ubicaciones diferentes dentro de un recurso si se desea.</span><span class="sxs-lookup"><span data-stu-id="b37cd-108">One fallout of this setup is it allows multiple resources to share and reuse the same tiles, and also for the same tiles to be reused at different locations within a resource if desired.</span></span>

<span data-ttu-id="b37cd-109">El costo de la flexibilidad de rellenar los iconos de un recurso de un grupo de mosaicos es que el recurso tiene que realizar el trabajo de definir y mantener la asignación de los mosaicos del grupo de mosaicos que representan los mosaicos necesarios para el recurso.</span><span class="sxs-lookup"><span data-stu-id="b37cd-109">The cost for the flexibility of populating the tiles for a resource out of a tile pool is that the resource has to do the work of defining and maintaining the mapping of which tiles in the tile pool represent the tiles needed for the resource.</span></span> <span data-ttu-id="b37cd-110">Se pueden cambiar las asignaciones de mosaicos.</span><span class="sxs-lookup"><span data-stu-id="b37cd-110">Tile mappings can be changed.</span></span> <span data-ttu-id="b37cd-111">Además, no es necesario asignar todos los mosaicos de un recurso a la vez; un recurso puede tener asignaciones **null** .</span><span class="sxs-lookup"><span data-stu-id="b37cd-111">Also, not all tiles in a resource need to be mapped at a time; a resource can have **NULL** mappings.</span></span> <span data-ttu-id="b37cd-112">Una asignación **null** define un icono como no disponible desde el punto de vista del recurso que tiene acceso a él.</span><span class="sxs-lookup"><span data-stu-id="b37cd-112">A **NULL** mapping defines a tile as not being available from the point of view of the resource accessing it.</span></span>

<span data-ttu-id="b37cd-113">Se pueden crear varios grupos de mosaicos y cualquier número de recursos en mosaico puede asignarse a un grupo de mosaicos determinado al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="b37cd-113">Multiple tile pools can be created, and any number of tiled resources can map into any given tile pool at the same time.</span></span> <span data-ttu-id="b37cd-114">También se pueden incrementar o reducir los grupos de mosaicos.</span><span class="sxs-lookup"><span data-stu-id="b37cd-114">Tile pools can also be grown or shrunk.</span></span> <span data-ttu-id="b37cd-115">Para obtener más información, consulte [cambio de tamaño del grupo de mosaicos](tile-pool-resizing.md).</span><span class="sxs-lookup"><span data-stu-id="b37cd-115">For more info, see [Tile pool resizing](tile-pool-resizing.md).</span></span> <span data-ttu-id="b37cd-116">Una restricción que existe para simplificar la implementación del controlador de pantalla y del tiempo de ejecución es que un recurso en mosaico determinado solo puede tener asignaciones en un grupo de mosaicos a la vez (en lugar de tener una asignación simultánea a varios grupos de mosaicos).</span><span class="sxs-lookup"><span data-stu-id="b37cd-116">One constraint that exists to simplify display driver and runtime implementation is that a given tiled resource can only have mappings into at most one tile pool at a time (as opposed to having simultaneous mapping to multiple tile pools).</span></span>

<span data-ttu-id="b37cd-117">La cantidad de almacenamiento que está asociada a un recurso en mosaico en sí (es decir, memoria de grupo de mosaicos independiente) es aproximadamente proporcional al número de mosaicos asignados realmente al grupo en un momento dado.</span><span class="sxs-lookup"><span data-stu-id="b37cd-117">The amount of storage that is associated with a tiled resource itself (that is, independent tile-pool memory) is roughly proportional to the number of tiles actually mapped to the pool at any given time.</span></span> <span data-ttu-id="b37cd-118">En el hardware, este hecho reduce el tamaño de la superficie de memoria para el almacenamiento de tabla de páginas aproximadamente con la cantidad de mosaicos que se asignan (por ejemplo, con un esquema de tabla de páginas multinivel según corresponda).</span><span class="sxs-lookup"><span data-stu-id="b37cd-118">In hardware, this fact boils down to scaling the memory footprint for page table storage roughly with the amount of tiles that are mapped (for example, using a multilevel page table scheme as appropriate).</span></span>

<span data-ttu-id="b37cd-119">El grupo de mosaicos puede considerarse como una abstracción de software totalmente que permite que las aplicaciones de Direct3D puedan programar eficazmente las tablas de páginas en la unidad de procesamiento de gráficos (GPU) sin tener que conocer los detalles de implementación de bajo nivel (o tratar directamente las direcciones de puntero).</span><span class="sxs-lookup"><span data-stu-id="b37cd-119">The tile pool can be thought of as an entirely software abstraction that enables Direct3D applications to effectively be able to program the page tables on the graphics processing unit (GPU) without having to know the low level implementation details (or deal with pointer addresses directly).</span></span> <span data-ttu-id="b37cd-120">Los grupos de mosaicos no aplican ningún nivel de direccionamiento indirecto adicional en el hardware.</span><span class="sxs-lookup"><span data-stu-id="b37cd-120">Tile pools don't apply any additional levels of indirection in hardware.</span></span> <span data-ttu-id="b37cd-121">Las optimizaciones de una tabla de páginas de un solo nivel mediante construcciones como los directorios de páginas son independientes del concepto de grupo de mosaicos.</span><span class="sxs-lookup"><span data-stu-id="b37cd-121">Optimizations of a single level page table using constructs like page directories are independent of the tile pool concept.</span></span>

<span data-ttu-id="b37cd-122">Vamos a explorar qué almacenamiento podría requerir la tabla de páginas en el peor de los casos (aunque en las implementaciones de la práctica solo se requiere almacenamiento aproximadamente proporcional a lo que se asigna).</span><span class="sxs-lookup"><span data-stu-id="b37cd-122">Let us explore what storage the page table itself could require in the worst case (though in practice implementations only require storage roughly proportional to what is mapped).</span></span>

<span data-ttu-id="b37cd-123">Suponga que cada entrada de la tabla de páginas es 64 bits.</span><span class="sxs-lookup"><span data-stu-id="b37cd-123">Suppose each page table entry is 64 bits.</span></span>

<span data-ttu-id="b37cd-124">En el peor de los casos, el tamaño de la tabla de páginas se ha alcanzado para una sola superficie, dados los límites de recursos en Direct3D 11, supongamos que se crea un recurso en mosaico con un formato de 128 bits por elemento (por ejemplo, un valor de tipo de elemento float), por lo que un mosaico de 64 KB solo contiene 4096 píxeles.</span><span class="sxs-lookup"><span data-stu-id="b37cd-124">For the worst-case page table size hit for a single surface, given the resource limits in Direct3D 11, suppose a tiled resource is created with a 128 bit-per-element format (for example, a RGBA float), so a 64KB tile contains only 4096 pixels.</span></span> <span data-ttu-id="b37cd-125">El tamaño máximo admitido de [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) de 16384 \* 16384 \* 2048 (pero con un solo mipmap) requeriría aproximadamente 1 GB de almacenamiento en la tabla de la página si se rellenaron completamente (sin incluir los mapas MIP) mediante entradas de la tabla de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="b37cd-125">The maximum supported [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) size of 16384\*16384\*2048 (but with only a single mipmap) would require about 1GB of storage in the page table if fully populated (not including mipmaps) using 64 bit table entries.</span></span> <span data-ttu-id="b37cd-126">Agregar mapas de bits aumentaría el almacenamiento de la tabla de páginas de asignación completa (el peor de los casos) en unos tercios a aproximadamente 1,3 GB.</span><span class="sxs-lookup"><span data-stu-id="b37cd-126">Adding mipmaps would grow the fully-mapped (worst case) page table storage by about a third, to about 1.3GB.</span></span>

<span data-ttu-id="b37cd-127">Este caso daría acceso a aproximadamente 10,6 terabytes de memoria direccionable.</span><span class="sxs-lookup"><span data-stu-id="b37cd-127">This case would give access to about 10.6 terabytes of addressable memory.</span></span> <span data-ttu-id="b37cd-128">Sin embargo, puede haber un límite en la cantidad de memoria direccionable, lo que reduciría estos importes, quizás en torno al intervalo de terabytes.</span><span class="sxs-lookup"><span data-stu-id="b37cd-128">There might be a limit on the amount of addressable memory however, which would reduce these amounts, perhaps to around the terabyte range.</span></span>

<span data-ttu-id="b37cd-129">Otro caso que se debe tener en cuenta es un único recurso en mosaico de [**Texture2D**](/windows/desktop/direct3dhlsl/sm5-object-texture2d) de 16384 \* 16384 con un formato de bit por elemento de 32, incluidos los mapas de bits.</span><span class="sxs-lookup"><span data-stu-id="b37cd-129">Another case to consider is a single [**Texture2D**](/windows/desktop/direct3dhlsl/sm5-object-texture2d) tiled resource of 16384\*16384 with a 32 bit-per-element format, including mipmaps.</span></span> <span data-ttu-id="b37cd-130">El espacio necesario en una tabla de páginas completa sería aproximadamente 170KB con las entradas de la tabla de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="b37cd-130">The space needed in a fully populated page table would be roughly 170KB with 64 bit table entries.</span></span>

<span data-ttu-id="b37cd-131">Por último, considere la posibilidad de usar un formato BC, por ejemplo BC7 con 128 bits por mosaico de 4x4 píxeles.</span><span class="sxs-lookup"><span data-stu-id="b37cd-131">Finally, consider an example using a BC format, say BC7 with 128 bits per tile of 4x4 pixels.</span></span> <span data-ttu-id="b37cd-132">Es un byte por píxel.</span><span class="sxs-lookup"><span data-stu-id="b37cd-132">That is one byte per pixel.</span></span> <span data-ttu-id="b37cd-133">Un [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) de 16384 \* 16384 \* 2048, incluidos los mapas de mapas, necesitaría aproximadamente 85MB para rellenar por completo esta memoria en una tabla de páginas.</span><span class="sxs-lookup"><span data-stu-id="b37cd-133">A [**Texture2DArray**](/windows/desktop/direct3dhlsl/sm5-object-texture2darray) of 16384\*16384\*2048 including mipmaps would require roughly 85MB to fully populate this memory in a page table.</span></span> <span data-ttu-id="b37cd-134">Esto no es malo, lo que permite que un recurso en mosaico abarque 550 Gigapixels (512 GB de memoria en este caso).</span><span class="sxs-lookup"><span data-stu-id="b37cd-134">That is not bad considering this allows one tiled resource to span 550 gigapixels (512 GB of memory in this case).</span></span>

<span data-ttu-id="b37cd-135">En la práctica, no se definió ninguna parte cercana a estas asignaciones completas, dado que la cantidad de memoria física disponible no permitiría en todo momento cerca de que se asignara y se haga referencia a ella a la vez.</span><span class="sxs-lookup"><span data-stu-id="b37cd-135">In practice, nowhere near these full mappings would be defined given that the amount of physical memory available wouldn't allow anywhere near that much to be mapped and referenced at a time.</span></span> <span data-ttu-id="b37cd-136">Sin embargo, con un grupo de mosaicos, las aplicaciones pueden optar por reutilizar los mosaicos (por ejemplo, reutilizar un icono de color "negro" para las regiones de color negro de gran tamaño de una imagen) de forma eficaz mediante el grupo de mosaicos (es decir, las asignaciones de tabla de páginas) como herramienta para la compresión de memoria.</span><span class="sxs-lookup"><span data-stu-id="b37cd-136">But with a tile pool, applications could choose to reuse tiles (as a simple example, reusing a "black" colored tile for large black regions in an image) - effectively using the tile pool (that is, page table mappings) as a tool for memory compression.</span></span>

<span data-ttu-id="b37cd-137">El contenido inicial de la tabla de páginas es **null** para todas las entradas.</span><span class="sxs-lookup"><span data-stu-id="b37cd-137">The initial contents of the page table are **NULL** for all entries.</span></span> <span data-ttu-id="b37cd-138">Las aplicaciones tampoco pueden pasar los datos iniciales para el contenido de la memoria de la superficie desde que se inicia sin necesidad de hacer una copia de seguridad de la memoria.</span><span class="sxs-lookup"><span data-stu-id="b37cd-138">Applications also can't pass initial data for the memory contents of the surface since it starts off with no memory backing.</span></span>

## <a name="in-this-section"></a><span data-ttu-id="b37cd-139">En esta sección</span><span class="sxs-lookup"><span data-stu-id="b37cd-139">In this section</span></span>



| <span data-ttu-id="b37cd-140">Tema</span><span class="sxs-lookup"><span data-stu-id="b37cd-140">Topic</span></span>                                                                                                   | <span data-ttu-id="b37cd-141">Descripción</span><span class="sxs-lookup"><span data-stu-id="b37cd-141">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                |
|---------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="b37cd-142">Creación de grupos de iconos</span><span class="sxs-lookup"><span data-stu-id="b37cd-142">Tile pool creation</span></span>](tile-pool-creation.md)<br/>                                                 | <span data-ttu-id="b37cd-143">Un grupo de mosaicos se crea a través de la API [**ID3D11Device:: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) pasando la marca [**D3D11 \_ Resource \_ Misc del \_ \_ grupo de mosaicos**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) en el miembro **MiscFlags** de la estructura [**\_ \_ DESC del búfer D3D11**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_buffer_desc) a la que apunta el parámetro *pDesc* .</span><span class="sxs-lookup"><span data-stu-id="b37cd-143">A tile pool is created via the [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) API by passing the [**D3D11\_RESOURCE\_MISC\_TILE\_POOL**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_resource_misc_flag) flag in the **MiscFlags** member of the [**D3D11\_BUFFER\_DESC**](/windows/desktop/api/D3D11/ns-d3d11-d3d11_buffer_desc) structure that the *pDesc* parameter points to.</span></span> <br/> |
| [<span data-ttu-id="b37cd-144">Cambio del tamaño de los grupos de iconos</span><span class="sxs-lookup"><span data-stu-id="b37cd-144">Tile pool resizing</span></span>](tile-pool-resizing.md)<br/>                                                 | <span data-ttu-id="b37cd-145">Use la API [**ID3D11DeviceContext2:: ResizeTilePool**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool) para aumentar el tamaño de un grupo de mosaicos si la aplicación necesita más espacio de trabajo para los recursos en mosaico asignados a él o para reducir si se necesita menos espacio.</span><span class="sxs-lookup"><span data-stu-id="b37cd-145">Use the [**ID3D11DeviceContext2::ResizeTilePool**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool) API to grow a tile pool if the application needs more working set for the tiled resources mapping into it or to shrink if less space is needed.</span></span> <br/>                                                                                                                    |
| [<span data-ttu-id="b37cd-146">Seguimiento de peligros frente a recursos de grupos de iconos</span><span class="sxs-lookup"><span data-stu-id="b37cd-146">Hazard tracking versus tile pool resources</span></span>](hazard-tracking-versus-tile-pool-resources.md)<br/> | <span data-ttu-id="b37cd-147">En el caso de los recursos no en mosaico, Direct3D puede evitar ciertas condiciones de riesgo durante la representación, pero como el seguimiento de peligros sería un nivel de mosaico para los recursos en mosaico, el seguimiento de condiciones de riesgo durante la representación de recursos en mosaico podría ser demasiado caro.</span><span class="sxs-lookup"><span data-stu-id="b37cd-147">For non-tiled resources, Direct3D can prevent certain hazard conditions during rendering, but because hazard tracking would be at a tile level for tiled resources, tracking hazard conditions during rendering of tiled resources might be too expensive.</span></span> <br/>                                                                                                     |



 

## <a name="related-topics"></a><span data-ttu-id="b37cd-148">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="b37cd-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b37cd-149">Crear recursos en mosaico</span><span class="sxs-lookup"><span data-stu-id="b37cd-149">Creating tiled resources</span></span>](creating-tiled-resources.md)
</dt> </dl>

 

