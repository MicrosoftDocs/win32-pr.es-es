---
description: En este tema se describen los detalles de los eventos al usar las características del proxy de datos de análisis de tinta.
ms.assetid: 837867a4-7cda-41b0-b20d-eec9a3a7fb86
title: Flujo de eventos del proxy de datos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 962348261b1c6a9200a615f03ce15a2bd7bb8830
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105697571"
---
# <a name="data-proxy-event-flow"></a>Flujo de eventos del proxy de datos

En este tema se describen los detalles de los eventos al usar las características del proxy de datos de análisis de tinta.

## <a name="data-proxy-event-flow-overview"></a>Introducción al flujo de eventos del proxy de datos

En el uso del proxy de datos de [**InkAnalyzer**](inkanalyzer.md), se supone que la aplicación que integra el InkAnalyzer ya tiene un modelo de documento existente al que desea obtener el proxy de los resultados del análisis. También se supone que la aplicación tendrá los resultados de cualquier operación de análisis anterior que deseen compilar en su modelo de documento. También puede haber un contexto que no sea de entrada de lápiz que se puede Agregar a **InkAnalyzer** en forma de **ImageNode** o **TextWordNode**[**ContextNode**](icontextnode.md) para que se pueda anotar con tinta.

La clave del sistema del proxy de datos es para que la aplicación Marque el [**ContextNode**](icontextnode.md) como "rellenado parcialmente" mediante [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md). Cuando esta marca es true, el [**InkAnalyzer**](inkanalyzer.md) presupone que hay tres cosas sobre ese **ContextNode**:

-   La ubicación de [**ContextNode**](icontextnode.md) es correcta.
-   El tipo de [**ContextNode**](icontextnode.md) es correcto.
-   Toda la demás información sobre ese [**ContextNode**](icontextnode.md) se almacena en otro lugar.

Según estas tres reglas, si y cuando [**InkAnalyzer**](inkanalyzer.md) necesita información adicional sobre un [**ContextNode**](icontextnode.md) , generará el evento [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) y hará referencia al **ContextNode** en cuestión. De esta forma, la aplicación tiene la oportunidad de establecer toda la información conocida en esa **ContextNode** antes de que **InkAnalyzer** la examine con más detalle. Después de controlar un evento **PopulateContextNode** , el **ContextNode** en cuestión debe tener una propiedad Location válida, el número correcto de subnodos establecido si es un contenedor **ContextNode** o tener el conjunto de trazos correcto, mediante [**SetStrokes**](icontextnode-setstrokes.md), si se trata de un **ContextNode** de hoja de tinta. Si no se establece correctamente esta ubicación y el subnodo o la información del trazo, se producirá una excepción **InvalidOperation** . Los subnodos de un contenedor **ContextNode** se pueden configurar como rellenados parcialmente, en cuyo caso se producirán más eventos **PopulateContextNode** si **InkAnalyzer** determina que se necesitarán para la operación de análisis actual.

En las tablas siguientes se describe cuándo se generará el evento [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) a lo largo del uso de [**InkAnalyzer**](inkanalyzer.md).

Después de que [**InkAnalyzer**](inkanalyzer.md) haya calculado algún resultados, volverá a la aplicación para actualizar los resultados. El primer evento que se genera es el evento [**InkAnalyzerStateChanging**](-ianalysisproxyevents-inkanalyzerstatechanging.md) . Este evento simplemente indica a la aplicación que está a punto de cambiar el estado del árbol del objeto **InkAnalyzer** . Esto proporciona a las aplicaciones una oportunidad para establecer la marca [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md) en true en cualquier [**ContextNodes**](icontextnodes.md) que tenga el estado almacenado en otro lugar. A continuación, **InkAnalyzer** generará una serie de eventos [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) para determinar el estado actual de los datos. Una vez que se determiend una operación de conciliación, se compelted para determinar qué resultados de fondo se pueden aplicar todavía.

Para aplicar los resultados a [**InkAnalyzer**](inkanalyzer.md) , se generan una serie de eventos de modificación de árbol. Los eventos de modificación de árbol describen, paso a paso, todos los cambios necesarios para actualizar los resultados. Estos eventos están diseñados para ser administrados en Sucession sin interuption ni cancelar. Si la operación de análisis se cancela (mediante el método [**Abort**](iinkanalyzer-abort.md) ) durante el procesamiento de los eventos de modificación del árbol, el estado de **InkAnalyzer** no será válido y es posible que sea necesario volver a analizar todo el documento.

En las tablas siguientes se describe cuándo se generan los eventos de modificación del árbol a lo largo del uso de InkAnalyzer. Las tablas hacen referencia a las marcas de tiempo que se muestran en el siguiente diagrama de flujo de eventos.

![iImage que muestra el flujo entre la interfaz de usuario de la aplicación y el analizador en segundo plano](images/7a0a54af-889e-43ed-8689-7f2d685567bf.jpg)

### <a name="adding-a-stroke"></a>Agregar un trazo



|                          |                                                                         |                                                                                                  |                                                                                                                                                                                                                                                                                                            |
|--------------------------|-------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Marca de tiempo<br/>    | Tipo de evento o propósito<br/>                                        | Evento generado<br/>                                                                          | Comentario<br/>                                                                                                                                                                                                                                                                                         |
| T1, T5 y T9<br/> | \[Dentro de la llamada al evento de \] exploración de árbol AddStroke () \[\]<br/> | Evento [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) generado<br/> | Podría haber un número n de eventos [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) generados dependiendo de cuántos [**ContextNodes**](icontextnodes.md) sin **clasificar** existan con un valor [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md) establecido en true.<br/> |
| T1, T5 y T9<br/> | \[Evento de modificación de árbol\]<br/>                                  | Evento [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md) generado<br/>   | Solo se generará un evento [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md) como resultado de llamar al método [**AddStroke**](iinkanalyzer-addstroke.md) . Todos los trazos se agregan al mismo [**ContextNode**](icontextnode.md)sin clasificar.<br/>                      |



 

### <a name="deleting-a-stroke"></a>Eliminar un trazo



|                           |                                                                                                                 |                                                                                                  |                                                                                                                                                                                                                                                                                                                      |
|---------------------------|-----------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Marca de tiempo<br/>     | Tipo de evento o propósito<br/>                                                                                | Evento generado<br/>                                                                          | Comentario<br/>                                                                                                                                                                                                                                                                                                   |
| T2, T6 y T10<br/> | \[Dentro de la llamada [](iinkanalyzer-removestroke.md)al evento de \] exploración de árbol RemoveStroke () \[\]<br/> | [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) Evento generado<br/> | Podría haber un número de eventos [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) generados en función de cuántos [**ContextNodes**](icontextnodes.md) relacionados con los trazos que se van a eliminar tengan un valor de [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md) de true.<br/> |
| T2, T6 y T10<br/> | \[Evento de modificación de árbol\]<br/>                                                                          | [**ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) Evento generado<br/> | Podría producirse cualquier número de eventos [**ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) , dependiendo del contenido de la entrada de lápiz que se va a eliminar y de la estructura de análisis actual.<br/>                                                                                                       |



 

### <a name="calling-the-backgroundanalyze-method"></a>Llamar al método BackgroundAnalyze



|                       |                                                                                                                           |                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                     |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Marca de tiempo<br/> | Tipo de evento o propósito<br/>                                                                                          | Evento generado<br/>                                                                          | Comentario<br/>                                                                                                                                                                                                                                                                                                                                                                                                  |
| T3<br/>         | \[Dentro de la llamada [](iinkanalyzer-backgroundanalyze.md)al evento de \] exploración de árbol BackgroundAnalyze () \[\]<br/> | [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) Evento generado<br/> | Podría haber un número n de eventos [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) generados, en función de cuántos [**ContextNodes**](icontextnodes.md) en el árbol tengan un valor de [**PartiallyPopulated**](icontextnode-createpartiallypopulatedsubnode.md) de true (un evento por [**ContextNode**](icontextnode.md) que sea necesario en la operación de análisis actual).<br/> |



 

### <a name="after-the-call-to-backgroundanalyze-returns"></a>Después de la llamada a BackgroundAnalyze (), devuelve



|                       |                                             |                                  |                                                                                              |
|-----------------------|---------------------------------------------|----------------------------------|----------------------------------------------------------------------------------------------|
| Marca de tiempo<br/> | Tipo de evento o propósito<br/>            | Evento generado<br/>          | Comentario<br/>                                                                           |
| T3 a T7<br/>   | \[Eventos generados por el subproceso BG\]<br/> | Evento de actividad generado<br/> | Durante este período de análisis, se generarán varios eventos de actividad.<br/> |



 

### <a name="when-intermediateresults-are-ready"></a>Cuando IntermediateResults estén listos



|                       |                                                                                                    |                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                       |
|-----------------------|----------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Marca de tiempo<br/> | Tipo de evento o propósito<br/>                                                                   | Evento generado<br/>                                                                                            | Comentario<br/>                                                                                                                                                                                                                                                                                                                                                                                    |
| T7 a T8<br/>   | \[Eventos generados por el subproceso BG, que indican el inicio de la primera operación de conciliación\]<br/> | [**InkAnalyzerStateChanging**](-ianalysisproxyevents-inkanalyzerstatechanging.md) Evento generado<br/>         | Solo se genera un evento [**InkAnalyzerStateChanging**](-ianalysisproxyevents-inkanalyzerstatechanging.md) . Este evento se genera antes de inspeccionar el estado del [**InkAnalyzer**](inkanalyzer.md), lo que permite a la aplicación establecer el valor de [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md) en cualquier nodo o realizar un bloqueo de documento local necesario.<br/> |
| T7 a T8<br/>   | \[Evento de exploración de árbol\]<br/>                                                              | [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) Evento generado<br/>                   | Podría haber un número n de eventos [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) generados, en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                               |
| T7 a T8<br/>   | \[Evento de modificación de árbol\]<br/>                                                             | [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md) Evento generado<br/>                     | Podría haber un número n de eventos [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md) generados, en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                                 |
| T7 a T8<br/>   | \[Evento de modificación de árbol\]<br/>                                                             | [**ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) Evento generado<br/>                   | Podría haber un número n de eventos [**ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) generados, en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                               |
| T7 a T8<br/>   | \[Evento de modificación de árbol\]<br/>                                                             | [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md)<br/>                | Podría haber un número n de eventos [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md) generados, en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                               |
| T7 a T8<br/>   | \[Evento de modificación de árbol\]<br/>                                                             | [**ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md)<br/>                          | Podría haber un número n de eventos [**ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md) generados, en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                         |
| T7 a T8<br/>   | \[Evento de modificación de árbol\]<br/>                                                             | [**StrokeReparented**](-ianalysisproxyevents-strokereparented.md)<br/>                                      | Podría haber un número n de eventos [**StrokeReparented**](-ianalysisproxyevents-strokereparented.md) generados, en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                                     |
| T7 a T8<br/>   | \[Evento de modificación de árbol\]<br/>                                                             | [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md)<br/>                            | Podría haber un número n de eventos [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md) generados, en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                           |
| T7 a T8<br/>   | \[Evento de modificación de árbol\]<br/>                                                             | [**ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md)<br/>                        | Podría haber un número n de eventos [**ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md) generados, en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                       |
| T7 a T8<br/>   | \[Evento de modificación de árbol\]<br/>                                                             | [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md) Evento generado<br/> | Podría haber un número n de eventos [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md) generados, en función del contenido de la entrada de lápiz. **ContextNodePropertiesUpdated** se programan para generadas después de que se produzcan todos los demás eventos de modificación de [**ContextNode**](icontextnode.md) durante este período de [**conciliación**](iinkanalyzer-reconcile.md) .<br/>              |
| T7 a T8<br/>   | \[El evento indica el final de la primera operación de conciliación\]<br/>                            | [**IntermediateResults**](-ianalysisevents-intermediateresults.md) Evento generado<br/>                        | Solo se generará un evento [**IntermediateResults**](-ianalysisevents-intermediateresults.md) por cada operación de análisis.<br/>                                                                                                                                                                                                                                                                  |



 

### <a name="after-intermediateresults-have-been-handled"></a>Después de haber controlado IntermediateResults



|                       |                                             |                                                                       |                                                                                                                                   |
|-----------------------|---------------------------------------------|-----------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| Marca de tiempo<br/> | Tipo de evento o propósito<br/>            | Evento generado<br/>                                               | Comentario<br/>                                                                                                                |
| T8 a T11<br/>  | \[Eventos generados por el subproceso BG\]<br/> | [**Actividad**](-ianalysisevents-activity.md) de Evento generado<br/> | Durante este período de análisis, se generarán varios eventos de [**actividad**](-ianalysisevents-activity.md) .<br/> |



 

### <a name="when-final-results-are-ready"></a>Cuando los resultados finales estén listos



|                       |                                                                                                     |                                                                                                                    |                                                                                                                                                                                                                                                                                                                                                                                                       |
|-----------------------|-----------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Marca de tiempo<br/> | Tipo de evento o propósito<br/>                                                                    | Evento generado<br/>                                                                                            | Comentario<br/>                                                                                                                                                                                                                                                                                                                                                                                    |
| T11 a T12<br/> | \[Eventos generados por el subproceso BG, que indican el inicio de la segunda operación de conciliación.\]<br/> | [**InkAnalyzerStateChanging**](-ianalysisproxyevents-inkanalyzerstatechanging.md) Evento generado<br/>         | Solo se genera un evento [**InkAnalyzerStateChanging**](-ianalysisproxyevents-inkanalyzerstatechanging.md) . Este evento se genera antes de inspeccionar el estado del [**InkAnalyzer**](inkanalyzer.md), lo que permite a la aplicación establecer el valor de [**PartiallyPopulated**](icontextnode-setpartiallypopulated.md) en cualquier nodo o realizar un bloqueo de documento local necesario.<br/> |
| T11 a T12<br/> | \[Evento de exploración de árbol\]<br/>                                                               | [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) Evento generado<br/>                   | Podría producirse cualquier número de eventos [**PopulateContextNode**](-ianalysisproxyevents-populatecontextnode.md) , en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                             |
| T11 a T12<br/> | \[Evento de modificación de árbol\]<br/>                                                              | [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md) Evento generado<br/>                     | Podría producirse cualquier número de eventos [**ContextNodeCreated**](-ianalysisproxyevents-contextnodecreated.md) , en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                               |
| T11 a T12<br/> | \[Evento de modificación de árbol\]<br/>                                                              | [**ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) Evento generado<br/>                   | Podría producirse cualquier número de eventos [**ContextNodeDeleting**](-ianalysisproxyevents-contextnodedeleting.md) , en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                             |
| T11 a T12<br/> | \[Evento de modificación de árbol\]<br/>                                                              | [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md)<br/>                | Podría producirse cualquier número de eventos [**ContextNodeMovingToPosition**](-ianalysisproxyevents-contextnodemovingtoposition.md) , en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                             |
| T11 a T12<br/> | \[Evento de modificación de árbol\]<br/>                                                              | [**ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md)<br/>                          | Podría producirse cualquier número de eventos [**ContextNodeReparenting**](-ianalysisproxyevents-contextnodereparenting.md) , en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                       |
| T11 a T12<br/> | \[Evento de modificación de árbol\]<br/>                                                              | [**StrokeReparented**](-ianalysisproxyevents-strokereparented.md)<br/>                                      | Podría producirse cualquier número de eventos [**StrokeReparented**](-ianalysisproxyevents-strokereparented.md) , en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                                   |
| T11 a T12<br/> | \[Evento de modificación de árbol\]<br/>                                                              | [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md)<br/>                            | Podría producirse cualquier número de eventos [**ContextNodeLinkAdding**](-ianalysisproxyevents-contextnodelinkadding.md) , en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                         |
| T11 a T12<br/> | \[Evento de modificación de árbol\]<br/>                                                              | [**ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md)<br/>                        | Podría producirse cualquier número de eventos [**ContextNodeLinkDeleting**](-ianalysisproxyevents-contextnodelinkdeleting.md) , en función del contenido de la entrada de lápiz.<br/>                                                                                                                                                                                                                                     |
| T11 a T12<br/> | \[Evento de modificación de árbol\]<br/>                                                              | [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md) Evento generado<br/> | Podría producirse cualquier número de eventos [**ContextNodePropertiesUpdated**](-ianalysisproxyevents-contextnodepropertiesupdated.md) , en función del contenido de la entrada de lápiz. **ContextNodePropertiesUpdated** se programan para generadas después de que se produzcan todos los demás eventos de modificación de [**ContextNode**](icontextnode.md) durante este período de [**conciliación**](iinkanalyzer-reconcile.md) .<br/>            |
| T11 a T12<br/> | \[El evento indica el final de la segunda operación de conciliación.\]<br/>                            | [**Resultados**](-ianalysisevents-results.md) de Evento generado<br/>                                                | Solo se generará un evento de [**resultados**](-ianalysisevents-results.md) por operación de análisis.<br/>                                                                                                                                                                                                                                                                                          |



 

 

 




