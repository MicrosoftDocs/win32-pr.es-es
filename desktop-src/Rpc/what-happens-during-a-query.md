---
title: Lo que sucede durante una consulta
description: En esta sección se describe cómo la red controla la consulta cuando un cliente de 32 bits busca un nombre en su propio dominio.
ms.assetid: a8a88743-a245-4258-af05-9261c214ab50
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d6e26fb9aaef0aac2ff66260d51f756725566dee
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "104268832"
---
# <a name="what-happens-during-a-query"></a><span data-ttu-id="97895-103">Lo que sucede durante una consulta</span><span class="sxs-lookup"><span data-stu-id="97895-103">What Happens During a Query</span></span>

<span data-ttu-id="97895-104">En esta sección se describe cómo la red controla la consulta cuando un cliente de 32 bits busca un nombre en su propio dominio.</span><span class="sxs-lookup"><span data-stu-id="97895-104">This section describes how the network handles the query when a 32-bit client searches for a name in its own domain.</span></span>

<span data-ttu-id="97895-105">Cuando la aplicación cliente llama a [**RpcNsBindingImportBegin**](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina), el localizador que reside en el equipo cliente intentará satisfacer esta solicitud.</span><span class="sxs-lookup"><span data-stu-id="97895-105">When your client application calls [**RpcNsBindingImportBegin**](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina), the locator residing on your client computer will try to satisfy this request.</span></span> <span data-ttu-id="97895-106">Si no hay nada en la memoria caché, reenviará la solicitud de RPC a un localizador maestro.</span><span class="sxs-lookup"><span data-stu-id="97895-106">If there is nothing in the cache, it will forward the request by RPC to a master locator.</span></span> <span data-ttu-id="97895-107">Si el localizador principal no encuentra nada en su caché, envía la solicitud a todos los equipos del dominio mediante una difusión de ranura de correo.</span><span class="sxs-lookup"><span data-stu-id="97895-107">If the master locator finds nothing in its cache, it sends the request to all the computers in the domain using a mail-slot broadcast.</span></span> <span data-ttu-id="97895-108">Si hay una coincidencia, el localizador de cada equipo responderá mediante una ranura de correo dirigido.</span><span class="sxs-lookup"><span data-stu-id="97895-108">If there is a match, the locator on each computer will respond by a directed mail slot.</span></span> <span data-ttu-id="97895-109">(Por ejemplo, si un proceso de ese equipo ha exportado la interfaz). Las respuestas se intercalan y la RPC se completa desde el localizador de procesos del cliente, que responderá al propio proceso del cliente.</span><span class="sxs-lookup"><span data-stu-id="97895-109">(For example, if a process on that computer has exported the interface.) The responses are collated and the RPC is completed from the client's process locator, which will reply to the client process itself.</span></span>

<span data-ttu-id="97895-110">En un dominio, el localizador de cliente busca un localizador maestro en los lugares siguientes:</span><span class="sxs-lookup"><span data-stu-id="97895-110">In a domain, the client locator searches for a master locator in the following places:</span></span>

-   <span data-ttu-id="97895-111">En el controlador de dominio principal</span><span class="sxs-lookup"><span data-stu-id="97895-111">On the primary domain controller</span></span>
-   <span data-ttu-id="97895-112">En cada controlador de dominio de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="97895-112">On each backup domain controller</span></span>

<span data-ttu-id="97895-113">Si no se encuentra ninguna coincidencia, el localizador del cliente se declara a sí mismo como el localizador maestro.</span><span class="sxs-lookup"><span data-stu-id="97895-113">If a match is not found, the client locator declares itself to be the master locator.</span></span> <span data-ttu-id="97895-114">Como tal, difundirá consultas si no se pueden satisfacer localmente.</span><span class="sxs-lookup"><span data-stu-id="97895-114">As such, it will broadcast queries if they cannot be satisfied locally.</span></span>

<span data-ttu-id="97895-115">En un grupo de trabajo, el localizador de cliente mantiene una memoria caché de los equipos cuyos localizadores tienen difusión.</span><span class="sxs-lookup"><span data-stu-id="97895-115">In a workgroup, the client locator maintains a cache of the computers whose locators have broadcast.</span></span> <span data-ttu-id="97895-116">Utiliza el que se ha estado ejecutando lo más largo que el localizador maestro.</span><span class="sxs-lookup"><span data-stu-id="97895-116">It uses the one that has been running the longest as the master locator.</span></span> <span data-ttu-id="97895-117">Si el equipo no está disponible, se usa el siguiente equipo de difusión más largo, etc.</span><span class="sxs-lookup"><span data-stu-id="97895-117">If that computer is unavailable, the next, longest-broadcasting computer is used, and so on.</span></span> <span data-ttu-id="97895-118">Si el cliente necesita un localizador maestro y la memoria caché está vacía, la memoria caché se reabastece mediante el envío de una difusión de ranura de correo especial que solicita la respuesta de los localizadores principales.</span><span class="sxs-lookup"><span data-stu-id="97895-118">If the client needs a master locator and the cache is empty, it replenishes the cache by sending a special mail-slot broadcast that requests master locators to respond.</span></span> <span data-ttu-id="97895-119">Si no hay ninguna respuesta, el localizador del cliente se declara a sí mismo como el localizador maestro y difundirá las consultas si no se pueden satisfacer localmente.</span><span class="sxs-lookup"><span data-stu-id="97895-119">If there are no responses, the client locator declares itself to be the master locator and will broadcast queries if they cannot be satisfied locally.</span></span>

<span data-ttu-id="97895-120">Esto cambia si la aplicación cliente es un programa basado en MS-dos o de 16 bits.</span><span class="sxs-lookup"><span data-stu-id="97895-120">This changes if your client application is a 16-bit or MS-DOS-based program.</span></span> <span data-ttu-id="97895-121">En este caso, no hay ningún localizador en ejecución en el equipo cliente y Rpcns1.dll o Rpcnslm. RPC contiene el código para buscar un localizador maestro.</span><span class="sxs-lookup"><span data-stu-id="97895-121">In this case, there is no locator running on the client computer, and Rpcns1.dll or Rpcnslm.rpc contains the code to find a master locator.</span></span> <span data-ttu-id="97895-122">Todas las solicitudes se reenvían directamente al localizador maestro.</span><span class="sxs-lookup"><span data-stu-id="97895-122">All requests are forwarded directly to the master locator.</span></span>

<span data-ttu-id="97895-123">Estas instrucciones son válidas para los nombres en el dominio del cliente, como los nombres de "/.:/ nombreentrada ".</span><span class="sxs-lookup"><span data-stu-id="97895-123">These guidelines are valid for names in the client's domain, such as names for "/.:/entryname".</span></span> <span data-ttu-id="97895-124">Si el cliente solicita un nombre de otro dominio mediante el uso de "/.../DOMAIN/entryname;", el localizador del cliente reenvía la solicitud al dominio especificado, que la difundirá si no tiene la respuesta.</span><span class="sxs-lookup"><span data-stu-id="97895-124">If the client requests a name from another domain through the use of "/.../DOMAIN/entryname;" the client locator forwards the request to the specified domain which will broadcast it if it does not have the answer.</span></span> <span data-ttu-id="97895-125">Si el dominio está inactivo o es realmente un grupo de trabajo, se producirá un error en la solicitud.</span><span class="sxs-lookup"><span data-stu-id="97895-125">If the domain is down or is actually a workgroup, the request will fail.</span></span>

> [!Note]  
> <span data-ttu-id="97895-126">Recuerde lo siguiente al trabajar con entradas en el servicio de nombres:</span><span class="sxs-lookup"><span data-stu-id="97895-126">Remember the following when working with entries in the name service:</span></span>

 

-   <span data-ttu-id="97895-127">Un cliente no puede usar la sintaxis "/.../DOMAIN/entryname" para buscar una entrada en su propio dominio.</span><span class="sxs-lookup"><span data-stu-id="97895-127">A client cannot use the "/.../DOMAIN/entryname" syntax to find an entry in its own domain.</span></span> <span data-ttu-id="97895-128">Use la sintaxis "/.:/ nombreentrada ".</span><span class="sxs-lookup"><span data-stu-id="97895-128">Use the syntax "/.:/entryname".</span></span> <span data-ttu-id="97895-129">Sin embargo, puede usar "/.../DOMAIN/entryname" para buscar una entrada en otro dominio.</span><span class="sxs-lookup"><span data-stu-id="97895-129">However, you can use "/.../DOMAIN/entryname" to find an entry in another domain.</span></span>
-   <span data-ttu-id="97895-130">El nombre de dominio en "/.../DOMAIN/entryname" debe estar en mayúsculas.</span><span class="sxs-lookup"><span data-stu-id="97895-130">The domain name in "/.../DOMAIN/entryname" must be uppercase.</span></span> <span data-ttu-id="97895-131">Al buscar una coincidencia, el localizador distingue entre mayúsculas y minúsculas.</span><span class="sxs-lookup"><span data-stu-id="97895-131">When looking for a match, the locator is case-sensitive.</span></span>
-   <span data-ttu-id="97895-132">Los nombres de las entradas del localizador también distinguen mayúsculas de minúsculas, pero no tienen que estar en mayúsculas.</span><span class="sxs-lookup"><span data-stu-id="97895-132">Locator entry names are also case-sensitive, but need not be uppercase.</span></span>
-   <span data-ttu-id="97895-133">Cuando el cliente usa "/.:/ nombreentrada ", el localizador no buscará entradas en otros dominios, aunque tengan una relación de confianza con el dominio de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="97895-133">When the client uses the "/.:/entryname" syntax, the locator will not search for entries in other domains, even if they have a trust relationship with the logon domain.</span></span>
-   <span data-ttu-id="97895-134">Las difusiones no atraviesan segmentos de LAN (por ejemplo, subredes).</span><span class="sxs-lookup"><span data-stu-id="97895-134">Broadcasts do not cross LAN segments (for example, subnets).</span></span> <span data-ttu-id="97895-135">Por lo tanto, la utilidad del localizador está limitada en una organización con varias subredes.</span><span class="sxs-lookup"><span data-stu-id="97895-135">Thus, the usefulness of the locator is limited in an organization with multiple subnets.</span></span>

 

 




