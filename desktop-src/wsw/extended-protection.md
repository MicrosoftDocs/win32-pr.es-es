---
title: protección ampliada
description: La protección ampliada es un mecanismo para enlazar un canal seguro externo, como SSL, a protocolos de autenticación de canal interno como Kerberos-APREQ y la autenticación de encabezados HTTP.
ms.assetid: 35e48846-05e5-4db9-a3b5-098b62815b66
keywords:
- Protección ampliada Native-Web-Services
- WWSAPI
- WWS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 895bdfecf994f6673c2ed7e7367bc3a7b5bd70c9
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "105685572"
---
# <a name="extended-protection"></a><span data-ttu-id="f9d46-106">protección ampliada</span><span class="sxs-lookup"><span data-stu-id="f9d46-106">Extended Protection</span></span>

<span data-ttu-id="f9d46-107">La protección ampliada es un mecanismo para enlazar un canal seguro externo, como SSL, a protocolos de autenticación de canal interno como Kerberos-APREQ y la autenticación de encabezados HTTP.</span><span class="sxs-lookup"><span data-stu-id="f9d46-107">Extended protection is a mechanism to bind an outer secure channel such as SSL to inner channel authentication protocols such as Kerberos-APREQ and HTTP header authentication.</span></span>

<span data-ttu-id="f9d46-108">El concepto de protección ampliada se define en RFC2743.</span><span class="sxs-lookup"><span data-stu-id="f9d46-108">The concept of extended protection is defined in RFC2743.</span></span>

<span data-ttu-id="f9d46-109">La protección ampliada, si está disponible, se configura automáticamente en el cliente, pero puede que sea necesario configurar en el servidor para escenarios no predeterminados.</span><span class="sxs-lookup"><span data-stu-id="f9d46-109">Extended protection, when available, is configured automatically on the client but may require configuration on the server for non-default scenarios.</span></span>

## <a name="supported-configurations"></a><span data-ttu-id="f9d46-110">Configuraciones admitidas</span><span class="sxs-lookup"><span data-stu-id="f9d46-110">Supported Configurations</span></span>

<span data-ttu-id="f9d46-111">La protección ampliada se admite cuando se usa el [**\_ enlace de \_ canal \_ WS http**](/windows/desktop/api/WebServices/ne-webservices-ws_channel_binding) con enlaces de seguridad mediante protocolos de autenticación integrada de Windows, como el [**\_ \_ \_ \_ \_ enlace de seguridad de encabezados HTTP WS**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) y el enlace de seguridad de [**\_ mensajes WS Kerberos \_ APREQ \_ \_ \_**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding).</span><span class="sxs-lookup"><span data-stu-id="f9d46-111">Extended protection is supported when using [**WS\_HTTP\_CHANNEL\_BINDING**](/windows/desktop/api/WebServices/ne-webservices-ws_channel_binding) with security bindings using Windows Integrated Authentication protocols such as [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) and [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding).</span></span> <span data-ttu-id="f9d46-112">Se configura a través de las siguientes [**propiedades de seguridad**](/windows/desktop/api/WebServices/ns-webservices-ws_security_property):</span><span class="sxs-lookup"><span data-stu-id="f9d46-112">It is configured via the following [**security properties**](/windows/desktop/api/WebServices/ns-webservices-ws_security_property):</span></span>

-   [<span data-ttu-id="f9d46-113">**\_Directiva de \_ \_ protección extendida de propiedades \_ \_ de WS Security**</span><span class="sxs-lookup"><span data-stu-id="f9d46-113">**WS\_SECURITY\_PROPERTY\_EXTENDED\_PROTECTION\_POLICY**</span></span>](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id)
-   [<span data-ttu-id="f9d46-114">**\_escenario de \_ \_ protección ampliada de propiedades \_ \_ de WS Security**</span><span class="sxs-lookup"><span data-stu-id="f9d46-114">**WS\_SECURITY\_PROPERTY\_EXTENDED\_PROTECTION\_SCENARIO**</span></span>](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id)
-   [<span data-ttu-id="f9d46-115">**\_ \_ \_ identidades de servicio de propiedades \_ de WS Security**</span><span class="sxs-lookup"><span data-stu-id="f9d46-115">**WS\_SECURITY\_PROPERTY\_SERVICE\_IDENTITIES**</span></span>](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id)

<span data-ttu-id="f9d46-116">Se pueden realizar las siguientes configuraciones que impliquen protección ampliada:</span><span class="sxs-lookup"><span data-stu-id="f9d46-116">The following configurations involving extended protection are possible:</span></span>

<span data-ttu-id="f9d46-117">Remoto</span><span class="sxs-lookup"><span data-stu-id="f9d46-117">Client</span></span>

-   <span data-ttu-id="f9d46-118">[**WS \_ El \_ \_ \_ enlace de seguridad de transporte SSL**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) se utiliza con el enlace de seguridad de [**\_ mensaje WS Kerberos \_ APREQ \_ \_ \_**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) o el enlace de seguridad de la [**\_ \_ autenticación del encabezado \_ \_ \_ http WS**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding).</span><span class="sxs-lookup"><span data-stu-id="f9d46-118">[**WS\_SSL\_TRANSPORT\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) is used with [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) or [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding).</span></span> <span data-ttu-id="f9d46-119">En esta configuración, el enlace de autenticación se enlaza a la conexión SSL a través de un token de protección ampliada que se extrae automáticamente de la conexión SSL.</span><span class="sxs-lookup"><span data-stu-id="f9d46-119">In this configuration the authentication binding is bound to the SSL connection via an extended protection token that is automatically extracted from the SSL connection.</span></span>
-   <span data-ttu-id="f9d46-120">No se usa SSL y se establece el [**enlace de seguridad de \_ \_ autenticación de encabezado \_ \_ \_ http WS**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) .</span><span class="sxs-lookup"><span data-stu-id="f9d46-120">No SSL is used and [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) is set.</span></span> <span data-ttu-id="f9d46-121">El enlace de autenticación se enlaza a través del nombre de entidad de seguridad de servidor (SPN), que es autonatically determinado a partir de la [**\_ \_ dirección del punto de conexión de WS**](/windows/desktop/api/WebServices/ns-webservices-ws_endpoint_address).</span><span class="sxs-lookup"><span data-stu-id="f9d46-121">The authentication binding is bound via the Server Principal Name (SPN), which is autonatically determined from the [**WS\_ENDPOINT\_ADDRESS**](/windows/desktop/api/WebServices/ns-webservices-ws_endpoint_address).</span></span>

<span data-ttu-id="f9d46-122">Servidor</span><span class="sxs-lookup"><span data-stu-id="f9d46-122">Server</span></span>

-   <span data-ttu-id="f9d46-123">[**WS \_ El \_ \_ \_ enlace de seguridad de transporte SSL**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) se utiliza con el enlace de seguridad de [**\_ mensaje WS Kerberos \_ APREQ \_ \_ \_**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) o el enlace de seguridad de la [**\_ \_ autenticación del encabezado \_ \_ \_ http WS**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding).</span><span class="sxs-lookup"><span data-stu-id="f9d46-123">[**WS\_SSL\_TRANSPORT\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) is used with [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) or [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding).</span></span> <span data-ttu-id="f9d46-124">En esta configuración, el enlace de autenticación se enlaza a la conexión SSL a través de un token de protección ampliada que se extrae de la conexión SSL y se valida automáticamente.</span><span class="sxs-lookup"><span data-stu-id="f9d46-124">In this configuration the authentication binding is bound to the SSL connection via an extended protection token that is extracted from the SSL connection and validated automatically.</span></span>
-   <span data-ttu-id="f9d46-125">No se usa SSL y se establece el [**enlace de seguridad de \_ \_ autenticación de encabezado \_ \_ \_ http WS**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) .</span><span class="sxs-lookup"><span data-stu-id="f9d46-125">No SSL is used and [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) is set.</span></span> <span data-ttu-id="f9d46-126">El enlace de autenticación se enlaza a través del nombre de entidad de seguridad de servidor (SPN), que debe proporcionarse a través de las [**\_ \_ \_ \_ identidades de servicio de propiedades de WS Security**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id).</span><span class="sxs-lookup"><span data-stu-id="f9d46-126">The authentication binding is bound via the Server Principal Name (SPN), which must be provided via [**WS\_SECURITY\_PROPERTY\_SERVICE\_IDENTITIES**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id).</span></span> <span data-ttu-id="f9d46-127">Cuando se recibe un mensaje, se extrae y valida el SPN para obtener una coincidencia exacta con los nombres de servicio proporcionados.</span><span class="sxs-lookup"><span data-stu-id="f9d46-127">When a message is received, the SPN is extracted and validated for an exact match with the provided service names.</span></span> <span data-ttu-id="f9d46-128">No proporcionar SPN es el equivalente a establecer [**\_ nunca la \_ \_ Directiva de \_ protección ampliada de WS**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_policy).</span><span class="sxs-lookup"><span data-stu-id="f9d46-128">Not providing SPNs is the equivalent of setting [**WS\_EXTENDED\_PROTECTION\_POLICY\_NEVER**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_policy).</span></span>
-   <span data-ttu-id="f9d46-129">No se usa SSL, se especifica el [**\_ \_ \_ \_ \_ servidor enlazado con el escenario de protección ampliada de WS**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_scenario) y se usa el [**enlace de seguridad de \_ mensajes WS Kerberos \_ APREQ \_ \_ \_**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) .</span><span class="sxs-lookup"><span data-stu-id="f9d46-129">No SSL is used, [**WS\_EXTENDED\_PROTECTION\_SCENARIO\_BOUND\_SERVER**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_scenario) is specified and [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) is used.</span></span> <span data-ttu-id="f9d46-130">En esta configuración, no se deben establecer las [**\_ \_ \_ \_ identidades de servicio de las propiedades de WS Security**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id) .</span><span class="sxs-lookup"><span data-stu-id="f9d46-130">In this configuration, [**WS\_SECURITY\_PROPERTY\_SERVICE\_IDENTITIES**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id) must not be set.</span></span> <span data-ttu-id="f9d46-131">No se realiza ninguna comprobación de SPN más allá de lo que se hace como parte del protocolo Kerberos.</span><span class="sxs-lookup"><span data-stu-id="f9d46-131">No SPN check is performed beyond what is done as part of the Kerberos protocol.</span></span>
-   <span data-ttu-id="f9d46-132">[**WS \_ Escenario de protección AMPLIAda se ha especificado \_ \_ \_ \_ SSL finalizado**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_scenario) y se usa el enlace de seguridad de [**\_ mensaje WS Kerberos \_ APREQ \_ \_ \_**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) o de [**\_ \_ autenticación de encabezado \_ \_ \_ http WS**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) .</span><span class="sxs-lookup"><span data-stu-id="f9d46-132">[**WS\_EXTENDED\_PROTECTION\_SCENARIO\_TERMINATED\_SSL**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_scenario) is specified and either [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) or [**WS\_HTTP\_HEADER\_AUTH\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_http_header_auth_security_binding) is used.</span></span> <span data-ttu-id="f9d46-133">[**WS \_ Se deben establecer las \_ \_ \_ identidades de servicio**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id) de la propiedad de seguridad.</span><span class="sxs-lookup"><span data-stu-id="f9d46-133">[**WS\_SECURITY\_PROPERTY\_SERVICE\_IDENTITIES**](/windows/desktop/api/WebServices/ne-webservices-ws_security_property_id) must be set.</span></span>

## <a name="supported-platforms"></a><span data-ttu-id="f9d46-134">Plataformas compatibles</span><span class="sxs-lookup"><span data-stu-id="f9d46-134">Supported Platforms</span></span>

<span data-ttu-id="f9d46-135">La protección ampliada es compatible con las plataformas que admiten en el sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="f9d46-135">Extended protection is supported on platforms with support for it in the operating system.</span></span> <span data-ttu-id="f9d46-136">Windows 7 y Windows Server 2008 R2 proporcionan compatibilidad integrada.</span><span class="sxs-lookup"><span data-stu-id="f9d46-136">Windows 7 and Windows Server 2008 R2 provide built-in support.</span></span> <span data-ttu-id="f9d46-137">Es posible que otras plataformas requieran una actualización.</span><span class="sxs-lookup"><span data-stu-id="f9d46-137">Other platforms may require an update.</span></span>

<span data-ttu-id="f9d46-138">Si el sistema operativo del servidor no proporciona dicha compatibilidad, se omite cualquier información de protección ampliada enviada por el cliente.</span><span class="sxs-lookup"><span data-stu-id="f9d46-138">If the server's operating system does not provide such support, any extended protection information sent by the client is ignored.</span></span> <span data-ttu-id="f9d46-139">Como resultado, los clientes que usan la protección ampliada pueden comunicarse con este servidor, pero se pierde la ventaja de seguridad.</span><span class="sxs-lookup"><span data-stu-id="f9d46-139">As a result, clients using extended protection can communicate with such a server, but the security benefit is lost.</span></span> <span data-ttu-id="f9d46-140">En el cliente, [**el \_ \_ enlace de \_ \_ seguridad de \_ mensajes WS Kerberos APREQ**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) combinado con el [**\_ \_ \_ \_ enlace de seguridad de transporte SSL de WS**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) solo admite la protección ampliada en vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="f9d46-140">On the client, [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) combined with [**WS\_SSL\_TRANSPORT\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding) only supports extended protection on Vista and above.</span></span>

<span data-ttu-id="f9d46-141">Nota: la protección ampliada no está disponible no impide que se use ninguna configuración determinada.</span><span class="sxs-lookup"><span data-stu-id="f9d46-141">NOTE: Extended protection being unavailable does not prevent any particular configuration from being used.</span></span>

## <a name="interoperability"></a><span data-ttu-id="f9d46-142">Interoperabilidad</span><span class="sxs-lookup"><span data-stu-id="f9d46-142">Interoperability</span></span>

<span data-ttu-id="f9d46-143">Un servidor configurado de forma predeterminada puede comunicarse con los clientes SOAP independientemente de si usan la protección ampliada o no.</span><span class="sxs-lookup"><span data-stu-id="f9d46-143">A default-configured server can communicate with SOAP clients regardless of whether they use extended protection or not.</span></span> <span data-ttu-id="f9d46-144">La única excepción son los clientes de Windows XP y Windows Server 2003 WWSAPI que se han actualizado para admitir la protección ampliada y utilizan el enlace de seguridad de [**\_ mensajes WS Kerberos \_ APREQ \_ \_ \_**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) y el enlace de [**seguridad de \_ \_ transporte \_ \_ WS SSL**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding).</span><span class="sxs-lookup"><span data-stu-id="f9d46-144">The one exception being Windows XP and Windows Server 2003 WWSAPI clients that have been updated to support extended protection and use both [**WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_kerberos_apreq_message_security_binding) and [**WS\_SSL\_TRANSPORT\_SECURITY\_BINDING**](/windows/desktop/api/WebServices/ns-webservices-ws_ssl_transport_security_binding).</span></span> <span data-ttu-id="f9d46-145">Para admitir estos clientes, el servidor no debe especificar [**\_ nunca la \_ \_ directiva \_ de protección ampliada de WS**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_policy) .</span><span class="sxs-lookup"><span data-stu-id="f9d46-145">To support such clients [**WS\_EXTENDED\_PROTECTION\_POLICY\_NEVER**](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_policy) must be specified by the server.</span></span> <span data-ttu-id="f9d46-146">Los servidores configurados con la **\_ Directiva de protección ampliada de WS \_ \_ \_ siempre** rechazarán la comunicación de los clientes que no usen la protección ampliada.</span><span class="sxs-lookup"><span data-stu-id="f9d46-146">Servers configured with **WS\_EXTENDED\_PROTECTION\_POLICY\_ALWAYS** will reject communication from clients that do not use extended protection.</span></span> <span data-ttu-id="f9d46-147">En el cliente, **el \_ \_ enlace de \_ \_ seguridad de \_ mensajes WS Kerberos APREQ** combinado con el **\_ \_ \_ \_ enlace de seguridad de transporte SSL de WS** dará como resultado que el mensaje se envíe mediante la codificación de transferencia fragmentada http en vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="f9d46-147">On the client, **WS\_KERBEROS\_APREQ\_MESSAGE\_SECURITY\_BINDING** combined with **WS\_SSL\_TRANSPORT\_SECURITY\_BINDING** will result in the message being sent using the HTTP chunked transfer encoding on Vista and above.</span></span> <span data-ttu-id="f9d46-148">Esto puede producir problemas de interoperabilidad con servidores que no admiten la transferencia fragmentada.</span><span class="sxs-lookup"><span data-stu-id="f9d46-148">This may cause interop issues with servers that do not support chunked transfer.</span></span>

<span data-ttu-id="f9d46-149">Las enumeraciones o constantes siguientes forman parte de la protección ampliada:</span><span class="sxs-lookup"><span data-stu-id="f9d46-149">The following Enums/Constants are part of extended protection:</span></span>

-   [<span data-ttu-id="f9d46-150">**\_Directiva de \_ protección ampliada de WS \_**</span><span class="sxs-lookup"><span data-stu-id="f9d46-150">**WS\_EXTENDED\_PROTECTION\_POLICY**</span></span>](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_policy)
-   [<span data-ttu-id="f9d46-151">**\_escenario de \_ protección ampliada de WS \_**</span><span class="sxs-lookup"><span data-stu-id="f9d46-151">**WS\_EXTENDED\_PROTECTION\_SCENARIO**</span></span>](/windows/desktop/api/WebServices/ne-webservices-ws_extended_protection_scenario)

<span data-ttu-id="f9d46-152">Los siguientes estructuras forman parte de la protección ampliada:</span><span class="sxs-lookup"><span data-stu-id="f9d46-152">The following stuctures are part of extended protection:</span></span>

-   [<span data-ttu-id="f9d46-153">**\_ \_ identidades de seguridad de servicio de WS \_**</span><span class="sxs-lookup"><span data-stu-id="f9d46-153">**WS\_SERVICE\_SECURITY\_IDENTITIES**</span></span>](/windows/desktop/api/WebServices/ns-webservices-ws_service_security_identities)

 

 




