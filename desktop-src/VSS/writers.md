---
description: Los escritores son aplicaciones o servicios que almacenan información persistente en archivos en disco y que proporcionan los nombres y las ubicaciones de estos archivos a los solicitantes mediante la interfaz de instantáneas.
ms.assetid: 24fc2d7c-f8d6-49ca-9bb5-0179bef68e78
title: Escritores
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 52ca409e8dc6153a6b3e2b747dc23cc391055471
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105696420"
---
# <a name="writers"></a><span data-ttu-id="d36cb-103">Escritores</span><span class="sxs-lookup"><span data-stu-id="d36cb-103">Writers</span></span>

<span data-ttu-id="d36cb-104">Los [*escritores*](vssgloss-w.md) son aplicaciones o servicios que almacenan información persistente en archivos en disco y que proporcionan los nombres y las ubicaciones de estos archivos a los solicitantes mediante la interfaz de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="d36cb-104">[*Writers*](vssgloss-w.md) are applications or services that store persistent information in files on disk and that provide the names and locations of these files to requesters by using the shadow copy interface.</span></span>

<span data-ttu-id="d36cb-105">Durante las operaciones de copia de seguridad, los escritores aseguran que sus datos están inactivos y estables, adecuados para la instantánea y la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="d36cb-105">During backup operations, writers ensure that their data is quiescent and stable—suitable for shadow copy and backup.</span></span> <span data-ttu-id="d36cb-106">Los escritores colaboran con las restauraciones desbloqueando los archivos cuando sea posible e indicando ubicaciones alternativas cuando sea necesario.</span><span class="sxs-lookup"><span data-stu-id="d36cb-106">Writers collaborate with restores by unlocking files when possible and indicating alternate locations when necessary.</span></span>

<span data-ttu-id="d36cb-107">Si no hay ningún escritor presente durante una operación de copia de seguridad de VSS, todavía se puede crear una instantánea.</span><span class="sxs-lookup"><span data-stu-id="d36cb-107">If no writers are present during a VSS backup operation, a shadow copy can still be created.</span></span> <span data-ttu-id="d36cb-108">En este caso, todos los datos del volumen de copia sombra estarán en estado de [*bloqueo coherente*](vssgloss-c.md).</span><span class="sxs-lookup"><span data-stu-id="d36cb-108">In this case, all data on the shadow-copied volume will be in the [*crash-consistent state*](vssgloss-c.md).</span></span>

## <a name="writer-state"></a><span data-ttu-id="d36cb-109">Estado del escritor</span><span class="sxs-lookup"><span data-stu-id="d36cb-109">Writer State</span></span>

<span data-ttu-id="d36cb-110">Los escritores mantienen su estado en un objeto de metadatos basado en XML, el [*documento de metadatos del escritor*](vssgloss-w.md).</span><span class="sxs-lookup"><span data-stu-id="d36cb-110">Writers maintain their state in an XML-based metadata object, the [*Writer Metadata Document*](vssgloss-w.md).</span></span>

<span data-ttu-id="d36cb-111">Los metadatos del escritor son la única estructura de datos que contiene el [*conjunto de archivos*](vssgloss-f.md)(ruta de acceso, especificación de archivo y marca de recursividad) de los datos de los que se va a realizar la copia de seguridad y la restauración.</span><span class="sxs-lookup"><span data-stu-id="d36cb-111">This writer metadata is the only data structure that contains the [*file set*](vssgloss-f.md)—path, file specification, and recursion flag—of the data to be backed up and restored.</span></span>

<span data-ttu-id="d36cb-112">El documento de metadatos del escritor organiza los conjuntos de archivos del escritor en grupos o [*componentes*](vssgloss-c.md).</span><span class="sxs-lookup"><span data-stu-id="d36cb-112">The Writer Metadata Document organizes the writer's file sets into groups or [*components*](vssgloss-c.md).</span></span> <span data-ttu-id="d36cb-113">La relación de uno de estos componentes durante las operaciones de copia de seguridad y restauración con los demás componentes administrados por el escritor se describe en el documento de metadatos del escritor según la selección del componente [*para la copia de seguridad*](vssgloss-s.md), su [*selección para restaurar*](vssgloss-s.md)y sus rutas de acceso [*lógicas*](vssgloss-l.md).</span><span class="sxs-lookup"><span data-stu-id="d36cb-113">The relationship of one of these components during backup and restore operations to the other components managed by the writer is described in the Writer Metadata Document by the component's [*selectability for backup*](vssgloss-s.md), its [*selectability for restore*](vssgloss-s.md), and its [*logical paths*](vssgloss-l.md).</span></span> <span data-ttu-id="d36cb-114">(Para obtener más información, consulte Configuración de la [organización de componentes](definition-of-components-by-writers.md) y [trabajar con la selección y rutas de acceso lógicas](working-with-selectability-and-logical-paths.md)).</span><span class="sxs-lookup"><span data-stu-id="d36cb-114">(For more information, see [Setting up Component Organization](definition-of-components-by-writers.md) and [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md).)</span></span>

<span data-ttu-id="d36cb-115">En este documento también se incluye información adicional que rige la restauración de archivos y otros problemas.</span><span class="sxs-lookup"><span data-stu-id="d36cb-115">Additional information that governs file restoration and other issues is also contained in this document.</span></span>

<span data-ttu-id="d36cb-116">El solicitante necesita los metadatos del escritor, junto con su propio documento de componentes de copia de seguridad, para procesar una copia de seguridad o una restauración.</span><span class="sxs-lookup"><span data-stu-id="d36cb-116">The requester needs the writer metadata, in conjunction with its own Backup Components Document, to process a backup or a restore.</span></span>

<span data-ttu-id="d36cb-117">A diferencia del documento componentes de copia de seguridad, el documento de metadatos del escritor debe considerarse como una estructura de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="d36cb-117">Unlike the Backup Components Document, the Writer Metadata Document should be thought of as a read-only structure.</span></span> <span data-ttu-id="d36cb-118">Una vez que un escritor lo crea, el documento no se modifica.</span><span class="sxs-lookup"><span data-stu-id="d36cb-118">Once a writer creates it, the document is not altered.</span></span>

## <a name="writer-event-handling"></a><span data-ttu-id="d36cb-119">Control de eventos del escritor</span><span class="sxs-lookup"><span data-stu-id="d36cb-119">Writer Event Handling</span></span>

<span data-ttu-id="d36cb-120">Las operaciones de VSS de un escritor se inician a través de la recepción de eventos COM.</span><span class="sxs-lookup"><span data-stu-id="d36cb-120">A writer's VSS operations are initiated through the receipt of COM events.</span></span>

<span data-ttu-id="d36cb-121">Cuando no hay eventos presentes, un escritor no realiza operaciones VSS (como una copia de seguridad o restauración de VSS).</span><span class="sxs-lookup"><span data-stu-id="d36cb-121">When no events are present, a writer does not perform VSS operations (such as a VSS backup or restore).</span></span> <span data-ttu-id="d36cb-122">En su lugar, realiza su trabajo normal, como responder a las consultas de base de datos, administrar los datos de usuario o proporcionar otros servicios.</span><span class="sxs-lookup"><span data-stu-id="d36cb-122">Instead, it performs its normal work, such as responding to database queries, managing user data, or providing other services.</span></span>

<span data-ttu-id="d36cb-123">Para asegurarse de que el control de errores para varias sesiones de copias de seguridad y restauración en paralelo se realiza correctamente y para asegurarse de que una sesión de copia de seguridad o restauración no dañe otra, debe hacer lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="d36cb-123">To ensure that error handling for multiple parallel backup and restore sessions is performed correctly, and to ensure that one backup or restore session does not corrupt another, you must do the following:</span></span>

-   <span data-ttu-id="d36cb-124">Si el controlador de eventos de un escritor (como [**CVssWriter:: alfreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze)) llama al método [**CVssWriterEx2:: GetSessionId**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriterex2-getsessionid), [**CVssWriter:: SetWriterFailure**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-setwriterfailure)o [**CVssWriterEx2:: SetWriterFailureEx**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriterex2-setwriterfailureex) , el controlador de eventos debe llamar al método en el mismo subproceso que llamó al controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="d36cb-124">If a writer's event handler (such as [**CVssWriter::OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze)) calls the [**CVssWriterEx2::GetSessionId**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriterex2-getsessionid), [**CVssWriter::SetWriterFailure**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-setwriterfailure), or [**CVssWriterEx2::SetWriterFailureEx**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriterex2-setwriterfailureex) method, the event handler must call the method in the same thread that called the event handler.</span></span>
-   <span data-ttu-id="d36cb-125">La implementación del escritor de un controlador de eventos como [**alfreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze) puede descargar el trabajo en los subprocesos de trabajo si se desea, siempre que cada subproceso de trabajo calcule las referencias de los informes de errores necesarios de nuevo en el subproceso del controlador de eventos original.</span><span class="sxs-lookup"><span data-stu-id="d36cb-125">Your writer’s implementation of an event handler such as [**OnFreeze**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onfreeze) can offload work to worker threads if desired, as long as each worker thread marshals any needed error reporting back to the original event handler thread.</span></span>

## <a name="handling-identify-events"></a><span data-ttu-id="d36cb-126">Control de eventos de identificación</span><span class="sxs-lookup"><span data-stu-id="d36cb-126">Handling Identify Events</span></span>

<span data-ttu-id="d36cb-127">Con la excepción del evento de identificación, el tipo y el orden de los eventos que recibe un escritor dependen de forma exclusiva del tipo de operaciones de VSS que están actualmente en curso.</span><span class="sxs-lookup"><span data-stu-id="d36cb-127">With the exception of the Identify event, the type and order of the events a writer receives depends uniquely on the type of VSS operations that are currently ongoing.</span></span>

<span data-ttu-id="d36cb-128">El evento de identificación requiere que los escritores proporcionen información del sistema sobre su configuración y los archivos que administran a través de su [*documento de metadatos de escritura*](vssgloss-w.md).</span><span class="sxs-lookup"><span data-stu-id="d36cb-128">The Identify event requires writers to provide the system information about their configuration and the files they manage through their [*Writer Metadata Document*](vssgloss-w.md).</span></span> <span data-ttu-id="d36cb-129">Un evento de identificación se genera por compatibilidad con casi cualquier operación de VSS, incluidas las consultas del sistema, así como las operaciones de instantáneas y copia de seguridad y restauración.</span><span class="sxs-lookup"><span data-stu-id="d36cb-129">An Identify event is generated in support of almost any VSS operation, including system queries as well as shadow copy and backup and restore operations.</span></span> <span data-ttu-id="d36cb-130">Por lo tanto, la implementación de cualquier escritor del controlador de eventos [**CVssWriter:: he Identify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) debe ser capaz de controlar un evento de identificación en cualquier momento, incluso en medio de procesar otra operación de VSS, como una copia de seguridad o una restauración.</span><span class="sxs-lookup"><span data-stu-id="d36cb-130">Therefore, any writer's implementation of the Identify event handler [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify) must be able to handle an Identify event at any time—including in the middle of processing another VSS operation, such as a backup or restore.</span></span> <span data-ttu-id="d36cb-131">Un evento de identificación no debe considerarse nunca como parte del ciclo de vida de una operación de VSS, aunque su generación puede ser esperada y necesaria antes del inicio de esa operación.</span><span class="sxs-lookup"><span data-stu-id="d36cb-131">An Identify event should never be thought of as part of the life cycle of a VSS operation, even though its generation may be expected and required prior to the start of that operation.</span></span>

<span data-ttu-id="d36cb-132">Es especialmente importante que la información de estado sobre una operación de VSS no se modifique en [**CVssWriter:: he Identify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify), ya que la recepción de un evento fuera de orden restablecería esa información.</span><span class="sxs-lookup"><span data-stu-id="d36cb-132">It is particularly important that state information about a VSS operation not be modified in [**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify), because receipt of an out-of-order event would reset that information.</span></span>

## <a name="backup-and-restore-events"></a><span data-ttu-id="d36cb-133">Eventos de copia de seguridad y restauración</span><span class="sxs-lookup"><span data-stu-id="d36cb-133">Backup and Restore Events</span></span>

<span data-ttu-id="d36cb-134">Dependiendo de si participa en una copia de seguridad o una restauración, un escritor recibirá entre dos y siete eventos, además de un evento de identificación inicial.</span><span class="sxs-lookup"><span data-stu-id="d36cb-134">Depending on whether it is participating in a backup or restore, a writer will receive between two and seven events, in addition to an initial Identify event.</span></span>

<span data-ttu-id="d36cb-135">Controlar estos eventos constituye (desde el punto de vista de un escritor) el ciclo de vida de una operación de copia de seguridad o restauración.</span><span class="sxs-lookup"><span data-stu-id="d36cb-135">Handling these events constitutes (from the point of view of a writer) the life cycle of a backup or restore operation.</span></span>

<span data-ttu-id="d36cb-136">En una operación de copia de seguridad típica (consulte [información general sobre el procesamiento de una copia de seguridad en VSS](overview-of-processing-a-backup-under-vss.md)), un escritor administraría los siguientes eventos (además de un evento de identificación inicial):</span><span class="sxs-lookup"><span data-stu-id="d36cb-136">In a typical backup operation (see [Overview of Processing a Backup Under VSS](overview-of-processing-a-backup-under-vss.md)), a writer would handle the following events (in addition to an initial Identify event):</span></span>

-   <span data-ttu-id="d36cb-137">PrepareForBackup</span><span class="sxs-lookup"><span data-stu-id="d36cb-137">PrepareForBackup</span></span>
-   <span data-ttu-id="d36cb-138">PrepareForSnapshot</span><span class="sxs-lookup"><span data-stu-id="d36cb-138">PrepareForSnapshot</span></span>
-   <span data-ttu-id="d36cb-139">Freeze</span><span class="sxs-lookup"><span data-stu-id="d36cb-139">Freeze</span></span>
-   <span data-ttu-id="d36cb-140">Reanudar</span><span class="sxs-lookup"><span data-stu-id="d36cb-140">Thaw</span></span>
-   <span data-ttu-id="d36cb-141">Instantánea</span><span class="sxs-lookup"><span data-stu-id="d36cb-141">PostSnapshot</span></span>
-   <span data-ttu-id="d36cb-142">BackupComplete</span><span class="sxs-lookup"><span data-stu-id="d36cb-142">BackupComplete</span></span>
-   <span data-ttu-id="d36cb-143">BackupShutdown</span><span class="sxs-lookup"><span data-stu-id="d36cb-143">BackupShutdown</span></span>

<span data-ttu-id="d36cb-144">En una operación de restauración típica (consulte [información general sobre el procesamiento de una restauración en VSS](overview-of-processing-a-restore-under-vss.md)), un escritor administraría los siguientes eventos:</span><span class="sxs-lookup"><span data-stu-id="d36cb-144">In a typical restore operation (see [Overview of Processing a Restore Under VSS](overview-of-processing-a-restore-under-vss.md)), a writer would handle the following events:</span></span>

-   <span data-ttu-id="d36cb-145">Prerestauración</span><span class="sxs-lookup"><span data-stu-id="d36cb-145">PreRestore</span></span>
-   <span data-ttu-id="d36cb-146">Postrestore</span><span class="sxs-lookup"><span data-stu-id="d36cb-146">PostRestore</span></span>

 

 



