---
title: Extensiones de dispositivo MTP para transferencia de metadatos
description: Extensiones de dispositivo MTP para transferencia de metadatos
ms.assetid: 9cf68373-e84f-4568-a9da-16ddee0fc4e9
keywords:
- Windows Media Player, extensiones de dispositivo MTP
- Windows Media Player, extensiones de dispositivo
- Windows Media Player, extensiones
- Media Player de Windows, metadatos
- Windows Media Player, protocolo de transferencia multimedia (MTP)
- Protocolo de transferencia multimedia (MTP)
- MTP (Protocolo de transferencia multimedia)
- metadatos, extensiones de dispositivo MTP
- metadatos, extensiones de dispositivo
- metadatos, extensiones
- extensiones de dispositivo, transferencia de metadatos
- extensiones, transferencia de metadatos
- Extensiones de dispositivo MTP para transferencia de metadatos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f64ff16fd97f135d7f8c902af823b967079408fb
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "104075046"
---
# <a name="mtp-device-extensions-for-metadata-transfer"></a><span data-ttu-id="76c75-116">Extensiones de dispositivo MTP para transferencia de metadatos</span><span class="sxs-lookup"><span data-stu-id="76c75-116">MTP Device Extensions for Metadata Transfer</span></span>

<span data-ttu-id="76c75-117">El protocolo de transferencia multimedia (MTP) es un protocolo diseñado para dispositivos multimedia portátiles.</span><span class="sxs-lookup"><span data-stu-id="76c75-117">Media Transfer Protocol (MTP) is a protocol designed for portable media devices.</span></span> <span data-ttu-id="76c75-118">El objetivo principal de este protocolo es proporcionar un protocolo común para intercambiar datos entre un equipo y un dispositivo multimedia portátil.</span><span class="sxs-lookup"><span data-stu-id="76c75-118">The primary purpose of this protocol is to provide a common protocol for exchanging data between a computer and a portable media device.</span></span> <span data-ttu-id="76c75-119">Esto incluye la recepción y el envío de objetos multimedia, y la enumeración del contenido y las capacidades del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="76c75-119">This includes receiving and sending media objects and enumerating the contents and capabilities of the device.</span></span>

<span data-ttu-id="76c75-120">MTP usa identificadores de objeto únicos (PUOIDs) persistentes para identificar de forma única los elementos multimedia digitales (y otros objetos) almacenados en un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="76c75-120">MTP uses persistent unique object identifiers (PUOIDs) to uniquely identify digital media items (and other objects) stored on a device.</span></span> <span data-ttu-id="76c75-121">Al intercambiar información sobre los cambios que se han producido en un dispositivo que admite MTP, el dispositivo y Windows Media Player usar PUOIDs para identificar qué objetos han cambiado.</span><span class="sxs-lookup"><span data-stu-id="76c75-121">When exchanging information about changes that have occurred on a device that supports MTP, the device and Windows Media Player use PUOIDs to identify which objects have changed.</span></span>

<span data-ttu-id="76c75-122">El archivo de encabezado denominado wmpdevices. h, que se instala como parte del SDK de Windows Media Player, define las estructuras y constantes necesarias para admitir las extensiones de dispositivo de Windows Media Player.</span><span class="sxs-lookup"><span data-stu-id="76c75-122">The header file named wmpdevices.h, which is installed as part of the Windows Media Player SDK, defines the structures and constants needed to support Windows Media Player device extensions.</span></span>

<span data-ttu-id="76c75-123">Para que un dispositivo se reconozca como compatibilidad con la transferencia de metadatos a través del conjunto de extensiones de dispositivo MTP de Windows Media Player, debe incluir la siguiente información en el conjunto de datos DeviceInfo.</span><span class="sxs-lookup"><span data-stu-id="76c75-123">For a device to be recognized as supporting metadata transfer through the Windows Media Player MTP device extension set, it must include the following information in the DeviceInfo dataset.</span></span> <span data-ttu-id="76c75-124">(Para obtener más información sobre este conjunto de datos, vea la sección 4.6.1 de la especificación de MTP).</span><span class="sxs-lookup"><span data-stu-id="76c75-124">(For more information about this dataset, see section 4.6.1 of the MTP specification.)</span></span>



| <span data-ttu-id="76c75-125">Campo de conjunto de los</span><span class="sxs-lookup"><span data-stu-id="76c75-125">Dataset field</span></span>          | <span data-ttu-id="76c75-126">Orden de los campos</span><span class="sxs-lookup"><span data-stu-id="76c75-126">Field order</span></span> | <span data-ttu-id="76c75-127">Tipo de datos</span><span class="sxs-lookup"><span data-stu-id="76c75-127">Data type</span></span>  | <span data-ttu-id="76c75-128">Value</span><span class="sxs-lookup"><span data-stu-id="76c75-128">Value</span></span>                       |
|------------------------|-------------|------------|-----------------------------|
| <span data-ttu-id="76c75-129">VendorExtensionID</span><span class="sxs-lookup"><span data-stu-id="76c75-129">VendorExtensionID</span></span>      | <span data-ttu-id="76c75-130">2</span><span class="sxs-lookup"><span data-stu-id="76c75-130">2</span></span>           | <span data-ttu-id="76c75-131">**UINT32**</span><span class="sxs-lookup"><span data-stu-id="76c75-131">**UINT32**</span></span> | <span data-ttu-id="76c75-132">0x00000006</span><span class="sxs-lookup"><span data-stu-id="76c75-132">0x00000006</span></span>                  |
| <span data-ttu-id="76c75-133">VendorExtensionVersion</span><span class="sxs-lookup"><span data-stu-id="76c75-133">VendorExtensionVersion</span></span> | <span data-ttu-id="76c75-134">3</span><span class="sxs-lookup"><span data-stu-id="76c75-134">3</span></span>           | <span data-ttu-id="76c75-135">**UINT16**</span><span class="sxs-lookup"><span data-stu-id="76c75-135">**UINT16**</span></span> | <span data-ttu-id="76c75-136">0x0064 (100)</span><span class="sxs-lookup"><span data-stu-id="76c75-136">0x0064 (100)</span></span>                |
| <span data-ttu-id="76c75-137">VendorExtensionDesc</span><span class="sxs-lookup"><span data-stu-id="76c75-137">VendorExtensionDesc</span></span>    | <span data-ttu-id="76c75-138">4</span><span class="sxs-lookup"><span data-stu-id="76c75-138">4</span></span>           | <span data-ttu-id="76c75-139">**String**</span><span class="sxs-lookup"><span data-stu-id="76c75-139">**String**</span></span> | <span data-ttu-id="76c75-140">"microsoft.com/WMPPD: 10,0"</span><span class="sxs-lookup"><span data-stu-id="76c75-140">"microsoft.com/WMPPD: 10.0"</span></span> |



 

<span data-ttu-id="76c75-141">En la tabla siguiente se proporcionan detalles sobre la operación MTP para la transferencia de metadatos acelerada.</span><span class="sxs-lookup"><span data-stu-id="76c75-141">The following table provides details about the MTP operation for accelerated metadata transfer.</span></span>



| <span data-ttu-id="76c75-142">Elemento</span><span class="sxs-lookup"><span data-stu-id="76c75-142">Item</span></span>                  | <span data-ttu-id="76c75-143">Descripción</span><span class="sxs-lookup"><span data-stu-id="76c75-143">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|-----------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="76c75-144">Código de operación</span><span class="sxs-lookup"><span data-stu-id="76c75-144">Operation Code</span></span>        | <span data-ttu-id="76c75-145">0x9201</span><span class="sxs-lookup"><span data-stu-id="76c75-145">0x9201</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="76c75-146">Parámetro de operación 1</span><span class="sxs-lookup"><span data-stu-id="76c75-146">Operation Parameter 1</span></span> | <span data-ttu-id="76c75-147">El ID. de transacción proporcionado por el dispositivo durante la sesión anterior.</span><span class="sxs-lookup"><span data-stu-id="76c75-147">The transaction ID supplied by the device during the previous session.</span></span> <span data-ttu-id="76c75-148">Este valor es cero para la primera sesión.</span><span class="sxs-lookup"><span data-stu-id="76c75-148">This value is zero for the first session.</span></span>                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="76c75-149">Parámetro de operación 2</span><span class="sxs-lookup"><span data-stu-id="76c75-149">Operation Parameter 2</span></span> | <span data-ttu-id="76c75-150">Índice de inicio.</span><span class="sxs-lookup"><span data-stu-id="76c75-150">Starting index.</span></span> <span data-ttu-id="76c75-151">Este valor siempre es cero en la primera llamada de una sesión.</span><span class="sxs-lookup"><span data-stu-id="76c75-151">This value is always zero on the first call of a session.</span></span> <span data-ttu-id="76c75-152">En las llamadas posteriores dentro de la misma sesión de sincronización, este valor aumenta en función de la suma del recuento de los elementos modificados y eliminados de los datos de respuesta anteriores.</span><span class="sxs-lookup"><span data-stu-id="76c75-152">On subsequent calls within the same synchronization session, this value increases by the sum of the count of the modified and the deleted items from the previous response data.</span></span>                                                                                                                                                                                                                                             |
| <span data-ttu-id="76c75-153">Parámetro de operación 3</span><span class="sxs-lookup"><span data-stu-id="76c75-153">Operation Parameter 3</span></span> | <span data-ttu-id="76c75-154">0x10000.</span><span class="sxs-lookup"><span data-stu-id="76c75-154">0x10000.</span></span> <span data-ttu-id="76c75-155">Esta constante, definida en wmpdevices. h, es el número máximo de PUOIDs que se puede devolver en la respuesta.</span><span class="sxs-lookup"><span data-stu-id="76c75-155">This constant, defined in wmpdevices.h, is the maximum number of PUOIDs that can be returned in the response.</span></span> <span data-ttu-id="76c75-156">Tenga en cuenta que el valor de esta constante se puede revisar en futuras versiones de este archivo de encabezado.</span><span class="sxs-lookup"><span data-stu-id="76c75-156">Note that the value of this constant may be revised in future releases of this header file.</span></span>                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="76c75-157">Parámetro de operación 4</span><span class="sxs-lookup"><span data-stu-id="76c75-157">Operation Parameter 4</span></span> | <span data-ttu-id="76c75-158">0</span><span class="sxs-lookup"><span data-stu-id="76c75-158">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="76c75-159">Parámetro de operación 5</span><span class="sxs-lookup"><span data-stu-id="76c75-159">Operation Parameter 5</span></span> | <span data-ttu-id="76c75-160">0</span><span class="sxs-lookup"><span data-stu-id="76c75-160">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="76c75-161">Datos</span><span class="sxs-lookup"><span data-stu-id="76c75-161">Data</span></span>                  | <span data-ttu-id="76c75-162">El dispositivo devuelve dos matrices MTP contiguas que contienen PUOIDs.</span><span class="sxs-lookup"><span data-stu-id="76c75-162">The device returns two contiguous MTP arrays containing PUOIDs.</span></span> <span data-ttu-id="76c75-163">Cada matriz MTP comienza con un valor **DWORD** que indica el recuento de elementos de la matriz, seguido de la matriz de elementos.</span><span class="sxs-lookup"><span data-stu-id="76c75-163">Each MTP array begins with a **DWORD** value indicating the count of items in the array, followed by the array of elements.</span></span> <span data-ttu-id="76c75-164">La primera matriz MTP contiene la lista de PUOIDs que se han agregado o cambiado.</span><span class="sxs-lookup"><span data-stu-id="76c75-164">The first MTP array contains the list of PUOIDs that have been added or changed.</span></span> <span data-ttu-id="76c75-165">La segunda matriz MTP contiene la lista de PUOIDs que se han eliminado del dispositivo portátil. Tenga en cuenta que la suma del recuento de PUOID en las dos matrices no debe superar el valor pasado en el parámetro de operación 3.</span><span class="sxs-lookup"><span data-stu-id="76c75-165">The second MTP array contains the list of PUOIDs that have been deleted from the portable device.Note that the sum of PUOID count in the two arrays must not exceed the value passed in Operation Parameter 3.</span></span><br/> |
| <span data-ttu-id="76c75-166">Dirección de datos</span><span class="sxs-lookup"><span data-stu-id="76c75-166">Data Direction</span></span>        | <span data-ttu-id="76c75-167">R->I</span><span class="sxs-lookup"><span data-stu-id="76c75-167">R->I</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="76c75-168">Opciones de código de respuesta</span><span class="sxs-lookup"><span data-stu-id="76c75-168">Response Code Options</span></span> | <span data-ttu-id="76c75-169">**MTP \_ RESPUESTA \_ correcta** (0x2001) o código de respuesta de error válido.</span><span class="sxs-lookup"><span data-stu-id="76c75-169">**MTP\_RESPONSE\_OK** (0x2001) or valid error response code.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="76c75-170">Parámetro de respuesta 1</span><span class="sxs-lookup"><span data-stu-id="76c75-170">Response Parameter 1</span></span>  | <span data-ttu-id="76c75-171">El identificador de la transacción actual del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="76c75-171">The device's current transaction ID.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="76c75-172">Parámetro de respuesta 2</span><span class="sxs-lookup"><span data-stu-id="76c75-172">Response Parameter 2</span></span>  | <span data-ttu-id="76c75-173">El número de PUOIDs que quedan para ser recuperadas por solicitudes futuras.</span><span class="sxs-lookup"><span data-stu-id="76c75-173">The number of PUOIDs that remain to be retrieved by future requests.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="76c75-174">Parámetro de respuesta 3</span><span class="sxs-lookup"><span data-stu-id="76c75-174">Response Parameter 3</span></span>  | <span data-ttu-id="76c75-175">**DWORD** que contiene información de estado.</span><span class="sxs-lookup"><span data-stu-id="76c75-175">**DWORD** containing status information.</span></span> <span data-ttu-id="76c75-176">El estado se indica de forma bit a bit.</span><span class="sxs-lookup"><span data-stu-id="76c75-176">Status is indicated in a bitwise fashion.</span></span> <span data-ttu-id="76c75-177">Vea la sección Comentarios para obtener información sobre las marcas que se deben usar.</span><span class="sxs-lookup"><span data-stu-id="76c75-177">See Remarks for information about flags to use.</span></span>                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="76c75-178">Parámetro de respuesta 4</span><span class="sxs-lookup"><span data-stu-id="76c75-178">Response Parameter 4</span></span>  | <span data-ttu-id="76c75-179">0</span><span class="sxs-lookup"><span data-stu-id="76c75-179">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="76c75-180">Parámetro de respuesta 5</span><span class="sxs-lookup"><span data-stu-id="76c75-180">Response Parameter 5</span></span>  | <span data-ttu-id="76c75-181">0</span><span class="sxs-lookup"><span data-stu-id="76c75-181">0</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="remarks"></a><span data-ttu-id="76c75-182">Observaciones</span><span class="sxs-lookup"><span data-stu-id="76c75-182">Remarks</span></span>

<span data-ttu-id="76c75-183">El estado se indica a través del parámetro de respuesta 3 de manera bit a bit mediante el uso de las marcas siguientes.</span><span class="sxs-lookup"><span data-stu-id="76c75-183">Status is indicated through Response Parameter 3 in a bitwise fashion by using the following flags.</span></span>



| <span data-ttu-id="76c75-184">Marca</span><span class="sxs-lookup"><span data-stu-id="76c75-184">Flag</span></span>                                             | <span data-ttu-id="76c75-185">Value</span><span class="sxs-lookup"><span data-stu-id="76c75-185">Value</span></span> | <span data-ttu-id="76c75-186">Descripción</span><span class="sxs-lookup"><span data-stu-id="76c75-186">Description</span></span>                                                                                                                                                                                                                          |
|--------------------------------------------------|-------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="76c75-187">**WMP \_ MDRT \_ marca \_ \_ los elementos eliminados no notificados \_**</span><span class="sxs-lookup"><span data-stu-id="76c75-187">**WMP\_MDRT\_FLAGS\_UNREPORTED\_DELETED\_ITEMS**</span></span> | <span data-ttu-id="76c75-188">0x1</span><span class="sxs-lookup"><span data-stu-id="76c75-188">0x1</span></span>   | <span data-ttu-id="76c75-189">Los elementos se eliminaron antes de que se notifique el primer nombre de ruta de acceso al objeto.</span><span class="sxs-lookup"><span data-stu-id="76c75-189">Items were deleted before the first object path name being reported.</span></span> <span data-ttu-id="76c75-190">Esto suele indicar que se ha cambiado el formato del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="76c75-190">This often indicates that the device was reformatted.</span></span>                                                                                                           |
| <span data-ttu-id="76c75-191">**WMP \_ MDRT \_ marca \_ \_ elementos agregados no notificados \_**</span><span class="sxs-lookup"><span data-stu-id="76c75-191">**WMP\_MDRT\_FLAGS\_UNREPORTED\_ADDED\_ITEMS**</span></span>   | <span data-ttu-id="76c75-192">0x2</span><span class="sxs-lookup"><span data-stu-id="76c75-192">0x2</span></span>   | <span data-ttu-id="76c75-193">El dispositivo contiene algunos elementos agregados que no se pueden devolver en la lista de PUOIDS.</span><span class="sxs-lookup"><span data-stu-id="76c75-193">The device contains some added items that cannot be returned in the list of PUOIDS.</span></span> <span data-ttu-id="76c75-194">Tenga en cuenta que esta marca no es redundante con el parámetro de respuesta 2.</span><span class="sxs-lookup"><span data-stu-id="76c75-194">Note that this flag is not redundant with Response Parameter 2.</span></span> <span data-ttu-id="76c75-195">Establezca esta marca solo cuando haya elementos solicitados que el dispositivo no pueda devolver.</span><span class="sxs-lookup"><span data-stu-id="76c75-195">Set this flag only when there are requested items that the device cannot return.</span></span> |



 

<span data-ttu-id="76c75-196">Los bits 2 a 31 se reservan para uso futuro.</span><span class="sxs-lookup"><span data-stu-id="76c75-196">Bits 2 through 31 are reserved for future use.</span></span> <span data-ttu-id="76c75-197">Estos bits deben establecerse en cero.</span><span class="sxs-lookup"><span data-stu-id="76c75-197">These bits should be set to zero.</span></span>

<span data-ttu-id="76c75-198">Windows Media Player envía el comando MTP a un dispositivo al inicio de una sesión de sincronización antes de que se transfieran los archivos multimedia.</span><span class="sxs-lookup"><span data-stu-id="76c75-198">Windows Media Player sends the MTP command to a device at the start of a synchronization session before media files are transferred.</span></span> <span data-ttu-id="76c75-199">El dispositivo debe devolver su respuesta lo más rápido posible para evitar retrasos en la operación de sincronización.</span><span class="sxs-lookup"><span data-stu-id="76c75-199">The device should return its response as quickly as possible to avoid delays in the synchronization operation.</span></span>

<span data-ttu-id="76c75-200">Windows Media Player solicitará valores para los atributos que se enumeran en [acerca de los metadatos](about-the-metadata.md) de cada POUID modificado devuelto en la respuesta.</span><span class="sxs-lookup"><span data-stu-id="76c75-200">Windows Media Player will request values for the attributes listed in [About the Metadata](about-the-metadata.md) for each modified POUID returned in the response.</span></span> <span data-ttu-id="76c75-201">Windows Media Player podría enviar valores actualizados para estos atributos al dispositivo en comandos posteriores.</span><span class="sxs-lookup"><span data-stu-id="76c75-201">Windows Media Player might send updated values for these attributes to the device in subsequent commands.</span></span>

<span data-ttu-id="76c75-202">Los archivos que se notifiquen como que se han quitado del dispositivo pueden volver a copiarse en el dispositivo si la configuración del usuario lo requiere.</span><span class="sxs-lookup"><span data-stu-id="76c75-202">Files reported as having been removed from the device can be copied to the device again if the user's settings require it.</span></span>

## <a name="related-topics"></a><span data-ttu-id="76c75-203">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="76c75-203">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="76c75-204">**Extensiones de dispositivo para la transferencia de metadatos acelerada**</span><span class="sxs-lookup"><span data-stu-id="76c75-204">**Device Extensions for Accelerated Metadata Transfer**</span></span>](device-extensions-for-accelerated-metadata-transfer.md)
</dt> </dl>

 

 





