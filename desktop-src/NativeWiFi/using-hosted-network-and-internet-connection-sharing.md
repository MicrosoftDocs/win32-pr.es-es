---
title: Uso de redes hospedadas inalámbricas, uso compartido de conexión a Internet
description: Uso de redes hospedadas inalámbricas y conexión compartida a Internet
ms.assetid: 56e86ef8-f759-4e56-a591-74e03430125a
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 972774e921199e32eb70841c74c7478e2178cda9
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104001864"
---
# <a name="use-wireless-hosted-network-internet-connection-sharing"></a><span data-ttu-id="145b8-103">Uso de redes hospedadas inalámbricas, uso compartido de conexión a Internet</span><span class="sxs-lookup"><span data-stu-id="145b8-103">Use Wireless Hosted Network, Internet Connection Sharing</span></span>

<span data-ttu-id="145b8-104">La red hospedada inalámbrica es una nueva característica de WLAN compatible con Windows 7 y Windows 8.</span><span class="sxs-lookup"><span data-stu-id="145b8-104">The Wireless Hosted Network is a new WLAN feature supported on Windows 7 and Windows 8.</span></span> <span data-ttu-id="145b8-105">También se admite en Windows Server 2012 y Windows Server 2008 R2 con el servicio de LAN inalámbrica instalado.</span><span class="sxs-lookup"><span data-stu-id="145b8-105">It is also supported on Windows Server 2012 and Windows Server 2008 R2 with the Wireless LAN Service installed.</span></span> <span data-ttu-id="145b8-106">Esta característica implementa dos funciones principales:</span><span class="sxs-lookup"><span data-stu-id="145b8-106">This feature implements two major functions:</span></span>

-   <span data-ttu-id="145b8-107">La virtualización de un adaptador inalámbrico físico en más de un adaptador inalámbrico virtual a veces se denomina Wi-Fi virtual.</span><span class="sxs-lookup"><span data-stu-id="145b8-107">The virtualization of a physical wireless adapter into more than one virtual wireless adapter sometimes referred to as Virtual Wi-Fi.</span></span>
-   <span data-ttu-id="145b8-108">Un punto de acceso inalámbrico (AP) basado en software, que a veces se denomina SoftAP, que usa un adaptador inalámbrico virtual designado.</span><span class="sxs-lookup"><span data-stu-id="145b8-108">A software-based wireless access point (AP) sometimes referred to as a SoftAP that uses a designated virtual wireless adapter.</span></span>

<span data-ttu-id="145b8-109">Conexión compartida a Internet (ICS) es una característica de Windows que se proporciona a través del servicio SharedAccess.</span><span class="sxs-lookup"><span data-stu-id="145b8-109">Internet Connection Sharing (ICS) is a feature in Windows provided through the SharedAccess Service.</span></span> <span data-ttu-id="145b8-110">En realidad, SharedAccess permite el uso compartido de red a través de un equipo en el que el acceso a la red compartida no proporciona necesariamente acceso a Internet.</span><span class="sxs-lookup"><span data-stu-id="145b8-110">Strictly speaking, SharedAccess enables network sharing through a computer where the shared network access does not necessarily provide access to the Internet.</span></span> <span data-ttu-id="145b8-111">Usamos el término ICS y SharedAccess indistintamente en esta sección, ya que la conexión compartida a Internet es un escenario importante para la red hospedada inalámbrica y el término de ICS es más conocido para la comunidad de usuarios.</span><span class="sxs-lookup"><span data-stu-id="145b8-111">We use the term ICS and SharedAccess interchangeably in this section, since Internet Connection Sharing is a major scenario for the wireless Hosted Network and the ICS term is better known to the user community.</span></span>

<span data-ttu-id="145b8-112">Red hospedada inalámbrica está estrechamente vinculada a ICS para habilitar la red de área personal inalámbrica (PAN) y los escenarios de uso compartido de Internet.</span><span class="sxs-lookup"><span data-stu-id="145b8-112">Wireless Hosted Network is closely tied to ICS to enable both the wireless personal area network (PAN) and the Internet sharing scenarios.</span></span> <span data-ttu-id="145b8-113">En esta sección se proporcionan recomendaciones generales para que los desarrolladores de aplicaciones puedan integrar redes hospedadas inalámbricas e ICS mediante la red pública hospedada y las API de ICS.</span><span class="sxs-lookup"><span data-stu-id="145b8-113">This section provides general recommendations to application developers on how to integrate wireless Hosted Network and ICS using the public wireless Hosted Network and ICS APIs.</span></span>

## <a name="internet-connection-sharing"></a><span data-ttu-id="145b8-114">Conexión compartida a Internet</span><span class="sxs-lookup"><span data-stu-id="145b8-114">Internet Connection Sharing</span></span>

<span data-ttu-id="145b8-115">El servicio ICS funciona en uno de los dos modos posibles:</span><span class="sxs-lookup"><span data-stu-id="145b8-115">The ICS Service operates in one of the two possible modes:</span></span>

-   <span data-ttu-id="145b8-116">Modo independiente</span><span class="sxs-lookup"><span data-stu-id="145b8-116">Standalone mode</span></span>

    <span data-ttu-id="145b8-117">Solo la función de servidor DHCPv4 funciona cuando se invoca el servicio ICS.</span><span class="sxs-lookup"><span data-stu-id="145b8-117">Only the DHCPv4 server function is operating when the ICS service is invoked.</span></span> <span data-ttu-id="145b8-118">Se trata de un modo de operación especial para ICS y solo está disponible a través de la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-118">This is a special operation mode for ICS and is only made available through the wireless Hosted Network.</span></span> <span data-ttu-id="145b8-119">Un usuario o una aplicación no puede iniciar ni detener directamente ICS independiente a través de las API de ICS público o los comandos **netsh** .</span><span class="sxs-lookup"><span data-stu-id="145b8-119">A user or application is not able to directly start and stop standalone ICS through public ICS APIs or **netsh** commands.</span></span> <span data-ttu-id="145b8-120">Iniciar la red hospedada inalámbrica normalmente implica iniciar ICS en modo independiente para usar la función de servidor DHCPv4 con el fin de proporcionar direcciones IPv4 privadas para los dispositivos conectados.</span><span class="sxs-lookup"><span data-stu-id="145b8-120">Starting the wireless Hosted Network typically involves starting ICS in standalone mode to use the DHCPv4 server function to provide private IPv4 addresses for connected devices.</span></span> <span data-ttu-id="145b8-121">La comunicación de red para los dispositivos conectados se limita al envío y la recepción de paquetes de red entre un dispositivo conectado y el equipo local que hospeda la red hospedada inalámbrica y entre los propios dispositivos conectados.</span><span class="sxs-lookup"><span data-stu-id="145b8-121">Network communication for the connected devices is limited to sending and receiving network packets between a connected device and the local computer hosting the wireless Hosted Network and among the connected devices themselves.</span></span> <span data-ttu-id="145b8-122">De este modo, se habilita el escenario de red de área personal inalámbrica para la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-122">This effectively enables the wireless personal area network scenario for the wireless Hosted Network.</span></span>

-   <span data-ttu-id="145b8-123">Modo completo</span><span class="sxs-lookup"><span data-stu-id="145b8-123">Full mode</span></span>

    <span data-ttu-id="145b8-124">Todas las características de ICS funcionan cuando se invoca el servicio, como la traducción de direcciones de red y las funciones de servidor DHCP para IPv4 e IPv6.</span><span class="sxs-lookup"><span data-stu-id="145b8-124">All the features of ICS are operating when the service is invoked, such as network address translation and DHCP server functions for both IPv4 and IPv6.</span></span> <span data-ttu-id="145b8-125">Este es el modo de funcionamiento normal de ICS.</span><span class="sxs-lookup"><span data-stu-id="145b8-125">This is the normal mode of operation for ICS.</span></span> <span data-ttu-id="145b8-126">Un usuario o una aplicación puede iniciar y detener el modo de ICS completo a través de API públicas o comandos NetShell.</span><span class="sxs-lookup"><span data-stu-id="145b8-126">A user or application may start and stop full ICS mode through public APIs or netshell commands.</span></span> <span data-ttu-id="145b8-127">Por ejemplo, este servicio se puede detener mediante net stop SharedAccess desde un símbolo del sistema con privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="145b8-127">For example, this service can be stopped using net stop sharedaccess from an elevated command prompt.</span></span> <span data-ttu-id="145b8-128">La combinación de redes hospedadas inalámbricas con ICS completo, la comunicación de red para los dispositivos conectados no se limita a la PAN inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-128">Combining wireless Hosted Network with full ICS, Network communication for the connected devices is not limited to the wireless PAN.</span></span> <span data-ttu-id="145b8-129">Cualquier dispositivo conectado tiene acceso a la red (por ejemplo, Internet) a través de la conexión de red compartida desde el equipo que ejecuta la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-129">Any connected device has access to network (such as the Internet) through the shared network connection from the computer running the wireless Hosted Network.</span></span> <span data-ttu-id="145b8-130">De este modo, se habilita el escenario de uso compartido de red para la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-130">This effectively enables the Network sharing scenario for the wireless Hosted Network.</span></span>

<span data-ttu-id="145b8-131">En esta sección, usamos el término Full ICS para indicar el caso en el que todas las funciones de ICS se invocan en el servicio ICS para proporcionar acceso a todas las características de ICS completas con la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-131">In this section, we use the term full ICS to mean the case where all the ICS functions are invoked in ICS Service to provide access to all the full ICS features with the wireless Hosted Network.</span></span>

<span data-ttu-id="145b8-132">Los dos modos de operación de ICS se excluyen mutuamente con un valor de ICS completo que toma mayor precedencia.</span><span class="sxs-lookup"><span data-stu-id="145b8-132">The two ICS operation modes are mutually exclusive with full ICS taking higher precedence.</span></span> <span data-ttu-id="145b8-133">El servicio ICS puede pasar del modo independiente al modo completo, pero no del modo completo al modo independiente.</span><span class="sxs-lookup"><span data-stu-id="145b8-133">The ICS Service may transition from standalone mode to full mode, but not from full mode to standalone mode.</span></span> <span data-ttu-id="145b8-134">El modo independiente de ICS se presentó en Windows 7 y en Windows Server 2008 R2 con el servicio de LAN inalámbrica instalado junto con la característica de red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-134">The ICS standalone mode was introduced in Windows 7 and on Windows Server 2008 R2 with the Wireless LAN Service installed in conjunction with the wireless Hosted Network feature.</span></span> <span data-ttu-id="145b8-135">No está disponible en versiones anteriores de Windows.</span><span class="sxs-lookup"><span data-stu-id="145b8-135">It is not available in previous versions of Windows.</span></span>

<span data-ttu-id="145b8-136">Cualquier operación de ICS completa implica dos adaptadores de red diferentes en el sistema:</span><span class="sxs-lookup"><span data-stu-id="145b8-136">Any full ICS operation involves two different network adapters in the system:</span></span>

-   <span data-ttu-id="145b8-137">La interfaz pública.</span><span class="sxs-lookup"><span data-stu-id="145b8-137">The public interface.</span></span> <span data-ttu-id="145b8-138">Esta es la interfaz de red con acceso a Internet.</span><span class="sxs-lookup"><span data-stu-id="145b8-138">This is the network interface with access to the Internet.</span></span> <span data-ttu-id="145b8-139">Esta es la interfaz que el equipo local que ejecuta ICS usa para compartir Internet con los clientes y dispositivos que se conectan a él a través de SoftAP.</span><span class="sxs-lookup"><span data-stu-id="145b8-139">It is this interface that the local computer running ICS uses to share the Internet with clients and devices connecting to it via SoftAP.</span></span>
-   <span data-ttu-id="145b8-140">Interfaz privada.</span><span class="sxs-lookup"><span data-stu-id="145b8-140">The private interface.</span></span> <span data-ttu-id="145b8-141">Esta es la interfaz de red que otros dispositivos usan para conectarse al equipo local que ejecuta ICS.</span><span class="sxs-lookup"><span data-stu-id="145b8-141">This is the network interface that other devices use to connect to the local computer that is running ICS.</span></span> <span data-ttu-id="145b8-142">Se está ejecutando un servidor DHCPv4 en esta interfaz privada para proporcionar direcciones IP locales privadas a los otros equipos remotos.</span><span class="sxs-lookup"><span data-stu-id="145b8-142">A DHCPv4 server is running on this private interface to provide private local IP addresses to the other remote computers.</span></span>

<span data-ttu-id="145b8-143">Cuando la interfaz pública no tiene acceso a Internet, el servidor DHCP de la interfaz privada sigue proporcionando direcciones IP locales a los dispositivos conectados.</span><span class="sxs-lookup"><span data-stu-id="145b8-143">When the public interface does not have Internet access, the DHCP server on the private interface continues to provide local IP addresses to the connected devices.</span></span> <span data-ttu-id="145b8-144">ICS independiente solo implica la interfaz privada en la que se está ejecutando SoftAP; no implica ninguna interfaz pública.</span><span class="sxs-lookup"><span data-stu-id="145b8-144">Standalone ICS only involves the private interface on which SoftAP is running; it does not involve any public interface.</span></span>

<span data-ttu-id="145b8-145">En cualquier momento, hay al menos una instancia del ICS completo ejecutándose en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="145b8-145">At any time, there is at most one instance of full ICS running on the local computer.</span></span> <span data-ttu-id="145b8-146">Si el ICS completo ya se está ejecutando en el equipo local, al iniciar otro ICS completo se presentan los siguientes comportamientos funcionales:</span><span class="sxs-lookup"><span data-stu-id="145b8-146">If full ICS is already running on the local computer, starting another full ICS exhibits the following functional behaviors:</span></span>

-   <span data-ttu-id="145b8-147">Si las interfaces públicas y privadas del nuevo ICS completo son las mismas que las del ICS completo existente, el inicio del segundo ICS completo equivale a una operación no operativa.</span><span class="sxs-lookup"><span data-stu-id="145b8-147">If the public and private interfaces of the new full ICS are the same as the existing full ICS, starting the second full ICS is equivalent to a no-op.</span></span>
-   <span data-ttu-id="145b8-148">Si la nueva interfaz pública es diferente de la interfaz pública anterior, pero la nueva interfaz privada es la misma que la interfaz privada antigua, el inicio de un segundo ICS completo tiene poco impacto en los dispositivos conectados en la misma interfaz privada.</span><span class="sxs-lookup"><span data-stu-id="145b8-148">If the new public interface is different from the old public interface, but the new private interface is the same as the old private interface, starting a second full ICS has little impact on the connected devices on the same private interface.</span></span> <span data-ttu-id="145b8-149">La capacidad de tener acceso a Internet puede cambiar con la nueva interfaz pública.</span><span class="sxs-lookup"><span data-stu-id="145b8-149">The ability to access the Internet may change with the new public interface.</span></span>
-   <span data-ttu-id="145b8-150">Si la nueva interfaz privada es diferente de la antigua, las funciones de ICS dejarán de funcionar en la interfaz privada anterior y comenzarán a aplicarse a la nueva interfaz privada.</span><span class="sxs-lookup"><span data-stu-id="145b8-150">If the new private interface is different than the old private interface, ICS functions will stop working on the old private interface and start applying to the new private interface.</span></span> <span data-ttu-id="145b8-151">Cualquier dispositivo remoto que se conecte al equipo local mediante la interfaz privada antigua perderá la conectividad de IP con el equipo local.</span><span class="sxs-lookup"><span data-stu-id="145b8-151">Any remote device connecting to the local computer using the old private interface will lose IP connectivity to the local computer.</span></span>

<span data-ttu-id="145b8-152">Cuando el ICS completo ya se está ejecutando, la invocación de un segundo ICS completo es perjudicial para los dispositivos conectados de forma remota mediante la interfaz privada antigua siempre y cuando la segunda integración de ICS use una nueva interfaz privada diferente.</span><span class="sxs-lookup"><span data-stu-id="145b8-152">When full ICS is already running, invoking a second full ICS is disruptive to remotely connected devices using the old private interface as long as the second ICS integration uses a different new private interface.</span></span>

<span data-ttu-id="145b8-153">Para administrar y usar el servicio ICS para admitir la integración de ICS con redes hospedadas inalámbricas, una aplicación de software debe obtener primero una interfaz [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) .</span><span class="sxs-lookup"><span data-stu-id="145b8-153">To manage and use the ICS service to support ICS integration with wireless Hosted Network, a software application must first obtain an [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) interface.</span></span> <span data-ttu-id="145b8-154">La interfaz **INetSharingManager** proporciona acceso directo o indirecto a todas las demás interfaces com de la API de ICS.</span><span class="sxs-lookup"><span data-stu-id="145b8-154">The **INetSharingManager** interface provides access directly or indirectly to all the other COM interfaces in the ICS API.</span></span> <span data-ttu-id="145b8-155">El método [**Get \_ SharingInstalled**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_sharinginstalled) de la interfaz **INetSharingManager** indica si el equipo local admite el uso compartido de la conexión.</span><span class="sxs-lookup"><span data-stu-id="145b8-155">The [**get\_SharingInstalled**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_sharinginstalled) method on the **INetSharingManager** interface reports whether the local computer supports connection sharing.</span></span> <span data-ttu-id="145b8-156">El método [**Get \_ EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) de la interfaz **INetSharingManager** recupera una interfaz de enumeración para todas las conexiones de la carpeta Connections.</span><span class="sxs-lookup"><span data-stu-id="145b8-156">The [**get\_EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) method on the **INetSharingManager** interface retrieves an enumeration interface for all connections in the connections folder.</span></span> <span data-ttu-id="145b8-157">El método [**Get \_ INetSharingConfigurationForINetConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_inetsharingconfigurationforinetconnection) recupera una interfaz [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) para la conexión especificada.</span><span class="sxs-lookup"><span data-stu-id="145b8-157">The [**get\_INetSharingConfigurationForINetConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_inetsharingconfigurationforinetconnection) method retrieves an [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) interface for the specified connection.</span></span> <span data-ttu-id="145b8-158">Los métodos de la interfaz **INetSharingConfiguration** se pueden usar para consultar y cambiar la configuración de ICS.</span><span class="sxs-lookup"><span data-stu-id="145b8-158">Methods on the **INetSharingConfiguration** interface can be used to query and change ICS settings.</span></span>

<span data-ttu-id="145b8-159">La red hospedada inalámbrica debe iniciarse antes de llamar al método [**Get \_ EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) en la interfaz [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) para enumerar todas las conexiones en la carpeta conexiones.</span><span class="sxs-lookup"><span data-stu-id="145b8-159">The wireless Hosted Network must be started before calling the [**get\_EnumEveryConnection**](/windows/win32/api/netcon/nf-netcon-inetsharingmanager-get_enumeveryconnection) method on the [**INetSharingManager**](/windows/win32/api/netcon/nn-netcon-inetsharingmanager) interface to enumerate all connections in the connections folder.</span></span>

<span data-ttu-id="145b8-160">Para obtener información sobre ICS y las interfaces y métodos públicos que se pueden usar para consultar y cambiar la configuración de ICS, consulte la documentación sobre la [Conexión compartida a Internet y el Firewall de conexión a Internet](/previous-versions/windows/desktop/ics/about-internet-connection-sharing-and-internet-connection-firewall).</span><span class="sxs-lookup"><span data-stu-id="145b8-160">For information on ICS and the public interfaces and methods that can be used to query and change ICS settings, please see the documentation on [About Internet Connection Sharing and Internet Connection Firewall](/previous-versions/windows/desktop/ics/about-internet-connection-sharing-and-internet-connection-firewall).</span></span>

## <a name="hosted-network-and-ics-integration"></a><span data-ttu-id="145b8-161">Integración de ICS e red hospedada</span><span class="sxs-lookup"><span data-stu-id="145b8-161">Hosted Network and ICS Integration</span></span>

<span data-ttu-id="145b8-162">Cuando ICS completo no se está ejecutando, el inicio de una red hospedada inalámbrica también inicia internamente el servicio ICS en modo independiente con solo la función de servidor DHCPv4 para asignar direcciones IP para los dispositivos conectados en la interfaz de red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-162">When full ICS is not running, starting a wireless Hosted Network also internally starts the ICS Service in standalone mode with only the DHCPv4 server function to allocate IP addresses for the connected devices on the wireless Hosted Network interface.</span></span> <span data-ttu-id="145b8-163">El intervalo de direcciones de subred para el servidor DHCPv4 independiente es 192.168.173.0/24.</span><span class="sxs-lookup"><span data-stu-id="145b8-163">The subnet address range for the standalone DHCPv4 server is 192.168.173.0/24.</span></span> <span data-ttu-id="145b8-164">Esto es diferente del intervalo de subred de 192.168.137.0/24 que se usa con el ICS completo.</span><span class="sxs-lookup"><span data-stu-id="145b8-164">This is different from the subnet range of 192.168.137.0/24 that is used with full ICS.</span></span>

<span data-ttu-id="145b8-165">Iniciar una red hospedada inalámbrica con ICS completo emplea la siguiente lógica:</span><span class="sxs-lookup"><span data-stu-id="145b8-165">Starting a wireless Hosted Network with full ICS employs the following logic:</span></span>

-   <span data-ttu-id="145b8-166">Si no se está ejecutando ICS completo, al iniciar una red hospedada inalámbrica también se inicia el servicio ICS con el servidor DHCPv4 independiente.</span><span class="sxs-lookup"><span data-stu-id="145b8-166">If full ICS is not already running, starting a wireless Hosted Network also starts the ICS Service with standalone DHCPv4 server.</span></span>
-   <span data-ttu-id="145b8-167">Si ya se está ejecutando ICS completo y la interfaz privada es la interfaz de red hospedada inalámbrica, simplemente inicie la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-167">If full ICS is already running and the private interface is the wireless Hosted Network interface, just start the wireless Hosted Network.</span></span>
-   <span data-ttu-id="145b8-168">Si ICS completo ya se está ejecutando pero la interfaz privada no es la interfaz de red hospedada inalámbrica, la red hospedada inalámbrica se iniciará sin la función de servidor DHCPv4 en la interfaz de red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-168">If full ICS is already running but the private interface is not the wireless Hosted Network interface, the wireless Hosted Network will be started without the DHCPv4 server function on the wireless Hosted Network interface.</span></span>

<span data-ttu-id="145b8-169">El impacto de la lógica anterior destaca los hechos siguientes:</span><span class="sxs-lookup"><span data-stu-id="145b8-169">The impact of the logic above highlights the following facts:</span></span>

-   <span data-ttu-id="145b8-170">ICS no pasa del modo completo al modo independiente.</span><span class="sxs-lookup"><span data-stu-id="145b8-170">ICS does not transition from full mode to standalone mode.</span></span>
-   <span data-ttu-id="145b8-171">La red hospedada inalámbrica solo puede invocar el modo independiente cuando ICS no se está ejecutando en modo completo.</span><span class="sxs-lookup"><span data-stu-id="145b8-171">Standalone mode can only be invoked by the wireless Hosted Network when ICS is not running in full mode.</span></span>
-   <span data-ttu-id="145b8-172">Si ICS se ejecuta en modo independiente, se le redirigirá al modo completo si un usuario o aplicación inicia ICS en modo completo.</span><span class="sxs-lookup"><span data-stu-id="145b8-172">If ICS is running in standalone mode, it will be preempted into full mode if a user or application starts ICS in full mode.</span></span>
-   <span data-ttu-id="145b8-173">La transición del modo independiente al modo completo en ICS será problemática para los dispositivos conectados en la PAN inalámbrica Si la interfaz privada de ICS completa no es la misma que la de SoftAP.</span><span class="sxs-lookup"><span data-stu-id="145b8-173">Transitioning from standalone mode to full mode in ICS will be disruptive to connected devices in the wireless PAN if the private interface of full ICS is not the same as the one for SoftAP.</span></span>

<span data-ttu-id="145b8-174">Se tarda en iniciar o detener el servicio ICS en el equipo local, ya sea en modo completo o independiente.</span><span class="sxs-lookup"><span data-stu-id="145b8-174">It takes time to start or stop the ICS Service on the local computer in either full or standalone mode.</span></span> <span data-ttu-id="145b8-175">Una aplicación debe comprobar el estado del servicio ICS con la función **NotifyServiceStatusChange** para asegurarse de que el servicio ICS no está en el estado de inicio o detención pendiente antes de iniciar o detener la red hospedada inalámbrica para su uso con la integración de ICS.</span><span class="sxs-lookup"><span data-stu-id="145b8-175">An application should check the state of ICS Service using the **NotifyServiceStatusChange** function to make sure that the ICS Service is not in the start/stop pending state before starting or stopping the wireless Hosted Network for use with ICS integration.</span></span>

## <a name="starting-and-stopping-the-wireless-hosted-network"></a><span data-ttu-id="145b8-176">Inicio y detención de la red hospedada inalámbrica</span><span class="sxs-lookup"><span data-stu-id="145b8-176">Starting and Stopping the Wireless Hosted Network</span></span>

<span data-ttu-id="145b8-177">Windows proporciona una plataforma en la que se permite a más de una aplicación simultánea administrar una red hospedada inalámbrica al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="145b8-177">Windows provides a platform where more than one concurrent application is allowed to manage a wireless Hosted Network at the same time.</span></span> <span data-ttu-id="145b8-178">Concretamente, cada aplicación puede iniciar y detener la red hospedada inalámbrica por sí misma, sin tener que conocer previamente otras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="145b8-178">Specifically each application can start and stop the wireless Hosted Network on its own, without prior knowledge about other applications.</span></span>

<span data-ttu-id="145b8-179">Hay dos conjuntos de funciones para iniciar y detener una red hospedada.</span><span class="sxs-lookup"><span data-stu-id="145b8-179">There are two sets of functions to start and stop a Hosted Network.</span></span>

<span data-ttu-id="145b8-180">Es posible que varias aplicaciones requieran el uso de la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-180">Multiple applications may require the use of the wireless Hosted Network.</span></span> <span data-ttu-id="145b8-181">Las funciones [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) y [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) inician y detienen un hospedado inalámbrico entrada de red una manera compatible con otras aplicaciones simultáneas.</span><span class="sxs-lookup"><span data-stu-id="145b8-181">The [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) and [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) functions start and stop a wireless Hosted Network in a way that is compatible with other concurrent applications.</span></span> <span data-ttu-id="145b8-182">Las funciones **WlanHostedNetworkStartUsing** y **WlanHostedNetworkStopUsing** permiten a una aplicación tener una referencia a la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-182">The **WlanHostedNetworkStartUsing** and **WlanHostedNetworkStopUsing** functions allow an application to have a reference to the wireless Hosted Network.</span></span> <span data-ttu-id="145b8-183">Este mecanismo mantiene la red hospedada inalámbrica en ejecución, siempre que al menos otra aplicación tenga una referencia actual a la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-183">This mechanism keeps the wireless Hosted Network running provided that at least one other application has a current reference to the wireless Hosted Network.</span></span> <span data-ttu-id="145b8-184">Cualquier usuario puede llamar a estas funciones.</span><span class="sxs-lookup"><span data-stu-id="145b8-184">Any user can call these functions.</span></span> <span data-ttu-id="145b8-185">Las llamadas correctas a **WlanHostedNetworkStartUsing** deben coincidir mediante llamadas a la función **WlanHostedNetworkStopUsing** .</span><span class="sxs-lookup"><span data-stu-id="145b8-185">Successful calls to **WlanHostedNetworkStartUsing** must be matched by calls to the **WlanHostedNetworkStopUsing** function.</span></span> <span data-ttu-id="145b8-186">Cualquier cambio de estado de red hospedado provocado por la función **WlanHostedNetworkStartUsing** se deshará automáticamente si la aplicación que realiza la llamada cierra el identificador de llamada (llamando a [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) con el mismo parámetro *hClientHandle* pasado a **WlanHostedNetworkStartUsing**) o si el proceso finaliza.</span><span class="sxs-lookup"><span data-stu-id="145b8-186">Any Hosted Network state change caused by the **WlanHostedNetworkStartUsing** function would be automatically undone if the calling application closes its calling handle (by calling [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) with the same *hClientHandle* parameter passed to **WlanHostedNetworkStartUsing**) or if the process ends.</span></span>

<span data-ttu-id="145b8-187">Las funciones [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) y [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) obligan a iniciar y detener una red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-187">The [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) and [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) functions force start and stop a wireless Hosted Network.</span></span> <span data-ttu-id="145b8-188">Solo se puede llamar a estas funciones si el usuario tiene el privilegio elevado adecuado.</span><span class="sxs-lookup"><span data-stu-id="145b8-188">These functions can only be called if the user has the appropriate elevated privilege.</span></span> <span data-ttu-id="145b8-189">En última instancia, las llamadas a **WlanHostedNetworkForceStart** pueden coincidir con una llamada a la función **WlanHostedNetworkForceStop** , en función del diseño de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="145b8-189">Successful calls to **WlanHostedNetworkForceStart** may eventually be matched by a call to the **WlanHostedNetworkForceStop** function, depending on the application design.</span></span> <span data-ttu-id="145b8-190">Estas funciones pasan el estado de red hospedada inalámbrica sin asociar la solicitud con el identificador de llamada de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="145b8-190">These functions transition the wireless Hosted Network state without associating the request with the application's calling handle.</span></span> <span data-ttu-id="145b8-191">Cualquier cambio de estado de red hospedado causado por la función **WlanHostedNetworkForceStart** no se deshará automáticamente si la aplicación que realiza la llamada cierra su identificador de llamada (llamando a [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) con el mismo parámetro *hClientHandle* pasado a [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)) o si el proceso finaliza.</span><span class="sxs-lookup"><span data-stu-id="145b8-191">Any Hosted Network state change caused by the **WlanHostedNetworkForceStart** function would not be automatically undone if the calling application closes its calling handle (by calling [**WlanCloseHandle**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanclosehandle) with the same *hClientHandle* parameter passed to [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)) or if the process ends.</span></span> <span data-ttu-id="145b8-192">Si la aplicación que llamó a la función **WlanHostedNetworkForceStart** se cierra sin llamar a una de las funciones para detener la red hospedada inalámbrica, la red hospedada dejará de ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="145b8-192">If the application that called the **WlanHostedNetworkForceStart** function closes without calling one of the functions to stop the wireless Hosted Network, then Hosted Network is left running.</span></span> <span data-ttu-id="145b8-193">Una aplicación puede llamar a la función **WlanHostedNetworkForceStart** después de asegurarse de que un usuario del sistema con privilegios elevados acepta los mayores requisitos de energía implicados en la ejecución de la red hospedada inalámbrica durante períodos de tiempo prolongados.</span><span class="sxs-lookup"><span data-stu-id="145b8-193">An application might call the **WlanHostedNetworkForceStart** function after ensuring that an elevated system user accepts the increased power requirements involved in running the wireless Hosted Network for extended periods of time.</span></span>

<span data-ttu-id="145b8-194">Las recomendaciones generales sobre las funciones a las que se llama para iniciar y detener una red hospedada inalámbrica son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="145b8-194">The general recommendations on which functions to call to start and stop a wireless Hosted Network are as follows:</span></span>

-   <span data-ttu-id="145b8-195">Use las funciones [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) y [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) dentro de una aplicación para iniciar y detener una red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-195">Use the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) and [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) functions within an application to start and stop a wireless Hosted Network.</span></span>
-   <span data-ttu-id="145b8-196">No use la función [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) para iniciar una red hospedada inalámbrica a menos que la aplicación lo requiera.</span><span class="sxs-lookup"><span data-stu-id="145b8-196">Do not use the [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) function to start a wireless Hosted Network unless it is absolutely required by the application.</span></span> <span data-ttu-id="145b8-197">La función **WlanHostedNetworkForceStart** también requiere privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="145b8-197">The **WlanHostedNetworkForceStart** function also requires elevated privileges.</span></span>
-   <span data-ttu-id="145b8-198">Utilice la función [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) como método de recuperación.</span><span class="sxs-lookup"><span data-stu-id="145b8-198">Only use the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function as a recovery method.</span></span> <span data-ttu-id="145b8-199">La función **WlanHostedNetworkForceStop** hace que una red hospedada inalámbrica se detenga inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="145b8-199">The **WlanHostedNetworkForceStop** function causes a wireless Hosted Network to stop immediately.</span></span> <span data-ttu-id="145b8-200">Es posible que otras aplicaciones que realicen escuchas de notificaciones de red hospedada inalámbrica deban realizar acciones de recuperación.</span><span class="sxs-lookup"><span data-stu-id="145b8-200">Other applications that listen for wireless Hosted Network notifications may need to take recovery actions.</span></span> <span data-ttu-id="145b8-201">Para obtener más información, consulte la explicación siguiente en la secuencia de recuperación de red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-201">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span>

## <a name="start-sequence-for-wireless-hosted-network"></a><span data-ttu-id="145b8-202">Secuencia de inicio para red hospedada inalámbrica</span><span class="sxs-lookup"><span data-stu-id="145b8-202">Start Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="145b8-203">Para una aplicación que inicia una red hospedada inalámbrica con ICS completo, la recomendación es iniciar la red hospedada inalámbrica y, a continuación, iniciar ICS completo.</span><span class="sxs-lookup"><span data-stu-id="145b8-203">For an application that starts a wireless Hosted Network with full ICS, the recommendation is to start the wireless Hosted Network, then start full ICS.</span></span> <span data-ttu-id="145b8-204">Si ya se está ejecutando una red hospedada inalámbrica, una aplicación debe usar la función [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) para detener la red hospedada inalámbrica solo si se requiere un ICS completo, pero no se ha habilitado antes de que se iniciara la red hospedada.</span><span class="sxs-lookup"><span data-stu-id="145b8-204">If a wireless Hosted Network is already running, an application should use the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network only if full ICS is required but has not been enabled before the Hosted Network was started.</span></span> <span data-ttu-id="145b8-205">Esto permitirá que otras aplicaciones se recuperen de posibles interrupciones producidas por el inicio del ICS completo.</span><span class="sxs-lookup"><span data-stu-id="145b8-205">This will allow other applications to recover from potential disruptions caused by the start of full ICS.</span></span> <span data-ttu-id="145b8-206">Para obtener más información, consulte la explicación siguiente en la secuencia de recuperación de red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-206">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span> <span data-ttu-id="145b8-207">La operación combinada debe realizarse correctamente y producir un error en su conjunto.</span><span class="sxs-lookup"><span data-stu-id="145b8-207">The combined operation should succeed and fail as a whole.</span></span>

> [!Note]  
> <span data-ttu-id="145b8-208">La red hospedada inalámbrica debe iniciarse antes de intentar enumerar el adaptador correspondiente mediante la interfaz [**IEnumNetSharingEveryConnection**](/windows/win32/api/netcon/nn-netcon-ienumnetsharingeveryconnection) .</span><span class="sxs-lookup"><span data-stu-id="145b8-208">The wireless Hosted Network must be started before attempting to enumerate the corresponding adapter using the [**IEnumNetSharingEveryConnection**](/windows/win32/api/netcon/nn-netcon-ienumnetsharingeveryconnection) interface.</span></span>

 

<span data-ttu-id="145b8-209">Los siguientes pasos ordenados son la secuencia de inicio recomendada en una aplicación que usa red hospedada inalámbrica con ICS completo:</span><span class="sxs-lookup"><span data-stu-id="145b8-209">The following ordered steps are the recommended start sequence in an application using wireless Hosted Network with full ICS:</span></span>

-   <span data-ttu-id="145b8-210">Llame a la función [**WlanHostedNetworkInitSettings**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings) para asegurarse de que la red hospedada inalámbrica está configurada y lista para usarse.</span><span class="sxs-lookup"><span data-stu-id="145b8-210">Call the [**WlanHostedNetworkInitSettings**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings) function to make sure wireless Hosted Network is configured and ready to be used.</span></span>
-   <span data-ttu-id="145b8-211">Llame a las funciones [**WlanHostedNetworkQueryStatus**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus) y [**WlanHostedNetworkQueryProperty**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty) para determinar si la red hospedada inalámbrica está permitida y disponible.</span><span class="sxs-lookup"><span data-stu-id="145b8-211">Call the [**WlanHostedNetworkQueryStatus**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus) and [**WlanHostedNetworkQueryProperty**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty) functions to determine if the wireless Hosted Network is allowed and available.</span></span> <span data-ttu-id="145b8-212">Si la red hospedada inalámbrica no está permitida y no está disponible, se devuelve un error.</span><span class="sxs-lookup"><span data-stu-id="145b8-212">If the wireless Hosted Network is not allowed and not available, return an error.</span></span>
-   <span data-ttu-id="145b8-213">Prueba para ver si se permite el servicio ICS usado para el ICS completo.</span><span class="sxs-lookup"><span data-stu-id="145b8-213">Test to see if the ICS Service used for full ICS is allowed.</span></span> <span data-ttu-id="145b8-214">Si no se puede iniciar el servicio ICS, devuelva un error.</span><span class="sxs-lookup"><span data-stu-id="145b8-214">If the ICS service cannot be started, return an error.</span></span>
-   <span data-ttu-id="145b8-215">Llame a la función [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) para forzar la detención de la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-215">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to force a stop of the wireless Hosted Network.</span></span>
-   <span data-ttu-id="145b8-216">Llame a la función [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) para iniciar la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-216">Call the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) function to start the wireless Hosted Network.</span></span>
-   <span data-ttu-id="145b8-217">Si la red hospedada inalámbrica no se inicia, devuelve un error.</span><span class="sxs-lookup"><span data-stu-id="145b8-217">If the wireless Hosted Network fails to start, return an error.</span></span>
-   <span data-ttu-id="145b8-218">Si ya se está ejecutando ICS completo y la interfaz pública o privada actual es diferente de la nueva interfaz que se va a usar, almacene en caché las interfaces públicas y privadas actuales.</span><span class="sxs-lookup"><span data-stu-id="145b8-218">If full ICS is already running and the current public or private interface is different from the new interface to be used, cache the current public and private interfaces.</span></span> <span data-ttu-id="145b8-219">Una aplicación también puede optar por devolver un error o preguntar al usuario si ya se está ejecutando la integración de ICS.</span><span class="sxs-lookup"><span data-stu-id="145b8-219">An application may also choose to return an error or prompt the user if ICS integration is already running.</span></span>
-   <span data-ttu-id="145b8-220">Inicie ICS completo con la nueva configuración de las interfaces públicas y privadas.</span><span class="sxs-lookup"><span data-stu-id="145b8-220">Start full ICS with the new settings for the public and private interfaces.</span></span>
-   <span data-ttu-id="145b8-221">Si el ICS completo no puede iniciarse con esta configuración, intente iniciar el servicio ICS completo con las interfaces públicas y privadas almacenadas en caché si el ICS completo se estaba ejecutando antes.</span><span class="sxs-lookup"><span data-stu-id="145b8-221">If full ICS fails to start with these settings, try to start full ICS service with the cached public and private interfaces if full ICS was running before.</span></span> <span data-ttu-id="145b8-222">Llame a la función [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) para detener la red hospedada inalámbrica y devolver un error.</span><span class="sxs-lookup"><span data-stu-id="145b8-222">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network and return an error.</span></span>
-   <span data-ttu-id="145b8-223">Devuelva el resultado de que la red hospedada inalámbrica y el ICS completo se hayan realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="145b8-223">Return success that the wireless Hosted Network and full ICS succeed.</span></span>

## <a name="stop-sequence-for-wireless-hosted-network"></a><span data-ttu-id="145b8-224">Secuencia de detención para red hospedada inalámbrica</span><span class="sxs-lookup"><span data-stu-id="145b8-224">Stop Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="145b8-225">Cuando se usa una red hospedada inalámbrica con ICS completo, es posible que una aplicación que ha finalizado su trabajo desee detener la red hospedada inalámbrica y el servicio ICS usado para el ICS completo.</span><span class="sxs-lookup"><span data-stu-id="145b8-225">When using wireless Hosted Network with full ICS, an application that has finished its work may want to stop the wireless Hosted Network and the ICS service used for full ICS.</span></span> <span data-ttu-id="145b8-226">En este caso, se recomienda llamar a la función [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) para detener la red hospedada en lugar de llamar a la función [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) .</span><span class="sxs-lookup"><span data-stu-id="145b8-226">In this case, it is recommended that the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function be called to stop the Hosted Network rather than calling the [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) function.</span></span> <span data-ttu-id="145b8-227">La función **WlanHostedNetworkForceStop** detiene la red hospedada inalámbrica y también sirve para permitir que se recuperen otras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="145b8-227">The **WlanHostedNetworkForceStop** function stops the wireless Hosted Network and also serves to allow other applications to recover.</span></span> <span data-ttu-id="145b8-228">Para obtener más información, consulte la explicación siguiente en la secuencia de recuperación de red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-228">For more information, see the discussion below on the recovery sequence for wireless Hosted Network.</span></span>

<span data-ttu-id="145b8-229">Los siguientes pasos ordenados son la secuencia de detención recomendada en una aplicación que usa la red hospedada inalámbrica y el ICS completo:</span><span class="sxs-lookup"><span data-stu-id="145b8-229">The following ordered steps are the recommended stop sequence in an application using wireless Hosted Network and full ICS:</span></span>

-   <span data-ttu-id="145b8-230">Detenga el ICS completo.</span><span class="sxs-lookup"><span data-stu-id="145b8-230">Stop full ICS.</span></span>
-   <span data-ttu-id="145b8-231">Llame a la función [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) para detener la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-231">Call the [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network.</span></span>

<span data-ttu-id="145b8-232">Una aplicación que usa una red hospedada inalámbrica sin un ICS completo que ha finalizado con su trabajo solo necesita llamar a la función [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) o [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) para detener la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-232">An application using wireless Hosted Network without full ICS that is finished with its work just needs to call the [**WlanHostedNetworkStopUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing) or [**WlanHostedNetworkForceStop**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestop) function to stop the wireless Hosted Network.</span></span> <span data-ttu-id="145b8-233">Si se llamó a la función [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) para iniciar la red hospedada inalámbrica, la aplicación debe llamar a la función **WlanHostedNetworkStopUsing** para detener la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-233">If the [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) function was called to start the wireless Hosted Network, then the application should call the **WlanHostedNetworkStopUsing** function to stop the wireless Hosted Network.</span></span> <span data-ttu-id="145b8-234">Si la red hospedada inalámbrica ya estaba iniciada antes de que la aplicación o la aplicación llamara a la función [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) para forzar el inicio de la red hospedada inalámbrica, la aplicación puede llamar a la función **WlanHostedNetworkForceStop** para detener la red hospedada inalámbrica o no hacer nada (dejar la red hospedada inalámbrica iniciada) dependiendo del escenario.</span><span class="sxs-lookup"><span data-stu-id="145b8-234">If the wireless Hosted Network was was already started before the application or the application called the [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) function to force start the wireless Hosted Network, then the application can call the **WlanHostedNetworkForceStop** function to stop the wireless Hosted Network or do nothing (leave wireless Hosted Network started) depending on the scenario.</span></span>

## <a name="recovery-sequence-for-wireless-hosted-network"></a><span data-ttu-id="145b8-235">Secuencia de recuperación para red hospedada inalámbrica</span><span class="sxs-lookup"><span data-stu-id="145b8-235">Recovery Sequence for Wireless Hosted Network</span></span>

<span data-ttu-id="145b8-236">Una aplicación que usa la red hospedada inalámbrica puede verse afectada por las acciones de otras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="145b8-236">An application using the wireless Hosted Network may be affected by the actions of other applications.</span></span> <span data-ttu-id="145b8-237">El servicio ICS y las interfaces para administrar ICS no proporcionan ningún método para que una aplicación se registre para las notificaciones de cambio de ICS.</span><span class="sxs-lookup"><span data-stu-id="145b8-237">The ICS service and the interfaces for managing ICS provide no method for an application to register for ICS change notifications.</span></span> <span data-ttu-id="145b8-238">Si otra aplicación llama a los métodos [**EnableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-enablesharing) o [**DisableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-disablesharing) en la interfaz [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) para habilitar o deshabilitar el uso compartido en una conexión, se envía un mensaje a la interfaz de usuario (la pantalla) del equipo local no a otras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="145b8-238">If another application calls the [**EnableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-enablesharing) or the [**DisableSharing**](/windows/win32/api/netcon/nf-netcon-inetsharingconfiguration-disablesharing) methods on the [**INetSharingConfiguration**](/windows/win32/api/netcon/nn-netcon-inetsharingconfiguration) interface to enable or disable sharing on a connection, a message is sent to the user interface (the screen) on the local computer not to other applications.</span></span> <span data-ttu-id="145b8-239">Por lo tanto, una aplicación debe basarse en las notificaciones de red hospedada inalámbrica para realizar acciones de recuperación cuando se producen cambios en la red hospedada por ICS o inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-239">So an application needs to rely on the wireless Hosted Network notifications to perform recovery actions when ICS or wireless Hosted Network changes occur.</span></span>

<span data-ttu-id="145b8-240">Una aplicación que usa la red hospedada inalámbrica debe registrarse para recibir notificaciones de red hospedada inalámbrica mediante una llamada a [**WlanRegisterNotification**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanregisternotification).</span><span class="sxs-lookup"><span data-stu-id="145b8-240">An application using the wireless Hosted Network should register for wireless Hosted Network notifications by calling the [**WlanRegisterNotification**](/windows/desktop/api/wlanapi/nf-wlanapi-wlanregisternotification).</span></span> <span data-ttu-id="145b8-241">Si se necesitan notificaciones solo para redes hospedadas inalámbricas, la aplicación debe pasar el **origen de notificación de WLAN \_ \_ \_ HNWK** en el parámetro *dwNotifSource* pasado a **WlanRegisterNotification**.</span><span class="sxs-lookup"><span data-stu-id="145b8-241">If notifications for only wireless Hosted Network are needed, then the application should pass **WLAN\_NOTIFICATION\_SOURCE\_HNWK** in the *dwNotifSource* parameter passed to the **WlanRegisterNotification**.</span></span> <span data-ttu-id="145b8-242">Si también se necesitan otras notificaciones inalámbricas, el origen de la **notificación de WLAN \_ \_ \_ HNWK** debe combinarse con las constantes de origen de notificación para otros tipos de notificaciones inalámbricas deseadas y pasar este valor en el parámetro *dwNotifSource* .</span><span class="sxs-lookup"><span data-stu-id="145b8-242">If other wireless notications are also needed, then **WLAN\_NOTIFICATION\_SOURCE\_HNWK** should be combined with the notification source constants for other types of wireless notifications desired and pass this value in the *dwNotifSource* parameter.</span></span>

<span data-ttu-id="145b8-243">La secuencia de recuperación es la misma para las aplicaciones con o sin ICS completo, suponiendo que las aplicaciones no quieren volver a iniciar el servicio ICS.</span><span class="sxs-lookup"><span data-stu-id="145b8-243">The recovery sequence is the same for applications with or without full ICS, assuming that applications don’t want to start ICS service again.</span></span> <span data-ttu-id="145b8-244">Tras recibir una notificación de red hospedada inalámbrica de que la red hospedada se ha detenido, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="145b8-244">Upon receiving a wireless Hosted Network notification that the Hosted Network has stopped, do the following:</span></span>

-   <span data-ttu-id="145b8-245">Si la aplicación llamó a [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) para iniciar la red hospedada inalámbrica, reinicie la red hospedada llamando a **WlanHostedNetworkForceStart**.</span><span class="sxs-lookup"><span data-stu-id="145b8-245">If the application called [**WlanHostedNetworkForceStart**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart) to start the wireless Hosted Network, then restart the Hosted Network by calling **WlanHostedNetworkForceStart**.</span></span> <span data-ttu-id="145b8-246">De lo contrario, llame a [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) para reiniciar la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-246">Otherwise, call [**WlanHostedNetworkStartUsing**](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing) to restart the wireless Hosted Network.</span></span>

## <a name="recovery-sequence-for-connected-devices"></a><span data-ttu-id="145b8-247">Secuencia de recuperación para dispositivos conectados</span><span class="sxs-lookup"><span data-stu-id="145b8-247">Recovery Sequence for Connected Devices</span></span>

<span data-ttu-id="145b8-248">Los dispositivos remotos o los equipos conectados a la red hospedada inalámbrica pueden verse afectados por las acciones de otras aplicaciones que afectan a ICS y a la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-248">Remote devices or computers connected to the wireless Hosted Network may be affected by the actions of other applications that impact ICS and the wireless Hosted Network.</span></span> <span data-ttu-id="145b8-249">Afortunadamente, la mayoría de los dispositivos han incorporado lógica de reintento en la aplicación de dispositivo para tratar una pérdida temporal de señal o itinerancia.</span><span class="sxs-lookup"><span data-stu-id="145b8-249">Fortunately, most devices have built in retry logic in the device application to deal with a temporary loss of signal or roaming.</span></span>

<span data-ttu-id="145b8-250">Una posible secuencia de recuperación para dispositivos o equipos conectados a la red hospedada inalámbrica que pierde el contacto es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="145b8-250">A possible recovery sequence for devices or computers connected to the wireless Hosted Network that lose contact is the following:</span></span>

-   <span data-ttu-id="145b8-251">El controlador de dispositivo inalámbrico indica una desconexión de medios a los niveles superiores de la pila de red del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="145b8-251">The wireless device driver indicates a media disconnect to the upper layers of the network stack on the device.</span></span>
-   <span data-ttu-id="145b8-252">La aplicación de dispositivo inicia comprobaciones periódicas para la disponibilidad de la red hospedada inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-252">The device application starts periodic checks for the availability of the wireless Hosted Network.</span></span>
-   <span data-ttu-id="145b8-253">Una vez que la aplicación de dispositivo detecta de nuevo la red hospedada inalámbrica, el dispositivo inicia una conexión inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="145b8-253">Once the device application again detects the wireless Hosted Network, the device initiates a wireless connection.</span></span>
-   <span data-ttu-id="145b8-254">Tras una conexión correcta con la red hospedada inalámbrica, la aplicación del dispositivo actualiza su configuración de IP en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="145b8-254">Upon a successful connection with the wireless Hosted Network, the device application updates its IP settings accordingly.</span></span>

## <a name="related-topics"></a><span data-ttu-id="145b8-255">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="145b8-255">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="145b8-256">Acerca de la red hospedada inalámbrica</span><span class="sxs-lookup"><span data-stu-id="145b8-256">About the Wireless Hosted Network</span></span>](about-the-wireless-hosted-network.md)
</dt> <dt>

[<span data-ttu-id="145b8-257">Ejemplo de red hospedada inalámbrica</span><span class="sxs-lookup"><span data-stu-id="145b8-257">Wireless Hosted Network Sample</span></span>](wireless-hosted-network-sample.md)
</dt> <dt>

[<span data-ttu-id="145b8-258">**WlanHostedNetworkForceStart**</span><span class="sxs-lookup"><span data-stu-id="145b8-258">**WlanHostedNetworkForceStart**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkforcestart)
</dt> <dt>

[<span data-ttu-id="145b8-259">**WlanHostedNetworkInitSettings**</span><span class="sxs-lookup"><span data-stu-id="145b8-259">**WlanHostedNetworkInitSettings**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkinitsettings)
</dt> <dt>

[<span data-ttu-id="145b8-260">**WlanHostedNetworkQueryProperty**</span><span class="sxs-lookup"><span data-stu-id="145b8-260">**WlanHostedNetworkQueryProperty**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkqueryproperty)
</dt> <dt>

[<span data-ttu-id="145b8-261">**WlanHostedNetworkQuerySecondaryKey**</span><span class="sxs-lookup"><span data-stu-id="145b8-261">**WlanHostedNetworkQuerySecondaryKey**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerysecondarykey)
</dt> <dt>

[<span data-ttu-id="145b8-262">**WlanHostedNetworkQueryStatus**</span><span class="sxs-lookup"><span data-stu-id="145b8-262">**WlanHostedNetworkQueryStatus**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkquerystatus)
</dt> <dt>

[<span data-ttu-id="145b8-263">**WlanHostedNetworkRefreshSecuritySettings**</span><span class="sxs-lookup"><span data-stu-id="145b8-263">**WlanHostedNetworkRefreshSecuritySettings**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkrefreshsecuritysettings)
</dt> <dt>

[<span data-ttu-id="145b8-264">**WlanHostedNetworkSetProperty**</span><span class="sxs-lookup"><span data-stu-id="145b8-264">**WlanHostedNetworkSetProperty**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetproperty)
</dt> <dt>

[<span data-ttu-id="145b8-265">**WlanHostedNetworkSetSecondaryKey**</span><span class="sxs-lookup"><span data-stu-id="145b8-265">**WlanHostedNetworkSetSecondaryKey**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworksetsecondarykey)
</dt> <dt>

[<span data-ttu-id="145b8-266">**WlanHostedNetworkStartUsing**</span><span class="sxs-lookup"><span data-stu-id="145b8-266">**WlanHostedNetworkStartUsing**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstartusing)
</dt> <dt>

[<span data-ttu-id="145b8-267">**WlanHostedNetworkStopUsing**</span><span class="sxs-lookup"><span data-stu-id="145b8-267">**WlanHostedNetworkStopUsing**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanhostednetworkstopusing)
</dt> <dt>

[<span data-ttu-id="145b8-268">**WlanRegisterVirtualStationNotification**</span><span class="sxs-lookup"><span data-stu-id="145b8-268">**WlanRegisterVirtualStationNotification**</span></span>](/windows/desktop/api/Wlanapi/nf-wlanapi-wlanregistervirtualstationnotification)
</dt> </dl>

 

 
