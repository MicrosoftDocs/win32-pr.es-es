---
title: Capa de compatibilidad de aplicaciones
description: Para ejecutar aplicaciones heredadas en un entorno de Servicios de Escritorio remoto, puede usar el nivel de compatibilidad de aplicaciones de Servicios de Escritorio remoto.
ms.assetid: 6e61ed45-4fcb-4aee-b8cc-638a9b87ce00
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b3e7bbc5867e42951783d3666aa770cdcc45406f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "105685786"
---
# <a name="application-compatibility-layer"></a><span data-ttu-id="1581d-103">Capa de compatibilidad de aplicaciones</span><span class="sxs-lookup"><span data-stu-id="1581d-103">Application compatibility layer</span></span>

<span data-ttu-id="1581d-104">Para ejecutar aplicaciones heredadas en un entorno de Servicios de Escritorio remoto, puede usar el nivel de compatibilidad de aplicaciones de Servicios de Escritorio remoto.</span><span class="sxs-lookup"><span data-stu-id="1581d-104">To run legacy applications in a Remote Desktop Services environment you can use the Remote Desktop Services Application Compatibility layer.</span></span> <span data-ttu-id="1581d-105">Cuando el servidor de host de sesión de Escritorio remoto (host de sesión de escritorio remoto) carga una aplicación que no es compatible con Servicios de Escritorio remoto, también carga un archivo DLL que contiene el código de compatibilidad.</span><span class="sxs-lookup"><span data-stu-id="1581d-105">When the Remote Desktop Session Host (RD Session Host) server loads an application that is not Remote Desktop Services aware, it also loads a DLL that contains compatibility code.</span></span> <span data-ttu-id="1581d-106">Para usar el nivel de compatibilidad de aplicaciones Servicios de Escritorio remoto, puede establecer la marca NOT TSAWARE al compilar una aplicación.</span><span class="sxs-lookup"><span data-stu-id="1581d-106">To use the Remote Desktop Services Application Compatibility layer, you can set the NOT TSAWARE flag when compiling an application.</span></span>

<span data-ttu-id="1581d-107">Si la aplicación es Servicios de Escritorio remoto consciente, puede evitar la sobrecarga de cargar este archivo DLL adicional y ejecutar el código de compatibilidad.</span><span class="sxs-lookup"><span data-stu-id="1581d-107">If your application is Remote Desktop Services aware, you can avoid the overhead of loading this extra DLL and running the compatibility code.</span></span>

<span data-ttu-id="1581d-108">Para indicar que la aplicación es Servicios de Escritorio remoto consciente, establezca la marca de **imagen \_ DLLCHARACTERISTICS \_ \_ \_ compatible con Terminal Server** en el encabezado opcional.</span><span class="sxs-lookup"><span data-stu-id="1581d-108">To indicate that your application is Remote Desktop Services aware, set the **IMAGE\_DLLCHARACTERISTICS\_TERMINAL\_SERVER\_AWARE** flag in the optional header.</span></span> <span data-ttu-id="1581d-109">Si usa el enlazador que se incluye con Microsoft Visual C++, puede usar la opción del vinculador **TSAWARE** para establecer esta marca.</span><span class="sxs-lookup"><span data-stu-id="1581d-109">If you are using the linker that ships with Microsoft Visual C++, you can use the **TSAWARE** linker option to set this flag.</span></span> <span data-ttu-id="1581d-110">La herramienta **dumpbin** que se incluye con Microsoft Visual C++ proporciona la opción */headers* para determinar el estado de la marca **TSAWARE** .</span><span class="sxs-lookup"><span data-stu-id="1581d-110">The **DUMPBIN** tool that ships with Microsoft Visual C++ provides the */HEADERS* option to determine the state of the **TSAWARE** flag.</span></span> <span data-ttu-id="1581d-111">Para obtener más información sobre el uso de la herramienta **dumpbin** , vea [dumpbin Reference](/cpp/build/reference/dumpbin-reference?view=vs-2019).</span><span class="sxs-lookup"><span data-stu-id="1581d-111">For more information about using the **DUMPBIN** tool, see [DUMPBIN Reference](/cpp/build/reference/dumpbin-reference?view=vs-2019).</span></span>

<span data-ttu-id="1581d-112">Tenga cuidado al usar la marca **TSAWARE** porque permite que la aplicación omita cualquier optimización de compatibilidad servicios de escritorio remoto.</span><span class="sxs-lookup"><span data-stu-id="1581d-112">Be careful when you use the **TSAWARE** flag because it enables your application to bypass any Remote Desktop Services compatibility optimizations.</span></span> <span data-ttu-id="1581d-113">La marca **TSAWARE** solo debe usarse si está seguro de que la aplicación está diseñada para el entorno de servicios de escritorio remoto.</span><span class="sxs-lookup"><span data-stu-id="1581d-113">The **TSAWARE** flag should only be used if you are certain that your application is designed for the Remote Desktop Services environment.</span></span> <span data-ttu-id="1581d-114">Si la aplicación cumple los siguientes criterios, puede usar de forma segura la marca DLLCHARACTERISTICS de la **imagen \_ \_ compatible con terminal \_ Server \_** .</span><span class="sxs-lookup"><span data-stu-id="1581d-114">If your application meets the following criteria, you can safely use the **IMAGE\_DLLCHARACTERISTICS\_TERMINAL\_SERVER\_AWARE** flag.</span></span>

-   <span data-ttu-id="1581d-115">La aplicación no usa archivos. ini.</span><span class="sxs-lookup"><span data-stu-id="1581d-115">The application does not use .ini files.</span></span>
-   <span data-ttu-id="1581d-116">La aplicación no escribe en **HKEY \_ Current \_ User** durante la instalación.</span><span class="sxs-lookup"><span data-stu-id="1581d-116">The application does not write to **HKEY\_CURRENT\_USER** during setup.</span></span> <span data-ttu-id="1581d-117">Para obtener más información, vea [almacenar información de User-Specific](storing-user-specific-information.md).</span><span class="sxs-lookup"><span data-stu-id="1581d-117">For more information, see [Storing User-Specific Information](storing-user-specific-information.md).</span></span>
-   <span data-ttu-id="1581d-118">La aplicación no se ejecuta como un servicio del sistema (es decir, LUID = System).</span><span class="sxs-lookup"><span data-stu-id="1581d-118">The application does not run as a system service (that is, LUID=System).</span></span>
-   <span data-ttu-id="1581d-119">La aplicación no espera acceso exclusivo a las ventanas o a otros directorios del sistema.</span><span class="sxs-lookup"><span data-stu-id="1581d-119">The application does not expect exclusive access to the Windows or other system directories.</span></span> <span data-ttu-id="1581d-120">Esto significa que la aplicación no almacena datos de configuración o temporales por usuario en las ventanas o en otros directorios del sistema.</span><span class="sxs-lookup"><span data-stu-id="1581d-120">This means that the application does not store per user temporary or configuration data in the Windows or other system directories.</span></span>
-   <span data-ttu-id="1581d-121">La aplicación no escribe en el subárbol del registro del **equipo local HKEY** para la configuración o los datos específicos del usuario.</span><span class="sxs-lookup"><span data-stu-id="1581d-121">The application does not write to the **HKEY Local Machine** registry hive for user specific data or configuration.</span></span>
-   <span data-ttu-id="1581d-122">La aplicación sigue otras instrucciones de compatibilidad Servicios de Escritorio remoto mencionadas en este documento.</span><span class="sxs-lookup"><span data-stu-id="1581d-122">The application follows other Remote Desktop Services compatibility guidelines mentioned in this document.</span></span>

 

 