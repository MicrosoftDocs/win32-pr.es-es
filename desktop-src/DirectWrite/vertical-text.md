---
title: Texto vertical
description: A partir de Windows 8, DirectWrite tiene una serie de nuevas API que le permiten usar texto vertical en sus aplicaciones.
ms.assetid: F40A79AE-F7BF-4CAC-9480-1489CD212DA8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0db8788a6be97a55911694942a930e17dc69976a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "103995299"
---
# <a name="vertical-text"></a><span data-ttu-id="5016c-103">Texto vertical</span><span class="sxs-lookup"><span data-stu-id="5016c-103">Vertical Text</span></span>

<span data-ttu-id="5016c-104">A partir de Windows 8, [DirectWrite](direct-write-portal.md) tiene una serie de nuevas API que le permiten usar texto vertical en sus aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="5016c-104">Starting with the Windows 8, [DirectWrite](direct-write-portal.md) has a number of new APIs that allow you to use vertical text in your apps.</span></span>

## <a name="drawing-vertical-text"></a><span data-ttu-id="5016c-105">Dibujo de texto vertical</span><span class="sxs-lookup"><span data-stu-id="5016c-105">Drawing vertical text</span></span>

<span data-ttu-id="5016c-106">Puede dibujar texto vertical con Direct2D mediante los métodos [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) .</span><span class="sxs-lookup"><span data-stu-id="5016c-106">You can draw vertical text with Direct2D by using the [**DrawTextLayout**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawtextlayout) methods.</span></span> <span data-ttu-id="5016c-107">Para dibujar el texto verticalmente, pase [**la \_ dirección de lectura de DWRITE \_ \_ de arriba a \_ \_ abajo**](/windows/win32/api/dwrite/ne-dwrite-dwrite_reading_direction) al método [**IDWriteTextFormat:: SetReadingDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setreadingdirection) y [**DWRITE la dirección de flujo de \_ \_ \_ derecha \_ a \_ izquierda**](/windows/win32/api/dwrite/ne-dwrite-dwrite_flow_direction) al método [**IDWriteTextFormatSetFlowDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setflowdirection) .</span><span class="sxs-lookup"><span data-stu-id="5016c-107">To draw the text vertically, pass [**DWRITE\_READING\_DIRECTION\_TOP\_TO\_BOTTOM**](/windows/win32/api/dwrite/ne-dwrite-dwrite_reading_direction) to the [**IDWriteTextFormat::SetReadingDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setreadingdirection) method and [**DWRITE\_FLOW\_DIRECTION\_RIGHT\_TO\_LEFT**](/windows/win32/api/dwrite/ne-dwrite-dwrite_flow_direction) to the [**IDWriteTextFormatSetFlowDirection**](/windows/win32/api/dwrite/nf-dwrite-idwritetextformat-setflowdirection) method.</span></span> <span data-ttu-id="5016c-108">Después, puede crear y dibujar un objeto [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) vertical.</span><span class="sxs-lookup"><span data-stu-id="5016c-108">Then you can create and draw a vertical [**IDWriteTextLayout**](/windows/win32/api/dwrite/nn-dwrite-idwritetextlayout) object.</span></span>

## <a name="analyzing-character-orientation"></a><span data-ttu-id="5016c-109">Analizar la orientación de los caracteres</span><span class="sxs-lookup"><span data-stu-id="5016c-109">Analyzing character orientation</span></span>

<span data-ttu-id="5016c-110">Cada carácter tiene una orientación de carácter preferida o la dirección en la que se debe orientar el carácter en cualquier diseño direccional.</span><span class="sxs-lookup"><span data-stu-id="5016c-110">Every character has a preferred character orientation, or the direction that the character should be oriented in any directional layout.</span></span> <span data-ttu-id="5016c-111">Por ejemplo, en el diseño horizontal tradicional, tanto el texto latino como el texto chino están orientados verticalmente.</span><span class="sxs-lookup"><span data-stu-id="5016c-111">For example, in traditional horizontal layout, both the Latin text and the Chinese text are oriented vertically.</span></span> <span data-ttu-id="5016c-112">Por otro lado, en un diseño vertical, el texto chino permanece vertical y el texto latino gira 90 grados.</span><span class="sxs-lookup"><span data-stu-id="5016c-112">On the other hand, in a vertical layout, the Chinese text remains upright, and the Latin text is rotated 90 degrees.</span></span> <span data-ttu-id="5016c-113">Esta diferencia de orientación se muestra en el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5016c-113">This difference in orientation is seen in the example here.</span></span>

![imagen de texto en inglés y chino en diseños horizontales y verticales.](images/vertical-text.png)

<span data-ttu-id="5016c-115">Para determinar la orientación del texto que tiene, debe implementar las interfaces [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) y [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) .</span><span class="sxs-lookup"><span data-stu-id="5016c-115">To determine the orientation of the text you have, you need to implement the [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) and [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) interfaces.</span></span> <span data-ttu-id="5016c-116">El origen y el receptor tardan en ejecutarse y permiten comprobar si están orientados verticalmente o no.</span><span class="sxs-lookup"><span data-stu-id="5016c-116">The source and sink take in the glyph runs and let you check if they are oriented vertically or not.</span></span>

<span data-ttu-id="5016c-117">Después de implementar el origen y el receptor, llame al método [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) .</span><span class="sxs-lookup"><span data-stu-id="5016c-117">After you implement your source and sink, you call the [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) method.</span></span> <span data-ttu-id="5016c-118">En la imagen de ejemplo, esta función devuelve 3 ejecuciones: "English", "中国" y "English".</span><span class="sxs-lookup"><span data-stu-id="5016c-118">In the example image, this function returns 3 runs: "English", "中国", and "English."</span></span>

## <a name="going-from-characters-to-glyphs"></a><span data-ttu-id="5016c-119">Pasar de caracteres a glifos</span><span class="sxs-lookup"><span data-stu-id="5016c-119">Going from characters to glyphs</span></span>

<span data-ttu-id="5016c-120">Ahora que sabe que la ejecución contiene glifos verticales, debe obtener acceso a esos glifos.</span><span class="sxs-lookup"><span data-stu-id="5016c-120">Now that you know the run contains vertical glyphs, you need to get access to those glyphs.</span></span> <span data-ttu-id="5016c-121">En el ejemplo hasta ahora, hay 3 ejecuciones: una con glifos verticales y dos sin.</span><span class="sxs-lookup"><span data-stu-id="5016c-121">In the example so far, there are 3 runs: one with vertical glyphs and two without.</span></span> <span data-ttu-id="5016c-122">Para pasar de los caracteres a los glifos, llame a [**GetGlyphIndices**](/windows/win32/api/dwrite/nf-dwrite-idwritefontface-getglyphindices).</span><span class="sxs-lookup"><span data-stu-id="5016c-122">To transition from characters to glyphs, you call [**GetGlyphIndices**](/windows/win32/api/dwrite/nf-dwrite-idwritefontface-getglyphindices).</span></span> <span data-ttu-id="5016c-123">Este método devuelve los índices de glifo correspondientes para los caracteres en el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="5016c-123">This method returns the corresponding glyph indices for the characters in the example.</span></span> <span data-ttu-id="5016c-124">Dado que el método [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) devuelve una ejecución con glifos verticales, debe llamar a [**GetVerticalGlyphVariants**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getverticalglyphvariants), que devuelve los identificadores de glifo orientados verticalmente en lugar de los identificadores de glifo actuales.</span><span class="sxs-lookup"><span data-stu-id="5016c-124">Because the [**AnalyzeVerticalGlyphOrientation**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-analyzeverticalglyphorientation) method returns a run with vertical glyphs, you need to call [**GetVerticalGlyphVariants**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritefontface1-getverticalglyphvariants), which returns the vertically oriented glyph IDs in place of the current glyph IDs.</span></span>

## <a name="drawing-text-vertically"></a><span data-ttu-id="5016c-125">Dibujar texto verticalmente</span><span class="sxs-lookup"><span data-stu-id="5016c-125">Drawing text vertically</span></span>

<span data-ttu-id="5016c-126">Por último, debe diseñar y dibujar el texto.</span><span class="sxs-lookup"><span data-stu-id="5016c-126">Finally, you need to lay out and draw the text.</span></span> <span data-ttu-id="5016c-127">Dado que está dibujando el texto verticalmente, deberá obtener algo más de información para que el texto latino se dibuje correctamente.</span><span class="sxs-lookup"><span data-stu-id="5016c-127">Because you're drawing the text vertically, you need to get some more info so that the Latin text is drawn correctly.</span></span> <span data-ttu-id="5016c-128">Si dibuja todo el texto a lo largo de la línea de base central, el texto latino parece flotar en el centro de la línea.</span><span class="sxs-lookup"><span data-stu-id="5016c-128">If you draw all of the text along the central baseline, the Latin text appears to float in the middle of the line.</span></span> <span data-ttu-id="5016c-129">Necesita acceso a la línea de base central y Latina para alinear el texto correctamente.</span><span class="sxs-lookup"><span data-stu-id="5016c-129">You need access to both the central and Roman baseline to align the text correctly.</span></span> <span data-ttu-id="5016c-130">Use el método [**IDWriteTextAnalyzer1:: GetBaseline**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getbaseline) para obtener los valores numéricos de las líneas de base que especifique.</span><span class="sxs-lookup"><span data-stu-id="5016c-130">Use the [**IDWriteTextAnalyzer1::GetBaseline**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getbaseline) method to get the numerical values of the baselines you specify.</span></span> <span data-ttu-id="5016c-131">Puede restar la línea de base Roman de la línea de base central para obtener el desplazamiento entre los dos.</span><span class="sxs-lookup"><span data-stu-id="5016c-131">You can subtract the Roman baseline from the central baseline to get the offset between the two.</span></span>

<span data-ttu-id="5016c-132">Con toda esta información, puede dibujar el texto en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="5016c-132">With all this info, you can draw the text on the screen.</span></span> <span data-ttu-id="5016c-133">En primer lugar, llame al método [**GetGlyphOrientationTransform**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getglyphorientationtransform) con los resultados de los objetos [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) y [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) .</span><span class="sxs-lookup"><span data-stu-id="5016c-133">First, call the [**GetGlyphOrientationTransform**](/windows/win32/api/dwrite_1/nf-dwrite_1-idwritetextanalyzer1-getglyphorientationtransform) method with the results from the [**IDWriteTextAnalysisSink1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissink1) and [**IDWriteTextAnalysisSource1**](/windows/win32/api/dwrite_1/nn-dwrite_1-idwritetextanalysissource1) objects.</span></span>

<span data-ttu-id="5016c-134">Si utiliza [Direct2D](rendering-by-using-direct2d.md) , también debe establecer la transformación universal en el destino de representación de direct2d para la representación vertical.</span><span class="sxs-lookup"><span data-stu-id="5016c-134">If you’re using [Direct2D](rendering-by-using-direct2d.md) you also need to set the world transform on the Direct2D render target for vertical rendering.</span></span>

<span data-ttu-id="5016c-135">Por último, llame a [**DrawGlyphRun**](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) tres veces, una vez en cada bloque de texto.</span><span class="sxs-lookup"><span data-stu-id="5016c-135">Finally, call [**DrawGlyphRun**](/windows/win32/api/dwrite/nf-dwrite-idwritebitmaprendertarget-drawglyphrun) three times, once on each block of text.</span></span> <span data-ttu-id="5016c-136">En los dos bloques de texto que están en inglés, debe aplicar el desplazamiento que calculamos entre las líneas de base romanos y centrales.</span><span class="sxs-lookup"><span data-stu-id="5016c-136">On the two blocks of text that are in English, you need to apply the offset that we calculated between the Roman and central baselines.</span></span>

<span data-ttu-id="5016c-137">Ahora, el texto de la aplicación se dibujará verticalmente, con la orientación del glifo correcta.</span><span class="sxs-lookup"><span data-stu-id="5016c-137">Now, the text in your app will be drawn vertically, with the correct glyph orientation.</span></span>

 

 