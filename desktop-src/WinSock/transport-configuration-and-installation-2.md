---
description: Para que un protocolo de transporte sea accesible a través de Windows Sockets, debe estar instalado correctamente en el sistema y estar registrado en Windows Sockets.
ms.assetid: 0f0b22e4-81b7-43a7-bc2f-7124fa32d925
title: Instalación y configuración de transporte
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ea980740f727e39338c7568f4cc30a961b5484df
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105705590"
---
# <a name="transport-configuration-and-installation"></a><span data-ttu-id="b0c93-103">Instalación y configuración de transporte</span><span class="sxs-lookup"><span data-stu-id="b0c93-103">Transport Configuration and Installation</span></span>

<span data-ttu-id="b0c93-104">Para que un protocolo de transporte sea accesible a través de Windows Sockets, debe estar instalado correctamente en el sistema y estar registrado en Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="b0c93-104">In order for a transport protocol to be accessible through Windows Sockets it must be properly installed on the system and registered with Windows Sockets.</span></span> <span data-ttu-id="b0c93-105">Cuando un proveedor de servicios de transporte se instala mediante la invocación del programa de instalación de un proveedor, se debe agregar información de configuración a una base de datos de configuración para proporcionar a Ws2 \_32.dll información necesaria relacionada con el proveedor de servicios.</span><span class="sxs-lookup"><span data-stu-id="b0c93-105">When a transport service provider is installed by invoking a vendor's installation program, configuration information must be added to a configuration database to give the Ws2\_32.dll required information regarding the service provider.</span></span> <span data-ttu-id="b0c93-106">El \_32.dll Ws2 exporta varias funciones de instalación, [**WSCInstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider) y [**WSCInstallProviderAndChains**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains), para que el programa de instalación del proveedor proporcione la información pertinente sobre el proveedor de servicios que se va a instalar.</span><span class="sxs-lookup"><span data-stu-id="b0c93-106">The Ws2\_32.dll exports several installation functions, [**WSCInstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider) and [**WSCInstallProviderAndChains**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains), for the vendor's installation program to supply the relevant information about the service provider to be installed.</span></span> <span data-ttu-id="b0c93-107">Esta información incluye, por ejemplo, el nombre y la ruta de acceso al archivo DLL del proveedor de servicios y una lista de estructuras de [**\_ información WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) que este proveedor puede admitir.</span><span class="sxs-lookup"><span data-stu-id="b0c93-107">This information includes, for example, the name and path to the service provider DLL and a list of [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structures that this provider can support.</span></span> <span data-ttu-id="b0c93-108">El \_32.dll Ws2 también proporciona una función, [**WSCDeinstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider), para que el programa de desinstalación de un proveedor Quite toda la información relevante de la base de datos de configuración que mantiene el32.dll de Ws2 \_ .</span><span class="sxs-lookup"><span data-stu-id="b0c93-108">The Ws2\_32.dll also provides a function, [**WSCDeinstallProvider**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider), for a vendor's deinstallation program to remove all the relevant information from the configuration database maintained by the Ws2\_32.dll.</span></span> <span data-ttu-id="b0c93-109">La ubicación y el formato exactos de esta información de configuración son privados para el \_32.dll Ws2 y solo las funciones mencionadas anteriormente pueden manipularlas.</span><span class="sxs-lookup"><span data-stu-id="b0c93-109">The exact location and format of this configuration information is private to the Ws2\_32.dll, and can only be manipulated by the above-mentioned functions.</span></span>

<span data-ttu-id="b0c93-110">En las plataformas de 64 bits, existen funciones similares que operan en catálogos de 32 y 64 bits.</span><span class="sxs-lookup"><span data-stu-id="b0c93-110">On 64-bit platforms, there are similar functions that operate on a 32-bit and 64-bit catalogs.</span></span> <span data-ttu-id="b0c93-111">Estas funciones incluyen [**WSCInstallProvider64 \_ 32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider64_32), [**WSCInstallProviderAndChains64 \_ 32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains64_32)y [**WSCDeinstallProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider32).</span><span class="sxs-lookup"><span data-stu-id="b0c93-111">These functions include [**WSCInstallProvider64\_32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallprovider64_32), [**WSCInstallProviderAndChains64\_32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscinstallproviderandchains64_32), and [**WSCDeinstallProvider32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscdeinstallprovider32).</span></span>

<span data-ttu-id="b0c93-112">El orden en que se instalan inicialmente los proveedores de servicios de transporte rige el orden en que se enumeran a través de [**WSCEnumProtocols**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols) y [**WSCEnumProtocols32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols32) en la interfaz del proveedor de servicios o a través de [**WSAEnumProtocols**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) en la interfaz de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="b0c93-112">The order in which transport service providers are initially installed governs the order in which they are enumerated through [**WSCEnumProtocols**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols) and [**WSCEnumProtocols32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscenumprotocols32) at the service provider interface, or through [**WSAEnumProtocols**](/windows/desktop/api/Winsock2/nf-winsock2-wsaenumprotocolsa) at the application interface.</span></span> <span data-ttu-id="b0c93-113">Lo que es más importante, este orden también rige el orden en el que se tienen en cuenta los protocolos y los proveedores de servicios cuando un cliente solicita la creación de un socket en función de su familia de direcciones, el tipo y el identificador de protocolo.</span><span class="sxs-lookup"><span data-stu-id="b0c93-113">More importantly, this order also governs the order in which protocols and service providers are considered when a client requests creation of a socket based on its address family, type, and protocol identifier.</span></span> <span data-ttu-id="b0c93-114">Windows Sockets 2 incluye un applet denominado Sporder.exe que permite que el catálogo de protocolos instalados se reordene de forma interactiva una vez que ya se hayan instalado los protocolos.</span><span class="sxs-lookup"><span data-stu-id="b0c93-114">Windows Sockets 2 includes an applet called Sporder.exe that allows the catalog of installed protocols to be reordered interactively after protocols have already been installed.</span></span> <span data-ttu-id="b0c93-115">Windows Sockets 2 también incluye un archivo DLL auxiliar, Sporder.dll, que exporta una interfaz de procedimientos para la reordenación de protocolos.</span><span class="sxs-lookup"><span data-stu-id="b0c93-115">Windows Sockets 2 also includes an auxiliary DLL, Sporder.dll, that exports a procedural interface for reordering protocols.</span></span> <span data-ttu-id="b0c93-116">Esta interfaz de procedimientos consta de un único procedimiento denominado [**WSCWriteProviderOrder**](/windows/desktop/api/Sporder/nf-sporder-wscwriteproviderorder).</span><span class="sxs-lookup"><span data-stu-id="b0c93-116">This procedural interface consists of a single procedure called [**WSCWriteProviderOrder**](/windows/desktop/api/Sporder/nf-sporder-wscwriteproviderorder).</span></span>

## <a name="installing-layered-protocols-and-protocol-chains"></a><span data-ttu-id="b0c93-117">Instalación de protocolos en capas y cadenas de protocolo</span><span class="sxs-lookup"><span data-stu-id="b0c93-117">Installing Layered Protocols and Protocol Chains</span></span>

<span data-ttu-id="b0c93-118">La estructura de [**\_ información de WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) proporcionada con cada protocolo que se va a instalar indica si el protocolo es un protocolo base, un protocolo en capas o una cadena de protocolos.</span><span class="sxs-lookup"><span data-stu-id="b0c93-118">The [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure supplied with each protocol to be installed indicates whether the protocol is a base protocol, layered protocol, or protocol chain.</span></span> <span data-ttu-id="b0c93-119">El valor del parámetro *ProtocolChain. ChainLen* se interpreta como se muestra en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="b0c93-119">The value of the *ProtocolChain.ChainLen* parameter is interpreted as shown in the following table.</span></span>

| <span data-ttu-id="b0c93-120">Value</span><span class="sxs-lookup"><span data-stu-id="b0c93-120">Value</span></span> | <span data-ttu-id="b0c93-121">Significado</span><span class="sxs-lookup"><span data-stu-id="b0c93-121">Meaning</span></span>                                           |
|-------|---------------------------------------------------|
| <span data-ttu-id="b0c93-122">0</span><span class="sxs-lookup"><span data-stu-id="b0c93-122">0</span></span>     | <span data-ttu-id="b0c93-123">Protocolo superpuesto.</span><span class="sxs-lookup"><span data-stu-id="b0c93-123">Layered protocol.</span></span>                                 |
| <span data-ttu-id="b0c93-124">1</span><span class="sxs-lookup"><span data-stu-id="b0c93-124">1</span></span>     | <span data-ttu-id="b0c93-125">Protocolo base (o cadena con un solo componente).</span><span class="sxs-lookup"><span data-stu-id="b0c93-125">Base protocol (or chain with only one component).</span></span> |
| <span data-ttu-id="b0c93-126">>1</span><span class="sxs-lookup"><span data-stu-id="b0c93-126">>1</span></span> | <span data-ttu-id="b0c93-127">Cadena de protocolos.</span><span class="sxs-lookup"><span data-stu-id="b0c93-127">Protocol chain.</span></span>                                   |



 

<span data-ttu-id="b0c93-128">La instalación de cadenas de protocolo solo puede producirse después de una instalación correcta de todos los componentes constituyentes (protocolos base y protocolos en capas).</span><span class="sxs-lookup"><span data-stu-id="b0c93-128">Installation of protocol chains can only occur after successful installation of all of the constituent components (base protocols and layered protocols).</span></span> <span data-ttu-id="b0c93-129">La estructura de [**\_ información de WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) para una cadena de protocolos usa el parámetro *ProtocolChain* para describir la longitud de la cadena y la identidad de cada componente.</span><span class="sxs-lookup"><span data-stu-id="b0c93-129">The [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure for a protocol chain uses the *ProtocolChain* parameter to describe the length of the chain and the identity of each component.</span></span> <span data-ttu-id="b0c93-130">Los protocolos individuales que componen una cadena se enumeran en orden en la matriz ProtocolChain. ChainEntries, con el elemento inicial de la matriz correspondiente al primer proveedor superpuesto.</span><span class="sxs-lookup"><span data-stu-id="b0c93-130">The individual protocols that make up a chain are listed in order in the ProtocolChain.ChainEntries array, with the zeroth element of the array corresponding to the first layered provider.</span></span> <span data-ttu-id="b0c93-131">Los protocolos se identifican por sus valores de *CatalogEntryID* , que son asignados por el32.dll de Ws2 en el momento de la \_ instalación del protocolo y se pueden encontrar en la estructura de **\_ información de WSAPROTOCOL** para cada protocolo.</span><span class="sxs-lookup"><span data-stu-id="b0c93-131">Protocols are identified by their *CatalogEntryID* values, which are assigned by the Ws2\_32.dll at protocol installation time, and can be found in the **WSAPROTOCOL\_INFO** structure for each protocol.</span></span>

<span data-ttu-id="b0c93-132">Los valores de los parámetros restantes en la estructura de [**\_ información de WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) de la cadena de protocolos deben elegirse para reflejar los atributos y los identificadores que mejor caracterizan la cadena de protocolos en conjunto.</span><span class="sxs-lookup"><span data-stu-id="b0c93-132">The values for the remaining parameters in the protocol chain's [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure should be chosen to reflect the attributes and identifiers that best characterize the protocol chain as a whole.</span></span> <span data-ttu-id="b0c93-133">Al seleccionar estos valores, los desarrolladores deben tener en cuenta que las comunicaciones a través de cadenas de protocolo solo se pueden producir cuando ambos extremos tienen cadenas de protocolo compatibles instaladas y las aplicaciones deben ser capaces de reconocer la estructura de **\_ información de WSAPROTOCOL** correspondiente.</span><span class="sxs-lookup"><span data-stu-id="b0c93-133">When selecting these values, developers should bear in mind that communications over protocol chains can only occur when both endpoints have compatible protocol chains installed, and that applications must be able to recognize the corresponding **WSAPROTOCOL\_INFO** structure.</span></span>

<span data-ttu-id="b0c93-134">Cuando se instala un protocolo base, no es necesario realizar ninguna entrada en la matriz *ProtocolChain. ChainEntries* .</span><span class="sxs-lookup"><span data-stu-id="b0c93-134">When a base protocol is installed, it is not necessary to make any entries in the *ProtocolChain.ChainEntries* array.</span></span> <span data-ttu-id="b0c93-135">Se entiende implícitamente que el componente único de esta cadena ya está identificado en el parámetro *CatalogEntryID* de la misma estructura [**de \_ información de WSAPROTOCOL**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) .</span><span class="sxs-lookup"><span data-stu-id="b0c93-135">It is implicitly understood that the sole component of this chain is already identified in the *CatalogEntryID* parameter of the same [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structure.</span></span> <span data-ttu-id="b0c93-136">Tenga en cuenta también que las cadenas de protocolos no pueden incluir varias instancias del mismo protocolo en capas.</span><span class="sxs-lookup"><span data-stu-id="b0c93-136">Also note that protocol chains may not include multiple instances of the same layered protocol.</span></span>

 

 
