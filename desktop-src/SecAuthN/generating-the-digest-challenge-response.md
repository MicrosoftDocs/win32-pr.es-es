---
description: Después de recibir un desafío del servidor, el cliente crea la respuesta del desafío de síntesis mediante una llamada a la función InitializeSecurityContext (síntesis).
ms.assetid: b26b5676-a614-4017-a4e5-a5395292a667
title: Generar la respuesta de desafío de síntesis
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8b577334348745425db23d3de41431ba4e37b7af
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "103912494"
---
# <a name="generating-the-digest-challenge-response"></a><span data-ttu-id="129e7-103">Generar la respuesta de desafío de síntesis</span><span class="sxs-lookup"><span data-stu-id="129e7-103">Generating the Digest Challenge Response</span></span>

<span data-ttu-id="129e7-104">Después de recibir un desafío del servidor, el cliente crea la respuesta del desafío de síntesis mediante una llamada a la función [**InitializeSecurityContext (síntesis)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) .</span><span class="sxs-lookup"><span data-stu-id="129e7-104">After receiving a challenge from the server, the client creates the Digest challenge response by calling the [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function.</span></span> <span data-ttu-id="129e7-105">Esta función genera una huella digital de [*hash*](/windows/desktop/SecGloss/h-gly) MD5 usando información sobre el recurso y los datos solicitados del desafío y genera un token de seguridad que representa un [*contexto de seguridad*](/windows/desktop/SecGloss/s-gly)parcial.</span><span class="sxs-lookup"><span data-stu-id="129e7-105">This function generates an MD5 [*hash*](/windows/desktop/SecGloss/h-gly) fingerprint by using information about the requested resource and data from the challenge, and outputs a security token that represents a partial [*security context*](/windows/desktop/SecGloss/s-gly).</span></span> <span data-ttu-id="129e7-106">Para completar la autenticación, el cliente debe devolver el token al servidor que emitió el desafío.</span><span class="sxs-lookup"><span data-stu-id="129e7-106">To complete the authentication, the client must return the token to the server that issued the challenge.</span></span>

<span data-ttu-id="129e7-107">En la tabla siguiente se describen los parámetros de la [*función*](/windows/desktop/SecGloss/c-gly) [**InitializeSecurityContext (síntesis)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) y los valores que se deben proporcionar al construir una respuesta de desafío de síntesis.</span><span class="sxs-lookup"><span data-stu-id="129e7-107">The following table describes the parameters of the [**InitializeSecurityContext (Digest)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) [*function*](/windows/desktop/SecGloss/c-gly), and the values to supply when constructing a Digest challenge response.</span></span>



| <span data-ttu-id="129e7-108">Parámetro</span><span class="sxs-lookup"><span data-stu-id="129e7-108">Parameter</span></span>                  | <span data-ttu-id="129e7-109">Descripción</span><span class="sxs-lookup"><span data-stu-id="129e7-109">Description</span></span>                                                                                                                                                                                               |
|----------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="129e7-110">*fContextReq*</span><span class="sxs-lookup"><span data-stu-id="129e7-110">*fContextReq*</span></span><br/>   | <span data-ttu-id="129e7-111">Atributos de contexto de seguridad solicitados por el cliente.</span><span class="sxs-lookup"><span data-stu-id="129e7-111">The security context attributes requested by the client.</span></span> <span data-ttu-id="129e7-112">Para obtener más información, vea requisitos de contexto de respuesta de desafío de síntesis.</span><span class="sxs-lookup"><span data-stu-id="129e7-112">For more information, see Digest Challenge Response Context Requirements.</span></span><br/>                                                             |
| <span data-ttu-id="129e7-113">*pszTargetName*</span><span class="sxs-lookup"><span data-stu-id="129e7-113">*pszTargetName*</span></span><br/> | <span data-ttu-id="129e7-114">HTTP: cadena terminada en null que especifica la dirección URL de destino.</span><span class="sxs-lookup"><span data-stu-id="129e7-114">HTTP: Null-terminated string that specifies the target URL.</span></span><br/> <span data-ttu-id="129e7-115">SASL: cadena terminada en null que especifica el destino DNS o SPN.</span><span class="sxs-lookup"><span data-stu-id="129e7-115">SASL: Null-terminated string that specifies the DNS/SPN target.</span></span><br/>                                                         |
| <span data-ttu-id="129e7-116">*pInput*</span><span class="sxs-lookup"><span data-stu-id="129e7-116">*pInput*</span></span><br/>        | <span data-ttu-id="129e7-117">Búferes que contienen información requerida por el SSP de síntesis.</span><span class="sxs-lookup"><span data-stu-id="129e7-117">Buffers that contain information required by the Digest SSP.</span></span> <span data-ttu-id="129e7-118">Para obtener más información, consulte [búferes de entrada para la respuesta de desafío de síntesis](input-buffers-for-the-digest-challenge-response.md).</span><span class="sxs-lookup"><span data-stu-id="129e7-118">For more information, see [Input Buffers for the Digest Challenge Response](input-buffers-for-the-digest-challenge-response.md).</span></span><br/> |
| <span data-ttu-id="129e7-119">*pfContextAttr*</span><span class="sxs-lookup"><span data-stu-id="129e7-119">*pfContextAttr*</span></span><br/> | <span data-ttu-id="129e7-120">Recibe los atributos admitidos por el contexto de seguridad devuelto.</span><span class="sxs-lookup"><span data-stu-id="129e7-120">Receives the attributes supported by the returned security context.</span></span> <span data-ttu-id="129e7-121">Para obtener más información, vea requisitos de contexto de respuesta de desafío de síntesis.</span><span class="sxs-lookup"><span data-stu-id="129e7-121">For more information, see Digest Challenge Response Context Requirements.</span></span><br/>                                                  |
| <span data-ttu-id="129e7-122">*pOutput*</span><span class="sxs-lookup"><span data-stu-id="129e7-122">*pOutput*</span></span><br/>       | <span data-ttu-id="129e7-123">Dirección de un búfer de tipo de token de SECBUFFER \_ que recibe un token de seguridad para devolverlo al servidor.</span><span class="sxs-lookup"><span data-stu-id="129e7-123">Address of a SECBUFFER\_TOKEN type buffer that receives a security token to send back to the server.</span></span><br/>                                                                                           |



 

## <a name="digest-challenge-response-context-requirements"></a><span data-ttu-id="129e7-124">Requisitos de contexto de respuesta de desafío de síntesis</span><span class="sxs-lookup"><span data-stu-id="129e7-124">Digest Challenge Response Context Requirements</span></span>

<span data-ttu-id="129e7-125">Los requisitos de contexto son marcas que determinan:</span><span class="sxs-lookup"><span data-stu-id="129e7-125">Context requirements are flags that determine:</span></span>

-   <span data-ttu-id="129e7-126">Si Microsoft Digest funciona como un mecanismo SASL o un protocolo de autenticación HTTP.</span><span class="sxs-lookup"><span data-stu-id="129e7-126">Whether Microsoft Digest functions as a SASL mechanism or HTTP authentication protocol.</span></span>
-   <span data-ttu-id="129e7-127">Calidad de protección admitida por el [*contexto de seguridad*](/windows/desktop/SecGloss/s-gly) compartido por el cliente y el servidor.</span><span class="sxs-lookup"><span data-stu-id="129e7-127">The quality of protection supported by the [*security context*](/windows/desktop/SecGloss/s-gly) shared by the client and server.</span></span>

<span data-ttu-id="129e7-128">De forma predeterminada, Microsoft Digest funciona como un mecanismo SASL.</span><span class="sxs-lookup"><span data-stu-id="129e7-128">By default, Microsoft Digest functions as a SASL mechanism.</span></span>

<span data-ttu-id="129e7-129">Los requisitos de contexto se especifican como marcas que se pasan al parámetro *fContextReq* de la función [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) .</span><span class="sxs-lookup"><span data-stu-id="129e7-129">Context requirements are specified as flags passed to the *fContextReq* parameter of the [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function.</span></span> <span data-ttu-id="129e7-130">Las marcas afectan a la calidad de protección del contexto de seguridad mediante el control de la Directiva qop en la respuesta de desafío.</span><span class="sxs-lookup"><span data-stu-id="129e7-130">The flags affect the security context's quality of protection by controlling the qop directive in the challenge response.</span></span>

<span data-ttu-id="129e7-131">De forma predeterminada, la Directiva qop se establece en "auth".</span><span class="sxs-lookup"><span data-stu-id="129e7-131">By default, the qop directive is set to "auth".</span></span> <span data-ttu-id="129e7-132">Para generar una respuesta de desafío que establezca qop en "auth-int", debe ocurrir lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="129e7-132">To generate a challenge response that sets qop to "auth-int", the following must occur:</span></span>

1.  <span data-ttu-id="129e7-133">El desafío de síntesis debe haber tenido una directiva qop establecida en "auth-int".</span><span class="sxs-lookup"><span data-stu-id="129e7-133">The Digest challenge must have had a qop directive set to "auth-int".</span></span>
2.  <span data-ttu-id="129e7-134">El cliente debe especificar una o varias de las marcas siguientes:</span><span class="sxs-lookup"><span data-stu-id="129e7-134">The client must specify one or more of the following flags:</span></span>

    -   <span data-ttu-id="129e7-135">\_integridad de REQ de ISC \_</span><span class="sxs-lookup"><span data-stu-id="129e7-135">ISC\_REQ\_INTEGRITY</span></span>
    -   <span data-ttu-id="129e7-136">detección de la reproducción de REQ de ISC \_ \_ \_</span><span class="sxs-lookup"><span data-stu-id="129e7-136">ISC\_REQ\_REPLAY\_DETECT</span></span>
    -   <span data-ttu-id="129e7-137">\_detección de \_ secuencia de REQ de ISC \_</span><span class="sxs-lookup"><span data-stu-id="129e7-137">ISC\_REQ\_SEQUENCE\_DETECT</span></span>

<span data-ttu-id="129e7-138">Solo para SASL: genere una respuesta de desafío con la Directiva qop establecida en "auth-conf" especificando la \_ marca de confidencialidad de REQ de ISC \_ .</span><span class="sxs-lookup"><span data-stu-id="129e7-138">For SASL only: Generate a challenge response with the qop directive set to "auth-conf" by specifying the ISC\_REQ\_CONFIDENTIALITY flag.</span></span> <span data-ttu-id="129e7-139">Dado que esta marca no es válida para la autenticación HTTP, no se puede usar con \_ la \_ marca http req de ISC.</span><span class="sxs-lookup"><span data-stu-id="129e7-139">Because this flag is not valid for HTTP authentication, it cannot be used with the ISC\_REQ\_HTTP flag.</span></span>

## <a name="verifying-the-quality-of-protection"></a><span data-ttu-id="129e7-140">Comprobar la calidad de la protección</span><span class="sxs-lookup"><span data-stu-id="129e7-140">Verifying the Quality of Protection</span></span>

<span data-ttu-id="129e7-141">El cliente debe examinar las marcas de atributos de contexto de seguridad devueltas en el parámetro *pfContextAttr* de la función [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) .</span><span class="sxs-lookup"><span data-stu-id="129e7-141">The client must examine the security context attributes flags returned in the [**InitializeSecurityContext**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function's *pfContextAttr* parameter.</span></span> <span data-ttu-id="129e7-142">El cliente debe enviar la respuesta de desafío al servidor solo si la calidad de protección indicada por las marcas es suficiente para sus fines.</span><span class="sxs-lookup"><span data-stu-id="129e7-142">The client should send the challenge response to the server only if the quality of protection indicated by the flags is sufficient for its purposes.</span></span> <span data-ttu-id="129e7-143">Las marcas relevantes pueden ser cualquier combinación de lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="129e7-143">The relevant flags can be any combination of the following:</span></span>

-   <span data-ttu-id="129e7-144">integridad de ISC \_ RET \_</span><span class="sxs-lookup"><span data-stu-id="129e7-144">ISC\_RET\_INTEGRITY</span></span>
-   <span data-ttu-id="129e7-145">detección de reproducción de ISC \_ RET \_ \_</span><span class="sxs-lookup"><span data-stu-id="129e7-145">ISC\_RET\_REPLAY\_DETECT</span></span>
-   <span data-ttu-id="129e7-146">detección de secuencia de ISC \_ RET \_ \_</span><span class="sxs-lookup"><span data-stu-id="129e7-146">ISC\_RET\_SEQUENCE\_DETECT</span></span>
-   <span data-ttu-id="129e7-147">\_Confidencialidad de ISC RET \_ (solo contextos SASL)</span><span class="sxs-lookup"><span data-stu-id="129e7-147">ISC\_RET\_CONFIDENTIALITY (SASL contexts only)</span></span>

<span data-ttu-id="129e7-148">Para obtener más información sobre la Directiva qop, vea [calidad de protección y cifrado](quality-of-protection-and-ciphers.md).</span><span class="sxs-lookup"><span data-stu-id="129e7-148">For more information about the qop directive, see [Quality of Protection and Ciphers](quality-of-protection-and-ciphers.md).</span></span>

<span data-ttu-id="129e7-149">Para obtener más información sobre las directivas de respuesta a desafíos, consulte [contenido de una respuesta de desafío de síntesis](contents-of-a-digest-challenge-response.md).</span><span class="sxs-lookup"><span data-stu-id="129e7-149">For more information about challenge response directives, see [Contents of a Digest Challenge Response](contents-of-a-digest-challenge-response.md).</span></span>

 

