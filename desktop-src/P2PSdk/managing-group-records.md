---
description: Un registro de grupo son datos específicos que se publican en todos los miembros activos de un grupo del mismo nivel, por ejemplo, un mensaje de chat o una actualización de estado específica de la aplicación.
ms.assetid: 073ee4e9-0e97-451a-a808-8265575d073c
title: Administrar registros de grupo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3b6d9e3257cc597b715dc9c65eb5945c00c15286
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105667416"
---
# <a name="managing-group-records"></a><span data-ttu-id="67a29-103">Administrar registros de grupo</span><span class="sxs-lookup"><span data-stu-id="67a29-103">Managing Group Records</span></span>

<span data-ttu-id="67a29-104">Un registro de grupo son datos específicos que se publican en todos los miembros activos de un grupo del mismo nivel, por ejemplo, un mensaje de chat o una actualización de estado específica de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="67a29-104">A group record is specific data published to all active members of a peer group, for example, a chat message or an application-specific status update.</span></span> <span data-ttu-id="67a29-105">Un registro se representa mediante la estructura del [**\_ registro del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_record) y contiene la siguiente información sobre un elemento del mismo nivel:</span><span class="sxs-lookup"><span data-stu-id="67a29-105">A record is represented by the [**PEER\_RECORD**](/windows/desktop/api/P2P/ns-p2p-peer_record) structure, and contains the following information about a peer:</span></span>

-   <span data-ttu-id="67a29-106">El ID. de registro es un valor que identifica de forma única un registro en el grupo del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="67a29-106">The record ID is a value that uniquely identifies a record in the peer group.</span></span>
-   <span data-ttu-id="67a29-107">GUID que especifica el tipo de registro.</span><span class="sxs-lookup"><span data-stu-id="67a29-107">A GUID that specifies the record type.</span></span> <span data-ttu-id="67a29-108">Las aplicaciones pueden admitir distintos tipos de registros.</span><span class="sxs-lookup"><span data-stu-id="67a29-108">Applications can support different record types.</span></span> <span data-ttu-id="67a29-109">Una aplicación interpreta el campo de **datos** de un registro basándose en el tipo de registro.</span><span class="sxs-lookup"><span data-stu-id="67a29-109">An application interprets the **data** field of a record based on the record type.</span></span> <span data-ttu-id="67a29-110">Algunos GUID están reservados y la llamada a la API devuelve **peer \_ e \_ no \_ autorizado** cuando la aplicación intenta utilizarlos.</span><span class="sxs-lookup"><span data-stu-id="67a29-110">Some GUIDs are reserved, and the API call returns **PEER\_E\_NOT\_AUTHORIZED** when the application attempts to use them.</span></span>
-   <span data-ttu-id="67a29-111">Conjunto de atributos de registro que se describe como una cadena XML.</span><span class="sxs-lookup"><span data-stu-id="67a29-111">A set of record attributes described as an XML string.</span></span> <span data-ttu-id="67a29-112">Los atributos se usan al buscar registros.</span><span class="sxs-lookup"><span data-stu-id="67a29-112">The attributes are used when searching records.</span></span> <span data-ttu-id="67a29-113">Para obtener más información sobre los atributos, consulte [registro del esquema de atributo](record-attribute-schema.md).</span><span class="sxs-lookup"><span data-stu-id="67a29-113">For more information about attributes, see [Record Attribute Schema](record-attribute-schema.md).</span></span>
-   <span data-ttu-id="67a29-114">La hora del mismo nivel en la que se crea un registro.</span><span class="sxs-lookup"><span data-stu-id="67a29-114">The peer time that a record is created.</span></span>
-   <span data-ttu-id="67a29-115">El tiempo del mismo nivel que expira un registro.</span><span class="sxs-lookup"><span data-stu-id="67a29-115">The peer time that a record expires.</span></span>
-   <span data-ttu-id="67a29-116">La hora del mismo nivel en la que se modifica un registro.</span><span class="sxs-lookup"><span data-stu-id="67a29-116">The peer time that a record is modified.</span></span>
-   <span data-ttu-id="67a29-117">Creador de un registro.</span><span class="sxs-lookup"><span data-stu-id="67a29-117">The creator of a record.</span></span>
-   <span data-ttu-id="67a29-118">Miembro que modifica un registro.</span><span class="sxs-lookup"><span data-stu-id="67a29-118">The member who modifies a record.</span></span>
-   <span data-ttu-id="67a29-119">Una estructura de [**\_ datos del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_data) que contiene la firma criptográfica para todos los campos de esta estructura de [**\_ registro del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_record) .</span><span class="sxs-lookup"><span data-stu-id="67a29-119">A [**PEER\_DATA**](/windows/desktop/api/P2P/ns-p2p-peer_data) structure that contains the cryptographic signature for all of the fields in this [**PEER\_RECORD**](/windows/desktop/api/P2P/ns-p2p-peer_record) structure.</span></span> <span data-ttu-id="67a29-120">Este campo no se puede actualizar ni modificar directamente en un elemento del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="67a29-120">This field cannot be directly updated or altered by a peer.</span></span>
-   <span data-ttu-id="67a29-121">Una estructura de [**\_ datos del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_data) que contiene los datos específicos de la aplicación asociados a este registro como una matriz de bytes.</span><span class="sxs-lookup"><span data-stu-id="67a29-121">A [**PEER\_DATA**](/windows/desktop/api/P2P/ns-p2p-peer_data) structure that contains the application-specific data associated with this record as an array of bytes.</span></span> <span data-ttu-id="67a29-122">El tipo de datos presente en este campo viene determinado por el tipo de registro definido por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="67a29-122">The type of data present in this field is determined by application-defined record type.</span></span>

## <a name="obtaining-peer-group-records"></a><span data-ttu-id="67a29-123">Obtención de registros de grupo del mismo nivel</span><span class="sxs-lookup"><span data-stu-id="67a29-123">Obtaining Peer Group Records</span></span>

<span data-ttu-id="67a29-124">Los registros individuales se obtienen mediante una llamada a [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) con el identificador del registro.</span><span class="sxs-lookup"><span data-stu-id="67a29-124">Individual records are obtained by calling [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) with the ID of the record.</span></span> <span data-ttu-id="67a29-125">Al procesar todos los registros de un tipo específico, el conjunto enumerado de todos los registros de grupo del mismo nivel actuales se obtiene mediante una llamada a [**PeerGroupEnumRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupenumrecords) para abrir la enumeración y, a continuación, llamar a [**PeerGetNextItem**](/windows/desktop/api/P2P/nf-p2p-peergetnextitem) de forma iterativa hasta que se recuperen todos los registros.</span><span class="sxs-lookup"><span data-stu-id="67a29-125">When processing all records of a specific type, the enumerated set of all current peer group records is obtained by first calling [**PeerGroupEnumRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupenumrecords) to open the enumeration and then iteratively calling [**PeerGetNextItem**](/windows/desktop/api/P2P/nf-p2p-peergetnextitem) until all records are retrieved.</span></span> <span data-ttu-id="67a29-126">Cuando termine, cierre la enumeración y libere la memoria asociada a ella mediante una llamada a [**PeerEndEnumeration**](/windows/desktop/api/P2P/nf-p2p-peerendenumeration).</span><span class="sxs-lookup"><span data-stu-id="67a29-126">When finished, close the enumeration and release the memory associated with it by calling [**PeerEndEnumeration**](/windows/desktop/api/P2P/nf-p2p-peerendenumeration).</span></span>

<span data-ttu-id="67a29-127">Cuando un elemento del mismo nivel crea, elimina o actualiza un registro, el registro afectado se publica en todos los miembros del grupo del mismo nivel mediante el evento de **cambio de registro de eventos de grupo del mismo nivel \_ \_ \_ \_** .</span><span class="sxs-lookup"><span data-stu-id="67a29-127">When a record is created, deleted, or updated by a peer, the affected record is published to all members of the peer group by way of the **PEER\_GROUP\_EVENT\_RECORD\_CHANGE** event.</span></span> <span data-ttu-id="67a29-128">Tenga en cuenta que si un elemento del mismo nivel no está conectado al grupo, recibirá el registro actualizado la próxima vez que se conecte.</span><span class="sxs-lookup"><span data-stu-id="67a29-128">Note that if a peer is not connected to the group, it will receive the updated record then next time it connects.</span></span> <span data-ttu-id="67a29-129">Es importante registrarse para este evento con [**PeerGroupRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergroupregisterevent) si la aplicación mantiene o administra registros de una manera significativa.</span><span class="sxs-lookup"><span data-stu-id="67a29-129">It is important to register for this event with [**PeerGroupRegisterEvent**](/windows/desktop/api/P2P/nf-p2p-peergroupregisterevent) if your application maintains or manages records in any meaningful way.</span></span> <span data-ttu-id="67a29-130">Como alternativa, la aplicación puede consultar la base de datos de registros a petición mediante [**PeerGroupSearchRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupsearchrecords).</span><span class="sxs-lookup"><span data-stu-id="67a29-130">Alternatively, the application can query the record database on demand using [**PeerGroupSearchRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupsearchrecords).</span></span>

<span data-ttu-id="67a29-131">Cuando se genera el evento de **cambio de registro de eventos de grupo del mismo nivel \_ \_ \_ \_** , el identificador de registro y el tipo específicos, así como el tipo de cambio (agregar, actualizar, eliminar) se reciben como una estructura de [**datos de cambio de \_ registro de eventos \_ \_ \_ del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_event_record_change_data) .</span><span class="sxs-lookup"><span data-stu-id="67a29-131">When the **PEER\_GROUP\_EVENT\_RECORD\_CHANGE** event is raised, the specific record ID and type as well as the type of change (add, update, delete) is received as a [**PEER\_EVENT\_RECORD\_CHANGE\_DATA**](/windows/desktop/api/P2P/ns-p2p-peer_event_record_change_data) structure.</span></span> <span data-ttu-id="67a29-132">Esta estructura se obtiene con una llamada a [**PeerGroupGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata).</span><span class="sxs-lookup"><span data-stu-id="67a29-132">This structure is obtained with a call to [**PeerGroupGetEventData**](/windows/desktop/api/P2P/nf-p2p-peergroupgeteventdata).</span></span> <span data-ttu-id="67a29-133">Si el cambio es una adición o una actualización, debe usar [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) para obtener el registro con el identificador proporcionado.</span><span class="sxs-lookup"><span data-stu-id="67a29-133">If the change is an add or an update, you should use [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) to obtain the record with the supplied ID.</span></span> <span data-ttu-id="67a29-134">La base de datos de registros local de la infraestructura de se actualiza automáticamente.</span><span class="sxs-lookup"><span data-stu-id="67a29-134">The local record database for the infrastructure is updated automatically.</span></span>

<span data-ttu-id="67a29-135">También puede buscar registros específicos en función de los atributos personalizados específicos proporcionados en el campo **pwzAttributes** del [**\_ registro del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_record), así como los atributos predefinidos.</span><span class="sxs-lookup"><span data-stu-id="67a29-135">You can also search for specific records based on specific custom attributes supplied in the **pwzAttributes** field of [**PEER\_RECORD**](/windows/desktop/api/P2P/ns-p2p-peer_record), as well as any predefined attributes.</span></span> <span data-ttu-id="67a29-136">Para ello, utilice la función [**PeerGroupSearchRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupsearchrecords) con una consulta de búsqueda XML con el formato especificado en el tema [formato de consulta de búsqueda de registros](record-search-query-format.md) .</span><span class="sxs-lookup"><span data-stu-id="67a29-136">To accomplish this, use the [**PeerGroupSearchRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupsearchrecords) function with an XML search query formatted as specified in the [Record Search Query Format](record-search-query-format.md) topic.</span></span>

<span data-ttu-id="67a29-137">Para obtener más información sobre cómo trabajar con registros en la infraestructura del mismo nivel, consulte el tema [registros](records.md) en [uso de la infraestructura del mismo nivel](using-the-peer-infrastructure.md).</span><span class="sxs-lookup"><span data-stu-id="67a29-137">For more details on working with records in the Peer Infrastructure, please refer to the [Records](records.md) topic in [Using the Peer Infrastructure](using-the-peer-infrastructure.md).</span></span>

## <a name="administration-of-peer-group-records"></a><span data-ttu-id="67a29-138">Administración de registros de grupo del mismo nivel</span><span class="sxs-lookup"><span data-stu-id="67a29-138">Administration of Peer Group Records</span></span>

<span data-ttu-id="67a29-139">Cuando el creador del grupo del mismo nivel emite las invitaciones iniciales, puede especificar que determinados miembros actúen en un rol administrativo (Administrador del rol de grupo del mismo nivel \_ \_ \_ ) cada vez que emita nuevas credenciales al usuario (a través de [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) o [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials)).</span><span class="sxs-lookup"><span data-stu-id="67a29-139">When the initial invitations are issued by the peer group's creator, it can specify that certain members serve in an administrative role (PEER\_GROUP\_ROLE\_ADMIN) whenever it issues new credentials to the user (via either [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) or [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials)).</span></span> <span data-ttu-id="67a29-140">Un administrador tiene la capacidad de agregar, eliminar y actualizar directamente cualquier registro de grupo del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="67a29-140">An administrator has the ability to directly add, delete, and update any peer group records.</span></span> <span data-ttu-id="67a29-141">Por el contrario, un miembro del grupo del mismo nivel con su rol establecido **en \_ \_ \_ miembro del rol de grupo del mismo nivel** o en el rol de **Grupo del mismo nivel que invita a un \_ \_ \_ \_ miembro** solo puede Agregar, actualizar y eliminar sus propios registros.</span><span class="sxs-lookup"><span data-stu-id="67a29-141">Conversely, a peer group member with it's role set to either **PEER\_GROUP\_ROLE\_MEMBER** or **PEER\_GROUP\_ROLE\_INVITING\_MEMBER** can only add, update, and delete its own record(s).</span></span>

<span data-ttu-id="67a29-142">El creador tiene el rol de administrador de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="67a29-142">The creator has the administrator role by default.</span></span>

<span data-ttu-id="67a29-143">Para actualizar un registro, obtenga el registro con [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) o [**PeerGroupEnumRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupenumrecords), realice los cambios y pase el registro actualizado a [**PeerGroupUpdateRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupupdaterecord).</span><span class="sxs-lookup"><span data-stu-id="67a29-143">To update a record, obtain the record with [**PeerGroupGetRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupgetrecord) or [**PeerGroupEnumRecords**](/windows/desktop/api/P2P/nf-p2p-peergroupenumrecords), make the changes, and pass the updated record to [**PeerGroupUpdateRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupupdaterecord).</span></span>

<span data-ttu-id="67a29-144">Para eliminar un registro, pase el identificador de registro que se va a eliminar a [**PeerGroupDeleteRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupdeleterecord).</span><span class="sxs-lookup"><span data-stu-id="67a29-144">To delete a record, pass the record ID to delete to [**PeerGroupDeleteRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupdeleterecord).</span></span>

<span data-ttu-id="67a29-145">Para agregar un registro, cree una nueva estructura de [**\_ registro del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_record) y rellene los campos siguientes:</span><span class="sxs-lookup"><span data-stu-id="67a29-145">To add a record, create a new [**PEER\_RECORD**](/windows/desktop/api/P2P/ns-p2p-peer_record) structure and populate the following fields:</span></span>

-   <span data-ttu-id="67a29-146">**dwSize**.</span><span class="sxs-lookup"><span data-stu-id="67a29-146">**dwSize**.</span></span> <span data-ttu-id="67a29-147">Este campo contiene el valor de **sizeof**([**\_ registro del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_record)).</span><span class="sxs-lookup"><span data-stu-id="67a29-147">This field contains the value of **sizeof**([**PEER\_RECORD**](/windows/desktop/api/P2P/ns-p2p-peer_record)).</span></span>
-   <span data-ttu-id="67a29-148">**ftExpiration**.</span><span class="sxs-lookup"><span data-stu-id="67a29-148">**ftExpiration**.</span></span> <span data-ttu-id="67a29-149">Este campo contiene la fecha y hora de expiración de este registro, expresadas en el momento del mismo nivel como una estructura **FILETIME** .</span><span class="sxs-lookup"><span data-stu-id="67a29-149">This field contains the expiration date and time of this record, expressed in peer time as a **FILETIME** structure.</span></span>
-   <span data-ttu-id="67a29-150">**Escriba**.</span><span class="sxs-lookup"><span data-stu-id="67a29-150">**type**.</span></span> <span data-ttu-id="67a29-151">Este campo contiene un valor **GUID** que identifica el tipo de registro para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="67a29-151">This field contains a **GUID** value that identifies the record type to the application.</span></span> <span data-ttu-id="67a29-152">Si este tipo es personalizado para la infraestructura de la aplicación, también debe rellenar el campo de **datos** .</span><span class="sxs-lookup"><span data-stu-id="67a29-152">If this type is custom to your application infrastructure, you should also populate the **data** field.</span></span>

<span data-ttu-id="67a29-153">Los campos siguientes se rellenan mediante la infraestructura de y se omitirán si la aplicación la establece:</span><span class="sxs-lookup"><span data-stu-id="67a29-153">The following fields are populated by the infrastructure, and will be ignored if set by the application:</span></span>

-   <span data-ttu-id="67a29-154">**id**</span><span class="sxs-lookup"><span data-stu-id="67a29-154">**id**</span></span>
-   <span data-ttu-id="67a29-155">**pwzCreatorId**</span><span class="sxs-lookup"><span data-stu-id="67a29-155">**pwzCreatorId**</span></span>
-   <span data-ttu-id="67a29-156">**pwzLastModifiedById**</span><span class="sxs-lookup"><span data-stu-id="67a29-156">**pwzLastModifiedById**</span></span>
-   <span data-ttu-id="67a29-157">**ftCreation**</span><span class="sxs-lookup"><span data-stu-id="67a29-157">**ftCreation**</span></span>
-   <span data-ttu-id="67a29-158">**ftLastModified**</span><span class="sxs-lookup"><span data-stu-id="67a29-158">**ftLastModified**</span></span>
-   <span data-ttu-id="67a29-159">**securityData**</span><span class="sxs-lookup"><span data-stu-id="67a29-159">**securityData**</span></span>

<span data-ttu-id="67a29-160">Los campos restantes son opcionales.</span><span class="sxs-lookup"><span data-stu-id="67a29-160">The remaining fields are optional.</span></span> <span data-ttu-id="67a29-161">Para agregar este nuevo registro al grupo del mismo nivel, páselo a [**PeerGroupAddRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupaddrecord).</span><span class="sxs-lookup"><span data-stu-id="67a29-161">To add this new record to the peer group, pass it to [**PeerGroupAddRecord**](/windows/desktop/api/P2P/nf-p2p-peergroupaddrecord).</span></span>

## <a name="importing-and-exporting-records"></a><span data-ttu-id="67a29-162">Importar y exportar registros</span><span class="sxs-lookup"><span data-stu-id="67a29-162">Importing and Exporting Records</span></span>

<span data-ttu-id="67a29-163">Los registros de grupo punto a punto se mantienen localmente como una base de datos.</span><span class="sxs-lookup"><span data-stu-id="67a29-163">Peer-to-peer group records are maintained locally as a database.</span></span> <span data-ttu-id="67a29-164">Para guardar una instantánea actual de la base de datos de registros de grupo del mismo nivel en un archivo local, llame a [**PeerGroupExportDatabase**](/windows/desktop/api/P2P/nf-p2p-peergroupexportdatabase)y pásele el identificador al grupo del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="67a29-164">To save a current snapshot of the peer group record database to a local file, call [**PeerGroupExportDatabase**](/windows/desktop/api/P2P/nf-p2p-peergroupexportdatabase), and pass it the handle to the peer group.</span></span> <span data-ttu-id="67a29-165">A continuación, este archivo se puede transportar a otro equipo o aplicación, que puede extraer y usar esta base de datos de registros llamando a [**PeerGroupImportDatabase**](/windows/desktop/api/P2P/nf-p2p-peergroupimportdatabase).</span><span class="sxs-lookup"><span data-stu-id="67a29-165">This file can then be transported to a different computer or application, which can extract and use this record database by calling [**PeerGroupImportDatabase**](/windows/desktop/api/P2P/nf-p2p-peergroupimportdatabase).</span></span>

 

 



