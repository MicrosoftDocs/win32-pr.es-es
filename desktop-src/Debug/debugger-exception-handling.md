---
description: El control del sistema de las excepciones de modo de usuario proporciona compatibilidad con depuradores sofisticados.
ms.assetid: c45a7dc6-e6b2-4fc4-9522-12d96893f4c7
title: Control de excepciones del depurador
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a6aff6d566e8798aaf4f3113ce6d8f44a3bc71ba
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104495809"
---
# <a name="debugger-exception-handling"></a><span data-ttu-id="fef03-103">Control de excepciones del depurador</span><span class="sxs-lookup"><span data-stu-id="fef03-103">Debugger Exception Handling</span></span>

<span data-ttu-id="fef03-104">El control del sistema de las excepciones de modo de usuario proporciona compatibilidad con depuradores sofisticados.</span><span class="sxs-lookup"><span data-stu-id="fef03-104">The system's handling of user-mode exceptions provides support for sophisticated debuggers.</span></span> <span data-ttu-id="fef03-105">Si se está depurando el proceso en el que se produce una excepción, el sistema genera un evento de depuración.</span><span class="sxs-lookup"><span data-stu-id="fef03-105">If the process in which an exception occurs is being debugged, the system generates a debug event.</span></span> <span data-ttu-id="fef03-106">Si el depurador utiliza la función [**WaitForDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) , el evento de depuración hace que la función devuelva un puntero a una estructura de [**\_ eventos de depuración**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) .</span><span class="sxs-lookup"><span data-stu-id="fef03-106">If the debugger is using the [**WaitForDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-waitfordebugevent) function, the debug event causes that function to return with a pointer to a [**DEBUG\_EVENT**](/windows/win32/api/minwinbase/ns-minwinbase-debug_event) structure.</span></span> <span data-ttu-id="fef03-107">Esta estructura contiene los identificadores de proceso y de subproceso que el depurador puede utilizar para tener acceso al registro de contexto del subproceso.</span><span class="sxs-lookup"><span data-stu-id="fef03-107">This structure contains the process and thread identifiers the debugger can use to access the thread's context record.</span></span> <span data-ttu-id="fef03-108">La estructura también contiene una estructura de [**\_ \_ información de depuración de excepción**](/windows/win32/api/minwinbase/ns-minwinbase-exception_debug_info) que incluye una copia del registro de excepciones.</span><span class="sxs-lookup"><span data-stu-id="fef03-108">The structure also contains an [**EXCEPTION\_DEBUG\_INFO**](/windows/win32/api/minwinbase/ns-minwinbase-exception_debug_info) structure that includes a copy of the exception record.</span></span>

<span data-ttu-id="fef03-109">Cuando el sistema busca un controlador de excepciones, realiza dos intentos de notificar al depurador de un proceso.</span><span class="sxs-lookup"><span data-stu-id="fef03-109">When the system is searching for an exception handler, it makes two attempts to notify a process's debugger.</span></span> <span data-ttu-id="fef03-110">El primer intento de notificación proporciona al depurador la oportunidad de controlar las excepciones de un punto de interrupción o de un solo paso.</span><span class="sxs-lookup"><span data-stu-id="fef03-110">The first notification attempt provides the debugger with an opportunity to handle breakpoint or single-step exceptions.</span></span> <span data-ttu-id="fef03-111">Esto se conoce como *notificación de primera oportunidad*.</span><span class="sxs-lookup"><span data-stu-id="fef03-111">This is known as *first-chance notification*.</span></span> <span data-ttu-id="fef03-112">Después, el usuario puede emitir comandos del depurador para manipular el entorno del proceso antes de que se ejecuten los controladores de excepciones.</span><span class="sxs-lookup"><span data-stu-id="fef03-112">The user can then issue debugger commands to manipulate the process's environment before any exception handlers are executed.</span></span> <span data-ttu-id="fef03-113">El segundo intento de notificar al depurador solo se produce si el sistema no puede encontrar un controlador de excepciones basado en fotogramas que controle la excepción.</span><span class="sxs-lookup"><span data-stu-id="fef03-113">The second attempt to notify the debugger occurs only if the system is unable to find a frame-based exception handler that handles the exception.</span></span> <span data-ttu-id="fef03-114">Esto se conoce como *notificación de última oportunidad*.</span><span class="sxs-lookup"><span data-stu-id="fef03-114">This is known as *last-chance notification*.</span></span> <span data-ttu-id="fef03-115">Si el depurador no controla la excepción después de la notificación de última oportunidad, el sistema finaliza el proceso que se está depurando.</span><span class="sxs-lookup"><span data-stu-id="fef03-115">If the debugger does not handle the exception after the last-chance notification, the system terminates the process being debugged.</span></span>

<span data-ttu-id="fef03-116">En cada intento de notificación, el depurador utiliza la función [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) para devolver el control al sistema.</span><span class="sxs-lookup"><span data-stu-id="fef03-116">At each notification attempt, the debugger uses the [**ContinueDebugEvent**](/windows/win32/api/debugapi/nf-debugapi-continuedebugevent) function to return control to the system.</span></span> <span data-ttu-id="fef03-117">Antes de devolver el control, el depurador puede controlar la excepción y modificar el estado del subproceso según corresponda, o puede optar por no controlar la excepción.</span><span class="sxs-lookup"><span data-stu-id="fef03-117">Before returning control, the debugger can handle the exception and modify the thread state as appropriate, or it can choose not to handle the exception.</span></span> <span data-ttu-id="fef03-118">Con **ContinueDebugEvent**, el depurador puede indicar que se ha controlado la excepción, en cuyo caso se restaura el estado del equipo y se continúa la ejecución del subproceso en el punto en el que se produjo la excepción.</span><span class="sxs-lookup"><span data-stu-id="fef03-118">Using **ContinueDebugEvent**, the debugger can indicate that it has handled the exception, in which case the machine state is restored and thread execution is continued at the point at which the exception occurred.</span></span> <span data-ttu-id="fef03-119">El depurador también puede indicar que no controló la excepción, lo que hace que el sistema continúe su búsqueda para un controlador de excepciones.</span><span class="sxs-lookup"><span data-stu-id="fef03-119">The debugger can also indicate that it did not handle the exception, which causes the system to continue its search for an exception handler.</span></span>

 

 
