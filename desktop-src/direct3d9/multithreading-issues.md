---
description: Las aplicaciones de Direct3D de pantalla completa proporcionan un identificador de ventana para el tiempo de ejecución de Direct3D.
ms.assetid: 66a9e14f-46c8-45e8-ae0e-4d8cf5106acc
title: Problemas de multithreading (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa8d163698e6cc1b4855668d255ed46fd28700d1
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104422800"
---
# <a name="multithreading-issues-direct3d-9"></a><span data-ttu-id="63ec2-103">Problemas de multithreading (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="63ec2-103">Multithreading Issues (Direct3D 9)</span></span>

<span data-ttu-id="63ec2-104">Las aplicaciones de Direct3D de pantalla completa proporcionan un identificador de ventana para el tiempo de ejecución de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="63ec2-104">Full-screen Direct3D applications provide a window handle to the Direct3D run time.</span></span> <span data-ttu-id="63ec2-105">La ventana está enlazada por el tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="63ec2-105">The window is hooked by the run time.</span></span> <span data-ttu-id="63ec2-106">Esto significa que todos los mensajes pasados al procedimiento de mensaje de ventana de la aplicación se han examinado primero con el procedimiento de control de mensajes propio del tiempo de ejecución de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="63ec2-106">This means that all messages passed to the application's window message procedure have first been examined by the Direct3D run time's own message-handling procedure.</span></span>

<span data-ttu-id="63ec2-107">Los cambios en el modo de presentación se ven afectados por las rutinas de compatibilidad integradas en el sistema operativo subyacente.</span><span class="sxs-lookup"><span data-stu-id="63ec2-107">Display mode changes are affected by support routines built into the underlying operating system.</span></span> <span data-ttu-id="63ec2-108">Cuando se producen cambios en el modo, el sistema difunde varios mensajes a todas las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="63ec2-108">When mode changes occur, the system broadcasts several messages to all applications.</span></span> <span data-ttu-id="63ec2-109">En las aplicaciones de Direct3D, los mensajes se reciben en el subproceso de procedimiento de ventana, que no es necesariamente el mismo subproceso que llamó a [**IDirect3DDevice9:: RESET**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset) o [**IDirect3D9:: CreateDevice**](/windows/desktop/api) (o la versión final de [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9), que puede provocar un cambio en el modo de presentación).</span><span class="sxs-lookup"><span data-stu-id="63ec2-109">In Direct3D applications, the messages are received on the window procedure thread, which is not necessarily the same thread that called [**IDirect3DDevice9::Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset) or [**IDirect3D9::CreateDevice**](/windows/desktop/api) (or the final Release of [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9), which can cause a display mode change).</span></span> <span data-ttu-id="63ec2-110">El tiempo de ejecución de Direct3D mantiene varias secciones críticas internamente.</span><span class="sxs-lookup"><span data-stu-id="63ec2-110">The Direct3D run time maintains several critical sections internally.</span></span> <span data-ttu-id="63ec2-111">Dado que al menos una de estas secciones críticas se mantiene en el modificador de modo producido por **IDirect3DDevice9:: RESET** o **IDirect3D9:: CreateDevice**, estas secciones críticas se siguen conservando cuando la aplicación recibe los mensajes de ventana relacionados con el cambio de modo.</span><span class="sxs-lookup"><span data-stu-id="63ec2-111">Because at least one of these critical sections is held across the mode switch caused by **IDirect3DDevice9::Reset** or **IDirect3D9::CreateDevice**, these critical sections are still held when the application receives the mode-change related window messages.</span></span>

<span data-ttu-id="63ec2-112">Este diseño tiene algunas implicaciones para las aplicaciones multiproceso.</span><span class="sxs-lookup"><span data-stu-id="63ec2-112">This design has some implications for multithreaded applications.</span></span> <span data-ttu-id="63ec2-113">En concreto, una aplicación debe estar seguro de separar los subprocesos de control de mensajes de ventana de sus subprocesos de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="63ec2-113">In particular, an application must be sure to strongly segregate its window message handling threads from its Direct3D threads.</span></span> <span data-ttu-id="63ec2-114">Una aplicación que provoca un cambio de modo en un subproceso, pero hace que las llamadas de Direct3D en un subproceso diferente en el procedimiento de ventana esté en peligro del interbloqueo.</span><span class="sxs-lookup"><span data-stu-id="63ec2-114">An application that causes a mode change on one thread but makes Direct3D calls on a different thread in its window procedure is in danger of deadlock.</span></span>

<span data-ttu-id="63ec2-115">Por estos motivos, Direct3D está diseñado de modo que los métodos [**IDirect3DDevice9:: RESET**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), [**IDirect3D9:: CreateDevice**](/windows/desktop/api), [**IDirect3DDevice9:: TestCooperativeLevel**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-testcooperativelevel)o la versión final de [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) solo se pueden llamar desde el mismo subproceso que controla los mensajes de ventana.</span><span class="sxs-lookup"><span data-stu-id="63ec2-115">For these reasons, Direct3D is designed so that the methods [**IDirect3DDevice9::Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), [**IDirect3D9::CreateDevice**](/windows/desktop/api), [**IDirect3DDevice9::TestCooperativeLevel**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-testcooperativelevel), or the final Release of [**IDirect3DDevice9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3ddevice9) can only be called from the same thread that handles window messages.</span></span>

## <a name="related-topics"></a><span data-ttu-id="63ec2-116">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="63ec2-116">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="63ec2-117">Sugerencias de programación</span><span class="sxs-lookup"><span data-stu-id="63ec2-117">Programming Tips</span></span>](programming-tips.md)
</dt> </dl>

 

 
