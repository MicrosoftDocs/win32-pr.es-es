---
description: Flujos opcionales
ms.assetid: 94477a71-c267-4602-893b-1bd1256b34ef
title: Flujos opcionales
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 940be49196396aa2d1fa71502213b0d4fbacb5ea
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "105686313"
---
# <a name="optional-streams"></a><span data-ttu-id="45da7-103">Flujos opcionales</span><span class="sxs-lookup"><span data-stu-id="45da7-103">Optional Streams</span></span>

<span data-ttu-id="45da7-104">Un DMO puede designar algunos de sus flujos de salida como opcionales.</span><span class="sxs-lookup"><span data-stu-id="45da7-104">A DMO can designate some of its output streams as optional.</span></span> <span data-ttu-id="45da7-105">Un flujo opcional genera datos que la aplicación puede descartar, ya sea por completo o en muestras ocasionales.</span><span class="sxs-lookup"><span data-stu-id="45da7-105">An optional stream produces data that the application can discard, either completely or on occasional samples.</span></span> <span data-ttu-id="45da7-106">Por ejemplo, un flujo opcional podría contener información adicional sobre una secuencia principal.</span><span class="sxs-lookup"><span data-stu-id="45da7-106">For example, an optional stream might contain additional information about a primary stream.</span></span>

<span data-ttu-id="45da7-107">Para consultar si una secuencia es opcional, llame al método [**IMediaObject:: GetOutputStreamInfo**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputstreaminfo) y compruebe el parámetro *pdwFlags* .</span><span class="sxs-lookup"><span data-stu-id="45da7-107">To query whether a stream is optional, call the [**IMediaObject::GetOutputStreamInfo**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputstreaminfo) method and check the *pdwFlags* parameter.</span></span> <span data-ttu-id="45da7-108">Las secuencias opcionales devuelven la \_ marca de salida DMO \_ STREAMF \_ descartable o la \_ marca de salida DMO \_ STREAMF \_ opcional.</span><span class="sxs-lookup"><span data-stu-id="45da7-108">Optional streams return either the DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag or the DMO\_OUTPUT\_STREAMF\_OPTIONAL flag.</span></span> <span data-ttu-id="45da7-109">Estas marcas significan casi lo mismo: una diferencia menor entre ellas se explicará en breve.</span><span class="sxs-lookup"><span data-stu-id="45da7-109">These flags mean almost the same thing; one minor difference between them will be explained shortly.</span></span>

<span data-ttu-id="45da7-110">Si una secuencia es opcional, el cliente puede indicar a DMO que descarte los datos de esa secuencia cuando procesa la salida.</span><span class="sxs-lookup"><span data-stu-id="45da7-110">If a stream is optional, the client can instruct the DMO to discard data from that stream when it processes the output.</span></span> <span data-ttu-id="45da7-111">Para ello, llame al método [**IMediaObject::P rocessoutput**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-processoutput) y establezca el búfer de salida en **null** para cada flujo que desee descartar.</span><span class="sxs-lookup"><span data-stu-id="45da7-111">To do so, call the [**IMediaObject::ProcessOutput**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-processoutput) method and set the output buffer to **NULL** for each stream that you wish to discard.</span></span> <span data-ttu-id="45da7-112">(El búfer de salida se especifica en el miembro **pBuffer** del [**\_ búfer de \_ datos \_ de salida de DMO**](/previous-versions/windows/desktop/api/Mediaobj/ns-mediaobj-dmo_output_data_buffer)). Establezca también la salida del proceso de DMO \_ \_ \_ descartada \_ cuando \_ no haya ninguna \_ marca de búfer en el parámetro *dwFlags* .</span><span class="sxs-lookup"><span data-stu-id="45da7-112">(The output buffer is specified in the **pBuffer** member of the [**DMO\_OUTPUT\_DATA\_BUFFER**](/previous-versions/windows/desktop/api/Mediaobj/ns-mediaobj-dmo_output_data_buffer).) Also set the DMO\_PROCESS\_OUTPUT\_DISCARD\_WHEN\_NO\_BUFFER flag in the *dwFlags* parameter.</span></span>

<span data-ttu-id="45da7-113">Para cada flujo en el que el puntero *pBuffer* sea **null**, DMO intentará descartar los datos.</span><span class="sxs-lookup"><span data-stu-id="45da7-113">For each stream where the *pBuffer* pointer is **NULL**, the DMO will attempt to discard the data.</span></span> <span data-ttu-id="45da7-114">Si la secuencia es opcional, se garantiza que la DMO descarta los datos.</span><span class="sxs-lookup"><span data-stu-id="45da7-114">If the stream is optional, the DMO is guaranteed to discard the data.</span></span> <span data-ttu-id="45da7-115">Si la secuencia no es opcional, DMO descarta los datos cuando sea posible, pero no se garantiza que lo haga.</span><span class="sxs-lookup"><span data-stu-id="45da7-115">If the stream is not optional, the DMO discards the data when possible, but is not guaranteed to do so.</span></span> <span data-ttu-id="45da7-116">Si no puede descartar los datos, establece la \_ marca de datos de salida DMO \_ \_ BUFFERF \_ incompleta.</span><span class="sxs-lookup"><span data-stu-id="45da7-116">If it cannot discard the data, it sets the DMO\_OUTPUT\_DATA\_BUFFERF\_INCOMPLETE flag.</span></span> <span data-ttu-id="45da7-117">Si establece un puntero de *pBuffer* en **null** pero no establece la salida del proceso de DMO en \_ \_ \_ descartar \_ cuando \_ no hay ninguna \_ marca de búfer, DMO no descarta los datos.</span><span class="sxs-lookup"><span data-stu-id="45da7-117">If you set a *pBuffer* pointer to **NULL** but do not set the DMO\_PROCESS\_OUTPUT\_DISCARD\_WHEN\_NO\_BUFFER flag, the DMO does not discard the data.</span></span> <span data-ttu-id="45da7-118">En ese caso, DMO almacena en búfer el resultado internamente o simplemente produce un error en la llamada a **ProcessOutput** .</span><span class="sxs-lookup"><span data-stu-id="45da7-118">In that case, the DMO either buffers the output internally, or simply fails the **ProcessOutput** call.</span></span>

<span data-ttu-id="45da7-119">La única diferencia funcional entre la \_ marca opcional STREAMF de salida de DMO \_ \_ y la marca de salida de DMO \_ \_ STREAMF \_ se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="45da7-119">The only functional difference between the DMO\_OUTPUT\_STREAMF\_OPTIONAL flag and the DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag is the following:</span></span>

-   <span data-ttu-id="45da7-120">La \_ marca de salida DMO \_ STREAMF \_ opcional indica que el cliente no tiene que establecer un tipo de medio en esa secuencia.</span><span class="sxs-lookup"><span data-stu-id="45da7-120">The DMO\_OUTPUT\_STREAMF\_OPTIONAL flag indicates that the client does not have to set a media type on that stream.</span></span> <span data-ttu-id="45da7-121">Sin embargo, si el cliente comienza a procesar datos sin establecer el tipo de medio para la secuencia, debe descartar los datos de esa secuencia durante toda la duración de la transmisión por secuencias.</span><span class="sxs-lookup"><span data-stu-id="45da7-121">However, if the client begins processing data without setting the media type for that stream, then it must discard the data from that stream for the entire duration of streaming.</span></span> <span data-ttu-id="45da7-122">Si desea descartar ejemplos de forma selectiva, debe establecer el tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="45da7-122">If you want to discard samples selectively, then you must set the media type.</span></span>
-   <span data-ttu-id="45da7-123">La marca de salida de DMO \_ \_ STREAMF \_ descartable indica que, aunque la secuencia es opcional, siempre requiere un tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="45da7-123">The DMO\_OUTPUT\_STREAMF\_DISCARDABLE flag indicates that, although the stream is optional, it always requires a media type.</span></span>

## <a name="related-topics"></a><span data-ttu-id="45da7-124">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="45da7-124">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="45da7-125">Hospedar directamente un DMO</span><span class="sxs-lookup"><span data-stu-id="45da7-125">Directly Hosting a DMO</span></span>](directly-hosting-a-dmo.md)
</dt> </dl>

 

 



