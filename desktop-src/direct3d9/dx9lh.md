---
description: En esta documentación se hace referencia específicamente a las extensiones de Windows Vista para gráficos de DirectX.
ms.assetid: 3cc0b08c-e126-4f1b-b5d1-0d6c1ebeb0c5
title: Resumen de características (Direct3D 9 para Windows Vista)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3d5cf2447297b7f24edf7d0200e640d5aef90bff
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "105696076"
---
# <a name="feature-summary-direct3d-9-for-windows-vista"></a><span data-ttu-id="9a81d-103">Resumen de características (Direct3D 9 para Windows Vista)</span><span class="sxs-lookup"><span data-stu-id="9a81d-103">Feature Summary (Direct3D 9 for Windows Vista)</span></span>

<span data-ttu-id="9a81d-104">En esta documentación se hace referencia específicamente a las extensiones de Windows Vista para gráficos de DirectX.</span><span class="sxs-lookup"><span data-stu-id="9a81d-104">This documentation specifically refers to the Windows Vista extensions for DirectX graphics.</span></span> <span data-ttu-id="9a81d-105">Para desarrollar el potencial de DirectX para Windows Vista, debe instalar el SDK de Windows Vista, así como el SDK de DirectX.</span><span class="sxs-lookup"><span data-stu-id="9a81d-105">To develop the power of DirectX for Windows Vista, you must install the Windows Vista SDK as well as the DirectX SDK.</span></span> <span data-ttu-id="9a81d-106">Las aplicaciones que usan DirectX para Windows Vista deben usar hardware que use el controlador WDDM (modelo de controladores de dispositivos de Windows) en lugar de XPDM (modelo de controladores de XP). los controladores que no implementan el WDDM no pueden crear instancias de las interfaces de gráficos DirectX de Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="9a81d-106">Applications using DirectX for Windows Vista must be using hardware that uses the WDDM driver (Windows Device Driver Model) as opposed to the XPDM (XP Driver Model); drivers that do not implement the WDDM cannot instantiate Windows Vista DirectX graphics interfaces.</span></span>

<span data-ttu-id="9a81d-107">Descubra las nuevas características de gráficos de DirectX en Windows Vista en una de estas secciones:</span><span class="sxs-lookup"><span data-stu-id="9a81d-107">Discover the new DirectX graphics features in Windows Vista in one of these sections:</span></span>

-   [<span data-ttu-id="9a81d-108">Cambios de comportamiento del dispositivo</span><span class="sxs-lookup"><span data-stu-id="9a81d-108">Device Behavior Changes</span></span>](#device-behavior-changes)
-   [<span data-ttu-id="9a81d-109">Deshabilitar el procesamiento de vértices de software multiproceso</span><span class="sxs-lookup"><span data-stu-id="9a81d-109">Disabling Multithreaded Software Vertex Processing</span></span>](#disabling-multithreaded-software-vertex-processing)
-   [<span data-ttu-id="9a81d-110">Superficies de un bit</span><span class="sxs-lookup"><span data-stu-id="9a81d-110">One Bit Surfaces</span></span>](#one-bit-surfaces)
-   [<span data-ttu-id="9a81d-111">Lectura de búferes de profundidad/estarcido</span><span class="sxs-lookup"><span data-stu-id="9a81d-111">Reading Depth/Stencil Buffers</span></span>](#reading-depthstencil-buffers)
-   [<span data-ttu-id="9a81d-112">Compartir recursos</span><span class="sxs-lookup"><span data-stu-id="9a81d-112">Sharing Resources</span></span>](#sharing-resources)
-   [<span data-ttu-id="9a81d-113">Conversión sRGB antes de la fusión</span><span class="sxs-lookup"><span data-stu-id="9a81d-113">sRGB Conversion Before Blending</span></span>](#srgb-conversion-before-blending)
-   [<span data-ttu-id="9a81d-114">Mejoras de StretchRect</span><span class="sxs-lookup"><span data-stu-id="9a81d-114">StretchRect Improvements</span></span>](#stretchrect-improvements)
-   [<span data-ttu-id="9a81d-115">Creación de texturas en la memoria del sistema</span><span class="sxs-lookup"><span data-stu-id="9a81d-115">Texture Creation in System Memory</span></span>](#texture-creation-in-system-memory)

## <a name="device-behavior-changes"></a><span data-ttu-id="9a81d-116">Cambios de comportamiento del dispositivo</span><span class="sxs-lookup"><span data-stu-id="9a81d-116">Device Behavior Changes</span></span>

<span data-ttu-id="9a81d-117">Los dispositivos ahora solo se pierden en dos circunstancias: Cuando se restablece el hardware porque está bloqueado y cuando se detiene el controlador de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="9a81d-117">Devices are now only lost under two circumstances; when the hardware is reset because it is hanging, and when the device driver is stopped.</span></span> <span data-ttu-id="9a81d-118">Cuando se bloquea el hardware, se puede restablecer el dispositivo mediante una llamada a [**ResetEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-resetex).</span><span class="sxs-lookup"><span data-stu-id="9a81d-118">When hardware hangs, the device can be reset by calling [**ResetEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-resetex).</span></span> <span data-ttu-id="9a81d-119">Si el hardware se bloquea, se pierde la memoria de la textura.</span><span class="sxs-lookup"><span data-stu-id="9a81d-119">If hardware hangs, texture memory is lost.</span></span>

<span data-ttu-id="9a81d-120">Una vez detenido un controlador, el objeto IDirect9Ex debe volver a crearse para reanudar la representación.</span><span class="sxs-lookup"><span data-stu-id="9a81d-120">After a driver is stopped, the IDirect9Ex object must be recreated to resume rendering.</span></span>

<span data-ttu-id="9a81d-121">Cuando el área de presentación está oscurecida por otra ventana en modo de ventana, o cuando una aplicación de pantalla completa está minimizada, [**PresentEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-presentex) devolverá S \_ D3DPRESENTATIONOCCLUDED.</span><span class="sxs-lookup"><span data-stu-id="9a81d-121">When the presentation area is obscured by another window in windowed mode, or when a fullscreen application is minimized, [**PresentEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-presentex) will return S\_D3DPRESENTATIONOCCLUDED.</span></span> <span data-ttu-id="9a81d-122">Las aplicaciones de pantalla completa pueden reanudar la representación cuando reciben un mensaje de devolución de llamada de [**WM \_ ACTIVATEAPP**](../winmsg/wm-activateapp.md) .</span><span class="sxs-lookup"><span data-stu-id="9a81d-122">Full screen applications can resume rendering when they receive a [**WM\_ACTIVATEAPP**](../winmsg/wm-activateapp.md) callback message.</span></span>

<span data-ttu-id="9a81d-123">En versiones anteriores de DirectX, cuando una aplicación experimentó un cambio de modo, la única manera de recuperarlo era restablecer el dispositivo y volver a crear todos los recursos de memoria de vídeo y cadenas de intercambio.</span><span class="sxs-lookup"><span data-stu-id="9a81d-123">In previous versions of DirectX, when an application experienced a mode change, the only way to recover was to reset the device and re-create all video memory resources and swap chains.</span></span> <span data-ttu-id="9a81d-124">Ahora con DirectX para Windows Vista, al llamar a Reset después de un cambio de modo no se pierden las superficies de la memoria de textura, las texturas y la información de estado, y no es necesario volver a crear estos recursos.</span><span class="sxs-lookup"><span data-stu-id="9a81d-124">Now with DirectX for Windows Vista, calling Reset after a mode change does not cause texture memory surfaces, textures and state information to be lost and these resources do not need to be recreated.</span></span>

## <a name="disabling-multithreaded-software-vertex-processing"></a><span data-ttu-id="9a81d-125">Deshabilitar el procesamiento de vértices de software multiproceso</span><span class="sxs-lookup"><span data-stu-id="9a81d-125">Disabling Multithreaded Software Vertex Processing</span></span>

<span data-ttu-id="9a81d-126">Se ha agregado un nuevo bit de Cap (D3DCREATE \_ Disable \_ PSGP \_ Threading) que deshabilitará el multithreading para el procesamiento de vértices de software (SWVP).</span><span class="sxs-lookup"><span data-stu-id="9a81d-126">A new caps bit (D3DCREATE\_DISABLE\_PSGP\_THREADING) has been added that will disable multithreading for software vertex processing (swvp).</span></span> <span data-ttu-id="9a81d-127">Use esta macro para generar una marca de comportamiento para IDirect3D9:: CreateDevice.</span><span class="sxs-lookup"><span data-stu-id="9a81d-127">Use this macro to generate a behavior flag for IDirect3D9::CreateDevice.</span></span>


```
#define D3DCREATE_DISABLE_PSGP_THREADING
```



## <a name="one-bit-surfaces"></a><span data-ttu-id="9a81d-128">Superficies de un bit</span><span class="sxs-lookup"><span data-stu-id="9a81d-128">One Bit Surfaces</span></span>

<span data-ttu-id="9a81d-129">Hay un nuevo tipo de formato de superficie de un bit que puede ser especialmente útil para procesar glifos de texto.</span><span class="sxs-lookup"><span data-stu-id="9a81d-129">There is a new one bit surface format type which can be especially useful for processing text glyphs.</span></span> <span data-ttu-id="9a81d-130">El nuevo formato se denomina D3DFMT \_ a1.</span><span class="sxs-lookup"><span data-stu-id="9a81d-130">The new format is called D3DFMT\_A1.</span></span> <span data-ttu-id="9a81d-131">Una superficie de un bit está diseñada para usarse como una textura por píxel o como la salida de destino de representación generada por ComposeRects o ColorFill.</span><span class="sxs-lookup"><span data-stu-id="9a81d-131">A one-bit surface is designed to be either used as a per-pixel texture, or the render target output generated by ComposeRects or ColorFill.</span></span> <span data-ttu-id="9a81d-132">No hay ningún Cap independiente para el ancho y el alto de la superficie. una implementación de debe admitir una superficie de tamaño único que sea 2K textura x 8K textura.</span><span class="sxs-lookup"><span data-stu-id="9a81d-132">There are no separate caps for the surface width and height; an implementation must support a single size surface that is 2K texels x 8K texels.</span></span>

<span data-ttu-id="9a81d-133">Una superficie de un bit tiene un bit por textura; por lo tanto, una de ellas significa que todos los componentes (r, g, b, a) de un píxel son 1 y cero, lo que significa que todos los componentes son iguales a 0.</span><span class="sxs-lookup"><span data-stu-id="9a81d-133">A one-bit surface has one bit per texel; therefore, a one would mean that all components (r,g,b,a) of a pixel are 1, and zero would mean that all components are equal to 0.</span></span> <span data-ttu-id="9a81d-134">Puede usar superficies de un bit con las siguientes API: ColorFill, UpdateSurface y UpdateTexture.</span><span class="sxs-lookup"><span data-stu-id="9a81d-134">You may use one-bit surfaces with the following APIs: ColorFill, UpdateSurface and UpdateTexture.</span></span>

<span data-ttu-id="9a81d-135">Cuando se lee una superficie de un bit, el tiempo de ejecución puede realizar cualquier ejemplo de punto o filtrado de circunvolución.</span><span class="sxs-lookup"><span data-stu-id="9a81d-135">When a one-bit surface is read, the runtime can perform either point sample or convolution filtering.</span></span> <span data-ttu-id="9a81d-136">El filtro de convolución es ajustable (vea [**SetConvolutionMonoKernel**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-setconvolutionmonokernel)).</span><span class="sxs-lookup"><span data-stu-id="9a81d-136">The convolution filter is adjustable (see [**SetConvolutionMonoKernel**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-setconvolutionmonokernel)).</span></span>

<span data-ttu-id="9a81d-137">Existen algunas restricciones para las superficies de un bit:</span><span class="sxs-lookup"><span data-stu-id="9a81d-137">There are some restrictions for one-bit surfaces:</span></span>

-   <span data-ttu-id="9a81d-138">No se admite la asignación de MIP</span><span class="sxs-lookup"><span data-stu-id="9a81d-138">Mip-mapping is not supported</span></span>
-   <span data-ttu-id="9a81d-139">los datos sRGB no se pueden leer ni escribir en una superficie de un bit.</span><span class="sxs-lookup"><span data-stu-id="9a81d-139">sRGB data cannot be read or written to a one-bit surface.</span></span>
-   <span data-ttu-id="9a81d-140">No se puede usar una superficie de un bit como textura de vértices ni para el muestreo múltiple.</span><span class="sxs-lookup"><span data-stu-id="9a81d-140">A one-bit surface cannot be used as a vertex texture or for multisampling.</span></span>

## <a name="reading-depthstencil-buffers"></a><span data-ttu-id="9a81d-141">Lectura de búferes de profundidad/estarcido</span><span class="sxs-lookup"><span data-stu-id="9a81d-141">Reading Depth/Stencil Buffers</span></span>

<span data-ttu-id="9a81d-142">Use IDirect3DDevice9:: UpdateSurface para leer o escribir datos de profundidad/estarcido de las superficies obtenidas de IDirect3DDevice9:: CreateDepthStencilSurface o IDirect3DDevice9:: GetDepthStencilSurface.</span><span class="sxs-lookup"><span data-stu-id="9a81d-142">Use IDirect3DDevice9::UpdateSurface to read or write depth/stencil data from surfaces obtained from IDirect3DDevice9::CreateDepthStencilSurface or IDirect3DDevice9::GetDepthStencilSurface.</span></span>

<span data-ttu-id="9a81d-143">En primer lugar, cree una superficie solo bloqueable, solo de profundidad o de galería de símbolos con IDirect3DDevice9:: CreateOffscreenPlainSurface.</span><span class="sxs-lookup"><span data-stu-id="9a81d-143">First, create a lockable, depth only or stencil only surface using IDirect3DDevice9::CreateOffscreenPlainSurface.</span></span> <span data-ttu-id="9a81d-144">Use uno de los formatos siguientes:</span><span class="sxs-lookup"><span data-stu-id="9a81d-144">Use one of the following formats:</span></span>

-   <span data-ttu-id="9a81d-145">D3DFMT \_ D16 \_ bloqueable</span><span class="sxs-lookup"><span data-stu-id="9a81d-145">D3DFMT\_D16\_LOCKABLE</span></span>
-   <span data-ttu-id="9a81d-146">D3DFMT \_ D32F \_ bloqueable</span><span class="sxs-lookup"><span data-stu-id="9a81d-146">D3DFMT\_D32F\_LOCKABLE</span></span>
-   <span data-ttu-id="9a81d-147">D3DFMT \_ D32 \_ bloqueable</span><span class="sxs-lookup"><span data-stu-id="9a81d-147">D3DFMT\_D32\_LOCKABLE</span></span>
-   <span data-ttu-id="9a81d-148">D3DFMT \_ S8 \_ bloqueable</span><span class="sxs-lookup"><span data-stu-id="9a81d-148">D3DFMT\_S8\_LOCKABLE</span></span>

<span data-ttu-id="9a81d-149">En segundo lugar, se transfieren datos entre el búfer de profundidad/estarcido y la profundidad de la galería de símbolos o la profundidad que se acaba de crear.</span><span class="sxs-lookup"><span data-stu-id="9a81d-149">Second, transfer data between the depth/stencil buffer and the newly-created lockable depth or stencil surface.</span></span> <span data-ttu-id="9a81d-150">La transferencia se realiza mediante IDirect3DDevice9:: UpdateSurface.</span><span class="sxs-lookup"><span data-stu-id="9a81d-150">The transfer is performed using IDirect3DDevice9::UpdateSurface.</span></span>

<span data-ttu-id="9a81d-151">Se producirá un error en UpdateSurface cuando ambas superficies tengan un formato de BLOQUEable o ambos no se puedan bloquear.</span><span class="sxs-lookup"><span data-stu-id="9a81d-151">UpdateSurface will fail when both surfaces are a LOCKABLE format or both are non-lockable.</span></span>

<span data-ttu-id="9a81d-152">La transferencia de datos inexistentes producirá un error (por ejemplo, transferir desde una superficie solo de profundidad no bloqueable a una \_ superficie bloqueada de S8 de D3DFMT \_ ).</span><span class="sxs-lookup"><span data-stu-id="9a81d-152">Transferring non-existent data will result in an error (for example, transferring from a non-lockable depth-only surface to a D3DFMT\_S8\_LOCKABLE surface).</span></span>

<span data-ttu-id="9a81d-153">El resto de las restricciones de IDirect3DDevice9:: UpdateSurface se siguen aplicando.</span><span class="sxs-lookup"><span data-stu-id="9a81d-153">The rest of the restrictions for IDirect3DDevice9::UpdateSurface still apply.</span></span>

## <a name="sharing-resources"></a><span data-ttu-id="9a81d-154">Compartir recursos</span><span class="sxs-lookup"><span data-stu-id="9a81d-154">Sharing Resources</span></span>

<span data-ttu-id="9a81d-155">Los recursos de Direct3D ahora se pueden compartir entre dispositivos o procesos.</span><span class="sxs-lookup"><span data-stu-id="9a81d-155">Direct3D resources can now be shared between devices or processes.</span></span> <span data-ttu-id="9a81d-156">Esto se aplica a cualquier recurso de Direct3D, como texturas, búferes de vértices, búferes de índice o superficies (como destinos de representación, búferes de estarcido de profundidad o superficies sin formato de pantalla).</span><span class="sxs-lookup"><span data-stu-id="9a81d-156">This applies to any Direct3D resource including textures, vertex buffers, index buffers, or surfaces (such as render targets, depth stencil buffers or off-screen plain surfaces).</span></span> <span data-ttu-id="9a81d-157">Para compartirlo, debe designar un recurso para compartir en el momento de la creación y ubicar el recurso en el grupo predeterminado (D3DPOOL \_ predeterminado).</span><span class="sxs-lookup"><span data-stu-id="9a81d-157">To be shared, you need to designate a resource for sharing at the time of creation, and locate the resource in the default pool (D3DPOOL\_DEFAULT).</span></span> <span data-ttu-id="9a81d-158">Una vez que se crea un recurso para el uso compartido, se puede compartir entre los dispositivos de un proceso o compartir entre los procesos.</span><span class="sxs-lookup"><span data-stu-id="9a81d-158">Once a resource is created for sharing, it can be shared across devices within a process, or shared across processes.</span></span>

<span data-ttu-id="9a81d-159">Para habilitar los recursos compartidos, las API de creación de recursos tienen un parámetro de identificador adicional.</span><span class="sxs-lookup"><span data-stu-id="9a81d-159">To enable shared resources, the resource creation APIs have an additional handle parameter.</span></span> <span data-ttu-id="9a81d-160">Se trata de un identificador que apunta al recurso compartido.</span><span class="sxs-lookup"><span data-stu-id="9a81d-160">This is a HANDLE that points to the shared resource.</span></span> <span data-ttu-id="9a81d-161">En revisiones anteriores de DirectX, este argumento formaba parte de la firma de la API, pero se ha desusado y debe establecerse en **null**.</span><span class="sxs-lookup"><span data-stu-id="9a81d-161">In previous revisions of DirectX, this argument has been part of the API signature, but has been unused and must be set to **NULL**.</span></span> <span data-ttu-id="9a81d-162">A partir de Windows Vista, use pSharedHandle de las siguientes maneras:</span><span class="sxs-lookup"><span data-stu-id="9a81d-162">Starting with Windows Vista, use pSharedHandle in the following ways:</span></span>

-   <span data-ttu-id="9a81d-163">Establezca el puntero (pSharedHandle) en **null** para no compartir un recurso.</span><span class="sxs-lookup"><span data-stu-id="9a81d-163">Set the pointer (pSharedHandle) to **NULL** to not share a resource.</span></span> <span data-ttu-id="9a81d-164">Esto es igual que el comportamiento de DirectX anterior a Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="9a81d-164">This is just like the behavior of DirectX prior to Windows Vista.</span></span>
-   <span data-ttu-id="9a81d-165">Para crear un recurso compartido, llame a cualquier API de creación de recursos (consulte a continuación) con un identificador no inicializado (el propio puntero no es **null** (pSharedHandle! = **null**), pero el puntero señala a un valor **null** ( \* pSharedHandle = = **null**)).</span><span class="sxs-lookup"><span data-stu-id="9a81d-165">To create a shared resource, call any resource creation API (see below) with an uninitialized handle (the pointer itself is not **NULL** (pSharedHandle != **NULL**), but the pointer points to a **NULL** value (\*pSharedHandle == **NULL**)).</span></span> <span data-ttu-id="9a81d-166">La API generará un recurso compartido y devolverá un identificador válido.</span><span class="sxs-lookup"><span data-stu-id="9a81d-166">The API will generate a shared resource and return a valid handle.</span></span>
-   <span data-ttu-id="9a81d-167">Para abrir y obtener acceso a un recurso compartido creado previamente mediante un identificador de recurso compartido no nulo, establezca pSharedHandle en la dirección de ese identificador.</span><span class="sxs-lookup"><span data-stu-id="9a81d-167">To open and access a previously created shared resource by using a nonNULL shared resource handle, set pSharedHandle to the address of that handle.</span></span> <span data-ttu-id="9a81d-168">Después de abrir el recurso compartido creado previamente de esta manera, puede usar la interfaz devuelta en la API Direct3D 9 o Direct3D 9Ex como si la interfaz fuera un recurso típico de ese tipo.</span><span class="sxs-lookup"><span data-stu-id="9a81d-168">After you open the previously created shared resource in this manner, you can use the returned interface in the Direct3D 9 or Direct3D 9Ex API as if the interface were a typical resource of that type.</span></span>

<span data-ttu-id="9a81d-169">Las API de creación de recursos incluyen- [**CreateTexture**](/windows/desktop/api), [**CreateVolumeTexture**](/windows/desktop/api), [**CreateCubeTexture**](/windows/desktop/api), [**CreateRenderTarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget), [**CreateVertexBuffer**](/windows/desktop/api), [**CreateIndexBuffer**](/windows/desktop/api), [**CreateDepthStencilSurface**](/windows/desktop/api), [**CreateOffscreenPlainSurface**](/windows/desktop/api), [**CreateDepthStencilSurfaceEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createdepthstencilsurfaceex), [**CreateOffscreenPlainSurfaceEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createoffscreenplainsurfaceex)y [**CreateRenderTargetEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createrendertargetex).</span><span class="sxs-lookup"><span data-stu-id="9a81d-169">Resource creation APIs include - [**CreateTexture**](/windows/desktop/api), [**CreateVolumeTexture**](/windows/desktop/api), [**CreateCubeTexture**](/windows/desktop/api), [**CreateRenderTarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget), [**CreateVertexBuffer**](/windows/desktop/api), [**CreateIndexBuffer**](/windows/desktop/api), [**CreateDepthStencilSurface**](/windows/desktop/api), [**CreateOffscreenPlainSurface**](/windows/desktop/api), [**CreateDepthStencilSurfaceEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createdepthstencilsurfaceex), [**CreateOffscreenPlainSurfaceEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createoffscreenplainsurfaceex), and [**CreateRenderTargetEx**](/windows/desktop/api/d3d9/nf-d3d9-idirect3ddevice9ex-createrendertargetex).</span></span>

<span data-ttu-id="9a81d-170">Existen algunas restricciones en el uso de recursos compartidos.</span><span class="sxs-lookup"><span data-stu-id="9a81d-170">There are some restrictions for using shared resources.</span></span> <span data-ttu-id="9a81d-171">Entre ellas se incluyen las siguientes:</span><span class="sxs-lookup"><span data-stu-id="9a81d-171">These include:</span></span>

-   <span data-ttu-id="9a81d-172">La API que se usa para abrir un recurso compartido debe coincidir con la API que se usó para crear el recurso compartido.</span><span class="sxs-lookup"><span data-stu-id="9a81d-172">The API that you use to open a shared resource must match the API that you used to create the shared resource.</span></span> <span data-ttu-id="9a81d-173">Por ejemplo, si ha utilizado [**CreateTexture**](/windows/desktop/api) para crear un recurso compartido, debe usar **CreateTexture** para abrir ese recurso compartido. Si usó [**CreateRenderTarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget) para crear un recurso compartido, debe usar **CreateRenderTarget** para abrir ese recurso compartido, etc.</span><span class="sxs-lookup"><span data-stu-id="9a81d-173">For example, if you used [**CreateTexture**](/windows/desktop/api) to create a shared resource, you must use **CreateTexture** to open that shared resource; if you used [**CreateRenderTarget**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createrendertarget) to create a shared resource, you must use **CreateRenderTarget** to open that shared resource;and so on.</span></span>
-   <span data-ttu-id="9a81d-174">Al abrir un recurso compartido, debe especificar el \_ valor predeterminado de D3DPOOL.</span><span class="sxs-lookup"><span data-stu-id="9a81d-174">When you open a shared resource, you must specify D3DPOOL\_DEFAULT.</span></span>
-   <span data-ttu-id="9a81d-175">Los recursos bloqueable (texturas con búferes \_ dinámicos de D3DUSAGE, de vértices y de índice, por ejemplo) pueden experimentar un rendimiento deficiente cuando se comparten.</span><span class="sxs-lookup"><span data-stu-id="9a81d-175">Lockable resources (textures with D3DUSAGE\_DYNAMIC, vertex buffers and index buffers, for instance) can experience poor performance when shared.</span></span> <span data-ttu-id="9a81d-176">No se podrá compartir el Rendertargets bloqueable en algún hardware.</span><span class="sxs-lookup"><span data-stu-id="9a81d-176">Lockable rendertargets will fail to be shared on some hardware.</span></span>
-   <span data-ttu-id="9a81d-177">Las referencias a un recurso compartido de proceso cruzado deben tener las mismas dimensiones que el recurso original.</span><span class="sxs-lookup"><span data-stu-id="9a81d-177">References to a cross-process shared resource must have the same dimensions as the original resource.</span></span> <span data-ttu-id="9a81d-178">Al pasar un identificador en todo el proceso, incluya la información de la dimensión para que se pueda crear la referencia de forma idéntica.</span><span class="sxs-lookup"><span data-stu-id="9a81d-178">When passing a handle across process, include the dimension information so that the reference can be created identically.</span></span>
-   <span data-ttu-id="9a81d-179">Las superficies entre procesos compartidas no proporcionan ningún mecanismo de sincronización.</span><span class="sxs-lookup"><span data-stu-id="9a81d-179">Shared cross-process surfaces provide no synchronization mechanism.</span></span> <span data-ttu-id="9a81d-180">Es posible que los cambios de lectura/escritura en una superficie compartida no reflejen la vista de un proceso de referencia de la superficie cuando se espera.</span><span class="sxs-lookup"><span data-stu-id="9a81d-180">Read/write changes to a shared surface may not reflect a referencing process's view of the surface when expected.</span></span> <span data-ttu-id="9a81d-181">Para proporcionar la sincronización, use las consultas de eventos o bloquee la textura.</span><span class="sxs-lookup"><span data-stu-id="9a81d-181">To provide synchronization, use event queries or lock the texture.</span></span>
-   <span data-ttu-id="9a81d-182">Solo el proceso que crea inicialmente un recurso compartido puede bloquearlo (cualquier proceso que abra una referencia a ese recurso compartido no puede bloquearlo).</span><span class="sxs-lookup"><span data-stu-id="9a81d-182">Only the process that initially creates a shared resource can lock it (any process that opens a reference to that shared resource cannot lock it).</span></span>
-   <span data-ttu-id="9a81d-183">Si un recurso compartido está bloqueado, no hay ninguna validación para que otros procesos sepan si el recurso está disponible.</span><span class="sxs-lookup"><span data-stu-id="9a81d-183">If a shared resource is locked, there is no validation for other processes to know if the resource is available.</span></span>

## <a name="srgb-conversion-before-blending"></a><span data-ttu-id="9a81d-184">Conversión sRGB antes de la fusión</span><span class="sxs-lookup"><span data-stu-id="9a81d-184">sRGB Conversion Before Blending</span></span>

<span data-ttu-id="9a81d-185">Ahora puede comprobar para ver si el dispositivo puede convertir los datos de canalización en sRGB antes de la combinación de búferes de fotogramas.</span><span class="sxs-lookup"><span data-stu-id="9a81d-185">You can now check to see if the device can convert pipeline data to sRGB before frame-buffer blending.</span></span> <span data-ttu-id="9a81d-186">Esto implica que el dispositivo convierte los valores Render-target de sRGB.</span><span class="sxs-lookup"><span data-stu-id="9a81d-186">This implies that the device converts the render-target values from sRGB.</span></span> <span data-ttu-id="9a81d-187">Para ver si el hardware admite la conversión, compruebe este límite:</span><span class="sxs-lookup"><span data-stu-id="9a81d-187">To see if conversion is supported by the hardware, check for this cap:</span></span>


```
D3DPMISCCAPS_POSTBLENDSRGBCONVERT
```



<span data-ttu-id="9a81d-188">Este extremo identifica el hardware que admite la conversión a sRGB antes de la fusión.</span><span class="sxs-lookup"><span data-stu-id="9a81d-188">This cap identifies hardware that supports conversion to sRGB before blending.</span></span> <span data-ttu-id="9a81d-189">Esta capacidad es importante para la representación de alta calidad de los búferes de fotogramas de FP16 en el administrador de ventanas de escritorio (DWM).</span><span class="sxs-lookup"><span data-stu-id="9a81d-189">This capability is important for the high quality rendering from fp16 frame buffers in the desktop window manager (DWM).</span></span>

## <a name="stretchrect-improvements"></a><span data-ttu-id="9a81d-190">Mejoras de StretchRect</span><span class="sxs-lookup"><span data-stu-id="9a81d-190">StretchRect Improvements</span></span>

<span data-ttu-id="9a81d-191">En versiones anteriores de DirectX, StretchRect tiene muchas restricciones para acomodar diferentes controladores (consulte IDirect3DDevice9:: StretchRect).</span><span class="sxs-lookup"><span data-stu-id="9a81d-191">In previous versions of DirectX, StretchRect has many restrictions to accommodate different drivers (see IDirect3DDevice9::StretchRect).</span></span> <span data-ttu-id="9a81d-192">Windows Vista se basa en el modelo de controladores de dispositivos de Windows (WDDM).</span><span class="sxs-lookup"><span data-stu-id="9a81d-192">Windows Vista is built on the Windows Device Driver Model (WDDM).</span></span> <span data-ttu-id="9a81d-193">Este nuevo modelo de controladores es mucho más robusto y permite que los controladores controlen casos especiales en el hardware.</span><span class="sxs-lookup"><span data-stu-id="9a81d-193">This new driver model is much more robust, and allows drivers to handle special cases in the hardware.</span></span>

<span data-ttu-id="9a81d-194">En general, la única restricción restante es que el destino de representación se debe haber creado con el uso de destino de representación (D3DUSAGE \_ RENDERTARGET).</span><span class="sxs-lookup"><span data-stu-id="9a81d-194">In general, the only remaining restriction is that the render target must have been created with render-target usage (D3DUSAGE\_RENDERTARGET).</span></span> <span data-ttu-id="9a81d-195">Esta restricción se eleva si va a realizar una copia simple (donde el origen y el destino tienen el mismo formato, el mismo tamaño y no hay ningún rectángulo).</span><span class="sxs-lookup"><span data-stu-id="9a81d-195">This restriction is lifted if you are doing a simple copy (where the source and dest are the same format, same size and there are no sub-rectangles).</span></span>

## <a name="texture-creation-in-system-memory"></a><span data-ttu-id="9a81d-196">Creación de texturas en la memoria del sistema</span><span class="sxs-lookup"><span data-stu-id="9a81d-196">Texture Creation in System Memory</span></span>

<span data-ttu-id="9a81d-197">Las aplicaciones que necesitan más flexibilidad sobre el uso, la asignación y la eliminación de la memoria del sistema ahora pueden crear texturas a partir de un puntero de memoria del sistema.</span><span class="sxs-lookup"><span data-stu-id="9a81d-197">Applications that need more flexibility over the use, allocation and deletion of the system memory can now create textures from a system memory pointer.</span></span> <span data-ttu-id="9a81d-198">Por ejemplo, una aplicación podría crear una textura de Direct3D a partir de un puntero de mapa de bits de memoria del sistema GDI.</span><span class="sxs-lookup"><span data-stu-id="9a81d-198">For example, an application could create a Direct3D texture from a GDI system-memory bitmap pointer.</span></span>

<span data-ttu-id="9a81d-199">Debe hacer dos cosas para crear este tipo de textura:</span><span class="sxs-lookup"><span data-stu-id="9a81d-199">You need to do two things to create such a texture:</span></span>

-   <span data-ttu-id="9a81d-200">Asigne suficiente memoria del sistema para almacenar la superficie de textura.</span><span class="sxs-lookup"><span data-stu-id="9a81d-200">Allocate enough system memory to hold the texture surface.</span></span> <span data-ttu-id="9a81d-201">El número mínimo de bytes es el ancho x alto x bytes por píxel.</span><span class="sxs-lookup"><span data-stu-id="9a81d-201">The minimum number of bytes is width x height x bytes per pixel.</span></span>
-   <span data-ttu-id="9a81d-202">Pase la dirección de un puntero a la superficie de memoria del sistema para el parámetro de identificador \* a IDirect3DDevice9:: CreateTexture.</span><span class="sxs-lookup"><span data-stu-id="9a81d-202">Pass the address of a pointer to your system memory surface for the HANDLE\* parameter to IDirect3DDevice9::CreateTexture.</span></span>

<span data-ttu-id="9a81d-203">Este es el prototipo de función para IDirect3DDevice9:: CreateTexture:</span><span class="sxs-lookup"><span data-stu-id="9a81d-203">Here is the function prototype for IDirect3DDevice9::CreateTexture:</span></span>


```
STDMETHOD(CreateTexture)(THIS_ UINT Width, UINT Height, UINT Levels, 
    DWORD Usage, D3DFORMAT Format, D3DPOOL Pool, IDirect3DTexture9** ppTexture, 
    HANDLE* pSharedHandle)
```



<span data-ttu-id="9a81d-204">Una textura de memoria del sistema tiene las restricciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="9a81d-204">A system-memory texture has the following restrictions:</span></span>

-   <span data-ttu-id="9a81d-205">El paso de textura debe ser igual al ancho de la textura multiplicado por el número de bytes por píxel.</span><span class="sxs-lookup"><span data-stu-id="9a81d-205">The texture pitch must equal texture width times the number of bytes per pixel.</span></span>
-   <span data-ttu-id="9a81d-206">Cuando se usan formatos comprimidos (formatos DXT), la aplicación es responsable de asignar el tamaño correcto.</span><span class="sxs-lookup"><span data-stu-id="9a81d-206">When using compressed formats (DXT formats), the application is responsible for allocating the correct size.</span></span>
-   <span data-ttu-id="9a81d-207">Solo se admiten texturas con un solo nivel de mipmap.</span><span class="sxs-lookup"><span data-stu-id="9a81d-207">Only textures with a single mipmap level are supported.</span></span>
-   <span data-ttu-id="9a81d-208">El valor pasado a CreateTexture para el argumento Pool debe ser D3DPOOL \_ SYSTEMMEM.</span><span class="sxs-lookup"><span data-stu-id="9a81d-208">The value passed to CreateTexture for the Pool argument must be D3DPOOL\_SYSTEMMEM.</span></span>
-   <span data-ttu-id="9a81d-209">Esta API encapsula la memoria suministrada en una textura.</span><span class="sxs-lookup"><span data-stu-id="9a81d-209">This API wraps the supplied memory in a texture.</span></span> <span data-ttu-id="9a81d-210">No Desasigne esta memoria hasta que haya terminado.</span><span class="sxs-lookup"><span data-stu-id="9a81d-210">Do not deallocate this memory until you are done with it.</span></span>

 

 
