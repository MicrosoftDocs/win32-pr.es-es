---
description: Servicios de Certificate Server admite la renovación de una entidad de certificación (CA).
ms.assetid: b6c76642-9a23-471e-af08-58e91d778f09
title: Renovación de la entidad de certificación
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: de57cd16ae6fc4c90bfeea411a06efcb14d028b7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104001424"
---
# <a name="certification-authority-renewal"></a><span data-ttu-id="ed3cf-103">Renovación de la entidad de certificación</span><span class="sxs-lookup"><span data-stu-id="ed3cf-103">Certification Authority Renewal</span></span>

<span data-ttu-id="ed3cf-104">[*Servicios de Certificate Server*](../secgloss/c-gly.md) admite la renovación de una [*entidad de certificación*](../secgloss/c-gly.md) (CA).</span><span class="sxs-lookup"><span data-stu-id="ed3cf-104">[*Certificate Services*](../secgloss/c-gly.md) supports the renewal of a [*certification authority*](../secgloss/c-gly.md) (CA).</span></span> <span data-ttu-id="ed3cf-105">La renovación es la emisión de un nuevo certificado para que la entidad de certificación extienda la vida de la entidad de certificación más allá de la fecha de finalización de su certificado original.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-105">Renewal is the issuing of a new certificate for the CA to extend the CA's life beyond the end date of its original certificate.</span></span> <span data-ttu-id="ed3cf-106">Puede renovar una entidad de certificación como una tarea dentro del complemento MMC de la entidad de certificación o mediante la herramienta de Certutil.exe (con el comando **-renewCert** ).</span><span class="sxs-lookup"><span data-stu-id="ed3cf-106">You can renew a CA as a task within the Certificate Authority MMC snap-in or by using the Certutil.exe tool (with the **-renewCert** command).</span></span>

<span data-ttu-id="ed3cf-107">Cada renovación da como resultado un nuevo certificado de CA. sin embargo, el administrador puede generar un nuevo par de claves pública y privada, o volver a usar el par de claves pública y privada existente para el certificado de CA.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-107">Each renewal results in a new CA certificate; however, the administrator can either generate a new public/private key pair or reuse the existing public/private key pair for the CA certificate.</span></span> <span data-ttu-id="ed3cf-108">Para mantener la coherencia y la integridad, los certificados de CA y [*las listas de revocación de certificados*](../secgloss/c-gly.md) (CRL) emitidos por la CA antes de su renovación estarán disponibles después de renovar la CA.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-108">For consistency and integrity, CA certificates and [*certificate revocation lists*](../secgloss/c-gly.md) (CRL) issued by the CA before its renewal will be available after the CA has been renewed.</span></span> <span data-ttu-id="ed3cf-109">Para que estén disponibles, servicios de Certificate Server mantiene un índice de certificados de entidad de certificación, CRL y claves.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-109">To make these available, Certificate Services maintains an index of CA certificates, CRLs, and keys.</span></span>

<span data-ttu-id="ed3cf-110">Los índices y los nombres de sufijo de los certificados y las CRL de CA durante varias operaciones de renovación de CA son los siguientes.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-110">The indexes and suffix names of CA certificates and CRLs during various CA renewal operations are as follows.</span></span>



| <span data-ttu-id="ed3cf-111">Operación</span><span class="sxs-lookup"><span data-stu-id="ed3cf-111">Operation</span></span>                | <span data-ttu-id="ed3cf-112">Índice de certificado de CA</span><span class="sxs-lookup"><span data-stu-id="ed3cf-112">CA certificate index</span></span> | <span data-ttu-id="ed3cf-113">Sufijo de nombre de archivo de certificado de CA</span><span class="sxs-lookup"><span data-stu-id="ed3cf-113">CA certificate file name suffix</span></span> | <span data-ttu-id="ed3cf-114">CRL e índice de clave</span><span class="sxs-lookup"><span data-stu-id="ed3cf-114">CRL and key index</span></span> | <span data-ttu-id="ed3cf-115">Sufijo de nombre de contenedor de claves y CRL</span><span class="sxs-lookup"><span data-stu-id="ed3cf-115">CRL and key container name suffix</span></span> |
|--------------------------|----------------------|---------------------------------|-------------------|-----------------------------------|
| <span data-ttu-id="ed3cf-116">Instalación de la CA original</span><span class="sxs-lookup"><span data-stu-id="ed3cf-116">Original CA installation</span></span> | <span data-ttu-id="ed3cf-117">0</span><span class="sxs-lookup"><span data-stu-id="ed3cf-117">0</span></span>                    | <span data-ttu-id="ed3cf-118">""</span><span class="sxs-lookup"><span data-stu-id="ed3cf-118">""</span></span>                              | <span data-ttu-id="ed3cf-119">0</span><span class="sxs-lookup"><span data-stu-id="ed3cf-119">0</span></span>                 | <span data-ttu-id="ed3cf-120">""</span><span class="sxs-lookup"><span data-stu-id="ed3cf-120">""</span></span>                                |
| <span data-ttu-id="ed3cf-121">Renovación con clave nueva</span><span class="sxs-lookup"><span data-stu-id="ed3cf-121">Renewal with new key</span></span>     | <span data-ttu-id="ed3cf-122">1</span><span class="sxs-lookup"><span data-stu-id="ed3cf-122">1</span></span>                    | <span data-ttu-id="ed3cf-123">"(1)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-123">"(1)"</span></span>                           | <span data-ttu-id="ed3cf-124">1</span><span class="sxs-lookup"><span data-stu-id="ed3cf-124">1</span></span>                 | <span data-ttu-id="ed3cf-125">"(1)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-125">"(1)"</span></span>                             |
| <span data-ttu-id="ed3cf-126">Renovación de la clave de reutilización</span><span class="sxs-lookup"><span data-stu-id="ed3cf-126">Renewal reusing key</span></span>      | <span data-ttu-id="ed3cf-127">2</span><span class="sxs-lookup"><span data-stu-id="ed3cf-127">2</span></span>                    | <span data-ttu-id="ed3cf-128">"(2)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-128">"(2)"</span></span>                           | <span data-ttu-id="ed3cf-129">1</span><span class="sxs-lookup"><span data-stu-id="ed3cf-129">1</span></span>                 | <span data-ttu-id="ed3cf-130">"(1)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-130">"(1)"</span></span>                             |
| <span data-ttu-id="ed3cf-131">Renovación de la clave de reutilización</span><span class="sxs-lookup"><span data-stu-id="ed3cf-131">Renewal reusing key</span></span>      | <span data-ttu-id="ed3cf-132">3</span><span class="sxs-lookup"><span data-stu-id="ed3cf-132">3</span></span>                    | <span data-ttu-id="ed3cf-133">"(3)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-133">"(3)"</span></span>                           | <span data-ttu-id="ed3cf-134">1</span><span class="sxs-lookup"><span data-stu-id="ed3cf-134">1</span></span>                 | <span data-ttu-id="ed3cf-135">"(1)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-135">"(1)"</span></span>                             |
| <span data-ttu-id="ed3cf-136">Renovación con clave nueva</span><span class="sxs-lookup"><span data-stu-id="ed3cf-136">Renewal with new key</span></span>     | <span data-ttu-id="ed3cf-137">4</span><span class="sxs-lookup"><span data-stu-id="ed3cf-137">4</span></span>                    | <span data-ttu-id="ed3cf-138">"(4)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-138">"(4)"</span></span>                           | <span data-ttu-id="ed3cf-139">4</span><span class="sxs-lookup"><span data-stu-id="ed3cf-139">4</span></span>                 | <span data-ttu-id="ed3cf-140">"(4)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-140">"(4)"</span></span>                             |
| <span data-ttu-id="ed3cf-141">Renovación de la clave de reutilización</span><span class="sxs-lookup"><span data-stu-id="ed3cf-141">Renewal reusing key</span></span>      | <span data-ttu-id="ed3cf-142">5</span><span class="sxs-lookup"><span data-stu-id="ed3cf-142">5</span></span>                    | <span data-ttu-id="ed3cf-143">"(5)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-143">"(5)"</span></span>                           | <span data-ttu-id="ed3cf-144">4</span><span class="sxs-lookup"><span data-stu-id="ed3cf-144">4</span></span>                 | <span data-ttu-id="ed3cf-145">"(4)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-145">"(4)"</span></span>                             |
| <span data-ttu-id="ed3cf-146">Renovación con clave nueva</span><span class="sxs-lookup"><span data-stu-id="ed3cf-146">Renewal with new key</span></span>     | <span data-ttu-id="ed3cf-147">6</span><span class="sxs-lookup"><span data-stu-id="ed3cf-147">6</span></span>                    | <span data-ttu-id="ed3cf-148">"(6)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-148">"(6)"</span></span>                           | <span data-ttu-id="ed3cf-149">6</span><span class="sxs-lookup"><span data-stu-id="ed3cf-149">6</span></span>                 | <span data-ttu-id="ed3cf-150">"(6)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-150">"(6)"</span></span>                             |
| <span data-ttu-id="ed3cf-151">Renovación de la clave de reutilización</span><span class="sxs-lookup"><span data-stu-id="ed3cf-151">Renewal reusing key</span></span>      | <span data-ttu-id="ed3cf-152">7</span><span class="sxs-lookup"><span data-stu-id="ed3cf-152">7</span></span>                    | <span data-ttu-id="ed3cf-153">"(7)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-153">"(7)"</span></span>                           | <span data-ttu-id="ed3cf-154">6</span><span class="sxs-lookup"><span data-stu-id="ed3cf-154">6</span></span>                 | <span data-ttu-id="ed3cf-155">"(6)"</span><span class="sxs-lookup"><span data-stu-id="ed3cf-155">"(6)"</span></span>                             |



 

<span data-ttu-id="ed3cf-156">Cuando se instala una CA, el índice de certificado es cero y el sufijo del certificado es "" (una cadena vacía).</span><span class="sxs-lookup"><span data-stu-id="ed3cf-156">When a CA is installed, the certificate index is zero and the certificate suffix is "" (an empty string).</span></span> <span data-ttu-id="ed3cf-157">Cada vez que se renueva el certificado (tanto si se reutilizan las claves como si no), el índice del certificado se incrementa en uno, y el sufijo del nombre del archivo del certificado se convierte en una cadena con el formato "(*n*)", donde *n* representa el número de veces que se ha renovado el certificado de la entidad de certificación.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-157">Each time the certificate is renewed (whether or not keys are reused), the certificate index is incremented by one, and the certificate file name suffix becomes a string of the form "(*n*)", where *n* represents the number of times the CA certificate has been renewed.</span></span> <span data-ttu-id="ed3cf-158">Después de la primera renovación, el índice del certificado es 1 y el sufijo del nombre del archivo del certificado es "(1)".</span><span class="sxs-lookup"><span data-stu-id="ed3cf-158">After the first renewal, the certificate index is 1 and the certificate file name suffix is "(1)".</span></span> <span data-ttu-id="ed3cf-159">Después de la segunda renovación, el índice del certificado es 2 y el sufijo del nombre del archivo del certificado es "(2)", y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-159">After the second renewal, the certificate index is 2 and the certificate file name suffix is "(2)", and so on.</span></span>

<span data-ttu-id="ed3cf-160">Aunque el índice y el sufijo del certificado de entidad de certificación se incrementan en uno cada vez que se renueva la CA, los índices de clave y de CRL y los sufijos de nombre de archivo se establecen en el índice de certificado de CA solo si el proceso de renovación incluye un nuevo par de claves pública y privada.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-160">Although the CA certificate index and suffix are incremented by one each time the CA is renewed, the CRL and key indexes and the file name suffixes are set to the CA certificate index only if the renewal process includes a new public/private key pair.</span></span> <span data-ttu-id="ed3cf-161">Si no es así, los valores de estos índices y sufijos siguen siendo los mismos que para el último índice.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-161">If it does not, the values of these indexes and suffixes remain the same as they were for the last index.</span></span> <span data-ttu-id="ed3cf-162">Durante la renovación, un administrador especifica si se genera un nuevo par de claves o si se usa el par de claves existente.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-162">During renewal, an administrator specifies whether a new key pair is generated or the existing key pair is used.</span></span> <span data-ttu-id="ed3cf-163">(En el complemento MMC de la entidad de certificación, una opción de la interfaz de usuario especifica un par de claves nuevo o existente; en la herramienta Certutil.exe, el comando **certutil-renewCert** renueva la CA con un nuevo par de claves, mientras que el comando **certutil-renewCert ReuseKeys** renueva la CA con el par de claves existente).</span><span class="sxs-lookup"><span data-stu-id="ed3cf-163">(In the Certificate Authority MMC snap-in, an option in the user interface specifies a new or an existing key pair; in the Certutil.exe tool, the command **certutil -renewCert** renews the CA with a new key pair, while the command **certutil -renewCert ReuseKeys** renews the CA with the existing key pair.)</span></span>

<span data-ttu-id="ed3cf-164">El índice de CRL está directamente vinculado al índice de clave, que se establece en el índice de certificado de CA solo cuando se usa un nuevo par de claves para la renovación.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-164">The CRL index is directly tied to the key index, which is set to the CA certificate index only when a new key pair is used for the renewal.</span></span> <span data-ttu-id="ed3cf-165">Después de la primera renovación (que usaba un nuevo par de claves), el índice de la CRL y la clave se establece en 1, y el sufijo de la CRL y el nombre del contenedor de claves es "(1)".</span><span class="sxs-lookup"><span data-stu-id="ed3cf-165">After the first renewal (which used a new key pair), the index of the CRL and key is set to 1, and the CRL and key container name suffix is "(1)".</span></span> <span data-ttu-id="ed3cf-166">Sin embargo, después de la segunda renovación, el índice de la CRL y la clave sigue siendo 1, y la CRL y el sufijo del nombre del contenedor de claves también permanecen "(1)"; Esto se debe a que la segunda renovación usó el par de claves existente y solo se emite una CRL para cada par de claves de CA.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-166">After the second renewal, however, the index of the CRL and key remains 1, and the CRL and key container name suffix also remains "(1)"; this is because the second renewal used the existing key pair and only one CRL is issued for each CA key pair.</span></span>

<span data-ttu-id="ed3cf-167">Puede recuperar los certificados y las CRL de CA indexados llamando al método **GetCertificateProperty** (en las interfaces [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) y [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) ).</span><span class="sxs-lookup"><span data-stu-id="ed3cf-167">You can retrieve the indexed CA certificates and CRLs by calling the **GetCertificateProperty** method (in both the [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) and [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) interfaces).</span></span> <span data-ttu-id="ed3cf-168">Al recuperar ciertas propiedades relacionadas con el certificado o la CRL de la entidad de certificación, puede anexar el índice basado en cero del certificado de la entidad de certificación a los nombres de propiedad.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-168">When you retrieve certain properties related to the CA certificate or CRL, you can append the CA certificate's zero-based index to the property names.</span></span> <span data-ttu-id="ed3cf-169">Por ejemplo, para recuperar el índice de CRL que corresponde al tercer certificado de la entidad de certificación, pase la propiedad "CRLIndex. 2" a [**ICertServerPolicy:: GetCertificateProperty**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty); en el caso de la tabla, el valor de la propiedad "CRLIndex. 2" recuperada sería 1.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-169">For example, to retrieve the CRL index that corresponds to the CA's third certificate, pass the property "CRLIndex.2" to [**ICertServerPolicy::GetCertificateProperty**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty); for the table, the retrieved "CRLIndex.2" property value would be 1.</span></span> <span data-ttu-id="ed3cf-170">Se puede usar una propiedad denominada "CertCount" para determinar el número de veces que se ha emitido un certificado de CA a la entidad de certificación.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-170">A property called "CertCount" can be used to determine the number of times the CA has been issued a CA certificate.</span></span>

<span data-ttu-id="ed3cf-171">Los certificados y las CRL de CA contienen una extensión que proporciona información sobre el certificado y el índice de claves.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-171">CA certificates and CRLs contain an extension that provides information about the certificate and key index.</span></span> <span data-ttu-id="ed3cf-172">La extensión se define en Wincrypt. h como \_ \_ versión de la entidad de certificación szOID CERTSRV \_ con un valor de "1.3.6.1.4.1.311.21.1".</span><span class="sxs-lookup"><span data-stu-id="ed3cf-172">The extension is defined in Wincrypt.h as szOID\_CERTSRV\_CA\_VERSION with a value of "1.3.6.1.4.1.311.21.1".</span></span> <span data-ttu-id="ed3cf-173">Los datos de la extensión son un valor **DWORD** (codificado como \_ entero X509 en la extensión); los 16 bits inferiores son el índice de certificado y los 16 bits superiores son el índice de clave.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-173">The extension data is a **DWORD** value (encoded as X509\_INTEGER in the extension); the low 16 bits are the certificate index, and the high 16 bits are the key index.</span></span>

<span data-ttu-id="ed3cf-174">La instalación inicial de una CA genera un índice de certificado de cero y un índice de clave de cero.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-174">The initial installation of a CA produces a certificate index of zero and a key index of zero.</span></span> <span data-ttu-id="ed3cf-175">La renovación de un certificado de entidad de certificación hará que se incremente el índice de certificado.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-175">Renewal of a CA certificate will cause the certificate index to be incremented.</span></span> <span data-ttu-id="ed3cf-176">Si la clave se reutiliza en la renovación, el índice de clave será el mismo que el índice de clave anterior.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-176">If the key is reused in the renewal, the key index will be the same as the previous key index.</span></span> <span data-ttu-id="ed3cf-177">Si no se reutiliza la clave, el índice de clave coincidirá con el nuevo índice de certificado.</span><span class="sxs-lookup"><span data-stu-id="ed3cf-177">If the key is not reused, the key index will match the new certificate index.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ed3cf-178">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="ed3cf-178">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ed3cf-179">**ICertServerPolicy::GetCertificateProperty**</span><span class="sxs-lookup"><span data-stu-id="ed3cf-179">**ICertServerPolicy::GetCertificateProperty**</span></span>](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-getcertificateproperty)
</dt> <dt>

[<span data-ttu-id="ed3cf-180">**ICertServerExit::GetCertificateProperty**</span><span class="sxs-lookup"><span data-stu-id="ed3cf-180">**ICertServerExit::GetCertificateProperty**</span></span>](/windows/desktop/api/Certif/nf-certif-icertserverexit-getcertificateproperty)
</dt> </dl>

 

 
