---
title: Usar Netsh para administrar seguimientos
description: En Windows 7, se puede usar netsh.exe desde un símbolo del sistema para habilitar y configurar los seguimientos de red. En esta sección se describen algunos de los comandos de netsh.exe que pueden ayudar en la solución de problemas de seguimiento, incluida la nueva funcionalidad de seguimiento de Netsh.
ms.assetid: f0f0fc7b-7cfa-43c7-89a3-3b80050875f8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1978345da984ac90699b5355b36af18b9b285d5c
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "104418771"
---
# <a name="using-netsh-to-manage-traces"></a><span data-ttu-id="93796-104">Usar Netsh para administrar seguimientos</span><span class="sxs-lookup"><span data-stu-id="93796-104">Using Netsh to Manage Traces</span></span>

<span data-ttu-id="93796-105">En Windows 7, se puede usar netsh.exe desde un símbolo del sistema para habilitar y configurar los seguimientos de red.</span><span class="sxs-lookup"><span data-stu-id="93796-105">In Windows 7, netsh.exe can be used from a command prompt to enable and configure network traces.</span></span> <span data-ttu-id="93796-106">En esta sección se describen algunos de los comandos de netsh.exe que pueden ayudar en la solución de problemas de seguimiento, incluida la nueva funcionalidad de **seguimiento de Netsh** .</span><span class="sxs-lookup"><span data-stu-id="93796-106">This section describes some of the netsh.exe commands which can help in troubleshooting tracing issues, including the new **netsh trace** functionality.</span></span> <span data-ttu-id="93796-107">Tenga en cuenta que los comandos Netsh deben ejecutarse desde un símbolo del sistema con privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="93796-107">Note that the netsh commands must be run from an elevated command prompt.</span></span>

## <a name="collecting-traces"></a><span data-ttu-id="93796-108">Recopilar seguimientos</span><span class="sxs-lookup"><span data-stu-id="93796-108">Collecting traces</span></span>

<span data-ttu-id="93796-109">Los escenarios son conjuntos predefinidos de proveedores de seguimiento que se pueden habilitar para solucionar problemas.</span><span class="sxs-lookup"><span data-stu-id="93796-109">Scenarios are predefined sets of trace providers which can be enabled for troubleshooting.</span></span> <span data-ttu-id="93796-110">Para ver la lista de escenarios relacionados con la red disponibles, escriba **netsh Trace show Scenarios** (**netsh Trace show Providers** lists cada uno de los proveedores disponibles, incluidos los que no son relevantes para las redes).</span><span class="sxs-lookup"><span data-stu-id="93796-110">To display the list of available network-related scenarios, type **netsh trace show scenarios** (**netsh trace show providers** lists every one of the available providers, including ones that are not relevant to networking).</span></span>

<span data-ttu-id="93796-111">Cuando haya identificado un escenario que tenga un aspecto relevante para los problemas, puede ver una lista de todos los proveedores incluidos en ese escenario.</span><span class="sxs-lookup"><span data-stu-id="93796-111">When you have identified a scenario that looks relevant to your issues, you can see a list of all of the providers included in that scenario.</span></span> <span data-ttu-id="93796-112">Por ejemplo, para ver todos los proveedores habilitados en el escenario InternetClient, escriba **netsh Trace show Scenario InternetClient**.</span><span class="sxs-lookup"><span data-stu-id="93796-112">For example, to see all of the providers enabled under the InternetClient scenario, type **netsh trace show scenario internetclient**.</span></span>

<span data-ttu-id="93796-113">Puede iniciar un seguimiento para todos los proveedores en un escenario o un conjunto de escenarios determinados.</span><span class="sxs-lookup"><span data-stu-id="93796-113">You can start a trace for all of the providers in a given scenario or set of scenarios.</span></span> <span data-ttu-id="93796-114">Por ejemplo, para iniciar un seguimiento de todos los proveedores habilitados en el escenario InternetClient, escriba **netsh Trace Start Scenario = InternetClient**.</span><span class="sxs-lookup"><span data-stu-id="93796-114">For example, to start a trace for all of the providers enabled under the InternetClient scenario, type **netsh trace start scenario=internetclient**.</span></span> <span data-ttu-id="93796-115">Para capturar proveedores para más de un escenario, puede especificar todos los escenarios adecuados, como **netsh Trace Start Scenario = FileSharing Scenario = DirectAccess**.</span><span class="sxs-lookup"><span data-stu-id="93796-115">To capture providers for more than one scenario, you can specify all of the appropriate scenarios, such as **netsh trace start scenario=FileSharing scenario=DirectAccess**.</span></span> <span data-ttu-id="93796-116">Tenga en cuenta que solo se puede habilitar una sesión de seguimiento a la vez; no es posible capturar simultáneamente la información de seguimiento de distintos conjuntos de proveedores en archivos independientes.</span><span class="sxs-lookup"><span data-stu-id="93796-116">Note that only one tracing session may be enabled at a time; it is not possible to simultaneously capture trace information from different sets of providers in separate files.</span></span>

<span data-ttu-id="93796-117">También puede iniciar un seguimiento para proveedores adicionales no incluidos en ese escenario en particular.</span><span class="sxs-lookup"><span data-stu-id="93796-117">You can also start a trace for additional providers not included in that particular scenario.</span></span> <span data-ttu-id="93796-118">Por ejemplo, puede que desee iniciar seguimientos de todos los proveedores habilitados bajo el escenario WLAN y también el proveedor DHCP.</span><span class="sxs-lookup"><span data-stu-id="93796-118">For example, you might want to start traces for all of the providers enabled under the WLAN scenario and also the DHCP provider.</span></span> <span data-ttu-id="93796-119">Para ello, escriba **netsh Trace Start Scenario = WLAN Provider = Microsoft-Windows-DHCP-Client**.</span><span class="sxs-lookup"><span data-stu-id="93796-119">To do this, type **netsh trace start scenario=wlan provider=Microsoft-Windows-Dhcp-Client**.</span></span>

<span data-ttu-id="93796-120">También puede ver más detalles sobre un proveedor específico escribiendo **netsh Trace show Provider** seguido del nombre del proveedor.</span><span class="sxs-lookup"><span data-stu-id="93796-120">You can also see more details about a specific provider by typing **netsh trace show provider** followed by the provider name.</span></span>

<span data-ttu-id="93796-121">Para ver todas las opciones y filtros disponibles, puede escribir **netsh Trace Start/?**.</span><span class="sxs-lookup"><span data-stu-id="93796-121">To see all of the options and filters available you can type **netsh trace start /?**.</span></span>

<span data-ttu-id="93796-122">Para detener el seguimiento, escriba **netsh Trace STOP**.</span><span class="sxs-lookup"><span data-stu-id="93796-122">To stop tracing, type **netsh trace stop**.</span></span>

## <a name="using-the-output-files"></a><span data-ttu-id="93796-123">Usar los archivos de salida</span><span class="sxs-lookup"><span data-stu-id="93796-123">Using the output files</span></span>

<span data-ttu-id="93796-124">Cuando se detiene el seguimiento, se generan dos archivos de forma predeterminada: un archivo de registro de seguimiento de eventos (ETL) y un archivo. cab.</span><span class="sxs-lookup"><span data-stu-id="93796-124">When tracing is stopped, two files are generated by default: an Event Trace Log (ETL) file and a .cab file.</span></span>

<span data-ttu-id="93796-125">Los eventos de seguimiento se recopilan en el archivo ETL, que se puede ver mediante herramientas como Monitor de red.</span><span class="sxs-lookup"><span data-stu-id="93796-125">Trace events are collected in the ETL file, which can be viewed using tools such as Network Monitor.</span></span> <span data-ttu-id="93796-126">El archivo ETL se denominará archivo NetTrace. ETL de forma predeterminada, o puede especificar otro nombre incluyendo el valor de seguimiento **= nombrearchivo. ETL** al iniciar el seguimiento.</span><span class="sxs-lookup"><span data-stu-id="93796-126">The ETL file will be named nettrace.etl by default, or you can specify a different name by including **tracefile=filename.etl** when starting the trace.</span></span>

<span data-ttu-id="93796-127">El archivo. cab contiene información enriquecida sobre el software y el hardware del sistema, como la información del adaptador, la compilación, el sistema operativo y la configuración inalámbrica.</span><span class="sxs-lookup"><span data-stu-id="93796-127">The .cab file contains rich information about the software and hardware on the system such as the adapter information, build, operating system, and wireless settings.</span></span> <span data-ttu-id="93796-128">El archivo. cab se denominará nettrace.cab de forma predeterminada, a menos que se especifique otro nombre, como se indicó anteriormente.</span><span class="sxs-lookup"><span data-stu-id="93796-128">The .cab file will be named nettrace.cab by default, unless another name was specified as indicated above.</span></span>

<span data-ttu-id="93796-129">Este archivo. cab contendrá dos archivos, que siempre tendrán el mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="93796-129">This .cab file will contain two files, which will always have the same name.</span></span> <span data-ttu-id="93796-130">Report. ETL es otra copia de la misma información incluida en archivo NetTrace. ETL.</span><span class="sxs-lookup"><span data-stu-id="93796-130">Report.etl is another copy of the same information included in nettrace.etl.</span></span> <span data-ttu-id="93796-131">El archivo report.html incluye información adicional sobre los eventos de seguimiento y la otra información recopilada.</span><span class="sxs-lookup"><span data-stu-id="93796-131">The report.html file includes additional information about the trace events and the other information collected.</span></span> <span data-ttu-id="93796-132">Para obtener la mayoría de los detalles disponibles, incluya el comando **Report = Yes** al iniciar un seguimiento.</span><span class="sxs-lookup"><span data-stu-id="93796-132">To receive the most details available, include the command **report = yes** when starting a trace.</span></span>

## <a name="using-filters-to-reduce-the-amount-of-data-in-the-etl-trace-file"></a><span data-ttu-id="93796-133">Usar filtros para reducir la cantidad de datos en el archivo de seguimiento ETL</span><span class="sxs-lookup"><span data-stu-id="93796-133">Using filters to reduce the amount of data in the ETL trace file</span></span>

<span data-ttu-id="93796-134">Cuando se producen capturas durante un largo período de tiempo, el archivo de seguimiento ETL puede llegar a ser muy grande.</span><span class="sxs-lookup"><span data-stu-id="93796-134">When captures happen over a long period of time, the ETL trace file can become very large.</span></span> <span data-ttu-id="93796-135">En escenarios en los que varios proveedores están habilitados, lo que da lugar a un tráfico elevado, las restricciones de búfer de ETW pueden hacer que se quiten algunos seguimientos.</span><span class="sxs-lookup"><span data-stu-id="93796-135">In scenarios where multiple providers are enabled, resulting in high traffic, ETW buffer constraints may cause some traces to be dropped.</span></span> <span data-ttu-id="93796-136">Aparte de esta consideración, reducir la cantidad de datos en el archivo de seguimiento ETL puede ayudar a facilitar la solución de problemas reduciendo la cantidad de datos que se van a revisar.</span><span class="sxs-lookup"><span data-stu-id="93796-136">Aside from this consideration, reducing the amount of data in the ETL trace file can help make troubleshooting easier by reducing the amount of data to review.</span></span>

<span data-ttu-id="93796-137">Los filtros de seguimiento de Netsh se pueden usar para reducir el tamaño del archivo de seguimiento ETL.</span><span class="sxs-lookup"><span data-stu-id="93796-137">Netsh trace filters can be used to reduce the ETL trace file size.</span></span> <span data-ttu-id="93796-138">Estos filtros de seguimiento son niveles ETW y palabras clave que se pueden aplicar a proveedores individuales.</span><span class="sxs-lookup"><span data-stu-id="93796-138">These trace filters are ETW levels and keywords that can be applied to individual providers.</span></span>

<span data-ttu-id="93796-139">Para ver una lista de filtros que se pueden aplicar, escriba **netsh Trace Start/?**</span><span class="sxs-lookup"><span data-stu-id="93796-139">To see a list of filters which can be applied, type **netsh trace start /?**</span></span>

<span data-ttu-id="93796-140">Un ejemplo de filtro es **netsh Trace Start InternetClient Provider = Microsoft-Windows-TCPIP LEVEL = 5 Keywords = UT: ReceivePath, UT: SendPath**.</span><span class="sxs-lookup"><span data-stu-id="93796-140">An example of a filter is **netsh trace start InternetClient provider=Microsoft-Windows-TCPIP level=5 keywords=ut:ReceivePath,ut:SendPath**.</span></span>

<span data-ttu-id="93796-141">En este ejemplo, el nivel se establece en 5, lo que significa que se mostrará el número máximo de eventos.</span><span class="sxs-lookup"><span data-stu-id="93796-141">In this example, the level is set to 5, which means that the maximum number of events will be shown.</span></span> <span data-ttu-id="93796-142">En la tabla siguiente se muestra la configuración disponible:</span><span class="sxs-lookup"><span data-stu-id="93796-142">The following table shows the settings available:</span></span>



|       |               |                                                                            |
|-------|---------------|----------------------------------------------------------------------------|
| <span data-ttu-id="93796-143">Nivel</span><span class="sxs-lookup"><span data-stu-id="93796-143">Level</span></span> | <span data-ttu-id="93796-144">Configuración</span><span class="sxs-lookup"><span data-stu-id="93796-144">Setting</span></span>       | <span data-ttu-id="93796-145">Descripción</span><span class="sxs-lookup"><span data-stu-id="93796-145">Description</span></span>                                                                |
| <span data-ttu-id="93796-146">1</span><span class="sxs-lookup"><span data-stu-id="93796-146">1</span></span>     | <span data-ttu-id="93796-147">Crítico</span><span class="sxs-lookup"><span data-stu-id="93796-147">Critical</span></span>      | <span data-ttu-id="93796-148">Solo se mostrarán los eventos críticos.</span><span class="sxs-lookup"><span data-stu-id="93796-148">Only critical events will be shown.</span></span>                                        |
| <span data-ttu-id="93796-149">2</span><span class="sxs-lookup"><span data-stu-id="93796-149">2</span></span>     | <span data-ttu-id="93796-150">Errors</span><span class="sxs-lookup"><span data-stu-id="93796-150">Errors</span></span>        | <span data-ttu-id="93796-151">Se mostrarán los eventos y los errores críticos.</span><span class="sxs-lookup"><span data-stu-id="93796-151">Critical events and errors will be shown.</span></span>                                  |
| <span data-ttu-id="93796-152">3</span><span class="sxs-lookup"><span data-stu-id="93796-152">3</span></span>     | <span data-ttu-id="93796-153">Advertencias</span><span class="sxs-lookup"><span data-stu-id="93796-153">Warnings</span></span>      | <span data-ttu-id="93796-154">Se mostrarán los eventos críticos, los errores y las advertencias.</span><span class="sxs-lookup"><span data-stu-id="93796-154">Critical events, errors, and warnings will be shown.</span></span>                       |
| <span data-ttu-id="93796-155">4</span><span class="sxs-lookup"><span data-stu-id="93796-155">4</span></span>     | <span data-ttu-id="93796-156">Informativo</span><span class="sxs-lookup"><span data-stu-id="93796-156">Informational</span></span> | <span data-ttu-id="93796-157">Se mostrarán los eventos críticos, los errores, las advertencias y los eventos informativos.</span><span class="sxs-lookup"><span data-stu-id="93796-157">Critical events, errors, warnings, and informational events will be shown.</span></span> |
| <span data-ttu-id="93796-158">5</span><span class="sxs-lookup"><span data-stu-id="93796-158">5</span></span>     | <span data-ttu-id="93796-159">Verbose</span><span class="sxs-lookup"><span data-stu-id="93796-159">Verbose</span></span>       | <span data-ttu-id="93796-160">Se mostrarán todos los eventos.</span><span class="sxs-lookup"><span data-stu-id="93796-160">All events will be shown.</span></span>                                                  |



 

<span data-ttu-id="93796-161">Las palabras clave **UT: ReceivePath** y **UT: SentPath** filtran los eventos para mostrar solo los eventos de los que se realiza el seguimiento en la ruta de acceso de recepción o de envío.</span><span class="sxs-lookup"><span data-stu-id="93796-161">The keywords **ut:ReceivePath** and **ut:SentPath** filters the events to show only those events traced on the receive or send path.</span></span> <span data-ttu-id="93796-162">Para encontrar una lista completa de las palabras clave de un proveedor específico, escriba **netsh Trace show Provider** seguido del nombre del proveedor.</span><span class="sxs-lookup"><span data-stu-id="93796-162">A complete list of keywords for a specific provider can be found by typing **netsh trace show provider** followed by the provider name.</span></span> <span data-ttu-id="93796-163">Por ejemplo, si escribe **netsh Trace show Provider Microsoft-Windows-TCPIP** , se mostrará información sobre el proveedor Microsoft-Windows-TCPIP, incluida una lista de palabras clave.</span><span class="sxs-lookup"><span data-stu-id="93796-163">For example, typing **netsh trace show provider Microsoft-Windows-TCPIP** will display information about the Microsoft-Windows-TCPIP provider, including a list of keywords.</span></span>

<span data-ttu-id="93796-164">Netsh también admite la capacidad de filtrado de paquetes (similar a Monitor de red) cuando se activa la captura de paquetes (mediante la configuración de **Capture = Yes**).</span><span class="sxs-lookup"><span data-stu-id="93796-164">Netsh also supports packet filtering capability (similar to Network Monitor) when packet capturing is turned on (by setting **capture = yes**).</span></span> <span data-ttu-id="93796-165">El filtrado de paquetes se puede usar para capturar un número limitado de paquetes en un archivo de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="93796-165">Packet filtering can be used to capture a limited number of packets in a trace file.</span></span> <span data-ttu-id="93796-166">Por ejemplo, **netsh Trace Start Capture = Yes IPv4. Address = = x.x.** x. x. x, donde x. x es la dirección IP, solo capturará los paquetes con tráfico IPv4 con esa dirección de origen o destino específica.</span><span class="sxs-lookup"><span data-stu-id="93796-166">For example, **netsh trace start capture = yes ipv4.address == x.x.x.x** , where x.x.x.x is the IP address, will only capture packets with ipv4 traffic with that specific source or destination address.</span></span>

<span data-ttu-id="93796-167">Para obtener información adicional sobre cómo usar el filtrado de paquetes, puede escribir **netsh Trace show capturefilterHelp**.</span><span class="sxs-lookup"><span data-stu-id="93796-167">For additional information about how to use packet filtering, you can type **netsh trace show capturefilterHelp**.</span></span>

 

 




