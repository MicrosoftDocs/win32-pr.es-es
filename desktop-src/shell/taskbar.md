---
description: La interfaz de Windows incluye una barra de herramientas especial del escritorio de la aplicación denominada barra de tareas. Puede usar la barra de tareas para tareas como cambiar entre ventanas abiertas e iniciar nuevas aplicaciones.
ms.assetid: 14d520e7-7c15-441d-9662-24b972d208ac
title: La barra de tareas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cce37991c6265f02ab92ece62dbae341031d272a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104997852"
---
# <a name="the-taskbar"></a><span data-ttu-id="0a4b9-104">La barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-104">The Taskbar</span></span>

<span data-ttu-id="0a4b9-105">La interfaz de Windows incluye una [barra de herramientas](application-desktop-toolbars.md) especial del escritorio de la aplicación denominada *barra de tareas*.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-105">The Windows interface includes a special [application desktop toolbar](application-desktop-toolbars.md) called the *taskbar*.</span></span> <span data-ttu-id="0a4b9-106">Puede usar la barra de tareas para tareas como cambiar entre ventanas abiertas e iniciar nuevas aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-106">You can use the taskbar for such tasks as switching between open windows and starting new applications.</span></span>

> [!Note]  
> <span data-ttu-id="0a4b9-107">Para obtener información sobre los cambios realizados en la barra de tareas a partir de Windows 7, vea extensiones de la [barra de tareas](taskbar-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-107">For information on changes made to the taskbar as of Windows 7, see [Taskbar Extensions](taskbar-extensions.md).</span></span>

 

<span data-ttu-id="0a4b9-108">En este tema se incluyen las siguientes secciones.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-108">This topic contains the following sections.</span></span>

-   [<span data-ttu-id="0a4b9-109">Acerca de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-109">About the Taskbar</span></span>](#about-the-taskbar)
    -   [<span data-ttu-id="0a4b9-110">Opciones de presentación de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-110">Taskbar Display Options</span></span>](#taskbar-display-options)
    -   [<span data-ttu-id="0a4b9-111">Agregar accesos directos al menú Inicio</span><span class="sxs-lookup"><span data-stu-id="0a4b9-111">Adding Shortcuts to the Start Menu</span></span>](#adding-shortcuts-to-the-start-menu)
    -   [<span data-ttu-id="0a4b9-112">Administrar botones de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-112">Managing Taskbar Buttons</span></span>](#managing-taskbar-buttons)
    -   [<span data-ttu-id="0a4b9-113">Agregar, modificar y eliminar iconos en el área de notificación</span><span class="sxs-lookup"><span data-stu-id="0a4b9-113">Adding, Modifying, and Deleting Icons in the Notification Area</span></span>](#adding-modifying-and-deleting-icons-in-the-notification-area)
    -   [<span data-ttu-id="0a4b9-114">Notificación de creación de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-114">Taskbar Creation Notification</span></span>](#taskbar-creation-notification)
-   [<span data-ttu-id="0a4b9-115">Uso de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-115">Using the Taskbar</span></span>](#using-the-taskbar)
    -   [<span data-ttu-id="0a4b9-116">Agregar y eliminar iconos de la barra de tareas en el área de notificación</span><span class="sxs-lookup"><span data-stu-id="0a4b9-116">Adding and Deleting Taskbar Icons in the Notification Area</span></span>](#adding-and-deleting-taskbar-icons-in-the-notification-area)
    -   [<span data-ttu-id="0a4b9-117">Recibir eventos del mouse</span><span class="sxs-lookup"><span data-stu-id="0a4b9-117">Receiving Mouse Events</span></span>](#receiving-mouse-events)

## <a name="about-the-taskbar"></a><span data-ttu-id="0a4b9-118">Acerca de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-118">About the Taskbar</span></span>

<span data-ttu-id="0a4b9-119">La barra de tareas incluye lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="0a4b9-119">The taskbar includes the following:</span></span>

-   <span data-ttu-id="0a4b9-120">Menú **Inicio**</span><span class="sxs-lookup"><span data-stu-id="0a4b9-120">**Start** menu</span></span>
-   <span data-ttu-id="0a4b9-121">Barra de inicio rápido (solo Windows Vista y versiones anteriores)</span><span class="sxs-lookup"><span data-stu-id="0a4b9-121">Quick Launch bar (Windows Vista and earlier only)</span></span>
-   <span data-ttu-id="0a4b9-122">Botones de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-122">Taskbar buttons</span></span>
-   <span data-ttu-id="0a4b9-123">Barras de herramientas (opcional)</span><span class="sxs-lookup"><span data-stu-id="0a4b9-123">Toolbars (optional)</span></span>
-   <span data-ttu-id="0a4b9-124">Área de notificaciones</span><span class="sxs-lookup"><span data-stu-id="0a4b9-124">Notification area</span></span>

<span data-ttu-id="0a4b9-125">El menú **Inicio** contiene comandos que pueden tener acceso a programas, documentos y configuraciones.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-125">The **Start** menu contains commands that can access programs, documents, and settings.</span></span> <span data-ttu-id="0a4b9-126">Estos comandos incluyen **todos los programas**, **documentos**, **Panel de control**, **juegos**, **ayuda y soporte técnico**, **apagar** y **Buscar programas y archivos**.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-126">These commands include **All Programs**, **Documents**, **Control Panel**, **Games**, **Help and Support**, **Shut down**, and **Search programs and files**.</span></span>

<span data-ttu-id="0a4b9-127">El **Inicio** en versiones anteriores de Windows contenía elementos como **Buscar** y **Ejecutar**, la funcionalidad de que se incluía en **Buscar programas y archivos** en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-127">The **Start** in earlier versions of Windows contained items such as **Find** and **Run**, the functionality of which was included in **Search programs and files** in Windows Vista and later.</span></span>

<span data-ttu-id="0a4b9-128">La barra de inicio rápido, disponible en versiones de Windows anteriores a Windows 7, contiene accesos directos a las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-128">The Quick Launch bar, available in versions of Windows earlier than Windows 7, contains shortcuts to applications.</span></span> <span data-ttu-id="0a4b9-129">Windows proporciona entradas predeterminadas, como Windows Internet Explorer, y el usuario puede agregar más accesos directos que elijan.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-129">Windows provides default entries, such as Windows Internet Explorer, and the user can add any further shortcuts that they choose.</span></span> <span data-ttu-id="0a4b9-130">Los iconos de esta área responden a un solo clic.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-130">Icons in this area respond to a single click.</span></span> <span data-ttu-id="0a4b9-131">En Windows 7 y versiones posteriores, esta funcionalidad se incluye en los botones de la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-131">In Windows 7 and later, this functionality is included in the taskbar buttons.</span></span>

<span data-ttu-id="0a4b9-132">El shell coloca un botón en la barra de tareas cada vez que una aplicación crea una ventana sin propiedad, es decir, una ventana que no tiene un elemento primario y que tiene los bits de estilo extendido adecuados (consulte Administración de los botones de la [barra de tareas](#managing-taskbar-buttons), más abajo).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-132">The Shell places a button on the taskbar whenever an application creates an unowned window—that is, a window that does not have a parent and that has the appropriate extended style bits (see [Managing Taskbar Buttons](#managing-taskbar-buttons), below).</span></span> <span data-ttu-id="0a4b9-133">Para cambiar a una ventana, el usuario hace clic en su botón de ventana.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-133">To switch to a window, the user clicks its window button.</span></span> <span data-ttu-id="0a4b9-134">Esta funcionalidad se ha expandido en gran medida a partir de Windows 7.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-134">This functionality has been greatly expanded as of Windows 7.</span></span> <span data-ttu-id="0a4b9-135">Para obtener más información, vea extensiones de la [barra de tareas](taskbar-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-135">For more information, see [Taskbar Extensions](taskbar-extensions.md).</span></span>

<span data-ttu-id="0a4b9-136">Las aplicaciones pueden colocar iconos en el área de notificación para indicar el estado de una operación o para notificar al usuario sobre un evento.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-136">Applications can put icons in the notification area to indicate the status of an operation or to notify the user about an event.</span></span> <span data-ttu-id="0a4b9-137">Por ejemplo, una aplicación podría colocar un icono de impresora en el área de notificación para mostrar que un trabajo de impresión está en funcionamiento.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-137">For example, an application might put a printer icon in the notification area to show that a print job is under way.</span></span> <span data-ttu-id="0a4b9-138">Sin embargo, en Windows 7 y versiones posteriores, parte de la información proporcionada previamente por el área de notificación debe proporcionarse a través del botón de la barra de tareas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-138">However, in Windows 7 and later, some of the information previously provided by the notification area should be provided through an application's taskbar button.</span></span> <span data-ttu-id="0a4b9-139">El área de notificación se encuentra en el borde derecho de la barra de tareas (si la barra de tareas es horizontal) o en la parte inferior (si la barra de tareas es vertical).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-139">The notification area is located at the right edge of the taskbar (if the taskbar is horizontal) or at the bottom (if the taskbar is vertical).</span></span> <span data-ttu-id="0a4b9-140">Para obtener más información, vea [notificaciones y el área de notificación](notification-area.md).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-140">For more information, see [Notifications and the Notification Area](notification-area.md).</span></span>

<span data-ttu-id="0a4b9-141">El área de notificación también muestra la hora actual si se selecciona esa opción.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-141">The notification area also displays the current time if that option is selected.</span></span> <span data-ttu-id="0a4b9-142">La opción se encuentra como:</span><span class="sxs-lookup"><span data-stu-id="0a4b9-142">The option is found as:</span></span>

-   <span data-ttu-id="0a4b9-143">**Windows 7 y versiones posteriores**: la lista desplegable **reloj** de la página **activar o desactivar iconos** del área de notificación de la aplicación panel de **notificación iconos del área de notificación** (también accesible a través de las propiedades del área de notificación).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-143">**Windows 7 and later**: The **Clock** drop-down list in the **Turn system icons on or off** page of the **Notification Area Icons** Control Panel application (also accessible through the notification area properties).</span></span>
-   <span data-ttu-id="0a4b9-144">**Windows Vista**: la casilla **reloj** en la página del **área de notificación** de la barra de tareas y la ventana Propiedades del **menú Inicio** .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-144">**Windows Vista**: The **Clock** check box in the **Notification Area** page of the **Taskbar and Start Menu** properties window.</span></span>
-   <span data-ttu-id="0a4b9-145">**Windows XP**: la casilla **Mostrar el reloj** en la **barra de tareas y** en la ventana Propiedades del menú Inicio.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-145">**Windows XP**: The **Show the clock** check box in the **Taskbar and Start Menu** properties window.</span></span>

<span data-ttu-id="0a4b9-146">El usuario puede hacer clic con el botón secundario en la barra de tareas para mostrar el menú contextual.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-146">The user can right-click the taskbar to display the shortcut menu.</span></span> <span data-ttu-id="0a4b9-147">El menú contextual incluye comandos para ventanas en cascada, pilas de ventanas, mostrar ventanas en paralelo, mostrar el escritorio, iniciar el administrador de tareas y establecer las propiedades de la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-147">The shortcut menu includes commands to cascade windows, stack windows, show windows side-by-side, show the desktop, start Task Manager, and set taskbar properties.</span></span> <span data-ttu-id="0a4b9-148">El menú contextual también proporciona la opción de agregar o quitar un conjunto de barras de herramientas de la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-148">The shortcut menu also provides the option to add or remove a set of toolbars from the taskbar.</span></span> <span data-ttu-id="0a4b9-149">Puede agregar nuevas barras de herramientas a este menú si las registra en la \_ categoría DESKBAND CATID.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-149">You can add new toolbars to this menu by registering them under the CATID\_DeskBand category.</span></span> <span data-ttu-id="0a4b9-150">Para obtener más información, vea [implementar objetos de banda](band-objects.md).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-150">For more information, see [Implementing Band Objects](band-objects.md).</span></span> <span data-ttu-id="0a4b9-151">Tenga en cuenta que, a partir de Windows 7, la barra de tareas y el área de notificación tienen menús contextuales independientes.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-151">Note that as of Windows 7, the taskbar and the notification area have separate shortcut menus.</span></span> <span data-ttu-id="0a4b9-152">Estos menús contextuales comparten algunas opciones, como la organización de ventanas, y agregan otras.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-152">These shortcut menus share some options, such as window arrangement, and add others.</span></span>

### <a name="taskbar-display-options"></a><span data-ttu-id="0a4b9-153">Opciones de presentación de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-153">Taskbar Display Options</span></span>

<span data-ttu-id="0a4b9-154">La barra de tareas admite dos opciones de presentación: ocultar automáticamente y, en Windows Vista y versiones anteriores solo, Always On superior (la barra de tareas siempre está en este modo en Windows 7 y versiones posteriores).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-154">The taskbar supports two display options: Auto-Hide and, in Windows Vista and earlier only, Always On Top (the taskbar is always in this mode in Windows 7 and later).</span></span> <span data-ttu-id="0a4b9-155">Para establecer estas opciones, el usuario debe abrir el menú contextual de la barra de tareas, hacer clic en **propiedades** y activar o desactivar la casilla **Ocultar automáticamente la barra de tareas** o **mantener la barra de tareas en la parte superior de otras ventanas** .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-155">To set these options, the user must open the taskbar shortcut menu, click **Properties**, and select or clear the **Auto-hide the taskbar** check box or the **Keep the taskbar on top of other windows** check box.</span></span> <span data-ttu-id="0a4b9-156">Para recuperar el estado de estas opciones de presentación, use el mensaje [**\_ GETSTATE de ABN**](abm-getstate.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-156">To retrieve the state of these display options, use the [**ABM\_GETSTATE**](abm-getstate.md) message.</span></span> <span data-ttu-id="0a4b9-157">Si desea recibir una notificación cuando el estado de estas opciones de presentación cambie, procese el mensaje de notificación [**ABN \_ STATECHANGE**](abn-statechange.md) en el procedimiento de ventana.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-157">If you would like to be notified when the state of these display options changes, process the [**ABN\_STATECHANGE**](abn-statechange.md) notification message in your window procedure.</span></span> <span data-ttu-id="0a4b9-158">Para cambiar el estado de estas opciones de presentación, use el mensaje [**ABN \_ SETSTATE**](abm-setstate.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-158">To change the state of these display options, use the [**ABM\_SETSTATE**](abm-setstate.md) message.</span></span>

<span data-ttu-id="0a4b9-159">El *área de trabajo* es la parte de la pantalla que no está oculta en la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-159">The *work area* is the portion of the screen not obscured by the taskbar.</span></span> <span data-ttu-id="0a4b9-160">Para recuperar el tamaño del área de trabajo, llame a la función [**SystemParametersInfo**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa) con el valor **SPI \_ GETWORKAREA** establecido.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-160">To retrieve the size of the work area, call the [**SystemParametersInfo**](/windows/win32/api/winuser/nf-winuser-systemparametersinfoa) function with the **SPI\_GETWORKAREA** value set.</span></span> <span data-ttu-id="0a4b9-161">Para recuperar las coordenadas del rectángulo que describen la ubicación de la barra de tareas, use el mensaje [**ABN \_ GETTASKBARPOS**](abm-gettaskbarpos.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-161">To retrieve the rectangle coordinates that describe the location of the taskbar, use the [**ABM\_GETTASKBARPOS**](abm-gettaskbarpos.md) message.</span></span>

<span data-ttu-id="0a4b9-162">Es posible cubrir la barra de tareas estableciendo explícitamente el tamaño del rectángulo de la ventana igual al tamaño de la pantalla con [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-162">It is possible to cover the taskbar by explicitly setting the size of the window rectangle equal to the size of the screen with [**SetWindowPos**](/windows/win32/api/winuser/nf-winuser-setwindowpos).</span></span> <span data-ttu-id="0a4b9-163">En el caso de los sistemas Windows 2000 o posterior, la ventana no debe tener el [**\_ título WS**](../winmsg/window-styles.md) o [**WS \_ THICKFRAME**](../winmsg/window-styles.md), o bien se debe ajustar el tamaño de la ventana para que el área cliente cubra toda la pantalla.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-163">For Windows 2000 systems or later, the window must lack either [**WS\_CAPTION**](../winmsg/window-styles.md) or [**WS\_THICKFRAME**](../winmsg/window-styles.md), or else the window must be sized so that the client area covers the entire screen.</span></span> <span data-ttu-id="0a4b9-164">También en el caso de los sistemas, si la barra de tareas está establecida en Always On superior, permanecerá oculta solo mientras la aplicación es la aplicación en primer plano.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-164">Also particular to those systems, if the taskbar is set to Always On Top, it will remain hidden only while the application is the foreground application.</span></span>

### <a name="adding-shortcuts-to-the-start-menu"></a><span data-ttu-id="0a4b9-165">Agregar accesos directos al menú Inicio</span><span class="sxs-lookup"><span data-stu-id="0a4b9-165">Adding Shortcuts to the Start Menu</span></span>

<span data-ttu-id="0a4b9-166">Para agregar un elemento al submenú **programas** en Microsoft Windows NT 4,0, Windows 2000 y versiones posteriores, o Windows 95 o posterior, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-166">To add an item to the **Programs** submenu on Microsoft Windows NT 4.0, Windows 2000 and later, or Windows 95 or later, follow these steps.</span></span>

1.  <span data-ttu-id="0a4b9-167">Cree un [vínculo de Shell](./links.md) mediante la interfaz [**IShellLink**](/windows/desktop/api/Shobjidl_core/nn-shobjidl_core-ishelllinka) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-167">Create a [shell link](./links.md) by using the [**IShellLink**](/windows/desktop/api/Shobjidl_core/nn-shobjidl_core-ishelllinka) interface.</span></span>
2.  <span data-ttu-id="0a4b9-168">Obtenga el PIDL de la carpeta programas con [**SHGetSpecialFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetspecialfolderlocation), pasando los [**\_ programas CSIDL**](csidl.md).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-168">Obtain the PIDL of the Programs folder by using [**SHGetSpecialFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetspecialfolderlocation), passing [**CSIDL\_PROGRAMS**](csidl.md).</span></span>
3.  <span data-ttu-id="0a4b9-169">Agregue el vínculo de Shell a la carpeta programas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-169">Add the Shell link to the Programs folder.</span></span> <span data-ttu-id="0a4b9-170">También puede crear una carpeta en la carpeta programas y agregar el vínculo a esa carpeta.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-170">You can also create a folder in the Programs folder and add the link to that folder.</span></span>

### <a name="managing-taskbar-buttons"></a><span data-ttu-id="0a4b9-171">Administrar botones de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-171">Managing Taskbar Buttons</span></span>

<span data-ttu-id="0a4b9-172">El shell crea un botón en la barra de tareas cada vez que una aplicación crea una ventana que no es propiedad de.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-172">The Shell creates a button on the taskbar whenever an application creates a window that isn't owned.</span></span> <span data-ttu-id="0a4b9-173">Para asegurarse de que el botón de ventana se coloca en la barra de tareas, cree una ventana sin propietario con el estilo extendido [**WS \_ ex \_ APPWINDOW**](../winmsg/extended-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-173">To ensure that the window button is placed on the taskbar, create an unowned window with the [**WS\_EX\_APPWINDOW**](../winmsg/extended-window-styles.md) extended style.</span></span> <span data-ttu-id="0a4b9-174">Para evitar que el botón de ventana se coloque en la barra de tareas, cree la ventana sin propietario con el estilo extendido [**WS \_ ex \_ TOOLWINDOW**](../winmsg/extended-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-174">To prevent the window button from being placed on the taskbar, create the unowned window with the [**WS\_EX\_TOOLWINDOW**](../winmsg/extended-window-styles.md) extended style.</span></span> <span data-ttu-id="0a4b9-175">Como alternativa, puede crear una ventana oculta y hacer que esta ventana oculta sea el propietario de la ventana visible.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-175">As an alternative, you can create a hidden window and make this hidden window the owner of your visible window.</span></span>

<span data-ttu-id="0a4b9-176">El shell quitará el botón de una ventana de la barra de tareas solo si el estilo de la ventana es compatible con los botones visibles de la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-176">The Shell will remove a window's button from the taskbar only if the window's style supports visible taskbar buttons.</span></span> <span data-ttu-id="0a4b9-177">Si desea cambiar de forma dinámica el estilo de una ventana a uno que no admita botones visibles de la barra de tareas, debe ocultar primero la ventana (llamando a [**ShowWindow**](/windows/win32/api/winuser/nf-winuser-showwindow) with **SW \_ Hide**), cambiar el estilo de la ventana y, a continuación, Mostrar la ventana.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-177">If you want to dynamically change a window's style to one that does not support visible taskbar buttons, you must hide the window first (by calling [**ShowWindow**](/windows/win32/api/winuser/nf-winuser-showwindow) with **SW\_HIDE**), change the window style, and then show the window.</span></span>

<span data-ttu-id="0a4b9-178">Normalmente, el botón ventana contiene el icono de la aplicación y el título.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-178">The window button typically contains the application icon and title.</span></span> <span data-ttu-id="0a4b9-179">Sin embargo, si la aplicación no contiene un menú del sistema, el botón ventana se crea sin el icono.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-179">However, if the application does not contain a system menu, the window button is created without the icon.</span></span>

<span data-ttu-id="0a4b9-180">Si desea que la aplicación obtenga la atención del usuario cuando la ventana no está activa, utilice la función [**FlashWindow**](/windows/win32/api/winuser/nf-winuser-flashwindow) para que el usuario sepa que un mensaje está en espera.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-180">If you want your application to get the user's attention when the window is not active, use the [**FlashWindow**](/windows/win32/api/winuser/nf-winuser-flashwindow) function to let the user know that a message is waiting.</span></span> <span data-ttu-id="0a4b9-181">Esta función parpadea el botón de ventana.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-181">This function flashes the window button.</span></span> <span data-ttu-id="0a4b9-182">Una vez que el usuario hace clic en el botón ventana para activar la ventana, la aplicación puede mostrar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-182">Once the user clicks the window button to activate the window, your application can display the message.</span></span>

### <a name="modifying-the-contents-of-the-taskbar"></a><span data-ttu-id="0a4b9-183">Modificar el contenido de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-183">Modifying the Contents of the Taskbar</span></span>

<span data-ttu-id="0a4b9-184">La [versión 4,71 y versiones posteriores](versions.md) de Shell32.dll agregan la capacidad de modificar el contenido de la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-184">[Version 4.71 and later](versions.md) of Shell32.dll adds the capability to modify the contents of the taskbar.</span></span> <span data-ttu-id="0a4b9-185">Desde una aplicación, ahora puede Agregar, quitar y activar botones de la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-185">From an application, you can now add, remove, and activate taskbar buttons.</span></span> <span data-ttu-id="0a4b9-186">La activación del elemento no activa la ventana; muestra el elemento como presionado en la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-186">Activating the item does not activate the window; it shows the item as pressed on the taskbar.</span></span>

<span data-ttu-id="0a4b9-187">Las funciones de modificación de la barra de tareas se implementan en un objeto COM (modelo de objetos componentes) (CLSID \_ TaskbarList) que expone la interfaz [**ITASKBARLIST**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-itaskbarlist) (IID \_ ITaskbarList).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-187">The taskbar modification capabilities are implemented in a Component Object Model (COM) object (CLSID\_TaskbarList ) that exposes the [**ITaskbarList**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-itaskbarlist) interface (IID\_ITaskbarList).</span></span> <span data-ttu-id="0a4b9-188">Debe llamar al método [**ITaskbarList:: HrInit**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-itaskbarlist-hrinit) para inicializar el objeto.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-188">You must call the [**ITaskbarList::HrInit**](/windows/desktop/api/shobjidl_core/nf-shobjidl_core-itaskbarlist-hrinit) method to initialize the object.</span></span> <span data-ttu-id="0a4b9-189">Después, puede usar los métodos de la interfaz [**ITaskbarList**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-itaskbarlist) para modificar el contenido de la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-189">You can then use the methods of the [**ITaskbarList**](/windows/desktop/api/shobjidl_core/nn-shobjidl_core-itaskbarlist) interface to modify the contents of the taskbar.</span></span>

### <a name="adding-modifying-and-deleting-icons-in-the-notification-area"></a><span data-ttu-id="0a4b9-190">Agregar, modificar y eliminar iconos en el área de notificación</span><span class="sxs-lookup"><span data-stu-id="0a4b9-190">Adding, Modifying, and Deleting Icons in the Notification Area</span></span>

<span data-ttu-id="0a4b9-191">Utilice la [**función \_ NotifyIcon de Shell**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) para agregar, modificar o eliminar iconos del área de notificación.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-191">Use the [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) function to add, modify, or delete icons from the notification area.</span></span> <span data-ttu-id="0a4b9-192">El parámetro *dwMessage* de **\_ NotifyIcon de Shell** es un mensaje a la barra de tareas que especifica la acción que se va a realizar.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-192">The *dwMessage* parameter of **Shell\_NotifyIcon** is a message to the taskbar that specifies the action to be taken.</span></span> <span data-ttu-id="0a4b9-193">El parámetro *pnid* es un puntero a una estructura [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) que se usa para identificar el icono y pasar cualquier información adicional que sea necesaria para que el sistema procese el mensaje.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-193">The *pnid* parameter is a pointer to a [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure that is used to identify the icon and pass any additional information that is needed for the system to process the message.</span></span>

<span data-ttu-id="0a4b9-194">Puede realizar las siguientes acciones con los iconos del área de notificación.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-194">You can perform the following actions with notification area icons.</span></span>

-   <span data-ttu-id="0a4b9-195">Para agregar un icono al área de notificación de la barra de tareas, llame a [**\_ NotifyIcon de Shell**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) con el parámetro *dwMessage* establecido en Nim \_ Agregar.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-195">To add an icon to the taskbar's notification area, call [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with the *dwMessage* parameter set to NIM\_ADD.</span></span> <span data-ttu-id="0a4b9-196">La estructura [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) se usa para especificar el identificador y el identificador del icono y cualquier texto de información sobre herramientas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-196">The [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure is used to specify the icon's handle and identifier, and any tooltip text.</span></span> <span data-ttu-id="0a4b9-197">Si el usuario ha activado la casilla **Mostrar reloj** en las propiedades de la barra de tareas, el sistema coloca el icono a la izquierda inmediata del reloj.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-197">If the user has selected the **Show Clock** check box in the taskbar properties, the system places the icon to the immediate left of the clock.</span></span> <span data-ttu-id="0a4b9-198">De lo contrario, el icono aparece en el lado derecho o en la parte inferior de la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-198">Otherwise, the icon appears on the right side or at the bottom of the taskbar.</span></span> <span data-ttu-id="0a4b9-199">Los iconos existentes se desplazan a la izquierda para dejar espacio para el nuevo icono.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-199">Any existing icons are shifted to the left to make room for the new icon.</span></span>
-   <span data-ttu-id="0a4b9-200">Para modificar la información de un icono, incluido su identificador de icono, texto de información sobre herramientas y identificador de mensaje de devolución de llamada, llame a [**\_ NotifyIcon de Shell**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) con *dwMessage* establecido en Nim \_ modificar.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-200">To modify an icon's information, including its icon handle, tooltip text, and callback message identifier, call [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with *dwMessage* set to NIM\_MODIFY.</span></span>
-   <span data-ttu-id="0a4b9-201">Para eliminar un icono del área de notificación, llame [**a \_ NotifyIcon del shell**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) con el parámetro *dwMessage* establecido en Nim \_ Delete.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-201">To delete an icon from the notification area, call [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with the *dwMessage* parameter set to NIM\_DELETE.</span></span>

<span data-ttu-id="0a4b9-202">Cuando haya completado una operación de la interfaz de usuario, devuelva el foco al área de notificación mediante una llamada a [**\_ NotifyIcon de Shell**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) con *dwMessage* establecido en Nim \_ SETFOCUS.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-202">When you have completed a user interface operation, return focus to the notification area by calling [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with *dwMessage* set to NIM\_SETFOCUS.</span></span> <span data-ttu-id="0a4b9-203">Por ejemplo, podría hacer esto cuando un icono de la barra de tareas muestra un menú contextual, pero el usuario lo cancela presionando la tecla ESCAPE.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-203">For example, you could do this when a taskbar icon displays a shortcut menu, but the user cancels it by pressing the ESCAPE key.</span></span>

### <a name="receiving-notification-area-callback-messages"></a><span data-ttu-id="0a4b9-204">Recibir mensajes de devolución de llamada del área de notificación</span><span class="sxs-lookup"><span data-stu-id="0a4b9-204">Receiving Notification Area Callback Messages</span></span>

<span data-ttu-id="0a4b9-205">Las aplicaciones suelen colocar iconos en el área de notificación de la barra de tareas para que sirvan como indicadores de estado.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-205">Applications commonly put icons in the notification area of the taskbar to serve as status indicators.</span></span> <span data-ttu-id="0a4b9-206">Puede proporcionar información adicional cuando el usuario realiza acciones del mouse, como mover el puntero del mouse sobre el icono o hacer clic en el icono.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-206">You can provide additional information when the user performs mouse actions, such as moving the mouse pointer over the icon or clicking the icon.</span></span>

<span data-ttu-id="0a4b9-207">El sistema le notifica los eventos del mouse y del teclado mediante el envío de un mensaje de devolución de llamada definido por la aplicación que está asociado a un icono determinado.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-207">The system notifies you of mouse and keyboard events by sending an application-defined callback message that is associated with a particular icon.</span></span> <span data-ttu-id="0a4b9-208">De esta manera, el sistema puede notificar a una aplicación cuando el usuario, por ejemplo, hace clic en el icono o lo selecciona presionando una tecla.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-208">In this way, the system can notify an application when the user, for instance, clicks the icon or selects it by pressing a key.</span></span>

<span data-ttu-id="0a4b9-209">El mensaje de devolución de llamada de un icono se define al agregar el icono a la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-209">You define an icon's callback message when you add the icon to the taskbar.</span></span> <span data-ttu-id="0a4b9-210">El identificador del mensaje de devolución de llamada se especifica en el miembro **uCallbackMessage** de la estructura [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) pasada con Nim \_ Agregar.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-210">The callback message identifier is specified in the **uCallbackMessage** member of the [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure passed with NIM\_ADD.</span></span> <span data-ttu-id="0a4b9-211">Cuando se produce un evento, el sistema envía el mensaje de devolución de llamada al procedimiento de ventana de la ventana especificada por el miembro **hWnd** .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-211">When an event occurs, the system sends the callback message to the window procedure of the window specified by the **hWnd** member.</span></span> <span data-ttu-id="0a4b9-212">El parámetro *wParam* del mensaje contiene el identificador del icono de la barra de tareas en el que se produjo el evento.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-212">The *wParam* parameter of the message contains the identifier of the taskbar icon in which the event occurred.</span></span> <span data-ttu-id="0a4b9-213">El parámetro *lParam* contiene el mouse o el mensaje de teclado asociado al evento.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-213">The *lParam* parameter holds the mouse or keyboard message associated with the event.</span></span> <span data-ttu-id="0a4b9-214">Por ejemplo, cuando el puntero del mouse se mueve a un icono de la barra de tareas, *lParam* contiene [**WM \_ MOUSEMOVE**](../inputdev/wm-mousemove.md).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-214">For example, when the mouse pointer moves onto a taskbar icon, *lParam* contains [**WM\_MOUSEMOVE**](../inputdev/wm-mousemove.md).</span></span>

<span data-ttu-id="0a4b9-215">Los resultados de varios eventos del mouse se pueden resumir de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="0a4b9-215">The results of various mouse events can be summarized as follows:</span></span>

-   <span data-ttu-id="0a4b9-216">Cuando el usuario mueve el puntero del mouse sobre el icono, el sistema muestra el texto de información sobre herramientas que se especificó en [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-216">When the user moves the mouse pointer over the icon, the system displays the tooltip text that was specified in [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa).</span></span>
-   <span data-ttu-id="0a4b9-217">Cuando el usuario hace clic en el icono, la aplicación recibe una notificación de [**\_ LBUTTONDOWN de WM**](../inputdev/wm-lbuttondown.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-217">When the user clicks the icon, your application receives a [**WM\_LBUTTONDOWN**](../inputdev/wm-lbuttondown.md) notification.</span></span>
-   <span data-ttu-id="0a4b9-218">Cuando el usuario hace clic con el botón derecho en el icono, la aplicación recibe una notificación de [**\_ RBUTTONDOWN de WM**](../inputdev/wm-rbuttondown.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-218">When the user right-clicks the icon, your application receives a [**WM\_RBUTTONDOWN**](../inputdev/wm-rbuttondown.md) notification.</span></span>
-   <span data-ttu-id="0a4b9-219">Cuando el usuario hace doble clic en el icono, la aplicación recibe una notificación de [**\_ LBUTTONDBLCLK de WM**](../inputdev/wm-lbuttondblclk.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-219">When the user double-clicks the icon, your application receives a [**WM\_LBUTTONDBLCLK**](../inputdev/wm-lbuttondblclk.md) notification.</span></span>

<span data-ttu-id="0a4b9-220">Normalmente, al hacer clic en el icono, la aplicación muestra una ventana con información adicional, haciendo clic con el botón secundario en el menú contextual y haciendo doble clic en se ejecuta el comando de menú contextual predeterminado.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-220">Typically, clicking the icon causes the application to display a window with additional information, right-clicking displays a shortcut menu, and double-clicking executes the default shortcut menu command.</span></span>

<span data-ttu-id="0a4b9-221">Para obtener un ejemplo de cómo cambiar el texto de información sobre herramientas asociado a un icono de área de notificación, vea la [información sobre herramientas de globo para los iconos de la barra de estado](../controls/tooltip-controls.md).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-221">For an example of how to change the tooltip text associated with a notification area icon, see [Balloon Tooltips for Status Bar Icons](../controls/tooltip-controls.md).</span></span>

<span data-ttu-id="0a4b9-222">Las versiones 5,0 y posteriores del shell controlan los eventos del mouse y del teclado [**\_ NotifyIcon del shell**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) de maneras diferentes que las versiones anteriores de Shell que se encuentran en Windows NT 4,0, Windows 95 y Windows 98.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-222">Versions 5.0 and later of the Shell handle [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) mouse and keyboard events in different ways than earlier Shell versions found on Windows NT 4.0, Windows 95, and Windows 98.</span></span> <span data-ttu-id="0a4b9-223">Las diferencias son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="0a4b9-223">The differences are as follows:</span></span>

-   <span data-ttu-id="0a4b9-224">Si un usuario solicita el menú contextual de un icono de notificación con el teclado, el shell de la versión 5,0 envía la aplicación asociada a un mensaje de [**\_ CONTEXTMENU de WM**](../menurc/wm-contextmenu.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-224">If a user requests a notify icon's shortcut menu with the keyboard, the version 5.0 Shell sends the associated application a [**WM\_CONTEXTMENU**](../menurc/wm-contextmenu.md) message.</span></span> <span data-ttu-id="0a4b9-225">Las versiones anteriores envían mensajes de [**WM \_ RBUTTONDOWN**](../inputdev/wm-rbuttondown.md) y [**WM \_ RBUTTONUP**](../inputdev/wm-rbuttonup.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-225">Earlier versions send [**WM\_RBUTTONDOWN**](../inputdev/wm-rbuttondown.md) and [**WM\_RBUTTONUP**](../inputdev/wm-rbuttonup.md) messages.</span></span>
-   <span data-ttu-id="0a4b9-226">Si un usuario selecciona un icono de notificación con el teclado y lo activa con la barra espaciadora o la tecla entrar, el shell de la versión 5,0 envía la aplicación asociada a una notificación de **\_ KEYSELECT de ndentro** .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-226">If a user selects a notify icon with the keyboard and activates it with the space bar or ENTER key, the version 5.0 Shell sends the associated application an **NIN\_KEYSELECT** notification.</span></span> <span data-ttu-id="0a4b9-227">Las versiones anteriores envían mensajes de [**WM \_ RBUTTONDOWN**](../inputdev/wm-rbuttondown.md) y [**WM \_ RBUTTONUP**](../inputdev/wm-rbuttonup.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-227">Earlier versions send [**WM\_RBUTTONDOWN**](../inputdev/wm-rbuttondown.md) and [**WM\_RBUTTONUP**](../inputdev/wm-rbuttonup.md) messages.</span></span>
-   <span data-ttu-id="0a4b9-228">Si un usuario selecciona un icono de notificación con el mouse y lo activa con la tecla entrar, el shell de la versión 5,0 envía a la aplicación asociada una notificación de **\_ selección de ndentro** .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-228">If a user selects a notify icon with the mouse and activates it with the ENTER key, the version 5.0 Shell sends the associated application an **NIN\_SELECT** notification.</span></span> <span data-ttu-id="0a4b9-229">Las versiones anteriores envían mensajes de [**WM \_ RBUTTONDOWN**](../inputdev/wm-rbuttondown.md) y [**WM \_ RBUTTONUP**](../inputdev/wm-rbuttonup.md) .</span><span class="sxs-lookup"><span data-stu-id="0a4b9-229">Earlier versions send [**WM\_RBUTTONDOWN**](../inputdev/wm-rbuttondown.md) and [**WM\_RBUTTONUP**](../inputdev/wm-rbuttonup.md) messages.</span></span>
-   <span data-ttu-id="0a4b9-230">Si un usuario pasa el puntero del mouse sobre un icono con el que se asocia una información sobre herramientas de globo, el shell de la versión 6,0 (Windows XP) envía los mensajes siguientes.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-230">If a user passes the mouse pointer over an icon with which a balloon tooltip is associated, the version 6.0 Shell (Windows XP)sends the following messages.</span></span>
    -   -   <span data-ttu-id="0a4b9-231">**Ndentro \_ BALLOONSHOW** : se envía cuando se muestra el globo (los globos están en cola).</span><span class="sxs-lookup"><span data-stu-id="0a4b9-231">**NIN\_BALLOONSHOW** - Sent when the balloon is shown (balloons are queued).</span></span>
        -   <span data-ttu-id="0a4b9-232">**Ndentro \_ BALLOONHIDE** : se envía cuando el globo desaparece; por ejemplo, cuando se elimina el icono.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-232">**NIN\_BALLOONHIDE** - Sent when the balloon disappears—for example, when the icon is deleted.</span></span> <span data-ttu-id="0a4b9-233">No se envía este mensaje si se descarta el globo debido a un tiempo de espera o a un clic del mouse.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-233">This message is not sent if the balloon is dismissed because of a timeout or a mouse click.</span></span>
        -   <span data-ttu-id="0a4b9-234">**Ndentro \_ BALLOONTIMEOUT** : se envía cuando se descarta el globo debido a un tiempo de espera agotado.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-234">**NIN\_BALLOONTIMEOUT** - Sent when the balloon is dismissed because of a timeout.</span></span>
        -   <span data-ttu-id="0a4b9-235">**Ndentro \_ BALLOONUSERCLICK** : se envía cuando se descarta el globo debido a un clic del mouse.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-235">**NIN\_BALLOONUSERCLICK** - Sent when the balloon is dismissed because of a mouse click.</span></span>

<span data-ttu-id="0a4b9-236">Puede seleccionar la manera en que el shell debe comportarse mediante una llamada a [**\_ NotifyIcon de Shell**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) con *dwMessage* establecido en **Nim \_ SETVERSION**.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-236">You can select which way the Shell should behave by calling [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with *dwMessage* set to **NIM\_SETVERSION**.</span></span> <span data-ttu-id="0a4b9-237">Establezca el miembro **uVersion** de la estructura [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) para indicar si desea el comportamiento de la versión 5,0 o anterior a la versión 5,0.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-237">Set the **uVersion** member of the [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure to indicate whether you want version 5.0 or pre-version 5.0 behavior.</span></span>

### <a name="taskbar-creation-notification"></a><span data-ttu-id="0a4b9-238">Notificación de creación de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-238">Taskbar Creation Notification</span></span>

<span data-ttu-id="0a4b9-239">Con Microsoft Internet Explorer 4,0 y versiones posteriores, el shell notifica a las aplicaciones que se ha creado la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-239">With Microsoft Internet Explorer 4.0 and later, the Shell notifies applications that the taskbar has been created.</span></span> <span data-ttu-id="0a4b9-240">Cuando se crea la barra de tareas, registra un mensaje con la cadena TaskbarCreated y, a continuación, difunde este mensaje a todas las ventanas de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-240">When the taskbar is created, it registers a message with the TaskbarCreated string and then broadcasts this message to all top-level windows.</span></span> <span data-ttu-id="0a4b9-241">Cuando la aplicación de la barra de tareas recibe este mensaje, debe suponer que los iconos de la barra de tareas que ha agregado se han quitado y los agregan de nuevo.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-241">When your taskbar application receives this message, it should assume that any taskbar icons it added have been removed and add them again.</span></span> <span data-ttu-id="0a4b9-242">Esta característica se aplica generalmente solo a los servicios que ya se están ejecutando cuando se inicia el shell.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-242">This feature generally applies only to services that are already running when the Shell launches.</span></span> <span data-ttu-id="0a4b9-243">En el ejemplo siguiente se muestra un método muy simplificado para controlar este caso.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-243">The following example shows a very simplified method for handling this case.</span></span>

<span data-ttu-id="0a4b9-244">En Windows 10, la barra de tareas también difunde este mensaje cuando cambia el PPP de la pantalla principal.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-244">On Windows 10, the taskbar also broadcasts this message when the DPI of the primary display changes.</span></span>

```
LRESULT CALLBACK WndProc(HWND hWnd, 
                         UINT uMessage, 
                         WPARAM wParam, 
                         LPARAM lParam)
{
    static UINT s_uTaskbarRestart;

    switch(uMessage)
    {
        case WM_CREATE:
            s_uTaskbarRestart = RegisterWindowMessage(TEXT("TaskbarCreated"));
            break;
        
        default:
            if(uMessage == s_uTaskbarRestart)
                AddTaskbarIcons();
            break;
    }

    return DefWindowProc(hWnd, uMessage, wParam, lParam);
}
```



## <a name="using-the-taskbar"></a><span data-ttu-id="0a4b9-245">Uso de la barra de tareas</span><span class="sxs-lookup"><span data-stu-id="0a4b9-245">Using the Taskbar</span></span>

<span data-ttu-id="0a4b9-246">En esta sección se incluyen ejemplos que muestran cómo agregar iconos al área de notificación de la barra de tareas y cómo procesar los mensajes de devolución de llamada para los iconos de la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-246">This section includes examples that demonstrate how to add icons to the taskbar notification area and how to process callback messages for taskbar icons.</span></span>

### <a name="adding-and-deleting-taskbar-icons-in-the-notification-area"></a><span data-ttu-id="0a4b9-247">Agregar y eliminar iconos de la barra de tareas en el área de notificación</span><span class="sxs-lookup"><span data-stu-id="0a4b9-247">Adding and Deleting Taskbar Icons in the Notification Area</span></span>

<span data-ttu-id="0a4b9-248">Para agregar un icono al área de notificación de la barra de tareas, puede rellenar una estructura [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) y, a continuación, pasar la estructura a [**\_ NotifyIcon de Shell**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) con *dwMessage* establecido en **Nim \_ Agregar**.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-248">You add an icon to the taskbar notification area by filling in a [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure and then passing the structure to [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with *dwMessage* set to **NIM\_ADD**.</span></span> <span data-ttu-id="0a4b9-249">Los miembros de la estructura deben especificar el identificador de la ventana que está agregando el icono, así como el identificador de icono y el identificador de icono.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-249">The structure members must specify the handle to the window that is adding the icon, as well as the icon identifier and icon handle.</span></span> <span data-ttu-id="0a4b9-250">También puede especificar el texto de información sobre herramientas para el icono.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-250">You can also specify tooltip text for the icon.</span></span> <span data-ttu-id="0a4b9-251">Si necesita recibir mensajes del mouse para el icono, especifique el identificador del mensaje de devolución de llamada que el sistema debe usar para enviar el mensaje al procedimiento de ventana.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-251">If you need to receive mouse messages for the icon, specify the identifier of the callback message that the system should use to send the message to the window procedure.</span></span>

<span data-ttu-id="0a4b9-252">La función del ejemplo siguiente muestra cómo agregar un icono a la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-252">The function in the following example demonstrates how to add an icon to the taskbar.</span></span>


```
// MyTaskBarAddIcon - adds an icon to the notification area. 
// Returns TRUE if successful, or FALSE otherwise. 
// hwnd - handle to the window to receive callback messages 
// uID - identifier of the icon 
// hicon - handle to the icon to add 
// lpszTip - tooltip text 

BOOL MyTaskBarAddIcon(HWND hwnd, UINT uID, HICON hicon, LPSTR lpszTip) 
{ 
    BOOL res; 
    NOTIFYICONDATA tnid; 
 
    tnid.cbSize = sizeof(NOTIFYICONDATA); 
    tnid.hWnd = hwnd; 
    tnid.uID = uID; 
    tnid.uFlags = NIF_MESSAGE | NIF_ICON | NIF_TIP; 
    tnid.uCallbackMessage = MYWM_NOTIFYICON; 
    tnid.hIcon = hicon; 
    if (lpszTip) 
        hr = StringCbCopyN(tnid.szTip, sizeof(tnid.szTip), lpszTip, 
                           sizeof(tnid.szTip));
        // TODO: Add error handling for the HRESULT.
    else 
        tnid.szTip[0] = (TCHAR)'\0'; 
 
    res = Shell_NotifyIcon(NIM_ADD, &tnid); 
 
    if (hicon) 
        DestroyIcon(hicon); 
 
    return res; 
}
```



<span data-ttu-id="0a4b9-253">Para eliminar un icono del área de notificación de la barra de tareas, rellene una estructura [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) y llame al método [**\_ NotifyIcon de Shell**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) con *dwMessage* establecido en **Nim \_ Delete**.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-253">To delete an icon from the taskbar notification area, fill a [**NOTIFYICONDATA**](/windows/desktop/api/Shellapi/ns-shellapi-notifyicondataa) structure and call [**Shell\_NotifyIcon**](/windows/desktop/api/Shellapi/nf-shellapi-shell_notifyicona) with *dwMessage* set to **NIM\_DELETE**.</span></span> <span data-ttu-id="0a4b9-254">Al eliminar un icono de la barra de tareas, especifique solo los miembros **cbSize**, **hWnd** y **uID** de la estructura.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-254">When deleting a taskbar icon, specify only the **cbSize**, **hWnd**, and **uID** members of the structure.</span></span> <span data-ttu-id="0a4b9-255">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="0a4b9-255">For example:</span></span>


```
// MyTaskBarDeleteIcon - deletes an icon from the notification area. 
// Returns TRUE if successful, or FALSE otherwise. 
// hwnd - handle to the window that added the icon. 
// uID - identifier of the icon to delete. 

BOOL MyTaskBarDeleteIcon(HWND hwnd, UINT uID) 
{ 
    BOOL res; 
    NOTIFYICONDATA tnid; 
 
    tnid.cbSize = sizeof(NOTIFYICONDATA); 
    tnid.hWnd = hwnd; 
    tnid.uID = uID; 
         
    res = Shell_NotifyIcon(NIM_DELETE, &tnid); 
    return res; 
}
```



### <a name="receiving-mouse-events"></a><span data-ttu-id="0a4b9-256">Recibir eventos del mouse</span><span class="sxs-lookup"><span data-stu-id="0a4b9-256">Receiving Mouse Events</span></span>

<span data-ttu-id="0a4b9-257">Si especifica un mensaje de devolución de llamada para un icono de la barra de tareas, el sistema enviará el mensaje a la aplicación cada vez que se produzca un evento del mouse en el rectángulo delimitador del icono.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-257">If you specify a callback message for a taskbar icon, the system sends the message to your application whenever a mouse event occurs in the icon's bounding rectangle.</span></span> <span data-ttu-id="0a4b9-258">El parámetro *wParam* del mensaje especifica el identificador del icono de la barra de tareas y el parámetro *lParam* del mensaje especifica el mensaje generado por el sistema como resultado del evento del mouse.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-258">The *wParam* parameter of the message specifies the identifier of the taskbar icon, and the *lParam* parameter of the message specifies the message that the system generated as a result of the mouse event.</span></span>

<span data-ttu-id="0a4b9-259">La función del ejemplo siguiente es de una aplicación que agrega iconos de batería e impresora a la barra de tareas.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-259">The function in the following example is from an application that adds both battery and printer icons to the taskbar.</span></span> <span data-ttu-id="0a4b9-260">La aplicación llama a la función cuando recibe un mensaje de devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-260">The application calls the function when it receives a callback message.</span></span> <span data-ttu-id="0a4b9-261">La función determina si el usuario ha hecho clic en uno de los iconos y, si se ha producido un clic, llama a una función definida por la aplicación para mostrar la información de estado.</span><span class="sxs-lookup"><span data-stu-id="0a4b9-261">The function determines whether the user has clicked one of the icons and, if a click has occurred, calls an application-defined function to display status information.</span></span>


```
// On_MYWM_NOTIFYICON - processes callback messages for taskbar icons. 
// wParam - first message parameter of the callback message. 
// lParam - second message parameter of the callback message. 

void On_MYWM_NOTIFYICON(WPARAM wParam, LPARAM lParam) 
{ 
    UINT uID; 
    UINT uMouseMsg; 
 
    uID = (UINT) wParam; 
    uMouseMsg = (UINT) lParam; 
 
    if (uMouseMsg == WM_LBUTTONDOWN) 
    { 
        switch (uID) 
        { 
            case IDI_MYBATTERYICON: 
 
                // The user clicked the battery icon. Display the 
                // battery status. 
                ShowBatteryStatus(); 
                break; 
 
            case IDI_MYPRINTERICON: 
 
                // The user clicked the printer icon. Display the 
                // status of the print job. 
                ShowJobStatus(); 
                break; 
 
            default: 
                break; 
        } 
     } 

     return; 
 }
```



 

 
