---
title: Alias de memoria y herencia de datos
description: Los recursos colocados y reservados pueden asignar un alias a la memoria física dentro de un montón. Los recursos colocados permiten más escenarios de herencia de datos que los recursos reservados cuando el montón tiene establecida la marca compartida o cuando los recursos con alias tienen diseños de memoria totalmente definidos.
ms.assetid: 53C5804B-0F81-41AF-83D2-A96DCDFDC94A
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cace5b5997e2a460406ae72abb247224886f3926
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "74104505"
---
# <a name="memory-aliasing-and-data-inheritance"></a><span data-ttu-id="51b24-104">Alias de memoria y herencia de datos</span><span class="sxs-lookup"><span data-stu-id="51b24-104">Memory Aliasing and Data Inheritance</span></span>

<span data-ttu-id="51b24-105">Los recursos colocados y reservados pueden asignar un alias a la memoria física dentro de un montón.</span><span class="sxs-lookup"><span data-stu-id="51b24-105">Placed and reserved resource may alias physical memory within a heap.</span></span> <span data-ttu-id="51b24-106">Los recursos colocados permiten más escenarios de herencia de datos que los recursos reservados cuando el montón tiene establecida la marca compartida o cuando los recursos con alias tienen diseños de memoria totalmente definidos.</span><span class="sxs-lookup"><span data-stu-id="51b24-106">Placed resources enable more data inheritance scenarios than reserved resources when the heap has the shared flag set or when the aliased resources have fully defined memory layouts.</span></span>

-   [<span data-ttu-id="51b24-107">Establecimiento de alias</span><span class="sxs-lookup"><span data-stu-id="51b24-107">Aliasing</span></span>](#memory-aliasing-and-data-inheritance)
-   [<span data-ttu-id="51b24-108">Herencia de datos</span><span class="sxs-lookup"><span data-stu-id="51b24-108">Data Inheritance</span></span>](#data-inheritance)
-   [<span data-ttu-id="51b24-109">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="51b24-109">Related topics</span></span>](#related-topics)

## <a name="aliasing"></a><span data-ttu-id="51b24-110">Establecimiento de alias</span><span class="sxs-lookup"><span data-stu-id="51b24-110">Aliasing</span></span>

<span data-ttu-id="51b24-111">Se debe emitir una barrera de alias entre el uso de dos recursos que comparten la misma memoria física, incluso si no se desea la herencia de datos.</span><span class="sxs-lookup"><span data-stu-id="51b24-111">An aliasing barrier must be issued between the usage of two resources that share the same physical memory, even if data inheritance is not desired.</span></span> <span data-ttu-id="51b24-112">Los modelos de uso simples deben indicar, como mínimo, el recurso de destino implicado en una operación de este tipo.</span><span class="sxs-lookup"><span data-stu-id="51b24-112">Simple usage models must denote, at least, the destination resource involved in such an operation.</span></span> <span data-ttu-id="51b24-113">Consulte [**CreatePlacedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createplacedresource) para obtener más información y modelos de uso avanzado.</span><span class="sxs-lookup"><span data-stu-id="51b24-113">See [**CreatePlacedResource**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-createplacedresource) for more details and advanced usage models.</span></span>

<span data-ttu-id="51b24-114">Una vez que se tiene acceso a un recurso, se invalidan todos los recursos que comparten la memoria física con ese recurso, a menos que se permita la herencia de datos.</span><span class="sxs-lookup"><span data-stu-id="51b24-114">After a resource is accessed, any resources which share physical memory with that resource become invalidated, unless data inheritance is allowed to occur.</span></span> <span data-ttu-id="51b24-115">Las lecturas de recursos invalidados dan lugar a contenido de recursos sin definir.</span><span class="sxs-lookup"><span data-stu-id="51b24-115">Reads of invalidated resources result in undefined resource contents.</span></span> <span data-ttu-id="51b24-116">Las operaciones de escritura en recursos invalidados también producen contenido de recursos sin definir, a menos que se produzcan dos condiciones:</span><span class="sxs-lookup"><span data-stu-id="51b24-116">Writes to invalidated resources also result in undefined resource contents, unless two conditions occur:</span></span>

-   <span data-ttu-id="51b24-117">El recurso no tiene la \_ marca de recurso D3D12 \_ permitir \_ el \_ \_ destino de representación o el \_ marcador de recurso D3D12 permitir la marca de \_ \_ \_ profundidad \_ .</span><span class="sxs-lookup"><span data-stu-id="51b24-117">The resource does not have either the D3D12\_RESOURCE\_FLAG\_ALLOW\_RENDER\_TARGET or D3D12\_RESOURCE\_FLAG\_ALLOW\_DEPTH\_STENCIL.</span></span>
-   <span data-ttu-id="51b24-118">La escritura es una operación de copiar o borrar en un icono o un subrecurso completo.</span><span class="sxs-lookup"><span data-stu-id="51b24-118">The write is a copy or clear operation to an entire subresource or tile.</span></span> <span data-ttu-id="51b24-119">La inicialización en mosaico solo está disponible para los recursos con el icono de 64 KB \_ \_ \_ SWIZZLE y el estándar de mosaico de 64 KB \_ \_ \_ SWIZZLE.</span><span class="sxs-lookup"><span data-stu-id="51b24-119">Tile-initialization is only available for resources with 64KB\_TILE\_UNDEFINED\_SWIZZLE and 64KB\_TILE\_STANDARD\_SWIZZLE.</span></span>

<span data-ttu-id="51b24-120">Las invalidaciones superpuestas se limitan a granularidad más reducida, cuando los diseños proporcionan información sobre la ubicación de los datos de textura y cuando los recursos se encuentran en determinados Estados de barrera de transición.</span><span class="sxs-lookup"><span data-stu-id="51b24-120">Overlapping invalidations are scoped to smaller granularities, when layouts provide information on the location on the location of texel data and when resources are in certain transition barrier states.</span></span> <span data-ttu-id="51b24-121">Sin embargo, las invalidaciones no pueden ir más pequeñas que las granularidades de la alineación de recursos.</span><span class="sxs-lookup"><span data-stu-id="51b24-121">But, invalidations cannot go any smaller than resource alignment granularities.</span></span>

<span data-ttu-id="51b24-122">Una granularidad de alineación del búfer es de 64 KB y la granularidad de alineación mayor tiene prioridad.</span><span class="sxs-lookup"><span data-stu-id="51b24-122">A buffer alignment granularity is 64KB, and larger alignment granularity takes precedence.</span></span> <span data-ttu-id="51b24-123">Esto es importante al considerar las texturas de 4 KB, ya que pueden residir varias texturas de 4 KB en una región de 64 KB sin superponerse entre sí.</span><span class="sxs-lookup"><span data-stu-id="51b24-123">This is important when considering 4KB textures, as multiple 4KB textures can reside in a 64KB region without overlapping each other.</span></span> <span data-ttu-id="51b24-124">Pero no se puede usar un alias de búfer de la misma región de 64 KB junto con ninguna de esas texturas de 4 KB.</span><span class="sxs-lookup"><span data-stu-id="51b24-124">But, a buffer aliasing the same 64KB region cannot be used in conjunction with any of those 4KB textures.</span></span> <span data-ttu-id="51b24-125">La aplicación no puede mantener de forma confiable el acceso al búfer desde la intersección de las texturas de 4 KB, ya que las GPU pueden swizzle datos de textura de 4 KB dentro de la región de 64 KB en un patrón no definido.</span><span class="sxs-lookup"><span data-stu-id="51b24-125">The application cannot reliably keep the access to the buffer from intersecting the 4KB textures, as GPUs are allowed to swizzle 4KB texture data within the 64KB region in an undefined pattern.</span></span>

<span data-ttu-id="51b24-126">\_los diseños de mosaico no definidos de 64 KB \_ \_ SWIZZLE, estándar de iconos de 64 KB \_ y de \_ \_ textura principal de fila \_ informan a la aplicación de qué granularidad de alineación superpuestas han dejado de ser válidas.</span><span class="sxs-lookup"><span data-stu-id="51b24-126">64KB\_TILE\_UNDEFINED\_SWIZZLE, 64KB\_TILE\_STANDARD\_SWIZZLE, and ROW\_MAJOR texture layouts inform the application which overlapping alignment granularities have become invalid.</span></span> <span data-ttu-id="51b24-127">Por ejemplo: una aplicación puede crear una matriz de textura de destino de representación 2D con dos segmentos de matriz, un solo nivel de MIP y el \_ \_ diseño de SWIZZLE sin definir de mosaico de 64 KB \_ .</span><span class="sxs-lookup"><span data-stu-id="51b24-127">For example: An application can create a 2D render target texture array with 2 array slices, a single mip level, and the 64KB\_TILE\_UNDEFINED\_SWIZZLE layout.</span></span> <span data-ttu-id="51b24-128">Supongamos que la aplicación entiende que cada segmento de la matriz ocupa 100 iconos de 64 KB.</span><span class="sxs-lookup"><span data-stu-id="51b24-128">Assume the application understands each array slice occupies 100 64KB tiles.</span></span> <span data-ttu-id="51b24-129">La aplicación puede renunciar al uso del segmento 0 de la matriz y volver a usar esa memoria para un búfer de ~ 6 MB, una textura de ~ 6 MB con diseño sin definir, etc. Más adelante, supongamos que la aplicación ya no necesita el primer mosaico del segmento 1 de la matriz.</span><span class="sxs-lookup"><span data-stu-id="51b24-129">The application can forgo using array slice 0, and re-use that memory for either a ~6MB buffer, a ~6MB texture with undefined layout, etc. Going further, assume the application no longer required the first tile of array slice 1.</span></span> <span data-ttu-id="51b24-130">A continuación, la aplicación también podría encontrar un búfer de 64 KB allí hasta que la representación requiera el primer mosaico del segmento 1 de la matriz.</span><span class="sxs-lookup"><span data-stu-id="51b24-130">Then, the application could also locate a 64KB buffer there until rendering would again require the first tile of array slice 1.</span></span> <span data-ttu-id="51b24-131">La aplicación tendría que hacer un borrado o una copia de icono completo para volver a usar el primer icono con la matriz de texturas de nuevo.</span><span class="sxs-lookup"><span data-stu-id="51b24-131">The application would have to do a full tile clear or copy in order to re-use the first tile with the texture array again.</span></span>

<span data-ttu-id="51b24-132">Sin embargo, incluso las texturas con diseños definidos todavía tienen casos problemáticos.</span><span class="sxs-lookup"><span data-stu-id="51b24-132">However, even textures with defined layouts still have problematic cases.</span></span> <span data-ttu-id="51b24-133">Los tamaños de los recursos de textura pueden diferir significativamente de lo que la aplicación puede calcular, ya que algunas arquitecturas de adaptador asignan memoria adicional para las texturas con el fin de reducir el ancho de banda efectivo durante escenarios de representación comunes.</span><span class="sxs-lookup"><span data-stu-id="51b24-133">Texture resource sizes can significantly differ from what the application can calculate itself, because some adapter architectures allocate extra memory for textures to reduce the effective bandwidth during common rendering scenarios.</span></span> <span data-ttu-id="51b24-134">Cualquier invalidación en esa región de memoria adicional hará que se invalide todo el recurso.</span><span class="sxs-lookup"><span data-stu-id="51b24-134">Any invalidations into that extra memory region cause the entire resource to become invalidated.</span></span> <span data-ttu-id="51b24-135">Consulte [**GetResourceAllocationInfo**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-getresourceallocationinfo) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="51b24-135">See [**GetResourceAllocationInfo**](/windows/desktop/api/d3d12/nf-d3d12-id3d12device-getresourceallocationinfo) for more details.</span></span>

## <a name="data-inheritance"></a><span data-ttu-id="51b24-136">Herencia de datos</span><span class="sxs-lookup"><span data-stu-id="51b24-136">Data Inheritance</span></span>

<span data-ttu-id="51b24-137">Los recursos colocados permiten la mayor herencia de datos para las texturas, incluso con diseños de memoria no definidos.</span><span class="sxs-lookup"><span data-stu-id="51b24-137">Placed resources enable the most data inheritance for textures, even with undefined memory layouts.</span></span> <span data-ttu-id="51b24-138">Las aplicaciones pueden imitar las capacidades de herencia de datos que los recursos compartidos comprometieron habilitar buscando dos texturas con propiedades de recursos idénticas en el mismo desplazamiento en un montón compartido.</span><span class="sxs-lookup"><span data-stu-id="51b24-138">Applications can mimic the data inheritance capabilities that shared committed resources enable by locating two textures with identical resource properties at the same offset in a shared heap.</span></span> <span data-ttu-id="51b24-139">La descripción completa del recurso debe ser idéntica, incluido el valor sin cifrar optimizado y el tipo de método de creación de recursos (colocada o reservada).</span><span class="sxs-lookup"><span data-stu-id="51b24-139">The entire resource description must be identical, including the optimized clear value and type of resource creation method (placed or reserved).</span></span> <span data-ttu-id="51b24-140">Sin embargo, ambos recursos pueden tener Estados de barrera de transición inicial diferentes.</span><span class="sxs-lookup"><span data-stu-id="51b24-140">But, both resources may have had different initial transition barrier states.</span></span>

<span data-ttu-id="51b24-141">Los recursos reservados permiten la herencia de datos por mosaico; pero las restricciones existen normalmente para los Estados de barrera de transición de recursos.</span><span class="sxs-lookup"><span data-stu-id="51b24-141">Reserved resources enable per-tile data inheritance; but restrictions commonly exist for resource transition barrier states.</span></span>

<span data-ttu-id="51b24-142">Para heredar los datos, ambos recursos deben estar en un estado de barrera de transición de recursos compatible:</span><span class="sxs-lookup"><span data-stu-id="51b24-142">To inherit data, both resources must be in a compatible resource transition barrier state:</span></span>

-   <span data-ttu-id="51b24-143">En el caso de los búferes, las texturas de acceso simultáneo y las texturas entre adaptadores, el estado de la transición de recursos no es importante y todos los Estados son "compatibles".</span><span class="sxs-lookup"><span data-stu-id="51b24-143">For buffers, simultaneous access textures, and cross-adapter textures, the resource transition state is not important and all states are “compatible”.</span></span>
-   <span data-ttu-id="51b24-144">En el caso de las texturas reservadas sin las propiedades anteriores u otra herencia de datos por icono a través del icono de 64 KB \_ \_ \_ SWIZZLE o el estándar de mosaico de 64 KB \_ \_ \_ SWIZZLE, el estado de la barrera de transición de recursos que incluye el icono debe estar en el Estado común.</span><span class="sxs-lookup"><span data-stu-id="51b24-144">For reserved textures without the previous properties or other per-tile data inheritance through 64KB\_TILE\_UNDEFINED\_SWIZZLE or 64KB\_TILE\_STANDARD\_SWIZZLE, the resource transition barrier state including the tile must be in the common state.</span></span>
-   <span data-ttu-id="51b24-145">Para todas las demás texturas, donde las descripciones de recursos coinciden exactamente, el estado de la barrera de transición de recursos para cada par de Subrecursos correspondiente debe:</span><span class="sxs-lookup"><span data-stu-id="51b24-145">For all other textures, where the resource descriptions match exactly, the resource transition barrier state for each corresponding pair of subresources must:</span></span>
    -   <span data-ttu-id="51b24-146">Estar en el Estado común.</span><span class="sxs-lookup"><span data-stu-id="51b24-146">Be in the common state.</span></span>
    -   <span data-ttu-id="51b24-147">Ser igual cuando el estado tiene la misma marca GPU-escritura.</span><span class="sxs-lookup"><span data-stu-id="51b24-147">Be equal when the state has the same GPU-write flag in them.</span></span>

<span data-ttu-id="51b24-148">Cuando la GPU admite swizzle estándar, los búferes y las texturas de swizzle estándar pueden tener un alias para la misma memoria y heredar los datos entre ellos.</span><span class="sxs-lookup"><span data-stu-id="51b24-148">When the GPU supports standard swizzle, buffers and standard swizzle textures may be aliased to the same memory and inherit data between them.</span></span> <span data-ttu-id="51b24-149">La aplicación puede manipular textura desde la representación del búfer, porque el patrón swizzle estándar describe cómo se colocan los textura en la memoria.</span><span class="sxs-lookup"><span data-stu-id="51b24-149">The application can manipulate texels from the buffer representation, because the standard swizzle pattern describes how texels are laid out in memory.</span></span> <span data-ttu-id="51b24-150">El patrón swizzle de CPU-visible es equivalente al patrón de swizzle visible para GPU que se ve en los búferes.</span><span class="sxs-lookup"><span data-stu-id="51b24-150">The CPU-visible swizzle pattern is equivalent to the GPU-visible swizzle pattern seen in buffers.</span></span>

## <a name="related-topics"></a><span data-ttu-id="51b24-151">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="51b24-151">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="51b24-152">Subasignación dentro de montones</span><span class="sxs-lookup"><span data-stu-id="51b24-152">Suballocation Within Heaps</span></span>](suballocation-within-heaps.md)
</dt> </dl>

 

 




