---
title: Efecto de mapa de tono blanco
description: Este efecto permite que el nivel de blanco de una imagen se escale linealmente. Esto es especialmente útil cuando se convierte entre el espacio de luminancia al que se hace referencia y el espacio de luminancia que se hace referencia a la escena, o viceversa.
ms.topic: article
ms.date: 02/01/2019
ms.openlocfilehash: 70a38f37f5a5461b968099bebe4be120a727c053
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/12/2020
ms.locfileid: "103996630"
---
# <a name="white-level-adjustment-effect"></a><span data-ttu-id="aa716-104">Efecto de ajuste de nivel de blanco</span><span class="sxs-lookup"><span data-stu-id="aa716-104">White level adjustment effect</span></span>

<span data-ttu-id="aa716-105">Este efecto permite que el nivel de blanco de una imagen se escale linealmente.</span><span class="sxs-lookup"><span data-stu-id="aa716-105">This effect allows the white level of an image to be linearly scaled.</span></span> <span data-ttu-id="aa716-106">Esto es especialmente útil cuando se convierte entre el espacio de luminancia al que se hace referencia y el espacio de luminancia que se hace referencia a la escena, o viceversa.</span><span class="sxs-lookup"><span data-stu-id="aa716-106">This is especially helpful when you convert between display-referred luminance space and scene-referred luminance space, or vice versa.</span></span>

<span data-ttu-id="aa716-107">Las propiedades de este efecto se identifican mediante la [**enumeración D2D1_WHITELEVELADJUSTMENT_PROP**](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_whiteleveladjustment_prop)y el CLSID se **CLSID_D2D1WhiteLevelAdjustment**.</span><span class="sxs-lookup"><span data-stu-id="aa716-107">The properties for this effect are identified by the [**D2D1_WHITELEVELADJUSTMENT_PROP enumeration**](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_whiteleveladjustment_prop), and the CLSID is **CLSID_D2D1WhiteLevelAdjustment**.</span></span>

## <a name="effect-properties"></a><span data-ttu-id="aa716-108">Propiedades del efecto</span><span class="sxs-lookup"><span data-stu-id="aa716-108">Effect properties</span></span>

| <span data-ttu-id="aa716-109">Enumeración de índice y nombre para mostrar</span><span class="sxs-lookup"><span data-stu-id="aa716-109">Display name and index enumeration</span></span> | <span data-ttu-id="aa716-110">Tipo y valor predeterminado</span><span class="sxs-lookup"><span data-stu-id="aa716-110">Type and default value</span></span> | <span data-ttu-id="aa716-111">Descripción</span><span class="sxs-lookup"><span data-stu-id="aa716-111">Description</span></span> |
|-|-|-|
| <span data-ttu-id="aa716-112">InputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_INPUT_WHITE_LEVEL</span><span class="sxs-lookup"><span data-stu-id="aa716-112">InputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_INPUT_WHITE_LEVEL</span></span> | <span data-ttu-id="aa716-113">FLOAT</span><span class="sxs-lookup"><span data-stu-id="aa716-113">FLOAT</span></span> | <span data-ttu-id="aa716-114">Nivel blanco de la imagen de entrada, en Nits.</span><span class="sxs-lookup"><span data-stu-id="aa716-114">The white level of the input image, in nits.</span></span> |
| <span data-ttu-id="aa716-115">OutputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_OUTPUT_WHITE_LEVEL</span><span class="sxs-lookup"><span data-stu-id="aa716-115">OutputWhiteLevel, D2D1_WHITELEVELADJUSTMENT_PROP_OUTPUT_WHITE_LEVEL</span></span> | <span data-ttu-id="aa716-116">FLOAT</span><span class="sxs-lookup"><span data-stu-id="aa716-116">FLOAT</span></span> | <span data-ttu-id="aa716-117">Nivel blanco de la imagen de salida, en Nits.</span><span class="sxs-lookup"><span data-stu-id="aa716-117">The white level of the output image, in nits.</span></span> |

## <a name="remarks"></a><span data-ttu-id="aa716-118">Observaciones</span><span class="sxs-lookup"><span data-stu-id="aa716-118">Remarks</span></span>
<span data-ttu-id="aa716-119">Este efecto está pensado para combinarse con el [efecto de mapa de tono de HDR](hdr-tone-map-effect.md) para que pueda representar imágenes HDR en Direct2D con la administración de color y la asignación de tono adecuadas.</span><span class="sxs-lookup"><span data-stu-id="aa716-119">This effect is intended to be combined with the [HDR tone map effect](hdr-tone-map-effect.md) to allow you to render HDR images in Direct2D with proper color management and tone mapping.</span></span> <span data-ttu-id="aa716-120">Vea los **comentarios** de ese tema para obtener más detalles.</span><span class="sxs-lookup"><span data-stu-id="aa716-120">See that topic's **Remarks** for more details.</span></span> <span data-ttu-id="aa716-121">Los efectos están dirigidos a cualquier marco que quiera proporcionar una mejor experiencia de visualización de imágenes HDR que controle todos los formatos de imagen HDR de Windows y se adapta a las capacidades de la presentación (ya sea HDR o WCG/SDR).</span><span class="sxs-lookup"><span data-stu-id="aa716-121">The effects are aimed at any framework that wants to provide a best-in-class HDR image viewing experience that handles all of the Windows HDR image formats, and adapts to the capabilities of the display (whether that's HDR or WCG/SDR).</span></span>

<span data-ttu-id="aa716-122">En Windows, se supone que todo el contenido de SDR/WCG está en un espacio de luminancia al que se hace referencia, lo que significa que el nivel de blanco del contenido debe escalarse hasta el nivel de blanco de la pantalla antes de que se presente en última instancia.</span><span class="sxs-lookup"><span data-stu-id="aa716-122">On Windows, all SDR/WCG content is assumed to be in a display-referred luminance space, meaning that the white level of the content should be scaled up to the display's white level before it is ultimately presented.</span></span> <span data-ttu-id="aa716-123">Sin embargo, no siempre es responsabilidad de la aplicación hacerlo.</span><span class="sxs-lookup"><span data-stu-id="aa716-123">However, it's not always your application's responsibility to do this.</span></span> <span data-ttu-id="aa716-124">Por el contrario, se supone que el contenido de HDR está en un espacio de luminancia, lo que significa que, en última instancia, no se debe escalar para que coincida con el nivel de blanco de la pantalla.</span><span class="sxs-lookup"><span data-stu-id="aa716-124">In contrast, HDR content is assumed to be in a scene-referred luminance space, meaning that it shouldn't ultimately be scaled to match the display's white level.</span></span> <span data-ttu-id="aa716-125">Dicho esto, es posible que la aplicación tenga que realizar el escalado en algunas circunstancias al representar contenido HDR para asegurarse de que es el resultado neto.</span><span class="sxs-lookup"><span data-stu-id="aa716-125">That said, your application may need to perform scaling in some circumstances when rendering HDR content to ensure that this is the net result.</span></span>

<span data-ttu-id="aa716-126">Cuando el escritorio de Windows está en modo SDR o WCG, el escritorio se compone de un espacio de luminancia al que se hace referencia.</span><span class="sxs-lookup"><span data-stu-id="aa716-126">When the Windows desktop is in SDR or WCG mode, the desktop is composed in a display-referred luminance space.</span></span> <span data-ttu-id="aa716-127">Pero si el escritorio de Windows está en modo HDR, la composición del escritorio se produce en el espacio de luminancia que se conoce en la escena.</span><span class="sxs-lookup"><span data-stu-id="aa716-127">But if the Windows desktop is in HDR mode, then desktop composition happens in scene-referred luminance space.</span></span> <span data-ttu-id="aa716-128">Dicho esto, el Administrador de ventanas de escritorio (DWM) realiza ajustes de luminancia (a menudo denominados SDRBoost) para las superficies de composición de 8 bits y que simplifica la aplicación para ese caso.</span><span class="sxs-lookup"><span data-stu-id="aa716-128">That said, the Desktop Window Manager (DWM) itself performs luminance adjustments (often called SDRBoost) for 8-bit composition surfaces, and that simplifies your application for that case.</span></span> <span data-ttu-id="aa716-129">Aun así, el aumento automático significa que el rol de la aplicación en la conversión de un espacio de luminancia a otro depende del formato de composición que usa la aplicación para presentar su contenido.</span><span class="sxs-lookup"><span data-stu-id="aa716-129">Even so, the automatic boost means that your application's role in converting from one luminance space to another is dependent upon the composition format that your application is using to present its content.</span></span>

<span data-ttu-id="aa716-130">En la tabla siguiente se describen los casos en los que la aplicación debe y no debe realizar un ajuste de nivel blanco, así como el ajuste que debe tener.</span><span class="sxs-lookup"><span data-stu-id="aa716-130">The table below describes the cases when your application should and should not perform a white level adjustment, as well as what that adjustment should be.</span></span> <span data-ttu-id="aa716-131">En general, el ajuste depende de tres factores.</span><span class="sxs-lookup"><span data-stu-id="aa716-131">In general, the adjustment depends on three factors.</span></span>

1. <span data-ttu-id="aa716-132">ColorSpace de contenido de entrada.</span><span class="sxs-lookup"><span data-stu-id="aa716-132">Input content colorspace.</span></span> <span data-ttu-id="aa716-133">Si el contenido de entrada contiene valores de luminancia de intervalo dinámico alto (HDR) o no.</span><span class="sxs-lookup"><span data-stu-id="aa716-133">Whether your input content contains high dynamic range (HDR) luminance values or not.</span></span> <span data-ttu-id="aa716-134">El contenido de WCG se comporta igual que SDR para el comportamiento de luminancia.</span><span class="sxs-lookup"><span data-stu-id="aa716-134">WCG content behaves the same as SDR for luminance behavior.</span></span>
2. <span data-ttu-id="aa716-135">Formato de composición.</span><span class="sxs-lookup"><span data-stu-id="aa716-135">Composition format.</span></span> <span data-ttu-id="aa716-136">Formato de píxel de la superficie de destino que se presenta a DWM &mdash; , por ejemplo, una [cadena de intercambio](/windows/desktop/api/dxgi/nn-dxgi-idxgiswapchain) o una superficie de [composición](/uwp/api/Windows.UI.Composition.ICompositionSurface).</span><span class="sxs-lookup"><span data-stu-id="aa716-136">The pixel format of the target surface that is presented to the DWM&mdash;for example, a [swap chain](/windows/desktop/api/dxgi/nn-dxgi-idxgiswapchain) or a [composition surface](/uwp/api/Windows.UI.Composition.ICompositionSurface).</span></span> <span data-ttu-id="aa716-137">Al representar mediante Direct2D, es **UINT8** o **FP16**.</span><span class="sxs-lookup"><span data-stu-id="aa716-137">When rendering using Direct2D, this is either **UINT8** or **FP16**.</span></span>
3. <span data-ttu-id="aa716-138">Modo de color avanzado del escritorio.</span><span class="sxs-lookup"><span data-stu-id="aa716-138">Desktop advanced color mode.</span></span> <span data-ttu-id="aa716-139">Si DWM se está ejecutando en el modo SDR, WCG o HDR para la pantalla actual.</span><span class="sxs-lookup"><span data-stu-id="aa716-139">Whether the DWM is running in SDR, WCG, or HDR mode for the current display.</span></span> <span data-ttu-id="aa716-140">Obtenga esta información a través de [**DXGI_OUTPUT_DESC1:: ColorSpace**](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1) o [**AdvancedColorInfo. CurrentAdvancedColorKind**](/uwp/api/windows.graphics.display.advancedcolorinfo.currentadvancedcolorkind).</span><span class="sxs-lookup"><span data-stu-id="aa716-140">Obtain this information via [**DXGI_OUTPUT_DESC1::ColorSpace**](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1) or [**AdvancedColorInfo.CurrentAdvancedColorKind**](/uwp/api/windows.graphics.display.advancedcolorinfo.currentadvancedcolorkind).</span></span>

<span data-ttu-id="aa716-141">En función de estos tres factores, debe establecer los valores adecuados para las `InputWhiteLevel` `OutputWhiteLevel` propiedades y.</span><span class="sxs-lookup"><span data-stu-id="aa716-141">Based on these three factors, you should set the appropriate values for the `InputWhiteLevel` and `OutputWhiteLevel` properties.</span></span>

|<span data-ttu-id="aa716-142">Contenido de entrada</span><span class="sxs-lookup"><span data-stu-id="aa716-142">Input content</span></span>|<span data-ttu-id="aa716-143">Formato de composición</span><span class="sxs-lookup"><span data-stu-id="aa716-143">Composition format</span></span>|<span data-ttu-id="aa716-144">Modo de color avanzado</span><span class="sxs-lookup"><span data-stu-id="aa716-144">Advanced color mode</span></span>|<span data-ttu-id="aa716-145">InputWhiteLevel</span><span class="sxs-lookup"><span data-stu-id="aa716-145">InputWhiteLevel</span></span>|<span data-ttu-id="aa716-146">OutputWhiteLevel</span><span class="sxs-lookup"><span data-stu-id="aa716-146">OutputWhiteLevel</span></span>|
|-|-|-|-|-|
|<span data-ttu-id="aa716-147">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="aa716-147">SDR/WCG</span></span>|<span data-ttu-id="aa716-148">**UINT8**</span><span class="sxs-lookup"><span data-stu-id="aa716-148">**UINT8**</span></span>|<span data-ttu-id="aa716-149">Any</span><span class="sxs-lookup"><span data-stu-id="aa716-149">Any</span></span>|<span data-ttu-id="aa716-150">N/D</span><span class="sxs-lookup"><span data-stu-id="aa716-150">N/A</span></span>|<span data-ttu-id="aa716-151">N/D</span><span class="sxs-lookup"><span data-stu-id="aa716-151">N/A</span></span>|
|<span data-ttu-id="aa716-152">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="aa716-152">SDR/WCG</span></span>|<span data-ttu-id="aa716-153">**FP16**</span><span class="sxs-lookup"><span data-stu-id="aa716-153">**FP16**</span></span>|<span data-ttu-id="aa716-154">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="aa716-154">SDR/WCG</span></span>|<span data-ttu-id="aa716-155">N/D</span><span class="sxs-lookup"><span data-stu-id="aa716-155">N/A</span></span>|<span data-ttu-id="aa716-156">N/D</span><span class="sxs-lookup"><span data-stu-id="aa716-156">N/A</span></span>|
|<span data-ttu-id="aa716-157">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="aa716-157">SDR/WCG</span></span>|<span data-ttu-id="aa716-158">**FP16**</span><span class="sxs-lookup"><span data-stu-id="aa716-158">**FP16**</span></span>|<span data-ttu-id="aa716-159">HDR</span><span class="sxs-lookup"><span data-stu-id="aa716-159">HDR</span></span>|<span data-ttu-id="aa716-160">SDRWhite</span><span class="sxs-lookup"><span data-stu-id="aa716-160">SDRWhite</span></span>|<span data-ttu-id="aa716-161">80</span><span class="sxs-lookup"><span data-stu-id="aa716-161">80</span></span>|
|<span data-ttu-id="aa716-162">HDR</span><span class="sxs-lookup"><span data-stu-id="aa716-162">HDR</span></span>|<span data-ttu-id="aa716-163">Any</span><span class="sxs-lookup"><span data-stu-id="aa716-163">Any</span></span>|<span data-ttu-id="aa716-164">SDR/WCG</span><span class="sxs-lookup"><span data-stu-id="aa716-164">SDR/WCG</span></span>|<span data-ttu-id="aa716-165">80</span><span class="sxs-lookup"><span data-stu-id="aa716-165">80</span></span>|[<span data-ttu-id="aa716-166">**DXGI_OUTPUT_DESC1:: MaxLuminance**</span><span class="sxs-lookup"><span data-stu-id="aa716-166">**DXGI_OUTPUT_DESC1::MaxLuminance**</span></span>](/windows/desktop/api/dxgi1_6/ns-dxgi1_6-dxgi_output_desc1)|
|<span data-ttu-id="aa716-167">HDR</span><span class="sxs-lookup"><span data-stu-id="aa716-167">HDR</span></span>|<span data-ttu-id="aa716-168">**UINT8**</span><span class="sxs-lookup"><span data-stu-id="aa716-168">**UINT8**</span></span>|<span data-ttu-id="aa716-169">HDR</span><span class="sxs-lookup"><span data-stu-id="aa716-169">HDR</span></span>|<span data-ttu-id="aa716-170">80</span><span class="sxs-lookup"><span data-stu-id="aa716-170">80</span></span>|<span data-ttu-id="aa716-171">SDRWhite</span><span class="sxs-lookup"><span data-stu-id="aa716-171">SDRWhite</span></span>|
|<span data-ttu-id="aa716-172">HDR</span><span class="sxs-lookup"><span data-stu-id="aa716-172">HDR</span></span>|<span data-ttu-id="aa716-173">**FP16**</span><span class="sxs-lookup"><span data-stu-id="aa716-173">**FP16**</span></span>|<span data-ttu-id="aa716-174">HDR</span><span class="sxs-lookup"><span data-stu-id="aa716-174">HDR</span></span>|<span data-ttu-id="aa716-175">N/D</span><span class="sxs-lookup"><span data-stu-id="aa716-175">N/A</span></span>|<span data-ttu-id="aa716-176">N/D</span><span class="sxs-lookup"><span data-stu-id="aa716-176">N/A</span></span>|

<span data-ttu-id="aa716-177">En la tabla, el valor 80 es el nivel blanco de referencia, en Nits, para el contenido sRGB o scRGB.</span><span class="sxs-lookup"><span data-stu-id="aa716-177">In the table, the value 80 is the reference white level, in nits, for sRGB or scRGB content.</span></span> <span data-ttu-id="aa716-178">Para ello, puede usar la constante [**D2D1_SCENE_REFERRED_SDR_WHITE_LEVEL**](/windows/desktop/direct2d/direct2d-constants), que se define en `d2d1effects_2.h` .</span><span class="sxs-lookup"><span data-stu-id="aa716-178">For this, you can use the constant [**D2D1_SCENE_REFERRED_SDR_WHITE_LEVEL**](/windows/desktop/direct2d/direct2d-constants), which is defined in `d2d1effects_2.h`.</span></span> <span data-ttu-id="aa716-179">El valor `SDRWhite` es el número de Nits que la pantalla debe utilizar para mostrar el contenido de sRGB blanco.</span><span class="sxs-lookup"><span data-stu-id="aa716-179">The value `SDRWhite` is the number of nits that the display should use to display white sRGB content.</span></span> <span data-ttu-id="aa716-180">Puede recuperar este valor mediante el acceso a la propiedad [**AdvancedColorInfo. SdrWhiteLevelInNits**](/uwp/api/windows.graphics.display.advancedcolorinfo.sdrwhitelevelinnits) .</span><span class="sxs-lookup"><span data-stu-id="aa716-180">You can retrieve this value by accessing the [**AdvancedColorInfo.SdrWhiteLevelInNits**](/uwp/api/windows.graphics.display.advancedcolorinfo.sdrwhitelevelinnits) property.</span></span> <span data-ttu-id="aa716-181">El valor N/A significa que el ajuste de nivel blanco no se utiliza en este escenario; puede quitar el efecto del gráfico o establecer valores para una operación no operativa.</span><span class="sxs-lookup"><span data-stu-id="aa716-181">The value N/A means that white level adjustment is not used in this scenario; you can either remove the effect from your graph, or set values for a no-op.</span></span>

<span data-ttu-id="aa716-182">Tenga en cuenta que, en los casos en los que la aplicación no necesita un ajuste de nivel blanco, el DWM o la pantalla pueden controlar la conversión del espacio de luminancia al que se hace referencia en la escena.</span><span class="sxs-lookup"><span data-stu-id="aa716-182">Note that, in cases where a white level adjustment is not needed by the application, the DWM or the display may be handling the conversion from display-referred luminance space to scene-referred luminance space.</span></span>

- <span data-ttu-id="aa716-183">En el modo SDR/WCG, la conversión se produce después de la composición de DWM y se aplica a todo el contenido que se muestra en esa pantalla.</span><span class="sxs-lookup"><span data-stu-id="aa716-183">In SDR/WCG mode, the conversion happens after DWM composition, and applies to all content presented to that display.</span></span> <span data-ttu-id="aa716-184">La presentación realiza esta conversión de forma implícita.</span><span class="sxs-lookup"><span data-stu-id="aa716-184">The display implicitly performs this conversion.</span></span>
- <span data-ttu-id="aa716-185">En el modo HDR, el DWM realiza automáticamente la conversión antes de la composición, siempre que la superficie de composición de la aplicación sea SDR.</span><span class="sxs-lookup"><span data-stu-id="aa716-185">In HDR mode, the conversion is performed automatically by the DWM before composition, so long as your application's composition surface is SDR.</span></span>

## <a name="requirements"></a><span data-ttu-id="aa716-186">Requisitos</span><span class="sxs-lookup"><span data-stu-id="aa716-186">Requirements</span></span>

| <span data-ttu-id="aa716-187">Requisito</span><span class="sxs-lookup"><span data-stu-id="aa716-187">Requirement</span></span> | <span data-ttu-id="aa716-188">Value</span><span class="sxs-lookup"><span data-stu-id="aa716-188">Value</span></span> |
|-|-|
| <span data-ttu-id="aa716-189">Cliente mínimo compatible</span><span class="sxs-lookup"><span data-stu-id="aa716-189">Minimum supported client</span></span> | <span data-ttu-id="aa716-190">Windows 10, versión 1809 (10,0; Compilación 17763) \[ aplicaciones para UWP de aplicaciones de escritorio \|\]</span><span class="sxs-lookup"><span data-stu-id="aa716-190">Windows 10, version 1809 (10.0; Build 17763) \[desktop apps \| UWP apps\]</span></span> |
| <span data-ttu-id="aa716-191">Encabezado</span><span class="sxs-lookup"><span data-stu-id="aa716-191">Header</span></span> | <span data-ttu-id="aa716-192">d2d1effects \_ 2. h</span><span class="sxs-lookup"><span data-stu-id="aa716-192">d2d1effects\_2.h</span></span> |
| <span data-ttu-id="aa716-193">Biblioteca</span><span class="sxs-lookup"><span data-stu-id="aa716-193">Library</span></span> | <span data-ttu-id="aa716-194">d2d1. lib, dxguid. lib</span><span class="sxs-lookup"><span data-stu-id="aa716-194">d2d1.lib, dxguid.lib</span></span> |

## <a name="related-topics"></a><span data-ttu-id="aa716-195">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="aa716-195">Related topics</span></span>

* [<span data-ttu-id="aa716-196">Interfaz ID2D1Effect</span><span class="sxs-lookup"><span data-stu-id="aa716-196">ID2D1Effect interface</span></span>](/windows/desktop/api/d2d1_1/nn-d2d1_1-id2d1effect)
* [<span data-ttu-id="aa716-197">Enumeración D2D1_WHITELEVELADJUSTMENT_PROP</span><span class="sxs-lookup"><span data-stu-id="aa716-197">D2D1_WHITELEVELADJUSTMENT_PROP enumeration</span></span>](/windows/desktop/api/d2d1effects_2/ne-d2d1effects_2-d2d1_whiteleveladjustment_prop)
