---
title: Uso de la API de virtualización de Escritorio remoto
description: Los desarrolladores pueden usar esta API para personalizar la lógica que usa el agente de conexión a escritorio remoto para determinar el mejor destino para una conexión de cliente entrante.
ms.assetid: b25eb87e-dac4-49ce-890e-b39c7e9e3408
ms.tgt_platform: multiple
keywords:
- Servicios de Escritorio remoto Servicios de Escritorio remoto, uso de la API de virtualización
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cda9ebfc014a2c8ec20d299bbb8be9183b25ce89
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104420832"
---
# <a name="using-the-remote-desktop-virtualization-api"></a><span data-ttu-id="4b72b-104">Uso de la API de virtualización de Escritorio remoto</span><span class="sxs-lookup"><span data-stu-id="4b72b-104">Using the Remote Desktop Virtualization API</span></span>

<span data-ttu-id="4b72b-105">El servicio de rol Terminal Services directorio de sesión (directorio de sesión de TS) permite que los servidores de Terminal Server almacenen información de usuario y de sesión en una base de datos denominada directorio de sesión.</span><span class="sxs-lookup"><span data-stu-id="4b72b-105">The Terminal Services Session Directory (TS  Session Directory) role service allows terminal servers to store user and session information in a database called a session directory.</span></span> <span data-ttu-id="4b72b-106">Cuando un usuario se conecta a un servidor de Terminal Server en una granja, el directorio de sesión de TS determina si el usuario ya tiene una sesión en ejecución en un servidor de Terminal Server y, en caso afirmativo, redirige al usuario a ese servidor de Terminal Server.</span><span class="sxs-lookup"><span data-stu-id="4b72b-106">When a user connects to a terminal server in a farm, TS Session Directory determines whether the user already has a session running on a terminal server and if so, it redirects the user to that terminal server.</span></span>

<span data-ttu-id="4b72b-107">En Windows Server 2008, el servicio de rol directorio de sesión de TS se amplió y cambió de nombre Terminal Services agente de sesiones (agente de sesiones de TS).</span><span class="sxs-lookup"><span data-stu-id="4b72b-107">In Windows Server 2008, the TS Session Directory role service was expanded and renamed Terminal Services Session Broker (TS Session Broker).</span></span> <span data-ttu-id="4b72b-108">Además de mantener un directorio de sesiones existentes, el agente de sesiones de TS también puede Broker las conexiones entrantes.</span><span class="sxs-lookup"><span data-stu-id="4b72b-108">In addition to maintaining a directory of existing sessions, TS Session Broker can also broker incoming connections.</span></span> <span data-ttu-id="4b72b-109">Cuando el agente de sesiones de TS recibe una conexión entrante de un usuario, comprueba su base de datos para determinar si el usuario tiene una sesión existente en un servidor de Terminal Server.</span><span class="sxs-lookup"><span data-stu-id="4b72b-109">When TS Session Broker receives an incoming connection from a user, it checks its database to determine whether the user has an existing session on a terminal server.</span></span> <span data-ttu-id="4b72b-110">Si es así, el agente de sesiones de TS redirige la conexión al mismo servidor de Terminal Server.</span><span class="sxs-lookup"><span data-stu-id="4b72b-110">If so, TS Session Broker redirects the connection to that same terminal server.</span></span> <span data-ttu-id="4b72b-111">Si no es así, el agente de sesiones de TS determina qué Terminal Server tiene el menor número de conexiones y redirige la conexión a ese servidor.</span><span class="sxs-lookup"><span data-stu-id="4b72b-111">If not, TS Session Broker determines which terminal server has the fewest connections and redirects the connection to that server.</span></span>

<span data-ttu-id="4b72b-112">A partir de Windows Server 2008, Microsoft también lanzó una interfaz de programación de aplicaciones (API) pública para supervisar e interactuar con sesiones en servidores de Terminal Server.</span><span class="sxs-lookup"><span data-stu-id="4b72b-112">Beginning with Windows Server 2008, Microsoft also released a public application programming interface (API) for monitoring and interacting with sessions on terminal servers.</span></span> <span data-ttu-id="4b72b-113">Esta API se describe en [conexión a escritorio remoto referencia del complemento de Broker](/windows/desktop/TermServ/terminal-services-virtualization-api-reference).</span><span class="sxs-lookup"><span data-stu-id="4b72b-113">This API is described in [Remote Desktop Connection Broker Plug-in Reference](/windows/desktop/TermServ/terminal-services-virtualization-api-reference).</span></span> <span data-ttu-id="4b72b-114">Con esta API, los desarrolladores pueden crear complementos de directivas personalizados que invalidan la lógica de redirección estándar del agente de sesiones de TS.</span><span class="sxs-lookup"><span data-stu-id="4b72b-114">Using this API, developers can create custom policy plug-ins that override the standard redirection logic of TS Session Broker.</span></span> <span data-ttu-id="4b72b-115">Los complementos personalizados pueden redirigir las sesiones a los servidores de Terminal Server, así como a las máquinas virtuales, los escritorios virtuales, los servidores Blade y los escritorios físicos.</span><span class="sxs-lookup"><span data-stu-id="4b72b-115">The custom plug-ins can redirect sessions to terminal servers, as well as virtual machines, virtual desktops, blade servers, and physical desktops.</span></span>

<span data-ttu-id="4b72b-116">En Windows Server 2008 R2, la arquitectura de Conexión a Escritorio remoto Broker (agente de conexión a escritorio remoto) (anteriormente conocido como agente de sesiones de TS) se amplió para admitir conexiones a máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="4b72b-116">In Windows Server 2008 R2, the architecture of Remote Desktop Connection Broker (RD Connection Broker) (formerly known as TS Session Broker) was expanded to support connections to virtual machines.</span></span> <span data-ttu-id="4b72b-117">La nueva arquitectura admite la administración de sesiones para máquinas virtuales a través de la API de virtualización de Escritorio remoto.</span><span class="sxs-lookup"><span data-stu-id="4b72b-117">The new architecture supports session management for virtual machines through the Remote Desktop Virtualization API.</span></span> <span data-ttu-id="4b72b-118">Los desarrolladores pueden usar esta API para personalizar la lógica que usa el agente de conexión a escritorio remoto para determinar el mejor destino para una conexión de cliente entrante.</span><span class="sxs-lookup"><span data-stu-id="4b72b-118">Developers can use this API to customize the logic that RD Connection Broker uses to determine the best destination for an incoming client connection.</span></span>

<span data-ttu-id="4b72b-119">Escritorio remoto API de virtualización ofrece varias ventajas a los desarrolladores:</span><span class="sxs-lookup"><span data-stu-id="4b72b-119">Remote Desktop Virtualization API offers several benefits to developers:</span></span>

-   <span data-ttu-id="4b72b-120">Las interfaces para trabajar con servidores de Terminal Server físicos son similares a las del trabajo con máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="4b72b-120">The interfaces for working with physical terminal servers are similar to those for working with virtual machines.</span></span>
-   <span data-ttu-id="4b72b-121">Los desarrolladores pueden reemplazar toda o parte de la lógica de redirección estándar.</span><span class="sxs-lookup"><span data-stu-id="4b72b-121">Developers can replace all or part of the standard redirection logic.</span></span> <span data-ttu-id="4b72b-122">Los desarrolladores pueden basarse en el código que se suministra con el producto y no tienen que escribir todo desde cero.</span><span class="sxs-lookup"><span data-stu-id="4b72b-122">Developers can build on the code that ships with the product and do not have to write everything from scratch.</span></span>
-   <span data-ttu-id="4b72b-123">No se requiere ningún agente de administración adicional en el servidor de administración o en la sesión.</span><span class="sxs-lookup"><span data-stu-id="4b72b-123">No additional management agent is required on the managing server or within the session.</span></span>
-   <span data-ttu-id="4b72b-124">Todavía se admiten complementos de agente de sesiones de TS desarrollados para su uso con Windows Server 2008.</span><span class="sxs-lookup"><span data-stu-id="4b72b-124">TS Session Broker plug-ins developed for use with Windows Server 2008 are still supported.</span></span>
-   <span data-ttu-id="4b72b-125">La API también permite a los desarrolladores crear interfaces de usuario para la administración de los servidores host de sesión de Escritorio remoto (host de sesión de escritorio remoto) y las máquinas virtuales.</span><span class="sxs-lookup"><span data-stu-id="4b72b-125">The API also allows developers to create user interfaces for administration of both Remote Desktop Session Host (RD Session Host) servers (formerly known as "terminal servers") and virtual machines.</span></span>

## <a name="related-topics"></a><span data-ttu-id="4b72b-126">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="4b72b-126">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4b72b-127">Referencia de API de virtualización de Escritorio remoto</span><span class="sxs-lookup"><span data-stu-id="4b72b-127">Remote Desktop Virtualization API Reference</span></span>](terminal-services-virtualization-api-reference.md)
</dt> <dt>

[<span data-ttu-id="4b72b-128">Referencia del complemento de agente de Conexión a Escritorio remoto</span><span class="sxs-lookup"><span data-stu-id="4b72b-128">Remote Desktop Connection Broker Plug-in Reference</span></span>](/windows/desktop/TermServ/terminal-services-virtualization-api-reference)
</dt> </dl>

 

 