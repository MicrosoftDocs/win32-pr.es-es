---
title: Operación de WFP
description: La plataforma de filtrado de Windows (WFP) realiza sus tareas mediante la integración de las siguientes capas básicas de entidades, filtros, correcciones de compatibilidad y llamadas.
ms.assetid: bf88ace7-1160-434b-9be0-3f9db6aa2e87
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 44e7a7d38bd0de5b1f549e2187c414644bf68442
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/19/2020
ms.locfileid: "105665815"
---
# <a name="wfp-operation"></a><span data-ttu-id="92b4e-103">Operación de WFP</span><span class="sxs-lookup"><span data-stu-id="92b4e-103">WFP Operation</span></span>

<span data-ttu-id="92b4e-104">La plataforma de filtrado de Windows (WFP) realiza sus tareas mediante la integración de las siguientes entidades básicas: *capas*, *filtros*, *correcciones de compatibilidad* y *llamadas*.</span><span class="sxs-lookup"><span data-stu-id="92b4e-104">Windows Filtering Platform (WFP) performs its tasks by integrating the following basic entities: *Layers*, *Filters*, *Shims*, and *Callouts*.</span></span>

## <a name="layers"></a><span data-ttu-id="92b4e-105">Capas</span><span class="sxs-lookup"><span data-stu-id="92b4e-105">Layers</span></span>

<span data-ttu-id="92b4e-106">Una *capa* es un contenedor administrado por el motor de filtro cuya función es organizar los filtros en conjuntos.</span><span class="sxs-lookup"><span data-stu-id="92b4e-106">A *layer* is a container managed by the filter engine whose function is to organize filters into sets.</span></span> <span data-ttu-id="92b4e-107">Una capa no es un módulo de la pila de red.</span><span class="sxs-lookup"><span data-stu-id="92b4e-107">A layer is not a module in the network stack.</span></span> <span data-ttu-id="92b4e-108">Cada capa tiene un esquema que define el tipo de filtros que se pueden agregar a él.</span><span class="sxs-lookup"><span data-stu-id="92b4e-108">Each layer has a schema that defines the type of filters that can be added to it.</span></span> <span data-ttu-id="92b4e-109">Consulte [condiciones de filtrado disponibles en cada capa de filtrado](filtering-conditions-available-at-each-filtering-layer.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="92b4e-109">See [Filtering Conditions Available at Each Filtering Layer](filtering-conditions-available-at-each-filtering-layer.md) for more information.</span></span>

<span data-ttu-id="92b4e-110">Las capas pueden contener subcapas para administrar los requisitos de filtro en conflicto, como "bloquear puertos TCP por encima de 1024" y "abrir el puerto 1080".</span><span class="sxs-lookup"><span data-stu-id="92b4e-110">Layers may contain sub-layers to manage conflicting filter requirements such as "Block TCP ports above 1024" and "Open port 1080".</span></span> <span data-ttu-id="92b4e-111">Las reglas para administrar conflictos de filtrado se determinan mediante el [arbitraje de filtros](filter-arbitration.md).</span><span class="sxs-lookup"><span data-stu-id="92b4e-111">The rules for managing filtering conflicts are determined by [Filter Arbitration](filter-arbitration.md).</span></span>

<span data-ttu-id="92b4e-112">WFP contiene un conjunto de [subcapas integradas](management-filtering-sublayer-identifiers.md).</span><span class="sxs-lookup"><span data-stu-id="92b4e-112">WFP contains a set of [built-in sub-layers](management-filtering-sublayer-identifiers.md).</span></span> <span data-ttu-id="92b4e-113">Cada capa hereda todas las subcapas integradas.</span><span class="sxs-lookup"><span data-stu-id="92b4e-113">Every layer inherits all the built-in sub-layers.</span></span> <span data-ttu-id="92b4e-114">Los usuarios también pueden agregar sus propias subcapas.</span><span class="sxs-lookup"><span data-stu-id="92b4e-114">Users can also add their own sub-layers.</span></span>

<span data-ttu-id="92b4e-115">La lista de capas del motor de filtros se proporciona en la sección de referencia de los [**identificadores de capas de filtrado**](management-filtering-layer-identifiers-.md).</span><span class="sxs-lookup"><span data-stu-id="92b4e-115">The list of filter engine layers is provided in the reference section topic [**Filtering Layer Identifiers**](management-filtering-layer-identifiers-.md).</span></span>

## <a name="filters"></a><span data-ttu-id="92b4e-116">Filtros</span><span class="sxs-lookup"><span data-stu-id="92b4e-116">Filters</span></span>

<span data-ttu-id="92b4e-117">Un *filtro* es una regla que se compara con los paquetes entrantes o salientes.</span><span class="sxs-lookup"><span data-stu-id="92b4e-117">A *filter* is a rule that is matched against incoming or outgoing packets.</span></span> <span data-ttu-id="92b4e-118">La regla indica al motor de filtrado qué hacer con el paquete, incluido para llamar a un módulo de llamada para la inspección profunda de paquetes o secuencias.</span><span class="sxs-lookup"><span data-stu-id="92b4e-118">The rule tells the filtering engine what to do with the packet, including to call a callout module for deep packet or stream inspection.</span></span> <span data-ttu-id="92b4e-119">Por ejemplo, un filtro puede especificar "bloquear el tráfico con un puerto TCP mayor que 1024" o "llamar a IDENTIFICADOres para todo el tráfico que no está protegido".</span><span class="sxs-lookup"><span data-stu-id="92b4e-119">For example, a filter may specify "Block traffic with a TCP port greater than 1024" or "Call out to IDS for all traffic that is not secured."</span></span>

<span data-ttu-id="92b4e-120">Un filtro en tiempo de arranque es un filtro que se aplica en el momento del arranque en cuanto se inicia el controlador de pila TCP/IP (tcpip.sys).</span><span class="sxs-lookup"><span data-stu-id="92b4e-120">A boot-time filter is a filter that is enforced at boot-time as soon as the TCP/IP stack driver (tcpip.sys) starts.</span></span> <span data-ttu-id="92b4e-121">Se deshabilita un filtro de tiempo de arranque cuando se inicia BFE.</span><span class="sxs-lookup"><span data-stu-id="92b4e-121">A boot-time filter is disabled when BFE starts.</span></span> <span data-ttu-id="92b4e-122">Un filtro se marca como de tiempo de arranque mediante el establecimiento de la marca de [**filtro FWPM de \_ \_ \_ BOOTTIME**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_filter0) cuando se invoca [**FwpmFilterAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmfilteradd0) .</span><span class="sxs-lookup"><span data-stu-id="92b4e-122">A filter is marked as boot-time by setting the [**FWPM\_FILTER\_FLAG\_BOOTTIME**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_filter0) flag when [**FwpmFilterAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmfilteradd0) is invoked.</span></span>

<span data-ttu-id="92b4e-123">Un filtro en tiempo de ejecución es un filtro que se aplica después de que se inicia BFE.</span><span class="sxs-lookup"><span data-stu-id="92b4e-123">A run-time filter is a filter that is enforced after BFE starts.</span></span> <span data-ttu-id="92b4e-124">Un filtro en tiempo de ejecución puede ser estático, dinámico o persistente en función de la forma en que se creó.</span><span class="sxs-lookup"><span data-stu-id="92b4e-124">A run-time filter can be static, dynamic, or persistent depending on the way it was created.</span></span> <span data-ttu-id="92b4e-125">Vea [Administración de objetos](object-management.md) para obtener más información sobre los diferentes tipos de filtros en tiempo de ejecución y su duración.</span><span class="sxs-lookup"><span data-stu-id="92b4e-125">See [Object Management](object-management.md) for more information on the different types of run-time filters and their lifetime.</span></span>

## <a name="shims"></a><span data-ttu-id="92b4e-126">Correcciones</span><span class="sxs-lookup"><span data-stu-id="92b4e-126">Shims</span></span>

<span data-ttu-id="92b4e-127">Una *corrección de compatibilidad (Shim* ) es un componente de modo kernel que toma decisiones de filtrado mediante la clasificación de las capas del motor de filtro.</span><span class="sxs-lookup"><span data-stu-id="92b4e-127">A *shim* is a kernel-mode component that makes filtering decisions by classifying against the filter engine layers.</span></span> <span data-ttu-id="92b4e-128">Cada corrección de compatibilidad se clasifica en una o más capas.</span><span class="sxs-lookup"><span data-stu-id="92b4e-128">Each shim classifies against one or more layers.</span></span> <span data-ttu-id="92b4e-129">Por ejemplo, la corrección de compatibilidad del módulo de capa de transporte se clasifica en la capa de transporte de entrada, la capa de transporte de salida y los niveles de conexión y Receive-Accept ALE para el primer paquete de un flujo.</span><span class="sxs-lookup"><span data-stu-id="92b4e-129">For example, the Transport Layer Module shim classifies against the Inbound Transport layer, the Outbound Transport layer, and the ALE Connect and Receive-Accept layers for the first packet of a flow.</span></span>

<span data-ttu-id="92b4e-130">A medida que los paquetes, los flujos y los eventos atraviesan la pila de red, las correcciones de compatibilidad las analizan para extraer las condiciones y los valores clasificables y, a continuación, se llama al motor de filtro para evaluarlos con respecto a los filtros de una capa determinada.</span><span class="sxs-lookup"><span data-stu-id="92b4e-130">As packets, streams, and events traverse the network stack, the shims parse them to extract the classifiable conditions and values, and then call into the filter engine to evaluate them against the filters in a given layer.</span></span> <span data-ttu-id="92b4e-131">El motor de filtro puede invocar una o varias llamadas como parte de la clasificación.</span><span class="sxs-lookup"><span data-stu-id="92b4e-131">The filter engine may invoke one or more callouts as part of the classification.</span></span> <span data-ttu-id="92b4e-132">Las correcciones de compatibilidad (shim) realizan la eliminación real de paquetes, secuencias y eventos según el resultado de la clasificación realizada por el motor de filtro.</span><span class="sxs-lookup"><span data-stu-id="92b4e-132">The shims do the actual dropping of packets, streams, and events based on the result of the classification performed by the filter engine.</span></span>

## <a name="callouts"></a><span data-ttu-id="92b4e-133">Llamadas</span><span class="sxs-lookup"><span data-stu-id="92b4e-133">Callouts</span></span>

<span data-ttu-id="92b4e-134">Una *llamada* es un conjunto de funciones expuestas por un controlador y que se usa para el filtrado especializado.</span><span class="sxs-lookup"><span data-stu-id="92b4e-134">A *callout* is a set of functions exposed by a driver and used for specialized filtering.</span></span> <span data-ttu-id="92b4e-135">Se usan para realizar el análisis y la manipulación de los paquetes, como el examen de virus, los controles parentales examinan el contenido inadecuado, el análisis de los datos de paquetes para las herramientas de supervisión.</span><span class="sxs-lookup"><span data-stu-id="92b4e-135">They are used to perform analysis and manipulation of the packets, such as virus scan, parental controls scan for inappropriate content, packet data parsing for monitoring tools.</span></span> <span data-ttu-id="92b4e-136">Algunas llamadas, como el controlador de traducción de direcciones de red (NAT), están integradas en el sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="92b4e-136">Some callouts, such as the Network Address Translation (NAT) driver, are built into the operating system.</span></span> <span data-ttu-id="92b4e-137">Otros fabricantes de software independientes (ISV) pueden proporcionar otras personas, como una llamada de control parental de HTTP o la llamada del sistema de detección de intrusiones (IDS).</span><span class="sxs-lookup"><span data-stu-id="92b4e-137">Others, such as an HTTP Parental Control callout or the Intrusion Detection System (IDS) callout, can be provided by independent software vendors (ISVs).</span></span> <span data-ttu-id="92b4e-138">El motor de filtro invoca las funciones de llamada cuando se hace coincidir un filtro de llamada correspondiente en un nivel determinado.</span><span class="sxs-lookup"><span data-stu-id="92b4e-138">The callout functions are invoked by the filter engine when a corresponding callout filter is matched at a given layer.</span></span>

<span data-ttu-id="92b4e-139">Las llamadas se pueden registrar en cualquiera de las capas de WFP de modo kernel.</span><span class="sxs-lookup"><span data-stu-id="92b4e-139">Callouts can be registered at any of the kernel-mode WFP layers.</span></span> <span data-ttu-id="92b4e-140">Las llamadas pueden devolver una acción ("bloquear", "permitir" y, al realizar la inspección de la secuencia, "aplazar", "necesitar más datos", "quitar conexión") y puede modificar y proteger el tráfico de red entrante y saliente.</span><span class="sxs-lookup"><span data-stu-id="92b4e-140">Callouts can return an action ("Block", "Permit", and, when performing stream inspection, "Defer", "Need more data", "Drop connection") and can modify and secure inbound and outbound network traffic.</span></span>

<span data-ttu-id="92b4e-141">Una vez que se registra una llamada con el motor de filtro, puede recibir el tráfico de red que se va a procesar.</span><span class="sxs-lookup"><span data-stu-id="92b4e-141">Once a callout is registered with the filter engine, it can receive network traffic to process.</span></span> <span data-ttu-id="92b4e-142">El tráfico puede ser paquetes, secuencias o eventos en función de la capa.</span><span class="sxs-lookup"><span data-stu-id="92b4e-142">The traffic may be packets, streams, or events depending on the layer.</span></span> <span data-ttu-id="92b4e-143">Un agente de aplicación o firewall hace que el tráfico se pase a una llamada agregando un filtro cuya acción es "callout" y cuyo identificador de llamada es el identificador de la llamada.</span><span class="sxs-lookup"><span data-stu-id="92b4e-143">An application or firewall agent causes traffic to be passed to a callout by adding a filter whose action is "Callout" and whose callout ID is that callout's identifier.</span></span> <span data-ttu-id="92b4e-144">Las llamadas pueden indicar al motor de filtro que devuelva "bloquear" o "permitir" a la corrección de compatibilidad.</span><span class="sxs-lookup"><span data-stu-id="92b4e-144">Callouts can instruct the filter engine to return "Block" or "Permit" to the shim.</span></span> <span data-ttu-id="92b4e-145">Las llamadas también pueden devolver "Continue" para permitir que otros filtros procesen el paquete.</span><span class="sxs-lookup"><span data-stu-id="92b4e-145">Callouts can also return "Continue" to allow other filters to process the packet.</span></span>

<span data-ttu-id="92b4e-146">Un controlador de llamada puede exponer varias llamadas.</span><span class="sxs-lookup"><span data-stu-id="92b4e-146">Multiple callouts may be exposed by one callout driver.</span></span>

<span data-ttu-id="92b4e-147">Una llamada debe agregarse (con [**FwpmCalloutAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmcalloutadd0)) y registrarse (con [FwpsCalloutRegister](/windows-hardware/drivers/ddi/_netvista/)) antes de que se pueda usar.</span><span class="sxs-lookup"><span data-stu-id="92b4e-147">A callout needs to be added (with [**FwpmCalloutAdd0**](/windows/desktop/api/Fwpmu/nf-fwpmu-fwpmcalloutadd0)) and registered (with [FwpsCalloutRegister](/windows-hardware/drivers/ddi/_netvista/)) before it can be used.</span></span> <span data-ttu-id="92b4e-148">Se requiere una llamada a **FwpmCalloutAdd0** antes de la creación de filtros que hacen referencia a la llamada.</span><span class="sxs-lookup"><span data-stu-id="92b4e-148">A call to **FwpmCalloutAdd0** is required before the creation of filters that reference the callout.</span></span> <span data-ttu-id="92b4e-149">Se requiere una llamada a FwpsCalloutRegister para que WFP pueda invocar la llamada cuando se encuentren coincidencias con los filtros de llamada.</span><span class="sxs-lookup"><span data-stu-id="92b4e-149">A call to FwpsCalloutRegister is required before WFP can invoke the callout when the callout filters are matched.</span></span> <span data-ttu-id="92b4e-150">De forma predeterminada, los filtros que hacen referencia a llamadas que se han agregado pero que todavía no se han registrado con el motor de filtro se tratan como filtros de "bloque".</span><span class="sxs-lookup"><span data-stu-id="92b4e-150">By default filters that reference callouts that have been added but have not yet registered with the filter engine are treated as "Block" filters.</span></span> <span data-ttu-id="92b4e-151">No importa el orden de llamar a **FwpmCalloutAdd0** y FwpsCalloutRegister.</span><span class="sxs-lookup"><span data-stu-id="92b4e-151">The order of calling **FwpmCalloutAdd0** and FwpsCalloutRegister does not matter.</span></span> <span data-ttu-id="92b4e-152">Una llamada persistente debe agregarse una sola vez y debe registrarse cada vez que se inicie el controlador que implementa la llamada (por ejemplo, después de un reinicio).</span><span class="sxs-lookup"><span data-stu-id="92b4e-152">A persistent callout needs to be added just once and needs to be registered every time the driver that implements the callout starts (for example, after a reboot).</span></span>

## <a name="classification"></a><span data-ttu-id="92b4e-153">Clasificación</span><span class="sxs-lookup"><span data-stu-id="92b4e-153">Classification</span></span>

<span data-ttu-id="92b4e-154">La clasificación es el proceso de aplicar filtros al tráfico de red (paquete, secuencia o evento) con el fin de determinar el resultado de "permitir" o "bloquear" para ese tráfico.</span><span class="sxs-lookup"><span data-stu-id="92b4e-154">Classification is the process of applying filters to network traffic (packet, stream, or event) in order to determine a result of "Permit" or "Block" for that traffic.</span></span> <span data-ttu-id="92b4e-155">Para un paquete, secuencia o evento hay una llamada de clasificación por nivel.</span><span class="sxs-lookup"><span data-stu-id="92b4e-155">For one packet, stream, or event there is one classification call per layer.</span></span>

<span data-ttu-id="92b4e-156">Durante la clasificación, las propiedades (por ejemplo, la dirección de origen) del paquete, la secuencia o el evento se comparan con las condiciones de filtro establecidas en los filtros de la capa en la que se invoca la clasificación.</span><span class="sxs-lookup"><span data-stu-id="92b4e-156">During classification, the properties (for example, source address) of the packet, stream, or event are compared with filter conditions set on filters at the layer where the classification is invoked.</span></span> <span data-ttu-id="92b4e-157">Cuando se encuentran coincidencias, se usa el algoritmo de [arbitraje de filtro](filter-arbitration.md) para determinar el resultado del proceso de clasificación.</span><span class="sxs-lookup"><span data-stu-id="92b4e-157">When matches are found, the [Filter Arbitration](filter-arbitration.md) algorithm is used to determines the result of the classification process.</span></span>

<span data-ttu-id="92b4e-158">Un Shim desencadena una solicitud de clasificación.</span><span class="sxs-lookup"><span data-stu-id="92b4e-158">A classification request is triggered by a shim.</span></span>

<span data-ttu-id="92b4e-159">Las acciones de clasificación pueden ser:</span><span class="sxs-lookup"><span data-stu-id="92b4e-159">Classification actions could be either:</span></span>

-   <span data-ttu-id="92b4e-160">Permitir</span><span class="sxs-lookup"><span data-stu-id="92b4e-160">Permit</span></span>
-   <span data-ttu-id="92b4e-161">Bloquear</span><span class="sxs-lookup"><span data-stu-id="92b4e-161">Block</span></span>
-   <span data-ttu-id="92b4e-162">Llamada</span><span class="sxs-lookup"><span data-stu-id="92b4e-162">Callout</span></span>
    -   <span data-ttu-id="92b4e-163">Permitir</span><span class="sxs-lookup"><span data-stu-id="92b4e-163">Permit</span></span>
    -   <span data-ttu-id="92b4e-164">Bloquear</span><span class="sxs-lookup"><span data-stu-id="92b4e-164">Block</span></span>
    -   <span data-ttu-id="92b4e-165">Continuar</span><span class="sxs-lookup"><span data-stu-id="92b4e-165">Continue</span></span>
    -   <span data-ttu-id="92b4e-166">Acepta</span><span class="sxs-lookup"><span data-stu-id="92b4e-166">Defer</span></span>
    -   <span data-ttu-id="92b4e-167">Necesita más datos</span><span class="sxs-lookup"><span data-stu-id="92b4e-167">Need more data</span></span>
    -   <span data-ttu-id="92b4e-168">Quitar conexión</span><span class="sxs-lookup"><span data-stu-id="92b4e-168">Drop connection</span></span>

## <a name="wfp-operation"></a><span data-ttu-id="92b4e-169">Operación de WFP</span><span class="sxs-lookup"><span data-stu-id="92b4e-169">WFP Operation</span></span>

<span data-ttu-id="92b4e-170">En el momento del arranque, en cuanto se inicia el controlador de pila TCP/IP (tcpip.sys), el motor de filtro de modo kernel aplica la Directiva de seguridad del sistema a través de filtros en tiempo de arranque.</span><span class="sxs-lookup"><span data-stu-id="92b4e-170">At boot-time, as soon as the TCP/IP stack driver (tcpip.sys) starts, the kernel-mode filter engine enforces the security policy of the system through boot-time filters.</span></span>

<span data-ttu-id="92b4e-171">Una vez que el motor de filtrado de base (BFE) se inicia en modo de usuario, los filtros persistentes se agregan a la plataforma, se deshabilitan los filtros de tiempo de arranque y se envían notificaciones a los controladores de llamadas que se suscribieron mediante [FwpmBfeStateSubscribeChanges0](/windows-hardware/drivers/ddi/fwpmk/nf-fwpmk-fwpmbfestatesubscribechanges0).</span><span class="sxs-lookup"><span data-stu-id="92b4e-171">Once the Base Filtering Engine (BFE) starts in user mode, persistent filters are added to the platform, boot-time filters are disabled, and notifications are sent to those callout drivers that subscribed using [FwpmBfeStateSubscribeChanges0](/windows-hardware/drivers/ddi/fwpmk/nf-fwpmk-fwpmbfestatesubscribechanges0).</span></span> <span data-ttu-id="92b4e-172">Las notificaciones se envían inmediatamente después de que se complete la inicialización de BFE.</span><span class="sxs-lookup"><span data-stu-id="92b4e-172">The notifications are dispatched immediately after the BFE initialization is completed.</span></span> <span data-ttu-id="92b4e-173">La plataforma ahora está lista para que se registren las llamadas y para que se agreguen los objetos en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="92b4e-173">The platform is now ready for callouts to be registered and for run-time objects to be added.</span></span>

<span data-ttu-id="92b4e-174">La transición desde el tiempo de arranque a los filtros persistentes puede ser de varios segundos o incluso más en un equipo lento.</span><span class="sxs-lookup"><span data-stu-id="92b4e-174">The transition from boot-time to persistent filters could be several seconds, or even longer on a slow machine.</span></span> <span data-ttu-id="92b4e-175">Es atómico, por lo que si un proveedor tiene un filtro persistente y un tiempo de arranque, nunca habrá una ventana cuando no haya ninguna en vigor.</span><span class="sxs-lookup"><span data-stu-id="92b4e-175">It is atomic, so if a provider has both a boot-time and a persistent filter, there will never be a window when neither is in effect.</span></span>

<span data-ttu-id="92b4e-176">Una vez iniciado BFE, los agentes de Firewall pueden agregar filtros en tiempo de ejecución o soluciones de Firewall personalizadas.</span><span class="sxs-lookup"><span data-stu-id="92b4e-176">After BFE starts, run-time filters can be added by firewall agents, or by custom firewall solutions.</span></span> <span data-ttu-id="92b4e-177">BFE procesa estos filtros y los envía a la capa del motor de filtros adecuada para su cumplimiento.</span><span class="sxs-lookup"><span data-stu-id="92b4e-177">BFE processes these filters and sends them to the appropriate filter engine layer for enforcement.</span></span> <span data-ttu-id="92b4e-178">BFE también acepta la configuración de autenticación y envía esta configuración a los módulos de creación de claves IPsec (IKE/AuthIP).</span><span class="sxs-lookup"><span data-stu-id="92b4e-178">BFE also accepts authentication settings and sends these settings to the IPsec keying modules (IKE/AuthIP).</span></span> <span data-ttu-id="92b4e-179">Consulte [configuración de IPSec](ipsec-configuration.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="92b4e-179">See [IPsec Configuration](ipsec-configuration.md) for more information.</span></span>

<span data-ttu-id="92b4e-180">En cualquier momento, los filtros y la configuración de autenticación se pueden agregar, quitar o cambiar en el sistema a través de la interfaz RPC expuesta por BFE.</span><span class="sxs-lookup"><span data-stu-id="92b4e-180">At any time, filters and authentication settings can be added, removed or changed in the system through the RPC interface exposed by the BFE.</span></span> <span data-ttu-id="92b4e-181">También se pueden agregar o quitar subcapas y módulos de llamada.</span><span class="sxs-lookup"><span data-stu-id="92b4e-181">Sub-layers and callout modules can likewise be added or removed.</span></span>

<span data-ttu-id="92b4e-182">Flujo de datos:</span><span class="sxs-lookup"><span data-stu-id="92b4e-182">Data flow:</span></span>

1.  <span data-ttu-id="92b4e-183">Un paquete entra en la pila de red.</span><span class="sxs-lookup"><span data-stu-id="92b4e-183">A packet comes into the network stack.</span></span>
2.  <span data-ttu-id="92b4e-184">La pila de red busca y llama a una corrección de compatibilidad.</span><span class="sxs-lookup"><span data-stu-id="92b4e-184">The network stack finds and calls a shim.</span></span>
3.  <span data-ttu-id="92b4e-185">La corrección de compatibilidad invoca el proceso de clasificación en una capa determinada.</span><span class="sxs-lookup"><span data-stu-id="92b4e-185">The shim invokes the classification process at a particular layer.</span></span>
4.  <span data-ttu-id="92b4e-186">Durante la clasificación, se buscan coincidencias con los filtros y se realiza la acción resultante.</span><span class="sxs-lookup"><span data-stu-id="92b4e-186">During classification, filters are matched and the resultant action is taken.</span></span> <span data-ttu-id="92b4e-187">(Consulte [arbitraje de filtros](filter-arbitration.md)).</span><span class="sxs-lookup"><span data-stu-id="92b4e-187">(See [Filter Arbitration](filter-arbitration.md).)</span></span>
5.  <span data-ttu-id="92b4e-188">Si los filtros de llamada coinciden durante el proceso de clasificación, se invocan las llamadas correspondientes.</span><span class="sxs-lookup"><span data-stu-id="92b4e-188">If any callout filters are matched during the classification process, the corresponding callouts are invoked.</span></span>
6.  <span data-ttu-id="92b4e-189">La corrección de compatibilidad (shim) actúa en la decisión de filtrado final (por ejemplo, quitar el paquete).</span><span class="sxs-lookup"><span data-stu-id="92b4e-189">The shim acts on the final filtering decision (for example, drop the packet).</span></span>

<span data-ttu-id="92b4e-190">El flujo de datos de salida sigue un patrón similar.</span><span class="sxs-lookup"><span data-stu-id="92b4e-190">Outbound data flow follows a similar pattern.</span></span>

<span data-ttu-id="92b4e-191">En los temas siguientes se describe con más detalle el funcionamiento de WFP.</span><span class="sxs-lookup"><span data-stu-id="92b4e-191">The following topics further describe the operation of the WFP.</span></span>

-   [<span data-ttu-id="92b4e-192">Flujos de paquetes TCP</span><span class="sxs-lookup"><span data-stu-id="92b4e-192">TCP Packet Flows</span></span>](tcp-packet-flows.md)
-   [<span data-ttu-id="92b4e-193">Flujos de paquetes UDP</span><span class="sxs-lookup"><span data-stu-id="92b4e-193">UDP Packet Flows</span></span>](udp-packet-flows.md)
-   [<span data-ttu-id="92b4e-194">Arbitraje de filtro</span><span class="sxs-lookup"><span data-stu-id="92b4e-194">Filter Arbitration</span></span>](filter-arbitration.md)

## <a name="related-topics"></a><span data-ttu-id="92b4e-195">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="92b4e-195">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="92b4e-196">Modelo de objetos</span><span class="sxs-lookup"><span data-stu-id="92b4e-196">Object Model</span></span>](object-model.md)
</dt> <dt>

[<span data-ttu-id="92b4e-197">Administración de objetos</span><span class="sxs-lookup"><span data-stu-id="92b4e-197">Object Management</span></span>](object-management.md)
</dt> </dl>

 

 