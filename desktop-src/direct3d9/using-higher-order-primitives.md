---
description: En esta sección se muestra cómo usar primitivas de orden superior en la aplicación.
ms.assetid: 7aa4f3ab-cfce-4f8f-a538-384f038fd324
title: Usar primitivas de Higher-Order (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7e8d1447635c38e5e5df3d16ebca5ee3ee142020
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104562719"
---
# <a name="using-higher-order-primitives-direct3d-9"></a><span data-ttu-id="3eb2d-103">Usar primitivas de Higher-Order (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="3eb2d-103">Using Higher-Order Primitives (Direct3D 9)</span></span>

<span data-ttu-id="3eb2d-104">En esta sección se muestra cómo usar primitivas de orden superior en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-104">This section shows you how to use higher-order primitives in your application.</span></span>

-   [<span data-ttu-id="3eb2d-105">Determinación de la compatibilidad con Higher-Order primitiva</span><span class="sxs-lookup"><span data-stu-id="3eb2d-105">Determining Higher-Order Primitive Support</span></span>](#determining-higher-order-primitive-support)
-   [<span data-ttu-id="3eb2d-106">Dibujar revisiones</span><span class="sxs-lookup"><span data-stu-id="3eb2d-106">Drawing Patches</span></span>](#drawing-patches)
-   [<span data-ttu-id="3eb2d-107">Generar las coordenadas normales y de textura</span><span class="sxs-lookup"><span data-stu-id="3eb2d-107">Generating Normals and Texture Coordinates</span></span>](#generating-normals-and-texture-coordinates)

## <a name="determining-higher-order-primitive-support"></a><span data-ttu-id="3eb2d-108">Determinación de la compatibilidad con Higher-Order primitiva</span><span class="sxs-lookup"><span data-stu-id="3eb2d-108">Determining Higher-Order Primitive Support</span></span>

<span data-ttu-id="3eb2d-109">Se puede consultar el miembro DevCaps de la estructura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) para determinar el nivel de compatibilidad para las operaciones que implican primitivas de orden superior.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-109">The [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's DevCaps member can be queried to determine the level of support for operations involving higher-order primitives.</span></span> <span data-ttu-id="3eb2d-110">En la tabla siguiente se enumeran las funcionalidades del dispositivo relacionadas con los primitivos de orden superior en Direct3D 9.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-110">The following table lists the device capabilities related to higher-order primitives in Direct3D 9.</span></span>



| <span data-ttu-id="3eb2d-111">Funcionalidad del dispositivo</span><span class="sxs-lookup"><span data-stu-id="3eb2d-111">Device capability</span></span>             | <span data-ttu-id="3eb2d-112">Descripción</span><span class="sxs-lookup"><span data-stu-id="3eb2d-112">Description</span></span>                                                                                                                                                  |
|-------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="3eb2d-113">D3DDEVCAPS \_ NPATCHES</span><span class="sxs-lookup"><span data-stu-id="3eb2d-113">D3DDEVCAPS\_NPATCHES</span></span>          | <span data-ttu-id="3eb2d-114">El dispositivo admite N-patches y se basa en [triángulos de PN curvos](https://alex.vlachos.com/graphics/CurvedPNTriangles.pdf) (un tipo especial de triángulos Bézier cúbicos).</span><span class="sxs-lookup"><span data-stu-id="3eb2d-114">Device supports N-patches and is based on [Curved PN Triangles](https://alex.vlachos.com/graphics/CurvedPNTriangles.pdf) (a special kind of cubic Bézier triangles).</span></span> |
| <span data-ttu-id="3eb2d-115">D3DDEVCAPS \_ QUINTICRTPATCHES</span><span class="sxs-lookup"><span data-stu-id="3eb2d-115">D3DDEVCAPS\_QUINTICRTPATCHES</span></span>  | <span data-ttu-id="3eb2d-116">El dispositivo admite curvas Bézier quintales y B-Splines.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-116">Device supports quintic Bezier curves and B-splines.</span></span>                                                                                                         |
| <span data-ttu-id="3eb2d-117">D3DDEVCAPS \_ RTPATCHES</span><span class="sxs-lookup"><span data-stu-id="3eb2d-117">D3DDEVCAPS\_RTPATCHES</span></span>         | <span data-ttu-id="3eb2d-118">El dispositivo es compatible con las revisiones rectangulares y triangulares (RT-patchs).</span><span class="sxs-lookup"><span data-stu-id="3eb2d-118">Device supports rectangular and triangular patches (RT-patches).</span></span>                                                                                             |
| <span data-ttu-id="3eb2d-119">D3DDEVCAPS \_ RTPATCHHANDLEZERO</span><span class="sxs-lookup"><span data-stu-id="3eb2d-119">D3DDEVCAPS\_RTPATCHHANDLEZERO</span></span> | <span data-ttu-id="3eb2d-120">RT: las revisiones se pueden dibujar eficazmente con el identificador cero.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-120">RT-patches might be drawn efficiently using handle zero.</span></span>                                                                                                     |



 

<span data-ttu-id="3eb2d-121">Tenga en cuenta que D3DDEVCAPS \_ RTPATCHHANDLEZERO no significa que se pueda dibujar una revisión con el identificador cero.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-121">Note that D3DDEVCAPS\_RTPATCHHANDLEZERO does not mean that a patch with handle zero can be drawn.</span></span> <span data-ttu-id="3eb2d-122">Siempre se puede dibujar un identificador sin revisión, si esta funcionalidad del dispositivo está establecida o no.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-122">A handle zero patch can always be drawn, whether this device capability is set or not.</span></span> <span data-ttu-id="3eb2d-123">Cuando se establece esta funcionalidad, la arquitectura de hardware no requiere almacenamiento en caché de ninguna información y las revisiones sin almacenamiento en caché (identificador cero) se dibujan de la manera más eficaz que las almacenadas en caché.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-123">When this capability is set, the hardware architecture does not require caching of any information and that uncached patches (handle zero) be drawn as efficiently as cached ones.</span></span>

## <a name="drawing-patches"></a><span data-ttu-id="3eb2d-124">Dibujar revisiones</span><span class="sxs-lookup"><span data-stu-id="3eb2d-124">Drawing Patches</span></span>

<span data-ttu-id="3eb2d-125">Direct3D 9 admite dos tipos de elementos primitivos de orden superior o revisiones.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-125">Direct3D 9 supports two types of higher-order primitives, or patches.</span></span> <span data-ttu-id="3eb2d-126">Estas se conocen como parches N-patchs y Rect/Tri.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-126">These are referred to as N-Patches and Rect/Tri patches.</span></span> <span data-ttu-id="3eb2d-127">N-las revisiones se pueden representar con cualquier llamada de representación por triángulo habilitando N-patches a través de la llamada a [**IDirect3DDevice9:: SetNPatchMode**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setnpatchmode)(nSegments) con un valor de nSegments superior a 1,0.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-127">N-patches can be rendered using any triangle rendering call by enabling N-patches through the call to [**IDirect3DDevice9::SetNPatchMode**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setnpatchmode)( nSegments ) with nSegments value greater than 1.0.</span></span> <span data-ttu-id="3eb2d-128">Las revisiones Rect/Tri se deben representar con los siguientes puntos de entrada explícitos.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-128">Rect/Tri patches must be rendered using the following explicit entry points.</span></span>

<span data-ttu-id="3eb2d-129">Puede usar los métodos siguientes para dibujar revisiones.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-129">You can use the following methods to draw patches.</span></span>

-   <span data-ttu-id="3eb2d-130">[**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch).</span><span class="sxs-lookup"><span data-stu-id="3eb2d-130">[**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch).</span></span> <span data-ttu-id="3eb2d-131">Para comprender mejor cómo se hace referencia a los datos de la revisión en el búfer de vértices, consulte [**D3DRECTPATCH \_ info**](d3drectpatch-info.md).</span><span class="sxs-lookup"><span data-stu-id="3eb2d-131">To better understand how the patch data is referenced in the vertex buffer, see [**D3DRECTPATCH\_INFO**](d3drectpatch-info.md).</span></span>
-   <span data-ttu-id="3eb2d-132">[**IDirect3DDevice9::D rawtripatch**](/windows/desktop/api).</span><span class="sxs-lookup"><span data-stu-id="3eb2d-132">[**IDirect3DDevice9::DrawTriPatch**](/windows/desktop/api).</span></span> <span data-ttu-id="3eb2d-133">Para comprender mejor cómo se hace referencia a los datos de la revisión en el búfer de vértices, consulte [**D3DTRIPATCH \_ info**](d3dtripatch-info.md).</span><span class="sxs-lookup"><span data-stu-id="3eb2d-133">To better understand how the patch data is referenced in the vertex buffer, see [**D3DTRIPATCH\_INFO**](d3dtripatch-info.md).</span></span>

<span data-ttu-id="3eb2d-134">[**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) dibuja una revisión rectangular de orden superior especificada por el parámetro pRectPatchInfo mediante las secuencias establecidas actualmente.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-134">[**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) draws a rectangular high-order patch specified by the pRectPatchInfo parameter using the currently set streams.</span></span> <span data-ttu-id="3eb2d-135">El parámetro Handle se usa para asociar la revisión a un identificador, de modo que la próxima vez que se dibuje la revisión, no sea necesario volver a especificar pRectPatchInfo.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-135">The Handle parameter is used to associate the patch with a handle, so that the next time the patch is drawn, there is no need to respecify pRectPatchInfo.</span></span> <span data-ttu-id="3eb2d-136">Esto hace posible calcular y almacenar en caché los coeficientes de diferencia y otra información, lo que a su vez permite llamadas posteriores a **IDirect3DDevice9::D rawrectpatch** con el mismo identificador para ejecutarse de forma eficaz.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-136">This makes it possible to precompute and cache forward difference coefficients or other information, which in turn enables subsequent calls to **IDirect3DDevice9::DrawRectPatch** using the same handle to run efficiently.</span></span>

<span data-ttu-id="3eb2d-137">Está pensada para las revisiones estáticas, una aplicación establecería el sombreador de vértices y las secuencias adecuadas, suministraría información de revisión en el parámetro pRectPatchInfo y especificaría un identificador para que Direct3D pueda capturar y almacenar en caché información.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-137">It is intended that for static patches, an application would set the vertex shader and appropriate streams, supply patch information in the pRectPatchInfo parameter, and specify a handle so that Direct3D can capture and cache information.</span></span> <span data-ttu-id="3eb2d-138">A continuación, la aplicación puede llamar a [**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) posteriormente con pRectPatchInfo establecido en **null** para dibujar la revisión de forma eficaz.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-138">The application can then call [**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) subsequently with pRectPatchInfo set to **NULL** to efficiently draw the patch.</span></span> <span data-ttu-id="3eb2d-139">Al dibujar una revisión almacenada en caché, se omiten las secuencias establecidas actualmente.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-139">When drawing a cached patch, the currently set streams are ignored.</span></span> <span data-ttu-id="3eb2d-140">Sin embargo, es posible invalidar el pNumSegs almacenado en caché especificando nuevos valores para pNumSegs.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-140">However, it is possible to override the cached pNumSegs by specifying new values for pNumSegs.</span></span> <span data-ttu-id="3eb2d-141">Además, es necesario establecer el mismo sombreador de vértices al representar una revisión almacenada en caché tal y como se estableció cuando se capturó.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-141">Also, it is required to set the same vertex shader when rendering a cached patch as was set when it was captured.</span></span>

<span data-ttu-id="3eb2d-142">En el caso de las revisiones dinámicas, los datos de revisión cambian para cada representación de la revisión, por lo que no es eficaz almacenar en caché la información.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-142">For dynamic patches, the patch data changes for every rendering of the patch, so it is not efficient to cache information.</span></span> <span data-ttu-id="3eb2d-143">La aplicación puede transmitir esto a Direct3D estableciendo el identificador en 0.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-143">The application can convey this to Direct3D by setting Handle to 0.</span></span> <span data-ttu-id="3eb2d-144">En este caso, Direct3D dibuja la revisión mediante las secuencias establecidas actualmente y los valores pNumSegs y no almacena en caché ninguna información.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-144">In this case, Direct3D draws the patch using the currently set streams and the pNumSegs values and does not cache any information.</span></span> <span data-ttu-id="3eb2d-145">No es válido establecer simultáneamente el identificador en 0 y pPatch en **null**.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-145">It is not valid to simultaneously set Handle to 0 and pPatch to **NULL**.</span></span>

<span data-ttu-id="3eb2d-146">Al volver a especificar pRectPatchInfo para el mismo identificador, la aplicación puede sobrescribir la información almacenada previamente en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-146">By respecifying pRectPatchInfo for the same handle, the application can overwrite the previously cached information.</span></span>

<span data-ttu-id="3eb2d-147">[**IDirect3DDevice9::D rawtripatch**](/windows/desktop/api) es similar a [**IDirect3DDevice9::D rawrectpatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) , salvo que dibuja una revisión de orden superior triangular.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-147">[**IDirect3DDevice9::DrawTriPatch**](/windows/desktop/api) is similar to [**IDirect3DDevice9::DrawRectPatch**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-drawrectpatch) except that it draws a triangular high-order patch.</span></span>

## <a name="generating-normals-and-texture-coordinates"></a><span data-ttu-id="3eb2d-148">Generar las coordenadas normales y de textura</span><span class="sxs-lookup"><span data-stu-id="3eb2d-148">Generating Normals and Texture Coordinates</span></span>

<span data-ttu-id="3eb2d-149">Si usa un sombreador de formato de vértice flexible (FVF), no es posible la generación automática de las coordenadas normales y de textura.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-149">If you are using a flexible vertex format (FVF) shader, automatic generation of normals and texture coordinates is not possible.</span></span>

<span data-ttu-id="3eb2d-150">Para los valores normales, puede proporcionarlos directamente o hacer que Direct3D los calcule automáticamente.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-150">For normals, you can either directly supply them or have Direct3D calculate them for you.</span></span>

<span data-ttu-id="3eb2d-151">Las coordenadas generadas para las revisiones rectangulares son coordenadas basadas en spline, tal como se muestra en las ilustraciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-151">The coordinates generated for rectangular patches are spline-based coordinates, as shown in the following illustrations.</span></span>

![Ilustración de una textura original y la textura con coordenadas basadas en spline](images/texturespline.png)

<span data-ttu-id="3eb2d-153">Las coordenadas generadas para las revisiones triangulares son coordenadas basadas en spline Barycentric, tal y como se muestra en las ilustraciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-153">The coordinates generated for triangular patches are barycentric spline-based coordinates, as shown in the following illustrations.</span></span>

![Ilustración de una textura original y la textura con coordenadas basadas en spline Barycentric](images/texturebarycentricspline.png)

<span data-ttu-id="3eb2d-155">Si una aplicación debe cambiar el intervalo de las coordenadas de textura generadas, esto se puede hacer mediante transformaciones de textura.</span><span class="sxs-lookup"><span data-stu-id="3eb2d-155">If an application must change the range of the generated texture coordinates, this can be done using texture transforms.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3eb2d-156">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="3eb2d-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3eb2d-157">Primitivas de orden superior</span><span class="sxs-lookup"><span data-stu-id="3eb2d-157">Higher-Order Primitives</span></span>](higher-order-primitives.md)
</dt> </dl>

 

 
