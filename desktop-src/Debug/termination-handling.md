---
description: Un controlador de finalización garantiza que se ejecute un bloque de código específico siempre que el flujo de control deje un determinado cuerpo de código protegido. Un controlador de terminación consta de los siguientes elementos.
ms.assetid: 899e2939-e028-4be1-9f08-9a79bf97eb37
title: Control de terminación
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e926a47a3c0bb4f2cb8a8df350807aee89b49bab
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103907238"
---
# <a name="termination-handling"></a><span data-ttu-id="825bf-104">Control de terminación</span><span class="sxs-lookup"><span data-stu-id="825bf-104">Termination Handling</span></span>

<span data-ttu-id="825bf-105">Un *controlador de finalización* garantiza que se ejecute un bloque de código específico siempre que el flujo de control deje un determinado cuerpo de código protegido.</span><span class="sxs-lookup"><span data-stu-id="825bf-105">A *termination handler* ensures that a specific block of code is executed whenever flow of control leaves a particular guarded body of code.</span></span> <span data-ttu-id="825bf-106">Un controlador de terminación consta de los siguientes elementos.</span><span class="sxs-lookup"><span data-stu-id="825bf-106">A termination handler consists of the following elements.</span></span>

-   <span data-ttu-id="825bf-107">Un cuerpo protegido del código</span><span class="sxs-lookup"><span data-stu-id="825bf-107">A guarded body of code</span></span>
-   <span data-ttu-id="825bf-108">Un bloque de código de terminación que se va a ejecutar cuando el flujo de control abandone el cuerpo protegido</span><span class="sxs-lookup"><span data-stu-id="825bf-108">A block of termination code to be executed when the flow of control leaves the guarded body</span></span>

<span data-ttu-id="825bf-109">Los controladores de terminación se declaran en la sintaxis específica del lenguaje.</span><span class="sxs-lookup"><span data-stu-id="825bf-109">Termination handlers are declared in language-specific syntax.</span></span> <span data-ttu-id="825bf-110">Mediante el compilador de optimización de C/C++ de Microsoft, se implementan mediante **\_ \_ try** y **\_ \_ Finally**.</span><span class="sxs-lookup"><span data-stu-id="825bf-110">Using the Microsoft C/C++ Optimizing Compiler, they are implemented using **\_\_try** and **\_\_finally**.</span></span> <span data-ttu-id="825bf-111">Para obtener más información, vea [Sintaxis de controlador](handler-syntax.md).</span><span class="sxs-lookup"><span data-stu-id="825bf-111">For more information, see [Handler Syntax](handler-syntax.md).</span></span>

<span data-ttu-id="825bf-112">El cuerpo protegido del código puede ser un bloque de código, un conjunto de bloques anidados o un procedimiento o una función completos.</span><span class="sxs-lookup"><span data-stu-id="825bf-112">The guarded body of code can be a block of code, a set of nested blocks, or an entire procedure or function.</span></span> <span data-ttu-id="825bf-113">Siempre que se ejecute el cuerpo protegido, se ejecutará el bloque de código de terminación.</span><span class="sxs-lookup"><span data-stu-id="825bf-113">Whenever the guarded body is executed, the block of termination code will be executed.</span></span> <span data-ttu-id="825bf-114">La única excepción a esto es cuando el subproceso finaliza durante la ejecución del cuerpo protegido (por ejemplo, si se llama a la función [**ExitThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitthread) o [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) desde dentro del cuerpo protegido).</span><span class="sxs-lookup"><span data-stu-id="825bf-114">The only exception to this is when the thread terminates during execution of the guarded body (for example, if the [**ExitThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitthread) or [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) function is called from within the guarded body).</span></span>

<span data-ttu-id="825bf-115">El bloque de finalización se ejecuta cuando el flujo de control sale del cuerpo protegido, independientemente de si el cuerpo protegido terminó con normalidad o de forma anómala.</span><span class="sxs-lookup"><span data-stu-id="825bf-115">The termination block is executed when the flow of control leaves the guarded body, regardless of whether the guarded body terminated normally or abnormally.</span></span> <span data-ttu-id="825bf-116">Se considera que el cuerpo protegido ha terminado con normalidad cuando se ejecuta la última instrucción del bloque y el control continúa secuencialmente en el bloque de finalización.</span><span class="sxs-lookup"><span data-stu-id="825bf-116">The guarded body is considered to have terminated normally when the last statement in the block is executed and control proceeds sequentially into the termination block.</span></span> <span data-ttu-id="825bf-117">La terminación anómala se produce cuando el flujo de control sale del cuerpo protegido debido a una excepción o debido a una instrucción de control como **Return**, **goto**, **break** o **continue**.</span><span class="sxs-lookup"><span data-stu-id="825bf-117">Abnormal termination occurs when the flow of control leaves the guarded body due to an exception, or due to a control statement such as **return**, **goto**, **break**, or **continue**.</span></span> <span data-ttu-id="825bf-118">Se puede llamar a la función [**AbnormalTermination**](abnormaltermination.md) desde el bloque de terminación para determinar si el cuerpo protegido terminó normalmente.</span><span class="sxs-lookup"><span data-stu-id="825bf-118">The [**AbnormalTermination**](abnormaltermination.md) function can be called from within the termination block to determine whether the guarded body terminated normally.</span></span>

 

 
