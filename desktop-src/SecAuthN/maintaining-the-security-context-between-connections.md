---
description: Para reducir el tráfico del controlador de dominio y mejorar el rendimiento, el lado cliente de Microsoft Digest almacena en caché la información recibida después de la autenticación correcta con un servidor.
ms.assetid: cd928266-889a-494c-a94b-4ea7b1dcc241
title: Mantenimiento del contexto de seguridad entre conexiones
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aeb450dde789f17f46397cb56fe74b94adcf8ea6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104361028"
---
# <a name="maintaining-the-security-context-between-connections"></a><span data-ttu-id="720ea-103">Mantenimiento del contexto de seguridad entre conexiones</span><span class="sxs-lookup"><span data-stu-id="720ea-103">Maintaining the Security Context Between Connections</span></span>

<span data-ttu-id="720ea-104">Para reducir el tráfico del controlador de dominio y mejorar el rendimiento, el lado cliente de Microsoft Digest almacena en caché la información recibida después de la autenticación correcta con un servidor.</span><span class="sxs-lookup"><span data-stu-id="720ea-104">To reduce domain controller traffic and improve performance, the client-side of Microsoft Digest caches information received after successful authentication with a server.</span></span> <span data-ttu-id="720ea-105">Las aplicaciones cliente solo necesitan almacenar en caché el identificador del [*contexto de seguridad*](../secgloss/s-gly.md) que se ha establecido.</span><span class="sxs-lookup"><span data-stu-id="720ea-105">Client applications need only cache the handle to the [*security context*](../secgloss/s-gly.md) that has been established.</span></span> <span data-ttu-id="720ea-106">En la tabla siguiente se describe la información almacenada en caché por el paquete de seguridad.</span><span class="sxs-lookup"><span data-stu-id="720ea-106">The following table describes information cached by the security package.</span></span>



| <span data-ttu-id="720ea-107">Información</span><span class="sxs-lookup"><span data-stu-id="720ea-107">Information</span></span>                                                       | <span data-ttu-id="720ea-108">Descripción</span><span class="sxs-lookup"><span data-stu-id="720ea-108">Description</span></span>                                                                                                                                         |
|-------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="720ea-109">Nombre de servidor</span><span class="sxs-lookup"><span data-stu-id="720ea-109">Server name</span></span>                                                       | <span data-ttu-id="720ea-110">El servidor que ha creado correctamente un contexto de seguridad para el usuario.</span><span class="sxs-lookup"><span data-stu-id="720ea-110">The server that has successfully created a security context for the user.</span></span>                                                                           |
| <span data-ttu-id="720ea-111">Dominio Kerberos</span><span class="sxs-lookup"><span data-stu-id="720ea-111">Realm/Domain</span></span>                                                      | <span data-ttu-id="720ea-112">El nombre de dominio usado en la autenticación correcta.</span><span class="sxs-lookup"><span data-stu-id="720ea-112">The domain name used in the successful authentication.</span></span>                                                                                              |
| [<span data-ttu-id="720ea-113">*Emisor*</span><span class="sxs-lookup"><span data-stu-id="720ea-113">*Nonce*</span></span>](../secgloss/n-gly.md) | <span data-ttu-id="720ea-114">Un nonce de servidor que está asociado a la autenticación correcta.</span><span class="sxs-lookup"><span data-stu-id="720ea-114">A server nonce that is associated with the successful authentication.</span></span>                                                                               |
| <span data-ttu-id="720ea-115">Recuento de nonce</span><span class="sxs-lookup"><span data-stu-id="720ea-115">Nonce count</span></span>                                                       | <span data-ttu-id="720ea-116">El número de veces que el cliente ha incluido el valor de seguridad (nonce) en las solicitudes al servidor.</span><span class="sxs-lookup"><span data-stu-id="720ea-116">The number of times the client has included the nonce in requests to the server.</span></span> <span data-ttu-id="720ea-117">Se utiliza para la detección de la reproducción.</span><span class="sxs-lookup"><span data-stu-id="720ea-117">This is used for replay-detection.</span></span>                                 |
| <span data-ttu-id="720ea-118">Valor opaco</span><span class="sxs-lookup"><span data-stu-id="720ea-118">Opaque value</span></span>                                                      | <span data-ttu-id="720ea-119">El valor devuelto para la Directiva opaca después de una autenticación correcta.</span><span class="sxs-lookup"><span data-stu-id="720ea-119">The value returned for the opaque directive after a successful authentication.</span></span> <span data-ttu-id="720ea-120">Este valor contiene una referencia al contexto de seguridad del usuario.</span><span class="sxs-lookup"><span data-stu-id="720ea-120">This value contains a reference to the security context of the user.</span></span> |



 

<span data-ttu-id="720ea-121">Cuando un cliente envía un mensaje a un servidor, el servidor debe determinar si el cliente tiene un contexto de seguridad existente.</span><span class="sxs-lookup"><span data-stu-id="720ea-121">When a client sends a message to a server, the server must determine whether the client has an existing security context.</span></span> <span data-ttu-id="720ea-122">Para ello, el servidor pasa cada solicitud de cliente a la función [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="720ea-122">To do this, the server passes each client request to the [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="720ea-123">Esta función extrae el valor de la Directiva opaca de la solicitud, si está presente, y lo usa para buscar el contexto de seguridad del cliente.</span><span class="sxs-lookup"><span data-stu-id="720ea-123">This function extracts the value of the opaque directive from the request, if present, and uses it to look up the client's security context.</span></span> <span data-ttu-id="720ea-124">Si se encuentra el contexto de seguridad, el identificador del contexto se devuelve al servidor.</span><span class="sxs-lookup"><span data-stu-id="720ea-124">If the security context is found, the handle of the context is returned to the server.</span></span> <span data-ttu-id="720ea-125">Para obtener información relacionada, vea [autenticar solicitudes posteriores](authenticating-subsequent-requests-using-microsoft-digest.md).</span><span class="sxs-lookup"><span data-stu-id="720ea-125">For related information, see [Authenticating Subsequent Requests](authenticating-subsequent-requests-using-microsoft-digest.md).</span></span>

<span data-ttu-id="720ea-126">Como medio para detectar ataques de suplantación de identidad y reproducción, el cliente llama a la función [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) , que utiliza un contexto de seguridad para firmar un mensaje.</span><span class="sxs-lookup"><span data-stu-id="720ea-126">As a means of detecting spoofing and replay attacks, the client calls the [**MakeSignature**](/windows/desktop/api/Sspi/nf-sspi-makesignature) function which uses a security context to sign a message.</span></span> <span data-ttu-id="720ea-127">Cuando los mensajes se protegen con la función **MakeSignature** , el servidor utiliza la función [**VerifySignature**](/windows/desktop/api/Sspi/nf-sspi-verifysignature) con el contexto almacenado en caché para comprobar el origen y la [*integridad*](../secgloss/i-gly.md)del mensaje.</span><span class="sxs-lookup"><span data-stu-id="720ea-127">When messages are protected using the **MakeSignature** function, the server uses the [**VerifySignature**](/windows/desktop/api/Sspi/nf-sspi-verifysignature) function with the cached context to verify the message's origin and [*integrity*](../secgloss/i-gly.md).</span></span> <span data-ttu-id="720ea-128">Para obtener más información, consulte [protección de mensajes](protecting-messages-using-microsoft-digest.md).</span><span class="sxs-lookup"><span data-stu-id="720ea-128">For more information, see [Protecting Messages](protecting-messages-using-microsoft-digest.md).</span></span>

 

 
