---
description: El receptor de archivos ASF es una implementación de IMFMediaSink proporcionada por Media Foundation que una aplicación puede usar para archivar datos multimedia ASF en un archivo. Para obtener información sobre el modelo de objetos de los receptores de medios ASF y el uso general, consulte receptores multimedia ASF.
ms.assetid: a47caabd-23e3-4d22-b4b6-5fdb79d62ca1
title: Establecer propiedades en el receptor de archivos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30af39cf13e88f6edf2a6ab68caac27c2400955a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104360479"
---
# <a name="setting-properties-in-the-file-sink"></a><span data-ttu-id="1fa5e-104">Establecer propiedades en el receptor de archivos</span><span class="sxs-lookup"><span data-stu-id="1fa5e-104">Setting Properties in the File Sink</span></span>

<span data-ttu-id="1fa5e-105">El receptor de archivos ASF es una implementación de [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) proporcionada por Media Foundation que una aplicación puede usar para archivar datos multimedia ASF en un archivo.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-105">The ASF file sink is an implementation of [**IMFMediaSink**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasink) provided by Media Foundation that an application can use to archive ASF media data to a file.</span></span> <span data-ttu-id="1fa5e-106">Para obtener información sobre el modelo de objetos y el uso general de los receptores de medios ASF, consulte [receptores de medios ASF](asf-media-sinks.md).</span><span class="sxs-lookup"><span data-stu-id="1fa5e-106">For information about ASF Media Sinks' object model and general usage, see [ASF Media Sinks](asf-media-sinks.md).</span></span>

<span data-ttu-id="1fa5e-107">Después de [crear el receptor de archivos ASF](creating-the-asf-file-sink.md), debe configurarse con información sobre las secuencias del archivo de salida.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-107">After [Creating the ASF file sink](creating-the-asf-file-sink.md), it must be configured with information about the streams in the output file.</span></span> <span data-ttu-id="1fa5e-108">Este procedimiento se describe en [Agregar información de secuencias al receptor de archivos ASF](adding-stream-information-to-the-asf-file-sink.md).</span><span class="sxs-lookup"><span data-stu-id="1fa5e-108">This procedure is described in [Adding Stream Information to the ASF File Sink](adding-stream-information-to-the-asf-file-sink.md).</span></span> <span data-ttu-id="1fa5e-109">Puede establecer propiedades adicionales en el receptor de archivos según el tipo de codificación; depósitos con fugas; propiedades generales del archivo.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-109">You can set additional properties on the file sink depending on the type of encoding; leaky buckets; general file properties.</span></span> <span data-ttu-id="1fa5e-110">Estos valores no se escriben en el objeto de encabezado ASF final.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-110">These settings are not written in the final ASF Header Object.</span></span> <span data-ttu-id="1fa5e-111">En este tema se describe el proceso de agregar estas propiedades en el almacén de propiedades del receptor de archivos.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-111">This topic describes process of adding these properties in the file sink's property store.</span></span>

<span data-ttu-id="1fa5e-112">El objeto ContentInfo mantiene las propiedades de archivo globales y las propiedades de flujo individuales del receptor de archivos.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-112">The ContentInfo object maintains the global file properties and individual stream properties for the file sink.</span></span> <span data-ttu-id="1fa5e-113">Para obtener información sobre cómo obtener una referencia al objeto ContentInfo ASF del receptor de archivo, consulte [crear el receptor de archivos ASF](creating-the-asf-file-sink.md).</span><span class="sxs-lookup"><span data-stu-id="1fa5e-113">For information about getting a reference to the file sink's ASF ContentInfo object, see [Creating the ASF File Sink](creating-the-asf-file-sink.md).</span></span>

<span data-ttu-id="1fa5e-114">Para obtener una referencia al almacén de propiedades del receptor de archivo ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)), llame a [**IMFASFContentInfo:: GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) en la referencia del objeto ContentInfo del receptor de archivo.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-114">To get a reference to the file sink's property store ([**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore)), call [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) on the file sink's ContentInfo object's reference.</span></span>

## <a name="stream-encoding-properties"></a><span data-ttu-id="1fa5e-115">Propiedades de codificación de secuencias</span><span class="sxs-lookup"><span data-stu-id="1fa5e-115">Stream Encoding Properties</span></span>

<span data-ttu-id="1fa5e-116">Para codificar el contenido correctamente, el archivo necesita conocer cierta información de codificación, como el tipo de codificación y los parámetros de codificación relacionados.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-116">To encode content properly the file needs to know certain encoding information such as type of encoding and the related encoding parameters.</span></span> <span data-ttu-id="1fa5e-117">Estos valores se establecen en el receptor de archivo como valores de propiedad en un almacén de propiedades mantenido por el objeto ContentInfo ASF.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-117">These values are set on the file sink as property values in a property store that is maintained by the ASF ContentInfo object.</span></span> <span data-ttu-id="1fa5e-118">Si está configurando el receptor de archivo antes de crear una instancia de los codificadores pertinentes, puede usar el objeto ContentInfo con todas las propiedades rellenas para crear los codificadores de Windows Media.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-118">If you are configuring the file sink before instantiating the relevant encoders, you can use the ContentInfo object with all the populated properties to create the Windows Media encoders.</span></span> <span data-ttu-id="1fa5e-119">En este caso, las propiedades se establecen automáticamente en los codificadores con instancias.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-119">In this case, the properties are automatically set on the instantiated encoders.</span></span> <span data-ttu-id="1fa5e-120">Por el contrario, si va a crear los codificadores antes del receptor, asegúrese de que las propiedades establecidas en los codificadores se copian en el almacén de propiedades del receptor de archivo.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-120">Conversely, if you are creating the encoders before the sink, make sure that the properties that you set on the encoders are copied into the file sink's property store.</span></span>

<span data-ttu-id="1fa5e-121">Para establecer las propiedades de codificación, necesita tener acceso al almacén de propiedades de nivel de secuencia del receptor de archivos.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-121">To set encoding properties, you need access to the file sink's stream-level property store.</span></span> <span data-ttu-id="1fa5e-122">Pase el número de secuencia en el parámetro *wStreamNumber* del método [**IMFASFContentInfo:: GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) .</span><span class="sxs-lookup"><span data-stu-id="1fa5e-122">Pass the stream number in the *wStreamNumber* parameter of the [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) method.</span></span> <span data-ttu-id="1fa5e-123">Los números de secuencia deben coincidir con los valores establecidos al configurar cada secuencia en el perfil.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-123">The stream numbers must match the values set while configuring each stream in the profile.</span></span> <span data-ttu-id="1fa5e-124">Los valores de propiedad se establecen mediante una llamada a [**IPropertyStore:: SetValue**](/windows/win32/api/propsys/nn-propsys-ipropertystore).</span><span class="sxs-lookup"><span data-stu-id="1fa5e-124">Property values are set by calling [**IPropertyStore::SetValue**](/windows/win32/api/propsys/nn-propsys-ipropertystore).</span></span> <span data-ttu-id="1fa5e-125">En la tabla siguiente se describen las propiedades admitidas.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-125">The following table describes the supported properties.</span></span>

<span data-ttu-id="1fa5e-126">Las propiedades dependen del tipo de codificación.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-126">The properties depend on the type of encoding.</span></span> <span data-ttu-id="1fa5e-127">Para obtener información sobre las propiedades y los valores respectivos que debe establecer, consulte [propiedades de codificación](configuring-the-encoder.md).</span><span class="sxs-lookup"><span data-stu-id="1fa5e-127">For information about the properties and the respective values that you must set, see [Encoding Properties](configuring-the-encoder.md).</span></span>

## <a name="leaky-bucket-property"></a><span data-ttu-id="1fa5e-128">Propiedad de depósito de fugas</span><span class="sxs-lookup"><span data-stu-id="1fa5e-128">Leaky Bucket Property</span></span>

<span data-ttu-id="1fa5e-129">Los parámetros de depósito con fugas determinan la ventana de búfer real utilizada por el codificador para la secuencia.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-129">Leaky bucket parameters determine the actual buffer window used by the encoder for the stream.</span></span> <span data-ttu-id="1fa5e-130">La propiedad [**\_ LEAKYBUCKET MFPKEY ASFSTREAMSINK \_ corregida \_**](mfpkey-asfstreamsink-corrected-leakybucket-property.md) del receptor de archivo contiene los parámetros de depósito con fugas, la velocidad de bits, la ventana de búfer y el llenado inicial del búfer. Esta propiedad se establece en el almacén de propiedades de propiedad de nivel de secuencia para el receptor de archivos y debe establecerse una vez que se han creado y configurado los codificadores.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-130">The file sink's [**MFPKEY\_ASFSTREAMSINK\_CORRECTED\_LEAKYBUCKET**](mfpkey-asfstreamsink-corrected-leakybucket-property.md) property contains the leaky bucket parameters, bit rate, buffer window, and initial buffer fullness.This property is set in the stream-level property property store for the file sink and must be set after encoders have been created and configured.</span></span> <span data-ttu-id="1fa5e-131">Este valor se establece en.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-131">This value is set in the .</span></span> <span data-ttu-id="1fa5e-132">Durante la negociación del tipo de medio, el codificador decide la ventana del búfer y la velocidad de bits que se va a utilizar.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-132">During the media type negotiation, the encoder decides the buffer window and the bit rate to use.</span></span> <span data-ttu-id="1fa5e-133">Puede obtener estos valores mediante la interfaz **IWMCodecLeakyBucket** , que se define en wmcodecifaces. h y debe vincular a wmcodecdspuuid. lib para llamar a sus métodos.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-133">You can get these values by using the **IWMCodecLeakyBucket** interface, which is defined in wmcodecifaces.h and you must link to wmcodecdspuuid.lib to call its methods.</span></span>

<span data-ttu-id="1fa5e-134">Los valores recuperados se pueden establecer para esta propiedad para cada flujo del receptor de archivos ASF.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-134">The retrieved values can be set for this property for each stream in the ASF file sink.</span></span>

## <a name="global-file-sink-properties"></a><span data-ttu-id="1fa5e-135">Propiedades globales del receptor de archivos</span><span class="sxs-lookup"><span data-stu-id="1fa5e-135">Global File Sink Properties</span></span>

<span data-ttu-id="1fa5e-136">Para obtener el almacén de propiedades global del receptor de archivo, pase 0 en el parámetro *wStreamNumber* del método [**IMFASFContentInfo:: GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) .</span><span class="sxs-lookup"><span data-stu-id="1fa5e-136">To get the file sink's global property store, pass 0 in the *wStreamNumber* parameter of the [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) method.</span></span> <span data-ttu-id="1fa5e-137">Los valores de propiedad se establecen mediante una llamada a [**IPropertyStore:: SetValue**](/windows/win32/api/propsys/nn-propsys-ipropertystore).</span><span class="sxs-lookup"><span data-stu-id="1fa5e-137">Property values are set by calling [**IPropertyStore::SetValue**](/windows/win32/api/propsys/nn-propsys-ipropertystore).</span></span> <span data-ttu-id="1fa5e-138">En la tabla siguiente se describen las propiedades admitidas.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-138">The following table describes the supported properties.</span></span>

| <span data-ttu-id="1fa5e-139">Propiedades de nivel de archivo</span><span class="sxs-lookup"><span data-stu-id="1fa5e-139">File-level Properties</span></span>                                                                                | <span data-ttu-id="1fa5e-140">Descripción</span><span class="sxs-lookup"><span data-stu-id="1fa5e-140">Description</span></span>                                                                                                                                                                                                                                                                                           |
|------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="1fa5e-141">**MFPKEY \_ \_ SENDTIME ASFMEDIASINK base \_**</span><span class="sxs-lookup"><span data-stu-id="1fa5e-141">**MFPKEY\_ASFMEDIASINK\_BASE\_SENDTIME**</span></span>](mfpkey-asfmediasink-base-sendtime-property.md)           | <span data-ttu-id="1fa5e-142">La hora de envío indica cuándo se liberará la carga dentro del depósito de fugas.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-142">The send time indicates when the payload inside the leaky bucket will be released.</span></span> <span data-ttu-id="1fa5e-143">Este valor de propiedad indica la primera hora de envío.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-143">This property value indicates the first send time.</span></span> <span data-ttu-id="1fa5e-144">El multiplexor usa este valor para calcular las horas de envío posteriores para los paquetes generados y garantiza que los datos fluyen de forma permanente a través del depósito de fugas.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-144">The multiplexer uses this value to calculate the subsequent send times for the generated packets and ensures that data flows steadily through the leaky bucket.</span></span> |
| [<span data-ttu-id="1fa5e-145">**\_velocidad de \_ bits de autoajuste de MFPKEY ASFMEDIASINK \_**</span><span class="sxs-lookup"><span data-stu-id="1fa5e-145">**MFPKEY\_ASFMEDIASINK\_AUTOADJUST\_BITRATE**</span></span>](mfpkey-asfmediasink-autoadjust-bitrate-property.md) | <span data-ttu-id="1fa5e-146">Este valor BOOLEANO indica si el multiplexor debe ajustar la velocidad de bits automáticamente para asegurarse de que los datos no desbordan el depósito de fugas.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-146">This BOOL value indicates whether the multiplexer needs to adjust the bit rate automatically to ensure that data does not overflow the leaky bucket.</span></span>                                                                                                                                                  |
| [<span data-ttu-id="1fa5e-147">**MFPKEY \_ ASFMEDIASINK \_ DRMACTION**</span><span class="sxs-lookup"><span data-stu-id="1fa5e-147">**MFPKEY\_ASFMEDIASINK\_DRMACTION**</span></span>](mfpkey-asfmediasink-drmaction-property.md)                    | <span data-ttu-id="1fa5e-148">Esto indica la acción de DRM del receptor de medios ASF para la generación de archivos.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-148">This indicates the ASF media sink DRM action for file generation.</span></span> <span data-ttu-id="1fa5e-149">En esta versión, solo se admite la transcodificación de DRM.</span><span class="sxs-lookup"><span data-stu-id="1fa5e-149">In this release, only DRM transcode is supported.</span></span>                                                                                                                                                                                   |



 

## <a name="related-topics"></a><span data-ttu-id="1fa5e-150">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="1fa5e-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1fa5e-151">Receptores de medios ASF</span><span class="sxs-lookup"><span data-stu-id="1fa5e-151">ASF Media Sinks</span></span>](asf-media-sinks.md)
</dt> <dt>

[<span data-ttu-id="1fa5e-152">Componentes ASF de capa de canalización</span><span class="sxs-lookup"><span data-stu-id="1fa5e-152">Pipeline Layer ASF Components</span></span>](pipeline-layer-asf-components.md)
</dt> <dt>

[<span data-ttu-id="1fa5e-153">Compatibilidad con ASF en Media Foundation</span><span class="sxs-lookup"><span data-stu-id="1fa5e-153">ASF Support in Media Foundation</span></span>](asf-support-in-media-foundation.md)
</dt> </dl>

 

 
