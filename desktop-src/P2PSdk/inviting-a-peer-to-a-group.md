---
description: En este tema se describe el proceso de invitar a un elemento del mismo nivel para unirse a un grupo del mismo nivel mediante las API de agrupación del mismo nivel.
ms.assetid: 6afcbfec-b1df-45cd-8a43-221dfe5d8c33
title: Invitar a un elemento del mismo nivel a un grupo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 68b1e8852f58387d424944d4a8821f56b5e11e8d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104001998"
---
# <a name="inviting-a-peer-to-a-group"></a><span data-ttu-id="373f2-103">Invitar a un elemento del mismo nivel a un grupo</span><span class="sxs-lookup"><span data-stu-id="373f2-103">Inviting a Peer to a Group</span></span>

<span data-ttu-id="373f2-104">En este tema se describe el proceso de invitar a un elemento del mismo nivel para unirse a un grupo del mismo nivel mediante las API de agrupación del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="373f2-104">This topic discusses the process of inviting a peer to join a peer group using the Peer Grouping APIs.</span></span>

<span data-ttu-id="373f2-105">Un grupo del mismo nivel requiere credenciales válidas para participar.</span><span class="sxs-lookup"><span data-stu-id="373f2-105">A peer group requires valid credentials to participate.</span></span> <span data-ttu-id="373f2-106">Las credenciales se emiten desde fuera de un grupo en forma de invitaciones, o directamente a los miembros de un grupo cuando se necesitan actualizaciones de credenciales.</span><span class="sxs-lookup"><span data-stu-id="373f2-106">Credentials are issued from outside a group in the form of invitations, or directly to members within a group when credential updates are needed.</span></span>

## <a name="group-member-certificates"></a><span data-ttu-id="373f2-107">Certificados de miembros de grupo</span><span class="sxs-lookup"><span data-stu-id="373f2-107">Group Member Certificates</span></span>

<span data-ttu-id="373f2-108">Un grupo del mismo nivel se crea cuando una aplicación realiza una llamada a [**PeerGroupCreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate).</span><span class="sxs-lookup"><span data-stu-id="373f2-108">A peer group is created when an application makes a call to [**PeerGroupCreate**](/windows/desktop/api/P2P/nf-p2p-peergroupcreate).</span></span>

<span data-ttu-id="373f2-109">Para participar en un grupo del mismo nivel, cada elemento del mismo nivel debe tener una identidad del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="373f2-109">To participate in a peer group, each peer must have a peer identity.</span></span> <span data-ttu-id="373f2-110">Llame a [**PeerEnumIdentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities) hasta que se devuelvan todas las identidades del mismo nivel definidas para el elemento del mismo nivel y seleccione la que se debe usar.</span><span class="sxs-lookup"><span data-stu-id="373f2-110">Call [**PeerEnumIdentities**](/windows/desktop/api/P2P/nf-p2p-peerenumidentities) until all peer identities defined for the peer have been returned, and select the one that should be used.</span></span> <span data-ttu-id="373f2-111">Si no existe una identidad del mismo nivel, cree una llamando a [**PeerIdentityCreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate).</span><span class="sxs-lookup"><span data-stu-id="373f2-111">If a peer identity does not exist, create one by calling [**PeerIdentityCreate**](/windows/desktop/api/P2P/nf-p2p-peeridentitycreate).</span></span>

<span data-ttu-id="373f2-112">Cada identidad del mismo nivel está asociada a un conjunto específico de credenciales que se pueden usar para demostrar la pertenencia al grupo del mismo nivel al conectarse, así como al publicar registros o invitar a miembros adicionales.</span><span class="sxs-lookup"><span data-stu-id="373f2-112">Each peer identity is associated with a specific set of credentials that can be used to prove peer group membership when connecting, as well as when publishing records or inviting additional members.</span></span> <span data-ttu-id="373f2-113">Estas credenciales se representan como cadenas de [certificados X. 509](https://www.ietf.org/rfc/rfc2511.txt) denominados certificados de pertenencia a grupos (GMC).</span><span class="sxs-lookup"><span data-stu-id="373f2-113">These credentials are represented as chains of [X.509 certificates](https://www.ietf.org/rfc/rfc2511.txt) called Group Membership Certificates (GMC).</span></span>

<span data-ttu-id="373f2-114">Para crear el GMC para una identidad del mismo nivel, primero debe obtener su clave pública.</span><span class="sxs-lookup"><span data-stu-id="373f2-114">To create the GMC for a peer identity, you must first obtain its public key.</span></span> <span data-ttu-id="373f2-115">Esta clave se obtiene llamando a [**PeerIdentityGetXML**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml) en el invitado potencial y pasando su identidad del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="373f2-115">This key is obtained by calling [**PeerIdentityGetXML**](/windows/desktop/api/P2P/nf-p2p-peeridentitygetxml) on the potential invitee and passing in its peer identity.</span></span> <span data-ttu-id="373f2-116">Esta función devuelve un certificado codificado en base 64 (IDC) que contiene la clave pública RSA que se usa para crear GMC para la identidad del mismo nivel (entre otras cosas), encapsulada en un BLOB XML, en el formato siguiente:</span><span class="sxs-lookup"><span data-stu-id="373f2-116">This function returns a base-64 encoded certificate (IDC) that contains the RSA public key used to create the GMC for the peer identity (among other things), encapsulated in an XML blob, in the following format:</span></span>

``` syntax
<PEERIDENTITYINFO VERSION="1.0">
     <IDC xmlns:dt="urn:schemas-microsoft-com:datatypes" dt:dt="bin.base64">
          <!-- Base-64 encoded certificate  -->
     </IDC>
</PEERIDENTITYINFO>
```

<span data-ttu-id="373f2-117">Esta cadena se puede pasar a [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), que devuelve una invitación que contiene el GMC para esa identidad del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="373f2-117">This string can be passed to [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), which returns an invitation that contains the GMC for that peer identity.</span></span> <span data-ttu-id="373f2-118">La invitación se debe pasar al invitado mediante un proceso diferente, como correo electrónico, FTP o un recurso compartido de archivos seguro.</span><span class="sxs-lookup"><span data-stu-id="373f2-118">The invitation must be passed to the invitee using a different process such as e-mail, FTP, or a secure file share.</span></span>

<span data-ttu-id="373f2-119">Como alternativa, el propio IDC se puede colocar en una nueva estructura de [**\_ \_ información de credenciales del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) y pasarse a [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials), que también genera una invitación.</span><span class="sxs-lookup"><span data-stu-id="373f2-119">Alternatively, the IDC itself can be placed in a new [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure and passed to [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials), which likewise generates an invitation.</span></span>

<span data-ttu-id="373f2-120">Tenga en cuenta que las aplicaciones no pueden agregar etiquetas dentro de la etiqueta **PEERIDENTITYINFO** o modificar este fragmento XML de ningún modo.</span><span class="sxs-lookup"><span data-stu-id="373f2-120">Note that applications are not allowed to add tags within the **PEERIDENTITYINFO** tag or modify this XML fragment in any way.</span></span> <span data-ttu-id="373f2-121">Las aplicaciones pueden incorporar este fragmento XML en otros documentos XML, pero deben quitar todos los XML específicos de la aplicación antes de pasar este fragmento a las funciones [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) o [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) .</span><span class="sxs-lookup"><span data-stu-id="373f2-121">Applications are allowed to incorporate this XML fragment into other XML documents, but must strip out all application-specific XML before passing this fragment to the [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation) or [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) functions.</span></span>

<span data-ttu-id="373f2-122">Los administradores y el creador del grupo del mismo nivel emiten GMCs de miembro.</span><span class="sxs-lookup"><span data-stu-id="373f2-122">Member GMCs are issued by administrators and the peer group creator.</span></span> <span data-ttu-id="373f2-123">Los miembros deben obtener GMCs nuevos con la duración prolongada de su GMCs antes de que haya transcurrido el tiempo de expiración.</span><span class="sxs-lookup"><span data-stu-id="373f2-123">Members must obtain new GMCs with extended lifetimes their GMCs before the expiration time has passed.</span></span> <span data-ttu-id="373f2-124">El administrador del grupo del mismo nivel emite las credenciales actualizadas llamando a [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) con las credenciales existentes para ese mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="373f2-124">The peer group administrator issues updated credentials by calling [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials) with the existing credentials for that peer.</span></span>

<span data-ttu-id="373f2-125">La estructura de [**\_ \_ información de credenciales del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) contiene los datos básicos en el estado de pertenencia de un elemento del mismo nivel, incluida la clave pública de sus GMC.</span><span class="sxs-lookup"><span data-stu-id="373f2-125">The [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure contains the basic data on a peer's membership status, including the public key for their GMC.</span></span> <span data-ttu-id="373f2-126">Las credenciales recién emitidas se pueden publicar en el grupo del mismo nivel estableciendo la \_ \_ marca de credenciales del almacén de grupo del mismo nivel \_ en la llamada a [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span><span class="sxs-lookup"><span data-stu-id="373f2-126">Newly-issued credentials can be published to the peer group by setting the PEER\_GROUP\_STORE\_CREDENTIALS flag in the call to [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span> <span data-ttu-id="373f2-127">Cuando el destinatario de las nuevas credenciales se une al grupo del mismo nivel, la infraestructura de agrupación del mismo nivel actualizará las credenciales existentes.</span><span class="sxs-lookup"><span data-stu-id="373f2-127">When the recipient of the new credentials joins the peer group, it's existing credentials will be updated by the Peer Grouping Infrastructure.</span></span>

## <a name="issuing-an-invitation"></a><span data-ttu-id="373f2-128">Emisión de una invitación</span><span class="sxs-lookup"><span data-stu-id="373f2-128">Issuing an Invitation</span></span>

<span data-ttu-id="373f2-129">Se invita a un miembro a unirse al grupo del mismo nivel de una de las dos maneras siguientes:</span><span class="sxs-lookup"><span data-stu-id="373f2-129">A member is invited to join the peer group in one of the following two ways:</span></span>

-   <span data-ttu-id="373f2-130">Un administrador de grupo del mismo nivel llama a [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), pasando la cadena XML de información de identidad obtenida del posible invitado a través de un mecanismo fuera de banda común, como el correo electrónico o una sesión de mensajería instantánea.</span><span class="sxs-lookup"><span data-stu-id="373f2-130">A peer group administrator calls [**PeerGroupCreateInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupcreateinvitation), passing in the identity information XML string obtained from the potential invitee via a common out-of-band mechanism, such as email or an IM session.</span></span> <span data-ttu-id="373f2-131">La invitación también se pasa a través de algún mecanismo o proceso externo al elemento del mismo nivel, que en última instancia lo recibirá como una cadena o un archivo de texto XML.</span><span class="sxs-lookup"><span data-stu-id="373f2-131">The invitation is also passed through some external process or mechanism to the peer, who will ultimately receive it as an XML string or text file.</span></span>
-   <span data-ttu-id="373f2-132">Un administrador de grupo del mismo nivel llama a [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span><span class="sxs-lookup"><span data-stu-id="373f2-132">A peer group administrator calls [**PeerGroupIssueCredentials**](/windows/desktop/api/P2P/nf-p2p-peergroupissuecredentials).</span></span> <span data-ttu-id="373f2-133">Para usar esta función, el elemento del mismo nivel debe haber publicado ya la información de pertenencia al grupo del mismo nivel ([**\_ miembro del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_member)) o tener una clave pública disponible (del par de claves de RSA que se usa para crear la identidad del firmante).</span><span class="sxs-lookup"><span data-stu-id="373f2-133">To use this function, the peer must have already published membership information to the peer group ([**PEER\_MEMBER**](/windows/desktop/api/P2P/ns-p2p-peer_member)), or have an available public key (of the RSA key pair used to create the subject identity).</span></span> <span data-ttu-id="373f2-134">En el primer caso, la estructura de [**\_ \_ información de credenciales del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) necesaria para **PeerGroupIssueCredentials** puede obtenerse a partir de la estructura de **\_ miembro del mismo nivel** ; en el último caso, se puede rellenar una nueva estructura de **\_ \_ información de credenciales del mismo nivel** con la clave pública.</span><span class="sxs-lookup"><span data-stu-id="373f2-134">In the former case, the [**PEER\_CREDENTIAL\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_credential_info) structure required for **PeerGroupIssueCredentials** can be obtained from the **PEER\_MEMBER** structure; in the latter case, a new **PEER\_CREDENTIAL\_INFO** structure can be populated with the public key.</span></span>

<span data-ttu-id="373f2-135">Después de recibir la cadena de invitación, el elemento del mismo nivel lo pasa a [**PeerGroupJoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin) para unirse al grupo del mismo nivel.</span><span class="sxs-lookup"><span data-stu-id="373f2-135">After receiving the invitation string, the peer passes it to [**PeerGroupJoin**](/windows/desktop/api/P2P/nf-p2p-peergroupjoin) to join the peer group.</span></span> <span data-ttu-id="373f2-136">Si la llamada a **PeerGroupJoin** se realiza correctamente, el elemento del mismo nivel puede abrir el grupo del mismo nivel llamando a [**PeerGroupOpen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen).</span><span class="sxs-lookup"><span data-stu-id="373f2-136">If the call to **PeerGroupJoin** is successful, the peer can later open the peer group by calling [**PeerGroupOpen**](/windows/desktop/api/P2P/nf-p2p-peergroupopen).</span></span>

## <a name="parsing-an-invitation"></a><span data-ttu-id="373f2-137">Analizar una invitación</span><span class="sxs-lookup"><span data-stu-id="373f2-137">Parsing an Invitation</span></span>

<span data-ttu-id="373f2-138">Opcionalmente, se puede analizar una invitación mediante una llamada a [**PeerGroupParseInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupparseinvitation), que devuelve una estructura de [**\_ \_ información de invitación del mismo nivel**](/windows/desktop/api/P2P/ns-p2p-peer_invitation_info) .</span><span class="sxs-lookup"><span data-stu-id="373f2-138">Optionally, an invitation can be parsed by calling [**PeerGroupParseInvitation**](/windows/desktop/api/P2P/nf-p2p-peergroupparseinvitation), which returns a [**PEER\_INVITATION\_INFO**](/windows/desktop/api/P2P/ns-p2p-peer_invitation_info) structure.</span></span> <span data-ttu-id="373f2-139">Los campos de la estructura se pueden obtener fácilmente para fines de presentación.</span><span class="sxs-lookup"><span data-stu-id="373f2-139">The fields in the structure can be easily obtained for display purposes.</span></span>

 

 



