---
title: Redirector del sistema de archivos
description: El directorio System32 windir \\ está reservado para aplicaciones de 64 bits en Windows de 64 bits.
ms.assetid: b4d36fe8-8bbb-469b-8ad1-650d559a4c75
keywords:
- Programación de Windows de redirector de sistema de archivos de 64 bits
- Guía de programación de Windows de 64 bits programación de Windows de 64 bits, redirector del sistema de archivos
- WOW64 Programación de Windows de 64 bits, redirector del sistema de archivos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 568ddde85d18f90b951051251774c3509081dfdd
ms.sourcegitcommit: 099ecdda1e83618b844387405da0db0ebda93a65
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/04/2021
ms.locfileid: "111443636"
---
# <a name="file-system-redirector"></a><span data-ttu-id="7c5a1-106">Redirector del sistema de archivos</span><span class="sxs-lookup"><span data-stu-id="7c5a1-106">File System Redirector</span></span>

<span data-ttu-id="7c5a1-107">El directorio %windir% System32 está reservado para aplicaciones de \\ 64 bits en Windows de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-107">The %windir%\\System32 directory is reserved for 64-bit applications on 64-bit Windows.</span></span> <span data-ttu-id="7c5a1-108">La mayoría de los nombres de archivo DLL no se cambiaron cuando se crearon versiones de 64 bits de los archivos DLL, por lo que las versiones de 32 bits de los archivos DLL se almacenan en un directorio diferente.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-108">Most DLL file names were not changed when 64-bit versions of the DLLs were created, so 32-bit versions of the DLLs are stored in a different directory.</span></span> <span data-ttu-id="7c5a1-109">WOW64 oculta esta diferencia mediante un *redirector del sistema de archivos*.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-109">WOW64 hides this difference by using a *file system redirector*.</span></span>

<span data-ttu-id="7c5a1-110">En la mayoría de los casos, cada vez que una aplicación de 32 bits intenta acceder a %windir% \\ System32, %windir% \\ lastgood \\ system32 o %windir%regedit.exe, el acceso se redirige a una ruta de acceso específica de la \\ arquitectura.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-110">In most cases, whenever a 32-bit application attempts to access %windir%\\System32, %windir%\\lastgood\\system32, or %windir%\\regedit.exe, the access is redirected to an architecture-specific path.</span></span>

> [!Note]  
> <span data-ttu-id="7c5a1-111">Estas rutas de acceso solo se proporcionan como referencia.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-111">These paths are provided for reference only.</span></span> <span data-ttu-id="7c5a1-112">Por compatibilidad, las aplicaciones no deben usar estas rutas de acceso directamente.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-112">For compatibility, applications should not use these paths directly.</span></span> <span data-ttu-id="7c5a1-113">En su lugar, deben llamar a las API que se describen a continuación.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-113">Instead, they should call the APIs described below.</span></span>

 



| <span data-ttu-id="7c5a1-114">Ruta de acceso original</span><span class="sxs-lookup"><span data-stu-id="7c5a1-114">Original Path</span></span>                | <span data-ttu-id="7c5a1-115">Ruta de acceso redirigida para procesos x86 de 32 bits</span><span class="sxs-lookup"><span data-stu-id="7c5a1-115">Redirected Path for 32-bit x86 Processes</span></span> | <span data-ttu-id="7c5a1-116">Ruta de acceso redirigida para procesos arm de 32 bits</span><span class="sxs-lookup"><span data-stu-id="7c5a1-116">Redirected Path for 32-bit ARM Processes</span></span> |
|------------------------------|------------------------------------------|------------------------------------------|
| <span data-ttu-id="7c5a1-117">%windir% \\ System32</span><span class="sxs-lookup"><span data-stu-id="7c5a1-117">%windir%\\System32</span></span>           | <span data-ttu-id="7c5a1-118">%windir% \\ SysWOW64</span><span class="sxs-lookup"><span data-stu-id="7c5a1-118">%windir%\\SysWOW64</span></span>                       | <span data-ttu-id="7c5a1-119">%windir% \\ SysArm32</span><span class="sxs-lookup"><span data-stu-id="7c5a1-119">%windir%\\SysArm32</span></span>                       |
| <span data-ttu-id="7c5a1-120">%windir% \\ lastgood \\ system32</span><span class="sxs-lookup"><span data-stu-id="7c5a1-120">%windir%\\lastgood\\system32</span></span> | <span data-ttu-id="7c5a1-121">%windir% \\ lastgood \\ SysWOW64</span><span class="sxs-lookup"><span data-stu-id="7c5a1-121">%windir%\\lastgood\\SysWOW64</span></span>             | <span data-ttu-id="7c5a1-122">%windir% \\ lastgood \\ SysArm32</span><span class="sxs-lookup"><span data-stu-id="7c5a1-122">%windir%\\lastgood\\SysArm32</span></span>             |
| <span data-ttu-id="7c5a1-123">%windir% \\regedit.exe</span><span class="sxs-lookup"><span data-stu-id="7c5a1-123">%windir%\\regedit.exe</span></span>        | <span data-ttu-id="7c5a1-124">%windir% \\ SysWOW64 \\regedit.exe</span><span class="sxs-lookup"><span data-stu-id="7c5a1-124">%windir%\\SysWOW64\\regedit.exe</span></span>          | <span data-ttu-id="7c5a1-125">%windir% \\ SysArm32 \\regedit.exe</span><span class="sxs-lookup"><span data-stu-id="7c5a1-125">%windir%\\ SysArm32\\regedit.exe</span></span>         |



 

<span data-ttu-id="7c5a1-126">Si el acceso hace que el sistema muestre el símbolo del sistema de UAC, no se produce el redireccionamiento.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-126">If the access causes the system to display the UAC prompt, redirection does not occur.</span></span> <span data-ttu-id="7c5a1-127">En su lugar, se inicia la versión de 64 bits del archivo solicitado.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-127">Instead, the 64-bit version of the requested file is launched.</span></span> <span data-ttu-id="7c5a1-128">Para evitar este problema, especifique el directorio SysWOW64 para evitar el redireccionamiento y garantizar el acceso a la versión de 32 bits del archivo, o ejecute la aplicación de 32 bits con privilegios de administrador para que no se muestre el símbolo del sistema de UAC.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-128">To prevent this problem, either specify the SysWOW64 directory to avoid redirection and ensure access to the 32-bit version of the file, or run the 32-bit application with administrator privileges so the UAC prompt is not displayed.</span></span>

<span data-ttu-id="7c5a1-129">\*\*Windows Server 2003 y Windows XP: \*\* No se admite UAC.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-129">\*\*Windows Server 2003 and Windows XP:  \*\* UAC is not supported.</span></span>

<span data-ttu-id="7c5a1-130">Algunos subdirectorios están exentos del redireccionamiento.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-130">Certain subdirectories are exempt from redirection.</span></span> <span data-ttu-id="7c5a1-131">El acceso a estos subdirectorios no se redirige a %windir% \\ SysWOW64:</span><span class="sxs-lookup"><span data-stu-id="7c5a1-131">Access to these subdirectories is not redirected to %windir%\\SysWOW64:</span></span> <dl> <span data-ttu-id="7c5a1-132">%windir% \\ system32 \\ catroot</span><span class="sxs-lookup"><span data-stu-id="7c5a1-132">%windir%\\system32\\catroot</span></span>  
<span data-ttu-id="7c5a1-133">%windir% \\ system32 \\ catroot2</span><span class="sxs-lookup"><span data-stu-id="7c5a1-133">%windir%\\system32\\catroot2</span></span>  
<span data-ttu-id="7c5a1-134">%windir% \\ system32 \\ driverstore</span><span class="sxs-lookup"><span data-stu-id="7c5a1-134">%windir%\\system32\\driverstore</span></span>  
<span data-ttu-id="7c5a1-135">%windir% \\ system32 \\ drivers \\ etc.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-135">%windir%\\system32\\drivers\\etc</span></span>  
<span data-ttu-id="7c5a1-136">%windir% \\ system32 \\ logfiles</span><span class="sxs-lookup"><span data-stu-id="7c5a1-136">%windir%\\system32\\logfiles</span></span>  
<span data-ttu-id="7c5a1-137">%windir% \\ system32 \\ spool</span><span class="sxs-lookup"><span data-stu-id="7c5a1-137">%windir%\\system32\\spool</span></span>  
</dl>

<span data-ttu-id="7c5a1-138">\*\*Windows Server 2008, Windows Vista, Windows Server 2003 y Windows XP: \*\*%windir% \\ system32 \\ driverstore se redirige.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-138">\*\*Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:  \*\*%windir%\\system32\\driverstore is redirected.</span></span>

<span data-ttu-id="7c5a1-139">Para recuperar el nombre del directorio del sistema de 32 bits, las aplicaciones de 64 bits deben usar la función [**GetSystemWow64Directory2**](/windows/desktop/api/wow64apiset/nf-wow64apiset-getsystemwow64directory2a) (Windows 10, versión 1511) o la [**función GetSystemWow64Directory.**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderpath)</span><span class="sxs-lookup"><span data-stu-id="7c5a1-139">To retrieve the name of the 32-bit system directory, 64-bit applications should use the [**GetSystemWow64Directory2**](/windows/desktop/api/wow64apiset/nf-wow64apiset-getsystemwow64directory2a) function (Windows 10, version 1511) or the [**GetSystemWow64Directory**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetknownfolderpath) function.</span></span>

<span data-ttu-id="7c5a1-140">Las aplicaciones deben usar [**la función SHGetKnownFolderPath para**](https://www.bing.com/search?q=**SHGetKnownFolderPath**) determinar el nombre de directorio %ProgramFiles%.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-140">Applications should use the [**SHGetKnownFolderPath**](https://www.bing.com/search?q=**SHGetKnownFolderPath**) function to determine the %ProgramFiles% directory name.</span></span>

<span data-ttu-id="7c5a1-141">**Windows Server 2003 y Windows XP:** Las aplicaciones deben usar [**la función SHGetSpecialFolderPath para**](/windows/win32/api/shlobj_core/nf-shlobj_core-shgetspecialfolderpatha) determinar el nombre de directorio %ProgramFiles%.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-141">**Windows Server 2003 and Windows XP:** Applications should use the [**SHGetSpecialFolderPath**](/windows/win32/api/shlobj_core/nf-shlobj_core-shgetspecialfolderpatha) function to determine the %ProgramFiles% directory name.</span></span>

<span data-ttu-id="7c5a1-142">Las aplicaciones pueden controlar el redirector del sistema de archivos WOW64 mediante las funciones [**Wow64DisableWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64disablewow64fsredirection), [**Wow64EnableWow64FsRedirection**](/windows/desktop/api/winbase/nf-winbase-wow64enablewow64fsredirection)y [**Wow64RevertWow64FsRedirection.**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64revertwow64fsredirection)</span><span class="sxs-lookup"><span data-stu-id="7c5a1-142">Applications can control the WOW64 file system redirector using the [**Wow64DisableWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64disablewow64fsredirection), [**Wow64EnableWow64FsRedirection**](/windows/desktop/api/winbase/nf-winbase-wow64enablewow64fsredirection), and [**Wow64RevertWow64FsRedirection**](/windows/desktop/api/wow64apiset/nf-wow64apiset-wow64revertwow64fsredirection) functions.</span></span> <span data-ttu-id="7c5a1-143">Deshabilitar el redireccionamiento del sistema de archivos afecta a todas las operaciones de archivo realizadas por el subproceso que realiza la llamada, por lo que solo debe deshabilitarse cuando sea necesario para una única llamada [**a CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) y volver a habilitarse inmediatamente después de que se devuelva la función.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-143">Disabling file system redirection affects all file operations performed by the calling thread, so it should be disabled only when necessary for a single [**CreateFile**](/windows/desktop/api/fileapi/nf-fileapi-createfilea) call and re-enabled again immediately after the function returns.</span></span> <span data-ttu-id="7c5a1-144">Deshabilitar la redirección del sistema de archivos durante períodos más largos puede impedir que las aplicaciones de 32 bits carguen archivos DLL del sistema, lo que provoca un error en las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-144">Disabling file system redirection for longer periods can prevent 32-bit applications from loading system DLLs, causing the applications to fail.</span></span>

<span data-ttu-id="7c5a1-145">Las aplicaciones de 32 bits pueden acceder al directorio del sistema nativo sustituyendo %windir% \\ Sysnative por %windir% \\ System32.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-145">32-bit applications can access the native system directory by substituting %windir%\\Sysnative for %windir%\\System32.</span></span> <span data-ttu-id="7c5a1-146">WOW64 reconoce Sysnative como un alias especial que se usa para indicar que el sistema de archivos no debe redirigir el acceso.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-146">WOW64 recognizes Sysnative as a special alias used to indicate that the file system should not redirect the access.</span></span> <span data-ttu-id="7c5a1-147">Este mecanismo es flexible y fácil de usar, por lo que es el mecanismo recomendado para omitir el redireccionamiento del sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-147">This mechanism is flexible and easy to use, therefore, it is the recommended mechanism to bypass file system redirection.</span></span> <span data-ttu-id="7c5a1-148">Tenga en cuenta que las aplicaciones de 64 bits no pueden usar el alias Sysnative, ya que es un directorio virtual no real.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-148">Note that 64-bit applications cannot use the Sysnative alias as it is a virtual directory not a real one.</span></span>

<span data-ttu-id="7c5a1-149">**Windows Server 2003 y Windows XP:** El alias Sysnative se agregó a partir de Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="7c5a1-149">**Windows Server 2003 and Windows XP:** The Sysnative alias was added starting with Windows Vista.</span></span>

 

 