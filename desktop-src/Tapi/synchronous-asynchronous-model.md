---
description: La naturaleza interactiva de telefonía requiere que TAPI sea un entorno operativo en tiempo real.
ms.assetid: b8512588-ec28-4fbe-b47f-b900e2dba1f2
title: Modelo sincrónico/asincrónico
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 02b3d3b58e9704719e502fa3efc11bc4dc216479
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105687494"
---
# <a name="synchronousasynchronous-model"></a><span data-ttu-id="ccfb2-103">Modelo sincrónico/asincrónico</span><span class="sxs-lookup"><span data-stu-id="ccfb2-103">Synchronous/Asynchronous Model</span></span>

<span data-ttu-id="ccfb2-104">La naturaleza interactiva de telefonía requiere que TAPI sea un entorno operativo en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-104">The interactive nature of telephony requires TAPI to be a real-time operating environment.</span></span> <span data-ttu-id="ccfb2-105">Muchas de las funciones TAPI son necesarias para completar rápidamente y devolver los resultados a la aplicación de forma sincrónica.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-105">Many of the TAPI functions are required to complete quickly and return their results to the application synchronously.</span></span> <span data-ttu-id="ccfb2-106">Es posible que otras funciones (como el marcado) no se puedan completar tan rápidamente y, por tanto, funcionen de forma asincrónica.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-106">Other functions (such as dialing) may not be able to complete as quickly and therefore operate asynchronously.</span></span>

<span data-ttu-id="ccfb2-107">Las operaciones de telefonía se completan de forma sincrónica o asincrónica.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-107">Telephony operations complete either synchronously or asynchronously.</span></span> <span data-ttu-id="ccfb2-108">Estos dos modelos difieren como se indica a continuación.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-108">These two models differ as follows.</span></span> <span data-ttu-id="ccfb2-109">Las *funciones sincrónicas* ejecutan toda la solicitud antes de que se permita que el subproceso del llamador vuelva de la llamada de función.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-109">*Synchronous functions* execute the entire request before the caller's thread is allowed to return from the function call.</span></span> <span data-ttu-id="ccfb2-110">*Las funciones asincrónicas* devuelven antes de que la solicitud se ejecute en su totalidad.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-110">*Asynchronous functions* return before the request has executed in its entirety.</span></span> <span data-ttu-id="ccfb2-111">Cuando se completa la solicitud asincrónica más tarde, el proveedor de servicios informa de la finalización mediante una llamada a un procedimiento de devolución de llamada que TAPI proporcionó originalmente en la secuencia de inicialización.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-111">When the asynchronous request later completes, the service provider reports the completion by calling a callback procedure that TAPI originally supplied to it early in the initialization sequence.</span></span>

-   <span data-ttu-id="ccfb2-112">Las operaciones asincrónicas tienen un parámetro denominado *dwRequestID* del tipo definido [DRV \_ REQUESTID](./drv-requestid.md) como su primer parámetro.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-112">Asynchronous operations have a parameter named *dwRequestID* of the defined type [DRV\_REQUESTID](./drv-requestid.md) as their first parameter.</span></span> <span data-ttu-id="ccfb2-113">Este tipo de operación realiza parte de su procesamiento en la llamada de función y el resto de su procesamiento en un subproceso de ejecución independiente después de que se devuelva la llamada de función.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-113">Such an operation performs part of its processing in the function call and the remainder of its processing in an independent execution thread after the function call has returned.</span></span> <span data-ttu-id="ccfb2-114">Cuando la función devuelve, devuelve un resultado de error negativo o el *dwRequestID* (positivo) que se pasó en la llamada de función.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-114">When the function returns, it returns either a negative error result or the (positive) *dwRequestID* that was passed in the function call.</span></span> <span data-ttu-id="ccfb2-115">El resultado del error negativo indica que la operación ha finalizado (y ha generado un error).</span><span class="sxs-lookup"><span data-stu-id="ccfb2-115">The negative error result indicates that the operation is complete (and failed).</span></span> <span data-ttu-id="ccfb2-116">El *dwRequestID* positivo devuelto indica que la operación continúa en el subproceso independiente.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-116">The positive *dwRequestID* returned indicates that the operation continues in the independent thread.</span></span> <span data-ttu-id="ccfb2-117">En tal caso, el proveedor de servicios llama finalmente al procedimiento de [**\_ finalización asincrónica**](/windows/win32/api/tspi/nc-tspi-async_completion) , pasando el *dwRequestID* y un código de resultado para indicar el resultado de la operación.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-117">In such a case, the service provider eventually calls the [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) procedure, passing the *dwRequestID* and a result code to indicate the outcome of the operation.</span></span> <span data-ttu-id="ccfb2-118">El código de resultado es cero para el éxito o uno del mismo conjunto de resultados de error (negativos).</span><span class="sxs-lookup"><span data-stu-id="ccfb2-118">The result code is zero for success or one of the same set of (negative) error results.</span></span> <span data-ttu-id="ccfb2-119">En cualquier caso, el proveedor de servicios nunca debe devolver cero o un valor positivo distinto de *dwRequestID* de una función designada como asincrónica, ya que esto puede producir resultados inesperados.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-119">In any case, the service provider must never return zero or any positive value other than *dwRequestID* from a function designated as asynchronous because doing so can produce unexpected results.</span></span> <span data-ttu-id="ccfb2-120">Los proveedores de servicios siempre deben copiar los datos de entrada de la memoria de la aplicación en la memoria del proveedor de servicios antes de volver de una función asincrónica.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-120">Service providers should always copy input data from application memory into service provider memory before returning from an asynchronous function.</span></span>
-   <span data-ttu-id="ccfb2-121">Las operaciones sincrónicas no tienen *dwRequestID* como primer parámetro.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-121">Synchronous operations do not have *dwRequestID* as their first parameter.</span></span> <span data-ttu-id="ccfb2-122">Este tipo de operación realiza todo su procesamiento en el subproceso de ejecución del llamador y devuelve el resultado final cuando vuelve.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-122">Such an operation performs all of its processing in the caller's execution thread, returning the final result when it returns.</span></span> <span data-ttu-id="ccfb2-123">El resultado es cero para el éxito o un código de error negativo para el error.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-123">The result is zero for success or a negative error code for failure.</span></span> <span data-ttu-id="ccfb2-124">El proveedor de servicios no llama a la [**\_ finalización asincrónica**](/windows/win32/api/tspi/nc-tspi-async_completion) para las operaciones sincrónicas.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-124">The service provider does not call [**ASYNC\_COMPLETION**](/windows/win32/api/tspi/nc-tspi-async_completion) for synchronous operations.</span></span>

<span data-ttu-id="ccfb2-125">Es interesante considerar el control de tiempo de una devolución de llamada de "finalización" con respecto a cuando se devuelve la solicitud original.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-125">It is interesting to consider the timing of a "completion" callback relative to when the original request returns.</span></span> <span data-ttu-id="ccfb2-126">El proveedor de servicios implementará una solicitud asincrónica típica como en el siguiente pseudocódigo:</span><span class="sxs-lookup"><span data-stu-id="ccfb2-126">A typical asynchronous request would be implemented by the service provider as in the following pseudocode:</span></span>

``` syntax
Some_request(Request_ID, ...) {
  check parameters for validity
  check device state for validity
  store Request_ID for Completion Interrupt Handler's use
  manipulate device registers to start physical operation
  return Request_ID  // to indicate asynch operation
}
Operation Completion Interrupt Handler: {
  if operation was successful then
    call "completion" callback passing Request_ID and "success"
  else
    call "completion" callback passing Request_ID and "error num"
  endif
}
```

<span data-ttu-id="ccfb2-127">Si la operación se completa muy rápidamente (o la solicitud original se devuelve muy lentamente), es posible que el controlador de interrupción que se ejecuta cuando se completa una operación física se desencadene antes de que la solicitud original se devuelva a la aplicación o incluso a TAPI.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-127">If the operation completes very rapidly (or the original request returns very slowly), it is possible that the interrupt handler that runs when a physical operation completes may be triggered before the original request returns to the application or even to TAPI.</span></span> <span data-ttu-id="ccfb2-128">Se permite este comportamiento.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-128">This behavior is allowed.</span></span> <span data-ttu-id="ccfb2-129">TAPI garantiza que se entregue la notificación de finalización eventual a la aplicación después de que se devuelva la solicitud original.</span><span class="sxs-lookup"><span data-stu-id="ccfb2-129">TAPI guarantees that the eventual completion notification to the application is delivered after the original request returns.</span></span>

<span data-ttu-id="ccfb2-130">**TAPI 2. x:** Muestra el estado de si cada función se completa de forma sincrónica o asincrónica en [referencia de función rápida de TAPI](./tapi-quick-function-reference.md).</span><span class="sxs-lookup"><span data-stu-id="ccfb2-130">**TAPI 2.x:** Lists which state whether each function completes synchronously or asynchronously appear in [TAPI Quick Function Reference](./tapi-quick-function-reference.md).</span></span>

 

 
