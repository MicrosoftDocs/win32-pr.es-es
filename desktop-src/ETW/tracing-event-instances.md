---
description: Los proveedores clásicos usan la función TraceEventInstance para realizar un seguimiento de los eventos que forman parte de una única transacción. También puede usar esta función para realizar el seguimiento de eventos de elementos primarios y secundarios.
ms.assetid: 246e9443-3120-49bf-a6e3-64dddba348fa
title: Escritura de eventos relacionados en un proveedor clásico
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 771b08a66625d5cd6e723fbc2e12eed87bd1d434
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104361664"
---
# <a name="writing-related-events-in-a-classic-provider"></a><span data-ttu-id="f8c81-104">Escritura de eventos relacionados en un proveedor clásico</span><span class="sxs-lookup"><span data-stu-id="f8c81-104">Writing Related Events in a Classic Provider</span></span>

<span data-ttu-id="f8c81-105">Los proveedores [clásicos](about-event-tracing.md) usan la función [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) para realizar un seguimiento de los eventos que forman parte de una única transacción.</span><span class="sxs-lookup"><span data-stu-id="f8c81-105">[Classic](about-event-tracing.md) providers use the [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function to trace events that are part of a single transaction.</span></span> <span data-ttu-id="f8c81-106">También puede usar esta función para realizar el seguimiento de eventos de elementos primarios y secundarios.</span><span class="sxs-lookup"><span data-stu-id="f8c81-106">You can also use this function to trace parent/child events.</span></span>

<span data-ttu-id="f8c81-107">Antes de llamar a la función [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) , primero debe llamar a la función [**CreateTraceInstanceId**](/windows/win32/api/evntrace/nf-evntrace-createtraceinstanceid) para obtener un identificador de transacción.</span><span class="sxs-lookup"><span data-stu-id="f8c81-107">Before calling the [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function, you must first call the [**CreateTraceInstanceId**](/windows/win32/api/evntrace/nf-evntrace-createtraceinstanceid) function to obtain a transaction identifier.</span></span> <span data-ttu-id="f8c81-108">Esta función genera un identificador de transacción único y lo asigna a un identificador GUID de clase registrado.</span><span class="sxs-lookup"><span data-stu-id="f8c81-108">This function generates a unique transaction identifier, and maps it to a registered class GUID handle.</span></span> <span data-ttu-id="f8c81-109">Los identificadores de los GUID de clase registrados están disponibles en los miembros de **RegHandle** de las estructuras de [**registro de \_ GUID \_ de seguimiento**](/windows/win32/api/evntrace/ns-evntrace-trace_guid_registration) , después de llamar a la función [**RegisterTraceGuids**](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) .</span><span class="sxs-lookup"><span data-stu-id="f8c81-109">The handles for registered class GUIDs are available in the **RegHandle** members of [**TRACE\_GUID\_REGISTRATION**](/windows/win32/api/evntrace/ns-evntrace-trace_guid_registration) structures, after calling the [**RegisterTraceGuids**](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) function.</span></span> <span data-ttu-id="f8c81-110">El identificador de la transacción se coloca en el miembro **InstanceID** de una estructura de [**información de \_ instancia \_ de evento**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) que se pasa a la función **CreateTraceInstanceId** .</span><span class="sxs-lookup"><span data-stu-id="f8c81-110">The transaction identifier is placed in the **InstanceId** member of an [**EVENT\_INSTANCE\_INFO**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) structure that you pass to the **CreateTraceInstanceId** function.</span></span>

<span data-ttu-id="f8c81-111">La estructura de [**\_ \_ encabezado**](/windows/win32/api/evntrace/ns-evntrace-event_instance_header) de la instancia de evento que se pasa a la función [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) es similar a la estructura de encabezado del [**\_ seguimiento \_ de eventos**](/windows/win32/api/evntrace/ns-evntrace-event_trace_header) (vea [eventos de seguimiento](tracing-events.md)), salvo que contiene información adicional relacionada con las instancias y no contiene un miembro **GUID** .</span><span class="sxs-lookup"><span data-stu-id="f8c81-111">The [**EVENT\_INSTANCE\_HEADER**](/windows/win32/api/evntrace/ns-evntrace-event_instance_header) structure that is passed to the [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function is similar to the [**EVENT\_TRACE\_HEADER**](/windows/win32/api/evntrace/ns-evntrace-event_trace_header) structure (see [Tracing Events](tracing-events.md)), except that it contains additional information relating to instances, and does not contain a **Guid** member.</span></span>

<span data-ttu-id="f8c81-112">Las instancias de eventos se pueden usar para establecer una relación jerárquica entre los eventos.</span><span class="sxs-lookup"><span data-stu-id="f8c81-112">Event instances can be used to establish a hierarchical relationship between events.</span></span> <span data-ttu-id="f8c81-113">La función [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) acepta información específica de la instancia de dos instancias de eventos.</span><span class="sxs-lookup"><span data-stu-id="f8c81-113">The [**TraceEventInstance**](/windows/win32/api/evntrace/nf-evntrace-traceeventinstance) function accepts instance-specific information from two event instances.</span></span> <span data-ttu-id="f8c81-114">El parámetro *pInstInfo* apunta a la estructura de [**\_ \_ información de instancia de evento**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) de la instancia de evento y el parámetro *pParentInstInfo* apunta a la estructura de **\_ \_ información de instancia de evento** de una instancia de evento primaria.</span><span class="sxs-lookup"><span data-stu-id="f8c81-114">The *pInstInfo* parameter points to the [**EVENT\_INSTANCE\_INFO**](/windows/win32/api/evntrace/ns-evntrace-event_instance_info) structure of the event instance, and the *pParentInstInfo* parameter points to the **EVENT\_INSTANCE\_INFO** structure of a parent event instance.</span></span> <span data-ttu-id="f8c81-115">La definición de una instancia de evento "primario" está definida por la aplicación; el elemento primario puede ser cualquier instancia que ya se haya generado.</span><span class="sxs-lookup"><span data-stu-id="f8c81-115">The definition of a "parent" event instance is application-defined; the parent can be any instance that has already been generated.</span></span>

 

 
