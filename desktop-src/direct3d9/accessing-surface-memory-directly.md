---
description: 'Puede acceder directamente a la memoria de la superficie mediante el método IDirect3DSurface9:: LockRect.'
ms.assetid: ad669c22-6163-4fbb-bad0-160ced5bc558
title: Acceso directo a la memoria de la superficie (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e7ed9a65265671e6509172eccd9a1b66ea91507f
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104360043"
---
# <a name="accessing-surface-memory-directly-direct3d-9"></a><span data-ttu-id="6f8c6-103">Acceso directo a la memoria de la superficie (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="6f8c6-103">Accessing Surface Memory Directly (Direct3D 9)</span></span>

<span data-ttu-id="6f8c6-104">Puede acceder directamente a la memoria de la superficie mediante el método [**IDirect3DSurface9:: LockRect**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="6f8c6-104">You can directly access the surface memory by using the [**IDirect3DSurface9::LockRect**](/windows/desktop/api) method.</span></span> <span data-ttu-id="6f8c6-105">Cuando se llama a este método, el parámetro pRect es un puntero a una estructura [**Rect**](/previous-versions//dd162897(v=vs.85)) que describe el rectángulo en la superficie para tener acceso a él directamente.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-105">When you call this method, the pRect parameter is a pointer to a [**RECT**](/previous-versions//dd162897(v=vs.85)) structure that describes the rectangle on the surface to access directly.</span></span> <span data-ttu-id="6f8c6-106">Para solicitar que se bloquee toda la superficie, establezca pRect en **null**.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-106">To request that the entire surface be locked, set pRect to **NULL**.</span></span> <span data-ttu-id="6f8c6-107">Además, puede especificar un **Rect** que cubra solo una parte de la superficie.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-107">Also, you can specify a **RECT** that covers only a portion of the surface.</span></span> <span data-ttu-id="6f8c6-108">Siempre que no se superpongan dos rectángulos, dos subprocesos o procesos pueden bloquear simultáneamente varios rectángulos en una superficie.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-108">Providing that no two rectangles overlap, two threads or processes can simultaneously lock multiple rectangles in a surface.</span></span> <span data-ttu-id="6f8c6-109">Tenga en cuenta que no se puede bloquear un búfer de reserva de muestreo.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-109">Note that a multisample back buffer cannot be locked.</span></span>

<span data-ttu-id="6f8c6-110">El método [**IDirect3DSurface9:: LockRect**](/windows/desktop/api) rellena una estructura de [**D3DLOCKED \_ Rect**](d3dlocked-rect.md) con toda la información para tener acceso correctamente a la memoria de la superficie.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-110">The [**IDirect3DSurface9::LockRect**](/windows/desktop/api) method fills a [**D3DLOCKED\_RECT**](d3dlocked-rect.md) structure with all the information to properly access the surface memory.</span></span> <span data-ttu-id="6f8c6-111">La estructura incluye información sobre el paso y tiene un puntero a los bits bloqueados.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-111">The structure includes information about the pitch and has a pointer to the locked bits.</span></span> <span data-ttu-id="6f8c6-112">Cuando termine de acceder a la memoria de la superficie, llame al método [**IDirect3DSurface9:: UnlockRect**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dsurface9-unlockrect) para desbloquearlo.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-112">When you finish accessing the surface memory, call the [**IDirect3DSurface9::UnlockRect**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dsurface9-unlockrect) method to unlock it.</span></span>

<span data-ttu-id="6f8c6-113">Mientras tiene una superficie bloqueada, puede manipular directamente el contenido.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-113">While you have a surface locked, you can directly manipulate the contents.</span></span> <span data-ttu-id="6f8c6-114">En la lista siguiente se describen algunas sugerencias para evitar problemas comunes con la representación directa de la memoria de superficie.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-114">The following list describes some tips for avoiding common problems with directly rendering surface memory.</span></span>

-   <span data-ttu-id="6f8c6-115">No asuma nunca un tono de visualización constante.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-115">Never assume a constant display pitch.</span></span> <span data-ttu-id="6f8c6-116">Examine siempre la información de tono devuelta por el método [**IDirect3DSurface9:: LockRect**](/windows/desktop/api) .</span><span class="sxs-lookup"><span data-stu-id="6f8c6-116">Always examine the pitch information returned by the [**IDirect3DSurface9::LockRect**](/windows/desktop/api) method.</span></span> <span data-ttu-id="6f8c6-117">Este paso puede variar por una serie de motivos, como la ubicación de la memoria de la superficie, el tipo de tarjeta de visualización o incluso la versión del controlador de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-117">This pitch can vary for a number of reasons, including the location of the surface memory, the display card type, or even the version of the Direct3D driver.</span></span> <span data-ttu-id="6f8c6-118">Para obtener más información, vea [ancho frente a tono (Direct3D 9)](width-vs--pitch.md).</span><span class="sxs-lookup"><span data-stu-id="6f8c6-118">For more information, see [Width vs. Pitch (Direct3D 9)](width-vs--pitch.md).</span></span>
-   <span data-ttu-id="6f8c6-119">Asegúrese de que copia en superficies desbloqueadas.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-119">Make certain you copy to unlocked surfaces.</span></span> <span data-ttu-id="6f8c6-120">Los métodos de copia de Direct3D producirán un error si se llaman en una superficie bloqueada.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-120">Direct3D copy methods will fail if called on a locked surface.</span></span>
-   <span data-ttu-id="6f8c6-121">Limite la actividad de la aplicación mientras se bloquea una superficie.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-121">Limit your application's activity while a surface is locked.</span></span>
-   <span data-ttu-id="6f8c6-122">Copiar siempre los datos alineados para mostrar la memoria.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-122">Always copy data aligned to display memory.</span></span> <span data-ttu-id="6f8c6-123">Windows 98 usa un controlador de errores de página, Vflatd. 386, para implementar un búfer de fotogramas virtuales para mostrar tarjetas con memoria conmutada por Banco.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-123">Windows 98 uses a page fault handler, Vflatd.386, to implement a virtual flat-frame buffer for display cards with bank-switched memory.</span></span> <span data-ttu-id="6f8c6-124">El controlador permite que estos dispositivos de pantalla presenten un búfer de fotogramas lineal a Direct3D.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-124">The handler allows these display devices to present a linear frame buffer to Direct3D.</span></span> <span data-ttu-id="6f8c6-125">La copia de datos sin alinear para mostrar la memoria puede hacer que el sistema suspenda las operaciones si la copia abarca los bancos de memoria.</span><span class="sxs-lookup"><span data-stu-id="6f8c6-125">Copying data unaligned to display memory can cause the system to suspend operations if the copy spans memory banks.</span></span>
-   <span data-ttu-id="6f8c6-126">Una superficie no puede estar bloqueada si pertenece a un recurso asignado al bloque de \_ memoria predeterminado de D3DPOOL a menos que sea una textura dinámica o una superficie creada con [**IDirect3DDevice9:: CreateOffscreenPlainSurface**](/windows/desktop/api).</span><span class="sxs-lookup"><span data-stu-id="6f8c6-126">A surface may not be locked if it belongs to a resource assigned to the D3DPOOL\_DEFAULT memory pool unless it is a dynamic texture or a surface created using [**IDirect3DDevice9::CreateOffscreenPlainSurface**](/windows/desktop/api).</span></span> <span data-ttu-id="6f8c6-127">Las superficies de búfer de reserva, a las que se puede tener acceso mediante los métodos [**IDirect3DDevice9:: GetBackBuffer**](/windows/desktop/api) y [**IDirect3DSwapChain9:: GetBackBuffer**](/windows/desktop/api) , solo se pueden bloquear si la cadena de intercambio se ha creado con el miembro flags de [**D3DPRESENT \_ Parameters**](d3dpresent-parameters.md) para incluir D3DPRESENTFLAG búfer de reserva con bloqueo \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="6f8c6-127">Back buffer surfaces, which may be accessed using the [**IDirect3DDevice9::GetBackBuffer**](/windows/desktop/api) and [**IDirect3DSwapChain9::GetBackBuffer**](/windows/desktop/api) methods, may be locked only if the swap chain was created with the Flags member of [**D3DPRESENT\_PARAMETERS**](d3dpresent-parameters.md) to include D3DPRESENTFLAG\_LOCKABLE\_BACKBUFFER.</span></span>

## <a name="related-topics"></a><span data-ttu-id="6f8c6-128">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="6f8c6-128">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6f8c6-129">Superficies de Direct3D</span><span class="sxs-lookup"><span data-stu-id="6f8c6-129">Direct3D Surfaces</span></span>](direct3d-surfaces.md)
</dt> </dl>

 

 
