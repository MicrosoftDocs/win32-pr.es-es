---
description: El propósito de una acción personalizada de ejecución aplazada es retrasar la ejecución de un cambio del sistema en el momento en que se ejecuta el script de instalación.
ms.assetid: 79bf4d0b-624d-4652-8c4f-0ecd928a88e3
title: Acciones personalizadas de ejecución aplazada
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e09b91793f5d5bbc7be7099c92f8d8f212012d12
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104002277"
---
# <a name="deferred-execution-custom-actions"></a><span data-ttu-id="054ae-103">Acciones personalizadas de ejecución aplazada</span><span class="sxs-lookup"><span data-stu-id="054ae-103">Deferred Execution Custom Actions</span></span>

<span data-ttu-id="054ae-104">El propósito de una acción personalizada de ejecución aplazada es retrasar la ejecución de un cambio del sistema en el momento en que se ejecuta el script de instalación.</span><span class="sxs-lookup"><span data-stu-id="054ae-104">The purpose of a deferred execution custom action is to delay the execution of a system change to the time when the installation script is executed.</span></span> <span data-ttu-id="054ae-105">Esto difiere de una acción personalizada normal o de una acción estándar, en la que el instalador ejecuta la acción inmediatamente después de encontrarla en una tabla de secuencia o en una llamada a [**MsiDoAction**](/windows/desktop/api/Msiquery/nf-msiquery-msidoactiona).</span><span class="sxs-lookup"><span data-stu-id="054ae-105">This differs from a regular custom action, or a standard action, in which the installer executes the action immediately upon encountering it in a sequence table or in a call to [**MsiDoAction**](/windows/desktop/api/Msiquery/nf-msiquery-msidoactiona).</span></span> <span data-ttu-id="054ae-106">Una acción personalizada de ejecución aplazada permite que el autor del paquete especifique las operaciones del sistema en un punto determinado dentro de la ejecución del script de instalación.</span><span class="sxs-lookup"><span data-stu-id="054ae-106">A deferred execution custom action enables a package author to specify system operations at a particular point within the execution of the installation script.</span></span>

<span data-ttu-id="054ae-107">El instalador no ejecuta una acción personalizada de ejecución aplazada en el momento en que se procesa la secuencia de instalación.</span><span class="sxs-lookup"><span data-stu-id="054ae-107">The installer does not execute a deferred execution custom action at the time the installation sequence is processed.</span></span> <span data-ttu-id="054ae-108">En su lugar, el instalador escribe la acción personalizada en el script de instalación.</span><span class="sxs-lookup"><span data-stu-id="054ae-108">Instead the installer writes the custom action into the installation script.</span></span> <span data-ttu-id="054ae-109">El único parámetro de modo que establece el instalador en este caso es MSIRUNMODE \_ programado.</span><span class="sxs-lookup"><span data-stu-id="054ae-109">The only mode parameter the installer sets in this case is MSIRUNMODE\_SCHEDULED.</span></span> <span data-ttu-id="054ae-110">Consulte [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) para obtener una descripción de los parámetros de modo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="054ae-110">See [**MsiGetMode**](/windows/desktop/api/Msiquery/nf-msiquery-msigetmode) for a description of the run mode parameters.</span></span>

<span data-ttu-id="054ae-111">Una acción personalizada de ejecución aplazada debe programarse en la tabla ejecutar secuencia dentro de la sección que realiza la generación de scripts.</span><span class="sxs-lookup"><span data-stu-id="054ae-111">A deferred execution custom action must be scheduled in the execute sequence table within the section that performs script generation.</span></span> <span data-ttu-id="054ae-112">Las acciones personalizadas de ejecución aplazada deben aparecer después de [InstallInitialize](installinitialize-action.md) y antes de [InstallFinalize](installfinalize-action.md) en la secuencia de acción.</span><span class="sxs-lookup"><span data-stu-id="054ae-112">Deferred execution custom actions must come after [InstallInitialize](installinitialize-action.md) and come before [InstallFinalize](installfinalize-action.md) in the action sequence.</span></span>

<span data-ttu-id="054ae-113">Las acciones personalizadas que establecen propiedades, Estados de características, Estados de componentes o directorios de destino, o que programan las operaciones del sistema mediante la inserción de filas en tablas de secuencia, pueden en muchos casos usar la ejecución inmediata de forma segura.</span><span class="sxs-lookup"><span data-stu-id="054ae-113">Custom actions that set properties, feature states, component states, or target directories, or that schedule system operations by inserting rows into sequence tables, can in many cases use immediate execution safely.</span></span> <span data-ttu-id="054ae-114">Sin embargo, las acciones personalizadas que cambian el sistema directamente o llaman a otro servicio del sistema deben aplazarse hasta el momento en que se ejecuta el script de instalación.</span><span class="sxs-lookup"><span data-stu-id="054ae-114">However, custom actions that change the system directly, or call another system service, must be deferred to the time when the installation script is executed.</span></span> <span data-ttu-id="054ae-115">Vea [acciones personalizadas sincrónicas y asincrónicas](synchronous-and-asynchronous-custom-actions.md) para obtener más información sobre posibles conflictos entre sus acciones personalizadas y el subproceso de instalación principal.</span><span class="sxs-lookup"><span data-stu-id="054ae-115">See [Synchronous and Asynchronous Custom Actions](synchronous-and-asynchronous-custom-actions.md) for more information about potential clashes between their custom actions and the main installation thread.</span></span>

<span data-ttu-id="054ae-116">Dado que el script de instalación se puede ejecutar fuera de la sesión de instalación en la que se escribió, puede que la sesión ya no exista durante la ejecución del script de instalación.</span><span class="sxs-lookup"><span data-stu-id="054ae-116">Because the installation script can be executed outside of the installation session in which it was written, the session may no longer exist during execution of the installation script.</span></span> <span data-ttu-id="054ae-117">Esto significa que el identificador de sesión original y el conjunto de datos de propiedades durante la secuencia de instalación no están disponibles para una acción personalizada de ejecución aplazada.</span><span class="sxs-lookup"><span data-stu-id="054ae-117">This means that the original session handle and property data set during the installation sequence is not available to a deferred execution custom action.</span></span> <span data-ttu-id="054ae-118">Las acciones personalizadas diferidas que llaman a las bibliotecas de vínculos dinámicos (dll) pasan un identificador que solo se puede usar para obtener una cantidad de información muy limitada, como se describe en [obtener información de contexto para las acciones personalizadas de ejecución aplazada](obtaining-context-information-for-deferred-execution-custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="054ae-118">Deferred custom actions that call dynamic-link libraries (DLLs) pass a handle which can only be used to obtain a very limited amount of information, as described in [Obtaining Context Information for Deferred Execution Custom Actions](obtaining-context-information-for-deferred-execution-custom-actions.md).</span></span>

<span data-ttu-id="054ae-119">Tenga en cuenta que las acciones personalizadas diferidas, incluida la [reversión](rollback-custom-actions.md) de acciones personalizadas y la [confirmación de acciones personalizadas](commit-custom-actions.md), son los únicos tipos de acciones que se pueden ejecutar fuera del contexto de seguridad de los usuarios.</span><span class="sxs-lookup"><span data-stu-id="054ae-119">Note that deferred custom actions, including [rollback custom actions](rollback-custom-actions.md) and [commit custom actions](commit-custom-actions.md), are the only types of actions that can run outside the users security context.</span></span>

## <a name="related-topics"></a><span data-ttu-id="054ae-120">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="054ae-120">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="054ae-121">Opciones de ejecución de la acción personalizada In-Script</span><span class="sxs-lookup"><span data-stu-id="054ae-121">Custom Action In-Script Execution Options</span></span>](custom-action-in-script-execution-options.md)
</dt> <dt>

[<span data-ttu-id="054ae-122">Referencia de acción personalizada</span><span class="sxs-lookup"><span data-stu-id="054ae-122">Custom Action Reference</span></span>](custom-action-reference.md)
</dt> </dl>

 

 



