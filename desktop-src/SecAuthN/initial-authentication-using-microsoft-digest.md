---
description: La autenticación inicial tiene lugar cuando el servidor recibe una respuesta de desafío de un cliente.
ms.assetid: 8a5cf26b-0b2a-4f19-807b-9ec4d533cdd4
title: Autenticación inicial mediante Microsoft Digest
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8ed4960d947bbc60df962e6a9b71be755e158c8e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "103912478"
---
# <a name="initial-authentication-using-microsoft-digest"></a><span data-ttu-id="8a2bb-103">Autenticación inicial mediante Microsoft Digest</span><span class="sxs-lookup"><span data-stu-id="8a2bb-103">Initial Authentication Using Microsoft Digest</span></span>

<span data-ttu-id="8a2bb-104">La autenticación inicial tiene lugar cuando el servidor recibe una respuesta de desafío de un cliente.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-104">The initial authentication takes place when the server receives a challenge response from a client.</span></span> <span data-ttu-id="8a2bb-105">La autenticación de una respuesta de desafío normalmente implica un mínimo de dos servidores:</span><span class="sxs-lookup"><span data-stu-id="8a2bb-105">Authenticating a challenge response typically involves a minimum of two servers:</span></span>

-   <span data-ttu-id="8a2bb-106">El servidor de origen: recibe la solicitud del cliente y emite un desafío y, a continuación, recibe la respuesta de desafío del cliente que se debe autenticar.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-106">The originating server—receives the request from the client and issues a challenge, and then receives the challenge response from the client which must be authenticated.</span></span>
-   <span data-ttu-id="8a2bb-107">El servidor de autenticación: recibe información de autorización del servidor de origen y realiza la autenticación.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-107">The authenticating server—receives authorization information from the originating server, and performs the authentication.</span></span> <span data-ttu-id="8a2bb-108">Este servidor suele ser un controlador de dominio que admite varios servidores de origen.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-108">This server is typically a domain controller that supports multiple originating servers.</span></span>

<span data-ttu-id="8a2bb-109">Cuando el servidor de origen recibe una solicitud con un encabezado de autorización que contiene una respuesta de desafío de síntesis, la autenticación continúa como sigue:</span><span class="sxs-lookup"><span data-stu-id="8a2bb-109">When the originating server receives a request with an Authorization header containing a Digest challenge response, the authentication proceeds as follows:</span></span>

-   <span data-ttu-id="8a2bb-110">La identidad del servidor de origen se comprueba con respecto al servidor codificado en el nonce del desafío.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-110">The identity of the originating server is checked against the server encoded in the challenge's nonce.</span></span>
-   <span data-ttu-id="8a2bb-111">Se comprueba la marca de tiempo codificada en el nonce.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-111">The time stamp encoded in the nonce is checked.</span></span> <span data-ttu-id="8a2bb-112">Si el valor de seguridad (nonce) ha expirado y la información de nombre de usuario/contraseña es válida, el servidor de origen finaliza la autenticación emitiendo un nuevo desafío de síntesis con la Directiva obsoleta establecida en "true".</span><span class="sxs-lookup"><span data-stu-id="8a2bb-112">If the nonce has expired and the user name/password information is valid, the originating server ends the authentication by issuing a new Digest challenge with the stale directive set to "true".</span></span> <span data-ttu-id="8a2bb-113">Esto indica que solo el nonce estaba "obsoleto" y el cliente puede responder al nuevo desafío mediante la contraseña que usó en la respuesta anterior.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-113">This indicates that only the nonce was "stale" and the client can respond to the new challenge using the password it used in the previous response.</span></span> <span data-ttu-id="8a2bb-114">Si el cliente recibe un nuevo desafío después de enviar la respuesta de desafío para el desafío obsoleto, el cliente debe generar una nueva respuesta de desafío.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-114">If the client receives a new challenge after sending the challenge response for the stale challenge, the client must generate a new challenge response.</span></span>
-   <span data-ttu-id="8a2bb-115">Si se aplica la detección de la reproducción, se comprueba la Directiva de NC (recuento de nonce) con la base de datos de sesión de nonce mantenida por el servidor.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-115">If replay detection is enforced, the nc directive (nonce count) is checked against the nonce session database maintained by the server.</span></span>
-   <span data-ttu-id="8a2bb-116">El servidor de autenticación se identifica y envía la información de autorización del cliente.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-116">The authenticating server is identified and sent the client's authorization information.</span></span>
-   <span data-ttu-id="8a2bb-117">El servidor de autenticación comprueba la identidad del servidor codificado en el nonce con la identidad del servidor de origen.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-117">The authenticating server checks the identity of the server encoded in the nonce against the identity of the originating server.</span></span>
-   <span data-ttu-id="8a2bb-118">El servidor de autenticación, que es un controlador de dominio, recupera la contraseña del usuario.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-118">The authenticating server, which is a domain controller, retrieves the user's password.</span></span>
-   <span data-ttu-id="8a2bb-119">Con la información de autorización, la contraseña y la identificación del servidor de origen, el servidor de autenticación calcula el valor que el cliente debe haber proporcionado en la Directiva de respuesta de la respuesta de desafío.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-119">Using the authorization information, password, and originating server identification, the authenticating server computes the value that the client should have supplied in the challenge response's response directive.</span></span> <span data-ttu-id="8a2bb-120">El servidor de autenticación compara el valor calculado con la respuesta del cliente para determinar si la autenticación se ha realizado correctamente o no.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-120">The authenticating server compares the computed value to the client's response to determine the success or failure of the authentication.</span></span>

<span data-ttu-id="8a2bb-121">Si la autenticación es correcta, el [*contexto de seguridad*](../secgloss/s-gly.md) del usuario y una [*clave de sesión*](../secgloss/s-gly.md) de resumen se devuelven al servidor de origen.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-121">If authentication is successful, the user's [*security context*](../secgloss/s-gly.md) and a Digest [*session key*](../secgloss/s-gly.md) are returned to the originating server.</span></span> <span data-ttu-id="8a2bb-122">Si se produce un error en la autenticación, el servidor de origen debe generar una respuesta de error.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-122">If authentication fails, the originating server must generate an error response.</span></span> <span data-ttu-id="8a2bb-123">Después de una autenticación correcta, el servidor de origen devuelve el recurso solicitado al cliente.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-123">After a successful authentication the originating server returns the requested resource to the client.</span></span>

<span data-ttu-id="8a2bb-124">La clave de sesión de Resumen devuelta por el servidor de autenticación se almacena en caché por el servidor de origen para su uso en la autenticación de solicitudes futuras.</span><span class="sxs-lookup"><span data-stu-id="8a2bb-124">The Digest session key returned by the authenticating server is cached by the originating server for use in authenticating future requests.</span></span> <span data-ttu-id="8a2bb-125">Para obtener más información, vea [autenticar solicitudes posteriores mediante Microsoft Digest](authenticating-subsequent-requests-using-microsoft-digest.md).</span><span class="sxs-lookup"><span data-stu-id="8a2bb-125">For more information, see [Authenticating Subsequent Requests using Microsoft Digest](authenticating-subsequent-requests-using-microsoft-digest.md).</span></span>

 

 
