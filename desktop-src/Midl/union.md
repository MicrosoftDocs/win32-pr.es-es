---
title: Union (atributo)
description: La palabra clave Union aparece en las funciones relacionadas con las uniones discriminadas.
ms.assetid: 135a6581-e03e-4b90-9fd8-15690820dbd0
keywords:
- atributo de unión (MIDL)
topic_type:
- apiref
api_name:
- union
api_type:
- NA
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: bc683472d67775c4a2900695246d5f9ca920ca32
ms.sourcegitcommit: 57758ecb246c84d65e6e0e4bd5570d9176fa39cd
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/25/2019
ms.locfileid: "104532685"
---
# <a name="union-attribute"></a><span data-ttu-id="9da51-104">Union (atributo)</span><span class="sxs-lookup"><span data-stu-id="9da51-104">union attribute</span></span>

<span data-ttu-id="9da51-105">La palabra clave **Union** aparece en las funciones relacionadas con las uniones discriminadas.</span><span class="sxs-lookup"><span data-stu-id="9da51-105">The **union** keyword appears in functions that relate to discriminated unions.</span></span>

``` syntax
/* Encapsulated union*/
typedef [[ [type-attribute-list] ]] union [[ struct-name ]] switch (switch-type switch-name) [[ union-name ]] 
{
  C-style-case-list 
  [[ [ field-attribute-list <> ] ]] type-specifier <> declarator-list <>;

        ...
}

/* Non-encapsulated union*/
typedef [switch_type(switch-type) [[ , type-attr-list ]] ] union [[ tag ]] 
{ 
    [ case ( limited-expr-list) ]
  [[ [ field-attribute-list ] ]] type-specifier declarator-list;
  [[ [ default ]
  [[ [ field-attribute-list ] ]] type-specifier declarator-list;
  ]]
}
```

## <a name="parameters"></a><span data-ttu-id="9da51-106">Parámetros</span><span class="sxs-lookup"><span data-stu-id="9da51-106">Parameters</span></span>

<dl> <dt>

<span data-ttu-id="9da51-107">*lista de atributos de tipo*</span><span class="sxs-lookup"><span data-stu-id="9da51-107">*type-attribute-list*</span></span> 
</dt> <dd>

<span data-ttu-id="9da51-108">Especifica cero o más atributos que se aplican al tipo de Unión.</span><span class="sxs-lookup"><span data-stu-id="9da51-108">Specifies zero or more attributes that apply to the union type.</span></span> <span data-ttu-id="9da51-109">Entre los atributos de tipo válidos se incluyen **\[** el [**identificador**](handle.md) **\]** , **\[** [**transmitir \_ como**](transmit-as.md) **\]** ; el atributo de puntero **\[** [**Unique**](unique.md) **\]** , o **\[** [**ptr**](ptr.md) **\]** ; y el identificador de contexto de atributos de uso **\[** [**\_**](context-handle.md) **\]** y **\[** [**omitir**](ignore.md) **\]** .</span><span class="sxs-lookup"><span data-stu-id="9da51-109">Valid type attributes include **\[**[**handle**](handle.md)**\]**, **\[**[**transmit\_as**](transmit-as.md)**\]**; the pointer attribute **\[**[**unique**](unique.md)**\]**, or **\[**[**ptr**](ptr.md)**\]**; and the usage attributes **\[**[**context\_handle**](context-handle.md)**\]** and **\[**[**ignore**](ignore.md)**\]**.</span></span> <span data-ttu-id="9da51-110">Las uniones encapsuladas también pueden tener el **\[** [](ref.md) **\]** atributo de tipo REF Pointer.</span><span class="sxs-lookup"><span data-stu-id="9da51-110">Encapsulated unions can also have the **\[**[**ref**](ref.md)**\]** pointer type attribute.</span></span> <span data-ttu-id="9da51-111">Separe varios atributos con comas.</span><span class="sxs-lookup"><span data-stu-id="9da51-111">Separate multiple attributes with commas.</span></span>

</dd> <dt>

<span data-ttu-id="9da51-112">*nombre de struct*</span><span class="sxs-lookup"><span data-stu-id="9da51-112">*struct-name*</span></span> 
</dt> <dd>

<span data-ttu-id="9da51-113">Especifica una etiqueta opcional que nombra la estructura generada por el compilador de MIDL.</span><span class="sxs-lookup"><span data-stu-id="9da51-113">Specifies an optional tag that names the structure generated by the MIDL compiler.</span></span>

</dd> <dt>

<span data-ttu-id="9da51-114">*tipo de conmutador*</span><span class="sxs-lookup"><span data-stu-id="9da51-114">*switch-type*</span></span> 
</dt> <dd>

<span data-ttu-id="9da51-115">Especifica un tipo [**int**](int.md), [**Char**](char-idl.md), [**enum**](enum.md) o un identificador que se resuelve en uno de estos tipos.</span><span class="sxs-lookup"><span data-stu-id="9da51-115">Specifies an [**int**](int.md), [**char**](char-idl.md), [**enum**](enum.md) type, or an identifier that resolves to one of these types.</span></span>

</dd> <dt>

<span data-ttu-id="9da51-116">*cambiar nombre*</span><span class="sxs-lookup"><span data-stu-id="9da51-116">*switch-name*</span></span> 
</dt> <dd>

<span data-ttu-id="9da51-117">Especifica el nombre de la variable de tipo *Switch-Type* que actúa como discriminante de Unión.</span><span class="sxs-lookup"><span data-stu-id="9da51-117">Specifies the name of the variable of type *switch-type* that acts as the union discriminant.</span></span>

</dd> <dt>

<span data-ttu-id="9da51-118">*nombre-Unión*</span><span class="sxs-lookup"><span data-stu-id="9da51-118">*union-name*</span></span> 
</dt> <dd>

<span data-ttu-id="9da51-119">Especifica un identificador opcional que nombra la Unión en la estructura, generada por el compilador MIDL, que contiene la Unión y el discriminante.</span><span class="sxs-lookup"><span data-stu-id="9da51-119">Specifies an optional identifier that names the union in the structure, generated by the MIDL compiler, that contains the union and the discriminant.</span></span>

</dd> <dt>

<span data-ttu-id="9da51-120">*Lista de casos de estilo C*</span><span class="sxs-lookup"><span data-stu-id="9da51-120">*C-style-case-list*</span></span> 
</dt> <dd>

<span data-ttu-id="9da51-121">Lista de "**Case** *const-expr* :"</span><span class="sxs-lookup"><span data-stu-id="9da51-121">List of "**case** *const-expr* :"</span></span>

</dd> <dt>

<span data-ttu-id="9da51-122">*Limited-Expression-List*</span><span class="sxs-lookup"><span data-stu-id="9da51-122">*limited-expression-list*</span></span> 
</dt> <dd>

<span data-ttu-id="9da51-123">Especifica una o más expresiones del lenguaje C.</span><span class="sxs-lookup"><span data-stu-id="9da51-123">Specifies one or more C-language expressions.</span></span> <span data-ttu-id="9da51-124">El compilador MIDL admite expresiones condicionales, expresiones lógicas, expresiones relacionales y expresiones aritméticas.</span><span class="sxs-lookup"><span data-stu-id="9da51-124">The MIDL compiler supports conditional expressions, logical expressions, relational expressions, and arithmetic expressions.</span></span> <span data-ttu-id="9da51-125">MIDL no permite invocaciones de función en expresiones y no permite operadores de incremento y decremento.</span><span class="sxs-lookup"><span data-stu-id="9da51-125">MIDL does not allow function invocations in expressions and does not allow increment and decrement operators.</span></span> <span data-ttu-id="9da51-126">Las expresiones individuales de la lista deben estar separadas por una coma.</span><span class="sxs-lookup"><span data-stu-id="9da51-126">Individual expressions in the list should be separated by a comma.</span></span>

</dd> <dt>

<span data-ttu-id="9da51-127">*lista de atributos de campo*</span><span class="sxs-lookup"><span data-stu-id="9da51-127">*field-attribute-list*</span></span> 
</dt> <dd>

<span data-ttu-id="9da51-128">Especifica cero o más atributos de campo que se aplican al miembro de Unión.</span><span class="sxs-lookup"><span data-stu-id="9da51-128">Specifies zero or more field attributes that apply to the union member.</span></span> <span data-ttu-id="9da51-129">Entre los atributos de campo válidos se incluyen **\[** [**First \_ es**](first-is.md) **\]** , **\[** [**Last \_ es**](last-is.md) **\]** , **\[** [**length \_**](length-is.md)is **\]** , **\[** [**Max \_ is**](max-is.md) **\]** , **\[** [**size \_ es**](size-is.md) **\]** ; los atributos de uso **\[** [**String**](string.md) **\]** , **\[** [**Ignore**](ignore.md) **\]** y **\[** [**\_ Handle context**](context-handle.md), **\]** el atributo de puntero **\[** [**Unique**](unique.md) **\]** o **\[** [**ptr**](ptr.md) **\]** ; y, para los miembros que son uniones no encapsuladas, el **\[** [**\_ tipo de modificador**](switch-type.md)de atributo Union **\]** .</span><span class="sxs-lookup"><span data-stu-id="9da51-129">Valid field attributes include **\[**[**first\_is**](first-is.md)**\]**, **\[**[**last\_is**](last-is.md)**\]**, **\[**[**length\_is**](length-is.md)**\]**, **\[**[**max\_is**](max-is.md)**\]**, **\[**[**size\_is**](size-is.md)**\]**; the usage attributes **\[**[**string**](string.md)**\]**, **\[**[**ignore**](ignore.md)**\]**, and **\[**[**context\_handle**](context-handle.md)**\]**; the pointer attribute **\[**[**unique**](unique.md)**\]** or **\[**[**ptr**](ptr.md)**\]**; and, for members that are nonencapsulated unions, the union attribute **\[**[**switch\_type**](switch-type.md)**\]**.</span></span> <span data-ttu-id="9da51-130">Las uniones no encapsuladas también pueden usar el **\[** [](ref.md) **\]** atributo de campo REF Pointer.</span><span class="sxs-lookup"><span data-stu-id="9da51-130">Nonencapsulated unions can also use the **\[**[**ref**](ref.md)**\]** pointer field attribute.</span></span> <span data-ttu-id="9da51-131">Separe varios atributos de campo con comas.</span><span class="sxs-lookup"><span data-stu-id="9da51-131">Separate multiple field attributes with commas.</span></span>

</dd> <dt>

<span data-ttu-id="9da51-132">*Type-Specifier*</span><span class="sxs-lookup"><span data-stu-id="9da51-132">*type-specifier*</span></span> 
</dt> <dd>

<span data-ttu-id="9da51-133">Especifica un [tipo base](midl-base-types.md), un [**struct**](struct.md), una **Unión**, un tipo de [**enumeración**](enum.md) o un identificador de tipo.</span><span class="sxs-lookup"><span data-stu-id="9da51-133">Specifies a [base type](midl-base-types.md), [**struct**](struct.md), **union**, [**enum**](enum.md) type, or type identifier.</span></span> <span data-ttu-id="9da51-134">Una especificación de almacenamiento opcional puede preceder *a Type-Specifier*.</span><span class="sxs-lookup"><span data-stu-id="9da51-134">An optional storage specification can precede *type-specifier*.</span></span>

</dd> <dt>

<span data-ttu-id="9da51-135">*lista de declaradores*</span><span class="sxs-lookup"><span data-stu-id="9da51-135">*declarator-list*</span></span> 
</dt> <dd>

<span data-ttu-id="9da51-136">Uno o varios declaradores estándar de C, como identificadores, declaradores de puntero y declaradores de matriz.</span><span class="sxs-lookup"><span data-stu-id="9da51-136">One or more standard C declarators, such as identifiers, pointer declarators, and array declarators.</span></span> <span data-ttu-id="9da51-137">(Los declaradores de función y las declaraciones de campo de bits no se permiten en las uniones que se transmiten en llamadas a procedimientos remotos.</span><span class="sxs-lookup"><span data-stu-id="9da51-137">(Function declarators and bit-field declarations are not allowed in unions that are transmitted in remote procedure calls.</span></span> <span data-ttu-id="9da51-138">Excepto cuando se usa el modificador de compilador de MIDL [**/OSF**](-osf.md), estos declaradores se permiten en las uniones que no se transmiten.) Separe varios declaradores con comas.</span><span class="sxs-lookup"><span data-stu-id="9da51-138">Except when you use the MIDL compiler switch [**/osf**](-osf.md), these declarators are allowed in unions that are not transmitted.) Separate multiple declarators with commas.</span></span>

</dd> <dt>

<span data-ttu-id="9da51-139">*etiqueta*</span><span class="sxs-lookup"><span data-stu-id="9da51-139">*tag*</span></span> 
</dt> <dd>

<span data-ttu-id="9da51-140">Especifica una etiqueta opcional.</span><span class="sxs-lookup"><span data-stu-id="9da51-140">Specifies an optional tag.</span></span>

</dd> </dl>

## <a name="remarks"></a><span data-ttu-id="9da51-141">Observaciones</span><span class="sxs-lookup"><span data-stu-id="9da51-141">Remarks</span></span>

<span data-ttu-id="9da51-142">MIDL admite dos tipos de uniones discriminadas: [uniones encapsuladas](encapsulated-unions.md) y [uniones no encapsuladas](nonencapsulated-unions.md).</span><span class="sxs-lookup"><span data-stu-id="9da51-142">MIDL supports two types of discriminated unions: [encapsulated unions](encapsulated-unions.md) and [nonencapsulated unions](nonencapsulated-unions.md).</span></span> <span data-ttu-id="9da51-143">La Unión encapsulada es compatible con las implementaciones anteriores de RPC (NCA versión 1).</span><span class="sxs-lookup"><span data-stu-id="9da51-143">The encapsulated union is compatible with previous implementations of RPC (NCA version 1).</span></span> <span data-ttu-id="9da51-144">La Unión no encapsulada elimina algunas de las restricciones de la Unión encapsulada y proporciona un discriminante más visible que la Unión encapsulada.</span><span class="sxs-lookup"><span data-stu-id="9da51-144">The nonencapsulated union eliminates some of the restrictions of the encapsulated union and provides a more visible discriminant than the encapsulated union.</span></span>

<span data-ttu-id="9da51-145">La Unión encapsulada se identifica mediante la palabra clave [**Switch**](switch.md) y la ausencia de otras palabras clave relacionadas con uniones.</span><span class="sxs-lookup"><span data-stu-id="9da51-145">The encapsulated union is identified by the [**switch**](switch.md) keyword and the absence of other union-related keywords.</span></span>

<span data-ttu-id="9da51-146">La Unión no encapsulada, también conocida como Unión, se identifica mediante la presencia del **\[** [**modificador \_ is**](switch-is.md) **\]** y las **\[** palabras clave de [**\_ tipo de conmutador**](switch-type.md) **\]** , que identifican el discriminante y su tipo.</span><span class="sxs-lookup"><span data-stu-id="9da51-146">The nonencapsulated union, also known as a union, is identified by the presence of the **\[**[**switch\_is**](switch-is.md)**\]** and **\[**[**switch\_type**](switch-type.md)**\]** keywords, which identify the discriminant and its type.</span></span>

<span data-ttu-id="9da51-147">Cuando use **\[** [**in**](in.md), [**out**](out-idl.md) **\]** uniones, tenga en cuenta que el cambio del valor del modificador Union durante la llamada puede hacer que la llamada remota se comporte de forma diferente a una llamada local.</span><span class="sxs-lookup"><span data-stu-id="9da51-147">When you use **\[**[**in**](in.md), [**out**](out-idl.md)**\]** unions, be aware that changing the value of the union switch during the call can make the remote call behave differently from a local call.</span></span> <span data-ttu-id="9da51-148">En la devolución, el código auxiliar copia el parámetro **\[ in**, **out \]** en la memoria que ya está presente en el cliente.</span><span class="sxs-lookup"><span data-stu-id="9da51-148">On return, the stubs copy the **\[in**, **out\]** parameter into memory that is already present on the client.</span></span> <span data-ttu-id="9da51-149">Cuando el procedimiento remoto modifica el valor del modificador Union y, por consiguiente, cambia el tamaño del objeto de datos, el código auxiliar puede sobrescribir la memoria válida con el valor **\[ out \]** .</span><span class="sxs-lookup"><span data-stu-id="9da51-149">When the remote procedure modifies the value of the union switch and consequently changes the data object's size, the stubs can overwrite valid memory with the **\[out\]** value.</span></span> <span data-ttu-id="9da51-150">Cuando el modificador Union cambia el objeto de datos de un tipo base a un tipo de puntero, el código auxiliar puede sobrescribir la memoria válida cuando copia el puntero en la ubicación de memoria indicada por el valor **\[ in \]** de un tipo base.</span><span class="sxs-lookup"><span data-stu-id="9da51-150">When the union switch changes the data object from a base type to a pointer type, the stubs can overwrite valid memory when they copy the pointer referent into the memory location indicated by the **\[in\]** value of a base type.</span></span>

<span data-ttu-id="9da51-151">La forma de las uniones debe ser idéntica en todas las plataformas para garantizar la interconectividad.</span><span class="sxs-lookup"><span data-stu-id="9da51-151">The shape of unions must be identical across platforms to ensure interconnectivity.</span></span>

## <a name="see-also"></a><span data-ttu-id="9da51-152">Vea también</span><span class="sxs-lookup"><span data-stu-id="9da51-152">See also</span></span>

<dl> <dt>

[<span data-ttu-id="9da51-153">Uniones encapsuladas</span><span class="sxs-lookup"><span data-stu-id="9da51-153">Encapsulated Unions</span></span>](encapsulated-unions.md)
</dt> <dt>

[<span data-ttu-id="9da51-154">Archivo de definición de interfaz (IDL)</span><span class="sxs-lookup"><span data-stu-id="9da51-154">Interface Definition (IDL) File</span></span>](interface-definition-idl-file.md)
</dt> <dt>

[<span data-ttu-id="9da51-155">**de**</span><span class="sxs-lookup"><span data-stu-id="9da51-155">**in**</span></span>](in.md)
</dt> <dt>

[<span data-ttu-id="9da51-156">Uniones no encapsuladas</span><span class="sxs-lookup"><span data-stu-id="9da51-156">Nonencapsulated Unions</span></span>](nonencapsulated-unions.md)
</dt> <dt>

[<span data-ttu-id="9da51-157">**enuncia**</span><span class="sxs-lookup"><span data-stu-id="9da51-157">**out**</span></span>](out-idl.md)
</dt> <dt>

[<span data-ttu-id="9da51-158">**el modificador \_ es**</span><span class="sxs-lookup"><span data-stu-id="9da51-158">**switch\_is**</span></span>](switch-is.md)
</dt> <dt>

[<span data-ttu-id="9da51-159">**tipo de conmutador \_**</span><span class="sxs-lookup"><span data-stu-id="9da51-159">**switch\_type**</span></span>](switch-type.md)
</dt> </dl>

 

 




