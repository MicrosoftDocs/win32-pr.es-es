---
title: Fases de teselación
description: El tiempo de ejecución de Direct3D 11 admite tres nuevas fases que implementan Teselación, que convierte las superficies de subdivisiones de bajo detalle en primitivas más detalladas en la GPU.
ms.assetid: 4ad2fd3e-6e1a-4326-8469-3198acf931dc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3aacb48ccc2c95ab93ba4f34212e654880d9a369
ms.sourcegitcommit: 4e4f9e7c90d25af0774deec1d44bd49fa9b6daa9
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2020
ms.locfileid: "104359483"
---
# <a name="tessellation-stages"></a><span data-ttu-id="383a7-103">Fases de teselación</span><span class="sxs-lookup"><span data-stu-id="383a7-103">Tessellation Stages</span></span>

<span data-ttu-id="383a7-104">El tiempo de ejecución de Direct3D 11 admite tres nuevas fases que implementan Teselación, que convierte las superficies de subdivisiones de bajo detalle en primitivas más detalladas en la GPU.</span><span class="sxs-lookup"><span data-stu-id="383a7-104">The Direct3D 11 runtime supports three new stages that implement tessellation, which converts low-detail subdivision surfaces into higher-detail primitives on the GPU.</span></span> <span data-ttu-id="383a7-105">Mosaicos de teselación (o rotura) de superficies de orden superior en estructuras adecuadas para la representación.</span><span class="sxs-lookup"><span data-stu-id="383a7-105">Tessellation tiles (or breaks up) high-order surfaces into suitable structures for rendering.</span></span>

<span data-ttu-id="383a7-106">Mediante la implementación de teselación en hardware, una canalización de gráficos puede evaluar modelos de menor detalle (recuento de polígonos inferiores) y representar con mayor detalle.</span><span class="sxs-lookup"><span data-stu-id="383a7-106">By implementing tessellation in hardware, a graphics pipeline can evaluate lower detail (lower polygon count) models and render in higher detail.</span></span> <span data-ttu-id="383a7-107">Aunque se puede hacer la teselación de software, la teselación implementada por el hardware puede generar una cantidad increíble de detalles visuales (incluida la compatibilidad con la asignación de desplazamiento) sin agregar los detalles visuales a los tamaños del modelo y las tasas de actualización de paralyzing.</span><span class="sxs-lookup"><span data-stu-id="383a7-107">While software tessellation can be done, tessellation implemented by hardware can generate an incredible amount of visual detail (including support for displacement mapping) without adding the visual detail to the model sizes and paralyzing refresh rates.</span></span>

-   [<span data-ttu-id="383a7-108">Ventajas de teselación</span><span class="sxs-lookup"><span data-stu-id="383a7-108">Tessellation Benefits</span></span>](#tessellation-benefits)
-   [<span data-ttu-id="383a7-109">Nuevas fases de canalización</span><span class="sxs-lookup"><span data-stu-id="383a7-109">New Pipeline Stages</span></span>](#new-pipeline-stages)
    -   [<span data-ttu-id="383a7-110">Fase del sombreador de casco</span><span class="sxs-lookup"><span data-stu-id="383a7-110">Hull-Shader Stage</span></span>](#hull-shader-stage)
    -   [<span data-ttu-id="383a7-111">Fase del teselador</span><span class="sxs-lookup"><span data-stu-id="383a7-111">Tessellator Stage</span></span>](#tessellator-stage)
    -   [<span data-ttu-id="383a7-112">Fase de sombreador de dominios</span><span class="sxs-lookup"><span data-stu-id="383a7-112">Domain-Shader Stage</span></span>](#domain-shader-stage)
-   [<span data-ttu-id="383a7-113">API para inicializar fases de teselación</span><span class="sxs-lookup"><span data-stu-id="383a7-113">APIs for initializing Tessellation Stages</span></span>](#apis-for-initializing-tessellation-stages)
-   [<span data-ttu-id="383a7-114">Cómo:</span><span class="sxs-lookup"><span data-stu-id="383a7-114">How to's:</span></span>](#how-tos)
-   [<span data-ttu-id="383a7-115">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="383a7-115">Related topics</span></span>](#related-topics)

## <a name="tessellation-benefits"></a><span data-ttu-id="383a7-116">Ventajas de teselación</span><span class="sxs-lookup"><span data-stu-id="383a7-116">Tessellation Benefits</span></span>

<span data-ttu-id="383a7-117">Tesela</span><span class="sxs-lookup"><span data-stu-id="383a7-117">Tessellation:</span></span>

-   <span data-ttu-id="383a7-118">Ahorra gran cantidad de memoria y ancho de banda, lo que permite que una aplicación represente superficies más detalladas de modelos de baja resolución.</span><span class="sxs-lookup"><span data-stu-id="383a7-118">Saves lots of memory and bandwidth, which allows an application to render higher detailed surfaces from low-resolution models.</span></span> <span data-ttu-id="383a7-119">La técnica de teselación implementada en la canalización de Direct3D 11 también admite la asignación de desplazamiento, que puede generar sorprendentes cantidades de detalles de la superficie.</span><span class="sxs-lookup"><span data-stu-id="383a7-119">The tessellation technique implemented in the Direct3D 11 pipeline also supports displacement mapping, which can produce stunning amounts of surface detail.</span></span>
-   <span data-ttu-id="383a7-120">Admite técnicas de representación escalables, como Continuous o View dependent Level-of-detail que se puede calcular sobre la marcha.</span><span class="sxs-lookup"><span data-stu-id="383a7-120">Supports scalable-rendering techniques, such as continuous or view dependent levels-of-detail which can be calculated on the fly.</span></span>
-   <span data-ttu-id="383a7-121">Mejora el rendimiento al realizar cálculos caros con una frecuencia menor (realizando cálculos en un modelo de detalles más bajo).</span><span class="sxs-lookup"><span data-stu-id="383a7-121">Improves performance by performing expensive computations at lower frequency (doing calculations on a lower-detail model).</span></span> <span data-ttu-id="383a7-122">Esto podría incluir los cálculos de mezcla mediante formas de mezcla o destinos de transformación para la animación realista o cálculos físicos para la detección de colisiones o la dinámica del cuerpo flexible.</span><span class="sxs-lookup"><span data-stu-id="383a7-122">This could include blending calculations using blend shapes or morph targets for realistic animation or physics calculations for collision detection or soft body dynamics.</span></span>

<span data-ttu-id="383a7-123">La canalización de Direct3D 11 implementa la teselación en el hardware, que no carga el trabajo de la CPU a la GPU.</span><span class="sxs-lookup"><span data-stu-id="383a7-123">The Direct3D 11 pipeline implements tessellation in hardware, which off-loads the work from the CPU to the GPU.</span></span> <span data-ttu-id="383a7-124">Esto puede dar lugar a mejoras de rendimiento muy grandes si una aplicación implementa un gran número de destinos transformativos y/o modelos más sofisticados.</span><span class="sxs-lookup"><span data-stu-id="383a7-124">This can lead to very large performance improvements if an application implements large numbers of morph targets and/or more sophisticated skinning/deformation models.</span></span> <span data-ttu-id="383a7-125">Para tener acceso a las nuevas características de teselación, debe obtener información sobre algunas nuevas fases de canalización.</span><span class="sxs-lookup"><span data-stu-id="383a7-125">To access the new tessellation features, you must learn about some new pipeline stages.</span></span>

## <a name="new-pipeline-stages"></a><span data-ttu-id="383a7-126">Nuevas fases de canalización</span><span class="sxs-lookup"><span data-stu-id="383a7-126">New Pipeline Stages</span></span>

<span data-ttu-id="383a7-127">La teselación usa la GPU para calcular una superficie más detallada de una superficie construida a partir de las cuádruples revisiones, parches de triángulo o isolíneas.</span><span class="sxs-lookup"><span data-stu-id="383a7-127">Tessellation uses the GPU to calculate a more detailed surface from a surface constructed from quad patches, triangle patches or isolines.</span></span> <span data-ttu-id="383a7-128">Para aproximar la superficie de orden superior, cada revisión se divide en triángulos, puntos o líneas mediante factores de teselación.</span><span class="sxs-lookup"><span data-stu-id="383a7-128">To approximate the high-ordered surface, each patch is subdivided into triangles, points, or lines using tessellation factors.</span></span> <span data-ttu-id="383a7-129">La canalización de Direct3D 11 implementa la teselación mediante tres nuevas fases de canalización:</span><span class="sxs-lookup"><span data-stu-id="383a7-129">The Direct3D 11 pipeline implements tessellation using three new pipeline stages:</span></span>

-   <span data-ttu-id="383a7-130">[Fase del sombreador de casco](#hull-shader-stage) : una fase de sombreador programable que genera una revisión de geometría (y constantes de revisión) que corresponden a cada revisión de entrada (cuádruple, triángulo o línea).</span><span class="sxs-lookup"><span data-stu-id="383a7-130">[Hull-Shader Stage](#hull-shader-stage) - A programmable shader stage that produces a geometry patch (and patch constants) that correspond to each input patch (quad, triangle, or line).</span></span>
-   <span data-ttu-id="383a7-131">[Fase del teselador](#tessellator-stage) : una fase de canalización de función fija que crea un patrón de muestreo del dominio que representa la revisión de geometría y genera un conjunto de objetos más pequeños (triángulos, puntos o líneas) que conectan estos ejemplos.</span><span class="sxs-lookup"><span data-stu-id="383a7-131">[Tessellator Stage](#tessellator-stage) - A fixed function pipeline stage that creates a sampling pattern of the domain that represents the geometry patch and generates a set of smaller objects (triangles, points, or lines) that connect these samples.</span></span>
-   <span data-ttu-id="383a7-132">[Fase de sombreador de dominio](#domain-shader-stage) : fase de sombreador programable que calcula la posición del vértice que corresponde a cada ejemplo de dominio.</span><span class="sxs-lookup"><span data-stu-id="383a7-132">[Domain-Shader Stage](#domain-shader-stage) - A programmable shader stage that calculates the vertex position that corresponds to each domain sample.</span></span>

<span data-ttu-id="383a7-133">En el diagrama siguiente se resaltan las nuevas fases de la canalización de Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="383a7-133">The following diagram highlights the new stages of the Direct3D 11 pipeline.</span></span>

![diagrama de la canalización de Direct3D 11 que resalta las fases de sombreador de casco, del teselador y sombreador de dominio](images/d3d11-pipeline-stages-tessellation.png)

<span data-ttu-id="383a7-135">En el diagrama siguiente se muestra la progresión a través de las fases de teselación.</span><span class="sxs-lookup"><span data-stu-id="383a7-135">The following diagram shows the progression through the tessellation stages.</span></span> <span data-ttu-id="383a7-136">La progresión comienza con la superficie de subdivisión de menor detalle.</span><span class="sxs-lookup"><span data-stu-id="383a7-136">The progression starts with the low-detail subdivision surface.</span></span> <span data-ttu-id="383a7-137">La progresión resalta la revisión de entrada con la revisión geométrica correspondiente, ejemplos de dominio y triángulos que conectan estos ejemplos.</span><span class="sxs-lookup"><span data-stu-id="383a7-137">The progression next highlights the input patch with the corresponding geometry patch, domain samples, and triangles that connect these samples.</span></span> <span data-ttu-id="383a7-138">Finalmente, la progresión resalta los vértices que corresponden a estos ejemplos.</span><span class="sxs-lookup"><span data-stu-id="383a7-138">The progression finally highlights the vertices that correspond to these samples.</span></span>

![diagrama de progresión de teselación](images/tess-prog.png)

### <a name="hull-shader-stage"></a><span data-ttu-id="383a7-140">Hull-Shader fase</span><span class="sxs-lookup"><span data-stu-id="383a7-140">Hull-Shader Stage</span></span>

<span data-ttu-id="383a7-141">Sombreador de casco (que se invoca una vez por revisión): transforma los puntos de control de entrada que definen una superficie de orden inferior en los puntos de control que componen una revisión.</span><span class="sxs-lookup"><span data-stu-id="383a7-141">A hull shader -- which is invoked once per patch -- transforms input control points that define a low-order surface into control points that make up a patch.</span></span> <span data-ttu-id="383a7-142">También realiza algunos cálculos por revisión para proporcionar datos para la fase de teselación y la fase de dominio.</span><span class="sxs-lookup"><span data-stu-id="383a7-142">It also does some per patch calculations to provide data for the tessellation stage and the domain stage.</span></span> <span data-ttu-id="383a7-143">En el nivel de cuadro negro más sencillo, la fase del sombreador de casco tendría un aspecto similar al diagrama siguiente.</span><span class="sxs-lookup"><span data-stu-id="383a7-143">At the simplest black-box level, the hull-shader stage would look something like the following diagram.</span></span>

![diagrama de la fase del sombreador de casco](images/d3d11-hull-shader.png)

<span data-ttu-id="383a7-145">Un sombreador de casco se implementa con una función HLSL y tiene las siguientes propiedades:</span><span class="sxs-lookup"><span data-stu-id="383a7-145">A hull shader is implemented with an HLSL function, and has the following properties:</span></span>

-   <span data-ttu-id="383a7-146">La entrada del sombreador se encuentra entre 1 y 32 puntos de control.</span><span class="sxs-lookup"><span data-stu-id="383a7-146">The shader input is between 1 and 32 control points.</span></span>
-   <span data-ttu-id="383a7-147">La salida del sombreador se encuentra entre 1 y 32 puntos de control, independientemente del número de factores de teselación.</span><span class="sxs-lookup"><span data-stu-id="383a7-147">The shader output is between 1 and 32 control points, regardless of the number of tessellation factors.</span></span> <span data-ttu-id="383a7-148">La fase del sombreador de dominio puede consumir la salida de los puntos de control de un sombreador de casco.</span><span class="sxs-lookup"><span data-stu-id="383a7-148">The control-points output from a hull shader can be consumed by the domain-shader stage.</span></span> <span data-ttu-id="383a7-149">Un sombreador de dominio puede consumir los datos constantes de revisión; los factores de teselación pueden ser consumidos por el sombreador de dominios y la fase de teselación.</span><span class="sxs-lookup"><span data-stu-id="383a7-149">Patch constant data can be consumed by a domain shader; tessellation factors can be consumed by the domain shader and the tessellation stage.</span></span>
-   <span data-ttu-id="383a7-150">Los factores de teselación determinan la cantidad de subdividir cada revisión.</span><span class="sxs-lookup"><span data-stu-id="383a7-150">Tessellation factors determine how much to subdivide each patch.</span></span>
-   <span data-ttu-id="383a7-151">El sombreador declara el Estado requerido por la fase del teselador.</span><span class="sxs-lookup"><span data-stu-id="383a7-151">The shader declares the state required by the tessellator stage.</span></span> <span data-ttu-id="383a7-152">Esto incluye información como el número de puntos de control, el tipo de revisión y el tipo de partición que se va a usar cuando se teselar.</span><span class="sxs-lookup"><span data-stu-id="383a7-152">This includes information such as the number of control points, the type of patch face and the type of partitioning to use when tessellating.</span></span> <span data-ttu-id="383a7-153">Esta información aparece como declaraciones normalmente al principio del código del sombreador.</span><span class="sxs-lookup"><span data-stu-id="383a7-153">This information appears as declarations typically at the front of the shader code.</span></span>
-   <span data-ttu-id="383a7-154">Si la fase del sombreador de casco establece cualquier factor de teselación perimetral en = 0 o NaN, se seleccionará la revisión.</span><span class="sxs-lookup"><span data-stu-id="383a7-154">If the hull-shader stage sets any edge tessellation factor to = 0 or NaN, the patch will be culled.</span></span> <span data-ttu-id="383a7-155">Como resultado, la fase del teselador se puede ejecutar o no, el sombreador de dominios no se ejecutará y no se producirá ningún resultado visible para dicha revisión.</span><span class="sxs-lookup"><span data-stu-id="383a7-155">As a result, the tessellator stage may or may not run, the domain shader will not run, and no visible output will be produced for that patch.</span></span>

<span data-ttu-id="383a7-156">En un nivel más profundo, un sombreador de casco funciona en dos fases: una fase de punto de control y una fase de revisión constante, que se ejecutan en paralelo por el hardware.</span><span class="sxs-lookup"><span data-stu-id="383a7-156">At a deeper level, a hull-shader actually operates in two phases: a control-point phase and a patch-constant phase, which are run in parallel by the hardware.</span></span> <span data-ttu-id="383a7-157">El compilador de HLSL extrae el paralelismo en un sombreador de casco y lo codifica en código de bytes que controla el hardware.</span><span class="sxs-lookup"><span data-stu-id="383a7-157">The HLSL compiler extracts the parallelism in a hull shader and encodes it into bytecode that drives the hardware.</span></span>

-   <span data-ttu-id="383a7-158">La fase de punto de control funciona una vez para cada punto de control, Lee los puntos de control de una revisión y genera un punto de control de salida (identificado por un ControlPointID).</span><span class="sxs-lookup"><span data-stu-id="383a7-158">The control-point phase operates once for each control-point, reading the control points for a patch, and generating one output control point (identified by a ControlPointID).</span></span>
-   <span data-ttu-id="383a7-159">La fase patch-Constant funciona una vez por revisión para generar factores de teselación perimetral y otras constantes por revisión.</span><span class="sxs-lookup"><span data-stu-id="383a7-159">The patch-constant phase operates once per patch to generate edge tessellation factors and other per-patch constants.</span></span> <span data-ttu-id="383a7-160">Internamente, muchas fases constantes de revisión se pueden ejecutar al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="383a7-160">Internally, many patch-constant phases may run at the same time.</span></span> <span data-ttu-id="383a7-161">La fase patch-Constant tiene acceso de solo lectura a todos los puntos de control de entrada y salida.</span><span class="sxs-lookup"><span data-stu-id="383a7-161">The patch-constant phase has read-only access to all input and output control points.</span></span>

<span data-ttu-id="383a7-162">A continuación se muestra un ejemplo de un sombreador de casco:</span><span class="sxs-lookup"><span data-stu-id="383a7-162">Here's an example of a hull shader:</span></span>


```
[patchsize(12)]
[patchconstantfunc(MyPatchConstantFunc)]
MyOutPoint main(uint Id : SV_ControlPointID,
     InputPatch<MyInPoint, 12> InPts)
{
     MyOutPoint result;
     
     ...
     
     result = TransformControlPoint( InPts[Id] );

     return result;
}
```



<span data-ttu-id="383a7-163">Para obtener un ejemplo que crea un sombreador de casco, consulte [Cómo: crear un sombreador de casco](direct3d-11-advanced-stages-hull-shader-create.md).</span><span class="sxs-lookup"><span data-stu-id="383a7-163">For an example that creates a hull shader, see [How To: Create a Hull Shader](direct3d-11-advanced-stages-hull-shader-create.md).</span></span>

### <a name="tessellator-stage"></a><span data-ttu-id="383a7-164">Fase del teselador</span><span class="sxs-lookup"><span data-stu-id="383a7-164">Tessellator Stage</span></span>

<span data-ttu-id="383a7-165">Del teselador es una fase de función fija inicializada mediante el enlace de un sombreador de casco a la canalización (vea [Cómo: inicializar la fase del teselador](direct3d-11-advanced-stages-tessellator-initialize.md)).</span><span class="sxs-lookup"><span data-stu-id="383a7-165">The tessellator is a fixed-function stage initialized by binding a hull shader to the pipeline (see [How To: Initialize the Tessellator Stage](direct3d-11-advanced-stages-tessellator-initialize.md)).</span></span> <span data-ttu-id="383a7-166">El propósito de la fase del teselador es subdividir un dominio (cuádruple, Tri o line) en muchos objetos más pequeños (triángulos, puntos o líneas).</span><span class="sxs-lookup"><span data-stu-id="383a7-166">The purpose of the tessellator stage is to subdivide a domain (quad, tri, or line) into many smaller objects (triangles, points or lines).</span></span> <span data-ttu-id="383a7-167">Del teselador coloca en mosaico un dominio canónico en un sistema de coordenadas normalizado (cero a uno).</span><span class="sxs-lookup"><span data-stu-id="383a7-167">The tessellator tiles a canonical domain in a normalized (zero-to-one) coordinate system.</span></span> <span data-ttu-id="383a7-168">Por ejemplo, un dominio cuádruple se Tesela en un cuadrado de unidad.</span><span class="sxs-lookup"><span data-stu-id="383a7-168">For example, a quad domain is tessellated to a unit square.</span></span>

<span data-ttu-id="383a7-169">Del teselador funciona una vez por revisión mediante los factores de teselación (que especifican el grado de teselación del dominio) y el tipo de creación de particiones (que especifica el algoritmo que se usa para segmentar una revisión) que se pasan desde la fase del sombreador de casco.</span><span class="sxs-lookup"><span data-stu-id="383a7-169">The tessellator operates once per patch using the tessellation factors (which specify how finely the domain will be tessellated) and the type of partitioning (which specifies the algorithm used to slice up a patch) that are passed in from the hull-shader stage.</span></span> <span data-ttu-id="383a7-170">Del teselador genera coordenadas UV (y, opcionalmente, w) y la topología de superficie en la etapa del sombreador de dominio.</span><span class="sxs-lookup"><span data-stu-id="383a7-170">The tessellator outputs uv (and optionally w) coordinates and the surface topology to the domain-shader stage.</span></span>

<span data-ttu-id="383a7-171">Internamente, el del teselador funciona en dos fases:</span><span class="sxs-lookup"><span data-stu-id="383a7-171">Internally, the tessellator operates in two phases:</span></span>

-   <span data-ttu-id="383a7-172">En la primera fase se procesan los factores de teselación, se corrigen los problemas de redondeo, se controlan los factores muy pequeños, se reducen y se combinan los factores mediante la aritmética de punto flotante de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="383a7-172">The first phase processes the tessellation factors, fixing rounding problems, handling very small factors, reducing and combining factors, using 32-bit floating-point arithmetic.</span></span>
-   <span data-ttu-id="383a7-173">La segunda fase genera listas de puntos o topologías según el tipo de partición seleccionado.</span><span class="sxs-lookup"><span data-stu-id="383a7-173">The second phase generates point or topology lists based on the type of partitioning selected.</span></span> <span data-ttu-id="383a7-174">Esta es la tarea principal de la fase del teselador y usa fracciones de 16 bits con aritmética de punto fijo.</span><span class="sxs-lookup"><span data-stu-id="383a7-174">This is the core task of the tessellator stage and uses 16-bit fractions with fixed-point arithmetic.</span></span> <span data-ttu-id="383a7-175">La aritmética de punto fijo permite la aceleración de hardware manteniendo una precisión aceptable.</span><span class="sxs-lookup"><span data-stu-id="383a7-175">Fixed-point arithmetic allows hardware acceleration while maintaining acceptable precision.</span></span> <span data-ttu-id="383a7-176">Por ejemplo, dada una revisión de ancho de 64, esta precisión puede colocar puntos en una resolución de 2 mm.</span><span class="sxs-lookup"><span data-stu-id="383a7-176">For example, given a 64 meter wide patch, this precision can place points at a 2 mm resolution.</span></span>



| <span data-ttu-id="383a7-177">Tipo de creación de particiones</span><span class="sxs-lookup"><span data-stu-id="383a7-177">Type of Partitioning</span></span> | <span data-ttu-id="383a7-178">Intervalo</span><span class="sxs-lookup"><span data-stu-id="383a7-178">Range</span></span>                       |
|----------------------|-----------------------------|
| <span data-ttu-id="383a7-179">fraccionario \_ impar</span><span class="sxs-lookup"><span data-stu-id="383a7-179">fractional\_odd</span></span>      | <span data-ttu-id="383a7-180">\[1... 63\]</span><span class="sxs-lookup"><span data-stu-id="383a7-180">\[1...63\]</span></span>                  |
| <span data-ttu-id="383a7-181">Separadores fraccionarios \_</span><span class="sxs-lookup"><span data-stu-id="383a7-181">fractional\_even</span></span>     | <span data-ttu-id="383a7-182">Intervalo de TessFactor: \[ 2.. 64\]</span><span class="sxs-lookup"><span data-stu-id="383a7-182">TessFactor range: \[2..64\]</span></span> |
| <span data-ttu-id="383a7-183">integer</span><span class="sxs-lookup"><span data-stu-id="383a7-183">integer</span></span>              | <span data-ttu-id="383a7-184">Intervalo de TessFactor: \[ 1.. 64\]</span><span class="sxs-lookup"><span data-stu-id="383a7-184">TessFactor range: \[1..64\]</span></span> |
| <span data-ttu-id="383a7-185">pow2</span><span class="sxs-lookup"><span data-stu-id="383a7-185">pow2</span></span>                 | <span data-ttu-id="383a7-186">Intervalo de TessFactor: \[ 1.. 64\]</span><span class="sxs-lookup"><span data-stu-id="383a7-186">TessFactor range: \[1..64\]</span></span> |



 

### <a name="domain-shader-stage"></a><span data-ttu-id="383a7-187">Domain-Shader fase</span><span class="sxs-lookup"><span data-stu-id="383a7-187">Domain-Shader Stage</span></span>

<span data-ttu-id="383a7-188">Un sombreador de dominio calcula la posición del vértice de un punto subdividido en la revisión de salida.</span><span class="sxs-lookup"><span data-stu-id="383a7-188">A domain shader calculates the vertex position of a subdivided point in the output patch.</span></span> <span data-ttu-id="383a7-189">Un sombreador de dominio se ejecuta una vez por punto de salida de fase de del teselador y tiene acceso de solo lectura a las coordenadas UV de salida de del teselador Stage, la revisión de salida del sombreador de casco y las constantes de la revisión de salida del sombreador de casco, como se muestra en el diagrama siguiente.</span><span class="sxs-lookup"><span data-stu-id="383a7-189">A domain shader is run once per tessellator stage output point and has read-only access to the tessellator stage output UV coordinates, the hull shader output patch, and the hull shader output patch constants, as the following diagram shows.</span></span>

![diagrama de la fase del sombreador de dominios](images/d3d11-domain-shader.png)

<span data-ttu-id="383a7-191">Las propiedades del sombreador de dominios incluyen:</span><span class="sxs-lookup"><span data-stu-id="383a7-191">Properties of the domain shader include:</span></span>

-   <span data-ttu-id="383a7-192">Un sombreador de dominio se invoca una vez por cada coordenada de salida de la fase del teselador.</span><span class="sxs-lookup"><span data-stu-id="383a7-192">A domain shader is invoked once per output coordinate from the tessellator stage.</span></span>
-   <span data-ttu-id="383a7-193">Un sombreador de dominios consume los puntos de control de salida de la fase del sombreador de casco.</span><span class="sxs-lookup"><span data-stu-id="383a7-193">A domain shader consumes output control points from the hull-shader stage.</span></span>
-   <span data-ttu-id="383a7-194">Un sombreador de dominio genera la posición de un vértice.</span><span class="sxs-lookup"><span data-stu-id="383a7-194">A domain shader outputs the position of a vertex.</span></span>
-   <span data-ttu-id="383a7-195">Las entradas son las salidas del sombreador de casco, incluidos los puntos de control, los datos constantes de revisión y los factores de teselación.</span><span class="sxs-lookup"><span data-stu-id="383a7-195">Inputs are the hull shader outputs including control points, patch constant data and tessellation factors.</span></span> <span data-ttu-id="383a7-196">Los factores de teselación pueden incluir los valores usados por la función Fixed del teselador así como los valores sin formato (antes de redondear la teselación de enteros, por ejemplo), lo que facilita la geotransformación, por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="383a7-196">The tessellation factors can include the values used by the fixed function tessellator as well as the raw values (before rounding by integer tessellation, for example), which facilitates geomorphing, for example.</span></span>

<span data-ttu-id="383a7-197">Una vez finalizado el sombreador de dominios, se finaliza la teselación y los datos de canalización continúan hasta la siguiente fase de canalización (sombreador de geometría, sombreador de píxeles, etc.).</span><span class="sxs-lookup"><span data-stu-id="383a7-197">After the domain shader completes, tessellation is finished and pipeline data continues to the next pipeline stage (geometry shader, pixel shader etc).</span></span> <span data-ttu-id="383a7-198">Un sombreador de geometría que espera primitivas con adyacencias (por ejemplo, 6 vértices por triángulo) no es válido cuando la teselación está activa (esto produce un comportamiento indefinido, al que se queja la capa de depuración).</span><span class="sxs-lookup"><span data-stu-id="383a7-198">A geometry shader that expects primitives with adjacency (for example, 6 vertices per triangle) is not valid when tessellation is active (this results in undefined behavior, which the debug layer will complain about).</span></span>

<span data-ttu-id="383a7-199">Este es un ejemplo de un sombreador de dominios:</span><span class="sxs-lookup"><span data-stu-id="383a7-199">Here is an example of a domain shader:</span></span>


```
void main( out    MyDSOutput result, 
           float2 myInputUV : SV_DomainPoint, 
           MyDSInput DSInputs,
           OutputPatch<MyOutPoint, 12> ControlPts, 
           MyTessFactors tessFactors)
{
     ...

     result.Position = EvaluateSurfaceUV(ControlPoints, myInputUV);
}
```



## <a name="apis-for-initializing-tessellation-stages"></a><span data-ttu-id="383a7-200">API para inicializar fases de teselación</span><span class="sxs-lookup"><span data-stu-id="383a7-200">APIs for initializing Tessellation Stages</span></span>

<span data-ttu-id="383a7-201">La teselación se implementa con dos nuevas fases del sombreador programable: un sombreador de casco y un sombreador de dominios.</span><span class="sxs-lookup"><span data-stu-id="383a7-201">Tessellation is implemented with two new programmable shader stages: a hull shader and a domain shader.</span></span> <span data-ttu-id="383a7-202">Estas nuevas fases del sombreador se programan con código HLSL que se define en el modelo de sombreador 5.</span><span class="sxs-lookup"><span data-stu-id="383a7-202">These new shader stages are programmed with HLSL code that is defined in shader model 5.</span></span> <span data-ttu-id="383a7-203">Los nuevos destinos del sombreador son: HS \_ 5 \_ 0 y DS \_ 5 \_ 0.</span><span class="sxs-lookup"><span data-stu-id="383a7-203">The new shader targets are: hs\_5\_0 and ds\_5\_0.</span></span> <span data-ttu-id="383a7-204">Al igual que todas las fases del sombreador programable, el código del hardware se extrae de los sombreadores compilados que se pasan al tiempo de ejecución cuando los sombreadores se enlazan a la canalización mediante las API como [**DSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader) y [**HSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader).</span><span class="sxs-lookup"><span data-stu-id="383a7-204">Like all programmable shader stages, code for the hardware is extracted from compiled shaders passed into the runtime when shaders are bound to the pipeline using APIs such as [**DSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader) and [**HSSetShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader).</span></span> <span data-ttu-id="383a7-205">Pero en primer lugar, el sombreador se debe crear con las API como [**CreateHullShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createhullshader) y [**CreateDomainShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdomainshader).</span><span class="sxs-lookup"><span data-stu-id="383a7-205">But first, the shader must be created using APIs such as [**CreateHullShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createhullshader) and [**CreateDomainShader**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createdomainshader).</span></span>

<span data-ttu-id="383a7-206">Habilite la teselación creando un sombreador de casco y enlazándolo a la fase del sombreador de casco (Esto configura automáticamente la fase del teselador).</span><span class="sxs-lookup"><span data-stu-id="383a7-206">Enable tessellation by creating a hull shader and binding it to the hull-shader stage (this automatically sets up the tessellator stage).</span></span> <span data-ttu-id="383a7-207">Para generar las posiciones finales del vértice a partir de las revisiones teselas, también debe crear un sombreador de dominios y enlazarlo a la fase del sombreador del dominio.</span><span class="sxs-lookup"><span data-stu-id="383a7-207">To generate the final vertex positions from the tessellated patches, you will also need to create a domain shader and bind it to the domain-shader stage.</span></span> <span data-ttu-id="383a7-208">Una vez que la teselación está habilitada, la entrada de datos en la etapa del ensamblador de entrada debe ser datos de revisión.</span><span class="sxs-lookup"><span data-stu-id="383a7-208">Once tessellation is enabled, the data input to the input-assembler stage must be patch data.</span></span> <span data-ttu-id="383a7-209">Es decir, la topología del ensamblador de entrada debe ser una topología constante de revisión de la [**\_ \_ topología primitiva D3D11**](/previous-versions/windows/desktop/legacy/ff476189(v=vs.85)) establecida con [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology).</span><span class="sxs-lookup"><span data-stu-id="383a7-209">That is, the input assembler topology must be a patch constant topology from [**D3D11\_PRIMITIVE\_TOPOLOGY**](/previous-versions/windows/desktop/legacy/ff476189(v=vs.85)) set with [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology).</span></span>

<span data-ttu-id="383a7-210">Para deshabilitar la teselación, establezca el sombreador de casco y el sombreador de dominios en **null**.</span><span class="sxs-lookup"><span data-stu-id="383a7-210">To disable tessellation, set the hull shader and the domain shader to **NULL**.</span></span> <span data-ttu-id="383a7-211">Ni la fase de sombreador de geometría ni la fase de flujo de salida pueden leer puntos de control de salida del sombreador de casco o datos de revisión.</span><span class="sxs-lookup"><span data-stu-id="383a7-211">Neither the geometry-shader stage nor the stream-output stage can read hull-shader output-control points or patch data.</span></span>

-   <span data-ttu-id="383a7-212">Nuevas topologías para la fase de ensamblador de entrada, que son extensiones de esta enumeración.</span><span class="sxs-lookup"><span data-stu-id="383a7-212">New topologies for the input-assembler stage, which are extensions to this enumeration.</span></span>

    ```
    enum D3D11_PRIMITIVE_TOPOLOGY
    ```

    

    <span data-ttu-id="383a7-213">La topología se establece en la fase del ensamblador de entrada mediante [ **IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology)</span><span class="sxs-lookup"><span data-stu-id="383a7-213">The topology is set to the input-assembler stage using [**IASetPrimitiveTopology**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetprimitivetopology)</span></span>

-   <span data-ttu-id="383a7-214">Por supuesto, las nuevas etapas del sombreador programable requieren que se establezca otro Estado, para enlazar búferes de constantes, muestras y recursos del sombreador a las fases de canalización apropiadas.</span><span class="sxs-lookup"><span data-stu-id="383a7-214">Of course, the new programmable shader stages require other state to be set, to bind constant buffers, samples, and shader resources to the appropriate pipeline stages.</span></span> <span data-ttu-id="383a7-215">Estos nuevos métodos de ID3D11Device se implementan para establecer este estado.</span><span class="sxs-lookup"><span data-stu-id="383a7-215">These new ID3D11Device methods are implemented for setting this state.</span></span>
    -   [<span data-ttu-id="383a7-216">**DSGetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="383a7-216">**DSGetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetconstantbuffers)
    -   [<span data-ttu-id="383a7-217">**DSGetSamplers**</span><span class="sxs-lookup"><span data-stu-id="383a7-217">**DSGetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetsamplers)
    -   [<span data-ttu-id="383a7-218">**DSGetShader**</span><span class="sxs-lookup"><span data-stu-id="383a7-218">**DSGetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetshader)
    -   [<span data-ttu-id="383a7-219">**DSGetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="383a7-219">**DSGetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dsgetshaderresources)
    -   [<span data-ttu-id="383a7-220">**DSSetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="383a7-220">**DSSetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetconstantbuffers)
    -   [<span data-ttu-id="383a7-221">**DSSetSamplers**</span><span class="sxs-lookup"><span data-stu-id="383a7-221">**DSSetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetsamplers)
    -   [<span data-ttu-id="383a7-222">**DSSetShader**</span><span class="sxs-lookup"><span data-stu-id="383a7-222">**DSSetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshader)
    -   [<span data-ttu-id="383a7-223">**DSSetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="383a7-223">**DSSetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-dssetshaderresources)
    -   [<span data-ttu-id="383a7-224">**HSGetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="383a7-224">**HSGetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetconstantbuffers)
    -   [<span data-ttu-id="383a7-225">**HSGetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="383a7-225">**HSGetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetshaderresources)
    -   [<span data-ttu-id="383a7-226">**HSGetSamplers**</span><span class="sxs-lookup"><span data-stu-id="383a7-226">**HSGetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetsamplers)
    -   [<span data-ttu-id="383a7-227">**HSGetShader**</span><span class="sxs-lookup"><span data-stu-id="383a7-227">**HSGetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hsgetshader)
    -   [<span data-ttu-id="383a7-228">**HSSetConstantBuffers**</span><span class="sxs-lookup"><span data-stu-id="383a7-228">**HSSetConstantBuffers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetconstantbuffers)
    -   [<span data-ttu-id="383a7-229">**HSSetSamplers**</span><span class="sxs-lookup"><span data-stu-id="383a7-229">**HSSetSamplers**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetsamplers)
    -   [<span data-ttu-id="383a7-230">**HSSetShader**</span><span class="sxs-lookup"><span data-stu-id="383a7-230">**HSSetShader**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshader)
    -   [<span data-ttu-id="383a7-231">**HSSetShaderResources**</span><span class="sxs-lookup"><span data-stu-id="383a7-231">**HSSetShaderResources**</span></span>](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-hssetshaderresources)

## <a name="how-tos"></a><span data-ttu-id="383a7-232">Cómo:</span><span class="sxs-lookup"><span data-stu-id="383a7-232">How to's:</span></span>

<span data-ttu-id="383a7-233">La documentación también contiene ejemplos para inicializar las fases de teselación.</span><span class="sxs-lookup"><span data-stu-id="383a7-233">The documentation also contains examples for initializing the tessellation stages.</span></span>



| <span data-ttu-id="383a7-234">Elemento</span><span class="sxs-lookup"><span data-stu-id="383a7-234">Item</span></span>                                                                                                                                                                                                                                                                                           | <span data-ttu-id="383a7-235">Descripción</span><span class="sxs-lookup"><span data-stu-id="383a7-235">Description</span></span>                                   |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------|
| <span data-ttu-id="383a7-236"><span id="How_To__Create_a_Hull_Shader"></span><span id="how_to__create_a_hull_shader"></span><span id="HOW_TO__CREATE_A_HULL_SHADER"></span>[Cómo: crear un sombreador de casco](direct3d-11-advanced-stages-hull-shader-create.md)</span><span class="sxs-lookup"><span data-stu-id="383a7-236"><span id="How_To__Create_a_Hull_Shader"></span><span id="how_to__create_a_hull_shader"></span><span id="HOW_TO__CREATE_A_HULL_SHADER"></span>[How To: Create a Hull Shader](direct3d-11-advanced-stages-hull-shader-create.md)</span></span><br/>                                                     | <span data-ttu-id="383a7-237">Cree un sombreador de casco.</span><span class="sxs-lookup"><span data-stu-id="383a7-237">Create a hull shader.</span></span><br/>              |
| <span data-ttu-id="383a7-238"><span id="How_To__Design_a_Hull_Shader"></span><span id="how_to__design_a_hull_shader"></span><span id="HOW_TO__DESIGN_A_HULL_SHADER"></span>[Cómo: diseñar un sombreador de casco](direct3d-11-advanced-stages-hull-shader-design.md)</span><span class="sxs-lookup"><span data-stu-id="383a7-238"><span id="How_To__Design_a_Hull_Shader"></span><span id="how_to__design_a_hull_shader"></span><span id="HOW_TO__DESIGN_A_HULL_SHADER"></span>[How To: Design a Hull Shader](direct3d-11-advanced-stages-hull-shader-design.md)</span></span><br/>                                                     | <span data-ttu-id="383a7-239">Diseñar un sombreador de casco.</span><span class="sxs-lookup"><span data-stu-id="383a7-239">Design a hull shader.</span></span><br/>              |
| <span data-ttu-id="383a7-240"><span id="How_To__Initialize_the_Tessellator_Stage"></span><span id="how_to__initialize_the_tessellator_stage"></span><span id="HOW_TO__INITIALIZE_THE_TESSELLATOR_STAGE"></span>[Cómo: inicializar la fase del teselador](direct3d-11-advanced-stages-tessellator-initialize.md)</span><span class="sxs-lookup"><span data-stu-id="383a7-240"><span id="How_To__Initialize_the_Tessellator_Stage"></span><span id="how_to__initialize_the_tessellator_stage"></span><span id="HOW_TO__INITIALIZE_THE_TESSELLATOR_STAGE"></span>[How To: Initialize the Tessellator Stage](direct3d-11-advanced-stages-tessellator-initialize.md)</span></span><br/> | <span data-ttu-id="383a7-241">Inicialice la fase de teselación.</span><span class="sxs-lookup"><span data-stu-id="383a7-241">Initialize the tessellation stage.</span></span><br/> |
| <span data-ttu-id="383a7-242"><span id="How_To__Create_a_Domain_Shader"></span><span id="how_to__create_a_domain_shader"></span><span id="HOW_TO__CREATE_A_DOMAIN_SHADER"></span>[Cómo: crear un sombreador de dominios](direct3d-11-advanced-stages-domain-shader-create.md)</span><span class="sxs-lookup"><span data-stu-id="383a7-242"><span id="How_To__Create_a_Domain_Shader"></span><span id="how_to__create_a_domain_shader"></span><span id="HOW_TO__CREATE_A_DOMAIN_SHADER"></span>[How To: Create a Domain Shader](direct3d-11-advanced-stages-domain-shader-create.md)</span></span><br/>                                           | <span data-ttu-id="383a7-243">Cree un sombreador de dominios.</span><span class="sxs-lookup"><span data-stu-id="383a7-243">Create a domain shader.</span></span><br/>            |
| <span data-ttu-id="383a7-244"><span id="How_To__Design_a_Domain_Shader"></span><span id="how_to__design_a_domain_shader"></span><span id="HOW_TO__DESIGN_A_DOMAIN_SHADER"></span>[Cómo: diseñar un sombreador de dominios](direct3d-11-advanced-stages-domain-shader-design.md)</span><span class="sxs-lookup"><span data-stu-id="383a7-244"><span id="How_To__Design_a_Domain_Shader"></span><span id="how_to__design_a_domain_shader"></span><span id="HOW_TO__DESIGN_A_DOMAIN_SHADER"></span>[How To: Design a Domain Shader](direct3d-11-advanced-stages-domain-shader-design.md)</span></span><br/>                                           | <span data-ttu-id="383a7-245">Cree un sombreador de dominios.</span><span class="sxs-lookup"><span data-stu-id="383a7-245">Create a domain shader.</span></span><br/>            |



 

## <a name="related-topics"></a><span data-ttu-id="383a7-246">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="383a7-246">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="383a7-247">Canalización de gráficos</span><span class="sxs-lookup"><span data-stu-id="383a7-247">Graphics Pipeline</span></span>](overviews-direct3d-11-graphics-pipeline.md)
</dt> </dl>

 

