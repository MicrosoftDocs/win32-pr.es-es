---
description: La suplantación es la capacidad de un subproceso de ejecutarse utilizando información de seguridad diferente que el proceso que posee el subproceso.
ms.assetid: a3f74372-bdc9-43eb-b72f-7d00a43e78a8
title: Suplantación de cliente (autorización)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 32e72abb17c9f5f6271f55fbfc77da4f6b93ca2d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104001384"
---
# <a name="client-impersonation-authorization"></a><span data-ttu-id="c0a0a-103">Suplantación de cliente (autorización)</span><span class="sxs-lookup"><span data-stu-id="c0a0a-103">Client Impersonation (Authorization)</span></span>

<span data-ttu-id="c0a0a-104">La [*suplantación*](/windows/desktop/SecGloss/i-gly) es la capacidad de un subproceso de ejecutarse utilizando información de seguridad diferente que el proceso que posee el subproceso.</span><span class="sxs-lookup"><span data-stu-id="c0a0a-104">[*Impersonation*](/windows/desktop/SecGloss/i-gly) is the ability of a thread to execute using different security information than the process that owns the thread.</span></span> <span data-ttu-id="c0a0a-105">Normalmente, un subproceso de una aplicación de servidor suplanta a un cliente.</span><span class="sxs-lookup"><span data-stu-id="c0a0a-105">Typically, a thread in a server application impersonates a client.</span></span> <span data-ttu-id="c0a0a-106">Esto permite que el subproceso de servidor actúe en nombre de ese cliente para obtener acceso a los objetos del servidor o validar el acceso a los objetos propios del cliente.</span><span class="sxs-lookup"><span data-stu-id="c0a0a-106">This allows the server thread to act on behalf of that client to access objects on the server or validate access to the client's own objects.</span></span>

<span data-ttu-id="c0a0a-107">La API de Microsoft Windows proporciona las siguientes funciones para iniciar una suplantación:</span><span class="sxs-lookup"><span data-stu-id="c0a0a-107">The Microsoft Windows API provides the following functions to begin an impersonation:</span></span>

-   <span data-ttu-id="c0a0a-108">Una aplicación de servidor DDE puede llamar a la función [**DdeImpersonateClient**](/windows/win32/api/ddeml/nf-ddeml-ddeimpersonateclient) para suplantar a un cliente.</span><span class="sxs-lookup"><span data-stu-id="c0a0a-108">A DDE server application can call the [**DdeImpersonateClient**](/windows/win32/api/ddeml/nf-ddeml-ddeimpersonateclient) function to impersonate a client.</span></span>
-   <span data-ttu-id="c0a0a-109">Un servidor de canalización con nombre puede llamar a la función [**ImpersonateNamedPipeClient**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-impersonatenamedpipeclient) .</span><span class="sxs-lookup"><span data-stu-id="c0a0a-109">A named-pipe server can call the [**ImpersonateNamedPipeClient**](/windows/win32/api/namedpipeapi/nf-namedpipeapi-impersonatenamedpipeclient) function.</span></span>
-   <span data-ttu-id="c0a0a-110">Puede llamar a la función [**ImpersonateLoggedOnUser**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateloggedonuser) para suplantar el contexto de seguridad del [*token de acceso*](/windows/desktop/SecGloss/a-gly)de un usuario que ha iniciado sesión.</span><span class="sxs-lookup"><span data-stu-id="c0a0a-110">You can call the [**ImpersonateLoggedOnUser**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateloggedonuser) function to impersonate the security context of a logged-on user's [*access token*](/windows/desktop/SecGloss/a-gly).</span></span>
-   <span data-ttu-id="c0a0a-111">La función [**ImpersonateSelf**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateself) permite que un subproceso genere una copia de su propio token de acceso.</span><span class="sxs-lookup"><span data-stu-id="c0a0a-111">The [**ImpersonateSelf**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-impersonateself) function enables a thread to generate a copy of its own access token.</span></span> <span data-ttu-id="c0a0a-112">Esto resulta útil cuando una aplicación necesita cambiar el contexto de seguridad de un único subproceso.</span><span class="sxs-lookup"><span data-stu-id="c0a0a-112">This is useful when an application needs to change the security context of a single thread.</span></span> <span data-ttu-id="c0a0a-113">Por ejemplo, a veces solo un subproceso de un proceso necesita habilitar un [*privilegio*](/windows/desktop/SecGloss/p-gly).</span><span class="sxs-lookup"><span data-stu-id="c0a0a-113">For example, sometimes only one thread of a process needs to enable a [*privilege*](/windows/desktop/SecGloss/p-gly).</span></span>
-   <span data-ttu-id="c0a0a-114">Puede llamar a la función [**SetThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken) para que el subproceso de destino se ejecute en el contexto de seguridad de un [*token de suplantación*](/windows/desktop/SecGloss/i-gly)especificado.</span><span class="sxs-lookup"><span data-stu-id="c0a0a-114">You can call the [**SetThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken) function to cause the target thread to run in the security context of a specified [*impersonation token*](/windows/desktop/SecGloss/i-gly).</span></span>
-   <span data-ttu-id="c0a0a-115">Una aplicación de servidor de llamada a procedimiento remoto (RPC) de Microsoft puede llamar a la función [**RpcImpersonateClient**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcimpersonateclient) para suplantar a un cliente.</span><span class="sxs-lookup"><span data-stu-id="c0a0a-115">A Microsoft Remote Procedure Call (RPC) server application can call the [**RpcImpersonateClient**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcimpersonateclient) function to impersonate a client.</span></span>
-   <span data-ttu-id="c0a0a-116">Un [*paquete de seguridad*](/windows/desktop/SecGloss/s-gly) o un servidor de aplicaciones puede llamar a la función [**ImpersonateSecurityContext**](/windows/desktop/api/sspi/nf-sspi-impersonatesecuritycontext) para suplantar a un cliente.</span><span class="sxs-lookup"><span data-stu-id="c0a0a-116">A [*security package*](/windows/desktop/SecGloss/s-gly) or application server can call the [**ImpersonateSecurityContext**](/windows/desktop/api/sspi/nf-sspi-impersonatesecuritycontext) function to impersonate a client.</span></span>

<span data-ttu-id="c0a0a-117">Para la mayoría de estas suplantaciones, el subproceso de suplantación puede revertir a su propio contexto de seguridad mediante una llamada a la función [**RevertToSelf**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-reverttoself) .</span><span class="sxs-lookup"><span data-stu-id="c0a0a-117">For most of these impersonations, the impersonating thread can revert to its own security context by calling the [**RevertToSelf**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-reverttoself) function.</span></span> <span data-ttu-id="c0a0a-118">La excepción es la suplantación de RPC, en la que la aplicación de servidor RPC llama a [**RpcRevertToSelf**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoself) o [**RpcRevertToSelfEx**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoselfex) para revertir a su propio contexto de seguridad.</span><span class="sxs-lookup"><span data-stu-id="c0a0a-118">The exception is the RPC impersonation, in which the RPC server application calls [**RpcRevertToSelf**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoself) or [**RpcRevertToSelfEx**](/windows/desktop/api/rpcdce/nf-rpcdce-rpcreverttoselfex) to revert to its own security context.</span></span>

 

 
