---
description: Proporciona un mecanismo para controlar el acceso a los objetos protegibles.
ms.assetid: 5923cb4c-f663-40d2-989a-07d71ac475db
title: Control de integridad de credenciales
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c184ba01da0a55309fcb27ace9b0fe156edd6425
ms.sourcegitcommit: 4570ac533e129ff88b23f2c2b69e0140ead3a4a4
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/26/2021
ms.locfileid: "105654028"
---
# <a name="mandatory-integrity-control"></a><span data-ttu-id="382e9-103">Control de integridad de credenciales</span><span class="sxs-lookup"><span data-stu-id="382e9-103">Mandatory Integrity Control</span></span>

<span data-ttu-id="382e9-104">Control de integridad de credenciales (MIC) proporciona un mecanismo para controlar el acceso a los objetos protegibles.</span><span class="sxs-lookup"><span data-stu-id="382e9-104">Mandatory Integrity Control (MIC) provides a mechanism for controlling access to securable objects.</span></span> <span data-ttu-id="382e9-105">Este mecanismo se suma al control de acceso discrecional y evalúa el acceso antes de que se evalúen las comprobaciones de acceso de la [*lista de control de acceso discrecional*](/windows/desktop/SecGloss/d-gly) (DACL) de un objeto.</span><span class="sxs-lookup"><span data-stu-id="382e9-105">This mechanism is in addition to discretionary access control and evaluates access before access checks against an object's [*discretionary access control list*](/windows/desktop/SecGloss/d-gly) (DACL) are evaluated.</span></span>

<span data-ttu-id="382e9-106">MIC usa niveles de integridad y directivas obligatorias para evaluar el acceso.</span><span class="sxs-lookup"><span data-stu-id="382e9-106">MIC uses integrity levels and mandatory policy to evaluate access.</span></span> <span data-ttu-id="382e9-107">Las [*entidades de seguridad*](/windows/desktop/SecGloss/s-gly) y los objetos protegibles tienen asignados niveles de integridad que determinan sus niveles de protección o acceso.</span><span class="sxs-lookup"><span data-stu-id="382e9-107">[*Security principals*](/windows/desktop/SecGloss/s-gly) and securable objects are assigned integrity levels that determine their levels of protection or access.</span></span> <span data-ttu-id="382e9-108">Por ejemplo, una entidad de seguridad con un nivel de integridad bajo no puede escribir en un objeto con un nivel de integridad medio, aunque la DACL de ese objeto permita el acceso de escritura a la entidad de seguridad.</span><span class="sxs-lookup"><span data-stu-id="382e9-108">For example, a principal with a low integrity level cannot write to an object with a medium integrity level, even if that object's DACL allows write access to the principal.</span></span>

<span data-ttu-id="382e9-109">Windows define cuatro niveles de integridad: baja, media, alta y sistema.</span><span class="sxs-lookup"><span data-stu-id="382e9-109">Windows defines four integrity levels: low, medium, high, and system.</span></span> <span data-ttu-id="382e9-110">Los usuarios estándar reciben un nivel alto de usuarios con privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="382e9-110">Standard users receive medium, elevated users receive high.</span></span> <span data-ttu-id="382e9-111">Los procesos que se inician y los objetos que se crean reciben el nivel de integridad (medio o alto) o bajo si el nivel del archivo ejecutable es bajo; los servicios del sistema reciben la integridad del sistema.</span><span class="sxs-lookup"><span data-stu-id="382e9-111">Processes you start and objects you create receive your integrity level (medium or high) or low if the executable file's level is low; system services receive system integrity.</span></span> <span data-ttu-id="382e9-112">Los objetos que carecen de una etiqueta de integridad se tratan como medios del sistema operativo; Esto evita que el código de baja integridad modifique los objetos sin etiquetar.</span><span class="sxs-lookup"><span data-stu-id="382e9-112">Objects that lack an integrity label are treated as medium by the operating system; this prevents low-integrity code from modifying unlabeled objects.</span></span> <span data-ttu-id="382e9-113">Además, Windows garantiza que los procesos que se ejecutan con un nivel de integridad bajo no pueden obtener acceso a un proceso asociado a un contenedor de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="382e9-113">Additionally, Windows ensures that processes running with a low integrity level cannot obtain access to a process which is associated with an app container.</span></span>

## <a name="integrity-labels"></a><span data-ttu-id="382e9-114">Etiquetas de integridad</span><span class="sxs-lookup"><span data-stu-id="382e9-114">Integrity Labels</span></span>

<span data-ttu-id="382e9-115">Las etiquetas de integridad especifican los niveles de integridad de los objetos protegibles y las entidades de seguridad.</span><span class="sxs-lookup"><span data-stu-id="382e9-115">Integrity labels specify the integrity levels of securable objects and security principals.</span></span> <span data-ttu-id="382e9-116">Las etiquetas de integridad se representan mediante [*SID de integridad*](/windows/desktop/SecGloss/i-gly).</span><span class="sxs-lookup"><span data-stu-id="382e9-116">Integrity labels are represented by [*integrity SIDs*](/windows/desktop/SecGloss/i-gly).</span></span> <span data-ttu-id="382e9-117">El SID de integridad de un objeto protegible se almacena en su [*lista de control de acceso de sistema*](/windows/desktop/SecGloss/s-gly) (SACL).</span><span class="sxs-lookup"><span data-stu-id="382e9-117">The integrity SID for a securable object is stored in its [*system access control list*](/windows/desktop/SecGloss/s-gly) (SACL).</span></span> <span data-ttu-id="382e9-118">La SACL contiene una [*entrada de control de acceso*](/windows/desktop/SecGloss/a-gly) (ACE) [**\_ \_ \_ ACE de etiqueta obligatoria del sistema**](/windows/desktop/api/Winnt/ns-winnt-system_mandatory_label_ace) que a su vez contiene el SID de integridad.</span><span class="sxs-lookup"><span data-stu-id="382e9-118">The SACL contains a [**SYSTEM\_MANDATORY\_LABEL\_ACE**](/windows/desktop/api/Winnt/ns-winnt-system_mandatory_label_ace) [*access control entry*](/windows/desktop/SecGloss/a-gly) (ACE) that in turn contains the integrity SID.</span></span> <span data-ttu-id="382e9-119">Cualquier objeto sin SID de integridad se trata como si tuviera integridad media.</span><span class="sxs-lookup"><span data-stu-id="382e9-119">Any object without an integrity SID is treated as if it had medium integrity.</span></span>

<span data-ttu-id="382e9-120">El SID de integridad de una entidad de seguridad se almacena en su token de acceso.</span><span class="sxs-lookup"><span data-stu-id="382e9-120">The integrity SID for a security principal is stored in its access token.</span></span> <span data-ttu-id="382e9-121">Un token de acceso puede contener uno o más SID de integridad.</span><span class="sxs-lookup"><span data-stu-id="382e9-121">An access token may contain one or more integrity SIDs.</span></span>

<span data-ttu-id="382e9-122">Para obtener información detallada sobre los SID de integridad definidos, consulte [SID conocidos](well-known-sids.md).</span><span class="sxs-lookup"><span data-stu-id="382e9-122">For detailed information about the defined integrity SIDs, see [Well-known SIDs](well-known-sids.md).</span></span>

## <a name="process-creation"></a><span data-ttu-id="382e9-123">Creación de un proceso</span><span class="sxs-lookup"><span data-stu-id="382e9-123">Process Creation</span></span>

<span data-ttu-id="382e9-124">Cuando un usuario intenta iniciar un archivo ejecutable, el nuevo proceso se crea con el nivel de integridad del usuario mínimo y el nivel de integridad de los archivos.</span><span class="sxs-lookup"><span data-stu-id="382e9-124">When a user attempts to launch an executable file, the new process is created with the minimum of the user integrity level and the file integrity level.</span></span> <span data-ttu-id="382e9-125">Esto significa que el nuevo proceso nunca se ejecutará con una mayor integridad que el archivo ejecutable.</span><span class="sxs-lookup"><span data-stu-id="382e9-125">This means that the new process will never execute with higher integrity than the executable file.</span></span> <span data-ttu-id="382e9-126">Si el usuario administrador ejecuta un programa de baja integridad, el token del nuevo proceso funciona con el nivel de integridad baja.</span><span class="sxs-lookup"><span data-stu-id="382e9-126">If the administrator user executes a low integrity program, the token for the new process functions with the low integrity level.</span></span> <span data-ttu-id="382e9-127">Esto ayuda a proteger a un usuario que inicia código no confiable de actos malintencionados realizados por ese código.</span><span class="sxs-lookup"><span data-stu-id="382e9-127">This helps protect a user who launches untrustworthy code from malicious acts performed by that code.</span></span> <span data-ttu-id="382e9-128">Los datos de usuario, que se encuentra en el nivel de integridad de usuario típico, están protegidos contra escritura contra este nuevo proceso.</span><span class="sxs-lookup"><span data-stu-id="382e9-128">The user data, which is at the typical user integrity level, is write-protected against this new process.</span></span>

## <a name="mandatory-policy"></a><span data-ttu-id="382e9-129">Directiva obligatoria</span><span class="sxs-lookup"><span data-stu-id="382e9-129">Mandatory Policy</span></span>

<span data-ttu-id="382e9-130">La ACE de [**\_ \_ \_ ACE de etiqueta obligatoria del sistema**](/windows/desktop/api/Winnt/ns-winnt-system_mandatory_label_ace) en la SACL de un objeto protegible contiene una máscara de acceso que especifica el acceso a las entidades de seguridad con niveles de integridad inferiores al objeto que se conceden.</span><span class="sxs-lookup"><span data-stu-id="382e9-130">The [**SYSTEM\_MANDATORY\_LABEL\_ACE**](/windows/desktop/api/Winnt/ns-winnt-system_mandatory_label_ace) ACE in the SACL of a securable object contains an access mask that specifies the access that principals with integrity levels lower than the object are granted.</span></span> <span data-ttu-id="382e9-131">Los valores definidos para esta máscara de acceso son la **\_ etiqueta obligatoria del sistema no se \_ \_ \_ escribe \_**, la **\_ etiqueta obligatoria del sistema no se \_ \_ \_ Lee \_** y la **\_ etiqueta obligatoria del sistema no se \_ \_ \_ ejecuta \_**.</span><span class="sxs-lookup"><span data-stu-id="382e9-131">The values defined for this access mask are **SYSTEM\_MANDATORY\_LABEL\_NO\_WRITE\_UP**, **SYSTEM\_MANDATORY\_LABEL\_NO\_READ\_UP**, and **SYSTEM\_MANDATORY\_LABEL\_NO\_EXECUTE\_UP**.</span></span> <span data-ttu-id="382e9-132">De forma predeterminada, el sistema crea cada objeto con una máscara de acceso de **\_ etiqueta obligatoria del sistema no se \_ \_ \_ escribe \_**.</span><span class="sxs-lookup"><span data-stu-id="382e9-132">By default, the system creates every object with an access mask of **SYSTEM\_MANDATORY\_LABEL\_NO\_WRITE\_UP**.</span></span>

<span data-ttu-id="382e9-133">Cada token de acceso también especifica una directiva obligatoria establecida por la [*autoridad de seguridad local*](/windows/desktop/SecGloss/l-gly) (LSA) cuando se crea el token.</span><span class="sxs-lookup"><span data-stu-id="382e9-133">Every access token also specifies a mandatory policy that is set by the [*Local Security Authority*](/windows/desktop/SecGloss/l-gly) (LSA) when the token is created.</span></span> <span data-ttu-id="382e9-134">Esta Directiva se especifica mediante una estructura de [**\_ \_ Directiva obligatoria de token**](/windows/desktop/api/Winnt/ns-winnt-token_mandatory_policy) asociada al token.</span><span class="sxs-lookup"><span data-stu-id="382e9-134">This policy is specified by a [**TOKEN\_MANDATORY\_POLICY**](/windows/desktop/api/Winnt/ns-winnt-token_mandatory_policy) structure associated with the token.</span></span> <span data-ttu-id="382e9-135">Esta estructura se puede consultar mediante una llamada a la función [**GetTokenInformation**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-gettokeninformation) con el valor del parámetro *TokenInformationClass* establecido en **TokenMandatoryPolicy**.</span><span class="sxs-lookup"><span data-stu-id="382e9-135">This structure can be queried by calling the [**GetTokenInformation**](/windows/win32/api/securitybaseapi/nf-securitybaseapi-gettokeninformation) function with the value of the *TokenInformationClass* parameter set to **TokenMandatoryPolicy**.</span></span>

 

 
