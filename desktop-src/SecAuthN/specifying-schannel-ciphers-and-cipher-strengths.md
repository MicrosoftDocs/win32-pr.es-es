---
description: Especificar cifrados Schannel y niveles de cifrado
ms.assetid: b87d3e72-df7b-4a00-854e-c3706565ed7d
title: Especificar cifrados Schannel y niveles de cifrado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b04ec37cfea633814881fba5bfd71ad15205a1bd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105668254"
---
# <a name="specifying-schannel-ciphers-and-cipher-strengths"></a><span data-ttu-id="dcce8-103">Especificar cifrados Schannel y niveles de cifrado</span><span class="sxs-lookup"><span data-stu-id="dcce8-103">Specifying Schannel Ciphers and Cipher Strengths</span></span>

<span data-ttu-id="dcce8-104">Para los intercambios de información de cliente/servidor, el comportamiento predeterminado de Schannel es negociar el mejor cifrado disponible en función de los habilitados en el registro.</span><span class="sxs-lookup"><span data-stu-id="dcce8-104">For client/server information exchanges, the default behavior of Schannel is to negotiate the best cipher available based on those enabled in the registry.</span></span> <span data-ttu-id="dcce8-105">Las aplicaciones pueden limitar los cifrados y los niveles de cifrado permitidos para una conexión mediante el uso de miembros de la estructura de [**\_ CRED de Schannel**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="dcce8-105">Applications may limit the ciphers and cipher strengths allowed for a connection by using members of the [**SCHANNEL\_CRED**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) structure as follows:</span></span>

1.  <span data-ttu-id="dcce8-106">Establezca el miembro **palgSupportedAlgs** en una matriz de [**\_ ID**](../seccrypto/alg-id.md) . de alg que contenga los cifrados permitidos.</span><span class="sxs-lookup"><span data-stu-id="dcce8-106">Set the **palgSupportedAlgs** member to an array of [**ALG\_ID**](../seccrypto/alg-id.md) containing the allowable ciphers.</span></span> <span data-ttu-id="dcce8-107">Para obtener más información, vea identificadores de cifrado.</span><span class="sxs-lookup"><span data-stu-id="dcce8-107">For more information, see Cipher IDs.</span></span>
2.  <span data-ttu-id="dcce8-108">Establezca los miembros **dwMinimumCipherStrength** y/o **dwMaximumCipherStrength** en los valores mínimo y máximo permitidos.</span><span class="sxs-lookup"><span data-stu-id="dcce8-108">Set the **dwMinimumCipherStrength** and/or **dwMaximumCipherStrength** members to the allowable minimum and maximum strengths.</span></span> <span data-ttu-id="dcce8-109">Para obtener más información, vea valores de intensidad de cifrado.</span><span class="sxs-lookup"><span data-stu-id="dcce8-109">For more information, see Cipher Strength Values.</span></span>
3.  <span data-ttu-id="dcce8-110">Pase la [**estructura \_ CRED de Schannel**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) (por medio del parámetro *pAuthData* ) en una llamada a la función [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) .</span><span class="sxs-lookup"><span data-stu-id="dcce8-110">Pass the [**SCHANNEL\_CRED**](/windows/desktop/api/Schannel/ns-schannel-schannel_cred) structure (by means of the *pAuthData* parameter) in a call to the [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea) function.</span></span> <span data-ttu-id="dcce8-111">Esta función devuelve un identificador de credenciales.</span><span class="sxs-lookup"><span data-stu-id="dcce8-111">This function returns a credentials handle.</span></span>
4.  <span data-ttu-id="dcce8-112">Especifique el identificador de credenciales en una llamada a la función [**InitializeSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) del lado cliente o la función [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) del lado servidor.</span><span class="sxs-lookup"><span data-stu-id="dcce8-112">Specify the credentials handle in a call to the client-side [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) function or the server-side [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span>

## <a name="cipher-ids"></a><span data-ttu-id="dcce8-113">Identificadores de cifrado</span><span class="sxs-lookup"><span data-stu-id="dcce8-113">Cipher IDs</span></span>

<span data-ttu-id="dcce8-114">El comportamiento predeterminado de Schannel es solicitar el mejor cifrado disponible en función de las entradas Schannel en el registro del sistema.</span><span class="sxs-lookup"><span data-stu-id="dcce8-114">The default behavior of Schannel is to request the best cipher available based on Schannel entries in the system registry.</span></span> <span data-ttu-id="dcce8-115">No cambie el registro del sistema; la configuración que contiene Schannel se usa globalmente y afectará a otras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="dcce8-115">Do not change the system registry; the settings it contains for Schannel are used globally and will affect other applications.</span></span> <span data-ttu-id="dcce8-116">Para obtener la lista de constantes válidas, [**consulte \_ ID**](../seccrypto/alg-id.md). de ALG.</span><span class="sxs-lookup"><span data-stu-id="dcce8-116">For the list of valid constants, see [**ALG\_ID**](../seccrypto/alg-id.md).</span></span>

## <a name="cipher-strength-values"></a><span data-ttu-id="dcce8-117">Valores de intensidad de cifrado</span><span class="sxs-lookup"><span data-stu-id="dcce8-117">Cipher Strength Values</span></span>

<span data-ttu-id="dcce8-118">Esta característica de Schannel se usa normalmente para limitar una conexión a los cifrados de fuerza de exportación o nacionales.</span><span class="sxs-lookup"><span data-stu-id="dcce8-118">This Schannel feature is typically used to limit a connection to either domestic or export strength ciphers.</span></span> <span data-ttu-id="dcce8-119">Entre las fortalezas internas se incluyen 56 y 128 bits, mientras que el nivel de exportación está limitado a 56 bits.</span><span class="sxs-lookup"><span data-stu-id="dcce8-119">Domestic strengths include 56, and 128 bits, while export strength is limited to 56 bits.</span></span> <span data-ttu-id="dcce8-120">Si establece los valores mínimo y máximo en cero Schannel, se usarán todos los niveles de cifrado disponibles.</span><span class="sxs-lookup"><span data-stu-id="dcce8-120">If you set the minimum and maximum values to zero Schannel will use all available cipher strengths.</span></span>

<span data-ttu-id="dcce8-121">Con TLS o SSL 3,0, establezca el miembro **dwMinimumCipherStrength** en-1 (menos uno) para habilitar los conjuntos de cifrado "cifrado null", que proporcionan firmas pero no cifrado.</span><span class="sxs-lookup"><span data-stu-id="dcce8-121">Using TLS or SSL 3.0, set the **dwMinimumCipherStrength** member to -1 (negative one) to enable the "Null Cipher" cipher suites, which provide signatures but no encryption.</span></span> <span data-ttu-id="dcce8-122">Si **dwMaximumCipherStrength** también se establece en-1, solo se habilitarán los conjuntos de "cifrado null".</span><span class="sxs-lookup"><span data-stu-id="dcce8-122">If **dwMaximumCipherStrength** is also set to -1 then only the "Null Cipher" suites will be enabled.</span></span> <span data-ttu-id="dcce8-123">Esta configuración está pensada solo para el desarrollo y no debe usarse en sistemas de producción.</span><span class="sxs-lookup"><span data-stu-id="dcce8-123">This setting is intended for development only and should not be used in production systems.</span></span>

## <a name="querying-cipher-information"></a><span data-ttu-id="dcce8-124">Consultar información de cifrado</span><span class="sxs-lookup"><span data-stu-id="dcce8-124">Querying Cipher Information</span></span>

<span data-ttu-id="dcce8-125">Para recuperar la configuración de la intensidad de cifrado de una credencial, llame a la función [**QueryCredentialsAttributes**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) y especifique SECPKG \_ ATTR \_ Cipher Strength \_ como el parámetro *ulAttribute* .</span><span class="sxs-lookup"><span data-stu-id="dcce8-125">To retrieve the cipher strength settings for a credential, call the [**QueryCredentialsAttributes**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) function and specify SECPKG\_ATTR\_CIPHER\_STRENGTHS as the *ulAttribute* parameter.</span></span>

<span data-ttu-id="dcce8-126">Para recuperar la lista de algoritmos admitidos para una credencial, llame a [**QueryCredentialsAttributes**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) con SECPKG \_ ATTR \_ compatible \_ ALGS como parámetro *ulAttribute* .</span><span class="sxs-lookup"><span data-stu-id="dcce8-126">To retrieve the list of supported algorithms for a credential, call the [**QueryCredentialsAttributes**](/windows/desktop/api/Sspi/nf-sspi-querycredentialsattributesa) with SECPKG\_ATTR\_SUPPORTED\_ALGS as the *ulAttribute* parameter.</span></span>

 

 
