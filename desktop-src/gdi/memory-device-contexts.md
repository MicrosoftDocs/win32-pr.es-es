---
description: Para permitir que las aplicaciones colocan la salida en memoria en lugar de enviarla a un dispositivo real, use un contexto de dispositivo especial para las operaciones de mapa de bits denominado contexto de dispositivo de memoria.
ms.assetid: 0a682dc4-31a4-43c8-b0b1-ab01986b1dac
title: Contextos de dispositivo de memoria
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 095de04fdf965a87011895015ad7ea6c9782e286
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103811936"
---
# <a name="memory-device-contexts"></a><span data-ttu-id="f2c7f-103">Contextos de dispositivo de memoria</span><span class="sxs-lookup"><span data-stu-id="f2c7f-103">Memory Device Contexts</span></span>

<span data-ttu-id="f2c7f-104">Para permitir que las aplicaciones colocan la salida en memoria en lugar de enviarla a un dispositivo real, use un contexto de dispositivo especial para las operaciones de mapa de bits denominado *contexto de dispositivo de memoria*.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-104">To enable applications to place output in memory rather than sending it to an actual device, use a special device context for bitmap operations called a *memory device context*.</span></span> <span data-ttu-id="f2c7f-105">Un controlador de dominio de memoria permite al sistema tratar una parte de la memoria como un dispositivo virtual.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-105">A memory DC enables the system to treat a portion of memory as a virtual device.</span></span> <span data-ttu-id="f2c7f-106">Es una matriz de bits en memoria que una aplicación puede usar temporalmente para almacenar los datos de color de los mapas de bits creados en una superficie de dibujo normal.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-106">It is an array of bits in memory that an application can use temporarily to store the color data for bitmaps created on a normal drawing surface.</span></span> <span data-ttu-id="f2c7f-107">Dado que el mapa de bits es compatible con el dispositivo, a veces también se hace referencia a un controlador de dominio de memoria como *contexto de dispositivo compatible*.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-107">Because the bitmap is compatible with the device, a memory DC is also sometimes referred to as a *compatible device context*.</span></span>

<span data-ttu-id="f2c7f-108">El controlador de dominio de memoria almacena imágenes de mapa de bits para un dispositivo determinado.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-108">The memory DC stores bitmap images for a particular device.</span></span> <span data-ttu-id="f2c7f-109">Una aplicación puede crear un controlador de memoria mediante una llamada a la función [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) .</span><span class="sxs-lookup"><span data-stu-id="f2c7f-109">An application can create a memory DC by calling the [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) function.</span></span>

<span data-ttu-id="f2c7f-110">El mapa de bits original de un controlador de dominio de memoria es simplemente un marcador de posición.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-110">The original bitmap in a memory DC is simply a placeholder.</span></span> <span data-ttu-id="f2c7f-111">Sus dimensiones son un píxel en un píxel.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-111">Its dimensions are one pixel by one pixel.</span></span> <span data-ttu-id="f2c7f-112">Antes de que una aplicación pueda comenzar a dibujar, debe seleccionar un mapa de bits con el ancho y el alto adecuados en el controlador de dominio mediante una llamada a la función [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) .</span><span class="sxs-lookup"><span data-stu-id="f2c7f-112">Before an application can begin drawing, it must select a bitmap with the appropriate width and height into the DC by calling the [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) function.</span></span> <span data-ttu-id="f2c7f-113">Para crear un mapa de bits de las dimensiones adecuadas, utilice la función [**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect)o [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) .</span><span class="sxs-lookup"><span data-stu-id="f2c7f-113">To create a bitmap of the appropriate dimensions, use the [**CreateBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmap), [**CreateBitmapIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createbitmapindirect), or [**CreateCompatibleBitmap**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatiblebitmap) function.</span></span> <span data-ttu-id="f2c7f-114">Una vez seleccionado el mapa de bits en el controlador de dominio de memoria, el sistema reemplaza la matriz de un solo bit por una matriz lo suficientemente grande como para almacenar información de color para el rectángulo de píxeles especificado.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-114">After the bitmap is selected into the memory DC, the system replaces the single-bit array with an array large enough to store color information for the specified rectangle of pixels.</span></span>

<span data-ttu-id="f2c7f-115">Cuando una aplicación pasa el identificador devuelto por [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) a una de las funciones de dibujo, la salida solicitada no aparece en la superficie de dibujo de un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-115">When an application passes the handle returned by [**CreateCompatibleDC**](/windows/desktop/api/Wingdi/nf-wingdi-createcompatibledc) to one of the drawing functions, the requested output does not appear on a device's drawing surface.</span></span> <span data-ttu-id="f2c7f-116">En su lugar, el sistema almacena la información de color de la línea, curva, texto o región resultante en la matriz de bits.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-116">Instead, the system stores the color information for the resultant line, curve, text, or region in the array of bits.</span></span> <span data-ttu-id="f2c7f-117">La aplicación puede volver a copiar la imagen almacenada en memoria en una superficie de dibujo llamando a la función [**bitblt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) , identificando el controlador de dominio de memoria como el contexto de dispositivo de origen y un controlador de dominio de pantalla o ventana como el contexto de dispositivo de destino.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-117">The application can copy the image stored in memory back onto a drawing surface by calling the [**BitBlt**](/windows/desktop/api/Wingdi/nf-wingdi-bitblt) function, identifying the memory DC as the source device context and a window or screen DC as the target device context.</span></span>

<span data-ttu-id="f2c7f-118">Al mostrar un DIB o un DDB creado a partir de un DIB en un dispositivo de paleta, puede mejorar la velocidad a la que se dibuja la imagen organizando la paleta lógica para que coincida con el diseño de la paleta del sistema.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-118">When displaying a DIB or a DDB created from a DIB on a palette device, you can improve the speed at which the image is drawn by arranging the logical palette to match the layout of the system palette.</span></span> <span data-ttu-id="f2c7f-119">Para ello, llame a [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) con el valor NUMRESERVED para obtener el número de colores reservados en el sistema.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-119">To do this, call [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) with the NUMRESERVED value to get the number of reserved colors in the system.</span></span> <span data-ttu-id="f2c7f-120">A continuación, llame a [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) y rellene la primera y la última entrada de NUMRESERVED/2 de la paleta lógica con los colores del sistema correspondientes.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-120">Then call [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) and fill in the first and last NUMRESERVED/2 entries of the logical palette with the corresponding system colors.</span></span> <span data-ttu-id="f2c7f-121">Por ejemplo, si NUMRESERVED es 20, debe rellenar la primera y la última 10 entradas de la paleta lógica con los colores del sistema.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-121">For example, if NUMRESERVED is 20, you would fill in the first and last 10 entries of the logical palette with the system colors.</span></span> <span data-ttu-id="f2c7f-122">A continuación, rellene los colores 256-NUMRESERVED restantes de la paleta lógica (en nuestro ejemplo, los 236 colores restantes) con los colores del DIB y establezca la \_ marca PC nocollapse en cada uno de estos colores.</span><span class="sxs-lookup"><span data-stu-id="f2c7f-122">Then fill in the remaining 256-NUMRESERVED colors of the logical palette (in our example, the remaining 236 colors) with colors from the DIB and set the PC\_NOCOLLAPSE flag on each of these colors.</span></span>

<span data-ttu-id="f2c7f-123">Para obtener más información sobre el color y las paletas, vea [colores](colors.md).</span><span class="sxs-lookup"><span data-stu-id="f2c7f-123">For more information about color and palettes, see [Colors](colors.md).</span></span> <span data-ttu-id="f2c7f-124">Para obtener más información sobre los mapas de bits y las operaciones de mapa de bits, vea [mapas de bits](bitmaps.md).</span><span class="sxs-lookup"><span data-stu-id="f2c7f-124">For more information about bitmaps and bitmap operations, see [Bitmaps](bitmaps.md).</span></span>

 

 



