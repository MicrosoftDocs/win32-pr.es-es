---
description: El contenido de la textura suele almacenarse en formato sRGB.
ms.assetid: d076140d-3e91-412a-b099-9baa52f8d7d8
title: Gamma (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4cea4b3ba224452e1c3be8f96b7136f4e4f649c8
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "105714657"
---
# <a name="gamma-direct3d-9"></a><span data-ttu-id="494dc-103">Gamma (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="494dc-103">Gamma (Direct3D 9)</span></span>

<span data-ttu-id="494dc-104">El contenido de la textura suele almacenarse en formato sRGB.</span><span class="sxs-lookup"><span data-stu-id="494dc-104">Texture content is often stored in sRGB format.</span></span> <span data-ttu-id="494dc-105">Tradicionalmente, las canalizaciones de píxeles suponía que los colores eran lineales, por lo que las operaciones de combinación se realizaban en el espacio lineal.</span><span class="sxs-lookup"><span data-stu-id="494dc-105">Traditionally, pixel pipelines assumed the colors to be linear so blending operations were performed in linear space.</span></span> <span data-ttu-id="494dc-106">Sin embargo, dado que el contenido de sRGB se corrigió en gamma, las operaciones de mezcla en el espacio lineal producirán resultados incorrectos.</span><span class="sxs-lookup"><span data-stu-id="494dc-106">However, since sRGB content is gamma corrected, blending operations in linear space will produce incorrect results.</span></span> <span data-ttu-id="494dc-107">Ahora, las tarjetas de vídeo pueden solucionar este problema deshaciendo la corrección de gamma cuando leen el contenido de sRGB y convierten los datos de píxeles al formato sRGB al escribir los píxeles.</span><span class="sxs-lookup"><span data-stu-id="494dc-107">Video cards can now fix this problem by undoing the gamma correction when they read any sRGB content, and convert pixel data back to the sRGB format when writing out pixels.</span></span> <span data-ttu-id="494dc-108">En este caso, todas las operaciones dentro de la canalización de píxeles se realizan en el espacio lineal.</span><span class="sxs-lookup"><span data-stu-id="494dc-108">In this case, all operations inside the pixel pipeline are performed in the linear space.</span></span>

## <a name="gamma-correction"></a><span data-ttu-id="494dc-109">Corrección gamma</span><span class="sxs-lookup"><span data-stu-id="494dc-109">Gamma Correction</span></span>

<span data-ttu-id="494dc-110">Direct3D 9 puede:</span><span class="sxs-lookup"><span data-stu-id="494dc-110">Direct3D 9 can:</span></span>

-   <span data-ttu-id="494dc-111">Indicar si una textura es gamma 2,2 corregida o no (sRGB o not).</span><span class="sxs-lookup"><span data-stu-id="494dc-111">Indicate whether a texture is gamma 2.2 corrected or not (sRGB or not).</span></span> <span data-ttu-id="494dc-112">El controlador se convertirá en un gamma lineal para las operaciones de fusión en tiempo de SetTexture, o la muestra lo convertirá en datos lineales en el momento de la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="494dc-112">The driver will either convert to a linear gamma for blending operations at SetTexture time, or the sampler will convert it to linear data at lookup time.</span></span>
-   <span data-ttu-id="494dc-113">Indique si la canalización de píxeles debe volver a corregir el espacio sRGB al escribir en el destino de representación.</span><span class="sxs-lookup"><span data-stu-id="494dc-113">Indicate whether the pixel pipeline should gamma correct back to sRGB space when writing out to the render target.</span></span>

<span data-ttu-id="494dc-114">Se supone que todos los demás colores (color claro, color del material, color de vértice, etc.) están en el espacio lineal.</span><span class="sxs-lookup"><span data-stu-id="494dc-114">All other colors (clear color, material color, vertex color, etc.) are assumed to be in linear space.</span></span> <span data-ttu-id="494dc-115">Las aplicaciones pueden corregir los colores que se escriben en el búfer de fotogramas mediante instrucciones del sombreador de píxeles.</span><span class="sxs-lookup"><span data-stu-id="494dc-115">Applications can gamma-correct the colors written into the frame buffer using pixel shader instructions.</span></span> <span data-ttu-id="494dc-116">La linealidad solo debe aplicarse a los canales RGB y no al canal alfa.</span><span class="sxs-lookup"><span data-stu-id="494dc-116">The linearization should be applied only to the RGB channels and not to the alpha channel.</span></span>

<span data-ttu-id="494dc-117">No todos los formatos de superficie se pueden alinear.</span><span class="sxs-lookup"><span data-stu-id="494dc-117">Not all surface formats can be linearized.</span></span> <span data-ttu-id="494dc-118">Solo los formatos que pasan [**CheckDeviceFormat**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat) con D3DUSAGE \_ consulta \_ SRGBREAD se pueden alinear.</span><span class="sxs-lookup"><span data-stu-id="494dc-118">Only the formats that pass [**CheckDeviceFormat**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat) with D3DUSAGE\_QUERY\_SRGBREAD can be linearized.</span></span> <span data-ttu-id="494dc-119">El estado de muestra D3DSAMP \_ SRGBTEXTURE se omite en el resto.</span><span class="sxs-lookup"><span data-stu-id="494dc-119">The sampler state D3DSAMP\_SRGBTEXTURE is ignored for the rest.</span></span> <span data-ttu-id="494dc-120">Solo se espera que los formatos de textura sin firmar admitan esta conversión.</span><span class="sxs-lookup"><span data-stu-id="494dc-120">Only unsigned texture formats are expected to support this conversion.</span></span> <span data-ttu-id="494dc-121">Los formatos de textura sin signo incluyen solo los componentes R, G, B y L.</span><span class="sxs-lookup"><span data-stu-id="494dc-121">Unsigned texture formats include only R, G, B, and L components.</span></span> <span data-ttu-id="494dc-122">Si el canal alfa está presente, se omite.</span><span class="sxs-lookup"><span data-stu-id="494dc-122">If the alpha channel is present, it is ignored.</span></span> <span data-ttu-id="494dc-123">Si los formatos mixtos admiten la linealidad sRGB, solo se ven afectados los canales sin signo.</span><span class="sxs-lookup"><span data-stu-id="494dc-123">If mixed formats support sRGB linearization, only the unsigned channels are affected.</span></span> <span data-ttu-id="494dc-124">Idealmente, el hardware debe realizar la linealización antes del filtrado, pero en Direct3D 9, el hardware puede realizar la linealización después del filtrado.</span><span class="sxs-lookup"><span data-stu-id="494dc-124">Ideally, hardware should perform the linearization before filtering but in Direct3D 9, hardware is allowed to perform the linearization after filtering.</span></span>

<span data-ttu-id="494dc-125">No todos los formatos de superficie se pueden escribir en el espacio sRGB.</span><span class="sxs-lookup"><span data-stu-id="494dc-125">Not all surface formats can be written in sRGB space.</span></span> <span data-ttu-id="494dc-126">Solo se pueden alinear los formatos que pasan [**CheckDeviceFormat**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat) con la marca de uso D3DUSAGE \_ consulta \_ SRGBWRITE.</span><span class="sxs-lookup"><span data-stu-id="494dc-126">Only the formats that pass the [**CheckDeviceFormat**](/windows/win32/api/d3d9/nf-d3d9-idirect3d9-checkdeviceformat) with the usage flag D3DUSAGE\_QUERY\_SRGBWRITE can be linearized.</span></span> <span data-ttu-id="494dc-127">El estado de representación D3DRS \_ SRGBWRITEENABLE se omite en el resto.</span><span class="sxs-lookup"><span data-stu-id="494dc-127">The render state D3DRS\_SRGBWRITEENABLE is ignored for the rest.</span></span> <span data-ttu-id="494dc-128">Se espera que los formatos sin signo RGB de ocho bits por canal expongan esta capacidad.</span><span class="sxs-lookup"><span data-stu-id="494dc-128">Eight bits per channel RGB unsigned formats are expected to expose this ability.</span></span>

<span data-ttu-id="494dc-129">Idealmente, el hardware debe realizar las operaciones de fusión de búfer de fotogramas en el espacio lineal, pero el hardware puede realizarla después del sombreador de píxeles, pero antes del mezclador de búfer de fotogramas.</span><span class="sxs-lookup"><span data-stu-id="494dc-129">Ideally, hardware should perform the frame buffer blending operations in the linear space, but hardware is allowed to perform it after the pixel shader but before the frame buffer blender.</span></span> <span data-ttu-id="494dc-130">Esto significa que las operaciones de fusión de búfer de fotogramas que tienen lugar en el espacio sRGB producirán resultados incorrectos.</span><span class="sxs-lookup"><span data-stu-id="494dc-130">This means that the frame buffer blending operations that take place in sRGB space will produce incorrect results.</span></span> <span data-ttu-id="494dc-131">D3DRS \_ SRGBWRITEENABLE se respeta mientras se realiza un borrado del destino de representación.</span><span class="sxs-lookup"><span data-stu-id="494dc-131">D3DRS\_SRGBWRITEENABLE is honored while performing a clear of the render target.</span></span> <span data-ttu-id="494dc-132">En el caso de hardware que admita [varios destinos de representación (Direct3D 9)](multiple-render-targets.md) o [texturas de varios elementos (Direct3D 9)](multiple-element-textures.md), solo se escribe el primer destino o elemento de representación.</span><span class="sxs-lookup"><span data-stu-id="494dc-132">For hardware that supports [Multiple Render Targets (Direct3D 9)](multiple-render-targets.md) or [Multiple-element Textures (Direct3D 9)](multiple-element-textures.md), only the first render target or element is written.</span></span>

### <a name="api-changes"></a><span data-ttu-id="494dc-133">Cambios de la API</span><span class="sxs-lookup"><span data-stu-id="494dc-133">API Changes</span></span>


```
// New sampler state (DWORD)
// If this is nonzero, the texture is linearized on lookup.
D3DSAMP_SRGBTEXTURE       // Default FALSE

// New render state (DWORD)
D3DRS_SRGBWRITEENABLE     // Default FALSE

// New usage flags
D3DUSAGE_QUERY_SRGBWRITE
D3DUSAGE_QUERY_SRGBREAD
```



### <a name="windowed-swap-chains"></a><span data-ttu-id="494dc-134">Cadenas de intercambio en ventanas</span><span class="sxs-lookup"><span data-stu-id="494dc-134">Windowed Swap Chains</span></span>

<span data-ttu-id="494dc-135">Es importante que las aplicaciones mantengan los búferes de reserva de sus cadenas de intercambio en el espacio lineal para habilitar las operaciones de mezcla correctas.</span><span class="sxs-lookup"><span data-stu-id="494dc-135">It is valuable for applications to keep the back buffers of their swap chains in linear space in order to enable correct blending operations.</span></span> <span data-ttu-id="494dc-136">Dado que el escritorio no suele estar en el espacio lineal, se requiere una corrección gamma antes de que se pueda presentar el contenido del búfer de reserva.</span><span class="sxs-lookup"><span data-stu-id="494dc-136">Since the desktop is typically not in linear space, a gamma correction is required before the contents of the back buffer can be presented.</span></span> <span data-ttu-id="494dc-137">La aplicación puede afectar a esta corrección mediante la asignación de un búfer adicional y la realización de su propia copia de corrección del búfer lineal en el búfer de reserva.</span><span class="sxs-lookup"><span data-stu-id="494dc-137">The application can effect this correction itself by allocating an additional buffer and performing its own correcting copy from the linear buffer to the back buffer.</span></span> <span data-ttu-id="494dc-138">Esto requiere una copia adicional que se puede evitar si el controlador realiza una corrección gamma como parte de la presentación.</span><span class="sxs-lookup"><span data-stu-id="494dc-138">This necessitates an extra copy which can be avoided if the driver performs gamma correction as part of the presentation blit.</span></span>

<span data-ttu-id="494dc-139">En Direct3D 9, existe una nueva marca, [D3DPRESENT \_ linear \_ Content](d3dpresent.md) [**, que permite**](/windows/desktop/api) que la presentación se convierta implícitamente del espacio lineal al sRGB/gamma 2,2.</span><span class="sxs-lookup"><span data-stu-id="494dc-139">In Direct3D 9 a new flag, [D3DPRESENT\_LINEAR\_CONTENT](d3dpresent.md), is available for [**Present**](/windows/desktop/api) that allows the presentation to implicitly convert from linear space to sRGB/gamma 2.2.</span></span> <span data-ttu-id="494dc-140">Las aplicaciones deben especificar esta marca si el formato de búfer de reserva es un punto flotante de 16 bits para que coincida con el modo de ventana presente en el comportamiento de gamma de pantalla completa, siempre que \_ \_ \_ se devuelva la presentación D3DCAPS3 linear to sRGB \_ para las funcionalidades de dispositivo recuperadas a través de [**GetDeviceCaps**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getdevicecaps).</span><span class="sxs-lookup"><span data-stu-id="494dc-140">Applications should specify this flag if the backbuffer format is 16-bit floating point in order to match windowed mode present to full screen gamma behavior, provided D3DCAPS3\_LINEAR\_TO\_SRGB\_PRESENTATION is returned for device capabilities retrieved through [**GetDeviceCaps**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getdevicecaps).</span></span>

## <a name="related-topics"></a><span data-ttu-id="494dc-141">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="494dc-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="494dc-142">Búfer de fotogramas</span><span class="sxs-lookup"><span data-stu-id="494dc-142">Frame Buffer</span></span>](frame-buffer.md)
</dt> </dl>

 

 
