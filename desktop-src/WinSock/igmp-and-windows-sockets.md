---
description: Windows Sockets habilita la detección de escucha de multidifusión (MLD) en IPv6 y el protocolo de administración de grupos de Internet (IGMP) en IPv4 para las aplicaciones de multidifusión mediante el uso de opciones de socket y ioctl.
ms.assetid: a5de4273-e86e-4f13-b068-256cb38706d4
title: MLD y IGMP con Windows Sockets
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6cb9f9c345463e283adea0136037d7ccd03cebd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104275399"
---
# <a name="mld-and-igmp-using-windows-sockets"></a><span data-ttu-id="8f387-103">MLD y IGMP con Windows Sockets</span><span class="sxs-lookup"><span data-stu-id="8f387-103">MLD and IGMP Using Windows Sockets</span></span>

<span data-ttu-id="8f387-104">Windows Sockets habilita la detección de escucha de multidifusión (MLD) en IPv6 y el protocolo de administración de grupos de Internet (IGMP) en IPv4 para las aplicaciones de multidifusión mediante el uso de opciones de socket y ioctl.</span><span class="sxs-lookup"><span data-stu-id="8f387-104">Windows Sockets enables the Multicast Listener Discovery (MLD) on IPv6 and the Internet Group Management Protocol (IGMP) on IPv4 for multicast applications through the use of socket options and IOCTLs.</span></span> <span data-ttu-id="8f387-105">En esta página se describen las opciones de socket que habilitan la programación multidifusión y se describe cómo se usan.</span><span class="sxs-lookup"><span data-stu-id="8f387-105">This page describes the socket options that enable multicast programming, and describes how they are used.</span></span> <span data-ttu-id="8f387-106">Para ver las definiciones de cada opción de socket, consulte la página [Opciones de socket](socket-options.md) .</span><span class="sxs-lookup"><span data-stu-id="8f387-106">For definitions of each socket option, consult the [Socket Options](socket-options.md) page.</span></span>

<span data-ttu-id="8f387-107">Para obtener información sobre cómo usar ioctl para la programación de multidifusión, vea [programación de multidifusión basada en el estado final](final-state-based-multicast-programming.md) más adelante en esta sección.</span><span class="sxs-lookup"><span data-stu-id="8f387-107">For information on using IOCTLs for multicast programming, see [Final-State-Based Multicast Programming](final-state-based-multicast-programming.md) later in this section.</span></span>

<span data-ttu-id="8f387-108">En Windows Vista y versiones posteriores, hay disponible un conjunto de opciones de socket para la programación de multidifusión que admiten direcciones IPv6 e IPv4.</span><span class="sxs-lookup"><span data-stu-id="8f387-108">On Windows Vista and later, a set of socket options are available for multicast programming that support IPv6 and IPv4 addresses.</span></span> <span data-ttu-id="8f387-109">Estas opciones de socket son independientes de IP y se pueden usar en IPv6 e IPv4.</span><span class="sxs-lookup"><span data-stu-id="8f387-109">These socket options are IP agnostic and can be used on both IPv6 and IPv4.</span></span> <span data-ttu-id="8f387-110">En IPv6, estas opciones de socket usan MLDv2.</span><span class="sxs-lookup"><span data-stu-id="8f387-110">On IPv6, these socket options use MLDv2.</span></span> <span data-ttu-id="8f387-111">En IPv4, estas opciones de socket usan IGMPv3.</span><span class="sxs-lookup"><span data-stu-id="8f387-111">On IPv4, these socket options use IGMPv3.</span></span> <span data-ttu-id="8f387-112">Estas opciones independientes de IP son las opciones de socket preferidas para la programación multidifusión en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="8f387-112">These IP agnostic options are the preferred socket options for multicast programming on Windows Vista and later.</span></span> <span data-ttu-id="8f387-113">Windows Sockets usa las siguientes opciones de socket:</span><span class="sxs-lookup"><span data-stu-id="8f387-113">Windows Sockets uses the following socket options:</span></span> 

| <span data-ttu-id="8f387-114">Opción de socket</span><span class="sxs-lookup"><span data-stu-id="8f387-114">Socket option</span></span>               | <span data-ttu-id="8f387-115">Tipo de argumento</span><span class="sxs-lookup"><span data-stu-id="8f387-115">Argument type</span></span>                                            |
|-----------------------------|----------------------------------------------------------|
| <span data-ttu-id="8f387-116">\_origen de bloque MCAST \_</span><span class="sxs-lookup"><span data-stu-id="8f387-116">MCAST\_BLOCK\_SOURCE</span></span>        | <span data-ttu-id="8f387-117">[**Grupo \_ de SOURCE \_ req**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) (estructura)</span><span class="sxs-lookup"><span data-stu-id="8f387-117">[**GROUP\_SOURCE\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) structure</span></span> |
| <span data-ttu-id="8f387-118">\_grupo de combinación MCAST \_</span><span class="sxs-lookup"><span data-stu-id="8f387-118">MCAST\_JOIN\_GROUP</span></span>          | <span data-ttu-id="8f387-119">[**Grupo \_ de REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_req) (estructura)</span><span class="sxs-lookup"><span data-stu-id="8f387-119">[**GROUP\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_req) structure</span></span>                |
| <span data-ttu-id="8f387-120">MCAST \_ unirse \_ al \_ grupo de origen</span><span class="sxs-lookup"><span data-stu-id="8f387-120">MCAST\_JOIN\_SOURCE\_GROUP</span></span>  | <span data-ttu-id="8f387-121">[**Grupo \_ de SOURCE \_ req**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) (estructura)</span><span class="sxs-lookup"><span data-stu-id="8f387-121">[**GROUP\_SOURCE\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) structure</span></span> |
| <span data-ttu-id="8f387-122">Grupo de MCAST \_ leave \_</span><span class="sxs-lookup"><span data-stu-id="8f387-122">MCAST\_LEAVE\_GROUP</span></span>         | <span data-ttu-id="8f387-123">[**Grupo \_ de REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_req) (estructura)</span><span class="sxs-lookup"><span data-stu-id="8f387-123">[**GROUP\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_req) structure</span></span>                |
| <span data-ttu-id="8f387-124">MCAST \_ abandonar \_ grupo de origen \_</span><span class="sxs-lookup"><span data-stu-id="8f387-124">MCAST\_LEAVE\_SOURCE\_GROUP</span></span> | <span data-ttu-id="8f387-125">[**Grupo \_ de SOURCE \_ req**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) (estructura)</span><span class="sxs-lookup"><span data-stu-id="8f387-125">[**GROUP\_SOURCE\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) structure</span></span> |
| <span data-ttu-id="8f387-126">\_origen de DESbloqueo de MCAST \_</span><span class="sxs-lookup"><span data-stu-id="8f387-126">MCAST\_UNBLOCK\_SOURCE</span></span>      | <span data-ttu-id="8f387-127">[**Grupo \_ de SOURCE \_ req**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) (estructura)</span><span class="sxs-lookup"><span data-stu-id="8f387-127">[**GROUP\_SOURCE\_REQ**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-group_source_req) structure</span></span> |



 

<span data-ttu-id="8f387-128">Hay disponible un conjunto de opciones de socket para la programación multidifusión que admiten direcciones solo IPv6.</span><span class="sxs-lookup"><span data-stu-id="8f387-128">A set of socket options are available for multicast programming that support IPv6 only addresses.</span></span> <span data-ttu-id="8f387-129">Estas opciones de socket usan MLDv1 o MLDv2.</span><span class="sxs-lookup"><span data-stu-id="8f387-129">These socket options use MLDv1 or MLDv2.</span></span> <span data-ttu-id="8f387-130">La versión de MLD utilizada depende de la versión de Windows.</span><span class="sxs-lookup"><span data-stu-id="8f387-130">The version of MLD used is dependent on the version of Windows.</span></span> <span data-ttu-id="8f387-131">MLDv2 es compatible con Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="8f387-131">MLDv2 is supported on Windows Vista and later.</span></span> <span data-ttu-id="8f387-132">Windows Sockets usa las siguientes opciones de socket:</span><span class="sxs-lookup"><span data-stu-id="8f387-132">Windows Sockets uses the following socket options:</span></span> 

| <span data-ttu-id="8f387-133">Opción de socket</span><span class="sxs-lookup"><span data-stu-id="8f387-133">Socket option</span></span>          | <span data-ttu-id="8f387-134">Tipo de argumento</span><span class="sxs-lookup"><span data-stu-id="8f387-134">Argument type</span></span>                             |
|------------------------|-------------------------------------------|
| <span data-ttu-id="8f387-135">IPV6 \_ agregar \_ pertenencia</span><span class="sxs-lookup"><span data-stu-id="8f387-135">IPV6\_ADD\_MEMBERSHIP</span></span>  | <span data-ttu-id="8f387-136">[**estructura \_ mreq de IPv6**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ipv6_mreq)</span><span class="sxs-lookup"><span data-stu-id="8f387-136">[**ipv6\_mreq**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ipv6_mreq) structure</span></span> |
| <span data-ttu-id="8f387-137">\_Eliminación de \_ PERtenencia IPv6</span><span class="sxs-lookup"><span data-stu-id="8f387-137">IPV6\_DROP\_MEMBERSHIP</span></span> | <span data-ttu-id="8f387-138">[**estructura \_ mreq de IPv6**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ipv6_mreq)</span><span class="sxs-lookup"><span data-stu-id="8f387-138">[**ipv6\_mreq**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ipv6_mreq) structure</span></span> |



 

<span data-ttu-id="8f387-139">Hay disponible un conjunto de opciones de socket para la programación multidifusión que admiten direcciones solo IPv4.</span><span class="sxs-lookup"><span data-stu-id="8f387-139">A set of socket options are available for multicast programming that support IPv4 only addresses.</span></span> <span data-ttu-id="8f387-140">Estas opciones de socket usan IGMPv3 o IGMPv2.</span><span class="sxs-lookup"><span data-stu-id="8f387-140">These socket options use IGMPv3 or IGMPv2.</span></span> <span data-ttu-id="8f387-141">La versión de IGMP usada depende de la versión de Windows.</span><span class="sxs-lookup"><span data-stu-id="8f387-141">The version of IGMP used is dependent on the version of Windows.</span></span> <span data-ttu-id="8f387-142">IGMPv3 es compatible con Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="8f387-142">IGMPv3 is supported on Windows Vista and later.</span></span> <span data-ttu-id="8f387-143">Windows Sockets usa las siguientes opciones de socket:</span><span class="sxs-lookup"><span data-stu-id="8f387-143">Windows Sockets uses the following socket options:</span></span>

| <span data-ttu-id="8f387-144">Opción de socket</span><span class="sxs-lookup"><span data-stu-id="8f387-144">Socket option</span></span>                | <span data-ttu-id="8f387-145">Tipo de argumento</span><span class="sxs-lookup"><span data-stu-id="8f387-145">Argument type</span></span>                                        |
|------------------------------|------------------------------------------------------|
| <span data-ttu-id="8f387-146">\_agregar \_ pertenencia de IP</span><span class="sxs-lookup"><span data-stu-id="8f387-146">IP\_ADD\_MEMBERSHIP</span></span>          | <span data-ttu-id="8f387-147">estructura de [**\_ mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq)</span><span class="sxs-lookup"><span data-stu-id="8f387-147">[**ip\_mreq**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq) structure</span></span>                |
| <span data-ttu-id="8f387-148">\_pertenencia \_ al origen de adición de IP \_</span><span class="sxs-lookup"><span data-stu-id="8f387-148">IP\_ADD\_SOURCE\_MEMBERSHIP</span></span>  | <span data-ttu-id="8f387-149">estructura de [**\_ \_ origen de mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source)</span><span class="sxs-lookup"><span data-stu-id="8f387-149">[**ip\_mreq\_source**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source) structure</span></span> |
| <span data-ttu-id="8f387-150">\_origen de bloque de IP \_</span><span class="sxs-lookup"><span data-stu-id="8f387-150">IP\_BLOCK\_SOURCE</span></span>            | <span data-ttu-id="8f387-151">estructura de [**\_ \_ origen de mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source)</span><span class="sxs-lookup"><span data-stu-id="8f387-151">[**ip\_mreq\_source**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source) structure</span></span> |
| <span data-ttu-id="8f387-152">pertenencia de drop de IP \_ \_</span><span class="sxs-lookup"><span data-stu-id="8f387-152">IP\_DROP\_MEMBERSHIP</span></span>         | <span data-ttu-id="8f387-153">estructura de [**\_ mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq)</span><span class="sxs-lookup"><span data-stu-id="8f387-153">[**ip\_mreq**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq) structure</span></span>                |
| <span data-ttu-id="8f387-154">\_pertenencia \_ al origen de eliminación de IP \_</span><span class="sxs-lookup"><span data-stu-id="8f387-154">IP\_DROP\_SOURCE\_MEMBERSHIP</span></span> | <span data-ttu-id="8f387-155">estructura de [**\_ \_ origen de mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source)</span><span class="sxs-lookup"><span data-stu-id="8f387-155">[**ip\_mreq\_source**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source) structure</span></span> |
| <span data-ttu-id="8f387-156">\_origen de DESbloqueo de IP \_</span><span class="sxs-lookup"><span data-stu-id="8f387-156">IP\_UNBLOCK\_SOURCE</span></span>          | <span data-ttu-id="8f387-157">estructura de [**\_ \_ origen de mreq IP**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source)</span><span class="sxs-lookup"><span data-stu-id="8f387-157">[**ip\_mreq\_source**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-ip_mreq_source) structure</span></span> |



 

<span data-ttu-id="8f387-158">Cuando IGMPv3 está disponible, las \_ opciones IP Add \_ source \_ Membership, \_ \_ Source Block Source, IP \_ Drop \_ source \_ Membership y IP \_ unblock source \_ se controlan de forma más eficaz, ya que el enrutador puede controlar el filtrado.</span><span class="sxs-lookup"><span data-stu-id="8f387-158">When IGMPv3 is available, the IP\_ADD\_SOURCE\_MEMBERSHIP, IP\_BLOCK\_SOURCE, IP\_DROP\_SOURCE\_MEMBERSHIP, and IP\_UNBLOCK\_SOURCE options are handled more efficiently since the router can handle the filtering.</span></span> <span data-ttu-id="8f387-159">Cuando solo está disponible IGMPv2, el host debe controlar el filtrado.</span><span class="sxs-lookup"><span data-stu-id="8f387-159">When only IGMPv2 is available, the host must handle the filtering.</span></span>

<span data-ttu-id="8f387-160">Hay dos categorías en las que es probable que la mayoría de las aplicaciones queden: cualquier origen y código fuente controlado.</span><span class="sxs-lookup"><span data-stu-id="8f387-160">There are two categories into which most applications are likely to fall: any-source and controlled-source.</span></span>

-   <span data-ttu-id="8f387-161">Las aplicaciones **de origen** aceptan todos los orígenes de forma predeterminada, lo que permite desactivar los orígenes individuales según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="8f387-161">**Any-source** applications accept all sources by default, allowing individual sources to be turned off as required.</span></span> <span data-ttu-id="8f387-162">Un ejemplo de una aplicación de origen cualquiera es una llamada de conferencia de vídeo que permite a todos los destinatarios participar.</span><span class="sxs-lookup"><span data-stu-id="8f387-162">An example of an any-source application is a video conference call that enables all recipients to participate.</span></span>
-   <span data-ttu-id="8f387-163">Las aplicaciones **de origen controlado** limitan los orígenes a una lista determinada, como una estación de radio de Internet, o la difusión de un evento notable.</span><span class="sxs-lookup"><span data-stu-id="8f387-163">**Controlled-source** applications limit sources to a given list, such as an Internet radio station, or the broadcast of a notable event.</span></span> <span data-ttu-id="8f387-164">El proceso de usar las opciones de socket es ligeramente diferente para cada uno.</span><span class="sxs-lookup"><span data-stu-id="8f387-164">The process of using socket options is slightly different for each.</span></span>

<span data-ttu-id="8f387-165">En Windows Vista y versiones posteriores, los siguientes pasos se aplican a las aplicaciones de origen:</span><span class="sxs-lookup"><span data-stu-id="8f387-165">On Windows Vista and later, the following steps apply for any-source applications:</span></span>

- <span data-ttu-id="8f387-166">Use **el \_ \_ Grupo MCAST join** para unirse a un grupo.</span><span class="sxs-lookup"><span data-stu-id="8f387-166">Use **MCAST\_JOIN\_GROUP** to join a group.</span></span>  
- <span data-ttu-id="8f387-167">Use **el \_ \_ origen de bloque MCAST** para desactivar un origen determinado, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="8f387-167">Use **MCAST\_BLOCK\_SOURCE** to turn off a given source, if required.</span></span>  
- <span data-ttu-id="8f387-168">Use **el \_ \_ origen de desbloqueo de MCAST** para volver a permitir un origen bloqueado, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="8f387-168">Use **MCAST\_UNBLOCK\_SOURCE** to re-allow a blocked source, if required.</span></span>  
- <span data-ttu-id="8f387-169">Use **MCAST \_ leave \_ Group** para abandonar el grupo.</span><span class="sxs-lookup"><span data-stu-id="8f387-169">Use **MCAST\_LEAVE\_GROUP** to leave the group.</span></span>  

<span data-ttu-id="8f387-170">En Windows Vista y versiones posteriores, los siguientes pasos se aplican a las aplicaciones de origen controlado:</span><span class="sxs-lookup"><span data-stu-id="8f387-170">On Windows Vista and later, the following steps apply for controlled-source applications:</span></span>

- <span data-ttu-id="8f387-171">Use **el \_ \_ \_ grupo de origen MCAST join** para unir cada par grupo/origen.</span><span class="sxs-lookup"><span data-stu-id="8f387-171">Use **MCAST\_JOIN\_SOURCE\_GROUP** to join each group/source pair.</span></span>  
- <span data-ttu-id="8f387-172">Use **MCAST \_ dejar \_ el \_ grupo de origen** para dejar cada grupo/origen, o use **MCAST \_ dejar \_ Grupo** para dejar todos los orígenes, si todos los orígenes usan la misma dirección de grupo.</span><span class="sxs-lookup"><span data-stu-id="8f387-172">Use **MCAST\_LEAVE\_SOURCE\_GROUP** to leave each group/source, or use **MCAST\_LEAVE\_GROUP** to leave all sources, if the same group address is used by all sources.</span></span>  

<span data-ttu-id="8f387-173">Los pasos siguientes se aplican a las aplicaciones de cualquier origen:</span><span class="sxs-lookup"><span data-stu-id="8f387-173">The following steps apply for any-source applications:</span></span>

- <span data-ttu-id="8f387-174">Use **la \_ \_ pertenencia a agregar de IP** para unirse a un grupo (**IPv6 \_ agregar \_ pertenencia** para IPv6).</span><span class="sxs-lookup"><span data-stu-id="8f387-174">Use **IP\_ADD\_MEMBERSHIP** to join a group (**IPV6\_ADD\_MEMBERSHIP** for IPv6).</span></span>  
- <span data-ttu-id="8f387-175">Use **el \_ \_ origen de bloque de IP** para desactivar un origen determinado, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="8f387-175">Use **IP\_BLOCK\_SOURCE** to turn off a given source, if required.</span></span>  
- <span data-ttu-id="8f387-176">Use **el \_ \_ origen de desbloqueo de IP** para volver a permitir un origen bloqueado, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="8f387-176">Use **IP\_UNBLOCK\_SOURCE** to re-allow a blocked source, if required.</span></span>  
- <span data-ttu-id="8f387-177">Use **la \_ \_ pertenencia** a un drop de IP para abandonar el grupo (**IPv6 \_ Drop \_ Membership** para IPv6).</span><span class="sxs-lookup"><span data-stu-id="8f387-177">Use **IP\_DROP\_MEMBERSHIP** to leave the group (**IPV6\_DROP\_MEMBERSHIP** for IPv6).</span></span>  

<span data-ttu-id="8f387-178">Los pasos siguientes se aplican a las aplicaciones de origen controlado:</span><span class="sxs-lookup"><span data-stu-id="8f387-178">The following steps apply for controlled-source applications:</span></span>

- <span data-ttu-id="8f387-179">Use **la \_ \_ \_ pertenencia** a un origen de adición de IP para combinar cada par de grupo/origen.</span><span class="sxs-lookup"><span data-stu-id="8f387-179">Use **IP\_ADD\_SOURCE\_MEMBERSHIP** to join each group/source pair.</span></span>  
- <span data-ttu-id="8f387-180">Use **la \_ \_ \_ pertenencia** a un origen de eliminación de IP para dejar cada grupo/origen, o use la **\_ \_ pertenencia de drop de IP** para dejar todos los orígenes, si todos los orígenes usan la misma dirección de grupo.</span><span class="sxs-lookup"><span data-stu-id="8f387-180">Use **IP\_DROP\_SOURCE\_MEMBERSHIP** to leave each group/source, or use **IP\_DROP\_MEMBERSHIP** to leave all sources, if the same group address is used by all sources.</span></span>  

<span data-ttu-id="8f387-181">El orden en el que se establecen estas opciones de socket tiene reglas asociadas.</span><span class="sxs-lookup"><span data-stu-id="8f387-181">The order in which these socket options are set has associated rules.</span></span> <span data-ttu-id="8f387-182">Para obtener información y solucionar problemas relacionados con las opciones de socket de multidifusión, vea comportamiento de la [opción de socket de multidifusión](multicast-socket-option-behavior.md).</span><span class="sxs-lookup"><span data-stu-id="8f387-182">For information and troubleshooting information on multicast socket options, see [Multicast Socket Option Behavior](multicast-socket-option-behavior.md).</span></span>
