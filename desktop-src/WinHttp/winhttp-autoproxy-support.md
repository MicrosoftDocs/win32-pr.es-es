---
description: Para facilitar la configuración de la configuración de proxy, WinHTTP 5,1 implementa el protocolo de detección automática de proxy web (WPAD), también conocido como AutoProxy.
ms.assetid: f766f37b-a1aa-420f-ac3b-d03485630d88
title: Compatibilidad con el AutoProxy WinHTTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 26584bd0b1809f3866ed42adc7198275f40f991c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105705675"
---
# <a name="winhttp-autoproxy-support"></a><span data-ttu-id="3c230-103">Compatibilidad con el AutoProxy WinHTTP</span><span class="sxs-lookup"><span data-stu-id="3c230-103">WinHTTP AutoProxy Support</span></span>

<span data-ttu-id="3c230-104">Para facilitar la configuración de la configuración de proxy, WinHTTP 5,1 implementa el protocolo de detección automática de proxy web (WPAD), también conocido como AutoProxy.</span><span class="sxs-lookup"><span data-stu-id="3c230-104">To ease the configuration of proxy settings, WinHTTP 5.1 implements the Web Proxy Auto-Discovery (WPAD) protocol, also known as autoproxy.</span></span>

## <a name="overview-of-autoproxy"></a><span data-ttu-id="3c230-105">Información general de AutoProxy</span><span class="sxs-lookup"><span data-stu-id="3c230-105">Overview of AutoProxy</span></span>

<span data-ttu-id="3c230-106">Las aplicaciones y los componentes que usan WinHTTP para enviar solicitudes HTTP deben asegurarse de que la configuración del proxy esté establecida correctamente.</span><span class="sxs-lookup"><span data-stu-id="3c230-106">Applications and components that use WinHTTP to send HTTP requests should ensure that the proxy configuration is set correctly.</span></span> <span data-ttu-id="3c230-107">A menos que el cliente tenga una conexión directa a Internet, normalmente se debe enviar una solicitud HTTP a través de un servidor proxy web que conecta la red local del cliente a Internet (por ejemplo, suele ser el caso de los clientes Web en una LAN corporativa).</span><span class="sxs-lookup"><span data-stu-id="3c230-107">Unless the client has a direct Internet connection, an HTTP request should normally be sent through a web proxy server that connects the client's local network to the Internet (for example, this is often the case for Web clients on a corporate LAN).</span></span> <span data-ttu-id="3c230-108">En el caso de las aplicaciones basadas en servidor, la configuración del proxy se administra normalmente mediante el administrador del servidor mediante la utilidad WinHTTP ProxyCfg.exe.</span><span class="sxs-lookup"><span data-stu-id="3c230-108">For server-based applications, the proxy configuration is normally managed by the server's administrator using the WinHTTP ProxyCfg.exe utility.</span></span> <span data-ttu-id="3c230-109">El administrador del servidor conoce el nombre del servidor proxy de antemano y usa ProxyCfg.exe para registrar esta configuración en el registro donde WinHTTP puede buscarla.</span><span class="sxs-lookup"><span data-stu-id="3c230-109">The server administrator knows the name of the proxy server in advance and uses ProxyCfg.exe to record this setting in the registry where WinHTTP can look it up.</span></span> <span data-ttu-id="3c230-110">Sin embargo, requerir que los usuarios finales del escritorio de cliente configuren manualmente la configuración del proxy WinHTTP es problemático.</span><span class="sxs-lookup"><span data-stu-id="3c230-110">However, requiring client desktop end-users to manually configure WinHTTP proxy settings is problematic.</span></span> <span data-ttu-id="3c230-111">Es posible que el usuario final no conozca el nombre del servidor proxy. solicitar al usuario final que ejecute la utilidad de ProxyCfg.exe puede suponer una carga de soporte técnico para una organización.</span><span class="sxs-lookup"><span data-stu-id="3c230-111">The end-user may not know the name of the proxy server; requiring the end-user to run the ProxyCfg.exe utility can be a support burden for an organization.</span></span> <span data-ttu-id="3c230-112">Para admitir una buena experiencia del usuario, una aplicación cliente habilitada para Web debe determinar la configuración del proxy sin la intervención del usuario.</span><span class="sxs-lookup"><span data-stu-id="3c230-112">To support a good user experience, a web-enabled client application should determine the proxy configuration without user intervention.</span></span>

<span data-ttu-id="3c230-113">Para facilitar la configuración del proxy para las aplicaciones basadas en WinHTTP, WinHTTP ahora implementa el [Protocolo de detección automática de proxy web (WPAD)](https://tools.ietf.org/html/draft-ietf-wrec-wpad-01), que a menudo se conoce como *AutoProxy*.</span><span class="sxs-lookup"><span data-stu-id="3c230-113">To make configuring the proxy settings for WinHTTP-based applications easier, WinHTTP now implements the [Web Proxy Auto-Discovery (WPAD) protocol](https://tools.ietf.org/html/draft-ietf-wrec-wpad-01), often referred to as *autoproxy*.</span></span> <span data-ttu-id="3c230-114">Este es el mismo protocolo que los exploradores Web implementan para detectar automáticamente la configuración de proxy sin necesidad de que un usuario final especifique un servidor proxy manualmente.</span><span class="sxs-lookup"><span data-stu-id="3c230-114">This is the same protocol that web browsers implement to automatically discover the proxy configuration without requiring an end-user to specify a proxy server manually.</span></span> <span data-ttu-id="3c230-115">Esta característica está disponible a partir de la versión 5,1 de WinHTTP en Windows 2000 Service Pack 3, Windows XP Service Pack 1 y Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="3c230-115">This feature is available starting with WinHTTP version 5.1 in Windows 2000 Service Pack 3, Windows XP Service Pack 1 and Windows Server 2003.</span></span> <span data-ttu-id="3c230-116">Tenga en cuenta que, aunque Microsoft Internet Explorer y Microsoft WinHTTP admiten WPAD, la especificación nunca progresó después de la fase "Internet-Draft" y expiró el 2001 de mayo.</span><span class="sxs-lookup"><span data-stu-id="3c230-116">Note that although both Microsoft Internet Explorer and Microsoft WinHTTP support WPAD, the specification never progressed beyond the "Internet-Draft" stage, and expired in May 2001.</span></span>

<span data-ttu-id="3c230-117">El protocolo WPAD funciona de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="3c230-117">The WPAD protocol works as follows:</span></span>

1.  <span data-ttu-id="3c230-118">Mediante el uso de los protocolos de red DHCP o DNS, se detecta la dirección URL de un archivo de configuración automática de proxy (PAC).</span><span class="sxs-lookup"><span data-stu-id="3c230-118">Using the DHCP and/or DNS network protocols, the URL of a Proxy Auto-Configuration (PAC) file is discovered.</span></span> <span data-ttu-id="3c230-119">La dirección URL identifica un archivo PAC en la red local del cliente.</span><span class="sxs-lookup"><span data-stu-id="3c230-119">The URL identifies a PAC file on the client's local network.</span></span> <span data-ttu-id="3c230-120">WinHTTP solo admite las direcciones URL "http:" y "https:" PAC; por ejemplo, no admite las direcciones URL "File:".</span><span class="sxs-lookup"><span data-stu-id="3c230-120">WinHTTP supports only "http:" and "https:" PAC URLs; it does not, for example, support "file:" URLS.</span></span>
2.  <span data-ttu-id="3c230-121">El archivo PAC se descarga y, opcionalmente, se almacena en caché en el equipo del cliente.</span><span class="sxs-lookup"><span data-stu-id="3c230-121">The PAC file is downloaded and optionally cached on the client's computer.</span></span> <span data-ttu-id="3c230-122">El archivo PAC es un script ejecutable que genera una lista de uno o varios servidores proxy, dados un nombre de host y una dirección URL de destino.</span><span class="sxs-lookup"><span data-stu-id="3c230-122">The PAC file is an executable script that generates a list of one or more proxy servers given a target host name and URL.</span></span> <span data-ttu-id="3c230-123">WinHTTP solo admite archivos PAC basados en ECMAScript.</span><span class="sxs-lookup"><span data-stu-id="3c230-123">WinHTTP supports only ECMAScript-based PAC files.</span></span>
3.  <span data-ttu-id="3c230-124">En cada solicitud HTTP se ejecuta el código del script PAC, con el nombre de host y la dirección URL de la solicitud HTTP pasados como parámetros.</span><span class="sxs-lookup"><span data-stu-id="3c230-124">On each HTTP request, the PAC script code is executed, with the host name and URL of the HTTP request passed in as parameters.</span></span> <span data-ttu-id="3c230-125">WinHTTP espera que el código del script PAC contenga una función llamada **FindProxyForURL**, en el formato:</span><span class="sxs-lookup"><span data-stu-id="3c230-125">WinHTTP expects the PAC script code to contain a function called **FindProxyForURL**, in the form:</span></span>
4.  ``` syntax
    FindProxyForURL( url, host );
    ```

    <span data-ttu-id="3c230-126">Esta función calcula una lista de uno o más servidores proxy que puede usar el cliente HTTP para transmitir la solicitud.</span><span class="sxs-lookup"><span data-stu-id="3c230-126">This function computes a list of one or more proxy servers that can be used by the HTTP client in order to transmit the request.</span></span> <span data-ttu-id="3c230-127">Si el script de PAC determina que el cliente HTTP puede tener acceso al servidor de destino directamente sin pasar por un servidor proxy, lo indica mediante un valor devuelto especial.</span><span class="sxs-lookup"><span data-stu-id="3c230-127">If the PAC script determines that the HTTP client can reach the target server directly without going through a proxy server at all, it indicates this using a special return value.</span></span>

## <a name="autoproxy-topics"></a><span data-ttu-id="3c230-128">Temas de AutoProxy</span><span class="sxs-lookup"><span data-stu-id="3c230-128">AutoProxy Topics</span></span>

-   [<span data-ttu-id="3c230-129">Funciones de AutoProxy de WinHTTP</span><span class="sxs-lookup"><span data-stu-id="3c230-129">WinHTTP AutoProxy Functions</span></span>](winhttp-autoproxy-api.md)
-   [<span data-ttu-id="3c230-130">Detección sin un archivo de configuración automática</span><span class="sxs-lookup"><span data-stu-id="3c230-130">Discovery Without an Auto-Config File</span></span>](discovery-without-an-auto-config-file.md)
-   [<span data-ttu-id="3c230-131">Problemas de AutoProxy en WinHTTP</span><span class="sxs-lookup"><span data-stu-id="3c230-131">AutoProxy Issues in WinHTTP</span></span>](autoproxy-issues-in-winhttp.md)
-   [<span data-ttu-id="3c230-132">Establecer configuraciones de proxy WinInet en WinHTTP</span><span class="sxs-lookup"><span data-stu-id="3c230-132">Setting WinInet Proxy Configurations in WinHTTP</span></span>](setting-wininet-proxy-configurations-in-winhttp.md)
-   [<span data-ttu-id="3c230-133">Caché de AutoProxy</span><span class="sxs-lookup"><span data-stu-id="3c230-133">AutoProxy Cache</span></span>](autoproxy-cache.md)
-   [<span data-ttu-id="3c230-134">Extensiones IPv6 para el formato de archivo de configuración automática de navegador</span><span class="sxs-lookup"><span data-stu-id="3c230-134">IPv6 Extensions to Navigator Auto-Config File Format</span></span>](ipv6-extensions-to-navigator-auto-config-file-format.md)

 

 



