---
description: 'VSS permite la existencia de muchas instantáneas a la vez, pero solo permite que se encuentre en curso una creación de conjuntos de instantáneas entre la llamada a IVssBackupComponents:: StartSnapshotSet y la devolución de la llamada a IVssBackupComponents::D oSnapshotSet.'
ms.assetid: 26657fc2-180f-4ebb-820c-2159e7fe7584
title: Control de errores en los proveedores de instantáneas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f5f040526f63a0fe57fc5a49ac903e8b60b76646
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105653031"
---
# <a name="error-handling-in-shadow-copy-providers"></a><span data-ttu-id="e89f8-103">Control de errores en los proveedores de instantáneas</span><span class="sxs-lookup"><span data-stu-id="e89f8-103">Error Handling in Shadow Copy Providers</span></span>

<span data-ttu-id="e89f8-104">VSS permite la existencia de muchas instantáneas a la vez, pero solo permite que se encuentre en curso una creación de conjuntos de instantáneas entre la llamada a [**ivssbackupcomponents:: StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset) y la devolución de la llamada a [**Ivssbackupcomponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span><span class="sxs-lookup"><span data-stu-id="e89f8-104">VSS allows many shadow copies to exist at once, but it only allows one shadow copy set creation to be in-progress between the call to [**IVssBackupComponents::StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset) and the return from the call to [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span></span>

## <a name="no-partial-commit"></a><span data-ttu-id="e89f8-105">No confirmaciones parciales</span><span class="sxs-lookup"><span data-stu-id="e89f8-105">No Partial Commit</span></span>

<span data-ttu-id="e89f8-106">Si algún proveedor produce un error en una instantánea de cualquier volumen o LUN del conjunto de instantáneas, se produce un error en la creación del conjunto de instantáneas completo.</span><span class="sxs-lookup"><span data-stu-id="e89f8-106">If any provider fails a shadow copy on any volume or LUN in the shadow copy set, then the creation of the entire shadow copy set fails.</span></span> <span data-ttu-id="e89f8-107">es así por diseño.</span><span class="sxs-lookup"><span data-stu-id="e89f8-107">This is by design.</span></span> <span data-ttu-id="e89f8-108">Este diseño simplifica los problemas de comportamiento asociados con la semántica de errores parciales y mantiene un momento dado coherente en todas las instantáneas del conjunto.</span><span class="sxs-lookup"><span data-stu-id="e89f8-108">This design simplifies the behavioral issues associated with partial failure semantics and maintains a consistent point-in-time across all shadow copies in the set.</span></span>

## <a name="reporting-fault-conditions"></a><span data-ttu-id="e89f8-109">Informes de condiciones de error</span><span class="sxs-lookup"><span data-stu-id="e89f8-109">Reporting Fault Conditions</span></span>

<span data-ttu-id="e89f8-110">Si se produce un error o una condición de error del proveedor, el proveedor debe registrar un error en el registro de eventos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e89f8-110">If a provider error or fault condition occurs, the provider must log an error to the Application event log.</span></span> <span data-ttu-id="e89f8-111">Esto incluye, entre otros, cualquier error específico del proveedor al crear o importar un conjunto de instantáneas, o un error de asignación de recursos para la instantánea de copia en escritura después de la creación.</span><span class="sxs-lookup"><span data-stu-id="e89f8-111">This includes, but is not limited to, any provider-specific errors when creating or importing a Shadow Copy Set, or resource allocation failure for copy-on-write shadow copy after creation.</span></span> <span data-ttu-id="e89f8-112">Este registro no debe realizarse durante el tiempo en el que los volúmenes del conjunto de instantáneas están en un estado inmovilizado.</span><span class="sxs-lookup"><span data-stu-id="e89f8-112">This logging must not take place during the time the volumes in the shadow copy set are in a frozen state.</span></span>

## <a name="valid-provider-return-values"></a><span data-ttu-id="e89f8-113">Valores devueltos de proveedor válidos</span><span class="sxs-lookup"><span data-stu-id="e89f8-113">Valid Provider Return Values</span></span>

<span data-ttu-id="e89f8-114">En la tabla siguiente se enumeran los códigos de retorno válidos para los métodos de proveedor y su significado.</span><span class="sxs-lookup"><span data-stu-id="e89f8-114">The following table lists the valid return codes for provider methods and their meanings.</span></span>



| <span data-ttu-id="e89f8-115">Value</span><span class="sxs-lookup"><span data-stu-id="e89f8-115">Value</span></span>                                                                                                                                                                              | <span data-ttu-id="e89f8-116">Descripción</span><span class="sxs-lookup"><span data-stu-id="e89f8-116">Description</span></span>                                                                                                                                                                                                                                            |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e89f8-117"><span id="S_OK"></span><span id="s_ok"></span>S \_ correcto</span><span class="sxs-lookup"><span data-stu-id="e89f8-117"><span id="S_OK"></span><span id="s_ok"></span>S\_OK</span></span><br/>                                                                                                                     | <span data-ttu-id="e89f8-118">Método realizado correctamente.</span><span class="sxs-lookup"><span data-stu-id="e89f8-118">The method was successful.</span></span><br/>                                                                                                                                                                                                                  |
| <span data-ttu-id="e89f8-119"><span id="E_OUTOFMEMORY"></span><span id="e_outofmemory"></span>E \_ OUTOFMEMORY</span><span class="sxs-lookup"><span data-stu-id="e89f8-119"><span id="E_OUTOFMEMORY"></span><span id="e_outofmemory"></span>E\_OUTOFMEMORY</span></span><br/>                                                                                          | <span data-ttu-id="e89f8-120">El proveedor no tiene memoria u otros recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="e89f8-120">The provider is out of memory or other system resources.</span></span><br/>                                                                                                                                                                                    |
| <span data-ttu-id="e89f8-121"><span id="E_INVALIDARG"></span><span id="e_invalidarg"></span>E \_ INVALIDARG</span><span class="sxs-lookup"><span data-stu-id="e89f8-121"><span id="E_INVALIDARG"></span><span id="e_invalidarg"></span>E\_INVALIDARG</span></span><br/>                                                                                             | <span data-ttu-id="e89f8-122">Uno de los valores de parámetro no es válido.</span><span class="sxs-lookup"><span data-stu-id="e89f8-122">One of the parameter values is not valid.</span></span><br/>                                                                                                                                                                                                   |
| <span data-ttu-id="e89f8-123"><span id="E_ACCESSDENIED"></span><span id="e_accessdenied"></span>E \_ ACCESSDENIED</span><span class="sxs-lookup"><span data-stu-id="e89f8-123"><span id="E_ACCESSDENIED"></span><span id="e_accessdenied"></span>E\_ACCESSDENIED</span></span><br/>                                                                                       | <span data-ttu-id="e89f8-124">Un cliente sin privilegios ha intentado llamar al proveedor.</span><span class="sxs-lookup"><span data-stu-id="e89f8-124">A non-privileged client has tried to call into the provider.</span></span><br/>                                                                                                                                                                                |
| <span data-ttu-id="e89f8-125"><span id="VSS_E_BAD_STATE"></span><span id="vss_e_bad_state"></span>Estado de VSS \_ E \_ incorrecto \_</span><span class="sxs-lookup"><span data-stu-id="e89f8-125"><span id="VSS_E_BAD_STATE"></span><span id="vss_e_bad_state"></span>VSS\_E\_BAD\_STATE</span></span><br/>                                                                                  | <span data-ttu-id="e89f8-126">Ningún proveedor es compatible con la operación solicitada o la operación no se puede realizar en el objeto porque el objeto no tiene el estado correcto.</span><span class="sxs-lookup"><span data-stu-id="e89f8-126">Either no provider supports the requested operation, or the operation cannot be performed on the object because the object is not in the correct state.</span></span><br/>                                                                                     |
| <span data-ttu-id="e89f8-127"><span id="VSS_E_OBJECT_NOT_FOUND"></span><span id="vss_e_object_not_found"></span>\_ \_ \_ no \_ se encontró el objeto de VSS E</span><span class="sxs-lookup"><span data-stu-id="e89f8-127"><span id="VSS_E_OBJECT_NOT_FOUND"></span><span id="vss_e_object_not_found"></span>VSS\_E\_OBJECT\_NOT\_FOUND</span></span><br/>                                                            | <span data-ttu-id="e89f8-128">Un parámetro hace referencia a un objeto que no se encontró (como un identificador de instantánea, un identificador de conjunto de instantáneas o un volumen).</span><span class="sxs-lookup"><span data-stu-id="e89f8-128">A parameter refers to an object that was not found (such as a shadow copy ID, shadow copy set ID, or volume.)</span></span><br/>                                                                                                                               |
| <span data-ttu-id="e89f8-129"><span id="VSS_E_INSUFFICIENT_STORAGE"></span><span id="vss_e_insufficient_storage"></span>\_ \_ almacenamiento insuficiente en VSS E \_</span><span class="sxs-lookup"><span data-stu-id="e89f8-129"><span id="VSS_E_INSUFFICIENT_STORAGE"></span><span id="vss_e_insufficient_storage"></span>VSS\_E\_INSUFFICIENT\_STORAGE</span></span><br/>                                                 | <span data-ttu-id="e89f8-130">El proveedor no puede realizar la operación porque no hay suficiente espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="e89f8-130">The provider cannot perform the operation because there is not enough disk space.</span></span><br/>                                                                                                                                                           |
| <span data-ttu-id="e89f8-131"><span id="VSS_E_VOLUME_NOT_SUPPORTED"></span><span id="vss_e_volume_not_supported"></span>volumen de VSS \_ E \_ \_ no \_ compatible</span><span class="sxs-lookup"><span data-stu-id="e89f8-131"><span id="VSS_E_VOLUME_NOT_SUPPORTED"></span><span id="vss_e_volume_not_supported"></span>VSS\_E\_VOLUME\_NOT\_SUPPORTED</span></span><br/>                                                | <span data-ttu-id="e89f8-132">Ningún proveedor de este equipo admite la operación solicitada en el volumen.</span><span class="sxs-lookup"><span data-stu-id="e89f8-132">No provider on this computer supports the requested operation on the volume.</span></span><br/>                                                                                                                                                                |
| <span data-ttu-id="e89f8-133"><span id="VSS_E_VOLUME_NOT_SUPPORTED_BY_PROVIDER"></span><span id="vss_e_volume_not_supported_by_provider"></span>\_ \_ volumen de VSS E \_ no \_ compatible con el \_ \_ proveedor</span><span class="sxs-lookup"><span data-stu-id="e89f8-133"><span id="VSS_E_VOLUME_NOT_SUPPORTED_BY_PROVIDER"></span><span id="vss_e_volume_not_supported_by_provider"></span>VSS\_E\_VOLUME\_NOT\_SUPPORTED\_BY\_PROVIDER</span></span><br/>          | <span data-ttu-id="e89f8-134">El proveedor no admite el volumen.</span><span class="sxs-lookup"><span data-stu-id="e89f8-134">The provider does not support the volume.</span></span><br/>                                                                                                                                                                                                   |
| <span data-ttu-id="e89f8-135"><span id="VSS_E_MAXIMUM_NUMBER_OF_SNAPSHOTS_REACHED"></span><span id="vss_e_maximum_number_of_snapshots_reached"></span>se \_ \_ alcanzó el \_ número máximo \_ de \_ instantáneas de \_ VSS E</span><span class="sxs-lookup"><span data-stu-id="e89f8-135"><span id="VSS_E_MAXIMUM_NUMBER_OF_SNAPSHOTS_REACHED"></span><span id="vss_e_maximum_number_of_snapshots_reached"></span>VSS\_E\_MAXIMUM\_NUMBER\_OF\_SNAPSHOTS\_REACHED</span></span><br/> | <span data-ttu-id="e89f8-136">El proveedor ha alcanzado el número máximo de instantáneas que puede admitir.</span><span class="sxs-lookup"><span data-stu-id="e89f8-136">The provider has reached the maximum number of shadow copies that it can support.</span></span><br/>                                                                                                                                                           |
| <span data-ttu-id="e89f8-137"><span id="VSS_E_PROVIDER_VETO"></span><span id="vss_e_provider_veto"></span>VETO de proveedor de VSS \_ E \_ \_</span><span class="sxs-lookup"><span data-stu-id="e89f8-137"><span id="VSS_E_PROVIDER_VETO"></span><span id="vss_e_provider_veto"></span>VSS\_E\_PROVIDER\_VETO</span></span><br/>                                                                      | <span data-ttu-id="e89f8-138">El proveedor ha encontrado un error interno en tiempo de ejecución que no se asigna a otro valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="e89f8-138">The provider has encountered an internal run-time error that does not map to another return value.</span></span> <span data-ttu-id="e89f8-139">El proveedor también debe escribir un evento en el registro de eventos de aplicación que proporcione al usuario información sobre cómo resolver este problema.</span><span class="sxs-lookup"><span data-stu-id="e89f8-139">The provider must also write an event into the Application event log providing the user with information on how to resolve this problem.</span></span><br/> |
| <span data-ttu-id="e89f8-140"><span id="VSS_E_CANNOT_REVERT_DISKID"></span><span id="vss_e_cannot_revert_diskid"></span>VSS \_ E \_ no puede \_ revertir el \_ despatín</span><span class="sxs-lookup"><span data-stu-id="e89f8-140"><span id="VSS_E_CANNOT_REVERT_DISKID"></span><span id="vss_e_cannot_revert_diskid"></span>VSS\_E\_CANNOT\_REVERT\_DISKID</span></span><br/>                                                | <span data-ttu-id="e89f8-141">No se pudo establecer la firma MBR o el ID. de GPT para uno o varios discos en el valor solicitado.</span><span class="sxs-lookup"><span data-stu-id="e89f8-141">The MBR signature or GPT ID for one or more disks could not be set to the requested value.</span></span> <span data-ttu-id="e89f8-142">Compruebe el registro de eventos de la aplicación para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="e89f8-142">Check the Application event log for more information.</span></span><br/>                                                                                            |



 

<span data-ttu-id="e89f8-143">El proveedor no debe intentar devolver ningún otro código de error.</span><span class="sxs-lookup"><span data-stu-id="e89f8-143">The provider should not attempt to return any other error codes.</span></span>

<span data-ttu-id="e89f8-144">Si el proveedor devuelve un código de error que no se espera (por ejemplo, **S \_ false**, **e \_** **\_ inesperada** o **e \_ Abort**), VSS escribe un evento en el registro de eventos que menciona el proveedor y el método con errores y traduce el error en el error de **\_ \_ proveedor inesperado \_ \_ de VSS e** antes de volver al solicitante.</span><span class="sxs-lookup"><span data-stu-id="e89f8-144">If the provider returns an error code that is not expected (for example **S\_FALSE**, **E\_FAIL**, **E\_UNEXPECTED**, or **E\_ABORT**), VSS writes an event into the event log mentioning the provider and failed method and translates the error to **VSS\_E\_UNEXPECTED\_PROVIDER\_ERROR** before returning to the requester.</span></span> <span data-ttu-id="e89f8-145">Esto no se realiza para las devoluciones de [**IVssProviderCreateSnapshotSet:: AbortSnapshots**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidercreatesnapshotset-abortsnapshots) o [**IVssProviderNotifications:: OnUnload**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidernotifications-onunload).</span><span class="sxs-lookup"><span data-stu-id="e89f8-145">This is not done for any returns from [**IVssProviderCreateSnapshotSet::AbortSnapshots**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidercreatesnapshotset-abortsnapshots) or [**IVssProviderNotifications::OnUnload**](/windows/desktop/api/VsProv/nf-vsprov-ivssprovidernotifications-onunload).</span></span>

 

 




