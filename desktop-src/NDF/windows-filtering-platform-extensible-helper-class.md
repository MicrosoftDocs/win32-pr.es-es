---
title: Clase auxiliar extensible de la plataforma de filtrado de Windows
description: La plataforma de filtrado de Windows (WFP) incluye una clase auxiliar del marco de diagnóstico de redes (NDF), denominada clase auxiliar de plataforma de filtrado (FPHC).
ms.assetid: 006ea30c-8682-4a3d-803a-73dba5162696
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 858835c1a649602293ed042c13205ca982de9258
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "103995335"
---
# <a name="windows-filtering-platform-extensible-helper-class"></a><span data-ttu-id="330a3-103">Clase auxiliar extensible de la plataforma de filtrado de Windows</span><span class="sxs-lookup"><span data-stu-id="330a3-103">Windows Filtering Platform Extensible Helper Class</span></span>

<span data-ttu-id="330a3-104">La [plataforma de filtrado de Windows (WFP)](/windows/desktop/FWP/windows-filtering-platform-start-page) incluye una clase auxiliar del marco de diagnóstico de redes (NDF), denominada clase auxiliar de plataforma de filtrado (FPHC).</span><span class="sxs-lookup"><span data-stu-id="330a3-104">The [Windows Filtering Platform (WFP)](/windows/desktop/FWP/windows-filtering-platform-start-page) includes a Network Diagnostics Framework (NDF) helper class, called the Filtering Platform helper class (FPHC).</span></span> <span data-ttu-id="330a3-105">FPHC puede ayudar a identificar las causas raíz de los problemas de conectividad causados por WFP.</span><span class="sxs-lookup"><span data-stu-id="330a3-105">FPHC can help identify the root causes of connectivity issues caused by WFP.</span></span> <span data-ttu-id="330a3-106">Los desarrolladores de Firewall de terceros pueden implementar sus propias clases auxiliares de NDF.</span><span class="sxs-lookup"><span data-stu-id="330a3-106">Third-party firewall developers can implement their own NDF helper classes.</span></span> <span data-ttu-id="330a3-107">La extensibilidad de FPHC permite invocar estas clases auxiliares de terceros durante el diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="330a3-107">FPHC extensibility allows these third-party helper classes to be invoked during diagnostics.</span></span>

<span data-ttu-id="330a3-108">En este tema se da por supuesto que está familiarizado con la [API de WFP](/windows/desktop/FWP/windows-filtering-platform-start-page).</span><span class="sxs-lookup"><span data-stu-id="330a3-108">This topic assumes familiarity with the [WFP API](/windows/desktop/FWP/windows-filtering-platform-start-page).</span></span>

## <a name="why-extend-the-fphc"></a><span data-ttu-id="330a3-109">¿Por qué extender el FPHC?</span><span class="sxs-lookup"><span data-stu-id="330a3-109">Why Extend the FPHC?</span></span>

<span data-ttu-id="330a3-110">Todos los desarrolladores que escriben aplicaciones que llaman a la API de WFP deben escribir una clase auxiliar NDF que extienda FPHC.</span><span class="sxs-lookup"><span data-stu-id="330a3-110">All developers that write applications that call the WFP API should write an NDF helper class that extends FPHC.</span></span>

<span data-ttu-id="330a3-111">FPHC puede identificar WFP como causa de un problema de conectividad.</span><span class="sxs-lookup"><span data-stu-id="330a3-111">FPHC can identify WFP as the cause of a connectivity issue.</span></span> <span data-ttu-id="330a3-112">Si está disponible, FPHC también puede identificar el proveedor que creó el filtro que está bloqueando el tráfico de red.</span><span class="sxs-lookup"><span data-stu-id="330a3-112">If available, FPHC can also identify the provider that created the filter that is blocking network traffic.</span></span> <span data-ttu-id="330a3-113">FPHC pasa esta información a NDF, que a su vez puede notificar al usuario que WFP está causando el problema de conectividad y proporcionar el nombre del proveedor que bloquea el tráfico.</span><span class="sxs-lookup"><span data-stu-id="330a3-113">FPHC passes this information to NDF, which in turn can then notify the user that WFP is causing the connectivity problem and give the name of the provider blocking traffic.</span></span>

<span data-ttu-id="330a3-114">Sin embargo, el FPHC no puede sugerir una acción correctiva para el usuario, ni puede proporcionar el motivo por el que el filtro está bloqueando el tráfico al usuario.</span><span class="sxs-lookup"><span data-stu-id="330a3-114">However, the FPHC cannot suggest a corrective action to the user, nor can it provide the reason that the filter is blocking traffic to the user.</span></span> <span data-ttu-id="330a3-115">Solo una extensión FPHC puede realizar esas tareas.</span><span class="sxs-lookup"><span data-stu-id="330a3-115">Only a FPHC extension can perform those tasks.</span></span>

<span data-ttu-id="330a3-116">Considere una aplicación de Firewall de terceros que llama a la API de WFP.</span><span class="sxs-lookup"><span data-stu-id="330a3-116">Consider a third-party firewall application that calls the WFP API.</span></span> <span data-ttu-id="330a3-117">Si el Firewall de terceros implementa una extensión FPHC, se pueden implementar acciones personalizadas para controlar los problemas de conectividad identificados por NDF.</span><span class="sxs-lookup"><span data-stu-id="330a3-117">If the third-party firewall implements a FPHC extension, then custom actions can be implemented to handle connectivity issues identified by NDF.</span></span> <span data-ttu-id="330a3-118">Cuando NDF diagnostica que una aplicación se ha bloqueado por el Firewall de terceros, la extensión FPHC puede controlar el evento de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="330a3-118">When NDF diagnoses that an application has been blocked by the third-party firewall, the FPHC extension can handle the blocking event.</span></span> <span data-ttu-id="330a3-119">Una manera de que la extensión FPHC pueda controlar un evento es presentar al usuario un mensaje para desbloquear un programa mediante el firewall y, a continuación, desbloquear el programa tras la confirmación del usuario.</span><span class="sxs-lookup"><span data-stu-id="330a3-119">One way that the FPHC extension could handle an event is to present the user with a prompt to unblock a program using the firewall and then unblock the program upon user confirmation.</span></span> <span data-ttu-id="330a3-120">Como alternativa, la extensión FPHC podría controlar un evento mediante la notificación al usuario de la razón por la que se bloqueó la aplicación, por ejemplo, si se bloqueó una aplicación porque el Firewall consideró malware.</span><span class="sxs-lookup"><span data-stu-id="330a3-120">Alternatively, the FPHC extension could handle an event by notifying the user of the reason why the application was blocked, such as an application was blocked because it was considered malware by the firewall.</span></span>

## <a name="about-wfp-diagnostics"></a><span data-ttu-id="330a3-121">Acerca del diagnóstico de WFP</span><span class="sxs-lookup"><span data-stu-id="330a3-121">About WFP Diagnostics</span></span>

<span data-ttu-id="330a3-122">Cuando se invoca NDF para diagnosticar un problema de red, se Contacta con las clases auxiliares para determinar la causa del problema.</span><span class="sxs-lookup"><span data-stu-id="330a3-122">When NDF is invoked to diagnose a network issue, helper classes are contacted to determine the cause of the issue.</span></span> <span data-ttu-id="330a3-123">Si una clase auxiliar de nivel superior determina que un error de red puede estar causado por WFP, genera una hipótesis para FPHC basándose en la información disponible.</span><span class="sxs-lookup"><span data-stu-id="330a3-123">If a higher-level helper class determines that a network failure may be caused by WFP, it generates a hypothesis for FPHC based on available information.</span></span> <span data-ttu-id="330a3-124">NDF pasa esta hipótesis, en forma de varios atributos de evento, a FPHC.</span><span class="sxs-lookup"><span data-stu-id="330a3-124">NDF passes this hypothesis, in the form of several event attributes, to FPHC.</span></span> <span data-ttu-id="330a3-125">Estos atributos se describen en detalle en la sección [atributos de evento FPHC](#windows-filtering-platform-extensible-helper-class) a continuación.</span><span class="sxs-lookup"><span data-stu-id="330a3-125">These attributes are described in detail in the [FPHC Event Attributes](#windows-filtering-platform-extensible-helper-class) section below.</span></span>

<span data-ttu-id="330a3-126">Un problema de red puede describirse como un problema de conectividad que afecte a un intento de conexión determinado.</span><span class="sxs-lookup"><span data-stu-id="330a3-126">A network issue can be described as a connectivity problem affecting a particular connection attempt.</span></span> <span data-ttu-id="330a3-127">Por ejemplo, puede que el usuario haya bloqueado accidentalmente una aplicación haciendo clic en **no permitir**.</span><span class="sxs-lookup"><span data-stu-id="330a3-127">For example, the user may have accidentally blocked an application by inadvertently clicking **Don't allow**.</span></span> <span data-ttu-id="330a3-128">A continuación, el Firewall bloqueará la aplicación para que no se enlace a ningún puerto.</span><span class="sxs-lookup"><span data-stu-id="330a3-128">The firewall will then block the application from binding to any port.</span></span> <span data-ttu-id="330a3-129">El usuario, que no sabe por qué se bloquea la aplicación, puede intentar diagnosticar el problema a través de un punto de entrada ofrecido por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="330a3-129">The user, not knowing why the application is blocked, may try to diagnose the issue through an entry point offered by the application.</span></span> <span data-ttu-id="330a3-130">FPHC examinará los registros y, si encuentra una coincidencia, recuperará el identificador de filtro y el ID. de proveedor de ese filtro en particular.</span><span class="sxs-lookup"><span data-stu-id="330a3-130">FPHC will look at the logs, and if it finds a match it will retrieve the filter ID and the provider ID of that particular filter.</span></span> <span data-ttu-id="330a3-131">En este punto, FPHC sabe quién es el propietario de ese filtro y se encargará del proceso de diagnóstico a la clase auxiliar adecuada para realizar un diagnóstico más exhaustivo.</span><span class="sxs-lookup"><span data-stu-id="330a3-131">At this point, FPHC knows who the owner of that filter is, and it will hand over the diagnostic process to the appropriate helper class for further diagnosis.</span></span>

<span data-ttu-id="330a3-132">El evento más reciente de los registros de eventos de WFP para que coincida con los atributos se selecciona como relacionado con el problema de la red.</span><span class="sxs-lookup"><span data-stu-id="330a3-132">The most recent event in the WFP event logs to match the attributes is selected as being relevant to the network issue.</span></span> <span data-ttu-id="330a3-133">Si no se encuentra ningún evento coincidente y la hora en que se produjo el evento se trata en el registro de WFP, FPHC indica a NDF que es correcto.</span><span class="sxs-lookup"><span data-stu-id="330a3-133">If no matching events are found and the time the event happened is covered in the WFP log, FPHC indicates to NDF that it is healthy.</span></span> <span data-ttu-id="330a3-134">Si no se encuentra ningún evento coincidente y los registros de WFP no incluyen la hora en que se produjo el evento, FPHC devuelve un estado indeterminado a NDF.</span><span class="sxs-lookup"><span data-stu-id="330a3-134">If no matching events are found and the WFP logs do not include the time the event occurred, FPHC returns an indeterminate status to NDF.</span></span>

<span data-ttu-id="330a3-135">Si se encuentra un evento coincidente, FPHC usa el identificador de proveedor del filtro que hizo que el evento identificara al proveedor de la regla de seguridad que bloqueó la conectividad.</span><span class="sxs-lookup"><span data-stu-id="330a3-135">If a matching event is found, FPHC uses the provider ID of the filter which caused the event to identify the provider of the security rule that blocked connectivity.</span></span> <span data-ttu-id="330a3-136">A continuación, FPHC comprueba si existe una extensión de clase auxiliar para ese proveedor.</span><span class="sxs-lookup"><span data-stu-id="330a3-136">FPHC then checks whether a helper class extension exists for that provider.</span></span> <span data-ttu-id="330a3-137">Si se encuentra uno, FPHC genera una hipótesis para ese proveedor y, a continuación, NDF invoca la extensión.</span><span class="sxs-lookup"><span data-stu-id="330a3-137">If one is found, FPHC generates a hypothesis for that provider and then NDF invokes the extension.</span></span> <span data-ttu-id="330a3-138">La extensión debe devolver al usuario información útil de diagnóstico y reparación.</span><span class="sxs-lookup"><span data-stu-id="330a3-138">The extension should return helpful diagnostic and repair information to the user.</span></span>

## <a name="helper-class-registration"></a><span data-ttu-id="330a3-139">Registro de clases auxiliares</span><span class="sxs-lookup"><span data-stu-id="330a3-139">Helper Class Registration</span></span>

<span data-ttu-id="330a3-140">Se debe registrar una extensión FPHC como se describe en [registrar las extensiones de clase auxiliares de NDF](registering-ndf-helper-class-extensions.md).</span><span class="sxs-lookup"><span data-stu-id="330a3-140">A FPHC extension must be registered as described in [Registering NDF Helper Class Extensions](registering-ndf-helper-class-extensions.md).</span></span> <span data-ttu-id="330a3-141">Los desarrolladores que implementan una clase auxiliar deben registrar sus extensiones para asegurarse de que NDF llama a la extensión cuando sea necesario.</span><span class="sxs-lookup"><span data-stu-id="330a3-141">Developers implementing a helper class must register their extensions to ensure that the extension is called by NDF when appropriate.</span></span> <span data-ttu-id="330a3-142">El *atributo coincidente que* se describe a continuación debe almacenarse en el registro, en **HKLM \\ System \\ CurrentControlSet \\ control \\ NetDiagFx** \\ *NombreProveedor* \\ **HostDLLs** \\ *helper Class dll* \\ **HelperClasses** \\ *nombre de clase auxiliar* \\ **MatchAttributes**.</span><span class="sxs-lookup"><span data-stu-id="330a3-142">The *matching attribute* described below must be stored in the registry under **HKLM\\System\\CurrentControlSet\\Control\\NetDiagFx**\\*VendorName*\\**HostDLLs**\\*Helper Class DLL*\\**HelperClasses**\\*Helper Class Name*\\**MatchAttributes**.</span></span>

<span data-ttu-id="330a3-143">En la tabla siguiente se muestra el atributo coincidente que se usa para identificar la hipótesis que se va a usar en los diagnósticos en el registro de eventos de WFP.</span><span class="sxs-lookup"><span data-stu-id="330a3-143">The following table shows the matching attribute used to identify the hypothesis to use in diagnostics in the WFP event log.</span></span> 

| <span data-ttu-id="330a3-144">Nombre</span><span class="sxs-lookup"><span data-stu-id="330a3-144">Name</span></span>       | <span data-ttu-id="330a3-145">Tipo</span><span class="sxs-lookup"><span data-stu-id="330a3-145">Type</span></span>    | <span data-ttu-id="330a3-146">Descripción</span><span class="sxs-lookup"><span data-stu-id="330a3-146">Description</span></span>                                                                                                                                                                                                                                                                                                 |
|------------|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="330a3-147">ProviderID</span><span class="sxs-lookup"><span data-stu-id="330a3-147">ProviderID</span></span> | <span data-ttu-id="330a3-148">Registro \_ SZ</span><span class="sxs-lookup"><span data-stu-id="330a3-148">REG\_SZ</span></span> | <span data-ttu-id="330a3-149">GUID de la extensión FPHC.</span><span class="sxs-lookup"><span data-stu-id="330a3-149">The GUID of the FPHC extension.</span></span> <span data-ttu-id="330a3-150">Este valor debe ser el mismo que el GUID del proveedor de WFP.</span><span class="sxs-lookup"><span data-stu-id="330a3-150">This value must be the same as the WFP Provider GUID.</span></span> <br/> <span data-ttu-id="330a3-151">Esta cadena distingue entre mayúsculas y minúsculas.</span><span class="sxs-lookup"><span data-stu-id="330a3-151">This string is case-sensitive.</span></span> <span data-ttu-id="330a3-152">Debe almacenarse en el registro en mayúsculas con llaves y guiones envolventes.</span><span class="sxs-lookup"><span data-stu-id="330a3-152">It should be stored in the registry in upper case with enclosing braces and hyphens.</span></span> <span data-ttu-id="330a3-153">Por ejemplo, {C200E360-38C5-11CE-AE62-08002B2B79EF} es un ProviderID válido.</span><span class="sxs-lookup"><span data-stu-id="330a3-153">For example, {C200E360-38C5-11CE-AE62-08002B2B79EF} is a valid ProviderID.</span></span><br/> |



 

<span data-ttu-id="330a3-154">Cuando el ID. de registro de un filtro de bloqueo coincide con el de una clase auxiliar registrada, FPHC informa a NDF para invocar esa clase auxiliar, con lo que se amplía la capacidad de diagnóstico de FPHC.</span><span class="sxs-lookup"><span data-stu-id="330a3-154">When the ProviderID of a blocking filter matches that of a registered helper class, FPHC informs NDF to invoke that helper class, thus extending the diagnostic capability of FPHC.</span></span>

## <a name="fphc-event-attributes"></a><span data-ttu-id="330a3-155">Atributos de evento FPHC</span><span class="sxs-lookup"><span data-stu-id="330a3-155">FPHC Event Attributes</span></span>

<span data-ttu-id="330a3-156">En la tabla siguiente se enumeran los atributos de evento asociados a cada evento coincidente.</span><span class="sxs-lookup"><span data-stu-id="330a3-156">The following table lists the event attributes associated with each matching event.</span></span> <span data-ttu-id="330a3-157">Cada atributo de evento se almacena en una estructura de [**\_ atributo auxiliar**](/windows/win32/api/ndattrib/ns-ndattrib-helper_attribute) .</span><span class="sxs-lookup"><span data-stu-id="330a3-157">Each event attribute is stored in a [**HELPER\_ATTRIBUTE**](/windows/win32/api/ndattrib/ns-ndattrib-helper_attribute) structure.</span></span> <span data-ttu-id="330a3-158">NDF pasa estos atributos a FPHC cuando se encuentra un evento coincidente.</span><span class="sxs-lookup"><span data-stu-id="330a3-158">These attributes are passed by NDF to FPHC when a matching event is found.</span></span> <span data-ttu-id="330a3-159">A su vez, se pueden pasar a extensiones de FPHC.</span><span class="sxs-lookup"><span data-stu-id="330a3-159">These can in turn be passed to FPHC extensions.</span></span>



| <span data-ttu-id="330a3-160">Atributo</span><span class="sxs-lookup"><span data-stu-id="330a3-160">Attribute</span></span>     | <span data-ttu-id="330a3-161">[**Atributo \_ de**](/windows/win32/api/ndattrib/ne-ndattrib-attribute_type) Valor de tipo</span><span class="sxs-lookup"><span data-stu-id="330a3-161">[**ATTRIBUTE\_TYPE**](/windows/win32/api/ndattrib/ne-ndattrib-attribute_type) value</span></span> | <span data-ttu-id="330a3-162">Descripción</span><span class="sxs-lookup"><span data-stu-id="330a3-162">Description</span></span>                                                                                                                               |
|---------------|-------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="330a3-163">GUID de proveedor</span><span class="sxs-lookup"><span data-stu-id="330a3-163">Provider GUID</span></span> | <span data-ttu-id="330a3-164">EN \_ GUID</span><span class="sxs-lookup"><span data-stu-id="330a3-164">AT\_GUID</span></span>                                        | <span data-ttu-id="330a3-165">GUID del proveedor asociado al filtro.</span><span class="sxs-lookup"><span data-stu-id="330a3-165">The GUID of the provider associated with the filter.</span></span>                                                                                      |
| <span data-ttu-id="330a3-166">Timestamp</span><span class="sxs-lookup"><span data-stu-id="330a3-166">Timestamp</span></span>     | <span data-ttu-id="330a3-167">en \_ cadena de octeto \_</span><span class="sxs-lookup"><span data-stu-id="330a3-167">AT\_OCTET\_STRING</span></span>                               | <span data-ttu-id="330a3-168">Búfer de tipo FILETIME que especifica la hora a la que se produjo el evento.</span><span class="sxs-lookup"><span data-stu-id="330a3-168">A buffer of type FILETIME that specifies the time at which the event occurred.</span></span> <span data-ttu-id="330a3-169">Esta marca de tiempo se puede usar para identificar de forma única un evento.</span><span class="sxs-lookup"><span data-stu-id="330a3-169">This time stamp can be used to uniquely identify an event.</span></span> |
| <span data-ttu-id="330a3-170">ipProtocol</span><span class="sxs-lookup"><span data-stu-id="330a3-170">ipProtocol</span></span>    | <span data-ttu-id="330a3-171">EN \_ UINT32</span><span class="sxs-lookup"><span data-stu-id="330a3-171">AT\_UINT32</span></span>                                      | <span data-ttu-id="330a3-172">Protocolo de capa de transporte, en formato UINT8.</span><span class="sxs-lookup"><span data-stu-id="330a3-172">The transport layer protocol, in UINT8 format.</span></span>                                                                                            |
| <span data-ttu-id="330a3-173">LocalAddr</span><span class="sxs-lookup"><span data-stu-id="330a3-173">LocalAddr</span></span>     | <span data-ttu-id="330a3-174">EN \_ SOCKADDR</span><span class="sxs-lookup"><span data-stu-id="330a3-174">AT\_SOCKADDR</span></span>                                    | <span data-ttu-id="330a3-175">La dirección IP local y el puerto, almacenados en una estructura [**Diag \_ SOCKADDR**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) .</span><span class="sxs-lookup"><span data-stu-id="330a3-175">The local IP address and port, stored in a [**DIAG\_SOCKADDR**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) structure.</span></span>                                             |
| <span data-ttu-id="330a3-176">RemoteAddr</span><span class="sxs-lookup"><span data-stu-id="330a3-176">RemoteAddr</span></span>    | <span data-ttu-id="330a3-177">EN \_ SOCKADDR</span><span class="sxs-lookup"><span data-stu-id="330a3-177">AT\_SOCKADDR</span></span>                                    | <span data-ttu-id="330a3-178">La dirección IP remota y el puerto, almacenados en una estructura [**Diag \_ SOCKADDR**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) .</span><span class="sxs-lookup"><span data-stu-id="330a3-178">The remote IP address and port, stored in a [**DIAG\_SOCKADDR**](/windows/win32/api/ndattrib/ns-ndattrib-diag_sockaddr) structure.</span></span>                                            |
| <span data-ttu-id="330a3-179">userId</span><span class="sxs-lookup"><span data-stu-id="330a3-179">userId</span></span>        | <span data-ttu-id="330a3-180">en \_ cadena de octeto \_</span><span class="sxs-lookup"><span data-stu-id="330a3-180">AT\_OCTET\_STRING</span></span>                               | <span data-ttu-id="330a3-181">Búfer de tipo SID que representa el UserID.</span><span class="sxs-lookup"><span data-stu-id="330a3-181">A buffer of type SID that represents the userid.</span></span> <span data-ttu-id="330a3-182">Si userId es de longitud 0, el SID no está disponible.</span><span class="sxs-lookup"><span data-stu-id="330a3-182">If userId is of length 0, the SID is unavailable.</span></span>                                        |
| <span data-ttu-id="330a3-183">appId</span><span class="sxs-lookup"><span data-stu-id="330a3-183">appId</span></span>         | <span data-ttu-id="330a3-184">EN \_ cadena</span><span class="sxs-lookup"><span data-stu-id="330a3-184">AT\_STRING</span></span>                                      | <span data-ttu-id="330a3-185">Búfer que almacena el identificador de la aplicación recuperado.</span><span class="sxs-lookup"><span data-stu-id="330a3-185">A buffer that stores the retrieved application identifier.</span></span> <span data-ttu-id="330a3-186">Si appId tiene un valor de L "", el identificador de la aplicación no está disponible.</span><span class="sxs-lookup"><span data-stu-id="330a3-186">If appId has a value of L"", the application identifier is unavailable.</span></span>        |



 

## <a name="handling-fphc-events"></a><span data-ttu-id="330a3-187">Controlar eventos FPHC</span><span class="sxs-lookup"><span data-stu-id="330a3-187">Handling FPHC Events</span></span>

<span data-ttu-id="330a3-188">Antes de sugerir información de diagnóstico y reparación para el usuario, una extensión FPHC debe recopilar más datos de los proporcionados por las notificaciones de FPHC.</span><span class="sxs-lookup"><span data-stu-id="330a3-188">Before suggesting diagnostic and repair information to the user, a FPHC extension should gather more data than is provided by the FPHC notifications.</span></span> <span data-ttu-id="330a3-189">Estos datos se pueden adquirir de las [funciones de administración de eventos de WFP](/windows/desktop/FWP/fwp-mgmt-functions).</span><span class="sxs-lookup"><span data-stu-id="330a3-189">This data can be acquired from the [WFP Event Management Functions](/windows/desktop/FWP/fwp-mgmt-functions).</span></span> <span data-ttu-id="330a3-190">Estas funciones se muestran en el ejemplo de [visualización de eventos de red](/windows/desktop/FWP/displaying-net-events) .</span><span class="sxs-lookup"><span data-stu-id="330a3-190">These functions are demonstrated in the [Displaying Net Events](/windows/desktop/FWP/displaying-net-events) sample.</span></span>

<span data-ttu-id="330a3-191">En el SDK se incluye un ejemplo de administración de eventos más detallado.</span><span class="sxs-lookup"><span data-stu-id="330a3-191">A more detailed event management sample is included in the SDK.</span></span> <span data-ttu-id="330a3-192">El código fuente del ejemplo se puede encontrar en la ubicación de instalación del SDK en C: \\ archivos de programa \\ Microsoft SDK \\ Windows \\ <version number> \\ Samples \\ NetDs \\ WFP \\ DiagEvents.</span><span class="sxs-lookup"><span data-stu-id="330a3-192">The source code for the sample can be found in the SDK installation location under C:\\Program Files\\Microsoft SDKs\\Windows\\<version number>\\Samples\\NetDs\\WFP\\DiagEvents.</span></span> <span data-ttu-id="330a3-193">El SDK de Windows Vista está disponible en el [centro de descarga](https://www.microsoft.com/downloads/details.aspx?FamilyID=f26b1aa4-741a-433a-9be5-fa919850bdbf).</span><span class="sxs-lookup"><span data-stu-id="330a3-193">The Windows Vista SDK is available from the [Download Center](https://www.microsoft.com/downloads/details.aspx?FamilyID=f26b1aa4-741a-433a-9be5-fa919850bdbf).</span></span>

## <a name="built-in-fphc-diagnostics"></a><span data-ttu-id="330a3-194">Diagnósticos integrados de FPHC</span><span class="sxs-lookup"><span data-stu-id="330a3-194">Built-in FPHC Diagnostics</span></span>

<span data-ttu-id="330a3-195">En ausencia de una extensión FPHC, FPHC puede diagnosticar los escenarios que se enumeran a continuación.</span><span class="sxs-lookup"><span data-stu-id="330a3-195">In the absence of an FPHC extension, FPHC can diagnose the scenarios listed below.</span></span> <span data-ttu-id="330a3-196">La mayoría de los errores de conectividad diagnosticados por FPHC se producen porque los firewalls bloquean el tráfico.</span><span class="sxs-lookup"><span data-stu-id="330a3-196">Most connectivity failures diagnosed by FPHC occur because firewalls block traffic.</span></span> <span data-ttu-id="330a3-197">Los escenarios de IPsec son menos comunes.</span><span class="sxs-lookup"><span data-stu-id="330a3-197">The IPsec scenarios are less common.</span></span>

<span data-ttu-id="330a3-198">En la tabla siguiente se muestran algunos escenarios que producen errores de conectividad que se pueden diagnosticar mediante FPHC, junto con la descripción y la información de reparación pasada a NDF.</span><span class="sxs-lookup"><span data-stu-id="330a3-198">The following table shows some scenarios causing connectivity failures that can be diagnosed by FPHC, along with the description and repair information passed to NDF.</span></span>



| <span data-ttu-id="330a3-199">Escenario</span><span class="sxs-lookup"><span data-stu-id="330a3-199">Scenario</span></span>                   | <span data-ttu-id="330a3-200">Descripción de mantenimiento bajo</span><span class="sxs-lookup"><span data-stu-id="330a3-200">Low health description</span></span>                                                                                                               | <span data-ttu-id="330a3-201">Información de reparación</span><span class="sxs-lookup"><span data-stu-id="330a3-201">Repair information</span></span>                   |
|----------------------------|--------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------|
| <span data-ttu-id="330a3-202">Eliminación de Firewall</span><span class="sxs-lookup"><span data-stu-id="330a3-202">Firewall drop</span></span>              | <span data-ttu-id="330a3-203">La configuración del firewall en este equipo está bloqueando la conexión.</span><span class="sxs-lookup"><span data-stu-id="330a3-203">The firewall settings on this computer are blocking the connection.</span></span>                                                                  | <span data-ttu-id="330a3-204">Compruebe la configuración del firewall.</span><span class="sxs-lookup"><span data-stu-id="330a3-204">Verify your firewall settings.</span></span>       |
| <span data-ttu-id="330a3-205">Error de modo principal</span><span class="sxs-lookup"><span data-stu-id="330a3-205">Main Mode Failure</span></span>          | <span data-ttu-id="330a3-206">No se puede conectar debido a que una directiva de seguridad IPsec no coincide.</span><span class="sxs-lookup"><span data-stu-id="330a3-206">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="330a3-207">Póngase en contacto con el propietario de la directiva IPsec.</span><span class="sxs-lookup"><span data-stu-id="330a3-207">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="330a3-208">Error de modo rápido</span><span class="sxs-lookup"><span data-stu-id="330a3-208">Quick Mode Failure</span></span>         | <span data-ttu-id="330a3-209">No se puede conectar debido a que una directiva de seguridad IPsec no coincide.</span><span class="sxs-lookup"><span data-stu-id="330a3-209">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="330a3-210">Póngase en contacto con el propietario de la directiva IPsec.</span><span class="sxs-lookup"><span data-stu-id="330a3-210">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="330a3-211">Error de modo de usuario</span><span class="sxs-lookup"><span data-stu-id="330a3-211">User Mode Failure</span></span>          | <span data-ttu-id="330a3-212">No se puede conectar debido a que una directiva de seguridad IPsec no coincide.</span><span class="sxs-lookup"><span data-stu-id="330a3-212">You cannot connect because of an IPsec security policy mismatch.</span></span>                                                                     | <span data-ttu-id="330a3-213">Póngase en contacto con el propietario de la directiva IPsec.</span><span class="sxs-lookup"><span data-stu-id="330a3-213">Contact the IPsec policy owner.</span></span>      |
| <span data-ttu-id="330a3-214">Error de credencial</span><span class="sxs-lookup"><span data-stu-id="330a3-214">Credential Failure</span></span>         | <span data-ttu-id="330a3-215">No se puede conectar porque la entidad de certificación raíz (CA) de este equipo no coincide con la CA raíz del equipo remoto.</span><span class="sxs-lookup"><span data-stu-id="330a3-215">You cannot connect because the root certification authority (CA) on this computer does not match the root CA on the remote computer.</span></span> | <span data-ttu-id="330a3-216">Actualice el certificado raíz de confianza.</span><span class="sxs-lookup"><span data-stu-id="330a3-216">Update the trusted root certificate.</span></span> |
| <span data-ttu-id="330a3-217">Certificado expirado</span><span class="sxs-lookup"><span data-stu-id="330a3-217">Expired Certificate</span></span>        | <span data-ttu-id="330a3-218">Expiró el certificado usado para la autenticación IPsec.</span><span class="sxs-lookup"><span data-stu-id="330a3-218">The certificate used for IPsec authentication has expired.</span></span>                                                                           | <span data-ttu-id="330a3-219">Solicitar un certificado.</span><span class="sxs-lookup"><span data-stu-id="330a3-219">Request a certificate.</span></span>               |
| <span data-ttu-id="330a3-220">Otros errores de certificado</span><span class="sxs-lookup"><span data-stu-id="330a3-220">Other certificate failures</span></span> | <span data-ttu-id="330a3-221">No se encontró un certificado válido para la autenticación IPsec.</span><span class="sxs-lookup"><span data-stu-id="330a3-221">A valid certificate was not found for IPsec authentication.</span></span>                                                                          | <span data-ttu-id="330a3-222">Solicitar un certificado.</span><span class="sxs-lookup"><span data-stu-id="330a3-222">Request a certificate.</span></span>               |
| <span data-ttu-id="330a3-223">Error de Kerberos</span><span class="sxs-lookup"><span data-stu-id="330a3-223">Kerberos failure</span></span>           | <span data-ttu-id="330a3-224">El equipo no forma parte de este dominio.</span><span class="sxs-lookup"><span data-stu-id="330a3-224">The computer is not part of this domain.</span></span>                                                                                             | <span data-ttu-id="330a3-225">Unir este equipo a un dominio.</span><span class="sxs-lookup"><span data-stu-id="330a3-225">Join this computer to a domain.</span></span>      |
| <span data-ttu-id="330a3-226">Clave previamente compartida</span><span class="sxs-lookup"><span data-stu-id="330a3-226">Preshared Key</span></span>              | <span data-ttu-id="330a3-227">Restablezca las claves previamente compartidas.</span><span class="sxs-lookup"><span data-stu-id="330a3-227">Reset the preshared keys.</span></span>                                                                                                            | <span data-ttu-id="330a3-228">Restablezca las claves previamente compartidas.</span><span class="sxs-lookup"><span data-stu-id="330a3-228">Reset the preshared keys.</span></span>            |



 

## <a name="related-topics"></a><span data-ttu-id="330a3-229">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="330a3-229">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="330a3-230">Plataforma de filtrado de Windows</span><span class="sxs-lookup"><span data-stu-id="330a3-230">Windows Filtering Platform</span></span>](/windows/desktop/FWP/windows-filtering-platform-start-page)
</dt> <dt>

[<span data-ttu-id="330a3-231">Diseñar extensiones de clase auxiliar NDF</span><span class="sxs-lookup"><span data-stu-id="330a3-231">Designing NDF Helper Class Extensions</span></span>](designing-ndf-helper-class-extensions.md)
</dt> <dt>

[<span data-ttu-id="330a3-232">Registro de extensiones de clase auxiliar NDF</span><span class="sxs-lookup"><span data-stu-id="330a3-232">Registering NDF Helper Class Extensions</span></span>](registering-ndf-helper-class-extensions.md)
</dt> <dt>

[<span data-ttu-id="330a3-233">Ejemplos de la clase auxiliar NDF</span><span class="sxs-lookup"><span data-stu-id="330a3-233">NDF Helper Class Examples</span></span>](ndf-helper-class-examples.md)
</dt> </dl>

 

