---
description: Seguimiento de COM+
ms.assetid: ad3bdeb5-f303-411a-abfb-ccde3f9a86b9
title: Seguimiento de COM+
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 828cc87b5a24363fd814d37c29e61a3ce204d988
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104496049"
---
# <a name="com-tracking"></a><span data-ttu-id="2cc7d-103">Seguimiento de COM+</span><span class="sxs-lookup"><span data-stu-id="2cc7d-103">COM+ Tracking</span></span>

<span data-ttu-id="2cc7d-104">El servicio de seguimiento de COM+ le permite crear sus propios programas administrativos y de diagnóstico que realizan el seguimiento del estado y el rendimiento de la ejecución de aplicaciones COM+.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-104">The COM+ tracking service enables you to build your own administrative and diagnostic programs that track the status and performance of running COM+ applications.</span></span> <span data-ttu-id="2cc7d-105">El seguimiento de COM+ proporciona información estadística sobre el uso de aplicaciones COM+, así como información de estado, por ejemplo, si una instancia de aplicación de servidor COM+ está en pausa o se ha reciclado.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-105">COM+ tracking provides statistical information about the use of COM+ applications as well as status information, such as whether a COM+ server application instance is paused or has been recycled.</span></span> <span data-ttu-id="2cc7d-106">Las herramientas pueden usar la información de seguimiento en la supervisión de diagnóstico o para fines de presentación.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-106">Tools can use tracking information in diagnostic monitoring or for display purposes.</span></span> <span data-ttu-id="2cc7d-107">Por ejemplo, la herramienta administrativa Servicios de componentes utiliza el seguimiento de COM+ para mostrar el estado de las instancias de la aplicación COM+ en las carpetas aplicaciones COM+ y procesos en ejecución.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-107">For example, the Component Services administrative tool uses COM+ tracking to display the status of COM+ application instances in the COM+ Applications and Running Processes folders.</span></span>

<span data-ttu-id="2cc7d-108">El seguimiento de COM+ calcula y actualiza periódicamente un conjunto de métricas usadas con frecuencia, lo que hace que esta información esté disponible para los programas que la necesiten.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-108">COM+ tracking calculates and periodically updates a set of commonly-used metrics, making this information available to programs that need it.</span></span> <span data-ttu-id="2cc7d-109">Es similar a la instrumentación de COM+ en que ambos servicios recopilan datos automáticamente de las instancias de la aplicación COM+ y hacen que estos datos estén disponibles para los consumidores.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-109">It is similar to COM+ Instrumentation in that both services automatically collect data from COM+ application instances and make this data available to consumers.</span></span> <span data-ttu-id="2cc7d-110">Sin embargo, hay algunas diferencias importantes entre estos servicios, tanto en la funcionalidad proporcionada como en el uso típico.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-110">However, there are some important differences between these services, both in the functionality provided and typical usage.</span></span> <span data-ttu-id="2cc7d-111">En la tabla siguiente se resumen estas diferencias.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-111">The following table summarizes these differences.</span></span>



| <span data-ttu-id="2cc7d-112">Instrumentación de COM+</span><span class="sxs-lookup"><span data-stu-id="2cc7d-112">COM+ Instrumentation</span></span>                                                                                                                                                                                                   | <span data-ttu-id="2cc7d-113">Seguimiento de COM+</span><span class="sxs-lookup"><span data-stu-id="2cc7d-113">COM+ Tracking</span></span>                                                                                                                                                     |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="2cc7d-114">Datos específicos.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-114">Fine-grained data.</span></span> <span data-ttu-id="2cc7d-115">El servicio Instrumental de COM+ notifica a los suscriptores registrados de eventos discretos individuales (por ejemplo, método denominado, objeto destruido) que se producen en una instancia de la aplicación COM+.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-115">The COM+ instrumentation service notifies registered subscribers of individual discrete events (for example, method called, object destroyed) that occur in a COM+ application instance.</span></span><br/> | <span data-ttu-id="2cc7d-116">Datos agregados.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-116">Aggregated data.</span></span> <span data-ttu-id="2cc7d-117">El seguimiento de COM+ calcula y actualiza periódicamente las métricas usadas con frecuencia para el estado y el rendimiento de las instancias de la aplicación COM+.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-117">COM+ tracking calculates and periodically updates commonly-used metrics for the status and performance of COM+ application instances.</span></span><br/> |
| <span data-ttu-id="2cc7d-118">Normalmente, los suscriptores de eventos calculan las métricas por su cuenta mediante el uso de directivas y algoritmos ad hoc.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-118">Event subscribers typically calculate metrics on their own, using ad-hoc algorithms and policies.</span></span><br/>                                                                                                           | <span data-ttu-id="2cc7d-119">El servicio de seguimiento de COM+ calcula automáticamente las métricas.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-119">Metrics are calculated automatically by the COM+ tracking service.</span></span> <span data-ttu-id="2cc7d-120">Todos los consumidores obtienen los mismos datos, sin compatibilidad con las métricas personalizadas.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-120">All consumers get the same data, with no support for custom metrics.</span></span><br/>                |
| <span data-ttu-id="2cc7d-121">Después de registrar una suscripción, el consumidor no recibe ninguna información sobre una instancia de la aplicación COM+ hasta que se produce un evento.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-121">After registering a subscription, the consumer does not receive any information about a COM+ application instance until an event occurs.</span></span><br/>                                                                    | <span data-ttu-id="2cc7d-122">Los datos de seguimiento de todas las instancias de la aplicación COM+ se pueden recuperar en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-122">Tracking data for all COM+ application instances may be retrieved at any time.</span></span><br/>                                                                         |
| <span data-ttu-id="2cc7d-123">Solo admite un mecanismo de suscripción basado en eventos COM+ para los consumidores.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-123">Supports only a COM+ events-based subscription mechanism for consumers.</span></span><br/>                                                                                                                                     | <span data-ttu-id="2cc7d-124">Admite un mecanismo de suscripción basado en eventos COM+ y el sondeo en una interfaz de servidor local COM.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-124">Supports both a COM+ events-based subscription mechanism and polling on a COM local server interface.</span></span><br/>                                                  |
| <span data-ttu-id="2cc7d-125">Ejemplos</span><span class="sxs-lookup"><span data-stu-id="2cc7d-125">Examples</span></span>                                                                                                                                                                                                               |                                                                                                                                                                   |
| <span data-ttu-id="2cc7d-126">Notificaciones cuando se llama a un método o se devuelve.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-126">Notifications when a method is called or returns.</span></span><br/>                                                                                                                                                           | <span data-ttu-id="2cc7d-127">Tiempo medio de respuesta de la llamada, número de llamadas a métodos que se realizaron correctamente o con errores en un período de tiempo reciente, número de objetos actualmente en una llamada al método.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-127">Average call response time, number of method calls that succeeded or failed in a recent time period, number of objects currently in a method call.</span></span><br/>     |
| <span data-ttu-id="2cc7d-128">Notificaciones cuando se agrega o se obtiene un objeto del grupo de objetos.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-128">Notifications when an object is added to or obtained from the object pool.</span></span><br/>                                                                                                                                  | <span data-ttu-id="2cc7d-129">Número de objetos del grupo, número total de objetos.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-129">Number of objects in the pool, total number of objects.</span></span><br/>                                                                                                |
| <span data-ttu-id="2cc7d-130">Notificaciones cuando se inicia, se pausa o recicla una aplicación de servidor COM+.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-130">Notifications when a COM+ server application is started, paused, or recycled.</span></span><br/>                                                                                                                               | <span data-ttu-id="2cc7d-131">Estado del proceso de la aplicación de servidor COM+ (por ejemplo, si está pausado o reciclado).</span><span class="sxs-lookup"><span data-stu-id="2cc7d-131">Status of the COM+ server application process (for example, whether it is paused or recycled).</span></span><br/>                                                         |
| <span data-ttu-id="2cc7d-132">Notificaciones de eventos de inicio, preparación, anulación y confirmación de transacciones.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-132">Notifications of transaction start, prepare, abort, and commit events.</span></span><br/>                                                                                                                                      | <span data-ttu-id="2cc7d-133">No equivalente.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-133">No equivalent.</span></span><br/>                                                                                                                                         |
| <span data-ttu-id="2cc7d-134">Notificaciones de intentos de autenticación de nivel de llamada de método correctos y erróneos.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-134">Notifications of successful and failed method call level authentication attempts.</span></span><br/>                                                                                                                           | <span data-ttu-id="2cc7d-135">No equivalente.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-135">No equivalent.</span></span><br/>                                                                                                                                         |



 

<span data-ttu-id="2cc7d-136">Aunque el seguimiento de COM+ es más limitado en términos de ámbito de datos y flexibilidad para calcular métricas, las métricas que proporciona deben ser suficientes para una amplia variedad de programas administrativos y de diagnóstico.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-136">Although COM+ tracking is more limited in terms of data scope and flexibility for calculating metrics, the metrics it provides should be sufficient for a wide variety of administrative and diagnostic programs.</span></span> <span data-ttu-id="2cc7d-137">Con el seguimiento de COM+, siempre que sea posible, puede simplificar el diseño de estos programas.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-137">Using COM+ tracking, when possible, can simplify the design of these programs.</span></span> <span data-ttu-id="2cc7d-138">Además, el seguimiento de COM+ en sistemas de producción puede tener un impacto significativo en el rendimiento, por lo que es más adecuado para las herramientas de supervisión en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-138">Additionally, using COM+ tracking in production systems can have a significantly lower performance impact, making it more appropriate for real-time monitoring tools.</span></span>

## <a name="how-com-tracking-collects-data"></a><span data-ttu-id="2cc7d-139">Cómo el seguimiento de COM+ recopila datos</span><span class="sxs-lookup"><span data-stu-id="2cc7d-139">How COM+ Tracking Collects Data</span></span>

<span data-ttu-id="2cc7d-140">Cuando se inicia un proceso de aplicación de servidor COM+, COM+ registra el proceso con el *servidor de seguimiento*, un componente de la aplicación del sistema.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-140">When a COM+ server application process is started, COM+ registers the process with the *tracker server*, a component of the system application.</span></span> <span data-ttu-id="2cc7d-141">Los componentes de las aplicaciones de biblioteca COM+ y los contextos de servicios sin componentes (SWC) también admiten el seguimiento.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-141">Components in COM+ library applications and services without components (SWC) contexts also support tracking.</span></span> <span data-ttu-id="2cc7d-142">Cuando se crea un componente de biblioteca o un contexto SWC en un proceso, COM+ registra el proceso con el servidor de seguimiento si aún no se ha registrado.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-142">When a library component or SWC context is created in a process, COM+ registers the process with the tracker server if it has not been registered already.</span></span>

<span data-ttu-id="2cc7d-143">COM+ actualiza las estadísticas de un proceso sometido a seguimiento cuando se producen determinados eventos en el proceso, como la creación de un objeto o la finalización de una llamada al método.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-143">COM+ updates statistics for a tracked process when certain events occur in the process, such as the creation of an object or the completion of a method call.</span></span> <span data-ttu-id="2cc7d-144">Los datos actualizados se envían periódicamente al servidor de seguimiento, momento en el que pasa a estar disponible para los consumidores.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-144">Updated data is periodically submitted to the tracker server, at which point it becomes available to consumers.</span></span> <span data-ttu-id="2cc7d-145">El servidor de Tracker también es responsable de calcular algunas de las métricas usadas por las características de supervisión de bloqueos y reciclaje de aplicaciones COM+.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-145">The tracker server is also responsible for calculating some of the metrics used by the COM+ application recycling and hang monitoring features.</span></span> <span data-ttu-id="2cc7d-146">Estos datos también están disponibles para los consumidores.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-146">This data is also available to consumers.</span></span>

<span data-ttu-id="2cc7d-147">Los datos de seguimiento se organizan según el proceso que generó los datos.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-147">Tracking data is organized according to the process that generated the data.</span></span> <span data-ttu-id="2cc7d-148">Los datos en el nivel de aplicaciones o componentes COM+ individuales del proceso también están disponibles para los consumidores que necesitan esta información.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-148">Data at the level of individual COM+ applications or components in the process is also available for consumers that need this information.</span></span>

## <a name="events-versus-polling"></a><span data-ttu-id="2cc7d-149">Eventos frente a sondeo</span><span class="sxs-lookup"><span data-stu-id="2cc7d-149">Events versus Polling</span></span>

<span data-ttu-id="2cc7d-150">El seguimiento de COM+ admite dos mecanismos para que un consumidor Obtenga datos de seguimiento del servidor de seguimiento, un mecanismo de suscripción basado en eventos COM+ y una interfaz de servidor local COM.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-150">COM+ tracking supports two mechanisms for a consumer to obtain tracking data from the tracker server, a COM+ events-based subscription mechanism and a COM local server interface.</span></span>

<span data-ttu-id="2cc7d-151">Los programas que se deben notificar periódicamente con datos de seguimiento actualizados pueden registrar una suscripción para la interfaz de eventos [**IComTrackingInfoEvents**](/windows/desktop/api/ComSvcs/nn-comsvcs-icomtrackinginfoevents) .</span><span class="sxs-lookup"><span data-stu-id="2cc7d-151">Programs that need to be notified periodically with updated tracking data can register a subscription for the [**IComTrackingInfoEvents**](/windows/desktop/api/ComSvcs/nn-comsvcs-icomtrackinginfoevents) event interface.</span></span> <span data-ttu-id="2cc7d-152">Aproximadamente cada tres segundos, el servidor de seguimiento llama al método [**IComTrackingInfoEvents:: OnNewTrackingInfo**](/windows/desktop/api/ComSvcs/nf-comsvcs-icomtrackinginfoevents-onnewtrackinginfo) de cada suscriptor y envía los datos de seguimiento más recientes en forma de un objeto de colección.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-152">Roughly every three seconds, the tracker server calls each subscriber's [**IComTrackingInfoEvents::OnNewTrackingInfo**](/windows/desktop/api/ComSvcs/nf-comsvcs-icomtrackinginfoevents-onnewtrackinginfo) method, sending the most recent tracking data in the form of a collection object.</span></span> <span data-ttu-id="2cc7d-153">Este objeto implementa la interfaz [**IComTrackingInfoCollection**](/windows/desktop/api/ComSvcs/nn-comsvcs-icomtrackinginfocollection) y los suscriptores pueden navegar por esta colección para buscar los datos que le interesan.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-153">This object implements the [**IComTrackingInfoCollection**](/windows/desktop/api/ComSvcs/nn-comsvcs-icomtrackinginfocollection) interface, and subscribers can navigate this collection to find the data they are interested in.</span></span>

<span data-ttu-id="2cc7d-154">Por varias razones, puede que tenga más sentido que un programa sondee los datos del servidor de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-154">For various reasons, it might make more sense for a program to poll tracker server for data.</span></span> <span data-ttu-id="2cc7d-155">Por ejemplo, una herramienta de supervisión puede necesitar actualizaciones con mucha menos frecuencia que un programa que muestra el estado en una interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-155">For example, a monitoring tool may need updates much less frequently than a program that displays status in a user interface.</span></span> <span data-ttu-id="2cc7d-156">Además, un programa puede utilizar solo una pequeña parte de los datos de seguimiento disponibles para el sistema (por ejemplo, una herramienta solo puede supervisar el rendimiento de las instancias de una sola aplicación COM+).</span><span class="sxs-lookup"><span data-stu-id="2cc7d-156">Also, a program may use only a small portion of the tracking data available for the system (for example, a tool might only monitor the performance of instances of a single COM+ application).</span></span> <span data-ttu-id="2cc7d-157">El modelo de suscripción envía a cada suscriptor los datos de seguimiento de todas las aplicaciones COM+ en cada notificación, y es responsabilidad del suscriptor encontrar los datos que desea.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-157">The subscription model sends each subscriber the tracking data for all COM+ applications in each notification, and it is the responsibility of the subscriber to find the data it wants.</span></span> <span data-ttu-id="2cc7d-158">Por último, los eventos COM+ son un mecanismo de notificación de eventos de mejor esfuerzo.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-158">Finally, COM+ events is a best-effort event notification mechanism.</span></span> <span data-ttu-id="2cc7d-159">No se proporcionan servicios de entrega de mensajes confiables y no hay ninguna manera de que un suscriptor detecte que el servidor de seguimiento no pudo enviarle una notificación.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-159">Reliable message delivery services are not provided, and there is no way for a subscriber to detect that the tracker server failed to send it a notification.</span></span>

<span data-ttu-id="2cc7d-160">Un programa que necesite un mayor control sobre su recuperación de datos de seguimiento puede usar la interfaz [**IGetAppTrackerData**](/windows/desktop/api/ComSvcs/nn-comsvcs-igetapptrackerdata) del servidor de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="2cc7d-160">A program that needs greater control over its retrieval of tracking data can use the [**IGetAppTrackerData**](/windows/desktop/api/ComSvcs/nn-comsvcs-igetapptrackerdata) interface of the tracker server.</span></span>

 

 




