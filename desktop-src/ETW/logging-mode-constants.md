---
description: Las siguientes constantes representan los posibles modos de registro para una sesión de seguimiento de eventos.
ms.assetid: d12aaecb-776a-4476-9ba4-16af30fde9c2
title: Constantes de modo de registro
ms.topic: article
ms.date: 06/03/2020
ms.openlocfilehash: dd2a5e004b233637df26455c7eb69f45f4f41883
ms.sourcegitcommit: 9b5faa61c38b2d0c432b7f2dbee8c127b0e28a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/19/2021
ms.locfileid: "122482871"
---
# <a name="logging-mode-constants"></a>Constantes de modo de registro

Las siguientes constantes representan los posibles modos de registro para una sesión de seguimiento de eventos.

Las constantes se usan en los miembros **LogFileMode** de las estructuras [**EVENT TRACE \_ \_ LOGFILE**](/windows/win32/api/evntrace/ns-evntrace-event_trace_logfilea), [**EVENT TRACE \_ \_ PROPERTIES**](/windows/win32/api/evntrace/ns-evntrace-event_trace_properties) y [**TRACE \_ LOGFILE \_ HEADER.**](/windows/win32/api/evntrace/ns-evntrace-trace_logfile_header) Estas constantes se definen en el *archivo de encabezado Evntrace.h.*




| Mode | Descripción | 
|------|-------------|
| <strong>EVENT_TRACE_FILE_MODE_NONE</strong> (0x00000000) | Igual que <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong> sin el tamaño de archivo máximo especificado. | 
| <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong> (0x00000001) | Escribe eventos en un archivo de registro secuencialmente; se detiene cuando el archivo alcanza su tamaño máximo. No use con <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong> o <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong> (0x00000002) | Escribe eventos en un archivo de registro. Una vez que el archivo alcanza el tamaño máximo, los eventos más antiguos se reemplazan por los eventos entrantes. Tenga en cuenta que el contenido del archivo de registro circular puede aparecer fuera de servicio en equipos con varios procesadores.<br /> No use con <strong>EVENT_TRACE_FILE_MODE_APPEND</strong>, <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>o <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong>.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_APPEND</strong> (0x00000004) | Anexa eventos a un archivo de registro secuencial existente. El archivo se creará si no existe. Use solo si especifica la hora <a href="wnode-header.md"><strong>del sistema para</strong></a> la resolución del reloj; de lo contrario, <a href="/windows/win32/api/evntrace/nf-evntrace-processtrace"><strong>ProcessTrace</strong></a> devolverá eventos con marcas de tiempo incorrectas. Al usar <strong>EVENT_TRACE_FILE_MODE_APPEND</strong>, los valores de <strong>BufferSize</strong>, <strong>NumberOfProcessors</strong>y <strong>ClockType</strong> deben proporcionarse explícitamente y deben ser los mismos tanto en el registrador como en el archivo que se va a anexar.<br /> No use con <strong>EVENT_TRACE_REAL_TIME_MODE</strong>, <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong>, <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>o <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong>.<br /><strong>Windows 2000:</strong> Este valor no se admite.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong> (0x00000008) | Cambia automáticamente a un nuevo archivo de registro cuando el archivo alcanza el tamaño máximo. El <strong>miembro MaximumFileSize</strong> <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>de EVENT_TRACE_PROPERTIES</strong></a> debe establecerse. El nombre de archivo especificado debe ser una cadena con formato (por ejemplo, la cadena contiene %d, como c:\test%d.etl). Cada vez que se crea un nuevo archivo, se incrementa un contador y se usa su valor, se actualiza la cadena con formato y se usa la cadena resultante como nombre de archivo.<br /> Esta opción no se permite para las sesiones de seguimiento de eventos privados y no debe usarse para las sesiones del registrador de kernel de NT.<br /> No use con <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong>, <strong>EVENT_TRACE_FILE_MODE_APPEND</strong> o <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong>.<br /><strong>Windows 2000:</strong> Este valor no se admite.<br /> | 
| <strong>EVENT_TRACE_FILE_MODE_PREALLOCATE</strong>(0x00000020) | Reserva <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES. MaximumFileSize</strong></a> bytes de espacio en disco para el archivo de registro de antemano. El archivo ocupa todo el espacio durante el registro, tanto para los archivos de registro circulares como secuenciales. Cuando se detiene la sesión, el archivo de registro se reduce al tamaño necesario. Debe establecer <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>EVENT_TRACE_PROPERTIES. MaximumFileSize</strong></a>.<br /> No se puede usar el modo para sesiones de seguimiento de eventos privadas.<br /><strong>Windows 2000:</strong> Este valor no se admite.<br /> | 
| <strong>EVENT_TRACE_NONSTOPPABLE_MODE</strong>(0x00000040) | No se puede detener la sesión de registro. Este modo solo es compatible con Autologger. Esta opción se admite en Windows Vista y versiones posteriores.<br />. | 
| <strong>EVENT_TRACE_SECURE_MODE</strong> (0X00000080) | Restringe quién puede registrar eventos en la sesión a aquellos con <a href="/windows/desktop/api/Evntcons/nf-evntcons-eventaccesscontrol"><strong>TRACELOG_LOG_EVENT</strong></a> permiso. Esta opción se admite en Windows Vista y versiones posteriores.<br /> | 
| <strong>EVENT_TRACE_REAL_TIME_MODE</strong> (0x00000100) | Entrega los eventos a los consumidores en tiempo real. Los eventos se entregan cuando se vacían los búferes, no en el momento en que el proveedor escribe el evento. No debe habilitar el modo en tiempo real si no hay consumidores que consuman los eventos porque las llamadas a los eventos de registro finalmente producirán un error cuando los búferes se llenan. Antes de Windows Vista, si no se consumían los eventos, se descartaron los eventos. No especifique más de un consumidor en tiempo real en un proceso en Windows XP o Windows Server 2003. En su lugar, haga que un subproceso consuma eventos y distribuya los eventos a otros.<br /><strong>Antes de Windows Vista:</strong> No debe usar el modo en tiempo real porque la tasa de eventos admitida es mucho menor que la lectura desde el archivo de registro (es posible que se descartan los eventos). Además, no se garantiza el orden de eventos en equipos con varios procesadores. El modo en tiempo real es más adecuado para eventos de tipo de notificación con poco tráfico.<br /><br /> Puede combinar este modo con otros modos de archivo de registro; sin embargo, no use este modo con EVENT_TRACE_PRIVATE_LOGGER_MODE. Tenga en cuenta que si combina este modo con otros modos de archivo de registro, los búferes se vaciarán una vez cada segundo, lo que dará lugar a que los búferes parcialmente rellenos se escriban en el archivo de registro. Por ejemplo, si usa búferes de 64 000 y la tasa de registro es de 1 evento cada segundo, el servicio escribirá 64 000/segundo en el archivo de registro.<br /> | 
| <strong>EVENT_TRACE_DELAY_OPEN_FILE_MODE</strong>(0x00000200) | Este modo se usa para retrasar la apertura del archivo de registro hasta que se produzca un evento. <br /><blockquote><strong>Nota:</strong><br />En Windows Vista o versiones posteriores, este modo no es aplicable no debe usarse.</blockquote><br /> | 
| <strong>EVENT_TRACE_BUFFERING_MODE</strong> (0x00000400) | Este modo escribe eventos en un búfer de memoria circular. Los eventos escritos más allá del tamaño total del búfer expulsa los eventos más antiguos que quedan en el búfer. El tamaño de este búfer de memoria es el producto <strong>de MinimumBuffers</strong> y <strong>BufferSize</strong> <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>(consulte EVENT_TRACE_PROPERTIES</strong></a>). Como consecuencia de esta fórmula, cualquier búfer que <strong>use EVENT_TRACE_BUFFERING_MODE</strong> omitirá el <strong>valor MaximumBuffers.</strong><br /> Los eventos no se escriben en un archivo de registro ni se entregan en tiempo real, y ETW no vacía los búferes. Para obtener una instantánea del búfer, llame a la <a href="/windows/win32/api/evntrace/nf-evntrace-flushtracea"><strong>función FlushTrace.</strong></a><br /> Este modo es especialmente útil para depurar controladores de dispositivo junto con la capacidad de ver el contenido de los búferes en memoria con la extensión del depurador del kernel de <a href="/windows-hardware/drivers/devtest/trace-session">WMITrace.</a><br /> No use con <strong>EVENT_TRACE_FILE_MODE_SEQUENTIAL</strong>, <strong>EVENT_TRACE_FILE_MODE_CIRCULAR</strong>, <strong>EVENT_TRACE_FILE_MODE_APPEND</strong>, <strong>EVENT_TRACE_FILE_MODE_NEWFILE</strong>o <strong>EVENT_TRACE_REAL_TIME_MODE</strong>.<br /> | 
| <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> (0x00000800) | Crea una sesión de seguimiento de eventos en modo de usuario que se ejecuta en el mismo proceso que su proveedor de seguimiento de eventos. La memoria de los búferes procede de la memoria del proceso. Los procesos que no requieren datos del kernel pueden eliminar la sobrecarga asociada a las transiciones en modo kernel mediante una sesión de seguimiento de eventos privada.<br /> Si el proveedor está registrado por varios procesos, ETW anexa el identificador de proceso al nombre del archivo de registro para crear un nombre de archivo de registro único. Por ejemplo, si el controlador especifica los nombres de archivo de registro como c:\mylogs\myprivatelog.etl, ETW crea el archivo de registro como c:\mylogs\myprivatelog.etl_nnnn, donde nnnn es el identificador del proceso. El identificador de proceso no se anexa al primer proceso que registra el proveedor, sino que solo se anexa a los procesos posteriores que registran el proveedor.<br /> Las sesiones de seguimiento de eventos privados tienen las siguientes limitaciones:<br /><ul><li>Una sesión privada puede registrar eventos solo para los subprocesos del proceso en el que se está ejecutando.</li><li>Puede haber hasta ocho sesiones privadas por proceso.</li><li>Las sesiones privadas no se pueden usar con la entrega en tiempo real.</li><li>Los eventos generados por una sesión privada no incluyen el tiempo de ejecución para el modo kernel frente a las instrucciones en modo de usuario, ni detalles de nivel de subproceso del tiempo de CPU utilizado.</li></ul>Ahora se pueden pasar filtros de identificador de proceso y filtros de nombre ejecutable a las API de control de sesión cuando se inician registradores privados de todo el sistema. Para obtener los mejores resultados en escenarios entre procesos, se deben pasar los mismos filtros a todas las operaciones de control durante la sesión, incluidas las llamadas habilitables o habilitables del proveedor. Tenga en cuenta que los filtros tienen el mismo formato que los usados <a href="/windows/win32/api/evntrace/nf-evntrace-enabletraceex2"><strong>por EnableTraceEx2.</strong></a> <br /> Puede usar este modo junto con el <strong>modo EVENT_TRACE_PRIVATE_IN_PROC</strong> usuario.<br /><strong>Antes de Windows 10, versión 1703:</strong> Solo LocalSystem, el administrador y los usuarios del grupo de administradores que se ejecutan en un proceso con privilegios elevados pueden crear una sesión privada. Si incluye la marca <strong>EVENT_TRACE_PRIVATE_IN_PROC,</strong> cualquier usuario puede crear una sesión privada en proceso. Además, en versiones anteriores de Windows, solo puede haber una sesión privada por proceso (a menos que también se especifique el modo EVENT_TRACE_PRIVATE_IN_PROC, en cuyo caso puede crear hasta tres sesiones privadas en proceso). <br /><strong>Antes de Windows Vista:</strong> Los usuarios del grupo Usuarios del registro de rendimiento también podrían crear una sesión privada.<br /><br /> No use con EVENT_TRACE_REAL_TIME_MODE.<br /><strong>Antes de Windows 7 y Windows Server 2008 R2:</strong> No use con EVENT_TRACE_FILE_MODE_NEWFILE.<br /> | 
| <strong>EVENT_TRACE_ADD_HEADER_MODE</strong>(0x00001000) | Esta opción agrega un encabezado al archivo de registro.<br /><blockquote><strong>Nota:</strong><br />En Windows Vista o versiones posteriores, este modo no es aplicable no debe usarse.</blockquote><br /> | 
| <strong>EVENT_TRACE_USE_KBYTES_FOR_SIZE</strong>(0x00002000) | Use kilobytes como unidad de medida para especificar el tamaño de un archivo. La unidad de medida predeterminada es megabytes. Este modo se aplica al valor del Registro <strong>MaxFileSize</strong> para una sesión <a href="configuring-and-starting-an-autologger-session.md">de AutoLogger</a> y al <strong>miembro MaximumFileSize</strong> <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_properties"><strong>de EVENT_TRACE_PROPERTIES</strong></a>. Esta opción se admite en Windows Vista y versiones posteriores.<br /> | 
| <strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong>(0x00004000) | Usa números de secuencia que son únicos en las sesiones de seguimiento de eventos. Este modo solo se aplica a los eventos registrados mediante <a href="/windows/win32/api/evntrace/nf-evntrace-tracemessage"><strong>la función TraceMessage.</strong></a> Para obtener más información, vea <strong>TraceMessage</strong> para obtener detalles de uso.<br /><strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong> y <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> son mutuamente excluyentes.<br /><strong>Windows 2000:</strong> Este valor no se admite.<br /> | 
| <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> (0x00008000) | Usa números de secuencia que son únicos solo para una sesión de seguimiento de eventos individual. Este modo solo se aplica a los eventos registrados mediante <a href="/windows/win32/api/evntrace/nf-evntrace-tracemessage"><strong>la función TraceMessage.</strong></a> Para obtener más información, vea <strong>TraceMessage</strong> para obtener detalles de uso.<br /><strong>EVENT_TRACE_USE_GLOBAL_SEQUENCE</strong> y <strong>EVENT_TRACE_USE_LOCAL_SEQUENCE</strong> son mutuamente excluyentes.<br /><strong>Windows 2000:</strong> Este valor no se admite.<br /> | 
| <strong>EVENT_TRACE_RELOG_MODE</strong> (0x00010000) | Registra el evento sin incluir <a href="/windows/win32/api/evntrace/ns-evntrace-event_trace_header"><strong>EVENT_TRACE_HEADER</strong></a>.<blockquote><strong>Nota:</strong><br />No se debe usar este modo. Está reservado para uso interno.</blockquote><br /><strong>Windows 2000:</strong> Este valor no se admite.<br /> | 
| <strong>EVENT_TRACE_PRIVATE_IN_PROC</strong> (0x00020000) | Use junto con el <strong>modo EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> para iniciar una sesión privada. Este modo exige que solo el proceso que registró el GUID del proveedor pueda iniciar la sesión del registrador con ese GUID.<br /> Puede crear hasta tres sesiones privadas en proceso por proceso.<br /> Esta opción se admite en Windows Vista y versiones posteriores.<br /> | 
| <strong>EVENT_TRACE_MODE_RESERVED</strong>(0x00100000) | Esta opción se usa para señalar el seguimiento de montón y sección crítica. Esta opción se admite en Windows Vista y versiones posteriores.<br /> | 
| <strong>EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong>(0x00400000) | Esta opción detiene el registro en el apagado híbrido. Si no <strong>se EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong> <strong>o EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN,</strong> ETW elegirá un valor predeterminado en función de si el autor de la llamada viene de la sesión 0 o no. Esta opción se admite en Windows 8 y Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN</strong>(0x00800000) | Esta opción continúa el registro en el apagado híbrido. Si no <strong>se EVENT_TRACE_STOP_ON_HYBRID_SHUTDOWN</strong> <strong>o EVENT_TRACE_PERSIST_ON_HYBRID_SHUTDOWN,</strong> ETW elegirá un valor predeterminado en función de si el autor de la llamada viene de la sesión 0 o no. Esta opción se admite en Windows 8 y Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_USE_PAGED_MEMORY</strong> (0x01000000) | Usa memoria paginada. Esta configuración se recomienda para que los eventos no usen la memoria sin página. Los búferes no con página usan memoria sin página para el espacio del búfer. Dado que los búferes no paginados nunca se paginan, una sesión de registro funciona bien. El uso de búferes paginables consume menos recursos.<br /> Los proveedores de modo kernel y los registradores del sistema no pueden registrar eventos en sesiones que especifican este modo de registro.<br /> Este modo se omite si <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong> está establecido.<br /> No puede usar este modo con el registrador de kernel nt.<br /><strong>Windows 2000:</strong> Este valor no se admite.<br /> | 
| <strong>EVENT_TRACE_SYSTEM_LOGGER_MODE</strong>(0x02000000) | Esta opción recibirá eventos de SystemTraceProvider. Si el <a href="/windows/win32/api/evntrace/nf-evntrace-starttracea"><strong>parámetro StartTrace</strong></a><em>Properties</em> <strong>LogFileMode</strong> incluye esta marca, el registrador será un registrador del sistema. Esta opción se admite en Windows 8 y Windows Server 2012. <br /> | 
| <strong>EVENT_TRACE_INDEPENDENT_SESSION_MODE</strong>(0x08000000) | Indica que una sesión de registro no debe verse afectada por errores <a href="/windows/desktop/api/Evntprov/nf-evntprov-eventwrite"><strong>de EventWrite</strong></a> en otras sesiones. Sin esta marca, si no se puede publicar un evento en una de las sesiones en las que está habilitado un proveedor, el evento no se publicará en ninguna de las sesiones. Cuando se establece esta marca, un error al escribir un evento en una sesión no hará que la <strong>función EventWrite</strong> devuelva un código de error en otras sesiones. <br /> No use con <strong>EVENT_TRACE_PRIVATE_LOGGER_MODE</strong>. <br /> Esta opción se admite en Windows 8.1, Windows Server 2012 R2 y versiones posteriores.<br /> | 
| <strong>EVENT_TRACE_NO_PER_PROCESSOR_BUFFERING</strong> (0x10000000) | Escribe los eventos que se registraron en diferentes procesadores en un búfer común. El uso de este modo puede eliminar el problema de que los eventos aparezcan fuera de servicio cuando los eventos se publican en distintos procesadores mediante la hora del sistema. Este modo también puede eliminar el problema con los registros circulares que aparecen para quitar eventos en varios equipos de procesador.<br /> Si no usa este modo y usa la hora del sistema, los eventos pueden aparecer sin orden en varios equipos procesadores. Esto se debe a que los búferes ETW están asociados a un procesador en lugar de a un subproceso. Como resultado, si se cambia un subproceso de una CPU a otra, el búfer asociado a la última CPU se puede vaciar en el disco antes que el asociado a la CPU anterior.<br /> Si espera un gran volumen de eventos (por ejemplo, más de 1000 eventos por segundo), no debe usar este modo.<br /> Tenga en cuenta que el número de procesador no se incluye con el evento .<br /> Esta opción se admite en Windows 7, Windows Server 2008 R2 y versiones posteriores.<br /> | 
| <strong>EVENT_TRACE_ADDTO_TRIAGE_DUMP</strong>(0x80000000) | Esta opción agrega búferes ETW a los volcados de referencia. Esta opción se admite en Windows 8 y Windows Server 2012. <br /> | 

