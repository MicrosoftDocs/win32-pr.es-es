---
description: Cuando una aplicación tiene privilegios de propietario para una sesión de comunicaciones, la aplicación puede optar por entregar la propiedad a otra aplicación.
ms.assetid: d6d188c9-9cbd-45af-93f0-b78850374919
title: Entregas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 343815e35f1fc331c57c4aa2d9d311697cab7022
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105677512"
---
# <a name="handoffs"></a><span data-ttu-id="f5f08-103">Entregas</span><span class="sxs-lookup"><span data-stu-id="f5f08-103">Handoffs</span></span>

<span data-ttu-id="f5f08-104">Cuando una aplicación tiene [privilegios](privilege-ovr.md) de propietario para una sesión de comunicaciones, la aplicación puede optar por entregar la propiedad a otra aplicación.</span><span class="sxs-lookup"><span data-stu-id="f5f08-104">When an application has owner [privilege](privilege-ovr.md) for a communications session, the application may choose to hand off ownership to another application.</span></span> <span data-ttu-id="f5f08-105">La operación de entrega se usa normalmente para permitir que se cambie el tipo de medio de la llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-105">The handoff operation is normally used to allow the call's media type to be changed.</span></span> <span data-ttu-id="f5f08-106">La aplicación de prioridad más alta para el nuevo tipo de medio debe tomar y controlar la llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-106">The highest-priority application for the new media type should take and handle the call.</span></span> <span data-ttu-id="f5f08-107">El cambio de tipo de medio normalmente se produce por uno de los siguientes motivos.</span><span class="sxs-lookup"><span data-stu-id="f5f08-107">Media type changing usually occurs for one of the following reasons.</span></span>

<span data-ttu-id="f5f08-108">**Comando de usuario:** A través de una interfaz de usuario o a través de mensajes de ventana, la aplicación aprende que el usuario local desea cambiar el tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="f5f08-108">**User command:** Through a user interface or through window messages, the application learns that the local user wants to change media type.</span></span> <span data-ttu-id="f5f08-109">Por ejemplo, el usuario ha indicado la nueva aplicación de destino (que todavía no es un propietario) para obtener una llamada de voz existente para la transmisión de datos.</span><span class="sxs-lookup"><span data-stu-id="f5f08-109">For example, the user has told the new target application (which is not yet an owner) to obtain an existing voice call for transmitting data.</span></span> <span data-ttu-id="f5f08-110">La aplicación de destino debe tomar el control de la llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-110">The target application must now take control of the call.</span></span> <span data-ttu-id="f5f08-111">En este caso, el propietario actual observa el aumento del número de propietarios y, a continuación, renuncia a su control de la llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-111">In this case, the current owner notices the number of owners increase, and then relinquishes its control of the call.</span></span> <span data-ttu-id="f5f08-112">Como alternativa, el usuario podría indicar al propietario actual de la llamada que lo entregue a una aplicación que pueda controlar el nuevo tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="f5f08-112">Alternatively, the user could instruct the current owner of the call to hand it off to an application that can handle the new media type.</span></span>

<span data-ttu-id="f5f08-113">**Cambio de tipo de medio:** El proveedor de servicios puede detectar un cambio de tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="f5f08-113">**Media type change:** The service provider can detect a media type change.</span></span> <span data-ttu-id="f5f08-114">Por ejemplo, la aplicación local está reproduciendo un mensaje de voz grabado para el autor de la llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-114">For example, the local application is playing a recorded voice message to the caller.</span></span> <span data-ttu-id="f5f08-115">Durante este mensaje, el autor de la llamada decide de forma espontánea de transmitir un tono de llamada de fax, y la aplicación local puede responder en consecuencia cambiando el tipo de medio a fax y, si es necesario, entregando la llamada a una aplicación de fax.</span><span class="sxs-lookup"><span data-stu-id="f5f08-115">During this message, the caller spontaneously decides to transmit a fax calling tone, and the local application can respond accordingly by changing the media type to fax and, if necessary, handing the call off to a fax application.</span></span> <span data-ttu-id="f5f08-116">Otra forma de hacerlo es que una aplicación de supervisión habilite la supervisión de tipos de medios y, cuando se detecte el tipo de medio en el que está interesado en una llamada, puede solicitar la propiedad de la llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-116">Another way this can work is for a monitoring application to enable media type monitoring, and, when the media type in which it is interested is detected on a call, it can request ownership of the call.</span></span> <span data-ttu-id="f5f08-117">Este mecanismo hace que sea innecesario que cada aplicación supervise cada llamada para cada tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="f5f08-117">This mechanism makes it unnecessary for every application to monitor every call for every media type.</span></span>

<span data-ttu-id="f5f08-118">**Comando de entidad remota:** La parte remota puede indicar interactivamente un cambio en los tipos de medios durante una llamada existente, por ejemplo, si la aplicación local supervisa la entrada de DTMF por parte del llamador remoto.</span><span class="sxs-lookup"><span data-stu-id="f5f08-118">**Remote party command:** The remote party can interactively indicate a change in media types during an existing call, such as if the local application is monitoring DTMF input by the remote caller.</span></span> <span data-ttu-id="f5f08-119">A través de esta supervisión, el autor de la llamada indica, por ejemplo, que se va a enviar un fax.</span><span class="sxs-lookup"><span data-stu-id="f5f08-119">Through this monitoring, the caller indicates, for example, that a fax is about to be sent.</span></span> <span data-ttu-id="f5f08-120">Otras formas en las que el autor de la llamada puede controlar las aplicaciones locales con comandos recibidos en otras conexiones de datos y a través de mensajes de información de usuario de usuario ISDN.</span><span class="sxs-lookup"><span data-stu-id="f5f08-120">Other ways the caller can control local applications are with commands received on other data connections and through ISDN user-user information messages.</span></span>

<span data-ttu-id="f5f08-121">Una entrega de llamada tendrá uno de estos resultados:</span><span class="sxs-lookup"><span data-stu-id="f5f08-121">A call handoff will have one of these outcomes:</span></span>

-   <span data-ttu-id="f5f08-122">La llamada se proporciona a otra aplicación (SUCCEss).</span><span class="sxs-lookup"><span data-stu-id="f5f08-122">The call is given to another application (SUCCESS).</span></span>
-   <span data-ttu-id="f5f08-123">La aplicación de entrega es el destino (TARGETSELF).</span><span class="sxs-lookup"><span data-stu-id="f5f08-123">The handing-off application is itself the target (TARGETSELF).</span></span>
-   <span data-ttu-id="f5f08-124">Se produce un error en la entrega (TARGETNOTFOUND).</span><span class="sxs-lookup"><span data-stu-id="f5f08-124">The handoff fails (TARGETNOTFOUND).</span></span>

<span data-ttu-id="f5f08-125">Si la aplicación que recibe la llamada entregada ya tiene un identificador de llamada a la llamada, se utiliza este identificador de llamada anterior.</span><span class="sxs-lookup"><span data-stu-id="f5f08-125">If the application that is receiving the handed-off call already has a call handle to the call, this old call handle is used.</span></span> <span data-ttu-id="f5f08-126">De lo contrario, se crea un nuevo identificador de llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-126">Otherwise, a new call handle is created.</span></span> <span data-ttu-id="f5f08-127">En cualquier caso, la aplicación finaliza con privilegios de propietario en la llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-127">In either case, the application ends up with owner privileges to the call.</span></span> <span data-ttu-id="f5f08-128">Siempre que la aplicación de entrega no sea la misma que la aplicación de destino, se informa al destino sobre la entrega en un mensaje de estado de sesión como si estuviera recibiendo una nueva llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-128">Whenever the handing-off application is not the same as the target application, the target is informed about the handoff in a session state message as if it were receiving a new call.</span></span>

<span data-ttu-id="f5f08-129">Si se indica a la aplicación propietaria actual que cambie los tipos de medios, lo hace mediante la entrega de la llamada a una aplicación que se usa para el tipo de medio de destino.</span><span class="sxs-lookup"><span data-stu-id="f5f08-129">If the current owner application is told to change media types, it does so by handing off the call to an application used for the target media type.</span></span> <span data-ttu-id="f5f08-130">Los dos tipos de llamadas entregas se describen en [entregas dirigido](#directed-handoffs) y el [tipo de medio entregas](#media-type-handoffs).</span><span class="sxs-lookup"><span data-stu-id="f5f08-130">The two types of call handoffs are described in [Directed Handoffs](#directed-handoffs) and [Media type Handoffs](#media-type-handoffs).</span></span>

<span data-ttu-id="f5f08-131">No todos los proveedores de servicios admiten el uso de esta operación.</span><span class="sxs-lookup"><span data-stu-id="f5f08-131">Not all service providers support use of this operation.</span></span>

<span data-ttu-id="f5f08-132">**TAPI 2. x:** Vea [**lineHandoff**](/windows/win32/api/tapi/nf-tapi-linehandoff), con *lpszFileName* establecido en el nombre de aplicación para una entrega directa o *dwMediaMode* establecido en un tipo de medio para una entrega indirecta.</span><span class="sxs-lookup"><span data-stu-id="f5f08-132">**TAPI 2.x:** See [**lineHandoff**](/windows/win32/api/tapi/nf-tapi-linehandoff), with *lpszFileName* set to the application name for a direct handoff or *dwMediaMode* set to one media type for an indirect handoff.</span></span>

<span data-ttu-id="f5f08-133">**TAPI 3. x:** Vea [**ITBasicCallControl:: HandoffDirect**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-handoffdirect), [**ITBasicCallControl:: HandoffIndirect**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-handoffindirect).</span><span class="sxs-lookup"><span data-stu-id="f5f08-133">**TAPI 3.x:** See [**ITBasicCallControl::HandoffDirect**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-handoffdirect), [**ITBasicCallControl::HandoffIndirect**](/windows/desktop/api/tapi3if/nf-tapi3if-itbasiccallcontrol-handoffindirect).</span></span>

## <a name="directed-handoffs"></a><span data-ttu-id="f5f08-134">Entregas dirigido</span><span class="sxs-lookup"><span data-stu-id="f5f08-134">Directed Handoffs</span></span>

<span data-ttu-id="f5f08-135">Una *entrega dirigida* tiene lugar cuando la aplicación de destino se conoce por nombre en la aplicación original.</span><span class="sxs-lookup"><span data-stu-id="f5f08-135">A *directed handoff* takes place when the target application is known by name to the original application.</span></span> <span data-ttu-id="f5f08-136">Esta situación se produciría, por ejemplo, entre un conjunto de aplicaciones escritas por el mismo proveedor.</span><span class="sxs-lookup"><span data-stu-id="f5f08-136">This situation would occur, for example, among a set of applications written by the same vendor.</span></span> <span data-ttu-id="f5f08-137">Normalmente, el usuario puede configurar el control de entregas dirigidos.</span><span class="sxs-lookup"><span data-stu-id="f5f08-137">The user can usually configure control of directed handoffs.</span></span> <span data-ttu-id="f5f08-138">Con este tipo de entrega, se proporciona la llamada a la aplicación especificada si ha abierto la línea en la que existe la llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-138">With such a handoff, the call is given to the specified application if it has opened the line on which the call exists.</span></span> <span data-ttu-id="f5f08-139">Se omite el tipo de medio especificado en el momento en que se ha abierto la línea de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f5f08-139">The media type specified at the time the application opened the line is ignored.</span></span> <span data-ttu-id="f5f08-140">Un ejemplo común es una llamada de voz seguida de una transmisión de fax en la misma llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-140">One common example is a voice call followed by a fax transmission in the same call.</span></span> <span data-ttu-id="f5f08-141">La entrega dirigida normalmente la usan las aplicaciones del mismo desarrollador que están vinculadas de otras maneras.</span><span class="sxs-lookup"><span data-stu-id="f5f08-141">Directed handoff would most often be used by applications from the same developer that are linked in other ways as well.</span></span>

<span data-ttu-id="f5f08-142">La entrega dirigida también puede usarse en versiones futuras como parte del proceso de arbitración de varias aplicaciones que esperan llamadas entrantes del mismo tipo de medio, con la selección de la aplicación para controlar la llamada basada en el vínculo de datos o en la detección de protocolo de nivel superior en lugar de un tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="f5f08-142">Directed handoff may also be used in future versions as part of the process of arbitrating multiple applications waiting for incoming calls of the same media type, with the selection of the application to handle the call being based on data-link or higher-level protocol detection rather than media type.</span></span> <span data-ttu-id="f5f08-143">Un ejemplo de su uso sería una línea de módem de datos de entrada con aplicaciones como la adquisición remota, el tablón de anuncios, el acceso remoto a la red y el acceso a correo electrónico remoto todo en espera de llamadas simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="f5f08-143">An example of its use would be an incoming data modem line with applications such as remote takeover, bulletin board, remote network access, and remote e-mail access all waiting for calls simultaneously.</span></span>

## <a name="media-type-handoffs"></a><span data-ttu-id="f5f08-144">Tipo de medio entregas</span><span class="sxs-lookup"><span data-stu-id="f5f08-144">Media Type Handoffs</span></span>

<span data-ttu-id="f5f08-145">La *entrega* de un tipo de medio tiene lugar cuando hay un nuevo tipo de medio de destino, normalmente cuando la aplicación propietaria determina que el tipo de medio necesario para la llamada no está presente o está a punto de cambiar.</span><span class="sxs-lookup"><span data-stu-id="f5f08-145">A *media type handoff* takes place when there is a new, targeted media type, usually when the owning application determines that the media type needed for the call is not present or is about to change.</span></span>

<span data-ttu-id="f5f08-146">El proceso para una entrega dependiente del medio puede ser un proceso de sondeo si el tipo de medio bit desconocido es on.</span><span class="sxs-lookup"><span data-stu-id="f5f08-146">The process for a media-dependent handoff can be a probing process if the media type UNKNOWN bit is on.</span></span> <span data-ttu-id="f5f08-147">Es responsabilidad de la aplicación propietaria recorrer los tipos de medios para encontrar la aplicación de prioridad más alta.</span><span class="sxs-lookup"><span data-stu-id="f5f08-147">It is the responsibility of the owning application to cycle through media types to find the highest-priority application.</span></span> <span data-ttu-id="f5f08-148">TAPI realiza este ciclo solo en la llamada de entrada inicial para buscar el primer propietario.</span><span class="sxs-lookup"><span data-stu-id="f5f08-148">TAPI does this cycling only on the initial incoming call to find the first owner.</span></span> <span data-ttu-id="f5f08-149">No realiza esto para una operación de entrega.</span><span class="sxs-lookup"><span data-stu-id="f5f08-149">It does not do this for a handoff operation.</span></span> <span data-ttu-id="f5f08-150">De lo contrario, una entrega es prácticamente la misma que para la asignación inicial de una llamada a una aplicación.</span><span class="sxs-lookup"><span data-stu-id="f5f08-150">Otherwise, a handoff is virtually the same as for the initial assignment of a call to an application.</span></span> <span data-ttu-id="f5f08-151">La diferencia es el hecho de que solo se puede establecer un tipo de medio para una entrega indirecta (tipo de medio).</span><span class="sxs-lookup"><span data-stu-id="f5f08-151">The difference is the fact that only one media type can be set for an indirect (media type) handoff.</span></span>

<span data-ttu-id="f5f08-152">Dado que solo se puede especificar un bit de tipo de medio, se proporciona la llamada a la aplicación de prioridad más alta para ese tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="f5f08-152">Because only a single media type bit can be specified, the call is given to the highest priority application for that media type.</span></span> <span data-ttu-id="f5f08-153">Sin embargo, es posible que se tenga en cuenta más de un tipo de medio para la entrega.</span><span class="sxs-lookup"><span data-stu-id="f5f08-153">However, it is possible that more than one media type is to be considered for the handoff.</span></span> <span data-ttu-id="f5f08-154">En este caso, la aplicación de entrega debe especificar la prioridad más alta de los posibles tipos de medios como parámetro.</span><span class="sxs-lookup"><span data-stu-id="f5f08-154">In this case, the handing-off application should specify the highest priority of the possible media types as a parameter.</span></span>

<span data-ttu-id="f5f08-155">Si una aplicación especifica el bit desconocido al realizar una entrega de tipo multimedia y se produce un error en la entrega, significa que una aplicación desconocida capaz de realizar la determinación del tipo de medio no se está ejecutando actualmente.</span><span class="sxs-lookup"><span data-stu-id="f5f08-155">If an application specifies the UNKNOWN bit when performing a media-type handoff and the handoff fails, this means that an unknown application capable of performing media type determination is not currently running.</span></span> <span data-ttu-id="f5f08-156">A continuación, la aplicación que se entrega se intenta entregar la llamada a la aplicación de prioridad más alta registrada para el siguiente tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="f5f08-156">The application that is handing off should then try to hand the call off to the highest-priority application registered for the next-higher media type.</span></span>

<span data-ttu-id="f5f08-157">La aplicación receptora ahora es responsable de la llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-157">The receiving application is now responsible for the call.</span></span> <span data-ttu-id="f5f08-158">Ahora sondea el tipo de medio real de la llamada.</span><span class="sxs-lookup"><span data-stu-id="f5f08-158">It now probes for the call's actual media type.</span></span> <span data-ttu-id="f5f08-159">Si la aplicación puede controlar el tipo de medio de la llamada, debe asegurarse de que es la aplicación de prioridad más alta registrada para ese tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="f5f08-159">If the application can handle the call's media type, it must ensure that it is the highest-priority application registered for that media type.</span></span> <span data-ttu-id="f5f08-160">Si es así, mantiene la llamada y la procesa normalmente.</span><span class="sxs-lookup"><span data-stu-id="f5f08-160">If so, it keeps the call and processes it normally.</span></span> <span data-ttu-id="f5f08-161">Si no es así, entrega la llamada a otra aplicación registrada para ese tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="f5f08-161">If not, it hands the call off to another application registered for that media type.</span></span>

<span data-ttu-id="f5f08-162">Sin embargo, si se produce un error en el sondeo de ese tipo de archivo multimedia, la aplicación sondea de nuevo, intentando las posibilidades de modo multimedia restantes.</span><span class="sxs-lookup"><span data-stu-id="f5f08-162">If, however, the probe for that media type fails, the application probes again, attempting the remaining media-mode possibilities.</span></span> <span data-ttu-id="f5f08-163">Primero debe desactivar el bit actual del tipo de medio y, a continuación, intentar otra entrega con un tipo diferente.</span><span class="sxs-lookup"><span data-stu-id="f5f08-163">It must first turn off the current media type bit, then try another handoff with a different type.</span></span>

<span data-ttu-id="f5f08-164">Este proceso de sondeo y entrega continuará, y los demás tipos de medios se eliminarán uno por uno.</span><span class="sxs-lookup"><span data-stu-id="f5f08-164">This process of probing and handing off continues, and the remaining media types are eliminated one by one.</span></span> <span data-ttu-id="f5f08-165">A lo largo del proceso, una de las aplicaciones puede ver que el tipo de medio que controla está en la llamada y la entrega se realiza correctamente.</span><span class="sxs-lookup"><span data-stu-id="f5f08-165">Along the way, one of the applications may see that the media type it handles is on the call, and the handoff is successful.</span></span>

<span data-ttu-id="f5f08-166">A continuación, la aplicación debe establecer el tipo de medio correcto y borrar todos los demás bits de tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="f5f08-166">The application should then set the correct media type and clear all other media-type bits.</span></span> <span data-ttu-id="f5f08-167">Esto informa a otras aplicaciones interesadas del tipo de medio correcto.</span><span class="sxs-lookup"><span data-stu-id="f5f08-167">This informs other interested applications of the correct media type.</span></span> <span data-ttu-id="f5f08-168">Estas otras aplicaciones reciben un mensaje de notificación de eventos que indica que el tipo de medio de la llamada ha cambiado.</span><span class="sxs-lookup"><span data-stu-id="f5f08-168">These other applications receive an event notification message stating that the call's media type has changed.</span></span>

 

 
