---
title: Acerca de la administración de puertos y servidores RAS
description: Las funciones de administración del servidor RAS obtienen información acerca de un servidor RAS especificado y sus puertos. Estas funciones también se usan para terminar una conexión en un puerto de servidor RAS especificado.
ms.assetid: eedac23e-d716-451e-b08b-594398656bb5
keywords:
- Administración de RAS RRAS, administración de servidores y puertos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4cb9d3cc520efa6bbb492e8d9e967d423548f96a
ms.sourcegitcommit: cba7f424a292fd7f3a8518947b9466439b455419
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/23/2019
ms.locfileid: "104487195"
---
# <a name="about-ras-server-and-port-administration"></a><span data-ttu-id="1e670-105">Acerca de la administración de puertos y servidores RAS</span><span class="sxs-lookup"><span data-stu-id="1e670-105">About RAS Server and Port Administration</span></span>

<span data-ttu-id="1e670-106">Las funciones de administración del servidor RAS obtienen información acerca de un servidor RAS especificado y sus puertos.</span><span class="sxs-lookup"><span data-stu-id="1e670-106">The RAS server administration functions get information about a specified RAS server and its ports.</span></span> <span data-ttu-id="1e670-107">Estas funciones también se usan para terminar una conexión en un puerto de servidor RAS especificado.</span><span class="sxs-lookup"><span data-stu-id="1e670-107">These functions are also used to terminate a connection on a specified RAS server port.</span></span>

<span data-ttu-id="1e670-108">La función [**MprAdminServerGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminservergetinfo) devuelve una estructura de [**MPR \_ Server \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_server_0) que contiene información sobre la configuración de un servidor RAS.</span><span class="sxs-lookup"><span data-stu-id="1e670-108">The [**MprAdminServerGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminservergetinfo) function returns a [**MPR\_SERVER\_0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_server_0) structure that contains information about the configuration of a RAS server.</span></span> <span data-ttu-id="1e670-109">La información devuelta incluye el número de puertos disponibles actualmente para las conexiones, el número de puertos actualmente en uso y el número de versión del servidor.</span><span class="sxs-lookup"><span data-stu-id="1e670-109">The returned information includes the number of ports currently available for connections, the number of ports currently in use, and the server version number.</span></span>

<span data-ttu-id="1e670-110">La función [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) recupera una matriz de estructuras [**del \_ Puerto \_ 0 de Ras**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) .</span><span class="sxs-lookup"><span data-stu-id="1e670-110">The [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) function retrieves an array of [**RAS\_PORT\_0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) structures.</span></span> <span data-ttu-id="1e670-111">Cada estructura contiene información de uno de los puertos configurados en un servidor RAS.</span><span class="sxs-lookup"><span data-stu-id="1e670-111">Each structure contains information for one of the ports configured on a RAS server.</span></span> <span data-ttu-id="1e670-112">La información de cada puerto incluye:</span><span class="sxs-lookup"><span data-stu-id="1e670-112">The information for each port includes:</span></span>

-   <span data-ttu-id="1e670-113">El nombre del puerto</span><span class="sxs-lookup"><span data-stu-id="1e670-113">The name of the port</span></span>
-   <span data-ttu-id="1e670-114">Información sobre el dispositivo conectado al puerto</span><span class="sxs-lookup"><span data-stu-id="1e670-114">Information about the device attached to the port</span></span>
-   <span data-ttu-id="1e670-115">Si el servidor RAS asociado con el puerto es un servidor Windows NT/Windows 2000</span><span class="sxs-lookup"><span data-stu-id="1e670-115">Whether the RAS server associated with the port is a Windows NT/Windows 2000 Server</span></span>
-   <span data-ttu-id="1e670-116">Si el puerto está en uso y, si es así, información sobre la conexión</span><span class="sxs-lookup"><span data-stu-id="1e670-116">Whether the port is currently in use and, if it is, information about the connection</span></span>

<span data-ttu-id="1e670-117">Para obtener los puertos que usa una conexión específica, pase [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) un identificador a esa conexión en el parámetro *hConnection* .</span><span class="sxs-lookup"><span data-stu-id="1e670-117">To obtain the ports in use by a specific connection, pass [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) a handle to that connection in the *hConnection* parameter.</span></span> <span data-ttu-id="1e670-118">Para obtener un identificador de una conexión, utilice la función [**MprAdminConnectionEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionenum) .</span><span class="sxs-lookup"><span data-stu-id="1e670-118">To obtain a handle to a connection, use the [**MprAdminConnectionEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminconnectionenum) function.</span></span> <span data-ttu-id="1e670-119">Como alternativa, si ha implementado un [archivo dll de administración de Ras](ras-administration-dll.md), las funciones [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) y [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) reciben un identificador para cada nueva conexión en el momento en que se establece la conexión.</span><span class="sxs-lookup"><span data-stu-id="1e670-119">Alternatively, if you have implemented a [RAS Administration DLL](ras-administration-dll.md), the [**MprAdminAcceptNewConnection**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection) and [**MprAdminAcceptNewConnection2**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminacceptnewconnection2) functions receive a handle to each new connection at the time the connection is established.</span></span>

<span data-ttu-id="1e670-120">Puede llamar a la función [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) para obtener información adicional acerca de un puerto específico en un servidor RAS.</span><span class="sxs-lookup"><span data-stu-id="1e670-120">You can call the [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) function to get additional information about a specified port on a RAS server.</span></span> <span data-ttu-id="1e670-121">Esta función devuelve una estructura de [**\_ Puerto \_ 1 ras**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_1) que contiene una estructura del [**Puerto de Ras \_ \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) e información adicional sobre el estado actual del puerto.</span><span class="sxs-lookup"><span data-stu-id="1e670-121">This function returns a [**RAS\_PORT\_1**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_1) structure that contains a [**RAS\_PORT\_0**](/windows/desktop/api/Mprapi/ns-mprapi-ras_port_0) structure and additional information about the current state of the port.</span></span> <span data-ttu-id="1e670-122">La función [**RasAdminPortGetInfo**](rasadminportgetinfo.md) también devuelve una matriz de estructuras de [**\_ parámetros de Ras**](ras-parameters-str.md) que describen los valores de las claves específicas del medio asociadas al puerto.</span><span class="sxs-lookup"><span data-stu-id="1e670-122">The [**RasAdminPortGetInfo**](rasadminportgetinfo.md) function also returns an array of [**RAS\_PARAMETERS**](ras-parameters-str.md) structures that describe the values of any media-specific keys associated with the port.</span></span> <span data-ttu-id="1e670-123">Una estructura de **\_ parámetros de Ras** usa un valor de la enumeración de [**\_ \_ formato params ras**](ras-params-format-str.md) para indicar el formato del valor de cada clave específica del medio.</span><span class="sxs-lookup"><span data-stu-id="1e670-123">A **RAS\_PARAMETERS** structure uses a value from the [**RAS\_PARAMS\_FORMAT**](ras-params-format-str.md) enumeration to indicate the format of the value for each media-specific key.</span></span>

<span data-ttu-id="1e670-124">La función [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) también devuelve una estructura de [**\_ \_ estadísticas de Puerto ras**](ras-port-statistics-str.md) que contiene varios contadores de estadísticas para la conexión actual, si hay alguno, en el puerto.</span><span class="sxs-lookup"><span data-stu-id="1e670-124">The [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) function also returns a [**RAS\_PORT\_STATISTICS**](ras-port-statistics-str.md) structure that contains various statistic counters for the current connection, if any, on the port.</span></span> <span data-ttu-id="1e670-125">En el caso de un puerto que forma parte de una conexión multivínculo, **MprAdminPortGetInfo** devuelve estadísticas para el puerto individual y las Estadísticas acumulativas para todos los puertos implicados en la conexión.</span><span class="sxs-lookup"><span data-stu-id="1e670-125">For a port that is part of a multilink connection, **MprAdminPortGetInfo** returns statistics for the individual port and cumulative statistics for all ports involved in the connection.</span></span> <span data-ttu-id="1e670-126">Puede usar la función [**MprAdminPortClearStats**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportclearstats) para restablecer los contadores de estadísticas para el puerto.</span><span class="sxs-lookup"><span data-stu-id="1e670-126">You can use the [**MprAdminPortClearStats**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportclearstats) function to reset the statistic counters for the port.</span></span> <span data-ttu-id="1e670-127">La función [**MprAdminPortDisconnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportdisconnect) desconecta un puerto que está en uso.</span><span class="sxs-lookup"><span data-stu-id="1e670-127">The [**MprAdminPortDisconnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportdisconnect) function disconnects a port that is in use.</span></span>

<span data-ttu-id="1e670-128">Use la función [**MprAdminBufferFree**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminbufferfree) para liberar memoria asignada por las funciones [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) y [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) .</span><span class="sxs-lookup"><span data-stu-id="1e670-128">Use the [**MprAdminBufferFree**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminbufferfree) function to free memory allocated by the [**MprAdminPortEnum**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportenum) and [**MprAdminPortGetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminportgetinfo) functions.</span></span> <span data-ttu-id="1e670-129">Utilice la función [**MprAdminGetErrorString**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingeterrorstring) para obtener una cadena que describe un código de error de Ras devuelto por una de las funciones de administración del servidor RAS (RasAdmin).</span><span class="sxs-lookup"><span data-stu-id="1e670-129">Use the [**MprAdminGetErrorString**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmingeterrorstring) function to get a string that describes a RAS error code returned by one of the RAS server administration (RasAdmin) functions.</span></span>

 

 




