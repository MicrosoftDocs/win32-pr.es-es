---
description: Los usuarios y las aplicaciones con privilegios administrativos pueden recuperar y modificar la información de la lista de origen de la red, la dirección URL y el medio para Windows Installer Aplicaciones y revisiones del sistema.
ms.assetid: e8c66bad-f594-4926-b3b4-c8b245dcfa83
title: Administrar orígenes de instalación
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d7fc45253af20ae5f9792ee3a5ec7dd318c80295
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105678401"
---
# <a name="managing-installation-sources"></a><span data-ttu-id="3fc74-103">Administrar orígenes de instalación</span><span class="sxs-lookup"><span data-stu-id="3fc74-103">Managing Installation Sources</span></span>

<span data-ttu-id="3fc74-104">Los usuarios y las aplicaciones con privilegios administrativos pueden recuperar y modificar la información de la lista de origen de la red, la dirección URL y el medio para Windows Installer Aplicaciones y revisiones del sistema.</span><span class="sxs-lookup"><span data-stu-id="3fc74-104">Users and applications with administrative privileges can retrieve and modify network, URL, and media source list information for Windows Installer applications and patches on the system.</span></span>

<span data-ttu-id="3fc74-105">**Windows Installer 2,0:** No compatible.</span><span class="sxs-lookup"><span data-stu-id="3fc74-105">**Windows Installer 2.0:** Not supported.</span></span> <span data-ttu-id="3fc74-106">Los administradores no pueden leer, reordenar o reemplazar entradas en la lista de origen y no pueden modificar ni recuperar las propiedades de la lista de origen.</span><span class="sxs-lookup"><span data-stu-id="3fc74-106">Administrators cannot read, reorder, or replace entries in the source list and cannot modify or retrieve source list properties.</span></span> <span data-ttu-id="3fc74-107">Es posible administrar los orígenes de red, pero no los orígenes de la dirección URL o los medios.</span><span class="sxs-lookup"><span data-stu-id="3fc74-107">It is possible to manage Network sources, but not URL or Media sources.</span></span> <span data-ttu-id="3fc74-108">Los administradores solo pueden administrar listas de origen para aplicaciones por equipo o aplicaciones instaladas por usuario para el usuario actual.</span><span class="sxs-lookup"><span data-stu-id="3fc74-108">Administrators can only manage source lists for per-machine applications or applications installed as per-user for the current user.</span></span> <span data-ttu-id="3fc74-109">Esto impide que los administradores con versiones anteriores a Windows Installer versión 3,0 de administren la información de la lista de origen de todos los usuarios del sistema.</span><span class="sxs-lookup"><span data-stu-id="3fc74-109">This prevents administrators using versions earlier than Windows Installer version 3.0 from managing source list information for all users in the system.</span></span>

<span data-ttu-id="3fc74-110">**Windows Installer 3,0 y versiones posteriores:** Los usuarios y las aplicaciones que tienen privilegios de administrador pueden recuperar y modificar la información de la lista de origen de Windows Installer Aplicaciones y revisiones instaladas en el sistema para todos los usuarios.</span><span class="sxs-lookup"><span data-stu-id="3fc74-110">**Windows Installer 3.0 and later:** Users and applications that have administrator privileges can retrieve and modify source list information for Windows Installer applications and patches installed on the system for all users.</span></span> <span data-ttu-id="3fc74-111">Las funciones de lista de origen se pueden usar para administrar las listas de origen y las propiedades de la lista de origen de los orígenes de red, URL y multimedia.</span><span class="sxs-lookup"><span data-stu-id="3fc74-111">The source list functions can be used to manage source lists and source list properties for network, URL and media sources.</span></span> <span data-ttu-id="3fc74-112">El instalador puede reordenar las listas de origen desde un proceso externo.</span><span class="sxs-lookup"><span data-stu-id="3fc74-112">The installer can reorder source lists from an external process.</span></span>

<span data-ttu-id="3fc74-113">Los usuarios y las aplicaciones que tienen privilegios administrativos pueden leer y modificar los siguientes tipos de información de lista de origen:</span><span class="sxs-lookup"><span data-stu-id="3fc74-113">Users and applications that have administrative privileges can read and modify the following types of source list information:</span></span>

-   <span data-ttu-id="3fc74-114">Listas de origen para aplicaciones y revisiones instaladas para todos los usuarios del sistema.</span><span class="sxs-lookup"><span data-stu-id="3fc74-114">Source lists for applications and patches installed for all users on the system.</span></span>
-   <span data-ttu-id="3fc74-115">Listas de origen para los orígenes de revisiones que se encuentran aparte de los orígenes de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3fc74-115">Source lists for patch sources that exist apart from the application sources.</span></span>
-   <span data-ttu-id="3fc74-116">Listas de origen para orígenes de direcciones URL y multimedia que existen aparte de los orígenes de red.</span><span class="sxs-lookup"><span data-stu-id="3fc74-116">Source lists for URL and media sources that exist apart from network sources.</span></span>
-   <span data-ttu-id="3fc74-117">Propiedades de la lista de origen como [**MEDIAPACKAGEPATH**](mediapackagepath.md), [**DiskPrompt**](diskprompt.md), **LastUsedSource**, **LastUsedType** y **packagename**.</span><span class="sxs-lookup"><span data-stu-id="3fc74-117">Source list properties such as [**MEDIAPACKAGEPATH**](mediapackagepath.md), [**DiskPrompt**](diskprompt.md), **LastUsedSource**, **LastUsedType**, and **PackageName**.</span></span>

<span data-ttu-id="3fc74-118">Las funciones de listas de origen pueden limitar el ámbito de las listas de origen que se encuentran al especificar el contexto de instalación y el contexto de usuario.</span><span class="sxs-lookup"><span data-stu-id="3fc74-118">The source lists functions can limit the scope of the source lists found by specifying the installation context and user context.</span></span> <span data-ttu-id="3fc74-119">Hay tres contextos de instalación posibles: por usuario (no administrado), por equipo y por usuario administrado.</span><span class="sxs-lookup"><span data-stu-id="3fc74-119">There are three possible installation contexts: per-user (unmanaged), per-machine, and per-user managed.</span></span> <span data-ttu-id="3fc74-120">El contexto de usuario puede ser un usuario determinado o todos los usuarios del sistema.</span><span class="sxs-lookup"><span data-stu-id="3fc74-120">The user context can be a particular user or all users on the system.</span></span>

<span data-ttu-id="3fc74-121">Los usuarios que no son administradores no pueden modificar la lista de origen de una instancia de una aplicación o revisión que existe en el contexto por usuario (administrado o no administrado) de otro usuario.</span><span class="sxs-lookup"><span data-stu-id="3fc74-121">Non-administrators cannot modify the source list of an instance of an application or patch that exists under another user's per-user (managed or unmanaged) context.</span></span> <span data-ttu-id="3fc74-122">Los usuarios que no son administradores pueden modificar las listas de origen de una instancia de una aplicación o revisión instalada en los contextos siguientes:</span><span class="sxs-lookup"><span data-stu-id="3fc74-122">Non-administrators can modify the source lists of an instance of an application or patch installed under the following contexts:</span></span>

-   <span data-ttu-id="3fc74-123">Su propio contexto por usuario (no administrado).</span><span class="sxs-lookup"><span data-stu-id="3fc74-123">Their own per-user(unmanaged) context.</span></span>
-   <span data-ttu-id="3fc74-124">El contexto de la máquina, pero solo si las directivas [DisableBrowse](disablebrowse.md), [AllowLockdownBrowse](allowlockdownbrowse.md)y [AlwaysInstallElevated](alwaysinstallelevated.md) le permiten buscar una aplicación o un origen de revisión.</span><span class="sxs-lookup"><span data-stu-id="3fc74-124">The machine context, but only if the [DisableBrowse](disablebrowse.md), [AllowLockdownBrowse](allowlockdownbrowse.md), and [AlwaysInstallElevated](alwaysinstallelevated.md) policies allows them to browse for an application or patch source.</span></span>
-   <span data-ttu-id="3fc74-125">Su propio contexto administrado por usuario, pero solo si las directivas [DisableBrowse](disablebrowse.md), [AllowLockdownBrowse](allowlockdownbrowse.md)y [AlwaysInstallElevated](alwaysinstallelevated.md) le permiten buscar una aplicación o un origen de revisión.</span><span class="sxs-lookup"><span data-stu-id="3fc74-125">Their own per-user managed context, but only if the [DisableBrowse](disablebrowse.md), [AllowLockdownBrowse](allowlockdownbrowse.md), and [AlwaysInstallElevated](alwaysinstallelevated.md) policies allows them to browse for an application or patch source.</span></span>

<span data-ttu-id="3fc74-126">Los administradores pueden modificar cualquier lista de origen que un usuario no administrador pueda modificar.</span><span class="sxs-lookup"><span data-stu-id="3fc74-126">Administrators can modify any source list that a non-administrator can modify.</span></span> <span data-ttu-id="3fc74-127">Además, los administradores y las aplicaciones que tienen privilegios administrativos pueden modificar las listas de origen de una aplicación o revisión instalada en los contextos siguientes:</span><span class="sxs-lookup"><span data-stu-id="3fc74-127">In addition, administrators and applications that have administrative privileges can modify the source lists of an application or patch installed under the following contexts:</span></span>

-   <span data-ttu-id="3fc74-128">Contexto por máquina.</span><span class="sxs-lookup"><span data-stu-id="3fc74-128">Per-machine context.</span></span>
-   <span data-ttu-id="3fc74-129">Sus propios usuarios (no administrados) o su propio contexto administrado por usuario.</span><span class="sxs-lookup"><span data-stu-id="3fc74-129">Their own per-user (unmanaged) or their own per-user managed context.</span></span>
-   <span data-ttu-id="3fc74-130">Contexto administrado por usuario de otro usuario.</span><span class="sxs-lookup"><span data-stu-id="3fc74-130">Another user's per-user managed context.</span></span>

> [!Note]  
> <span data-ttu-id="3fc74-131">Los usuarios y las aplicaciones que tienen privilegios administrativos no pueden modificar la lista de origen de una instancia de una aplicación o revisión instalada en el contexto por usuario (no administrado) de otro usuario.</span><span class="sxs-lookup"><span data-stu-id="3fc74-131">Users and applications that have administrative privileges cannot modify the source list of an instance of an application or patch installed in the per-user (unmanaged) context of another user.</span></span>

 

## <a name="managing-network-and-url-sources-for-products-and-patches"></a><span data-ttu-id="3fc74-132">Administración de orígenes de red y URL para productos y revisiones</span><span class="sxs-lookup"><span data-stu-id="3fc74-132">Managing Network and URL sources for Products and Patches</span></span>

<span data-ttu-id="3fc74-133">Use la función [**MsiSourceListAddSourceEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddsourceexa) para agregar o cambiar el orden de la lista de origen de los orígenes de red y URL para una revisión o aplicación en un contexto determinado.</span><span class="sxs-lookup"><span data-stu-id="3fc74-133">Use the [**MsiSourceListAddSourceEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddsourceexa) function to add or reorder the source list of network and URL sources for a patch or application in a particular context.</span></span> <span data-ttu-id="3fc74-134">Use el parámetro *dwContext* para especificar el contexto de instalación.</span><span class="sxs-lookup"><span data-stu-id="3fc74-134">Use the *dwContext* parameter to specify the installation context.</span></span> <span data-ttu-id="3fc74-135">Use el parámetro *szUserSid* para especificar el contexto de usuario.</span><span class="sxs-lookup"><span data-stu-id="3fc74-135">Use the *szUserSid* parameter to specify the user context.</span></span>

<span data-ttu-id="3fc74-136">Utilice la función [**MsiSourceListAddSourceEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddsourceexa) para crear una lista de origen para una revisión que no se haya aplicado todavía a ninguna aplicación en el contexto especificado.</span><span class="sxs-lookup"><span data-stu-id="3fc74-136">Use the [**MsiSourceListAddSourceEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddsourceexa) function to create a source list for a patch that has not yet been applied to any application in the specified context.</span></span> <span data-ttu-id="3fc74-137">Esto puede ser útil cuando se registra una revisión para tener privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="3fc74-137">This can be useful when registering a patch to have elevated privileges.</span></span> <span data-ttu-id="3fc74-138">Para obtener más información acerca del registro de privilegios elevados para una revisión, consulte [aplicación de revisiones Per-User aplicaciones administradas](patching-per-user-managed-applications.md).</span><span class="sxs-lookup"><span data-stu-id="3fc74-138">For more information about registering elevated privileges for a patch, see [Patching Per-User Managed Applications](patching-per-user-managed-applications.md).</span></span>

<span data-ttu-id="3fc74-139">Utilice la función [**MsiSourceListClearSource**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearsourcea) para quitar un origen existente para una aplicación o revisión en un contexto especificado.</span><span class="sxs-lookup"><span data-stu-id="3fc74-139">Use the [**MsiSourceListClearSource**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearsourcea) function to remove an existing source for an application or patch in a specified context.</span></span> <span data-ttu-id="3fc74-140">Quitar el origen actual de una aplicación o revisión obliga al instalador a buscar un origen en la lista de origen la próxima vez que se requiera un origen.</span><span class="sxs-lookup"><span data-stu-id="3fc74-140">Removing the current source for an application or patch forces the installer to search the source list for a source the next time a source is required.</span></span>

<span data-ttu-id="3fc74-141">Utilice la función [**MsiSourceListEnumSources**](/windows/desktop/api/Msi/nf-msi-msisourcelistenumsourcesa) para enumerar los orígenes de la lista de origen de una revisión o aplicación especificada.</span><span class="sxs-lookup"><span data-stu-id="3fc74-141">Use the [**MsiSourceListEnumSources**](/windows/desktop/api/Msi/nf-msi-msisourcelistenumsourcesa) function to enumerate sources in the source list of a specified patch or application.</span></span>

## <a name="managing-media-sources-for-products-and-patches"></a><span data-ttu-id="3fc74-142">Administración de orígenes de medios para productos y revisiones</span><span class="sxs-lookup"><span data-stu-id="3fc74-142">Managing Media sources for Products and Patches</span></span>

<span data-ttu-id="3fc74-143">Utilice la función [**MsiSourceListAddMediaDisk**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddmediadiska) para agregar o actualizar la información de disco del origen multimedia de una aplicación o revisión registrada.</span><span class="sxs-lookup"><span data-stu-id="3fc74-143">Use the [**MsiSourceListAddMediaDisk**](/windows/desktop/api/Msi/nf-msi-msisourcelistaddmediadiska) function to add or update the disk information of the media source of a registered application or patch.</span></span> <span data-ttu-id="3fc74-144">Cada entrada se identifica de forma única mediante un identificador de disco.</span><span class="sxs-lookup"><span data-stu-id="3fc74-144">Each entry is uniquely identified by a disk ID.</span></span> <span data-ttu-id="3fc74-145">Si el disco ya existe, se actualiza con la nueva etiqueta de volumen y los valores de petición de disco.</span><span class="sxs-lookup"><span data-stu-id="3fc74-145">If the disk already exists, it is updated with the new volume label and disk prompt values.</span></span> <span data-ttu-id="3fc74-146">Si el disco no existe, se crea una nueva entrada de disco con los nuevos valores.</span><span class="sxs-lookup"><span data-stu-id="3fc74-146">If the disk does not exist, a new disk entry is created with the new values.</span></span>

<span data-ttu-id="3fc74-147">Utilice la función [**MsiSourceListClearMediaDisk**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearmediadiska) para quitar un disco registrado existente en el origen de medios para una aplicación o revisión en un contexto específico.</span><span class="sxs-lookup"><span data-stu-id="3fc74-147">Use the [**MsiSourceListClearMediaDisk**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearmediadiska) function to remove an existing registered disk under the media source for an application or patch in a specific context.</span></span>

<span data-ttu-id="3fc74-148">Utilice la función [**MsiSourceListEnumMediaDisks**](/windows/desktop/api/Msi/nf-msi-msisourcelistenummediadisksa) para enumerar una lista de discos registrados en el origen de medios para una aplicación o revisión.</span><span class="sxs-lookup"><span data-stu-id="3fc74-148">Use the [**MsiSourceListEnumMediaDisks**](/windows/desktop/api/Msi/nf-msi-msisourcelistenummediadisksa) function to enumerate a list of disks registered under the media source for an application or patch.</span></span>

## <a name="retrieval-and-modification-of-source-list-information"></a><span data-ttu-id="3fc74-149">Recuperación y modificación de la información de la lista de origen</span><span class="sxs-lookup"><span data-stu-id="3fc74-149">Retrieval and modification of source list information</span></span>

<span data-ttu-id="3fc74-150">Use las funciones [**MsiSourceListGetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistgetinfoa) y [**MsiSourceListSetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistsetinfoa) para recuperar o modificar la información sobre la lista de origen de una aplicación o revisión en un contexto específico.</span><span class="sxs-lookup"><span data-stu-id="3fc74-150">Use the [**MsiSourceListGetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistgetinfoa) and [**MsiSourceListSetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistsetinfoa) functions to retrieve or modify information about the source list for an application or patch in a specific context.</span></span> <span data-ttu-id="3fc74-151">Use el parámetro *dwContext* para especificar el contexto de instalación.</span><span class="sxs-lookup"><span data-stu-id="3fc74-151">Use the *dwContext* parameter to specify the installation context.</span></span> <span data-ttu-id="3fc74-152">Use el parámetro *szUserSid* para especificar el contexto de usuario.</span><span class="sxs-lookup"><span data-stu-id="3fc74-152">Use the *szUserSid* parameter to specify the user context.</span></span>

<span data-ttu-id="3fc74-153">Se puede tener acceso a las propiedades de la lista de origen como [**MEDIAPACKAGEPATH**](mediapackagepath.md), [**DiskPrompt**](diskprompt.md), **LastUsedSource**, **LastUsedType** y **packagename** .</span><span class="sxs-lookup"><span data-stu-id="3fc74-153">Source list properties such as [**MEDIAPACKAGEPATH**](mediapackagepath.md), [**DiskPrompt**](diskprompt.md), **LastUsedSource**, **LastUsedType**, and **PackageName** can be accessed.</span></span>

> [!Note]  
> <span data-ttu-id="3fc74-154">Solo se puede leer la propiedad de lista de origen de **LastUsedType** .</span><span class="sxs-lookup"><span data-stu-id="3fc74-154">The **LastUsedType** source list property can only be read.</span></span> <span data-ttu-id="3fc74-155">No se puede establecer directamente mediante la función [**MsiSourceListSetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistsetinfoa) .</span><span class="sxs-lookup"><span data-stu-id="3fc74-155">It cannot be set directly using the [**MsiSourceListSetInfo**](/windows/desktop/api/Msi/nf-msi-msisourcelistsetinfoa) function.</span></span>

 

## <a name="clearing-the-complete-source-list-or-forcing-a-source-resolution"></a><span data-ttu-id="3fc74-156">Borrar la lista de origen completa o forzar una resolución de origen</span><span class="sxs-lookup"><span data-stu-id="3fc74-156">Clearing the complete source list or forcing a source resolution</span></span>

<span data-ttu-id="3fc74-157">Utilice la función [**MsiSourceListClearAllEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearallexa) para quitar todos los orígenes existentes de un tipo de origen determinado para la aplicación o instancia de revisión especificada.</span><span class="sxs-lookup"><span data-stu-id="3fc74-157">Use the [**MsiSourceListClearAllEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistclearallexa) function to remove all the existing sources of a given source type for the specified application or patch instance.</span></span> <span data-ttu-id="3fc74-158">También se quita el registro de revisiones si ninguna aplicación del mismo contexto instala la revisión.</span><span class="sxs-lookup"><span data-stu-id="3fc74-158">The patch registration is also removed if the patch is not installed by any application in the same context.</span></span> <span data-ttu-id="3fc74-159">Use el parámetro *dwContext* para especificar el contexto de instalación.</span><span class="sxs-lookup"><span data-stu-id="3fc74-159">Use the *dwContext* parameter to specify the installation context.</span></span> <span data-ttu-id="3fc74-160">Use el parámetro *szUserSid* para especificar el contexto de usuario.</span><span class="sxs-lookup"><span data-stu-id="3fc74-160">Use the *szUserSid* parameter to specify the user context.</span></span>

<span data-ttu-id="3fc74-161">Use [**MsiSourceListForceResolutionEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistforceresolutionexa) para borrar la última entrada de origen usada para una aplicación o revisión en el contexto especificado.</span><span class="sxs-lookup"><span data-stu-id="3fc74-161">Use the [**MsiSourceListForceResolutionEx**](/windows/desktop/api/Msi/nf-msi-msisourcelistforceresolutionexa) to clear the last used source entry for an application or patch in the specified context.</span></span> <span data-ttu-id="3fc74-162">Esta función quita el registro de la propiedad denominada **LastUsedSource**.</span><span class="sxs-lookup"><span data-stu-id="3fc74-162">This function removes the registration of the property called **LastUsedSource**.</span></span> <span data-ttu-id="3fc74-163">Esta función no afecta a la lista de orígenes registrados.</span><span class="sxs-lookup"><span data-stu-id="3fc74-163">This function does not affect the registered source list.</span></span> <span data-ttu-id="3fc74-164">Al borrar el registro de **LastUsedSource** , el instalador realiza una resolución de origen en los orígenes registrados la próxima vez que requiera el origen.</span><span class="sxs-lookup"><span data-stu-id="3fc74-164">Clearing the **LastUsedSource** registration forces the installer to do a source resolution against the registered sources the next time it requires the source.</span></span>

 

 



