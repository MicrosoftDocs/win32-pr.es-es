---
description: Introducción a la programación de aplicaciones de DirectShow
ms.assetid: 21a72efa-95df-4754-8304-ad56965a914d
title: Introducción a la programación de aplicaciones de DirectShow
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f6218a346a7eb9711259c025aef09133ef2e58f6
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104422866"
---
# <a name="introduction-to-directshow-application-programming"></a><span data-ttu-id="ee8ad-103">Introducción a la programación de aplicaciones de DirectShow</span><span class="sxs-lookup"><span data-stu-id="ee8ad-103">Introduction to DirectShow Application Programming</span></span>

<span data-ttu-id="ee8ad-104">En este artículo se presentan la terminología y los conceptos básicos que se usan en DirectShow.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-104">This article introduces the basic terminology and concepts that are used in DirectShow.</span></span> <span data-ttu-id="ee8ad-105">Después de leer esta sección, estará listo para escribir su primera aplicación de DirectShow.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-105">After reading this section, you will be ready to write your first DirectShow application.</span></span>

<span data-ttu-id="ee8ad-106">**Filtros y gráficos de filtros**</span><span class="sxs-lookup"><span data-stu-id="ee8ad-106">**Filters and Filter Graphs**</span></span>

<span data-ttu-id="ee8ad-107">El bloque de creación de DirectShow es un componente de software denominado *filtro*.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-107">The building block of DirectShow is a software component called a *filter*.</span></span> <span data-ttu-id="ee8ad-108">Un filtro es un componente de software que realiza alguna operación en una secuencia multimedia.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-108">A filter is a software component that performs some operation on a multimedia stream.</span></span> <span data-ttu-id="ee8ad-109">Por ejemplo, los filtros de DirectShow pueden</span><span class="sxs-lookup"><span data-stu-id="ee8ad-109">For example, DirectShow filters can</span></span>

-   <span data-ttu-id="ee8ad-110">leer archivos</span><span class="sxs-lookup"><span data-stu-id="ee8ad-110">read files</span></span>
-   <span data-ttu-id="ee8ad-111">obtener vídeo de un dispositivo de captura de vídeo</span><span class="sxs-lookup"><span data-stu-id="ee8ad-111">get video from a video capture device</span></span>
-   <span data-ttu-id="ee8ad-112">descodificar varios formatos de flujo, como vídeo MPEG-1</span><span class="sxs-lookup"><span data-stu-id="ee8ad-112">decode various stream formats, such as MPEG-1 video</span></span>
-   <span data-ttu-id="ee8ad-113">pasar datos a la tarjeta gráfica o de sonido</span><span class="sxs-lookup"><span data-stu-id="ee8ad-113">pass data to the graphics or sound card</span></span>

<span data-ttu-id="ee8ad-114">Los filtros reciben entradas y generan resultados.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-114">Filters receive input and produce output.</span></span> <span data-ttu-id="ee8ad-115">Por ejemplo, si un filtro descodifica vídeo MPEG-1, la entrada es la secuencia codificada en MPEG y la salida es una serie de fotogramas de vídeo sin comprimir.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-115">For example, if a filter decodes MPEG-1 video, the input is the MPEG-encoded stream and the output is a series of uncompressed video frames.</span></span>

<span data-ttu-id="ee8ad-116">En DirectShow, una aplicación realiza cualquier tarea mediante la conexión de cadenas de filtros juntos, de modo que la salida de un filtro se convierte en la entrada de otro.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-116">In DirectShow, an application performs any task by connecting chains of filters together, so that the output from one filter becomes the input for another.</span></span> <span data-ttu-id="ee8ad-117">Un conjunto de filtros conectados se denomina *gráfico de filtro*.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-117">A set of connected filters is called a *filter graph*.</span></span> <span data-ttu-id="ee8ad-118">Por ejemplo, en el diagrama siguiente se muestra un gráfico de filtros para reproducir un archivo AVI.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-118">For example, the following diagram shows a filter graph for playing an AVI file.</span></span>

![filtrar gráfico para reproducir un archivo AVI](images/avi-filter-graph.png)

<span data-ttu-id="ee8ad-120">El filtro de origen de archivo lee el archivo AVI del disco duro.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-120">The File Source filter reads the AVI file from the hard disk.</span></span> <span data-ttu-id="ee8ad-121">El filtro de divisor de AVI analiza el archivo en dos flujos, una secuencia de vídeo comprimida y una secuencia de audio.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-121">The AVI Splitter filter parses the file into two streams, a compressed video stream and an audio stream.</span></span> <span data-ttu-id="ee8ad-122">El filtro de descompresor de AVI descodifica los fotogramas de vídeo.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-122">The AVI Decompressor filter decodes the video frames.</span></span> <span data-ttu-id="ee8ad-123">El filtro de representador de vídeo dibuja los fotogramas en la pantalla, mediante DirectDraw o GDI.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-123">The Video Renderer filter draws the frames to the display, using DirectDraw or GDI.</span></span> <span data-ttu-id="ee8ad-124">El filtro de dispositivo DirectSound predeterminado reproduce la secuencia de audio mediante DirectSound.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-124">The Default DirectSound Device filter plays the audio stream, using DirectSound.</span></span>

<span data-ttu-id="ee8ad-125">La aplicación no tiene que administrar todo este flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-125">The application does not have to manage all of this data flow.</span></span> <span data-ttu-id="ee8ad-126">En su lugar, los filtros se controlan mediante un componente de alto nivel denominado Filter Graph Manager.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-126">Instead, the filters are controlled by a high-level component called the Filter Graph Manager.</span></span> <span data-ttu-id="ee8ad-127">La aplicación realiza llamadas API de alto nivel como "Run" (para trasladar datos a través del gráfico) o "STOP" (para detener el flujo de datos).</span><span class="sxs-lookup"><span data-stu-id="ee8ad-127">The application makes high-level API calls such as "Run" (to move data through the graph) or "Stop" (to stop the flow of data).</span></span> <span data-ttu-id="ee8ad-128">Si necesita más control sobre las operaciones de Stream, puede tener acceso a los filtros directamente a través de las interfaces COM.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-128">If you require more control over the stream operations, you can access the filters directly through COM interfaces.</span></span> <span data-ttu-id="ee8ad-129">El administrador de gráficos de filtro también pasa las notificaciones de eventos a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-129">The Filter Graph Manager also passes event notifications to the application.</span></span>

<span data-ttu-id="ee8ad-130">El administrador de gráficos de filtros sirve también a otro propósito: proporciona métodos para que la aplicación genere el gráfico de filtro mediante la conexión de los filtros.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-130">The Filter Graph Manager serves another purpose as well: It provides methods for the application to build the filter graph, by connecting the filters together.</span></span> <span data-ttu-id="ee8ad-131">(DirectShow también proporciona varios objetos auxiliares que simplifican este proceso.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-131">(DirectShow also provides various helper objects that simplify this process.</span></span> <span data-ttu-id="ee8ad-132">Se describen detalladamente en la documentación).</span><span class="sxs-lookup"><span data-stu-id="ee8ad-132">These are thoroughly described in the documentation.)</span></span>

<span data-ttu-id="ee8ad-133">**Escritura de una aplicación de DirectShow**</span><span class="sxs-lookup"><span data-stu-id="ee8ad-133">**Writing a DirectShow Application**</span></span>

<span data-ttu-id="ee8ad-134">En términos generales, hay tres tareas que cualquier aplicación de DirectShow debe realizar.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-134">In broad terms, there are three tasks that any DirectShow application must perform.</span></span> <span data-ttu-id="ee8ad-135">Estos se muestran en el diagrama siguiente.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-135">These are illustrated in the following diagram.</span></span>

![aplicación de DirectShow típica](images/fgm.png)

1.  <span data-ttu-id="ee8ad-137">La aplicación crea una instancia de Filter Graph Manager.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-137">The application creates an instance of the Filter Graph Manager.</span></span>
2.  <span data-ttu-id="ee8ad-138">La aplicación utiliza el administrador de gráficos de filtro para generar un gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-138">The application uses the Filter Graph Manager to build a filter graph.</span></span> <span data-ttu-id="ee8ad-139">El conjunto exacto de filtros del gráfico dependerá de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-139">The exact set of filters in the graph will depend on the application.</span></span>
3.  <span data-ttu-id="ee8ad-140">La aplicación utiliza el administrador de gráficos de filtro para controlar el gráfico de filtro y transmitir los datos a través de los filtros.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-140">The application uses the Filter Graph Manager to control the filter graph and stream data through the filters.</span></span> <span data-ttu-id="ee8ad-141">A lo largo de este proceso, la aplicación también responderá a los eventos del administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-141">Throughout this process, the application will also respond to events from the Filter Graph Manager.</span></span>

<span data-ttu-id="ee8ad-142">Una vez completado el procesamiento, la aplicación libera el administrador de gráficos de filtro y todos los filtros.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-142">When processing is completed, the application releases the Filter Graph Manager and all of the filters.</span></span>

<span data-ttu-id="ee8ad-143">DirectShow se basa en COM; el administrador de gráficos de filtro y los filtros son objetos COM.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-143">DirectShow is based on COM; the Filter Graph Manager and the filters are all COM objects.</span></span> <span data-ttu-id="ee8ad-144">Debe tener una descripción general de la programación del cliente COM antes de empezar a programar DirectShow.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-144">You should have a general understanding of COM client programming before you begin programming DirectShow.</span></span> <span data-ttu-id="ee8ad-145">Hay muchos libros sobre programación COM disponibles.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-145">Many books about COM programming are available.</span></span>

<span data-ttu-id="ee8ad-146">Para empezar a trabajar con DirectShow, lea el artículo [Cómo reproducir un archivo](how-to-play-a-file.md), que presenta una aplicación de consola simple para reproducir un archivo de vídeo.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-146">To get started with DirectShow, read the article [How To Play a File](how-to-play-a-file.md), which presents a simple console application to play a video file.</span></span> <span data-ttu-id="ee8ad-147">En la sección [sobre DirectShow](about-directshow.md) se explica con más detalle la arquitectura de DirectShow, mientras que la sección que [usa DirectShow](using-directshow.md) examina los escenarios principales que admite DirectShow, como la captura, la edición de vídeo, la reproducción de DVD y el televisor.</span><span class="sxs-lookup"><span data-stu-id="ee8ad-147">The section [About DirectShow](about-directshow.md) explains the DirectShow architecture in more detail, while the section [Using DirectShow](using-directshow.md) examines the major scenarios that are supported by DirectShow, such as capture, video editing, DVD playback, and television.</span></span>

 

 



