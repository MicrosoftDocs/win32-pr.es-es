---
title: Definir canalizaciones en archivos IDL
description: Cuando se define una canalización en un archivo IDL, el compilador MIDL genera una estructura de control de canalización cuyos miembros son punteros a procedimientos de inserción, extracción y asignación, así como a una variable de estado que coordina estos procedimientos.
ms.assetid: f6c282e4-3056-48c4-bd12-dfcae6d238d7
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 115be7fc5d00458d13df102afebe9ba5b55de070
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104421083"
---
# <a name="defining-pipes-in-idl-files"></a>Definir canalizaciones en archivos IDL

Cuando se define una canalización en un archivo IDL, el compilador MIDL genera una estructura de control de canalización cuyos miembros son punteros a procedimientos de inserción, extracción y asignación, así como a una variable de estado que coordina estos procedimientos. La aplicación cliente inicializa los campos en la estructura de control de canalización, mantiene su variable de estado y administra la transferencia de datos con sus propias funciones de inserción, extracción y asignación. El código auxiliar de cliente llama a estas funciones de aplicación en bucles durante la transferencia de datos. En el caso de una canalización de entrada, el código auxiliar del cliente calcula las referencias de los datos de transferencia y los transmite al código auxiliar del servidor. En el caso de una canalización de salida, el código auxiliar de cliente no calcula las referencias de los datos en un búfer y pasa un puntero a ese búfer de vuelta a la aplicación cliente.

El código de código auxiliar del servidor inicializa los campos de la estructura del control de canalización en una variable de estado, así como punteros a rutinas de inserción y extracción. El código auxiliar del servidor mantiene el estado y administra su almacenamiento privado para los datos de transferencia. La aplicación de servidor llama a las rutinas de extracción e inserción en bucles durante la llamada a procedimiento remoto, ya que recibe y anula las referencias a los datos del código auxiliar del cliente, o calcula las referencias y transmite los datos al código auxiliar del cliente.

En el siguiente archivo IDL de ejemplo se define una canalización de tipo de canalización larga \_ , cuyo tamaño de elemento se define como **Long**. También declara prototipos de función para el procedimiento remoto llama a la incanalización y la sobrecanalización, para enviar y recibir datos, respectivamente. Cuando el compilador MIDL procesa el archivo IDL, genera el archivo de encabezado que se muestra en el ejemplo.

## <a name="example"></a>Ejemplo

``` syntax
// File: pipedemo.idl
typedef pipe long LONG_PIPE;
void InPipe( [in] LONG_PIPE pipe_data );
void OutPipe( [out] LONG_PIPE *pipe_data ); 
//end pipedemo.idl
 
// File: pipedemo.h (fragment)
// Generated by the MIDL compiler from pipedemo.idl
typedef struct pipe_LONG_PIPE
{
    void (__RPC_FAR * pull) (
        char __RPC_FAR * state,
        long __RPC_FAR * buf,
        unsigned long esize,
        unsigned long __RPC_FAR * ecount );
    void (__RPC_FAR * push) (
        char __RPC_FAR * state,
        long __RPC_FAR * buf,
        unsigned long ecount );
    void (__RPC_FAR * alloc) (
        char __RPC_FAR * state,
        unsigned long bsize,
        long __RPC_FAR * __RPC_FAR * buf,
        unsigned long __RPC_FAR * bcount );
    char __RPC_FAR * state;
} LONG_PIPE;
 
void InPipe( 
    /* [in] */ LONG_PIPE pipe_data);
void OutPipe( 
    /* [out] */ LONG_PIPE __RPC_FAR *pipe_data);
//end pipedemo.h
```

## <a name="related-topics"></a>Temas relacionados

<dl> <dt>

[codo](/windows/desktop/Midl/pipe)
</dt> <dt>

[**/OI**](/windows/desktop/Midl/-oi)
</dt> </dl>

 

 