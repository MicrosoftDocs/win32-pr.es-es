---
description: Los contadores de rendimiento específicos de la aplicación pueden ayudarle a ajustar el rendimiento mientras desarrolla y depura la aplicación.
ms.assetid: 016386f6-4675-409e-8446-599e4ff96109
title: Agregar contadores de rendimiento
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8660af9406de4dedec3ecbd76169a23b342aa7d2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105667349"
---
# <a name="adding-performance-counters"></a><span data-ttu-id="6aa77-103">Agregar contadores de rendimiento</span><span class="sxs-lookup"><span data-stu-id="6aa77-103">Adding Performance Counters</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6aa77-104">Debido a las limitaciones de rendimiento y confiabilidad significativas, el método para proporcionar los datos del contador de rendimiento que se describen en este tema puede modificarse o no estar disponible en el futuro.</span><span class="sxs-lookup"><span data-stu-id="6aa77-104">Due to significant performance and reliability limitations, the method for providing performance counter data that this topic describes may be altered or unavailable in the future.</span></span> <span data-ttu-id="6aa77-105">En su lugar, Microsoft recomienda usar el método descrito en [proporcionar datos de contadores con la versión 2,0](providing-counter-data-using-version-2-0.md) para crear nuevos contadores de rendimiento y migrar los contadores de rendimiento existentes para usar ese método también.</span><span class="sxs-lookup"><span data-stu-id="6aa77-105">Instead, Microsoft recommends that you use the method described in [Providing Counter Data Using Version 2.0](providing-counter-data-using-version-2-0.md) for creating new performance counters, and that you migrate existing performance counters to use that method as well.</span></span>

<span data-ttu-id="6aa77-106">Los contadores de rendimiento específicos de la aplicación pueden ayudarle a ajustar el rendimiento mientras desarrolla y depura la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6aa77-106">Performance counters specific to your application can help you tune performance while you develop and debug the application.</span></span> <span data-ttu-id="6aa77-107">Una vez que la aplicación se haya completado e instalado en los sistemas de destino, los contadores pueden ayudar a los administradores del sistema a ajustar la configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6aa77-107">After your application is complete and installed on target systems, the counters can help system administrators adjust configurable settings for your application.</span></span>

## <a name="adding-a-performance-object-and-its-counters"></a><span data-ttu-id="6aa77-108">Agregar un objeto de rendimiento y sus contadores</span><span class="sxs-lookup"><span data-stu-id="6aa77-108">Adding a performance object and its counters</span></span>

1. <span data-ttu-id="6aa77-109">Diseñe los tipos de objeto y los contadores de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6aa77-109">Design the object types and counters for the application.</span></span> <span data-ttu-id="6aa77-110">Para obtener más información, vea [diseño de objetos y contadores](object-and-counter-design.md).</span><span class="sxs-lookup"><span data-stu-id="6aa77-110">For details, see [Object and Counter Design](object-and-counter-design.md).</span></span>
2. <span data-ttu-id="6aa77-111">Cree un archivo de inicialización (. ini) que contenga los nombres y descripciones de los objetos y contadores de rendimiento que proporcione.</span><span class="sxs-lookup"><span data-stu-id="6aa77-111">Create an initialization (.ini) file containing the names and descriptions of the performance objects and counters that you provide.</span></span> <span data-ttu-id="6aa77-112">Para obtener más información, vea [Agregar nombres y descripciones de contadores al registro](adding-counter-names-and-descriptions-to-the-registry.md).</span><span class="sxs-lookup"><span data-stu-id="6aa77-112">For details, see [Adding Counter Names and Descriptions to the Registry](adding-counter-names-and-descriptions-to-the-registry.md).</span></span>
3. <span data-ttu-id="6aa77-113">Cree un archivo de encabezado (. h) que contenga los desplazamientos relativos en los que se instalarán los objetos de contador y los contadores en el registro.</span><span class="sxs-lookup"><span data-stu-id="6aa77-113">Create a header (.h) file containing the relative offsets at which the counter objects and counters will be installed in the registry.</span></span> <span data-ttu-id="6aa77-114">Para obtener más información, vea [Agregar nombres y descripciones de contadores al registro](adding-counter-names-and-descriptions-to-the-registry.md).</span><span class="sxs-lookup"><span data-stu-id="6aa77-114">For details, see [Adding Counter Names and Descriptions to the Registry](adding-counter-names-and-descriptions-to-the-registry.md).</span></span>
4. <span data-ttu-id="6aa77-115">Configure las entradas de supervisión de rendimiento necesarias en el registro.</span><span class="sxs-lookup"><span data-stu-id="6aa77-115">Set up the necessary performance monitoring entries in the registry.</span></span> <span data-ttu-id="6aa77-116">Esto incluye los pasos siguientes.</span><span class="sxs-lookup"><span data-stu-id="6aa77-116">This includes the following steps.</span></span>
    1. <span data-ttu-id="6aa77-117">Cree una clave del registro en la clave de **servicios** de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6aa77-117">Create a registry key in the **Services** key for the application.</span></span> <span data-ttu-id="6aa77-118">Si no tiene este tipo de nodo, créelo en la siguiente clave del registro: `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services` .</span><span class="sxs-lookup"><span data-stu-id="6aa77-118">If you do not have such a node, create it under the following registry key: `HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services`.</span></span> <span data-ttu-id="6aa77-119">Para obtener más información, consulte [crear la clave de rendimiento de la aplicación](creating-the-applications-performance-key.md).</span><span class="sxs-lookup"><span data-stu-id="6aa77-119">For details, see [Creating the Application's Performance Key](creating-the-applications-performance-key.md).</span></span>
    2. <span data-ttu-id="6aa77-120">Use la utilidad **LODCTR** con los archivos. ini y. h para instalar la información en el registro.</span><span class="sxs-lookup"><span data-stu-id="6aa77-120">Use the **lodctr** utility with the .ini and .h files to install the information in the registry.</span></span> <span data-ttu-id="6aa77-121">Esta utilidad solo se realiza correctamente si existe una clave de rendimiento en la clave de **servicios** de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6aa77-121">This utility succeeds only if a performance key exists in the **Services** key for the application.</span></span> <span data-ttu-id="6aa77-122">Para obtener más información, vea [Agregar nombres y descripciones de contadores al registro](adding-counter-names-and-descriptions-to-the-registry.md).</span><span class="sxs-lookup"><span data-stu-id="6aa77-122">For details, see [Adding Counter Names and Descriptions to the Registry](adding-counter-names-and-descriptions-to-the-registry.md).</span></span>
5. <span data-ttu-id="6aa77-123">Cree un archivo DLL de rendimiento que contenga un conjunto de funciones exportadas que proporcionen los datos del contador consultado al consumidor.</span><span class="sxs-lookup"><span data-stu-id="6aa77-123">Create a performance DLL containing a set of exported functions that provide the queried counter data to the consumer.</span></span> <span data-ttu-id="6aa77-124">Para obtener más información, consulte [crear un archivo dll de extensión de rendimiento](creating-a-performance-extension-dll.md).</span><span class="sxs-lookup"><span data-stu-id="6aa77-124">For details, see [Creating a Performance Extension DLL](creating-a-performance-extension-dll.md).</span></span>
6. <span data-ttu-id="6aa77-125">Modifique el archivo de instalación de la aplicación para automatizar la adición de información al registro (como se describe en el paso 4) y copie el archivo DLL de rendimiento en el directorio de la aplicación en el programa de instalación.</span><span class="sxs-lookup"><span data-stu-id="6aa77-125">Modify the application's setup file to automate adding information to the registry (as described in step 4) and copy your performance DLL to your application's directory at setup.</span></span>

<span data-ttu-id="6aa77-126">Para obtener información acerca de las entradas del registro adicionales, vea [crear otras entradas del registro](creating-other-registry-entries.md).</span><span class="sxs-lookup"><span data-stu-id="6aa77-126">For information about additional registry entries, see [Creating Other Registry Entries](creating-other-registry-entries.md).</span></span>
