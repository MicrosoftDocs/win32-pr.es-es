---
title: Configuración de equipos para RPC a través de HTTP
description: Para usar HTTP como protocolo de transporte para RPC, el proxy RPC que se ejecuta en Internet Information Server (IIS) debe estar configurado en la red del programa de servidor.
ms.assetid: 5a67af51-924a-4f2b-b013-a4fd1bfaeddd
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 62d1b39276633f3b827f778deef77edd5630c599
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "105651308"
---
# <a name="configuring-computers-for-rpc-over-http"></a><span data-ttu-id="da7d1-103">Configuración de equipos para RPC a través de HTTP</span><span class="sxs-lookup"><span data-stu-id="da7d1-103">Configuring Computers for RPC over HTTP</span></span>

<span data-ttu-id="da7d1-104">Para usar HTTP como protocolo de transporte para RPC, el proxy RPC que se ejecuta en Internet Information Server (IIS) debe estar configurado en la red del programa de servidor.</span><span class="sxs-lookup"><span data-stu-id="da7d1-104">To use HTTP as a transport protocol for RPC, RPC Proxy running within Internet Information Server (IIS) must be configured on the server program's network.</span></span> <span data-ttu-id="da7d1-105">En esta sección se describen las opciones de configuración.</span><span class="sxs-lookup"><span data-stu-id="da7d1-105">This section describes configuration options.</span></span> <span data-ttu-id="da7d1-106">Para obtener recomendaciones sobre las prácticas recomendadas de programación y configuración cuando se usa RPC a través de HTTP, vea [recomendaciones de implementación de RPC sobre http](rpc-over-http-deployment-recommendations.md).</span><span class="sxs-lookup"><span data-stu-id="da7d1-106">For recommendations on best programming and configuration practices when using RPC over HTTP, see [RPC over HTTP Deployment Recommendations](rpc-over-http-deployment-recommendations.md).</span></span> <span data-ttu-id="da7d1-107">La tarea principal es configurar el proxy RPC para aceptar y reenviar conexiones RPC a través de HTTP a un programa de servidor RPC a través de HTTP.</span><span class="sxs-lookup"><span data-stu-id="da7d1-107">The primary task is configuring the RPC Proxy to accept and forward RPC over HTTP connections to an RPC over HTTP server program.</span></span>

<span data-ttu-id="da7d1-108">IIS debe instalarse primero en el equipo que ejecuta el proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="da7d1-108">IIS must first be installed on the machine running the RPC Proxy.</span></span> <span data-ttu-id="da7d1-109">Una vez instalado IIS, el proxy RPC está instalado.</span><span class="sxs-lookup"><span data-stu-id="da7d1-109">Once IIS is installed, the RPC Proxy is installed.</span></span> <span data-ttu-id="da7d1-110">Tanto IIS como el proxy RPC se pueden instalar simultáneamente desde **Agregar o quitar componentes de Windows** en el panel de control.</span><span class="sxs-lookup"><span data-stu-id="da7d1-110">Both IIS and the RPC Proxy can be installed simultaneously from **Add/Remove Windows Components** in the Control Panel.</span></span> <span data-ttu-id="da7d1-111">El proxy RPC se instala desde los **servicios de red** y se denomina **proxy RPC sobre http** en el programa de instalación de Windows.</span><span class="sxs-lookup"><span data-stu-id="da7d1-111">RPC Proxy is installed from **Networking Services**, and is called **RPC over HTTP Proxy** in Windows setup.</span></span> <span data-ttu-id="da7d1-112">Si tanto IIS como el proxy RPC se instalan al mismo tiempo, Windows se asegura de que se instalan en el orden correcto.</span><span class="sxs-lookup"><span data-stu-id="da7d1-112">If both IIS and RPC Proxy are installed at the same time, Windows ensures they are installed in the proper order.</span></span>

> [!Note]  
> <span data-ttu-id="da7d1-113">Una vez completada la instalación, IIS debe reiniciarse si se estaba ejecutando durante el proceso de instalación.</span><span class="sxs-lookup"><span data-stu-id="da7d1-113">After installation is complete, IIS must be restarted if it was running during the installation process.</span></span>

 

<span data-ttu-id="da7d1-114">Después de instalar el proxy RPC, se deben realizar algunas tareas de configuración adicionales:</span><span class="sxs-lookup"><span data-stu-id="da7d1-114">After installed of the RPC Proxy, some additional configuration tasks must be performed:</span></span>

1.  <span data-ttu-id="da7d1-115">Abra el complemento MMC de IIS y configure el directorio virtual del proxy RPC para que requiera seguridad, como se explica en [seguridad de RPC a través de http](rpc-over-http-security.md).</span><span class="sxs-lookup"><span data-stu-id="da7d1-115">Open the IIS MMC snap-in and configure the RPC Proxy virtual directory to require security, as explained in [RPC over HTTP Security](rpc-over-http-security.md).</span></span> <span data-ttu-id="da7d1-116">Este paso solo es necesario si tiene previsto usar RPC a través de HTTP V2.</span><span class="sxs-lookup"><span data-stu-id="da7d1-116">This step is required only if you plan to use RPC over HTTP v2.</span></span>
2.  <span data-ttu-id="da7d1-117">Si IIS no tiene un certificado instalado, se debe obtener e instalar un certificado válido para ese equipo con el fin de usar SSL al comunicarse con el proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="da7d1-117">If IIS does not have a certificate installed, a valid certificate must be obtained and installed for that computer in order to use SSL when communicating with the RPC Proxy.</span></span> <span data-ttu-id="da7d1-118">Este paso solo es relevante para RPC a través de HTTP V2.</span><span class="sxs-lookup"><span data-stu-id="da7d1-118">This step is relevant only for RPC over HTTP v2.</span></span> <span data-ttu-id="da7d1-119">Como RPC a través de HTTP v1 no es compatible con SSL, este paso se puede omitir para RPC a través de HTTP v1.</span><span class="sxs-lookup"><span data-stu-id="da7d1-119">Since RPC over HTTP v1 does not support SSL, this step can be omitted for RPC over HTTP v1.</span></span>
3.  <span data-ttu-id="da7d1-120">Establezca la clave **ValidPorts** tal y como se describe en [seguridad de RPC a través de http](rpc-over-http-security.md).</span><span class="sxs-lookup"><span data-stu-id="da7d1-120">Set the **ValidPorts** key as described in [RPC over HTTP Security](rpc-over-http-security.md).</span></span>

<span data-ttu-id="da7d1-121">Cuando se completan estas tareas de configuración, el proxy RPC a través de HTTP está listo para reenviar las solicitudes del cliente RPC a través de HTTP al servidor RPC a través de HTTP.</span><span class="sxs-lookup"><span data-stu-id="da7d1-121">When these configuration tasks are completed, the RPC over HTTP proxy is ready to forward requests from the RPC over HTTP client to the RPC over HTTP server.</span></span>

## <a name="rpc-over-http-registry-keys"></a><span data-ttu-id="da7d1-122">Claves del registro de RPC sobre HTTP</span><span class="sxs-lookup"><span data-stu-id="da7d1-122">RPC over HTTP Registry Keys</span></span>

<span data-ttu-id="da7d1-123">En esta sección se explican las claves del registro adicionales que se usan para configurar el cliente, el servidor o el proxy RPC en una conexión de RPC a través de HTTP.</span><span class="sxs-lookup"><span data-stu-id="da7d1-123">This section explains additional registry keys used to configure the client, server or RPC Proxy in an RPC over HTTP connection.</span></span> <span data-ttu-id="da7d1-124">Normalmente, estas claves no son necesarias; se proporcionan aquí por integridad.</span><span class="sxs-lookup"><span data-stu-id="da7d1-124">These keys are generally not required; they are provided here for completeness.</span></span>

<span data-ttu-id="da7d1-125">**HKLM \\ software \\ Microsoft \\ RPC \\ DefaultChannelLifetime**</span><span class="sxs-lookup"><span data-stu-id="da7d1-125">**HKLM\\Software\\Microsoft\\Rpc\\DefaultChannelLifetime**</span></span>

<span data-ttu-id="da7d1-126">DWORD.</span><span class="sxs-lookup"><span data-stu-id="da7d1-126">DWORD.</span></span> <span data-ttu-id="da7d1-127">Invalida la duración predeterminada del canal.</span><span class="sxs-lookup"><span data-stu-id="da7d1-127">Overrides the default channel lifetime.</span></span> <span data-ttu-id="da7d1-128">Se utiliza en el cliente y en el proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="da7d1-128">Used on the client and the RPC Proxy.</span></span> <span data-ttu-id="da7d1-129">La duración del canal se expresa en bytes.</span><span class="sxs-lookup"><span data-stu-id="da7d1-129">The channel lifetime is expressed in bytes.</span></span> <span data-ttu-id="da7d1-130">Si no se especifica, se usa 1 GB.</span><span class="sxs-lookup"><span data-stu-id="da7d1-130">If not specified, 1GB is used.</span></span> <span data-ttu-id="da7d1-131">Solo se usa en RPC a través de HTTP V2.</span><span class="sxs-lookup"><span data-stu-id="da7d1-131">Used only in RPC over HTTP v2.</span></span> <span data-ttu-id="da7d1-132">Cuando se cambia en el proxy RPC, IIS debe reiniciarse para que el cambio surta efecto.</span><span class="sxs-lookup"><span data-stu-id="da7d1-132">When changed on RPC Proxy, IIS must be restarted for the change to take effect.</span></span>

\-

<span data-ttu-id="da7d1-133">**HKLM \\ software \\ Microsoft \\ RPC \\ ClientReceiveWindow**</span><span class="sxs-lookup"><span data-stu-id="da7d1-133">**HKLM\\Software\\Microsoft\\Rpc\\ClientReceiveWindow**</span></span>

<span data-ttu-id="da7d1-134">DWORD.</span><span class="sxs-lookup"><span data-stu-id="da7d1-134">DWORD.</span></span> <span data-ttu-id="da7d1-135">Cuando está presente, especifica la ventana de recepción utilizada por el cliente para los datos recibidos del proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="da7d1-135">When present, specifies the receive window used by the client for data received from the RPC Proxy.</span></span> <span data-ttu-id="da7d1-136">El valor válido mínimo es 8 KB.</span><span class="sxs-lookup"><span data-stu-id="da7d1-136">The minimum valid value is 8K.</span></span> <span data-ttu-id="da7d1-137">El máximo es 1 GB.</span><span class="sxs-lookup"><span data-stu-id="da7d1-137">The maximum is 1GB.</span></span> <span data-ttu-id="da7d1-138">Si el valor no está presente, se utiliza 64K.</span><span class="sxs-lookup"><span data-stu-id="da7d1-138">If the value is not present, 64K is used.</span></span> <span data-ttu-id="da7d1-139">Solo se usa en RPC a través de HTTP V2.</span><span class="sxs-lookup"><span data-stu-id="da7d1-139">Used only in RPC over HTTP v2.</span></span>

\-

<span data-ttu-id="da7d1-140">**HKLM \\ software \\ Microsoft \\ RPC \\ InProxyReceiveWindow**</span><span class="sxs-lookup"><span data-stu-id="da7d1-140">**HKLM\\Software\\Microsoft\\Rpc\\InProxyReceiveWindow**</span></span>

<span data-ttu-id="da7d1-141">DWORD.</span><span class="sxs-lookup"><span data-stu-id="da7d1-141">DWORD.</span></span> <span data-ttu-id="da7d1-142">Cuando está presente, especifica la ventana de recepción utilizada por el proxy RPC para los datos recibidos del cliente.</span><span class="sxs-lookup"><span data-stu-id="da7d1-142">When present, specifies the receive window used by the RPC Proxy for data received from the client.</span></span> <span data-ttu-id="da7d1-143">El valor válido mínimo es 8 KB.</span><span class="sxs-lookup"><span data-stu-id="da7d1-143">The minimum valid value is 8K.</span></span> <span data-ttu-id="da7d1-144">El máximo es 1 GB.</span><span class="sxs-lookup"><span data-stu-id="da7d1-144">The maximum is 1GB.</span></span> <span data-ttu-id="da7d1-145">Si el valor no está presente, se utiliza 64K.</span><span class="sxs-lookup"><span data-stu-id="da7d1-145">If the value is not present, 64K is used.</span></span> <span data-ttu-id="da7d1-146">Solo se usa en RPC a través de HTTP V2.</span><span class="sxs-lookup"><span data-stu-id="da7d1-146">Used only in RPC over HTTP v2.</span></span> <span data-ttu-id="da7d1-147">Cuando se realizan cambios en este valor, se debe reiniciar IIS para que el cambio surta efecto.</span><span class="sxs-lookup"><span data-stu-id="da7d1-147">When changes are made to this value, IIS must be restarted for the change to take effect.</span></span>

\-

<span data-ttu-id="da7d1-148">**HKLM \\ software \\ Microsoft \\ RPC \\ OutProxyReceiveWindow**</span><span class="sxs-lookup"><span data-stu-id="da7d1-148">**HKLM\\Software\\Microsoft\\Rpc\\OutProxyReceiveWindow**</span></span>

<span data-ttu-id="da7d1-149">DWORD.</span><span class="sxs-lookup"><span data-stu-id="da7d1-149">DWORD.</span></span> <span data-ttu-id="da7d1-150">Cuando está presente, especifica la ventana de recepción utilizada por el proxy RPC para los datos recibidos del servidor.</span><span class="sxs-lookup"><span data-stu-id="da7d1-150">When present, specifies the receive window used by the RPC Proxy for data received from the server.</span></span> <span data-ttu-id="da7d1-151">El valor válido mínimo es 8 KB.</span><span class="sxs-lookup"><span data-stu-id="da7d1-151">The minimum valid value is 8K.</span></span> <span data-ttu-id="da7d1-152">El máximo es 1 GB.</span><span class="sxs-lookup"><span data-stu-id="da7d1-152">The maximum is 1GB.</span></span> <span data-ttu-id="da7d1-153">Si el valor no está presente, se utiliza 64K.</span><span class="sxs-lookup"><span data-stu-id="da7d1-153">If the value is not present, 64K is used.</span></span> <span data-ttu-id="da7d1-154">Solo se usa en RPC a través de HTTP V2.</span><span class="sxs-lookup"><span data-stu-id="da7d1-154">Used only in RPC over HTTP v2.</span></span> <span data-ttu-id="da7d1-155">Cuando se realizan cambios en este valor, se debe reiniciar IIS para que el cambio surta efecto.</span><span class="sxs-lookup"><span data-stu-id="da7d1-155">When changes are made to this value, IIS must be restarted for the change to take effect.</span></span>

\-

<span data-ttu-id="da7d1-156">**HKLM \\ software \\ Microsoft \\ RPC \\ ServerReceiveWindow**</span><span class="sxs-lookup"><span data-stu-id="da7d1-156">**HKLM\\Software\\Microsoft\\Rpc\\ServerReceiveWindow**</span></span>

<span data-ttu-id="da7d1-157">DWORD.</span><span class="sxs-lookup"><span data-stu-id="da7d1-157">DWORD.</span></span> <span data-ttu-id="da7d1-158">Cuando está presente, especifica la ventana de recepción utilizada por el servidor para los datos recibidos del proxy RPC.</span><span class="sxs-lookup"><span data-stu-id="da7d1-158">When present, specifies the receive window used by the server for data received from the RPC Proxy.</span></span> <span data-ttu-id="da7d1-159">El valor válido mínimo es 8 KB.</span><span class="sxs-lookup"><span data-stu-id="da7d1-159">The minimum valid value is 8K.</span></span> <span data-ttu-id="da7d1-160">El máximo es 1 GB.</span><span class="sxs-lookup"><span data-stu-id="da7d1-160">The maximum is 1GB.</span></span> <span data-ttu-id="da7d1-161">Si el valor no está presente, se utiliza 64K.</span><span class="sxs-lookup"><span data-stu-id="da7d1-161">If the value is not present, 64K is used.</span></span> <span data-ttu-id="da7d1-162">Solo se usa en RPC a través de HTTP V2.</span><span class="sxs-lookup"><span data-stu-id="da7d1-162">Used only in RPC over HTTP v2.</span></span> <span data-ttu-id="da7d1-163">Cuando se realizan cambios en este valor, se debe reiniciar IIS para que el cambio surta efecto.</span><span class="sxs-lookup"><span data-stu-id="da7d1-163">When changes are made to this value, IIS must be restarted for the change to take effect.</span></span>

\-

<span data-ttu-id="da7d1-164">**HKLM \\ software \\ directivas \\ Microsoft \\ Windows NT \\ RPC \\ MinimumConnectionTimeout**</span><span class="sxs-lookup"><span data-stu-id="da7d1-164">**HKLM\\Software\\Policies\\Microsoft\\Windows NT\\Rpc\\MinimumConnectionTimeout**</span></span>

<span data-ttu-id="da7d1-165">DWORD.</span><span class="sxs-lookup"><span data-stu-id="da7d1-165">DWORD.</span></span> <span data-ttu-id="da7d1-166">Cuando está presente, especifica el tiempo de espera mínimo de conexión utilizado por el cliente y el proxy RPC, en segundos.</span><span class="sxs-lookup"><span data-stu-id="da7d1-166">When present, specifies the minimum connection timeout used by the client and RPC Proxy, in seconds.</span></span> <span data-ttu-id="da7d1-167">El tiempo de espera real utilizado es el inferior de este valor y el tiempo de espera de conexión inactiva de IIS.</span><span class="sxs-lookup"><span data-stu-id="da7d1-167">The actual timeout used is the lower of this value and the IIS idle connection timeout.</span></span> <span data-ttu-id="da7d1-168">Si es cero, o la clave no está presente, se utiliza el tiempo de espera de conexión inactiva de IIS.</span><span class="sxs-lookup"><span data-stu-id="da7d1-168">If zero, or the key is not present, the IIS idle connection timeout is used.</span></span> <span data-ttu-id="da7d1-169">Solo se usa en RPC a través de HTTP V2.</span><span class="sxs-lookup"><span data-stu-id="da7d1-169">Used only in RPC over HTTP v2.</span></span> <span data-ttu-id="da7d1-170">Cuando se realizan cambios en este valor en el proxy RPC, IIS debe reiniciarse para que el cambio surta efecto.</span><span class="sxs-lookup"><span data-stu-id="da7d1-170">When changes are made to this value on the RPC Proxy, IIS must be restarted for the change to take effect.</span></span>

\-

<span data-ttu-id="da7d1-171">**HKLM \\ software \\ Microsoft \\ RPC \\ UseProxyForIPAddrIfRDNSFails**</span><span class="sxs-lookup"><span data-stu-id="da7d1-171">**HKLM\\Software\\Microsoft\\Rpc\\UseProxyForIPAddrIfRDNSFails**</span></span>

<span data-ttu-id="da7d1-172">Cuando está presente y se establece en un valor distinto de cero, y se proporciona una dirección IP numérica como dirección del proxy RPC, un cliente RPC a través de HTTP intentará invertir la resolución de nombres y, si se produce un error, intentará conectarse al proxy RPC a través de un proxy HTTP.</span><span class="sxs-lookup"><span data-stu-id="da7d1-172">When present and set to non-zero, and a numeric IP address is provided as the RPC Proxy address, an RPC over HTTP client will attempt reverse name resolution and, if that fails, will attempt connection to the RPC Proxy through an HTTP proxy.</span></span> <span data-ttu-id="da7d1-173">Se puede usar para emular el comportamiento de Windows NT en instalaciones que requieren este comportamiento.</span><span class="sxs-lookup"><span data-stu-id="da7d1-173">Can be used to emulate Windows NT behavior on installations that require such behavior.</span></span> <span data-ttu-id="da7d1-174">Se omite para RPC a través de HTTP V2.</span><span class="sxs-lookup"><span data-stu-id="da7d1-174">Ignored for RPC over HTTP v2.</span></span> <span data-ttu-id="da7d1-175">Solo se usa cuando se usa RPC a través de HTTP v1.</span><span class="sxs-lookup"><span data-stu-id="da7d1-175">Used only when RPC over HTTP v1 is used.</span></span> <span data-ttu-id="da7d1-176">Solo se admite en Windows 2000 con Service Pack 3 (SP3) y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="da7d1-176">Supported only on Windows 2000 with Service Pack 3 (SP3) and later.</span></span>

\-

<span data-ttu-id="da7d1-177">**HKLM \\ software \\ Microsoft \\ RPC \\ RpcProxy \\ AllowAnonymous**</span><span class="sxs-lookup"><span data-stu-id="da7d1-177">**HKLM\\Software\\Microsoft\\Rpc\\RpcProxy\\AllowAnonymous**</span></span>

<span data-ttu-id="da7d1-178">DWORD.</span><span class="sxs-lookup"><span data-stu-id="da7d1-178">DWORD.</span></span> <span data-ttu-id="da7d1-179">Si no está presente o se establece en cero, el proxy RPC comprueba si se ha autenticado la conexión y si es segura (se usa SSL u otra forma de cifrado).</span><span class="sxs-lookup"><span data-stu-id="da7d1-179">When not present or set to zero, the RPC Proxy checks whether the connection is authenticated, and whether it is secure (SSL or other form of encryption is used).</span></span> <span data-ttu-id="da7d1-180">Si es false, se rechaza la conexión.</span><span class="sxs-lookup"><span data-stu-id="da7d1-180">If either is false, the connection is rejected.</span></span> <span data-ttu-id="da7d1-181">Si este valor contiene un valor distinto de cero, se permiten conexiones anónimas y no cifradas.</span><span class="sxs-lookup"><span data-stu-id="da7d1-181">If this value contains non-zero, anonymous and non-encrypted connections are allowed.</span></span> <span data-ttu-id="da7d1-182">Esta configuración es una adición a cualquier configuración del directorio virtual.</span><span class="sxs-lookup"><span data-stu-id="da7d1-182">This setting is an addition to any virtual directory settings.</span></span> <span data-ttu-id="da7d1-183">Por ejemplo, si el acceso anónimo está deshabilitado en el nivel de directorio virtual, pero **AllowAnonymous** es distinto de cero, el acceso anónimo seguirá estando bloqueado en el nivel de IIS.</span><span class="sxs-lookup"><span data-stu-id="da7d1-183">For example, if anonymous access is disabled on the virtual directory level, but **AllowAnonymous** is non-zero, anonymous access will still be blocked at the IIS level.</span></span> <span data-ttu-id="da7d1-184">Se utiliza en el proxy RPC solo en RPC a través de HTTP V2.</span><span class="sxs-lookup"><span data-stu-id="da7d1-184">Used on the RPC Proxy only in RPC over HTTP v2.</span></span> <span data-ttu-id="da7d1-185">Cuando se realizan cambios en este valor en el proxy RPC, IIS debe reiniciarse para que el cambio surta efecto.</span><span class="sxs-lookup"><span data-stu-id="da7d1-185">When changes are made to this value on the RPC Proxy, IIS must be restarted for the change to take effect.</span></span>

> [!WARNING]
> <span data-ttu-id="da7d1-186">Microsoft recomienda encarecidamente no establecer el valor de **AllowAnonymous** en sistemas de producción por motivos de seguridad.</span><span class="sxs-lookup"><span data-stu-id="da7d1-186">Microsoft strongly recommends against setting the **AllowAnonymous** value on production systems for security considerations.</span></span> <span data-ttu-id="da7d1-187">El único motivo por el que se debe establecer esta clave es realizar pruebas en redes cerradas sin acceso externo.</span><span class="sxs-lookup"><span data-stu-id="da7d1-187">The only reason this key should be set is for testing on closed networks without outside access.</span></span> <span data-ttu-id="da7d1-188">Cualquier sistema conectado a Internet y que ejecute el proxy RPC con la clave **AllowAnonymous** establecida en un valor distinto de cero puede ser vulnerable a los ataques.</span><span class="sxs-lookup"><span data-stu-id="da7d1-188">Any system connected to the Internet and running the RPC Proxy with the **AllowAnonymous** key set to a nonzero value may be vulnerable to attacks.</span></span>

 

 

 




