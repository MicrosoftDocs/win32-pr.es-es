---
description: Las funciones de red de Windows devuelven el \_ éxito de WN si se ejecuta correctamente o devuelven un valor distinto de cero único si la función encuentra un error. Además, devuelven información de error extendida mediante WNetSetLastError y SetLastError.
ms.assetid: cb9d29a1-b3a5-4440-a069-3cd1565b1699
title: Devolver valores al MPR
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8c96a5636f57d5c926af4e43e676f0b6db75d164
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104001853"
---
# <a name="returning-values-to-the-mpr"></a><span data-ttu-id="8fe05-104">Devolver valores al MPR</span><span class="sxs-lookup"><span data-stu-id="8fe05-104">Returning Values to the MPR</span></span>

<span data-ttu-id="8fe05-105">Las funciones de red de Windows devuelven el \_ éxito de WN si se ejecuta correctamente o devuelven un valor distinto de cero único si la función encuentra un error.</span><span class="sxs-lookup"><span data-stu-id="8fe05-105">The Windows Networking functions return WN\_SUCCESS on success, or they return a unique nonzero value if the function encounters an error.</span></span> <span data-ttu-id="8fe05-106">Además, devuelven información de error extendida mediante [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) y [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror).</span><span class="sxs-lookup"><span data-stu-id="8fe05-106">In addition, they return extended error information using [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) and [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror).</span></span>

<span data-ttu-id="8fe05-107">Para admitir el comportamiento anterior, las funciones de proveedor de red no deben llamar a [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) antes de devolver.</span><span class="sxs-lookup"><span data-stu-id="8fe05-107">To support the above behavior, network provider functions should not call [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) before returning.</span></span> <span data-ttu-id="8fe05-108">Esto se debe a que el MPR llama a **SetLastError** para las funciones de la API de proveedor de red después de que devuelvan.</span><span class="sxs-lookup"><span data-stu-id="8fe05-108">This is because the MPR calls **SetLastError** for the functions in the Network Provider API after they return.</span></span> <span data-ttu-id="8fe05-109">Si los proveedores de red llaman directamente a **SetLastError** , estarán realizando llamadas a funciones redundantes.</span><span class="sxs-lookup"><span data-stu-id="8fe05-109">If the network providers call **SetLastError** directly, they will be making redundant function calls.</span></span> <span data-ttu-id="8fe05-110">Las funciones de proveedor de red simplemente deben devolver un código de error.</span><span class="sxs-lookup"><span data-stu-id="8fe05-110">Network provider functions should simply return an error code.</span></span> <span data-ttu-id="8fe05-111">Los códigos de error se especifican en la descripción de la función o [los valores devueltos](network-security-return-values.md).</span><span class="sxs-lookup"><span data-stu-id="8fe05-111">The error codes are specified in the function description or [Return Values](network-security-return-values.md).</span></span> <span data-ttu-id="8fe05-112">Además, las funciones de proveedor de red pueden devolver cualquier [código de error del sistema](../debug/system-error-codes.md), como memoria insuficiente.</span><span class="sxs-lookup"><span data-stu-id="8fe05-112">Also, network provider functions may return any [System Error Codes](../debug/system-error-codes.md), such as insufficient memory.</span></span> <span data-ttu-id="8fe05-113">La única excepción es [**NPGetCaps**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps), que debe devolver una máscara que indica las funciones admitidas por el proveedor de red.</span><span class="sxs-lookup"><span data-stu-id="8fe05-113">The only exception is [**NPGetCaps**](/windows/desktop/api/Npapi/nf-npapi-npgetcaps), which should return a mask indicating the functions supported by the network provider.</span></span>

<span data-ttu-id="8fe05-114">Si una función de proveedor de red necesita devolver información de error extendida, debe llamar a [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora).</span><span class="sxs-lookup"><span data-stu-id="8fe05-114">If a network provider function needs to return extended error information, it should call [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora).</span></span> <span data-ttu-id="8fe05-115">Esta función la proporciona el sistema operativo Windows para su uso por parte de proveedores de red.</span><span class="sxs-lookup"><span data-stu-id="8fe05-115">This function is provided by the Windows operating system for use by network providers.</span></span> <span data-ttu-id="8fe05-116">Cuando el proveedor llama a **WNetSetLastError**, puede establecer una cadena que contenga información adicional sobre el error.</span><span class="sxs-lookup"><span data-stu-id="8fe05-116">When the provider calls **WNetSetLastError**, it can set a string containing additional information about the error.</span></span> <span data-ttu-id="8fe05-117">Esta información se almacena por subproceso.</span><span class="sxs-lookup"><span data-stu-id="8fe05-117">This information is stored on a per-thread basis.</span></span> <span data-ttu-id="8fe05-118">Esto es análogo a [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) para aplicaciones Windows.</span><span class="sxs-lookup"><span data-stu-id="8fe05-118">This is analogous to [**SetLastError**](/windows/win32/api/errhandlingapi/nf-errhandlingapi-setlasterror) for Windows applications.</span></span> <span data-ttu-id="8fe05-119">El sistema operativo Windows llama a **WNetSetLastError** para buscar una cadena almacenada mediante **WNetSetLastError** y, si se encuentra, devuelve la información de error extendida a la aplicación que realiza la llamada que inició la solicitud de red.</span><span class="sxs-lookup"><span data-stu-id="8fe05-119">The Windows operating system calls **WNetSetLastError** to check for a string stored using **WNetSetLastError** and, if found, returns the extended error information to the calling application that initiated the network request.</span></span>

> [!Note]  
> <span data-ttu-id="8fe05-120">El prefijo de WNet de [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) es engañoso, ya que esta API, a diferencia de **WNetSetLastError**, no forma parte del conjunto de API de redes de Windows.</span><span class="sxs-lookup"><span data-stu-id="8fe05-120">The WNet prefix of [**WNetSetLastError**](/windows/desktop/api/Npapi/nf-npapi-wnetsetlasterrora) is misleading since this API, unlike **WNetSetLastError**, is not part of the Windows Networking API set.</span></span> <span data-ttu-id="8fe05-121">**WNetSetLastError** está pensado para su uso únicamente por parte de proveedores de red.</span><span class="sxs-lookup"><span data-stu-id="8fe05-121">**WNetSetLastError** is intended for use only by network providers.</span></span> <span data-ttu-id="8fe05-122">El nombre, **WNetSetLastError**, se conserva por compatibilidad con los proveedores existentes.</span><span class="sxs-lookup"><span data-stu-id="8fe05-122">The name, **WNetSetLastError**, is retained for compatibility with existing providers.</span></span>

 

 

 
