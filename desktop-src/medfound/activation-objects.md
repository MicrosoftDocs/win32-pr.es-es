---
description: Objetos de activación
ms.assetid: 767d5f1c-2b8d-43b6-916b-035129e93204
title: Objetos de activación
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: aa8741cbfa8bc3801a23b4976e60c0a3ad028b0e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104154465"
---
# <a name="activation-objects"></a><span data-ttu-id="5db0f-103">Objetos de activación</span><span class="sxs-lookup"><span data-stu-id="5db0f-103">Activation Objects</span></span>

<span data-ttu-id="5db0f-104">Un *objeto de activación* es un objeto auxiliar que se usa para crear otro objeto, algo similar a un generador de clases.</span><span class="sxs-lookup"><span data-stu-id="5db0f-104">An *activation object* is a helper object that is used to create another object, somewhat similar to a class factory.</span></span> <span data-ttu-id="5db0f-105">Los objetos de activación exponen la interfaz [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) .</span><span class="sxs-lookup"><span data-stu-id="5db0f-105">Activation objects expose the [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) interface.</span></span>

<span data-ttu-id="5db0f-106">Un objeto de activación le permite diferir la creación del objeto de destino, ya que puede incluir en un puntero [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) sin crear el objeto de destino.</span><span class="sxs-lookup"><span data-stu-id="5db0f-106">An activation object lets you defer the creation of the target object, because you can hold onto an [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointer without creating the target object.</span></span> <span data-ttu-id="5db0f-107">Los objetos de activación también se pueden serializar y, por tanto, se usan para crear el objeto de destino en otro proceso.</span><span class="sxs-lookup"><span data-stu-id="5db0f-107">Activation objects can also be serialized, and thus used to create the target object in another process.</span></span> <span data-ttu-id="5db0f-108">Por ejemplo, los objetos de activación se usan para calcular las referencias de los componentes de canalización desde el proceso de aplicación al proceso de la ruta de acceso a medios protegidos (PMP).</span><span class="sxs-lookup"><span data-stu-id="5db0f-108">For example, activation objects are used to marshal pipeline components from the application process to the protected media path (PMP) process.</span></span> <span data-ttu-id="5db0f-109">Los objetos de activación también se usan en ciertas funciones de enumeración que devuelven una lista de punteros **IMFActivate** .</span><span class="sxs-lookup"><span data-stu-id="5db0f-109">Activation objects are also used by certain enumeration functions that return a list of **IMFActivate** pointers.</span></span> <span data-ttu-id="5db0f-110">Antes de que la aplicación cree el objeto de destino, puede obtener información sobre el objeto examinando los atributos en el objeto de activación.</span><span class="sxs-lookup"><span data-stu-id="5db0f-110">Before the application creates the target object, it can get information about the object by examining attributes on the activation object.</span></span>

<span data-ttu-id="5db0f-111">Para crear el objeto de destino desde un objeto de activación, llame al método [**IMFActivate:: ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) .</span><span class="sxs-lookup"><span data-stu-id="5db0f-111">To create the target object from an activation object, call the [**IMFActivate::ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) method.</span></span> <span data-ttu-id="5db0f-112">El llamador debe llamar a [**IMFActivate:: ShutdownObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-shutdownobject) cuando termine de usar el objeto creado.</span><span class="sxs-lookup"><span data-stu-id="5db0f-112">The caller must call [**IMFActivate::ShutdownObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-shutdownobject) when it is done using the created object.</span></span> <span data-ttu-id="5db0f-113">A menudo, la aplicación crea el objeto de activación y la sesión multimedia llama a **ActivateObject**.</span><span class="sxs-lookup"><span data-stu-id="5db0f-113">Often the application creates the activation object, and the Media Session calls **ActivateObject**.</span></span> <span data-ttu-id="5db0f-114">En ese caso, la sesión multimedia, no la aplicación, debe llamar a **ShutdownObject**.</span><span class="sxs-lookup"><span data-stu-id="5db0f-114">In that case, the Media Session, not the application, must call **ShutdownObject**.</span></span> <span data-ttu-id="5db0f-115">En otras situaciones, la aplicación recibe un puntero [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) desde la sesión multimedia y la aplicación llama a **ActivateObject** y **ShutdownObject**.</span><span class="sxs-lookup"><span data-stu-id="5db0f-115">In other situations, the application receives an [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointer from the Media Session, and the application calls **ActivateObject** and **ShutdownObject**.</span></span> <span data-ttu-id="5db0f-116">(Por ejemplo, vea [Cómo reproducir archivos multimedia protegidos](how-to-play-protected-media-files.md)).</span><span class="sxs-lookup"><span data-stu-id="5db0f-116">(For example, see [How to Play Protected Media Files](how-to-play-protected-media-files.md).)</span></span>

<span data-ttu-id="5db0f-117">Los objetos de activación pueden tener atributos y la interfaz [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) hereda la interfaz [**IMFAttributes**](/windows/desktop/api/mfobjects/nn-mfobjects-imfattributes) .</span><span class="sxs-lookup"><span data-stu-id="5db0f-117">Activation objects can have attributes, and the [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) interface inherits the [**IMFAttributes**](/windows/desktop/api/mfobjects/nn-mfobjects-imfattributes) interface.</span></span> <span data-ttu-id="5db0f-118">Algunos objetos de activación usan atributos para configurar el objeto creado.</span><span class="sxs-lookup"><span data-stu-id="5db0f-118">Some activation objects use attributes to configure the created object.</span></span> <span data-ttu-id="5db0f-119">Los atributos específicos que admite cada objeto se documentan en la referencia de la función de creación del objeto de activación.</span><span class="sxs-lookup"><span data-stu-id="5db0f-119">The specific attributes supported by each object are documented in the reference for that activation object's creation function.</span></span> <span data-ttu-id="5db0f-120">Establezca los atributos mediante el puntero **IMFActivate** que recibe de la función.</span><span class="sxs-lookup"><span data-stu-id="5db0f-120">Set the attributes using the **IMFActivate** pointer that you receive from the function.</span></span>

<span data-ttu-id="5db0f-121">Para la reproducción protegida, se calculan las referencias de los objetos de activación al proceso de PMP.</span><span class="sxs-lookup"><span data-stu-id="5db0f-121">For protected playback, activation objects are marshaled to the PMP process.</span></span> <span data-ttu-id="5db0f-122">Para admitir la serialización, un objeto de activación debe exponer la interfaz **IPersistStream** .</span><span class="sxs-lookup"><span data-stu-id="5db0f-122">To support marshaling, an activation object must expose the **IPersistStream** interface.</span></span> <span data-ttu-id="5db0f-123">Además, tanto el objeto de activación como el objeto creado deben ser componentes de confianza si el PMP se está ejecutando en un proceso protegido.</span><span class="sxs-lookup"><span data-stu-id="5db0f-123">In addition, both the activation object and the created object must be trusted components if the PMP is running in a protected process.</span></span> <span data-ttu-id="5db0f-124">Esto no es un requisito cuando el PMP se carga en un proceso sin protección.</span><span class="sxs-lookup"><span data-stu-id="5db0f-124">This is not a requirement when the PMP is loaded in an unprotected process.</span></span>

<span data-ttu-id="5db0f-125">Para usar un objeto de canalización personalizado (como un receptor de medios) dentro del proceso de PMP, debe implementar un objeto de activación para el objeto de canalización:</span><span class="sxs-lookup"><span data-stu-id="5db0f-125">To use a custom pipeline object (such as a media sink) inside the PMP process, you must implement an activation object for your pipeline object:</span></span>

-   <span data-ttu-id="5db0f-126">El objeto de activación debe exponer [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) y **IPersistStream**.</span><span class="sxs-lookup"><span data-stu-id="5db0f-126">The activation object must expose [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) and **IPersistStream**.</span></span>
-   <span data-ttu-id="5db0f-127">El método **IPersist:: GetClassID** del objeto de activación debe devolver el CLSID del objeto de activación.</span><span class="sxs-lookup"><span data-stu-id="5db0f-127">The activation object's **IPersist::GetClassID** method must return the activation object's CLSID.</span></span>
-   <span data-ttu-id="5db0f-128">Opcionalmente, puede implementar los métodos **IPersistStream:: Save** y **IPersistStream:: Load** para calcular las referencias de los datos que necesita para configurar el objeto de activación.</span><span class="sxs-lookup"><span data-stu-id="5db0f-128">Optionally, you can implement the **IPersistStream::Save** and **IPersistStream::Load** methods to marshal any data that you need to configure your activation object.</span></span>

<span data-ttu-id="5db0f-129">Cuando la sesión multimedia carga la topología dentro del proceso de PMP, llama a **CoCreateInstance** para crear una nueva instancia del objeto de activación.</span><span class="sxs-lookup"><span data-stu-id="5db0f-129">When the Media Session loads the topology inside the PMP process, it calls **CoCreateInstance** to create a new instance of your activation object.</span></span> <span data-ttu-id="5db0f-130">A continuación, llama a [**IMFActivate:: ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) para crear el objeto de canalización.</span><span class="sxs-lookup"><span data-stu-id="5db0f-130">Then it calls [**IMFActivate::ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) to create the pipeline object.</span></span>

## <a name="related-topics"></a><span data-ttu-id="5db0f-131">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="5db0f-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5db0f-132">API de Media Foundation Platform</span><span class="sxs-lookup"><span data-stu-id="5db0f-132">Media Foundation Platform APIs</span></span>](media-foundation-platform-apis.md)
</dt> <dt>

[<span data-ttu-id="5db0f-133">**IMFActivate**</span><span class="sxs-lookup"><span data-stu-id="5db0f-133">**IMFActivate**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate)
</dt> </dl>

 

 



