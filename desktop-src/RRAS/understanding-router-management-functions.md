---
title: Descripción de las funciones de administración de enrutadores
description: En las secciones siguientes se describen los diferentes tipos de funciones de administración de enrutadores y lo que debe saber para usarlos de forma eficaz.
ms.assetid: 2f6831f2-39be-43b1-80bd-9a36c0f8a2af
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: be4b1891bc55b80a18a6d0dd928044da1e0e9709
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "105676463"
---
# <a name="understanding-router-management-functions"></a><span data-ttu-id="25ddc-103">Descripción de las funciones de administración de enrutadores</span><span class="sxs-lookup"><span data-stu-id="25ddc-103">Understanding Router Management Functions</span></span>

<span data-ttu-id="25ddc-104">En las secciones siguientes se describen los diferentes tipos de funciones de administración de enrutadores y lo que debe saber para usarlos de forma eficaz.</span><span class="sxs-lookup"><span data-stu-id="25ddc-104">The following sections discuss the different types of router management functions and what you should know to use them effectively.</span></span>

<span data-ttu-id="25ddc-105">Todas las funciones de administración del enrutador requieren privilegios de administrador.</span><span class="sxs-lookup"><span data-stu-id="25ddc-105">All router management functions require administrator privileges.</span></span> <span data-ttu-id="25ddc-106">Un usuario del grupo usuarios avanzados no tiene privilegios suficientes para usar las funciones de administración del enrutador.</span><span class="sxs-lookup"><span data-stu-id="25ddc-106">A user in the Power User group does not have sufficient privileges to use the router management functions.</span></span>

## <a name="the-different-classes-of-router-management-functions"></a><span data-ttu-id="25ddc-107">Las distintas clases de funciones de administración del enrutador</span><span class="sxs-lookup"><span data-stu-id="25ddc-107">The Different Classes of Router Management Functions</span></span>

<span data-ttu-id="25ddc-108">Las funciones de administración del enrutador se pueden dividir en las funciones de administración y en las funciones de configuración.</span><span class="sxs-lookup"><span data-stu-id="25ddc-108">The router management functions can be divided up into the administration functions and the configuration functions.</span></span> <span data-ttu-id="25ddc-109">Las [funciones de administración](router-administration-functions.md) tienen un prefijo de MprAdmin y las [funciones de configuración](router-configuration-functions.md) tienen un prefijo de MprConfig.</span><span class="sxs-lookup"><span data-stu-id="25ddc-109">The [administration functions](router-administration-functions.md) have a prefix of MprAdmin and the [configuration functions](router-configuration-functions.md) have a prefix of MprConfig.</span></span> <span data-ttu-id="25ddc-110">A pesar de la denominación, ambos conjuntos de funciones se usan para la administración de enrutadores.</span><span class="sxs-lookup"><span data-stu-id="25ddc-110">Despite the naming, both sets of functions are used for router management.</span></span> <span data-ttu-id="25ddc-111">Las funciones de MprAdmin funcionan directamente en el enrutador en ejecución.</span><span class="sxs-lookup"><span data-stu-id="25ddc-111">The MprAdmin functions operate directly on the running router.</span></span> <span data-ttu-id="25ddc-112">Las funciones MprConfig tienen una funcionalidad similar, pero operan en la configuración del enrutador almacenada en el registro.</span><span class="sxs-lookup"><span data-stu-id="25ddc-112">The MprConfig functions have similar functionality, but operate on the router configuration stored in the registry.</span></span> <span data-ttu-id="25ddc-113">Ambos tipos de funciones pasan [bloques de información](router-information-functions.md).</span><span class="sxs-lookup"><span data-stu-id="25ddc-113">Both types of functions pass [information blocks](router-information-functions.md).</span></span>

<span data-ttu-id="25ddc-114">Las funciones de administración del enrutador también se pueden dividir en función de los componentes del enrutador que administren: interfaces, administradores de enrutadores o clientes del administrador de enrutadores.</span><span class="sxs-lookup"><span data-stu-id="25ddc-114">The router management functions can also be divided up based on what components of the router they manage: interfaces, router managers, or router manager clients.</span></span>

<span data-ttu-id="25ddc-115">Las [funciones de interfaz de enrutador](router-interface-functions.md) tienen un prefijo de MprAdminInterface o MprConfigInterface.</span><span class="sxs-lookup"><span data-stu-id="25ddc-115">The [router interface functions](router-interface-functions.md) have a prefix of either MprAdminInterface or MprConfigInterface.</span></span> <span data-ttu-id="25ddc-116">Use estas funciones para tener acceso a las interfaces.</span><span class="sxs-lookup"><span data-stu-id="25ddc-116">Use these functions to access interfaces.</span></span> <span data-ttu-id="25ddc-117">Las [funciones del administrador de enrutadores](router-manager-transport-functions.md) tienen un prefijo de MprAdminTransport o MprConfigTransport.</span><span class="sxs-lookup"><span data-stu-id="25ddc-117">The [router manager functions](router-manager-transport-functions.md) have a prefix of MprAdminTransport or MprConfigTransport.</span></span> <span data-ttu-id="25ddc-118">Use estas funciones para tener acceso a los administradores del enrutador.</span><span class="sxs-lookup"><span data-stu-id="25ddc-118">Use these functions to access the router managers.</span></span> <span data-ttu-id="25ddc-119">Por último, las [funciones de cliente del administrador de enrutador](router-manager-client-interfacetransport-functions.md) tienen un prefijo de MprAdminInterfaceTransport o MprConfigInterfaceTransport.</span><span class="sxs-lookup"><span data-stu-id="25ddc-119">Lastly, the [router manager client functions](router-manager-client-interfacetransport-functions.md) have a prefix of MprAdminInterfaceTransport or MprConfigInterfaceTransport.</span></span> <span data-ttu-id="25ddc-120">Use estas funciones para tener acceso a los clientes que se ejecutan en el enrutador.</span><span class="sxs-lookup"><span data-stu-id="25ddc-120">Use these functions to access the clients running on the router.</span></span>

<span data-ttu-id="25ddc-121">Un subconjunto de las funciones de MprAdmin son las [funciones MprAdminMib](/windows/desktop/RRAS/about-router-management-with-mib).</span><span class="sxs-lookup"><span data-stu-id="25ddc-121">A subset of MprAdmin functions are the [MprAdminMib functions](/windows/desktop/RRAS/about-router-management-with-mib).</span></span> <span data-ttu-id="25ddc-122">También funcionan solo en la ruta en ejecución.</span><span class="sxs-lookup"><span data-stu-id="25ddc-122">These also operate on the running route alone.</span></span> <span data-ttu-id="25ddc-123">Sin embargo, estas funciones no pasan bloques de información.</span><span class="sxs-lookup"><span data-stu-id="25ddc-123">However, these functions do not pass information blocks.</span></span> <span data-ttu-id="25ddc-124">Estas funciones proporcionan una mayor flexibilidad al diseñador de protocolos, especialmente para recuperar información que no sea de configuración, como las estadísticas.</span><span class="sxs-lookup"><span data-stu-id="25ddc-124">These functions provide additional flexibility to the protocol designer, especially for retrieving non-configuration information, such as statistics.</span></span>

## <a name="ensuring-that-changes-occur-immediately-and-are-persistent"></a><span data-ttu-id="25ddc-125">Asegurarse de que los cambios se producen inmediatamente y son persistentes</span><span class="sxs-lookup"><span data-stu-id="25ddc-125">Ensuring that Changes Occur Immediately and are Persistent</span></span>

<span data-ttu-id="25ddc-126">Un programador puede realizar cambios en la configuración del enrutador directamente mediante las [funciones de configuración del enrutador](router-configuration-functions.md).</span><span class="sxs-lookup"><span data-stu-id="25ddc-126">A developer can make changes to the router configuration directly using the [router configuration functions](router-configuration-functions.md).</span></span> <span data-ttu-id="25ddc-127">Sin embargo, los cambios que se realicen en la configuración no surtirán efecto hasta que se reinicie el enrutador, ya que es el único momento en que la DIM lee la configuración del registro.</span><span class="sxs-lookup"><span data-stu-id="25ddc-127">However, any changes made to the configuration do not take effect until the router is restarted, since this is the only time that DIM reads the configuration from the registry.</span></span>

<span data-ttu-id="25ddc-128">Un desarrollador puede realizar cambios en el enrutador en ejecución mediante las [funciones de administración del enrutador](router-administration-functions.md).</span><span class="sxs-lookup"><span data-stu-id="25ddc-128">A developer can make changes to the running router by using the [router administration functions](router-administration-functions.md).</span></span> <span data-ttu-id="25ddc-129">Sin embargo, estos cambios no son persistentes: dado que no se han escrito en el registro, se pierden si el enrutador se reinicia.</span><span class="sxs-lookup"><span data-stu-id="25ddc-129">However, these changes are not persistent: since they have not been written to the registry, they are lost if the router is restarted.</span></span>

<span data-ttu-id="25ddc-130">Para realizar cambios que son inmediatos y persistentes, un desarrollador necesita usar las funciones de configuración de enrutador y de administración del enrutador.</span><span class="sxs-lookup"><span data-stu-id="25ddc-130">In order to make changes that are both immediate and persistent, a developer needs to use both the router administration and the router configuration functions.</span></span> <span data-ttu-id="25ddc-131">Si el enrutador no se está ejecutando, el desarrollador solo necesita llamar a las funciones de configuración de enrutador adecuadas.</span><span class="sxs-lookup"><span data-stu-id="25ddc-131">If the router is not running, the developer need only call the appropriate router configuration functions.</span></span>

<span data-ttu-id="25ddc-132">Para consultar información del enrutador en ejecución, use las funciones de administración del enrutador.</span><span class="sxs-lookup"><span data-stu-id="25ddc-132">For querying information from the running router, use the router administration functions.</span></span> <span data-ttu-id="25ddc-133">Si el enrutador no se está ejecutando, consulte la información con las funciones de configuración del enrutador.</span><span class="sxs-lookup"><span data-stu-id="25ddc-133">If the router is not running, query information using the router configuration functions.</span></span>

<span data-ttu-id="25ddc-134">Las funciones [**MprAdminInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacecreate) y [**MprAdminInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacesetinfo) admiten la estructura de la [**interfaz de MPR \_ \_ 2**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_2) .</span><span class="sxs-lookup"><span data-stu-id="25ddc-134">The [**MprAdminInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacecreate) and [**MprAdminInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mpradmininterfacesetinfo) functions support the [**MPR\_INTERFACE\_2**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_2) structure.</span></span> <span data-ttu-id="25ddc-135">Sin embargo, [**MprConfigInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacecreate) y [**MprConfigInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacesetinfo) no lo hacen.</span><span class="sxs-lookup"><span data-stu-id="25ddc-135">However, [**MprConfigInterfaceCreate**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacecreate) and [**MprConfigInterfaceSetInfo**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfiginterfacesetinfo) do not.</span></span> <span data-ttu-id="25ddc-136">Para crear una interfaz de marcado a petición que sea persistente después de reiniciar, llame a **MprAdminInterfaceCreate** con la **interfaz de MPR \_ \_ 2** y, a continuación, llame a **MprConfigInterfaceCreate** con la interfaz de [**MPR \_ \_ 0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_0) o la [**interfaz de MPR \_ \_ 1**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_1).</span><span class="sxs-lookup"><span data-stu-id="25ddc-136">In order to create a demand-dial interface that is persistent after a reboot, call **MprAdminInterfaceCreate** with **MPR\_INTERFACE\_2**, then call **MprConfigInterfaceCreate** with [**MPR\_INTERFACE\_0**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_0) or [**MPR\_INTERFACE\_1**](/windows/desktop/api/Mprapi/ns-mprapi-mpr_interface_1).</span></span> <span data-ttu-id="25ddc-137">Del mismo modo, para realizar cambios persistentes en una interfaz de marcado a petición, llame a **MprAdminInterfaceSetInfo** con la **interfaz de MPR \_ \_ 2** y, a continuación, llame a **MprConfigInterfaceSetInfo** con la interfaz de **MPR \_ \_ 0** o la **interfaz de MPR \_ \_ 1**.</span><span class="sxs-lookup"><span data-stu-id="25ddc-137">Similarly, to make persistent changes to a demand-dial interface, call **MprAdminInterfaceSetInfo** with **MPR\_INTERFACE\_2**, then call **MprConfigInterfaceSetInfo** with **MPR\_INTERFACE\_0** or **MPR\_INTERFACE\_1**.</span></span>

## <a name="using-router-administration-and-configuration-functions-remotely"></a><span data-ttu-id="25ddc-138">Usar funciones de configuración y administración de enrutadores de forma remota</span><span class="sxs-lookup"><span data-stu-id="25ddc-138">Using Router Administration and Configuration Functions Remotely</span></span>

<span data-ttu-id="25ddc-139">La mayoría de las funciones de configuración y administración del enrutador se pueden llamar en un equipo distinto del que se está administrando.</span><span class="sxs-lookup"><span data-stu-id="25ddc-139">Most of the router administration and configuration functions can be called on a computer other than the one being administered.</span></span> <span data-ttu-id="25ddc-140">Estas funciones toman como parámetro un identificador del servicio de enrutador o la configuración que se va a administrar.</span><span class="sxs-lookup"><span data-stu-id="25ddc-140">These functions take as a parameter, a handle to the router service or configuration to administer.</span></span> <span data-ttu-id="25ddc-141">Las funciones de administración utilizan RPC (llamada a procedimiento remoto) para comunicarse con el servicio de enrutamiento especificado por el identificador.</span><span class="sxs-lookup"><span data-stu-id="25ddc-141">The administration functions use RPC (Remote Procedure Call) to communicate with the routing service specified by the handle.</span></span> <span data-ttu-id="25ddc-142">Las funciones de configuración escriben y leen en el registro del equipo especificado por el identificador.</span><span class="sxs-lookup"><span data-stu-id="25ddc-142">The configuration functions write to and read from the registry of the computer specified by the handle.</span></span>

<span data-ttu-id="25ddc-143">Para administrar el servicio de enrutamiento en un equipo remoto, llame primero a [**MprAdminIsServiceRunning**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminisservicerunning) para comprobar que el servicio se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="25ddc-143">To administer the routing service on a remote machine first call [**MprAdminIsServiceRunning**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminisservicerunning) to verify that the service is running.</span></span> <span data-ttu-id="25ddc-144">A continuación, llame a [**MprAdminServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminserverconnect) para obtener el identificador.</span><span class="sxs-lookup"><span data-stu-id="25ddc-144">Then call [**MprAdminServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mpradminserverconnect) to obtain the handle.</span></span> <span data-ttu-id="25ddc-145">Si el servicio de enrutador no se está ejecutando en el equipo remoto, se producirá un error en todas las llamadas de administración del enrutador (MprAdmin).</span><span class="sxs-lookup"><span data-stu-id="25ddc-145">If the router service is not running on the remote machine, all router administration (MprAdmin) calls fail.</span></span>

<span data-ttu-id="25ddc-146">Para realizar cambios en la configuración del enrutador de un equipo remoto, obtenga un identificador mediante una llamada a la función [**MprConfigServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfigserverconnect) .</span><span class="sxs-lookup"><span data-stu-id="25ddc-146">To make changes to the router configuration on a remote machine obtain a handle by calling the [**MprConfigServerConnect**](/windows/desktop/api/Mprapi/nf-mprapi-mprconfigserverconnect) function.</span></span>

 

 