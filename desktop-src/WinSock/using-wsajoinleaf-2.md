---
description: Como se mencionó anteriormente, la función WSAJoinLeaf se usa para unir un nodo hoja a una sesión multipoint.
ms.assetid: eaa1593a-36eb-4d92-a3d9-91566fc0216b
title: Usar WSAJoinLeaf
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 027262a117edc5541a4809481aa4607837343b4f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "103910298"
---
# <a name="using-wsajoinleaf"></a><span data-ttu-id="f8f67-103">Usar WSAJoinLeaf</span><span class="sxs-lookup"><span data-stu-id="f8f67-103">Using WSAJoinLeaf</span></span>

<span data-ttu-id="f8f67-104">Como se mencionó anteriormente, la función [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) se usa para unir un nodo hoja a una sesión multipoint.</span><span class="sxs-lookup"><span data-stu-id="f8f67-104">As mentioned previously, the function [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) is used to join a leaf node into a multipoint session.</span></span> <span data-ttu-id="f8f67-105">**WSAJoinLeaf** tiene los mismos parámetros y semántica que [**WSAConnect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaconnect) , salvo que devuelve un descriptor de socket (como en [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept)) y tiene un parámetro *dwFlags* adicional.</span><span class="sxs-lookup"><span data-stu-id="f8f67-105">**WSAJoinLeaf** has the same parameters and semantics as [**WSAConnect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaconnect) except that it returns a socket descriptor (as in [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept)), and it has an additional *dwFlags* parameter.</span></span>

<span data-ttu-id="f8f67-106">El parámetro *dwFlags* se usa para indicar si el socket actuará solo como remitente, solo como receptor o ambos.</span><span class="sxs-lookup"><span data-stu-id="f8f67-106">The *dwFlags* parameter is used to indicate whether the socket will be acting only as a sender, only as a receiver, or both.</span></span> <span data-ttu-id="f8f67-107">Solo se pueden usar Multipoint Sockets para los *parámetros de* entrada de esta función.</span><span class="sxs-lookup"><span data-stu-id="f8f67-107">Only multipoint sockets may be used for input parameter *s* in this function.</span></span> <span data-ttu-id="f8f67-108">Si el socket Multipoint está en modo de no bloqueo, el descriptor de socket devuelto no se puede usar hasta que \_ se reciba la indicación FD Connect correspondiente.</span><span class="sxs-lookup"><span data-stu-id="f8f67-108">If the multipoint socket is in nonblocking mode, the returned socket descriptor is not usable until after a corresponding FD\_CONNECT indication is received.</span></span> <span data-ttu-id="f8f67-109">Una aplicación raíz en una sesión Multipoint puede llamar a [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) una o más veces para agregar un número de nodos hoja; sin embargo, puede que al menos una solicitud de conexión multipunto esté pendiente a la vez.</span><span class="sxs-lookup"><span data-stu-id="f8f67-109">A root application in a multipoint session may call [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) one or more times in order to add a number of leaf nodes, however at most one multipoint connection request may be outstanding at a time.</span></span>

<span data-ttu-id="f8f67-110">El descriptor de socket devuelto por [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) varía en función de si el descriptor de *socket de entrada* es una raíz de c \_ o una hoja de c \_ .</span><span class="sxs-lookup"><span data-stu-id="f8f67-110">The socket descriptor returned by [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) differs depending on whether the input socket descriptor, *s*, is a c\_root or a c\_leaf.</span></span> <span data-ttu-id="f8f67-111">Cuando se usa con un \_ socket raíz de c, el parámetro de *nombre* designa un nodo de hoja determinado que se va a agregar y el descriptor de socket devuelto es un \_ socket hoja de c que corresponde al nodo hoja recién agregado.</span><span class="sxs-lookup"><span data-stu-id="f8f67-111">When used with a c\_root socket, the *name* parameter designates a particular leaf node to be added and the returned socket descriptor is a c\_leaf socket corresponding to the newly added leaf node.</span></span> <span data-ttu-id="f8f67-112">No está diseñado para el intercambio de datos multipunto, sino que se usa para recibir las \_ indicaciones FD xxx (por ejemplo, \_ el cierre FD) para la conexión que existe en la hoja de c determinada \_ .</span><span class="sxs-lookup"><span data-stu-id="f8f67-112">It is not intended to be used for the exchange of multipoint data, but rather it is used to receive FD\_XXX indications (for example, FD\_CLOSE) for the connection that exists to the particular c\_leaf.</span></span> <span data-ttu-id="f8f67-113">Algunas implementaciones de Multipoint también pueden permitir el uso de este socket para chats laterales entre la raíz y un nodo hoja individual.</span><span class="sxs-lookup"><span data-stu-id="f8f67-113">Some multipoint implementations may also allow this socket to be used for side chats between the root and an individual leaf node.</span></span> <span data-ttu-id="f8f67-114">\_Se recibe una indicación FD de cierre para este socket si el nodo hoja correspondiente llama a [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) para quitarlo de la sesión de multipoint.</span><span class="sxs-lookup"><span data-stu-id="f8f67-114">An FD\_CLOSE indication is received for this socket if the corresponding leaf node calls [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) to drop out of the multipoint session.</span></span> <span data-ttu-id="f8f67-115">Simétricamente, al invocar **closesocket** en el \_ socket hoja de c devuelto desde **WSAJoinLeaf** , el socket del nodo hoja correspondiente obtiene una \_ notificación FD Close.</span><span class="sxs-lookup"><span data-stu-id="f8f67-115">Symmetrically, invoking **closesocket** on the c\_leaf socket returned from **WSAJoinLeaf** causes the socket in the corresponding leaf node to get an FD\_CLOSE notification.</span></span>

<span data-ttu-id="f8f67-116">Cuando [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) se invoca con un socket de \_ hoja de c, el parámetro *Name* contiene la dirección de la aplicación raíz (para un esquema de control con raíz) o una sesión de Multipoint existente (esquema de control sin raíz) y el descriptor de sockets devuelto es el mismo que el descriptor de socket de entrada.</span><span class="sxs-lookup"><span data-stu-id="f8f67-116">When [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) is invoked with a c\_leaf socket, the *name* parameter contains the address of the root application (for a rooted control scheme) or an existing multipoint session (nonrooted control scheme), and the returned socket descriptor is the same as the input socket descriptor.</span></span> <span data-ttu-id="f8f67-117">En un esquema de control con raíz, la aplicación raíz coloca su \_ socket raíz de c en modo de escucha mediante una llamada a [**Listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen).</span><span class="sxs-lookup"><span data-stu-id="f8f67-117">In a rooted control scheme, the root application puts its c\_root socket in listening mode by calling [**listen**](/windows/desktop/api/Winsock2/nf-winsock2-listen).</span></span> <span data-ttu-id="f8f67-118">La notificación de aceptación de FD estándar \_ se entrega cuando el nodo hoja solicita unirse a la sesión de multipoint.</span><span class="sxs-lookup"><span data-stu-id="f8f67-118">The standard FD\_ACCEPT notification is delivered when the leaf node requests to join itself to the multipoint session.</span></span> <span data-ttu-id="f8f67-119">La aplicación raíz usa las funciones de [**Accept**](/windows/desktop/api/Winsock2/nf-winsock2-accept) / [**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) habituales para admitir el nuevo nodo hoja.</span><span class="sxs-lookup"><span data-stu-id="f8f67-119">The root application uses the usual [**accept**](/windows/desktop/api/Winsock2/nf-winsock2-accept)/[**WSAAccept**](/windows/desktop/api/Winsock2/nf-winsock2-wsaaccept) functions to admit the new leaf node.</span></span> <span data-ttu-id="f8f67-120">El valor devuelto de **Accept** o **WSAAccept** es también un \_ descriptor de socket de hoja de c como el devuelto por **WSAJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="f8f67-120">The value returned from either **accept** or **WSAAccept** is also a c\_leaf socket descriptor just like those returned from **WSAJoinLeaf**.</span></span> <span data-ttu-id="f8f67-121">Para dar cabida a esquemas Multipoint que permitan combinaciones iniciadas por raíz y iniciadas por hojas, es aceptable que un \_ socket raíz de c que ya esté en modo de escucha se use como entrada para **WSAJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="f8f67-121">To accommodate multipoint schemes that allow both root-initiated and leaf-initiated joins, it is acceptable for a c\_root socket that is already in listening mode to be used as input to **WSAJoinLeaf**.</span></span>

<span data-ttu-id="f8f67-122">Una aplicación de Multipoint root es generalmente responsable del desmontaje ordenado de una sesión de multipoint.</span><span class="sxs-lookup"><span data-stu-id="f8f67-122">A multipoint root application is generally responsible for the orderly dismantling of a multipoint session.</span></span> <span data-ttu-id="f8f67-123">Este tipo de aplicación puede usar [**Shutdown**](/windows/desktop/api/winsock/nf-winsock-shutdown) o [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) en un \_ socket raíz de c para producir todos los sockets de hoja de c asociados \_ , incluidos los devueltos de [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) y sus sockets de hoja de c correspondientes \_ en los nodos de hoja remotos, para obtener la \_ notificación FD Close.</span><span class="sxs-lookup"><span data-stu-id="f8f67-123">Such an application may use [**shutdown**](/windows/desktop/api/winsock/nf-winsock-shutdown) or [**closesocket**](/windows/desktop/api/winsock/nf-winsock-closesocket) on a c\_root socket to cause all of the associated c\_leaf sockets, including those returned from [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) and their corresponding c\_leaf sockets in the remote leaf nodes, to get FD\_CLOSE notification.</span></span>

 

 



