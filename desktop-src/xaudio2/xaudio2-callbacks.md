---
description: XAudio2 puede llamar a las funciones proporcionadas por el cliente para notificarle de forma asincrónica ciertos eventos que tienen lugar en el subproceso de procesamiento de audio.
ms.assetid: 4fbd4229-f7ac-33b3-b4b7-f09150a60598
title: Devoluciones de llamadas de XAudio2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4ee191ad8c15d238a065c837c6fb192befbe7a51
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104361561"
---
# <a name="xaudio2-callbacks"></a><span data-ttu-id="a9f6e-103">Devoluciones de llamadas de XAudio2</span><span class="sxs-lookup"><span data-stu-id="a9f6e-103">XAudio2 Callbacks</span></span>

<span data-ttu-id="a9f6e-104">XAudio2 puede llamar a las funciones proporcionadas por el cliente para notificarle de forma asincrónica ciertos eventos que tienen lugar en el subproceso de procesamiento de audio.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-104">XAudio2 can call functions provided by the client to notify it asynchronously of certain events taking place in the audio processing thread.</span></span> <span data-ttu-id="a9f6e-105">Estas devoluciones de llamada pueden ser globales o específicas para una voz de origen determinada.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-105">These callbacks can be global or specific to a given source voice.</span></span> <span data-ttu-id="a9f6e-106">Para recibir devoluciones de llamada del motor global, el cliente debe proporcionar una instancia de una clase que implemente la interfaz [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) al inicializar XAudio2.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-106">To receive global engine callbacks, the client must provide an instance of a class implementing the [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) interface when initializing XAudio2.</span></span> <span data-ttu-id="a9f6e-107">Para recibir devoluciones de llamada de voz de origen, el cliente debe proporcionar una instancia de una clase que implemente la interfaz [**IXAudio2VoiceCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2voicecallback) al crear voces de origen.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-107">To receive source voice callbacks, the client must provide an instance of a class implementing the [**IXAudio2VoiceCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2voicecallback) interface when creating source voices.</span></span> <span data-ttu-id="a9f6e-108">Para obtener más información, consulte **IXAudio2EngineCallback** y **IXAudio2VoiceCallback**.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-108">For more details, see **IXAudio2EngineCallback** and **IXAudio2VoiceCallback**.</span></span>

<span data-ttu-id="a9f6e-109">Debe implementar devoluciones de llamada cuidadosamente para evitar que se produzcan interrupciones en el audio.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-109">You must implement callbacks carefully to avoid causing breaks in the audio.</span></span> <span data-ttu-id="a9f6e-110">Cada vez que se ejecuta una devolución de llamada, XAudio2 no puede generar audio.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-110">Whenever a callback is running, XAudio2 cannot generate any audio.</span></span> <span data-ttu-id="a9f6e-111">Los retrasos de más de unos milisegundos pueden producir un problema de audio.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-111">Delays of more than a few milliseconds can cause an audio problem.</span></span> <span data-ttu-id="a9f6e-112">Los retrasos de esta naturaleza también generan resultados del depurador.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-112">Delays of this nature also generate debugger output.</span></span> <span data-ttu-id="a9f6e-113">Esto indica posibles problemas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-113">This indicates potential performance issues.</span></span> <span data-ttu-id="a9f6e-114">Como mínimo, las funciones de devolución de llamada no deben hacer lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="a9f6e-114">At a minimum, callback functions must not do the following:</span></span>

-   <span data-ttu-id="a9f6e-115">Acceder al disco duro u otro almacenamiento permanente</span><span class="sxs-lookup"><span data-stu-id="a9f6e-115">Access the hard disk or other permanent storage</span></span>
-   <span data-ttu-id="a9f6e-116">Realizar llamadas de API costosas o de bloqueo</span><span class="sxs-lookup"><span data-stu-id="a9f6e-116">Make expensive or blocking API calls</span></span>
-   <span data-ttu-id="a9f6e-117">Sincronizar con otras partes del código de cliente</span><span class="sxs-lookup"><span data-stu-id="a9f6e-117">Synchronize with other parts of client code</span></span>
-   <span data-ttu-id="a9f6e-118">Requerir un uso significativo de la CPU</span><span class="sxs-lookup"><span data-stu-id="a9f6e-118">Require significant CPU usage</span></span>

<span data-ttu-id="a9f6e-119">Si el diseño del cliente requiere una devolución de llamada para desencadenar acciones como las mencionadas anteriormente, la devolución de llamada debe indicar a un subproceso de cliente diferente que realice el trabajo.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-119">If the client design requires a callback to trigger actions such as those listed previously, the callback should signal a different client thread to do the work.</span></span> <span data-ttu-id="a9f6e-120">Puede hacerlo con un mecanismo de **SetEvent** sencillo o con mecanismos más sofisticados como una cola de comandos sin bloqueos utilizada por otro subproceso.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-120">You can do this with a simple **SetEvent** mechanism or more sophisticated mechanisms like a nonblocking command queue that is consumed by another thread.</span></span>

## <a name="ixaudio2enginecallback"></a><span data-ttu-id="a9f6e-121">IXAudio2EngineCallback</span><span class="sxs-lookup"><span data-stu-id="a9f6e-121">IXAudio2EngineCallback</span></span>

<span data-ttu-id="a9f6e-122">La clase [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) contiene métodos que notifican al cliente cuando se producen determinados eventos en el motor de XAudio2.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-122">The [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback) class contains methods that notify the client when certain events happen in the XAudio2 engine.</span></span> <span data-ttu-id="a9f6e-123">Estos métodos deben ser implementados por el cliente de XAudio2.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-123">These methods should be implemented by the XAudio2 client.</span></span> <span data-ttu-id="a9f6e-124">XAudio2 llama a estos métodos por medio de un puntero de interfaz proporcionado por el cliente mediante el método [**IXAudio2:: RegisterForCallbacks**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-registerforcallbacks) .</span><span class="sxs-lookup"><span data-stu-id="a9f6e-124">XAudio2 calls these methods by means of an interface pointer provided by the client using the [**IXAudio2::RegisterForCallbacks**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-registerforcallbacks) method.</span></span> <span data-ttu-id="a9f6e-125">Todos estos métodos devuelven **void**, en lugar de **HRESULT**.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-125">All these methods return **void**, rather than an **HRESULT**.</span></span>

## <a name="ixaudio2voicecallback"></a><span data-ttu-id="a9f6e-126">IXAudio2VoiceCallback</span><span class="sxs-lookup"><span data-stu-id="a9f6e-126">IXAudio2VoiceCallback</span></span>

<span data-ttu-id="a9f6e-127">La clase [**IXAudio2VoiceCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2voicecallback) contiene métodos que notifican al cliente cuando se producen determinados eventos en una voz de origen específica de XAudio2.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-127">The [**IXAudio2VoiceCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2voicecallback) class contains methods that notify the client when certain events happen in a specific XAudio2 source voice.</span></span> <span data-ttu-id="a9f6e-128">XAudio2 llama a estos métodos por medio de un puntero de interfaz proporcionado por el cliente en [**IXAudio2:: CreateSourceVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsourcevoice).</span><span class="sxs-lookup"><span data-stu-id="a9f6e-128">XAudio2 calls these methods by means of an interface pointer provided by the client in [**IXAudio2::CreateSourceVoice**](/windows/win32/api/xaudio2/nf-xaudio2-ixaudio2-createsourcevoice).</span></span> <span data-ttu-id="a9f6e-129">Al igual que con [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback), estos métodos deben ser implementados por el cliente de XAudio2 y devolver **void** en lugar de un **valor HRESULT**.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-129">As with [**IXAudio2EngineCallback**](/windows/desktop/api/xaudio2/nn-xaudio2-ixaudio2enginecallback), these methods should be implemented by the XAudio2 client, and return **void** rather than an **HRESULT**.</span></span>

<span data-ttu-id="a9f6e-130">Como se mencionó anteriormente, es fundamental que las implementaciones proporcionadas por el cliente de estas devoluciones de llamada devuelvan lo más rápido posible, preferiblemente en un milisegundo.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-130">As mentioned previously, it is crucial that the client-provided implementations of these callbacks return as quickly as possible, preferably within a millisecond.</span></span> <span data-ttu-id="a9f6e-131">Las devoluciones de llamada se ejecutan en el subproceso de procesamiento de audio y todo el procesamiento se interrumpe hasta que se devuelve la devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-131">The callbacks are executed in the audio processing thread, and all processing is interrupted until the callback returns.</span></span> <span data-ttu-id="a9f6e-132">Un retraso en una devolución de llamada puede producir fácilmente un problema de audio.</span><span class="sxs-lookup"><span data-stu-id="a9f6e-132">A delay in a callback can easily cause an audio problem.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a9f6e-133">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="a9f6e-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a9f6e-134">Devoluciones de llamada</span><span class="sxs-lookup"><span data-stu-id="a9f6e-134">Callbacks</span></span>](callbacks.md)
</dt> <dt>

[<span data-ttu-id="a9f6e-135">Guía de programación de XAudio2</span><span class="sxs-lookup"><span data-stu-id="a9f6e-135">XAudio2 Programming Guide</span></span>](programming-guide.md)
</dt> <dt>

[<span data-ttu-id="a9f6e-136">Cómo: usar devoluciones de llamadas de voces de origen</span><span class="sxs-lookup"><span data-stu-id="a9f6e-136">How to: Use Source Voice Callbacks</span></span>](how-to--use-source-voice-callbacks.md)
</dt> <dt>

[<span data-ttu-id="a9f6e-137">Cómo: usar devoluciones de llamadas de motores</span><span class="sxs-lookup"><span data-stu-id="a9f6e-137">How to: Use Engine Callbacks</span></span>](how-to--use-engine-callbacks.md)
</dt> <dt>

[<span data-ttu-id="a9f6e-138">Cómo: transmitir un sonido de un disco</span><span class="sxs-lookup"><span data-stu-id="a9f6e-138">How to: Stream a Sound from Disk</span></span>](how-to--stream-a-sound-from-disk.md)
</dt> </dl>

 

 
