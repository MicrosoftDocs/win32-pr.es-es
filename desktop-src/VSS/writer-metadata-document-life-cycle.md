---
description: 'En respuesta a un evento de identificación, cada escritor presente en el sistema construye su propio documento de metadatos de escritor mediante IVssCreateWriterMetadata. Un solicitante suele generar un evento de identificación que llama a IVssBackupComponents:: GatherWriterMetadata.'
ms.assetid: bae9bbe7-ca55-47cb-b253-8092007cb181
title: Ciclo de vida de documento de metadatos de escritor
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 45be5748625d21f99abe3e77e0d6474a62210904
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105696423"
---
# <a name="writer-metadata-document-life-cycle"></a><span data-ttu-id="ec55b-104">Ciclo de vida de documento de metadatos de escritor</span><span class="sxs-lookup"><span data-stu-id="ec55b-104">Writer Metadata Document Life Cycle</span></span>

<span data-ttu-id="ec55b-105">En respuesta a un [*evento de identificación*](vssgloss-i.md), cada escritor presente en el sistema construye su propio documento de metadatos de escritor mediante [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata).</span><span class="sxs-lookup"><span data-stu-id="ec55b-105">In response to an [*Identify event*](vssgloss-i.md), each writer present on the system constructs its own Writer Metadata Document using [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata).</span></span> <span data-ttu-id="ec55b-106">Un solicitante suele generar un *evento de identificación* que llama a [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span><span class="sxs-lookup"><span data-stu-id="ec55b-106">An *Identify event* is typically generated by a requester calling [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata).</span></span>

<span data-ttu-id="ec55b-107">Al crear un documento de metadatos de escritor, ya sea a través de la interfaz [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) o a través de la inicialización del escritor ([**CVssWriter:: Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize)), un escritor debe especificar explícitamente lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="ec55b-107">When creating a Writer Metadata Document, either through the [**IVssCreateWriterMetadata**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscreatewritermetadata) interface or through writer initialization ([**CVssWriter::Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize)), a writer must explicitly specify the following:</span></span>

-   [<span data-ttu-id="ec55b-108">*Método de restauración*</span><span class="sxs-lookup"><span data-stu-id="ec55b-108">*Restore method*</span></span>](vssgloss-r.md)
-   <span data-ttu-id="ec55b-109">Nombre del escritor</span><span class="sxs-lookup"><span data-stu-id="ec55b-109">Writer name</span></span>
-   [<span data-ttu-id="ec55b-110">*IDENTIFICADOR de clase del escritor*</span><span class="sxs-lookup"><span data-stu-id="ec55b-110">*Writer class ID*</span></span>](vssgloss-w.md)
-   <span data-ttu-id="ec55b-111">Uso de datos ( [**consulte \_ \_ tipo de uso de VSS**](/windows/desktop/api/VsWriter/ne-vswriter-vss_usage_type))</span><span class="sxs-lookup"><span data-stu-id="ec55b-111">Data usage (see [**VSS\_USAGE\_TYPE**](/windows/desktop/api/VsWriter/ne-vswriter-vss_usage_type))</span></span>
-   <span data-ttu-id="ec55b-112">Tipo de origen de fecha (consulte [**\_ \_ tipo de origen de VSS**](/windows/desktop/api/VsWriter/ne-vswriter-vss_source_type))</span><span class="sxs-lookup"><span data-stu-id="ec55b-112">Date source type (see [**VSS\_SOURCE\_TYPE**](/windows/desktop/api/VsWriter/ne-vswriter-vss_source_type))</span></span>

<span data-ttu-id="ec55b-113">Además, también puede especificar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="ec55b-113">In addition, it may also specify the following:</span></span>

-   <span data-ttu-id="ec55b-114">Componentes (que pueden contener o no conjuntos de archivos)</span><span class="sxs-lookup"><span data-stu-id="ec55b-114">Components (which may or may not contain file sets)</span></span>
-   <span data-ttu-id="ec55b-115">Agregar asignaciones alternativas</span><span class="sxs-lookup"><span data-stu-id="ec55b-115">Add alternate mappings</span></span>
-   <span data-ttu-id="ec55b-116">Excluir listas de archivos</span><span class="sxs-lookup"><span data-stu-id="ec55b-116">Exclude file lists</span></span>

<span data-ttu-id="ec55b-117">Se encontró una introducción a la creación de documentos de metadatos de escritura en [acciones del escritor durante la inicialización](overview-of-backup-initialization.md)de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ec55b-117">An overview of Writer Metadata Document creation is found in [Writer Actions during Backup Initialization](overview-of-backup-initialization.md).</span></span>

<span data-ttu-id="ec55b-118">Los solicitantes suelen usar uno de los dos métodos para obtener acceso a los metadatos del escritor:</span><span class="sxs-lookup"><span data-stu-id="ec55b-118">Requesters typically make use of one of two methods to obtain access to writer metadata:</span></span>

-   <span data-ttu-id="ec55b-119">Durante la mayoría de las operaciones de copia de seguridad, un solicitante usa [**IVssBackupComponents:: GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) para obtener una instancia de la interfaz [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) para permitir el acceso a los metadatos de un escritor que se ejecuta actualmente.</span><span class="sxs-lookup"><span data-stu-id="ec55b-119">During most backup operations, a requester uses [**IVssBackupComponents::GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) to obtain an instance of the [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) interface to allow access to the metadata of a currently executing writer.</span></span>
-   <span data-ttu-id="ec55b-120">En el caso de las operaciones de restauración o las copias de seguridad con instantáneas importadas (consulte [importación de volúmenes de instantáneas transportables](importing-transportable-shadow-copied-volumes.md) para obtener más información sobre la importación de instantáneas), un solicitante recupera un documento XML que contiene los metadatos y usa [**CreateVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-createvssexaminewritermetadata) para obtener una interfaz [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) , que usa para leer los metadatos de restauración.</span><span class="sxs-lookup"><span data-stu-id="ec55b-120">For restore operations, or backups using imported shadow copies (see [Importing Transportable Shadow Copied Volumes](importing-transportable-shadow-copied-volumes.md) for more information on importing shadow copies), a requester retrieves an XML document containing the metadata and uses [**CreateVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-createvssexaminewritermetadata) to obtain an [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) interface, which it uses to read the restore metadata.</span></span>

<span data-ttu-id="ec55b-121">Los documentos de metadatos de escritor permiten que el solicitante realice una copia de seguridad para obtener información acerca de los escritores que se ejecutan actualmente durante la fase de detección de una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ec55b-121">Writer Metadata Documents enable the requester performing a backup to learn about currently executing writers during the discovery phase of a backup.</span></span>

<span data-ttu-id="ec55b-122">En el caso de los escritores elegidos para participar en una copia de seguridad, un solicitante importa gran parte de la información del documento de metadatos del escritor a su propio documento de componentes de copia de seguridad durante la fase de detección de una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ec55b-122">For those writers chosen to participate in a backup, a requester imports much, but not all, of the information in the Writer Metadata Document into its own Backup Components Document during the discovery phase of a backup.</span></span>

<span data-ttu-id="ec55b-123">Sin embargo, solo los documentos de metadatos de escritor y no el documento de componentes de copia de seguridad contienen las especificaciones de archivo y ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="ec55b-123">However, only Writer Metadata Documents and not the Backup Components Document contain the file and path specifications.</span></span>

<span data-ttu-id="ec55b-124">Para obtener más información sobre cómo se realiza la fase de detección de una operación de copia de seguridad, vea [información general sobre la fase de detección de copias de seguridad](overview-of-the-backup-discovery-phase.md).</span><span class="sxs-lookup"><span data-stu-id="ec55b-124">For more information on how the discovery phase of a backup operation is conducted, see [Overview of the Backup Discovery Phase](overview-of-the-backup-discovery-phase.md).</span></span>

<span data-ttu-id="ec55b-125">Además, solo los componentes [*incluidos explícitamente*](vssgloss-e.md) tienen su información almacenada en el documento componentes de copia de seguridad durante una operación de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ec55b-125">In addition, only [*explicitly included*](vssgloss-e.md) components have their information stored in the Backup Components Document during a backup operation.</span></span> <span data-ttu-id="ec55b-126">La información sobre componentes [*incluidos implícitamente*](vssgloss-i.md) no se incluye en el documento componentes de copia de seguridad durante una operación de copia de seguridad y se debe interpolar con información sobre los componentes incluidos explícitamente y los documentos de metadatos de escritura disponibles.</span><span class="sxs-lookup"><span data-stu-id="ec55b-126">Information on [*implicitly included*](vssgloss-i.md) components is not included in the Backup Components Document during a backup operation, and must be interpolated using information about the explicitly included components and the available Writer Metadata Documents.</span></span>

<span data-ttu-id="ec55b-127">Los componentes incluidos implícitamente pueden seguir siendo [*seleccionables para la restauración*](vssgloss-s.md) y es posible que deban incluirse explícitamente en el documento componentes de copia de seguridad en el momento de la restauración.</span><span class="sxs-lookup"><span data-stu-id="ec55b-127">Implicitly included components may still be [*selectable for restore*](vssgloss-s.md) and may need to be explicitly included in the Backup Components Document at restore time.</span></span> <span data-ttu-id="ec55b-128">En este caso, al igual que cuando se agrega un componente durante una operación de copia de seguridad, se necesita acceso al documento de metadatos del escritor de writer's del componente (que luego se recupera del escritor), un solicitante necesitará acceso a una copia de los documentos de metadatos del escritor del escritor almacenados en el momento de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ec55b-128">In this case, just as adding a component during a backup operation required access to the component's writer's Writer Metadata Document (then retrieved from the writer), a requester will require access to a copy of that writer's Writer Metadata Documents stored at backup time.</span></span>

<span data-ttu-id="ec55b-129">Por lo tanto, la única manera de obtener toda la información sobre todos los archivos y componentes implicados en una copia de seguridad o restauración es tener cada documento de metadatos de escritor para cada escritor que participa en una copia de seguridad almacenada junto con el documento componentes de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ec55b-129">Therefore, the only way to obtain all the information about all the files and components involved in a backup or restore is to have each Writer Metadata Document for each writer participating in a backup stored along with the Backup Components Document.</span></span> <span data-ttu-id="ec55b-130">(Para obtener más información, vea [información general de la restauración de archivos real](overview-of-actual-file-restoration.md)).</span><span class="sxs-lookup"><span data-stu-id="ec55b-130">(For more information, see [Overview of Actual File Restoration](overview-of-actual-file-restoration.md).)</span></span>

 

 



