---
description: Windows Installer se adhiere a Protección de recursos de Windows (WRP) al instalar archivos esenciales del sistema, carpetas e información del registro en Windows Server 2008 y versiones posteriores, y en Windows Vista y versiones posteriores.
ms.assetid: 38865ee1-22ef-430b-99ce-1c6983c3b51f
title: Usar Windows Installer y Protección de recursos de Windows
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 72808184ff11b29bfeb02dda576e9393e34189fd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104002192"
---
# <a name="using-windows-installer-and-windows-resource-protection"></a><span data-ttu-id="7d898-103">Usar Windows Installer y Protección de recursos de Windows</span><span class="sxs-lookup"><span data-stu-id="7d898-103">Using Windows Installer and Windows Resource Protection</span></span>

<span data-ttu-id="7d898-104">Windows Installer se adhiere a Protección de recursos de Windows (WRP) al instalar archivos esenciales del sistema, carpetas e información del registro en Windows Server 2008 y versiones posteriores, y en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="7d898-104">Windows Installer adheres to Windows Resource Protection (WRP) when installing essential system files, folders, and registry information in Windows Server 2008 and later and Windows Vista and later.</span></span>

<span data-ttu-id="7d898-105">WRP en Windows Server 2008 y Windows Vista reemplaza a la protección de archivos de Windows (WFP) en Windows Server 2003, Windows XP y Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="7d898-105">WRP in Windows Server 2008 and Windows Vista replaces Windows File Protection (WFP) in Windows Server 2003, Windows XP, and Windows 2000.</span></span> <span data-ttu-id="7d898-106">Windows Installer los desarrolladores deben tener en cuenta los siguientes cambios en la forma en que el instalador controla los recursos protegidos en Windows Server 2008 y versiones posteriores, y en Windows Vista y versiones posteriores:</span><span class="sxs-lookup"><span data-stu-id="7d898-106">Windows Installer developers should note the following changes in how the installer handles protected resources in Windows Server 2008 and later and Windows Vista and later:</span></span>

-   <span data-ttu-id="7d898-107">Cuando se ejecuta en Windows Server 2008 y versiones posteriores o Windows Vista y versiones posteriores, el Windows Installer omite la instalación de cualquier archivo que esté protegido por WRP, el instalador escribe una advertencia en el archivo de registro y continúa con el resto de la instalación sin un error.</span><span class="sxs-lookup"><span data-stu-id="7d898-107">When running on Windows Server 2008 and later or Windows Vista and later, the Windows Installer skips the installation of any file that is protected by WRP, the installer enters a warning in the log file, and continues with the remainder of the installation without an error.</span></span> <span data-ttu-id="7d898-108">En Windows Server 2003, Windows XP y Windows 2000, cuando el Windows Installer encontró un archivo protegido con WFP, el instalador solicitaría que WFP instalara el archivo.</span><span class="sxs-lookup"><span data-stu-id="7d898-108">In Windows Server 2003, Windows XP, and Windows 2000, when the Windows Installer encountered a WFP-protected file, the installer would request that WFP install the file.</span></span>
-   <span data-ttu-id="7d898-109">WRP en Windows Server 2008 y versiones posteriores o Windows Vista y versiones posteriores pueden proteger las claves del registro además de los archivos.</span><span class="sxs-lookup"><span data-stu-id="7d898-109">WRP on Windows Server 2008 and later or Windows Vista and later can protect registry keys in addition to files.</span></span> <span data-ttu-id="7d898-110">Si el Windows Installer encuentra una clave del registro protegida por WRP, el instalador omite la instalación de esa clave del registro, el instalador escribe una advertencia en el archivo de registro y continúa con el resto de la instalación sin un error.</span><span class="sxs-lookup"><span data-stu-id="7d898-110">If the Windows Installer encounters a WRP-protected registry key, the installer skips the installation of that registry key, the installer enters a warning in the log file, and continues with the remainder of the installation without an error.</span></span>
-   <span data-ttu-id="7d898-111">Tenga en cuenta que si un componente de Windows Installer contiene un archivo o una clave del registro que está protegida por WRP, este recurso debe usarse como la ruta de acceso del componente.</span><span class="sxs-lookup"><span data-stu-id="7d898-111">Note that if a Windows Installer component contains a file or registry key that is protected by WRP, this resource must be used as the KeyPath for the component.</span></span> <span data-ttu-id="7d898-112">En este caso, Windows Installer no instala, actualiza o quita el componente.</span><span class="sxs-lookup"><span data-stu-id="7d898-112">In this case, Windows Installer does not install, update, or remove the component.</span></span> <span data-ttu-id="7d898-113">No debe incluir ningún recurso protegido en un paquete de instalación.</span><span class="sxs-lookup"><span data-stu-id="7d898-113">You should not include any protected resources in an installation package.</span></span> <span data-ttu-id="7d898-114">En su lugar, debe usar los [mecanismos de sustitución de recursos admitidos](../wfp/supported-file-replacement-mechanisms.md) para [protección de recursos de Windows](../wfp/windows-resource-protection-portal.md).</span><span class="sxs-lookup"><span data-stu-id="7d898-114">Instead, you should use the [supported resource replacement mechanisms](../wfp/supported-file-replacement-mechanisms.md) for [Windows Resource Protection](../wfp/windows-resource-protection-portal.md).</span></span>

<span data-ttu-id="7d898-115">Para obtener más información acerca de WRP, consulte [protección de recursos de Windows](../wfp/windows-resource-protection-portal.md) e información que se proporciona en [Microsoft TechNet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc709691(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="7d898-115">For more information about WRP, see [Windows Resource Protection](../wfp/windows-resource-protection-portal.md) and information that is provided on [Microsoft Technet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc709691(v=ws.10)).</span></span>

## <a name="wfp-for-windows-server-2003-and-windows-xp2000"></a><span data-ttu-id="7d898-116">WFP para Windows Server 2003 y Windows XP/2000</span><span class="sxs-lookup"><span data-stu-id="7d898-116">WFP for Windows Server 2003 and Windows XP/2000</span></span>

<span data-ttu-id="7d898-117">Windows Installer se adhiere a la protección de archivos de Windows (WFP) al instalar archivos esenciales del sistema en Windows Server 2003, Windows XP y Windows 2000.</span><span class="sxs-lookup"><span data-stu-id="7d898-117">Windows Installer adheres to Windows File Protection (WFP) when installing essential system files on Windows Server 2003, Windows XP and Windows 2000.</span></span> <span data-ttu-id="7d898-118">Si un archivo del sistema protegido es modificado por una instalación desatendida de una aplicación, WFP restaura el archivo a la versión comprobada del archivo.</span><span class="sxs-lookup"><span data-stu-id="7d898-118">If a protected system file is modified by an unattended installation of an application, WFP restores the file to the verified file version.</span></span>

<span data-ttu-id="7d898-119">Windows Installer nunca intenta instalar o reemplazar un archivo protegido.</span><span class="sxs-lookup"><span data-stu-id="7d898-119">Windows Installer never attempts to install or replace a protected file.</span></span> <span data-ttu-id="7d898-120">Cuando la acción [InstallFiles](installfiles-action.md) o cualquier otra acción programada antes de la InstallFiles intenta instalar un archivo protegido en windows Server 2003, Windows XP o Windows 2000, el instalador llama a WFP con una solicitud para instalar o reemplazar el archivo protegido.</span><span class="sxs-lookup"><span data-stu-id="7d898-120">When the [InstallFiles](installfiles-action.md) action or any other action scheduled before InstallFiles attempts to install a file protected on Windows Server 2003, Windows XP or Windows 2000, the installer calls WFP with a request to install or replace the protected file.</span></span> <span data-ttu-id="7d898-121">El instalador solicita la instalación de archivos desde WFP inmediatamente después de ejecutar la acción InstallFiles.</span><span class="sxs-lookup"><span data-stu-id="7d898-121">The installer requests the file installation from WFP immediately after executing the InstallFiles action.</span></span> <span data-ttu-id="7d898-122">WFP instala o reemplaza el archivo en el sistema del usuario con una versión almacenada en caché del archivo protegido.</span><span class="sxs-lookup"><span data-stu-id="7d898-122">WFP installs or replaces the file on the user's system with a cached version of the protected file.</span></span> <span data-ttu-id="7d898-123">Tenga en cuenta que esto no garantiza que la versión del archivo instalada desde la memoria caché sea la versión requerida por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="7d898-123">Note that this does not guarantee that the version of the file installed from the cache is the version required by the application.</span></span> <span data-ttu-id="7d898-124">Después de que WFP haya instalado el archivo, el instalador determina si esta versión coincide con la versión del paquete.</span><span class="sxs-lookup"><span data-stu-id="7d898-124">After WFP has installed the file, the installer determines whether this version matches the version in the package.</span></span> <span data-ttu-id="7d898-125">Si la versión del archivo en el paquete es mayor que la versión instalada, el instalador informa al usuario de que no puede actualizar el sistema y que es posible que se requiera una actualización del sistema operativo para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="7d898-125">If the file version in the package is greater than the installed version, the installer informs the user that it cannot update the system and that an update of the operating system may be required for the application.</span></span>

<span data-ttu-id="7d898-126">Si alguna acción secuenciada después de la [InstallFiles](installfiles-action.md) intenta instalar o reemplazar un archivo protegido que no está instalado en el sistema, el instalador no podrá llamar a WFP para instalar el archivo.</span><span class="sxs-lookup"><span data-stu-id="7d898-126">If any action sequenced after [InstallFiles](installfiles-action.md) attempts to install or replace a protected file not already installed on the system, the installer cannot call WFP to install the file.</span></span> <span data-ttu-id="7d898-127">En este caso, el instalador informa al usuario de que no puede actualizar el sistema y que es posible que se requiera una actualización del sistema operativo para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="7d898-127">In this case, the installer informs the user that it cannot update the system and that an update of the operating system may be required for the application.</span></span>

<span data-ttu-id="7d898-128">El instalador también comprueba con WFP cuando quita archivos y nunca intenta quitar archivos del sistema protegidos.</span><span class="sxs-lookup"><span data-stu-id="7d898-128">The installer also checks with WFP when removing files and never attempts to remove protected system files.</span></span>

## <a name="component-key-files-protected-by-wfp"></a><span data-ttu-id="7d898-129">Archivos de clave de componente protegidos por WFP</span><span class="sxs-lookup"><span data-stu-id="7d898-129">Component Key Files Protected by WFP</span></span>

<span data-ttu-id="7d898-130">Tenga en cuenta que si un componente de Windows Installer contiene un archivo WFP, este archivo debe especificarse como la ruta de acceso de la clave del componente.</span><span class="sxs-lookup"><span data-stu-id="7d898-130">Note that if a Windows Installer component contains a WFP file, this file must be specified as the key path for the component.</span></span>

<span data-ttu-id="7d898-131">Cuando el instalador intenta instalar el archivo de clave de un componente en Windows Server 2003, Windows XP o Windows 2000, primero llama a WFP para determinar si el archivo de claves está protegido.</span><span class="sxs-lookup"><span data-stu-id="7d898-131">When the installer attempts to install a component's key file on Windows Server 2003, Windows XP or Windows 2000, it first calls WFP to determine if the key file is protected.</span></span> <span data-ttu-id="7d898-132">Cuando el archivo de clave de un componente está protegido por WFP y ese archivo de clave ya está instalado, el instalador actualiza el componente solo si la versión del archivo de clave del paquete es mayor que la versión instalada.</span><span class="sxs-lookup"><span data-stu-id="7d898-132">When the key file of a component is protected by WFP, and that key file is already installed, the installer updates the component only if the version of the key file in the package is greater than the installed version.</span></span> <span data-ttu-id="7d898-133">Si el paquete de instalación especifica que se debe instalar un componente y el archivo de clave del componente no está instalado actualmente, independientemente de si el archivo de clave está protegido, el instalador instala el componente.</span><span class="sxs-lookup"><span data-stu-id="7d898-133">If the installation package specifies that a component be installed, and the key file of the component is not currently installed, then regardless of whether the key file is protected the installer installs the component.</span></span> <span data-ttu-id="7d898-134">Una vez instalado cualquier componente que tenga un archivo de clave protegido por WFP, se instalará de forma permanente y el instalador nunca quitará o reemplazará al componente.</span><span class="sxs-lookup"><span data-stu-id="7d898-134">Once any component having a key file protected by WFP is installed, it is permanently installed, and the installer never removes or replaces the component.</span></span>

## <a name="installation-of-assemblies-by-wfp"></a><span data-ttu-id="7d898-135">Instalación de ensamblados por WFP</span><span class="sxs-lookup"><span data-stu-id="7d898-135">Installation of Assemblies by WFP</span></span>

<span data-ttu-id="7d898-136">WFP para ensamblados difiere de WFP para archivos del sistema.</span><span class="sxs-lookup"><span data-stu-id="7d898-136">WFP for assemblies differs from WFP for system files.</span></span>

<span data-ttu-id="7d898-137">WFP protege los archivos del sistema de Windows Server 2003, Windows XP y Windows 2000 al detectar intentos de reemplazar archivos del sistema protegidos.</span><span class="sxs-lookup"><span data-stu-id="7d898-137">WFP protects Windows Server 2003, Windows XP and Windows 2000 system files by detecting attempts to replace protected system files.</span></span> <span data-ttu-id="7d898-138">Esta protección se desencadena después de que WFP reciba una notificación de cambio de directorio para un archivo en un directorio protegido.</span><span class="sxs-lookup"><span data-stu-id="7d898-138">This protection is triggered after WFP receives a directory change notification for a file in a protected directory.</span></span> <span data-ttu-id="7d898-139">Cuando WFP recibe esta notificación, determina qué archivo ha cambiado.</span><span class="sxs-lookup"><span data-stu-id="7d898-139">When WFP receives this notification, it determines which file has changed.</span></span> <span data-ttu-id="7d898-140">Si el archivo está protegido, WFP busca la firma de archivo en un archivo de catálogo estático para determinar si el nuevo archivo es la versión correcta.</span><span class="sxs-lookup"><span data-stu-id="7d898-140">If the file is protected, WFP looks up the file signature in a static catalog file to determine if the new file is the correct version.</span></span> <span data-ttu-id="7d898-141">Si la versión del archivo no es correcta, el sistema reemplaza el archivo con la versión correcta de la caché o del medio de distribución.</span><span class="sxs-lookup"><span data-stu-id="7d898-141">If the file version is not correct, the system replaces the file with the correct version from either the cache or distribution media.</span></span>

<span data-ttu-id="7d898-142">Por el contrario, WFP de ensamblados es dinámico.</span><span class="sxs-lookup"><span data-stu-id="7d898-142">In contrast, WFP of assemblies is dynamic.</span></span> <span data-ttu-id="7d898-143">WFP se extiende a los archivos a medida que se agregan a la caché de ensamblados en paralelo compartida.</span><span class="sxs-lookup"><span data-stu-id="7d898-143">WFP is extended to files as they are added to the shared side-by-side assembly cache.</span></span> <span data-ttu-id="7d898-144">Si un ensamblado se daña, WFP solicitará que el instalador Reemplace el archivo.</span><span class="sxs-lookup"><span data-stu-id="7d898-144">If an assembly becomes corrupted, WFP will request that the installer replace the file.</span></span> <span data-ttu-id="7d898-145">Windows Installer puede o no reemplazar el archivo en función de si el paquete de origen es accesible.</span><span class="sxs-lookup"><span data-stu-id="7d898-145">Windows Installer may or may not be able to replace the file depending on whether the source package is accessible.</span></span> <span data-ttu-id="7d898-146">Si no se puede tener acceso al paquete de origen, WFP abrirá un cuadro de diálogo que indica que no se puede restaurar el archivo.</span><span class="sxs-lookup"><span data-stu-id="7d898-146">If the source package is inaccessible, WFP will put up a dialog box stating that it is unable to restore the file.</span></span>

<span data-ttu-id="7d898-147">Tenga en cuenta que los ensamblados en paralelo no administrados, instalados en% WINDIR% \\ WinSxS, están protegidos por WFP.</span><span class="sxs-lookup"><span data-stu-id="7d898-147">Note that unmanaged shared side-by-side assemblies, installed in %windir%\\winsxs, are protected by WFP.</span></span> <span data-ttu-id="7d898-148">Los ensamblados privados no administrados, instalados en el directorio de la aplicación, no están protegidos por WFP.</span><span class="sxs-lookup"><span data-stu-id="7d898-148">Unmanaged private assemblies, installed in the application directory, are not protected by WFP.</span></span> <span data-ttu-id="7d898-149">Los ensamblados globales administrados instalados en el directorio de la aplicación o en la GAC del ensamblado% WINDIR% \\ \\ no están protegidos por WFP.</span><span class="sxs-lookup"><span data-stu-id="7d898-149">Managed global assemblies installed in the application directory or %windir%\\assembly\\gac are not protected by WFP.</span></span>

## <a name="related-topics"></a><span data-ttu-id="7d898-150">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="7d898-150">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7d898-151">Protección de recursos de Windows</span><span class="sxs-lookup"><span data-stu-id="7d898-151">Windows Resource Protection</span></span>](../wfp/windows-resource-protection-portal.md)
</dt> </dl>

 

 
