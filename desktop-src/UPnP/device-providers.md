---
title: Proveedores de dispositivos
description: Los proveedores de dispositivos son objetos registrados que el equipo inicia en cada inicio del sistema.
ms.assetid: 80c08993-0a8b-4ee9-93cd-bcc3c00e843b
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 67fac270342830045fc3bac9f0573f283d87dc6a
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104149329"
---
# <a name="device-providers"></a><span data-ttu-id="f7d67-103">Proveedores de dispositivos</span><span class="sxs-lookup"><span data-stu-id="f7d67-103">Device Providers</span></span>

<span data-ttu-id="f7d67-104">Los proveedores de dispositivos son objetos registrados que el equipo inicia en cada inicio del sistema.</span><span class="sxs-lookup"><span data-stu-id="f7d67-104">Device providers are registered objects that the computer starts on every system startup.</span></span> <span data-ttu-id="f7d67-105">Los proveedores de dispositivos registran y anulan el registro de dispositivos en ejecución con el host del dispositivo en respuesta a algún evento.</span><span class="sxs-lookup"><span data-stu-id="f7d67-105">Device providers register and unregister running devices with the device host in response to some event.</span></span> <span data-ttu-id="f7d67-106">Estos dispositivos son dispositivos que se han iniciado automáticamente durante el tiempo de inicio del sistema.</span><span class="sxs-lookup"><span data-stu-id="f7d67-106">These devices are devices that have been automatically started at system startup time.</span></span> <span data-ttu-id="f7d67-107">Por motivos de seguridad, un proveedor de dispositivos debe ejecutarse generalmente como [LocalService](/windows/desktop/Services/localservice-account), en lugar de [LocalSystem](/windows/desktop/Services/localsystem-account).</span><span class="sxs-lookup"><span data-stu-id="f7d67-107">For security reasons, a device provider should generally run as [LocalService](/windows/desktop/Services/localservice-account), rather than [LocalSystem](/windows/desktop/Services/localsystem-account).</span></span>

<span data-ttu-id="f7d67-108">Los proveedores de dispositivos se pueden usar para dispositivos transitorios.</span><span class="sxs-lookup"><span data-stu-id="f7d67-108">Device providers can be used for transient devices.</span></span> <span data-ttu-id="f7d67-109">Los proveedores de dispositivos también se pueden usar para enlazar dispositivos a medios sondeados.</span><span class="sxs-lookup"><span data-stu-id="f7d67-109">Device providers can also be used to bridge devices to polled media.</span></span> <span data-ttu-id="f7d67-110">Por ejemplo, un dispositivo periférico, como un reproductor de música digital, se conecta a un equipo a través de un puerto serie.</span><span class="sxs-lookup"><span data-stu-id="f7d67-110">For example, a peripheral device such as a digital music player is connected to a computer via a serial port.</span></span> <span data-ttu-id="f7d67-111">Para exponer el reproductor de música como un dispositivo basado en UPnP, se necesitan un objeto de control de dispositivo y un conjunto de objetos de servicio.</span><span class="sxs-lookup"><span data-stu-id="f7d67-111">To expose the music player as a UPnP-based device, a device control object and a set of service objects are required.</span></span> <span data-ttu-id="f7d67-112">Estos objetos implementan las acciones de reproducción de música basadas en UPnP como comandos en serie.</span><span class="sxs-lookup"><span data-stu-id="f7d67-112">These objects implement the UPnP-based music player actions as serial commands.</span></span> <span data-ttu-id="f7d67-113">Sin embargo, el reproductor de música debe estar conectado al puerto serie y estar disponible para el control antes de que se registren estos objetos.</span><span class="sxs-lookup"><span data-stu-id="f7d67-113">However, the music player must be plugged into the serial port and available for control before these objects are registered.</span></span>

<span data-ttu-id="f7d67-114">Dado que el puerto serie no ofrece un mecanismo de notificación explícito cuando los dispositivos están conectados, se requiere un código de sondeo.</span><span class="sxs-lookup"><span data-stu-id="f7d67-114">Because the serial port does not offer an explicit notification mechanism when devices are connected, polling code is required.</span></span> <span data-ttu-id="f7d67-115">Este código se puede implementar en un objeto de proveedor de dispositivos, en un servicio o en una aplicación independiente.</span><span class="sxs-lookup"><span data-stu-id="f7d67-115">This code can be implemented in a device provider object, a service, or in a standalone application.</span></span> <span data-ttu-id="f7d67-116">Cuando se inicia el equipo, el host del dispositivo crea una instancia del objeto de proveedor de dispositivos y, a continuación, invoca su método de [**Inicio**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) .</span><span class="sxs-lookup"><span data-stu-id="f7d67-116">When the computer is started, the device host instantiates the device provider object, and then invokes its [**Start**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) method.</span></span> <span data-ttu-id="f7d67-117">Cuando el proveedor de dispositivos detecta la presencia de un dispositivo de reproducción de música, crea una instancia del objeto de control de dispositivo adecuado y lo registra mediante una llamada a [**IUPnPRegistrar:: RegisterRunningDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice).</span><span class="sxs-lookup"><span data-stu-id="f7d67-117">When the device provider detects the presence of a music player device, it instantiates the appropriate device control object and registers it by calling [**IUPnPRegistrar::RegisterRunningDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice).</span></span> <span data-ttu-id="f7d67-118">Este método publica el dispositivo y lo anuncia en la red basada en UPnP.</span><span class="sxs-lookup"><span data-stu-id="f7d67-118">This method publishes the device and announces it to the UPnP-based network.</span></span>

<span data-ttu-id="f7d67-119">También se puede lograr la misma funcionalidad implementando un servicio que sondea el puerto serie.</span><span class="sxs-lookup"><span data-stu-id="f7d67-119">The same functionality can also be achieved by implementing a service that polls the serial port.</span></span> <span data-ttu-id="f7d67-120">Sin embargo, los proveedores de dispositivos simplifican las cosas al requerir solo la funcionalidad básica (el sondeo) que se va a implementar, ya que los proveedores de dispositivos se basan en el host del dispositivo para iniciarlos y detenerlos.</span><span class="sxs-lookup"><span data-stu-id="f7d67-120">However, device providers simplify things by requiring only the core functionality—the polling—to be implemented because device providers rely on the device host to start and stop them.</span></span> <span data-ttu-id="f7d67-121">El uso de proveedores de dispositivos es más sencillo que implementar un servicio.</span><span class="sxs-lookup"><span data-stu-id="f7d67-121">Using device providers is simpler than implementing a service.</span></span>

<span data-ttu-id="f7d67-122">En el momento del registro, y en cada siguiente inicio del sistema, el equipo crea una instancia del objeto de proveedor de dispositivos y, a continuación, invoca su método [**IUPnPDeviceProvider:: Start**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) , pasándole la cadena de inicialización especificada durante el registro.</span><span class="sxs-lookup"><span data-stu-id="f7d67-122">At registration time, and on every subsequent system startup, the computer instantiates the device provider object, and then invokes its [**IUPnPDeviceProvider::Start**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) method, passing it the initialization string specified during registration.</span></span>

<span data-ttu-id="f7d67-123">Una vez que se llama al método [**Start**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) , el proveedor del dispositivo realiza cualquier procesamiento necesario y, cuando sea necesario, el proveedor del dispositivo registra los dispositivos mediante una llamada a [**IUPnPRegistrar:: RegisterRunningDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice), como se describe en la sección [registro de un dispositivo hospedado con el host del dispositivo](registering-a-hosted-device-with-the-device-host.md).</span><span class="sxs-lookup"><span data-stu-id="f7d67-123">Once the [**Start**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-start) method is called, the device provider performs any necessary processing, and when necessary, the device provider registers devices by calling [**IUPnPRegistrar::RegisterRunningDevice**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpregistrar-registerrunningdevice), as described in the section [Registering a Hosted Device with the Device Host](registering-a-hosted-device-with-the-device-host.md).</span></span>

<span data-ttu-id="f7d67-124">Cuando el equipo se apaga, el host del dispositivo invoca el método [**IUPnPDeviceProvider:: Stop**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-stop) para indicar que el proveedor de dispositivos termina sus operaciones.</span><span class="sxs-lookup"><span data-stu-id="f7d67-124">When the computer is shut down, the device host invokes the [**IUPnPDeviceProvider::Stop**](/windows/desktop/api/Upnphost/nf-upnphost-iupnpdeviceprovider-stop) method to indicate that the device provider terminate its operations.</span></span>

 

 