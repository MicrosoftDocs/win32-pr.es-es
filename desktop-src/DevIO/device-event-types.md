---
description: Para determinar el tipo de evento de dispositivo al procesar un mensaje de DEVICECHANGE de WM \_ , examine el parámetro wParam.
ms.assetid: 17078548-879d-4a11-a268-27d1f30180ab
title: Tipos de eventos de dispositivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 35ece6b810ba4d1310638bbfbdcdcaa7f67f79d8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104080193"
---
# <a name="device-event-types"></a><span data-ttu-id="d9d73-103">Tipos de eventos de dispositivo</span><span class="sxs-lookup"><span data-stu-id="d9d73-103">Device Event Types</span></span>

<span data-ttu-id="d9d73-104">Para determinar el tipo de evento de dispositivo al procesar un mensaje de [**\_ DEVICECHANGE de WM**](wm-devicechange.md) , examine el parámetro *wParam* .</span><span class="sxs-lookup"><span data-stu-id="d9d73-104">To determine the device event type when processing a [**WM\_DEVICECHANGE**](wm-devicechange.md) message, examine the *wParam* parameter.</span></span> <span data-ttu-id="d9d73-105">El valor de *wParam* determina el significado de los datos específicos del evento en el parámetro *lParam* .</span><span class="sxs-lookup"><span data-stu-id="d9d73-105">The value of *wParam* determines the meaning of the event-specific data in the *lParam* parameter.</span></span> <span data-ttu-id="d9d73-106">En general, los datos específicos del evento identifican el dispositivo y proporcionan detalles adicionales sobre el evento.</span><span class="sxs-lookup"><span data-stu-id="d9d73-106">In general, the event-specific data identifies the device and provides additional detail about the event.</span></span> <span data-ttu-id="d9d73-107">El formato de estos datos depende del tipo de dispositivo, pero los primeros bytes siempre tienen el mismo formato que la estructura [**\_ \_ HDR de la difusión dev**](/windows/desktop/api/Dbt/ns-dbt-dev_broadcast_hdr) .</span><span class="sxs-lookup"><span data-stu-id="d9d73-107">The format of this data depends on the device type, but the first few bytes always have the same format as the [**DEV\_BROADCAST\_HDR**](/windows/desktop/api/Dbt/ns-dbt-dev_broadcast_hdr) structure.</span></span> <span data-ttu-id="d9d73-108">Para determinar el formato de los datos, compruebe el miembro de **dbch \_ DeviceType** .</span><span class="sxs-lookup"><span data-stu-id="d9d73-108">To determine the format of the data, check the **dbch\_devicetype** member.</span></span>

<span data-ttu-id="d9d73-109">El sistema difunde un evento de dispositivo de tipo [DBT \_ DEVICEARRIVAL](dbt-devicearrival.md) (es decir, un mensaje de [**WM \_ DEVICECHANGE**](wm-devicechange.md) con *wParam* establecido en DBT \_ DEVICEARRIVAL) siempre que se ha insertado un dispositivo y está disponible para su uso.</span><span class="sxs-lookup"><span data-stu-id="d9d73-109">The system broadcasts a device event of type [DBT\_DEVICEARRIVAL](dbt-devicearrival.md) (that is, a [**WM\_DEVICECHANGE**](wm-devicechange.md) message with *wParam* set to DBT\_DEVICEARRIVAL) whenever a device has been inserted and is available for use.</span></span> <span data-ttu-id="d9d73-110">Normalmente, las aplicaciones comprueban el tipo de dispositivo y empiezan a usar el dispositivo inmediatamente si es adecuado.</span><span class="sxs-lookup"><span data-stu-id="d9d73-110">Applications typically check the device type and begin using the device immediately if it is appropriate.</span></span>

<span data-ttu-id="d9d73-111">El sistema difunde un evento de dispositivo [DBT \_ DEVICEQUERYREMOVE](dbt-devicequeryremove.md) para solicitar permiso para quitar un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d9d73-111">The system broadcasts a [DBT\_DEVICEQUERYREMOVE](dbt-devicequeryremove.md) device event to request permission to remove a device.</span></span> <span data-ttu-id="d9d73-112">Para determinar si necesita el dispositivo, una aplicación puede mostrar un cuadro de diálogo para pedir instrucciones al usuario.</span><span class="sxs-lookup"><span data-stu-id="d9d73-112">To determine whether it needs the device, an application can display a dialog box to prompt the user for instructions.</span></span> <span data-ttu-id="d9d73-113">Si una aplicación determina que necesita el dispositivo, puede denegar esta solicitud y cancelar la eliminación devolviendo la consulta de difusión \_ \_ denegar.</span><span class="sxs-lookup"><span data-stu-id="d9d73-113">If an application determines that it needs the device, it can deny this request and cancel the removal by returning BROADCAST\_QUERY\_DENY.</span></span> <span data-ttu-id="d9d73-114">Si la aplicación no necesita el dispositivo, debe devolver **true**.</span><span class="sxs-lookup"><span data-stu-id="d9d73-114">If the application does not need the device, it must return **TRUE**.</span></span> <span data-ttu-id="d9d73-115">El sistema envía inmediatamente un mensaje [DBT \_ DEVICEQUERYREMOVEFAILED](dbt-devicequeryremovefailed.md) si alguna aplicación o controlador canceló una solicitud anterior para quitar un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d9d73-115">The system immediately sends a [DBT\_DEVICEQUERYREMOVEFAILED](dbt-devicequeryremovefailed.md) message if any application or driver canceled a previous request to remove a device.</span></span>

<span data-ttu-id="d9d73-116">El sistema difunde un evento de dispositivo [DBT \_ DEVICEREMOVEPENDING](dbt-deviceremovepending.md) como última ADVERTENCIA antes de que se quite un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d9d73-116">The system broadcasts a [DBT\_DEVICEREMOVEPENDING](dbt-deviceremovepending.md) device event as a last warning before a device is removed.</span></span> <span data-ttu-id="d9d73-117">En este punto, la aplicación no puede cancelar la eliminación, por lo que si usa el dispositivo, debe preparar su eliminación para evitar la pérdida de datos.</span><span class="sxs-lookup"><span data-stu-id="d9d73-117">At this point, the application cannot cancel the removal, so if it is using the device it must prepare for its removal to prevent loss of data.</span></span> <span data-ttu-id="d9d73-118">Esto es especialmente importante cuando se quita una conexión de red.</span><span class="sxs-lookup"><span data-stu-id="d9d73-118">This is especially important when a network connection is being removed.</span></span> <span data-ttu-id="d9d73-119">La aplicación debe determinar si alguno de los archivos o canalizaciones abiertos están en esa conexión.</span><span class="sxs-lookup"><span data-stu-id="d9d73-119">The application must determine whether any of its open files or pipes are on that connection.</span></span> <span data-ttu-id="d9d73-120">Para ello, puede comparar el identificador de recursos de red en los datos específicos del evento del mensaje con los identificadores de recursos obtenidos previamente para los archivos y las canalizaciones.</span><span class="sxs-lookup"><span data-stu-id="d9d73-120">It can do this by comparing the network resource identifier in the event-specific data of the message with the resource identifiers previously obtained for the files and pipes.</span></span> <span data-ttu-id="d9d73-121">El sistema difunde un evento de dispositivo [DBT \_ DEVICEREMOVECOMPLETE](dbt-deviceremovecomplete.md) cuando se ha quitado un dispositivo y ya no está disponible.</span><span class="sxs-lookup"><span data-stu-id="d9d73-121">The system broadcasts a [DBT\_DEVICEREMOVECOMPLETE](dbt-deviceremovecomplete.md) device event when a device has been removed and is no longer available.</span></span>

<span data-ttu-id="d9d73-122">El sistema difunde un evento de dispositivo [DBT \_ QUERYCHANGECONFIG](dbt-querychangeconfig.md) para solicitar permiso para cambiar la configuración actual (acoplar o desacoplar).</span><span class="sxs-lookup"><span data-stu-id="d9d73-122">The system broadcasts a [DBT\_QUERYCHANGECONFIG](dbt-querychangeconfig.md) device event to request permission to change the current configuration (dock or undock).</span></span> <span data-ttu-id="d9d73-123">Cualquier aplicación puede devolver la \_ consulta de difusión \_ Deny para denegar la solicitud y cancelar el cambio.</span><span class="sxs-lookup"><span data-stu-id="d9d73-123">Any application can return BROADCAST\_QUERY\_DENY to deny the request and cancel the change.</span></span> <span data-ttu-id="d9d73-124">Si una aplicación deniega la solicitud, el sistema envía un [mensaje \_ CONFIGCHANGECANCELED de DBT](dbt-configchangecanceled.md) .</span><span class="sxs-lookup"><span data-stu-id="d9d73-124">If an application denies the request, the system sends a [DBT\_CONFIGCHANGECANCELED](dbt-configchangecanceled.md) message.</span></span> <span data-ttu-id="d9d73-125">Si la configuración actual ha cambiado, debido a un acoplamiento o desacoplamiento, el sistema envía un [mensaje \_ CONFIGCHANGED de DBT](dbt-configchanged.md) .</span><span class="sxs-lookup"><span data-stu-id="d9d73-125">If the current configuration has changed, due to a dock or undock, the system sends a [DBT\_CONFIGCHANGED](dbt-configchanged.md) message.</span></span>

<span data-ttu-id="d9d73-126">El sistema difunde un evento de dispositivo [DBT \_ DEVICETYPESPECIFIC](dbt-devicetypespecific.md) cada vez que se produce un evento específico del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="d9d73-126">The system broadcasts a [DBT\_DEVICETYPESPECIFIC](dbt-devicetypespecific.md) device event whenever a device-specific event occurs.</span></span>

<span data-ttu-id="d9d73-127">Los controladores pueden crear sus propios tipos de eventos personalizados.</span><span class="sxs-lookup"><span data-stu-id="d9d73-127">Drivers can create their own custom event types.</span></span> <span data-ttu-id="d9d73-128">Los eventos personalizados solo se envían a la aplicación que se ha registrado para la notificación de eventos de dispositivo en un dispositivo determinado y solo los pueden iniciar controladores en modo kernel.</span><span class="sxs-lookup"><span data-stu-id="d9d73-128">Custom events are sent only to application that have registered for device-event notification on a particular device, and can only be initiated by kernel-mode drivers.</span></span> <span data-ttu-id="d9d73-129">Para obtener más información, vea [DBT \_ CUSTOMEVENT](dbt-customevent.md).</span><span class="sxs-lookup"><span data-stu-id="d9d73-129">For more information, see [DBT\_CUSTOMEVENT](dbt-customevent.md).</span></span>

 

 



