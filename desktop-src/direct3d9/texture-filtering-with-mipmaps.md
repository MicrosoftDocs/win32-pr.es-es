---
description: Un mipmap es una secuencia de texturas, cada una de las cuales es una representación de resolución progresivamente inferior de la misma imagen.
ms.assetid: b64abca9-0efb-4939-849d-e75a8d0dc10b
title: Filtrado de textura con mapas MIP (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bdc109ae6de93a26b5d5e5b90e948761e92ee92c
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104550430"
---
# <a name="texture-filtering-with-mipmaps-direct3d-9"></a><span data-ttu-id="eeb9a-103">Filtrado de textura con mapas MIP (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="eeb9a-103">Texture Filtering with Mipmaps (Direct3D 9)</span></span>

<span data-ttu-id="eeb9a-104">Un mipmap es una secuencia de texturas, cada una de las cuales es una representación de resolución progresivamente inferior de la misma imagen.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-104">A mipmap is a sequence of textures, each of which is a progressively lower resolution representation of the same image.</span></span> <span data-ttu-id="eeb9a-105">El alto y el ancho de cada imagen, o nivel, en el mipmap es una potencia de dos más pequeña que el nivel anterior.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-105">The height and width of each image, or level, in the mipmap is a power of two smaller than the previous level.</span></span> <span data-ttu-id="eeb9a-106">Los mapas MIP no tienen por qué ser cuadrados.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-106">Mipmaps do not have to be square.</span></span>

<span data-ttu-id="eeb9a-107">Se utiliza una imagen de mapa de bits de alta resolución para los objetos cercanos al usuario.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-107">A high-resolution mipmap image is used for objects that are close to the user.</span></span> <span data-ttu-id="eeb9a-108">Las imágenes de resolución inferior se usan cuando el objeto aparece más lejos.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-108">Lower-resolution images are used as the object appears farther away.</span></span> <span data-ttu-id="eeb9a-109">Mipmapping mejora la calidad de las texturas representadas a costa de usar más memoria.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-109">Mipmapping improves the quality of rendered textures at the expense of using more memory.</span></span>

<span data-ttu-id="eeb9a-110">Direct3D representa los mipmaps como una cadena de superficies asociadas.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-110">Direct3D represents mipmaps as a chain of attached surfaces.</span></span> <span data-ttu-id="eeb9a-111">La textura de resolución más alta está en el encabezado de la cadena y tiene el siguiente nivel de mipmap como datos adjuntos.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-111">The highest resolution texture is at the head of the chain and has the next level of the mipmap as an attachment.</span></span> <span data-ttu-id="eeb9a-112">A su vez, ese nivel tiene datos adjuntos que son el nivel siguiente del mipmap, y así sucesivamente, hasta el nivel de resolución más bajo del mipmap.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-112">In turn, that level has an attachment that is the next level in the mipmap, and so on, down to the lowest resolution level of the mipmap.</span></span>

<span data-ttu-id="eeb9a-113">En las ilustraciones siguientes se muestra un ejemplo de estos niveles.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-113">The following illustrations shows an example of these levels.</span></span> <span data-ttu-id="eeb9a-114">Las texturas de mapa de bits representan un inicio de sesión en un contenedor en un juego de primera persona 3D.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-114">The bitmap textures represent a sign on a container in a 3D first-person game.</span></span> <span data-ttu-id="eeb9a-115">Cuando se crea como un mipmap, la textura de resolución más alta es la primera en el conjunto.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-115">When created as a mipmap, the highest resolution texture is first in the set.</span></span> <span data-ttu-id="eeb9a-116">Cada una de las texturas posteriores en el conjunto de mipmap es más pequeña en el alto y el ancho con una potencia de 2.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-116">Each succeeding texture in the mipmap set is smaller in height and width by a power of 2.</span></span> <span data-ttu-id="eeb9a-117">En este caso, el mipmap de resolución máxima es de 256 píxeles por 256 píxeles.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-117">In this case, the maximum-resolution mipmap is 256 pixels by 256 pixels.</span></span> <span data-ttu-id="eeb9a-118">A continuación, la textura es 128x128.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-118">The next, texture is 128x128.</span></span> <span data-ttu-id="eeb9a-119">La última textura de la cadena es 64 x 64.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-119">The last texture in the chain is 64x64.</span></span>

<span data-ttu-id="eeb9a-120">Este signo tiene una distancia máxima a la que está visible.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-120">This sign has a maximum distance from which it is visible.</span></span> <span data-ttu-id="eeb9a-121">Si el usuario comienza lejos del signo, el juego muestra la textura más pequeña de la cadena de mipmap, que en este caso la textura 64 x 64.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-121">If the user begins far away from the sign, the game displays the smallest texture in the mipmap chain, which in this case the 64x64 texture.</span></span>

![Ilustración de una textura 64 x 64 de un signo de peligro](images/mip1.jpg)

<span data-ttu-id="eeb9a-123">A medida que el usuario mueve el punto de vista más cerca del signo, se usan texturas progresivamente de resolución superior en la cadena de mipmap.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-123">As the user moves the point of view closer to the sign, progressively higher-resolution textures in the mipmap chain are used.</span></span> <span data-ttu-id="eeb9a-124">La resolución de la siguiente ilustración es 128x128.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-124">The resolution in the following illustration is 128x128.</span></span>

![Ilustración de una textura 128x128 de un signo de peligro](images/mip2.jpg)

<span data-ttu-id="eeb9a-126">La textura de resolución más alta se utiliza cuando el punto de vista del usuario se encuentra en la distancia mínima permitida del signo, como se muestra en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-126">The highest resolution texture is used when the user's point of view is at the minimum allowable distance from the sign, as shown in the following illustration.</span></span>

![Ilustración de una textura 256x256 de un signo de peligro](images/mip3.jpg)

<span data-ttu-id="eeb9a-128">Se trata de una forma más eficaz de simular la perspectiva de las texturas.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-128">This is a more efficient way of simulating perspective for textures.</span></span> <span data-ttu-id="eeb9a-129">En lugar de representar una sola textura en muchas resoluciones, es más rápido utilizar varias texturas en diferentes resoluciones.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-129">Rather than render a single texture at many resolutions, it is faster to use multiple textures at varying resolutions.</span></span>

<span data-ttu-id="eeb9a-130">Direct3D puede evaluar qué textura de un conjunto de mipmap es la resolución más cercana a la salida deseada y puede asignar píxeles en su espacio de textura.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-130">Direct3D can assess which texture in a mipmap set is the closest resolution to the desired output, and it can map pixels into its texel space.</span></span> <span data-ttu-id="eeb9a-131">Si la resolución de la imagen final se encuentra entre las resoluciones de las texturas del conjunto de mipmap, Direct3D puede examinar textura en los mapas MIP y mezclar sus valores de color juntos.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-131">If the resolution of the final image is between the resolutions of the textures in the mipmap set, Direct3D can examine texels in both mipmaps and blend their color values together.</span></span>

<span data-ttu-id="eeb9a-132">Para usar los mapas MIP, la aplicación debe crear un conjunto de mapas MIP.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-132">To use mipmaps, your application must build a set of mipmaps.</span></span> <span data-ttu-id="eeb9a-133">Las aplicaciones aplican los mipmaps seleccionando el conjunto de mipmap como primera textura en el conjunto de texturas actuales.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-133">Applications apply mipmaps by selecting the mipmap set as the first texture in the set of current textures.</span></span> <span data-ttu-id="eeb9a-134">Para obtener más información, vea [Texture blending (Direct3D 9)](texture-blending.md).</span><span class="sxs-lookup"><span data-stu-id="eeb9a-134">For more information, see [Texture Blending (Direct3D 9)](texture-blending.md).</span></span>

<span data-ttu-id="eeb9a-135">A continuación, la aplicación debe establecer el método de filtrado que usa Direct3D para muestrear textura.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-135">Next, your application must set the filtering method that Direct3D uses to sample texels.</span></span> <span data-ttu-id="eeb9a-136">El método más rápido de filtrado de mipmap es hacer que Direct3D Seleccione el textura más próximo.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-136">The fastest method of mipmap filtering is to have Direct3D select the nearest texel.</span></span> <span data-ttu-id="eeb9a-137">Use el \_ valor enumerado del punto D3DTEXF para seleccionarlo.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-137">Use the D3DTEXF\_POINT enumerated value to select this.</span></span> <span data-ttu-id="eeb9a-138">Direct3D puede producir mejores resultados de filtrado si la aplicación usa el \_ valor enumerado lineal D3DTEXF.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-138">Direct3D can produce better filtering results if your application uses the D3DTEXF\_LINEAR enumerated value.</span></span> <span data-ttu-id="eeb9a-139">Esto selecciona el mipmap más cercano y, a continuación, calcula una media ponderada del textura alrededor de la ubicación en la textura a la que se asigna el píxel actual.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-139">This selects the nearest mipmap, and then computes a weighted average of the texels surrounding the location in the texture to which the current pixel maps.</span></span>

<span data-ttu-id="eeb9a-140">Las texturas de mipmap se usan en escenas 3D para reducir el tiempo necesario para representar una escena.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-140">Mipmap textures are used in 3D scenes to decrease the time required to render a scene.</span></span> <span data-ttu-id="eeb9a-141">También mejoran el realismo de la escena.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-141">They also improve the scene's realism.</span></span> <span data-ttu-id="eeb9a-142">Sin embargo, a menudo requieren grandes cantidades de memoria.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-142">However, they often require large amounts of memory.</span></span>

## <a name="creating-a-set-of-mipmaps"></a><span data-ttu-id="eeb9a-143">Crear un conjunto de mapas MIP</span><span class="sxs-lookup"><span data-stu-id="eeb9a-143">Creating a Set of Mipmaps</span></span>

<span data-ttu-id="eeb9a-144">En el ejemplo siguiente se muestra cómo la aplicación puede llamar al método [**IDirect3DDevice9:: CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) para crear una cadena de cinco niveles de mipmap: 256x256, 128x128, 64 x 64, 32x32 y 16x16.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-144">The following example shows how your application can call the [**IDirect3DDevice9::CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) method to build a chain of five mipmap levels: 256x256, 128x128, 64x64, 32x32, and 16x16.</span></span>


```
// This code example assumes that m_d3dDevice is a
// valid pointer to a IDirect3DDevice9 interface

IDirect3DTexture9 * pMipMap;
m_pD3DDevice->CreateTexture(256, 256, 5, 0, D3DFMT_R8G8B8, 
    D3DPOOL_MANAGED, &pMipMap);
```



<span data-ttu-id="eeb9a-145">Los dos primeros parámetros aceptados por [**IDirect3DDevice9:: CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) son el tamaño y el ancho de la textura de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-145">The first two parameters that are accepted by [**IDirect3DDevice9::CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) are the size and width of the top-level texture.</span></span> <span data-ttu-id="eeb9a-146">El tercer parámetro especifica el número de niveles de la textura.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-146">The third parameter specifies the number of levels in the texture.</span></span> <span data-ttu-id="eeb9a-147">Si se establece en cero, Direct3D crea una cadena de superficies, cada una de las cuales tiene una potencia de dos más pequeña que la anterior, hasta el tamaño más pequeño posible de 1x1.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-147">If you set this to zero, Direct3D creates a chain of surfaces, each a power of two smaller than the previous one, down to the smallest possible size of 1x1.</span></span> <span data-ttu-id="eeb9a-148">El cuarto parámetro especifica el uso de este recurso; en este caso, se especifica 0 para indicar que no hay ningún uso específico para el recurso.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-148">The fourth parameter specifies the usage for this resource; in this case, 0 is specified to indicate no specific usage for the resource.</span></span> <span data-ttu-id="eeb9a-149">El quinto parámetro especifica el formato de superficie de la textura.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-149">The fifth parameter specifies the surface format for the texture.</span></span> <span data-ttu-id="eeb9a-150">Use un valor del tipo enumerado [D3DFORMAT](d3dformat.md) para este parámetro.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-150">Use a value from the [D3DFORMAT](d3dformat.md) enumerated type for this parameter.</span></span> <span data-ttu-id="eeb9a-151">El sexto parámetro especifica un miembro del tipo enumerado [**D3DPOOL**](./d3dpool.md) que indica la clase de memoria en la que se va a colocar el recurso creado.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-151">The sixth parameter specifies a member of the [**D3DPOOL**](./d3dpool.md) enumerated type indicating the memory class into which to place the created resource.</span></span> <span data-ttu-id="eeb9a-152">A menos que use texturas dinámicas, se recomienda el uso de D3DPOOL \_ administrado.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-152">Unless you are using dynamic textures, D3DPOOL\_MANAGED is recommended.</span></span> <span data-ttu-id="eeb9a-153">El último parámetro toma la dirección de un puntero a una interfaz [**IDirect3DTexture9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dtexture9) .</span><span class="sxs-lookup"><span data-stu-id="eeb9a-153">The final parameter takes the address of a pointer to an [**IDirect3DTexture9**](/windows/win32/api/d3d9helper/nn-d3d9helper-idirect3dtexture9) interface.</span></span>

> [!Note]  
> <span data-ttu-id="eeb9a-154">Cada superficie de una cadena de mipmap tiene dimensiones que son una mitad de la superficie anterior de la cadena.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-154">Each surface in a mipmap chain has dimensions that are one-half that of the previous surface in the chain.</span></span> <span data-ttu-id="eeb9a-155">Si el mipmap de nivel superior tiene dimensiones de 256x128, las dimensiones del mipmap de segundo nivel son 128x64, el tercer nivel es 64x32, y así sucesivamente, hasta 1x1.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-155">If the top-level mipmap has dimensions of 256x128, the dimensions of the second-level mipmap are 128x64, the third-level are 64x32, and so on, down to 1x1.</span></span> <span data-ttu-id="eeb9a-156">No se puede solicitar un número de niveles de mipmap en niveles que provoquen que el ancho o el alto de cualquier mipmap en la cadena sea menor que 1.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-156">You cannot request a number of mipmap levels in Levels that would cause either the width or height of any mipmap in the chain to be smaller than 1.</span></span> <span data-ttu-id="eeb9a-157">En el caso simple de una superficie de mipmap de nivel superior de 4 TB, el valor máximo permitido para los niveles es tres.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-157">In the simple case of a 4x2 top-level mipmap surface, the maximum value allowed for Levels is three.</span></span> <span data-ttu-id="eeb9a-158">Las dimensiones de nivel superior son 4 TB, las dimensiones de segundo nivel son 2x1 y las dimensiones del tercer nivel son 1x1.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-158">The top-level dimensions are 4x2, the second-level dimensions are 2x1, and the dimensions for the third level are 1x1.</span></span> <span data-ttu-id="eeb9a-159">Un valor mayor que 3 en niveles da como resultado un valor fraccionario en el alto del mipmap de segundo nivel y, por tanto, no se permite.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-159">A value larger than 3 in Levels results in a fractional value in the height of the second-level mipmap, and is therefore disallowed.</span></span>

 

## <a name="selecting-and-displaying-a-mipmap"></a><span data-ttu-id="eeb9a-160">Seleccionar y mostrar un mipmap</span><span class="sxs-lookup"><span data-stu-id="eeb9a-160">Selecting and Displaying a Mipmap</span></span>

<span data-ttu-id="eeb9a-161">Llame al método [**IDirect3DDevice9:: SetTexture**](/windows/desktop/api) para establecer el conjunto de texturas de mipmap como la primera textura en la lista de texturas actuales.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-161">Call the [**IDirect3DDevice9::SetTexture**](/windows/desktop/api) method to set the mipmap texture set as the first texture in the list of current textures.</span></span> <span data-ttu-id="eeb9a-162">Para obtener más información, vea [Texture blending (Direct3D 9)](texture-blending.md).</span><span class="sxs-lookup"><span data-stu-id="eeb9a-162">For more information, see [Texture Blending (Direct3D 9)](texture-blending.md).</span></span>

<span data-ttu-id="eeb9a-163">Una vez que la aplicación selecciona el conjunto de texturas de mipmap, debe asignar valores del tipo enumerado [**D3DTEXTUREFILTERTYPE**](./d3dtexturefiltertype.md) al estado de muestra de D3DSAMP \_ MIPFILTER.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-163">After your application selects the mipmap texture set, it must assign values from the [**D3DTEXTUREFILTERTYPE**](./d3dtexturefiltertype.md) enumerated type to the D3DSAMP\_MIPFILTER sampler state.</span></span> <span data-ttu-id="eeb9a-164">Después, Direct3D realiza automáticamente el filtrado de texturas MIP.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-164">Direct3D then automatically performs mipmap texture filtering.</span></span> <span data-ttu-id="eeb9a-165">En el ejemplo de código siguiente se muestra cómo habilitar el filtrado de texturas MIP.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-165">Enabling mipmap texture filtering is demonstrated in the following code example.</span></span>


```
m_pD3DDevice->SetTexture(0, pMipMap);
m_pD3DDevice->SetSamplerState(0, D3DSAMP_MIPFILTER, D3DTEXF_POINT);
```



<span data-ttu-id="eeb9a-166">La aplicación también puede atravesar manualmente una cadena de superficies MIP mediante el método [**IDirect3DTexture9:: GetSurfaceLevel**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dtexture9-getsurfacelevel) y especificando el nivel de mipmap que se va a recuperar.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-166">Your application can also manually traverse a chain of mipmap surfaces by using the [**IDirect3DTexture9::GetSurfaceLevel**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dtexture9-getsurfacelevel) method and specifying the mipmap level to retrieve.</span></span> <span data-ttu-id="eeb9a-167">En el ejemplo siguiente se atraviesa una cadena de mipmap de la resolución más alta a la más baja.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-167">The following example traverses a mipmap chain from highest to lowest resolutions.</span></span>


```
IDirect3DSurface9 * pSurfaceLevel;
for (int iLevel = 0; iLevel < pMipMap->GetLevelCount(); iLevel++)
{
    pMipMap->GetSurfaceLevel(iLevel, &pSurfaceLevel);
    // Process this level
    pSurfaceLevel->Release();
}
```



<span data-ttu-id="eeb9a-168">Las aplicaciones deben atravesar manualmente una cadena de mipmap para cargar los datos de mapa de bits en cada superficie de la cadena.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-168">Applications need to manually traverse a mipmap chain to load bitmap data into each surface in the chain.</span></span> <span data-ttu-id="eeb9a-169">Esta suele ser la única razón para atravesar la cadena.</span><span class="sxs-lookup"><span data-stu-id="eeb9a-169">This is typically the only reason to traverse the chain.</span></span> <span data-ttu-id="eeb9a-170">Una aplicación puede recuperar el número de niveles de un mipmap llamando a [**IDirect3DBaseTexture9:: GetLevelCount**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dbasetexture9-getlevelcount).</span><span class="sxs-lookup"><span data-stu-id="eeb9a-170">An application can retrieve the number of levels in a mipmap by calling [**IDirect3DBaseTexture9::GetLevelCount**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dbasetexture9-getlevelcount).</span></span>

## <a name="related-topics"></a><span data-ttu-id="eeb9a-171">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="eeb9a-171">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="eeb9a-172">Filtrado de textura</span><span class="sxs-lookup"><span data-stu-id="eeb9a-172">Texture Filtering</span></span>](texture-filtering.md)
</dt> </dl>

 

 
