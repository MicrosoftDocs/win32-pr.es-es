---
title: Usar MSMQ como transporte RPC
description: El subsistema RPC admite el uso de MSMQ como transporte en modos sincrónicos y asincrónicos.
ms.assetid: c3f96a91-b7bb-4c2a-8699-2100324af165
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a647fe4111e3ba4fc2ad0fe05fb7bcb48729a4c2
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "103793125"
---
# <a name="using-msmq-as-an-rpc-transport"></a><span data-ttu-id="6ec64-103">Usar MSMQ como transporte RPC</span><span class="sxs-lookup"><span data-stu-id="6ec64-103">Using MSMQ as an RPC Transport</span></span>

<span data-ttu-id="6ec64-104">El subsistema RPC admite el uso de MSMQ como transporte en modos sincrónicos y asincrónicos.</span><span class="sxs-lookup"><span data-stu-id="6ec64-104">The RPC subsystem supports using MSMQ as a transport in synchronous and asynchronous modes.</span></span>

<span data-ttu-id="6ec64-105">El modo sincrónico utiliza las llamadas a procedimiento remoto convencionales.</span><span class="sxs-lookup"><span data-stu-id="6ec64-105">Synchronous mode uses conventional remote procedure calls.</span></span> <span data-ttu-id="6ec64-106">Estas llamadas usan puntos de conexión conocidos y el transporte de cola de mensajes, [ncadg \_ MQ](/windows/desktop/Midl/ncadg-mq), como protocolo de transporte.</span><span class="sxs-lookup"><span data-stu-id="6ec64-106">These calls use well-known endpoints and the message queue transport, [ncadg\_mq](/windows/desktop/Midl/ncadg-mq), as the transport protocol.</span></span> <span data-ttu-id="6ec64-107">En el modo sincrónico, los procedimientos remotos pueden tener \[ parámetros [in](/windows/desktop/Midl/in) \] y \[ [out](/windows/desktop/Midl/out-idl) \] y pueden usar los servicios de seguridad RPC estándar.</span><span class="sxs-lookup"><span data-stu-id="6ec64-107">In synchronous mode, your remote procedures can have \[ [in](/windows/desktop/Midl/in)\] and \[ [out](/windows/desktop/Midl/out-idl)\] parameters and can use the standard RPC security services.</span></span> <span data-ttu-id="6ec64-108">El subsistema RPC crea una cola de respuestas para llamadas remotas que contienen parámetros **\[ out \]** .</span><span class="sxs-lookup"><span data-stu-id="6ec64-108">The RPC subsystem creates a reply queue for remote calls containing **\[out\]** parameters.</span></span> <span data-ttu-id="6ec64-109">El modo sincrónico es útil para las aplicaciones en las que el cliente necesita recibir datos del servidor.</span><span class="sxs-lookup"><span data-stu-id="6ec64-109">The synchronous mode is useful for applications where the client needs to receive data from the server.</span></span> <span data-ttu-id="6ec64-110">La principal limitación de este modo es que, al igual que con las llamadas a procedimientos remotos convencionales, el cliente y el servidor deben estar en ejecución y seguir ejecutándose mientras dure la llamada.</span><span class="sxs-lookup"><span data-stu-id="6ec64-110">The main limitation of this mode is that, as with conventional remote procedure calls, both the client and server must be running and remain running for the duration of the call.</span></span>

<span data-ttu-id="6ec64-111">El modo asincrónico permite a las aplicaciones cliente realizar llamadas al servidor y volver inmediatamente, independientemente del estado de la aplicación de servidor o del equipo servidor.</span><span class="sxs-lookup"><span data-stu-id="6ec64-111">Asynchronous mode lets client applications make calls to the server and return immediately, regardless of the state of the server application or the server computer.</span></span> <span data-ttu-id="6ec64-112">También hace que un subconjunto de características de MSMQ esté disponible para administrar las colas de mensajes y el flujo de información.</span><span class="sxs-lookup"><span data-stu-id="6ec64-112">It also makes a subset of MSMQ features available for managing message queues and information flow.</span></span> <span data-ttu-id="6ec64-113">La función [**RpcBindingSetOption**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetoption) permite controlar la calidad de servicio, la prioridad de llamadas, el registro en diario, la seguridad y la duración de la cola de procesos del servidor.</span><span class="sxs-lookup"><span data-stu-id="6ec64-113">The [**RpcBindingSetOption**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetoption) function lets you control quality of service, call priority, journaling, security, and the lifetime of the server process queue.</span></span> <span data-ttu-id="6ec64-114">La función [**RpcServerUseProtseqEpEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqepex) permite especificar atributos de la cola de procesos de servidor, como la persistencia de colas, la autenticación y el cifrado.</span><span class="sxs-lookup"><span data-stu-id="6ec64-114">The [**RpcServerUseProtseqEpEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqepex) function lets you specify attributes of the server process queue, such as queue persistence, authentication, and encryption.</span></span>

<span data-ttu-id="6ec64-115">Se implementa MSMQ asincrónico como lo haría con MSMQ sincrónico.</span><span class="sxs-lookup"><span data-stu-id="6ec64-115">You implement asynchronous MSMQ as you would synchronous MSMQ.</span></span> <span data-ttu-id="6ec64-116">Debe usar puntos de conexión conocidos y definir el protocolo de transporte para que sea [ncadg \_ MQ](/windows/desktop/Midl/ncadg-mq).</span><span class="sxs-lookup"><span data-stu-id="6ec64-116">You must use well-known endpoints, and define the transport protocol to be [ncadg\_mq](/windows/desktop/Midl/ncadg-mq).</span></span> <span data-ttu-id="6ec64-117">En el archivo IDL, aplique el atributo [Message](/windows/desktop/Midl/message) a las funciones que utilizan Message Queue Server asincrónico.</span><span class="sxs-lookup"><span data-stu-id="6ec64-117">In your IDL file, apply the [message](/windows/desktop/Midl/message) attribute to the functions that use asynchronous message queuing.</span></span> <span data-ttu-id="6ec64-118">Tenga en cuenta que las funciones \[ de mensaje solo pueden tener \] parámetros in.</span><span class="sxs-lookup"><span data-stu-id="6ec64-118">Note that message functions can have \[in\] parameters only.</span></span>

 

 