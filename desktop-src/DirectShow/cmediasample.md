---
description: La clase CMediaSample define un ejemplo multimedia que admite la interfaz IMediaSample2. El ejemplo multimedia contiene un puntero a un búfer de memoria y varias propiedades almacenadas como variables de miembro protegidas.
ms.assetid: 1e609c7c-3200-4540-904e-7659976df0da
title: Clase CMediaSample (Amfilter. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CMediaSample
api_type:
- COM
api_location:
- Strmbase.lib
- Strmbase.dll
- Strmbasd.lib
- Strmbasd.dll
ms.openlocfilehash: 72cfe0f86ff6b6643f2f7793822899136a5c6454
ms.sourcegitcommit: c8ec1ded1ffffc364d3c4f560bb2171da0dc5040
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/22/2021
ms.locfileid: "105670323"
---
# <a name="cmediasample-class"></a><span data-ttu-id="7df65-104">Clase CMediaSample</span><span class="sxs-lookup"><span data-stu-id="7df65-104">CMediaSample class</span></span>

![jerarquía de clases cmediasample](images/wutil03.png)

<span data-ttu-id="7df65-106">La `CMediaSample` clase define un ejemplo multimedia que admite la interfaz [**IMediaSample2**](/windows/desktop/api/Strmif/nn-strmif-imediasample2) .</span><span class="sxs-lookup"><span data-stu-id="7df65-106">The `CMediaSample` class defines a media sample that supports the [**IMediaSample2**](/windows/desktop/api/Strmif/nn-strmif-imediasample2) interface.</span></span> <span data-ttu-id="7df65-107">El ejemplo multimedia contiene un puntero a un búfer de memoria y varias propiedades almacenadas como variables de miembro protegidas.</span><span class="sxs-lookup"><span data-stu-id="7df65-107">The media sample contains a pointer to a memory buffer, and various properties stored as protected member variables.</span></span>

<span data-ttu-id="7df65-108">Los ejemplos de medios se crean mediante asignadores, que se derivan de la clase [**CBaseAllocator**](cbaseallocator.md) .</span><span class="sxs-lookup"><span data-stu-id="7df65-108">Media samples are created by allocators, which are derived from the [**CBaseAllocator**](cbaseallocator.md) class.</span></span> <span data-ttu-id="7df65-109">El `CMediaSample` constructor recibe un puntero a un búfer asignado, junto con el tamaño del búfer.</span><span class="sxs-lookup"><span data-stu-id="7df65-109">The `CMediaSample` constructor receives a pointer to an allocated buffer, along with the size of the buffer.</span></span> <span data-ttu-id="7df65-110">Normalmente, se establecen y recuperan otras propiedades a través de los métodos de la interfaz [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) .</span><span class="sxs-lookup"><span data-stu-id="7df65-110">Other properties are typically set and retrieved through [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) interface methods.</span></span>

<span data-ttu-id="7df65-111">El ciclo de vida de un ejemplo multimedia difiere del de la mayoría de los objetos COM:</span><span class="sxs-lookup"><span data-stu-id="7df65-111">The life cycle of a media sample differs from that of most COM objects:</span></span>

-   <span data-ttu-id="7df65-112">El asignador contiene una lista de ejemplos gratuitos.</span><span class="sxs-lookup"><span data-stu-id="7df65-112">The allocator holds a list of free samples.</span></span> <span data-ttu-id="7df65-113">Cuando un filtro necesita un nuevo ejemplo, llama al método [**IMemAllocator:: getBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) del asignador.</span><span class="sxs-lookup"><span data-stu-id="7df65-113">When a filter needs a new sample, it calls the allocator's [**IMemAllocator::GetBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) method.</span></span> <span data-ttu-id="7df65-114">El asignador recupera un ejemplo de su lista libre, incrementa el recuento de referencias del ejemplo y devuelve un puntero al ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7df65-114">The allocator retrieves a sample from its free list, increments the sample's reference count, and returns a pointer to the sample.</span></span>
-   <span data-ttu-id="7df65-115">Una vez que el filtro se realiza con el ejemplo, llama al método **IUnknown:: Release** en el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7df65-115">After the filter is done with the sample, it calls the **IUnknown::Release** method on the sample.</span></span> <span data-ttu-id="7df65-116">A diferencia de la mayoría de los objetos, el ejemplo no se elimina a sí mismo cuando su recuento de referencias llega a cero.</span><span class="sxs-lookup"><span data-stu-id="7df65-116">Unlike most objects, the sample does not delete itself when its reference count reaches zero.</span></span> <span data-ttu-id="7df65-117">En su lugar, llama al método [**IMemAllocator:: ReleaseBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-releasebuffer) en el asignador y el asignador devuelve el ejemplo a su lista libre.</span><span class="sxs-lookup"><span data-stu-id="7df65-117">Instead, it calls the [**IMemAllocator::ReleaseBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-releasebuffer) method on the allocator, and the allocator returns the sample to its free list.</span></span>
-   <span data-ttu-id="7df65-118">El asignador no destruye los ejemplos hasta que se llama al método [**IMemAllocator::D ecommit**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-decommit) .</span><span class="sxs-lookup"><span data-stu-id="7df65-118">The allocator does not destroy samples until the [**IMemAllocator::Decommit**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-decommit) method is called.</span></span>



| <span data-ttu-id="7df65-119">Variables de miembro protegidas</span><span class="sxs-lookup"><span data-stu-id="7df65-119">Protected Member Variables</span></span>                                           | <span data-ttu-id="7df65-120">Descripción</span><span class="sxs-lookup"><span data-stu-id="7df65-120">Description</span></span>                                                                                     |
|----------------------------------------------------------------------|-------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="7df65-121">**m \_ dwFlags**</span><span class="sxs-lookup"><span data-stu-id="7df65-121">**m\_dwFlags**</span></span>](cmediasample-m-dwflags.md)                         | <span data-ttu-id="7df65-122">Marcas de propiedades de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7df65-122">Sample property flags.</span></span>                                                                          |
| [<span data-ttu-id="7df65-123">**m \_ dwTypeSpecificFlags**</span><span class="sxs-lookup"><span data-stu-id="7df65-123">**m\_dwTypeSpecificFlags**</span></span>](cmediasample-m-dwtypespecificflags.md) | <span data-ttu-id="7df65-124">Marcas específicas del tipo.</span><span class="sxs-lookup"><span data-stu-id="7df65-124">Type-specific flags.</span></span>                                                                            |
| [<span data-ttu-id="7df65-125">**m \_ pBuffer**</span><span class="sxs-lookup"><span data-stu-id="7df65-125">**m\_pBuffer**</span></span>](cmediasample-m-pbuffer.md)                         | <span data-ttu-id="7df65-126">Puntero al búfer de memoria que contiene los datos multimedia.</span><span class="sxs-lookup"><span data-stu-id="7df65-126">Pointer to the memory buffer that contains the media data.</span></span>                                      |
| [<span data-ttu-id="7df65-127">**m \_ lActual**</span><span class="sxs-lookup"><span data-stu-id="7df65-127">**m\_lActual**</span></span>](cmediasample-m-lactual.md)                         | <span data-ttu-id="7df65-128">Longitud de los datos válidos en el búfer, en bytes.</span><span class="sxs-lookup"><span data-stu-id="7df65-128">Length of the valid data in the buffer, in bytes.</span></span>                                               |
| [<span data-ttu-id="7df65-129">**m \_ cbBuffer**</span><span class="sxs-lookup"><span data-stu-id="7df65-129">**m\_cbBuffer**</span></span>](cmediasample-m-cbbuffer.md)                       | <span data-ttu-id="7df65-130">Tamaño del búfer, en bytes.</span><span class="sxs-lookup"><span data-stu-id="7df65-130">Size of the buffer, in bytes.</span></span>                                                                   |
| [<span data-ttu-id="7df65-131">**m \_ pAllocator**</span><span class="sxs-lookup"><span data-stu-id="7df65-131">**m\_pAllocator**</span></span>](cmediasample-m-pallocator.md)                   | <span data-ttu-id="7df65-132">Puntero al asignador que creó este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7df65-132">Pointer to the allocator that created this sample.</span></span>                                              |
| [<span data-ttu-id="7df65-133">**m \_ pNext**</span><span class="sxs-lookup"><span data-stu-id="7df65-133">**m\_pNext**</span></span>](cmediasample-m-pnext.md)                             | <span data-ttu-id="7df65-134">Puntero al siguiente ejemplo de la lista de ejemplos del asignador.</span><span class="sxs-lookup"><span data-stu-id="7df65-134">Pointer to the next sample in the allocator's list of samples.</span></span>                                  |
| [<span data-ttu-id="7df65-135">**\_Inicio m**</span><span class="sxs-lookup"><span data-stu-id="7df65-135">**m\_Start**</span></span>](cmediasample-m-start.md)                             | <span data-ttu-id="7df65-136">Hora de inicio de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7df65-136">Sample start time.</span></span>                                                                              |
| [<span data-ttu-id="7df65-137">**\_fin m**</span><span class="sxs-lookup"><span data-stu-id="7df65-137">**m\_End**</span></span>](cmediasample-m-end.md)                                 | <span data-ttu-id="7df65-138">Hora de finalización de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7df65-138">Sample end time.</span></span>                                                                                |
| [<span data-ttu-id="7df65-139">**m \_ MediaStart**</span><span class="sxs-lookup"><span data-stu-id="7df65-139">**m\_MediaStart**</span></span>](cmediasample-m-mediastart.md)                   | <span data-ttu-id="7df65-140">Hora de inicio del medio.</span><span class="sxs-lookup"><span data-stu-id="7df65-140">Media start time.</span></span>                                                                               |
| [<span data-ttu-id="7df65-141">**m \_ MediaEnd**</span><span class="sxs-lookup"><span data-stu-id="7df65-141">**m\_MediaEnd**</span></span>](cmediasample-m-mediaend.md)                       | <span data-ttu-id="7df65-142">Hora de detención del medio.</span><span class="sxs-lookup"><span data-stu-id="7df65-142">Media stop time.</span></span>                                                                                |
| [<span data-ttu-id="7df65-143">**m \_ pMediaType**</span><span class="sxs-lookup"><span data-stu-id="7df65-143">**m\_pMediaType**</span></span>](cmediasample-m-pmediatype.md)                   | <span data-ttu-id="7df65-144">Puntero al tipo de medio, si el tipo ha cambiado respecto al ejemplo anterior en el flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="7df65-144">Pointer to the media type, if the type has changed from the previous sample in the data stream.</span></span> |
| [<span data-ttu-id="7df65-145">**m \_ dwStreamId**</span><span class="sxs-lookup"><span data-stu-id="7df65-145">**m\_dwStreamId**</span></span>](cmediasample-m-dwstreamid.md)                   | <span data-ttu-id="7df65-146">Identificador de flujo.</span><span class="sxs-lookup"><span data-stu-id="7df65-146">Stream identifier.</span></span>                                                                              |
| <span data-ttu-id="7df65-147">Variables de miembro público</span><span class="sxs-lookup"><span data-stu-id="7df65-147">Public Member Variables</span></span>                                              | <span data-ttu-id="7df65-148">Descripción</span><span class="sxs-lookup"><span data-stu-id="7df65-148">Description</span></span>                                                                                     |
| [<span data-ttu-id="7df65-149">**m \_ cRef**</span><span class="sxs-lookup"><span data-stu-id="7df65-149">**m\_cRef**</span></span>](cmediasample-m-cref.md)                               | <span data-ttu-id="7df65-150">Recuento de referencias.</span><span class="sxs-lookup"><span data-stu-id="7df65-150">Reference count.</span></span>                                                                                |
| <span data-ttu-id="7df65-151">Métodos públicos</span><span class="sxs-lookup"><span data-stu-id="7df65-151">Public Methods</span></span>                                                       | <span data-ttu-id="7df65-152">Descripción</span><span class="sxs-lookup"><span data-stu-id="7df65-152">Description</span></span>                                                                                     |
| [<span data-ttu-id="7df65-153">**CMediaSample**</span><span class="sxs-lookup"><span data-stu-id="7df65-153">**CMediaSample**</span></span>](cmediasample-cmediasample.md)                    | <span data-ttu-id="7df65-154">Método de constructor.</span><span class="sxs-lookup"><span data-stu-id="7df65-154">Constructor method.</span></span>                                                                             |
| [<span data-ttu-id="7df65-155">**~ CMediaSample**</span><span class="sxs-lookup"><span data-stu-id="7df65-155">**~ CMediaSample**</span></span>](cmediasample--cmediasample.md)                 | <span data-ttu-id="7df65-156">Método de destructor.</span><span class="sxs-lookup"><span data-stu-id="7df65-156">Destructor method.</span></span> <span data-ttu-id="7df65-157">Virtualiza.</span><span class="sxs-lookup"><span data-stu-id="7df65-157">Virtual.</span></span>                                                                     |
| [<span data-ttu-id="7df65-158">**SetPointer**</span><span class="sxs-lookup"><span data-stu-id="7df65-158">**SetPointer**</span></span>](cmediasample-setpointer.md)                        | <span data-ttu-id="7df65-159">Establece el puntero en el búfer de memoria.</span><span class="sxs-lookup"><span data-stu-id="7df65-159">Sets the pointer to the memory buffer.</span></span>                                                          |
| <span data-ttu-id="7df65-160">Métodos IMediaSample</span><span class="sxs-lookup"><span data-stu-id="7df65-160">IMediaSample Methods</span></span>                                                 | <span data-ttu-id="7df65-161">Descripción</span><span class="sxs-lookup"><span data-stu-id="7df65-161">Description</span></span>                                                                                     |
| [<span data-ttu-id="7df65-162">**GetPointer**</span><span class="sxs-lookup"><span data-stu-id="7df65-162">**GetPointer**</span></span>](cmediasample-getpointer.md)                        | <span data-ttu-id="7df65-163">Recupera un puntero de lectura/escritura en el búfer.</span><span class="sxs-lookup"><span data-stu-id="7df65-163">Retrieves a read/write pointer to the buffer.</span></span>                                                   |
| [<span data-ttu-id="7df65-164">**GetSize (**</span><span class="sxs-lookup"><span data-stu-id="7df65-164">**GetSize**</span></span>](cmediasample-getsize.md)                              | <span data-ttu-id="7df65-165">Recupera el tamaño del búfer.</span><span class="sxs-lookup"><span data-stu-id="7df65-165">Retrieves the size of the buffer.</span></span>                                                               |
| [<span data-ttu-id="7df65-166">**GetTime**</span><span class="sxs-lookup"><span data-stu-id="7df65-166">**GetTime**</span></span>](cmediasample-gettime.md)                              | <span data-ttu-id="7df65-167">Recupera los tiempos de flujo en los que este ejemplo debe comenzar y finalizar.</span><span class="sxs-lookup"><span data-stu-id="7df65-167">Retrieves the stream times at which this sample should begin and finish.</span></span>                        |
| [<span data-ttu-id="7df65-168">**SetTime**</span><span class="sxs-lookup"><span data-stu-id="7df65-168">**SetTime**</span></span>](cmediasample-settime.md)                              | <span data-ttu-id="7df65-169">Establece los tiempos de flujo en los que este ejemplo debe comenzar y finalizar.</span><span class="sxs-lookup"><span data-stu-id="7df65-169">Sets the stream times at which this sample should start and finish.</span></span>                             |
| [<span data-ttu-id="7df65-170">**IsSyncPoint**</span><span class="sxs-lookup"><span data-stu-id="7df65-170">**IsSyncPoint**</span></span>](cmediasample-issyncpoint.md)                      | <span data-ttu-id="7df65-171">Determina si el principio del ejemplo es un punto de sincronización.</span><span class="sxs-lookup"><span data-stu-id="7df65-171">Determines if the beginning of the sample is a synchronization point.</span></span>                           |
| [<span data-ttu-id="7df65-172">**SetSyncPoint**</span><span class="sxs-lookup"><span data-stu-id="7df65-172">**SetSyncPoint**</span></span>](cmediasample-setsyncpoint.md)                    | <span data-ttu-id="7df65-173">Especifica si el principio de este ejemplo es un punto de sincronización.</span><span class="sxs-lookup"><span data-stu-id="7df65-173">Specifies whether the beginning of this sample is a synchronization point.</span></span>                      |
| [<span data-ttu-id="7df65-174">**IsPreroll**</span><span class="sxs-lookup"><span data-stu-id="7df65-174">**IsPreroll**</span></span>](cmediasample-ispreroll.md)                          | <span data-ttu-id="7df65-175">Determina si este ejemplo es un ejemplo de relanzamiento.</span><span class="sxs-lookup"><span data-stu-id="7df65-175">Determines if this sample is a preroll sample.</span></span>                                                  |
| [<span data-ttu-id="7df65-176">**SetPreroll**</span><span class="sxs-lookup"><span data-stu-id="7df65-176">**SetPreroll**</span></span>](cmediasample-setpreroll.md)                        | <span data-ttu-id="7df65-177">Especifica si este ejemplo es un ejemplo de relanzamiento.</span><span class="sxs-lookup"><span data-stu-id="7df65-177">Specifies whether this sample is a preroll sample.</span></span>                                              |
| [<span data-ttu-id="7df65-178">**GetActualDataLength**</span><span class="sxs-lookup"><span data-stu-id="7df65-178">**GetActualDataLength**</span></span>](cmediasample-getactualdatalength.md)      | <span data-ttu-id="7df65-179">Recupera la longitud de los datos válidos en el búfer.</span><span class="sxs-lookup"><span data-stu-id="7df65-179">Retrieves the length of the valid data in the buffer.</span></span>                                           |
| [<span data-ttu-id="7df65-180">**SetActualDataLength**</span><span class="sxs-lookup"><span data-stu-id="7df65-180">**SetActualDataLength**</span></span>](cmediasample-setactualdatalength.md)      | <span data-ttu-id="7df65-181">Establece la longitud de los datos válidos en el búfer.</span><span class="sxs-lookup"><span data-stu-id="7df65-181">Sets the length of the valid data in the buffer.</span></span>                                                |
| [<span data-ttu-id="7df65-182">**GetMediaType**</span><span class="sxs-lookup"><span data-stu-id="7df65-182">**GetMediaType**</span></span>](cmediasample-getmediatype.md)                    | <span data-ttu-id="7df65-183">Recupera el tipo de medio si el tipo de medio es distinto del ejemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="7df65-183">Retrieves the media type, if the media type differs from the previous sample.</span></span>                   |
| [<span data-ttu-id="7df65-184">**SetMediaType**</span><span class="sxs-lookup"><span data-stu-id="7df65-184">**SetMediaType**</span></span>](cmediasample-setmediatype.md)                    | <span data-ttu-id="7df65-185">Establece el tipo de medio para el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7df65-185">Sets the media type for the sample.</span></span>                                                             |
| [<span data-ttu-id="7df65-186">**IsDiscontinuity**</span><span class="sxs-lookup"><span data-stu-id="7df65-186">**IsDiscontinuity**</span></span>](cmediasample-isdiscontinuity.md)              | <span data-ttu-id="7df65-187">Determina si este ejemplo representa una interrupción en el flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="7df65-187">Determines if this sample represents a break in the data stream.</span></span>                                |
| [<span data-ttu-id="7df65-188">**SetDiscontinuity**</span><span class="sxs-lookup"><span data-stu-id="7df65-188">**SetDiscontinuity**</span></span>](cmediasample-setdiscontinuity.md)            | <span data-ttu-id="7df65-189">Especifica si este ejemplo representa una interrupción en el flujo de datos.</span><span class="sxs-lookup"><span data-stu-id="7df65-189">Specifies whether this sample represents a break in the data stream.</span></span>                            |
| [<span data-ttu-id="7df65-190">**GetMediaTime**</span><span class="sxs-lookup"><span data-stu-id="7df65-190">**GetMediaTime**</span></span>](cmediasample-getmediatime.md)                    | <span data-ttu-id="7df65-191">Recupera las horas de los medios de este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7df65-191">Retrieves the media times for this sample.</span></span>                                                      |
| [<span data-ttu-id="7df65-192">**SetMediaTime**</span><span class="sxs-lookup"><span data-stu-id="7df65-192">**SetMediaTime**</span></span>](cmediasample-setmediatime.md)                    | <span data-ttu-id="7df65-193">Establece las horas de los medios para este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7df65-193">Sets the media times for this sample.</span></span>                                                           |
| <span data-ttu-id="7df65-194">Métodos IMediaSample2</span><span class="sxs-lookup"><span data-stu-id="7df65-194">IMediaSample2 Methods</span></span>                                                | <span data-ttu-id="7df65-195">Descripción</span><span class="sxs-lookup"><span data-stu-id="7df65-195">Description</span></span>                                                                                     |
| [<span data-ttu-id="7df65-196">**GetProperties**</span><span class="sxs-lookup"><span data-stu-id="7df65-196">**GetProperties**</span></span>](cmediasample-getproperties.md)                  | <span data-ttu-id="7df65-197">Recupera las propiedades del ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7df65-197">Retrieves the properties of the sample.</span></span>                                                         |
| [<span data-ttu-id="7df65-198">**SetProperties**</span><span class="sxs-lookup"><span data-stu-id="7df65-198">**SetProperties**</span></span>](cmediasample-setproperties.md)                  | <span data-ttu-id="7df65-199">Establece las propiedades del ejemplo.</span><span class="sxs-lookup"><span data-stu-id="7df65-199">Sets the properties of the sample.</span></span>                                                              |



 

## <a name="requirements"></a><span data-ttu-id="7df65-200">Requisitos</span><span class="sxs-lookup"><span data-stu-id="7df65-200">Requirements</span></span>



| <span data-ttu-id="7df65-201">Requisito</span><span class="sxs-lookup"><span data-stu-id="7df65-201">Requirement</span></span> | <span data-ttu-id="7df65-202">Value</span><span class="sxs-lookup"><span data-stu-id="7df65-202">Value</span></span> |
|--------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="7df65-203">Encabezado</span><span class="sxs-lookup"><span data-stu-id="7df65-203">Header</span></span><br/>  | <dl> <span data-ttu-id="7df65-204"><dt>Amfilter. h (incluir streams. h)</dt></span><span class="sxs-lookup"><span data-stu-id="7df65-204"><dt>Amfilter.h (include Streams.h)</dt></span></span> </dl>                                                                                  |
| <span data-ttu-id="7df65-205">Biblioteca</span><span class="sxs-lookup"><span data-stu-id="7df65-205">Library</span></span><br/> | <dl> <span data-ttu-id="7df65-206"><dt>Strmbase. lib (compilaciones comerciales); </dt> <dt>Strmbasd. lib (compilaciones de depuración)</dt></span><span class="sxs-lookup"><span data-stu-id="7df65-206"><dt>Strmbase.lib (retail builds); </dt> <dt>Strmbasd.lib (debug builds)</dt></span></span> </dl> |



 

 




