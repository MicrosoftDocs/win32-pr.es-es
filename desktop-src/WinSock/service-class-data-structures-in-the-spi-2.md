---
description: Cuando se instala una nueva clase de servicio, se debe preparar y proporcionar una estructura WSASERVICECLASSINFO. Esta estructura también consta de subestructuras que contienen una serie de parámetros que se aplican a espacios de nombres específicos.
ms.assetid: fb225e0c-a0c7-44e1-80fb-7b924b371afa
title: Estructuras de datos de clase de servicio en el SPI
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b5bf249c7437751e7c6d08b2fdf3830e92921ce7
ms.sourcegitcommit: 5b98bf8c68922f8f03c14f793fbe17504900559c
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/12/2021
ms.locfileid: "104560892"
---
# <a name="service-class-data-structures-in-the-spi"></a><span data-ttu-id="22c44-104">Estructuras de datos de clase de servicio en el SPI</span><span class="sxs-lookup"><span data-stu-id="22c44-104">Service Class Data Structures in the SPI</span></span>

<span data-ttu-id="22c44-105">Cuando se instala una nueva clase de servicio, se debe preparar y proporcionar una estructura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) .</span><span class="sxs-lookup"><span data-stu-id="22c44-105">When a new service class is installed, a [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure must be prepared and supplied.</span></span> <span data-ttu-id="22c44-106">Esta estructura también consta de subestructuras que contienen una serie de parámetros que se aplican a espacios de nombres específicos.</span><span class="sxs-lookup"><span data-stu-id="22c44-106">This structure also consists of substructures that contain a series of parameters that apply to specific namespaces.</span></span>

![Diagrama que muestra la estructura WSASERVICECLASSINFO, las subestructuras y los parámetros que se aplican a los espacios de nombres específicos.](images/ovrvw3-3.png)

<span data-ttu-id="22c44-108">Para cada clase de servicio, hay una única estructura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) .</span><span class="sxs-lookup"><span data-stu-id="22c44-108">For each service class, there is a single [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure.</span></span> <span data-ttu-id="22c44-109">Dentro de la estructura **WSASERVICECLASSINFO** , el identificador único de la clase de servicio se encuentra en **lpServiceClassId** y **lpServiceClassName** hace referencia a una cadena de presentación asociada.</span><span class="sxs-lookup"><span data-stu-id="22c44-109">Within the **WSASERVICECLASSINFO** structure, the service class's unique identifier is contained in **lpServiceClassId**, and an associated display string is referenced by **lpServiceClassName**.</span></span>

<span data-ttu-id="22c44-110">El miembro **lpClassInfos** de la estructura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) hace referencia a una matriz de estructuras [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) , cada una de las cuales proporciona un parámetro con nombre y con tipo que se aplica a un espacio de nombres especificado.</span><span class="sxs-lookup"><span data-stu-id="22c44-110">The **lpClassInfos** member in the [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure references an array of [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) structures, each of which supplies a named and typed parameter that applies to a specified namespace.</span></span> <span data-ttu-id="22c44-111">Algunos ejemplos de valores para el miembro **lpszName** son: SAPID, TCPPORT, puertoudp, etc. Estas cadenas suelen ser específicas del espacio de nombres identificado en **dwNameSpace**.</span><span class="sxs-lookup"><span data-stu-id="22c44-111">Examples of values for the **lpszName** member include: SAPID, TCPPORT, UDPPORT, etc. These strings are generally specific to the namespace identified in **dwNameSpace**.</span></span> <span data-ttu-id="22c44-112">Los valores típicos de **dwValueType** podrían ser reg \_ DWORD, REG \_ SZ, etc. El miembro **dwValueSize** indica la longitud del elemento de datos al que apunta **lpValue**.</span><span class="sxs-lookup"><span data-stu-id="22c44-112">Typical values for **dwValueType** might be REG\_DWORD, REG\_SZ, etc. The **dwValueSize** member indicates the length of the data item pointed to by **lpValue**.</span></span>

<span data-ttu-id="22c44-113">Toda la colección de datos representada en una estructura [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) se proporciona a cada proveedor de espacios de nombres a través de [**NSPInstallServiceClass**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspinstallserviceclass).</span><span class="sxs-lookup"><span data-stu-id="22c44-113">The entire collection of data represented in a [**WSASERVICECLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsaserviceclassinfow) structure is provided to each namespace provider via [**NSPInstallServiceClass**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspinstallserviceclass).</span></span> <span data-ttu-id="22c44-114">Cada proveedor de espacios de nombres individual filtra la lista de estructuras [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) y conserva la información aplicable a ella.</span><span class="sxs-lookup"><span data-stu-id="22c44-114">Each individual namespace provider then sifts through the list of [**WSANSCLASSINFO**](/windows/desktop/api/Winsock2/ns-winsock2-wsansclassinfow) structures and retain the information applicable to it.</span></span> <span data-ttu-id="22c44-115">Esta arquitectura también aprovisiona la existencia futura de un proveedor de espacios de nombres especial que conservaría toda la información de esquema de clase de servicio para todos los espacios de nombres.</span><span class="sxs-lookup"><span data-stu-id="22c44-115">This architecture also envisions the future existence of a special namespace provider that would retain all of the service class schema information for all of the namespaces.</span></span> <span data-ttu-id="22c44-116">El \_32.dll Ws2 consultar este proveedor para obtener los datos de **WSASERVICECLASSINFO** necesarios para proporcionar a los proveedores de espacios de nombres cuando se invoca [**NSPLookupServiceBegin**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnsplookupservicebegin) para iniciar una consulta y cuando se invoca [**NSPSetService**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspsetservice) para registrar un servicio.</span><span class="sxs-lookup"><span data-stu-id="22c44-116">The Ws2\_32.dll would query this provider to obtain the **WSASERVICECLASSINFO** data needed to supply to namespace providers when [**NSPLookupServiceBegin**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnsplookupservicebegin) is invoked to initiate a query, and when [**NSPSetService**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspsetservice) is invoked to register a service.</span></span> <span data-ttu-id="22c44-117">El proveedor de espacios de nombres no debe basarse en esta funcionalidad en el momento y, en su lugar, debe tener un medio específico del proveedor para obtener cualquier información de esquema de clase de servicio necesaria.</span><span class="sxs-lookup"><span data-stu-id="22c44-117">Namespace provider should not rely on this capability for the time being, and should instead have a provider-specific means to obtain any needed service class schema information.</span></span> <span data-ttu-id="22c44-118">En ausencia de un proveedor que almacena todo el esquema de clase de servicio para todos los espacios de nombres, el \_32.dll Ws2 utilizará [**NSPGetServiceClassInfo**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspgetserviceclassinfo) para obtener dicha información de cada proveedor de espacios de nombres individual.</span><span class="sxs-lookup"><span data-stu-id="22c44-118">In the absence of a provider that stores all service class schema for all namespaces, the Ws2\_32.dll will use [**NSPGetServiceClassInfo**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpnspgetserviceclassinfo) to obtain such information from each individual namespace provider.</span></span>

 

 



