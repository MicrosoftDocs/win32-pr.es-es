---
description: Creación del gráfico de filtros de DVD
ms.assetid: 1d2f8284-2deb-4207-b067-24a54d6b286c
title: Creación del gráfico de filtros de DVD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 96d15c7d84ec138771e1f5da8be4270faae049cc
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104152600"
---
# <a name="building-the-dvd-filter-graph"></a><span data-ttu-id="a60b4-103">Creación del gráfico de filtros de DVD</span><span class="sxs-lookup"><span data-stu-id="a60b4-103">Building the DVD Filter Graph</span></span>

<span data-ttu-id="a60b4-104">Al igual que con cualquier aplicación de DirectShow, una aplicación de reproducción de DVD se inicia mediante la creación de un gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="a60b4-104">As with any DirectShow application, a DVD playback application starts by building a filter graph.</span></span> <span data-ttu-id="a60b4-105">DirectShow proporciona los siguientes componentes para la reproducción de DVD:</span><span class="sxs-lookup"><span data-stu-id="a60b4-105">DirectShow provides the following components for DVD playback:</span></span>

-   <span data-ttu-id="a60b4-106">[Generador de gráficos de DVD](dvd-graph-builder.md).</span><span class="sxs-lookup"><span data-stu-id="a60b4-106">[DVD Graph Builder](dvd-graph-builder.md).</span></span> <span data-ttu-id="a60b4-107">Un objeto auxiliar que crea el gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="a60b4-107">A helper object that constructs the filter graph.</span></span> <span data-ttu-id="a60b4-108">Expone la interfaz [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) .</span><span class="sxs-lookup"><span data-stu-id="a60b4-108">It exposes the [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) interface.</span></span>
-   <span data-ttu-id="a60b4-109">Filtro del [navegador de DVD](dvd-navigator-filter.md) .</span><span class="sxs-lookup"><span data-stu-id="a60b4-109">[DVD Navigator](dvd-navigator-filter.md) filter.</span></span> <span data-ttu-id="a60b4-110">Filtro DirectShow que controla la reproducción de DVD, la navegación y otros comandos.</span><span class="sxs-lookup"><span data-stu-id="a60b4-110">A DirectShow filter that handles DVD playback, navigation, and other commands.</span></span>

<span data-ttu-id="a60b4-111">La reproducción de DVD también requiere un descodificador MPEG-2.</span><span class="sxs-lookup"><span data-stu-id="a60b4-111">DVD playback also requires an MPEG-2 decoder.</span></span> <span data-ttu-id="a60b4-112">Los descodificadores MPEG-2 de hardware y software están disponibles en terceros.</span><span class="sxs-lookup"><span data-stu-id="a60b4-112">Hardware and software MPEG-2 decoders are available from third parties.</span></span> <span data-ttu-id="a60b4-113">En primer lugar, cree una instancia del objeto del generador de gráficos de DVD.</span><span class="sxs-lookup"><span data-stu-id="a60b4-113">First, create an instance of the DVD Graph Builder object.</span></span>


```C++
IDvdGraphBuilder *pBuild = NULL;
hr = CoCreateInstance(CLSID_DvdGraphBuilder, NULL, 
    CLSCTX_INPROC_SERVER, IID_IDvdGraphBuilder, (void **)&pBuild);
```



<span data-ttu-id="a60b4-114">En este momento, puede seleccionar y configurar el representador de vídeo antes de compilar el resto del gráfico.</span><span class="sxs-lookup"><span data-stu-id="a60b4-114">At this point, you can select and configure the video renderer before you build the rest of the graph.</span></span> <span data-ttu-id="a60b4-115">Este paso, que es opcional, se describe con más detalle en la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="a60b4-115">This step, which is optional, is described in more detail in the next section.</span></span> <span data-ttu-id="a60b4-116">Si omite este paso, el generador de gráficos de DVD selecciona un representador predeterminado.</span><span class="sxs-lookup"><span data-stu-id="a60b4-116">If you omit this step, the DVD Graph Builder selects a default renderer.</span></span> <span data-ttu-id="a60b4-117">A continuación, compile el gráfico llamando al método [**IDvdGraphBuilder:: RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) .</span><span class="sxs-lookup"><span data-stu-id="a60b4-117">Next, build the graph by calling the [**IDvdGraphBuilder::RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) method.</span></span>


```C++
AM_DVD_RENDERSTATUS buildStatus;
hr = pBuild->RenderDvdVideoVolume(L"Z:\\video_ts", 0, &buildStatus);
```



<span data-ttu-id="a60b4-118">El primer parámetro es el nombre de un directorio que contiene los archivos de DVD.</span><span class="sxs-lookup"><span data-stu-id="a60b4-118">The first parameter is the name of a directory that contains the DVD files.</span></span> <span data-ttu-id="a60b4-119">En un disco DVD, estos archivos se encuentran en un directorio llamado VIDEO \_ TS.</span><span class="sxs-lookup"><span data-stu-id="a60b4-119">On a DVD disc, these files reside in a directory named VIDEO\_TS.</span></span> <span data-ttu-id="a60b4-120">Si el primer parámetro es **null**, el generador de gráficos de DVD utiliza la primera unidad que contiene un volumen de DVD.</span><span class="sxs-lookup"><span data-stu-id="a60b4-120">If the first parameter is **NULL**, the DVD Graph Builder uses the first drive that contains a DVD volume.</span></span>

<span data-ttu-id="a60b4-121">El segundo parámetro contiene varias marcas opcionales para elegir el tipo de descodificador (hardware o software) y otras opciones.</span><span class="sxs-lookup"><span data-stu-id="a60b4-121">The second parameter contains various optional flags for choosing the type of decoder (hardware or software) and other options.</span></span>

<span data-ttu-id="a60b4-122">El tercer parámetro es una [**estructura \_ \_ RENDERSTATUS de DVD AM**](/windows/win32/api/strmif/ns-strmif-am_dvd_renderstatus) que recibe información de estado.</span><span class="sxs-lookup"><span data-stu-id="a60b4-122">The third parameter is an [**AM\_DVD\_RENDERSTATUS**](/windows/win32/api/strmif/ns-strmif-am_dvd_renderstatus) structure that receives status information.</span></span> <span data-ttu-id="a60b4-123">Si el método [**RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) devuelve S \_ false, significa que la llamada se realizó parcialmente correctamente (o que se produjo un error parcial, si es un usuario pesimista).</span><span class="sxs-lookup"><span data-stu-id="a60b4-123">If the [**RenderDvdVideoVolume**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-renderdvdvideovolume) method returns S\_FALSE, it means the call partially succeeded (or partially failed, if you're a pessimist).</span></span> <span data-ttu-id="a60b4-124">Por ejemplo, podría producirse un error en el método para representar la secuencia de subimagen, aunque el resto de las secuencias se representaran correctamente.</span><span class="sxs-lookup"><span data-stu-id="a60b4-124">For example, the method might fail to render the subpicture stream, even though the other streams rendered successfully.</span></span> <span data-ttu-id="a60b4-125">Si el método **RenderDvdVideoVolume** devuelve un código de error o el valor S \_ false, puede examinar la estructura **AM \_ \_ RENDERSTATUS de DVD** para obtener más detalles sobre el error.</span><span class="sxs-lookup"><span data-stu-id="a60b4-125">If the **RenderDvdVideoVolume** method returns an error code or the value S\_FALSE, you can examine the **AM\_DVD\_RENDERSTATUS** structure for details about the error.</span></span>

<span data-ttu-id="a60b4-126">A continuación, obtenga un puntero al administrador de gráficos de filtro llamando a [**IDvdGraphBuilder:: GetFiltergraph**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getfiltergraph).</span><span class="sxs-lookup"><span data-stu-id="a60b4-126">Next, get a pointer to the Filter Graph Manager by calling [**IDvdGraphBuilder::GetFiltergraph**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getfiltergraph).</span></span> <span data-ttu-id="a60b4-127">Este método devuelve un puntero a la interfaz [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) del administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="a60b4-127">This method returns a pointer to the Filter Graph Manager's [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) interface.</span></span>


```C++
IGraphBuilder *pGraph = NULL;
hr =  pBuild->GetFiltergraph(&m_pGraph);
```



<span data-ttu-id="a60b4-128">Use el método [**IDvdGraphBuilder:: GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) para recuperar interfaces relacionadas con DVD, entre las que se incluyen las siguientes:</span><span class="sxs-lookup"><span data-stu-id="a60b4-128">Use the [**IDvdGraphBuilder::GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) method to retrieve DVD-related interfaces, including the following:</span></span>

-   <span data-ttu-id="a60b4-129">[**IDvdControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2).</span><span class="sxs-lookup"><span data-stu-id="a60b4-129">[**IDvdControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2).</span></span> <span data-ttu-id="a60b4-130">Controla los comandos de reproducción y DVD</span><span class="sxs-lookup"><span data-stu-id="a60b4-130">Controls playback and DVD commands</span></span>
-   <span data-ttu-id="a60b4-131">[**IDvdInfo2**](/windows/desktop/api/Strmif/nn-strmif-idvdinfo2).</span><span class="sxs-lookup"><span data-stu-id="a60b4-131">[**IDvdInfo2**](/windows/desktop/api/Strmif/nn-strmif-idvdinfo2).</span></span> <span data-ttu-id="a60b4-132">Devuelve información sobre el estado actual del navegador de DVD.</span><span class="sxs-lookup"><span data-stu-id="a60b4-132">Returns information about the DVD Navigator's current state.</span></span>
-   <span data-ttu-id="a60b4-133">[**IAMLine21Decoder**](/previous-versions/windows/desktop/api/il21dec/nn-il21dec-iamline21decoder).</span><span class="sxs-lookup"><span data-stu-id="a60b4-133">[**IAMLine21Decoder**](/previous-versions/windows/desktop/api/il21dec/nn-il21dec-iamline21decoder).</span></span> <span data-ttu-id="a60b4-134">Controla la presentación de subtítulos.</span><span class="sxs-lookup"><span data-stu-id="a60b4-134">Controls closed caption display.</span></span> <span data-ttu-id="a60b4-135">La presentación de subtítulos cerrados está habilitada de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="a60b4-135">Closed caption display is enabled by default.</span></span> <span data-ttu-id="a60b4-136">Para deshabilitarlo, llame a [**IAMLine21Decoder:: SetServiceState**](/previous-versions/windows/desktop/api/il21dec/nf-il21dec-iamline21decoder-setservicestate) con la \_ marca AM L21 \_ CCSTATE \_ OFF.</span><span class="sxs-lookup"><span data-stu-id="a60b4-136">To disable it, call [**IAMLine21Decoder::SetServiceState**](/previous-versions/windows/desktop/api/il21dec/nf-il21dec-iamline21decoder-setservicestate) with the AM\_L21\_CCSTATE\_Off flag.</span></span>
-   <span data-ttu-id="a60b4-137">[**IBasicAudio**](/windows/desktop/api/Control/nn-control-ibasicaudio).</span><span class="sxs-lookup"><span data-stu-id="a60b4-137">[**IBasicAudio**](/windows/desktop/api/Control/nn-control-ibasicaudio).</span></span> <span data-ttu-id="a60b4-138">Controla el volumen y el equilibrio de audio.</span><span class="sxs-lookup"><span data-stu-id="a60b4-138">Controls audio volume and balance.</span></span>

<span data-ttu-id="a60b4-139">Por ejemplo, el código siguiente devuelve la interfaz [**IDvdControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2) .</span><span class="sxs-lookup"><span data-stu-id="a60b4-139">For example, the following code returns the [**IDvdControl2**](/windows/desktop/api/Strmif/nn-strmif-idvdcontrol2) interface.</span></span>


```C++
IDvdControl2 *pDvdControl = NULL;
hr = pBuild->GetDvdInterface(IID_IDvdControl2, (void**)&pDvdControl);
```



<span data-ttu-id="a60b4-140">La manera recomendada para generar el gráfico de filtro de reproducción de DVD es que un objeto de [generador de gráficos de DVD](dvd-graph-builder.md) lo haga automáticamente.</span><span class="sxs-lookup"><span data-stu-id="a60b4-140">The recommended way to build the DVD playback filter graph is to have a [DVD Graph Builder](dvd-graph-builder.md) object do it for you automatically.</span></span> <span data-ttu-id="a60b4-141">Este enfoque se muestra a continuación y en la aplicación de ejemplo de DVD.</span><span class="sxs-lookup"><span data-stu-id="a60b4-141">This approach is demonstrated below and in the DVD sample application.</span></span> <span data-ttu-id="a60b4-142">Si necesita compilar el gráfico de filtros de DVD manualmente, puede hacerlo siguiendo las reglas básicas de creación de gráficos que se describen en otro lugar de la documentación de DirectShow.</span><span class="sxs-lookup"><span data-stu-id="a60b4-142">If you need to build your DVD filter graph manually, you can do so by following the basic rules of graph building discussed elsewhere in the DirectShow documentation.</span></span> <span data-ttu-id="a60b4-143">Por lo general, no debe agregar, quitar, conectar o desconectar de forma manual filtros individuales en el gráfico creado por el generador de gráficos de DVD, ya que esto puede confundir el código de limpieza.</span><span class="sxs-lookup"><span data-stu-id="a60b4-143">Generally, you should not manually add, remove, connect, or disconnect individual filters in the graph created by the DVD Graph Builder, because doing so might confuse the cleanup code.</span></span>

<span data-ttu-id="a60b4-144">Configuración del representador de vídeo</span><span class="sxs-lookup"><span data-stu-id="a60b4-144">Configuring the Video Renderer</span></span>

<span data-ttu-id="a60b4-145">DirectShow proporciona varios filtros de representador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="a60b4-145">DirectShow provides several video renderer filters.</span></span> <span data-ttu-id="a60b4-146">Antes de compilar el gráfico, puede elegir el representador de vídeo que prefiera.</span><span class="sxs-lookup"><span data-stu-id="a60b4-146">Before you build the graph, you can chose which video renderer you prefer.</span></span> <span data-ttu-id="a60b4-147">Seleccione el representador mediante una llamada a [**IDvdGraphBuilder:: GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) y solicite una interfaz específica para ese representador:</span><span class="sxs-lookup"><span data-stu-id="a60b4-147">Select the renderer by calling [**IDvdGraphBuilder::GetDvdInterface**](/windows/desktop/api/Strmif/nf-strmif-idvdgraphbuilder-getdvdinterface) and requesting an interface that is specific to that renderer:</span></span>

-   <span data-ttu-id="a60b4-148">Filtro de mezclador de superposición: [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo).</span><span class="sxs-lookup"><span data-stu-id="a60b4-148">Overlay Mixer Filter: [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo).</span></span>
-   <span data-ttu-id="a60b4-149">Representador de mezcla de vídeo 7 (VMR-7): [**IVMRFilterConfig**](/windows/desktop/api/Strmif/nn-strmif-ivmrfilterconfig).</span><span class="sxs-lookup"><span data-stu-id="a60b4-149">Video Mixing Renderer 7 (VMR-7): [**IVMRFilterConfig**](/windows/desktop/api/Strmif/nn-strmif-ivmrfilterconfig).</span></span>
-   <span data-ttu-id="a60b4-150">Procesador de mezcla de vídeo 9 (VMR-9): [**IVMRFilterConfig9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrfilterconfig9).</span><span class="sxs-lookup"><span data-stu-id="a60b4-150">Video Mixing Renderer 9 (VMR-9): [**IVMRFilterConfig9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrfilterconfig9).</span></span>
-   <span data-ttu-id="a60b4-151">Representador de vídeo mejorado (EVR): [**IEVRFilterConfig**](/windows/desktop/api/evr/nn-evr-ievrfilterconfig).</span><span class="sxs-lookup"><span data-stu-id="a60b4-151">Enhanced Video Renderer (EVR): [**IEVRFilterConfig**](/windows/desktop/api/evr/nn-evr-ievrfilterconfig).</span></span>

<span data-ttu-id="a60b4-152">Si solicita cualquiera de estas interfaces antes de compilar el gráfico de filtros, el generador de gráficos de DVD crea el representador de vídeo correspondiente.</span><span class="sxs-lookup"><span data-stu-id="a60b4-152">If you request any of these interfaces before building the filter graph, the DVD Graph Builder creates the corresponding video renderer.</span></span> <span data-ttu-id="a60b4-153">Más adelante, al compilar el gráfico, el generador de gráficos de DVD intentará usar ese representador.</span><span class="sxs-lookup"><span data-stu-id="a60b4-153">Later, when you build the graph, the DVD Graph Builder will try to use that renderer.</span></span> <span data-ttu-id="a60b4-154">Pero si no puede compilar el gráfico con el representador que ha seleccionado, puede cambiar a otro representador.</span><span class="sxs-lookup"><span data-stu-id="a60b4-154">But if it cannot build the graph using the renderer you selected, it may switch to another renderer.</span></span> <span data-ttu-id="a60b4-155">Por ejemplo, es posible que el descodificador de MPEG-2 no sea compatible con el filtro VMR, en cuyo caso el generador de gráficos de DVD tendría como valor predeterminado el mezclador de superposición.</span><span class="sxs-lookup"><span data-stu-id="a60b4-155">For example, your MPEG-2 decoder might not be compatible with the VMR filter, in which case the DVD Graph Builder would default to the Overlay Mixer.</span></span>

<span data-ttu-id="a60b4-156">Estas interfaces también le ofrecen la oportunidad de configurar el representador antes de conectarse al descodificador.</span><span class="sxs-lookup"><span data-stu-id="a60b4-156">These interfaces also give you a chance to configure the renderer before it is connected to the decoder.</span></span> <span data-ttu-id="a60b4-157">Por ejemplo, puede establecer la opción VMR para usar el modo sin ventanas en lugar del modo de ventana predeterminado.</span><span class="sxs-lookup"><span data-stu-id="a60b4-157">For example, you can set the VMR to use windowless mode instead of the default windowed mode.</span></span> <span data-ttu-id="a60b4-158">Para obtener más información acerca de los representadores de vídeo, consulte el tema [sobre la representación de vídeo en DirectShow](about-video-rendering-in-directshow.md).</span><span class="sxs-lookup"><span data-stu-id="a60b4-158">For more information about video renderers, see the topic [About Video Rendering in DirectShow](about-video-rendering-in-directshow.md).</span></span>

<span data-ttu-id="a60b4-159">En Windows XP y versiones posteriores, el generador de gráficos de DVD siempre usa el [representador de mezcla de vídeo 7](video-mixing-renderer-filter-7.md) (VMR-7), a menos que:</span><span class="sxs-lookup"><span data-stu-id="a60b4-159">On Windows XP and later, the DVD Graph Builder always uses the [Video Mixing Renderer 7](video-mixing-renderer-filter-7.md) (VMR-7), unless:</span></span>

-   <span data-ttu-id="a60b4-160">El autor de la llamada consulta las interfaces que solo encontraron el [mezclador de superposición](overlay-mixer-filter.md), como [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2).</span><span class="sxs-lookup"><span data-stu-id="a60b4-160">The caller queries interfaces found only the [Overlay Mixer](overlay-mixer-filter.md), such as [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2).</span></span> <span data-ttu-id="a60b4-161">Esto envía una sugerencia al generador de gráficos de DVD que quiere que la aplicación use el mezclador de superposición y no la VMR.</span><span class="sxs-lookup"><span data-stu-id="a60b4-161">This sends a hint to the DVD Graph Builder that the application wants to use the Overlay Mixer and not the VMR.</span></span> <span data-ttu-id="a60b4-162">Windows Media Player también tiene una opción de cuadro de diálogo para forzar el uso del mezclador de superposición.</span><span class="sxs-lookup"><span data-stu-id="a60b4-162">Windows Media Player also has a dialog box option to force the use of the Overlay Mixer.</span></span>
-   <span data-ttu-id="a60b4-163">El descodificador instalado no es compatible con VMR.</span><span class="sxs-lookup"><span data-stu-id="a60b4-163">The installed decoder is not VMR-compatible.</span></span> <span data-ttu-id="a60b4-164">Durante la creación de gráficos, se usa la nueva interfaz [**IAMDecoderCaps**](/windows/desktop/api/Strmif/nn-strmif-iamdecodercaps) para comprobar la compatibilidad de VMR del descodificador.</span><span class="sxs-lookup"><span data-stu-id="a60b4-164">During graph building, the new [**IAMDecoderCaps**](/windows/desktop/api/Strmif/nn-strmif-iamdecodercaps) interface is used to check for the decoder's VMR support.</span></span> <span data-ttu-id="a60b4-165">Si no está presente, el generador de gráficos de DVD usará el mezclador de superposición.</span><span class="sxs-lookup"><span data-stu-id="a60b4-165">If that is not present, the DVD Graph Builder will use the Overlay Mixer.</span></span>
-   <span data-ttu-id="a60b4-166">Al utilizar un descodificador de hardware, el descodificador no puede conectarse al [Administrador de puertos de vídeo](video-port-manager.md) (VPM).</span><span class="sxs-lookup"><span data-stu-id="a60b4-166">While using a hardware decoder, the decoder cannot connect to the [Video Port Manager](video-port-manager.md) (VPM).</span></span> <span data-ttu-id="a60b4-167">Si un descodificador de hardware no puede usar VPM, no puede usar la VMR y, por tanto, el generador de gráficos de DVD intenta crear un gráfico con el mezclador de superposición.</span><span class="sxs-lookup"><span data-stu-id="a60b4-167">If a hardware decoder cannot use the VPM, then it cannot use the VMR, and so the DVD Graph Builder then tries to build a graph using the Overlay Mixer.</span></span>
-   <span data-ttu-id="a60b4-168">Se sabe que la tarjeta de presentación tiene recursos o capacidades insuficientes para admitir la VMR, pero no informa correctamente de esto en el controlador.</span><span class="sxs-lookup"><span data-stu-id="a60b4-168">The display card is known to have insufficient resources and/or capabilities to support the VMR but does not correctly report this in the driver.</span></span> <span data-ttu-id="a60b4-169">(Algunos casos conocidos están excluidos específicamente por el generador de gráficos de DVD).</span><span class="sxs-lookup"><span data-stu-id="a60b4-169">(Some known cases are specifically excluded by the DVD Graph Builder.)</span></span>
-   <span data-ttu-id="a60b4-170">La conexión entre el descodificador y el VMR produce un error por cualquier motivo, normalmente debido a una falta de VRAM para crear las superficies necesarias.</span><span class="sxs-lookup"><span data-stu-id="a60b4-170">The connection between the decoder and the VMR fails for any reason, usually due to a lack of VRAM to create the necessary surfaces.</span></span> <span data-ttu-id="a60b4-171">En estos casos, el generador de gráficos de DVD desactiva el uso de VMR e intenta usar el mezclador de superposición para crear un gráfico.</span><span class="sxs-lookup"><span data-stu-id="a60b4-171">In these cases, the DVD Graph Builder switches off VMR use and tries to use the Overlay Mixer to build a graph.</span></span>

<span data-ttu-id="a60b4-172">Modo de ventana</span><span class="sxs-lookup"><span data-stu-id="a60b4-172">Windowed Mode</span></span>

<span data-ttu-id="a60b4-173">En el modo de ventana (mezclador de superposición o VMR), el representador crea su propia ventana de vídeo.</span><span class="sxs-lookup"><span data-stu-id="a60b4-173">In windowed mode (Overlay Mixer or VMR), the renderer creates its own video window.</span></span> <span data-ttu-id="a60b4-174">Para convertir esta ventana en un elemento secundario de la ventana de la aplicación, llame a [**IVideoWindow::p \_ propietario UT**](/windows/desktop/api/Control/nf-control-ivideowindow-put_owner) con un identificador a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a60b4-174">To make this window a child of the application window, call [**IVideoWindow::put\_Owner**](/windows/desktop/api/Control/nf-control-ivideowindow-put_owner) with a handle to the application.</span></span> <span data-ttu-id="a60b4-175">Llame también a [**IVideoWindow::p UT \_ estiloVentana**](/windows/desktop/api/Control/nf-control-ivideowindow-put_windowstyle) para establecer los \_ estilos WS Child y WS \_ CLIPSIBLINGS en la ventana de vídeo del representador.</span><span class="sxs-lookup"><span data-stu-id="a60b4-175">Also call [**IVideoWindow::put\_WindowStyle**](/windows/desktop/api/Control/nf-control-ivideowindow-put_windowstyle) to set the WS\_CHILD and WS\_CLIPSIBLINGS styles on the renderer's video window.</span></span> <span data-ttu-id="a60b4-176">Para obtener los mensajes del mouse desde la ventana de vídeo del representador, llame a [**IVideoWindow::p UT \_ MessageDrain**](/windows/desktop/api/Control/nf-control-ivideowindow-put_messagedrain) con un identificador a la ventana de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a60b4-176">To get mouse messages from the renderer's video window, call [**IVideoWindow::put\_MessageDrain**](/windows/desktop/api/Control/nf-control-ivideowindow-put_messagedrain) with a handle to the application window.</span></span> <span data-ttu-id="a60b4-177">Este método configura un "purga de mensajes": la ventana de vídeo reenvía los mensajes de mouse que recibe a la ventana de purga de mensajes.</span><span class="sxs-lookup"><span data-stu-id="a60b4-177">This method sets up a "message drain" — the video window forwards any mouse messages it receives to the message drain window.</span></span>


```C++
pVideoWindow->put_Owner((OAHWND)hwnd);
pVideoWindow->put_WindowStyle(WS_CHILD | WS_CLIPSIBLINGS);
pVideoWindow->put_MessageDrain((OAHWND)hwnd) ;
```



<span data-ttu-id="a60b4-178">La purga de mensajes hace que la selección de botones de menú de DVD sea algo complicada.</span><span class="sxs-lookup"><span data-stu-id="a60b4-178">The message drain makes selecting DVD menu buttons somewhat complicated.</span></span> <span data-ttu-id="a60b4-179">Suponiendo que la ventana de vídeo no rellena el área de cliente completa de la aplicación, algunos eventos del mouse estarán fuera de la ventana de vídeo.</span><span class="sxs-lookup"><span data-stu-id="a60b4-179">Assuming the video window does not fill the application's entire client area, some mouse events will fall outside the video window.</span></span> <span data-ttu-id="a60b4-180">Al obtener un evento del mouse desde la ventana de vídeo, debe procesarlo para la *navegación del menú* de DVD.</span><span class="sxs-lookup"><span data-stu-id="a60b4-180">When you get a mouse event from *inside* the video window, you should process it for DVD menu navigation.</span></span> <span data-ttu-id="a60b4-181">No se deben procesar los eventos del mouse desde *fuera* de la ventana de vídeo.</span><span class="sxs-lookup"><span data-stu-id="a60b4-181">Mouse events from *outside* the video window should not be processed.</span></span> <span data-ttu-id="a60b4-182">Con el consumo de mensajes, no hay forma de distinguir entre ambos.</span><span class="sxs-lookup"><span data-stu-id="a60b4-182">With the message drain, there is no way to distinguish between the two.</span></span> <span data-ttu-id="a60b4-183">Además, las coordenadas de los eventos del mouse desde la ventana de vídeo son relativas al área cliente de la ventana de vídeo. pero los eventos del mouse desde fuera de la ventana de vídeo son relativos al área cliente de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a60b4-183">Furthermore, the coordinates for mouse events from the video window are relative to the video window's client area; but mouse events from outside the video window are relative to the application's client area.</span></span>

<span data-ttu-id="a60b4-184">Modo sin ventanas</span><span class="sxs-lookup"><span data-stu-id="a60b4-184">Windowless Mode</span></span>

<span data-ttu-id="a60b4-185">El modo sin ventanas evita los problemas con los mensajes del mouse por completo.</span><span class="sxs-lookup"><span data-stu-id="a60b4-185">Windowless mode avoids the problems with mouse messages altogether.</span></span> <span data-ttu-id="a60b4-186">No necesita una purga de mensajes, porque VMR (o EVR) no crea su propia ventana en modo sin ventanas.</span><span class="sxs-lookup"><span data-stu-id="a60b4-186">You do not need a message drain, because the VMR (or EVR) does not create its own window in windowless mode.</span></span> <span data-ttu-id="a60b4-187">En su lugar, dibuja directamente en la ventana de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a60b4-187">Instead, it draws directly onto your application window.</span></span> <span data-ttu-id="a60b4-188">Si el rectángulo de destino es menor que el área de cliente de la aplicación, el navegador de DVD tiene esto en cuenta al calcular las posiciones de los botones de DVD.</span><span class="sxs-lookup"><span data-stu-id="a60b4-188">If the destination rectangle is smaller than the application client area, the DVD Navigator takes this into account when it calculates the DVD button positions.</span></span> <span data-ttu-id="a60b4-189">Por lo tanto, cuando reciba un mensaje del mouse, puede pasar las coordenadas directamente al navegador de DVD, tal como se describe en la sección navegación por el menú.</span><span class="sxs-lookup"><span data-stu-id="a60b4-189">Therefore, when you get a mouse message, you can pass the coordinates directly to the DVD Navigator, as described in the section Menu Navigation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a60b4-190">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="a60b4-190">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a60b4-191">Aplicaciones de DVD</span><span class="sxs-lookup"><span data-stu-id="a60b4-191">DVD Applications</span></span>](dvd-applications.md)
</dt> </dl>

 

 
