---
description: Uniscribe guarda las asignaciones de Unicode a glifo (CMAP), los anchos del glifo y las tablas de forma de script OpenType.
ms.assetid: c06c0eaf-41cb-4fd1-9750-a78355217f12
title: Almacenamiento en caché (internacionalización)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3cf8bf7dd10fe414bc170086ff9b8c34142dc197
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105689566"
---
# <a name="caching-internationalization"></a><span data-ttu-id="fa342-103">Almacenamiento en caché (internacionalización)</span><span class="sxs-lookup"><span data-stu-id="fa342-103">Caching (Internationalization)</span></span>

<span data-ttu-id="fa342-104">Uniscribe guarda las asignaciones de Unicode a glifo (CMAP), los anchos del glifo y las tablas de forma de script OpenType.</span><span class="sxs-lookup"><span data-stu-id="fa342-104">Uniscribe saves Unicode-to-glyph (cmap) mappings, glyph widths, and OpenType script shaping tables.</span></span> <span data-ttu-id="fa342-105">Un identificador de las tablas para una fuente determinada de un tamaño determinado se denomina "caché de script".</span><span class="sxs-lookup"><span data-stu-id="fa342-105">A handle to the tables for a particular font of a particular size is called a "script cache".</span></span> <span data-ttu-id="fa342-106">Muchas funciones de Uniscribe llaman para un parámetro de identificador de contexto de dispositivo y un puntero a una estructura de [**\_ caché de scripts**](script-cache.md) .</span><span class="sxs-lookup"><span data-stu-id="fa342-106">Many Uniscribe functions call for both a device context handle parameter and a pointer to a [**SCRIPT\_CACHE**](script-cache.md) structure.</span></span> <span data-ttu-id="fa342-107">Estas funciones buscan primero información a través de la caché de scripts, usando el contexto de dispositivo solo cuando las tablas necesarias no están almacenadas en caché.</span><span class="sxs-lookup"><span data-stu-id="fa342-107">These functions look first for information through the script cache, using the device context only when required tables are not already cached.</span></span> <span data-ttu-id="fa342-108">Cuando se llama a la función [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape), [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace)o [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) , la aplicación debe pasar un puntero a una estructura de **\_ caché de script** .</span><span class="sxs-lookup"><span data-stu-id="fa342-108">When calling the [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape), [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace), or [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) function, the application must pass a pointer to a **SCRIPT\_CACHE** structure.</span></span> <span data-ttu-id="fa342-109">El identificador se debe inicializar en **null** antes de la primera vez que la aplicación lo pasa a una función de Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="fa342-109">The handle should be initialized to **NULL** before the first time the application passes it to a Uniscribe function.</span></span> <span data-ttu-id="fa342-110">La aplicación nunca debe pasar el mismo identificador para diferentes fuentes o tamaños diferentes.</span><span class="sxs-lookup"><span data-stu-id="fa342-110">The application should never pass the same handle for different fonts or different sizes.</span></span>

<span data-ttu-id="fa342-111">Una aplicación puede liberar una memoria caché de script en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="fa342-111">An application can free a script cache at any time.</span></span> <span data-ttu-id="fa342-112">Mantiene los recuentos de referencias en las memorias caché de la fuente y el forma, libera los datos de fuente solo cuando se liberan todos los tamaños de la fuente y libera los datos del mismo nivel solo cuando se liberan todas las fuentes que admite el forma.</span><span class="sxs-lookup"><span data-stu-id="fa342-112">Uniscribe maintains reference counts in its font and shaper caches, frees font data only when all sizes of the font are freed, and frees shaper data only when all fonts that the shaper supports are freed.</span></span> <span data-ttu-id="fa342-113">Cuando la aplicación se realiza con un estilo, debe llamar a la función [**ScriptFreeCache**](/windows/desktop/api/Usp10/nf-usp10-scriptfreecache) para liberar la memoria caché del script para el estilo.</span><span class="sxs-lookup"><span data-stu-id="fa342-113">When the application is done with a style, it should call the [**ScriptFreeCache**](/windows/desktop/api/Usp10/nf-usp10-scriptfreecache) function to free the script cache for the style.</span></span>

<span data-ttu-id="fa342-114">Para [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) y [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace), es válido para la aplicación pasar un contexto de dispositivo nulo.</span><span class="sxs-lookup"><span data-stu-id="fa342-114">For [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) and [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace), it is valid for the application to pass a null device context.</span></span> <span data-ttu-id="fa342-115">Lo más frecuente es que la llamada se realice correctamente, ya que las tablas necesarias ya están almacenadas en caché.</span><span class="sxs-lookup"><span data-stu-id="fa342-115">Most often the call will succeed, as required tables are already cached.</span></span> <span data-ttu-id="fa342-116">Si el modelado o la selección de ubicación requiere acceso a un contexto de dispositivo, **ScriptShape** o **ScriptPlace** devuelven inmediatamente con el \_ código de error E pendiente.</span><span class="sxs-lookup"><span data-stu-id="fa342-116">If the shaping or placement requires access to a device context, **ScriptShape** or **ScriptPlace** returns immediately with the E\_PENDING error code.</span></span> <span data-ttu-id="fa342-117">A continuación, la aplicación debe seleccionar la fuente en el contexto del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="fa342-117">Then the application must select the font in the device context.</span></span> <span data-ttu-id="fa342-118">Para la mayoría de las aplicaciones, esto ayuda al rendimiento evitando la preparación repetida de un identificador de contexto de dispositivo con llamadas a [**SelectObject**](/windows/win32/api/wingdi/nf-wingdi-selectobject).</span><span class="sxs-lookup"><span data-stu-id="fa342-118">For most applications, this helps performance by avoiding repeated preparation of a device context handle with calls to [**SelectObject**](/windows/win32/api/wingdi/nf-wingdi-selectobject).</span></span>

## <a name="related-topics"></a><span data-ttu-id="fa342-119">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="fa342-119">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fa342-120">Usar Uniscribe</span><span class="sxs-lookup"><span data-stu-id="fa342-120">Using Uniscribe</span></span>](using-uniscribe.md)
</dt> </dl>

 

 
