---
title: Almacenar información específica del usuario
description: Las aplicaciones deben almacenar información específica del usuario en ubicaciones específicas del usuario, aparte de la información global que se aplica a todos los usuarios.
ms.assetid: 32bd1d24-1d2e-4c0a-acdb-0cc67f275e6e
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 40c6236b7ba11a8b3149533e920b9b9413085d93
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104077916"
---
# <a name="storing-user-specific-information"></a><span data-ttu-id="c46c9-103">Almacenar información específica del usuario</span><span class="sxs-lookup"><span data-stu-id="c46c9-103">Storing user-specific information</span></span>

<span data-ttu-id="c46c9-104">En un entorno de Servicios de Escritorio remoto, las aplicaciones deben almacenar información específica del usuario en ubicaciones específicas del usuario, independientemente de la información global que se aplica a todos los usuarios.</span><span class="sxs-lookup"><span data-stu-id="c46c9-104">In a Remote Desktop Services environment, applications should store user-specific information in user-specific locations, separately from global information that applies to all users.</span></span> <span data-ttu-id="c46c9-105">Esta regla se aplica a la información almacenada en el registro, así como a la información almacenada en los archivos.</span><span class="sxs-lookup"><span data-stu-id="c46c9-105">This rule applies to information stored in the registry, as well as information stored in files.</span></span> <span data-ttu-id="c46c9-106">En general, no suponga que un equipo es equivalente a un usuario.</span><span class="sxs-lookup"><span data-stu-id="c46c9-106">In general, do not assume that one computer is equivalent to one user.</span></span>

<span data-ttu-id="c46c9-107">Almacene la información del registro específica del usuario en la clave del registro **HKEY \_ Current \_ User** .</span><span class="sxs-lookup"><span data-stu-id="c46c9-107">Store user-specific registry information under the **HKEY\_CURRENT\_USER** registry key.</span></span> <span data-ttu-id="c46c9-108">Servicios de Escritorio remoto carga el subárbol del registro personal del usuario actual en **HKEY \_ Current \_ User** cuando el usuario inicia sesión.</span><span class="sxs-lookup"><span data-stu-id="c46c9-108">Remote Desktop Services loads the current user's personal registry hive into **HKEY\_CURRENT\_USER** when the user logs on.</span></span> <span data-ttu-id="c46c9-109">Por supuesto, Servicios de Escritorio remoto administra el registro para asegurarse de que cada uno de los clientes conectados detecta el subárbol de usuario correcto en **HKEY \_ Current \_ User**.</span><span class="sxs-lookup"><span data-stu-id="c46c9-109">Of course, Remote Desktop Services manages the registry to ensure that each of the logged-on clients detects the correct user hive under **HKEY\_CURRENT\_USER**.</span></span> <span data-ttu-id="c46c9-110">Para obtener más información sobre las claves del registro, consulte [derechos de acceso y seguridad de la clave del registro](/windows/desktop/SysInfo/registry-key-security-and-access-rights) y [subárboles del registro](/windows/desktop/SysInfo/registry-hives).</span><span class="sxs-lookup"><span data-stu-id="c46c9-110">For more information about registry keys, see [Registry Key Security and Access Rights](/windows/desktop/SysInfo/registry-key-security-and-access-rights) and [Registry Hives](/windows/desktop/SysInfo/registry-hives).</span></span>

<span data-ttu-id="c46c9-111">En cambio, todos los usuarios comparten el subárbol del **\_ \_ equipo local HKEY** .</span><span class="sxs-lookup"><span data-stu-id="c46c9-111">In contrast, all users share the **HKEY\_LOCAL\_MACHINE** hive.</span></span> <span data-ttu-id="c46c9-112">Use **la \_ \_ máquina local HKEY** para almacenar información específica del equipo, no información específica del usuario.</span><span class="sxs-lookup"><span data-stu-id="c46c9-112">Use **HKEY\_LOCAL\_MACHINE** to store computer-specific information, not user-specific information.</span></span>

<span data-ttu-id="c46c9-113">Almacenar archivos de preferencias de usuario u otros archivos específicos del usuario en el directorio raíz del usuario o en un directorio especificado por el usuario.</span><span class="sxs-lookup"><span data-stu-id="c46c9-113">Store user-preference files or other user-specific files in the user's root directory or in a user-specified directory.</span></span> <span data-ttu-id="c46c9-114">Esta consideración se aplica a los archivos temporales que se usan para almacenar información provisional (como los datos en caché) o para pasar datos a otra aplicación.</span><span class="sxs-lookup"><span data-stu-id="c46c9-114">This consideration applies to temporary files used to store interim information (such as cached data) or to pass data on to another application.</span></span> <span data-ttu-id="c46c9-115">Los archivos temporales específicos del usuario también se deben almacenar por usuario.</span><span class="sxs-lookup"><span data-stu-id="c46c9-115">User-specific temporary files must also be stored on a per-user basis.</span></span>

<span data-ttu-id="c46c9-116">Puede usar la función [**SHGetSpecialFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetspecialfolderlocation) con la \_ marca personal de CSIDL para obtener la ubicación del directorio de archivos personales del usuario.</span><span class="sxs-lookup"><span data-stu-id="c46c9-116">You can use the [**SHGetSpecialFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetspecialfolderlocation) function with the CSIDL\_PERSONAL flag to get the location of the user's personal files directory.</span></span> <span data-ttu-id="c46c9-117">También puede usar la función [**GetWindowsDirectory**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getwindowsdirectorya) para recuperar la ruta de acceso del directorio de Windows.</span><span class="sxs-lookup"><span data-stu-id="c46c9-117">You can also use the [**GetWindowsDirectory**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getwindowsdirectorya) function to retrieve the path of the Windows directory.</span></span> <span data-ttu-id="c46c9-118">En un entorno de Servicios de Escritorio remoto, se garantiza que el directorio de Windows es privado para cada usuario.</span><span class="sxs-lookup"><span data-stu-id="c46c9-118">In a Remote Desktop Services environment, the Windows directory is guaranteed to be private for each user.</span></span> <span data-ttu-id="c46c9-119">No almacene archivos específicos del usuario en el directorio del sistema, como WINDOWS o el directorio de programas, como archivos de programa.</span><span class="sxs-lookup"><span data-stu-id="c46c9-119">Do not store user-specific files under the system directory, such as WINDOWS, or program directory, such as Program Files.</span></span>

<span data-ttu-id="c46c9-120">Para evitar conflictos entre la información y las preferencias de los usuarios, las aplicaciones deben almacenar información temporal por usuario en archivos temporales específicos del usuario.</span><span class="sxs-lookup"><span data-stu-id="c46c9-120">To avoid conflicts among users' information and preferences, applications should store per-user temporary information in user-specific temporary files.</span></span> <span data-ttu-id="c46c9-121">Los archivos temporales específicos del usuario también impiden errores de aplicación causados por conflictos de bloqueo de archivos.</span><span class="sxs-lookup"><span data-stu-id="c46c9-121">User-specific temporary files also prevent application failures caused by file-locking conflicts.</span></span> <span data-ttu-id="c46c9-122">Para especificar la ruta de acceso para almacenar información temporal, use la función [**GetTempPath**](/windows/desktop/api/fileapi/nf-fileapi-gettemppatha) .</span><span class="sxs-lookup"><span data-stu-id="c46c9-122">To specify the path for storing temporary information, use the [**GetTempPath**](/windows/desktop/api/fileapi/nf-fileapi-gettemppatha) function.</span></span>

 

 