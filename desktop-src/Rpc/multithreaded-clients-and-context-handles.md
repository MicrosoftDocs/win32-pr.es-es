---
title: Clientes multiproceso y controladores de contexto
description: Cuando hay un cliente multiproceso en el que varios subprocesos usan la misma instancia de identificador de contexto, el acceso a la instancia de identificador de contexto se serializa en el servidor de forma predeterminada.
ms.assetid: 192be467-b1e0-422b-878a-738cb7d72b5b
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 67c621d75d8cc48ca1f71719066f455e0efce39f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104078065"
---
# <a name="multithreaded-clients-and-context-handles"></a><span data-ttu-id="78c26-103">Clientes multiproceso y controladores de contexto</span><span class="sxs-lookup"><span data-stu-id="78c26-103">Multithreaded Clients and Context Handles</span></span>

<span data-ttu-id="78c26-104">Cuando hay un cliente multiproceso en el que varios subprocesos usan la misma instancia de identificador de contexto, el acceso a la instancia de identificador de contexto se serializa en el servidor de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="78c26-104">When you have a multithreaded client where multiple threads are using the same context handle instance, access to the context handle instance is serialized at the server by default.</span></span> <span data-ttu-id="78c26-105">Esto evita que el administrador del servidor tenga que protegerse frente a otro subproceso del mismo cliente que cambia el contexto o el contexto que se está ejecutando mientras se envía una llamada.</span><span class="sxs-lookup"><span data-stu-id="78c26-105">This saves the server manager from having to guard against another thread from the same client changing the context or the context running down while a call is dispatched.</span></span> <span data-ttu-id="78c26-106">Sin embargo, en ciertos casos, la serialización puede afectar al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="78c26-106">However, in certain cases serialization may impact performance.</span></span>

<span data-ttu-id="78c26-107">Tenga en cuenta lo siguiente: dos subprocesos de cliente invocan una llamada a procedimiento remoto que no cambia el estado del contexto (por ejemplo, la llamada simplemente obtiene algunos valores de la misma).</span><span class="sxs-lookup"><span data-stu-id="78c26-107">Consider the following: two client threads invoke a remote procedure call that does not change the state of the context (for example, the call simply obtains some values from it).</span></span> <span data-ttu-id="78c26-108">No es necesario serializar dichas llamadas.</span><span class="sxs-lookup"><span data-stu-id="78c26-108">Such calls do not need to be serialized.</span></span>

<span data-ttu-id="78c26-109">En estos casos, Windows XP ofrece un modelo de serialización en modo mixto, donde cada método se puede declarar para que tenga acceso exclusivo o compartido a un identificador de contexto.</span><span class="sxs-lookup"><span data-stu-id="78c26-109">For such situations, Windows XP offers a mixed mode serialization model, where each method may be declared to have exclusive or shared access to a context handle.</span></span> <span data-ttu-id="78c26-110">Para obtener más información, vea [control de contexto \_ \_ serialización](/windows/desktop/Midl/context-handle-serialize) y [ \_ identificador \_ de contexto](/windows/desktop/Midl/context-handle-noserialize) .</span><span class="sxs-lookup"><span data-stu-id="78c26-110">See [context\_handle\_serialize](/windows/desktop/Midl/context-handle-serialize) and [context\_handle\_noserialize](/windows/desktop/Midl/context-handle-noserialize) for details.</span></span>

<span data-ttu-id="78c26-111">En las versiones de Windows anteriores a Windows XP, el único medio para permitir el acceso simultáneo a un identificador de contexto es llamar a la función [**RpcSsDontSerializeContext**](/previous-versions/aa378473(v=vs.80)) para permitir que se envíen varias llamadas en un único identificador de contexto.</span><span class="sxs-lookup"><span data-stu-id="78c26-111">In versions of Windows prior to Windows XP, the only means of allowing concurrent access to a context handle is to call the [**RpcSsDontSerializeContext**](/previous-versions/aa378473(v=vs.80)) function to allow multiple calls to be dispatched on a single context handle.</span></span> <span data-ttu-id="78c26-112">La llamada a la función **RpcSsDontSerializeContext** no deshabilita completamente la serialización; Cuando se produce un error de ejecución de contexto, la rutina de ejecución del contexto se ejecuta solo cuando se han completado todas las solicitudes de cliente pendientes.</span><span class="sxs-lookup"><span data-stu-id="78c26-112">Calling the **RpcSsDontSerializeContext** function does not disable serialization entirely; when a context run-down occurs, the context run-down routine runs only when all outstanding client requests have completed.</span></span> <span data-ttu-id="78c26-113">Una llamada a **RpcScDontSerializeContext** afecta a todo el proceso y no se revierte.</span><span class="sxs-lookup"><span data-stu-id="78c26-113">A call to **RpcScDontSerializeContext** affects the entire process, and is not revertible.</span></span> <span data-ttu-id="78c26-114">No se recomienda usar **RpcScDontSerializeContext** en Windows XP y versiones posteriores; hace que el código de servidor sea muy complicado cuando se trabaja de forma confiable con condiciones de carrera inherentes en entornos completamente no serializados.</span><span class="sxs-lookup"><span data-stu-id="78c26-114">Using **RpcScDontSerializeContext** in Windows XP and later versions is not recommended; it makes server code very complicated when dealing reliably with race conditions inherent in completely non-serialized environments.</span></span>

 

 