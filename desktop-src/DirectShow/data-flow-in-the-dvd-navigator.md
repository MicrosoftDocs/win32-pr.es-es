---
description: Flujo de datos en el navegador de DVD
ms.assetid: 14f9cfa3-5ef6-419c-9196-2e4060549c03
title: Flujo de datos en el navegador de DVD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 29a981d2d7b528163abb53478e9e8f2ab88d46c0
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "103806721"
---
# <a name="data-flow-in-the-dvd-navigator"></a><span data-ttu-id="59d74-103">Flujo de datos en el navegador de DVD</span><span class="sxs-lookup"><span data-stu-id="59d74-103">Data Flow in the DVD Navigator</span></span>

<span data-ttu-id="59d74-104">El navegador de DVD tiene métodos para detener y pausar la reproducción.</span><span class="sxs-lookup"><span data-stu-id="59d74-104">The DVD Navigator has methods to stop and pause playback.</span></span> <span data-ttu-id="59d74-105">Estos métodos son similares, pero no idénticos, a los métodos **Stop** y **PAUSE** en [**IMediaControl**](/windows/desktop/api/Control/nn-control-imediacontrol).</span><span class="sxs-lookup"><span data-stu-id="59d74-105">These methods are similar — but not identical — to the **Stop** and **Pause** methods in [**IMediaControl**](/windows/desktop/api/Control/nn-control-imediacontrol).</span></span> <span data-ttu-id="59d74-106">Esta es la diferencia entre ellos:</span><span class="sxs-lookup"><span data-stu-id="59d74-106">Here is the difference between them:</span></span>

-   <span data-ttu-id="59d74-107">Los métodos de **IDvdControl2** cambian lo que el navegador de DVD Lee del disco.</span><span class="sxs-lookup"><span data-stu-id="59d74-107">The **IDvdControl2** methods change what the DVD Navigator reads from the disk.</span></span> <span data-ttu-id="59d74-108">No cambian el estado del gráfico.</span><span class="sxs-lookup"><span data-stu-id="59d74-108">They do not change the state of the graph.</span></span>
-   <span data-ttu-id="59d74-109">Los métodos **IMediaControl** cambian el estado del gráfico.</span><span class="sxs-lookup"><span data-stu-id="59d74-109">The **IMediaControl** methods change the state of the graph.</span></span> <span data-ttu-id="59d74-110">No cambian lo que el navegador de DVD Lee del disco.</span><span class="sxs-lookup"><span data-stu-id="59d74-110">They do not change what the DVD Navigator reads from the disk.</span></span> <span data-ttu-id="59d74-111">(Hay una excepción importante, que se explica en la siguiente sección, relacionada con el método **Stop** ).</span><span class="sxs-lookup"><span data-stu-id="59d74-111">(There is one important exception, explained in the next section, related to the **Stop** method.)</span></span>

<span data-ttu-id="59d74-112">Por ejemplo, [**IDvdControl2::P método ause**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-pause) emite el comando "PAUSE on" del Anexo J \_ , pero no pausa el gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="59d74-112">For example, [**IDvdControl2::Pause**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-pause) method issues the Annex J "Pause\_On" command, but does not pause the filter graph.</span></span> <span data-ttu-id="59d74-113">El método [**IMediaControl::P ause**](/windows/desktop/api/Control/nf-control-imediacontrol-pause) , por otro lado, pone en pausa el gráfico pero no emite ningún comando de DVD.</span><span class="sxs-lookup"><span data-stu-id="59d74-113">The [**IMediaControl::Pause**](/windows/desktop/api/Control/nf-control-imediacontrol-pause) method, on the other hand, pauses the graph but does not issue any DVD command.</span></span>

<span data-ttu-id="59d74-114">En general, use los métodos **IMediaControl::P ause** y **Stop** en lugar de los métodos **IDvdControl2** correspondientes.</span><span class="sxs-lookup"><span data-stu-id="59d74-114">In general, use the **IMediaControl::Pause** and **Stop** methods instead of the corresponding **IDvdControl2** methods.</span></span> <span data-ttu-id="59d74-115">Los métodos **IMediaControl** tienen latencias muy pequeñas, mientras que los métodos **IDvdControl2** pueden tener hasta dos segundos de latencia.</span><span class="sxs-lookup"><span data-stu-id="59d74-115">The **IMediaControl** methods have very small latencies, whereas the **IDvdControl2** methods can have up to two seconds of latency.</span></span>

<span data-ttu-id="59d74-116">Detener la reproducción</span><span class="sxs-lookup"><span data-stu-id="59d74-116">Stopping Playback</span></span>

<span data-ttu-id="59d74-117">El comportamiento de [**IMediaControl:: Stop**](/windows/desktop/api/Control/nf-control-imediacontrol-stop) depende de una marca que se puede establecer con el método [**IDvdControl2:: SetOption**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-setoption) .</span><span class="sxs-lookup"><span data-stu-id="59d74-117">The behavior of [**IMediaControl::Stop**](/windows/desktop/api/Control/nf-control-imediacontrol-stop) depends on a flag that you can set with the [**IDvdControl2::SetOption**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-setoption) method.</span></span>

-   <span data-ttu-id="59d74-118">Si la \_ marca ResetOnStop de DVD es **falsa**, **IMediaControl:: Stop** detiene el gráfico, pero no cambia el dominio del explorador de DVD.</span><span class="sxs-lookup"><span data-stu-id="59d74-118">If the DVD\_ResetOnStop flag is **FALSE**, **IMediaControl::Stop** stops the graph, but does not change the DVD Navigator's domain.</span></span> <span data-ttu-id="59d74-119">Cuando vuelva a llamar a ejecutar, la reproducción se reanudará desde la posición actual.</span><span class="sxs-lookup"><span data-stu-id="59d74-119">When you call run again, playback resumes from the current position.</span></span>
-   <span data-ttu-id="59d74-120">Si DVD \_ ResetOnStop es **true**, **IMediaControl:: Stop** hace que se restablezca el navegador de DVD.</span><span class="sxs-lookup"><span data-stu-id="59d74-120">If DVD\_ResetOnStop is **TRUE**, **IMediaControl::Stop** causes the DVD Navigator to reset.</span></span> <span data-ttu-id="59d74-121">Cuando se llama de nuevo a [**IMediaControl:: Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run) , el explorador de DVD se reproduce desde el primer dominio de reproducción, como si estuviera insertando el DVD por primera vez.</span><span class="sxs-lookup"><span data-stu-id="59d74-121">When you call [**IMediaControl::Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run) again, the DVD Navigator plays from the First Play domain, as if you were inserting the DVD for the first time.</span></span>

<span data-ttu-id="59d74-122">La \_ marca ResetOnStop de DVD es **true** de forma predeterminada, por compatibilidad con aplicaciones anteriores.</span><span class="sxs-lookup"><span data-stu-id="59d74-122">The DVD\_ResetOnStop flag is **TRUE** by default, for compatibility with older applications.</span></span> <span data-ttu-id="59d74-123">Sin embargo, por lo general, debe reemplazar el valor predeterminado y establecer la marca en **false**.</span><span class="sxs-lookup"><span data-stu-id="59d74-123">Generally, however, you should override the default and set the flag to **FALSE**.</span></span> <span data-ttu-id="59d74-124">La razón es que ciertos eventos pueden hacer que el gráfico se detenga durante la reproducción.</span><span class="sxs-lookup"><span data-stu-id="59d74-124">The reason is that certain events can cause the graph to stop during playback.</span></span> <span data-ttu-id="59d74-125">Por ejemplo, si la resolución de pantalla cambia, el gráfico de filtro se detiene, vuelve a conectar el representador de vídeo y se reinicia.</span><span class="sxs-lookup"><span data-stu-id="59d74-125">For example, if the display resolution changes, the filter graph stops, reconnects the video renderer, and restarts.</span></span> <span data-ttu-id="59d74-126">Si DVD \_ ResetOnStop es **true**, la reproducción se reiniciará desde el principio del disco. Probablemente no sea lo que el usuario espera.</span><span class="sxs-lookup"><span data-stu-id="59d74-126">If DVD\_ResetOnStop is **TRUE**, playback will restart from the beginning of the disc. That is probably not what the user expects.</span></span>

<span data-ttu-id="59d74-127">Al principio de la aplicación, por lo tanto, llame a **SetOption** con el DVD \_ ResetOnStop establecido en **false**.</span><span class="sxs-lookup"><span data-stu-id="59d74-127">At the beginning of your application, therefore, call **SetOption** with DVD\_ResetOnStop set to **FALSE**.</span></span> <span data-ttu-id="59d74-128">Si desea detener la reproducción y reanudarla desde la misma ubicación, llame a **IMediaControl:: Stop** o a **IMediaControl::P ause**.</span><span class="sxs-lookup"><span data-stu-id="59d74-128">If you want to stop playback and have it resume from the same location, call **IMediaControl::Stop** or **IMediaControl::Pause**.</span></span> <span data-ttu-id="59d74-129">Si desea detener la reproducción y restablecer el disco, llame a **SetOption** con el DVD \_ ResetOnStop igual a **true**; a continuación, llame a **IMediaControl:: Stop**; por último, vuelva a llamar a **SetOption** y restablezca el \_ ResetOnStop de DVD en **false**.</span><span class="sxs-lookup"><span data-stu-id="59d74-129">If you want to stop playback and reset the disk, call **SetOption** with DVD\_ResetOnStop equal to **TRUE**; then call **IMediaControl::Stop**; finally, call **SetOption** again and reset DVD\_ResetOnStop to **FALSE**.</span></span>

<span data-ttu-id="59d74-130">Pausar la reproducción</span><span class="sxs-lookup"><span data-stu-id="59d74-130">Pausing Playback</span></span>

<span data-ttu-id="59d74-131">Si asigna un comando al navegador de DVD mientras el gráfico está en pausa, es posible que el comando no se complete hasta que el gráfico vuelva a ejecutarse.</span><span class="sxs-lookup"><span data-stu-id="59d74-131">If you give the DVD Navigator a command while the graph is paused, the command may not complete until the graph runs again.</span></span> <span data-ttu-id="59d74-132">En algunas situaciones, esto puede provocar un interbloqueo en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="59d74-132">In some situations, this can cause a deadlock in your application.</span></span> <span data-ttu-id="59d74-133">Hay dos reglas que debe seguir para evitar los interbloqueos:</span><span class="sxs-lookup"><span data-stu-id="59d74-133">There are two rules you should follow to avoid deadlocks:</span></span>

-   <span data-ttu-id="59d74-134">Mientras está en pausa, no emita más de un comando de DVD asincrónico.</span><span class="sxs-lookup"><span data-stu-id="59d74-134">While paused, do not issue more than one asynchronous DVD command.</span></span>
-   <span data-ttu-id="59d74-135">Mientras está en pausa, no bloquee el subproceso de interfaz de usuario de la aplicación o el subproceso que cambia el estado del gráfico.</span><span class="sxs-lookup"><span data-stu-id="59d74-135">While paused, do not block the application's UI thread or the thread that changes the state of the graph.</span></span>

<span data-ttu-id="59d74-136">Merece la pena examinar la segunda regla con más detalle.</span><span class="sxs-lookup"><span data-stu-id="59d74-136">The second rule is worth examining in more detail.</span></span> <span data-ttu-id="59d74-137">Estos son algunos escenarios específicos que pueden provocar un interbloqueo:</span><span class="sxs-lookup"><span data-stu-id="59d74-137">Here are some specific scenarios that may cause a deadlock:</span></span>

-   <span data-ttu-id="59d74-138">**Escenario**: mientras se pausa, la aplicación emite un comando de DVD con la marca de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="59d74-138">**Scenario**: While paused, the application issues a DVD command with the blocking flag.</span></span> <span data-ttu-id="59d74-139">Esto puede producir un interbloqueo si el subproceso que emite el comando de DVD es el mismo subproceso que emite el comando de ejecución.</span><span class="sxs-lookup"><span data-stu-id="59d74-139">This can cause a deadlock if the thread that issues the DVD command is the same thread that issues the run command.</span></span> <span data-ttu-id="59d74-140">El comando de DVD se bloquea hasta que se ejecuta el gráfico, pero el gráfico no se puede ejecutar hasta que se complete el comando.</span><span class="sxs-lookup"><span data-stu-id="59d74-140">The DVD command blocks until the graph runs, but the graph cannot run until the command completes.</span></span>

    <span data-ttu-id="59d74-141">**Recomendación**: emita el comando de DVD en un subproceso de trabajo independiente o no use la marca de bloqueo.</span><span class="sxs-lookup"><span data-stu-id="59d74-141">**Recommendation**: Issue the DVD command on a separate worker thread, or don't use the blocking flag.</span></span>

-   <span data-ttu-id="59d74-142">**Escenario**: mientras se pausa, la aplicación emite un comando de DVD y, a continuación, llama a [**IDvdCmd:: WaitForEnd**](/windows/desktop/api/Strmif/nf-strmif-idvdcmd-waitforend) en el objeto de comando.</span><span class="sxs-lookup"><span data-stu-id="59d74-142">**Scenario**: While paused, the application issues a DVD command, then calls [**IDvdCmd::WaitForEnd**](/windows/desktop/api/Strmif/nf-strmif-idvdcmd-waitforend) on the command object.</span></span> <span data-ttu-id="59d74-143">Esta situación es equivalente al ejemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="59d74-143">This situation is equivalent to the previous example.</span></span> <span data-ttu-id="59d74-144">Si llama a **Wait** desde el subproceso de la interfaz de usuario, el subproceso de interfaz de usuario no puede ejecutar el gráfico hasta que el método **Wait** se desbloquee, pero el método **Wait** no se desbloqueará hasta que se ejecute el gráfico.</span><span class="sxs-lookup"><span data-stu-id="59d74-144">If you call **Wait** from the UI thread, the UI thread cannot run the graph until the **Wait** method unblocks, but the **Wait** method will not unblock until the graph runs.</span></span>

    <span data-ttu-id="59d74-145">**Recomendación**: llame a **Wait** en un subproceso de trabajo.</span><span class="sxs-lookup"><span data-stu-id="59d74-145">**Recommendation**: Call **Wait** on a worker thread.</span></span>

-   <span data-ttu-id="59d74-146">**Escenario**: mientras el grafo se está ejecutando, la aplicación emite un comando de DVD con la marca de bloqueo y, a continuación, llama a PAUSE desde otro subproceso.</span><span class="sxs-lookup"><span data-stu-id="59d74-146">**Scenario**: While the graph is running, the application issues a DVD command with the blocking flag, and then calls pause from another thread.</span></span> <span data-ttu-id="59d74-147">Se trata de una posible condición de carrera porque el gráfico puede pausarse antes de que se emita el comando.</span><span class="sxs-lookup"><span data-stu-id="59d74-147">This is a possible race condition because the graph may pause before the command is issued.</span></span> <span data-ttu-id="59d74-148">Si uno de los dos subprocesos es el subproceso de la interfaz de usuario, puede producirse un interbloqueo similar a los dos ejemplos anteriores.</span><span class="sxs-lookup"><span data-stu-id="59d74-148">If one of the two threads is the UI thread, you may cause a deadlock similar to the previous two examples.</span></span> <span data-ttu-id="59d74-149">En este ejemplo se muestra la importancia de escribir código seguro para subprocesos si la aplicación usa varios subprocesos.</span><span class="sxs-lookup"><span data-stu-id="59d74-149">This example illustrates the importance of writing thread-safe code if your application uses multiple threads.</span></span>

    <span data-ttu-id="59d74-150">**Recomendación**: Si usa subprocesos de trabajo, asegúrese de que el código es seguro para subprocesos.</span><span class="sxs-lookup"><span data-stu-id="59d74-150">**Recommendation**: If you use worker threads, make sure your code is thread-safe.</span></span>

-   <span data-ttu-id="59d74-151">**Escenario**: mientras está en pausa, la aplicación deshabilita el comando ejecutar desde la interfaz de usuario y, después, emite un comando de DVD asincrónico.</span><span class="sxs-lookup"><span data-stu-id="59d74-151">**Scenario**: While paused, the application disables the run command from the UI, and then issues an asynchronous DVD command.</span></span> <span data-ttu-id="59d74-152">Este caso no es estrictamente un interbloqueo, porque el subproceso de la aplicación todavía se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="59d74-152">This case is not strictly a deadlock, because the application thread is still running.</span></span> <span data-ttu-id="59d74-153">Sin embargo, el usuario ahora no podrá ejecutar el gráfico y, por lo tanto, el comando nunca se completará.</span><span class="sxs-lookup"><span data-stu-id="59d74-153">However, the user is now prevented from running the graph, and therefore the command will never complete.</span></span>

    <span data-ttu-id="59d74-154">**Recomendación**: al pausar, deje siempre el comando ejecutar habilitado.</span><span class="sxs-lookup"><span data-stu-id="59d74-154">**Recommendation**: When pausing, always leave the run command enabled.</span></span>

<span data-ttu-id="59d74-155">Búsqueda de un DVD en un período de tiempo especificado</span><span class="sxs-lookup"><span data-stu-id="59d74-155">Seeking a DVD to a Specified Time</span></span>

<span data-ttu-id="59d74-156">Para buscar con precisión una hora especificada en un disco, llame a [**IMediaControl:: Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run).</span><span class="sxs-lookup"><span data-stu-id="59d74-156">To accurately seek to a specified time on a disc, call [**IMediaControl::Run**](/windows/desktop/api/Control/nf-control-imediacontrol-run).</span></span> <span data-ttu-id="59d74-157">A continuación, llame a [**IDvdControl2::P layattime**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-playattime), especificando la hora y el valor de *dwFlags* en el \_ \_ vaciado de la marca de CMD \_ .</span><span class="sxs-lookup"><span data-stu-id="59d74-157">Then call [**IDvdControl2::PlayAtTime**](/windows/desktop/api/Strmif/nf-strmif-idvdcontrol2-playattime), specifying the time and setting *dwFlags* to DVD\_CMD\_FLAG\_Flush.</span></span>

## <a name="related-topics"></a><span data-ttu-id="59d74-158">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="59d74-158">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="59d74-159">Aplicaciones de DVD</span><span class="sxs-lookup"><span data-stu-id="59d74-159">DVD Applications</span></span>](dvd-applications.md)
</dt> </dl>

 

 



