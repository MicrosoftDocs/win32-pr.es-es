---
description: El procesamiento de uno de los conjuntos de archivos de un componente puede requerir que un solicitante atraviese un árbol de directorios de forma recursiva, lo que puede requerir que el solicitante controle las carpetas montadas y los puntos de reanálisis (como los vínculos) que apuntan a datos que no están en el volumen actual.
ms.assetid: d0e08598-a8a2-489b-9cb2-e989bed1ce53
title: Trabajar con carpetas montadas y puntos de análisis
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 397a7aa88f39361f788f9aac882b4f9d337fd6f8
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105696429"
---
# <a name="working-with-mounted-folders-and-reparse-points"></a><span data-ttu-id="1ceb4-103">Trabajar con carpetas montadas y puntos de análisis</span><span class="sxs-lookup"><span data-stu-id="1ceb4-103">Working with Mounted Folders and Reparse Points</span></span>

<span data-ttu-id="1ceb4-104">El procesamiento de uno de los conjuntos de archivos de un componente puede requerir que un solicitante atraviese un árbol de directorios de forma recursiva, lo que puede requerir que el solicitante controle las carpetas montadas y los puntos de reanálisis (como los vínculos) que apuntan a datos que no están en el volumen actual.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-104">Processing one of a component's file sets may require a requester to traverse a directory tree recursively, which can require the requester to handle mounted folders and reparse points (such as links) that point to data that is not on the current volume.</span></span>

<span data-ttu-id="1ceb4-105">Se espera que los solicitantes sigan las carpetas montadas y los puntos de análisis al atravesar un árbol de directorios, y VSS tiene directrices bien definidas para controlarlas en operaciones de copia de seguridad y restauración.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-105">Requesters are expected to follow mounted folders and reparse points when traversing a directory tree, and VSS has well-defined guidelines for handling them for backup and restore operations.</span></span>

<span data-ttu-id="1ceb4-106">Para ilustrar estas instrucciones, considere el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="1ceb4-106">To illustrate these guidelines, consider the following example:</span></span>

-   <span data-ttu-id="1ceb4-107">¿El volumen \\ \\ ? \\ El volumen {GUID \_ 1} tiene la letra de unidad C: \\ .</span><span class="sxs-lookup"><span data-stu-id="1ceb4-107">The volume \\\\?\\Volume{GUID\_1} has the drive letter C:\\.</span></span>
-   <span data-ttu-id="1ceb4-108">Un conjunto de archivos tiene una ruta de acceso de C: \\ WriterData.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-108">A file set has a path of C:\\WriterData.</span></span>
-   <span data-ttu-id="1ceb4-109">Un archivo Specification \* . dat lo utiliza el conjunto de archivos.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-109">A file specification \*.dat is used by the file set.</span></span>
-   <span data-ttu-id="1ceb4-110">La recursividad del conjunto de archivos se establece en **true**.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-110">The file set's recursion is set to **TRUE**.</span></span>
-   <span data-ttu-id="1ceb4-111">¿El directorio C: \\ WriterData se encuentra en el volumen \\ \\ ? \\ Volumen {GUID \_ 1}.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-111">The directory C:\\WriterData is located on the volume \\\\?\\Volume{GUID\_1}.</span></span>
-   <span data-ttu-id="1ceb4-112">El directorio C: \\ WriterData \\ Archive es una carpeta montada.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-112">The directory C:\\WriterData\\Archive is a mounted folder.</span></span>
-   <span data-ttu-id="1ceb4-113">¿El volumen \\ \\ ? \\ El volumen {GUID \_ 2} está asociado a la carpeta montada C: \\ WriterData \\ Archive.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-113">The volume \\\\?\\Volume{GUID\_2} is associated with the mounted folder C:\\WriterData\\Archive.</span></span>

## <a name="handling-mounted-folders-and-reparse-points-during-backup"></a><span data-ttu-id="1ceb4-114">Administrar carpetas montadas y puntos de análisis durante la copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="1ceb4-114">Handling Mounted Folders and Reparse Points during Backup</span></span>

<span data-ttu-id="1ceb4-115">Las reglas básicas para controlar las carpetas montadas y los puntos de análisis en VSS al realizar una copia de seguridad recursiva se pueden resumir de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="1ceb4-115">The basic rules for handling mounted folders and reparse points under VSS when performing a recursive backup can be summarized as follows:</span></span>

-   <span data-ttu-id="1ceb4-116">Las rutas de acceso se siguen entre las carpetas montadas y los puntos de reanálisis.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-116">Paths are followed across mounted folders and reparse points.</span></span>
-   <span data-ttu-id="1ceb4-117">Si una carpeta montada o un punto de análisis apunta a un volumen, se debe realizar una instantánea de ese volumen.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-117">If a mounted folder or reparse point points to a volume, that volume should be shadow copied.</span></span>
-   <span data-ttu-id="1ceb4-118">Si un volumen contiene carpetas montadas o puntos de reanálisis, aparecerán en la instantánea del volumen.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-118">If a volume contains mounted folders or reparse points, these will appear in the shadow copy of the volume.</span></span>
-   <span data-ttu-id="1ceb4-119">Los datos que se encuentra bajo la carpeta montada o el punto de reanálisis se capturan en la instantánea del volumen al que apunta la carpeta montada o el punto de reanálisis.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-119">Data that is under the mounted folder or reparse point is captured in the shadow copy of the volume that the mounted folder or reparse point points to.</span></span>

<span data-ttu-id="1ceb4-120">Para ilustrar el uso del ejemplo anterior, dado que se establece la marca recursiva, el solicitante debe examinar todos los datos en C: \\ WriterData \\ Archive y a continuación.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-120">To illustrate using the example above, because the recursive flag is set, the requester must examine all data under C:\\WriterData\\Archive and below.</span></span>

<span data-ttu-id="1ceb4-121">El solicitante debe agregar el volumen con la letra de unidad C: \\ ( \\ \\ ? \\ Volumen {GUID \_ 1}) y el volumen asociado a la carpeta montada C: \\ WriterData \\ Archive ( \\ \\ ? \\ Volumen {GUID \_ 2}) al conjunto de instantáneas mediante [**IVssBackupComponents:: AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset).</span><span class="sxs-lookup"><span data-stu-id="1ceb4-121">The requester must add both the volume with drive letter C:\\ (\\\\?\\Volume{GUID\_1}) and the volume associated with the mounted folder C:\\WriterData\\Archive (\\\\?\\Volume{GUID\_2}) to the shadow copy set using [**IVssBackupComponents::AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset).</span></span>

<span data-ttu-id="1ceb4-122">La carpeta montada C: \\ WriterData \\ Archive aparece en la instantánea del volumen \\ \\ \\ . Volumen {GUID \_ 1}, que tiene un objeto de dispositivo denominado deviceObject1.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-122">The mounted folder C:\\WriterData\\Archive appears in the shadow copy of volume \\\\?\\Volume{GUID\_1}, which has a device object named deviceObject1.</span></span>

<span data-ttu-id="1ceb4-123">Sin embargo, VSS no copiará ningún dato en esa carpeta montada (datos en \\ \\ ? \\ Volumen {GUID \_ 2}) a la instantánea a la que hace referencia deviceObject1.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-123">However, VSS will not copy any data under that mounted folder (data on \\\\?\\Volume{GUID\_2}) to the shadow copy referenced by deviceObject1.</span></span> <span data-ttu-id="1ceb4-124">En su lugar, los datos se capturan en la instantánea de \\ \\ ? \\ Volumen {GUID \_ 2}, que tiene un objeto de dispositivo denominado deviceObject2.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-124">Instead, that data is captured in the shadow copy of \\\\?\\Volume{GUID\_2}, which has a device object named deviceObject2.</span></span>

<span data-ttu-id="1ceb4-125">Por lo tanto, un solicitante que realice copias de seguridad de archivos de copia sombra bajo C: \\ WriterData usará una ruta de acceso de deviceObject1 \\ WriterData para buscar archivos que coincidan con c: \\ WriterData \\ \* . dat.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-125">Therefore, a requester that is backing up shadow copied files under C:\\WriterData will use a path of deviceObject1\\WriterData to search for files matching C:\\WriterData\\\*.dat.</span></span>

<span data-ttu-id="1ceb4-126">Para hacer una copia de seguridad de los archivos de copia sombra en C: \\ WriterData \\ Archive, el solicitante usará una ruta de acceso de deviceObject2 (porque el directorio raíz de \\ \\ ? \\ El volumen {GUID \_ 2} se asoció con la carpeta montada c: \\ Writer \\ Archive) para buscar archivos que coincidan con c: \\ WriterData \\ Archive \\ \* . dat.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-126">To back up shadow copied files under C:\\WriterData\\Archive, the requester will use a path of deviceObject2 (because the root directory of \\\\?\\Volume{GUID\_2} was associated with the mounted folder C:\\Writer\\Archive) to search for files matching C:\\WriterData\\Archive\\\*.dat.</span></span>

<span data-ttu-id="1ceb4-127">Tenga en cuenta que un punto de análisis se administra de la misma manera que una carpeta montada.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-127">Note that a reparse point is handled in the same way as a mounted folder.</span></span> <span data-ttu-id="1ceb4-128">El punto de reanálisis aparece en la instantánea del primer volumen.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-128">The reparse point appears in the shadow copy of the first volume.</span></span> <span data-ttu-id="1ceb4-129">Los datos del punto de reanálisis aparecen en la instantánea del segundo volumen.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-129">The data under the reparse point appears in the shadow copy of the second volume.</span></span>

<span data-ttu-id="1ceb4-130">Durante la copia de seguridad, los solicitantes deben almacenar información sobre las carpetas montadas y los volúmenes asociados a ellas, así como los puntos de reanálisis y sus destinos para asegurarse de que se realiza una copia de seguridad de todos los datos y se restauran correctamente.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-130">During backup, requesters should store information about mounted folders and the volumes associated with them as well as reparse points and their targets to ensure that all data is backed up and restored correctly.</span></span>

## <a name="handling-mount-and-reparse-points-during-restore"></a><span data-ttu-id="1ceb4-131">Control de los puntos de montaje y análisis durante la restauración</span><span class="sxs-lookup"><span data-stu-id="1ceb4-131">Handling Mount and Reparse Points during Restore</span></span>

<span data-ttu-id="1ceb4-132">Al restaurar archivos, el solicitante debe seguir las instrucciones de forma ligeramente diferente de las que se usaron durante la copia de seguridad (omitiendo problemas como la [*asignación de ubicación alternativa*](vssgloss-a.md) y la [*nueva ubicación de destino*](vssgloss-n.md)):</span><span class="sxs-lookup"><span data-stu-id="1ceb4-132">When restoring files, the requester must follow guidelines somewhat different from those that were used during backup (ignoring issues such as [*alternate location mapping*](vssgloss-a.md) and [*new target location*](vssgloss-n.md)):</span></span>

-   <span data-ttu-id="1ceb4-133">Como antes, si se requiere la recursividad, se siguen las rutas de acceso a través de las carpetas montadas y los puntos de reanálisis.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-133">As before, if recursion is required, paths are followed across mounted folders and reparse points.</span></span>
-   <span data-ttu-id="1ceb4-134">Las carpetas montadas se van a restaurar.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-134">Mounted folders are to be restored.</span></span>
-   <span data-ttu-id="1ceb4-135">Las ubicaciones de restauración de las carpetas montadas y los puntos de reanálisis son las que determinan sus rutas de acceso originales.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-135">The restoration locations of mounted folders and reparse points are those determined by their original paths.</span></span>

<span data-ttu-id="1ceb4-136">Si los nombres de los volúmenes persisten entre la copia de seguridad y la restauración, es decir, no vuelve a crear los volúmenes, las carpetas montadas y los puntos de análisis que se restauran deben apuntar a los volúmenes correctos.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-136">If the volume names persist between backup and restore—that is, you do not re-create the volumes—restored mounted folders and reparse points should point to the correct volumes.</span></span>

<span data-ttu-id="1ceb4-137">Por lo tanto, en el ejemplo descrito anteriormente, si la carpeta montada C: \\ WriterData \\ Archive se restauró en ( \\ \\ ? \\ \_Se restauró el volumen {GUID 1}) y el volumen asociado anteriormente a este ( \\ \\ ? \\ Volumen {GUID \_ 2}), los archivos y la estructura de archivos restaurados serían correctos y coherentes.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-137">Therefore, in the example discussed above, if the mounted folder C:\\WriterData\\Archive was restored to (\\\\?\\Volume{GUID\_1}) and the volume previously associated with it was restored to (\\\\?\\Volume{GUID\_2}), the restored files and file structure would be correct and consistent.</span></span>

<span data-ttu-id="1ceb4-138">Puede suceder que los datos se restauren en un sistema en el que los nombres de los volúmenes hayan cambiado.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-138">It may happen that data is restored to a system where volume names changed.</span></span> <span data-ttu-id="1ceb4-139">Esto puede deberse a bloqueos de disco, en los que es posible que necesite realizar una recuperación manual del sistema y volver a crear los volúmenes.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-139">This could be due to disk crashes, where you might need to perform a manual system recovery and re-create volumes.</span></span> <span data-ttu-id="1ceb4-140">En este tipo de situación, las carpetas montadas y los puntos de análisis dejarán de ser válidos después de la restauración.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-140">In this type of situation, mounted folders and reparse points will no longer be valid after restore.</span></span> <span data-ttu-id="1ceb4-141">Para volver a crear los archivos y la estructura de archivos en el volumen restaurado, será necesario eliminar las carpetas montadas restauradas y los puntos de análisis y volver a crearlos en el disco.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-141">To re-create the files and file structure on the restored volume will require deleting the restored mounted folders and reparse points and re-creating them on disk.</span></span> <span data-ttu-id="1ceb4-142">Depende de la aplicación de copia de seguridad decidir si esto es adecuado.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-142">It is up to the backup application to decide whether this is appropriate.</span></span>

<span data-ttu-id="1ceb4-143">Tenga en cuenta que es posible que el destino de restauración de una carpeta montada ya esté ocupado.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-143">Note that it is possible that the restore destination for a mounted folder is already occupied.</span></span> <span data-ttu-id="1ceb4-144">Por ejemplo, \\ puede que el archivo C: WriterData \\ ya contenga algunos archivos.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-144">For example, C:\\WriterData\\Archive might already contain some files.</span></span> <span data-ttu-id="1ceb4-145">Depende de la aplicación de copia de seguridad decidir cómo tratar esta situación.</span><span class="sxs-lookup"><span data-stu-id="1ceb4-145">It is up to the backup application to decide how to handle this situation.</span></span>

 

 



