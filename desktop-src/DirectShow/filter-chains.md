---
description: Cadenas de filtro
ms.assetid: c17b3b58-65ab-4e83-91f2-54a995f22ddf
title: Cadenas de filtro
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d22ee33f7bc24495bc5099d0abeca7b8c70bc6d4
ms.sourcegitcommit: 63753fcfb0afbbe5ec283fb8316e62c2dc950f66
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 04/22/2021
ms.locfileid: "107909063"
---
# <a name="filter-chains"></a><span data-ttu-id="b03d3-103">Cadenas de filtro</span><span class="sxs-lookup"><span data-stu-id="b03d3-103">Filter Chains</span></span>

<span data-ttu-id="b03d3-104">Una *cadena de filtros* es una secuencia de filtros que cumple las condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="b03d3-104">A *filter chain* is a sequence of filters that meets the following conditions:</span></span>

-   <span data-ttu-id="b03d3-105">Cada filtro de la cadena tiene como máximo un pin de entrada conectado y un pin de salida conectado.</span><span class="sxs-lookup"><span data-stu-id="b03d3-105">Each filter in the chain has at most one connected input pin and one connected output pin.</span></span>
-   <span data-ttu-id="b03d3-106">Es posible recorrer todos los filtros de la cadena sin atravesar filtros fuera de la cadena.</span><span class="sxs-lookup"><span data-stu-id="b03d3-106">It is possible to traverse every filter in the chain without traversing filters outside the chain.</span></span>

<span data-ttu-id="b03d3-107">Por ejemplo, en el diagrama siguiente, los filtros A–B, C–D y F–G–H son cadenas de filtro.</span><span class="sxs-lookup"><span data-stu-id="b03d3-107">For example, in the following diagram, filters A–B, C–D, and F–G–H are filter chains.</span></span> <span data-ttu-id="b03d3-108">Cada subcadena de F–G–H (F–G y G–H) también es una cadena de filtros.</span><span class="sxs-lookup"><span data-stu-id="b03d3-108">Each subchain in F–G–H (F–G and G–H) is also a filter chain.</span></span> <span data-ttu-id="b03d3-109">Una cadena de filtros puede constar de un único filtro, por lo que los filtros A, B, C, D, F, G y H también son cadenas de filtro distintas.</span><span class="sxs-lookup"><span data-stu-id="b03d3-109">A filter chain can consist of a single filter, so filters A, B, C, D, F, G, and H are also distinct filter chains.</span></span> <span data-ttu-id="b03d3-110">El filtro E tiene dos conexiones de entrada, por lo que cualquier secuencia de filtros que incluya el filtro E no es una cadena de filtros.</span><span class="sxs-lookup"><span data-stu-id="b03d3-110">Filter E has two input connections, so any sequence of filters that includes filter E is not a filter chain.</span></span>

![cadena de filtros (ejemplo 1)](images/filter-chain1.png)

<span data-ttu-id="b03d3-112">La [**interfaz IFilterChain proporciona**](/windows/desktop/api/Strmif/nn-strmif-ifilterchain) los métodos siguientes para controlar las cadenas de filtro:</span><span class="sxs-lookup"><span data-stu-id="b03d3-112">The [**IFilterChain**](/windows/desktop/api/Strmif/nn-strmif-ifilterchain) interface provides the following methods for controlling filter chains:</span></span>



| <span data-ttu-id="b03d3-113">Etiqueta</span><span class="sxs-lookup"><span data-stu-id="b03d3-113">Label</span></span> | <span data-ttu-id="b03d3-114">Value</span><span class="sxs-lookup"><span data-stu-id="b03d3-114">Value</span></span> |
|---------------------------------------------------------------|---------------------------------|
| [<span data-ttu-id="b03d3-115">**IFilterChain::StartChain**</span><span class="sxs-lookup"><span data-stu-id="b03d3-115">**IFilterChain::StartChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-startchain)   | <span data-ttu-id="b03d3-116">Inicia una cadena.</span><span class="sxs-lookup"><span data-stu-id="b03d3-116">Starts a chain.</span></span>                 |
| [<span data-ttu-id="b03d3-117">**IFilterChain::StopChain**</span><span class="sxs-lookup"><span data-stu-id="b03d3-117">**IFilterChain::StopChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-stopchain)     | <span data-ttu-id="b03d3-118">Detiene una cadena.</span><span class="sxs-lookup"><span data-stu-id="b03d3-118">Stops a chain.</span></span>                  |
| [<span data-ttu-id="b03d3-119">**IFilterChain::P auseChain**</span><span class="sxs-lookup"><span data-stu-id="b03d3-119">**IFilterChain::PauseChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-pausechain)   | <span data-ttu-id="b03d3-120">Pausa una cadena.</span><span class="sxs-lookup"><span data-stu-id="b03d3-120">Pauses a chain.</span></span>                 |
| [<span data-ttu-id="b03d3-121">**IFilterChain::RemoveChain**</span><span class="sxs-lookup"><span data-stu-id="b03d3-121">**IFilterChain::RemoveChain**</span></span>](/windows/desktop/api/Strmif/nf-strmif-ifilterchain-removechain) | <span data-ttu-id="b03d3-122">Quita una cadena del gráfico.</span><span class="sxs-lookup"><span data-stu-id="b03d3-122">Removes a chain from the graph.</span></span> |



 

<span data-ttu-id="b03d3-123">No hay ningún método específico para agregar una cadena.</span><span class="sxs-lookup"><span data-stu-id="b03d3-123">There is no specific method for adding a chain.</span></span> <span data-ttu-id="b03d3-124">Para agregar una cadena, inserte los nuevos filtros mediante el [**método IFilterGraph::AddFilter.**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter)</span><span class="sxs-lookup"><span data-stu-id="b03d3-124">To add a chain, insert the new filters using the [**IFilterGraph::AddFilter**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph-addfilter) method.</span></span> <span data-ttu-id="b03d3-125">A continuación, conecte los filtros mediante una [**llamada a IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect), [**IGraphBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render)o métodos similares.</span><span class="sxs-lookup"><span data-stu-id="b03d3-125">Then connect the filters by calling [**IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect), [**IGraphBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render), or similar methods.</span></span>

<span data-ttu-id="b03d3-126">Cuando se ejecuta el gráfico, una cadena de filtros puede cambiar entre en ejecución y detenida.</span><span class="sxs-lookup"><span data-stu-id="b03d3-126">When the graph is running, a filter chain can switch between running and stopped.</span></span> <span data-ttu-id="b03d3-127">Cuando el gráfico está en pausa, puede cambiar entre pausado y detenido.</span><span class="sxs-lookup"><span data-stu-id="b03d3-127">When the graph is paused, it can switch between paused and stopped.</span></span> <span data-ttu-id="b03d3-128">Estas son las únicas transiciones de estado posibles con cadenas de filtro.</span><span class="sxs-lookup"><span data-stu-id="b03d3-128">These are the only state transitions possible with filter chains.</span></span>

## <a name="filter-chain-guidelines"></a><span data-ttu-id="b03d3-129">Directrices de la cadena de filtros</span><span class="sxs-lookup"><span data-stu-id="b03d3-129">Filter Chain Guidelines</span></span>

<span data-ttu-id="b03d3-130">Cuando se usan **métodos IFilterChain,** es importante asegurarse de que los filtros del gráfico pueden admitir operaciones de encadenamiento de filtros.</span><span class="sxs-lookup"><span data-stu-id="b03d3-130">When you use **IFilterChain** methods, it is important to make sure that the filters in the graph can support filter chaining operations.</span></span> <span data-ttu-id="b03d3-131">De lo contrario, podría provocar interbloqueos o errores de grafo.</span><span class="sxs-lookup"><span data-stu-id="b03d3-131">Otherwise, you might cause deadlocks or graph errors.</span></span> <span data-ttu-id="b03d3-132">Los filtros conectados a la cadena deben funcionar correctamente después de que la cadena cambie de estado.</span><span class="sxs-lookup"><span data-stu-id="b03d3-132">Filters connected to the chain must function correctly after the chain changes state.</span></span>

<span data-ttu-id="b03d3-133">La mejor manera de usar **IFilterChain** es con un conjunto de filtros que ha diseñado específicamente para el encadenamiento.</span><span class="sxs-lookup"><span data-stu-id="b03d3-133">The best way to use **IFilterChain** is with a set of filters that you have designed specifically for chaining.</span></span> <span data-ttu-id="b03d3-134">Use las siguientes directrices para asegurarse de que los filtros son seguros para las operaciones de la cadena de filtros.</span><span class="sxs-lookup"><span data-stu-id="b03d3-134">Use the following guidelines to ensure that your filters are safe for filter chain operations.</span></span> <span data-ttu-id="b03d3-135">Estos puntos hacen referencia al diagrama siguiente.</span><span class="sxs-lookup"><span data-stu-id="b03d3-135">These points refer to the following diagram.</span></span>

![cadena de filtros (ejemplo 2)](images/filter-chain2.png)

-   <span data-ttu-id="b03d3-137">Antes de que cambie el estado de la cadena de filtros, se deben completar todas las llamadas de procesamiento de datos en el límite de la cadena de filtros.</span><span class="sxs-lookup"><span data-stu-id="b03d3-137">Before the filter chain's state changes, all data processing calls at the boundary of the filter chain must be completed.</span></span> <span data-ttu-id="b03d3-138">Esta regla se aplica a los métodos [**IMemInputPin::Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive), [**IPin::NewSegment**](/windows/desktop/api/Strmif/nf-strmif-ipin-newsegment)e [**IPin::EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream).</span><span class="sxs-lookup"><span data-stu-id="b03d3-138">This rule applies to the methods [**IMemInputPin::Receive**](/windows/desktop/api/Strmif/nf-strmif-imeminputpin-receive), [**IPin::NewSegment**](/windows/desktop/api/Strmif/nf-strmif-ipin-newsegment), and [**IPin::EndOfStream**](/windows/desktop/api/Strmif/nf-strmif-ipin-endofstream).</span></span> <span data-ttu-id="b03d3-139">Los filtros de la cadena deben devolver de las llamadas a estos métodos realizadas por filtros fuera de la cadena; Los filtros y fuera de la cadena deben devolver de las llamadas realizadas por filtros dentro de la cadena.</span><span class="sxs-lookup"><span data-stu-id="b03d3-139">Filters in the chain must return from calls to these methods made by filters outside the chain; and filters outside the chain must return from calls made by filters within the chain.</span></span>

<span data-ttu-id="b03d3-140">Por ejemplo, en el diagrama anterior, el filtro B debe completar las llamadas de procesamiento de datos del filtro A y el filtro E debe finalizar las llamadas del filtro D. Si los pines exponen las interfaces [**IPinFlowControl**](/windows/desktop/api/Strmif/nn-strmif-ipinflowcontrol) e [**IPinConnection,**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection) puede insertar los datos a través del gráfico llamando a los métodos [**IPinFlowControl::Block**](/windows/desktop/api/Strmif/nf-strmif-ipinflowcontrol-block) e [**IGraphConfig::P ushThroughData,**](/windows/desktop/api/Strmif/nf-strmif-igraphconfig-pushthroughdata) como se describe en Reconexión [dinámica.](dynamic-reconnection.md)</span><span class="sxs-lookup"><span data-stu-id="b03d3-140">For example, in the previous diagram, filter B must complete any data processing calls from filter A, and filter E must finish any calls from filter D. If the pins expose the [**IPinFlowControl**](/windows/desktop/api/Strmif/nn-strmif-ipinflowcontrol) and [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection) interfaces, you can push the data through the graph by calling the [**IPinFlowControl::Block**](/windows/desktop/api/Strmif/nf-strmif-ipinflowcontrol-block) and [**IGraphConfig::PushThroughData**](/windows/desktop/api/Strmif/nf-strmif-igraphconfig-pushthroughdata) methods, as described in [Dynamic Reconnection](dynamic-reconnection.md).</span></span> <span data-ttu-id="b03d3-141">Los filtros también pueden admitir métodos privados para insertar los datos.</span><span class="sxs-lookup"><span data-stu-id="b03d3-141">Filters might also support private methods for pushing the data.</span></span>

-   <span data-ttu-id="b03d3-142">Los filtros ascendentes deben esperar que cambie el estado de la cadena.</span><span class="sxs-lookup"><span data-stu-id="b03d3-142">Upstream filters must expect the chain's state to change.</span></span> <span data-ttu-id="b03d3-143">Por ejemplo, en el diagrama anterior, suponga que la cadena está detenida, pero filtre A llama a **IMemInputPin::Receive**.</span><span class="sxs-lookup"><span data-stu-id="b03d3-143">For example, in the previous diagram, suppose the chain is stopped but filter A calls **IMemInputPin::Receive**.</span></span> <span data-ttu-id="b03d3-144">Se produce un error en la llamada y la respuesta del filtro A es detener el streaming.</span><span class="sxs-lookup"><span data-stu-id="b03d3-144">The call fails and the response of filter A is to stop streaming.</span></span> <span data-ttu-id="b03d3-145">Cuando la aplicación reinicia la cadena, no tiene ningún efecto porque el filtro A ya no transmite datos.</span><span class="sxs-lookup"><span data-stu-id="b03d3-145">When the application restarts the chain, it has no effect because filter A is no longer streaming data.</span></span>
-   <span data-ttu-id="b03d3-146">Los filtros de nivel inferior también deben esperar que cambie el estado de la cadena.</span><span class="sxs-lookup"><span data-stu-id="b03d3-146">Downstream filters must also expect the chain's state to change.</span></span> <span data-ttu-id="b03d3-147">Si no es así, el filtro de nivel inferior podría bloquearse mientras espera muestras que nunca llegan.</span><span class="sxs-lookup"><span data-stu-id="b03d3-147">If not, the downstream filter might block while it waits for samples that never arrive.</span></span> <span data-ttu-id="b03d3-148">Por ejemplo, los filtros de multiplexor (MUX) a menudo requieren datos de todos sus pines de entrada.</span><span class="sxs-lookup"><span data-stu-id="b03d3-148">For example, multiplexer (MUX) filters often require data from all of their input pins.</span></span> <span data-ttu-id="b03d3-149">Detener el flujo de datos de un pin de entrada podría bloquear el procesamiento de las otras secuencias.</span><span class="sxs-lookup"><span data-stu-id="b03d3-149">Halting the flow of data from one input pin might block the other streams from processing.</span></span> <span data-ttu-id="b03d3-150">Esto puede hacer que el gráfico se interbloquee.</span><span class="sxs-lookup"><span data-stu-id="b03d3-150">This can cause the graph to deadlock.</span></span>
-   <span data-ttu-id="b03d3-151">Cada conexión de anclar de un filtro fuera de la cadena a un filtro dentro de la cadena debe tener su propio asignador, que no comparten otras conexiones.</span><span class="sxs-lookup"><span data-stu-id="b03d3-151">Each pin connection from a filter outside the chain to a filter within the chain should have its own allocator, which is not shared by other connections.</span></span> <span data-ttu-id="b03d3-152">Cuando la cadena cambia de estado o se quita del gráfico, es posible que se desasigne el asignador.</span><span class="sxs-lookup"><span data-stu-id="b03d3-152">When the chain changes state or is removed from the graph, the allocator might be decommitted.</span></span> <span data-ttu-id="b03d3-153">Si otras conexiones usaban el mismo asignador, ya no pueden procesar ejemplos.</span><span class="sxs-lookup"><span data-stu-id="b03d3-153">If other connections were using the same allocator, they can no longer process samples.</span></span>
-   <span data-ttu-id="b03d3-154">No quite una cadena a menos que los filtros conectados a la cadena admitan la desconexión dinámica.</span><span class="sxs-lookup"><span data-stu-id="b03d3-154">Do not remove a chain unless the filters connected to the chain support dynamic disconnection.</span></span> <span data-ttu-id="b03d3-155">Normalmente, los filtros conectados admitirán la **interfaz IPinConnection** o **IPinFlowControl,** pero podrían admitir interfaces privadas en su lugar.</span><span class="sxs-lookup"><span data-stu-id="b03d3-155">Typically, the connected filters will support the **IPinConnection** or **IPinFlowControl** interface, but might support private interfaces instead.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b03d3-156">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="b03d3-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b03d3-157">Creación dinámica de grafos</span><span class="sxs-lookup"><span data-stu-id="b03d3-157">Dynamic Graph Building</span></span>](dynamic-graph-building.md)
</dt> </dl>

 

 



