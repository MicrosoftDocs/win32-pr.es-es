---
title: Características de muestreo de textura de recursos en mosaico
description: En esta sección se describen las características de muestreo de textura de recursos en mosaico.
ms.assetid: E56737CE-C468-4D3C-84EE-E8EB2AB6F505
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cdd46c96219e54aea6990e91de8e340fdca5e32b
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "103792694"
---
# <a name="tiled-resources-texture-sampling-features"></a><span data-ttu-id="349b4-103">Características de muestreo de textura de recursos en mosaico</span><span class="sxs-lookup"><span data-stu-id="349b4-103">Tiled resources texture sampling features</span></span>

<span data-ttu-id="349b4-104">En esta sección se describen las características de muestreo de textura de recursos en mosaico.</span><span class="sxs-lookup"><span data-stu-id="349b4-104">This section describes tiled resources texture sampling features.</span></span>

## <a name="requirements-of-tiled-resources-texture-sampling-features"></a><span data-ttu-id="349b4-105">Requisitos de los recursos en mosaico características de muestreo de textura</span><span class="sxs-lookup"><span data-stu-id="349b4-105">Requirements of tiled resources texture sampling features</span></span>

<span data-ttu-id="349b4-106">Las características de muestreo de textura que se describen aquí requieren el nivel de nivel 2 de compatibilidad con los recursos [en](tier-2.md) mosaico.</span><span class="sxs-lookup"><span data-stu-id="349b4-106">The texture sampling features described here require [Tier 2](tier-2.md) level of tiled resources support.</span></span>

## <a name="shader-feedback-about-mapped-areas"></a><span data-ttu-id="349b4-107">Comentarios del sombreador sobre áreas asignadas</span><span class="sxs-lookup"><span data-stu-id="349b4-107">Shader feedback about mapped areas</span></span>

<span data-ttu-id="349b4-108">Cualquier instrucción del sombreador que lee y/o escribe en un recurso en mosaico hace que se registre la información de estado.</span><span class="sxs-lookup"><span data-stu-id="349b4-108">Any shader instruction that reads and/or writes to a tiled resource causes status information to be recorded.</span></span> <span data-ttu-id="349b4-109">Este estado se expone como un valor de devolución adicional opcional en todas las instrucciones de acceso a recursos que entran en un registro temporal de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="349b4-109">This status is exposed as an optional extra return value on every resource access instruction that goes into a 32-bit temp register.</span></span> <span data-ttu-id="349b4-110">El contenido del valor devuelto es opaco.</span><span class="sxs-lookup"><span data-stu-id="349b4-110">The contents of the return value are opaque.</span></span> <span data-ttu-id="349b4-111">Es decir, no se permite la lectura directa por parte del programa de sombreador.</span><span class="sxs-lookup"><span data-stu-id="349b4-111">That is, direct reading by the shader program is disallowed.</span></span> <span data-ttu-id="349b4-112">Sin embargo, puede usar la función [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) para extraer la información de estado.</span><span class="sxs-lookup"><span data-stu-id="349b4-112">But, you can use the [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) function to extract the status info.</span></span>

## <a name="fully-mapped-check"></a><span data-ttu-id="349b4-113">Comprobación totalmente asignada</span><span class="sxs-lookup"><span data-stu-id="349b4-113">Fully mapped check</span></span>

<span data-ttu-id="349b4-114">La función [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) interpreta el estado devuelto desde un acceso a la memoria e indica si todos los datos a los que se tiene acceso se han asignado en el recurso.</span><span class="sxs-lookup"><span data-stu-id="349b4-114">The [**CheckAccessFullyMapped**](/windows/desktop/direct3dhlsl/checkaccessfullymapped) function interprets the status returned from a memory access and indicates whether all data being accessed was mapped in the resource.</span></span> <span data-ttu-id="349b4-115">**CheckAccessFullyMapped** devuelve true (0xFFFFFFFF) si los datos se asignaron o false (0x00000000) si los datos se han desasignado.</span><span class="sxs-lookup"><span data-stu-id="349b4-115">**CheckAccessFullyMapped** returns true (0xFFFFFFFF) if data was mapped or false (0x00000000) if data was unmapped.</span></span>

<span data-ttu-id="349b4-116">Durante las operaciones de filtro, a veces el peso de un textura determinado termina en 0,0.</span><span class="sxs-lookup"><span data-stu-id="349b4-116">During filter operations, sometimes the weight of a given texel ends up being 0.0.</span></span> <span data-ttu-id="349b4-117">Un ejemplo es una muestra lineal con coordenadas de textura que se encuentran directamente en un centro de textura: 3 otros textura (que pueden variar según el hardware) contribuyen al filtro pero con 0 peso.</span><span class="sxs-lookup"><span data-stu-id="349b4-117">An example is a linear sample with texture coordinates that fall directly on a texel center: 3 other texels (which ones they are can vary by hardware) contribute to the filter but with 0 weight.</span></span> <span data-ttu-id="349b4-118">Estos 0 pesos textura no contribuyen al resultado del filtro, por lo que si se producen en iconos **nulos** , no se cuentan como accesos no asignados.</span><span class="sxs-lookup"><span data-stu-id="349b4-118">These 0 weight texels don't contribute to the filter result at all, so if they happen to fall on **NULL** tiles, they don't count as an unmapped access.</span></span> <span data-ttu-id="349b4-119">Tenga en cuenta que la misma garantía se aplica a los filtros de textura que incluyen varios niveles de MIP. Si el textura de uno de los mapas de información no está asignado, pero el peso de esos textura es 0, esos textura no cuentan como un acceso sin asignar.</span><span class="sxs-lookup"><span data-stu-id="349b4-119">Note the same guarantee applies for texture filters that include multiple mip levels; if the texels on one of the mipmaps isn't mapped but the weight on those texels is 0, those texels don't count as an unmapped access.</span></span>

<span data-ttu-id="349b4-120">Cuando se realiza un muestreo de un formato que tiene menos de 4 componentes (como el formato de DXGI \_ \_ R8 \_ UNORM), cualquier textura que se encuentra en mosaicos **null** da como resultado un acceso asignado **nulo** que se está informando independientemente de los componentes en los que el sombreador mira realmente en el resultado.</span><span class="sxs-lookup"><span data-stu-id="349b4-120">When sampling from a format that has fewer than 4 components (such as DXGI\_FORMAT\_R8\_UNORM), any texels that fall on **NULL** tiles result in the a **NULL** mapped access being reported regardless of which components the shader actually looks at in the result.</span></span> <span data-ttu-id="349b4-121">Por ejemplo, la lectura de R8 \_ UNORM y el enmascaramiento del resultado de lectura en el sombreador con. GBA/. YZW parecería que no necesitara leer la textura en absoluto.</span><span class="sxs-lookup"><span data-stu-id="349b4-121">For example, reading from R8\_UNORM and masking the read result in the shader with .gba/.yzw wouldn't appear to need to read the texture at all.</span></span> <span data-ttu-id="349b4-122">Pero si la dirección textura es un mosaico asignado **nulo** , la operación todavía cuenta como un acceso de asignación **null** .</span><span class="sxs-lookup"><span data-stu-id="349b4-122">But if the texel address is a **NULL** mapped tile, the operation still counts as a **NULL** map access.</span></span>

<span data-ttu-id="349b4-123">El sombreador puede comprobar el estado y llevar a cabo cualquier curso de acción deseado en caso de error.</span><span class="sxs-lookup"><span data-stu-id="349b4-123">The shader can check the status and pursue any desired course of action on failure.</span></span> <span data-ttu-id="349b4-124">Por ejemplo, un curso de acción puede ser el registro de "errores" (por ejemplo, a través de UAV Write) o la emisión de otra lectura fijada a un LOD más general que se sabe que está asignado.</span><span class="sxs-lookup"><span data-stu-id="349b4-124">For example, a course of action can be logging 'misses' (say via UAV write) and/or issuing another read clamped to a coarser LOD known to be mapped.</span></span> <span data-ttu-id="349b4-125">Es posible que una aplicación desee realizar un seguimiento de los accesos correctos también con el fin de obtener una idea de qué parte del conjunto de mosaicos asignados tiene acceso.</span><span class="sxs-lookup"><span data-stu-id="349b4-125">An application might want to track successful accesses as well in order to get a sense of what portion of the mapped set of tiles got accessed.</span></span>

<span data-ttu-id="349b4-126">Una complicación para el registro es que no existe ningún mecanismo para informar del conjunto exacto de mosaicos al que se habría tenido acceso.</span><span class="sxs-lookup"><span data-stu-id="349b4-126">One complication for logging is no mechanism exists for reporting the exact set of tiles that would have been accessed.</span></span> <span data-ttu-id="349b4-127">La aplicación puede hacer conjeturas conservadoras en función de conocer las coordenadas utilizadas para el acceso, así como de usar la instrucción LOD (por ejemplo, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)), que devuelve el cálculo del uso de hardware de LOD.</span><span class="sxs-lookup"><span data-stu-id="349b4-127">The application can make conservative guesses based on knowing the coordinates it used for access, as well as using the LOD instruction (for example, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)) which returns what the hardware LOD calculation is.</span></span>

<span data-ttu-id="349b4-128">Otra complicación es que muchos de los accesos serán a los mismos iconos, por lo que se producirá una gran cantidad de registros redundantes y posiblemente contención en la memoria.</span><span class="sxs-lookup"><span data-stu-id="349b4-128">Another complication is that lots of accesses will be to the same tiles, so a lot of redundant logging will occur and possibly contention on memory.</span></span> <span data-ttu-id="349b4-129">Podría ser conveniente si el hardware pudiera tener la opción de no molestarse en el acceso al icono de informe si se notificaba en otro lugar antes.</span><span class="sxs-lookup"><span data-stu-id="349b4-129">It could be convenient if the hardware could be given the option to not bother to report tile accesses if they were reported elsewhere before.</span></span> <span data-ttu-id="349b4-130">Quizás el estado de este seguimiento podría restablecerse desde la API (probablemente en los límites del marco).</span><span class="sxs-lookup"><span data-stu-id="349b4-130">Perhaps the state of such tracking could be reset from the API (likely at frame boundaries).</span></span>

## <a name="per-sample-minlod-clamp"></a><span data-ttu-id="349b4-131">Abrazadera MinLOD por muestra</span><span class="sxs-lookup"><span data-stu-id="349b4-131">Per-sample MinLOD clamp</span></span>

<span data-ttu-id="349b4-132">Para ayudar a los sombreadores a evitar áreas de mipmapped recursos en mosaico que se sabe que no están asignados, la mayoría de las instrucciones del sombreador que implican el uso de una muestra (filtrado) tienen un nuevo modo que permite al sombreador pasar un parámetro de la abrazadera de float32 MinLOD adicional al ejemplo de textura.</span><span class="sxs-lookup"><span data-stu-id="349b4-132">To help shaders avoid areas in mipmapped tiled resources that are known to be non-mapped, most shader instructions that involve using a sampler (filtering) have a new mode that allows the shader to pass an additional float32 MinLOD clamp parameter to the texture sample.</span></span> <span data-ttu-id="349b4-133">Este valor se encuentra en el espacio de número de mipmap de la vista, en lugar del recurso subyacente.</span><span class="sxs-lookup"><span data-stu-id="349b4-133">This value is in the view's mipmap number space, as opposed to the underlying resource.</span></span>

<span data-ttu-id="349b4-134">El hardware realiza la operación [**Max**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-max)(FShaderMinLODClamp, fComputedLOD) en el mismo lugar del cálculo LOD en el que se produce la abrazadera MinLOD por recurso, que también es un **Max**().</span><span class="sxs-lookup"><span data-stu-id="349b4-134">The hardware performs [**max**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-max)(fShaderMinLODClamp,fComputedLOD) in the same place in the LOD calculation where the per-resource MinLOD clamp occurs, which is also a **max**().</span></span>

<span data-ttu-id="349b4-135">Si el resultado de aplicar la abrazadera de LOD por muestra y cualquier otra abrazadera de LOD definida en la muestra es un conjunto vacío, el resultado es el mismo que el resultado de acceso fuera del límite como la abrazadera minLOD por recurso: 0 para los componentes en el formato de superficie y los valores predeterminados para los componentes que faltan.</span><span class="sxs-lookup"><span data-stu-id="349b4-135">If the result of applying the per-sample LOD clamp and any other LOD clamps defined in the sampler is an empty set, the result is the same out of bounds access result as the per-resource minLOD clamp: 0 for components in the surface format and defaults for missing components.</span></span>

<span data-ttu-id="349b4-136">La instrucción LOD (por ejemplo, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)), que preasigna la abrazadera minLOD por muestra que se describe aquí, devuelve un LOD desgarrado y desgarrado.</span><span class="sxs-lookup"><span data-stu-id="349b4-136">The LOD instruction (for example, [**tex2Dlod**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-tex2dlod)), which predates the per-sample minLOD clamp described here, returns both a clamped and unclamped LOD.</span></span> <span data-ttu-id="349b4-137">El LOD fijado devuelto por esta instrucción LOD refleja todas las abrazaderas, incluida la abrazadera por recurso, pero no una abrazadera por muestra.</span><span class="sxs-lookup"><span data-stu-id="349b4-137">The clamped LOD returned from this LOD instruction reflects all clamping including the per-resource clamp, but not a per-sample clamp.</span></span> <span data-ttu-id="349b4-138">De todos modos, el sombreador controla y conoce la abrazadera por muestra, por lo que el autor del sombreador puede aplicar manualmente esa abrazadera al valor devuelto de la instrucción LOD si lo desea.</span><span class="sxs-lookup"><span data-stu-id="349b4-138">Per-sample clamp is controlled and known by the shader anyway, so the shader author can manually apply that clamp to the LOD instruction's return value if desired.</span></span>

## <a name="minmax-reduction-filtering"></a><span data-ttu-id="349b4-139">Filtrado de reducción mín./máx.</span><span class="sxs-lookup"><span data-stu-id="349b4-139">Min/Max reduction filtering</span></span>

<span data-ttu-id="349b4-140">Las aplicaciones pueden optar por administrar sus propias estructuras de datos que les informan del aspecto de las asignaciones para un recurso en mosaico.</span><span class="sxs-lookup"><span data-stu-id="349b4-140">Applications can choose to manage their own data structures that inform them of what the mappings looks like for a tiled resource.</span></span> <span data-ttu-id="349b4-141">Un ejemplo sería una superficie que contiene un textura para contener información para cada mosaico de un recurso en mosaico.</span><span class="sxs-lookup"><span data-stu-id="349b4-141">An example would be a surface that contains a texel to hold information for every tile in a tiled resource.</span></span> <span data-ttu-id="349b4-142">Podría almacenar el primer LOD que está asignado en una ubicación de mosaico determinada.</span><span class="sxs-lookup"><span data-stu-id="349b4-142">One might store the first LOD that is mapped at a given tile location.</span></span> <span data-ttu-id="349b4-143">Al realizar un muestreo cuidadoso de esta estructura de datos de forma similar a como se pretende que se muestree el recurso en mosaico, es posible que descubra cuál será el valor de LOD mínimo que está totalmente asignado para una superficie de filtro de textura completa.</span><span class="sxs-lookup"><span data-stu-id="349b4-143">By careful sampling of this data structure in a similar way that the tiled resource is intended to be sampled, one might discover what the minimum LOD that is fully mapped for an entire texture filter footprint will be.</span></span> <span data-ttu-id="349b4-144">Para facilitar este proceso, Direct3D 11,2 presenta un nuevo modo de muestra de uso general, filtrado mínimo y máximo.</span><span class="sxs-lookup"><span data-stu-id="349b4-144">To help make this process easier, Direct3D 11.2 introduces a new general purpose sampler mode, min/max filtering.</span></span>

<span data-ttu-id="349b4-145">La utilidad de filtrado mínimo/máximo para el seguimiento de LOD puede ser útil para otros propósitos, como, quizás el filtrado de superficies de profundidad.</span><span class="sxs-lookup"><span data-stu-id="349b4-145">The utility of min/max filtering for LOD tracking might be useful for other purposes, such as, perhaps the filtering of depth surfaces.</span></span>

<span data-ttu-id="349b4-146">El filtrado de reducción mínimo/máximo es un modo en los muestreadores que capturan el mismo conjunto de textura que un filtro de textura normal debería obtener.</span><span class="sxs-lookup"><span data-stu-id="349b4-146">Min/max reduction filtering is a mode on samplers that fetches the same set of texels that a normal texture filter would fetch.</span></span> <span data-ttu-id="349b4-147">Pero en lugar de combinar los valores para generar una respuesta, devuelve el valor mínimo () o máximo () de textura recuperado, por componente (por ejemplo, el valor mínimo de todos los valores de R, independientemente del valor mínimo de todos los valores G, etc.).</span><span class="sxs-lookup"><span data-stu-id="349b4-147">But instead of blending the values to produce an answer, it returns the min() or max() of the texels fetched, on a per-component basis (for example, the min of all the R values, separately from the min of all the G values and so on).</span></span>

<span data-ttu-id="349b4-148">Las operaciones Min/Max siguen las reglas de precisión aritmética de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="349b4-148">The min/max operations follow Direct3D arithmetic precision rules.</span></span> <span data-ttu-id="349b4-149">No importa el orden de las comparaciones.</span><span class="sxs-lookup"><span data-stu-id="349b4-149">The order of comparisons doesn't matter.</span></span>

<span data-ttu-id="349b4-150">Durante las operaciones de filtro que no son Min/Max, a veces el peso de un textura determinado termina siendo 0,0.</span><span class="sxs-lookup"><span data-stu-id="349b4-150">During filter operations that aren't min/max, sometimes the weight of a given texel ends up being 0.0.</span></span> <span data-ttu-id="349b4-151">Un ejemplo es una muestra lineal con coordenadas de textura que se encuentran directamente en textura Center-3 otros textura (que pueden variar según el hardware) contribuyen al filtro pero con 0 peso.</span><span class="sxs-lookup"><span data-stu-id="349b4-151">An example is a linear sample with texture coordinates that fall directly on a texel center - 3 other texels (which ones they are may vary by hardware) contribute to the filter but with 0 weight.</span></span> <span data-ttu-id="349b4-152">En el caso de cualquiera de estos textura que sería 0 peso en un filtro distinto de Min/Max, si el filtro es Min/Max, estos textura todavía no contribuyen al resultado (y los pesos no afectan a la operación de filtro min/max).</span><span class="sxs-lookup"><span data-stu-id="349b4-152">For any of these texels that would be 0 weight on a non-min/max filter, if the filter is min/max, these texels still do not contribute to the result (and the weights do not otherwise affect the min/max filter operation).</span></span>

<span data-ttu-id="349b4-153">La lista completa de modos de filtro se muestra en la enumeración de [**\_ filtros D3D11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_filter) con el valor mínimo y el máximo en los valores de enumeración.</span><span class="sxs-lookup"><span data-stu-id="349b4-153">The full list of filter modes is shown in the [**D3D11\_FILTER**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_filter) enumeration with MINIMUM and MAXIMUM in the enumeration values.</span></span>

<span data-ttu-id="349b4-154">La compatibilidad con esta característica depende de la compatibilidad de [nivel 2](tier-2.md) con recursos en mosaico.</span><span class="sxs-lookup"><span data-stu-id="349b4-154">Support for this feature depends on [Tier 2](tier-2.md) support for tiled resources.</span></span>

## <a name="related-topics"></a><span data-ttu-id="349b4-155">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="349b4-155">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="349b4-156">Acceso de canalización a recursos en mosaico</span><span class="sxs-lookup"><span data-stu-id="349b4-156">Pipeline access to tiled resources</span></span>](pipeline-access-to-tiled-resources.md)
</dt> </dl>

 

 