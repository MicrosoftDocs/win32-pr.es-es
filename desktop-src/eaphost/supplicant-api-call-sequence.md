---
title: Secuencia de llamadas API de suplicante
description: Obtenga información sobre la secuencia de llamadas a la API del suplicante. Vea información general de la secuencia de llamadas y ver recursos adicionales disponibles.
ms.assetid: 83276783-aee5-43ac-982d-1144df982a7d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 49c93afea6dbf4c3220bbeaec4f6278eb3d0b756
ms.sourcegitcommit: b0ebdefc3dcd5c04bede94091833aa1015a2f95c
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/21/2020
ms.locfileid: "103995645"
---
# <a name="supplicant-api-call-sequence"></a><span data-ttu-id="f8ca5-104">Secuencia de llamadas API de suplicante</span><span class="sxs-lookup"><span data-stu-id="f8ca5-104">Supplicant API Call Sequence</span></span>

<span data-ttu-id="f8ca5-105">En este tema se proporciona la secuencia de llamadas específica para la API del suplicante.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-105">This topic provides the specific call sequence for the supplicant API.</span></span>

## <a name="supplicant-api-call-sequence-overview"></a><span data-ttu-id="f8ca5-106">Introducción a la secuencia de llamadas API de suplicante</span><span class="sxs-lookup"><span data-stu-id="f8ca5-106">Supplicant API Call Sequence Overview</span></span>

<span data-ttu-id="f8ca5-107">Cuando el solicitante recibe un paquete EAP de un proveedor, como un punto de acceso, normalmente se produce el siguiente flujo de llamadas API de suplicante.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-107">When the supplicant receives an EAP packet from a provider, such as an access point, the following supplicant API call flow typically occurs.</span></span>

-   <span data-ttu-id="f8ca5-108">La aplicación llama a [**EapHostPeerBeginSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerbeginsession) con datos de configuración y datos de usuario de EAPHost.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-108">The application calls [**EapHostPeerBeginSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerbeginsession) with EAPHost configuration data and user data.</span></span> <span data-ttu-id="f8ca5-109">Una llamada correcta devuelve un identificador de sesión de **\_ \_ identificador de sesión EAP** .</span><span class="sxs-lookup"><span data-stu-id="f8ca5-109">A successful call returns an **EAP\_SESSION\_HANDLE** session handle.</span></span>
-   <span data-ttu-id="f8ca5-110">Cada paquete recibido por el solicitante se procesa mediante una llamada a [**EapHostPeerProcessReceivedPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket).</span><span class="sxs-lookup"><span data-stu-id="f8ca5-110">Each packet received by the supplicant is processed by a call to [**EapHostPeerProcessReceivedPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerprocessreceivedpacket).</span></span> <span data-ttu-id="f8ca5-111">A continuación, el suplicante llama a la función correspondiente al código de acción devuelto por la función.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-111">The supplicant then calls the function corresponding to the action code returned by the function.</span></span>
-   <span data-ttu-id="f8ca5-112">Si el código de acción es **EapHostPeerResponseSend**, el solicitante llama a [**EapHostPeerGetSendPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetsendpacket) para obtener la respuesta que se va a enviar al autenticador.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-112">If the action code is **EapHostPeerResponseSend**, then the supplicant calls [**EapHostPeerGetSendPacket**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetsendpacket) to obtain the response to be sent to the authenticator.</span></span>
-   <span data-ttu-id="f8ca5-113">Si durante la sesión, el código de acción devuelto al suplicante es **EapHostPeerResponseRespond**, indica que los atributos de EAP están disponibles.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-113">If during the session, the action code returned to the supplicant is **EapHostPeerResponseRespond**, it indicates that EAP attributes are available.</span></span> <span data-ttu-id="f8ca5-114">A continuación, el suplicante llama a [**EapHostPeerGetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresponseattributes) para obtenerlos.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-114">The supplicant then calls [**EapHostPeerGetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresponseattributes) to obtain them.</span></span> <span data-ttu-id="f8ca5-115">Estos atributos contienen datos complementarios que se usan durante el proceso de autenticación.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-115">These attributes contain supplemental data used during the authentication process.</span></span> <span data-ttu-id="f8ca5-116">Después de que el suplicante complete el procesamiento de los atributos, llama a [**EapHostPeerSetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetresponseattributes) , que actualiza los datos.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-116">After supplicant completes processing the attributes it calls [**EapHostPeerSetResponseAttributes**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetresponseattributes) which updates the data.</span></span> <span data-ttu-id="f8ca5-117">Esta función devuelve un código de acción que determina la siguiente acción del suplicante.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-117">This function returns an action code which determines the supplicant's next action.</span></span>
-   <span data-ttu-id="f8ca5-118">Si el código de acción es **EapHostPeerResponseInvokeUI** , el solicitante genera un cuadro de diálogo de interfaz de usuario para obtener datos interactivos del usuario, como credenciales o información de identidad.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-118">If the action code is **EapHostPeerResponseInvokeUI** the supplicant raises a user interface dialog to obtain interactive data from the user, such as credentials or identity information.</span></span> <span data-ttu-id="f8ca5-119">Consulte interacción del usuario con el flujo de llamadas de la API de suplicante a continuación.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-119">See User Interaction with the Supplicant API Call Flow below.</span></span>
-   <span data-ttu-id="f8ca5-120">Si el código de acción es **EapHostPeerResponseResult**, indica que los resultados de la sesión de autenticación están disponibles para el solicitante.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-120">If the action code is **EapHostPeerResponseResult**, it indicates that the results of the authentication session are available to the supplicant.</span></span> <span data-ttu-id="f8ca5-121">A continuación, el suplicante llama a [**EapHostPeerGetResult**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresult) para obtener los resultados.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-121">The supplicant then calls [**EapHostPeerGetResult**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetresult) to obtain the results.</span></span> <span data-ttu-id="f8ca5-122">Independientemente de si los resultados indican éxito o error, el solicitante llama a [**EapHostPeerEndSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerendsession).</span><span class="sxs-lookup"><span data-stu-id="f8ca5-122">Regardless of whether the results indicate success or failure, the supplicant calls [**EapHostPeerEndSession**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeerendsession).</span></span> <span data-ttu-id="f8ca5-123">En caso de error, se puede intentar volver a realizar la autenticación abriendo otra sesión con EAPHost y proporcionando una nueva identidad o intentando de nuevo la autenticación con la identidad original.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-123">In the case of failure, re-authentication can be attempted by opening another session with EAPHost and providing a new identity, or attempting authentication with the original identity again.</span></span>

## <a name="user-interaction-with-the-supplicant-api-call-flow"></a><span data-ttu-id="f8ca5-124">Interacción del usuario con el flujo de llamadas de la API del suplicante</span><span class="sxs-lookup"><span data-stu-id="f8ca5-124">User Interaction with the Supplicant API Call Flow</span></span>

<span data-ttu-id="f8ca5-125">En algunos casos, el solicitante debe obtener información del usuario para continuar con el proceso de autenticación.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-125">In certain cases, the supplicant needs to obtain information from the user to continue the authentication process.</span></span>

<span data-ttu-id="f8ca5-126">En la siguiente lista se muestra la secuencia de llamadas en el suplicante y el proceso de IU de EAPHost necesarios para habilitar la entrada interactiva.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-126">The following list demonstrates the sequence of calls on the supplicant and EAPHost UI process necessary to enable interactive input.</span></span>

1.  <span data-ttu-id="f8ca5-127">El suplicante obtiene el contexto de la interfaz de usuario actual llamando a [**EapHostPeerGetUIContext**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetuicontext).</span><span class="sxs-lookup"><span data-stu-id="f8ca5-127">The supplicant obtains the current user interface context by calling [**EapHostPeerGetUIContext**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeergetuicontext).</span></span>
2.  <span data-ttu-id="f8ca5-128">Después, el solicitante envía los datos de contexto de la interfaz de usuario al proceso de la interfaz de usuario del suplicante.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-128">The supplicant then sends the UI context data to the supplicant UI process.</span></span>
    > [!Note]  
    > <span data-ttu-id="f8ca5-129">El proceso de la interfaz de usuario, que normalmente recopila la interfaz de usuario o controla la interfaz de usuario interactiva, es independiente del proceso del suplicante.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-129">The UI process, which typically collects UI or handles interactive UI, is separate from the supplicant process.</span></span> <span data-ttu-id="f8ca5-130">La separación de los dos procesos no es un requisito de EAPHost, pero esto tiene la ventaja de permitir que el proceso de la interfaz de usuario interactúe con el escritorio.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-130">Separating the two processes is not a requirement of EAPHost, but doing so has the advantage of allowing the UI process to interact with the desktop.</span></span>

     

3.  <span data-ttu-id="f8ca5-131">Si el suplicante desea representar la interfaz de usuario por sí misma, llama a la función [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) para obtener los campos de entrada para que se produzcan los componentes de interfaz de usuario interactiva.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-131">If the supplicant wants to render the UI by itself then it calls the [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) function to obtain the input fields for interactive UI components to be raised.</span></span> <span data-ttu-id="f8ca5-132">De lo contrario, sigue el modelo tradicional de invocar la interfaz de usuario interactiva mediante una llamada a [ **EapHostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui)</span><span class="sxs-lookup"><span data-stu-id="f8ca5-132">Otherwise, it follows the traditional model of invoking method interactive UI by calling [**EapHostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui)</span></span>
    > [!Note]  
    > <span data-ttu-id="f8ca5-133">Si se devuelve la [**\_ operación de método EAPHOST de EAP E \_ \_ \_ \_ no \_ compatible**](eap-related-error-and-information-constants.md) , el suplicante debe seguir el modelo tradicional de invocar la interfaz de usuario interactiva de método llamando a [**EapHostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui).</span><span class="sxs-lookup"><span data-stu-id="f8ca5-133">If [**EAP\_E\_EAPHOST\_METHOD\_OPERATION\_NOT\_SUPPORTED**](eap-related-error-and-information-constants.md) is returned, the supplicant must follow the traditional model of invoking method interactive UI by calling [**EapHostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui).</span></span> <span data-ttu-id="f8ca5-134">Si se produce un error, [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) devolverá un código de retorno distinto de **null**.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-134">If there is an error, [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) will return a return code other than **NULL**.</span></span>

     

4.  <span data-ttu-id="f8ca5-135">Si el solicitante llama a [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) o [**EaphostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui) , el proceso de la interfaz de usuario pasa los datos de contexto existentes y carga Eappcfg.dll.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-135">Whether the supplicant calls [**EapHostPeerQueryInteractiveUIInputFields**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerqueryinteractiveuiinputfields) or [**EaphostPeerInvokeInteractiveUI**](/previous-versions/windows/desktop/api/eaphostpeerconfigapis/nf-eaphostpeerconfigapis-eaphostpeerinvokeinteractiveui) the UI process passes the existing context data and loads Eappcfg.dll.</span></span> <span data-ttu-id="f8ca5-136">Se genera una interfaz de usuario adecuada para recopilar los datos nuevos.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-136">Appropriate UI is raised to collect the new data.</span></span> <span data-ttu-id="f8ca5-137">Los nuevos datos de contexto de la interfaz de usuario, que ahora pueden contener datos proporcionados por el usuario, se copian y los datos de contexto anteriores se liberan con una llamada a [**EapPeerFreeMemory**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeerfreememory).</span><span class="sxs-lookup"><span data-stu-id="f8ca5-137">The new UI context data, which may now contain user input, is copied, and the old context data is released with a call to [**EapPeerFreeMemory**](/previous-versions/windows/desktop/api/eapmethodpeerapis/nf-eapmethodpeerapis-eappeerfreememory).</span></span>
5.  <span data-ttu-id="f8ca5-138">El proceso de la interfaz de usuario devuelve los nuevos datos de contexto al suplicante, que llama a [**EapHostPeerSetUIContext**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetuicontext) para establecerlo.</span><span class="sxs-lookup"><span data-stu-id="f8ca5-138">The UI process returns the new context data to the supplicant, which calls [**EapHostPeerSetUIContext**](/previous-versions/windows/desktop/api/eappapis/nf-eappapis-eaphostpeersetuicontext) to set it.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f8ca5-139">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="f8ca5-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f8ca5-140">Secuencia de llamadas API de método del mismo nivel</span><span class="sxs-lookup"><span data-stu-id="f8ca5-140">Peer Method API Call Sequence</span></span>](peer-method-api-call-sequence.md)
</dt> <dt>

[<span data-ttu-id="f8ca5-141">Secuencia de llamadas API del método Authenticator</span><span class="sxs-lookup"><span data-stu-id="f8ca5-141">Authenticator Method API Call Sequence</span></span>](authenticator-method-api-call-sequence.md)
</dt> <dt>

[<span data-ttu-id="f8ca5-142">Secuencia de llamadas de EAPHost</span><span class="sxs-lookup"><span data-stu-id="f8ca5-142">EAPHost Call Sequence</span></span>](about-eaphost-call-sequences.md)
</dt> <dt>

[<span data-ttu-id="f8ca5-143">Suplicantes de EAPHost</span><span class="sxs-lookup"><span data-stu-id="f8ca5-143">EAPHost Supplicants</span></span>](eaphost-supplicants.md)
</dt> </dl>

 

 




