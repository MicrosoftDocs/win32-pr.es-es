---
description: Marcas que controlan el comportamiento de la función de llamada. Usado por SHCreateThread y SHCreateThreadWithHandle. En esas funciones, estos valores se definen como tipos de marcas SHCT \_ .
title: Marcas CTF (shlwapi. h)
ms.topic: reference
ms.date: 05/31/2018
ms.assetid: 66cda866-7a39-4c5a-a795-a4c5c64cbab7
api_name:
- CTF_INSIST
- CTF_THREAD_REF
- CTF_PROCESS_REF
- CTF_COINIT_STA
- CTF_COINIT
- CTF_FREELIBANDEXIT
- CTF_REF_COUNTED
- CTF_WAIT_ALLOWCOM
- CTF_UNUSED
- CTF_INHERITWOW64
- CTF_WAIT_NO_REENTRANCY
- CTF_KEYBOARD_LOCALE
- CTF_OLEINITIALIZE
- CTF_COINIT_MTA
- CTF_NOADDREFLIB
api_type:
- HeaderDef
api_location:
- Shlwapi.h
topic_type:
- APIRef
- kbSyntax
ms.openlocfilehash: db0f33daecc4abcbfbc9972d0607f4817bc7ecff
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104984319"
---
# <a name="ctf-flags"></a>Marcas de CTF

Marcas que controlan el comportamiento de la función de llamada. Usado por [**SHCreateThread**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethread) y [**SHCreateThreadWithHandle**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethreadwithhandle). En esas funciones, estos valores se definen como tipos de marcas SHCT \_ .



| Constante o valor                                                                                                                                                                                                                                             | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="CTF_INSIST"></span><span id="ctf_insist"></span><dl> <dt>**CTF \_ INSISTE**</dt> <dt>0x00000001</dt> </dl>                                       | 0x00000001. Si se produce un error al intentar crear el subproceso con [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) , el establecimiento de esta marca hará que la función a la que apunta *pfnThreadProc* se llame sincrónicamente desde el subproceso que realiza la llamada. Esta marca solo se puede usar si *pfnCallback* es **null**.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_THREAD_REF"></span><span id="ctf_thread_ref"></span><dl> <dt>**CTF \_ \_Referencia de subproceso**</dt> <dt>0x00000002</dt> </dl>                          | 0x00000002. Mantenga una referencia al subproceso de creación mientras dure la llamada a la función a la que apunta *pfnThreadProc*. Esta referencia se debe haber establecido con [**SHSetThreadRef**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span id="CTF_PROCESS_REF"></span><span id="ctf_process_ref"></span><dl> <dt>**CTF \_ PROCESAR \_ ref**</dt> <dt>0x00000004</dt> </dl>                       | 0x00000004. Mantenga una referencia al proceso del explorador de Windows mientras dure la llamada a la función a la que apunta *pfnThreadProc*. Esta marca es útil para los controladores de la [extensión de Shell](handlers.md), que podrían necesitar evitar que el proceso del explorador de Windows se cierre prematuramente. Esta acción es útil durante tareas como el trabajo en un subproceso en segundo plano o la copia de archivos. Para obtener más información, vea [**SHGetInstanceExplorer**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetinstanceexplorer).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_COINIT_STA"></span><span id="ctf_coinit_sta"></span><dl> <dt>**CTF \_ Coinit \_ STA**</dt> <dt>0x00000008</dt> </dl>                          | 0x00000008. Inicializa COM como un contenedor uniproceso (STA) para el subproceso creado antes de llamar a la función opcional a la que apunta *pfnCallback* o a la función a la que apunta *pfnThreadProc*. Esta marca es útil cuando se debe inicializar COM para un subproceso. COM también se desinicializará automáticamente.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="CTF_COINIT"></span><span id="ctf_coinit"></span><dl> <dt>**CTF \_ Coinit**</dt> <dt>0x00000008</dt> </dl>                                       | Equivalente a CTF \_ coinit \_ Sta.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span id="CTF_FREELIBANDEXIT"></span><span id="ctf_freelibandexit"></span><dl> <dt>**CTF \_ FREELIBANDEXIT**</dt> <dt>0x00000010</dt> </dl>               | 0x00000010. **Internet Explorer 6 o posterior.** Se llamará a [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) en el archivo DLL que contiene la función *pfnThreadProc* para evitar que se descargue. Una vez que *pfnThreadProc* devuelve, el archivo dll se liberará con [**FreeLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary), con lo que se reducirá el recuento de referencias de dll. Pase esta marca para evitar que el archivo DLL se descargue prematuramente; por ejemplo, por [**CoFreeUnusedLibraries**](/windows/win32/api/combaseapi/nf-combaseapi-cofreeunusedlibraries). Tenga en cuenta que si se pasa esta marca, la función *pfnThreadProc* debe residir en un archivo dll. Esta marca está implícita en Windows Vista y versiones posteriores.<br/>                                                                                                                                                                                                                                                                   |
| <span id="CTF_REF_COUNTED"></span><span id="ctf_ref_counted"></span><dl> <dt>**CTF \_ \_Recuento de referencias**</dt> <dt>0x00000020</dt> </dl>                       | 0x00000020. **Internet Explorer 6 o posterior.** Se creará automáticamente una referencia de subproceso para el subproceso creado y se establecerá con [**SHSetThreadRef**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref). Una vez que *pfnThreadProc* devuelve, se libera la referencia de subprocesos y se envían los mensajes hasta que el recuento de referencias en la referencia de subprocesos desciende a cero, es decir, hasta que los subprocesos que dependen del subproceso creado han liberado sus referencias.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_WAIT_ALLOWCOM"></span><span id="ctf_wait_allowcom"></span><dl> <dt>**CTF \_ WAIT \_ ALLOWCOM**</dt> <dt>0x00000040</dt> </dl>                 | 0x00000040. **Internet Explorer 6 o posterior.** El subproceso que realiza la llamada espera y envía los mensajes COM y [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) . Si el procedimiento sincrónico intenta enviar un mensaje de Windows con **SendMessage** a una ventana hospedada en el subproceso que realiza la llamada, el mensaje llegará correctamente. Si el procedimiento sincrónico intenta utilizar COM para comunicarse con un objeto STA hospedado en el subproceso que realiza la llamada, la llamada de función alcanzará correctamente el objeto deseado. El subproceso que realiza la llamada está abierto para volver a introducir la fragilidad. Mientras que el subproceso que realiza la llamada puede controlar el uso del procedimiento sincrónico de **SendMessage** y com, si otros subprocesos usan **SendMessage** o com para comunicarse con los objetos hospedados en el subproceso de llamada, podrían ser mensajes inesperados o llamadas a funciones que se procesan mientras el procedimiento sincrónico se está completando.<br/> |
| <span id="CTF_UNUSED"></span><span id="ctf_unused"></span><dl> <dt>**CTF \_ 0x00000080 sin usar**</dt> <dt></dt> </dl>                                       | 0x00000080. **Internet Explorer 7 o posterior.** No se utiliza.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_INHERITWOW64"></span><span id="ctf_inheritwow64"></span><dl> <dt>**CTF \_ INHERITWOW64**</dt> <dt>0x00000100</dt> </dl>                     | 0x00000100. **Internet Explorer 7 o posterior.** El nuevo subproceso hereda el Estado deshabilitado de Windows en Windows 64 bits (WOW64) para el redirector del sistema de archivos.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_WAIT_NO_REENTRANCY"></span><span id="ctf_wait_no_reentrancy"></span><dl> <dt>**CTF \_ \_No esperar ninguna \_ reentrada**</dt> <dt>0x00000200</dt> </dl> | 0x00000200. **Windows Vista o posterior.** El subproceso que realiza la llamada bloquea todos los demás procesos mientras espera a que el procedimiento sincrónico se ejecute en el nuevo subproceso. Si el procedimiento sincrónico intenta enviar un mensaje de Windows con [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) a una ventana hospedada en el subproceso que realiza la llamada, esto hace que el procedimiento sincrónico se interbloquee. Si el procedimiento sincrónico intenta utilizar COM para comunicarse con un objeto STA hospedado en el subproceso que realiza la llamada, también hace que el procedimiento sincrónico se interbloquee. El subproceso que realiza la llamada está protegido frente a todos los problemas de reentrada especificando esta marca.<br/>                                                                                                                                                                                                                                                                |
| <span id="CTF_KEYBOARD_LOCALE"></span><span id="ctf_keyboard_locale"></span><dl> <dt>**CTF \_ \_Configuración regional de teclado**</dt> <dt>0x00000400</dt> </dl>           | 0x00000400. **Windows 7 o posterior.** Use la configuración regional del teclado del subproceso original en el nuevo subproceso que genera.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_OLEINITIALIZE"></span><span id="ctf_oleinitialize"></span><dl> <dt>**CTF \_ OLEINITIALIZE**</dt> <dt>0x00000800</dt> </dl>                  | 0x00000800. **Windows 7 o posterior.** Inicialice COM con el modelo de contenedor uniproceso (STA) para el subproceso creado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_COINIT_MTA"></span><span id="ctf_coinit_mta"></span><dl> <dt>**CTF \_ 0x00001000 \_ MTA de COinit**</dt> <dt></dt> </dl>                          | 0x00001000. **Windows 7 y versiones posteriores**. Inicialice COM con el modelo de contenedor multiproceso (MTA) para el subproceso creado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_NOADDREFLIB"></span><span id="ctf_noaddreflib"></span><dl> <dt>**CTF \_ NOADDREFLIB**</dt> <dt>0x00002000</dt> </dl>                        | 0x00002000. **Windows 7 o posterior.** Esta marca es esencialmente la opuesta de CTF \_ FREELIBANDEXIT. Esto evita las llamadas [**LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) / [**FreeLibraryAndExitThread**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibraryandexitthread) que pueden producir contención del bloqueo del cargador. Use CTF \_ NOADDREFLIB solo cuando el nuevo subproceso tenga medios para asegurarse de que el código del procedimiento de subproceso original permanecerá cargado. Este valor no se debe utilizar en el contexto de los objetos COM, porque los objetos COM deben asegurarse de que el archivo DLL permanece cargado (normalmente, COM descarga los archivos dll).<br/>                                                                                                                                                                                                                                                                                                                    |



## <a name="remarks"></a>Observaciones

Si no \_ se especifica ninguna marca de espera CTF \_ , el subproceso que realiza la llamada esperará y enviará mensajes [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) . Si el procedimiento sincrónico intenta enviar un mensaje de Windows con **SendMessage** a una ventana hospedada en el subproceso que realiza la llamada, el mensaje se dirigirá a la ventana deseada. Si el procedimiento sincrónico intenta utilizar COM para comunicarse con un objeto STA hospedado en el subproceso que realiza la llamada, el procedimiento sincrónico interbloqueará. El subproceso que realiza la llamada está abierto para volver a introducir la fragilidad. Mientras que el subproceso que realiza la llamada puede controlar el uso del procedimiento sincrónico de **SendMessage**, si otros subprocesos usan **SendMessage** para comunicarse con una ventana hospedada en el subproceso que realiza la llamada, estos mensajes podrían ser inesperados. Esto puede hacer que se procesen mientras el procedimiento sincrónico se está completando.

## <a name="requirements"></a>Requisitos



| Requisito | Value |
|-------------------------------------|--------------------------------------------------------------------------------------|
| Cliente mínimo compatible<br/> | Windows 2000 Professional, Windows XP, Windows 7 \[ Desktop apps Only\]<br/>    |
| Servidor mínimo compatible<br/> | \[Solo aplicaciones de escritorio\] de Windows 2000 Server<br/>                                 |
| Encabezado<br/>                   | <dl> <dt>Shlwapi. h</dt> </dl> |



 

 
