---
description: El administrador de ámbito de rastreo (CSM) permite definir reglas de ámbito que incluyen o excluyen direcciones URL del ámbito de rastreo de Windows Search.
ms.assetid: 132a55f9-680d-438e-b983-f5ce4cf66a41
title: Administrar reglas de ámbito
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 20d45199726cfe36dc1c4936e9ac7699a288c3ea
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104153994"
---
# <a name="managing-scope-rules"></a><span data-ttu-id="00a8c-103">Administrar reglas de ámbito</span><span class="sxs-lookup"><span data-stu-id="00a8c-103">Managing Scope Rules</span></span>

<span data-ttu-id="00a8c-104">El administrador de ámbito de rastreo (CSM) permite definir reglas de ámbito que incluyen o excluyen direcciones URL del ámbito de rastreo de Windows Search.</span><span class="sxs-lookup"><span data-stu-id="00a8c-104">The Crawl Scope Manager (CSM) enables you define scope rules that include or exclude URLs from the Windows Search crawl scope.</span></span>

<span data-ttu-id="00a8c-105">CSM le permite hacer lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="00a8c-105">The CSM lets you do the following:</span></span>

-   <span data-ttu-id="00a8c-106">Agregar nuevas reglas de ámbito al conjunto de reglas de trabajo</span><span class="sxs-lookup"><span data-stu-id="00a8c-106">Add new scope rules to the working rule set</span></span>
-   <span data-ttu-id="00a8c-107">Quitar las reglas de ámbito existentes</span><span class="sxs-lookup"><span data-stu-id="00a8c-107">Remove existing scope rules</span></span>
-   <span data-ttu-id="00a8c-108">Enumerar reglas de ámbito predeterminadas</span><span class="sxs-lookup"><span data-stu-id="00a8c-108">Enumerate default scope rules</span></span>
-   <span data-ttu-id="00a8c-109">Detectar si una dirección URL determinada está incluida o excluida del ámbito de rastreo o tiene una regla de ámbito primario o secundario</span><span class="sxs-lookup"><span data-stu-id="00a8c-109">Discover whether a particular URL is included or excluded from the crawl scope or has a parent or child scope rule</span></span>

 

<span data-ttu-id="00a8c-110">En esta sección se incluyen los siguientes temas:</span><span class="sxs-lookup"><span data-stu-id="00a8c-110">This topic includes the following subjects:</span></span>

-   [<span data-ttu-id="00a8c-111">Acerca de las reglas de ámbito</span><span class="sxs-lookup"><span data-stu-id="00a8c-111">About Scope Rules</span></span>](#about-scope-rules)
-   [<span data-ttu-id="00a8c-112">Antes de comenzar</span><span class="sxs-lookup"><span data-stu-id="00a8c-112">Before You Begin</span></span>](#before-you-begin)
-   [<span data-ttu-id="00a8c-113">Agregar reglas de ámbito</span><span class="sxs-lookup"><span data-stu-id="00a8c-113">Adding Scope Rules</span></span>](#adding-scope-rules)
    -   [<span data-ttu-id="00a8c-114">Notas sobre las reglas de usuario</span><span class="sxs-lookup"><span data-stu-id="00a8c-114">Notes on User Rules</span></span>](#notes-on-user-rules)
-   [<span data-ttu-id="00a8c-115">Quitar reglas de ámbito</span><span class="sxs-lookup"><span data-stu-id="00a8c-115">Removing Scope Rules</span></span>](#removing-scope-rules)
-   [<span data-ttu-id="00a8c-116">Revertir a las reglas predeterminadas</span><span class="sxs-lookup"><span data-stu-id="00a8c-116">Reverting to Default Rules</span></span>](#reverting-to-default-rules)
-   [<span data-ttu-id="00a8c-117">Enumerar reglas de ámbito</span><span class="sxs-lookup"><span data-stu-id="00a8c-117">Enumerating Scope Rules</span></span>](#enumerating-scope-rules)
-   [<span data-ttu-id="00a8c-118">Seguimiento de reglas de ámbito</span><span class="sxs-lookup"><span data-stu-id="00a8c-118">Tracing Scope Rules</span></span>](#tracing-scope-rules)
-   [<span data-ttu-id="00a8c-119">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="00a8c-119">Related topics</span></span>](#related-topics)

## <a name="about-scope-rules"></a><span data-ttu-id="00a8c-120">Acerca de las reglas de ámbito</span><span class="sxs-lookup"><span data-stu-id="00a8c-120">About Scope Rules</span></span>

<span data-ttu-id="00a8c-121">Una regla de ámbito es una regla que incluye o excluye las direcciones URL de una raíz de búsqueda que se rastrean e indexan.</span><span class="sxs-lookup"><span data-stu-id="00a8c-121">A scope rule is a rule that includes or excludes URLs within a search root from being crawled and indexed.</span></span> <span data-ttu-id="00a8c-122">Las reglas de inclusión hacen que el indexador incluya esa dirección URL en el ámbito Scrawl y las reglas de exclusión hacen que el indexador excluya esa dirección URL (y sus elementos secundarios) del ámbito de rastreo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-122">Inclusion rules cause the indexer to include that URL in the scrawl scope, and exclusion rules cause the indexer exclude that URL (and its children) from the crawl scope.</span></span>

<span data-ttu-id="00a8c-123">Por ejemplo, supongamos que ha instalado una nueva aplicación cuyos archivos de datos se encuentran en la carpeta WorkteamA \\ ProjectFiles en un equipo local.</span><span class="sxs-lookup"><span data-stu-id="00a8c-123">For example, suppose you've installed a new application whose data files are located in the folder WorkteamA\\ProjectFiles on a local computer.</span></span> <span data-ttu-id="00a8c-124">Supongamos que desea indizar todo el contenido de la carpeta ProjectFiles, excepto los elementos de los prototipos de la subcarpeta.</span><span class="sxs-lookup"><span data-stu-id="00a8c-124">Suppose you want everything within the ProjectFiles folder indexed except for items in the subfolder Prototypes.</span></span> <span data-ttu-id="00a8c-125">En esta situación, necesitaría una regla de inclusión para myPH:///C: \\ WorkteamA \\ ProjectFiles \\ y una regla de exclusión para los \\ prototipos myPH:///C: WorkteamA \\ ProjectFiles \\ \\ .</span><span class="sxs-lookup"><span data-stu-id="00a8c-125">In this situation, you would need an inclusion rule for myPH:///C:\\WorkteamA\\ProjectFiles\\ and an exclusion rule for myPH:///C:\\WorkteamA\\ProjectFiles\\Prototypes\\.</span></span>

<span data-ttu-id="00a8c-126">Hay tres tipos de reglas, con el siguiente orden de prioridad:</span><span class="sxs-lookup"><span data-stu-id="00a8c-126">There are three types of rules, with the following order of precedence:</span></span>

1.  <span data-ttu-id="00a8c-127">Los administradores establecen las reglas de directiva de grupo y pueden invalidar todas las demás reglas.</span><span class="sxs-lookup"><span data-stu-id="00a8c-127">Group Policy rules are set by administrators and can override all other rules.</span></span>
2.  <span data-ttu-id="00a8c-128">Las reglas de usuario las establecen los usuarios que modifican el ámbito en la interfaz de usuario de opciones de búsqueda de Windows.</span><span class="sxs-lookup"><span data-stu-id="00a8c-128">User rules are set by users modifying the scope in the Windows Search options user interface.</span></span> <span data-ttu-id="00a8c-129">Los usuarios u otras aplicaciones pueden quitar todas las reglas de usuario y volver a las reglas predeterminadas.</span><span class="sxs-lookup"><span data-stu-id="00a8c-129">Users or other applications can remove all user rules and revert to default rules.</span></span>
3.  <span data-ttu-id="00a8c-130">Normalmente, las reglas predeterminadas se establecen en una aplicación para definir un ámbito predeterminado.</span><span class="sxs-lookup"><span data-stu-id="00a8c-130">Default rules are typically set by an application to define a default scope.</span></span> <span data-ttu-id="00a8c-131">Por ejemplo, las reglas predeterminadas se pueden establecer cuando se agrega al sistema un nuevo contenedor o controlador de protocolo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-131">For example, default rules might be set when a new protocol handler or container is added to the system.</span></span>

<span data-ttu-id="00a8c-132">Juntos, estos tipos de reglas constituyen el *conjunto de reglas de trabajo* desde el que el administrador de ámbito de rastreo (CSM) genera la lista completa de direcciones URL que se van a rastrear.</span><span class="sxs-lookup"><span data-stu-id="00a8c-132">Together, these types of rules comprise the *working rule set* from which the Crawl Scope Manager (CSM) generates the full list of URLs to crawl.</span></span> <span data-ttu-id="00a8c-133">Aunque las reglas predeterminadas pueden reemplazarse por las reglas de directiva de grupo y por las reglas de usuario, se mantienen en su propio conjunto de reglas predeterminado, al que se puede revertir en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="00a8c-133">While default rules can be overridden by group policy rules and by user rules, they are maintained in their own default rule set, which you can revert to at any time.</span></span> <span data-ttu-id="00a8c-134">El indexador rastrea las direcciones URL del conjunto de reglas de trabajo y agrega elementos, propiedades y contenido al catálogo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-134">The indexer crawls the URLs from the working rule set and adds items, properties, and content to the catalog.</span></span>

> [!Note]  
> <span data-ttu-id="00a8c-135">Los usuarios con acceso al panel de control pueden modificar las reglas a través de esa interfaz.</span><span class="sxs-lookup"><span data-stu-id="00a8c-135">Users with access to Control Panel can modify the rules through that interface.</span></span> <span data-ttu-id="00a8c-136">Por lo tanto, las aplicaciones que ofrecen la administración de ámbitos siempre deben obtener las reglas directamente de CSM mediante los métodos de enumeración en lugar de depender de una copia guardada de reglas de usuario.</span><span class="sxs-lookup"><span data-stu-id="00a8c-136">Therefore, applications offering scope management should always get the rules directly from the CSM by using the enumeration methods instead of relying on a saved copy of user rules.</span></span>

 

<span data-ttu-id="00a8c-137">Las reglas de exclusión pueden definir direcciones URL de patrón con el carácter comodín ' \* '; por ejemplo: file:///C: \\ Projecta \\ \* \\ .</span><span class="sxs-lookup"><span data-stu-id="00a8c-137">Exclusion rules can define pattern URLs with the wildcard character '\*'; for example: file:///C:\\ProjectA\\\*\\.</span></span> <span data-ttu-id="00a8c-138">Una regla de exclusión que usa este patrón evita que el indexador rastree las carpetas del directorio Projecta.</span><span class="sxs-lookup"><span data-stu-id="00a8c-138">An exclusion rule using this pattern prevents the indexer from crawling any folders under the ProjectA directory.</span></span> <span data-ttu-id="00a8c-139">Para un ejemplo más complicado, supongamos que hay una regla de inclusión para file:///C: \\ Projecta \\ y una regla de patrón de exclusión para file:///C: \\ Projecta \\ \* \\ Data \\ \* .</span><span class="sxs-lookup"><span data-stu-id="00a8c-139">For a more complicated example, suppose there is an inclusion rule for file:///C:\\ProjectA\\ and an exclusion pattern rule for file:///C:\\ProjectA\\\*\\data\\\*.</span></span> <span data-ttu-id="00a8c-140">En este caso, el indizador rastrearía los elementos de:</span><span class="sxs-lookup"><span data-stu-id="00a8c-140">In this case, the indexer would crawl items in:</span></span>

-   <span data-ttu-id="00a8c-141">C: \\ proyectoa</span><span class="sxs-lookup"><span data-stu-id="00a8c-141">C:\\ProjectA</span></span>\\
-   <span data-ttu-id="00a8c-142">C: prueba de prueba de \\ Projecta \\ **version1** </span><span class="sxs-lookup"><span data-stu-id="00a8c-142">C:\\ProjectA\\**version1**\\testfiles</span></span>\\\\
-   <span data-ttu-id="00a8c-143">C: \\ \\ **datos \\ temporales de version1** </span><span class="sxs-lookup"><span data-stu-id="00a8c-143">C:\\ProjectA\\**version1\\temp**\\data</span></span>\\\\

<span data-ttu-id="00a8c-144">Pero el indizador no rastrearía los elementos de:</span><span class="sxs-lookup"><span data-stu-id="00a8c-144">But the indexer would not crawl items in:</span></span>

-   <span data-ttu-id="00a8c-145">C: \\ datos de Projecta \\ **version1** </span><span class="sxs-lookup"><span data-stu-id="00a8c-145">C:\\ProjectA\\**version1**\\data</span></span>\\\\

 

## <a name="before-you-begin"></a><span data-ttu-id="00a8c-146">Antes de empezar</span><span class="sxs-lookup"><span data-stu-id="00a8c-146">Before You Begin</span></span>

<span data-ttu-id="00a8c-147">Antes de usar cualquiera de las interfaces del administrador de ámbito de rastreo, debe realizar los siguientes pasos de requisitos previos:</span><span class="sxs-lookup"><span data-stu-id="00a8c-147">Before you use any of the Crawl Scope Manager interfaces, you must perform the following prerequisite steps:</span></span>

1.  <span data-ttu-id="00a8c-148">Cree el objeto **CSearchManager** y obtenga su interfaz **ISearchManager** .</span><span class="sxs-lookup"><span data-stu-id="00a8c-148">Create the **CSearchManager** object and obtain its **ISearchManager** interface.</span></span>
2.  <span data-ttu-id="00a8c-149">Llame a **ISearchManager:: GetCatalog** para "SystemIndex" para obtener una instancia de la interfaz **ISearchCatalogManager** .</span><span class="sxs-lookup"><span data-stu-id="00a8c-149">Call **ISearchManager::GetCatalog** for "SystemIndex" to obtain an instance of the **ISearchCatalogManager** interface.</span></span>
3.  <span data-ttu-id="00a8c-150">Llame a **ISearchCatalogManager:: GetCrawlScopeManager** para obtener una instancia de la interfaz **ISearchCrawlScopeManager** .</span><span class="sxs-lookup"><span data-stu-id="00a8c-150">Call **ISearchCatalogManager::GetCrawlScopeManager** to obtain an instance of the **ISearchCrawlScopeManager** interface.</span></span>

<span data-ttu-id="00a8c-151">Después de realizar cambios en el administrador de ámbito de rastreo, debe llamar al método [**ISearchCrawlScopeManager:: SAVEALL**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-saveall) .</span><span class="sxs-lookup"><span data-stu-id="00a8c-151">After making any changes to the Crawl Scope Manager, you must call the [**ISearchCrawlScopeManager::SaveAll**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-saveall) method.</span></span> <span data-ttu-id="00a8c-152">Este método no toma ningún parámetro y devuelve si es \_ correcto.</span><span class="sxs-lookup"><span data-stu-id="00a8c-152">This method takes no parameters and returns S\_OK on success.</span></span>

 

## <a name="adding-scope-rules"></a><span data-ttu-id="00a8c-153">Agregar reglas de ámbito</span><span class="sxs-lookup"><span data-stu-id="00a8c-153">Adding Scope Rules</span></span>

<span data-ttu-id="00a8c-154">Las reglas de trabajo establecidas para CSM incluyen reglas predeterminadas y de usuario, así como cualquier regla forzada por la Directiva de grupo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-154">The working rules set for the CSM includes user and default rules, as well as any rules forced by group policy.</span></span> <span data-ttu-id="00a8c-155">Los usuarios configuran las reglas de usuario en una interfaz de usuario y las reglas predeterminadas se pueden establecer de una de las siguientes opciones:</span><span class="sxs-lookup"><span data-stu-id="00a8c-155">User rules are set up by users in a user interface, and default rules can be set by any of the following:</span></span>

-   <span data-ttu-id="00a8c-156">Directivas de grupo implementadas por un administrador del sistema (no usan la interfaz [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) ).</span><span class="sxs-lookup"><span data-stu-id="00a8c-156">Group policies implemented by a system administrator (These do not use the [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) interface.)</span></span>
-   <span data-ttu-id="00a8c-157">Instalación o actualización de una aplicación como Windows Search o un controlador de protocolo</span><span class="sxs-lookup"><span data-stu-id="00a8c-157">The installation or update of an application like Windows Search or a protocol handler</span></span>
-   <span data-ttu-id="00a8c-158">Una aplicación de instalación para agregar un nuevo almacén de datos o contenedor</span><span class="sxs-lookup"><span data-stu-id="00a8c-158">A setup application for the addition of a new data store or container</span></span>

<span data-ttu-id="00a8c-159">[**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) proporciona dos métodos para agregar nuevas reglas de ámbito, como se describe en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="00a8c-159">The [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) provides two methods for adding new scope rules, as described in the following table.</span></span> <span data-ttu-id="00a8c-160">Las rutas de acceso de las reglas de inclusión del sistema de archivos deben terminar con una barra diagonal inversa ' \\ ' (por ejemplo, File:///C: \\ files \\ ) y las rutas de acceso de las reglas de exclusión deben terminar con un asterisco (por ejemplo, File:///c: \\ files \\ \* ).</span><span class="sxs-lookup"><span data-stu-id="00a8c-160">Paths for inclusion rules for the file system must end with a backslash '\\' (for example, file:///C:\\files\\), and paths for exclusion rules must end with an asterisk (for example, file:///c:\\files\\\*).</span></span> <span data-ttu-id="00a8c-161">Solo las reglas de exclusión pueden contener direcciones URL de patrón.</span><span class="sxs-lookup"><span data-stu-id="00a8c-161">Only exclusion rules can contain pattern URLs.</span></span> <span data-ttu-id="00a8c-162">Además, se recomienda incluir los identificadores de seguridad (SID) de los usuarios en las rutas de acceso para mejorar la seguridad.</span><span class="sxs-lookup"><span data-stu-id="00a8c-162">Furthermore, we recommend including users' security identifiers (SIDs) in paths, for better security.</span></span> <span data-ttu-id="00a8c-163">Las rutas de acceso por usuario son más seguras, ya que las consultas se ejecutarán en un proceso por usuario, asegurándose de que un usuario no pueda ver los elementos indizados desde la bandeja de entrada de otro usuario, por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-163">Per-user paths are more secure as queries would then run in a per-user process, ensuring that one user cannot see items indexed from another user's inbox, for example.</span></span>

<span data-ttu-id="00a8c-164">En la tabla siguiente se describen los métodos de la interfaz ISearchCrawlScopeManager que se usan para agregar nuevas reglas de ámbito.</span><span class="sxs-lookup"><span data-stu-id="00a8c-164">The following table describes the methods of the ISearchCrawlScopeManager interface used for adding new scope rules.</span></span>



| <span data-ttu-id="00a8c-165">Método</span><span class="sxs-lookup"><span data-stu-id="00a8c-165">Method</span></span>                                                                              | <span data-ttu-id="00a8c-166">Descripción</span><span class="sxs-lookup"><span data-stu-id="00a8c-166">Description</span></span>                                                                                                                                                                                                                  |
|-------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="00a8c-167">**AddUserScopeRule**</span><span class="sxs-lookup"><span data-stu-id="00a8c-167">**AddUserScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-adduserscoperule)       | <span data-ttu-id="00a8c-168">Agrega una regla para una dirección URL, según lo especificado por el usuario.</span><span class="sxs-lookup"><span data-stu-id="00a8c-168">Adds a rule for a URL, as specified by the user.</span></span> <span data-ttu-id="00a8c-169">Estas reglas invalidan las reglas predeterminadas.</span><span class="sxs-lookup"><span data-stu-id="00a8c-169">These rules override default rules.</span></span> <span data-ttu-id="00a8c-170">Use este método si ha implementado una interfaz de usuario que permite a los usuarios administrar sus propias reglas de ámbito y direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="00a8c-170">Use this method if you have implemented a user interface that lets users manage their own scope rules and URLs.</span></span>                         |
| [<span data-ttu-id="00a8c-171">**AddDefaultScopeRule**</span><span class="sxs-lookup"><span data-stu-id="00a8c-171">**AddDefaultScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-adddefaultscoperule) | <span data-ttu-id="00a8c-172">Agrega una regla para una dirección URL, tal como la especifica otra aplicación como un controlador de protocolo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-172">Adds a rule for a URL, as specified by another application like a protocol handler.</span></span> <span data-ttu-id="00a8c-173">Use este método cuando haya implementado un nuevo controlador de protocolo o agregado un nuevo almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="00a8c-173">Use this method when you have implemented a new protocol handler or added a new data store.</span></span> <span data-ttu-id="00a8c-174">Estas reglas pueden reemplazarse por las reglas de usuario.</span><span class="sxs-lookup"><span data-stu-id="00a8c-174">These rules can be overridden by user rules.</span></span> |



 

<span data-ttu-id="00a8c-175">Cada método toma una dirección URL a una ubicación Indizable y marcas que determinan si la dirección URL se debe incluir o excluir.</span><span class="sxs-lookup"><span data-stu-id="00a8c-175">Each method takes a URL to an indexable location and flags that determine whether the URL should be included or excluded.</span></span> <span data-ttu-id="00a8c-176">El parámetro *fFollowFlags* se reserva para uso futuro.</span><span class="sxs-lookup"><span data-stu-id="00a8c-176">The *fFollowFlags* parameter is reserved for future use.</span></span> <span data-ttu-id="00a8c-177">Cuando se agrega una nueva regla de ámbito y el administrador de ámbito de rastreo determina que la regla ya existe (en función de la dirección URL o el patrón proporcionado), el conjunto de reglas de trabajo se actualiza de modo que (1) la regla antigua se reemplaza por la nueva regla y (2) se quitan las reglas de usuario que contradicen.</span><span class="sxs-lookup"><span data-stu-id="00a8c-177">When you add a new scope rule and the Crawl Scope Manager determines that the rule already exists (based on the URL or the pattern provided), the working rule set is updated so that (1) the old rule is replaced by the new rule and (2) any user rules that contradict it are removed.</span></span>

<span data-ttu-id="00a8c-178">**Sugerencia:** Aunque la raíz file://se incluye de forma predeterminada en el ámbito de rastreo, los archivos de programa no se indizan de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="00a8c-178">**Tip:** While the file:// root is included by default in the crawl scope, Program Files is not indexed by default.</span></span> <span data-ttu-id="00a8c-179">Por lo tanto, las aplicaciones con datos guardados en el directorio de archivos de programa deben agregar su ubicación como regla predeterminada.</span><span class="sxs-lookup"><span data-stu-id="00a8c-179">Therefore, applications with data saved to their Program Files directory need to add their location as a default rule.</span></span>

### <a name="notes-on-user-rules"></a><span data-ttu-id="00a8c-180">Notas sobre las reglas de usuario</span><span class="sxs-lookup"><span data-stu-id="00a8c-180">Notes on User Rules</span></span>

<span data-ttu-id="00a8c-181">Si una nueva regla de usuario es la misma que una regla predeterminada existente, la nueva regla de usuario invalida la regla predeterminada en el conjunto de reglas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-181">If a new user rule is the same as an existing default rule, the new user rule overrides the default rule in the working rule set.</span></span> <span data-ttu-id="00a8c-182">Si la nueva regla de usuario es la misma que una regla de usuario existente, se reemplaza la regla de usuario anterior.</span><span class="sxs-lookup"><span data-stu-id="00a8c-182">If the new user rule is the same as an existing user rule, the old user rule is replaced.</span></span>

<span data-ttu-id="00a8c-183">Establecer la marca *fOverrideChildren* tiene los siguientes resultados en el conjunto de reglas de trabajo:</span><span class="sxs-lookup"><span data-stu-id="00a8c-183">Setting the flag *fOverrideChildren* has the following results in the working rule set:</span></span>

-   <span data-ttu-id="00a8c-184">**True** da como resultado la eliminación de todas las reglas secundarias del conjunto de reglas de trabajo (reglas de usuario y reglas predeterminadas).</span><span class="sxs-lookup"><span data-stu-id="00a8c-184">**TRUE** results in the removal of all child rules from the working rule set (both user rules and default rules).</span></span>
-   <span data-ttu-id="00a8c-185">FALSE: al volver a agregar las reglas de trabajo, se establecen todas las reglas predeterminadas que son secundarias de la nueva regla de usuario.</span><span class="sxs-lookup"><span data-stu-id="00a8c-185">FALSE results in re-adding to the working rules set all the default rules that are children of the new user rule.</span></span> <span data-ttu-id="00a8c-186">Si una regla predeterminada secundaria es una inclusión y la nueva regla de usuario es una exclusión, la regla predeterminada se cambia a una regla de usuario de inclusión.</span><span class="sxs-lookup"><span data-stu-id="00a8c-186">If a child default rule is an inclusion and the new user rule is an exclusion, the default rule is changed to an inclusion user rule.</span></span>

 

## <a name="removing-scope-rules"></a><span data-ttu-id="00a8c-187">Quitar reglas de ámbito</span><span class="sxs-lookup"><span data-stu-id="00a8c-187">Removing Scope Rules</span></span>

<span data-ttu-id="00a8c-188">Puede usar la interfaz [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) para quitar una regla de ámbito del conjunto de reglas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-188">You can use the [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) interface to remove a scope rule from the working rule set.</span></span> <span data-ttu-id="00a8c-189">Esta interfaz proporciona los dos métodos siguientes para quitar las reglas de ámbito.</span><span class="sxs-lookup"><span data-stu-id="00a8c-189">This interface provides the following two methods for removing scope rules.</span></span>



| <span data-ttu-id="00a8c-190">Método</span><span class="sxs-lookup"><span data-stu-id="00a8c-190">Method</span></span>                                                                                    | <span data-ttu-id="00a8c-191">Descripción</span><span class="sxs-lookup"><span data-stu-id="00a8c-191">Description</span></span>                                                                                                                                                                                           |
|-------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="00a8c-192">**RemoveScopeRule**</span><span class="sxs-lookup"><span data-stu-id="00a8c-192">**RemoveScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removescoperule)               | <span data-ttu-id="00a8c-193">Quita una regla de usuario para una dirección URL especificada del conjunto de reglas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-193">Removes a user rule for a specified URL from the working rule set.</span></span> <span data-ttu-id="00a8c-194">Si la regla de usuario es un duplicado de o invalida una regla predeterminada, la regla predeterminada permanece en el conjunto de reglas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-194">If the user rule is a duplicate of or overrides a default rule, the default rule remains in the working rule set.</span></span>                  |
| [<span data-ttu-id="00a8c-195">**RemoveDefaultScopeRule**</span><span class="sxs-lookup"><span data-stu-id="00a8c-195">**RemoveDefaultScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removedefaultscoperule) | <span data-ttu-id="00a8c-196">Quita una regla predeterminada para una dirección URL especificada del conjunto de reglas de trabajo y del conjunto de reglas predeterminado.</span><span class="sxs-lookup"><span data-stu-id="00a8c-196">Removes a default rule for a specified URL from both the working rule set and the default rule set.</span></span> <span data-ttu-id="00a8c-197">Después de llamar a este método, no se puede revertir a esta regla predeterminada mediante RevertToDefaultScopes.</span><span class="sxs-lookup"><span data-stu-id="00a8c-197">After calling this method, you cannot revert to this default rule by using RevertToDefaultScopes.</span></span> |



 

<span data-ttu-id="00a8c-198">Cada método toma una dirección URL y una marca que indica si la regla que se va a quitar es una regla de inclusión o exclusión.</span><span class="sxs-lookup"><span data-stu-id="00a8c-198">Each method takes a URL and a flag indicating whether the rule to be removed is an inclusion or exclusion rule.</span></span> <span data-ttu-id="00a8c-199">Estos métodos devuelven un error si no se encuentra una regla con esa marca de dirección URL y de inclusión/exclusión.</span><span class="sxs-lookup"><span data-stu-id="00a8c-199">These methods returns an error if a rule with that URL and inclusion/exclusion flag is not found.</span></span>

<span data-ttu-id="00a8c-200">**Sugerencia:** Si desea quitar completamente un ámbito del ámbito de rastreo, use el método [**RemoveRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removeroot) , que quita la raíz de búsqueda y todas las reglas de ámbito asociadas.</span><span class="sxs-lookup"><span data-stu-id="00a8c-200">**Tip:** If you want to remove a scope from the crawl scope entirely, use the [**RemoveRoot**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-removeroot) method, which removes the search root and all associated scope rules.</span></span> <span data-ttu-id="00a8c-201">Para ello, se recomienda, por ejemplo, la desinstalación.</span><span class="sxs-lookup"><span data-stu-id="00a8c-201">Doing this while uninstalling, for example, is considered best practice.</span></span>

<span data-ttu-id="00a8c-202">También es posible quitar todas las invalidaciones definidas por el usuario de una raíz de búsqueda y volver a la raíz de búsqueda original y a las reglas de ámbito predeterminadas.</span><span class="sxs-lookup"><span data-stu-id="00a8c-202">It is also possible to remove all user-set overrides of a search root and revert to the original search root and default scope rules.</span></span> <span data-ttu-id="00a8c-203">Para obtener más información, consulte la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="00a8c-203">For more information, refer to the next section.</span></span>

> [!Note]  
> <span data-ttu-id="00a8c-204">En Windows Vista, si los usuarios se quitan a través de perfiles de usuario en el panel de control, CSM quita todas las reglas y raíces que incluyen su SID y quita los elementos indexados del catálogo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-204">On Windows Vista, if users are removed through User Profiles in Control Panel, CSM removes all rules and roots that include their SID and removes their indexed items from the catalog.</span></span> <span data-ttu-id="00a8c-205">En Windows XP, debe quitar manualmente las raíces y reglas de los usuarios.</span><span class="sxs-lookup"><span data-stu-id="00a8c-205">On Windows XP, you must remove the users' roots and rules manually.</span></span>

 

 

## <a name="reverting-to-default-rules"></a><span data-ttu-id="00a8c-206">Revertir a las reglas predeterminadas</span><span class="sxs-lookup"><span data-stu-id="00a8c-206">Reverting to Default Rules</span></span>

<span data-ttu-id="00a8c-207">Al revertir a las reglas predeterminadas se quitan todas las reglas de usuario de una dirección URL o raíz y se restauran todas las reglas predeterminadas en el conjunto de reglas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-207">Reverting to default rules removes all user rules for a URL or root and restores all default rules to the working rule set.</span></span> <span data-ttu-id="00a8c-208">No obstante, no quita las reglas establecidas por la Directiva de grupo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-208">It does not, however, remove rules set by group policy.</span></span> <span data-ttu-id="00a8c-209">El método [**RevertToDefaultScopes**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-reverttodefaultscopes) no toma ningún parámetro y devuelve un código de error si no se puede revertir a las reglas predeterminadas.</span><span class="sxs-lookup"><span data-stu-id="00a8c-209">The [**RevertToDefaultScopes**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-reverttodefaultscopes) method takes no parameters and returns an error code if it is unable to revert to default rules.</span></span>

 

## <a name="enumerating-scope-rules"></a><span data-ttu-id="00a8c-210">Enumerar reglas de ámbito</span><span class="sxs-lookup"><span data-stu-id="00a8c-210">Enumerating Scope Rules</span></span>

<span data-ttu-id="00a8c-211">CSM enumera las reglas de ámbito mediante una interfaz de enumerador de estilo COM estándar, [**IEnumSearchScopeRules**](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchscoperules) .</span><span class="sxs-lookup"><span data-stu-id="00a8c-211">The CSM enumerates scope rules by using a standard COM-style enumerator interface, [**IEnumSearchScopeRules**](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchscoperules) .</span></span> <span data-ttu-id="00a8c-212">Puede usar esta interfaz para enumerar las reglas de ámbito para varios propósitos.</span><span class="sxs-lookup"><span data-stu-id="00a8c-212">You can use this interface to enumerate scope rules for several purposes.</span></span> <span data-ttu-id="00a8c-213">Por ejemplo, puede que desee mostrar todo el conjunto de reglas de trabajo en una interfaz de usuario o detectar si una regla o el elemento secundario de una regla ya está en el ámbito de rastreo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-213">For example, you might want to display the entire working rule set in a user interface, or discover whether a rule or the child of a rule is already in the crawl scope.</span></span>

 

## <a name="tracing-scope-rules"></a><span data-ttu-id="00a8c-214">Seguimiento de reglas de ámbito</span><span class="sxs-lookup"><span data-stu-id="00a8c-214">Tracing Scope Rules</span></span>

<span data-ttu-id="00a8c-215">CSM también le permite determinar si una dirección URL especificada está incluida en el ámbito de rastreo y si tiene una regla de ámbito primario o secundario.</span><span class="sxs-lookup"><span data-stu-id="00a8c-215">The CSM also enables you to determine whether a specified URL is included in the crawl scope and whether it has a parent or child scope rule.</span></span> <span data-ttu-id="00a8c-216">También puede averiguar por qué se incluye una dirección URL o se excluye del ámbito de rastreo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-216">You can also find out why a URL is included or excluded from the crawl scope.</span></span> <span data-ttu-id="00a8c-217">Estos métodos no están diseñados para usarse con direcciones URL de patrón.</span><span class="sxs-lookup"><span data-stu-id="00a8c-217">These methods are not intended to be used with pattern URLs.</span></span>

<span data-ttu-id="00a8c-218">En la tabla siguiente se describen los métodos de [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) que se usan para agregar nuevas reglas de ámbito.</span><span class="sxs-lookup"><span data-stu-id="00a8c-218">The following table describes the methods of [**ISearchCrawlScopeManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager) used for adding new scope rules.</span></span>



| <span data-ttu-id="00a8c-219">Método</span><span class="sxs-lookup"><span data-stu-id="00a8c-219">Method</span></span>                                                                                      | <span data-ttu-id="00a8c-220">Descripción</span><span class="sxs-lookup"><span data-stu-id="00a8c-220">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|---------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="00a8c-221">**GetParentScopeVersionId**</span><span class="sxs-lookup"><span data-stu-id="00a8c-221">**GetParentScopeVersionId**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-getparentscopeversionid) | <span data-ttu-id="00a8c-222">Obtiene el identificador de la versión de la dirección URL de inclusión primaria.</span><span class="sxs-lookup"><span data-stu-id="00a8c-222">Gets the version ID of the parent inclusion URL.</span></span> <span data-ttu-id="00a8c-223">Puede usar este método para ver si el ámbito primario ha cambiado desde la última vez que lo protegió.</span><span class="sxs-lookup"><span data-stu-id="00a8c-223">You can use this method to see if the parent scope has changed since the last time you checked it.</span></span><br/> <span data-ttu-id="00a8c-224">Ejemplo: Si una aplicación de correo utiliza notificaciones administradas por el proveedor, podría obtener la versión del ámbito principal antes de que se cierre y volver a comprobar la versión cuando se abra.</span><span class="sxs-lookup"><span data-stu-id="00a8c-224">Example: If a mail application uses provider-managed notifications, it might get the parent scope version before it closes and check the version again when it opens.</span></span> <span data-ttu-id="00a8c-225">A continuación, la aplicación puede determinar si es necesario insertar un nuevo conjunto de notificaciones en el indexador.</span><span class="sxs-lookup"><span data-stu-id="00a8c-225">Then the application can determine whether it needs to push a new set of notifications to the indexer.</span></span><br/> |
| [<span data-ttu-id="00a8c-226">**HasChildScopeRule**</span><span class="sxs-lookup"><span data-stu-id="00a8c-226">**HasChildScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-haschildscoperule)             | <span data-ttu-id="00a8c-227">Devuelve **true** si la dirección URL especificada tiene una regla secundaria (una regla que se aplica a un elemento secundario en cualquier nivel dentro de su jerarquía de direcciones URL).</span><span class="sxs-lookup"><span data-stu-id="00a8c-227">Returns **TRUE** if the specified URL has a child rule (a rule applying to a child at any level within its URL hierarchy).</span></span> <br/> <span data-ttu-id="00a8c-228">Ejemplo: Si la dirección URL es file:///C: \\ Folder \\ , este método devuelve **true** si CSM tiene una regla de ámbito específica para la subcarpeta File:///C: \\ Folder \\ \\ .</span><span class="sxs-lookup"><span data-stu-id="00a8c-228">Example: If the URL is file:///C:\\Folder\\, this method returns **TRUE** if the CSM has a scope rule specifically for file:///C:\\Folder\\Subfolder\\.</span></span><br/>                                                                                                                                              |
| [<span data-ttu-id="00a8c-229">**HasParentScopeRule**</span><span class="sxs-lookup"><span data-stu-id="00a8c-229">**HasParentScopeRule**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-hasparentscoperule)           | <span data-ttu-id="00a8c-230">Devuelve **true** si la dirección URL especificada tiene una regla primaria (una regla que se aplica a un elemento primario en cualquier nivel de la jerarquía de direcciones URL).</span><span class="sxs-lookup"><span data-stu-id="00a8c-230">Returns **TRUE** if the specified URL has a parent rule (a rule applying to a parent at any level in the URL hierarchy).</span></span><br/> <span data-ttu-id="00a8c-231">Ejemplo: Si la dirección URL es file:///C: \\ carpeta subcarpeta \\ , este método devuelve **true** si CSM tiene una regla de ámbito específica para file:///C: \\ Folder \\ .</span><span class="sxs-lookup"><span data-stu-id="00a8c-231">Example: If the URL is file:///C:\\Folder\\Subfolder, this method returns **TRUE** if the CSM has a scope rule specifically for file:///C:\\Folder\\.</span></span><br/>                                                                                                                                                   |
| [<span data-ttu-id="00a8c-232">**IncludedInCrawlScope**</span><span class="sxs-lookup"><span data-stu-id="00a8c-232">**IncludedInCrawlScope**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscope)       | <span data-ttu-id="00a8c-233">Devuelve **true** si la dirección URL especificada está incluida en el ámbito de rastreo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-233">Returns **TRUE** if the specified URL is included in the crawl scope.</span></span>                                                                                                                                                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="00a8c-234">**IncludedInCrawlScopeEx**</span><span class="sxs-lookup"><span data-stu-id="00a8c-234">**IncludedInCrawlScopeEx**</span></span>](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscopeex)   | <span data-ttu-id="00a8c-235">Devuelve un valor de la enumeración [**CLUSION \_ Reason**](/windows/win32/api/searchapi/ne-searchapi-clusion_reason) que explica por qué la dirección URL se incluye en el ámbito de rastreo o se excluye del mismo, y recupera el valor **true** si la dirección URL está incluida en el ámbito de rastreo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-235">Returns a value from the [**CLUSION\_REASON**](/windows/win32/api/searchapi/ne-searchapi-clusion_reason) enumeration explaining why the URL is included in or excluded from the crawl scope, and retrieves the value **TRUE** if the URL is included in the crawl scope.</span></span> <span data-ttu-id="00a8c-236">Este método puede ayudarle a identificar conflictos en el conjunto de reglas de trabajo.</span><span class="sxs-lookup"><span data-stu-id="00a8c-236">This method can help you identify conflicts in your working rule set.</span></span>                                                                                                                                       |



 

 

> [!Note]  
> <span data-ttu-id="00a8c-237">Los métodos [**IncludedInCrawlScope**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscope) y [**IncludedInCrawlScopeEx**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscopeex) determinan si la dirección URL se rastreará basándose únicamente en las reglas de la CSM.</span><span class="sxs-lookup"><span data-stu-id="00a8c-237">The [**IncludedInCrawlScope**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscope) and [**IncludedInCrawlScopeEx**](/windows/desktop/api/Searchapi/nf-searchapi-isearchcrawlscopemanager-includedincrawlscopeex) methods determine whether the URL will be crawled based solely on the rules in the CSM.</span></span> <span data-ttu-id="00a8c-238">Puede haber otras razones por las que no se rastrea una dirección URL, como el bit FANCI que se establece (es decir, un usuario ha deshabilitado la indexación rápida en el cuadro de diálogo de propiedades de la carpeta).</span><span class="sxs-lookup"><span data-stu-id="00a8c-238">There can be other reasons that a URL is not crawled, such as the FANCI bit being set (that is, a user has disallowed fast indexing in the folder's Property dialog box.)</span></span>

 

<span data-ttu-id="00a8c-239">Si cree que se debe excluir una ruta de acceso de archivo, pero se muestra como se incluye, asegúrese de que las reglas de exclusión terminan en " <path> \\ \* ".</span><span class="sxs-lookup"><span data-stu-id="00a8c-239">If you believe that a file path should be excluded, but it is listed as included, be sure that exclusion rules end with "<path>\\\*".</span></span> <span data-ttu-id="00a8c-240">Si cree que se debe incluir una ruta de acceso de archivo o archivo pero no, asegúrese de comprobar la configuración de bits FANCI para el archivo o la ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="00a8c-240">If you believe that a file or file path should be included but it is not, be sure to check the FANCI bit setting for the file or path.</span></span> <span data-ttu-id="00a8c-241">Para ello, haga clic con el botón secundario en la ruta de acceso de archivo o archivo y seleccione **propiedades** y, a continuación, asegúrese de que la casilla **de verificación para la búsqueda rápida, permitir el servicio de indización para indizar esta carpeta** está activada.</span><span class="sxs-lookup"><span data-stu-id="00a8c-241">You can do this by right-clicking the file or file path and selecting **Properties**, then be sure the **For fast searching, allow Indexing Service to index this folder** checkbox is selected.</span></span> <span data-ttu-id="00a8c-242">Si el archivo o la ruta de acceso de archivo no se marcan aquí para la indexación, no se indexará aunque esté en una regla de inclusión.</span><span class="sxs-lookup"><span data-stu-id="00a8c-242">If the file or file path is not marked for indexing here, it will not be indexed even if it is in an inclusion rule.</span></span>

## <a name="related-topics"></a><span data-ttu-id="00a8c-243">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="00a8c-243">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="00a8c-244">**Referencia**</span><span class="sxs-lookup"><span data-stu-id="00a8c-244">**Reference**</span></span>
</dt> <dt>

[<span data-ttu-id="00a8c-245">**ISearchCrawlScopeManager**</span><span class="sxs-lookup"><span data-stu-id="00a8c-245">**ISearchCrawlScopeManager**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager)
</dt> <dt>

[<span data-ttu-id="00a8c-246">**ISearchCrawlScopeManager2**</span><span class="sxs-lookup"><span data-stu-id="00a8c-246">**ISearchCrawlScopeManager2**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchcrawlscopemanager2)
</dt> <dt>

[<span data-ttu-id="00a8c-247">**ISearchScopeRule**</span><span class="sxs-lookup"><span data-stu-id="00a8c-247">**ISearchScopeRule**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-isearchscoperule)
</dt> <dt>

[<span data-ttu-id="00a8c-248">**IEnumSearchScopeRules**</span><span class="sxs-lookup"><span data-stu-id="00a8c-248">**IEnumSearchScopeRules**</span></span>](/windows/desktop/api/Searchapi/nn-searchapi-ienumsearchscoperules)
</dt> <dt>

<span data-ttu-id="00a8c-249">**Vista**</span><span class="sxs-lookup"><span data-stu-id="00a8c-249">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="00a8c-250">Administración de raíces de búsqueda</span><span class="sxs-lookup"><span data-stu-id="00a8c-250">Managing Search Roots</span></span>](-search-3x-wds-extidx-csm-searchroots.md)
</dt> </dl>

 

 




