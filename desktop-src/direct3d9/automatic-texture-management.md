---
description: La administración de texturas es el proceso por el que se determinan las texturas que se necesitan para la representación en un momento dado y se garantiza que dichas texturas se cargan en la memoria de vídeo.
ms.assetid: ea6d64ee-f570-49eb-b5fd-67fcde3f8ddc
title: Administración automática de texturas (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d0eb14eede197661bc127a062229ebed31274ae8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103907437"
---
# <a name="automatic-texture-management-direct3d-9"></a><span data-ttu-id="6a5bc-103">Administración automática de texturas (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="6a5bc-103">Automatic Texture Management (Direct3D 9)</span></span>

<span data-ttu-id="6a5bc-104">La administración de texturas es el proceso por el que se determinan las texturas que se necesitan para la representación en un momento dado y se garantiza que dichas texturas se cargan en la memoria de vídeo.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-104">Texture management is the process of determining which textures are needed for rendering at a given time and ensuring that those textures are loaded into video memory.</span></span> <span data-ttu-id="6a5bc-105">Como con cualquier algoritmo, los esquemas de administración de texturas varían en complejidad, pero cualquier enfoque en la administración de texturas implica las siguientes tareas clave.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-105">As with any algorithm, texture management schemes vary in complexity, but any approach to texture management involves the following key tasks.</span></span>

-   <span data-ttu-id="6a5bc-106">Seguimiento de la cantidad de memoria de textura disponible.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-106">Tracking the amount of available texture memory.</span></span>
-   <span data-ttu-id="6a5bc-107">Calcular las texturas que se necesitan para la representación y cuáles no.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-107">Calculating which textures are needed for rendering, and which are not.</span></span>
-   <span data-ttu-id="6a5bc-108">Determinar qué recursos de textura existentes se pueden volver a cargar con otra imagen de textura y qué superficies deben destruirse y reemplazarse con nuevos recursos de textura.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-108">Determining which existing texture resources can be reloaded with another texture image, and which surfaces should be destroyed and replaced with new texture resources.</span></span>

<span data-ttu-id="6a5bc-109">Direct3D implementa la administración de texturas compatible con el sistema para asegurarse de que las texturas se cargan para un rendimiento óptimo.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-109">Direct3D implements system-supported texture management to ensure that textures are loaded for optimal performance.</span></span> <span data-ttu-id="6a5bc-110">Los recursos de textura que administra Direct3D se conocen como texturas administradas.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-110">Texture resources that Direct3D manages are referred to as managed textures.</span></span>

<span data-ttu-id="6a5bc-111">El administrador de textura realiza el seguimiento de las texturas con una marca de tiempo que identifica Cuándo se usó por última vez la textura.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-111">The texture manager tracks textures with a time-stamp that identifies when the texture was last used.</span></span> <span data-ttu-id="6a5bc-112">A continuación, usa un algoritmo usado menos recientemente para determinar qué texturas se deben quitar.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-112">It then uses a least-recently-used algorithm to determine which textures should be removed.</span></span> <span data-ttu-id="6a5bc-113">Las prioridades de textura se usan como disyuntores cuando dos texturas se destinan a la eliminación de la memoria.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-113">Texture priorities are used as tie breakers when two textures are targeted for removal from memory.</span></span> <span data-ttu-id="6a5bc-114">Si dos texturas tienen el mismo valor de prioridad, se quita la textura usada menos recientemente.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-114">If two textures have the same priority value, the least-recently-used texture is removed.</span></span> <span data-ttu-id="6a5bc-115">Sin embargo, si dos texturas tienen la misma marca de tiempo, primero se quita la textura que tiene una prioridad más baja.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-115">However, if two textures have the same time-stamp, the texture that has a lower priority is removed first.</span></span>

<span data-ttu-id="6a5bc-116">Cuando se crean, se solicita la administración automática de texturas para las superficies de textura.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-116">You request automatic texture management for texture surfaces when you create them.</span></span> <span data-ttu-id="6a5bc-117">Para recuperar una textura administrada en una aplicación de C++, cree un recurso de textura mediante una llamada a [**IDirect3DDevice9:: CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) y especifique el D3DPOOL \_ administrado para el parámetro Pool.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-117">To retrieve a managed texture in a C++ application, create a texture resource by calling [**IDirect3DDevice9::CreateTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-createtexture) and specifying the D3DPOOL\_MANAGED for the Pool parameter.</span></span> <span data-ttu-id="6a5bc-118">No se le permite especificar dónde desea que se cree la textura.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-118">You are not allowed to specify where you want the texture created.</span></span> <span data-ttu-id="6a5bc-119">No puede usar las \_ marcas D3DPOOL default o D3DPOOL \_ SYSTEMMEM al crear una textura administrada.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-119">You cannot use the D3DPOOL\_DEFAULT or D3DPOOL\_SYSTEMMEM flags when creating a managed texture.</span></span> <span data-ttu-id="6a5bc-120">Después de crear la textura administrada, puede llamar al método [**IDirect3DDevice9:: SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) para establecerla en una fase de la textura en cascada del dispositivo de representación.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-120">After creating the managed texture, you can call the [**IDirect3DDevice9::SetTexture**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-settexture) method to set it to a stage in the rendering device's texture cascade.</span></span>

<span data-ttu-id="6a5bc-121">Puede asignar una prioridad a las texturas administradas llamando al método [**IDirect3DResource9:: SetPriority**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dresource9-setpriority) para la superficie de textura.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-121">You can assign a priority to managed textures by calling the [**IDirect3DResource9::SetPriority**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3dresource9-setpriority) method for the texture surface.</span></span>

<span data-ttu-id="6a5bc-122">Direct3D descarga automáticamente las texturas en la memoria de vídeo según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-122">Direct3D automatically downloads textures into video memory as needed.</span></span> <span data-ttu-id="6a5bc-123">El sistema puede almacenar en caché las texturas administradas en la memoria de vídeo local o no local, en función de la disponibilidad de memoria de vídeo no local u otros factores.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-123">The system might cache managed textures in local or nonlocal video memory, depending on the availability of nonlocal video memory or other factors.</span></span> <span data-ttu-id="6a5bc-124">La ubicación de la memoria caché de las texturas administradas no se comunica con la aplicación, ni tampoco es necesaria para usar la administración de texturas automática.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-124">The cache location of your managed textures is not communicated to your application, nor is this information required to use automatic texture management.</span></span> <span data-ttu-id="6a5bc-125">Si la aplicación usa más texturas de las que caben en la memoria de vídeo, Direct3D quita las texturas anteriores de la memoria de vídeo para dejar espacio a las nuevas texturas.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-125">If your application uses more textures than can fit in video memory, Direct3D removes older textures from video memory to make room for the new textures.</span></span> <span data-ttu-id="6a5bc-126">Si vuelve a usar una textura quitada, el sistema utiliza la superficie de textura de memoria del sistema original para volver a cargar la textura en la memoria caché de la memoria de vídeo.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-126">If you use a removed texture again, the system uses the original system-memory texture surface to reload the texture in the video-memory cache.</span></span> <span data-ttu-id="6a5bc-127">Aunque es necesario volver a cargar la textura, también se reduce el rendimiento de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-127">Although reloading the texture is necessary, it also decreases the application's performance.</span></span>

<span data-ttu-id="6a5bc-128">Puede modificar dinámicamente la copia de memoria del sistema original de la textura mediante la actualización o el bloqueo del recurso de textura.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-128">You can dynamically modify the original system-memory copy of the texture by updating or locking the texture resource.</span></span> <span data-ttu-id="6a5bc-129">Cuando el sistema detecta una superficie sucia: una vez completada una actualización o cuando se desbloquea la superficie, el administrador de textura actualiza automáticamente la copia de la textura de la memoria de vídeo.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-129">When the system detects a dirty surface - after an update is completed, or when the surface is unlocked - the texture manager automatically updates the video-memory copy of the texture.</span></span> <span data-ttu-id="6a5bc-130">El impacto en el rendimiento en el que se incurre es similar a la recarga de una textura quitada.</span><span class="sxs-lookup"><span data-stu-id="6a5bc-130">The performance hit incurred is similar to reloading a removed texture.</span></span>

<span data-ttu-id="6a5bc-131">Al escribir un nuevo nivel en un juego, es posible que la aplicación tenga que vaciar todas las texturas administradas de la memoria de vídeo (llamando a [**IDirect3DDevice9:: EvictManagedResources**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-evictmanagedresources)).</span><span class="sxs-lookup"><span data-stu-id="6a5bc-131">When entering a new level in a game, your application might need to flush all managed textures from video memory (by calling [**IDirect3DDevice9::EvictManagedResources**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-evictmanagedresources)).</span></span>

<span data-ttu-id="6a5bc-132">Para obtener más información sobre la administración de recursos, vea [administrar recursos (Direct3D 9)](managing-resources.md).</span><span class="sxs-lookup"><span data-stu-id="6a5bc-132">For more information about resource management, see [Managing Resources (Direct3D 9)](managing-resources.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="6a5bc-133">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="6a5bc-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="6a5bc-134">Texturas de Direct3D</span><span class="sxs-lookup"><span data-stu-id="6a5bc-134">Direct3D Textures</span></span>](direct3d-textures.md)
</dt> </dl>

 

 
