---
description: En este tema se describe cómo crear, identificar, establecer y eliminar temporizadores.
ms.assetid: 509a6fc4-ddee-4ff4-88a2-25dad4c48c2f
title: Acerca de los temporizadores
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b3163dbfd5357de516e0202665cd76d017335593
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104003065"
---
# <a name="about-timers"></a><span data-ttu-id="0ad3b-103">Acerca de los temporizadores</span><span class="sxs-lookup"><span data-stu-id="0ad3b-103">About Timers</span></span>

<span data-ttu-id="0ad3b-104">En este tema se describe cómo crear, identificar, establecer y eliminar temporizadores.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-104">This topic describes how to create, identify, set, and delete timers.</span></span> <span data-ttu-id="0ad3b-105">Una aplicación utiliza un temporizador para programar un evento para una ventana después de que haya transcurrido un tiempo especificado.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-105">An application uses a timer to schedule an event for a window after a specified time has elapsed.</span></span> <span data-ttu-id="0ad3b-106">Cada vez que transcurre el intervalo especificado (o el valor de tiempo de espera) para un temporizador, el sistema notifica a la ventana asociada con el temporizador.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-106">Each time the specified interval (or time-out value) for a timer elapses, the system notifies the window associated with the timer.</span></span> <span data-ttu-id="0ad3b-107">Dado que la precisión de un temporizador depende de la tasa de reloj del sistema y de la frecuencia con la que la aplicación recupera mensajes de la cola de mensajes, el valor de tiempo de espera solo es aproximado.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-107">Because a timer's accuracy depends on the system clock rate and how often the application retrieves messages from the message queue, the time-out value is only approximate.</span></span>

<span data-ttu-id="0ad3b-108">En este tema se incluyen las secciones siguientes.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-108">This topic includes the following sections.</span></span>

-   [<span data-ttu-id="0ad3b-109">Operaciones de temporizador</span><span class="sxs-lookup"><span data-stu-id="0ad3b-109">Timer Operations</span></span>](#timer-operations)
-   [<span data-ttu-id="0ad3b-110">Temporizador de alta resolución</span><span class="sxs-lookup"><span data-stu-id="0ad3b-110">High-Resolution Timer</span></span>](#high-resolution-timer)
-   [<span data-ttu-id="0ad3b-111">Objetos de temporizador de espera</span><span class="sxs-lookup"><span data-stu-id="0ad3b-111">Waitable Timer Objects</span></span>](#waitable-timer-objects)
-   [<span data-ttu-id="0ad3b-112">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="0ad3b-112">Related topics</span></span>](#related-topics)

## <a name="timer-operations"></a><span data-ttu-id="0ad3b-113">Operaciones de temporizador</span><span class="sxs-lookup"><span data-stu-id="0ad3b-113">Timer Operations</span></span>

<span data-ttu-id="0ad3b-114">Las aplicaciones crean temporizadores mediante la función [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer) .</span><span class="sxs-lookup"><span data-stu-id="0ad3b-114">Applications create timers by using the [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer) function.</span></span> <span data-ttu-id="0ad3b-115">Un nuevo temporizador inicia el tiempo del intervalo en cuanto se crea.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-115">A new timer starts timing the interval as soon as it is created.</span></span> <span data-ttu-id="0ad3b-116">Una aplicación puede cambiar el valor de tiempo de espera de un temporizador mediante **SetTimer** y puede destruir un temporizador mediante la función [**KillTimer**](/windows/win32/api/winuser/nf-winuser-killtimer) .</span><span class="sxs-lookup"><span data-stu-id="0ad3b-116">An application can change a timer's time-out value by using **SetTimer** and can destroy a timer by using the [**KillTimer**](/windows/win32/api/winuser/nf-winuser-killtimer) function.</span></span> <span data-ttu-id="0ad3b-117">Para usar los recursos del sistema de forma eficaz, las aplicaciones deben destruir temporizadores que ya no sean necesarios.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-117">To use system resources efficiently, applications should destroy timers that are no longer necessary.</span></span>

<span data-ttu-id="0ad3b-118">Cada temporizador tiene un identificador único.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-118">Each timer has a unique identifier.</span></span> <span data-ttu-id="0ad3b-119">Al crear un temporizador, una aplicación puede especificar un identificador o hacer que el sistema cree un valor único.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-119">When creating a timer, an application can either specify an identifier or have the system create a unique value.</span></span> <span data-ttu-id="0ad3b-120">El primer parámetro de un mensaje del [**\_ temporizador de WM**](wm-timer.md) contiene el identificador del temporizador que envió el mensaje.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-120">The first parameter of a [**WM\_TIMER**](wm-timer.md) message contains the identifier of the timer that posted the message.</span></span>

<span data-ttu-id="0ad3b-121">Si especifica un identificador de ventana en la llamada a [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer), la aplicación asocia el temporizador a esa ventana.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-121">If you specify a window handle in the call to [**SetTimer**](/windows/win32/api/winuser/nf-winuser-settimer), the application associates the timer with that window.</span></span> <span data-ttu-id="0ad3b-122">Cada vez que transcurre el valor de tiempo de espera del temporizador, el sistema envía un mensaje del [**\_ temporizador de WM**](wm-timer.md) a la ventana asociada con el temporizador.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-122">Whenever the time-out value for the timer elapses, the system posts a [**WM\_TIMER**](wm-timer.md) message to the window associated with the timer.</span></span> <span data-ttu-id="0ad3b-123">Si no se especifica ningún identificador de ventana en la llamada a **SetTimer**, la aplicación que creó el temporizador debe supervisar su cola de mensajes para los mensajes de **\_ temporizador de WM** y enviarlos a la ventana correspondiente.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-123">If no window handle is specified in the call to **SetTimer**, the application that created the timer must monitor its message queue for **WM\_TIMER** messages and dispatch them to the appropriate window.</span></span> <span data-ttu-id="0ad3b-124">Si se especifica una función de devolución de llamada [**TimerProc**](/windows/win32/api/winuser/nc-winuser-timerproc) , el procedimiento de ventana predeterminado llama a la función de devolución de llamada cuando procesa el **\_ temporizador de WM**.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-124">If you specify a [**TimerProc**](/windows/win32/api/winuser/nc-winuser-timerproc) callback function, the default window procedure calls the callback function when it processes **WM\_TIMER**.</span></span> <span data-ttu-id="0ad3b-125">Por lo tanto, debe enviar mensajes en el subproceso de llamada, incluso si usa **TimerProc** en lugar de procesar el **\_ temporizador de WM**.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-125">Therefore, you need to dispatch messages in the calling thread, even when you use **TimerProc** instead of processing **WM\_TIMER**.</span></span>

<span data-ttu-id="0ad3b-126">Si necesita recibir una notificación cuando transcurra un temporizador, use un temporizador que espere.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-126">If you need to be notified when a timer elapses, use a waitable timer.</span></span> <span data-ttu-id="0ad3b-127">Para obtener más información, vea [objetos de temporizador](/windows/desktop/Sync/waitable-timer-objects)que se van a esperar.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-127">For more information, see [Waitable Timer Objects](/windows/desktop/Sync/waitable-timer-objects).</span></span>

## <a name="high-resolution-timer"></a><span data-ttu-id="0ad3b-128">Temporizador de High-Resolution</span><span class="sxs-lookup"><span data-stu-id="0ad3b-128">High-Resolution Timer</span></span>

<span data-ttu-id="0ad3b-129">Un contador es un término general que se usa en la programación para hacer referencia a una variable de incremento.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-129">A counter is a general term used in programming to refer to an incrementing variable.</span></span> <span data-ttu-id="0ad3b-130">Algunos sistemas incluyen un contador de rendimiento de alta resolución que proporciona tiempos transcurridos de alta resolución.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-130">Some systems include a high-resolution performance counter that provides high-resolution elapsed times.</span></span>

<span data-ttu-id="0ad3b-131">Si existe un contador de rendimiento de alta resolución en el sistema, puede usar la función [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) para expresar la frecuencia, en recuentos por segundo.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-131">If a high-resolution performance counter exists on the system, you can use the [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) function to express the frequency, in counts per second.</span></span> <span data-ttu-id="0ad3b-132">El valor del recuento depende del procesador.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-132">The value of the count is processor dependent.</span></span> <span data-ttu-id="0ad3b-133">En algunos procesadores, por ejemplo, el recuento puede ser la velocidad del ciclo del reloj del procesador.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-133">On some processors, for example, the count might be the cycle rate of the processor clock.</span></span>

<span data-ttu-id="0ad3b-134">La función [**QueryPerformanceCounter**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancecounter) recupera el valor actual del contador de rendimiento de alta resolución.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-134">The [**QueryPerformanceCounter**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancecounter) function retrieves the current value of the high-resolution performance counter.</span></span> <span data-ttu-id="0ad3b-135">Al llamar a esta función al principio y al final de una sección de código, una aplicación utiliza esencialmente el contador como un temporizador de alta resolución.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-135">By calling this function at the beginning and end of a section of code, an application essentially uses the counter as a high-resolution timer.</span></span> <span data-ttu-id="0ad3b-136">Por ejemplo, supongamos que [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) indica que la frecuencia del contador de rendimiento de alta resolución es 50.000 recuentos por segundo.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-136">For example, suppose that [**QueryPerformanceFrequency**](/windows/desktop/api/profileapi/nf-profileapi-queryperformancefrequency) indicates that the frequency of the high-resolution performance counter is 50,000 counts per second.</span></span> <span data-ttu-id="0ad3b-137">Si la aplicación llama a **QueryPerformanceCounter** inmediatamente antes y inmediatamente después de la sección de código a la que se va a establecer el tiempo, los valores del contador podrían ser 1500 y 3500, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-137">If the application calls **QueryPerformanceCounter** immediately before and immediately after the section of code to be timed, the counter values might be 1500 counts and 3500 counts, respectively.</span></span> <span data-ttu-id="0ad3b-138">Estos valores indicarían que transcurrió .04 segundos (recuentos de 2000) mientras se ejecutaba el código.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-138">These values would indicate that .04 seconds (2000 counts) elapsed while the code executed.</span></span>

## <a name="waitable-timer-objects"></a><span data-ttu-id="0ad3b-139">Objetos de temporizador de espera</span><span class="sxs-lookup"><span data-stu-id="0ad3b-139">Waitable Timer Objects</span></span>

<span data-ttu-id="0ad3b-140">Un objeto de temporizador que se pueda esperar es un objeto de sincronización cuyo estado está establecido en señalado cuando llega el momento de vencimiento especificado.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-140">A waitable timer object is a synchronization object whose state is set to signaled when the specified due time arrives.</span></span> <span data-ttu-id="0ad3b-141">Hay dos tipos de temporizadores de espera que se pueden crear: restablecimiento manual y sincronización.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-141">There are two types of waitable timers that can be created: manual-reset and synchronization.</span></span> <span data-ttu-id="0ad3b-142">Un temporizador de cualquier tipo también puede ser un temporizador periódico.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-142">A timer of either type can also be a periodic timer.</span></span>

<span data-ttu-id="0ad3b-143">Un subproceso utiliza la función [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) o [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) para crear un objeto de temporizador.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-143">A thread uses the [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) or [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) function to create a timer object.</span></span> <span data-ttu-id="0ad3b-144">El subproceso de creación especifica si el temporizador es un temporizador de restablecimiento manual o un temporizador de sincronización.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-144">The creating thread specifies whether the timer is a manual-reset timer or a synchronization timer.</span></span> <span data-ttu-id="0ad3b-145">El subproceso de creación puede especificar un nombre para el objeto de temporizador.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-145">The creating thread can specify a name for the timer object.</span></span> <span data-ttu-id="0ad3b-146">Los subprocesos de otros procesos pueden abrir un identificador de un temporizador existente especificando su nombre en una llamada a la función [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) .</span><span class="sxs-lookup"><span data-stu-id="0ad3b-146">Threads in other processes can open a handle to an existing timer by specifying its name in a call to the [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) function.</span></span> <span data-ttu-id="0ad3b-147">Cualquier subproceso con un identificador a un objeto de temporizador puede utilizar una de las funciones de espera para esperar a que el estado del temporizador se establezca en señalado.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-147">Any thread with a handle to a timer object can use one of the wait functions to wait for the timer state to be set to signaled.</span></span>

<span data-ttu-id="0ad3b-148">Para obtener más información sobre el uso de objetos de temporizador que se esperan para la sincronización de subprocesos, vea [objetos de temporizador](/windows/desktop/Sync/waitable-timer-objects)que se esperan.</span><span class="sxs-lookup"><span data-stu-id="0ad3b-148">For more information about using waitable timer objects for thread synchronization, see [Waitable Timer Objects](/windows/desktop/Sync/waitable-timer-objects).</span></span>

## <a name="related-topics"></a><span data-ttu-id="0ad3b-149">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="0ad3b-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0ad3b-150">Usar temporizadores</span><span class="sxs-lookup"><span data-stu-id="0ad3b-150">Using Timers</span></span>](using-timers.md)
</dt> </dl>

 

 
