---
title: Recorte (DirectComposition)
description: En este tema se describe la compatibilidad de Microsoft DirectComposition con los objetos visuales de recorte.
ms.assetid: B6E0D8F5-B6B9-40CC-B079-850AC8F2D538
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f4feb537dfb41053dd1099eca7f122b3284dce95
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/10/2020
ms.locfileid: "104421881"
---
# <a name="clipping-directcomposition"></a><span data-ttu-id="89675-103">Recorte (DirectComposition)</span><span class="sxs-lookup"><span data-stu-id="89675-103">Clipping (DirectComposition)</span></span>

> [!NOTE]
> <span data-ttu-id="89675-104">En el caso de las aplicaciones de Windows 10, se recomienda usar las API de Windows. UI. Composition en lugar de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="89675-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="89675-105">Para obtener más información, consulte [modernice su aplicación de escritorio con el nivel de objetos visuales](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="89675-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="89675-106">El recorte proporciona una manera de revelar solo una parte de un árbol visual o visual limitando la representación del árbol visual o del árbol a un área rectangular determinada.</span><span class="sxs-lookup"><span data-stu-id="89675-106">Clipping provides a way to reveal only a portion of a visual or visual tree by limiting the rendering of the visual or tree to a particular rectangular area.</span></span> <span data-ttu-id="89675-107">En este tema se describe la compatibilidad de Microsoft DirectComposition con los objetos visuales de recorte.</span><span class="sxs-lookup"><span data-stu-id="89675-107">This topic describes Microsoft DirectComposition support for clipping visuals.</span></span> <span data-ttu-id="89675-108">Se incluyen las secciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="89675-108">It includes the following sections:</span></span>

-   [<span data-ttu-id="89675-109">Rectángulo de recorte</span><span class="sxs-lookup"><span data-stu-id="89675-109">Clip rectangle</span></span>](#clip-rectangle)
-   [<span data-ttu-id="89675-110">Clip (objeto)</span><span class="sxs-lookup"><span data-stu-id="89675-110">Clip object</span></span>](#clip-object)
-   [<span data-ttu-id="89675-111">Rectángulo de recorte animado</span><span class="sxs-lookup"><span data-stu-id="89675-111">Animated clip rectangle</span></span>](#animated-clip-rectangle)
-   [<span data-ttu-id="89675-112">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="89675-112">Related topics</span></span>](#related-topics)

## <a name="clip-rectangle"></a><span data-ttu-id="89675-113">Rectángulo de recorte</span><span class="sxs-lookup"><span data-stu-id="89675-113">Clip rectangle</span></span>

<span data-ttu-id="89675-114">Un objeto visual tiene una propiedad clip que define una región rectangular, o un *rectángulo de recorte*, dentro del contenido del mapa de bits del objeto visual.</span><span class="sxs-lookup"><span data-stu-id="89675-114">A visual object has a Clip property that defines a rectangular region, or *clip rectangle*, within the visual's bitmap content.</span></span> <span data-ttu-id="89675-115">Cuando el visual se representa en la pantalla, solo la parte del contenido del mapa de bits que se encuentra dentro del rectángulo de recorte se dibuja en la pantalla, mientras que el contenido que se extiende fuera del rectángulo de recorte se recorta (no se dibuja).</span><span class="sxs-lookup"><span data-stu-id="89675-115">When the visual is rendered to the screen, only the portion of the bitmap content that is inside the clip rectangle is drawn on the screen, while the content that extends outside the clip rectangle is clipped (not drawn).</span></span> <span data-ttu-id="89675-116">De forma predeterminada, la propiedad clip incluye todo el contenido del mapa de bits.</span><span class="sxs-lookup"><span data-stu-id="89675-116">By default, the Clip property includes all bitmap content.</span></span>

<span data-ttu-id="89675-117">La propiedad clip de un elemento visual se aplica a todos los objetos visuales secundarios y descendientes.</span><span class="sxs-lookup"><span data-stu-id="89675-117">A visual's Clip property applies to all child and descendent visuals.</span></span> <span data-ttu-id="89675-118">Es decir, cualquier contenido secundario o descendiente que se encuentre fuera de los límites del rectángulo de recorte del elemento primario también se recorta.</span><span class="sxs-lookup"><span data-stu-id="89675-118">In other words, any child or descendent content that falls outside the bounds of the parent's clip rectangle is also clipped.</span></span>

<span data-ttu-id="89675-119">DirectComposition aplica la propiedad clip antes de aplicar las propiedades de transformación OffsetX, offsetY y 2D, pero después de aplicar las propiedades Effect y transformación 3D.</span><span class="sxs-lookup"><span data-stu-id="89675-119">DirectComposition applies the Clip property before applying the OffsetX, OffsetY, and 2D Transform properties, but after applying the Effect and 3D Transform properties.</span></span> <span data-ttu-id="89675-120">Esto significa que las transformaciones 2D, OffsetX y PosiciónInicial, afectarán tanto al contenido visual como al rectángulo de recorte.</span><span class="sxs-lookup"><span data-stu-id="89675-120">This means that 2D Transforms, OffsetX, and OffsetY, will affect both the visual content, and the clip rectangle.</span></span> <span data-ttu-id="89675-121">Mientras que las transformaciones y los efectos 3D no se aplicarán al rectángulo de recorte.</span><span class="sxs-lookup"><span data-stu-id="89675-121">Whereas 3D transforms and effects will not apply to the clip rectangle.</span></span>

<span data-ttu-id="89675-122">Por ejemplo, al aplicar un desplazamiento o una transformación 2D, el rectángulo de recorte se ve afectado por la matriz de transformación.</span><span class="sxs-lookup"><span data-stu-id="89675-122">For example, when applying an offset or 2D transform, the clip rectangle is affected by the transformation matrix.</span></span> <span data-ttu-id="89675-123">Por tanto, si se agrega un desplazamiento y un giro 2D (45 grados) junto con un rectángulo de recorte de esquinas redondeadas, se producirá lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="89675-123">So adding an offset and a 2D rotate (45 degrees) along with a rounded corner clip rectangle will result in this:</span></span>

![diagrama que muestra el efecto de una transformación 2D en un rectángulo de recorte.](images/clipping2dtransform.png)

<span data-ttu-id="89675-125">Al aplicar una transformación 3D "dentro" del rectángulo de recorte, el rectángulo de recorte no se ve afectado por la matriz de transformación.</span><span class="sxs-lookup"><span data-stu-id="89675-125">When applying a 3D transformation “within” the clip rectangle, the clip rectangle is not affected by the transformation matrix.</span></span> <span data-ttu-id="89675-126">Incluso cuando se aplica un giro alrededor del eje Z (en realidad, lo mismo que el ejemplo anterior), el siguiente diagrama es el resultado:</span><span class="sxs-lookup"><span data-stu-id="89675-126">Even when applying a rotation around the Z axis (effectively the same as the previous example), the following diagram is the result:</span></span>

![diagrama que muestra que una transformación 3D no afecta al clip del rectángulo (el visual gira dentro del clip).](images/clipping3dtransform.png)

<span data-ttu-id="89675-128">Tenga en cuenta que el visual girado en el clip porque la matriz 3D no se aplica al propio clip.</span><span class="sxs-lookup"><span data-stu-id="89675-128">Note that the visual rotated within the clip because the 3D matrix is not applied to the clip itself.</span></span>

<span data-ttu-id="89675-129">Si la propiedad clip está establecida en un rectángulo vacío, el visual se recorta completamente; es decir, el elemento visual se incluye en el árbol visual, pero no representa nada.</span><span class="sxs-lookup"><span data-stu-id="89675-129">If the Clip property is set to an empty rectangle, the visual is fully clipped; that is, the visual is included in the visual tree, but it does not render anything.</span></span> <span data-ttu-id="89675-130">Si no desea incluir un visual determinado en una composición, quite el visual del árbol visual en lugar de establecer un rectángulo de recorte vacío.</span><span class="sxs-lookup"><span data-stu-id="89675-130">If you do not want to include a particular visual in a composition, remove the visual from the visual tree instead of setting an empty clip rectangle.</span></span> <span data-ttu-id="89675-131">Quitar el resultado visual mejora el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="89675-131">Removing the visual results in better performance.</span></span>

<span data-ttu-id="89675-132">La propiedad clip de un visual se establece mediante el método [**IDCompositionVisual:: SetClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) .</span><span class="sxs-lookup"><span data-stu-id="89675-132">You set the Clip property of a visual by using the [**IDCompositionVisual::SetClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) method.</span></span> <span data-ttu-id="89675-133">Este método incluye sobrecargas que permiten establecer el valor de la propiedad clip en un rectángulo estático o en un objeto clip.</span><span class="sxs-lookup"><span data-stu-id="89675-133">This method includes overloads that enable you to set the value of the Clip property to a static rectangle or to a clip object.</span></span> <span data-ttu-id="89675-134">Use un rectángulo estático si no necesita cambiar las dimensiones del rectángulo de recorte mientras dure el visual.</span><span class="sxs-lookup"><span data-stu-id="89675-134">Use a static rectangle if you do not need to change the dimensions of the clip rectangle during the lifetime of the visual.</span></span> <span data-ttu-id="89675-135">Si necesita cambiar las dimensiones o animar el rectángulo de recorte, use un objeto de clip.</span><span class="sxs-lookup"><span data-stu-id="89675-135">If you do need to change the dimensions or animate the clip rectangle, use a clip object.</span></span>

## <a name="clip-object"></a><span data-ttu-id="89675-136">Clip (objeto)</span><span class="sxs-lookup"><span data-stu-id="89675-136">Clip object</span></span>

<span data-ttu-id="89675-137">Un objeto de recorte es un objeto de modelo de objetos componentes (COM) que representa un rectángulo de recorte.</span><span class="sxs-lookup"><span data-stu-id="89675-137">A clip object is a Component Object Model (COM) object that represents a clip rectangle.</span></span> <span data-ttu-id="89675-138">Cree un objeto clip mediante el método [**IDCompositionDevice:: CreateRectangleClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrectangleclip) y, a continuación, use la interfaz [**IDCompositionRectangleClip**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrectangleclip) del objeto para establecer las propiedades del objeto.</span><span class="sxs-lookup"><span data-stu-id="89675-138">You create a clip object by using the [**IDCompositionDevice::CreateRectangleClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createrectangleclip) method, and then use the object's [**IDCompositionRectangleClip**](/windows/win32/api/dcomp/nn-dcomp-idcompositionrectangleclip) interface to set the properties of the object.</span></span> <span data-ttu-id="89675-139">Un objeto de recorte recién creado tiene los valores mínimos posibles para las propiedades Left y Top, y los valores máximos posibles para las propiedades derecha e inferior, lo que lo convierte en un objeto de clip no operativo.</span><span class="sxs-lookup"><span data-stu-id="89675-139">A newly created clip object has the minimum possible values for the Left and Top properties, and the maximum possible values for the Right and Bottom properties, effectively making it a no-op clip object.</span></span> <span data-ttu-id="89675-140">En otras palabras, el objeto representa un rectángulo de recorte que incluiría todo el contenido del mapa de bits de un objeto visual.</span><span class="sxs-lookup"><span data-stu-id="89675-140">In other words, the object represents a clip rectangle that would include the entire bitmap content of a visual.</span></span>

<span data-ttu-id="89675-141">Un objeto clip incluye un conjunto de propiedades que le permiten especificar esquinas redondeadas para el objeto clip.</span><span class="sxs-lookup"><span data-stu-id="89675-141">A clip object includes a set of properties that enable you to specify rounded corners for the clip object.</span></span> <span data-ttu-id="89675-142">Las propiedades permiten establecer el radio x e y de cada esquina del objeto de recorte.</span><span class="sxs-lookup"><span data-stu-id="89675-142">The properties enable you to set the x radius and y radius of each corner of the clipping object.</span></span>

## <a name="animated-clip-rectangle"></a><span data-ttu-id="89675-143">Rectángulo de recorte animado</span><span class="sxs-lookup"><span data-stu-id="89675-143">Animated clip rectangle</span></span>

<span data-ttu-id="89675-144">Puede animar un rectángulo de recorte aplicando objetos de animación a las propiedades izquierda, superior, derecha e inferior de un objeto de clip.</span><span class="sxs-lookup"><span data-stu-id="89675-144">You can animate a clip rectangle by applying animation objects to the Left, Top, Right, and Bottom properties of a clip object.</span></span> <span data-ttu-id="89675-145">Use el método sobrecargado [**IDCompositionVisual:: SetClip (IDCompositionClip)**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(idcompositionclip)) para aplicar el rectángulo de recorte animado a la propiedad clip de un visual.</span><span class="sxs-lookup"><span data-stu-id="89675-145">Use the [**IDCompositionVisual::SetClip(IDCompositionClip)**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(idcompositionclip)) overloaded method to apply the animated clip rectangle to the Clip property of a visual.</span></span>

<span data-ttu-id="89675-146">Para obtener más información sobre los objetos de animación, vea [animación](animation.md).</span><span class="sxs-lookup"><span data-stu-id="89675-146">For more information about animation objects, see [Animation](animation.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="89675-147">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="89675-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="89675-148">Conceptos de DirectComposition</span><span class="sxs-lookup"><span data-stu-id="89675-148">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> <dt>

[<span data-ttu-id="89675-149">Cómo recortar con un objeto de recorte de rectángulo</span><span class="sxs-lookup"><span data-stu-id="89675-149">How to Clip with a Rectangle Clip Object</span></span>](how-to--set-the-clip-rectangle-for-a-visual.md)
</dt> </dl>

 

 
