---
description: Validar la cadena de certificados
ms.assetid: e0c36f04-1694-40d8-94a1-06ee7de08777
title: Validar la cadena de certificados
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 13436513ae9199feb7ba5fcba399537da198ba85
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104277586"
---
# <a name="validating-the-certificate-chain"></a><span data-ttu-id="62b03-103">Validar la cadena de certificados</span><span class="sxs-lookup"><span data-stu-id="62b03-103">Validating the Certificate Chain</span></span>

<span data-ttu-id="62b03-104">En este tema se describe cómo validar la cadena de certificados del controlador cuando se usa el protocolo de protección de la salida certificada (COPP).</span><span class="sxs-lookup"><span data-stu-id="62b03-104">This topic describes how to validate the driver's certificate chain when using Certified Output Protection Protocol (COPP).</span></span>

<span data-ttu-id="62b03-105">La cadena de certificados del controlador gráfico es un documento XML.</span><span class="sxs-lookup"><span data-stu-id="62b03-105">The graphic driver's certificate chain is an XML document.</span></span> <span data-ttu-id="62b03-106">La cadena de certificados contiene tres certificados.</span><span class="sxs-lookup"><span data-stu-id="62b03-106">The certificate chain contains three certificates.</span></span> <span data-ttu-id="62b03-107">El primer certificado se denomina *certificado de hoja* y es el certificado COPP del controlador.</span><span class="sxs-lookup"><span data-stu-id="62b03-107">The first certificate is called the *leaf certificate*, and is the driver's COPP certificate.</span></span> <span data-ttu-id="62b03-108">El siguiente certificado es el certificado de firma del proveedor de hardware independiente (IHV).</span><span class="sxs-lookup"><span data-stu-id="62b03-108">The next certificate is the signing certificate of the Independent Hardware Vendor (IHV).</span></span> <span data-ttu-id="62b03-109">El último certificado es el certificado de firma de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="62b03-109">The last certificate is Microsoft's signing certificate.</span></span> <span data-ttu-id="62b03-110">Para asegurarse de que el controlador de gráficos es un dispositivo COPP legítimo, la aplicación debe validar los tres certificados.</span><span class="sxs-lookup"><span data-stu-id="62b03-110">To ensure that the graphics driver is a legitimate COPP device, the application must validate all three of these certificates.</span></span> <span data-ttu-id="62b03-111">Un programa malintencionado puede impedir que COPP funcione si una aplicación no valida correctamente los certificados de la cadena.</span><span class="sxs-lookup"><span data-stu-id="62b03-111">A malicious program can prevent COPP from working if an application does not correctly validate the certificates in the chain.</span></span>

<span data-ttu-id="62b03-112">Las cadenas de certificados COPP utilizan el juego de caracteres UTF-8.</span><span class="sxs-lookup"><span data-stu-id="62b03-112">COPP certificate chains use the UTF-8 character set.</span></span> <span data-ttu-id="62b03-113">Los datos binarios de los certificados, como la clave pública RSA, se codifican en Base64 y se almacenan en orden Big-Endian.</span><span class="sxs-lookup"><span data-stu-id="62b03-113">Binary data in the certificates, such as the RSA public key, are base64-encoded and stored in big-endian order.</span></span> <span data-ttu-id="62b03-114">(*Big-Endian* significa que el byte más significativo se almacena en la ubicación de memoria con la dirección más baja).</span><span class="sxs-lookup"><span data-stu-id="62b03-114">(*Big-endian* means that the most significant byte is stored in the memory location with the lowest address.)</span></span>

<span data-ttu-id="62b03-115">Algunos elementos de un certificado contienen valores booleanos para indicar que existe una característica del certificado.</span><span class="sxs-lookup"><span data-stu-id="62b03-115">Some elements within a certificate contain Boolean values to denote that a feature of the certificate exists.</span></span> <span data-ttu-id="62b03-116">Si la característica existe, el valor del elemento secundario correspondiente se establece en 1.</span><span class="sxs-lookup"><span data-stu-id="62b03-116">If the feature exists, the corresponding child element value is set to 1.</span></span> <span data-ttu-id="62b03-117">Si una característica no está presente, ese elemento secundario no está presente en el certificado.</span><span class="sxs-lookup"><span data-stu-id="62b03-117">If a feature is not present, that child element is not present in the certificate.</span></span>

### <a name="xml-element-definitions"></a><span data-ttu-id="62b03-118">Definiciones de elementos XML</span><span class="sxs-lookup"><span data-stu-id="62b03-118">XML Element Definitions</span></span>

<span data-ttu-id="62b03-119">A continuación se enumeran las definiciones de los elementos del esquema de certificado:</span><span class="sxs-lookup"><span data-stu-id="62b03-119">The following are definitions for elements in the certificate schema:</span></span>

-   <span data-ttu-id="62b03-120">**CertificateCollection**.</span><span class="sxs-lookup"><span data-stu-id="62b03-120">**CertificateCollection**.</span></span> <span data-ttu-id="62b03-121">Elemento raíz del documento XML.</span><span class="sxs-lookup"><span data-stu-id="62b03-121">The root element of the XML document.</span></span> <span data-ttu-id="62b03-122">Contiene elementos de certificado, uno para cada certificado de la cadena.</span><span class="sxs-lookup"><span data-stu-id="62b03-122">It contains Certificate elements, one for each certificate in the chain.</span></span>
-   <span data-ttu-id="62b03-123">**Certificado**.</span><span class="sxs-lookup"><span data-stu-id="62b03-123">**Certificate**.</span></span> <span data-ttu-id="62b03-124">Contiene un certificado.</span><span class="sxs-lookup"><span data-stu-id="62b03-124">Contains one certificate.</span></span> <span data-ttu-id="62b03-125">Este elemento contiene datos y elementos de firma.</span><span class="sxs-lookup"><span data-stu-id="62b03-125">This element contains Data and Signature elements.</span></span>
-   <span data-ttu-id="62b03-126">**Data**.</span><span class="sxs-lookup"><span data-stu-id="62b03-126">**Data**.</span></span> <span data-ttu-id="62b03-127">Contiene información sobre el certificado.</span><span class="sxs-lookup"><span data-stu-id="62b03-127">Contains information about the certificate.</span></span> <span data-ttu-id="62b03-128">En concreto, contiene la clave pública y el tipo del certificado.</span><span class="sxs-lookup"><span data-stu-id="62b03-128">In particular, it contains the certificate's public key and type.</span></span> <span data-ttu-id="62b03-129">El elemento de datos contiene los siguientes elementos secundarios:</span><span class="sxs-lookup"><span data-stu-id="62b03-129">The Data element contains the following child elements:</span></span>
    -   <span data-ttu-id="62b03-130">**PublicKey**.</span><span class="sxs-lookup"><span data-stu-id="62b03-130">**PublicKey**.</span></span> <span data-ttu-id="62b03-131">Contiene la clave pública RSA del certificado.</span><span class="sxs-lookup"><span data-stu-id="62b03-131">Contains the certificate's RSA public key.</span></span> <span data-ttu-id="62b03-132">El elemento PublicKey contiene un elemento KeyValue, que contiene un elemento RSAKeyValue.</span><span class="sxs-lookup"><span data-stu-id="62b03-132">The PublicKey element contains a KeyValue element, which contains an RSAKeyValue element.</span></span> <span data-ttu-id="62b03-133">El elemento RSAKeyValue tiene dos elementos secundarios, el módulo y el exponente, y estos definen la clave pública.</span><span class="sxs-lookup"><span data-stu-id="62b03-133">The RSAKeyValue element has two child elements, Modulus and Exponent, and these define the public key.</span></span> <span data-ttu-id="62b03-134">Los elementos de módulo y exponente se codifican en Base64 y se almacenan en orden Big-Endian.</span><span class="sxs-lookup"><span data-stu-id="62b03-134">The Modulus and Exponent elements are base64-encoded and stored in big-endian order.</span></span>
    -   <span data-ttu-id="62b03-135">**KeyUsage**.</span><span class="sxs-lookup"><span data-stu-id="62b03-135">**KeyUsage**.</span></span> <span data-ttu-id="62b03-136">Si el certificado es el certificado COPP del controlador, este elemento debe contener un elemento secundario denominado EncryptKey.</span><span class="sxs-lookup"><span data-stu-id="62b03-136">If the certificate is the driver's COPP certificate, this element should contain a child element called EncryptKey.</span></span> <span data-ttu-id="62b03-137">Si el certificado es el certificado de firma de IHV o el certificado de firma de Microsoft, debe contener un elemento secundario denominado SignCertificate.</span><span class="sxs-lookup"><span data-stu-id="62b03-137">If the certificate is the IHV's signing certificate or Microsoft's signing certificate, it should contain a child element called SignCertificate.</span></span> <span data-ttu-id="62b03-138">Ambos elementos secundarios contienen valores booleanos.</span><span class="sxs-lookup"><span data-stu-id="62b03-138">Both of these child elements contain Boolean values.</span></span>
    -   <span data-ttu-id="62b03-139">**SecurityLevel**.</span><span class="sxs-lookup"><span data-stu-id="62b03-139">**SecurityLevel**.</span></span> <span data-ttu-id="62b03-140">Este elemento se debe omitir.</span><span class="sxs-lookup"><span data-stu-id="62b03-140">This element should be ignored.</span></span>
    -   <span data-ttu-id="62b03-141">**ManufacturerData**.</span><span class="sxs-lookup"><span data-stu-id="62b03-141">**ManufacturerData**.</span></span> <span data-ttu-id="62b03-142">Especifica el fabricante y el modelo del dispositivo de gráficos.</span><span class="sxs-lookup"><span data-stu-id="62b03-142">Specifies the manufacturer and model of the graphics device.</span></span> <span data-ttu-id="62b03-143">Este elemento es meramente informativo.</span><span class="sxs-lookup"><span data-stu-id="62b03-143">This element is informational only.</span></span>
    -   <span data-ttu-id="62b03-144">**Features**.</span><span class="sxs-lookup"><span data-stu-id="62b03-144">**Features**.</span></span> <span data-ttu-id="62b03-145">Contiene elementos secundarios que especifican el uso del certificado.</span><span class="sxs-lookup"><span data-stu-id="62b03-145">Contains child elements that specify the usage of the certificate.</span></span> <span data-ttu-id="62b03-146">El único que es relevante para COPP es el elemento COPPCertificate.</span><span class="sxs-lookup"><span data-stu-id="62b03-146">The only one relevant to COPP is the COPPCertificate element.</span></span> <span data-ttu-id="62b03-147">Pueden estar presentes otros elementos secundarios; Si es así, se deben omitir.</span><span class="sxs-lookup"><span data-stu-id="62b03-147">Other child elements might be present; if so, they should be ignored.</span></span> <span data-ttu-id="62b03-148">Si el elemento COPPCertificate existe, el certificado es un certificado COPP.</span><span class="sxs-lookup"><span data-stu-id="62b03-148">If the COPPCertificate element exists, the certificate is a COPP certificate.</span></span> <span data-ttu-id="62b03-149">Este elemento debe estar presente en el nodo hoja de un certificado COPP válido.</span><span class="sxs-lookup"><span data-stu-id="62b03-149">This element must be present in the leaf node of a valid COPP certificate.</span></span> <span data-ttu-id="62b03-150">Este elemento contiene un valor booleano.</span><span class="sxs-lookup"><span data-stu-id="62b03-150">This element contains a Boolean value.</span></span>
-   <span data-ttu-id="62b03-151">**Firma**.</span><span class="sxs-lookup"><span data-stu-id="62b03-151">**Signature**.</span></span> <span data-ttu-id="62b03-152">Contiene la firma para este certificado.</span><span class="sxs-lookup"><span data-stu-id="62b03-152">Contains the signature for this certificate.</span></span> <span data-ttu-id="62b03-153">Contiene los siguientes elementos secundarios:</span><span class="sxs-lookup"><span data-stu-id="62b03-153">It contains the following child elements:</span></span>
    -   <span data-ttu-id="62b03-154">**SignedInfo**.</span><span class="sxs-lookup"><span data-stu-id="62b03-154">**SignedInfo**.</span></span> <span data-ttu-id="62b03-155">Contiene información sobre la firma.</span><span class="sxs-lookup"><span data-stu-id="62b03-155">Contains information about the signature.</span></span> <span data-ttu-id="62b03-156">El elemento secundario importante de este elemento es el elemento DigestValue, que contiene el valor codificado en base64 del hash SHA-1 sobre el elemento de datos.</span><span class="sxs-lookup"><span data-stu-id="62b03-156">The important child element of this element is the DigestValue element, which contains the base64-encoded value of the SHA-1 hash over the Data element.</span></span> <span data-ttu-id="62b03-157">El valor de síntesis se usa al comprobar el certificado en la lista de revocación de certificados (CRL).</span><span class="sxs-lookup"><span data-stu-id="62b03-157">The digest value is used when checking the certificate against the certificate revocation list (CRL).</span></span>
    -   <span data-ttu-id="62b03-158">**SignatureValue**.</span><span class="sxs-lookup"><span data-stu-id="62b03-158">**SignatureValue**.</span></span> <span data-ttu-id="62b03-159">Este valor se calcula sobre el elemento de datos y se calcula de acuerdo con el esquema de firma digital RSASSA-PSS definido en Public-Key Cryptography Standards (PKCS) \# 1 (versión 2,1).</span><span class="sxs-lookup"><span data-stu-id="62b03-159">This value is computed over the Data element and is computed according to the RSASSA-PSS digital signature scheme defined in Public-Key Cryptography Standards (PKCS) \#1 (version 2.1).</span></span> <span data-ttu-id="62b03-160">Para obtener información acerca de PKCS \# 1, visite [https://www.rsa.com/](https://www.rsa.com/) .</span><span class="sxs-lookup"><span data-stu-id="62b03-160">For information about PKCS \#1, visit [https://www.rsa.com/](https://www.rsa.com/).</span></span>
    -   <span data-ttu-id="62b03-161">**KeyInfo**.</span><span class="sxs-lookup"><span data-stu-id="62b03-161">**KeyInfo**.</span></span> <span data-ttu-id="62b03-162">Contiene la clave pública RSA del siguiente certificado de la cadena.</span><span class="sxs-lookup"><span data-stu-id="62b03-162">Contains the RSA public key of the next certificate in the chain.</span></span> <span data-ttu-id="62b03-163">Este elemento se usa para comprobar que los datos del elemento de datos no se han alterado.</span><span class="sxs-lookup"><span data-stu-id="62b03-163">This element is used to verify that the data in the Data element has not been tampered with.</span></span> <span data-ttu-id="62b03-164">Este elemento tiene el mismo formato que el elemento PublicKey.</span><span class="sxs-lookup"><span data-stu-id="62b03-164">This element has the same format as the PublicKey element.</span></span>

### <a name="certificate-validation"></a><span data-ttu-id="62b03-165">Validación de certificados</span><span class="sxs-lookup"><span data-stu-id="62b03-165">Certificate Validation</span></span>

<span data-ttu-id="62b03-166">La aplicación debe realizar los pasos siguientes para validar correctamente la cadena de certificados.</span><span class="sxs-lookup"><span data-stu-id="62b03-166">The application must perform the following steps to correctly validate the certificate chain.</span></span> <span data-ttu-id="62b03-167">Si se produce un error en algún paso, o si no existe ningún elemento al que se hace referencia en estos procedimientos, se produce un error en la validación.</span><span class="sxs-lookup"><span data-stu-id="62b03-167">If any step fails, or if any element referred to in these procedures does not exist, the validation fails.</span></span>

### <a name="validate-certificate-collection-procedure"></a><span data-ttu-id="62b03-168">Procedimiento para validar la colección de certificados</span><span class="sxs-lookup"><span data-stu-id="62b03-168">Validate Certificate Collection Procedure</span></span>

<span data-ttu-id="62b03-169">Para validar la cadena de certificados, realice los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="62b03-169">To validate the certificate chain, perform the following steps:</span></span>

1.  <span data-ttu-id="62b03-170">Compruebe que CertificateCollection sea XML con formato correcto.</span><span class="sxs-lookup"><span data-stu-id="62b03-170">Verify that the CertificateCollection is well-formed XML.</span></span>
2.  <span data-ttu-id="62b03-171">Compruebe que CertificateCollection está codificado en formato UTF-8.</span><span class="sxs-lookup"><span data-stu-id="62b03-171">Verify that the CertificateCollection is encoded in UTF-8 format.</span></span>
3.  <span data-ttu-id="62b03-172">Compruebe que el atributo version del elemento CertificateCollection sea 2,0 o posterior.</span><span class="sxs-lookup"><span data-stu-id="62b03-172">Check that the Version attribute in the CertificateCollection element is 2.0 or later.</span></span>
4.  <span data-ttu-id="62b03-173">Compruebe que la cadena de certificados contiene exactamente tres elementos de certificado.</span><span class="sxs-lookup"><span data-stu-id="62b03-173">Verify that the certificate chain contains exactly three Certificate elements.</span></span>
5.  <span data-ttu-id="62b03-174">Recorra en bucle cada elemento de certificado de la cadena de certificados y realice el procedimiento de validación del certificado, que se describe a continuación, en cada uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="62b03-174">Loop through each Certificate element in the certificate chain and perform the Validate Certificate procedure, described below, on each.</span></span>

### <a name="validate-certificate-procedure"></a><span data-ttu-id="62b03-175">Procedimiento de validación de certificado</span><span class="sxs-lookup"><span data-stu-id="62b03-175">Validate Certificate Procedure</span></span>

<span data-ttu-id="62b03-176">Para validar un certificado de la cadena, realice los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="62b03-176">To validate a certificate in the chain, perform the following steps:</span></span>

1.  <span data-ttu-id="62b03-177">Compruebe que ninguno de los elementos secundarios del elemento de datos está duplicado.</span><span class="sxs-lookup"><span data-stu-id="62b03-177">Verify that none of the child elements in the Data element is duplicated.</span></span> <span data-ttu-id="62b03-178">Por ejemplo, debería haber solo un elemento PublicKey.</span><span class="sxs-lookup"><span data-stu-id="62b03-178">For example, there should be only one PublicKey element.</span></span>
2.  <span data-ttu-id="62b03-179">Asegúrese de que el elemento Data/PublicKey/KeyValue/RSAKeyValue/Modul existe.</span><span class="sxs-lookup"><span data-stu-id="62b03-179">Ensure that the Data/PublicKey/KeyValue/RSAKeyValue/Modulus element exists.</span></span> <span data-ttu-id="62b03-180">El valor descodificado en Base64 debe tener una longitud de 256 bytes para todos los certificados excepto la raíz.</span><span class="sxs-lookup"><span data-stu-id="62b03-180">The base64-decoded value must be 256 bytes long for all certificates except the root.</span></span> <span data-ttu-id="62b03-181">En el certificado raíz, este elemento debe tener una longitud de 128 bytes.</span><span class="sxs-lookup"><span data-stu-id="62b03-181">In the root certificate, this element must be 128 bytes long.</span></span>
3.  <span data-ttu-id="62b03-182">Asegúrese de que el elemento Data/PublicKey/KeyValue/RSAKeyValue/Exponent exista.</span><span class="sxs-lookup"><span data-stu-id="62b03-182">Ensure that the Data/PublicKey/KeyValue/RSAKeyValue/Exponent element exists.</span></span> <span data-ttu-id="62b03-183">El valor descodificado en Base64 no debe ser mayor que 4 bytes.</span><span class="sxs-lookup"><span data-stu-id="62b03-183">The base64-decoded value must not be larger than 4 bytes.</span></span>
4.  <span data-ttu-id="62b03-184">Si este certificado es el certificado de hoja, compruebe lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="62b03-184">If this certificate is the leaf certificate, verify the following:</span></span>
    -   <span data-ttu-id="62b03-185">El elemento KeyUsage contiene un elemento EncryptKey con el valor 1.</span><span class="sxs-lookup"><span data-stu-id="62b03-185">The KeyUsage element contains an EncryptKey element with the value 1.</span></span>
    -   <span data-ttu-id="62b03-186">El elemento Features contiene un elemento COPPCertificate con el valor 1.</span><span class="sxs-lookup"><span data-stu-id="62b03-186">The Features element contains a COPPCertificate element with the value 1.</span></span>
5.  <span data-ttu-id="62b03-187">Si este certificado no es el certificado de hoja, compruebe lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="62b03-187">If this certificate is not the leaf certificate, verify the following:</span></span>
    -   <span data-ttu-id="62b03-188">El módulo y el exponente del elemento Data/PublicKey coinciden exactamente con el módulo y el exponente del elemento Signature/KeyInfo del certificado anterior.</span><span class="sxs-lookup"><span data-stu-id="62b03-188">The modulus and exponent from the Data/PublicKey element exactly match the modulus and exponent from the Signature/KeyInfo element of the previous certificate.</span></span>
    -   <span data-ttu-id="62b03-189">El elemento KeyUsage contiene un elemento SignCertificate con el valor 1.</span><span class="sxs-lookup"><span data-stu-id="62b03-189">The KeyUsage element contains a SignCertificate element, with the value 1.</span></span>
6.  <span data-ttu-id="62b03-190">Use el algoritmo hash SHA-1 para aplicar un algoritmo hash a cada byte del elemento de datos del certificado.</span><span class="sxs-lookup"><span data-stu-id="62b03-190">Use the SHA-1 hash algorithm to hash every byte in the certificate's Data element.</span></span> <span data-ttu-id="62b03-191">Se debe aplicar un algoritmo hash a todos los bytes del primer carácter de la <Data> etiqueta al último carácter de la etiqueta de cierre </Data> .</span><span class="sxs-lookup"><span data-stu-id="62b03-191">Every byte from the first character in the <Data> tag to the last character in the closing </Data> tag should be hashed.</span></span> <span data-ttu-id="62b03-192">El valor hash se utiliza para comprobar el certificado con respecto a la lista de revocación de certificados (CRL), como se describe en [listas de revocación de certificados](certificate-revocation-lists.md) .</span><span class="sxs-lookup"><span data-stu-id="62b03-192">The hash value is used to check the certificate against the certificate revocation list (CRL), as described in [Certificate Revocation Lists](certificate-revocation-lists.md)</span></span>
7.  <span data-ttu-id="62b03-193">Compare el valor hash del paso 6 con el valor descodificado en base64 del elemento Signature/SignedInfo/Reference/DigestValue.</span><span class="sxs-lookup"><span data-stu-id="62b03-193">Compare the hash value from step 6 with the base64-decoded value of the Signature/SignedInfo/Reference/DigestValue element.</span></span> <span data-ttu-id="62b03-194">Estos valores deben coincidir.</span><span class="sxs-lookup"><span data-stu-id="62b03-194">These values must match.</span></span>
8.  <span data-ttu-id="62b03-195">Realice el procedimiento de comprobación de firma, que se describe a continuación.</span><span class="sxs-lookup"><span data-stu-id="62b03-195">Perform the Verify Signature procedure, described below.</span></span>
9.  <span data-ttu-id="62b03-196">Si este certificado no es el certificado final de la cadena, guarde el valor Signature/KeyInfo/KeyValue/RSAKeyValue para la siguiente iteración del bucle.</span><span class="sxs-lookup"><span data-stu-id="62b03-196">If this certificate is not the final certificate in the chain, save the Signature/KeyInfo/KeyValue/RSAKeyValue value for the next iteration of the loop.</span></span>
10. <span data-ttu-id="62b03-197">Si este certificado es el certificado final de la cadena, asegúrese de que el valor de Signature/KeyInfo/KeyValue/RSAKeyValue coincide con la clave pública de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="62b03-197">If this certificate is the final certificate in the chain, ensure that the value of Signature/KeyInfo/KeyValue/RSAKeyValue matches Microsoft's public key.</span></span> <span data-ttu-id="62b03-198">La clave pública de Microsoft tiene los siguientes valores codificados en Base64:</span><span class="sxs-lookup"><span data-stu-id="62b03-198">The Microsoft public key has the following base64-encoded values:</span></span>
    -   <span data-ttu-id="62b03-199">Módulo</span><span class="sxs-lookup"><span data-stu-id="62b03-199">Modulus:</span></span>

        `pjoeWLSTLDonQG8She6QhkYbYott9fPZ8tHdB128ZETcghn5KHoyin7HkJEcPJ0Eg4UdSv a0KDIYDjA3EXd69R3CN2Wp/QyOo0ZPYWYp3NXpJ700tKPgIplzo5wVd/69g7j+j8M66W7V NmDwaNs9mDc1p2+VVMsDhOsV/Au6E+E=`

    -   <span data-ttu-id="62b03-200">Exponente `AQAB`</span><span class="sxs-lookup"><span data-stu-id="62b03-200">Exponent: `AQAB`</span></span>

### <a name="verify-signature-procedure"></a><span data-ttu-id="62b03-201">Comprobar el procedimiento de firma</span><span class="sxs-lookup"><span data-stu-id="62b03-201">Verify Signature Procedure</span></span>

<span data-ttu-id="62b03-202">El valor del elemento SignatureValue se calcula sobre el elemento de datos de acuerdo con el esquema de firma digital RSASSA-PSS definido en la \# versión 2,1 de PKCS 1 (en adelante denominado PKCS).</span><span class="sxs-lookup"><span data-stu-id="62b03-202">The value of the SignatureValue element is computed over the Data element according to the RSASSA-PSS digital signature scheme defined in PKCS \#1 version 2.1 (hereinafter referred to as PKCS).</span></span> <span data-ttu-id="62b03-203">Para comprobar esta firma, realice los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="62b03-203">To verify this signature, perform the following steps:</span></span>

1.  <span data-ttu-id="62b03-204">Descodifique los valores de módulo y exponente en el elemento Signature/KeyInfo/KeyValue/RSAKeyValue.</span><span class="sxs-lookup"><span data-stu-id="62b03-204">Decode the Modulus and Exponent values in the Signature/KeyInfo/KeyValue/RSAKeyValue element.</span></span> <span data-ttu-id="62b03-205">Estos valores definen la clave pública RSA del certificado de firma.</span><span class="sxs-lookup"><span data-stu-id="62b03-205">These values define the RSA public key of the signing certificate.</span></span>
2.  <span data-ttu-id="62b03-206">Descodifique el elemento Signature/SignatureValue.</span><span class="sxs-lookup"><span data-stu-id="62b03-206">Decode the Signature/SignatureValue element.</span></span>
3.  <span data-ttu-id="62b03-207">Calcule la operación RSASSA-PSS-Verify, definida en la sección 8.1.2 de PKCS.</span><span class="sxs-lookup"><span data-stu-id="62b03-207">Compute the RSASSA-PSS-Verify operation, defined in section 8.1.2 of PKCS.</span></span>

<span data-ttu-id="62b03-208">Para la operación RSASSA-PSS-Verify, utilice las siguientes entradas:</span><span class="sxs-lookup"><span data-stu-id="62b03-208">For the RSASSA-PSS-Verify operation, use the following inputs:</span></span>

-   <span data-ttu-id="62b03-209">(*n*,*e*) es la clave pública del paso 1.</span><span class="sxs-lookup"><span data-stu-id="62b03-209">(*n*,*e*) is the public key from step 1.</span></span>
-   <span data-ttu-id="62b03-210">*M* son todos los bytes del elemento de datos, incluidas las etiquetas <Data> y</Data> que contienen el elemento.</span><span class="sxs-lookup"><span data-stu-id="62b03-210">*M* is all of the bytes in the Data element, including the <Data> and </Data> tags that enclose the element.</span></span>
-   <span data-ttu-id="62b03-211">*S* es el valor de firma descodificado del paso 2.</span><span class="sxs-lookup"><span data-stu-id="62b03-211">*S* is the decoded signature value from step 2.</span></span>

<span data-ttu-id="62b03-212">La operación RSASSA-PSS-Verify usa la operación EMSA-PSS-encode, que se define en la sección 9.1.1.</span><span class="sxs-lookup"><span data-stu-id="62b03-212">The RSASSA-PSS-Verify operation uses the EMSA-PSS-ENCODE operation, defined in section 9.1.1.</span></span> <span data-ttu-id="62b03-213">de PKCS.</span><span class="sxs-lookup"><span data-stu-id="62b03-213">of PKCS.</span></span> <span data-ttu-id="62b03-214">Para esta operación, COPP usa las siguientes opciones:</span><span class="sxs-lookup"><span data-stu-id="62b03-214">For this operation, COPP uses the following options:</span></span>

-   <span data-ttu-id="62b03-215">Hash = SHA-1</span><span class="sxs-lookup"><span data-stu-id="62b03-215">Hash = SHA-1</span></span>
-   <span data-ttu-id="62b03-216">*hLen* = 20</span><span class="sxs-lookup"><span data-stu-id="62b03-216">*hLen* = 20</span></span>
-   <span data-ttu-id="62b03-217">MGF (función de generación de máscara) = MGF1</span><span class="sxs-lookup"><span data-stu-id="62b03-217">MGF (mask generation function) = MGF1</span></span>
-   <span data-ttu-id="62b03-218">*sLen* = 0</span><span class="sxs-lookup"><span data-stu-id="62b03-218">*sLen* = 0</span></span>

<span data-ttu-id="62b03-219">La función de generación de máscara MGF1 se define en el Apéndice B. 2 de PKCS.</span><span class="sxs-lookup"><span data-stu-id="62b03-219">The mask generation function MGF1 is defined in Appendix B.2 of PKCS.</span></span> <span data-ttu-id="62b03-220">Para esta función, COPP usa las siguientes opciones:</span><span class="sxs-lookup"><span data-stu-id="62b03-220">For this function, COPP uses the following options:</span></span>

-   <span data-ttu-id="62b03-221">Hash = SHA-1</span><span class="sxs-lookup"><span data-stu-id="62b03-221">Hash = SHA-1</span></span>
-   <span data-ttu-id="62b03-222">*hLen* = 20</span><span class="sxs-lookup"><span data-stu-id="62b03-222">*hLen* = 20</span></span>

<span data-ttu-id="62b03-223">La salida de la operación RSASSA-PSS-Verify indica si la firma es válida o no es válida.</span><span class="sxs-lookup"><span data-stu-id="62b03-223">The output of the RSASSA-PSS-Verify operation indicates whether the signature is valid or invalid.</span></span>

## <a name="related-topics"></a><span data-ttu-id="62b03-224">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="62b03-224">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="62b03-225">Uso del Protocolo de protección de la salida certificada (COPP)</span><span class="sxs-lookup"><span data-stu-id="62b03-225">Using Certified Output Protection Protocol (COPP)</span></span>](using-certified-output-protection-protocol--copp.md)
</dt> </dl>

 

 



