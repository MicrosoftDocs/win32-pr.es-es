---
description: Filtro de representador de vídeo
ms.assetid: 7719ed9d-e3b9-4c84-b587-4e120b5cabf8
title: Filtro de representador de vídeo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c71e72375a43a57ce94b38d01f48abba9309e603
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104275806"
---
# <a name="video-renderer-filter"></a><span data-ttu-id="0eaf9-103">Filtro de representador de vídeo</span><span class="sxs-lookup"><span data-stu-id="0eaf9-103">Video Renderer Filter</span></span>

<span data-ttu-id="0eaf9-104">El filtro de representador de vídeo es un representador de vídeo sólido y multiuso.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-104">The Video Renderer filter is a robust, all-purpose video renderer.</span></span>

> [!Note]  
> <span data-ttu-id="0eaf9-105">En Windows XP y versiones posteriores, el representador de vídeo predeterminado es el [filtro de representador de combinación de vídeo 7](video-mixing-renderer-filter-7.md) (VMR-7).</span><span class="sxs-lookup"><span data-stu-id="0eaf9-105">On Windows XP and later, the default video renderer is the [Video Mixing Renderer Filter 7](video-mixing-renderer-filter-7.md) (VMR-7).</span></span> <span data-ttu-id="0eaf9-106">Las opciones VMR-7 y representador de vídeo tienen el nombre descriptivo "representador de vídeo".</span><span class="sxs-lookup"><span data-stu-id="0eaf9-106">The VMR-7 and the Video Renderer both have the friendly name "Video Renderer."</span></span> <span data-ttu-id="0eaf9-107">En las plataformas anteriores, el representador de vídeo es el representador predeterminado.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-107">On earlier platforms, the Video Renderer is the default renderer.</span></span> <span data-ttu-id="0eaf9-108">Vea [elección del representador adecuado](choosing-the-right-renderer.md).</span><span class="sxs-lookup"><span data-stu-id="0eaf9-108">See [Choosing the Right Renderer](choosing-the-right-renderer.md).</span></span>

 

<span data-ttu-id="0eaf9-109">El representador de vídeo utiliza DirectDraw y superficies superpuestas, si la tarjeta de vídeo las admite.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-109">The Video Renderer uses DirectDraw and overlay surfaces, if the video card supports them.</span></span> <span data-ttu-id="0eaf9-110">Filter Graph Manager expone la interfaz [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) , que permite a las aplicaciones establecer y recuperar propiedades en el representador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-110">The Filter Graph Manager exposes the [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) interface, which enables applications to set and retrieve properties on the Video Renderer.</span></span> <span data-ttu-id="0eaf9-111">Con las tarjetas de vídeo más recientes, el representador de vídeo admite la representación a pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-111">With newer video cards, the Video Renderer supports full-screen rendering.</span></span> <span data-ttu-id="0eaf9-112">De lo contrario, el administrador de gráficos de filtros cambia automáticamente al filtro de [representador de pantalla completa](full-screen-renderer-filter.md) para el modo de pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-112">Otherwise, the Filter Graph Manager automatically switches to the [Full Screen Renderer](full-screen-renderer-filter.md) filter for full-screen mode.</span></span> <span data-ttu-id="0eaf9-113">Consulte [**IVideoWindow::p UT \_ FullScreenMode**](/windows/desktop/api/Control/nf-control-ivideowindow-put_fullscreenmode) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-113">See [**IVideoWindow::put\_FullScreenMode**](/windows/desktop/api/Control/nf-control-ivideowindow-put_fullscreenmode) for more information.</span></span>

-   <span data-ttu-id="0eaf9-114">\[! Aún\]</span><span class="sxs-lookup"><span data-stu-id="0eaf9-114">\[!Important\]</span></span>  
    > <span data-ttu-id="0eaf9-115">Normalmente, la ventana de vídeo de este filtro procesa los mensajes en un subproceso de trabajo creado por el administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-115">Normally, this filter's video window processes messages on a worker thread created by the Filter Graph Manager.</span></span> <span data-ttu-id="0eaf9-116">Sin embargo, si una aplicación crea directamente el filtro mediante **CoCreateInstance**, la ventana de vídeo procesa los mensajes en el subproceso de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-116">Howerver, if an application directly creates the filter using **CoCreateInstance**, the video window processes messages on the application thread.</span></span> <span data-ttu-id="0eaf9-117">En ese caso, el subproceso de la aplicación debe tener un bucle de mensajes para enviar mensajes a la ventana de vídeo.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-117">In that case, the application thread must have a message loop, to dispatch messages to the video window.</span></span> <span data-ttu-id="0eaf9-118">Además, el subproceso no debe salir hasta la última llamada de **versión** al representador de vídeo, que se produce cuando se cierra el administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-118">Also, the thread must not exit until the final **Release** call to the Video Renderer, which occurs when the Filter Graph Manager shuts down.</span></span> <span data-ttu-id="0eaf9-119">De lo contrario, la aplicación podría bloquearse.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-119">Otherwise, the application might deadlock.</span></span>

     



|                                          |                                                                                                                                                                                                                                                                                                                                                                                                          |
|------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="0eaf9-120">Interfaces de filtro</span><span class="sxs-lookup"><span data-stu-id="0eaf9-120">Filter Interfaces</span></span>                        | <span data-ttu-id="0eaf9-121">[**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**IBasicVideo**](/windows/desktop/api/Control/nn-control-ibasicvideo), [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2), [**IDirectDrawVideo**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-idirectdrawvideo), [**IKsPropertySet**](ikspropertyset.md), [**IMediaPosition**](/windows/desktop/api/Control/nn-control-imediaposition), [**IMediaSeeking**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol), [**IQualProp**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow)</span><span class="sxs-lookup"><span data-stu-id="0eaf9-121">[**IBaseFilter**](/windows/desktop/api/Strmif/nn-strmif-ibasefilter), [**IBasicVideo**](/windows/desktop/api/Control/nn-control-ibasicvideo), [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2), [**IDirectDrawVideo**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-idirectdrawvideo), [**IKsPropertySet**](ikspropertyset.md), [**IMediaPosition**](/windows/desktop/api/Control/nn-control-imediaposition), [**IMediaSeeking**](/windows/desktop/api/Strmif/nn-strmif-imediaseeking), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol), [**IQualProp**](/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop), [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow)</span></span> |
| <span data-ttu-id="0eaf9-122">Tipos de medios de anclaje de entrada</span><span class="sxs-lookup"><span data-stu-id="0eaf9-122">Input Pin Media Types</span></span>                    | <span data-ttu-id="0eaf9-123">Formatos de vídeo sin comprimir.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-123">Uncompressed video formats.</span></span>                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="0eaf9-124">Interfaces de PIN de entrada</span><span class="sxs-lookup"><span data-stu-id="0eaf9-124">Input Pin Interfaces</span></span>                     | <span data-ttu-id="0eaf9-125">[**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay), [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span><span class="sxs-lookup"><span data-stu-id="0eaf9-125">[**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin), [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay), [**IPin**](/windows/desktop/api/Strmif/nn-strmif-ipin), [**IPinConnection**](/windows/desktop/api/Strmif/nn-strmif-ipinconnection), [**IQualityControl**](/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol)</span></span>                                                                                                                                                                                                                           |
| <span data-ttu-id="0eaf9-126">Tipos de medios de anclaje de salida</span><span class="sxs-lookup"><span data-stu-id="0eaf9-126">Output Pin Media Types</span></span>                   | <span data-ttu-id="0eaf9-127">No es aplicable.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-127">Not applicable.</span></span>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="0eaf9-128">Interfaces de clavija de salida</span><span class="sxs-lookup"><span data-stu-id="0eaf9-128">Output Pin Interfaces</span></span>                    | <span data-ttu-id="0eaf9-129">No es aplicable.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-129">Not applicable.</span></span>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="0eaf9-130">Identificador CLSID</span><span class="sxs-lookup"><span data-stu-id="0eaf9-130">Filter CLSID</span></span>                             | <span data-ttu-id="0eaf9-131">Videoprocesador CLSID \_</span><span class="sxs-lookup"><span data-stu-id="0eaf9-131">CLSID\_VideoRenderer</span></span>                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="0eaf9-132">CLSID de la página de propiedades</span><span class="sxs-lookup"><span data-stu-id="0eaf9-132">Property Page CLSID</span></span>                      | <span data-ttu-id="0eaf9-133">Ninguna página de propiedades.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-133">No property page.</span></span>                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="0eaf9-134">Executable</span><span class="sxs-lookup"><span data-stu-id="0eaf9-134">Executable</span></span>                               | <span data-ttu-id="0eaf9-135">quartz.dll</span><span class="sxs-lookup"><span data-stu-id="0eaf9-135">quartz.dll</span></span>                                                                                                                                                                                                                                                                                                                                                                                               |
| [<span data-ttu-id="0eaf9-136">Fundament</span><span class="sxs-lookup"><span data-stu-id="0eaf9-136">Merit</span></span>](merit.md)                       | <span data-ttu-id="0eaf9-137">Windows XP y versiones posteriores: el mérito no es **\_ probable**</span><span class="sxs-lookup"><span data-stu-id="0eaf9-137">Windows XP and later: **MERIT\_UNLIKELY**</span></span>                                                                                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="0eaf9-138">Categoría de filtro</span><span class="sxs-lookup"><span data-stu-id="0eaf9-138">Filter Category</span></span>](filter-categories.md) | <span data-ttu-id="0eaf9-139">**CLSID \_ LegacyAmFilterCategory**</span><span class="sxs-lookup"><span data-stu-id="0eaf9-139">**CLSID\_LegacyAmFilterCategory**</span></span>                                                                                                                                                                                                                                                                                                                                                                        |



 

## <a name="remarks"></a><span data-ttu-id="0eaf9-140">Observaciones</span><span class="sxs-lookup"><span data-stu-id="0eaf9-140">Remarks</span></span>

<span data-ttu-id="0eaf9-141">En la versión de depuración de Quartz.dll, si el \_ nivel de depuración de seguimiento de registros se establece en 5 o superior, el representador de vídeo muestra las marcas de tiempo de cada fotograma en la ventana de vídeo.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-141">In the debug version of Quartz.dll, if the LOG\_TRACE debug level is set to 5 or higher, the Video Renderer displays each frame's time stamps on the video window.</span></span> <span data-ttu-id="0eaf9-142">Estos números no aparecen en la versión comercial de la DLL.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-142">These numbers do not appear in the retail version of the DLL.</span></span> <span data-ttu-id="0eaf9-143">Para obtener más información, vea [funciones de salida de depuración](debug-output-functions.md).</span><span class="sxs-lookup"><span data-stu-id="0eaf9-143">For more information, see [Debug Output Functions](debug-output-functions.md).</span></span>

<span data-ttu-id="0eaf9-144">Los siguientes comentarios están destinados a los desarrolladores de filtros:</span><span class="sxs-lookup"><span data-stu-id="0eaf9-144">The following remarks are intended for filter developers:</span></span>

<span data-ttu-id="0eaf9-145">El representador de vídeo acepta formatos YUV si la tarjeta gráfica de vídeo admite superficies de superposición YUV.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-145">The Video Renderer accepts YUV formats if the video graphics card supports YUV overlay surfaces.</span></span> <span data-ttu-id="0eaf9-146">La primera vez que se conecta al filtro de nivel superior, sin embargo, el representador de vídeo requiere un formato RGB que coincida con la profundidad de color de la configuración del monitor actual.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-146">When it first connects to the upstream filter, however, the Video Renderer requires an RGB format that matches the color depth of the current monitor settings.</span></span> <span data-ttu-id="0eaf9-147">Por ejemplo, si la configuración de pantalla actual es color de 24 bits, el filtro de nivel superior debe ser capaz de proporcionar vídeo RGB de 24 bits.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-147">For example, if the current display setting is 24-bit color, the upstream filter must be able to provide 24-bit RGB video.</span></span> <span data-ttu-id="0eaf9-148">Cuando el gráfico de filtro cambia a un estado de la continuación, el representador de vídeo negocia un cambio de formato dinámico en el espacio de colores de YUV adecuado.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-148">When the filter graph switches to a runing state, the Video Renderer negotiates a dynamic format change to the appropriate YUV color space.</span></span>

<span data-ttu-id="0eaf9-149">Al conectarse con un tipo RGB, el representador de vídeo garantiza que puede usar GDI en caso de que DirectDraw no esté disponible.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-149">By connecting with an RGB type, the Video Renderer ensures that it can use GDI in case DirectDraw is not available.</span></span> <span data-ttu-id="0eaf9-150">Cambiará a GDI si otra aplicación está usando la memoria de vídeo, si el rectángulo de vídeo abarca dos monitores en un sistema de varios monitores, o si el rectángulo de vídeo está completamente oculto en otra ventana.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-150">It will switch to GDI if another application is using the video memory, if the video rectangle straddles two monitors on a multi-monitor system, or if the video rectangle is completely obscured by another window.</span></span>

> [!Note]  
> <span data-ttu-id="0eaf9-151">El representador de mezcla de vídeo no realiza este tipo de cambio de formato dinámico y no requiere un tipo de medio RGB, porque nunca utiliza GDI para la representación.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-151">The Video Mixing Renderer does not perform this type of dynamic format change, and does not require an RGB media type, because it never uses GDI for rendering.</span></span>

 

<span data-ttu-id="0eaf9-152">Para negociar un cambio de formato, el representador de vídeo llama a [**IPin:: QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) con el nuevo tipo de archivo multimedia.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-152">To negotiate a format change, the Video Renderer calls [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) with the new media type.</span></span> <span data-ttu-id="0eaf9-153">Si el filtro de nivel superior devuelve S \_ correcto, el representador de vídeo conecta el nuevo medio a la siguiente muestra.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-153">If the upstream filter returns S\_OK, the Video Renderer attaches the new media to the next sample.</span></span> <span data-ttu-id="0eaf9-154">El filtro de nivel superior debe llamar a [**IMediaSample:: GetMediaType**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getmediatype) en cada ejemplo.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-154">The upstream filter should call [**IMediaSample::GetMediaType**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getmediatype) on each sample.</span></span> <span data-ttu-id="0eaf9-155">Si **GetMediaType** devuelve un valor distinto de **null** , indica un cambio de formato y el filtro de nivel superior debe responder mediante el cambio de los tipos de salida.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-155">If **GetMediaType** returns a non-**NULL** value, it indicates a format change, and the upstream filter should respond by switching output types.</span></span> <span data-ttu-id="0eaf9-156">(No cambie los tipos en el método **QueryAccept** ). El filtro de nivel superior debe aceptar al menos los tipos RGB principales y, idealmente, debe admitir los tipos YUV comunes.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-156">(Do not switch types in the **QueryAccept** method.) The upstream filter should accept at least the major RGB types, and ideally should support the common YUV types.</span></span> <span data-ttu-id="0eaf9-157">Durante el streaming, el representador de vídeo puede alternar entre los tipos YUV y RGB cualquier número de veces.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-157">During streaming, the Video Renderer might switch back and forth between YUV and RGB types any number of times.</span></span> <span data-ttu-id="0eaf9-158">El representador de vídeo no acepta los cambios de formato dinámico iniciados por el filtro de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-158">The Video Renderer does not accept dynamic format changes initiated by the upstream filter.</span></span>

<span data-ttu-id="0eaf9-159">Cuando el representador de vídeo se dibuja en una superficie superpuesta de DirectDraw, asigna un solo búfer para su PIN de entrada.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-159">When the Video Renderer draws to a DirectDraw overlay surface, it allocates a single buffer for its input pin.</span></span> <span data-ttu-id="0eaf9-160">Si el filtro de nivel superior intenta forzar una conexión con varios búferes, el representador de vídeo no podrá usar la superficie de superposición.</span><span class="sxs-lookup"><span data-stu-id="0eaf9-160">If the upstream filter attempts to force a connection using multiple buffers, the Video Renderer will be unable to use the overlay surface.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0eaf9-161">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="0eaf9-161">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="0eaf9-162">Filtros de DirectShow</span><span class="sxs-lookup"><span data-stu-id="0eaf9-162">DirectShow Filters</span></span>](directshow-filters.md)
</dt> </dl>

 

 



