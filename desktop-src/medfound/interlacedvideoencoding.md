---
description: Codificación de vídeo entrelazada
ms.assetid: 7695d4e3-4a75-4972-ab02-bc532d6a4dce
title: Codificación de vídeo entrelazada (Microsoft Media Foundation)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fafacb56f29964e81b040c59cdb75d8ebb35830b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104002804"
---
# <a name="interlaced-video-encoding-microsoft-media-foundation"></a><span data-ttu-id="984ff-103">Codificación de vídeo entrelazada (Microsoft Media Foundation)</span><span class="sxs-lookup"><span data-stu-id="984ff-103">Interlaced Video Encoding (Microsoft Media Foundation)</span></span>

<span data-ttu-id="984ff-104">Los datos de vídeo pensados para su uso con equipos suelen ser *progresivos*, lo que significa que cada fotograma se codifica como una sola imagen.</span><span class="sxs-lookup"><span data-stu-id="984ff-104">Video data intended for use with computers is typically *progressive*, meaning that each frame is encoded as a single image.</span></span> <span data-ttu-id="984ff-105">Algunos dispositivos, como los televisores, no muestran un fotograma a la vez, sino como dos imágenes.</span><span class="sxs-lookup"><span data-stu-id="984ff-105">Some devices, like televisions, do not display a frame all at once, but as two images.</span></span> <span data-ttu-id="984ff-106">Una de las imágenes, o campos, contiene todas las filas con un número par.</span><span class="sxs-lookup"><span data-stu-id="984ff-106">One of the images, or fields, contains all of the even numbered rows.</span></span> <span data-ttu-id="984ff-107">El otro campo contiene los datos de todas las filas con números impares.</span><span class="sxs-lookup"><span data-stu-id="984ff-107">The other field contains the data for all of the odd numbered rows.</span></span> <span data-ttu-id="984ff-108">El vídeo codificado con más de un campo por fotograma se denomina entrelazado, ya que se representa cambiando entre el campo par y el campo impar.</span><span class="sxs-lookup"><span data-stu-id="984ff-108">Video encoded with more than one field per frame is called interlaced, because it is rendered by switching between the even field and the odd field.</span></span>

<span data-ttu-id="984ff-109">En el pasado, el contenido de vídeo entrelazado siempre se desentrelazaba antes de la codificación con el códec de Windows Media Video.</span><span class="sxs-lookup"><span data-stu-id="984ff-109">In the past, interlaced video content was always de-interlaced before encoding with the Windows Media Video codec.</span></span> <span data-ttu-id="984ff-110">Sin embargo, a partir de Windows Media 9 series, el codificador de vídeo admite la compresión de contenido entrelazado sin convertirlo primero a progresiva.</span><span class="sxs-lookup"><span data-stu-id="984ff-110">Beginning with Windows Media 9 Series, however, the video encoder supports compression of interlaced content without first converting it to progressive.</span></span> <span data-ttu-id="984ff-111">Es importante mantener el entrelazado en un archivo codificado si el contenido se representa en una pantalla entrelazada, como un televisor.</span><span class="sxs-lookup"><span data-stu-id="984ff-111">Maintaining interlacing in an encoded file is important if the content is ever rendered on an interlaced display, such as a television.</span></span> <span data-ttu-id="984ff-112">Esta característica es de mayor importancia, ya que la compatibilidad con el contenido basado en Windows Media se extiende a reproductores de DVD, decodificadores y otros dispositivos electrónicos domésticos.</span><span class="sxs-lookup"><span data-stu-id="984ff-112">This feature is of increasing importance, as support for Windows Media-based content spreads to DVD players, set-top boxes, and other home electronics.</span></span>

<span data-ttu-id="984ff-113">La forma más sencilla de codificar y proporcionar vídeo entrelazado es desarrollar la aplicación con el SDK de Windows Media Format y almacenar el contenido en archivos ASF.</span><span class="sxs-lookup"><span data-stu-id="984ff-113">The easiest way to encode and deliver interlaced video is to develop your application using the Windows Media Format SDK and storing the content in ASF files.</span></span> <span data-ttu-id="984ff-114">La información entrelazada sobre los fotogramas se pasa al códec mediante extensiones de unidad de datos, que funcionan bien con el contenido ASF, pero son un poco más complicados de admitir en otros contenedores.</span><span class="sxs-lookup"><span data-stu-id="984ff-114">The interlaced information about frames is passed to the codec using data unit extensions, which work well for ASF content, but are a little trickier to support in other containers.</span></span> <span data-ttu-id="984ff-115">Para obtener más información acerca de las extensiones de unidad de datos, consulte [uso de extensiones de unidad de datos](usingdataunitextensions.md).</span><span class="sxs-lookup"><span data-stu-id="984ff-115">For more information about data unit extensions, see [Using Data Unit Extensions](usingdataunitextensions.md).</span></span>

<span data-ttu-id="984ff-116">La compatibilidad con la codificación entrelazada implica dos pasos principales: obtener la información del marco para el codificador y entregar la información a la aplicación de representación.</span><span class="sxs-lookup"><span data-stu-id="984ff-116">To support interlaced encoding involves two major steps: getting the frame information to the encoder, and delivering the information to the rendering application.</span></span> <span data-ttu-id="984ff-117">Estos pasos se describen en los párrafos siguientes.</span><span class="sxs-lookup"><span data-stu-id="984ff-117">These steps are described in the following paragraphs.</span></span>

## <a name="interlaced-video-and-the-encoder"></a><span data-ttu-id="984ff-118">Vídeo entrelazado y codificador</span><span class="sxs-lookup"><span data-stu-id="984ff-118">Interlaced Video and the Encoder</span></span>

<span data-ttu-id="984ff-119">El primer paso en la codificación de vídeo con entrelazado mantenido es configurar el codificador para codificar los campos entrelazados.</span><span class="sxs-lookup"><span data-stu-id="984ff-119">The first step in encoding video with maintained interlacing is to configure the encoder to encode interlaced fields.</span></span> <span data-ttu-id="984ff-120">Para ello, establezca la propiedad [MFPKEY \_ INTERLACEDCODINGENABLED](mfpkey-interlacedcodingenabledproperty.md) en **true**.</span><span class="sxs-lookup"><span data-stu-id="984ff-120">To do this, set the [MFPKEY\_INTERLACEDCODINGENABLED](mfpkey-interlacedcodingenabledproperty.md) property to **TRUE**.</span></span> <span data-ttu-id="984ff-121">Esto prepara al codificador para recibir ejemplos entrelazados.</span><span class="sxs-lookup"><span data-stu-id="984ff-121">This prepares the encoder to receive interlaced samples.</span></span> <span data-ttu-id="984ff-122">Cada ejemplo de entrada debe contener ambos campos.</span><span class="sxs-lookup"><span data-stu-id="984ff-122">Each input sample must contain both fields.</span></span>

<span data-ttu-id="984ff-123">Cada ejemplo que se procesa con el codificador después de activar la codificación entrelazada debe tener una extensión de unidad de datos adjunta.</span><span class="sxs-lookup"><span data-stu-id="984ff-123">Each sample that you process with the encoder after activating interlaced encoding should have a data unit extension attached.</span></span> <span data-ttu-id="984ff-124">Se supone que las muestras sin la extensión de unidad de datos esperada son progresivas.</span><span class="sxs-lookup"><span data-stu-id="984ff-124">Samples without the expected data unit extension are assumed to be progressive.</span></span> <span data-ttu-id="984ff-125">El GUID que identifica la extensión es D590DC20-07BC-436C-9CF7-F3BBFBF1A4DC.</span><span class="sxs-lookup"><span data-stu-id="984ff-125">The GUID identifying the extension is D590DC20-07BC-436C-9CF7-F3BBFBF1A4DC.</span></span> <span data-ttu-id="984ff-126">Los valores que pasan los objetos del SDK de Windows Media Format se definen en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="984ff-126">The values passed by the objects of the Windows Media Format SDK are defined in the following table.</span></span>



| <span data-ttu-id="984ff-127">Value</span><span class="sxs-lookup"><span data-stu-id="984ff-127">Value</span></span>      | <span data-ttu-id="984ff-128">Descripción</span><span class="sxs-lookup"><span data-stu-id="984ff-128">Description</span></span>                                                                                                                              |
|------------|------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="984ff-129">0x00000020</span><span class="sxs-lookup"><span data-stu-id="984ff-129">0x00000020</span></span> | <span data-ttu-id="984ff-130">Especifica que el ejemplo se codifica primero con el campo inferior.</span><span class="sxs-lookup"><span data-stu-id="984ff-130">Specifies that the sample is encoded with the bottom field first.</span></span> <span data-ttu-id="984ff-131">Este valor solo es significativo cuando se combina con el valor entrelazado.</span><span class="sxs-lookup"><span data-stu-id="984ff-131">This value is only meaningful when combined with the interlaced value.</span></span> |
| <span data-ttu-id="984ff-132">0x00000040</span><span class="sxs-lookup"><span data-stu-id="984ff-132">0x00000040</span></span> | <span data-ttu-id="984ff-133">Especifica que el ejemplo se codifica primero con el campo superior.</span><span class="sxs-lookup"><span data-stu-id="984ff-133">Specifies that the sample is encoded with the top field first.</span></span> <span data-ttu-id="984ff-134">Este valor solo es significativo cuando se combina con el valor entrelazado.</span><span class="sxs-lookup"><span data-stu-id="984ff-134">This value is only meaningful when combined with the interlaced value.</span></span>    |
| <span data-ttu-id="984ff-135">0x00000080</span><span class="sxs-lookup"><span data-stu-id="984ff-135">0x00000080</span></span> | <span data-ttu-id="984ff-136">Especifica que el ejemplo está entrelazado.</span><span class="sxs-lookup"><span data-stu-id="984ff-136">Specifies that the sample is interlaced.</span></span> <span data-ttu-id="984ff-137">Este es el único valor que es significativo para el códec DMOs.</span><span class="sxs-lookup"><span data-stu-id="984ff-137">This is the only value that is meaningful to the codec DMOs.</span></span>                                    |



 

<span data-ttu-id="984ff-138">Uno de los dos primeros valores siempre se combina con 0x80 usando **una operación OR** bit a bit antes de establecerse en el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="984ff-138">One of the first two values is always combined with 0x80 using a bitwise **OR** before being set on the sample.</span></span> <span data-ttu-id="984ff-139">Sin embargo, el codificador solo comprueba 0x80 y no tiene en cuenta el resto de la extensión.</span><span class="sxs-lookup"><span data-stu-id="984ff-139">However, the encoder only checks for 0x80 and disregards the rest of the extension.</span></span> <span data-ttu-id="984ff-140">Si la extensión identifica el ejemplo como entrelazado, el codificador mantiene el entrelazado de ejemplo en el flujo comprimido e inserta una marca de indicación en la secuencia para que el descodificador pueda identificar fotogramas entrelazados.</span><span class="sxs-lookup"><span data-stu-id="984ff-140">If the extension identifies the sample as interlaced, the encoder maintains the sample interlacing in the compressed stream, and embeds an indication flag in the stream so that the decoder can identify interlaced frames.</span></span> <span data-ttu-id="984ff-141">Cada ejemplo entrelazado está marcado, de modo que el contenido de origen que es una combinación de progresivo e entrelazado se puede codificar en un flujo.</span><span class="sxs-lookup"><span data-stu-id="984ff-141">Each interlaced sample is marked, so that source content that is a mix of progressive and interlaced can be encoded into a stream together.</span></span>

<span data-ttu-id="984ff-142">El objeto Windows Media Format SDK Writer incluye las extensiones de unidad de datos de tipo de contenido de los ejemplos que escribe en la sección de datos del contenedor ASF para su uso en el momento de la representación.</span><span class="sxs-lookup"><span data-stu-id="984ff-142">The Windows Media Format SDK writer object includes the content type data unit extensions in the samples that it writes to the data section of the ASF container for use at the time of rendering.</span></span>

## <a name="reading-and-rendering-interlaced-video"></a><span data-ttu-id="984ff-143">Lectura y representación de vídeo entrelazado</span><span class="sxs-lookup"><span data-stu-id="984ff-143">Reading and Rendering Interlaced Video</span></span>

<span data-ttu-id="984ff-144">El descodificador identifica las muestras entrelazadas basadas en la marca establecida en la secuencia por el codificador.</span><span class="sxs-lookup"><span data-stu-id="984ff-144">The decoder identifies interlaced samples based on the flag set in the stream by the encoder.</span></span> <span data-ttu-id="984ff-145">De forma predeterminada, el descodificador desentrelaza los ejemplos y proporciona salidas progresivas.</span><span class="sxs-lookup"><span data-stu-id="984ff-145">As a default, the decoder deinterlaces the samples and delivers progressive outputs.</span></span> <span data-ttu-id="984ff-146">La aplicación de reproducción puede configurar el descodificador para procesar las salidas con el entrelazado mantenido estableciendo la propiedad de [ \_ \_ desentrelazado del descodificador de MFPKEY](mfpkey-decoder-deinterlacingproperty.md) .</span><span class="sxs-lookup"><span data-stu-id="984ff-146">The player application can configure the decoder to process outputs with interlacing maintained by setting the [MFPKEY\_DECODER\_DEINTERLACING](mfpkey-decoder-deinterlacingproperty.md) property.</span></span>

<span data-ttu-id="984ff-147">La dificultad de la reproducción de vídeo entrelazado se produce después de que el descodificador entregue los ejemplos.</span><span class="sxs-lookup"><span data-stu-id="984ff-147">The difficulty in interlaced video playback arises after the decoder delivers the samples.</span></span> <span data-ttu-id="984ff-148">El representador (tarjeta de vídeo o chip en un dispositivo) no puede mostrar correctamente el contenido del vídeo sin conocer qué campo es.</span><span class="sxs-lookup"><span data-stu-id="984ff-148">The renderer (video card or chip in a device) cannot properly display the video content without knowing which field is which.</span></span> <span data-ttu-id="984ff-149">En aplicaciones que usan el SDK de Windows Media Format, la extensión de unidad de datos de tipo de contenido se recupera de los ejemplos sin comprimir y se puede pasar al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="984ff-149">In applications using the Windows Media Format SDK, the content type data unit extension is retrieved from the uncompressed samples, and can be passed to the device.</span></span>

<span data-ttu-id="984ff-150">Cuando se usan los objetos de códec directamente, ninguno de estos datos es automático.</span><span class="sxs-lookup"><span data-stu-id="984ff-150">When using the codec objects directly, none of this data transfer is automatic.</span></span> <span data-ttu-id="984ff-151">Debe implementar la compatibilidad con la extensión de unidad de datos, tanto en los objetos de búfer como en el contenedor que usa para el contenido codificado.</span><span class="sxs-lookup"><span data-stu-id="984ff-151">You must implement data-unit-extension support, both in your buffer objects and in the container that you use for your encoded content.</span></span> <span data-ttu-id="984ff-152">Los tipos más comunes de contenedores de medios (como AVI) no admiten metadatos de nivel de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="984ff-152">Most common types of media containers (like AVI) do not support sample-level metadata.</span></span> <span data-ttu-id="984ff-153">Puede implementar su propio sistema para almacenar los datos en el archivo y asociarlo a ejemplos individuales, pero solo un lector personalizado podrá recuperarlo.</span><span class="sxs-lookup"><span data-stu-id="984ff-153">You can implement your own system to store the data in the file and associate it with individual samples, but only a customized reader would be able to retrieve it.</span></span>

> [!Note]  
> <span data-ttu-id="984ff-154">Establecer la [propiedad \_ INTERLACEDCODINGENABLED de MFPKEY](mfpkey-interlacedcodingenabledproperty.md) en **true** y, a continuación, no enviar ningún ejemplo con la extensión de unidad de datos de tipo de contenido adjunta puede hacer que el codificador se bloquee.</span><span class="sxs-lookup"><span data-stu-id="984ff-154">Setting the [MFPKEY\_INTERLACEDCODINGENABLED](mfpkey-interlacedcodingenabledproperty.md) property to **TRUE**, and then not sending any samples with the content-type data-unit extension attached can cause the encoder to crash.</span></span> <span data-ttu-id="984ff-155">Establezca el codificador para la codificación entrelazada solo si tiene ejemplos entrelazados para entregarlos.</span><span class="sxs-lookup"><span data-stu-id="984ff-155">Set the encoder for interlaced encoding only if you have interlaced samples to deliver.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="984ff-156">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="984ff-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="984ff-157">Trabajar con vídeo</span><span class="sxs-lookup"><span data-stu-id="984ff-157">Working with Video</span></span>](workingwithvideo.md)
</dt> </dl>

 

 



