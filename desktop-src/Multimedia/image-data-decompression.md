---
title: Descompresión de Image-Data
description: Descompresión de Image-Data
ms.assetid: 4bff02be-dac8-41f4-a3af-2da6a2693ffe
keywords:
- Administrador de compresión de vídeo (VCM), descompresión de datos de imagen
- VCM (Administrador de compresión de vídeo), descompresión de datos de imagen
- Funciones de ICDecompressEx
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 25614f157436056f7f24c340f6cc6f4dbc62d9ae
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/19/2020
ms.locfileid: "104358885"
---
# <a name="image-data-decompression"></a><span data-ttu-id="d0c5c-106">Descompresión de Image-Data</span><span class="sxs-lookup"><span data-stu-id="d0c5c-106">Image-Data Decompression</span></span>

<span data-ttu-id="d0c5c-107">La aplicación usa una serie de funciones [**ICDecompressEx**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) para controlar el descompresor.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-107">Your application uses a series of [**ICDecompressEx**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) functions to control the decompressor.</span></span> <span data-ttu-id="d0c5c-108">Las funciones pueden ayudarle a realizar las siguientes tareas:</span><span class="sxs-lookup"><span data-stu-id="d0c5c-108">The functions can help you perform the following tasks:</span></span>

-   <span data-ttu-id="d0c5c-109">Seleccione un descompresor.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-109">Select a decompressor.</span></span>
-   <span data-ttu-id="d0c5c-110">Prepare el descompresor.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-110">Prepare the decompressor.</span></span>
-   <span data-ttu-id="d0c5c-111">Descomprimir los datos.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-111">Decompress the data.</span></span>
-   <span data-ttu-id="d0c5c-112">Descompresión final.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-112">End decompression.</span></span>

<span data-ttu-id="d0c5c-113">La aplicación controla la descompresión de forma similar a la forma en que controla la compresión, salvo que el formato de entrada es un formato comprimido y el formato de salida es un formato que se pueda mostrar.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-113">Your application handles decompression similarly to the way it handles compression, except that the input format is a compressed format and the output format is a displayable format.</span></span> <span data-ttu-id="d0c5c-114">El formato de entrada para la descompresión se suele obtener del encabezado de flujo.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-114">The input format for decompression is usually obtained from the stream header.</span></span> <span data-ttu-id="d0c5c-115">Después de determinar el formato de entrada, la aplicación puede usar las funciones [**ICLocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) o [**ICOpen**](/windows/desktop/api/Vfw/nf-vfw-icopen) para buscar un descompresor que pueda controlarlo.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-115">After determining the input format, your application can use the [**ICLocate**](/windows/desktop/api/Vfw/nf-vfw-iclocate) or [**ICOpen**](/windows/desktop/api/Vfw/nf-vfw-icopen) functions to find a decompressor that can handle it.</span></span>

<span data-ttu-id="d0c5c-116">Las funciones y macros de [**ICDecompressEx**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) son un supraconjunto del grupo de funciones [**ICDecompress**](/windows/desktop/api/Vfw/nf-vfw-icdecompress) y proporcionan más capacidades.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-116">The [**ICDecompressEx**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) functions and macros are a superset of the [**ICDecompress**](/windows/desktop/api/Vfw/nf-vfw-icdecompress) function group and provide more capabilities.</span></span> <span data-ttu-id="d0c5c-117">La funcionalidad de **ICDecompressEx**, [**ICDecompressExBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin), [**ICDecompressExEnd**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexend)y [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) reemplaza a las funciones **ICDecompress**, [**ICDecompressBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressbegin), [**ICDecompressEnd**](/windows/desktop/api/Vfw/nf-vfw-icdecompressend)y [**ICDecompressQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressquery) .</span><span class="sxs-lookup"><span data-stu-id="d0c5c-117">The functionality of **ICDecompressEx**, [**ICDecompressExBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin), [**ICDecompressExEnd**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexend), and [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) replaces that of the **ICDecompress**, [**ICDecompressBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressbegin), [**ICDecompressEnd**](/windows/desktop/api/Vfw/nf-vfw-icdecompressend), and [**ICDecompressQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressquery) functions.</span></span> <span data-ttu-id="d0c5c-118">Use las funciones y macros de **ICDecompressEx** en lugar de los equivalentes de **ICDecompress** .</span><span class="sxs-lookup"><span data-stu-id="d0c5c-118">Use the **ICDecompressEx** functions and macros in place of the **ICDecompress** equivalents.</span></span>

## <a name="decompressor-and-decompression-format-selection"></a><span data-ttu-id="d0c5c-119">Selección de descompresor y descompresión de formato</span><span class="sxs-lookup"><span data-stu-id="d0c5c-119">Decompressor and Decompression Format Selection</span></span>

<span data-ttu-id="d0c5c-120">Si desea descomprimir datos y la aplicación requiere un formato de salida específico, puede usar la función [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) para consultar el descompresor y determinar si admite los formatos de entrada y salida.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-120">If you want to decompress data and your application requires a specific output format, you can use the [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) function to query the decompressor to determine if it supports the input and output formats.</span></span>

<span data-ttu-id="d0c5c-121">Si el formato de salida no es importante en la aplicación, solo necesita buscar un descompresor que pueda controlar el formato de entrada.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-121">If the output format is not important in your application, you need only find a decompressor that can handle the input format.</span></span> <span data-ttu-id="d0c5c-122">Para determinar si un descompresor puede controlar el formato de entrada, use [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) y especifique **null** para el parámetro *lpbiDst* .</span><span class="sxs-lookup"><span data-stu-id="d0c5c-122">To determine if a decompressor can handle the input format, use [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery) and specify **NULL** for the *lpbiDst* parameter.</span></span> <span data-ttu-id="d0c5c-123">La aplicación puede determinar el tamaño de búfer necesario para los datos que especifican el formato de descompresión mediante el envío del mensaje de descompresión [**ICM \_ \_ Get \_ Format**](icm-decompress-get-format.md) (o use la macro [**ICDecompressGetFormatSize**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetformatsize) ).</span><span class="sxs-lookup"><span data-stu-id="d0c5c-123">Your application can determine the buffer size needed for the data specifying the decompression format by sending the [**ICM\_DECOMPRESS\_GET\_FORMAT**](icm-decompress-get-format.md) message (or use the [**ICDecompressGetFormatSize**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetformatsize) macro).</span></span> <span data-ttu-id="d0c5c-124">También puede enviar el **\_ formato de \_ obtención \_ descomprime ICM** (o la macro [**ICDecompressGetFormat**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetformat) ) para recuperar los datos de formato.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-124">You can also send **ICM\_DECOMPRESS\_GET\_FORMAT** (or the [**ICDecompressGetFormat**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetformat) macro) to retrieve the format data.</span></span> <span data-ttu-id="d0c5c-125">El descompresor devuelve su formato sugerido en una estructura [**bitmapinfo (**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) .</span><span class="sxs-lookup"><span data-stu-id="d0c5c-125">The decompressor returns its suggested format in a [**BITMAPINFO**](/windows/win32/api/wingdi/ns-wingdi-bitmapinfo) structure.</span></span> <span data-ttu-id="d0c5c-126">Este formato normalmente conserva más información durante la descompresión.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-126">This format typically preserves the most information during decompression.</span></span> <span data-ttu-id="d0c5c-127">La aplicación debe asegurarse de que el descompresor se devuelve correctamente antes de descomprimir la información.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-127">Your application should ensure that the decompressor returns successfully before it decompresses the information.</span></span>

<span data-ttu-id="d0c5c-128">Dado que la aplicación asigna la memoria necesaria para la descompresión, debe determinar la cantidad máxima de memoria que puede requerir el descompresor para el formato de salida.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-128">Because your application allocates the memory required for decompression, it needs to determine the maximum memory the decompressor can require for the output format.</span></span> <span data-ttu-id="d0c5c-129">El mensaje de **\_ descompresión ICM \_ Get \_ Format** obtiene el número de bytes que usa el descompresor para el formato predeterminado.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-129">The **ICM\_DECOMPRESS\_GET\_FORMAT** message obtains the number of bytes the decompressor uses for the default format.</span></span>

<span data-ttu-id="d0c5c-130">Si la aplicación define su propio formato mediante [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery), también debe obtener una paleta para el mapa de bits; **ICDecompressExQuery** no proporciona definiciones de paleta.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-130">If your application defines its own format by using [**ICDecompressExQuery**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexquery), it must also obtain a palette for the bitmap; **ICDecompressExQuery** does not provide palette definitions.</span></span> <span data-ttu-id="d0c5c-131">(La mayoría de las aplicaciones usan formatos estándar y no necesitan obtener una paleta). La aplicación puede obtener la paleta mediante el envío del mensaje de la [**\_ paleta de descompresión ICM \_ Get \_**](icm-decompress-get-palette.md) (o usar la macro [**ICDecompressGetPalette**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetpalette) ).</span><span class="sxs-lookup"><span data-stu-id="d0c5c-131">(Most applications use standard formats and do not need to obtain a palette.) Your application can obtain the palette by sending the [**ICM\_DECOMPRESS\_GET\_PALETTE**](icm-decompress-get-palette.md) message (or use the [**ICDecompressGetPalette**](/windows/desktop/api/Vfw/nf-vfw-icdecompressgetpalette) macro).</span></span>

## <a name="decompressor-initialization"></a><span data-ttu-id="d0c5c-132">Inicialización descompresor</span><span class="sxs-lookup"><span data-stu-id="d0c5c-132">Decompressor Initialization</span></span>

<span data-ttu-id="d0c5c-133">Una vez que la aplicación selecciona un descompresor que puede controlar los formatos de entrada y salida que necesita, puede inicializar el descompresor mediante la función [**ICDecompressExBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin) .</span><span class="sxs-lookup"><span data-stu-id="d0c5c-133">After your application selects a decompressor that can handle the input and output formats it needs, you can initialize the decompressor by using the [**ICDecompressExBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin) function.</span></span> <span data-ttu-id="d0c5c-134">Esta función requiere el controlador de descompresor y los formatos de entrada y salida.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-134">This function requires the decompressor handle and the input and output formats.</span></span>

## <a name="data-decompression"></a><span data-ttu-id="d0c5c-135">Descompresión de datos</span><span class="sxs-lookup"><span data-stu-id="d0c5c-135">Data Decompression</span></span>

<span data-ttu-id="d0c5c-136">Puede usar la función [**ICDecompressEx**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) para descomprimir un fotograma.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-136">You can use the [**ICDecompressEx**](/windows/desktop/api/Vfw/nf-vfw-icdecompressex) function to decompress a frame.</span></span> <span data-ttu-id="d0c5c-137">La aplicación debe usar esta función repetidamente hasta que se descomprimen todos los marcos de una secuencia.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-137">Your application must use this function repeatedly until all the frames in a sequence are decompressed.</span></span>

<span data-ttu-id="d0c5c-138">Si el flujo de vídeo se encuentra detrás de otros componentes (como audio) durante la reproducción, la aplicación puede especificar la marca **ICDECOMPRESS \_ HURRYUP** para acelerar la descompresión.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-138">If your video stream lags behind other components (such as audio) during playback, your application can specify the **ICDECOMPRESS\_HURRYUP** flag to speed decompression.</span></span> <span data-ttu-id="d0c5c-139">Para ello, un descompresor podría extraer solo la información que necesita para descomprimir el fotograma siguiente y no descomprimir completamente el fotograma actual.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-139">To do this, a decompressor might extract only the information it needs to decompress the next frame and not fully decompress the current frame.</span></span> <span data-ttu-id="d0c5c-140">Por lo tanto, la aplicación no debe intentar dibujar los datos descomprimidos cuando usa esta marca.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-140">Therefore, your application should not try to draw the decompressed data when it uses this flag.</span></span>

<span data-ttu-id="d0c5c-141">Una vez que la aplicación haya descomprimido los datos, puede enviar el mensaje de [**\_ \_ finalización de DECOMPRESSEX ICM**](icm-decompressex-end.md) (o usar la macro [**ICDecompressExEnd**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexend) ) para notificar al descompresor que ha finalizado.</span><span class="sxs-lookup"><span data-stu-id="d0c5c-141">After your application has decompressed the data, it can send the [**ICM\_DECOMPRESSEX\_END**](icm-decompressex-end.md) message (or use the [**ICDecompressExEnd**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexend) macro) to notify the decompressor that it has finished.</span></span> <span data-ttu-id="d0c5c-142">Si desea reiniciar la descompresión después de usar esta función, la aplicación debe reinicializar el descompresor mediante [**ICDecompressExBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin).</span><span class="sxs-lookup"><span data-stu-id="d0c5c-142">If you want to restart decompression after using this function, your application must reinitialize the decompressor by using [**ICDecompressExBegin**](/windows/desktop/api/Vfw/nf-vfw-icdecompressexbegin).</span></span>

## <a name="related-topics"></a><span data-ttu-id="d0c5c-143">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="d0c5c-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d0c5c-144">VCM servicios</span><span class="sxs-lookup"><span data-stu-id="d0c5c-144">VCM Services</span></span>](vcm-services.md)
</dt> </dl>

 

 