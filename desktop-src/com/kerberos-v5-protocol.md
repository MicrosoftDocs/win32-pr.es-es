---
title: Protocolo Kerberos V5
description: Protocolo Kerberos V5
ms.assetid: a53a1edf-f374-4cbf-8050-7cde45284157
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 68d78c4bdc457007c04ad66163e2ebfd7f5397f9
ms.sourcegitcommit: 3e70ae762629e244028b437420ed50b5850db4e3
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/20/2020
ms.locfileid: "105714341"
---
# <a name="kerberos-v5-protocol"></a><span data-ttu-id="26d9b-103">Protocolo Kerberos V5</span><span class="sxs-lookup"><span data-stu-id="26d9b-103">Kerberos v5 Protocol</span></span>

<span data-ttu-id="26d9b-104">El protocolo de autenticación Kerberos V5 tiene un identificador de servicio de autenticación de RPC \_ C \_ authn \_ GSS \_ Kerberos.</span><span class="sxs-lookup"><span data-stu-id="26d9b-104">The Kerberos v5 authentication protocol has an authentication service identifier of RPC\_C\_AUTHN\_GSS\_KERBEROS.</span></span> <span data-ttu-id="26d9b-105">El protocolo Kerberos define el modo en que los clientes interactúan con un servicio de autenticación de red y fueron estandarizados por Internet Engineering Task Force (IETF) en septiembre de 1993, en el documento [RFC 1510](https://www.ietf.org/rfc/rfc1510.txt).</span><span class="sxs-lookup"><span data-stu-id="26d9b-105">The Kerberos protocol defines how clients interact with a network authentication service and was standardized by the Internet Engineering Task Force (IETF) in September 1993, in document [RFC 1510](https://www.ietf.org/rfc/rfc1510.txt).</span></span> <span data-ttu-id="26d9b-106">Los clientes obtienen vales del Centro de distribución de claves Kerberos (KDC) y presentan estos vales a los servidores cuando se establecen las conexiones.</span><span class="sxs-lookup"><span data-stu-id="26d9b-106">Clients obtain tickets from the Kerberos Key Distribution Center (KDC), and they present these tickets to servers when connections are established.</span></span> <span data-ttu-id="26d9b-107">Los vales de Kerberos representan las credenciales de red del cliente.</span><span class="sxs-lookup"><span data-stu-id="26d9b-107">Kerberos tickets represent the client's network credentials.</span></span>

<span data-ttu-id="26d9b-108">Al igual que NTLM, el protocolo Kerberos utiliza el nombre de dominio, el nombre de usuario y la contraseña para representar la identidad del cliente.</span><span class="sxs-lookup"><span data-stu-id="26d9b-108">Like NTLM, the Kerberos protocol uses the domain name, user name, and password to represent the client's identity.</span></span> <span data-ttu-id="26d9b-109">El vale de Kerberos inicial obtenido del KDC cuando el usuario inicia sesión se basa en un hash cifrado de la contraseña del usuario.</span><span class="sxs-lookup"><span data-stu-id="26d9b-109">The initial Kerberos ticket obtained from the KDC when the user logs on is based on an encrypted hash of the user's password.</span></span> <span data-ttu-id="26d9b-110">Este vale inicial se almacena en caché.</span><span class="sxs-lookup"><span data-stu-id="26d9b-110">This initial ticket is cached.</span></span> <span data-ttu-id="26d9b-111">Cuando el usuario intenta conectarse a un servidor, el protocolo Kerberos comprueba la caché de vales en busca de un vale válido para ese servidor.</span><span class="sxs-lookup"><span data-stu-id="26d9b-111">When the user tries to connect to a server, the Kerberos protocol checks the ticket cache for a valid ticket for that server.</span></span> <span data-ttu-id="26d9b-112">Si no hay ninguno disponible, el vale inicial del usuario se envía al KDC junto con una solicitud de vale para el servidor especificado.</span><span class="sxs-lookup"><span data-stu-id="26d9b-112">If one is not available, the initial ticket for the user is sent to the KDC along with a request for a ticket for the specified server.</span></span> <span data-ttu-id="26d9b-113">Ese vale de sesión se agrega a la memoria caché y se puede usar para conectarse al mismo servidor hasta que expire el vale.</span><span class="sxs-lookup"><span data-stu-id="26d9b-113">That session ticket is added to the cache, and it can be used to connect to the same server until the ticket expires.</span></span>

<span data-ttu-id="26d9b-114">Cuando un servidor llama a [**CoQueryClientBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-coqueryclientblanket) con el protocolo Kerberos, se devuelven el nombre de dominio y el nombre de usuario del cliente.</span><span class="sxs-lookup"><span data-stu-id="26d9b-114">When a server calls [**CoQueryClientBlanket**](/windows/desktop/api/combaseapi/nf-combaseapi-coqueryclientblanket) using the Kerberos protocol, the client's domain name and user name are returned.</span></span> <span data-ttu-id="26d9b-115">Cuando un servidor llama a [**CoImpersonateClient**](/windows/desktop/api/combaseapi/nf-combaseapi-coimpersonateclient), se devuelve el token del cliente.</span><span class="sxs-lookup"><span data-stu-id="26d9b-115">When a server calls [**CoImpersonateClient**](/windows/desktop/api/combaseapi/nf-combaseapi-coimpersonateclient), the client's token is returned.</span></span> <span data-ttu-id="26d9b-116">Estos comportamientos son los mismos que cuando se usa NTLM.</span><span class="sxs-lookup"><span data-stu-id="26d9b-116">These behaviors are the same as when using NTLM.</span></span>

<span data-ttu-id="26d9b-117">El protocolo Kerberos funciona a través de los límites del equipo.</span><span class="sxs-lookup"><span data-stu-id="26d9b-117">The Kerberos protocol works across computer boundaries.</span></span> <span data-ttu-id="26d9b-118">Los equipos cliente y servidor deben estar en dominios y esos dominios deben tener una relación de confianza.</span><span class="sxs-lookup"><span data-stu-id="26d9b-118">The client and server computers must both be in domains, and those domains must have a trust relationship.</span></span>

<span data-ttu-id="26d9b-119">El protocolo Kerberos requiere autenticación mutua y la admite de forma remota.</span><span class="sxs-lookup"><span data-stu-id="26d9b-119">The Kerberos protocol requires mutual authentication and supports it remotely.</span></span> <span data-ttu-id="26d9b-120">El cliente debe especificar el nombre principal del servidor y la identidad del servidor debe coincidir exactamente con el nombre de la entidad de seguridad.</span><span class="sxs-lookup"><span data-stu-id="26d9b-120">The client must specify the principal name of the server, and the server's identity must match that principal name exactly.</span></span> <span data-ttu-id="26d9b-121">Si el cliente especifica **null** para el nombre principal del servidor o si el nombre de la entidad de seguridad no coincide con el servidor, se producirá un error en la llamada.</span><span class="sxs-lookup"><span data-stu-id="26d9b-121">If the client specifies **NULL** for the server's principal name or if the principal name doesn't match the server, the call will fail.</span></span>

<span data-ttu-id="26d9b-122">Con el protocolo Kerberos, se pueden usar los niveles de suplantación de identidad, suplantar y delegado.</span><span class="sxs-lookup"><span data-stu-id="26d9b-122">With the Kerberos protocol, the impersonation levels identify, impersonate, and delegate can be used.</span></span> <span data-ttu-id="26d9b-123">Cuando un servidor llama a [**CoImpersonateClient**](/windows/desktop/api/combaseapi/nf-combaseapi-coimpersonateclient), el token devuelto es válido fuera del equipo durante un período de tiempo entre 5 minutos y 8 horas.</span><span class="sxs-lookup"><span data-stu-id="26d9b-123">When a server calls [**CoImpersonateClient**](/windows/desktop/api/combaseapi/nf-combaseapi-coimpersonateclient), the token returned is valid off the computer for some time period between 5 minutes and 8 hours.</span></span> <span data-ttu-id="26d9b-124">Después de este tiempo, solo se puede usar en el equipo servidor.</span><span class="sxs-lookup"><span data-stu-id="26d9b-124">After this time, it can be used on the server computer only.</span></span> <span data-ttu-id="26d9b-125">Si un servidor se "ejecuta como Activator" y la activación se realiza con el protocolo Kerberos, el token del servidor expirará entre 5 minutos y 8 horas después de la activación.</span><span class="sxs-lookup"><span data-stu-id="26d9b-125">If a server is "run as activator" and the activation is done with the Kerberos protocol, the server's token will expire between 5 minutes and 8 hours after activation.</span></span>

<span data-ttu-id="26d9b-126">El protocolo de autenticación de Kerberos V5 implementado por Windows admite la [ocultación](cloaking.md).</span><span class="sxs-lookup"><span data-stu-id="26d9b-126">The Kerberos v5 authentication protocol implemented by WindowsÂ supports [cloaking](cloaking.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="26d9b-127">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="26d9b-127">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="26d9b-128">COM y paquetes de seguridad</span><span class="sxs-lookup"><span data-stu-id="26d9b-128">COM and Security Packages</span></span>](com-and-security-packages.md)
</dt> </dl>

 

 




