---
description: Mediante el uso de los componentes de las API de notificación, se puede notificar al indexador que un elemento se ha cambiado, se ha migrado o eliminado, y puede Agregar ámbitos de búsqueda a la cola de direcciones URL del indexador de Windows Search que requieren indexación.
ms.assetid: 817550e2-a256-48d5-9fa6-1ea04f8b8589
title: Notificar el índice de cambios (búsqueda de Windows)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f5a89112da20c4010e1fc23fab16778309195d20
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104153988"
---
# <a name="notifying-the-index-of-changes-windows-search"></a><span data-ttu-id="e780e-103">Notificar el índice de cambios (búsqueda de Windows)</span><span class="sxs-lookup"><span data-stu-id="e780e-103">Notifying the Index of Changes (Windows Search)</span></span>

<span data-ttu-id="e780e-104">Mediante el uso de los componentes de las API de notificación, se puede notificar al indexador que un elemento se ha cambiado, se ha migrado o eliminado, y puede Agregar ámbitos de búsqueda a la cola de direcciones URL del indexador de Windows Search que requieren indexación.</span><span class="sxs-lookup"><span data-stu-id="e780e-104">By using the notification APIs components can notify the indexer that an item has been changed, moved or deleted, and can add search scopes to the Windows Search indexer's queue of URLs that require indexing.</span></span>

<span data-ttu-id="e780e-105">Los componentes pueden notificar al indizador de Windows Search que han cambiado los datos de su almacén.</span><span class="sxs-lookup"><span data-stu-id="e780e-105">Components can notify the Windows Search indexer that data in their store has changed.</span></span> <span data-ttu-id="e780e-106">Normalmente, puede confiar en los rastreos programados del indexador.</span><span class="sxs-lookup"><span data-stu-id="e780e-106">Typically, you can rely on the indexer's scheduled crawls.</span></span> <span data-ttu-id="e780e-107">Sin embargo, proporcionar notificaciones al indexador puede mejorar el rendimiento asegurándose de que el indexador no rastrea todo el almacén en los índices incrementales.</span><span class="sxs-lookup"><span data-stu-id="e780e-107">However, providing notifications to the indexer can improve performance by ensuring the indexer doesn't crawl the entire store on incremental indexes.</span></span> <span data-ttu-id="e780e-108">Por ejemplo, esto podría recomendarse si se espera que el almacén de datos sea excepcionalmente grande o que esté disponible de forma excepcional, como por ejemplo, un almacén de datos de correo electrónico.</span><span class="sxs-lookup"><span data-stu-id="e780e-108">For example, this might recommended if you expect your data store to be exceptionally large and/or exceptionally busy, such as an email data store for example.</span></span>

-   [<span data-ttu-id="e780e-109">Implementación de notificaciones administradas por el indexador</span><span class="sxs-lookup"><span data-stu-id="e780e-109">Implementing Indexer-managed Notifications</span></span>](#implementing-indexer-managed-notifications)
    -   [<span data-ttu-id="e780e-110">Cola de notificaciones</span><span class="sxs-lookup"><span data-stu-id="e780e-110">Notifications Queue</span></span>](#notifications-queue)
    -   [<span data-ttu-id="e780e-111">ISearchPersistentItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="e780e-111">ISearchPersistentItemsChangedSink</span></span>](#isearchpersistentitemschangedsink)
-   [<span data-ttu-id="e780e-112">Implementación de notificaciones administradas por el proveedor</span><span class="sxs-lookup"><span data-stu-id="e780e-112">Implementing Provider-managed Notifications</span></span>](#implementing-provider-managed-notifications)
    -   [<span data-ttu-id="e780e-113">Cola de notificaciones</span><span class="sxs-lookup"><span data-stu-id="e780e-113">Notifications Queue</span></span>](#notifications-queue)
    -   [<span data-ttu-id="e780e-114">ISearchItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="e780e-114">ISearchItemsChangedSink</span></span>](#isearchitemschangedsink)
    -   [<span data-ttu-id="e780e-115">ISearchNotifyInlineSite</span><span class="sxs-lookup"><span data-stu-id="e780e-115">ISearchNotifyInlineSite</span></span>](#isearchnotifyinlinesite)
-   [<span data-ttu-id="e780e-116">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="e780e-116">Additional Resources</span></span>](#additional-resources)
-   [<span data-ttu-id="e780e-117">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e780e-117">Related topics</span></span>](#related-topics)

## <a name="implementing-indexer-managed-notifications"></a><span data-ttu-id="e780e-118">Implementación de notificaciones administradas por el indexador</span><span class="sxs-lookup"><span data-stu-id="e780e-118">Implementing Indexer-managed Notifications</span></span>

<span data-ttu-id="e780e-119">Las notificaciones administradas por indexador le permiten controlar el acceso a su almacén de datos a la vez que se le libera de mantener la cola de notificaciones en todo el proceso de indexación.</span><span class="sxs-lookup"><span data-stu-id="e780e-119">Indexer-managed notifications enable you to control access to your data store while freeing you of maintaining the notifications queue throughout the entire indexing process.</span></span> <span data-ttu-id="e780e-120">El proveedor de notificaciones debe supervisar los cambios en el almacén de datos y crear una cola de notificaciones.</span><span class="sxs-lookup"><span data-stu-id="e780e-120">Your notifications provider must monitor changes to the data store and create a notifications queue.</span></span> <span data-ttu-id="e780e-121">Periódicamente, el proveedor envía un lote de notificaciones de cambio al indexador.</span><span class="sxs-lookup"><span data-stu-id="e780e-121">Periodically, your provider sends a batch of change notifications to the indexer.</span></span> <span data-ttu-id="e780e-122">Cuando el indexador recibe las notificaciones, devuelve una confirmación y puede quitar los elementos de la cola.</span><span class="sxs-lookup"><span data-stu-id="e780e-122">When the indexer receives your notifications, it returns an acknowledgement and you can remove the item(s) from your queue.</span></span> <span data-ttu-id="e780e-123">Si después de un período de tiempo no recibe un reconocimiento, puede volver a enviar las notificaciones.</span><span class="sxs-lookup"><span data-stu-id="e780e-123">If after a period of time you do not receive an acknowledgement, you can re-send the notifications.</span></span> <span data-ttu-id="e780e-124">En caso de error, el indizador vuelve a generar su cola interna de elementos para rastrear o realiza un rastreo incremental del almacén.</span><span class="sxs-lookup"><span data-stu-id="e780e-124">In case of failure, the indexer rebuilds its internal queue of items to crawl or performs an incremental crawl of the store.</span></span>

<span data-ttu-id="e780e-125">Para implementar notificaciones administradas por el indexador, debe implementar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e780e-125">To implement indexer-managed notifications, you need to implement the following:</span></span>

-   <span data-ttu-id="e780e-126">Mecanismo para supervisar los cambios en el almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="e780e-126">A mechanism for monitoring changes in your data store.</span></span>
-   <span data-ttu-id="e780e-127">Una estructura de datos para poner en cola información (varias estructuras de [**\_ \_ \_ cambio persistentes de elementos de búsqueda**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) ) sobre esos cambios.</span><span class="sxs-lookup"><span data-stu-id="e780e-127">A data structure to queue up information (multiple [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures) about those changes.</span></span>
-   <span data-ttu-id="e780e-128">La interfaz [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) para enviar las notificaciones al indexador y para obtener confirmaciones de notificación del indexador.</span><span class="sxs-lookup"><span data-stu-id="e780e-128">[**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) interface to send your notifications to the indexer and to get notification acknowledgements from the indexer.</span></span>

### <a name="notifications-queue"></a><span data-ttu-id="e780e-129">Cola de notificaciones</span><span class="sxs-lookup"><span data-stu-id="e780e-129">Notifications Queue</span></span>

<span data-ttu-id="e780e-130">Debe supervisar y poner en cola todos los cambios en el almacén de datos para enviarlos al indexador como una notificación.</span><span class="sxs-lookup"><span data-stu-id="e780e-130">You need to monitor and queue up every change in your data store to send to the indexer as a notification.</span></span> <span data-ttu-id="e780e-131">El número de notificaciones que se ponen en cola y la frecuencia con que se envían al indexador depende de su circunstancia.</span><span class="sxs-lookup"><span data-stu-id="e780e-131">How many notifications you queue up and how frequently you send them to the indexer depends on your circumstance.</span></span> <span data-ttu-id="e780e-132">Es posible que se envíe un lote de notificaciones por cada *n* cambios o después de algún intervalo de tiempo *t* o de una combinación de ambos.</span><span class="sxs-lookup"><span data-stu-id="e780e-132">Perhaps you send a batch of notifications for every *n* number of changes or after some *t* time interval, or a combination of the two.</span></span>

<span data-ttu-id="e780e-133">El indexador espera que las notificaciones se incluyan en una matriz de estructuras de [**\_ \_ \_ cambio persistentes de elementos de búsqueda**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) , por lo que puede optar por implementar la cola de forma similar.</span><span class="sxs-lookup"><span data-stu-id="e780e-133">The indexer expects the notifications to come in an array of [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures, so you may choose to implement your queue similarly.</span></span>

### <a name="isearchpersistentitemschangedsink"></a><span data-ttu-id="e780e-134">ISearchPersistentItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="e780e-134">ISearchPersistentItemsChangedSink</span></span>

<span data-ttu-id="e780e-135">Para tener acceso a esta interfaz, primero cree una instancia de un objeto [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) para obtener acceso a un objeto [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="e780e-135">To access this interface, you first instantiate an [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) object to gain access to an [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="e780e-136">Desde ese objeto **ISearchCatalogManager** , crea una instancia de un objeto [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) y notifica al indexador de los cambios de datos con una llamada al método **OnItemsChanged** .</span><span class="sxs-lookup"><span data-stu-id="e780e-136">From that **ISearchCatalogManager** object, you instantiate an [**ISearchPersistentItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchpersistentitemschangedsink) object and notify the indexer of the data changes with a call to the **OnItemsChanged** method.</span></span>

<span data-ttu-id="e780e-137">En la llamada a este método, se incluye el número de cambios que se están informando y una matriz de estructuras de [**\_ \_ \_ cambio persistente del elemento de búsqueda**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) .</span><span class="sxs-lookup"><span data-stu-id="e780e-137">In the call to this method, you include the number of changes being reported and an array of [**SEARCH\_ITEM\_PERSISTENT\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_persistent_change) structures.</span></span> <span data-ttu-id="e780e-138">Obtiene una matriz de códigos de finalización de recursos humanos que indican si se aceptó cada dirección URL para la indexación.</span><span class="sxs-lookup"><span data-stu-id="e780e-138">You get back an array of HR completion codes indicating whether each URL was accepted for indexing.</span></span> <span data-ttu-id="e780e-139">Esta es la confirmación del indexador.</span><span class="sxs-lookup"><span data-stu-id="e780e-139">This is your acknowledgement from the indexer.</span></span>

## <a name="implementing-provider-managed-notifications"></a><span data-ttu-id="e780e-140">Implementación de notificaciones administradas por el proveedor</span><span class="sxs-lookup"><span data-stu-id="e780e-140">Implementing Provider-managed Notifications</span></span>

<span data-ttu-id="e780e-141">Las notificaciones administradas por el proveedor permiten controlar el acceso al almacén de datos y supervisar el progreso del indexador mientras actualiza el catálogo de Windows Search.</span><span class="sxs-lookup"><span data-stu-id="e780e-141">Provider-managed notifications enable you to control access to your data store and to monitor the progress of the indexer as it updates the Windows Search catalog.</span></span> <span data-ttu-id="e780e-142">El proveedor debe supervisar los cambios en el almacén de datos y crear una cola de notificaciones.</span><span class="sxs-lookup"><span data-stu-id="e780e-142">Your provider must monitor changes to the data store and create a notifications queue.</span></span> <span data-ttu-id="e780e-143">Periódicamente, el proveedor envía un lote de notificaciones de cambio al indexador.</span><span class="sxs-lookup"><span data-stu-id="e780e-143">Periodically, your provider sends a batch of change notifications to the indexer.</span></span> <span data-ttu-id="e780e-144">Cuando el indexador recibe las notificaciones, devuelve una confirmación.</span><span class="sxs-lookup"><span data-stu-id="e780e-144">When the indexer receives your notifications, it returns an acknowledgement.</span></span> <span data-ttu-id="e780e-145">Si después de un período de tiempo no recibe un reconocimiento, puede volver a enviar las notificaciones.</span><span class="sxs-lookup"><span data-stu-id="e780e-145">If after a period of time you do not receive an acknowledgement, you can re-send the notifications.</span></span> <span data-ttu-id="e780e-146">A medida que el indexador rastrea el almacén de datos y actualiza el catálogo de Windows Search, notifica al proveedor de cada actualización del catálogo y puede quitar los elementos de la cola.</span><span class="sxs-lookup"><span data-stu-id="e780e-146">As the indexer crawls the data store and updates the Windows Search catalog, it notifies your provider of each catalog update and you can remove the item(s) from your queue.</span></span> <span data-ttu-id="e780e-147">El proveedor mantiene su cola de notificación a lo largo de este proceso, de modo que, en caso de error, pueda volver a enviar las notificaciones al indexador.</span><span class="sxs-lookup"><span data-stu-id="e780e-147">Your provider maintains its notification queue throughout this process so that in case of failure, you can resend notifications to the indexer.</span></span>

<span data-ttu-id="e780e-148">Para implementar notificaciones administradas por el proveedor, debe implementar lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e780e-148">To implement provider-managed notifications, you need to implement the following:</span></span>

-   <span data-ttu-id="e780e-149">Mecanismo para supervisar los cambios en el almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="e780e-149">A mechanism for monitoring changes in your data store.</span></span>
-   <span data-ttu-id="e780e-150">Una estructura de datos para poner en cola la información (varias estructuras de [**\_ \_ cambio de elementos de búsqueda**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) ) sobre esos cambios.</span><span class="sxs-lookup"><span data-stu-id="e780e-150">A data structure to queue up information (multiple [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures) about those changes.</span></span>
-   <span data-ttu-id="e780e-151">La interfaz [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) para enviar las notificaciones al indexador y para obtener confirmaciones de notificación del indexador.</span><span class="sxs-lookup"><span data-stu-id="e780e-151">[**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) interface to send your notifications to the indexer and to get notification acknowledgements from the indexer.</span></span>
-   <span data-ttu-id="e780e-152">Interfaz [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) para recibir actualizaciones sobre el estado de la indización.</span><span class="sxs-lookup"><span data-stu-id="e780e-152">[**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface to receive updates about the status of indexing.</span></span>

### <a name="notifications-queue"></a><span data-ttu-id="e780e-153">Cola de notificaciones</span><span class="sxs-lookup"><span data-stu-id="e780e-153">Notifications Queue</span></span>

<span data-ttu-id="e780e-154">Debe supervisar y poner en cola todos los cambios en el almacén de datos para enviarlos al indexador como una notificación.</span><span class="sxs-lookup"><span data-stu-id="e780e-154">You need to monitor and queue up every change in your data store to send to the indexer as a notification.</span></span> <span data-ttu-id="e780e-155">El número de notificaciones que se ponen en cola y la frecuencia con que se envían al indexador depende de su circunstancia.</span><span class="sxs-lookup"><span data-stu-id="e780e-155">How many notifications you queue up and how frequently you send them to the indexer depends on your circumstance.</span></span> <span data-ttu-id="e780e-156">Es posible que se envíe un lote de notificaciones por cada *n* cambios o después de algún intervalo de tiempo *t* o de una combinación de ambos.</span><span class="sxs-lookup"><span data-stu-id="e780e-156">Perhaps you send a batch of notifications for every *n* number of changes or after some *t* time interval, or a combination of the two.</span></span>

<span data-ttu-id="e780e-157">El indexador espera que las notificaciones aparezcan en una matriz de estructuras de [**\_ \_ cambio de elementos de búsqueda**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) , por lo que puede optar por almacenar la información de los cambios de forma similar.</span><span class="sxs-lookup"><span data-stu-id="e780e-157">The indexer expects the notifications to come in an array of [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures, so you may choose to store change information similarly.</span></span> <span data-ttu-id="e780e-158">Sin embargo, también debe poder hacer coincidir las notificaciones que envíe con las confirmaciones y las actualizaciones devueltas por el indexador.</span><span class="sxs-lookup"><span data-stu-id="e780e-158">However, you also need to be able to match the notifications you send with the acknowledgements and updates returned by the indexer.</span></span> <span data-ttu-id="e780e-159">Es posible que también desee poder detectar el tiempo necesario para obtener confirmaciones, de modo que pueda decidir si desea volver a enviar las notificaciones.</span><span class="sxs-lookup"><span data-stu-id="e780e-159">You may also want to be able to detect how long it takes to get acknowledgements, so you can decide if/when to resend notifications.</span></span>

### <a name="isearchitemschangedsink"></a><span data-ttu-id="e780e-160">ISearchItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="e780e-160">ISearchItemsChangedSink</span></span>

<span data-ttu-id="e780e-161">Para tener acceso a esta interfaz, primero cree una instancia de un objeto [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) para obtener acceso a un objeto [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="e780e-161">To access this interface, you first instantiate an [**ISearchManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchmanager) object to gain access to an [**ISearchCatalogManager**](/windows/desktop/api/Searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="e780e-162">Desde ese objeto **ISearchCatalogManager** , crea una instancia de un objeto [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) y notifica al indexador de los cambios de datos con una llamada al método **OnItemsChanged** .</span><span class="sxs-lookup"><span data-stu-id="e780e-162">From that **ISearchCatalogManager** object, you instantiate an [**ISearchItemsChangedSink**](/windows/desktop/api/Searchapi/nn-searchapi-isearchitemschangedsink) object and notify the indexer of the data changes with a call to the **OnItemsChanged** method.</span></span>

<span data-ttu-id="e780e-163">En la llamada a este método, se incluye el número de cambios que se van a informar y una matriz de estructuras de [**\_ \_ cambio de elementos de búsqueda**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) .</span><span class="sxs-lookup"><span data-stu-id="e780e-163">In the call to this method, you include the number of changes being reported and an array of [**SEARCH\_ITEM\_CHANGE**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_change) structures.</span></span> <span data-ttu-id="e780e-164">Obtiene una matriz de DocIds asignados por indexador que representan cada cambio, así como una matriz de códigos de finalización de recursos humanos que indican si se aceptó la indexación de cada dirección URL.</span><span class="sxs-lookup"><span data-stu-id="e780e-164">You get back an array of indexer-assigned DocIds that represent each change as well as an array of HR completion codes indicating whether each URL was accepted for indexing.</span></span> <span data-ttu-id="e780e-165">Esta es la confirmación del indexador de que ha recibido las notificaciones y se está preparando para indexar los elementos.</span><span class="sxs-lookup"><span data-stu-id="e780e-165">This is your acknowledgement from the indexer that it has received your notifications and is preparing to index the items.</span></span>

<span data-ttu-id="e780e-166">A partir de ese punto, el indexador envía las actualizaciones mediante la interfaz [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) .</span><span class="sxs-lookup"><span data-stu-id="e780e-166">From that point forward the indexer sends updates using the [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface.</span></span>

### <a name="isearchnotifyinlinesite"></a><span data-ttu-id="e780e-167">ISearchNotifyInlineSite</span><span class="sxs-lookup"><span data-stu-id="e780e-167">ISearchNotifyInlineSite</span></span>

<span data-ttu-id="e780e-168">Para obtener actualizaciones sobre el estado de los elementos y el catálogo, debe registrar la interfaz [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) con el indizador para que pueda enviarle devoluciones de llamada.</span><span class="sxs-lookup"><span data-stu-id="e780e-168">In order to get updates about the status of both your items and the catalog, you must register your [**ISearchNotifyInlineSite**](/windows/desktop/api/Searchapi/nn-searchapi-isearchnotifyinlinesite) interface with the indexer so it can send you callbacks.</span></span> <span data-ttu-id="e780e-169">Cada actualización enviada mediante [**ISearchNotifyInlineSite:: OnItemIndexedStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-onitemindexedstatuschange) identifica los elementos por DocId, el estado de cada elemento ([**\_ Estado de \_ indización \_ de elementos de búsqueda**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_indexing_status)) y la fase de indización ([**\_ \_ fase de indización de búsqueda**](/windows/desktop/api/Searchapi/ne-searchapi-search_indexing_phase)) en la que se encuentran los elementos.</span><span class="sxs-lookup"><span data-stu-id="e780e-169">Each update sent using [**ISearchNotifyInlineSite::OnItemIndexedStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-onitemindexedstatuschange) identifies the items by DocId, the status of each item ([**SEARCH\_ITEM\_INDEXING\_STATUS**](/windows/desktop/api/Searchapi/ns-searchapi-search_item_indexing_status)) and the indexing phase ([**SEARCH\_INDEXING\_PHASE**](/windows/desktop/api/Searchapi/ne-searchapi-search_indexing_phase)) the items are in.</span></span>

<span data-ttu-id="e780e-170">No solo recibirá actualizaciones sobre el estado de cada elemento, tal y como se describió anteriormente, también obtendrá información importante sobre el estado del catálogo.</span><span class="sxs-lookup"><span data-stu-id="e780e-170">Not only do you receive updates on the status of each item, as described earlier, you also get important information about the status of the catalog itself.</span></span> <span data-ttu-id="e780e-171">El servicio Windows Search puede ser interrumpido o reiniciado por el usuario final, una aplicación de terceros o algún otro error.</span><span class="sxs-lookup"><span data-stu-id="e780e-171">The Windows Search service can be interrupted or restarted by the end user, a third party application, or some other failure.</span></span> <span data-ttu-id="e780e-172">Cuando esto sucede, necesita una manera de determinar qué notificaciones se reenvían al indexador.</span><span class="sxs-lookup"><span data-stu-id="e780e-172">When this happens, you need a way to determine what notifications to repush to the indexer.</span></span>

<span data-ttu-id="e780e-173">El método [**ISearchNotifyInlineSite:: OnCatalogStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-oncatalogstatuschange) , al que llama el servicio Windows Search, informa a los clientes sobre el estado del catálogo mediante los parámetros que se describen en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="e780e-173">The [**ISearchNotifyInlineSite::OnCatalogStatusChange**](/windows/desktop/api/Searchapi/nf-searchapi-isearchnotifyinlinesite-oncatalogstatuschange) method, called by the Windows Search service, informs clients about the status of the catalog using the parameters described in the following table.</span></span>



| <span data-ttu-id="e780e-174">Parámetro</span><span class="sxs-lookup"><span data-stu-id="e780e-174">Parameter</span></span>                 | <span data-ttu-id="e780e-175">Descripción</span><span class="sxs-lookup"><span data-stu-id="e780e-175">Description</span></span>                                                                                                                                           |
|---------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e780e-176">guidCatalogResetSignature</span><span class="sxs-lookup"><span data-stu-id="e780e-176">guidCatalogResetSignature</span></span> | <span data-ttu-id="e780e-177">Un GUID que representa el restablecimiento del catálogo.</span><span class="sxs-lookup"><span data-stu-id="e780e-177">A GUID representing the catalog reset.</span></span> <span data-ttu-id="e780e-178">Si este GUID cambia, se deben reenviar todas las notificaciones.</span><span class="sxs-lookup"><span data-stu-id="e780e-178">If this GUID changes, all notifications must be resent.</span></span>                                                        |
| <span data-ttu-id="e780e-179">guidCheckPointSignature</span><span class="sxs-lookup"><span data-stu-id="e780e-179">guidCheckPointSignature</span></span>   | <span data-ttu-id="e780e-180">Un GUID que representa el último punto de control restaurado.</span><span class="sxs-lookup"><span data-stu-id="e780e-180">A GUID representing the last checkpoint restored.</span></span> <span data-ttu-id="e780e-181">Si este GUID cambia, se deben reenviar todas las notificaciones acumuladas desde el último punto de control guardado.</span><span class="sxs-lookup"><span data-stu-id="e780e-181">If this GUID changes, all notifications accumulated since the last saved checkpoint must be resent.</span></span> |
| <span data-ttu-id="e780e-182">dwLastCheckPointNumber</span><span class="sxs-lookup"><span data-stu-id="e780e-182">dwLastCheckPointNumber</span></span>    | <span data-ttu-id="e780e-183">Número que indica el último punto de control guardado.</span><span class="sxs-lookup"><span data-stu-id="e780e-183">A number indicating the last checkpoint saved.</span></span>                                                                                                        |



 

 

<span data-ttu-id="e780e-184">Cuando se produce un punto de comprobación del catálogo, el servicio de búsqueda actualiza el *dwLastCheckPointNumber* y todas las notificaciones enviadas antes de ese punto de control son seguras y recuperables en caso de que se produzca un error en el servicio.</span><span class="sxs-lookup"><span data-stu-id="e780e-184">When a catalog checkpoint occurs, the search service updates the *dwLastCheckPointNumber*, and all notifications sent prior to that checkpoint are safe and recoverable in the event of a service failure.</span></span> <span data-ttu-id="e780e-185">Los proveedores de notificaciones solo tienen que realizar el seguimiento de las notificaciones enviadas entre los puntos de comprobación y reenviar en caso de que se restaure o restablezca el catálogo.</span><span class="sxs-lookup"><span data-stu-id="e780e-185">Notifications providers need to track only those notifications sent between checkpoints and repush in case of a catalog restore or reset.</span></span>

<span data-ttu-id="e780e-186">Si se realiza una restauración de catálogo, el servicio de búsqueda revierte el catálogo al último punto de comprobación guardado y actualiza el *guidCheckPointSignature*.</span><span class="sxs-lookup"><span data-stu-id="e780e-186">If a catalog restore occurs, the search service rolls back the catalog to the last saved checkpoint and updates the *guidCheckPointSignature*.</span></span> <span data-ttu-id="e780e-187">En esta situación, los proveedores de notificaciones deben reenviar todas las notificaciones acumuladas desde el último punto de control guardado, tal y como se identifica en el *dwLastCheckPointNumber*.</span><span class="sxs-lookup"><span data-stu-id="e780e-187">In this situation, notifications providers must repush all notifications accumulated since the most recent saved checkpoint as identified by the *dwLastCheckPointNumber*.</span></span>

<span data-ttu-id="e780e-188">Si se debe restablecer el catálogo, el servicio de búsqueda restablece todo el catálogo y actualiza el *guidCatalogResetSignature*.</span><span class="sxs-lookup"><span data-stu-id="e780e-188">If a catalog reset should occur, the search service resets the entire catalog and updates the *guidCatalogResetSignature*.</span></span> <span data-ttu-id="e780e-189">El proveedor de notificaciones debe volver a enviar todo el ámbito de rastreo.</span><span class="sxs-lookup"><span data-stu-id="e780e-189">Notifications provider must repush its entire crawl scope again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="e780e-190">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="e780e-190">Additional Resources</span></span>

-   <span data-ttu-id="e780e-191">Para obtener información general sobre el proceso de indización, vea [el proceso de indización](-search-indexing-process-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e780e-191">For an overview of the indexing process, see [The Indexing Process](-search-indexing-process-overview.md).</span></span>
-   <span data-ttu-id="e780e-192">Para obtener información general del administrador de catálogos y del administrador de búsqueda de catálogos (CSM), consulte [usar el administrador de catálogos](-search-3x-wds-mngidx-catalog-manager.md) y [el administrador de ámbito de rastreo](-search-3x-wds-extidx-csm.md).</span><span class="sxs-lookup"><span data-stu-id="e780e-192">For overviews of the Catalog Manager and Catalog Search Manager (CSM), see [Using the Catalog Manager](-search-3x-wds-mngidx-catalog-manager.md) and [Using the Crawl Scope Manager](-search-3x-wds-extidx-csm.md).</span></span>
-   <span data-ttu-id="e780e-193">Para obtener información sobre cómo crear un almacén de datos de Shell, vea [implementar las interfaces de objeto de carpeta básicas](/previous-versions/windows/desktop/legacy/cc144093(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="e780e-193">For information about creating a Shell data store, see [Implementing the Basic Folder Object Interfaces](/previous-versions/windows/desktop/legacy/cc144093(v=vs.85)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="e780e-194">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e780e-194">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="e780e-195">**Vista**</span><span class="sxs-lookup"><span data-stu-id="e780e-195">**Conceptual**</span></span>
</dt> <dt>

[<span data-ttu-id="e780e-196">Desarrollar controladores de protocolo</span><span class="sxs-lookup"><span data-stu-id="e780e-196">Developing Protocol Handlers</span></span>](-search-3x-wds-phaddins.md)
</dt> <dt>

[<span data-ttu-id="e780e-197">Descripción de los controladores de protocolo</span><span class="sxs-lookup"><span data-stu-id="e780e-197">Understanding Protocol Handlers</span></span>](-search-3x-wds-extidx-prot-implementing.md)
</dt> <dt>

[<span data-ttu-id="e780e-198">Agregar iconos y menús contextuales</span><span class="sxs-lookup"><span data-stu-id="e780e-198">Adding Icons and Context Menus</span></span>](-search-3x-wds-ph-ui-extensions.md)
</dt> <dt>

[<span data-ttu-id="e780e-199">Código de ejemplo: extensiones de Shell para controladores de protocolo</span><span class="sxs-lookup"><span data-stu-id="e780e-199">Code Sample: Shell Extensions for Protocol Handlers</span></span>](-search-3x-wds-ph-ui-samplecode.md)
</dt> <dt>

[<span data-ttu-id="e780e-200">Instalar y registrar controladores de protocolo</span><span class="sxs-lookup"><span data-stu-id="e780e-200">Installing and Registering Protocol Handlers</span></span>](-search-3x-wds-ph-install-registration.md)
</dt> <dt>

[<span data-ttu-id="e780e-201">Crear un conector de búsqueda para un controlador de protocolo</span><span class="sxs-lookup"><span data-stu-id="e780e-201">Creating a Search Connector for a Protocol Handler</span></span>](-search-3x-wds-ph-search-connector.md)
</dt> <dt>

[<span data-ttu-id="e780e-202">Controladores de protocolo de depuración</span><span class="sxs-lookup"><span data-stu-id="e780e-202">Debugging Protocol Handlers</span></span>](-search-ws-protocolhandlertesting.md)
</dt> </dl>

 

 
