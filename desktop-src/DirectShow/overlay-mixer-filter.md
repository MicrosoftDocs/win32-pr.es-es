---
description: Filtro de mezclador de superposición
ms.assetid: e80938b7-31f0-467b-a3fa-c4511d14758d
title: Filtro de mezclador de superposición
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d26ad8ba8a41a1cdb94eec0f4406c4845f25cda5
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "103906330"
---
# <a name="overlay-mixer-filter"></a><span data-ttu-id="844ad-103">Filtro de mezclador de superposición</span><span class="sxs-lookup"><span data-stu-id="844ad-103">Overlay Mixer Filter</span></span>

<span data-ttu-id="844ad-104">El filtro de mezclador de superposición es un representador de vídeo diseñado específicamente para reproducción de DVD y transmisión por secuencias de vídeo con subtítulos (CC) de línea 21.</span><span class="sxs-lookup"><span data-stu-id="844ad-104">The Overlay Mixer filter is a video renderer designed specifically for DVD playback and broadcast video streams with line-21 closed captioning.</span></span> <span data-ttu-id="844ad-105">El mezclador de superposición también admite extensiones de puerto de vídeo (VPEs), lo que permite que funcione con descodificadores de hardware MPEG-2 o sintonizadores de TV analógicos que envían vídeo directamente a la tarjeta de gráficos, en lugar de a través del bus PCI.</span><span class="sxs-lookup"><span data-stu-id="844ad-105">The Overlay Mixer also supports Video Port Extensions (VPEs), enabling it to work with hardware MPEG-2 decoders or analog TV tuners that send video directly to the graphics card, rather than over the PCI bus.</span></span>

> [!Note]  
> <span data-ttu-id="844ad-106">Ahora se prefiere el [procesador de mezcla de vídeo 9](video-mixing-renderer-filter-9.md) sobre el filtro de mezclador de superposición, excepto en escenarios VPE.</span><span class="sxs-lookup"><span data-stu-id="844ad-106">The [Video Mixing Renderer 9](video-mixing-renderer-filter-9.md) is now preferred over the Overlay Mixer filter, except in VPE scenarios.</span></span>

 

<span data-ttu-id="844ad-107">El mezclador de superposición utiliza DirectDraw para la representación.</span><span class="sxs-lookup"><span data-stu-id="844ad-107">The Overlay Mixer uses DirectDraw for rendering.</span></span> <span data-ttu-id="844ad-108">Requiere una superficie de superposición en la tarjeta gráfica.</span><span class="sxs-lookup"><span data-stu-id="844ad-108">It requires an overlay surface on the graphics card.</span></span> <span data-ttu-id="844ad-109">La secuencia de vídeo principal debe estar conectada al pin 0.</span><span class="sxs-lookup"><span data-stu-id="844ad-109">The primary video stream should be connected to pin 0.</span></span> <span data-ttu-id="844ad-110">Las secuencias secundarias (gráficos de subtítulos (CC) o de DVD) están conectadas a los pin 1 y superiores.</span><span class="sxs-lookup"><span data-stu-id="844ad-110">Secondary streams (closed caption graphics or DVD subpictures) are connected to pins 1 and higher.</span></span> <span data-ttu-id="844ad-111">El mezclador de superposición blits los flujos secundarios directamente en el superficie principal; no mezcla ni mezcla alfa.</span><span class="sxs-lookup"><span data-stu-id="844ad-111">The Overlay Mixer blits the secondary streams directly onto the primary suface; it does not mix or alpha blend them.</span></span>

<span data-ttu-id="844ad-112">El mezclador de superposición usa el representador de vídeo para la administración de ventanas.</span><span class="sxs-lookup"><span data-stu-id="844ad-112">The Overlay Mixer uses the Video Renderer for window management.</span></span> <span data-ttu-id="844ad-113">El representador de vídeo se conecta al pin de salida del mezclador de superposición.</span><span class="sxs-lookup"><span data-stu-id="844ad-113">The Video Renderer connects to the Overlay Mixer's output pin.</span></span>

<span data-ttu-id="844ad-114">Este filtro se agrega automáticamente al gráfico de filtros cuando las aplicaciones utilizan las interfaces [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) y [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) para crear el gráfico.</span><span class="sxs-lookup"><span data-stu-id="844ad-114">This filter is added to the filter graph automatically when applications use the [**IDvdGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-idvdgraphbuilder) and [**ICaptureGraphBuilder2**](/windows/desktop/api/Strmif/nn-strmif-icapturegraphbuilder2) interfaces to create the graph.</span></span> <span data-ttu-id="844ad-115">El administrador de gráficos de filtro no agregará automáticamente el mezclador de superposición al gráfico.</span><span class="sxs-lookup"><span data-stu-id="844ad-115">The Filter Graph Manager will not automatically add the Overlay Mixer to the graph.</span></span>

> [!Note]  
> <span data-ttu-id="844ad-116">En la tabla siguiente, los subtipos de medios aceptados en el PIN de entrada 0 dependen del hardware.</span><span class="sxs-lookup"><span data-stu-id="844ad-116">In the following table, the media subtypes accepted on input pin 0 are hardware dependent.</span></span> <span data-ttu-id="844ad-117">El mezclador de superposición no puede determinar si se admite un subtipo determinado hasta que cree la superficie de DirectDraw.</span><span class="sxs-lookup"><span data-stu-id="844ad-117">The Overlay Mixer cannot determine whether a particular subtype is supported until it creates the DirectDraw surface.</span></span> <span data-ttu-id="844ad-118">Por lo tanto, la única forma de un filtro de nivel superior para determinar si se admite un subtipo es intentar una conexión con ese subtipo.</span><span class="sxs-lookup"><span data-stu-id="844ad-118">Therefore, the only way for an upstream filter to determine whether a subtype is supported is to attempt a connection with that subtype.</span></span>

 



<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><span data-ttu-id="844ad-119">Interfaces de filtro</span><span class="sxs-lookup"><span data-stu-id="844ad-119">Filter Interfaces</span></span></td>
<td><span data-ttu-id="844ad-120"><a href="/windows/desktop/api/Strmif/nn-strmif-iamoverlayfx"><strong>IAMOverlayFX</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iamvideodecimationproperties"><strong>IAMVideoDecimationProperties</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ibasefilter"><strong>IBaseFilter</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo"><strong>IDDrawExclModeVideo</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/previous-versions/windows/desktop/api/Mixerocx/nn-mixerocx-imixerocx"><strong>IMixerOCX</strong></a>, <a href="/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop"><strong>IQualProp</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span><span class="sxs-lookup"><span data-stu-id="844ad-120"><a href="/windows/desktop/api/Strmif/nn-strmif-iamoverlayfx"><strong>IAMOverlayFX</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iamvideodecimationproperties"><strong>IAMVideoDecimationProperties</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ibasefilter"><strong>IBaseFilter</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo"><strong>IDDrawExclModeVideo</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/previous-versions/windows/desktop/api/Mixerocx/nn-mixerocx-imixerocx"><strong>IMixerOCX</strong></a>, <a href="/previous-versions/windows/desktop/api/Amvideo/nn-amvideo-iqualprop"><strong>IQualProp</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="844ad-121">Tipos de medios de anclaje de entrada</span><span class="sxs-lookup"><span data-stu-id="844ad-121">Input Pin Media Types</span></span></td>
<td><span data-ttu-id="844ad-122">Tipo principal: MEDIATYPE_Video</span><span class="sxs-lookup"><span data-stu-id="844ad-122">Major Type: MEDIATYPE_Video</span></span><br/> <span data-ttu-id="844ad-123">Subtipos</span><span class="sxs-lookup"><span data-stu-id="844ad-123">Subtypes:</span></span><br/>
<ul>
<li><span data-ttu-id="844ad-124">MEDIASUBTYPE_Overlay (solo pin 0)</span><span class="sxs-lookup"><span data-stu-id="844ad-124">MEDIASUBTYPE_Overlay (pin 0 only)</span></span></li>
<li><span data-ttu-id="844ad-125">Formatos YUV de DirectDraw (solo pin 0)</span><span class="sxs-lookup"><span data-stu-id="844ad-125">DirectDraw YUV formats (pin 0 only)</span></span></li>
<li><span data-ttu-id="844ad-126">Formatos de aceleración de vídeo de DirectDraw (solo pin 0)</span><span class="sxs-lookup"><span data-stu-id="844ad-126">DirectDraw Video Acceleration formats (pin 0 only)</span></span></li>
<li><span data-ttu-id="844ad-127">Formatos RGB de DirectDraw (todos los pin de entrada)</span><span class="sxs-lookup"><span data-stu-id="844ad-127">DirectDraw RGB formats (all input pins)</span></span></li>
</ul>
<span data-ttu-id="844ad-128">Tipos de formato:</span><span class="sxs-lookup"><span data-stu-id="844ad-128">Format Types:</span></span><br/>
<ul>
<li><span data-ttu-id="844ad-129">Format_VIDEOINFO</span><span class="sxs-lookup"><span data-stu-id="844ad-129">Format_VIDEOINFO</span></span></li>
<li><span data-ttu-id="844ad-130">Format_VIDEOINFO2</span><span class="sxs-lookup"><span data-stu-id="844ad-130">Format_VIDEOINFO2</span></span></li>
</ul></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="844ad-131">Interfaces de PIN de entrada</span><span class="sxs-lookup"><span data-stu-id="844ad-131">Input Pin Interfaces</span></span></td>
<td><span data-ttu-id="844ad-132"><a href="/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator"><strong>IAMVideoAccelerator</strong></a>, <a href="ikspin.md"><strong>IKsPin</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imeminputpin"><strong>IMemInputPin</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig"><strong>IMixerPinConfig</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2"><strong>IMixerPinConfig2</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ioverlay"><strong>IOverlay</strong></a> (solo pin 0), <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipinconnection"><strong>IPinConnection</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span><span class="sxs-lookup"><span data-stu-id="844ad-132"><a href="/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator"><strong>IAMVideoAccelerator</strong></a>, <a href="ikspin.md"><strong>IKsPin</strong></a>, <a href="ikspropertyset.md"><strong>IKsPropertySet</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imeminputpin"><strong>IMemInputPin</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig"><strong>IMixerPinConfig</strong></a>, <a href="/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2"><strong>IMixerPinConfig2</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ioverlay"><strong>IOverlay</strong></a> (pin 0 only), <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipinconnection"><strong>IPinConnection</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a>, <a href="/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify"><strong>IVPNotify</strong></a>, <a href="/previous-versions/windows/desktop/api/vpnotify/nn-vpnotify-ivpnotify2"><strong>IVPNotify2</strong></a></span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="844ad-133">Tipos de medios de anclaje de salida</span><span class="sxs-lookup"><span data-stu-id="844ad-133">Output Pin Media Types</span></span></td>
<td><span data-ttu-id="844ad-134">MEDIATYPE_Video, MEDIASUBTYPE_Overlay</span><span class="sxs-lookup"><span data-stu-id="844ad-134">MEDIATYPE_Video, MEDIASUBTYPE_Overlay</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="844ad-135">Interfaces de clavija de salida</span><span class="sxs-lookup"><span data-stu-id="844ad-135">Output Pin Interfaces</span></span></td>
<td><span data-ttu-id="844ad-136"><a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a></span><span class="sxs-lookup"><span data-stu-id="844ad-136"><a href="/windows/desktop/api/Control/nn-control-imediaposition"><strong>IMediaPosition</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-imediaseeking"><strong>IMediaSeeking</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-ipin"><strong>IPin</strong></a>, <a href="/windows/desktop/api/Strmif/nn-strmif-iqualitycontrol"><strong>IQualityControl</strong></a></span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="844ad-137">Identificador CLSID</span><span class="sxs-lookup"><span data-stu-id="844ad-137">Filter CLSID</span></span></td>
<td><span data-ttu-id="844ad-138">CLSID_OverlayMixer</span><span class="sxs-lookup"><span data-stu-id="844ad-138">CLSID_OverlayMixer</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="844ad-139">CLSID de la página de propiedades</span><span class="sxs-lookup"><span data-stu-id="844ad-139">Property Page CLSID</span></span></td>
<td><span data-ttu-id="844ad-140">Ninguna página de propiedades.</span><span class="sxs-lookup"><span data-stu-id="844ad-140">No property page.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="844ad-141">Executable</span><span class="sxs-lookup"><span data-stu-id="844ad-141">Executable</span></span></td>
<td><span data-ttu-id="844ad-142">qdvd.dll</span><span class="sxs-lookup"><span data-stu-id="844ad-142">qdvd.dll</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="844ad-143"><a href="merit.md">Fundament</a></span><span class="sxs-lookup"><span data-stu-id="844ad-143"><a href="merit.md">Merit</a></span></span></td>
<td><span data-ttu-id="844ad-144">MERIT_DO_NOT_USE</span><span class="sxs-lookup"><span data-stu-id="844ad-144">MERIT_DO_NOT_USE</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="844ad-145"><a href="filter-categories.md">Categoría de filtro</a></span><span class="sxs-lookup"><span data-stu-id="844ad-145"><a href="filter-categories.md">Filter Category</a></span></span></td>
<td><span data-ttu-id="844ad-146">CLSID_LegacyAmFilterCategory</span><span class="sxs-lookup"><span data-stu-id="844ad-146">CLSID_LegacyAmFilterCategory</span></span></td>
</tr>
</tbody>
</table>



 

### <a name="remarks"></a><span data-ttu-id="844ad-147">Observaciones</span><span class="sxs-lookup"><span data-stu-id="844ad-147">Remarks</span></span>

<span data-ttu-id="844ad-148">El mezclador de superposición usa la clave de color de destino para mezclar las superficies de vídeo con las superposiciones.</span><span class="sxs-lookup"><span data-stu-id="844ad-148">The Overlay Mixer uses destination color keying to mix video surfaces with overlays.</span></span> <span data-ttu-id="844ad-149">Blits la clave de color y el vídeo secundario en la superficie primaria y envía el vídeo principal a la superficie de superposición.</span><span class="sxs-lookup"><span data-stu-id="844ad-149">It blits the color key and the secondary video to the primary surface, and sends the primary video to the overlay surface.</span></span> <span data-ttu-id="844ad-150">A continuación, la tarjeta de gráficos compone las dos superficies en su búfer de fotogramas.</span><span class="sxs-lookup"><span data-stu-id="844ad-150">The graphics card then composites the two surfaces into its frame buffer.</span></span>

<span data-ttu-id="844ad-151">Para probar si el controlador de gráficos admite la superposición de hardware, llame a **IDirectDraw7:: GetCaps**.</span><span class="sxs-lookup"><span data-stu-id="844ad-151">To test whether the graphics driver supports hardware overlay, call **IDirectDraw7::GetCaps**.</span></span> <span data-ttu-id="844ad-152">Si el campo **dwMaxVisibleOverlays** de la estructura **DDCAPS** es mayor que cero, el controlador admite la superposición de hardware.</span><span class="sxs-lookup"><span data-stu-id="844ad-152">If the **dwMaxVisibleOverlays** field in the **DDCAPS** structure is greater than zero, the driver supports hardware overlay.</span></span>

<span data-ttu-id="844ad-153">Las aplicaciones pueden controlar algunos comportamientos en el mezclador de superposición a través de la interfaz [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2) .</span><span class="sxs-lookup"><span data-stu-id="844ad-153">Applications can control some behaviors on the Overlay Mixer through the [**IMixerPinConfig2**](/windows/desktop/api/Mpconfig/nn-mpconfig-imixerpinconfig2) interface.</span></span> <span data-ttu-id="844ad-154">Los desarrolladores de juegos pueden usar el mezclador de superposición para mostrar vídeo en modo exclusivo de DirectDraw, como se describe más adelante en esta sección.</span><span class="sxs-lookup"><span data-stu-id="844ad-154">Game developers can use the Overlay Mixer to display video in DirectDraw Exclusive Mode, as described later in this section.</span></span> <span data-ttu-id="844ad-155">El [filtro de representador de mezcla de vídeo 9](video-mixing-renderer-filter-9.md) (VMR-9) ahora proporciona una mejor compatibilidad con el vídeo en juegos.</span><span class="sxs-lookup"><span data-stu-id="844ad-155">The [Video Mixing Renderer Filter 9](video-mixing-renderer-filter-9.md) (VMR-9) now provides better support for video in games, however.</span></span> <span data-ttu-id="844ad-156">Para obtener más información, vea [usar el representador de mezcla de vídeo](using-the-video-mixing-renderer.md).</span><span class="sxs-lookup"><span data-stu-id="844ad-156">For more information, see [Using the Video Mixing Renderer](using-the-video-mixing-renderer.md).</span></span>

<span data-ttu-id="844ad-157">La siguiente información se proporciona para la ventaja de los desarrolladores de filtros y los desarrolladores de juegos que desean usar el mezclador de superposición en el modo exclusivo de DirectDraw.</span><span class="sxs-lookup"><span data-stu-id="844ad-157">The following information is provided for the benefit of filter developers, and game developers who want to use the Overlay Mixer in DirectDraw Exclusive Mode.</span></span>

<span data-ttu-id="844ad-158">**Operaciones internas del mezclador de superposición**</span><span class="sxs-lookup"><span data-stu-id="844ad-158">**Overlay Mixer Internal Operations**</span></span>

<span data-ttu-id="844ad-159">El mezclador de superposición expone un PIN de entrada para cada flujo entrante.</span><span class="sxs-lookup"><span data-stu-id="844ad-159">The Overlay Mixer exposes an input pin for each incoming stream.</span></span> <span data-ttu-id="844ad-160">Normalmente, hay tres clavijas de entrada: pin 0 para los datos de vídeo y los pin 1 y 2 para los datos de la línea 21 y el DVD.</span><span class="sxs-lookup"><span data-stu-id="844ad-160">Typically, there are three input pins: pin 0 for video data, and pins 1 and 2 for line 21 and DVD subpicture data.</span></span> <span data-ttu-id="844ad-161">Internamente, el mezclador de superposición crea un objeto DirectDraw con una superficie primaria que incluye todo el escritorio, además de una superficie superpuesta cuyo rectángulo se define por el tamaño de la secuencia de vídeo en el pin 0.</span><span class="sxs-lookup"><span data-stu-id="844ad-161">Internally, the Overlay Mixer creates a DirectDraw object with a primary surface comprising the entire desktop, plus an overlay surface whose rectangle is defined by the size of the video stream on Pin 0.</span></span> <span data-ttu-id="844ad-162">Si el descodificador no especifica una clave de color, el mezclador de superposición usa las teclas de color predeterminadas: gris oscuro para tarjetas gráficas más recientes y magenta para tarjetas de 256 colores anteriores.</span><span class="sxs-lookup"><span data-stu-id="844ad-162">If the decoder does not specify a color key, the Overlay Mixer uses default color keys: dark gray for more recent graphics cards and magenta for older 256-color cards.</span></span>

> [!Note]  
> <span data-ttu-id="844ad-163">Los resultados son indefinidos si el descodificador entrega dos secuencias de vídeo secundarias simultáneamente en el mismo lugar en la superficie de superposición.</span><span class="sxs-lookup"><span data-stu-id="844ad-163">The results are undefined if the decoder delivers two secondary video streams simultaneously in the same place on the overlay surface.</span></span> <span data-ttu-id="844ad-164">(En ocasiones, esto ocurre con los DVDs que contienen secuencias de subimagen y de línea 21). El vídeo puede parpadear o mostrar solo una de las secuencias.</span><span class="sxs-lookup"><span data-stu-id="844ad-164">(This sometimes occurs with DVDs that contain subpicture and line 21 streams.) The video might flicker, or display only one of the streams.</span></span>

 

<span data-ttu-id="844ad-165">En Windows Vista o posterior, el mezclador de superposición deshabilita la composición Administrador de ventanas de escritorio (DWM) si el controlador de pantalla admite la superposición de hardware.</span><span class="sxs-lookup"><span data-stu-id="844ad-165">On Windows Vista or later, the Overlay Mixer disables Desktop Window Manager (DWM) composition if the display driver supports hardware overlay.</span></span> <span data-ttu-id="844ad-166">Las aplicaciones deben evitar el uso del filtro de mezclador de superposición. en su lugar, use VMR-9 o el representador de vídeo mejorado (EVR).</span><span class="sxs-lookup"><span data-stu-id="844ad-166">Applications should avoid using the Overlay Mixer filter; use the VMR-9 or the Enhanced Video Renderer (EVR) instead.</span></span>

<span data-ttu-id="844ad-167">**Conexión ascendente con el descodificador de vídeo**</span><span class="sxs-lookup"><span data-stu-id="844ad-167">**Upstream Connection with the Video Decoder**</span></span>

<span data-ttu-id="844ad-168">Normalmente, los pines de entrada del mezclador de superposición se conectan a un descodificador de vídeo de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="844ad-168">Typically the Overlay Mixer's input pins connect to an upstream video decoder.</span></span> <span data-ttu-id="844ad-169">La secuencia de vídeo principal debe conectarse al pin 0.</span><span class="sxs-lookup"><span data-stu-id="844ad-169">The primary video stream must connect to the pin 0.</span></span> <span data-ttu-id="844ad-170">La línea 21 o las secuencias de subimagen se conectan al pin 1 o superior.</span><span class="sxs-lookup"><span data-stu-id="844ad-170">The line 21 or subpicture streams connect to pin 1 or greater.</span></span> <span data-ttu-id="844ad-171">Si el descodificador es un descodificador de software que usa la CPU del host exclusivamente, la conexión entre el descodificador y el pin 0 es una conexión de [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) .</span><span class="sxs-lookup"><span data-stu-id="844ad-171">If the decoder is a software decoder that uses the host CPU exclusively, the connection between the decoder and the Pin 0 is an [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) connection.</span></span> <span data-ttu-id="844ad-172">Si el descodificador utiliza la aceleración de hardware, la conexión al pin 0 debe utilizar el [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) interfaz.</span><span class="sxs-lookup"><span data-stu-id="844ad-172">If the decoder uses hardware acceleration, the connection to Pin 0 must use the [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) inferface.</span></span> <span data-ttu-id="844ad-173">Estos dos tipos de conexiones se excluyen mutuamente.</span><span class="sxs-lookup"><span data-stu-id="844ad-173">These two types of connections are mutually exclusive.</span></span>

<span data-ttu-id="844ad-174">Si el descodificador dibuja directamente en la superficie de superposición, debe usar la interfaz [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) en el pin 0 e implementar la interfaz [**IOverlayNotify**](/windows/desktop/api/Strmif/nn-strmif-ioverlaynotify) .</span><span class="sxs-lookup"><span data-stu-id="844ad-174">If the decoder draws directly onto the overlay surface, it should use the [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) interface on pin 0 and implement the [**IOverlayNotify**](/windows/desktop/api/Strmif/nn-strmif-ioverlaynotify) interface.</span></span>

<span data-ttu-id="844ad-175">Los filtros que ajustan un descodificador de hardware y se conectan al mezclador de superposición a través de un puerto de vídeo deben implementar la interfaz [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) .</span><span class="sxs-lookup"><span data-stu-id="844ad-175">Filters that wrap a hardware decoder and connect to the Overlay Mixer through a video port must implement the [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) interface.</span></span> <span data-ttu-id="844ad-176">El mezclador de superposición implementa la interfaz [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) .</span><span class="sxs-lookup"><span data-stu-id="844ad-176">The Overlay Mixer implements the [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) interface.</span></span> <span data-ttu-id="844ad-177">Estas dos interfaces permiten al descodificador especificar las superficies superpuestas que requiere y permiten que el mezclador de superposición informe al descodificador de la ubicación de esas superficies en la memoria de vídeo.</span><span class="sxs-lookup"><span data-stu-id="844ad-177">These two interfaces enable the decoder to specify the overlay surfaces it requires, and they enable the Overlay Mixer to inform the decoder of the location of those surfaces in video memory.</span></span>

<span data-ttu-id="844ad-178">El mezclador de superposición también garantiza que el rectángulo de vídeo se escale correctamente.</span><span class="sxs-lookup"><span data-stu-id="844ad-178">The Overlay Mixer also ensures that the video rectangle is scaled correctly.</span></span> <span data-ttu-id="844ad-179">La captura de vídeo implica determinados problemas con respecto a la escala de la imagen de vista previa y la captura de fotogramas de vídeo intercalados.</span><span class="sxs-lookup"><span data-stu-id="844ad-179">Video capture involves certain issues with respect to scaling the preview image and capturing interleaved video frames.</span></span> <span data-ttu-id="844ad-180">Si va a desarrollar un filtro o un controlador WDM para un dispositivo de captura de vídeo de hardware, consulte las páginas de referencia de [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) y [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) para obtener más información sobre estos temas.</span><span class="sxs-lookup"><span data-stu-id="844ad-180">If you are developing a filter or WDM driver for a hardware video capture device, refer to the [**IVPConfig**](/previous-versions/windows/desktop/api/Vpconfig/nn-vpconfig-ivpconfig) and [**IVPNotify**](/previous-versions/windows/desktop/api/Vpnotify/nn-vpnotify-ivpnotify) reference pages for more information on these topics.</span></span>

<span data-ttu-id="844ad-181">El mezclador de superposición no se utiliza en los escenarios de captura de 1394 o USB.</span><span class="sxs-lookup"><span data-stu-id="844ad-181">The Overlay Mixer is not used in 1394 or USB capture scenarios.</span></span> <span data-ttu-id="844ad-182">Se usa en la captura de vídeo a través del bus PCI.</span><span class="sxs-lookup"><span data-stu-id="844ad-182">It is used in video capture over the PCI bus.</span></span>

<span data-ttu-id="844ad-183">**Conexión de nivel inferior con el representador de vídeo**</span><span class="sxs-lookup"><span data-stu-id="844ad-183">**Downstream Connection with the Video Renderer**</span></span>

<span data-ttu-id="844ad-184">El mezclador de superposición tiene un PIN de salida que se conecta al filtro de [representador de vídeo](video-renderer-filter.md) .</span><span class="sxs-lookup"><span data-stu-id="844ad-184">The Overlay Mixer has an output pin that connects to the [Video Renderer](video-renderer-filter.md) filter.</span></span> <span data-ttu-id="844ad-185">En este caso, el representador de vídeo no representa el vídeo; simplemente administra la ventana de vídeo.</span><span class="sxs-lookup"><span data-stu-id="844ad-185">The Video Renderer in this case does not render the video; it simply manages the video window.</span></span>

<span data-ttu-id="844ad-186">La conexión de PIN usa la interfaz [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) en lugar de la interfaz [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) .</span><span class="sxs-lookup"><span data-stu-id="844ad-186">The pin connection uses the [**IOverlay**](/windows/desktop/api/Strmif/nn-strmif-ioverlay) interface rather than the [**IMemInputPin**](/windows/desktop/api/Strmif/nn-strmif-imeminputpin) interface.</span></span> <span data-ttu-id="844ad-187">El representador de vídeo pasa el identificador de ventana a través del mezclador de superposición a DirectDraw, que administra el recorte del rectángulo.</span><span class="sxs-lookup"><span data-stu-id="844ad-187">The Video Renderer passes its window handle through the Overlay Mixer to DirectDraw, which manages the rectangle clipping.</span></span> <span data-ttu-id="844ad-188">Las aplicaciones pueden controlar el representador de vídeo a través de las interfaces [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) y [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2) en el administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="844ad-188">Applications can control the Video Renderer through the [**IVideoWindow**](/windows/desktop/api/Control/nn-control-ivideowindow) and [**IBasicVideo2**](/windows/desktop/api/Control/nn-control-ibasicvideo2) interfaces on the Filter Graph Manager.</span></span>

<span data-ttu-id="844ad-189">**Modo exclusivo de DirectDraw**</span><span class="sxs-lookup"><span data-stu-id="844ad-189">**DirectDraw Exclusive Mode**</span></span>

<span data-ttu-id="844ad-190">El modo exclusivo de DirectDraw del mezclador de superposición permite que los juegos muestren vídeo en alguna parte de la pantalla.</span><span class="sxs-lookup"><span data-stu-id="844ad-190">The Overlay Mixer's DirectDraw exclusive mode enables games to display video on some part of the screen.</span></span> <span data-ttu-id="844ad-191">En este modo, el mezclador de superposición representa el vídeo directamente en una superficie de DirectDraw creada por la aplicación de juego, en lugar de hacerlo en una ventana proporcionada por el representador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="844ad-191">In this mode, the Overlay Mixer renders the video directly to a DirectDraw surface created by the game application, rather than to a window provided by the Video Renderer.</span></span> <span data-ttu-id="844ad-192">Esto permite a los juegos controlar la clave del color.</span><span class="sxs-lookup"><span data-stu-id="844ad-192">This enables games to control the color key.</span></span> <span data-ttu-id="844ad-193">El mezclador de superposición solo expone un PIN de entrada en modo exclusivo de DirectDraw, lo que significa que no se puede realizar ninguna mezcla de subimagen de línea 21 o DVD en este modo.</span><span class="sxs-lookup"><span data-stu-id="844ad-193">The Overlay Mixer exposes only one input pin in DirectDraw exclusive mode, which means that no mixing of Line 21 or DVD subpicture can be performed in this mode.</span></span>

<span data-ttu-id="844ad-194">Para usar el mezclador de superposición en modo exclusivo de DirectDraw, cree una instancia del mezclador de superposición y consulte la interfaz [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo) antes de generar el gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="844ad-194">To use the Overlay Mixer in DirectDraw exclusive mode, create an instance of the Overlay Mixer and query it for the [**IDDrawExclModeVideo**](/windows/desktop/api/Strmif/nn-strmif-iddrawexclmodevideo) interface before building the filter graph.</span></span> <span data-ttu-id="844ad-195">A continuación, llame a [**IDDrawExclModeVideo:: SetDDrawSurface**](/windows/desktop/api/Strmif/nf-strmif-iddrawexclmodevideo-setddrawsurface) para especificar la superficie de DirectDraw para la representación.</span><span class="sxs-lookup"><span data-stu-id="844ad-195">Then call [**IDDrawExclModeVideo::SetDDrawSurface**](/windows/desktop/api/Strmif/nf-strmif-iddrawexclmodevideo-setddrawsurface) to specify the DirectDraw surface for rendering.</span></span> <span data-ttu-id="844ad-196">Una limitación importante de este modo es que el juego no obtiene acceso a los bits de vídeo reales.</span><span class="sxs-lookup"><span data-stu-id="844ad-196">One significant limitation of this mode is that the game does not get access to the actual video bits.</span></span> <span data-ttu-id="844ad-197">Si usa **IDDrawExclModeVideo**, la aplicación crea la superficie principal y el mezclador de superposición crea la superficie de superposición.</span><span class="sxs-lookup"><span data-stu-id="844ad-197">If you use **IDDrawExclModeVideo**, your application creates the primary surface, and the Overlay Mixer creates the overlay surface.</span></span>

<span data-ttu-id="844ad-198">También puede usar el modo exclusivo de DirectDraw para realizar la representación sin ventana (por ejemplo, en una página web), pero no se recomienda porque el mezclador de superposición no realiza ninguna combinación en este modo.</span><span class="sxs-lookup"><span data-stu-id="844ad-198">You can also use DirectDraw exclusive mode to perform windowless rendering—for example, in a Web page—but this is not recommended, because the Overlay Mixer does not perform any mixing in this mode.</span></span> <span data-ttu-id="844ad-199">Esto significa que no se pueden mostrar los datos de la línea 21 o de la subimagen.</span><span class="sxs-lookup"><span data-stu-id="844ad-199">This means that no line 21 or subpicture data can be displayed.</span></span>

## <a name="related-topics"></a><span data-ttu-id="844ad-200">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="844ad-200">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="844ad-201">Filtros de DirectShow</span><span class="sxs-lookup"><span data-stu-id="844ad-201">DirectShow Filters</span></span>](directshow-filters.md)
</dt> </dl>

 

 




