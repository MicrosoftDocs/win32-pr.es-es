---
title: El encabezado
description: El encabezado siguiente representa uno de los estilos de encabezado que puede generar la versión actual de MIDL. Para mayor comodidad, aquí se proporciona la lista completa de campos de encabezado.
ms.assetid: 2078d2d9-1757-4449-9cc1-a21804654722
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0afcc9ad880278fdbcb8efc45fdabdc22ad06224
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "103904787"
---
# <a name="the-header"></a><span data-ttu-id="89662-104">El encabezado</span><span class="sxs-lookup"><span data-stu-id="89662-104">The Header</span></span>

<span data-ttu-id="89662-105">El encabezado siguiente representa uno de los estilos de encabezado que puede generar la versión actual de MIDL.</span><span class="sxs-lookup"><span data-stu-id="89662-105">The following header represents one of the header styles that can be generated by the current version of MIDL.</span></span> <span data-ttu-id="89662-106">Para mayor comodidad, aquí se proporciona la lista completa de campos de encabezado.</span><span class="sxs-lookup"><span data-stu-id="89662-106">For convenience, the full list of header fields is provided here.</span></span>

<span data-ttu-id="89662-107">([**–**](/windows/desktop/Midl/-oi) Encabezado de interfaces)</span><span class="sxs-lookup"><span data-stu-id="89662-107">([**–Oif**](/windows/desktop/Midl/-oi) header)</span></span>

``` syntax
handle_type<1> 
Oi_flags<1>
[rpc_flags<4>]
proc_num<2>  
stack_size<2>
[explicit_handle_description<>]
constant_client_buffer_size<2>
constant_server_buffer_size<2>
INTERPRETER_OPT_FLAGS<1>
number_of_params<1>
```

<span data-ttu-id="89662-108">Extensiones a partir de Windows 2000: <8> para 32 bits, <12> para 64 bits)</span><span class="sxs-lookup"><span data-stu-id="89662-108">Extensions starting with Windows 2000: <8> for 32-bit, <12> for 64-bit)</span></span>

``` syntax
extension_version<1>
INTERPRETER_OPT_FLAGS2<1>
ClientCorrHint<2>
ServerCorrHint<2>
NotifyIndex<2>
[ FloatDoubleMask<2> ]
```

<span data-ttu-id="89662-109">La \_ versión de la extensión<1> proporciona el tamaño de la sección de extensión, en bytes.</span><span class="sxs-lookup"><span data-stu-id="89662-109">The extension\_version<1> provides the size of the extension section, in bytes.</span></span> <span data-ttu-id="89662-110">Si lo hace, el motor NDR actual puede desplazarse por la sección de la extensión correctamente aunque la sección proviniera de una versión posterior del compilador con más campos de los que el motor actual entiende.</span><span class="sxs-lookup"><span data-stu-id="89662-110">Doing so makes it possible for the current NDR engine to step over the extension section correctly even if the section were to come from a later compiler version with more fields than the current engine understands.</span></span>

<span data-ttu-id="89662-111">El intérprete \_ OPT \_ FLAGS2 se define de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="89662-111">The INTERPRETER\_OPT\_FLAGS2 are defined as follow:</span></span>

``` syntax
typedef struct
  {
  unsigned char   HasNewCorrDesc      : 1;    // 0x01
  unsigned char   ClientCorrCheck     : 1;    // 0x02
  unsigned char   ServerCorrCheck     : 1;    // 0x04
  unsigned char   HasNotify           : 1;    // 0x08
  unsigned char   HasNotify2          : 1;    // 0x10
  unsigned char   Unused              : 3;
  } INTERPRETER_OPT_FLAGS2, *PINTERPRETER_OPT_FLAGS2;
```

<span data-ttu-id="89662-112">El miembro **HasNewCorrDesc** indica si se usan nuevos descriptores de correlación en las cadenas de formato generadas por el compilador.</span><span class="sxs-lookup"><span data-stu-id="89662-112">The **HasNewCorrDesc** member indicates whether new correlation descriptors are used in the format strings generated by the compiler.</span></span> <span data-ttu-id="89662-113">El nuevo descriptor de correlación está relacionado con la funcionalidad de denegación de ataque.</span><span class="sxs-lookup"><span data-stu-id="89662-113">The new correlation descriptor is related to the denial-of-attack functionality.</span></span> <span data-ttu-id="89662-114">Los miembros **ClientCorrCheck** y **ServerCorrCheck** se establecen cuando la rutina necesita la comprobación de correlación en el lado indicado.</span><span class="sxs-lookup"><span data-stu-id="89662-114">The **ClientCorrCheck** and **ServerCorrCheck** members are set when the routine needs the correlation check on the indicated side.</span></span>

<span data-ttu-id="89662-115">Las marcas **HasNotify** y **HasNotify2** indican que la rutina utiliza la característica de notificación, tal como se define en los atributos **\[ \] Notify** y **\[ Notify \_ Flag \]** , respectivamente.</span><span class="sxs-lookup"><span data-stu-id="89662-115">The **HasNotify** and **HasNotify2** flags indicate that the routine uses the notify feature as defined by the **\[notify\]** and **\[notify\_flag\]** attributes, respectively.</span></span>

<span data-ttu-id="89662-116">El miembro **ClientCorrCheck** es una sugerencia de tamaño de caché en el lado cliente y **ServerCorrCheck** es una sugerencia en el lado servidor.</span><span class="sxs-lookup"><span data-stu-id="89662-116">The **ClientCorrCheck** member is a cache size hint on the client side and **ServerCorrCheck** is a hint on the server side.</span></span> <span data-ttu-id="89662-117">Cuando el tamaño llega como cero, se debe usar un tamaño predeterminado.</span><span class="sxs-lookup"><span data-stu-id="89662-117">When the size comes out as zero, a default size should be used.</span></span>

<span data-ttu-id="89662-118">El elemento **NotifyIndex** es un índice de una rutina Notify, si se usa una.</span><span class="sxs-lookup"><span data-stu-id="89662-118">The **NotifyIndex** element is an index to a notify routine, if one is used.</span></span>

<span data-ttu-id="89662-119">El elemento **FloatDoubleMask** aborda el problema de un argumento de punto flotante para Windows de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="89662-119">The **FloatDoubleMask** element addresses the issue of a floating point argument for 64-bit Windows.</span></span> <span data-ttu-id="89662-120">Este campo solo se genera para el código auxiliar de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="89662-120">This field is generated only for 64-bit stubs.</span></span> <span data-ttu-id="89662-121">La máscara es necesaria para las rutinas de ensamblado que descargan o cargan registros de/en la pila virtual para controlar los argumentos de punto flotante y se registran correctamente.</span><span class="sxs-lookup"><span data-stu-id="89662-121">The mask is needed for the assembly routines that download/upload registers from/to the virtual stack to handle floating-point arguments and registers properly.</span></span> <span data-ttu-id="89662-122">La máscara consta de 2 bits por argumento, o en lugar de registro de punto flotante.</span><span class="sxs-lookup"><span data-stu-id="89662-122">The mask consist of 2 bits per argument, or rather per floating-point register.</span></span> <span data-ttu-id="89662-123">La codificación es la siguiente: los bits menos significativos corresponden al primer registro FP, los dos bits siguientes corresponden al segundo registro, etc.</span><span class="sxs-lookup"><span data-stu-id="89662-123">The coding is as follows: The least significant bits correspond to the first FP register, the next 2 bits correspond to the second register, and so on.</span></span>

> [!Note]  
> <span data-ttu-id="89662-124">En el caso de las rutinas de objeto, el primer argumento termina en el segundo registro debido a que este puntero está en primer lugar.</span><span class="sxs-lookup"><span data-stu-id="89662-124">For object routines, the first argument ends up in the second register due to this pointer being first.</span></span> <span data-ttu-id="89662-125">En cada registro, el significado de bits es como se muestra en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="89662-125">For each register the meaning of bits is as shown in the following table.</span></span>

 



| <span data-ttu-id="89662-126">Bits</span><span class="sxs-lookup"><span data-stu-id="89662-126">Bits</span></span> | <span data-ttu-id="89662-127">Significado</span><span class="sxs-lookup"><span data-stu-id="89662-127">Meaning</span></span>                                          |
|------|--------------------------------------------------|
| <span data-ttu-id="89662-128">01</span><span class="sxs-lookup"><span data-stu-id="89662-128">01</span></span>   | <span data-ttu-id="89662-129">Un valor Float debe cargarse en el registro.</span><span class="sxs-lookup"><span data-stu-id="89662-129">A float value should be loaded to the register.</span></span>  |
| <span data-ttu-id="89662-130">10</span><span class="sxs-lookup"><span data-stu-id="89662-130">10</span></span>   | <span data-ttu-id="89662-131">Se debe cargar un valor Double en el registro.</span><span class="sxs-lookup"><span data-stu-id="89662-131">A double value should be loaded to the register.</span></span> |



 

<span data-ttu-id="89662-132">00 y 11 son valores no válidos para los bits.</span><span class="sxs-lookup"><span data-stu-id="89662-132">00 and 11 are invalid values for the bits.</span></span>

<span data-ttu-id="89662-133">Actualmente hay ocho registros FP en un procesador de 64 bits de arquitectura Intel, por lo que la máscara solo puede tener conjuntos de bits inferiores de 16B.</span><span class="sxs-lookup"><span data-stu-id="89662-133">Currently there are eight FP registers in an Intel Architecture 64-bit processor, hence the mask can have only 16b lowest bits set.</span></span> <span data-ttu-id="89662-134">El tamaño de la máscara se ha establecido en un total de 16 bits en función de la máscara del compilador de C que permanece sin cambios.</span><span class="sxs-lookup"><span data-stu-id="89662-134">The mask size has been set to a total of 16 bits based on the C-compiler mask remaining unchanged.</span></span>

## <a name="header-streamlining-for-performance"></a><span data-ttu-id="89662-135">Optimización del encabezado para el rendimiento</span><span class="sxs-lookup"><span data-stu-id="89662-135">Header Streamlining for Performance</span></span>

<span data-ttu-id="89662-136">Para simplificar el código y mejorar el rendimiento, el compilador intenta generar un encabezado de tamaño fijo siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="89662-136">To simplify code and improve performance, the compiler attempts to generate a fixed size header whenever possible.</span></span> <span data-ttu-id="89662-137">En concreto, se usa el encabezado siguiente para DCOM de Async:</span><span class="sxs-lookup"><span data-stu-id="89662-137">In particular, the following header is used for async DCOM:</span></span>

``` syntax
typedef struct _NDR_DCOM_OI2_PROC_HEADER
  {
  unsigned char               HandleType;        // The Oi header
  INTERPRETER_FLAGS           OldOiFlags;        //
  unsigned short              RpcFlagsLow;       //
  unsigned short              RpcFlagsHi;        //
  unsigned short              ProcNum;           //
  unsigned short              StackSize;         //
  // expl handle descr is never generated        //
  unsigned short              ClientBufferSize;  // The Oi2 header
  unsigned short              ServerBufferSize;  //
  INTERPRETER_OPT_FLAGS       Oi2Flags;          //
  unsigned char               NumberParams;      //
  } NDR_DCOM_OI2_PROC_HEADER, *PNDR_DCOM_OI2_PROC_HEADER;
```

 

 