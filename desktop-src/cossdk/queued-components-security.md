---
description: Seguridad de componentes en cola
ms.assetid: 3fbeb81a-e3e4-495b-b891-896877fab92f
title: Seguridad de componentes en cola
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 29b51592f6216d7380e877f2cd582a277f1583b8
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104153258"
---
# <a name="queued-components-security"></a><span data-ttu-id="451a4-103">Seguridad de componentes en cola</span><span class="sxs-lookup"><span data-stu-id="451a4-103">Queued Components Security</span></span>

<span data-ttu-id="451a4-104">Cuando un cliente realiza una llamada de método a un objeto en cola, la llamada se realiza realmente a la grabadora, que la empaqueta como parte de un mensaje en el servidor.</span><span class="sxs-lookup"><span data-stu-id="451a4-104">When a client makes a method call to a queued object, the call is actually made to the recorder, which packages it as part of a message to the server.</span></span> <span data-ttu-id="451a4-105">El agente de escucha lee el mensaje de la cola y lo pasa al reproductor.</span><span class="sxs-lookup"><span data-stu-id="451a4-105">The listener reads the message from the queue and passes it to the player.</span></span> <span data-ttu-id="451a4-106">El reproductor invoca el componente de servidor real y realiza la misma llamada de método.</span><span class="sxs-lookup"><span data-stu-id="451a4-106">The player invokes the actual server component and makes the same method call.</span></span> <span data-ttu-id="451a4-107">El componente de servidor debe observar el contexto de la llamada de seguridad del cliente (no el contexto de llamada de seguridad del reproductor) cuando el reproductor realiza la llamada al método.</span><span class="sxs-lookup"><span data-stu-id="451a4-107">The server component must observe the security call context of the client (not the player's security call context) when the player makes the method call.</span></span> <span data-ttu-id="451a4-108">La grabadora calcula las referencias del contexto de la llamada de seguridad del cliente en el mensaje y el reproductor no las serializa en el servidor antes de efectuar la llamada al método.</span><span class="sxs-lookup"><span data-stu-id="451a4-108">The recorder marshals the client's security call context into the message, and the player unmarshals it at the server before making the method call.</span></span> <span data-ttu-id="451a4-109">En lo que respecta al objeto de servidor, no hay ninguna diferencia en el contexto de seguridad entre una llamada directa desde el cliente y una llamada indirecta desde el reproductor.</span><span class="sxs-lookup"><span data-stu-id="451a4-109">As far as the server object is concerned, there is no difference in security context between a direct call from the client and an indirect call from the player.</span></span> <span data-ttu-id="451a4-110">En concreto, los métodos invocados Execute con los privilegios del remitente.</span><span class="sxs-lookup"><span data-stu-id="451a4-110">In particular, the methods invoked execute with the sender's privileges.</span></span>

<span data-ttu-id="451a4-111">Un componente en cola de COM+ admite la semántica de seguridad basada en roles, al igual que otros componentes creados para su uso con aplicaciones COM+.</span><span class="sxs-lookup"><span data-stu-id="451a4-111">A COM+ queued component supports role-based security semantics just like other components built for use with COM+ applications.</span></span> <span data-ttu-id="451a4-112">Por tanto, los componentes de una aplicación en cola pueden utilizar interfaces de programación para detectar la pertenencia a roles de su llamador ([**ISecurityCallContext:: IsCallerInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-iscallerinrole)) o un usuario específico ([**ISecurityCallContext:: IsUserInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-isuserinrole)).</span><span class="sxs-lookup"><span data-stu-id="451a4-112">Components of a queued application can therefore use programmatic interfaces to discover the role membership of their caller ([**ISecurityCallContext::IsCallerInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-iscallerinrole)) or a specific user ([**ISecurityCallContext::IsUserInRole**](/windows/desktop/api/ComSvcs/nf-comsvcs-isecuritycallcontext-isuserinrole)).</span></span> <span data-ttu-id="451a4-113">Se recomienda que cualquier componente en cola con un posible impacto en la seguridad Use estas interfaces para comprobar explícitamente las credenciales del remitente.</span><span class="sxs-lookup"><span data-stu-id="451a4-113">It is recommended that any queued component with a potential security impact use these interfaces to explicitly check the sender's credentials.</span></span>

<span data-ttu-id="451a4-114">La identidad del autor de la llamada es la identidad asociada a una llamada al método.</span><span class="sxs-lookup"><span data-stu-id="451a4-114">The caller identity is the identity associated with a method call.</span></span> <span data-ttu-id="451a4-115">La seguridad basada en roles utiliza la identidad del autor de la llamada y está presente en el contexto de la llamada de seguridad.</span><span class="sxs-lookup"><span data-stu-id="451a4-115">Caller identity is used by role-based security and is present in the security call context.</span></span> <span data-ttu-id="451a4-116">En los componentes en cola, la identidad del autor de la llamada se representa como datos en el mensaje de Message Queuing.</span><span class="sxs-lookup"><span data-stu-id="451a4-116">In queued components, the caller identity is represented as data in the Message Queuing message.</span></span> <span data-ttu-id="451a4-117">Message Queue Server autentica la identidad del remitente del mensaje.</span><span class="sxs-lookup"><span data-stu-id="451a4-117">Message Queuing authenticates the message sender identity.</span></span> <span data-ttu-id="451a4-118">Cuando la identidad del autor de la llamada y la identidad del remitente del mensaje son iguales, Message Queue Server autentica el mensaje y el autor de la llamada.</span><span class="sxs-lookup"><span data-stu-id="451a4-118">When the caller identity and the message sender identity are the same, Message Queuing authenticates both the message and the caller.</span></span> <span data-ttu-id="451a4-119">Este es el caso habitual.</span><span class="sxs-lookup"><span data-stu-id="451a4-119">This is the usual case.</span></span>

> [!Note]  
> <span data-ttu-id="451a4-120">Los componentes en cola de COM+ no admiten la seguridad de estilo de suplantación, que permite a un servidor obtener un token de acceso correspondiente a la identidad del cliente y usarlo para realizar comprobaciones de control de acceso o para actuar en el contexto de seguridad del cliente.</span><span class="sxs-lookup"><span data-stu-id="451a4-120">COM+ queued components does not support impersonation-style security, which allows a server to obtain an access token corresponding to the client identity and use it either to perform access control checks or to act under the client security context.</span></span>

 

<span data-ttu-id="451a4-121">Cuando el autor de la llamada de un componente en cola está interactuando con el componente a través de una grabadora fuera de proceso, las identidades del autor de la llamada y del remitente del mensaje (grabador) pueden ser diferentes.</span><span class="sxs-lookup"><span data-stu-id="451a4-121">When the caller of a queued component is interacting with the component through an out-of-process recorder, the identities of the caller and message sender (recorder) can be different.</span></span> <span data-ttu-id="451a4-122">En este caso, los componentes en cola de COM+ comprueban que el remitente del mensaje es miembro del rol de usuario de confianza QC en el servidor.</span><span class="sxs-lookup"><span data-stu-id="451a4-122">In this case, COM+ queued components verifies that the message sender is a member of the QC Trusted User role on the server.</span></span> <span data-ttu-id="451a4-123">Además, la grabadora fuera de proceso requiere un certificado de autenticación porque está siendo autenticado por Message Queuing.</span><span class="sxs-lookup"><span data-stu-id="451a4-123">Additionally, the out-of-process recorder requires an authentication certificate because it is being authenticated by Message Queuing.</span></span>

<span data-ttu-id="451a4-124">Los miembros de la función Usuarios de confianza QC pueden especificar una identidad arbitraria, lo que significa que un miembro malintencionado podría ejecutar una llamada a un componente en cola con privilegios elevados.</span><span class="sxs-lookup"><span data-stu-id="451a4-124">Members of the QC Trusted User role are allowed to specify an arbitrary identity, which means that a malicious member could execute a queued component call with elevated privileges.</span></span> <span data-ttu-id="451a4-125">Por lo tanto, se recomienda que el número de estos usuarios se mantenga en el mínimo posible.</span><span class="sxs-lookup"><span data-stu-id="451a4-125">It is therefore recommended that the number of such users be kept to an absolute minimum.</span></span>

<span data-ttu-id="451a4-126">Debido al riesgo de un ataque complejo asociado a cualquier mecanismo que propague la identidad a través de una red, así como el riesgo de un ataque de denegación de servicio simple mediante la saturación de las colas con solicitudes no ejecutables, se recomienda implementar el servicio de componentes en cola de COM+ solo en una red de hosts de confianza, por ejemplo, en una red privada o una , o detrás de un firewall configurado correctamente.</span><span class="sxs-lookup"><span data-stu-id="451a4-126">Because of the risk of a sophisticated attack associated with any mechanism which propagates identity across a network, as well as the risk of a simple denial of service attack by flooding the queues with unexecutable requests, it is recommended that you deploy the COM+ queued components service only on a network of trusted hosts—for example, on a private network or a virtual private network, or behind an appropriately configured firewall.</span></span>

<span data-ttu-id="451a4-127">Los componentes en cola de COM+ se ejecutan a través de DCOM, por lo que puede ayudar a proteger la integridad y la confidencialidad de las llamadas a métodos en cola seleccionando **privacidad de paquetes** como el **nivel de autenticación de la configuración de llamadas** en la pestaña **seguridad** de la hoja de **propiedades** de la aplicación en cola.</span><span class="sxs-lookup"><span data-stu-id="451a4-127">COM+ queued components runs over DCOM, so you can help protect the integrity and secrecy of queued method calls by selecting **Packet Privacy** as the **Authentication Level of Calls** setting on the **Security** tab of your queued application's **Properties** sheet.</span></span>

## <a name="related-topics"></a><span data-ttu-id="451a4-128">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="451a4-128">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="451a4-129">Seguridad de COM+</span><span class="sxs-lookup"><span data-stu-id="451a4-129">COM+ Security</span></span>](com--security.md)
</dt> <dt>

[<span data-ttu-id="451a4-130">Limitaciones de seguridad en el modo de grupo de trabajo</span><span class="sxs-lookup"><span data-stu-id="451a4-130">Security Limitations in Workgroup Mode</span></span>](security-limitations-in-workgroup-mode.md)
</dt> <dt>

[<span data-ttu-id="451a4-131">Especificar el protocolo de autenticación</span><span class="sxs-lookup"><span data-stu-id="451a4-131">Specifying the Authentication Protocol</span></span>](specifying-the-authentication-protocol.md)
</dt> </dl>

 

 



