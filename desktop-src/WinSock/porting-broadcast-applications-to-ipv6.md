---
description: En esta sección se describen los procedimientos recomendados para portar una aplicación de difusión IPv6 a las capacidades de multidifusión disponibles con Windows Sockets.
ms.assetid: 12e491fd-650f-43b4-afa1-9f37b1c30240
title: Trasladar aplicaciones de difusión a IPv6
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b9f7dce09db6822a6f9b0a61873ca6bbff5a256b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104497441"
---
# <a name="porting-broadcast-applications-to-ipv6"></a><span data-ttu-id="0ae43-103">Trasladar aplicaciones de difusión a IPv6</span><span class="sxs-lookup"><span data-stu-id="0ae43-103">Porting Broadcast Applications to IPv6</span></span>

<span data-ttu-id="0ae43-104">En esta sección se describen los procedimientos recomendados para portar una aplicación de difusión IPv6 a las capacidades de multidifusión disponibles con Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="0ae43-104">This section describes best practices for porting an IPv6 broadcast application to the multicast capabilities available with Windows Sockets.</span></span>

## <a name="comparing-ipv4-to-ipv6"></a><span data-ttu-id="0ae43-105">Comparar IPv4 con IPv6</span><span class="sxs-lookup"><span data-stu-id="0ae43-105">Comparing IPv4 to IPv6</span></span>

<span data-ttu-id="0ae43-106">La consideración más importante a la hora de preparar la migración de una aplicación de difusión IPv4 a IPv6 es la siguiente: IPv6 no tiene ningún concepto de difusión implementado.</span><span class="sxs-lookup"><span data-stu-id="0ae43-106">The most notable consideration when preparing to port an IPv4 broadcast application to IPv6 is this: IPv6 has no implemented concept of broadcast.</span></span> <span data-ttu-id="0ae43-107">En su lugar, IPv6 utiliza multidifusión.</span><span class="sxs-lookup"><span data-stu-id="0ae43-107">Instead, IPv6 uses multicast.</span></span>

<span data-ttu-id="0ae43-108">La multidifusión para IPv6 puede emular las capacidades de difusión tradicionales que se encuentran en IPv4.</span><span class="sxs-lookup"><span data-stu-id="0ae43-108">Multicast for IPv6 can emulate traditional broadcast capabilities found in IPv4.</span></span> <span data-ttu-id="0ae43-109">El establecimiento de la opción [IPv6 agregar socket de \_ \_ pertenencia](ipproto-ipv6-socket-options.md) con la dirección IPv6 establecida en el ámbito local del vínculo todos los nodos (FF02:: 1) es equivalente a la difusión en direcciones IPv4 de difusión mediante la opción de socket de [ \_ difusión](socket-options.md) .</span><span class="sxs-lookup"><span data-stu-id="0ae43-109">Setting the [IPV6\_ADD\_MEMBERSHIP](ipproto-ipv6-socket-options.md) socket option with the IPv6 address set to the link-local scope all nodes address (FF02::1) is equivalent to broadcasting on IPv4 broadcast addresses using the [SO\_BROADCAST](socket-options.md) socket option.</span></span> <span data-ttu-id="0ae43-110">Esta dirección se denomina a veces *grupo de multidifusión todos los nodos*.</span><span class="sxs-lookup"><span data-stu-id="0ae43-110">This address is sometimes called the *all-nodes multicast group*.</span></span> <span data-ttu-id="0ae43-111">En el caso de las aplicaciones que simplemente quieren emulación de difusión para IPv6, ese enfoque es operativo equivalente.</span><span class="sxs-lookup"><span data-stu-id="0ae43-111">For applications that simply want broadcast emulation for IPv6, that approach is operationally equivalent.</span></span> <span data-ttu-id="0ae43-112">Sin embargo, una diferencia importante con IPv6 es que las multidifusiones en la dirección del grupo de multidifusión de todos los nodos no se reciben de forma predeterminada (las difusiones IPv4 se reciben de forma predeterminada).</span><span class="sxs-lookup"><span data-stu-id="0ae43-112">One notable difference with IPv6, however, is that multicasts on the all-nodes multicast group address are not received by default (IPv4 broadcasts are received by default).</span></span> <span data-ttu-id="0ae43-113">Los programadores de aplicaciones deben usar \_ la \_ opción IPv6 agregar socket de pertenencia para habilitar la recepción de multidifusión desde cualquier origen, incluida la dirección del grupo de multidifusión todos los nodos.</span><span class="sxs-lookup"><span data-stu-id="0ae43-113">Application programmers must use the IPV6\_ADD\_MEMBERSHIP socket option to enable multicast reception from any source, including the all-nodes multicast group address.</span></span>

> [!Note]  
> <span data-ttu-id="0ae43-114">En IPv6, la selección de la interfaz se especifica en la estructura del argumento que se pasa a la opción de socket de multidifusión o IOCTL.</span><span class="sxs-lookup"><span data-stu-id="0ae43-114">In IPv6, interface selection is specified in the argument structure passed to the multicast socket option or IOCTL.</span></span>

 

<span data-ttu-id="0ae43-115">Pero para las transmisiones más enriquecidas, más sólidas, más selectivas y más fáciles de administrar a varios hosts, los desarrolladores de aplicaciones deben considerar la posibilidad de pasar a un modelo de multidifusión.</span><span class="sxs-lookup"><span data-stu-id="0ae43-115">But for richer, more robust, more selective and more manageable transmissions to multiple hosts, application developers should consider moving to a multicast model.</span></span>

## <a name="moving-to-multicast"></a><span data-ttu-id="0ae43-116">Mover a multidifusión</span><span class="sxs-lookup"><span data-stu-id="0ae43-116">Moving to Multicast</span></span>

<span data-ttu-id="0ae43-117">Con la multidifusión, los programadores de aplicaciones pueden elegir selectivamente un par de origen y grupo determinado, habilitando un modelo de recepción selectivo.</span><span class="sxs-lookup"><span data-stu-id="0ae43-117">With multicast, application programmers can selectively choose a particular source/group pair, enabling a selective reception model.</span></span> <span data-ttu-id="0ae43-118">La detección del agente de escucha de multidifusión (MLD) en IPv6 y la versión 3 del Protocolo de administración de grupos de Internet (IGMPv3) en IPv4 admiten la programación multidifusión.</span><span class="sxs-lookup"><span data-stu-id="0ae43-118">The Multicast Listener Discovery (MLD) on IPv6 and version 3 of the Internet Group Management Protocol (IGMPv3) on IPv4 support multicasting programming.</span></span> <span data-ttu-id="0ae43-119">Además, la multidifusión permite a las aplicaciones bloquear (o desbloquear) remitentes de forma específica dentro de un grupo, lo que protege aún más las aplicaciones de emisores no autorizados.</span><span class="sxs-lookup"><span data-stu-id="0ae43-119">In addition, multicast enables applications to specifically block (or unblock) senders within a group, further protecting applications from rogue broadcasters.</span></span> <span data-ttu-id="0ae43-120">Esta capacidad está disponible para IPv4 (requiere IGMPv3), así como IPv6 (requiere MLDv2).</span><span class="sxs-lookup"><span data-stu-id="0ae43-120">This capability is available for IPv4 (requires IGMPv3) as well as IPv6 (requires MLDv2).</span></span>

<span data-ttu-id="0ae43-121">Hay dos escenarios principales para los programadores de aplicaciones que usan multidifusión: los que se trasladan de las aplicaciones IPv4 de difusión (o multidifusión) a IPv6, y que crean nuevas aplicaciones IPv6 de multidifusión.</span><span class="sxs-lookup"><span data-stu-id="0ae43-121">There are two primary scenarios for application programmers using multicast: those porting from IPv4 broadcast (or multicast) applications to IPv6, and those creating new IPv6 multicast applications.</span></span>

<span data-ttu-id="0ae43-122">Para migrar las aplicaciones existentes, hay dos opciones para moverse a IPv6 multicast: usar las opciones de socket y usar ioctl.</span><span class="sxs-lookup"><span data-stu-id="0ae43-122">For porting existing applications, there are two options to move to IPv6 multicast: using socket options and using IOCTLs.</span></span>

-   <span data-ttu-id="0ae43-123">El uso de las opciones de socket es un enfoque basado en el cambio que permite a los desarrolladores cambiar las propiedades del socket según sea necesario (por ejemplo, bloquear o desbloquear un remitente, agregar un nuevo origen, etc.).</span><span class="sxs-lookup"><span data-stu-id="0ae43-123">Using socket options is a change-based approach, which enables developers to change the socket properties as required (such as blocking or unblocking a sender, adding a new source, and so on).</span></span> <span data-ttu-id="0ae43-124">Este enfoque es más intuitivo y el enfoque recomendado.</span><span class="sxs-lookup"><span data-stu-id="0ae43-124">This approach is more intuitive and the recommended approach.</span></span> <span data-ttu-id="0ae43-125">Para obtener más información sobre el enfoque basado en cambios para la programación de multidifusión, consulte [MLD y IGMP con Windows Sockets](igmp-and-windows-sockets.md).</span><span class="sxs-lookup"><span data-stu-id="0ae43-125">For more information on the change-based approach to multicast programming, see [MLD and IGMP Using Windows Sockets](igmp-and-windows-sockets.md).</span></span>
-   <span data-ttu-id="0ae43-126">El uso de ioctl es un enfoque basado en el estado final, ya que permite a los desarrolladores proporcionar un estado de socket totalmente configurado, incluidas listas de inclusión y exclusión, con una llamada.</span><span class="sxs-lookup"><span data-stu-id="0ae43-126">Using IOCTLs is a final-state based approach, because it enables developers to provide a fully-configured socket state, including inclusion and exclusion lists, with one call.</span></span> <span data-ttu-id="0ae43-127">Para obtener más información sobre el enfoque basado en el estado final, vea [programación de multidifusión basada en el estado final](final-state-based-multicast-programming.md).</span><span class="sxs-lookup"><span data-stu-id="0ae43-127">For more information on the final-state based approach, see [Final-State-Based Multicast Programming](final-state-based-multicast-programming.md).</span></span>

<span data-ttu-id="0ae43-128">En el caso de los que crean nuevas aplicaciones de multidifusión IPv6, el procedimiento recomendado es usar las opciones de socket, en lugar de usar ioctl.</span><span class="sxs-lookup"><span data-stu-id="0ae43-128">For those creating new IPv6 multicast applications, the recommended practice is to use socket options, rather than using IOCTLs.</span></span>

<span data-ttu-id="0ae43-129">Hay otro enfoque para crear aplicaciones de multidifusión con IPv6 y que conlleva el uso de la función [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) .</span><span class="sxs-lookup"><span data-stu-id="0ae43-129">There is one other approach to creating multicast applications with IPv6, and that entails using the [**WSAJoinLeaf**](/windows/desktop/api/Winsock2/nf-winsock2-wsajoinleaf) function.</span></span> <span data-ttu-id="0ae43-130">Aunque no se recomienda usar la función **WSAJoinLeaf** , hay situaciones que pueden dictar su uso.</span><span class="sxs-lookup"><span data-stu-id="0ae43-130">While using the **WSAJoinLeaf** function is not the recommended practice, there are situations that may dictate its use.</span></span> <span data-ttu-id="0ae43-131">Por ejemplo, un inconveniente de usar las opciones de socket en Windows Server 2003 y versiones anteriores es que son específicas de la versión de IP.</span><span class="sxs-lookup"><span data-stu-id="0ae43-131">For example, one drawback to using socket options on Windows Server 2003 and earlier is that they are IP version specific.</span></span> <span data-ttu-id="0ae43-132">En estas versiones anteriores de Windows, las distintas opciones de sockets deben ser para IPv6 e IPv4.</span><span class="sxs-lookup"><span data-stu-id="0ae43-132">On these older versions of Windows, different sockets options must be for IPv6 and IPv4.</span></span> <span data-ttu-id="0ae43-133">En Windows Vista y versiones posteriores, se admiten las nuevas opciones de socket que se pueden usar con IPv4 e IPv6.</span><span class="sxs-lookup"><span data-stu-id="0ae43-133">On Windows Vista and later, new socket options are supported that can be used with both IPv4 and IPv6.</span></span> <span data-ttu-id="0ae43-134">Por el contrario, la función **WSAJoinLeaf** es independiente del protocolo y la versión de IP y, por lo tanto, puede ser un enfoque útil para crear una aplicación que deba trabajar con varias versiones IP en Windows Server 2003 y versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="0ae43-134">The **WSAJoinLeaf** function, in contrast, is IP version and protocol agnostic, and therefore it can be a useful approach for building an application that must work with multiple IP versions on Windows Server 2003 and earlier.</span></span> <span data-ttu-id="0ae43-135">El uso de la función **WSAJoinLeaf** puede ser más adecuado en algunas situaciones en las que se requiere el protocolo y el agnóstico de la versión de IP.</span><span class="sxs-lookup"><span data-stu-id="0ae43-135">Using the **WSAJoinLeaf** function may be more appropriate in certain situations where protocol and IP-version agnosticism is required.</span></span>

 

 



