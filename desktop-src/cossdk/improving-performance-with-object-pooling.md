---
description: Mejorar el rendimiento con la agrupación de objetos
ms.assetid: 7a8a38d8-6549-4686-a298-f3b427b380e3
title: Mejorar el rendimiento con la agrupación de objetos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 398b9140080d3a439293b5152b4da7251978e800
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105705326"
---
# <a name="improving-performance-with-object-pooling"></a><span data-ttu-id="f52fd-103">Mejorar el rendimiento con la agrupación de objetos</span><span class="sxs-lookup"><span data-stu-id="f52fd-103">Improving Performance with Object Pooling</span></span>

<span data-ttu-id="f52fd-104">La agrupación de objetos puede ser muy eficaz en determinadas circunstancias, produciendo aumentos sustanciales en el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="f52fd-104">Object pooling can be extremely effective in certain circumstances, yielding substantial increases in performance.</span></span> <span data-ttu-id="f52fd-105">La idea general de volver a usar los objetos para obtener la mejor ventaja es agrupar tantos recursos como sea posible, Factorizando la inicialización del trabajo real realizado y, a continuación, personalizando administrativamente las características del grupo en el hardware real en el momento de la implementación.</span><span class="sxs-lookup"><span data-stu-id="f52fd-105">The general idea for reusing objects to best advantage is to pool as many resources as possible, factoring out initialization from actual work performed, and then to administratively tailor the pool characteristics to actual hardware at deployment time.</span></span> <span data-ttu-id="f52fd-106">Es decir, debe continuar según los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="f52fd-106">That is, you should proceed according to the following steps:</span></span>

1.  <span data-ttu-id="f52fd-107">Escriba el objeto para factorizar una inicialización costosa y la adquisición de recursos que se realiza para cualquier cliente como requisito previo para realizar el trabajo real en nombre del cliente.</span><span class="sxs-lookup"><span data-stu-id="f52fd-107">Write the object so as to factor out expensive initialization and resource acquisition that is performed for any client as a prerequisite to doing actual work on the client's behalf.</span></span> <span data-ttu-id="f52fd-108">Escriba constructores de objetos pesados para agrupar tantos recursos como sea posible, de modo que los requiera el objeto y estén inmediatamente disponibles cuando los clientes obtengan un objeto del grupo.</span><span class="sxs-lookup"><span data-stu-id="f52fd-108">Write heavy object constructors to pool as many resources as possible so that these are held by the object and immediately available when clients get an object from the pool.</span></span>
2.  <span data-ttu-id="f52fd-109">Configure el grupo de forma administrativa para lograr el mejor equilibrio en los recursos de hardware disponibles, por lo que normalmente comercia la memoria dedicada al mantenimiento de un grupo de un tamaño determinado en Exchange para agilizar el acceso de cliente y el uso de los objetos.</span><span class="sxs-lookup"><span data-stu-id="f52fd-109">Administratively configure the pool to achieve the best balance in available hardware resources, usually trading the memory dedicated to maintaining a pool of a certain size in exchange for faster client access and use of objects.</span></span> <span data-ttu-id="f52fd-110">En un momento determinado, la agrupación alcanzará las devoluciones más reducidas y podrá obtener un buen rendimiento suficiente a la vez que se limite el posible uso de recursos por parte de un componente determinado.</span><span class="sxs-lookup"><span data-stu-id="f52fd-110">At a certain point, pooling will achieve diminishing returns and you can get good enough performance while limiting possible resource usage by a particular component.</span></span>

## <a name="doing-actual-work-or-acquiring-resources"></a><span data-ttu-id="f52fd-111">Realizar trabajo real o adquirir recursos</span><span class="sxs-lookup"><span data-stu-id="f52fd-111">Doing Actual Work or Acquiring Resources</span></span>

<span data-ttu-id="f52fd-112">Si tiene un componente que los clientes usarán brevemente y en rápida sucesión, donde una parte significativa del tiempo de uso de los objetos se invierte en la adquisición de recursos o en la inicialización antes de realizar un trabajo específico para el cliente, lo más probable es que escribir el componente para usar la agrupación de objetos es una gran victoria para usted.</span><span class="sxs-lookup"><span data-stu-id="f52fd-112">If you have a component that clients will use briefly and in rapid succession, where a significant portion of object use time is spent in acquiring resources or initializing prior to doing specific work for the client, chances are that writing your component to use object pooling will be a big win for you.</span></span>

<span data-ttu-id="f52fd-113">Puede escribir el componente de modo que en el constructor del objeto realice todo el trabajo que consume mucho tiempo y que sea uniforme para todos los clientes como sea posible: adquirir una o varias conexiones, ejecutar scripts, capturar datos de inicialización de archivos o a través de una red, etc.</span><span class="sxs-lookup"><span data-stu-id="f52fd-113">You can write the component so that in the object's constructor you perform as much of the time-consuming work that is uniform for all clients as possible—acquiring one or several connections, running scripts, fetching initialization data from files or across a network, and so forth.</span></span> <span data-ttu-id="f52fd-114">Esto tiene el efecto de agrupar cada uno de estos recursos.</span><span class="sxs-lookup"><span data-stu-id="f52fd-114">This has the effect of pooling every such resource.</span></span> <span data-ttu-id="f52fd-115">Está agrupando la combinación de recursos y el estado genérico necesario para realizar algún trabajo.</span><span class="sxs-lookup"><span data-stu-id="f52fd-115">You are pooling the combination of resources and generic state necessary to perform some work.</span></span>

<span data-ttu-id="f52fd-116">En este caso, cuando los clientes obtienen un objeto del grupo, tienen esos recursos inmediatamente disponibles.</span><span class="sxs-lookup"><span data-stu-id="f52fd-116">In this circumstance, when clients get an object from the pool, they have those resources immediately available.</span></span> <span data-ttu-id="f52fd-117">Normalmente, usarán el objeto para realizar algunas unidades pequeñas de trabajo, insertar o extraer datos y, a continuación, el objeto llamará a [**IObjectContext:: SetComplete**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setcomplete) o [**IObjectContext:: SetAbort**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setabort) y devolverá.</span><span class="sxs-lookup"><span data-stu-id="f52fd-117">Typically, they will use the object to do some small unit of work, pushing or pulling data, and then the object will call [**IObjectContext::SetComplete**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setcomplete) or [**IObjectContext::SetAbort**](/windows/desktop/api/ComSvcs/nf-comsvcs-iobjectcontext-setabort) and return.</span></span> <span data-ttu-id="f52fd-118">Con patrones de uso rápido, como esto, la agrupación proporciona excelentes ventajas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="f52fd-118">With rapid-fire use patterns such as this, pooling yields excellent performance benefits.</span></span> <span data-ttu-id="f52fd-119">Puede aprovechar por completo la simplicidad del modelo de programación de transacciones automáticas sin estado y, a la vez, conseguir un rendimiento equivalente a los componentes con estado tradicionales.</span><span class="sxs-lookup"><span data-stu-id="f52fd-119">You can fully leverage the simplicity of the stateless automatic transaction programming model yet achieve performance on par with traditional stateful components.</span></span>

<span data-ttu-id="f52fd-120">Sin embargo, si los clientes usan un objeto durante mucho tiempo cada vez que lo llaman, la agrupación tendrá menos sentido.</span><span class="sxs-lookup"><span data-stu-id="f52fd-120">However, if clients use an object for a long time each time they call it, pooling will make less sense.</span></span> <span data-ttu-id="f52fd-121">La ventaja de velocidad que se obtiene es marginal, ya que aumenta el tiempo de uso en relación con el tiempo de inicialización.</span><span class="sxs-lookup"><span data-stu-id="f52fd-121">The speed advantage that you gain is marginal as use time increases relative to initialization time.</span></span> <span data-ttu-id="f52fd-122">Obtiene devoluciones más reducidas que podrían no justificar el costo de la memoria necesaria para contener un grupo de objetos activos.</span><span class="sxs-lookup"><span data-stu-id="f52fd-122">You get diminishing returns that may not justify the cost of the memory necessary to hold a pool of active objects.</span></span>

## <a name="sharing-cost-across-multiple-clients"></a><span data-ttu-id="f52fd-123">Uso compartido de costos entre varios clientes</span><span class="sxs-lookup"><span data-stu-id="f52fd-123">Sharing Cost Across Multiple Clients</span></span>

<span data-ttu-id="f52fd-124">Una variación en la factorización de la inicialización es que puede usar la agrupación para amortizar estadísticamente el costo de adquirir recursos caros.</span><span class="sxs-lookup"><span data-stu-id="f52fd-124">A variation on factoring out initialization is that you can use pooling to statistically amortize the cost of acquiring expensive resources.</span></span> <span data-ttu-id="f52fd-125">Si toma el acierto de adquisición o inicialización una vez y, después, vuelve a usar el objeto, comparte ese costo entre todos los clientes que usan el objeto durante su duración.</span><span class="sxs-lookup"><span data-stu-id="f52fd-125">If you take the hit of acquisition or initialization once and then reuse the object, you share that cost across all clients that use the object during its lifetime.</span></span> <span data-ttu-id="f52fd-126">El tiempo de construcción pesado se produce solo una vez por objeto.</span><span class="sxs-lookup"><span data-stu-id="f52fd-126">Heavy construction time is incurred only once per object.</span></span>

## <a name="preallocating-objects"></a><span data-ttu-id="f52fd-127">Asignación previa de objetos</span><span class="sxs-lookup"><span data-stu-id="f52fd-127">Preallocating Objects</span></span>

<span data-ttu-id="f52fd-128">Si especifica un tamaño mínimo de grupo distinto de cero, se creará el número mínimo de objetos y se agrupará cuando se inicie la aplicación, listos para los clientes que llamen a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f52fd-128">If you specify a nonzero minimum pool size, that minimum number of objects will be created and pooled when the application starts, ready for any clients that call in to the application.</span></span>

## <a name="governing-resource-use-with-pool-management"></a><span data-ttu-id="f52fd-129">Controlar el uso de recursos con la administración de grupos</span><span class="sxs-lookup"><span data-stu-id="f52fd-129">Governing Resource Use with Pool Management</span></span>

<span data-ttu-id="f52fd-130">Puede usar el tamaño máximo del grupo para controlar con precisión cómo se usan los recursos.</span><span class="sxs-lookup"><span data-stu-id="f52fd-130">You can use the maximum pool size to govern very precisely how you use resources.</span></span> <span data-ttu-id="f52fd-131">Por ejemplo, si tiene una licencia de un determinado número de conexiones de base de datos, puede controlar Cuántas conexiones tiene abiertas en cualquier momento.</span><span class="sxs-lookup"><span data-stu-id="f52fd-131">For example, if you have licensed a certain number of database connections, you can control how many connections you have open at any time.</span></span>

<span data-ttu-id="f52fd-132">Cuando tenga en cuenta los patrones de uso de los clientes, las características de uso de objetos y los recursos físicos, como la memoria y las conexiones, es probable que encuentre un punto de equilibrio óptimo al ajustar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="f52fd-132">When you take into consideration client use patterns, object use characteristics, and physical resources such as memory and connections, you are likely to find some optimal balance point when you do performance tuning.</span></span> <span data-ttu-id="f52fd-133">Los objetos de agrupación producirán devoluciones decrecientes después de un determinado punto.</span><span class="sxs-lookup"><span data-stu-id="f52fd-133">Pooling objects will yield diminishing returns after a certain point.</span></span> <span data-ttu-id="f52fd-134">Puede determinar qué nivel de rendimiento necesita y equilibrar con qué recursos son necesarios para lograrlo.</span><span class="sxs-lookup"><span data-stu-id="f52fd-134">You can determine what level of performance you require and balance that against what resources are necessary to achieve it.</span></span>

<span data-ttu-id="f52fd-135">Para facilitar el ajuste del rendimiento al configurar la agrupación de objetos, puede supervisar las estadísticas de objetos de los componentes de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="f52fd-135">To facilitate performance tuning when you configure object pooling, you can monitor object statistics for the components in an application.</span></span> <span data-ttu-id="f52fd-136">Para obtener más información, consulte [supervisión de estadísticas de objetos](monitoring-object-statistics.md).</span><span class="sxs-lookup"><span data-stu-id="f52fd-136">For details, see [Monitoring Object Statistics](monitoring-object-statistics.md).</span></span>

## <a name="improve-performance-of-jit-activated-components"></a><span data-ttu-id="f52fd-137">Mejorar el rendimiento de los componentes de JIT-Activated</span><span class="sxs-lookup"><span data-stu-id="f52fd-137">Improve Performance of JIT-Activated Components</span></span>

<span data-ttu-id="f52fd-138">La agrupación de objetos funciona muy bien con el servicio de [activación Just-in-Time de com+](com--just-in-time-activation.md) .</span><span class="sxs-lookup"><span data-stu-id="f52fd-138">Object pooling works very well with the [COM+ just-in-time activation](com--just-in-time-activation.md) service.</span></span> <span data-ttu-id="f52fd-139">Al agrupar los objetos que se están activando con JIT, puede acelerar la reactivación de objetos.</span><span class="sxs-lookup"><span data-stu-id="f52fd-139">By pooling objects that are being JIT-activated, you can speed object reactivation.</span></span> <span data-ttu-id="f52fd-140">Se obtienen las ventajas de mantener el canal abierto por la activación JIT, a la vez que se mitiga el costo de la reactivación.</span><span class="sxs-lookup"><span data-stu-id="f52fd-140">You get the benefits of holding the channel open by JIT activation while mitigating the cost of reactivation.</span></span> <span data-ttu-id="f52fd-141">En este caso, puede usar la agrupación para controlar la cantidad de memoria que desea asignar a los objetos que tienen referencias activas.</span><span class="sxs-lookup"><span data-stu-id="f52fd-141">You can use pooling in this case to govern how much memory you wish to allocate to objects that have references active.</span></span>

<span data-ttu-id="f52fd-142">Lo más probable es que esté agrupando los componentes activados con JIT cuando sean transaccionales.</span><span class="sxs-lookup"><span data-stu-id="f52fd-142">You are most likely to be pooling JIT-activated components when they are transactional.</span></span> <span data-ttu-id="f52fd-143">La agrupación de objetos está optimizada para controlar los componentes transaccionales.</span><span class="sxs-lookup"><span data-stu-id="f52fd-143">Object pooling is optimized to handle transactional components.</span></span> <span data-ttu-id="f52fd-144">Para obtener más información, vea [agrupar objetos transaccionales](pooling-transactional-objects.md).</span><span class="sxs-lookup"><span data-stu-id="f52fd-144">For more information, see [Pooling Transactional Objects](pooling-transactional-objects.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="f52fd-145">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="f52fd-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f52fd-146">Cadenas del constructor de objetos COM+</span><span class="sxs-lookup"><span data-stu-id="f52fd-146">COM+ Object Constructor Strings</span></span>](com--object-constructor-strings.md)
</dt> <dt>

[<span data-ttu-id="f52fd-147">Controlar la duración y el estado de los objetos</span><span class="sxs-lookup"><span data-stu-id="f52fd-147">Controlling Object Lifetime and State</span></span>](controlling-object-lifetime-and-state.md)
</dt> <dt>

[<span data-ttu-id="f52fd-148">Cómo funciona la agrupación de objetos</span><span class="sxs-lookup"><span data-stu-id="f52fd-148">How Object Pooling Works</span></span>](how-object-pooling-works.md)
</dt> <dt>

[<span data-ttu-id="f52fd-149">Agrupar objetos transaccionales</span><span class="sxs-lookup"><span data-stu-id="f52fd-149">Pooling Transactional Objects</span></span>](pooling-transactional-objects.md)
</dt> <dt>

[<span data-ttu-id="f52fd-150">Requisitos para objetos agrupables</span><span class="sxs-lookup"><span data-stu-id="f52fd-150">Requirements for Poolable Objects</span></span>](requirements-for-poolable-objects.md)
</dt> </dl>

 

 



