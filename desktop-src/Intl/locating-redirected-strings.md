---
description: En este tema se describen las instrucciones de programación para buscar cadenas de registro redirigidas. Para obtener más información, vea usar el redireccionamiento de cadenas del registro.
ms.assetid: 03d1512f-35a6-4b3a-9a0e-97e17bd9b126
title: Localizar cadenas redirigidas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f11600ad57c04de54d914c2c876b67967dfa1467
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105687094"
---
# <a name="locating-redirected-strings"></a><span data-ttu-id="bc5ed-104">Localizar cadenas redirigidas</span><span class="sxs-lookup"><span data-stu-id="bc5ed-104">Locating Redirected Strings</span></span>

<span data-ttu-id="bc5ed-105">En este tema se describen las instrucciones de programación para buscar cadenas de registro redirigidas.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-105">This topic discusses programming instructions for locating redirected registry strings.</span></span> <span data-ttu-id="bc5ed-106">Para obtener más información, vea [usar el redireccionamiento de cadenas del registro](using-registry-string-redirection.md).</span><span class="sxs-lookup"><span data-stu-id="bc5ed-106">For more information, see [Using Registry String Redirection](using-registry-string-redirection.md).</span></span>

## <a name="load-a-language-neutral-registry-value"></a><span data-ttu-id="bc5ed-107">Carga de un valor del registro de Language-Neutral</span><span class="sxs-lookup"><span data-stu-id="bc5ed-107">Load a Language-Neutral Registry Value</span></span>

<span data-ttu-id="bc5ed-108">En Windows Vista y versiones posteriores, la aplicación MUI usa un valor del registro independiente del lenguaje para permitir el acceso a cadenas específicas del idioma almacenadas en una tabla de recursos de cadena.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-108">On Windows Vista and later, the MUI application uses a language-neutral registry value to allow access to language-specific strings stored in a string resource table.</span></span> <span data-ttu-id="bc5ed-109">Para obtener más información, vea crear un recurso de Language-Neutral en [con el redireccionamiento de cadenas del registro](using-registry-string-redirection.md).</span><span class="sxs-lookup"><span data-stu-id="bc5ed-109">For more information, see Create a Language-Neutral Resource in [Using Registry String Redirection](using-registry-string-redirection.md).</span></span>

<span data-ttu-id="bc5ed-110">El código de aplicación que lee el valor independiente del lenguaje del registro debe cargar las cadenas en el idioma de la interfaz de usuario correcto mediante una llamada a [**RegLoadMUIStringW**](/windows/win32/api/winreg/nf-winreg-regloadmuistringa).</span><span class="sxs-lookup"><span data-stu-id="bc5ed-110">Application code that reads the language-neutral value from the registry should load the strings in the correct user interface language by calling [**RegLoadMUIStringW**](/windows/win32/api/winreg/nf-winreg-regloadmuistringa).</span></span> <span data-ttu-id="bc5ed-111">Si usa esta función, la aplicación no tiene que tratar explícitamente con la carga de recursos.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-111">If using this function, your application does not have to deal explicitly with resource loading.</span></span>

<span data-ttu-id="bc5ed-112">Si está actualizando una aplicación existente al uso independiente del lenguaje del registro, normalmente mantendrá los valores de cadena existentes, localizados en inglés o en algún otro idioma del registro, como reserva y por compatibilidad con versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-112">If you are updating an existing application to the language-neutral use of the registry, you will typically keep the existing string values, localized to English or to some other single language in the registry, as fallbacks and for backward compatibility.</span></span> <span data-ttu-id="bc5ed-113">Mantener una cadena literal en el registro permite a la aplicación revertir a la cadena literal si se produce un error en una llamada a [**RegLoadMUIStringW**](/windows/win32/api/winreg/nf-winreg-regloadmuistringa) .</span><span class="sxs-lookup"><span data-stu-id="bc5ed-113">Keeping a literal string in the registry allows the application to fall back to the literal string if a call to [**RegLoadMUIStringW**](/windows/win32/api/winreg/nf-winreg-regloadmuistringa) fails.</span></span> <span data-ttu-id="bc5ed-114">Debe decidir cómo implementar este tipo de reserva, ya que MUI no proporciona compatibilidad con dicha implementación.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-114">You must decide how to implement such a fallback, as MUI provides no support for such an implementation.</span></span>

## <a name="use-shell-api-to-set-shortcut-strings-from-the-registry"></a><span data-ttu-id="bc5ed-115">Usar la API de Shell para establecer cadenas de acceso directo del registro</span><span class="sxs-lookup"><span data-stu-id="bc5ed-115">Use Shell API to Set Shortcut Strings from the Registry</span></span>

<span data-ttu-id="bc5ed-116">La aplicación puede usar la API de Shell para crear cadenas para los accesos directos que vinculan archivos o carpetas en el menú **Inicio** o en el escritorio.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-116">Your application can use the shell API to create strings for shortcuts that link files or folders in the **Start** menu or on the desktop.</span></span> <span data-ttu-id="bc5ed-117">Para obtener más información, vea crear recursos para cadenas de acceso directo en [usar redirección de cadenas del registro](using-registry-string-redirection.md).</span><span class="sxs-lookup"><span data-stu-id="bc5ed-117">For more information, see Create Resources for Shortcut Strings in [Using Registry String Redirection](using-registry-string-redirection.md).</span></span>

<span data-ttu-id="bc5ed-118">La aplicación puede utilizar [**SHSetLocalizedName**](/windows/win32/api/shellapi/nf-shellapi-shsetlocalizedname) para cargar el nombre para mostrar conforme a MUI para un acceso directo.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-118">The application can use [**SHSetLocalizedName**](/windows/win32/api/shellapi/nf-shellapi-shsetlocalizedname) to load the MUI-compliant display name for a shortcut.</span></span> <span data-ttu-id="bc5ed-119">Debe usar [**IShellLink:: SetDescription**](/windows/win32/api/shobjidl_core/nf-shobjidl_core-ishelllinka-setdescription) para establecer el recuadro informativo asociado.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-119">It should use [**IShellLink::SetDescription**](/windows/win32/api/shobjidl_core/nf-shobjidl_core-ishelllinka-setdescription) to set the associated InfoTip.</span></span> <span data-ttu-id="bc5ed-120">Las llamadas registran las cadenas con el registro.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-120">The calls register the strings with the registry.</span></span> <span data-ttu-id="bc5ed-121">Considere los ejemplos siguientes, para los que "HKCR" representa la \_ \_ clave del Registro raíz de las clases HKEY:</span><span class="sxs-lookup"><span data-stu-id="bc5ed-121">Consider the following examples, for which "HKCR" represents the HKEY\_CLASSES\_ROOT registry key:</span></span>


```C++
HKCR,"CLSID\%CLSID_AntiSpyware%",,,"Windows AntiSpyware"

HKCR,"CLSID\%CLSID_AntiSpyware%","LocalizedString",,"@%ProgramFiles%\Windows AntiSpyware\MSASCui.exe,-104"

HKCR,"CLSID\%CLSID_AntiSpyware%","InfoTip",,"@%ProgramFiles%\Windows AntiSpyware\MSASCui.exe,-208"
```



<span data-ttu-id="bc5ed-122">La primera línea proporciona una cadena literal no localizada para la reserva y la compatibilidad con versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-122">The first line provides an unlocalized literal string for fallback and backward compatibility.</span></span> <span data-ttu-id="bc5ed-123">La segunda línea muestra la manera compatible con MUI de registrar el nombre para mostrar.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-123">The second line shows the MUI-compliant way to register the display name.</span></span> <span data-ttu-id="bc5ed-124">Esta línea indica el identificador de cadena 104 almacenado en Msascui.exe (para Windows XP) o en su archivo específico de idioma asociado (para Windows Vista).</span><span class="sxs-lookup"><span data-stu-id="bc5ed-124">This line indicates the string identifier 104 stored in Msascui.exe (for Windows XP) or in its associated language-specific file (for Windows Vista).</span></span> <span data-ttu-id="bc5ed-125">Este identificador de cadena corresponde a "mis sitios de red".</span><span class="sxs-lookup"><span data-stu-id="bc5ed-125">This string identifier corresponds to "My Network Places".</span></span> <span data-ttu-id="bc5ed-126">La tercera línea del ejemplo controla el registro de recuadro informativo.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-126">The third line in the example handles InfoTip registration.</span></span> <span data-ttu-id="bc5ed-127">% CLSID \_ anti spyware% especifica una variable de entorno que representa el GUID que coincide con el identificador de clase de este componente.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-127">%CLSID\_AntiSpyware% specifies an environment variable representing the GUID that matches the class identifier of this component.</span></span>

<span data-ttu-id="bc5ed-128">En el ejemplo mostrado anteriormente, la aplicación llama a [**SHSetLocalizedName**](/windows/win32/api/shellapi/nf-shellapi-shsetlocalizedname) para especificar la ruta de acceso del archivo ejecutable para los dos primeros parámetros y especifica *idsRes* como "@% ProgramFiles% \\ Windows AntiSpyware \\MSASCui.exe, 104".</span><span class="sxs-lookup"><span data-stu-id="bc5ed-128">For the example shown above, the application calls [**SHSetLocalizedName**](/windows/win32/api/shellapi/nf-shellapi-shsetlocalizedname) to specify the path of the executable for the first two parameters, and specify *idsRes* as "@%ProgramFiles%\\Windows AntiSpyware\\MSASCui.exe,104".</span></span> <span data-ttu-id="bc5ed-129">Una llamada a [**IShellLink:: SetDescription**](/windows/win32/api/shobjidl_core/nf-shobjidl_core-ishelllinka-setdescription)especifica la ruta de acceso del recuadro informativo como "@% ProgramFiles% \\ Windows AntiSpyware \\MSASCui.exe, 208".</span><span class="sxs-lookup"><span data-stu-id="bc5ed-129">A call to [**IShellLink::SetDescription**](/windows/win32/api/shobjidl_core/nf-shobjidl_core-ishelllinka-setdescription), specifies the path for the InfoTip as "@%ProgramFiles%\\Windows AntiSpyware\\MSASCui.exe,208".</span></span>

## <a name="query-friendly-document-type-names-in-the-registry"></a><span data-ttu-id="bc5ed-130">Consultar los nombres de tipo de documento descriptivos en el registro</span><span class="sxs-lookup"><span data-stu-id="bc5ed-130">Query Friendly Document Type Names in the Registry</span></span>

<span data-ttu-id="bc5ed-131">La creación de recursos para los nombres de tipo de documento descriptivos se describe en creación de recursos para nombres de tipos de documentos descriptivos en [con el redireccionamiento de cadenas del registro](using-registry-string-redirection.md).</span><span class="sxs-lookup"><span data-stu-id="bc5ed-131">Resource creation for friendly document type names is discussed in Create Resources for Friendly Document Type Names in [Using Registry String Redirection](using-registry-string-redirection.md).</span></span> <span data-ttu-id="bc5ed-132">Para consultar un nombre descriptivo del documento, la aplicación debe usar [**IQueryAssociations:: init**](/windows/win32/api/shlwapi/nf-shlwapi-iqueryassociations-init), seguida de una llamada a [**IQueryAssociations:: GetString**](/windows/win32/api/shlwapi/nf-shlwapi-iqueryassociations-getstring).</span><span class="sxs-lookup"><span data-stu-id="bc5ed-132">To query a friendly document name, the application should use [**IQueryAssociations::Init**](/windows/win32/api/shlwapi/nf-shlwapi-iqueryassociations-init), followed by a call to [**IQueryAssociations::GetString**](/windows/win32/api/shlwapi/nf-shlwapi-iqueryassociations-getstring).</span></span> <span data-ttu-id="bc5ed-133">La llamada a **IQueryAssociations:: init** especifica el tipo de documento, por ejemplo, ". txt".</span><span class="sxs-lookup"><span data-stu-id="bc5ed-133">The call to **IQueryAssociations::Init** specifies the document type, for example, ".txt".</span></span> <span data-ttu-id="bc5ed-134">La llamada a **IQueryAssociations:: GetString** debe especificar ASSOCSTR \_ FRIENDLYDOCNAME como identificador de cadena.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-134">The call to **IQueryAssociations::GetString** must specify ASSOCSTR\_FRIENDLYDOCNAME as the string identifier.</span></span>

## <a name="register-microsoft-management-console-snap-in-strings-not-read-from-the-registry"></a><span data-ttu-id="bc5ed-135">Registrar cadenas de complementos de Microsoft Management Console no leídas del registro</span><span class="sxs-lookup"><span data-stu-id="bc5ed-135">Register Microsoft Management Console Snap-in Strings Not Read from the Registry</span></span>

<span data-ttu-id="bc5ed-136">La aplicación puede usar un complemento de Microsoft Management Console (MMC) para hospedar sus tareas de administración.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-136">Your application can use a Microsoft Management Console (MMC) snap-in to host its management tasks.</span></span> <span data-ttu-id="bc5ed-137">La mayoría de las cadenas se administran como recursos mediante la configuración del registro descrita en creación de recursos de cadena para Microsoft Management Console Snap-Ins en uso de la [redirección de cadenas del registro](using-registry-string-redirection.md).</span><span class="sxs-lookup"><span data-stu-id="bc5ed-137">Most strings are handled as resources using the registry settings described in Create String Resources for Microsoft Management Console Snap-Ins in [Using Registry String Redirection](using-registry-string-redirection.md).</span></span> <span data-ttu-id="bc5ed-138">Sin embargo, algunos complementos registran valores de cadena del registro que MMC no puede leer del registro.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-138">However, some snap-ins register registry string values that MMC cannot read from the registry.</span></span> <span data-ttu-id="bc5ed-139">En este caso, el complemento debe obtener los valores mediante la interfaz [**ISnapinAbout**](/windows/win32/api/mmc/nn-mmc-isnapinabout) , que es compatible con MUI.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-139">In this case, the snap-in must obtain the values using the [**ISnapinAbout**](/windows/win32/api/mmc/nn-mmc-isnapinabout) interface, which is MUI-compatible.</span></span>

## <a name="set-the-display-name-and-description-for-a-windows-service-from-the-registry"></a><span data-ttu-id="bc5ed-140">Establecer el nombre para mostrar y la descripción de un servicio de Windows desde el registro</span><span class="sxs-lookup"><span data-stu-id="bc5ed-140">Set the Display Name and Description for a Windows Service from the Registry</span></span>

<span data-ttu-id="bc5ed-141">Si la aplicación MUI usa un servicio de Windows, debe mostrar el nombre para mostrar y la descripción del servicio.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-141">If your MUI application is using a Windows service, it must display the service display name and description.</span></span> <span data-ttu-id="bc5ed-142">Los recursos asociados se describen en "crear recursos de cadena para un servicio de Windows" en [mediante el redireccionamiento de cadenas del registro](using-registry-string-redirection.md).</span><span class="sxs-lookup"><span data-stu-id="bc5ed-142">The associated resources are discussed in "Create String Resources for a Windows Service" in [Using Registry String Redirection](using-registry-string-redirection.md).</span></span>

<span data-ttu-id="bc5ed-143">Para establecer el nombre para mostrar del servicio, la aplicación MUI llama a [**CreateService**](/windows/win32/api/winsvc/nf-winsvc-createservicea) o a [**ChangeServiceConfig**](/windows/win32/api/winsvc/nf-winsvc-changeserviceconfiga).</span><span class="sxs-lookup"><span data-stu-id="bc5ed-143">To set the service display name, the MUI application calls [**CreateService**](/windows/win32/api/winsvc/nf-winsvc-createservicea) or [**ChangeServiceConfig**](/windows/win32/api/winsvc/nf-winsvc-changeserviceconfiga).</span></span> <span data-ttu-id="bc5ed-144">El nombre es una cadena con el formato " `@<PE-path>,-<stringID>[;<comment>]` ".</span><span class="sxs-lookup"><span data-stu-id="bc5ed-144">The name is a string of the form "`@<PE-path>,-<stringID>[;<comment>]`".</span></span> <span data-ttu-id="bc5ed-145">Por ejemplo, si el servicio se implementa mediante un archivo. dll con la ruta de acceso% ProgramFiles% \\ % myPath% \\MyDll.dll, y el identificador de cadena del nombre para mostrar específico del idioma es 347, el parámetro se especifica como " `@%ProgramFiles%\\%MyPath%\\MyDll.dll,-347` ".</span><span class="sxs-lookup"><span data-stu-id="bc5ed-145">For example, if your service is implemented by a .dll file with path %ProgramFiles%\\%MyPath%\\MyDll.dll, and the string identifier of the language-specific display name is 347, the parameter is specified as "`@%ProgramFiles%\\%MyPath%\\MyDll.dll,-347`".</span></span> <span data-ttu-id="bc5ed-146">Las barras diagonales inversas dobles ( \\ \\ ) son necesarias porque C/C++ usa la barra diagonal inversa como carácter de escape en las cadenas.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-146">The double backslashes (\\\\) are necessary because C/C++ uses the backslash as an escape character in strings.</span></span>

<span data-ttu-id="bc5ed-147">Para establecer la descripción del servicio específico del lenguaje, la aplicación MUI debe hacer que el miembro **lpDescription** de una estructura de [**\_ Descripción del servicio**](/windows/win32/api/winsvc/ns-winsvc-service_descriptiona) indique una cadena de la forma " `@<PE-path>,-<stringID>[;<comment>]` ", que hace referencia al identificador de cadena adecuado.</span><span class="sxs-lookup"><span data-stu-id="bc5ed-147">To set the language-specific service description, the MUI application should make the **lpDescription** member of a [**SERVICE\_DESCRIPTION**](/windows/win32/api/winsvc/ns-winsvc-service_descriptiona) structure indicate a string of form "`@<PE-path>,-<stringID>[;<comment>]`", referencing the appropriate string identifier.</span></span> <span data-ttu-id="bc5ed-148">A continuación, la aplicación llama a [**ChangeServiceConfig2**](/windows/win32/api/winsvc/nf-winsvc-changeserviceconfig2a) con el parámetro *dwInfoLevel* especificado como descripción de configuración del servicio \_ \_ y parámetro *lpInfo* especificado como la estructura de **\_ Descripción del servicio** .</span><span class="sxs-lookup"><span data-stu-id="bc5ed-148">Then the application calls [**ChangeServiceConfig2**](/windows/win32/api/winsvc/nf-winsvc-changeserviceconfig2a) with parameter *dwInfoLevel* specified as SERVICE\_CONFIG\_DESCRIPTION and parameter *lpInfo* specified as the **SERVICE\_DESCRIPTION** structure.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bc5ed-149">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="bc5ed-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bc5ed-150">Ubicar recursos PE de Win32</span><span class="sxs-lookup"><span data-stu-id="bc5ed-150">Locating Win32 PE Resources</span></span>](locating-win32-pe-resources.md)
</dt> <dt>

[<span data-ttu-id="bc5ed-151">Usar el redireccionamiento de cadenas del registro</span><span class="sxs-lookup"><span data-stu-id="bc5ed-151">Using Registry String Redirection</span></span>](using-registry-string-redirection.md)
</dt> </dl>

 

 
