---
description: 'Optimización de 4 gigabytes: BCDEdit y Boot.ini'
ms.assetid: 991eb86f-9e6f-4084-8b6f-f979e42104b5
title: 'Optimización de 4 gigabytes: BCDEdit y Boot.ini'
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f997ae09748370d5ec8ec246da80b6440d7aaf45
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104276720"
---
# <a name="4-gigabyte-tuning-bcdedit-and-bootini"></a><span data-ttu-id="e925e-103">Optimización de 4 gigabytes: BCDEdit y Boot.ini</span><span class="sxs-lookup"><span data-stu-id="e925e-103">4-Gigabyte Tuning: BCDEdit and Boot.ini</span></span>

<span data-ttu-id="e925e-104">En las ediciones de 32 bits de Windows, las aplicaciones tienen 4 gigabytes (GB) de espacio de direcciones virtuales disponibles.</span><span class="sxs-lookup"><span data-stu-id="e925e-104">On 32-bit editions of Windows, applications have 4 gigabyte (GB) of virtual address space available.</span></span> <span data-ttu-id="e925e-105">El espacio de direcciones virtuales se divide de forma que 2 GB esté disponible para la aplicación y los otros 2 GB solo están disponibles para el sistema.</span><span class="sxs-lookup"><span data-stu-id="e925e-105">The virtual address space is divided so that 2 GB is available to the application and the other 2 GB is available only to the system.</span></span> <span data-ttu-id="e925e-106">La característica de optimización de 4 gigabytes (optimización de RAM 4GT o 4GT), habilitada con el comando *bcdedit/Set increaseuserva* , aumenta el espacio de direcciones virtuales que está disponible para la aplicación hasta 3 GB, y reduce la cantidad disponible para el sistema entre 1 y 2 GB.</span><span class="sxs-lookup"><span data-stu-id="e925e-106">The 4-gigabyte tuning (4GT or 4GT RAM Tuning) feature, enabled with the *BCDEdit /set increaseuserva* command, increases the virtual address space that is available to the application up to 3 GB, and reduces the amount available to the system to between 1 and 2 GB.</span></span>

<span data-ttu-id="e925e-107">En el caso de las aplicaciones que consumen mucha memoria, como los sistemas de administración de bases de datos (DBMS), el uso de un espacio de direcciones virtuales mayor puede proporcionar ventajas de rendimiento y escalabilidad considerables.</span><span class="sxs-lookup"><span data-stu-id="e925e-107">For applications that are memory-intensive, such as database management systems (DBMS), the use of a larger virtual address space can provide considerable performance and scalability benefits.</span></span> <span data-ttu-id="e925e-108">Sin embargo, la caché de archivos, el bloque paginado y el bloque no paginado son más pequeños, lo que puede afectar negativamente a las aplicaciones con una gran cantidad de redes o e/s.</span><span class="sxs-lookup"><span data-stu-id="e925e-108">However, the file cache, paged pool, and nonpaged pool are smaller, which can adversely affect applications with heavy networking or I/O.</span></span> <span data-ttu-id="e925e-109">Por lo tanto, es posible que desee probar la aplicación bajo carga y examinar los contadores de rendimiento para determinar si la aplicación se beneficia del espacio de direcciones más grande.</span><span class="sxs-lookup"><span data-stu-id="e925e-109">Therefore, you might want to test your application under load, and examine the performance counters to determine whether your application benefits from the larger address space.</span></span>

<span data-ttu-id="e925e-110">Para habilitar 4GT, use el comando [bcdedit/Set](/windows-hardware/drivers/devtest/bcdedit--set) para establecer la opción de entrada de arranque **increaseuserva** en un valor entre 2048 (2 GB) y 3072 (3 GB).</span><span class="sxs-lookup"><span data-stu-id="e925e-110">To enable 4GT, use the [BCDEdit /set](/windows-hardware/drivers/devtest/bcdedit--set) command to set the **increaseuserva** boot entry option to a value between 2048 (2 GB) and 3072 (3 GB).</span></span>

<span data-ttu-id="e925e-111">**Windows Server 2003 y versiones anteriores:** Para habilitar 4GT, agregue el modificador **/3GB** al archivo Boot.ini.</span><span class="sxs-lookup"><span data-stu-id="e925e-111">**Windows Server 2003 and earlier:** To enable 4GT, add the **/3GB** switch to the Boot.ini file.</span></span> <span data-ttu-id="e925e-112">El modificador **/3GB** es compatible con los siguientes sistemas:</span><span class="sxs-lookup"><span data-stu-id="e925e-112">The **/3GB** switch is supported on the following systems:</span></span>

-   <span data-ttu-id="e925e-113">Windows Server 2003</span><span class="sxs-lookup"><span data-stu-id="e925e-113">Windows Server 2003</span></span>
-   <span data-ttu-id="e925e-114">Windows XP Professional</span><span class="sxs-lookup"><span data-stu-id="e925e-114">Windows XP Professional</span></span>

<span data-ttu-id="e925e-115">El modificador **/3GB** hace que los 3 GB de espacio de direcciones virtuales estén disponibles para las aplicaciones y reduce la cantidad disponible para el sistema a 1 GB.</span><span class="sxs-lookup"><span data-stu-id="e925e-115">The **/3GB** switch makes a full 3 GB of virtual address space available to applications and reduces the amount available to the system to 1 GB.</span></span> <span data-ttu-id="e925e-116">En Windows Server 2003, la cantidad de espacio de direcciones disponible para las aplicaciones se puede ajustar estableciendo el modificador **/USERVA** en Boot.ini en un valor entre 2048 y 3072, lo que aumenta la cantidad de espacio de direcciones disponible para el sistema.</span><span class="sxs-lookup"><span data-stu-id="e925e-116">On Windows Server 2003, the amount of address space available to applications can be adjusted by setting the **/USERVA** switch in Boot.ini to a value between 2048 and 3072, which increases the amount of address space available to the system.</span></span> <span data-ttu-id="e925e-117">Esto puede ayudar a mantener el rendimiento general del sistema cuando la aplicación requiere más de 2 GB, pero inferior a 3 GB de espacio de direcciones.</span><span class="sxs-lookup"><span data-stu-id="e925e-117">This can help maintain overall system performance when the application requires more than 2 GB but less than 3 GB of address space.</span></span>

<span data-ttu-id="e925e-118">Para permitir que una aplicación use el espacio de direcciones más grande, establezca la marca [**\_ \_ \_ \_ reconocimiento de direcciones grandes del archivo de imagen**](/windows/desktop/api/dbghelp/ns-dbghelp-loaded_image) en el encabezado de la imagen.</span><span class="sxs-lookup"><span data-stu-id="e925e-118">To enable an application to use the larger address space, set the [**IMAGE\_FILE\_LARGE\_ADDRESS\_AWARE**](/windows/desktop/api/dbghelp/ns-dbghelp-loaded_image) flag in the image header.</span></span> <span data-ttu-id="e925e-119">El vinculador incluido con Microsoft Visual C++ admite el modificador **/LARGEADDRESSAWARE** para establecer esta marca.</span><span class="sxs-lookup"><span data-stu-id="e925e-119">The linker included with Microsoft Visual C++ supports the **/LARGEADDRESSAWARE** switch to set this flag.</span></span> <span data-ttu-id="e925e-120">La configuración de esta marca y la ejecución de la aplicación en un sistema que no tenga compatibilidad con 4GT no debe afectar a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e925e-120">Setting this flag and then running the application on a system that does not have 4GT support should not affect the application.</span></span>

<span data-ttu-id="e925e-121">En las ediciones de 64 bits de Windows, las aplicaciones de 32 bits marcadas con la marca [**\_ \_ \_ \_ reconocimiento de direcciones grandes de archivos de imagen**](/windows/desktop/api/dbghelp/ns-dbghelp-loaded_image) tienen 4 GB de espacio de direcciones disponible.</span><span class="sxs-lookup"><span data-stu-id="e925e-121">On 64-bit editions of Windows, 32-bit applications marked with the [**IMAGE\_FILE\_LARGE\_ADDRESS\_AWARE**](/windows/desktop/api/dbghelp/ns-dbghelp-loaded_image) flag have 4 GB of address space available.</span></span>

<span data-ttu-id="e925e-122">**Ediciones de Itanium de Windows Server 2003:** Antes de SP1, los procesos de 32 bits solo tienen 2 GB de espacio de direcciones disponible.</span><span class="sxs-lookup"><span data-stu-id="e925e-122">**Itanium editions of Windows Server 2003:** Prior to SP1, 32-bit processes have only 2 GB of address space available.</span></span>

<span data-ttu-id="e925e-123">Use las directrices siguientes para admitir 4GT en aplicaciones:</span><span class="sxs-lookup"><span data-stu-id="e925e-123">Use the following guidelines to support 4GT in applications:</span></span>

-   <span data-ttu-id="e925e-124">Las direcciones que están cerca del límite de 2 GB suelen usarse en varios archivos DLL del sistema.</span><span class="sxs-lookup"><span data-stu-id="e925e-124">Addresses near the 2-GB boundary are typically used by various system DLLs.</span></span> <span data-ttu-id="e925e-125">Por lo tanto, un proceso de 32 bits no puede asignar más de 2 GB de memoria contigua, aunque esté disponible todo el espacio de direcciones de 4 GB.</span><span class="sxs-lookup"><span data-stu-id="e925e-125">Therefore, a 32-bit process cannot allocate more than 2 GB of contiguous memory, even if the entire 4-GB address space is available.</span></span>
-   <span data-ttu-id="e925e-126">Para recuperar la cantidad total de espacio virtual de usuario, use la función [**GlobalMemoryStatusEx**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-globalmemorystatusex) .</span><span class="sxs-lookup"><span data-stu-id="e925e-126">To retrieve the amount of total user virtual space, use the [**GlobalMemoryStatusEx**](/windows/win32/api/sysinfoapi/nf-sysinfoapi-globalmemorystatusex) function.</span></span> <span data-ttu-id="e925e-127">Para recuperar la dirección de usuario más alta posible, utilice la función [**GetSystemInfo**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getsysteminfo) .</span><span class="sxs-lookup"><span data-stu-id="e925e-127">To retrieve the highest possible user address, use the [**GetSystemInfo**](/windows/desktop/api/sysinfoapi/nf-sysinfoapi-getsysteminfo) function.</span></span> <span data-ttu-id="e925e-128">Detecte siempre el valor real en tiempo de ejecución y evite usar definiciones de constantes cableadas de forma rígida, como: `#define HIGHEST_USER_ADDRESS 0xC0000000` .</span><span class="sxs-lookup"><span data-stu-id="e925e-128">Always detect the real value at runtime, and avoid using hard-wired constant definitions such as: `#define HIGHEST_USER_ADDRESS 0xC0000000`.</span></span>
-   <span data-ttu-id="e925e-129">Evite comparaciones firmadas con punteros, ya que pueden hacer que las aplicaciones se bloqueen en un sistema habilitado para 4GT.</span><span class="sxs-lookup"><span data-stu-id="e925e-129">Avoid signed comparisons with pointers, because they might cause applications to crash on a 4GT-enabled system.</span></span> <span data-ttu-id="e925e-130">Una condición como la siguiente es falsa para un puntero que está por encima de 2 GB: `if (pointer > 40000000)` .</span><span class="sxs-lookup"><span data-stu-id="e925e-130">A condition such as the following is false for a pointer that is above 2 GB: `if (pointer > 40000000)`.</span></span>
-   <span data-ttu-id="e925e-131">El código que usa el bit más alto de un puntero para un propósito definido por la aplicación producirá un error si se habilita 4GT.</span><span class="sxs-lookup"><span data-stu-id="e925e-131">Code that uses the highest bit of a pointer for an application-defined purpose will fail when 4GT is enabled.</span></span> <span data-ttu-id="e925e-132">Por ejemplo, una palabra de 32 bits podría considerarse como una dirección de modo de usuario si está por debajo de 0x80000000 y un código de error si se trata de una versión anterior.</span><span class="sxs-lookup"><span data-stu-id="e925e-132">For example, a 32-bit word might be considered a user-mode address if it is below 0x80000000, and an error code if above.</span></span> <span data-ttu-id="e925e-133">Esto no es cierto con 4GT.</span><span class="sxs-lookup"><span data-stu-id="e925e-133">This is not true with 4GT.</span></span>

<span data-ttu-id="e925e-134">[**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) normalmente devuelve direcciones bajas antes de las direcciones altas.</span><span class="sxs-lookup"><span data-stu-id="e925e-134">[**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc) usually returns low addresses before high addresses.</span></span> <span data-ttu-id="e925e-135">Por lo tanto, es posible que el proceso no use direcciones muy altas a menos que asigne una gran cantidad de memoria o que tenga un espacio de direcciones virtuales fragmentado.</span><span class="sxs-lookup"><span data-stu-id="e925e-135">Therefore, your process may not use very high addresses unless it allocates a lot of memory or has a fragmented virtual address space.</span></span> <span data-ttu-id="e925e-136">Para forzar las asignaciones para que se asignen desde direcciones superiores antes que las más bajas con fines de prueba, especifique **MEM en \_ \_ sentido descendente** al llamar a **VirtualAlloc** o establezca el siguiente valor del registro en 0x100000:</span><span class="sxs-lookup"><span data-stu-id="e925e-136">To force allocations to allocate from higher addresses before lower addresses for testing purposes, specify **MEM\_TOP\_DOWN** when calling **VirtualAlloc** or set the following registry value to 0x100000:</span></span>

<span data-ttu-id="e925e-137">**HKEY \_ \_** \\ **Sistema del** equipo local \\ **CurrentControlSet** \\ **control** \\ **Session Manager** \\ **Administración de memoria** \\ **AllocationPreference**</span><span class="sxs-lookup"><span data-stu-id="e925e-137">**HKEY\_LOCAL\_MACHINE**\\**System**\\**CurrentControlSet**\\**Control**\\**Session Manager**\\**Memory Management**\\**AllocationPreference**</span></span>

## <a name="related-topics"></a><span data-ttu-id="e925e-138">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e925e-138">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e925e-139">Límites de memoria para las versiones de Windows</span><span class="sxs-lookup"><span data-stu-id="e925e-139">Memory Limits for Windows Releases</span></span>](memory-limits-for-windows-releases.md)
</dt> <dt>

[<span data-ttu-id="e925e-140">Extensión de dirección física</span><span class="sxs-lookup"><span data-stu-id="e925e-140">Physical Address Extension</span></span>](physical-address-extension.md)
</dt> <dt>

<span data-ttu-id="e925e-141">[Referencia técnica de 4GT](/previous-versions/windows/it-pro/windows-server-2003/cc778496(v=ws.10))</span><span class="sxs-lookup"><span data-stu-id="e925e-141">[4GT Technical Reference](/previous-versions/windows/it-pro/windows-server-2003/cc778496(v=ws.10))</span></span>
</dt> </dl>

 

 
