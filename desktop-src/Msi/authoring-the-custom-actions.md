---
description: 'En la tabla siguiente se enumeran las cinco acciones personalizadas que se usan para cumplir las especificaciones de ejemplo: ProcessAccounts, UninstallAccounts, CreateAccounts, RemoveAccounts y RollbackAccounts.'
ms.assetid: 389ec652-243e-4392-aec9-3a7eb90e6c68
title: Crear las acciones personalizadas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e09525490304762b98635bcbbe6c238ce3fe413f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104001724"
---
# <a name="authoring-the-custom-actions"></a><span data-ttu-id="8200b-103">Crear las acciones personalizadas</span><span class="sxs-lookup"><span data-stu-id="8200b-103">Authoring the Custom Actions</span></span>

<span data-ttu-id="8200b-104">En la tabla siguiente se enumeran las cinco acciones personalizadas que se usan para cumplir las especificaciones de ejemplo: ProcessAccounts, UninstallAccounts, CreateAccounts, RemoveAccounts y RollbackAccounts.</span><span class="sxs-lookup"><span data-stu-id="8200b-104">The table below lists the five custom actions used to meet the sample specifications: ProcessAccounts, UninstallAccounts, CreateAccounts, RemoveAccounts, and RollbackAccounts.</span></span> <span data-ttu-id="8200b-105">Todas estas acciones personalizadas se encuentran en [bibliotecas de vínculos dinámicos](dynamic-link-libraries.md) almacenadas en la [tabla binaria](binary-table.md).</span><span class="sxs-lookup"><span data-stu-id="8200b-105">All of these custom actions are in [dynamic-link libraries](dynamic-link-libraries.md) stored in the [Binary Table](binary-table.md).</span></span> <span data-ttu-id="8200b-106">El código fuente de C++ para las bibliotecas de vínculos dinámicos que contienen las acciones personalizadas de ejemplo se proporciona en el SDK de Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="8200b-106">The C++ source code for the dynamic-link libraries containing the sample custom actions are provided in the Windows Installer SDK.</span></span> <span data-ttu-id="8200b-107">ProcessAccounts y UninstallAccounts están en el archivo Process. cpp.</span><span class="sxs-lookup"><span data-stu-id="8200b-107">ProcessAccounts and UninstallAccounts are in the file Process.cpp.</span></span> <span data-ttu-id="8200b-108">CreateAccount se encuentra en el archivo Create. cpp.</span><span class="sxs-lookup"><span data-stu-id="8200b-108">CreateAccount is in the file Create.cpp.</span></span> <span data-ttu-id="8200b-109">RemoveAccount y RollbackAccount se encuentran en el archivo Remove. cpp.</span><span class="sxs-lookup"><span data-stu-id="8200b-109">RemoveAccount and RollbackAccount are in the file Remove.cpp.</span></span> <span data-ttu-id="8200b-110">Estos archivos de origen se pueden usar para crear los archivos Process.dll, Create.dll y Remove.dll.</span><span class="sxs-lookup"><span data-stu-id="8200b-110">These source files can be used to create the files Process.dll, Create.dll, and Remove.dll.</span></span>

<span data-ttu-id="8200b-111">Dado que la creación o eliminación de una cuenta de usuario requiere privilegios elevados, las [acciones personalizadas de ejecución diferida](deferred-execution-custom-actions.md) que se ejecutan en el contexto del sistema deben usarse para crear, quitar o revertir cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="8200b-111">Because the creation or removal of a user account requires elevated privileges, [deferred execution custom actions](deferred-execution-custom-actions.md) that run in the context of the system must be used to create, remove, or roll back user accounts.</span></span> <span data-ttu-id="8200b-112">Las acciones personalizadas de ejecución inmediata, ProcessAccounts y UninstallAccounts, generan las acciones personalizadas diferidas que crean, quitan o revierten las cuentas de usuario: CreateAccount, RemoveAccount y RollbackAccount.</span><span class="sxs-lookup"><span data-stu-id="8200b-112">The immediate execution custom actions, ProcessAccounts and UninstallAccounts, generate the deferred custom actions that create, remove, or rollback user accounts: CreateAccount, RemoveAccount, and RollbackAccount.</span></span>

<span data-ttu-id="8200b-113">Dado que las acciones personalizadas diferidas no pueden leer información en las tablas de base de datos, ProcessAccounts y UninstallUserAccouts deben establecer una propiedad CustomActionData para pasar la información de la tabla de conjunto de datos a las acciones personalizadas diferidas, tal y como se describe en [obtener información de contexto para las acciones personalizadas de ejecución aplazada](obtaining-context-information-for-deferred-execution-custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="8200b-113">Because deferred custom actions cannot read information in database tables, ProcessAccounts and UninstallUserAccouts must set a CustomActionData property to pass the information in the UserAccounts table to the deferred custom actions as described in [Obtaining Context Information for Deferred Execution Custom Actions](obtaining-context-information-for-deferred-execution-custom-actions.md).</span></span> <span data-ttu-id="8200b-114">Cuando el instalador ejecuta el script de ejecución, las acciones personalizadas diferidas administran las cuentas de usuario según la información de la propiedad CustomActionData.</span><span class="sxs-lookup"><span data-stu-id="8200b-114">When the installer runs the execution script, the deferred custom actions handle user accounts according to the information in the CustomActionData property.</span></span>

<span data-ttu-id="8200b-115">Dado que todas las acciones personalizadas están en bibliotecas de vínculos dinámicos almacenadas en la tabla binaria, todas incluyen las constantes msidbCustomActionTypeDll y msidbCustomActionTypeBinaryData en su tipo numérico base.</span><span class="sxs-lookup"><span data-stu-id="8200b-115">Because all the custom actions are in dynamic-link libraries stored in the Binary table, they all include the constants msidbCustomActionTypeDll and msidbCustomActionTypeBinaryData in their base numeric type.</span></span> <span data-ttu-id="8200b-116">ProcessAccounts y UninstallAccounts son ejemplos de [acción personalizada pura tipo 1](custom-action-type-1.md).</span><span class="sxs-lookup"><span data-stu-id="8200b-116">ProcessAccounts and UninstallAccounts are examples of pure [Custom Action Type 1](custom-action-type-1.md).</span></span> <span data-ttu-id="8200b-117">Para obtener información sobre otros tipos de acciones personalizadas, vea la [lista de Resumen de todos los tipos de acción personalizados](summary-list-of-all-custom-action-types.md).</span><span class="sxs-lookup"><span data-stu-id="8200b-117">For information on other custom action types see the [Summary List of All Custom Action Types](summary-list-of-all-custom-action-types.md).</span></span>

<span data-ttu-id="8200b-118">CreateAccount y RemoveAccount son [acciones personalizadas de ejecución aplazada](deferred-execution-custom-actions.md) que no permiten que los servicios suplanten a usuarios concretos.</span><span class="sxs-lookup"><span data-stu-id="8200b-118">CreateAccount and RemoveAccount are [deferred execution custom actions](deferred-execution-custom-actions.md) that do not allow services to impersonate particular users.</span></span> <span data-ttu-id="8200b-119">Estas acciones personalizadas incluyen las constantes msidbCustomActionTypeInScript y msidbCustomActionTypeNoImpersonate para especificar estas [acciones personalizadas en las opciones de ejecución del script](custom-action-in-script-execution-options.md).</span><span class="sxs-lookup"><span data-stu-id="8200b-119">These custom actions include the constants msidbCustomActionTypeInScript and msidbCustomActionTypeNoImpersonate to specify these [custom action in-script execution options](custom-action-in-script-execution-options.md).</span></span>

<span data-ttu-id="8200b-120">RollbackAccount es una [acción personalizada de reversión](rollback-custom-actions.md) que solo quita las cuentas de usuario durante una [instalación de reversión](rollback-installation.md).</span><span class="sxs-lookup"><span data-stu-id="8200b-120">RollbackAccount is a [rollback custom action](rollback-custom-actions.md) that only removes user accounts during a [rollback installation](rollback-installation.md).</span></span> <span data-ttu-id="8200b-121">RollbackAccount incluye las constantes msidbCustomActionTypeInScript y msidbCustomActionTypeRollback para especificar estas [acciones personalizadas en las opciones de ejecución del script](custom-action-in-script-execution-options.md).</span><span class="sxs-lookup"><span data-stu-id="8200b-121">RollbackAccount includes the constants msidbCustomActionTypeInScript and msidbCustomActionTypeRollback to specify these [custom action in-script execution options](custom-action-in-script-execution-options.md).</span></span>

<span data-ttu-id="8200b-122">Estas acciones personalizadas pueden controlar datos confidenciales, como contraseñas de usuario, que no se deben escribir en el archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="8200b-122">These custom actions may handle sensitive data such as user passwords, which should not be written to the log file.</span></span> <span data-ttu-id="8200b-123">Por lo tanto, las acciones personalizadas diferidas deben incluir msidbCustomActionTypeHideTarget en el tipo de acción personalizada.</span><span class="sxs-lookup"><span data-stu-id="8200b-123">The deferred custom actions should therefore include msidbCustomActionTypeHideTarget in the custom action type.</span></span> <span data-ttu-id="8200b-124">Los nombres de las acciones personalizadas diferidas también deben agregarse a la lista de propiedades [**MsiHiddenProperties**](msihiddenproperties.md) en la [tabla de propiedades](property-table.md) debido a la manera en que las acciones personalizadas inmediatas pasan datos a acciones personalizadas diferidas mediante la propiedad CustomActionData.</span><span class="sxs-lookup"><span data-stu-id="8200b-124">The names of the deferred custom actions also need to be added to the [**MsiHiddenProperties**](msihiddenproperties.md) property list in the [Property table](property-table.md) because of the way immediate custom actions pass data to deferred custom actions using the CustomActionData property.</span></span>



| <span data-ttu-id="8200b-125">Acción personalizada</span><span class="sxs-lookup"><span data-stu-id="8200b-125">Custom action</span></span>     | <span data-ttu-id="8200b-126">Punto de entrada de DLL</span><span class="sxs-lookup"><span data-stu-id="8200b-126">DLL entry point</span></span>                       | <span data-ttu-id="8200b-127">Tipo de acción personalizada</span><span class="sxs-lookup"><span data-stu-id="8200b-127">Custom action type</span></span>                                                                                                                                                         |
|-------------------|---------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="8200b-128">ProcessAccounts</span><span class="sxs-lookup"><span data-stu-id="8200b-128">ProcessAccounts</span></span>   | <span data-ttu-id="8200b-129">ProcessUserAccounts en Process.dll.</span><span class="sxs-lookup"><span data-stu-id="8200b-129">ProcessUserAccounts in Process.dll.</span></span>   | <span data-ttu-id="8200b-130">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData = 1</span><span class="sxs-lookup"><span data-stu-id="8200b-130">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData = 1</span></span>                                                                                                             |
| <span data-ttu-id="8200b-131">UninstallAccounts</span><span class="sxs-lookup"><span data-stu-id="8200b-131">UninstallAccounts</span></span> | <span data-ttu-id="8200b-132">UninstallUserAccounts en Process.dll.</span><span class="sxs-lookup"><span data-stu-id="8200b-132">UninstallUserAccounts in Process.dll.</span></span> | <span data-ttu-id="8200b-133">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData = 1</span><span class="sxs-lookup"><span data-stu-id="8200b-133">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData = 1</span></span>                                                                                                             |
| <span data-ttu-id="8200b-134">CreateAccount</span><span class="sxs-lookup"><span data-stu-id="8200b-134">CreateAccount</span></span>     | <span data-ttu-id="8200b-135">CreateUserAccount en Create.dll.</span><span class="sxs-lookup"><span data-stu-id="8200b-135">CreateUserAccount in Create.dll.</span></span>      | <span data-ttu-id="8200b-136">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate + msidbCustomActionTypeHideTarget = 11265.</span><span class="sxs-lookup"><span data-stu-id="8200b-136">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate + msidbCustomActionTypeHideTarget = 11265.</span></span> |
| <span data-ttu-id="8200b-137">RemoveAccount</span><span class="sxs-lookup"><span data-stu-id="8200b-137">RemoveAccount</span></span>     | <span data-ttu-id="8200b-138">RemoveUserAccount en Remove.dll.</span><span class="sxs-lookup"><span data-stu-id="8200b-138">RemoveUserAccount in Remove.dll.</span></span>      | <span data-ttu-id="8200b-139">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate + msidbCustomActionTypeHideTarget = 11265.</span><span class="sxs-lookup"><span data-stu-id="8200b-139">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeNoImpersonate + msidbCustomActionTypeHideTarget = 11265.</span></span> |
| <span data-ttu-id="8200b-140">RollbackAccount</span><span class="sxs-lookup"><span data-stu-id="8200b-140">RollbackAccount</span></span>   | <span data-ttu-id="8200b-141">RemoveUserAccount en Remove.dll.</span><span class="sxs-lookup"><span data-stu-id="8200b-141">RemoveUserAccount in Remove.dll.</span></span>      | <span data-ttu-id="8200b-142">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeRollback + msidbCustomActionTypeHideTarget = 9473.</span><span class="sxs-lookup"><span data-stu-id="8200b-142">msidbCustomActionTypeDll + msidbCustomActionTypeBinaryData + msidbCustomActionTypeInScript + msidbCustomActionTypeRollback + msidbCustomActionTypeHideTarget = 9473.</span></span>       |



 

<span data-ttu-id="8200b-143">Continúe con [la creación de la tabla CustomAction](authoring-the-customaction-table.md).</span><span class="sxs-lookup"><span data-stu-id="8200b-143">Continue to [Authoring the CustomAction Table](authoring-the-customaction-table.md).</span></span>

 

 



