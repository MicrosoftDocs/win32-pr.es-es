---
description: Se han realizado cambios significativos en el modelo de servicios para mejorar el rendimiento, la confiabilidad, la seguridad, la administración y la administración de los servicios.
ms.assetid: b1c09468-51e1-4ffd-bf07-6faa9f9336dd
title: Cambios de servicio para Windows Vista
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e6ba96cc0c69e2bda4e19e7d093098c578e31c4b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103907859"
---
# <a name="service-changes-for-windows-vista"></a><span data-ttu-id="bcab0-103">Cambios de servicio para Windows Vista</span><span class="sxs-lookup"><span data-stu-id="bcab0-103">Service Changes for Windows Vista</span></span>

<span data-ttu-id="bcab0-104">Se han realizado cambios significativos en el modelo de servicios para mejorar el rendimiento, la confiabilidad, la seguridad, la administración y la administración de los servicios.</span><span class="sxs-lookup"><span data-stu-id="bcab0-104">There have been significant changes to the services model to improve performance, reliability, security, management, and administration of services.</span></span>

<span data-ttu-id="bcab0-105">En la tabla siguiente se resumen las mejoras en los servicios de para Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="bcab0-105">The following table summarizes the enhancements to services for Windows Vista.</span></span>



| <span data-ttu-id="bcab0-106">Mejora</span><span class="sxs-lookup"><span data-stu-id="bcab0-106">Enhancement</span></span>                                                                                                                                                                                                  | <span data-ttu-id="bcab0-107">Descripción</span><span class="sxs-lookup"><span data-stu-id="bcab0-107">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bcab0-108"><span id="Delayed_Auto-Start"></span><span id="delayed_auto-start"></span><span id="DELAYED_AUTO-START"></span>Inicio automático retrasado</span><span class="sxs-lookup"><span data-stu-id="bcab0-108"><span id="Delayed_Auto-Start"></span><span id="delayed_auto-start"></span><span id="DELAYED_AUTO-START"></span>Delayed Auto-Start</span></span><br/>                                                                 | <span data-ttu-id="bcab0-109">Los servicios de inicio automático retrasados se inician poco después de que se inicie el sistema.</span><span class="sxs-lookup"><span data-stu-id="bcab0-109">Delayed auto-start services are started shortly after the system has started.</span></span> <span data-ttu-id="bcab0-110">Esto mejora el rendimiento de inicio del sistema y, al mismo tiempo, proporciona un inicio automático para estos servicios.</span><span class="sxs-lookup"><span data-stu-id="bcab0-110">This improves system startup performance while still providing automatic startup for these services.</span></span> <span data-ttu-id="bcab0-111">Para establecer la marca de inicio automático retrasada, llame a la función [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con la **\_ \_ \_ \_ \_ información de inicio automático retrasada** de la configuración del servicio.</span><span class="sxs-lookup"><span data-stu-id="bcab0-111">To set the delayed auto-start flag, call the [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) function with **SERVICE\_CONFIG\_DELAYED\_AUTO\_START\_INFO**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="bcab0-112"><span id="Failure_Detection_and_Recovery"></span><span id="failure_detection_and_recovery"></span><span id="FAILURE_DETECTION_AND_RECOVERY"></span>Detección de errores y recuperación</span><span class="sxs-lookup"><span data-stu-id="bcab0-112"><span id="Failure_Detection_and_Recovery"></span><span id="failure_detection_and_recovery"></span><span id="FAILURE_DETECTION_AND_RECOVERY"></span>Failure Detection and Recovery</span></span><br/>                 | <span data-ttu-id="bcab0-113">Si se produce un error en un servicio, el administrador de control de servicios (SCM) puede realizar una acción de error, como reiniciar el servicio en un intento de recuperación de ese error.</span><span class="sxs-lookup"><span data-stu-id="bcab0-113">If a service fails, the service control manager (SCM) can perform a failure action, such as restarting the service in an attempt to recover from that failure.</span></span> <span data-ttu-id="bcab0-114">Para configurar una acción de error, llame a [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con **acciones de error de configuración de servicio \_ \_ \_**.</span><span class="sxs-lookup"><span data-stu-id="bcab0-114">To configure a failure action, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_FAILURE\_ACTIONS**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="bcab0-115"><span id="Preshutdown_Notifications"></span><span id="preshutdown_notifications"></span><span id="PRESHUTDOWN_NOTIFICATIONS"></span>Notificaciones de cierre</span><span class="sxs-lookup"><span data-stu-id="bcab0-115"><span id="Preshutdown_Notifications"></span><span id="preshutdown_notifications"></span><span id="PRESHUTDOWN_NOTIFICATIONS"></span>Preshutdown Notifications</span></span><br/>                                     | <span data-ttu-id="bcab0-116">Un servicio puede registrarse para recibir una notificación de **\_ \_ cierre** de un control de servicio en su función [*HandlerEx*](/windows/desktop/api/WinSvc/nc-winsvc-lphandler_function_ex) antes de recibir la notificación de cierre real.</span><span class="sxs-lookup"><span data-stu-id="bcab0-116">A service can register to receive a **SERVICE\_CONTROL\_PRESHUTDOWN** notification in its [*HandlerEx*](/windows/desktop/api/WinSvc/nc-winsvc-lphandler_function_ex) function before it receives the actual shutdown notification.</span></span> <span data-ttu-id="bcab0-117">Esto proporciona a los servicios un procedimiento de cierre largo más tiempo para cerrarse correctamente.</span><span class="sxs-lookup"><span data-stu-id="bcab0-117">This provides services with a lengthy shutdown procedure more time to shut down gracefully.</span></span> <span data-ttu-id="bcab0-118">Para establecer el valor de tiempo de espera, llame a [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con la **\_ \_ \_ información de preapagado de configuración de servicio**.</span><span class="sxs-lookup"><span data-stu-id="bcab0-118">To set the time-out value, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_PRESHUTDOWN\_INFO**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="bcab0-119"><span id="Restricted_Network_Access"></span><span id="restricted_network_access"></span><span id="RESTRICTED_NETWORK_ACCESS"></span>Acceso restringido a la red</span><span class="sxs-lookup"><span data-stu-id="bcab0-119"><span id="Restricted_Network_Access"></span><span id="restricted_network_access"></span><span id="RESTRICTED_NETWORK_ACCESS"></span>Restricted Network Access</span></span><br/>                                     | <span data-ttu-id="bcab0-120">Puede usar SID de servicio para restringir el acceso a puertos, protocolos o la dirección del tráfico de red.</span><span class="sxs-lookup"><span data-stu-id="bcab0-120">You can use service SIDs to restrict access to ports, protocols, or the direction of network traffic.</span></span> <span data-ttu-id="bcab0-121">Para restringir el acceso de un servicio a la red, use la interfaz [**INetFwServiceRestriction**](/windows/desktop/api/netfw/nn-netfw-inetfwservicerestriction) .</span><span class="sxs-lookup"><span data-stu-id="bcab0-121">To restrict a service's access to the network, use the [**INetFwServiceRestriction**](/windows/desktop/api/netfw/nn-netfw-inetfwservicerestriction) interface.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="bcab0-122"><span id="Running_with_Least_Privilege"></span><span id="running_with_least_privilege"></span><span id="RUNNING_WITH_LEAST_PRIVILEGE"></span>Ejecución con privilegios mínimos</span><span class="sxs-lookup"><span data-stu-id="bcab0-122"><span id="Running_with_Least_Privilege"></span><span id="running_with_least_privilege"></span><span id="RUNNING_WITH_LEAST_PRIVILEGE"></span>Running with Least Privilege</span></span><br/>                         | <span data-ttu-id="bcab0-123">Los servicios se pueden ejecutar en cualquier cuenta que contenga los privilegios necesarios (LocalService, NetworkService, LocalSystem, una cuenta de dominio o una cuenta local) e indicar los privilegios necesarios llamando a [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con la **\_ \_ \_ \_ información de privilegios necesarios** para la configuración de servicio.</span><span class="sxs-lookup"><span data-stu-id="bcab0-123">Services can run under any account that contains the required privileges (LocalService, NetworkService, LocalSystem, a domain account, or a local account) and indicate the required privileges by calling [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_REQUIRED\_PRIVILEGES\_INFO**.</span></span> <span data-ttu-id="bcab0-124">El SCM quita los privilegios que no son necesarios.</span><span class="sxs-lookup"><span data-stu-id="bcab0-124">The SCM removes any privileges that are not required.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="bcab0-125"><span id="Service_Isolation"></span><span id="service_isolation"></span><span id="SERVICE_ISOLATION"></span>Aislamiento del servicio</span><span class="sxs-lookup"><span data-stu-id="bcab0-125"><span id="Service_Isolation"></span><span id="service_isolation"></span><span id="SERVICE_ISOLATION"></span>Service Isolation</span></span><br/>                                                                     | <span data-ttu-id="bcab0-126">Un servicio puede aislar objetos, como archivos o claves del registro, para su uso exclusivo al protegerlos con una entrada de control de acceso que contenga un SID de servicio.</span><span class="sxs-lookup"><span data-stu-id="bcab0-126">A service can isolate objects, such as files or registry keys, for its exclusive use by securing them with an access control entry that contains a service SID.</span></span> <span data-ttu-id="bcab0-127">Una vez asignado este SID a un servicio, el propietario del servicio puede modificar las listas de control de acceso de los objetos para conceder acceso al SID.</span><span class="sxs-lookup"><span data-stu-id="bcab0-127">After this SID has been assigned to a service, the service owner can modify the objects' access control lists to grant access to the SID.</span></span> <span data-ttu-id="bcab0-128">Esto permite a un servicio tener acceso a objetos específicos sin ejecutarse en una cuenta con privilegios elevados o reduciendo la seguridad en los objetos.</span><span class="sxs-lookup"><span data-stu-id="bcab0-128">This enables a service to access specific objects without running under a high-privilege account or lowering the security on the objects.</span></span> <span data-ttu-id="bcab0-129">Para establecer el SID del servicio, llame a [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) con la **información del SID del servicio de configuración de servicio \_ \_ \_ \_**.</span><span class="sxs-lookup"><span data-stu-id="bcab0-129">To set the service SID, call [**ChangeServiceConfig2**](/windows/desktop/api/Winsvc/nf-winsvc-changeserviceconfig2a) with **SERVICE\_CONFIG\_SERVICE\_SID\_INFO**.</span></span><br/>                                                                                                                                                                                                                                     |
| <span data-ttu-id="bcab0-130"><span id="Service_State_Change_Notifications"></span><span id="service_state_change_notifications"></span><span id="SERVICE_STATE_CHANGE_NOTIFICATIONS"></span>Notificaciones de cambio de estado del servicio</span><span class="sxs-lookup"><span data-stu-id="bcab0-130"><span id="Service_State_Change_Notifications"></span><span id="service_state_change_notifications"></span><span id="SERVICE_STATE_CHANGE_NOTIFICATIONS"></span>Service State Change Notifications</span></span><br/> | <span data-ttu-id="bcab0-131">Los servicios se pueden registrar para recibir notificaciones cuando se crea o se elimina un servicio, o cuando se cambia el estado mediante la función [**NotifyServiceStatusChange**](/windows/desktop/api/Winsvc/nf-winsvc-notifyservicestatuschangea) .</span><span class="sxs-lookup"><span data-stu-id="bcab0-131">Services can register to be notified when a service is created, deleted, or has a change in status by using the [**NotifyServiceStatusChange**](/windows/desktop/api/Winsvc/nf-winsvc-notifyservicestatuschangea) function.</span></span> <span data-ttu-id="bcab0-132">Esto es más eficaz que llamar a la función [**QueryServiceStatusEx**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) en un bucle para sondear el estado.</span><span class="sxs-lookup"><span data-stu-id="bcab0-132">This is more efficient than calling the [**QueryServiceStatusEx**](/windows/desktop/api/Winsvc/nf-winsvc-queryservicestatusex) function in a loop to poll for status.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="bcab0-133"><span id="Session_0_Isolation"></span><span id="session_0_isolation"></span><span id="SESSION_0_ISOLATION"></span>Aislamiento de sesión 0</span><span class="sxs-lookup"><span data-stu-id="bcab0-133"><span id="Session_0_Isolation"></span><span id="session_0_isolation"></span><span id="SESSION_0_ISOLATION"></span>Session 0 Isolation</span></span><br/>                                                             | <span data-ttu-id="bcab0-134">Los servicios siempre se ejecutan en la sesión 0.</span><span class="sxs-lookup"><span data-stu-id="bcab0-134">Services have always run in session 0.</span></span> <span data-ttu-id="bcab0-135">Antes de Windows Vista, el primer usuario que inicia sesión también se asignó a la sesión 0.</span><span class="sxs-lookup"><span data-stu-id="bcab0-135">Before Windows Vista, the first user to log on was also assigned to session 0.</span></span> <span data-ttu-id="bcab0-136">Ahora, la sesión 0 se reserva exclusivamente para los servicios y otras aplicaciones no asociadas a una sesión de usuario interactivo.</span><span class="sxs-lookup"><span data-stu-id="bcab0-136">Now, session 0 is reserved exclusively for services and other applications not associated with an interactive user session.</span></span> <span data-ttu-id="bcab0-137">(El primer usuario que inicia sesión está conectado a la sesión 1, el segundo usuario que inicia sesión está conectado a la sesión 2, y así sucesivamente). La sesión 0 no es compatible con los procesos que interactúan con el usuario.</span><span class="sxs-lookup"><span data-stu-id="bcab0-137">(The first user to log on is connected to session 1, the second user to log on is connected to session 2, and so on.) Session 0 does not support processes that interact with the user.</span></span><br/> <span data-ttu-id="bcab0-138">Este cambio significa que un servicio no puede publicar o enviar un mensaje a una aplicación, y una aplicación no puede enviar o publicar un mensaje en un servicio.</span><span class="sxs-lookup"><span data-stu-id="bcab0-138">This change means that a service cannot post or send a message to an application and an application cannot send or post a message to a service.</span></span> <span data-ttu-id="bcab0-139">Además, los servicios no pueden mostrar un elemento de la interfaz de usuario, como un cuadro de diálogo directamente.</span><span class="sxs-lookup"><span data-stu-id="bcab0-139">In addition, services cannot display a user interface item such as a dialog box directly.</span></span> <span data-ttu-id="bcab0-140">Un servicio puede usar la función [**WTSSendMessage**](/windows/desktop/api/wtsapi32/nf-wtsapi32-wtssendmessagea) para mostrar un cuadro de diálogo en otra sesión.</span><span class="sxs-lookup"><span data-stu-id="bcab0-140">A service can use the [**WTSSendMessage**](/windows/desktop/api/wtsapi32/nf-wtsapi32-wtssendmessagea) function to display a dialog box in another session.</span></span><br/> |



 

## <a name="related-topics"></a><span data-ttu-id="bcab0-141">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="bcab0-141">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bcab0-142">Servicios</span><span class="sxs-lookup"><span data-stu-id="bcab0-142">Services</span></span>](services.md)
</dt> </dl>

 

