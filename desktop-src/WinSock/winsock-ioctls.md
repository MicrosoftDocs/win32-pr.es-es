---
description: Tema de navegación de los ioctl de socket de Windows Sockets (Winsock).
ms.assetid: 6a63c2c9-4e09-4a62-b39f-3ccb26287da8
title: IOCTLs de Winsock (Winsock2.h)
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: de7094f802b815bfbd7511bd67eb4e6b1767cb94
ms.sourcegitcommit: 392c0a56f99f4d19686e734291abcac887fc5ba2
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/22/2021
ms.locfileid: "105649315"
---
# <a name="winsock-ioctls"></a><span data-ttu-id="a763d-103">Ioctl de Winsock</span><span class="sxs-lookup"><span data-stu-id="a763d-103">Winsock IOCTLs</span></span>

<span data-ttu-id="a763d-104">En esta sección se describen los controles de entrada y salida (ioctl) de socket de Winsock para diversas ediciones de sistemas operativos Windows.</span><span class="sxs-lookup"><span data-stu-id="a763d-104">This section describes Winsock Socket input/output controls (IOCTLs) for various editions of Windows operating systems.</span></span> <span data-ttu-id="a763d-105">Utilice la función [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) o [**WSPIoctl**](/previous-versions/windows/hardware/network/ff566296(v=vs.85)) para emitir un ioctl de Winsock para controlar el modo de un socket, el protocolo de transporte o el subsistema de comunicaciones.</span><span class="sxs-lookup"><span data-stu-id="a763d-105">Use the [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) or [**WSPIoctl**](/previous-versions/windows/hardware/network/ff566296(v=vs.85)) function to issue a Winsock IOCTL to control the mode of a socket, the transport protocol, or the communications subsystem.</span></span>

<span data-ttu-id="a763d-106">Algunos ioctl de Winsock requieren más explicación de lo que puede transmitir esta tabla; Estas opciones contienen vínculos a temas adicionales.</span><span class="sxs-lookup"><span data-stu-id="a763d-106">Some Winsock IOCTLs require more explanation than this table can convey; such options contain links to additional topics.</span></span>

<span data-ttu-id="a763d-107">Es posible adoptar un esquema de codificación que conserve los códigos de operación de [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) definidos actualmente y proporcione una manera cómoda de particionar el espacio del identificador de código de operación en tanto como el parámetro *dwIoControlCode* es ahora una entidad de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="a763d-107">It is possible to adopt an encoding scheme that preserves the currently defined [**ioctlsocket**](/windows/desktop/api/winsock/nf-winsock-ioctlsocket) opcodes while providing a convenient way to partition the opcode identifier space in as much as the *dwIoControlCode* parameter is now a 32-bit entity.</span></span> <span data-ttu-id="a763d-108">El parámetro *dwIoControlCode* se crea para permitir la independencia del protocolo y del proveedor al agregar nuevos códigos de control al tiempo que se conserva la compatibilidad con versiones anteriores de los códigos de control de Windows sockets 1,1 y Unix.</span><span class="sxs-lookup"><span data-stu-id="a763d-108">The *dwIoControlCode* parameter is built to allow for protocol and vendor independence when adding new control codes while retaining backward compatibility with the Windows Sockets 1.1 and Unix control codes.</span></span> <span data-ttu-id="a763d-109">El parámetro *dwIoControlCode* tiene el formato siguiente.</span><span class="sxs-lookup"><span data-stu-id="a763d-109">The *dwIoControlCode* parameter has the following form.</span></span>

| <span data-ttu-id="a763d-110">I</span><span class="sxs-lookup"><span data-stu-id="a763d-110">I</span></span>  | <span data-ttu-id="a763d-111">O</span><span class="sxs-lookup"><span data-stu-id="a763d-111">O</span></span>  | <span data-ttu-id="a763d-112">V</span><span class="sxs-lookup"><span data-stu-id="a763d-112">V</span></span>  | <span data-ttu-id="a763d-113">T</span><span class="sxs-lookup"><span data-stu-id="a763d-113">T</span></span>  | <span data-ttu-id="a763d-114">Familia de proveedores/direcciones</span><span class="sxs-lookup"><span data-stu-id="a763d-114">Vendor/address family</span></span> | <span data-ttu-id="a763d-115">Código</span><span class="sxs-lookup"><span data-stu-id="a763d-115">Code</span></span>                   |
|-|-|-|-|-|-|
| <span data-ttu-id="a763d-116">3</span><span class="sxs-lookup"><span data-stu-id="a763d-116">3</span></span>  | <span data-ttu-id="a763d-117">3</span><span class="sxs-lookup"><span data-stu-id="a763d-117">3</span></span>  | <span data-ttu-id="a763d-118">2</span><span class="sxs-lookup"><span data-stu-id="a763d-118">2</span></span>  | <span data-ttu-id="a763d-119">2 2</span><span class="sxs-lookup"><span data-stu-id="a763d-119">2 2</span></span> | <span data-ttu-id="a763d-120">2 2 2 2 2 2 2 1 1 1 1</span><span class="sxs-lookup"><span data-stu-id="a763d-120">2 2 2 2 2 2 2 1 1 1 1</span></span> | <span data-ttu-id="a763d-121">1 1 1 1 1 1</span><span class="sxs-lookup"><span data-stu-id="a763d-121">1 1 1 1 1 1</span></span>              |
| <span data-ttu-id="a763d-122">1</span><span class="sxs-lookup"><span data-stu-id="a763d-122">1</span></span>  | <span data-ttu-id="a763d-123">0</span><span class="sxs-lookup"><span data-stu-id="a763d-123">0</span></span>  | <span data-ttu-id="a763d-124">9</span><span class="sxs-lookup"><span data-stu-id="a763d-124">9</span></span>  | <span data-ttu-id="a763d-125">8 7</span><span class="sxs-lookup"><span data-stu-id="a763d-125">8 7</span></span> | <span data-ttu-id="a763d-126">6 5 4 3 2 1 0 9 8 7 6</span><span class="sxs-lookup"><span data-stu-id="a763d-126">6 5 4 3 2 1 0 9 8 7 6</span></span> | <span data-ttu-id="a763d-127">5 4 3 2 1 0 9 8 7 6 5 4 3 2 1 0</span><span class="sxs-lookup"><span data-stu-id="a763d-127">5 4 3 2 1 0 9 8 7 6 5 4 3 2 1 0</span></span> |

> [!Note] 
> <span data-ttu-id="a763d-128">Los bits del parámetro *dwIoControlCode* que se muestran en la tabla deben leerse verticalmente de arriba a abajo por columna.</span><span class="sxs-lookup"><span data-stu-id="a763d-128">The bits in *dwIoControlCode* parameter displayed in the table must be read vertically from top to bottom by column.</span></span> <span data-ttu-id="a763d-129">Por tanto, el bit de la izquierda es el bit 31, el siguiente bit es el bit 30 y el bit más a la derecha es el bit 0.</span><span class="sxs-lookup"><span data-stu-id="a763d-129">So the left-most bit is bit 31, the next bit is bit 30, and the right-most bit is bit 0.</span></span>

<span data-ttu-id="a763d-130">Se establece si el búfer de entrada es válido para el código, como con **IOC_IN**.</span><span class="sxs-lookup"><span data-stu-id="a763d-130">I is set if the input buffer is valid for the code, as with **IOC_IN**.</span></span>

<span data-ttu-id="a763d-131">O se establece si el búfer de salida es válido para el código, como con **IOC_OUT**.</span><span class="sxs-lookup"><span data-stu-id="a763d-131">O is set if the output buffer is valid for the code, as with **IOC_OUT**.</span></span> <span data-ttu-id="a763d-132">Los códigos de control que usan los búferes de entrada y salida establecen I y O.</span><span class="sxs-lookup"><span data-stu-id="a763d-132">Control codes using both input and output buffers set both I and O.</span></span>

<span data-ttu-id="a763d-133">V se establece si no hay ningún parámetro para el código, como con **IOC_VOID**.</span><span class="sxs-lookup"><span data-stu-id="a763d-133">V is set if there are no parameters for the code, as with **IOC_VOID**.</span></span>

<span data-ttu-id="a763d-134">T es una cantidad de 2 bits que define el tipo de IOCTL.</span><span class="sxs-lookup"><span data-stu-id="a763d-134">T is a 2-bit quantity that defines the type of the IOCTL.</span></span> <span data-ttu-id="a763d-135">Se definen los valores siguientes:</span><span class="sxs-lookup"><span data-stu-id="a763d-135">The following values are defined:</span></span>

<span data-ttu-id="a763d-136">0 el IOCTL es un código IOCTL de UNIX estándar, como con **FIONREAD** y **FIONBIO**.</span><span class="sxs-lookup"><span data-stu-id="a763d-136">0 The IOCTL is a standard Unix IOCTL code, as with **FIONREAD** and **FIONBIO**.</span></span>

<span data-ttu-id="a763d-137">1 el IOCTL es un código genérico de IOCTL de Windows Sockets 2.</span><span class="sxs-lookup"><span data-stu-id="a763d-137">1 The IOCTL is a generic Windows Sockets 2 IOCTL code.</span></span> <span data-ttu-id="a763d-138">Los nuevos códigos de IOCTL definidos para Windows Sockets 2 tendrán T = = 1.</span><span class="sxs-lookup"><span data-stu-id="a763d-138">New IOCTL codes defined for Windows Sockets 2 will have T == 1.</span></span>

<span data-ttu-id="a763d-139">2 el IOCTL se aplica solo a una familia de direcciones específica.</span><span class="sxs-lookup"><span data-stu-id="a763d-139">2 The IOCTL applies only to a specific address family.</span></span>

<span data-ttu-id="a763d-140">3 el IOCTL se aplica solo a un proveedor de un proveedor específico, como con **IOC_VENDOR**.</span><span class="sxs-lookup"><span data-stu-id="a763d-140">3 The IOCTL applies only to a specific vendor's provider, as with **IOC_VENDOR**.</span></span> <span data-ttu-id="a763d-141">Este tipo permite a las compañías asignar un número de proveedor que aparece en el parámetro **Vendor/Address Family** .</span><span class="sxs-lookup"><span data-stu-id="a763d-141">This type allows companies to be assigned a vendor number that appears in the **Vendor/Address family** parameter.</span></span> <span data-ttu-id="a763d-142">A continuación, el proveedor puede definir nuevos ioctl específicos para ese proveedor sin tener que registrar el IOCTL con un centro de activación, lo que proporciona la flexibilidad y la privacidad del proveedor.</span><span class="sxs-lookup"><span data-stu-id="a763d-142">Then, the vendor can define new IOCTLs specific to that vendor without having to register the IOCTL with a clearinghouse, thereby providing vendor flexibility and privacy.</span></span>

<span data-ttu-id="a763d-143">**Familia de proveedores/direcciones** Una cantidad de 11 bits que define al proveedor que posee el código (si T = = 3) o que contiene la familia de direcciones a la que se aplica el código (si T = = 2).</span><span class="sxs-lookup"><span data-stu-id="a763d-143">**Vendor/Address family** An 11-bit quantity that defines the vendor who owns the code (if T == 3) or that contains the address family to which the code applies (if T == 2).</span></span> <span data-ttu-id="a763d-144">Si se trata de un código de IOCTL de UNIX (T = = 0), este parámetro tiene el mismo valor que el código de Unix.</span><span class="sxs-lookup"><span data-stu-id="a763d-144">If this is a Unix IOCTL code (T == 0) then this parameter has the same value as the code on Unix.</span></span> <span data-ttu-id="a763d-145">Si se trata de un IOCTL genérico de Windows Sockets 2 (T = = 1), este parámetro se puede usar como extensión del parámetro de código para proporcionar valores de código adicionales.</span><span class="sxs-lookup"><span data-stu-id="a763d-145">If this is a generic Windows Sockets 2 IOCTL (T == 1) then this parameter can be used as an extension of the code parameter to provide additional code values.</span></span>

<span data-ttu-id="a763d-146">**Código** de La cantidad de 16 bits que contiene el código IOCTL específico para la operación.</span><span class="sxs-lookup"><span data-stu-id="a763d-146">**Code** The 16-bit quantity that contains the specific IOCTL code for the operation.</span></span>

## <a name="unix-ioctl-codes"></a><span data-ttu-id="a763d-147">Códigos IOCTL de UNIX</span><span class="sxs-lookup"><span data-stu-id="a763d-147">Unix IOCTL codes</span></span>

<span data-ttu-id="a763d-148">Se admiten los siguientes códigos IOCTL de UNIX (comandos).</span><span class="sxs-lookup"><span data-stu-id="a763d-148">The following Unix IOCTL codes (commands) are supported.</span></span>

### <a name="fionbio"></a><span data-ttu-id="a763d-149">FIONBIO</span><span class="sxs-lookup"><span data-stu-id="a763d-149">FIONBIO</span></span>

<span data-ttu-id="a763d-150">Habilitar o deshabilitar el modo sin bloqueo en socket *s*.</span><span class="sxs-lookup"><span data-stu-id="a763d-150">Enable or disable non-blocking mode on socket *s*.</span></span> <span data-ttu-id="a763d-151">El parámetro *lpvInBuffer* apunta a un **valor Long** (QoS) sin signo, que es distinto de cero si se va a habilitar el modo sin bloqueo y cero si se va a deshabilitar.</span><span class="sxs-lookup"><span data-stu-id="a763d-151">The *lpvInBuffer* parameter points at an **unsigned long** (QoS), which is nonzero if non-blocking mode is to be enabled and zero if it is to be disabled.</span></span> <span data-ttu-id="a763d-152">Cuando se crea un socket, funciona en modo de bloqueo (es decir, el modo sin bloqueo está deshabilitado).</span><span class="sxs-lookup"><span data-stu-id="a763d-152">When a socket is created, it operates in blocking mode (that is, non-blocking mode is disabled).</span></span> <span data-ttu-id="a763d-153">Esto es coherente con los sockets BSD.</span><span class="sxs-lookup"><span data-stu-id="a763d-153">This is consistent with BSD sockets.</span></span>

<span data-ttu-id="a763d-154">La rutina [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) o [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect) establece automáticamente un socket en modo de no bloqueo.</span><span class="sxs-lookup"><span data-stu-id="a763d-154">The [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) or [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect) routine automatically sets a socket to non-blocking mode.</span></span> <span data-ttu-id="a763d-155">Si **WSAAsyncSelect** o **WSAEventSelect** se ha emitido en un socket, cualquier intento de usar [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) para volver a establecer el socket en modo de bloqueo producirá un error con WSAEINVAL.</span><span class="sxs-lookup"><span data-stu-id="a763d-155">If **WSAAsyncSelect** or **WSAEventSelect** has been issued on a socket, then any attempt to use [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) to set the socket back to blocking mode will fail with WSAEINVAL.</span></span> <span data-ttu-id="a763d-156">Para volver a establecer el socket en modo de bloqueo, una aplicación debe deshabilitar primero **WSAAsyncSelect** llamando a **WSAAsyncSelect** con el parámetro *lEvent* igual a cero o deshabilitar **WSAEventSelect** llamando a **WSAEventSelect** con el parámetro *lNetworkEvents* igual a cero.</span><span class="sxs-lookup"><span data-stu-id="a763d-156">To set the socket back to blocking mode, an application must first disable **WSAAsyncSelect** by calling **WSAAsyncSelect** with the *lEvent* parameter equal to zero, or disable **WSAEventSelect** by calling **WSAEventSelect** with the *lNetworkEvents* parameter equal to zero.</span></span>

### <a name="fionread"></a><span data-ttu-id="a763d-157">FIONREAD</span><span class="sxs-lookup"><span data-stu-id="a763d-157">FIONREAD</span></span>

<span data-ttu-id="a763d-158">Determine la cantidad de datos que se pueden leer de forma atómica desde socket *s*.</span><span class="sxs-lookup"><span data-stu-id="a763d-158">Determine the amount of data that can be read atomically from socket *s*.</span></span> <span data-ttu-id="a763d-159">El parámetro *lpvOutBuffer* apunta a una **longitud sin signo** en la que [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) almacena el resultado.</span><span class="sxs-lookup"><span data-stu-id="a763d-159">The *lpvOutBuffer* parameter points at an **unsigned long** in which [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) stores the result.</span></span>

<span data-ttu-id="a763d-160">Si el socket que se pasa en el parámetro *s* está orientado a un flujo (por ejemplo, escriba sock \_ Stream), **FIONREAD** devuelve la cantidad total de datos que se pueden leer en una sola operación de recepción; esto suele ser el mismo que la cantidad total de datos en cola en el socket (puesto que un flujo de datos está orientado a bytes, no se garantiza).</span><span class="sxs-lookup"><span data-stu-id="a763d-160">If the socket passed in the *s* parameter is stream oriented (for example, type SOCK\_STREAM), **FIONREAD** returns the total amount of data that can be read in a single receive operation; this is normally the same as the total amount of data queued on the socket (since a data stream is byte-oriented, this is not guaranteed).</span></span>

<span data-ttu-id="a763d-161">Si el socket que se pasa en el parámetro *s* está orientado a mensajes (por ejemplo, escriba sock \_ DGRAM), **FIONREAD** devuelve el número total de bytes disponibles para la lectura, no el tamaño del primer datagrama (mensaje) en cola en el socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-161">If the socket passed in the *s* parameter is message oriented (for example, type SOCK\_DGRAM), **FIONREAD** returns the reports the total number of bytes available to read, not the size of the first datagram (message) queued on the socket.</span></span>

### <a name="siocatmark"></a><span data-ttu-id="a763d-162">SIOCATMARK</span><span class="sxs-lookup"><span data-stu-id="a763d-162">SIOCATMARK</span></span>

<span data-ttu-id="a763d-163">Determine si se han leído todos los datos OOB.</span><span class="sxs-lookup"><span data-stu-id="a763d-163">Determine whether or not all OOB data has been read.</span></span> <span data-ttu-id="a763d-164">Esto se aplica solo a un socket de estilo de secuencia (por ejemplo, tipo SOCK \_ Stream) que se ha configurado para la recepción en línea de cualquier dato OOB (por lo que \_ OOBINLINE).</span><span class="sxs-lookup"><span data-stu-id="a763d-164">This applies only to a socket of stream-style (for example, type SOCK\_STREAM) that has been configured for inline reception of any OOB data (SO\_OOBINLINE).</span></span> <span data-ttu-id="a763d-165">Si no hay datos OOB en espera de ser leídos, la operación devuelve TRUE.</span><span class="sxs-lookup"><span data-stu-id="a763d-165">If no OOB data is waiting to be read, the operation returns TRUE.</span></span> <span data-ttu-id="a763d-166">De lo contrario, devuelve **false** y la siguiente operación de recepción realizada en el socket recuperará algunos o todos los datos que preceden a la marca; la aplicación debe usar la operación **SIOCATMARK** para determinar si queda alguna.</span><span class="sxs-lookup"><span data-stu-id="a763d-166">Otherwise, it returns **FALSE**, and the next receive operation performed on the socket will retrieve some or all of the data preceding the mark; the application should use the **SIOCATMARK** operation to determine whether any remains.</span></span> <span data-ttu-id="a763d-167">Si hay datos normales que preceden a los datos urgentes (fuera de banda), se recibirán en orden.</span><span class="sxs-lookup"><span data-stu-id="a763d-167">If there is any normal data preceding the urgent (out of band) data, it will be received in order.</span></span> <span data-ttu-id="a763d-168">(Tenga en cuenta que las operaciones [**RECV**](/windows/desktop/api/winsock/nf-winsock-recv) nunca mezclarán datos OOB y normal en la misma llamada). *lpvOutBuffer* apunta a un booleano en el que [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) almacena el resultado.</span><span class="sxs-lookup"><span data-stu-id="a763d-168">(Note that [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) operations will never mix OOB and normal data in the same call.) *lpvOutBuffer* points at a BOOL in which [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) stores the result.</span></span>

## <a name="windows-sockets-2-commands"></a><span data-ttu-id="a763d-169">Comandos de Windows Sockets 2</span><span class="sxs-lookup"><span data-stu-id="a763d-169">Windows Sockets 2 commands</span></span>

<span data-ttu-id="a763d-170">Se admiten los siguientes comandos de Windows Sockets 2.</span><span class="sxs-lookup"><span data-stu-id="a763d-170">The following Windows Sockets 2 commands are supported.</span></span>

### <a name="sio_acquire_port_reservation-opcode-setting-i-t3"></a><span data-ttu-id="a763d-171">SIO_ACQUIRE_PORT_RESERVATION (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-171">SIO_ACQUIRE_PORT_RESERVATION (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-172">Solicitar una reserva en tiempo de ejecución para un bloque de puertos TCP o UDP.</span><span class="sxs-lookup"><span data-stu-id="a763d-172">Request a runtime reservation for a block of TCP or UDP ports.</span></span> <span data-ttu-id="a763d-173">En el caso de las reservas de puerto en tiempo de ejecución, el grupo de puertos requiere que se consuman reservas del proceso en cuyo socket se concedió la reserva.</span><span class="sxs-lookup"><span data-stu-id="a763d-173">For runtime port reservations, the port pool requires that reservations be consumed from the process on whose socket the reservation was granted.</span></span> <span data-ttu-id="a763d-174">Las reservas de puerto en tiempo de ejecución solo duran el tiempo que dure el socket en el que se llamó al método de [**adquisición de puerto de adquisición de SiO \_ \_ \_**](/previous-versions/windows/desktop/legacy/gg699720(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-174">Runtime port reservations last only as long as the lifetime of the socket on which the [**SIO\_ACQUIRE\_PORT\_RESERVATION**](/previous-versions/windows/desktop/legacy/gg699720(v=vs.85)) IOCTL was called.</span></span> <span data-ttu-id="a763d-175">Por el contrario, cualquier proceso puede consumir reservas de Puerto persistentes creadas con la función [**CreatePersistentTcpPortReservation**](/windows/win32/api/iphlpapi/nf-iphlpapi-createpersistenttcpportreservation) o [**CreatePersistentUdpPortReservation**](/windows/win32/api/iphlpapi/nf-iphlpapi-createpersistentudpportreservation) con la capacidad de obtener reservas persistentes.</span><span class="sxs-lookup"><span data-stu-id="a763d-175">In contrast, persistent port reservations created using the [**CreatePersistentTcpPortReservation**](/windows/win32/api/iphlpapi/nf-iphlpapi-createpersistenttcpportreservation) or [**CreatePersistentUdpPortReservation**](/windows/win32/api/iphlpapi/nf-iphlpapi-createpersistentudpportreservation) function may be consumed by any process with the ability to obtain persistent reservations.</span></span>

<span data-ttu-id="a763d-176">Para obtener información más detallada, consulte la referencia de la [**reserva de puerto de adquisición de SiO \_ \_ \_**](/previous-versions/windows/desktop/legacy/gg699720(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-176">For more detailed information, see the [**SIO\_ACQUIRE\_PORT\_RESERVATION**](/previous-versions/windows/desktop/legacy/gg699720(v=vs.85)) reference.</span></span>

<span data-ttu-id="a763d-177">[**SiO \_ La adquisición del \_ Puerto de \_ adquisición**](/previous-versions/windows/desktop/legacy/gg699720(v=vs.85)) es compatible con Windows Vista y versiones posteriores del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="a763d-177">[**SIO\_ACQUIRE\_PORT\_RESERVATION**](/previous-versions/windows/desktop/legacy/gg699720(v=vs.85)) is supported on Windows Vista and later versions of the operating system.</span></span>

### <a name="sio_address_list_change-opcode-setting-v-t1"></a><span data-ttu-id="a763d-178">Cambio en la lista de direcciones de SIO \_ \_ \_ (configuración de OpCode: V, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-178">SIO\_ADDRESS\_LIST\_CHANGE (opcode setting: V, T==1)</span></span>

<span data-ttu-id="a763d-179">Para recibir una notificación de los cambios en la lista de direcciones de transporte locales de la familia de protocolos del socket a la que se puede enlazar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a763d-179">To receive notification of changes in the list of local transport addresses of the socket's protocol family to which the application can bind.</span></span> <span data-ttu-id="a763d-180">No se proporcionará información de salida tras la finalización de este IOCTL; la finalización indica simplemente que la lista de direcciones locales disponibles ha cambiado y se debe consultar de nuevo a través de la consulta de la **\_ lista de direcciones de \_ \_ SiO**.</span><span class="sxs-lookup"><span data-stu-id="a763d-180">No output information will be provided upon completion of this IOCTL; the completion merely indicates that list of available local address has changed and should be queried again through **SIO\_ADDRESS\_LIST\_QUERY**.</span></span>

<span data-ttu-id="a763d-181">Se supone (aunque no es necesario) que la aplicación utiliza e/s superpuestas para recibir notificaciones de cambio mediante la finalización de la solicitud de cambio de la **\_ lista de direcciones de \_ \_ SiO** .</span><span class="sxs-lookup"><span data-stu-id="a763d-181">It is assumed (although not required) that the application uses overlapped I/O to be notified of change by completion of **SIO\_ADDRESS\_LIST\_CHANGE** request.</span></span> <span data-ttu-id="a763d-182">Como alternativa, si la **lista de direcciones de SiO \_ \_ \_ cambia** ioctl se emite en un socket que no es de bloqueo y sin parámetros superpuestos (*lpOverlapped* /  *lpCompletionRoutine* se establecen en **null**), se completará inmediatamente con el error [WSAEWOULDBLOCK](windows-sockets-error-codes-2.md).</span><span class="sxs-lookup"><span data-stu-id="a763d-182">Alternatively, if the **SIO\_ADDRESS\_LIST\_CHANGE** IOCTL is issued on a non-blocking socket and without overlapped parameters (*lpOverlapped*/ *lpCompletionRoutine* are set to **NULL**), it will complete immediately with error [WSAEWOULDBLOCK](windows-sockets-error-codes-2.md).</span></span> <span data-ttu-id="a763d-183">A continuación, la aplicación puede esperar los eventos de cambio de la lista de direcciones a través de una llamada a [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect) o [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) con \_ \_ \_ el bit de cambio de lista de direcciones de FD en la máscara de bits de eventos de red.</span><span class="sxs-lookup"><span data-stu-id="a763d-183">The application can then wait for address list change events through a call to [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect) or [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) with FD\_ADDRESS\_LIST\_CHANGE bit set in the network event bitmask.</span></span>

### <a name="sio_address_list_query-opcode-setting-o-t1"></a><span data-ttu-id="a763d-184">\_Consulta de la lista de direcciones de SiO \_ \_ (configuración de OpCode: O, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-184">SIO\_ADDRESS\_LIST\_QUERY (opcode setting: O, T==1)</span></span>

<span data-ttu-id="a763d-185">Obtiene una lista de direcciones de transporte locales de la familia de protocolos del socket a la que se puede enlazar la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a763d-185">Obtains a list of local transport addresses of the socket's protocol family to which the application can bind.</span></span> <span data-ttu-id="a763d-186">La lista de direcciones varía en función de la familia de direcciones y algunas direcciones se excluyen de la lista.</span><span class="sxs-lookup"><span data-stu-id="a763d-186">The list of addresses varies based on address family and some addresses are excluded from the list.</span></span>

> [!Note] 
> <span data-ttu-id="a763d-187">En los entornos de plug-n-Play de Windows, las direcciones se pueden agregar y quitar de forma dinámica.</span><span class="sxs-lookup"><span data-stu-id="a763d-187">In Windows Plug-n-Play environments, addresses can be added and removed dynamically.</span></span> <span data-ttu-id="a763d-188">Por lo tanto, las aplicaciones no pueden basarse en la información devuelta por la consulta de lista de direcciones de SiO para ser persistentes. **\_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="a763d-188">Therefore, applications cannot rely on the information returned by **SIO\_ADDRESS\_LIST\_QUERY** to be persistent.</span></span> <span data-ttu-id="a763d-189">Las aplicaciones pueden registrarse para recibir notificaciones de cambio de dirección a través del cambio de la lista de direcciones de SiO que proporciona la notificación a través de un evento de cambio de lista de direcciones de e/s o FD superpuesto **\_ \_ \_** \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="a763d-189">Applications may register for address change notifications through the **SIO\_ADDRESS\_LIST\_CHANGE** IOCTL which provides for notification through either overlapped I/O or FD\_ADDRESS\_LIST\_CHANGE event.</span></span> <span data-ttu-id="a763d-190">Se puede usar la siguiente secuencia de acciones para garantizar que la aplicación tenga siempre información de lista de direcciones actual:</span><span class="sxs-lookup"><span data-stu-id="a763d-190">The following sequence of actions can be used to guarantee that the application always has current address list information:</span></span>

-  <span data-ttu-id="a763d-191">Problema **de \_ \_ \_ cambio** en la lista de direcciones de SiO ioctl</span><span class="sxs-lookup"><span data-stu-id="a763d-191">Issue **SIO\_ADDRESS\_LIST\_CHANGE** IOCTL</span></span>
-  <span data-ttu-id="a763d-192">Emitir **\_ consulta de \_ lista \_ de direcciones de SiO** ioctl</span><span class="sxs-lookup"><span data-stu-id="a763d-192">Issue **SIO\_ADDRESS\_LIST\_QUERY** IOCTL</span></span>
-  <span data-ttu-id="a763d-193">Cada vez que el cambio de la lista de direcciones de SiO envía una notificación a la aplicación del cambio en la lista de direcciones (ya sea a través de e/s superpuesta o por evento de cambio de lista de **\_ \_ \_** \_ direcciones FD \_ \_ ), se debe repetir la secuencia de acciones completa.</span><span class="sxs-lookup"><span data-stu-id="a763d-193">Whenever **SIO\_ADDRESS\_LIST\_CHANGE** IOCTL notifies the application of address list change (either through overlapped I/O or by signaling FD\_ADDRESS\_LIST\_CHANGE event), the whole sequence of actions should be repeated.</span></span>

<span data-ttu-id="a763d-194">Para obtener información más detallada, consulte la referencia de consulta de la [**\_ lista de direcciones de \_ \_ SiO**](/previous-versions/windows/desktop/legacy/dd877219(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-194">For more detailed information, see the [**SIO\_ADDRESS\_LIST\_QUERY**](/previous-versions/windows/desktop/legacy/dd877219(v=vs.85)) reference.</span></span> <span data-ttu-id="a763d-195">**SiO \_ La \_ \_ consulta** de la lista de direcciones es compatible con Windows 2000 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-195">**SIO\_ADDRESS\_LIST\_QUERY** is supported on Windows 2000 and later.</span></span>

### <a name="sio_apply_transport_setting-opcode-setting-i-t3"></a><span data-ttu-id="a763d-196">SIO \_ aplicar \_ configuración de transporte \_ (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-196">SIO\_APPLY\_TRANSPORT\_SETTING (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-197">Aplica una configuración de transporte a un socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-197">Applies a transport setting to a socket.</span></span> <span data-ttu-id="a763d-198">La configuración de transporte que se está aplicando se basa en el [**\_ \_ identificador de configuración de transporte**](/windows/win32/api/transportsettingcommon/ns-transportsettingcommon-transport_setting_id) que se ha pasado en el parámetro *lpvInBuffer* .</span><span class="sxs-lookup"><span data-stu-id="a763d-198">The transport setting being applied is based on the [**TRANSPORT\_SETTING\_ID**](/windows/win32/api/transportsettingcommon/ns-transportsettingcommon-transport_setting_id) passed in the *lpvInBuffer* parameter.</span></span>

<span data-ttu-id="a763d-199">La única configuración de transporte que define actualmente es para la funcionalidad de **\_ notificación en tiempo \_ \_ real** en un socket TCP.</span><span class="sxs-lookup"><span data-stu-id="a763d-199">The only transport setting currently defines is for the **REAL\_TIME\_NOTIFICATION\_CAPABILITY** capability on a TCP socket.</span></span>

<span data-ttu-id="a763d-200">Si el [**\_ \_ ID. de configuración de transporte**](/windows/win32/api/transportsettingcommon/ns-transportsettingcommon-transport_setting_id) que se ha pasado tiene el miembro **GUID** establecido en funcionalidad de **\_ \_ notificación \_ en tiempo real**, se trata de una solicitud para aplicar la configuración de notificación en tiempo real para el socket TCP que se usa con la [**ControlChannelTrigger**](/uwp/api/Windows.Networking.Sockets.ControlChannelTrigger) para recibir notificaciones de red en segundo plano en una aplicación de la tienda Windows.</span><span class="sxs-lookup"><span data-stu-id="a763d-200">If the [**TRANSPORT\_SETTING\_ID**](/windows/win32/api/transportsettingcommon/ns-transportsettingcommon-transport_setting_id) passed has the **Guid** member set to **REAL\_TIME\_NOTIFICATION\_CAPABILITY**, then this is a request to apply real time notification settings for the TCP socket used with the [**ControlChannelTrigger**](/uwp/api/Windows.Networking.Sockets.ControlChannelTrigger) to receive background network notifications in a Windows Store app.</span></span>

<span data-ttu-id="a763d-201">Para obtener información más detallada, consulte la referencia de configuración de transporte de la [**\_ aplicación \_ \_ SiO**](/previous-versions/windows/desktop/legacy/jj553481(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-201">For more detailed information, see the [**SIO\_APPLY\_TRANSPORT\_SETTING**](/previous-versions/windows/desktop/legacy/jj553481(v=vs.85)) reference.</span></span> <span data-ttu-id="a763d-202">**SiO \_ La \_ \_ configuración de aplicar transporte** es compatible con Windows 8, Windows Server 2012 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-202">**SIO\_APPLY\_TRANSPORT\_SETTING** is supported on Windows 8, Windows Server 2012, and later.</span></span>

### <a name="sio_associate_handle-opcode-setting-i-t1"></a><span data-ttu-id="a763d-203">SIO \_ identificador de asociación \_ (configuración de OpCode: I, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-203">SIO\_ASSOCIATE\_HANDLE (opcode setting: I, T==1)</span></span>

<span data-ttu-id="a763d-204">Asocie este socket al identificador (handle) especificado de la interfaz correspondiente.</span><span class="sxs-lookup"><span data-stu-id="a763d-204">Associate this socket with the specified handle of a companion interface.</span></span> <span data-ttu-id="a763d-205">El búfer de entrada contiene el valor entero que corresponde a la constante de manifiesto para la interfaz complementaria (por ejemplo, \_ NETDEV y TH \_ TAPI.), seguido de un valor que es un identificador de la interfaz complementaria especificada, junto con cualquier otra información necesaria.</span><span class="sxs-lookup"><span data-stu-id="a763d-205">The input buffer contains the integer value corresponding to the manifest constant for the companion interface (for example, TH\_NETDEV and TH\_TAPI.), followed by a value that is a handle of the specified companion interface, along with any other required information.</span></span> <span data-ttu-id="a763d-206">Consulte la sección correspondiente en los [anexos de Winsock](winsock-annexes.md) para obtener detalles específicos de una determinada interfaz del complemento.</span><span class="sxs-lookup"><span data-stu-id="a763d-206">Refer to the appropriate section in [Winsock Annexes](winsock-annexes.md) for details specific to a particular companion interface.</span></span> <span data-ttu-id="a763d-207">El tamaño total se refleja en la longitud del búfer de entrada.</span><span class="sxs-lookup"><span data-stu-id="a763d-207">The total size is reflected in the input buffer length.</span></span> <span data-ttu-id="a763d-208">No se requiere ningún búfer de salida.</span><span class="sxs-lookup"><span data-stu-id="a763d-208">No output buffer is required.</span></span> <span data-ttu-id="a763d-209">El código de error [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) se indica para los proveedores de servicios que no admiten este ioctl.</span><span class="sxs-lookup"><span data-stu-id="a763d-209">The [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) error code is indicated for service providers that do not support this IOCTL.</span></span> <span data-ttu-id="a763d-210">El identificador asociado a este IOCTL se puede recuperar mediante **el \_ \_ identificador SiO translate**.</span><span class="sxs-lookup"><span data-stu-id="a763d-210">The handle associated by this IOCTL can be retrieved using **SIO\_TRANSLATE\_HANDLE**.</span></span>

<span data-ttu-id="a763d-211">Se puede usar una interfaz complementaria, por ejemplo, si un proveedor determinado proporciona (1) una gran cantidad de controles adicionales sobre el comportamiento de un socket y (2) los controles son lo suficientemente específicos del proveedor que no se asignan a las funciones de Windows socket existentes o que probablemente se definirán en el futuro.</span><span class="sxs-lookup"><span data-stu-id="a763d-211">A companion interface might be used, for example, if a particular provider provides (1) a great deal of additional controls over the behavior of a socket and (2) the controls are provider-specific enough that they do not map to existing Windows Socket functions or ones likely to be defined in the future.</span></span> <span data-ttu-id="a763d-212">Se recomienda usar el modelo de objetos componentes (COM) en lugar de este IOCTL para detectar y realizar el seguimiento de otras interfaces que podrían ser compatibles con un socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-212">It is recommend that the Component Object Model (COM) be used instead of this IOCTL to discover and track other interfaces that might be supported by a socket.</span></span> <span data-ttu-id="a763d-213">Este IOCTL está presente para la compatibilidad (inversa) con sistemas en los que COM no está disponible o no se puede usar por algún otro motivo.</span><span class="sxs-lookup"><span data-stu-id="a763d-213">This IOCTL is present for (reverse) compatibility with systems where COM is not available or cannot be used for some other reason.</span></span>

### <a name="sio_associate_port_reservation-opcode-setting-i-t3"></a><span data-ttu-id="a763d-214">SIO \_ asociar \_ reserva de puerto \_ (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-214">SIO\_ASSOCIATE\_PORT\_RESERVATION (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-215">Asociar un socket con una reserva persistente o en tiempo de ejecución para un bloque de puertos TCP o UDP identificados por el token de reserva de puerto.</span><span class="sxs-lookup"><span data-stu-id="a763d-215">Associate a socket with a persistent or runtime reservation for a block of TCP or UDP ports identified by the port reservation token.</span></span> <span data-ttu-id="a763d-216">Se debe emitir el ioctl de reserva de puertos de Asociación de la [**\_ Asociación \_ \_**](/previous-versions/windows/desktop/legacy/gg699721(v=vs.85)) para que el socket esté enlazado.</span><span class="sxs-lookup"><span data-stu-id="a763d-216">The [**SIO\_ASSOCIATE\_PORT\_RESERVATION**](/previous-versions/windows/desktop/legacy/gg699721(v=vs.85)) IOCTL must be issued before the socket is bound.</span></span> <span data-ttu-id="a763d-217">Si y cuando se enlaza el socket, el puerto asignado a él se seleccionará en la reserva de Puerto identificada por el token especificado.</span><span class="sxs-lookup"><span data-stu-id="a763d-217">If and when the socket is bound, the port assigned to it will be selected from the port reservation identified by the given token.</span></span> <span data-ttu-id="a763d-218">Si no hay puertos disponibles en la reserva especificada, se producirá un error en la llamada a la función de [**enlace**](/windows/desktop/api/winsock/nf-winsock-bind) .</span><span class="sxs-lookup"><span data-stu-id="a763d-218">If no ports are available from the specified reservation, the [**bind**](/windows/desktop/api/winsock/nf-winsock-bind) function call will fail.</span></span>

<span data-ttu-id="a763d-219">Para obtener información más detallada, consulte la referencia de la [**reserva de puerto de Asociación de SiO \_ \_ \_**](/previous-versions/windows/desktop/legacy/gg699721(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-219">For more detailed information, see the [**SIO\_ASSOCIATE\_PORT\_RESERVATION**](/previous-versions/windows/desktop/legacy/gg699721(v=vs.85)) reference.</span></span>

<span data-ttu-id="a763d-220">[**SiO \_ En \_ \_**](/previous-versions/windows/desktop/legacy/gg699721(v=vs.85)) Windows Vista y versiones posteriores del sistema operativo se admite la reserva de puertos asociada.</span><span class="sxs-lookup"><span data-stu-id="a763d-220">[**SIO\_ASSOCIATE\_PORT\_RESERVATION**](/previous-versions/windows/desktop/legacy/gg699721(v=vs.85)) is supported on Windows Vista and later versions of the operating system.</span></span>

### <a name="sio_base_handle-opcode-setting-o-t1"></a><span data-ttu-id="a763d-221">\_Identificador base \_ de sio (configuración de OpCode: O, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-221">SIO\_BASE\_HANDLE (opcode setting: O, T==1)</span></span>

<span data-ttu-id="a763d-222">Recupera el identificador del proveedor de servicios base para un socket determinado.</span><span class="sxs-lookup"><span data-stu-id="a763d-222">Retrieves the base service provider handle for a given socket.</span></span> <span data-ttu-id="a763d-223">El valor devuelto es un **socket**.</span><span class="sxs-lookup"><span data-stu-id="a763d-223">The returned value is a **SOCKET**.</span></span>

<span data-ttu-id="a763d-224">Un proveedor de servicios por niveles nunca interceptaría este IOCTL, ya que el valor devuelto debe ser el identificador de socket del proveedor de servicios base.</span><span class="sxs-lookup"><span data-stu-id="a763d-224">A layered service provider would never intercept this IOCTL since the return value must be the socket handle from the base service provider.</span></span>

<span data-ttu-id="a763d-225">Si el búfer de salida no es suficientemente grande para un identificador de socket ( *cbOutBuffer* es menor que el tamaño de un **socket**) o el parámetro *lpvOutBuffer* es un puntero **nulo** , se devuelve un **\_ error de socket** como resultado de este ioctl y [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) devuelve [WSAEFAULT](windows-sockets-error-codes-2.md).</span><span class="sxs-lookup"><span data-stu-id="a763d-225">If the output buffer is not large enough for a socket handle (the *cbOutBuffer* is less than the size of a **SOCKET**) or the *lpvOutBuffer* parameter is a **NULL** pointer, **SOCKET\_ERROR** is returned as the result of this IOCTL and [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) returns [WSAEFAULT](windows-sockets-error-codes-2.md).</span></span>

<span data-ttu-id="a763d-226">**SiO \_ El \_ identificador base** se define en el archivo de encabezado *mswsock. h* y se admite en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-226">**SIO\_BASE\_HANDLE** is defined in the *Mswsock.h* header file and supported on Windows Vista and later.</span></span>

### <a name="sio_bsp_handle-opcode-setting-o-t1"></a><span data-ttu-id="a763d-227">\_Identificador del BSP \_ de sio (configuración de OpCode: O, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-227">SIO\_BSP\_HANDLE (opcode setting: O, T==1)</span></span>

<span data-ttu-id="a763d-228">Recupera el identificador del proveedor de servicios base para un socket utilizado por la función [**WSASendMsg**](/windows/desktop/api/winsock2/nf-winsock2-wsasendmsg) .</span><span class="sxs-lookup"><span data-stu-id="a763d-228">Retrieves the base service provider handle for a socket used by the [**WSASendMsg**](/windows/desktop/api/winsock2/nf-winsock2-wsasendmsg) function.</span></span> <span data-ttu-id="a763d-229">El valor devuelto es un **socket**.</span><span class="sxs-lookup"><span data-stu-id="a763d-229">The returned value is a **SOCKET**.</span></span>

<span data-ttu-id="a763d-230">Este ioctl lo usa un proveedor de servicios por niveles para asegurarse de que el proveedor intercepta la función [**WSASendMsg**](/windows/desktop/api/winsock2/nf-winsock2-wsasendmsg) .</span><span class="sxs-lookup"><span data-stu-id="a763d-230">This Ioctl is used by a layered service provider to ensure the provider intercept the [**WSASendMsg**](/windows/desktop/api/winsock2/nf-winsock2-wsasendmsg) function.</span></span>

<span data-ttu-id="a763d-231">Si el búfer de salida no es suficientemente grande para un identificador de socket ( *cbOutBuffer* es menor que el tamaño de un **socket**) o el parámetro *lpvOutBuffer* es un puntero **nulo** , se devuelve un **\_ error de socket** como resultado de este ioctl y [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) devuelve [WSAEFAULT](windows-sockets-error-codes-2.md).</span><span class="sxs-lookup"><span data-stu-id="a763d-231">If the output buffer is not large enough for a socket handle (the *cbOutBuffer* is less than the size of a **SOCKET**) or the *lpvOutBuffer* parameter is a **NULL** pointer, **SOCKET\_ERROR** is returned as the result of this IOCTL and [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) returns [WSAEFAULT](windows-sockets-error-codes-2.md).</span></span>

<span data-ttu-id="a763d-232">**SiO \_ El \_ identificador de BSP** se define en el archivo de encabezado *mswsock. h* y se admite en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-232">**SIO\_BSP\_HANDLE** is defined in the *Mswsock.h* header file and supported on Windows Vista and later.</span></span>

### <a name="sio_bsp_handle_select-opcode-setting-o-t1"></a><span data-ttu-id="a763d-233">\_ \_ \_ Operación de selección de controlador de BSP de sio (configuración de OpCode: O, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-233">SIO\_BSP\_HANDLE\_SELECT (opcode setting: O, T==1)</span></span>

<span data-ttu-id="a763d-234">Recupera el identificador del proveedor de servicios base para un socket utilizado por la función [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) .</span><span class="sxs-lookup"><span data-stu-id="a763d-234">Retrieves the base service provider handle for a socket used by the [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) function.</span></span> <span data-ttu-id="a763d-235">El valor devuelto es un **socket**.</span><span class="sxs-lookup"><span data-stu-id="a763d-235">The returned value is a **SOCKET**.</span></span>

<span data-ttu-id="a763d-236">Un proveedor de servicios por niveles utiliza este ioctl para asegurarse de que el proveedor intercepte la función [**Select**](/windows/desktop/api/Winsock2/nf-winsock2-select) .</span><span class="sxs-lookup"><span data-stu-id="a763d-236">This Ioctl is used by a layered service provider to ensure the provider intercept the [**select**](/windows/desktop/api/Winsock2/nf-winsock2-select) function.</span></span>

<span data-ttu-id="a763d-237">Si el búfer de salida no es suficientemente grande para un identificador de socket ( *cbOutBuffer* es menor que el tamaño de un **socket**) o el parámetro *lpvOutBuffer* es un puntero **nulo** , se devuelve un **\_ error de socket** como resultado de este ioctl y [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) devuelve [WSAEFAULT](windows-sockets-error-codes-2.md).</span><span class="sxs-lookup"><span data-stu-id="a763d-237">If the output buffer is not large enough for a socket handle (the *cbOutBuffer* is less than the size of a **SOCKET**) or the *lpvOutBuffer* parameter is a **NULL** pointer, **SOCKET\_ERROR** is returned as the result of this IOCTL and [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) returns [WSAEFAULT](windows-sockets-error-codes-2.md).</span></span>

<span data-ttu-id="a763d-238">**SiO \_ La \_ \_ selección de identificador BSP** se define en el archivo de encabezado *mswsock. h* y se admite en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-238">**SIO\_BSP\_HANDLE\_SELECT** is defined in the *Mswsock.h* header file and supported on Windows Vista and later.</span></span>

### <a name="sio_bsp_handle_poll-opcode-setting-o-t1"></a><span data-ttu-id="a763d-239">El \_ \_ \_ sondeo de control de el BSP de sio (configuración de OpCode: O, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-239">SIO\_BSP\_HANDLE\_POLL (opcode setting: O, T==1)</span></span>

<span data-ttu-id="a763d-240">Recupera el identificador del proveedor de servicios base para un socket utilizado por la función [**WSAPoll**](/windows/win32/api/winsock2/nf-winsock2-wsapoll) .</span><span class="sxs-lookup"><span data-stu-id="a763d-240">Retrieves the base service provider handle for a socket used by the [**WSAPoll**](/windows/win32/api/winsock2/nf-winsock2-wsapoll) function.</span></span> <span data-ttu-id="a763d-241">El parámetro *lpOverlapped* debe ser un puntero **nulo** .</span><span class="sxs-lookup"><span data-stu-id="a763d-241">The *lpOverlapped* parameter must be a **NULL** pointer.</span></span> <span data-ttu-id="a763d-242">El valor devuelto es un **socket**.</span><span class="sxs-lookup"><span data-stu-id="a763d-242">The returned value is a **SOCKET**.</span></span>

<span data-ttu-id="a763d-243">Este ioctl lo usa un proveedor de servicios por niveles para asegurarse de que el proveedor intercepta la función [**WSAPoll**](/windows/win32/api/winsock2/nf-winsock2-wsapoll) .</span><span class="sxs-lookup"><span data-stu-id="a763d-243">This Ioctl is used by a layered service provider to ensure the provider intercept the [**WSAPoll**](/windows/win32/api/winsock2/nf-winsock2-wsapoll) function.</span></span>

<span data-ttu-id="a763d-244">Si el búfer de salida no es suficientemente grande para un identificador de socket ( *cbOutBuffer* es menor que el tamaño de un **socket**), el parámetro *lpvOutBuffer* es un puntero **nulo** , o el parámetro *lpOverlapped* no es un puntero **nulo** , se devuelve un **\_ error de socket** como resultado de este ioctl y [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) devuelve [WSAEFAULT](windows-sockets-error-codes-2.md).</span><span class="sxs-lookup"><span data-stu-id="a763d-244">If the output buffer is not large enough for a socket handle (the *cbOutBuffer* is less than the size of a **SOCKET**), the *lpvOutBuffer* parameter is a **NULL** pointer, or the *lpOverlapped* parameter is not a **NULL** pointer, **SOCKET\_ERROR** is returned as the result of this IOCTL and [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) returns [WSAEFAULT](windows-sockets-error-codes-2.md).</span></span>

<span data-ttu-id="a763d-245">**SiO \_ El \_ \_ sondeo de identificador de BSP** se define en el archivo de encabezado *mswsock. h* y se admite en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-245">**SIO\_BSP\_HANDLE\_POLL** is defined in the *Mswsock.h* header file and supported on Windows Vista and later.</span></span>

### <a name="sio_chk_qos-opcode-setting-i-o-t3"></a><span data-ttu-id="a763d-246">SIO \_ CHK \_ QoS (configuración de OpCode: I, O, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-246">SIO\_CHK\_QOS (opcode setting: I, O, T==3)</span></span>

<span data-ttu-id="a763d-247">Recupera información sobre las características de tráfico de QoS.</span><span class="sxs-lookup"><span data-stu-id="a763d-247">Retrieves information about QoS traffic characteristics.</span></span> <span data-ttu-id="a763d-248">Durante la fase de transición del sistema de envío entre la configuración de Flow y la recepción de un mensaje RESV (vea [cómo el servicio RSVP invoca TC](/previous-versions/windows/desktop/qos/how-the-rsvp-service-invokes-tc) para obtener más información sobre la fase de transición), el tráfico asociado a un flujo RSVP se basa en el tipo de servicio ([mejor esfuerzo](/previous-versions/windows/desktop/qos/best-effort), [carga controlada](/previous-versions/windows/desktop/qos/controlled-load)o [garantizado](/previous-versions/windows/desktop/qos/guaranteed)).</span><span class="sxs-lookup"><span data-stu-id="a763d-248">During the transitional phase on the sending system between flow setup and the receipt of a RESV message (see [How the RSVP Service Invokes TC](/previous-versions/windows/desktop/qos/how-the-rsvp-service-invokes-tc) for more information on the transitional phase), traffic associated with an RSVP flow is shaped based on service type ([BEST EFFORT](/previous-versions/windows/desktop/qos/best-effort), [CONTROLLED LOAD](/previous-versions/windows/desktop/qos/controlled-load), or [GUARANTEED](/previous-versions/windows/desktop/qos/guaranteed)).</span></span> <span data-ttu-id="a763d-249">Para obtener más información, vea [usar \_ el \_ QoS de SiO CHK](/previous-versions/windows/desktop/qos/using-sio-chk-qos) en la sección [calidad de servicio](/previous-versions/windows/desktop/qos/qos-start-page) del SDK de la plataforma.</span><span class="sxs-lookup"><span data-stu-id="a763d-249">For more information, see [Using SIO\_CHK\_QOS](/previous-versions/windows/desktop/qos/using-sio-chk-qos) in the [Quality of Service](/previous-versions/windows/desktop/qos/qos-start-page) section of the Platform SDK.</span></span>

### <a name="sio_cpu_affinity-opcode-setting-i-t3"></a><span data-ttu-id="a763d-250">SIO_CPU_AFFINITY (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-250">SIO_CPU_AFFINITY (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-251">Habilita la paralelización de indicación de recepción y uso compartido de puertos.</span><span class="sxs-lookup"><span data-stu-id="a763d-251">Enables port sharing and receive indication parallelization.</span></span> <span data-ttu-id="a763d-252">Cuando la aplicación usa esta opción de socket para asociar Sockets a diferentes procesadores y, a continuación, enlaza los sockets a la misma dirección, las indicaciones de recepción se distribuirán entre los sockets según el hash de ajuste de escala en lado de recepción (RSS).</span><span class="sxs-lookup"><span data-stu-id="a763d-252">When your application uses this socket option to associate sockets to different processors, and then binds the sockets to the same address, receive indications will be distributed across the sockets based on Receive Side Scaling (RSS) hash.</span></span> <span data-ttu-id="a763d-253">La configuración de RSS no cambia, por lo que cualquier flujo determinado (punto de conexión local, par de punto de conexión remoto) siempre se indicará en el mismo procesador.</span><span class="sxs-lookup"><span data-stu-id="a763d-253">The RSS settings don't change, so any given flow (local endpoint, remote endpoint pair) will always be indicated on the same processor.</span></span> <span data-ttu-id="a763d-254">Como resultado, todos los paquetes que pertenecen a un flujo determinado se indicarán en el mismo Socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-254">As a result, all packets belonging to a given flow will be indicated to the same socket.</span></span> <span data-ttu-id="a763d-255">Se debe llamar a este IOCTL antes de enlazar; de lo contrario, se devolverá WSAEINVAL.</span><span class="sxs-lookup"><span data-stu-id="a763d-255">This IOCTL must be called prior to bind, otherwise WSAEINVAL will be returned.</span></span> <span data-ttu-id="a763d-256">El búfer de entrada es un índice de procesador (basado en 0) de tipo USHORT.</span><span class="sxs-lookup"><span data-stu-id="a763d-256">The input buffer is a processor index (0-based) of type USHORT.</span></span> <span data-ttu-id="a763d-257">IOCTL no es compatible con SO_REUSEADDR y SO_REUSE_MULTICASTPORT.</span><span class="sxs-lookup"><span data-stu-id="a763d-257">The IOCTL is incompatible with SO_REUSEADDR and SO_REUSE_MULTICASTPORT.</span></span> <span data-ttu-id="a763d-258">Solo se admite para sockets UDP.</span><span class="sxs-lookup"><span data-stu-id="a763d-258">Only supported for UDP sockets.</span></span>

> [!NOTE]
> <span data-ttu-id="a763d-259">Si tiene como destino la versión 10.0.19041.0 (Windows 10, versión 2004) de la Windows SDK, use el valor `0x98000015` en lugar del nombre **SIO_CPU_AFFINITY**.</span><span class="sxs-lookup"><span data-stu-id="a763d-259">If you're targeting version 10.0.19041.0 (Windows 10, version 2004) of the Windows SDK, then use the value `0x98000015` instead of the name **SIO_CPU_AFFINITY**.</span></span>

### <a name="sio_enable_circular_queueing-opcode-setting-v-t1"></a><span data-ttu-id="a763d-260">SIO \_ habilitar \_ la \_ puesta en cola circular (configuración de OpCode: V, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-260">SIO\_ENABLE\_CIRCULAR\_QUEUEING (opcode setting: V, T==1)</span></span>

<span data-ttu-id="a763d-261">Indica al proveedor de servicios subyacente orientado a mensajes que un mensaje recién recibido nunca se debe quitar debido a un desbordamiento de la cola de búfer.</span><span class="sxs-lookup"><span data-stu-id="a763d-261">Indicates to the underlying message-oriented service provider that a newly arrived message should never be dropped because of a buffer queue overflow.</span></span> <span data-ttu-id="a763d-262">En su lugar, se debe eliminar el mensaje más antiguo de la cola para dar cabida al mensaje recién llegado.</span><span class="sxs-lookup"><span data-stu-id="a763d-262">Instead, the oldest message in the queue should be eliminated in order to accommodate the newly arrived message.</span></span> <span data-ttu-id="a763d-263">No se requieren búferes de entrada y salida.</span><span class="sxs-lookup"><span data-stu-id="a763d-263">No input and output buffers are required.</span></span> <span data-ttu-id="a763d-264">Tenga en cuenta que este IOCTL solo es válido para Sockets asociados a protocolos no confiables orientados a mensajes.</span><span class="sxs-lookup"><span data-stu-id="a763d-264">Note that this IOCTL is only valid for sockets associated with unreliable, message-oriented protocols.</span></span> <span data-ttu-id="a763d-265">El código de error [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) se indica para los proveedores de servicios que no admiten este ioctl.</span><span class="sxs-lookup"><span data-stu-id="a763d-265">The [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) error code is indicated for service providers that do not support this IOCTL.</span></span>

### <a name="sio_find_route-opcode-setting-o-t1"></a><span data-ttu-id="a763d-266">SIO \_ Buscar \_ ruta (configuración de OpCode: O, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-266">SIO\_FIND\_ROUTE (opcode setting: O, T==1)</span></span>

<span data-ttu-id="a763d-267">Cuando se emite, este IOCTL solicita que se detecte la ruta a la dirección remota especificada como [**sockaddr**](sockaddr-2.md) en el búfer de entrada.</span><span class="sxs-lookup"><span data-stu-id="a763d-267">When issued, this IOCTL requests that the route to the remote address specified as a [**sockaddr**](sockaddr-2.md) in the input buffer be discovered.</span></span> <span data-ttu-id="a763d-268">Si la dirección ya existe en la memoria caché local, su entrada se invalida.</span><span class="sxs-lookup"><span data-stu-id="a763d-268">If the address already exists in the local cache, its entry is invalidated.</span></span> <span data-ttu-id="a763d-269">En el caso de IPX de Novell, esta llamada inicia un GetLocalTarget de IPX (GLT), que consulta la dirección remota especificada en la red.</span><span class="sxs-lookup"><span data-stu-id="a763d-269">In the case of Novell's IPX, this call initiates an IPX GetLocalTarget (GLT), which queries the network for the given remote address.</span></span>

### <a name="sio_flush-opcode-setting-v-t1"></a><span data-ttu-id="a763d-270">SIO \_ Flush (configuración de OpCode: V, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-270">SIO\_FLUSH (opcode setting: V, T==1)</span></span>

<span data-ttu-id="a763d-271">Descarta el contenido actual de la cola de envío asociada a este socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-271">Discards current contents of the sending queue associated with this socket.</span></span> <span data-ttu-id="a763d-272">No se requieren búferes de entrada y salida.</span><span class="sxs-lookup"><span data-stu-id="a763d-272">No input and output buffers are required.</span></span> <span data-ttu-id="a763d-273">El código de error [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) se indica para los proveedores de servicios que no admiten este ioctl.</span><span class="sxs-lookup"><span data-stu-id="a763d-273">The [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) error code is indicated for service providers that do not support this IOCTL.</span></span>

### <a name="sio_get_broadcast_address-opcode-setting-o-t1"></a><span data-ttu-id="a763d-274">SIO \_ obtener \_ dirección de difusión \_ (configuración de OpCode: O, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-274">SIO\_GET\_BROADCAST\_ADDRESS (opcode setting: O, T==1)</span></span>

<span data-ttu-id="a763d-275">Este ioctl rellena el búfer de salida con una estructura [sockaddr](sockaddr-2.md) que contiene una dirección de difusión adecuada para su uso con [**SendTo**](/windows/desktop/api/winsock/nf-winsock-sendto) /  [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto).</span><span class="sxs-lookup"><span data-stu-id="a763d-275">This IOCTL fills the output buffer with a [sockaddr](sockaddr-2.md) structure containing a suitable broadcast address for use with [**sendto**](/windows/desktop/api/winsock/nf-winsock-sendto)/ [**WSASendTo**](/windows/desktop/api/Winsock2/nf-winsock2-wsasendto).</span></span> <span data-ttu-id="a763d-276">Este IOCTL no es compatible con los sockets IPv6 y devuelve el código de error [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) .</span><span class="sxs-lookup"><span data-stu-id="a763d-276">This IOCTL is not supported for IPv6 sockets and returns the [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) error code.</span></span>

### <a name="sio_get_extension_function_pointer-opcode-setting-o-i-t1"></a><span data-ttu-id="a763d-277">SIO \_ obtener \_ \_ puntero de función \_ de extensión (configuración de OpCode: O, I, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-277">SIO\_GET\_EXTENSION\_FUNCTION\_POINTER (opcode setting: O, I, T==1)</span></span>

<span data-ttu-id="a763d-278">Recupera un puntero a la función de extensión especificada admitida por el proveedor de servicios asociado.</span><span class="sxs-lookup"><span data-stu-id="a763d-278">Retrieve a pointer to the specified extension function supported by the associated service provider.</span></span> <span data-ttu-id="a763d-279">El búfer de entrada contiene un identificador único global (**GUID**) cuyo valor identifica la función de extensión en cuestión.</span><span class="sxs-lookup"><span data-stu-id="a763d-279">The input buffer contains a globally unique identifier (**GUID**) whose value identifies the extension function in question.</span></span> <span data-ttu-id="a763d-280">El puntero a la función deseada se devuelve en el búfer de salida.</span><span class="sxs-lookup"><span data-stu-id="a763d-280">The pointer to the desired function is returned in the output buffer.</span></span> <span data-ttu-id="a763d-281">Los identificadores de función de extensión los establecen los proveedores de proveedores de servicios y deben incluirse en la documentación del proveedor que describe las capacidades y la semántica de la función de extensión.</span><span class="sxs-lookup"><span data-stu-id="a763d-281">Extension function identifiers are established by service provider vendors and should be included in vendor documentation that describes extension function capabilities and semantics.</span></span>

<span data-ttu-id="a763d-282">Los valores GUID de las funciones de extensión admitidos por el proveedor de servicios TCP/IP de Windows se definen en el archivo de encabezado *mswsock. h* .</span><span class="sxs-lookup"><span data-stu-id="a763d-282">The GUID values for extension functions supported by the Windows TCP/IP service provider are defined in the *Mswsock.h* header file.</span></span> <span data-ttu-id="a763d-283">El valor posible para estos GUID es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="a763d-283">The possible value for these GUIDs are as follows:</span></span>

| <span data-ttu-id="a763d-284">Término</span><span class="sxs-lookup"><span data-stu-id="a763d-284">Term</span></span>                                                                                                                | <span data-ttu-id="a763d-285">Descripción</span><span class="sxs-lookup"><span data-stu-id="a763d-285">Description</span></span>                                                                               |
|-|-|
| <span data-ttu-id="a763d-286"><span id="WSAID_ACCEPTEX"></span><span id="wsaid_acceptex"></span>WSAID \_ ACCEPTEX</span><span class="sxs-lookup"><span data-stu-id="a763d-286"><span id="WSAID_ACCEPTEX"></span><span id="wsaid_acceptex"></span>WSAID\_ACCEPTEX</span></span><br/>                                     | <span data-ttu-id="a763d-287">La función de extensión [**AcceptEx**](/windows/win32/api/mswsock/nf-mswsock-acceptex) .</span><span class="sxs-lookup"><span data-stu-id="a763d-287">The [**AcceptEx**](/windows/win32/api/mswsock/nf-mswsock-acceptex) extension function.</span></span><br/>                         |
| <span data-ttu-id="a763d-288"><span id="WSAID_CONNECTEX"></span><span id="wsaid_connectex"></span>WSAID \_ CONNECTEX</span><span class="sxs-lookup"><span data-stu-id="a763d-288"><span id="WSAID_CONNECTEX"></span><span id="wsaid_connectex"></span>WSAID\_CONNECTEX</span></span><br/>                                  | <span data-ttu-id="a763d-289">La función de extensión [**ConnectEx**](/windows/desktop/api/Mswsock/nc-mswsock-lpfn_connectex) .</span><span class="sxs-lookup"><span data-stu-id="a763d-289">The [**ConnectEx**](/windows/desktop/api/Mswsock/nc-mswsock-lpfn_connectex) extension function.</span></span> <br/>                      |
| <span data-ttu-id="a763d-290"><span id="WSAID_DISCONNECTEX"></span><span id="wsaid_disconnectex"></span>WSAID \_ DISCONNECTEX</span><span class="sxs-lookup"><span data-stu-id="a763d-290"><span id="WSAID_DISCONNECTEX"></span><span id="wsaid_disconnectex"></span>WSAID\_DISCONNECTEX</span></span><br/>                         | <span data-ttu-id="a763d-291">La función de extensión [**DisconnectEx**](/previous-versions/windows/desktop/legacy/ms737757(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-291">The [**DisconnectEx**](/previous-versions/windows/desktop/legacy/ms737757(v=vs.85)) extension function.</span></span> <br/>                |
| <span data-ttu-id="a763d-292"><span id="WSAID_GETACCEPTEXSOCKADDRS"></span><span id="wsaid_getacceptexsockaddrs"></span>WSAID \_ GETACCEPTEXSOCKADDRS</span><span class="sxs-lookup"><span data-stu-id="a763d-292"><span id="WSAID_GETACCEPTEXSOCKADDRS"></span><span id="wsaid_getacceptexsockaddrs"></span>WSAID\_GETACCEPTEXSOCKADDRS</span></span><br/> | <span data-ttu-id="a763d-293">La función de extensión [**GetAcceptExSockaddrs**](/windows/win32/api/mswsock/nf-mswsock-getacceptexsockaddrs) .</span><span class="sxs-lookup"><span data-stu-id="a763d-293">The [**GetAcceptExSockaddrs**](/windows/win32/api/mswsock/nf-mswsock-getacceptexsockaddrs) extension function.</span></span><br/> |
| <span data-ttu-id="a763d-294"><span id="WSAID_TRANSMITFILE"></span><span id="wsaid_transmitfile"></span>WSAID \_ TRANSMITFILE</span><span class="sxs-lookup"><span data-stu-id="a763d-294"><span id="WSAID_TRANSMITFILE"></span><span id="wsaid_transmitfile"></span>WSAID\_TRANSMITFILE</span></span><br/>                         | <span data-ttu-id="a763d-295">La función de extensión [**TransmitFile**](/windows/win32/api/mswsock/nf-mswsock-transmitfile) .</span><span class="sxs-lookup"><span data-stu-id="a763d-295">The [**TransmitFile**](/windows/win32/api/mswsock/nf-mswsock-transmitfile) extension function.</span></span><br/>                 |
| <span data-ttu-id="a763d-296"><span id="WSAID_TRANSMITPACKETS"></span><span id="wsaid_transmitpackets"></span>WSAID \_ TRANSMITPACKETS</span><span class="sxs-lookup"><span data-stu-id="a763d-296"><span id="WSAID_TRANSMITPACKETS"></span><span id="wsaid_transmitpackets"></span>WSAID\_TRANSMITPACKETS</span></span><br/>                | <span data-ttu-id="a763d-297">La función de extensión [**TransmitPackets**](/windows/desktop/api/Mswsock/nc-mswsock-lpfn_transmitpackets) .</span><span class="sxs-lookup"><span data-stu-id="a763d-297">The [**TransmitPackets**](/windows/desktop/api/Mswsock/nc-mswsock-lpfn_transmitpackets) extension function.</span></span> <br/>          |
| <span data-ttu-id="a763d-298"><span id="WSAID_WSARECVMSG"></span><span id="wsaid_wsarecvmsg"></span>WSAID \_ WSARECVMSG</span><span class="sxs-lookup"><span data-stu-id="a763d-298"><span id="WSAID_WSARECVMSG"></span><span id="wsaid_wsarecvmsg"></span>WSAID\_WSARECVMSG</span></span><br/>                               | <span data-ttu-id="a763d-299">La función de extensión [**LPFN_WSARECVMSG (WSARECVMSG)**](/windows/win32/api/mswsock/nc-mswsock-lpfn_wsarecvmsg) .</span><span class="sxs-lookup"><span data-stu-id="a763d-299">The [**LPFN_WSARECVMSG (WSARecvMsg)**](/windows/win32/api/mswsock/nc-mswsock-lpfn_wsarecvmsg) extension function.</span></span><br/>                     |
| <span data-ttu-id="a763d-300"><span id="WSAID_WSASENDMSG"></span><span id="wsaid_wsasendmsg"></span>WSAID \_ WSASENDMSG</span><span class="sxs-lookup"><span data-stu-id="a763d-300"><span id="WSAID_WSASENDMSG"></span><span id="wsaid_wsasendmsg"></span>WSAID\_WSASENDMSG</span></span><br/>                               | <span data-ttu-id="a763d-301">La función de extensión [**WSASendMsg**](/windows/desktop/api/winsock2/nf-winsock2-wsasendmsg) .</span><span class="sxs-lookup"><span data-stu-id="a763d-301">The [**WSASendMsg**](/windows/desktop/api/winsock2/nf-winsock2-wsasendmsg) extension function.</span></span> <br/>                      |

### <a name="sio_get_group_qos-opcode-setting-o-i-t1"></a><span data-ttu-id="a763d-302">SIO \_ obtener \_ QoS de grupo \_ (configuración de OpCode: O, I, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-302">SIO\_GET\_GROUP\_QOS (opcode setting: O, I, T==1)</span></span>

<span data-ttu-id="a763d-303">Reservado para uso futuro con Sockets.</span><span class="sxs-lookup"><span data-stu-id="a763d-303">Reserved for future use with sockets.</span></span>

<span data-ttu-id="a763d-304">Recupera la estructura de [**QoS**](/windows/win32/api/winsock2/ns-winsock2-qos) asociada al grupo de sockets al que pertenece este socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-304">Retrieve the [**QOS**](/windows/win32/api/winsock2/ns-winsock2-qos) structure associated with the socket group to which this socket belongs.</span></span> <span data-ttu-id="a763d-305">El búfer de entrada es opcional.</span><span class="sxs-lookup"><span data-stu-id="a763d-305">The input buffer is optional.</span></span> <span data-ttu-id="a763d-306">Algunos protocolos (por ejemplo, RSVP) permiten usar el búfer de entrada para calificar una solicitud de calidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="a763d-306">Some protocols (for example, RSVP) allow the input buffer to be used to qualify a quality of service request.</span></span> <span data-ttu-id="a763d-307">La estructura de **QoS** se copiará en el búfer de salida.</span><span class="sxs-lookup"><span data-stu-id="a763d-307">The **QOS** structure will be copied into the output buffer.</span></span> <span data-ttu-id="a763d-308">Si este socket no pertenece a un grupo de sockets adecuado, los miembros **SendingFlowspec** y **ReceivingFlowspec** de la estructura de **QoS** devuelta se establecen en **null**.</span><span class="sxs-lookup"><span data-stu-id="a763d-308">If this socket does not belong to an appropriate socket group, the **SendingFlowspec** and **ReceivingFlowspec** members of the returned **QOS** structure are set to **NULL**.</span></span> <span data-ttu-id="a763d-309">El código de error [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) se indica para los proveedores de servicios que no admiten la calidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="a763d-309">The [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) error code is indicated for service providers that do not support quality of service.</span></span>

### <a name="sio_get_interface_list-opcode-setting-o-t0"></a><span data-ttu-id="a763d-310">SIO \_ Get \_ interface \_ List (configuración de OpCode: O, T = = 0)</span><span class="sxs-lookup"><span data-stu-id="a763d-310">SIO\_GET\_INTERFACE\_LIST (opcode setting: O, T==0)</span></span>

<span data-ttu-id="a763d-311">Devuelve una lista de interfaces IP configuradas y sus parámetros como una matriz de estructuras de [**\_ información de interfaz**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-interface_info) .</span><span class="sxs-lookup"><span data-stu-id="a763d-311">Returns a list of configured IP interfaces and their parameters as an array of [**INTERFACE\_INFO**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-interface_info) structures.</span></span>

> [!Note]  
> <span data-ttu-id="a763d-312">La compatibilidad de este comando es obligatoria para los proveedores de servicios TCP/IP compatibles con Windows Sockets 2.</span><span class="sxs-lookup"><span data-stu-id="a763d-312">Support of this command is mandatory for Windows Sockets 2-compliant TCP/IP service providers.</span></span>

<span data-ttu-id="a763d-313">El parámetro *lpvOutBuffer* apunta al búfer en el que se va a almacenar la información sobre las interfaces como una matriz de estructuras de [**\_ información de interfaz**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-interface_info) para las direcciones IP de unidifusión en las interfaces.</span><span class="sxs-lookup"><span data-stu-id="a763d-313">The *lpvOutBuffer* parameter points to the buffer in which to store the information about interfaces as an array of [**INTERFACE\_INFO**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-interface_info) structures for unicast IP addresses on the interfaces.</span></span> <span data-ttu-id="a763d-314">El parámetro *cbOutBuffer* especifica la longitud del búfer de salida.</span><span class="sxs-lookup"><span data-stu-id="a763d-314">The *cbOutBuffer* parameter specifies the length of the output buffer.</span></span> <span data-ttu-id="a763d-315">El número de interfaces devueltas (el número de estructuras devueltas en el búfer señalado por el parámetro *lpvOutBuffer* ) se puede determinar en función de la longitud real del búfer de salida devuelto en el parámetro *lpcbBytesReturned* .</span><span class="sxs-lookup"><span data-stu-id="a763d-315">The number of interfaces returned (number of structures returned in the buffer pointed to by *lpvOutBuffer* parameter) can be determined based on the actual length of the output buffer returned in *lpcbBytesReturned* parameter.</span></span>

<span data-ttu-id="a763d-316">Si se llama a la función [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) con la lista de interfaces de la obtención de SiO y el miembro de nivel del parámetro socket *s* no está definido como **IPPROTO \_ IP**, se devuelve **WSAEINVAL** . **\_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="a763d-316">If the [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function is called with **SIO\_GET\_INTERFACE\_LIST** and the level member of the socket *s* parameter is not defined as **IPPROTO\_IP**, **WSAEINVAL** is returned.</span></span> <span data-ttu-id="a763d-317">Una llamada a la función **WSAIoctl** con **SiO \_ Get \_ interface \_ List** devuelve **WSAEFAULT** si el parámetro *cbOutBuffer* que especifica la longitud del búfer de salida es demasiado pequeño y recibe la lista de interfaces configuradas.</span><span class="sxs-lookup"><span data-stu-id="a763d-317">A call to the **WSAIoctl** function with **SIO\_GET\_INTERFACE\_LIST** returns **WSAEFAULT** if the *cbOutBuffer* parameter that specifies the length of the output buffer is too small ro receive the list of configured interfaces.</span></span>

<span data-ttu-id="a763d-318">**SiO \_ GET \_ interface \_ List** es compatible con Windows Me/98 y Windows NT 4,0 con SP4 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-318">**SIO\_GET\_INTERFACE\_LIST** is supported on Windows Me/98 and Windows NT 4.0 with SP4 and later.</span></span>

### <a name="sio_get_interface_list_ex-opcode-setting-o-t0"></a><span data-ttu-id="a763d-319">SIO \_ Get \_ interface \_ List \_ ex (configuración de OpCode: O, T = = 0)</span><span class="sxs-lookup"><span data-stu-id="a763d-319">SIO\_GET\_INTERFACE\_LIST\_EX (opcode setting: O, T==0)</span></span>

<span data-ttu-id="a763d-320">Reservado para uso futuro con Sockets.</span><span class="sxs-lookup"><span data-stu-id="a763d-320">Reserved for future use with sockets.</span></span>

<span data-ttu-id="a763d-321">Devuelve una lista de interfaces IP configuradas y sus parámetros como una matriz de estructuras de [**información de interfaz \_ \_ ex**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-interface_info_ex) .</span><span class="sxs-lookup"><span data-stu-id="a763d-321">Returns a list of configured IP interfaces and their parameters as an array of [**INTERFACE\_INFO\_EX**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-interface_info_ex) structures.</span></span>

<span data-ttu-id="a763d-322">El parámetro *lpvOutBuffer* apunta al búfer en el que se va a almacenar la información sobre las interfaces como una matriz de estructuras de [**información de interfaz \_ \_ ex**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-interface_info_ex) para las direcciones IP de unidifusión en la interfaz.</span><span class="sxs-lookup"><span data-stu-id="a763d-322">The *lpvOutBuffer* parameter points to the buffer in which to store the information about interfaces as an array of [**INTERFACE\_INFO\_EX**](/windows/desktop/api/Ws2ipdef/ns-ws2ipdef-interface_info_ex) structures for unicast IP addresses on the interface.</span></span> <span data-ttu-id="a763d-323">El parámetro *cbOutBuffer* especifica la longitud del búfer de salida.</span><span class="sxs-lookup"><span data-stu-id="a763d-323">The *cbOutBuffer* parameter specifies the length of the output buffer.</span></span> <span data-ttu-id="a763d-324">El número de interfaces devueltas (el número de estructuras devueltas en *lpvOutBuffer*) se puede determinar en función de la longitud real del búfer de salida devuelto en el parámetro *lpcbBytesReturned* .</span><span class="sxs-lookup"><span data-stu-id="a763d-324">The number of interfaces returned (number of structures returned in *lpvOutBuffer*) can be determined based on the actual length of the output buffer returned in *lpcbBytesReturned* parameter.</span></span>

<span data-ttu-id="a763d-325">**SiO \_ GET \_ interface \_ List \_ ex** no se admite actualmente en Windows.</span><span class="sxs-lookup"><span data-stu-id="a763d-325">**SIO\_GET\_INTERFACE\_LIST\_EX** is not currently supported on Windows.</span></span>

### <a name="sio_get_qos-opcode-setting-o-t1"></a><span data-ttu-id="a763d-326">SIO \_ obtener \_ QoS (configuración de OpCode: O, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-326">SIO\_GET\_QOS (opcode setting: O, T==1)</span></span>

<span data-ttu-id="a763d-327">Reservado para uso futuro con Sockets.</span><span class="sxs-lookup"><span data-stu-id="a763d-327">Reserved for future use with sockets.</span></span> <span data-ttu-id="a763d-328">Recupera la estructura de [**QoS**](/windows/win32/api/winsock2/ns-winsock2-qos) asociada al socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-328">Retrieve the [**QOS**](/windows/win32/api/winsock2/ns-winsock2-qos) structure associated with the socket.</span></span> <span data-ttu-id="a763d-329">El búfer de entrada es opcional.</span><span class="sxs-lookup"><span data-stu-id="a763d-329">The input buffer is optional.</span></span> <span data-ttu-id="a763d-330">Algunos protocolos (por ejemplo, RSVP) permiten usar el búfer de entrada para calificar una solicitud de calidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="a763d-330">Some protocols (for example, RSVP) allow the input buffer to be used to qualify a quality of service request.</span></span> <span data-ttu-id="a763d-331">La estructura de **QoS** se copiará en el búfer de salida.</span><span class="sxs-lookup"><span data-stu-id="a763d-331">The **QOS** structure will be copied into the output buffer.</span></span> <span data-ttu-id="a763d-332">El tamaño del búfer de salida debe ser lo suficientemente grande como para poder contener la estructura completa de **QoS** .</span><span class="sxs-lookup"><span data-stu-id="a763d-332">The output buffer must be sized large enough to be able to contain the full **QOS** structure.</span></span> <span data-ttu-id="a763d-333">El código de error [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) se indica para los proveedores de servicios que no admiten la calidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="a763d-333">The [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) error code is indicated for service providers that do not support quality of service.</span></span>

<span data-ttu-id="a763d-334">Es posible que un remitente no llame a la operación **SiO \_ Get \_ QoS** hasta que el socket esté conectado.</span><span class="sxs-lookup"><span data-stu-id="a763d-334">A sender may not call **SIO\_GET\_QOS** until the socket is connected.</span></span>

<span data-ttu-id="a763d-335">Un receptor puede llamar a **SiO \_ obtener \_ QoS** en cuanto está enlazado.</span><span class="sxs-lookup"><span data-stu-id="a763d-335">A receiver may call **SIO\_GET\_QOS** as soon as it is bound.</span></span>

### <a name="sio_ideal_send_backlog_change-opcode-setting-v-t0"></a><span data-ttu-id="a763d-336">SIO \_ el \_ cambio de trabajo pendiente de envío ideal \_ \_ (configuración de OpCode: V, T = = 0)</span><span class="sxs-lookup"><span data-stu-id="a763d-336">SIO\_IDEAL\_SEND\_BACKLOG\_CHANGE (opcode setting: V, T==0)</span></span>

<span data-ttu-id="a763d-337">Notifica a una aplicación cuando cambia el valor de trabajo pendiente de envío (ISB) ideal para la conexión subyacente.</span><span class="sxs-lookup"><span data-stu-id="a763d-337">Notifies an application when the ideal send backlog (ISB) value changes for the underlying connection.</span></span>

<span data-ttu-id="a763d-338">Al enviar datos a través de una conexión TCP mediante Windows Sockets, es importante mantener una cantidad suficiente de datos pendientes (enviados pero no confirmados todavía) en TCP para lograr el máximo rendimiento.</span><span class="sxs-lookup"><span data-stu-id="a763d-338">When sending data over a TCP connection using Windows sockets, it is important to keep a sufficient amount of data outstanding (sent but not acknowledged yet) in TCP in order to achieve the highest throughput.</span></span> <span data-ttu-id="a763d-339">El valor ideal para la cantidad de datos pendientes para lograr el mejor rendimiento para la conexión TCP se denomina el tamaño de trabajo pendiente de envío (ISB) ideal.</span><span class="sxs-lookup"><span data-stu-id="a763d-339">The ideal value for the amount of data outstanding to achieve the best throughput for the TCP connection is called the ideal send backlog (ISB) size.</span></span> <span data-ttu-id="a763d-340">El valor de ISB es una función del producto de retraso de ancho de banda de la conexión TCP y la ventana de recepción anunciada del receptor (y, en parte, de la cantidad de congestión de la red).</span><span class="sxs-lookup"><span data-stu-id="a763d-340">The ISB value is a function of the bandwidth-delay product of the TCP connection and the receiver's advertised receive window (and partly the amount of congestion in the network).</span></span>

<span data-ttu-id="a763d-341">El valor de ISB por conexión está disponible en la implementación del protocolo TCP en Windows Server 2008, Windows Vista con SP1 y versiones posteriores del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="a763d-341">The ISB value per connection is available from the TCP protocol implementation in Windows Server 2008, Windows Vista with SP1, and later versions of the operating system.</span></span> <span data-ttu-id="a763d-342">La aplicación puede usar el ioctl de **\_ \_ \_ \_ cambio de trabajo pendiente de envío ideal de SiO** para recibir una notificación cuando el valor de ISB Cambie dinámicamente para una conexión.</span><span class="sxs-lookup"><span data-stu-id="a763d-342">The **SIO\_IDEAL\_SEND\_BACKLOG\_CHANGE** IOCTL can be used by an application to get notification when the ISB value changes dynamically for a connection.</span></span>

<span data-ttu-id="a763d-343">Para obtener información más detallada, consulte la referencia de [**\_ \_ \_ \_ cambio del trabajo pendiente de envío de SiO**](/previous-versions/windows/desktop/legacy/bb736548(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-343">For more detailed information, see the [**SIO\_IDEAL\_SEND\_BACKLOG\_CHANGE**](/previous-versions/windows/desktop/legacy/bb736548(v=vs.85)) reference.</span></span>

<span data-ttu-id="a763d-344">[**SiO \_ Se admite el \_ \_ \_ cambio de trabajo pendiente de envío ideal**](/previous-versions/windows/desktop/legacy/bb736548(v=vs.85)) en Windows Server 2008, Windows Vista con SP1 y versiones posteriores del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="a763d-344">[**SIO\_IDEAL\_SEND\_BACKLOG\_CHANGE**](/previous-versions/windows/desktop/legacy/bb736548(v=vs.85)) is supported on Windows Server 2008, Windows Vista with SP1, and later versions of the operating system.</span></span>

### <a name="sio_ideal_send_backlog_query-opcode-setting-o-t0"></a><span data-ttu-id="a763d-345">SIO \_ la \_ \_ consulta de trabajo pendiente de envío ideal \_ (configuración de OpCode: O, T = = 0)</span><span class="sxs-lookup"><span data-stu-id="a763d-345">SIO\_IDEAL\_SEND\_BACKLOG\_QUERY (opcode setting: O, T==0)</span></span>

<span data-ttu-id="a763d-346">Recupera el valor de registro de envío (ISB) ideal para la conexión subyacente.</span><span class="sxs-lookup"><span data-stu-id="a763d-346">Retrieves the ideal send backlog (ISB) value for the underlying connection.</span></span>

<span data-ttu-id="a763d-347">Al enviar datos a través de una conexión TCP mediante Windows Sockets, es importante mantener una cantidad suficiente de datos pendientes (enviados pero no confirmados todavía) en TCP para lograr el máximo rendimiento.</span><span class="sxs-lookup"><span data-stu-id="a763d-347">When sending data over a TCP connection using Windows sockets, it is important to keep a sufficient amount of data outstanding (sent but not acknowledged yet) in TCP in order to achieve the highest throughput.</span></span> <span data-ttu-id="a763d-348">El valor ideal para la cantidad de datos pendientes para lograr el mejor rendimiento para la conexión TCP se denomina el tamaño de trabajo pendiente de envío (ISB) ideal.</span><span class="sxs-lookup"><span data-stu-id="a763d-348">The ideal value for the amount of data outstanding to achieve the best throughput for the TCP connection is called the ideal send backlog (ISB) size.</span></span> <span data-ttu-id="a763d-349">El valor de ISB es una función del producto de retraso de ancho de banda de la conexión TCP y la ventana de recepción anunciada del receptor (y, en parte, de la cantidad de congestión de la red).</span><span class="sxs-lookup"><span data-stu-id="a763d-349">The ISB value is a function of the bandwidth-delay product of the TCP connection and the receiver's advertised receive window (and partly the amount of congestion in the network).</span></span>

<span data-ttu-id="a763d-350">El valor de ISB por conexión está disponible en la implementación del protocolo TCP en Windows Server 2008 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-350">The ISB value per connection is available from the TCP protocol implementation in Windows Server 2008 and later.</span></span> <span data-ttu-id="a763d-351">Una aplicación puede usar el ioctl de **\_ \_ \_ \_ consulta de trabajo pendiente de envío ideal de SiO** para consultar el valor de ISB para una conexión.</span><span class="sxs-lookup"><span data-stu-id="a763d-351">The **SIO\_IDEAL\_SEND\_BACKLOG\_QUERY** IOCTL can be used by an application to query the ISB value for a connection.</span></span>

<span data-ttu-id="a763d-352">Para obtener información más detallada, consulte la referencia de [**\_ consulta de envío de \_ \_ trabajo pendiente \_ de la opción SiO ideal**](/previous-versions/windows/desktop/legacy/bb736549(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-352">For more detailed information, see the [**SIO\_IDEAL\_SEND\_BACKLOG\_QUERY**](/previous-versions/windows/desktop/legacy/bb736549(v=vs.85)) reference.</span></span>

<span data-ttu-id="a763d-353">[**SiO \_ La \_ \_ \_ consulta de trabajo pendiente de envío ideal**](/previous-versions/windows/desktop/legacy/bb736549(v=vs.85)) es compatible con Windows Server 2008, Windows Vista con SP1 y versiones posteriores del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="a763d-353">[**SIO\_IDEAL\_SEND\_BACKLOG\_QUERY**](/previous-versions/windows/desktop/legacy/bb736549(v=vs.85)) is supported on Windows Server 2008, Windows Vista with SP1, and later versions of the operating system.</span></span>

### <a name="sio_keepalive_vals-opcode-setting-i-t3"></a><span data-ttu-id="a763d-354">SIO \_ KEEPALIVE \_ Vals (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-354">SIO\_KEEPALIVE\_VALS (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-355">Habilita o deshabilita el valor por conexión de la opción **Keep-Alive** de TCP, que especifica el tiempo de espera y el intervalo de mantenimiento de conexiones TCP.</span><span class="sxs-lookup"><span data-stu-id="a763d-355">Enables or disables the per-connection setting of the TCP **keep-alive** option which specifies the TCP keep-alive timeout and interval.</span></span> <span data-ttu-id="a763d-356">Para obtener más información acerca de la opción Keep-Alive, consulte la sección 4.2.3.6 sobre los *requisitos de los hosts de Internet: las capas de comunicación* especificadas en RFC 1122 están disponibles en el [sitio web de IETF](https://www.ietf.org/rfc/rfc1122.txt).</span><span class="sxs-lookup"><span data-stu-id="a763d-356">For more information on the keep-alive option, see section 4.2.3.6 on the *Requirements for Internet Hosts—Communication Layers* specified in RFC 1122 available at the [IETF website](https://www.ietf.org/rfc/rfc1122.txt).</span></span> <span data-ttu-id="a763d-357">(Este recurso solo está disponible en inglés).</span><span class="sxs-lookup"><span data-stu-id="a763d-357">(This resource may only be available in English.)</span></span>

<span data-ttu-id="a763d-358">**SiO \_ KEEPALIVE \_ vals** se puede usar para habilitar o deshabilitar sondeos Keep-Alive y establecer el intervalo y el tiempo de espera de mantenimiento de conexión.</span><span class="sxs-lookup"><span data-stu-id="a763d-358">**SIO\_KEEPALIVE\_VALS** can be used to enable or disable keep-alive probes and set the keep-alive timeout and interval.</span></span> <span data-ttu-id="a763d-359">El tiempo de espera de Keep-Alive especifica el tiempo de espera, en milisegundos, sin actividad hasta que se envía el primer paquete Keep-Alive.</span><span class="sxs-lookup"><span data-stu-id="a763d-359">The keep-alive timeout specifies the timeout, in milliseconds, with no activity until the first keep-alive packet is sent.</span></span> <span data-ttu-id="a763d-360">El intervalo Keep-Alive especifica el intervalo, en milisegundos, entre el momento en que se envían los paquetes Keep-Alive sucesivos Si no se recibe ninguna confirmación.</span><span class="sxs-lookup"><span data-stu-id="a763d-360">The keep-alive interval specifies the interval, in milliseconds, between when successive keep-alive packets are sent if no acknowledgement is received.</span></span>

<span data-ttu-id="a763d-361">La opción [**para \_ KEEPALIVE**](so-keepalive.md) , que es una de las [Opciones de socket de \_ socket sol](sol-socket-socket-options.md), también puede usarse para habilitar o deshabilitar TCP Keep-Alive en una conexión, así como para consultar el estado actual de esta opción.</span><span class="sxs-lookup"><span data-stu-id="a763d-361">The [**SO\_KEEPALIVE**](so-keepalive.md) option, which is one of the [SOL\_SOCKET Socket Options](sol-socket-socket-options.md), can also be used to enable or disable the TCP keep-alive on a connection, as well as query the current state of this option.</span></span> <span data-ttu-id="a763d-362">Para consultar si TCP Keep-Alive está habilitado en un socket, se puede llamar a la función [**getsockopt**](/windows/desktop/api/winsock/nf-winsock-getsockopt) con la opción **para \_ KEEPALIVE** .</span><span class="sxs-lookup"><span data-stu-id="a763d-362">To query whether TCP keep-alive is enabled on a socket, the [**getsockopt**](/windows/desktop/api/winsock/nf-winsock-getsockopt) function can be called with the **SO\_KEEPALIVE** option.</span></span> <span data-ttu-id="a763d-363">Para habilitar o deshabilitar TCP Keep-Alive, se puede llamar a [**la función de llamada con la opción**](/windows/desktop/api/winsock/nf-winsock-setsockopt) [**\_ KEEPALIVE**](so-keepalive.md) .</span><span class="sxs-lookup"><span data-stu-id="a763d-363">To enable or disable TCP keep-alive, the [**setsockopt**](/windows/desktop/api/winsock/nf-winsock-setsockopt) function can be called with the [**SO\_KEEPALIVE**](so-keepalive.md) option.</span></span> <span data-ttu-id="a763d-364">Si TCP Keep-Alive está habilitado con la opción **\_ KeepAlive**, se usará la configuración predeterminada de TCP para el tiempo de espera de mantenimiento de conexión y el intervalo, a menos que estos valores se hayan cambiado mediante **SiO \_ KEEPALIVE \_ vals**.</span><span class="sxs-lookup"><span data-stu-id="a763d-364">If TCP keep-alive is enabled with **SO\_KEEPALIVE**, then the default TCP settings are used for keep-alive timeout and interval unless these values have been changed using **SIO\_KEEPALIVE\_VALS**.</span></span>

<span data-ttu-id="a763d-365">Para obtener información más detallada, consulte la referencia de [**SiO \_ KEEPALIVE \_ vals**](/previous-versions/windows/desktop/legacy/dd877220(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-365">For more detailed information, see the [**SIO\_KEEPALIVE\_VALS**](/previous-versions/windows/desktop/legacy/dd877220(v=vs.85)) reference.</span></span> <span data-ttu-id="a763d-366">**SiO \_ KEEPALIVE \_ vals** es compatible con Windows 2000 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-366">**SIO\_KEEPALIVE\_VALS** is supported on Windows 2000 and later.</span></span>

### <a name="sio_loopback_fast_path-opcode-setting-i-t3"></a><span data-ttu-id="a763d-367">\_Ruta de acceso rápido de bucle invertido de SiO \_ \_ (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-367">SIO\_LOOPBACK\_FAST\_PATH (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-368">Configura un socket TCP para una menor latencia y operaciones más rápidas en la interfaz de bucle invertido.</span><span class="sxs-lookup"><span data-stu-id="a763d-368">Configures a TCP socket for lower latency and faster operations on the loopback interface.</span></span> <span data-ttu-id="a763d-369">Este IOCTL solicita que la pila TCP/IP use una ruta de acceso rápida especial para las operaciones de bucle invertido en este socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-369">This IOCTL requests that the TCP/IP stack uses a special fast path for loopback operations on this socket.</span></span> <span data-ttu-id="a763d-370">La [**\_ ruta de \_ \_ acceso rápido de bucle invertido de SiO**](/previous-versions/windows/desktop/legacy/jj841212(v=vs.85)) solo se puede usar con Sockets TCP.</span><span class="sxs-lookup"><span data-stu-id="a763d-370">The [**SIO\_LOOPBACK\_FAST\_PATH**](/previous-versions/windows/desktop/legacy/jj841212(v=vs.85)) IOCTL can be used only with TCP sockets.</span></span> <span data-ttu-id="a763d-371">Este IOCTL debe usarse en ambos lados de la sesión de bucle invertido.</span><span class="sxs-lookup"><span data-stu-id="a763d-371">This IOCTL must be used on both sides of the loopback session.</span></span> <span data-ttu-id="a763d-372">La ruta de acceso rápido de bucle invertido TCP se admite mediante la interfaz de bucle invertido IPv4 o IPv6.</span><span class="sxs-lookup"><span data-stu-id="a763d-372">The TCP loopback fast path is supported using either the IPv4 or IPv6 loopback interface.</span></span> <span data-ttu-id="a763d-373">De forma predeterminada, el valor de la **\_ ruta de \_ \_ acceso rápido de los bucles de SiO** es</span><span class="sxs-lookup"><span data-stu-id="a763d-373">By default, **SIO\_LOOPBACK\_FAST\_PATH** is disabled.</span></span>

<span data-ttu-id="a763d-374">Para obtener información más detallada, consulte la referencia de la [**\_ ruta de \_ \_ acceso rápida de los bucles de SiO**](/previous-versions/windows/desktop/legacy/jj841212(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-374">For more detailed information, see the [**SIO\_LOOPBACK\_FAST\_PATH**](/previous-versions/windows/desktop/legacy/jj841212(v=vs.85)) reference.</span></span> <span data-ttu-id="a763d-375">**SiO \_ La \_ \_ ruta de acceso rápido de bucle invertido** es compatible con Windows 8, Windows Server 2012 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-375">**SIO\_LOOPBACK\_FAST\_PATH** is supported on Windows 8, Windows Server 2012, and later.</span></span>

### <a name="sio_multipoint_loopback-opcode-setting-v-t1"></a><span data-ttu-id="a763d-376">SIO \_ Multipoint \_ loopback (configuración de OpCode: V, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-376">SIO\_MULTIPOINT\_LOOPBACK (opcode setting: V, T==1)</span></span>

<span data-ttu-id="a763d-377">Controla si los datos enviados por una aplicación en el equipo local (no necesariamente por el mismo socket) en una sesión de multidifusión se recibirán mediante un socket unido al grupo de destino de multidifusión en la interfaz de bucle invertido.</span><span class="sxs-lookup"><span data-stu-id="a763d-377">Controls whether data sent by an application on the local computer (not necessarily by the same socket) in a multicast session will be received by a socket joined to the multicast destination group on the loopback interface.</span></span> <span data-ttu-id="a763d-378">Un valor de **true** hace que los datos de multidifusión enviados por una aplicación en el equipo local se entreguen a un socket de escucha en la interfaz de bucle invertido.</span><span class="sxs-lookup"><span data-stu-id="a763d-378">A value of **TRUE** causes multicast data sent by an application on the local computer to be delivered to a listening socket on the loopback interface.</span></span> <span data-ttu-id="a763d-379">Un valor de **false** evita que los datos de multidifusión enviados por una aplicación en el equipo local se entreguen a un socket de escucha en la interfaz de bucle invertido.</span><span class="sxs-lookup"><span data-stu-id="a763d-379">A value of **FALSE** prevents multicast data sent by an application on the local computer from being delivered to a listening socket on the loopback interface.</span></span> <span data-ttu-id="a763d-380">De forma predeterminada, el **\_ \_ bucle invertido de Multipoint** está habilitado.</span><span class="sxs-lookup"><span data-stu-id="a763d-380">By default, **SIO\_MULTIPOINT\_LOOPBACK** is enabled.</span></span>

### <a name="sio_multicast_scope-opcode-setting-i-t1"></a><span data-ttu-id="a763d-381">El \_ ámbito de multidifusión de SiO \_ (configuración de OpCode: I, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-381">SIO\_MULTICAST\_SCOPE (opcode setting: I, T==1)</span></span>

<span data-ttu-id="a763d-382">Especifica el ámbito en el que se realizarán las transmisiones de multidifusión.</span><span class="sxs-lookup"><span data-stu-id="a763d-382">Specifies the scope over which multicast transmissions will occur.</span></span> <span data-ttu-id="a763d-383">El ámbito se define como el número de segmentos de red enrutados que se van a cubrir.</span><span class="sxs-lookup"><span data-stu-id="a763d-383">Scope is defined as the number of routed network segments to be covered.</span></span> <span data-ttu-id="a763d-384">Un ámbito de cero indicaría que la transmisión por multidifusión no se colocaría en la conexión, pero podría diseminarse a través de sockets dentro del host local.</span><span class="sxs-lookup"><span data-stu-id="a763d-384">A scope of zero would indicate that the multicast transmission would not be placed on the wire but could be disseminated across sockets within the local host.</span></span> <span data-ttu-id="a763d-385">Un valor de ámbito de uno (valor predeterminado) indica que la transmisión se colocará en la conexión, pero no cruzará ningún enrutador.</span><span class="sxs-lookup"><span data-stu-id="a763d-385">A scope value of one (the default) indicates that the transmission will be placed on the wire, but will not cross any routers.</span></span> <span data-ttu-id="a763d-386">Los valores de ámbito más altos determinan el número de enrutadores que se pueden cruzar.</span><span class="sxs-lookup"><span data-stu-id="a763d-386">Higher scope values determine the number of routers that can be crossed.</span></span> <span data-ttu-id="a763d-387">Tenga en cuenta que esto corresponde al parámetro Time-to-Live (TTL) de la multidifusión IP.</span><span class="sxs-lookup"><span data-stu-id="a763d-387">Note that this corresponds to the time-to-live (TTL) parameter in IP multicasting.</span></span> <span data-ttu-id="a763d-388">De forma predeterminada, el ámbito es 1.</span><span class="sxs-lookup"><span data-stu-id="a763d-388">By default, scope is 1.</span></span>

### <a name="sio_query_rss_processor_info-opcode-setting-o-t1"></a><span data-ttu-id="a763d-389">\_Información del procesador de RSS de consulta SiO \_ \_ \_ (configuración de OpCode: O, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-389">SIO\_QUERY\_RSS\_PROCESSOR\_INFO (opcode setting: O, T==1)</span></span>

<span data-ttu-id="a763d-390">Consulta la asociación entre un socket y un nodo principal y NUMA del procesador de RSS.</span><span class="sxs-lookup"><span data-stu-id="a763d-390">Queries the association between a socket and an RSS processor core and NUMA node.</span></span>

<span data-ttu-id="a763d-391">La [**\_ información del \_ \_ procesador de \_ RSS de la consulta SiO**](/previous-versions/windows/desktop/legacy/jj553482(v=vs.85)) devuelve una estructura de [**\_ \_ afinidad del procesador de sockets**](/windows/desktop/api/Ws2def/ns-ws2def-socket_processor_affinity) que contiene el [**\_ número de procesador**](/windows/win32/api/winnt/ns-winnt-processor_number) y el identificador de nodo Numa.</span><span class="sxs-lookup"><span data-stu-id="a763d-391">The [**SIO\_QUERY\_RSS\_PROCESSOR\_INFO**](/previous-versions/windows/desktop/legacy/jj553482(v=vs.85)) IOCTL returns a [**SOCKET\_PROCESSOR\_AFFINITY**](/windows/desktop/api/Ws2def/ns-ws2def-socket_processor_affinity) structure that contains the [**PROCESSOR\_NUMBER**](/windows/win32/api/winnt/ns-winnt-processor_number) and the NUMA node ID.</span></span> <span data-ttu-id="a763d-392">La estructura **del \_ número de procesador** devuelto contiene un número de grupo y un número de procesador relativo dentro del grupo.</span><span class="sxs-lookup"><span data-stu-id="a763d-392">The returned **PROCESSOR\_NUMBER** structure contains a group number and relative processor number within the group.</span></span>

<span data-ttu-id="a763d-393">Para obtener información más detallada, consulte la referencia de la [**\_ \_ \_ \_ información del procesador RSS de la consulta SiO**](/previous-versions/windows/desktop/legacy/jj553482(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-393">For more detailed information, see the [**SIO\_QUERY\_RSS\_PROCESSOR\_INFO**](/previous-versions/windows/desktop/legacy/jj553482(v=vs.85)) reference.</span></span> <span data-ttu-id="a763d-394">**SiO \_ La \_ \_ \_ información del procesador de RSS de consulta** es compatible con Windows 8, Windows Server 2012 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-394">**SIO\_QUERY\_RSS\_PROCESSOR\_INFO** is supported on Windows 8, Windows Server 2012, and later.</span></span>

### <a name="sio_query_rss_scalability_info-opcode-setting-o-t3"></a><span data-ttu-id="a763d-395">\_Información de \_ escalabilidad RSS de consulta SiO \_ \_ (configuración de OpCode: O, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-395">SIO\_QUERY\_RSS\_SCALABILITY\_INFO (opcode setting: O, T==3)</span></span>

<span data-ttu-id="a763d-396">Consultas descarga interfaces para la funcionalidad de ajuste de escala en lado de recepción (RSS).</span><span class="sxs-lookup"><span data-stu-id="a763d-396">Queries offload interfaces for receive-side scaling (RSS) capability.</span></span> <span data-ttu-id="a763d-397">La estructura de argumentos devuelta para la **\_ \_ \_ \_ información de escalabilidad RSS de consulta SiO** se especifica en la estructura de **\_ \_ información de escalabilidad RSS** definida en el archivo de encabezado *Mstcpip. h* .</span><span class="sxs-lookup"><span data-stu-id="a763d-397">The argument structure returned for **SIO\_QUERY\_RSS\_SCALABILITY\_INFO** is specified in the **RSS\_SCALABILITY\_INFO** structure defined in the *Mstcpip.h* header file.</span></span> <span data-ttu-id="a763d-398">Esta estructura se define de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="a763d-398">This structure is defined as follows:</span></span>

```cpp
// Scalability info for the transport
typedef struct _RSS_SCALABILITY_INFO {
   BOOLEAN RssEnabled;
} RSS_SCALABILITY_INFO, *PRSS_SCALABILITY_INFO;
```

<span data-ttu-id="a763d-399">El valor devuelto en el miembro **RssEnabled** indica si RSS está habilitado en al menos una interfaz.</span><span class="sxs-lookup"><span data-stu-id="a763d-399">The value returned in the **RssEnabled** member indicates if RSS is enabled on at least one interface.</span></span>

<span data-ttu-id="a763d-400">Si el búfer de salida no es suficientemente grande para la estructura de **\_ \_ información de escalabilidad de RSS** (el valor de *cbOutBuffer* es menor que el tamaño de una **\_ \_ información de escalabilidad RSS**) o el parámetro *LpvOutBuffer* es un puntero **nulo** , se devuelve un **\_ error de socket** como resultado de este ioctl y [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) devuelve [WSAEINVAL](windows-sockets-error-codes-2.md).</span><span class="sxs-lookup"><span data-stu-id="a763d-400">If the output buffer is not large enough for the **RSS\_SCALABILITY\_INFO** structure (the *cbOutBuffer* is less than the size of a **RSS\_SCALABILITY\_INFO**) or the *lpvOutBuffer* parameter is a **NULL** pointer, **SOCKET\_ERROR** is returned as the result of this IOCTL and [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) returns [WSAEINVAL](windows-sockets-error-codes-2.md).</span></span>

<span data-ttu-id="a763d-401">En las redes de alta velocidad en las que varias CPU residen dentro de un solo sistema, la capacidad de la pila del Protocolo de red para escalar correctamente en un sistema de varias CPU se obstaculiza porque la arquitectura de NDIS 5,1 y versiones anteriores limita el procesamiento de protocolos a una única CPU.</span><span class="sxs-lookup"><span data-stu-id="a763d-401">In high-speed networking where multiple CPUs reside within a single system, the ability of the networking protocol stack to scale well on a multi-CPU system is inhibited because the architecture of NDIS 5.1 and earlier versions limits receive protocol processing to a single CPU.</span></span> <span data-ttu-id="a763d-402">El ajuste de escala en lado de recepción (RSS) resuelve este problema al permitir que la carga de red de un adaptador de red se equilibre en varias CPU.</span><span class="sxs-lookup"><span data-stu-id="a763d-402">Receive-side scaling (RSS) resolves this issue by allowing the network load from a network adapter to be balanced across multiple CPUs.</span></span>

<span data-ttu-id="a763d-403">**SiO \_ La \_ \_ \_ información de escalabilidad de RSS de consulta** se admite en Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-403">**SIO\_QUERY\_RSS\_SCALABILITY\_INFO** is supported on Windows Vista and later.</span></span>

### <a name="sio_query_transport_setting-opcode-setting-i-t3"></a><span data-ttu-id="a763d-404">\_Opción de transporte de consulta SiO \_ \_ (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-404">SIO\_QUERY\_TRANSPORT\_SETTING (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-405">Consulta la configuración de transporte en un socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-405">Queries the transport settings on a socket.</span></span> <span data-ttu-id="a763d-406">La configuración de transporte que se consulta se basa en el [**\_ \_ identificador de configuración de transporte**](/windows/win32/api/transportsettingcommon/ns-transportsettingcommon-transport_setting_id) que se ha pasado en el parámetro *lpvInBuffer* .</span><span class="sxs-lookup"><span data-stu-id="a763d-406">The transport setting being queried is based on the [**TRANSPORT\_SETTING\_ID**](/windows/win32/api/transportsettingcommon/ns-transportsettingcommon-transport_setting_id) passed in the *lpvInBuffer* parameter.</span></span>

<span data-ttu-id="a763d-407">La única configuración de transporte que define actualmente es para la funcionalidad de **\_ notificación en tiempo \_ \_ real** en un socket TCP.</span><span class="sxs-lookup"><span data-stu-id="a763d-407">The only transport setting currently defines is for the **REAL\_TIME\_NOTIFICATION\_CAPABILITY** capability on a TCP socket.</span></span>

<span data-ttu-id="a763d-408">Si el [**\_ \_ identificador de configuración de transporte**](/windows/win32/api/transportsettingcommon/ns-transportsettingcommon-transport_setting_id) tiene el miembro **GUID** establecido en **\_ \_ \_ funcionalidad de notificación en tiempo real**, se trata de una solicitud para consultar la configuración de notificación en tiempo real para el socket TCP que se usa con la [**ControlChannelTrigger**](/uwp/api/Windows.Networking.Sockets.ControlChannelTrigger) para recibir notificaciones de red en segundo plano en una aplicación de la tienda Windows.</span><span class="sxs-lookup"><span data-stu-id="a763d-408">If the [**TRANSPORT\_SETTING\_ID**](/windows/win32/api/transportsettingcommon/ns-transportsettingcommon-transport_setting_id) has the **Guid** member set to **REAL\_TIME\_NOTIFICATION\_CAPABILITY**, then this is a request to query the real time notification settings for the TCP socket used with the [**ControlChannelTrigger**](/uwp/api/Windows.Networking.Sockets.ControlChannelTrigger) to receive background network notifications in a Windows Store app.</span></span> <span data-ttu-id="a763d-409">Si la llamada a [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) o [**WSPIoctl**](/previous-versions/windows/hardware/network/ff566296(v=vs.85)) es correcta, este ioctl devuelve una estructura de [**salida de configuración de \_ notificación en tiempo \_ \_ \_ real**](/windows/desktop/api/Mstcpip/ns-mstcpip-real_time_notification_setting_input) con el estado actual.</span><span class="sxs-lookup"><span data-stu-id="a763d-409">If the [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) or [**WSPIoctl**](/previous-versions/windows/hardware/network/ff566296(v=vs.85)) call is successful, this IOCTL returns a [**REAL\_TIME\_NOTIFICATION\_SETTING\_OUTPUT**](/windows/desktop/api/Mstcpip/ns-mstcpip-real_time_notification_setting_input) structure with the current status.</span></span>

<span data-ttu-id="a763d-410">Para obtener información más detallada, consulte la referencia de configuración de transporte de la [**\_ consulta \_ \_ SiO**](/previous-versions/windows/desktop/legacy/jj553483(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-410">For more detailed information, see the [**SIO\_QUERY\_TRANSPORT\_SETTING**](/previous-versions/windows/desktop/legacy/jj553483(v=vs.85)) reference.</span></span> <span data-ttu-id="a763d-411">**SiO \_ La \_ \_ configuración de transporte de consultas** se admite en Windows 8, Windows Server 2012 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-411">**SIO\_QUERY\_TRANSPORT\_SETTING** is supported on Windows 8, Windows Server 2012, and later.</span></span>

### <a name="sio_query_wfp_ale_endpoint_handle-opcode-setting-o-t3"></a><span data-ttu-id="a763d-412">SIO \_ query \_ \_ identificador de extremo Ale de WFP \_ \_ (configuración de OpCode: O, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-412">SIO\_QUERY\_WFP\_ALE\_ENDPOINT\_HANDLE (opcode setting: O, T==3)</span></span>

<span data-ttu-id="a763d-413">Consulta el identificador del extremo de cumplimiento de la capa de aplicación (ALE).</span><span class="sxs-lookup"><span data-stu-id="a763d-413">Queries the Application Layer Enforcement (ALE) endpoint handle.</span></span>

<span data-ttu-id="a763d-414">La plataforma de filtrado de Windows (WFP) admite la inspección y modificación del tráfico de red.</span><span class="sxs-lookup"><span data-stu-id="a763d-414">The Windows Filtering Platform (WFP) supports network traffic inspection and modification.</span></span> <span data-ttu-id="a763d-415">En Windows Vista, WFP se centra en escenarios en los que el equipo host es el punto de conexión de comunicación.</span><span class="sxs-lookup"><span data-stu-id="a763d-415">On Windows Vista, WFP focuses on scenarios where the host machine is the communication endpoint.</span></span> <span data-ttu-id="a763d-416">En Windows Server 2008, sin embargo, hay implementaciones de firewall perimetral que desean aprovechar la plataforma WFP para inspeccionar el tráfico de paso a través y proxy.</span><span class="sxs-lookup"><span data-stu-id="a763d-416">On Windows Server 2008 , however, there are edge firewall implementations which would like to leverage the WFP platform to inspect and proxy pass-through traffic.</span></span> <span data-ttu-id="a763d-417">El servidor de Internet Security and Acceleration (ISA) es un ejemplo de este tipo de dispositivo perimetral.</span><span class="sxs-lookup"><span data-stu-id="a763d-417">The Internet Security and Acceleration (ISA) server is an example of such an edge device.</span></span>

<span data-ttu-id="a763d-418">Hay algunos escenarios de firewall que pueden requerir la capacidad de insertar un paquete de entrada en la ruta de acceso de envío asociada a un punto de conexión existente.</span><span class="sxs-lookup"><span data-stu-id="a763d-418">There are some firewall scenarios that may require the ability to inject an inbound packet into the send path associated with an existing endpoint.</span></span> <span data-ttu-id="a763d-419">Debe haber un mecanismo para detectar el identificador de extremo de la capa de transporte asociado al punto de conexión de destino.</span><span class="sxs-lookup"><span data-stu-id="a763d-419">There needs to be a mechanism to discover the transport layer endpoint handle associated with the destination endpoint.</span></span> <span data-ttu-id="a763d-420">La aplicación que creó el extremo posee estos extremos de capa de transporte.</span><span class="sxs-lookup"><span data-stu-id="a763d-420">The application that created the endpoint owns these transport layer endpoints.</span></span> <span data-ttu-id="a763d-421">Este IOCTL se usa para proporcionar el identificador de socket a la asignación de identificadores de punto de conexión de la capa de transporte.</span><span class="sxs-lookup"><span data-stu-id="a763d-421">This IOCTL is used to provide socket handle to transport layer endpoint handle mapping.</span></span>

<span data-ttu-id="a763d-422">Si el búfer de salida no es suficientemente grande para el identificador del punto de conexión ( *cbOutBuffer* es menor que el tamaño de un **UINT64**) o el parámetro *lpvOutBuffer* es un puntero **nulo** , se devuelve un **\_ error de socket** como resultado de este ioctl y [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) devuelve [WSAEINVAL](windows-sockets-error-codes-2.md).</span><span class="sxs-lookup"><span data-stu-id="a763d-422">If the output buffer is not large enough for the endpoint handle (the *cbOutBuffer* is less than the size of a **UINT64**) or the *lpvOutBuffer* parameter is a **NULL** pointer, **SOCKET\_ERROR** is returned as the result of this IOCTL and [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) returns [WSAEINVAL](windows-sockets-error-codes-2.md).</span></span>

<span data-ttu-id="a763d-423">**SiO \_ En Windows Vista y versiones posteriores se admite el \_ \_ identificador del punto de \_ conexión \_ Ale de WFP** .</span><span class="sxs-lookup"><span data-stu-id="a763d-423">**SIO\_QUERY\_WFP\_ALE\_ENDPOINT\_HANDLE** is supported on Windows Vista and later.</span></span>

### <a name="sio_query_wfp_connection_redirect_context-opcode-setting-i-t3"></a><span data-ttu-id="a763d-424">SIO \_ query \_ \_ contexto de \_ redireccionamiento de conexión de WFP \_ (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-424">SIO\_QUERY\_WFP\_CONNECTION\_REDIRECT\_CONTEXT (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-425">Consulta el contexto de redirección para un registro de redireccionamiento usado por un servicio de redirección de la plataforma de filtrado de Windows (WFP).</span><span class="sxs-lookup"><span data-stu-id="a763d-425">Queries the redirect context for a redirect record used by a Windows Filtering Platform (WFP) redirect service.</span></span>

<span data-ttu-id="a763d-426">El [**\_ contexto de \_ \_ \_ redirección \_ de conexión WFP de la consulta SiO**](/previous-versions/windows/desktop/legacy/hh859712(v=vs.85)) se usa para proporcionar un seguimiento de la conexión de proxy en las conexiones de socket redirigido.</span><span class="sxs-lookup"><span data-stu-id="a763d-426">The [**SIO\_QUERY\_WFP\_CONNECTION\_REDIRECT\_CONTEXT**](/previous-versions/windows/desktop/legacy/hh859712(v=vs.85)) IOCTL is used to provide proxied connection tracking on redirected socket connections.</span></span> <span data-ttu-id="a763d-427">Esta característica de WFP facilita el seguimiento de los registros de redireccionamiento de la redirección inicial de una conexión a la conexión final con el destino.</span><span class="sxs-lookup"><span data-stu-id="a763d-427">This WFP feature facilitates tracking of redirection records from the initial redirect of a connection to the final connection to the destination.</span></span>

<span data-ttu-id="a763d-428">Para obtener información más detallada, consulte la referencia de [**\_ \_ \_ \_ \_ contexto de redirección de conexión de WFP de la consulta SiO**](/previous-versions/windows/desktop/legacy/hh859712(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-428">For more detailed information, see the [**SIO\_QUERY\_WFP\_CONNECTION\_REDIRECT\_CONTEXT**](/previous-versions/windows/desktop/legacy/hh859712(v=vs.85)) reference.</span></span> <span data-ttu-id="a763d-429">**SiO \_ El \_ \_ contexto de \_ redirección \_ de conexión WFP de consulta** se admite en windows 8, Windows Server 2012 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-429">**SIO\_QUERY\_WFP\_CONNECTION\_REDIRECT\_CONTEXT** is supported on Windows 8, Windows Server 2012, and later.</span></span>

### <a name="sio_query_wfp_connection_redirect_records-opcode-setting-i-t3"></a><span data-ttu-id="a763d-430">SIO \_ query \_ \_ archivos de redirección de conexión de WFP \_ \_ (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-430">SIO\_QUERY\_WFP\_CONNECTION\_REDIRECT\_RECORDS (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-431">Consulta el registro de redirección para la conexión TCP/IP aceptada para su uso por parte de un servicio de redirección de la plataforma de filtrado de Windows (WFP).</span><span class="sxs-lookup"><span data-stu-id="a763d-431">Queries the redirect record for the accepted TCP/IP connection for use by a Windows Filtering Platform (WFP) redirect service.</span></span>

<span data-ttu-id="a763d-432">Los registros de la conexión de WFP de la [**\_ consulta \_ \_ \_ \_ SiO**](/previous-versions/windows/desktop/legacy/hh859713(v=vs.85)) se usan para proporcionar el seguimiento de la conexión de proxy en las conexiones de socket redirigido.</span><span class="sxs-lookup"><span data-stu-id="a763d-432">The [**SIO\_QUERY\_WFP\_CONNECTION\_REDIRECT\_RECORDS**](/previous-versions/windows/desktop/legacy/hh859713(v=vs.85)) IOCTL is used to provide proxied connection tracking on redirected socket connections.</span></span> <span data-ttu-id="a763d-433">Esta característica de WFP facilita el seguimiento de los registros de redireccionamiento de la redirección inicial de una conexión a la conexión final con el destino.</span><span class="sxs-lookup"><span data-stu-id="a763d-433">This WFP feature facilitates tracking of redirection records from the initial redirect of a connection to the final connection to the destination.</span></span>

<span data-ttu-id="a763d-434">Para obtener información más detallada, consulte la referencia de la [**consulta SiO de \_ \_ \_ \_ redirección de \_ registros de redireccionamiento**](/previous-versions/windows/desktop/legacy/hh859713(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-434">For more detailed information, see the [**SIO\_QUERY\_WFP\_CONNECTION\_REDIRECT\_RECORDS**](/previous-versions/windows/desktop/legacy/hh859713(v=vs.85)) reference.</span></span> <span data-ttu-id="a763d-435">**SiO \_ En Windows 8, Windows Server 2012 y versiones posteriores, se admiten \_ \_ \_ \_ registros de redirección de conexión de WFP** .</span><span class="sxs-lookup"><span data-stu-id="a763d-435">**SIO\_QUERY\_WFP\_CONNECTION\_REDIRECT\_RECORDS** is supported on Windows 8, Windows Server 2012, and later.</span></span>

### <a name="sio_rcvall-opcode-setting-i-t3"></a><span data-ttu-id="a763d-436">SIO \_ RCVALL (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-436">SIO\_RCVALL (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-437">Permite a un socket recibir todos los paquetes IPv4 o IPv6 que pasan throuigh una interfaz de red.</span><span class="sxs-lookup"><span data-stu-id="a763d-437">Enables a socket to receive all IPv4 or IPv6 packets passing throuigh a network interface.</span></span> <span data-ttu-id="a763d-438">El identificador de socket que se pasa a la función [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) debe ser uno de los siguientes:</span><span class="sxs-lookup"><span data-stu-id="a763d-438">The socket handle passed to the [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function must be one of the following:</span></span>

-   <span data-ttu-id="a763d-439">Un socket IPv4 que se creó con la familia de direcciones establecida en AF \_ inet, el tipo de socket establecido en sock \_ raw y el protocolo establecido en IPPROTO \_ IP.</span><span class="sxs-lookup"><span data-stu-id="a763d-439">An IPv4 socket that was created with the address family set to AF\_INET, the socket type set to SOCK\_RAW, and the protocol set to IPPROTO\_IP.</span></span>
-   <span data-ttu-id="a763d-440">Un socket IPv6 que se creó con la familia de direcciones establecida en AF \_ inet6, el tipo de socket establecido en sock \_ raw y el protocolo establecido en IPPROTO \_ IPv6.</span><span class="sxs-lookup"><span data-stu-id="a763d-440">An IPv6 socket that was created with the address family set to AF\_INET6, the socket type set to SOCK\_RAW, and the protocol set to IPPROTO\_IPV6.</span></span>

<span data-ttu-id="a763d-441">El socket también debe estar enlazado a una interfaz IPv4 o IPv6 local explícita, lo que significa que no se puede enlazar a **inaddress \_ any** o **in6addr \_ any**.</span><span class="sxs-lookup"><span data-stu-id="a763d-441">The socket also must be bound to an explicit local IPv4 or IPv6 interface, which means that you cannot bind to **INADDR\_ANY** or **in6addr\_any**.</span></span>

<span data-ttu-id="a763d-442">En Windows Server 2008 y versiones anteriores, el valor de ioctl de [**SiO \_ RCVALL**](/previous-versions/windows/desktop/legacy/ee309610(v=vs.85)) no capturar los paquetes locales enviados fuera de una interfaz de red.</span><span class="sxs-lookup"><span data-stu-id="a763d-442">On Windows Server 2008 and earlier, the [**SIO\_RCVALL**](/previous-versions/windows/desktop/legacy/ee309610(v=vs.85)) IOCTL setting would not capture local packets sent out of a network interface.</span></span> <span data-ttu-id="a763d-443">Esto incluye los paquetes recibidos en otra interfaz y reenviados fuera de la interfaz de red especificada para el ioctl **SiO \_ RCVALL** .</span><span class="sxs-lookup"><span data-stu-id="a763d-443">This included packets received on another interface and forwarded out the network interface specified for the **SIO\_RCVALL** IOCTL.</span></span>

<span data-ttu-id="a763d-444">En Windows 7 y Windows Server 2008 R2, se ha cambiado para que los paquetes locales enviados fuera de una interfaz de red también se capturen.</span><span class="sxs-lookup"><span data-stu-id="a763d-444">On Windows 7 and Windows Server 2008 R2 , this was changed so that local packets sent out of a network interface are also captured.</span></span> <span data-ttu-id="a763d-445">Esto incluye los paquetes recibidos en otra interfaz y, a continuación, reenviar la interfaz de red enlazada al socket con el ioctl [**SiO \_ RCVALL**](/previous-versions/windows/desktop/legacy/ee309610(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-445">This includes packets received on another interface and then forwarded out the network interface bound to the socket with [**SIO\_RCVALL**](/previous-versions/windows/desktop/legacy/ee309610(v=vs.85)) IOCTL.</span></span>

<span data-ttu-id="a763d-446">La configuración de este IOCTL requiere privilegios de administrador en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="a763d-446">Setting this IOCTL requires Administrator privilege on the local computer.</span></span>

<span data-ttu-id="a763d-447">Esta característica se denomina a veces modo promiscuo.</span><span class="sxs-lookup"><span data-stu-id="a763d-447">This feature is sometimes referred to as promiscuous mode.</span></span>

<span data-ttu-id="a763d-448">Los valores posibles para la opción de ioctl **SiO \_ RCVALL** se especifican en la enumeración de **\_ valores RCVALL** definida en el archivo de encabezado *Mstcpip. h* .</span><span class="sxs-lookup"><span data-stu-id="a763d-448">The possible values for the **SIO\_RCVALL** IOCTL option are specified in the **RCVALL\_VALUE** enumeration defined in the *Mstcpip.h* header file.</span></span> <span data-ttu-id="a763d-449">Los valores posibles para SIO \_ RCVALL son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="a763d-449">The possible values for SIO\_RCVALL are as follows:</span></span>

| <span data-ttu-id="a763d-450">Término</span><span class="sxs-lookup"><span data-stu-id="a763d-450">Term</span></span>                                                                                                                 | <span data-ttu-id="a763d-451">Descripción</span><span class="sxs-lookup"><span data-stu-id="a763d-451">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|-|-|
| <span data-ttu-id="a763d-452"><span id="RCVALL_OFF"></span><span id="rcvall_off"></span>RCVALL \_ desactivado</span><span class="sxs-lookup"><span data-stu-id="a763d-452"><span id="RCVALL_OFF"></span><span id="rcvall_off"></span>RCVALL\_OFF</span></span><br/>                                     | <span data-ttu-id="a763d-453">Deshabilite esta opción para que un socket no reciba todos los paquetes IPv4 o IPv6 de la red.</span><span class="sxs-lookup"><span data-stu-id="a763d-453">Disable this option so a socket does not receive all IPv4 or IPv6 packets on the network.</span></span> <br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="a763d-454"><span id="RCVALL_ON"></span><span id="rcvall_on"></span>RCVALL \_</span><span class="sxs-lookup"><span data-stu-id="a763d-454"><span id="RCVALL_ON"></span><span id="rcvall_on"></span>RCVALL\_ON</span></span><br/>                                        | <span data-ttu-id="a763d-455">Habilite esta opción para que un socket reciba todos los paquetes IPv4 o IPv6 de la red.</span><span class="sxs-lookup"><span data-stu-id="a763d-455">Enable this option so a socket receives all IPv4 or IPv6 packets on the network.</span></span> <span data-ttu-id="a763d-456">Esta opción habilita el modo promiscuo en la tarjeta de interfaz de red (NIC), si la NIC es compatible con el modo promiscuo.</span><span class="sxs-lookup"><span data-stu-id="a763d-456">This option enables promiscuous mode on the network interface card (NIC), if the NIC supports promiscuous mode.</span></span> <span data-ttu-id="a763d-457">En un segmento LAN con un concentrador de red, una NIC que admita el modo promiscuo capturará todo el tráfico de IPv4 o IPv6 en la LAN, incluido el tráfico entre otros equipos del mismo segmento de LAN.</span><span class="sxs-lookup"><span data-stu-id="a763d-457">On a LAN segment with a network hub, a NIC that supports promiscuous mode will capture all IPv4 or IPv6 traffic on the LAN, including traffic between other computers on the same LAN segment.</span></span> <span data-ttu-id="a763d-458">Todos los paquetes capturados (IPv4 o IPv6, según el socket) se entregarán al socket sin formato.</span><span class="sxs-lookup"><span data-stu-id="a763d-458">All of the captured packets (IPv4 or IPv6, depending on the socket) will be delivered to the raw socket.</span></span> <br/> <span data-ttu-id="a763d-459">Esta opción no capturará otros paquetes (por ejemplo, paquetes ARP, IPX y NetBEUI) en la interfaz.</span><span class="sxs-lookup"><span data-stu-id="a763d-459">This option will not capture other packets (ARP, IPX, and NetBEUI packets, for example) on the interface.</span></span><br/> <span data-ttu-id="a763d-460">Netmon usa el mismo modo para la interfaz de red, pero no usa esta opción para capturar el tráfico.</span><span class="sxs-lookup"><span data-stu-id="a763d-460">Netmon uses the same mode for the network interface, but does not use this option to capture traffic.</span></span><br/> |
| <span data-ttu-id="a763d-461"><span id="RCVALL_SOCKETLEVELONLY"></span><span id="rcvall_socketlevelonly"></span>RCVALL \_ SOCKETLEVELONLY</span><span class="sxs-lookup"><span data-stu-id="a763d-461"><span id="RCVALL_SOCKETLEVELONLY"></span><span id="rcvall_socketlevelonly"></span>RCVALL\_SOCKETLEVELONLY</span></span><br/> | <span data-ttu-id="a763d-462">Esta característica no está implementada actualmente, por lo que establecer esta opción no tiene ningún efecto.</span><span class="sxs-lookup"><span data-stu-id="a763d-462">This feature is not currently implemented, so setting this option does not have any affect.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <span data-ttu-id="a763d-463"><span id="RCVALL_IPLEVEL"></span><span id="rcvall_iplevel"></span>RCVALL \_ IPLEVEL</span><span class="sxs-lookup"><span data-stu-id="a763d-463"><span id="RCVALL_IPLEVEL"></span><span id="rcvall_iplevel"></span>RCVALL\_IPLEVEL</span></span><br/>                         | <span data-ttu-id="a763d-464">Habilite esta opción para que un socket IPv4 o IPv6 reciba todos los paquetes en el nivel de IP de la red.</span><span class="sxs-lookup"><span data-stu-id="a763d-464">Enable this option so an IPv4 or IPv6 socket receives all packets at the IP level on the network.</span></span> <span data-ttu-id="a763d-465">Esta opción no habilita el modo promiscuo en la tarjeta de interfaz de red.</span><span class="sxs-lookup"><span data-stu-id="a763d-465">This option does not enable promiscuous mode on the network interface card.</span></span> <span data-ttu-id="a763d-466">Esta opción solo afecta al procesamiento de paquetes en el nivel de IP.</span><span class="sxs-lookup"><span data-stu-id="a763d-466">This option only affects packet processing at the IP level.</span></span> <span data-ttu-id="a763d-467">La NIC sigue recibiendo solo los paquetes dirigidos a sus direcciones de unidifusión y multidifusión configuradas.</span><span class="sxs-lookup"><span data-stu-id="a763d-467">The NIC still receives only packets directed to its configured unicast and multicast addresses.</span></span> <span data-ttu-id="a763d-468">Sin embargo, un socket con esta opción habilitada no solo recibirá paquetes dirigidos a direcciones IP específicas, sino que recibirá todos los paquetes IPv4 o IPv6 que reciba la NIC.</span><span class="sxs-lookup"><span data-stu-id="a763d-468">However, a socket with this option enabled will receive not only packets directed to specific IP addresses, but will receive all the IPv4 or IPv6 packets the NIC receives.</span></span><br/> <span data-ttu-id="a763d-469">Esta opción no capturará otros paquetes (por ejemplo, los paquetes ARP, IPX y NetBEUI) recibidos en la interfaz.</span><span class="sxs-lookup"><span data-stu-id="a763d-469">This option will not capture other packets (ARP, IPX, and NetBEUI packets, for example) received on the interface.</span></span><br/>                                                                                             |



 

<span data-ttu-id="a763d-470">Para obtener información más detallada, consulte la referencia de [**SiO \_ RCVALL**](/previous-versions/windows/desktop/legacy/ee309610(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-470">For more detailed information, see the [**SIO\_RCVALL**](/previous-versions/windows/desktop/legacy/ee309610(v=vs.85)) reference.</span></span>

<span data-ttu-id="a763d-471">**SiO \_ RCVALL** es compatible con Windows 2000 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-471">**SIO\_RCVALL** is supported on Windows 2000 and later.</span></span>

### <a name="sio_rcvall_igmpmcast-opcode-setting-i-t3"></a><span data-ttu-id="a763d-472">SIO \_ RCVALL \_ IGMPMCAST (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-472">SIO\_RCVALL\_IGMPMCAST (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-473">Permite que un socket reciba todo el tráfico IP de multidifusión IGMP de la red, sin que se reciba otro tráfico IP de multidifusión.</span><span class="sxs-lookup"><span data-stu-id="a763d-473">Enables a socket to receive all IGMP multicast IP traffic on the network, without receiving other multicast IP traffic.</span></span> <span data-ttu-id="a763d-474">El identificador de socket que se pasa a la función [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) debe ser de la familia de direcciones de AF \_ inet, el \_ tipo de socket sin formato Sock y el \_ Protocolo IGMP IPPROTO.</span><span class="sxs-lookup"><span data-stu-id="a763d-474">The socket handle passed to the [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function must be of AF\_INET address family, SOCK\_RAW socket type, and IPPROTO\_IGMP protocol.</span></span> <span data-ttu-id="a763d-475">El socket también debe estar enlazado a una interfaz local explícita, lo que significa que no se puede enlazar a la entrada \_ any.</span><span class="sxs-lookup"><span data-stu-id="a763d-475">The socket also must be bound to an explicit local interface, which means that you cannot bind to INADDR\_ANY.</span></span>

<span data-ttu-id="a763d-476">Una vez enlazado el socket y el conjunto de IOCTL, las llamadas a las funciones [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv) o [**RECV**](/windows/desktop/api/winsock/nf-winsock-recv) devuelven datagramas IP de multidifusión que pasan a través de la interfaz determinada.</span><span class="sxs-lookup"><span data-stu-id="a763d-476">Once the socket is bound and the IOCTL set, calls to the [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv) or [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) functions return multicast IP datagrams passing through the given interface.</span></span> <span data-ttu-id="a763d-477">Tenga en cuenta que debe proporcionar un búfer suficientemente grande.</span><span class="sxs-lookup"><span data-stu-id="a763d-477">Note that you must supply a sufficiently large buffer.</span></span> <span data-ttu-id="a763d-478">La configuración de este IOCTL requiere privilegios de administrador en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="a763d-478">Setting this IOCTL requires Administrator privilege on the local computer.</span></span>

<span data-ttu-id="a763d-479">**SiO \_ RCVALL \_ IGMPMCAST** es compatible con Windows 2000 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-479">**SIO\_RCVALL\_IGMPMCAST** is supported on Windows 2000 and later.</span></span>

### <a name="sio_rcvall_mcast-opcode-setting-i-t3"></a><span data-ttu-id="a763d-480">SIO \_ RCVALL \_ MCAST (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-480">SIO\_RCVALL\_MCAST (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-481">Permite que un socket reciba todo el tráfico IP de multidifusión en la red (es decir, todos los paquetes IP destinados a las direcciones IP en el intervalo de 224.0.0.0 a 239.255.255.255).</span><span class="sxs-lookup"><span data-stu-id="a763d-481">Enables a socket to receive all multicast IP traffic on the network (that is, all IP packets destined for IP addresses in the range of 224.0.0.0 to 239.255.255.255).</span></span> <span data-ttu-id="a763d-482">El identificador de socket que se pasa a la función [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) debe ser de AF \_ inet Address Family, sock \_ Raw Socket Type y IPPROTO \_ UDP Protocol.</span><span class="sxs-lookup"><span data-stu-id="a763d-482">The socket handle passed to the [**WSAIoctl**](/windows/desktop/api/Winsock2/nf-winsock2-wsaioctl) function must be of AF\_INET address family, SOCK\_RAW socket type, and IPPROTO\_UDP protocol.</span></span> <span data-ttu-id="a763d-483">El socket también debe enlazarse a una interfaz local explícita, lo que significa que no se puede enlazar a la indirección \_ .</span><span class="sxs-lookup"><span data-stu-id="a763d-483">The socket also must bind to an explicit local interface, which means that you cannot bind to INADDR\_ANY.</span></span> <span data-ttu-id="a763d-484">El socket debe enlazarse al puerto cero.</span><span class="sxs-lookup"><span data-stu-id="a763d-484">The socket should bind to port zero.</span></span>

<span data-ttu-id="a763d-485">Una vez enlazado el socket y el conjunto de IOCTL, las llamadas a las funciones [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv) o [**RECV**](/windows/desktop/api/winsock/nf-winsock-recv) devuelven datagramas IP de multidifusión que pasan a través de la interfaz determinada.</span><span class="sxs-lookup"><span data-stu-id="a763d-485">Once the socket is bound and the IOCTL set, calls to the [**WSARecv**](/windows/desktop/api/Winsock2/nf-winsock2-wsarecv) or [**recv**](/windows/desktop/api/winsock/nf-winsock-recv) functions return multicast IP datagrams passing through the given interface.</span></span> <span data-ttu-id="a763d-486">Tenga en cuenta que debe proporcionar un búfer suficientemente grande.</span><span class="sxs-lookup"><span data-stu-id="a763d-486">Note that you must supply a sufficiently large buffer.</span></span> <span data-ttu-id="a763d-487">La configuración de este IOCTL requiere privilegios de administrador en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="a763d-487">Setting this IOCTL requires Administrator privilege on the local computer.</span></span>

<span data-ttu-id="a763d-488">**SiO \_ RCVALL \_ MCAST** es compatible con Windows 2000 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-488">**SIO\_RCVALL\_MCAST** is supported on Windows 2000 and later.</span></span>

### <a name="sio_release_port_reservation-opcode-setting-i-t3"></a><span data-ttu-id="a763d-489">SIO \_ versión de \_ reserva de puerto \_ (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-489">SIO\_RELEASE\_PORT\_RESERVATION (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-490">Libera una reserva en tiempo de ejecución para un bloque de puertos TCP o UDP.</span><span class="sxs-lookup"><span data-stu-id="a763d-490">Releases a runtime reservation for a block of TCP or UDP ports.</span></span> <span data-ttu-id="a763d-491">La reserva en tiempo de ejecución que se va a liberar debe haberse obtenido del proceso de emisión mediante el ioctl de [**reserva de puerto de adquisición de SiO \_ \_ \_**](/previous-versions/windows/desktop/legacy/gg699720(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-491">The runtime reservation to be released must have been obtained from the issuing process using the [**SIO\_ACQUIRE\_PORT\_RESERVATION**](/previous-versions/windows/desktop/legacy/gg699720(v=vs.85)) IOCTL.</span></span>

<span data-ttu-id="a763d-492">Para obtener información más detallada, consulte la referencia de la [**\_ reserva de \_ puertos \_ de versión SiO**](/previous-versions/windows/desktop/legacy/gg699722(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-492">For more detailed information, see the [**SIO\_RELEASE\_PORT\_RESERVATION**](/previous-versions/windows/desktop/legacy/gg699722(v=vs.85)) reference.</span></span>

<span data-ttu-id="a763d-493">[**SiO \_ La \_ \_ reserva de puertos de versión**](/previous-versions/windows/desktop/legacy/gg699722(v=vs.85)) se admite en Windows Vista y versiones posteriores del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="a763d-493">[**SIO\_RELEASE\_PORT\_RESERVATION**](/previous-versions/windows/desktop/legacy/gg699722(v=vs.85)) is supported on Windows Vista and later versions of the operating system.</span></span>

### <a name="sio_routing_interface_change-opcode-setting-i-t1"></a><span data-ttu-id="a763d-494">SIO \_ cambio de la interfaz de enrutamiento \_ \_ (configuración de OpCode: I, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-494">SIO\_ROUTING\_INTERFACE\_CHANGE (opcode setting: I, T==1)</span></span>

<span data-ttu-id="a763d-495">Para recibir una notificación de un cambio en la interfaz de enrutamiento que se debe usar para llegar a la dirección remota en el búfer de entrada (especificado como una estructura [**sockaddr**](sockaddr-2.md) ).</span><span class="sxs-lookup"><span data-stu-id="a763d-495">To receive notification of a routing interface change that should be used to reach the remote address in the input buffer (specified as a [**sockaddr**](sockaddr-2.md) structure).</span></span> <span data-ttu-id="a763d-496">No se proporcionará información de salida en la nueva interfaz de enrutamiento al finalizar este IOCTL; la finalización indica simplemente que la interfaz de enrutamiento de un destino determinado ha cambiado y debe consultarse mediante el ioctl de consulta de la **\_ interfaz de enrutamiento de \_ \_ SiO** .</span><span class="sxs-lookup"><span data-stu-id="a763d-496">No output information on the new routing interface will be provided upon completion of this IOCTL; the completion merely indicates that the routing interface for a given destination has changed and should be queried using the **SIO\_ROUTING\_INTERFACE\_QUERY** IOCTL.</span></span>

<span data-ttu-id="a763d-497">Se presupone, aunque no es necesario, que la aplicación use e/s superpuestas para recibir una notificación del cambio de la interfaz de enrutamiento mediante la finalización de la solicitud de cambio de la **\_ interfaz de enrutamiento de \_ \_ SiO** .</span><span class="sxs-lookup"><span data-stu-id="a763d-497">It is assumed, although not required, that the application uses overlapped I/O to be notified of the routing interface change through completion of **SIO\_ROUTING\_INTERFACE\_CHANGE** request.</span></span> <span data-ttu-id="a763d-498">Como alternativa, si la **interfaz de enrutamiento de SiO \_ \_ \_ cambia** ioctl se emite en un socket que no es de bloqueo con los parámetros *lpOverlapped* y *lpCompletionRoutine* establecidos en **null**), se completará inmediatamente y [WSAEWOULDBLOCK](windows-sockets-error-codes-2.md) como un error, y la aplicación puede esperar a que se envíen los eventos de cambio de enrutamiento a través de la llamada a [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect) o [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) con el \_ \_ \_ bit de cambio de interfaz de enrutamiento</span><span class="sxs-lookup"><span data-stu-id="a763d-498">Alternatively, if the **SIO\_ROUTING\_INTERFACE\_CHANGE** IOCTL is issued on a non-blocking socket with the *lpOverlapped* and *lpCompletionRoutine* parameters set to **NULL**), it will complete immediately returning and [WSAEWOULDBLOCK](windows-sockets-error-codes-2.md) as an error, and the application can then wait for routing change events through call to [**WSAEventSelect**](/windows/desktop/api/Winsock2/nf-winsock2-wsaeventselect) or [**WSAAsyncSelect**](/windows/desktop/api/winsock/nf-winsock-wsaasyncselect) with FD\_ROUTING\_INTERFACE\_CHANGE bit set in the network event bitmask.</span></span>

<span data-ttu-id="a763d-499">Se reconoce que la información de enrutamiento sigue siendo estable en la mayoría de los casos, por lo que solicitar a la aplicación mantener varios ioctl pendientes para recibir notificaciones sobre todos los destinos en los que está interesado y que el proveedor de servicios realice un seguimiento de estas solicitudes de notificación usará una cantidad significativa de recursos del sistema.</span><span class="sxs-lookup"><span data-stu-id="a763d-499">It is recognized that routing information remains stable in most cases so that requiring the application to keep multiple outstanding IOCTLs to get notifications about all destinations that it is interested in as well as having the service provider keep track of these notification requests will use a significant amount system resources.</span></span> <span data-ttu-id="a763d-500">Esta situación se puede evitar extendiendo el significado de los parámetros de entrada y relajando los requisitos del proveedor de servicios de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="a763d-500">This situation can be avoided by extending the meaning of the input parameters and relaxing the service provider requirements as follows:</span></span>

-   <span data-ttu-id="a763d-501">La aplicación puede especificar una dirección comodín específica de la familia de protocolos (la misma que se usa en la llamada de [**enlace**](/windows/desktop/api/winsock/nf-winsock-bind) cuando se solicita enlazar a cualquier dirección disponible) para solicitar notificaciones de cambios de enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="a763d-501">The application can specify a protocol family specific wildcard address (same as one used in [**bind**](/windows/desktop/api/winsock/nf-winsock-bind) call when requesting to bind to any available address) to request notifications of any routing changes.</span></span> <span data-ttu-id="a763d-502">Esto permite a la aplicación mantener solo un **cambio de \_ \_ interfaz de \_ enrutamiento de SiO** pendiente para todos los sockets y destinos que tiene y, a continuación, usar la **\_ \_ \_ consulta de interfaz de enrutamiento de SiO** para obtener la información de enrutamiento real.</span><span class="sxs-lookup"><span data-stu-id="a763d-502">This allows the application to keep only one outstanding **SIO\_ROUTING\_INTERFACE\_CHANGE** for all the sockets and destinations it has and then use **SIO\_ROUTING\_INTERFACE\_QUERY** to get the actual routing information.</span></span>
-   <span data-ttu-id="a763d-503">Un proveedor de servicios tiene la opción de omitir la información especificada por la aplicación en el búfer de entrada del cambio de la interfaz de enrutamiento de sio (como si la aplicación especificara una dirección de carácter comodín) y completar el evento de cambio de la interfaz de enrutamiento de SiO o de la interfaz de enrutamiento de Signal **\_ \_ \_** **\_ \_ \_** \_ \_ \_</span><span class="sxs-lookup"><span data-stu-id="a763d-503">A service provider has the option to ignore the information specified by the application in the input buffer of the **SIO\_ROUTING\_INTERFACE\_CHANGE** (as though the application specified a wildcard address) and complete the **SIO\_ROUTING\_INTERFACE\_CHANGE** IOCTL or signal FD\_ROUTING\_INTERFACE\_CHANGE event in the event of any routing information change (not just the route to the destination specified in the input buffer).</span></span>

### <a name="sio_routing_interface_query-opcode-setting-i-o-t1"></a><span data-ttu-id="a763d-504">SIO \_ \_ \_ consulta de interfaz de enrutamiento (configuración de OpCode: I, O, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-504">SIO\_ROUTING\_INTERFACE\_QUERY (opcode setting: I, O, T==1)</span></span>

<span data-ttu-id="a763d-505">Para obtener la dirección de la interfaz local (representada como estructura [**sockaddr**](sockaddr-2.md) ), que se debe usar para enviar a la dirección remota especificada en el búfer de entrada (como **sockaddr**).</span><span class="sxs-lookup"><span data-stu-id="a763d-505">To obtain the address of the local interface (represented as [**sockaddr**](sockaddr-2.md) structure) which should be used to send to the remote address specified in the input buffer (as **sockaddr**).</span></span> <span data-ttu-id="a763d-506">Se pueden enviar direcciones de multidifusión remotas en el búfer de entrada para obtener la dirección de la interfaz preferida para la transmisión por multidifusión.</span><span class="sxs-lookup"><span data-stu-id="a763d-506">Remote multicast addresses may be submitted in the input buffer to get the address of the preferred interface for multicast transmission.</span></span> <span data-ttu-id="a763d-507">En cualquier caso, la aplicación puede usar la dirección de la interfaz en una solicitud BIND () subsiguiente.</span><span class="sxs-lookup"><span data-stu-id="a763d-507">In any case, the interface address returned may be used by the application in a subsequent bind() request.</span></span>

<span data-ttu-id="a763d-508">Tenga en cuenta que las rutas están sujetas a cambios.</span><span class="sxs-lookup"><span data-stu-id="a763d-508">Note that routes are subject to change.</span></span> <span data-ttu-id="a763d-509">Por lo tanto, las aplicaciones no pueden confiar en la información devuelta por la consulta de interfaz de enrutamiento de SiO para ser persistente. **\_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="a763d-509">Therefore, applications cannot rely on the information returned by **SIO\_ROUTING\_INTERFACE\_QUERY** to be persistent.</span></span> <span data-ttu-id="a763d-510">Las aplicaciones pueden registrarse para el enrutamiento de notificaciones de cambio a través de la **interfaz de enrutamiento de SiO \_ \_ \_ Change** IOCTL que proporciona una notificación a través de un evento de cambio de interfaz de enrutamiento FD o de e/s superpuesta \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="a763d-510">Applications may register for routing change notifications through the **SIO\_ROUTING\_INTERFACE\_CHANGE** IOCTL which provides for notification through either overlapped I/O or a FD\_ROUTING\_INTERFACE\_CHANGE event.</span></span> <span data-ttu-id="a763d-511">Se puede usar la siguiente secuencia de acciones para garantizar que la aplicación siempre tiene la información de la interfaz de enrutamiento actual para un destino determinado:</span><span class="sxs-lookup"><span data-stu-id="a763d-511">The following sequence of actions can be used to guarantee that the application always has current routing interface information for a given destination:</span></span>

-   <span data-ttu-id="a763d-512">Problema de la **interfaz de enrutamiento de SiO \_ \_ \_ Change** ioctl</span><span class="sxs-lookup"><span data-stu-id="a763d-512">Issue **SIO\_ROUTING\_INTERFACE\_CHANGE** IOCTL</span></span>
-   <span data-ttu-id="a763d-513">Problema **de \_ \_ \_ consulta de interfaz de enrutamiento de SiO** ioctl</span><span class="sxs-lookup"><span data-stu-id="a763d-513">Issue **SIO\_ROUTING\_INTERFACE\_QUERY** IOCTL</span></span>
-   <span data-ttu-id="a763d-514">Siempre que el cambio de la interfaz de enrutamiento de SiO notifica a la aplicación de cambios de enrutamiento (ya sea a través de e/s superpuestas o mediante **\_ \_ \_** \_ el evento de cambio de la interfaz de enrutamiento FD \_ \_ ), se debe repetir la secuencia de acciones completa.</span><span class="sxs-lookup"><span data-stu-id="a763d-514">Whenever **SIO\_ROUTING\_INTERFACE\_CHANGE** IOCTL notifies the application of routing change (either through overlapped I/O or by signaling FD\_ROUTING\_INTERFACE\_CHANGE event), the whole sequence of actions should be repeated.</span></span>

<span data-ttu-id="a763d-515">Si el búfer de salida no es lo suficientemente grande como para contener la dirección de la interfaz, \_ se devuelve un error de socket como resultado de este ioctl y [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) devuelve [WSAEFAULT](windows-sockets-error-codes-2.md).</span><span class="sxs-lookup"><span data-stu-id="a763d-515">If the output buffer is not large enough to contain the interface address, SOCKET\_ERROR is returned as the result of this IOCTL and [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) returns [WSAEFAULT](windows-sockets-error-codes-2.md).</span></span> <span data-ttu-id="a763d-516">En este caso, se devolverá el tamaño necesario del búfer de salida en *lpcbBytesReturned* .</span><span class="sxs-lookup"><span data-stu-id="a763d-516">The required size of the output buffer will be returned in *lpcbBytesReturned* in this case.</span></span> <span data-ttu-id="a763d-517">Nota: el código de error WSAEFAULT también se devuelve si el parámetro *lpvInBuffer*, *lpvOutBuffer* o *lpcbBytesReturned* no está totalmente incluido en una parte válida del espacio de direcciones del usuario.</span><span class="sxs-lookup"><span data-stu-id="a763d-517">Note the WSAEFAULT error code is also returned if the *lpvInBuffer*, *lpvOutBuffer*, or *lpcbBytesReturned* parameter is not totally contained in a valid part of the user address space.</span></span>

<span data-ttu-id="a763d-518">Si no se puede tener acceso a la dirección de destino especificada en el búfer de entrada a través de cualquiera de las interfaces disponibles, \_ se devuelve un error de socket como resultado de este ioctl y [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) devuelve [WSAENETUNREACH](windows-sockets-error-codes-2.md) o incluso [WSAENETDOWN](windows-sockets-error-codes-2.md) si se pierde toda la conectividad de red.</span><span class="sxs-lookup"><span data-stu-id="a763d-518">If the destination address specified in the input buffer cannot be reached through any of the available interfaces, SOCKET\_ERROR is returned as the result of this IOCTL and [**WSAGetLastError**](/windows/desktop/api/winsock/nf-winsock-wsagetlasterror) returns [WSAENETUNREACH](windows-sockets-error-codes-2.md) or even [WSAENETDOWN](windows-sockets-error-codes-2.md) if all of the network connectivity is lost.</span></span>

### <a name="sio_set_compatibility_mode-opcode-setting-i-t3"></a><span data-ttu-id="a763d-519">SIO \_ set \_ Compatibility \_ Mode (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-519">SIO\_SET\_COMPATIBILITY\_MODE (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-520">Solicita el modo en que la pila de red debe controlar ciertos comportamientos para los que la manera predeterminada de controlar el comportamiento puede diferir en las versiones de Windows.</span><span class="sxs-lookup"><span data-stu-id="a763d-520">Requests how the networking stack should handle certain behaviors for which the default way of handling the behavior may differ across Windows versions.</span></span> <span data-ttu-id="a763d-521">La estructura de argumentos **del \_ \_ \_ modo de compatibilidad de SiO Set** se especifica en la estructura del **\_ \_ modo de compatibilidad WSA** definida en el archivo de encabezado *Mswsockdef. h* .</span><span class="sxs-lookup"><span data-stu-id="a763d-521">The argument structure for **SIO\_SET\_COMPATIBILITY\_MODE** is specified in the **WSA\_COMPATIBILITY\_MODE** structure defined in the *Mswsockdef.h* header file.</span></span> <span data-ttu-id="a763d-522">Esta estructura se define de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="a763d-522">This structure is defined as follows:</span></span>

```cpp
/* Argument structure for SIO_SET_COMPATIBILITY_MODE */
typedef struct _WSA_COMPATIBILITY_MODE {
    WSA_COMPATIBILITY_BEHAVIOR_ID BehaviorId;
    ULONG TargetOsVersion;
} WSA_COMPATIBILITY_MODE, *PWSA_COMPATIBILITY_MODE;
```

<span data-ttu-id="a763d-523">El valor especificado en el miembro **BehaviorId** indica el comportamiento solicitado.</span><span class="sxs-lookup"><span data-stu-id="a763d-523">The value specified in the **BehaviorId** member indicates the behavior requested.</span></span> <span data-ttu-id="a763d-524">El valor especificado en el miembro **TargetOsVersion** indica la versión de Windows que se solicita para el comportamiento.</span><span class="sxs-lookup"><span data-stu-id="a763d-524">The value specified in the **TargetOsVersion** member indicates the Windows version that is being requested for the behavior.</span></span>

<span data-ttu-id="a763d-525">El miembro **BehaviorId** puede ser uno de los valores del tipo de enumeración de identificador de **\_ \_ comportamiento \_ de compatibilidad WSA** definido en el archivo de encabezado *Mswsockdef. h* .</span><span class="sxs-lookup"><span data-stu-id="a763d-525">The **BehaviorId** member can be one of the values from the **WSA\_COMPATIBILITY\_BEHAVIOR\_ID** enumeration type defined in the *Mswsockdef.h* header file.</span></span> <span data-ttu-id="a763d-526">Los valores posibles para el miembro **BehaviorId** son los siguientes.</span><span class="sxs-lookup"><span data-stu-id="a763d-526">The possible values for the **BehaviorId** member are as follows.</span></span>

| <span data-ttu-id="a763d-527">Término</span><span class="sxs-lookup"><span data-stu-id="a763d-527">Term</span></span>                                                                                                                                                                             | <span data-ttu-id="a763d-528">Descripción</span><span class="sxs-lookup"><span data-stu-id="a763d-528">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|-|-|
| <span data-ttu-id="a763d-529"><span id="WsaBehaviorAll"></span><span id="wsabehaviorall"></span><span id="WSABEHAVIORALL"></span>WsaBehaviorAll</span><span class="sxs-lookup"><span data-stu-id="a763d-529"><span id="WsaBehaviorAll"></span><span id="wsabehaviorall"></span><span id="WSABEHAVIORALL"></span>WsaBehaviorAll</span></span><br/>                                                     | <span data-ttu-id="a763d-530">Esto es equivalente a solicitar todos los posibles comportamientos compatibles definidos para el **identificador de \_ \_ comportamiento de \_ compatibilidad WSA**.</span><span class="sxs-lookup"><span data-stu-id="a763d-530">This is equivalent to requesting all of the possible compatible behaviors defined for **WSA\_COMPATIBILITY\_BEHAVIOR\_ID**.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="a763d-531"><span id="WsaBehaviorReceiveBuffering"></span><span id="wsabehaviorreceivebuffering"></span><span id="WSABEHAVIORRECEIVEBUFFERING"></span>WsaBehaviorReceiveBuffering</span><span class="sxs-lookup"><span data-stu-id="a763d-531"><span id="WsaBehaviorReceiveBuffering"></span><span id="wsabehaviorreceivebuffering"></span><span id="WSABEHAVIORRECEIVEBUFFERING"></span>WsaBehaviorReceiveBuffering</span></span><br/> | <span data-ttu-id="a763d-532">Cuando el miembro **TargetOsVersion** se establece en un valor de Windows Vista o posterior, se permite reducir el tamaño del búfer de recepción TCP en este socket mediante la opción de socket **so \_ RCVBUF** , incluso después de establecer una conexión TCP.</span><span class="sxs-lookup"><span data-stu-id="a763d-532">When the **TargetOsVersion** member is set to a value for Windows Vista or later, reductions to the TCP receive buffer size on this socket using the **SO\_RCVBUF** socket option are allowed even after a TCP connection has been establishment.</span></span> <br/> <span data-ttu-id="a763d-533">Cuando el miembro **TargetOsVersion** se establece en un valor anterior a Windows Vista, no se permiten las reducciones del tamaño del búfer de recepción TCP en este socket mediante la opción de socket **so \_ RCVBUF** después del establecimiento de la conexión.</span><span class="sxs-lookup"><span data-stu-id="a763d-533">When the **TargetOsVersion** member is set to a value earlier than Windows Vista, reductions to the TCP receive buffer size on this socket using the **SO\_RCVBUF** socket option are not allowed after connection establishment.</span></span> <br/>                                                                                                                                                                                  |
| <span data-ttu-id="a763d-534"><span id="WsaBehaviorAutoTuning"></span><span id="wsabehaviorautotuning"></span><span id="WSABEHAVIORAUTOTUNING"></span>WsaBehaviorAutoTuning</span><span class="sxs-lookup"><span data-stu-id="a763d-534"><span id="WsaBehaviorAutoTuning"></span><span id="wsabehaviorautotuning"></span><span id="WSABEHAVIORAUTOTUNING"></span>WsaBehaviorAutoTuning</span></span><br/>                         | <span data-ttu-id="a763d-535">Cuando el miembro **TargetOsVersion** se establece en un valor de Windows Vista o posterior, el ajuste automático de la ventana de recepción está habilitado y el factor de escala de la ventana TCP se reduce a 2 desde el valor predeterminado de 8.</span><span class="sxs-lookup"><span data-stu-id="a763d-535">When the **TargetOsVersion** member is set to a value for Windows Vista or later, receive window auto-tuning is enabled and the TCP window scale factor is reduced to 2 from the default value of 8.</span></span><br/> <span data-ttu-id="a763d-536">Cuando **TargetOsVersion** se establece en un valor anterior a Windows Vista, se deshabilita el ajuste automático de la ventana de recepción.</span><span class="sxs-lookup"><span data-stu-id="a763d-536">When the **TargetOsVersion** is set to a value earlier than Windows Vista, receive window auto-tuning is disabled.</span></span> <span data-ttu-id="a763d-537">La opción de escalado de la ventana TCP también está deshabilitada y el tamaño máximo de la ventana de recepción true está limitado a 65.535 bytes.</span><span class="sxs-lookup"><span data-stu-id="a763d-537">The TCP window scaling option is also disabled and the maximum true receive window size is limited to 65,535 bytes.</span></span> <span data-ttu-id="a763d-538">No se puede negociar la opción de escalado de la ventana TCP en la conexión aunque se haya llamado a la opción de socket for **\_ RCVBUF** en este socket, especificando un valor superior a 65.535 bytes antes de que se establezca la conexión.</span><span class="sxs-lookup"><span data-stu-id="a763d-538">The TCP window scaling option can't be negotiated on the connection even if the **SO\_RCVBUF** socket option was called on this socket specifying a value greater than 65,535 bytes before the connection was established.</span></span><br/> |



 

<span data-ttu-id="a763d-539">Para obtener información más detallada, consulte la referencia de [**\_ modo de \_ compatibilidad \_ de SiO Set**](/previous-versions/windows/desktop/legacy/cc136103(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-539">For more detailed information, see the [**SIO\_SET\_COMPATIBILITY\_MODE**](/previous-versions/windows/desktop/legacy/cc136103(v=vs.85)) reference.</span></span>

<span data-ttu-id="a763d-540">**SiO \_ El \_ \_ modo de compatibilidad Set** es compatible con Windows Vista y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-540">**SIO\_SET\_COMPATIBILITY\_MODE** is supported on Windows Vista and later.</span></span>

### <a name="sio_set_group_qos-opcode-setting-i-t1"></a><span data-ttu-id="a763d-541">SIO \_ establecer \_ QoS de grupo \_ (configuración de OpCode: I, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-541">SIO\_SET\_GROUP\_QOS (opcode setting: I, T==1)</span></span>

<span data-ttu-id="a763d-542">Reservado.</span><span class="sxs-lookup"><span data-stu-id="a763d-542">Reserved.</span></span>

### <a name="sio_set_priority_hint-opcode-setting-i-t3"></a><span data-ttu-id="a763d-543">SIO_SET_PRIORITY_HINT (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-543">SIO_SET_PRIORITY_HINT (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-544">Proporciona una sugerencia al Protocolo de transporte subyacente para tratar el tráfico de este socket con una prioridad específica.</span><span class="sxs-lookup"><span data-stu-id="a763d-544">Provides a hint to the underlying transport protocol to treat the traffic on this socket with a specific priority.</span></span> <span data-ttu-id="a763d-545">*LpvInBuffer* debe apuntar a una variable de tipo **PRIORITY_HINT** con *cbInBuffer* establecido en sizeof (PRIORITY_HINT).</span><span class="sxs-lookup"><span data-stu-id="a763d-545">The *lpvInBuffer* must point to a variable of type **PRIORITY_HINT** with *cbInBuffer* set to sizeof(PRIORITY_HINT).</span></span> <span data-ttu-id="a763d-546">Los parámetros *lpvOutBuffer* y *CbOutBuffer* deben ser **null** y 0, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="a763d-546">The *lpvOutBuffer* and *cbOutBuffer* parameters must be **NULL** and 0, respectively.</span></span> <span data-ttu-id="a763d-547">La implementación de TCP de Microsoft Windows admite este IOCTL a partir de Windows 10, versión 1809 (10,0; Compilación 17763) y versiones posteriores, como se indica a continuación: cuando el valor de prioridad solicitado se establece en **IoPriorityHintVeryLow**, TCP usa una versión modificada del algoritmo LEDBAT (definida en RFC 6817) para controlar la velocidad de tráfico saliente en el socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-547">The Microsoft Windows TCP implementation supports this IOCTL starting with Windows 10, version 1809 (10.0; Build 17763) and later as follows: when the requested priority value is set to **IoPriorityHintVeryLow**, TCP uses a modified version of the LEDBAT algorithm (defined in RFC 6817) for controlling the outbound traffic rate on the socket.</span></span> <span data-ttu-id="a763d-548">Este IOCTL no afecta al tráfico de entrada.</span><span class="sxs-lookup"><span data-stu-id="a763d-548">The inbound traffic is not affected by this IOCTL.</span></span> <span data-ttu-id="a763d-549">LEDBAT es un algoritmo de eliminación de registros obsoletos, y su objetivo es mantener una latencia baja y evitar cualquier efecto adverso en el tráfico de prioridad normal al salir del camino cuando está presente tráfico de prioridad normal.</span><span class="sxs-lookup"><span data-stu-id="a763d-549">LEDBAT is a scavenger algorithm, and its goal is to keep latency low and prevent any adverse effect on normal-priority traffic by getting out of the way when normal-priority traffic is present.</span></span>

<span data-ttu-id="a763d-550">Consulte también [RFC 6817](https://tools.ietf.org/html/rfc6817).</span><span class="sxs-lookup"><span data-stu-id="a763d-550">Also see [RFC 6817](https://tools.ietf.org/html/rfc6817).</span></span>

<span data-ttu-id="a763d-551">**SIO_SET_PRIORITY_HINT** es compatible con Windows 10, versión 1809 (10,0; Compilación 17763) y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-551">**SIO_SET_PRIORITY_HINT** is supported on Windows 10, version 1809 (10.0; Build 17763) and later.</span></span>

### <a name="sio_set_qos-opcode-setting-i-t1"></a><span data-ttu-id="a763d-552">SIO \_ set \_ QoS (configuración de OpCode: I, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-552">SIO\_SET\_QOS (opcode setting: I, T==1)</span></span>

<span data-ttu-id="a763d-553">Asociar la estructura [**QoS**](/windows/win32/api/winsock2/ns-winsock2-qos) especificada al socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-553">Associate the specified [**QOS**](/windows/win32/api/winsock2/ns-winsock2-qos) structure with the socket.</span></span> <span data-ttu-id="a763d-554">No se requiere ningún búfer de salida, la estructura de **QoS** se obtiene del búfer de entrada.</span><span class="sxs-lookup"><span data-stu-id="a763d-554">No output buffer is required, the **QOS** structure will be obtained from the input buffer.</span></span> <span data-ttu-id="a763d-555">El código de error [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) se indica para los proveedores de servicios que no admiten la calidad de servicio.</span><span class="sxs-lookup"><span data-stu-id="a763d-555">The [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) error code is indicated for service providers that do not support quality of service.</span></span>

### <a name="sio_tcp_initial_rto-opcode-setting-i-t3"></a><span data-ttu-id="a763d-556">SIO_TCP_INITIAL_RTO (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-556">SIO_TCP_INITIAL_RTO (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-557">Controla las características de retransmisión iniciales (SYN/SYN + ACK) de un socket TCP mediante la configuración de los parámetros de tiempo de espera de retransmisión inicial (RTO).</span><span class="sxs-lookup"><span data-stu-id="a763d-557">Controls the initial (SYN / SYN+ACK) retransmission characteristics of a TCP socket by configuring initial retransmission timeout (RTO) parameters.</span></span> <span data-ttu-id="a763d-558">Los parámetros de configuración se especifican en una estructura de [**\_ \_ \_ parámetros de RTO iniciales de TCP**](/windows/desktop/api/mswsock/ns-mswsock-transmit_file_buffers) .</span><span class="sxs-lookup"><span data-stu-id="a763d-558">The configuration parameters are specified in a [**TCP\_INITIAL\_RTO\_PARAMETERS**](/windows/desktop/api/mswsock/ns-mswsock-transmit_file_buffers) structure.</span></span>

<span data-ttu-id="a763d-559">Para obtener información más detallada, consulte la referencia de [**SIO_TCP_INITIAL_RTO**](./sio-tcp-initial-rto.md) .</span><span class="sxs-lookup"><span data-stu-id="a763d-559">For more detailed information, see the [**SIO_TCP_INITIAL_RTO**](./sio-tcp-initial-rto.md) reference.</span></span> <span data-ttu-id="a763d-560">[**SIO_TCP_INITIAL_RTO**](./sio-tcp-initial-rto.md) es compatible con Windows 8, windows Server 2012 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-560">[**SIO_TCP_INITIAL_RTO**](./sio-tcp-initial-rto.md) is supported on Windows 8, Windows Server 2012, and later.</span></span>

### <a name="sio_translate_handle-opcode-setting-i-o-t1"></a><span data-ttu-id="a763d-561">SIO \_ translate \_ HANDLE (configuración de OpCode: I, O, T = = 1)</span><span class="sxs-lookup"><span data-stu-id="a763d-561">SIO\_TRANSLATE\_HANDLE (opcode setting: I, O, T==1)</span></span>

<span data-ttu-id="a763d-562">Para obtener un identificador correspondiente para socket *s* que es válido en el contexto de una interfaz complementaria (por ejemplo, \_ NETDEV y TH \_ TAPI).</span><span class="sxs-lookup"><span data-stu-id="a763d-562">To obtain a corresponding handle for socket *s* that is valid in the context of a companion interface (for example, TH\_NETDEV and TH\_TAPI).</span></span> <span data-ttu-id="a763d-563">En el búfer de entrada se especifica una constante de manifiesto que identifica la interfaz complementaria junto con cualquier otro parámetro necesario.</span><span class="sxs-lookup"><span data-stu-id="a763d-563">A manifest constant identifying the companion interface along with any other needed parameters are specified in the input buffer.</span></span> <span data-ttu-id="a763d-564">El identificador correspondiente estará disponible en el búfer de salida tras la finalización de esta función.</span><span class="sxs-lookup"><span data-stu-id="a763d-564">The corresponding handle will be available in the output buffer upon completion of this function.</span></span> <span data-ttu-id="a763d-565">Consulte la sección correspondiente en los [anexos de Winsock](winsock-annexes.md) para obtener detalles específicos de una determinada interfaz del complemento.</span><span class="sxs-lookup"><span data-stu-id="a763d-565">Refer to the appropriate section in [Winsock Annexes](winsock-annexes.md) for details specific to a particular companion interface.</span></span> <span data-ttu-id="a763d-566">El código de error [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) se indica para los proveedores de servicios que no admiten este ioctl para la interfaz complementaria especificada.</span><span class="sxs-lookup"><span data-stu-id="a763d-566">The [WSAENOPROTOOPT](windows-sockets-error-codes-2.md) error code is indicated for service providers that do not support this IOCTL for the specified companion interface.</span></span> <span data-ttu-id="a763d-567">Este IOCTL recupera el identificador asociado mediante el **\_ \_ identificador** de la traducción de SiO.</span><span class="sxs-lookup"><span data-stu-id="a763d-567">This IOCTL retrieves the handle associated using **SIO\_TRANSLATE\_HANDLE**.</span></span>

<span data-ttu-id="a763d-568">Se recomienda usar el modelo de objetos componentes (COM) en lugar de este IOCTL para detectar y realizar el seguimiento de otras interfaces que podrían ser compatibles con un socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-568">It is recommend that the Component Object Model (COM) be used instead of this IOCTL to discover and track other interfaces that might be supported by a socket.</span></span> <span data-ttu-id="a763d-569">Este IOCTL está presente por compatibilidad con versiones anteriores de los sistemas en los que COM no está disponible o no se puede usar por algún otro motivo.</span><span class="sxs-lookup"><span data-stu-id="a763d-569">This IOCTL is present for backward compatibility with systems where COM is not available or cannot be used for some other reason.</span></span>

### <a name="sio_udp_connreset-opcode-setting-i-t3"></a><span data-ttu-id="a763d-570">SIO \_ UDP \_ CONNRESET (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-570">SIO\_UDP\_CONNRESET (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-571">**Windows XP:** Controla si \_ se registran los mensajes de puerto UDP INalcanzable.</span><span class="sxs-lookup"><span data-stu-id="a763d-571">**Windows XP:** Controls whether UDP PORT\_UNREACHABLE messages are reported.</span></span> <span data-ttu-id="a763d-572">Establézcalo en **true** para habilitar la creación de informes.</span><span class="sxs-lookup"><span data-stu-id="a763d-572">Set to **TRUE** to enable reporting.</span></span> <span data-ttu-id="a763d-573">Establézcalo en **false** para deshabilitar los informes.</span><span class="sxs-lookup"><span data-stu-id="a763d-573">Set to **FALSE** to disable reporting.</span></span>

### <a name="sio_set_wfp_connection_redirect_records-opcode-setting-i-t3"></a><span data-ttu-id="a763d-574">SIO \_ establecer \_ \_ registros de redirección de conexión de WFP \_ \_ (configuración de OpCode: I, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-574">SIO\_SET\_WFP\_CONNECTION\_REDIRECT\_RECORDS (opcode setting: I, T==3)</span></span>

<span data-ttu-id="a763d-575">Establece el registro de redirección en el nuevo socket TCP usado para conectarse al destino final para que lo use un servicio de redirección de la plataforma de filtrado de Windows (WFP).</span><span class="sxs-lookup"><span data-stu-id="a763d-575">Sets the redirect record to the new TCP socket used for connecting to the final destination for use by a Windows Filtering Platform (WFP) redirect service.</span></span>

<span data-ttu-id="a763d-576">El [**valor de SiO \_ set \_ WFP \_ Connection \_ Redirect \_ Records**](/previous-versions/windows/desktop/legacy/hh859714(v=vs.85)) se usa como parte del seguimiento de la conexión de proxy en las conexiones de socket redirigido.</span><span class="sxs-lookup"><span data-stu-id="a763d-576">The [**SIO\_SET\_WFP\_CONNECTION\_REDIRECT\_RECORDS**](/previous-versions/windows/desktop/legacy/hh859714(v=vs.85)) IOCTL is used as part of proxied connection tracking on redirected socket connections.</span></span> <span data-ttu-id="a763d-577">Esta característica de WFP facilita el seguimiento de los registros de redireccionamiento de la redirección inicial de una conexión a la conexión final con el destino.</span><span class="sxs-lookup"><span data-stu-id="a763d-577">This WFP feature facilitates tracking of redirection records from the initial redirect of a connection to the final connection to the destination.</span></span>

<span data-ttu-id="a763d-578">Para obtener información más detallada, consulte la referencia de los [**\_ \_ \_ \_ \_ registros de redireccionamiento de conexión de WFP Set**](/previous-versions/windows/desktop/legacy/hh859714(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="a763d-578">For more detailed information, see the [**SIO\_SET\_WFP\_CONNECTION\_REDIRECT\_RECORDS**](/previous-versions/windows/desktop/legacy/hh859714(v=vs.85)) reference.</span></span> <span data-ttu-id="a763d-579">**SiO \_ En Windows 8, Windows Server 2012 y versiones posteriores, se admite el establecimiento de \_ \_ \_ \_ registros de redirección de conexión de WFP** .</span><span class="sxs-lookup"><span data-stu-id="a763d-579">**SIO\_SET\_WFP\_CONNECTION\_REDIRECT\_RECORDS** is supported on Windows 8, Windows Server 2012, and later.</span></span>

### <a name="sio_tcp_info-opcode-setting-i-o-t3"></a><span data-ttu-id="a763d-580">SIO \_ TCP \_ info (configuración de OpCode: I, O, T = = 3)</span><span class="sxs-lookup"><span data-stu-id="a763d-580">SIO\_TCP\_INFO (opcode setting: I, O, T==3)</span></span>

<span data-ttu-id="a763d-581">Recupera las estadísticas TCP para un socket.</span><span class="sxs-lookup"><span data-stu-id="a763d-581">Retrieves the TCP statistics for a socket.</span></span> <span data-ttu-id="a763d-582">Las estadísticas de TCP se proporcionan en una estructura [**\_ \_ V0 de TCP info**](/windows/desktop/api/Mstcpip/ns-mstcpip-tcp_info_v0) .</span><span class="sxs-lookup"><span data-stu-id="a763d-582">The TCP statistics are provided in a [**TCP\_INFO\_v0**](/windows/desktop/api/Mstcpip/ns-mstcpip-tcp_info_v0) structure.</span></span>

<span data-ttu-id="a763d-583">A diferencia de la recuperación de estadísticas TCP con la función [**GetPerTcpConnectionEStats**](/windows/win32/api/iphlpapi/nf-iphlpapi-getpertcpconnectionestats) , la recuperación de estadísticas TCP con este código de control no requiere que el código de usuario cargue, almacene y filtre la tabla de conexiones TCP, y no requiere privilegios elevados para su uso.</span><span class="sxs-lookup"><span data-stu-id="a763d-583">Unlike retrieving TCP statistics with the [**GetPerTcpConnectionEStats**](/windows/win32/api/iphlpapi/nf-iphlpapi-getpertcpconnectionestats) function, retrieving TCP statistics with this control code does not require the user code to load, store, and filter the TCP connection table, and does not require elevated privileges to use.</span></span>

<span data-ttu-id="a763d-584">Para obtener más información, consulte [**SiO \_ TCP \_ info**](/previous-versions/windows/desktop/legacy/mt823415(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="a763d-584">For more information, see [**SIO\_TCP\_INFO**](/previous-versions/windows/desktop/legacy/mt823415(v=vs.85)).</span></span> <span data-ttu-id="a763d-585">**SiO \_ La \_ información de TCP** es compatible con Windows 10, la versión 1703, Windows Server 2016 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="a763d-585">**SIO\_TCP\_INFO** is supported on Windows 10, version 1703, Windows Server 2016, and later.</span></span>

## <a name="remarks"></a><span data-ttu-id="a763d-586">Observaciones</span><span class="sxs-lookup"><span data-stu-id="a763d-586">Remarks</span></span>

<span data-ttu-id="a763d-587">Los ioctl de Winsock se definen en varios archivos de encabezado diferentes.</span><span class="sxs-lookup"><span data-stu-id="a763d-587">Winsock Ioctls are defined in a number of different header files.</span></span> <span data-ttu-id="a763d-588">Entre ellos se incluyen el archivo de encabezado *WinSock2. h*, *mswsock. h* y *Mstcpip. h* .</span><span class="sxs-lookup"><span data-stu-id="a763d-588">These include the *Winsock2.h*, *Mswsock.h*, and *Mstcpip.h* header file.</span></span>

<span data-ttu-id="a763d-589">En el kit de desarrollo de software (SDK) de Microsoft Windows publicado para Windows Vista y versiones posteriores, la organización de los archivos de encabezado ha cambiado y también se han definido varios ioctl de Winsock en los archivos de encabezado *Ws2def. h*, *Ws2ipdef. h* y *Mswsockdef. h* .</span><span class="sxs-lookup"><span data-stu-id="a763d-589">On the Microsoft Windows Software Development Kit (SDK) released for Windows Vista and later, the organization of header files has changed and a number of Winsock Ioctls are also defined in the *Ws2def.h*, *Ws2ipdef.h*, and *Mswsockdef.h* header files.</span></span> <span data-ttu-id="a763d-590">El archivo de encabezado *Ws2def. h* se incluye automáticamente en el archivo de encabezado *WinSock2. h* .</span><span class="sxs-lookup"><span data-stu-id="a763d-590">The *Ws2def.h* header file is automatically included by the *Winsock2.h* header file.</span></span> <span data-ttu-id="a763d-591">El archivo de encabezado *Ws2ipdef. h* se incluye automáticamente en el archivo de encabezado *Ws2tcpip. h* .</span><span class="sxs-lookup"><span data-stu-id="a763d-591">The *Ws2ipdef.h* header file is automatically included by the *Ws2tcpip.h* header file.</span></span> <span data-ttu-id="a763d-592">El archivo de encabezado *Mswsockdef. h* se incluye automáticamente en el archivo de encabezado *Mswsockdef. h* .</span><span class="sxs-lookup"><span data-stu-id="a763d-592">The *Mswsockdef.h* header file is automatically included in the *Mswsockdef.h* header file.</span></span>

## <a name="requirements"></a><span data-ttu-id="a763d-593">Requisitos</span><span class="sxs-lookup"><span data-stu-id="a763d-593">Requirements</span></span>

|||
|-|-|
| <span data-ttu-id="a763d-594">Encabezado</span><span class="sxs-lookup"><span data-stu-id="a763d-594">Header</span></span><br/> | <dl> <span data-ttu-id="a763d-595"><dt>WinSock2. h; </dt> <dt>Mstcpip. h; </dt> <dt>Mswsock. h; </dt> <dt>Mswsockdef. h en Windows Vista, Windows Server 2008 y Windows 7 (incluido mswsock. h); </dt> <dt>Ws2def. h en Windows Vista, Windows Server 2008 y Windows 7 (incluido WinSock2. h); </dt> <dt>Ws2ipdef. h en Windows Vista, Windows Server 2008 y Windows 7 (incluido Ws2tcpip. h)</dt></span><span class="sxs-lookup"><span data-stu-id="a763d-595"><dt>Winsock2.h; </dt> <dt>Mstcpip.h; </dt> <dt>Mswsock.h; </dt> <dt>Mswsockdef.h on Windows Vista, Windows Server 2008 and Windows 7 (include Mswsock.h); </dt> <dt>Ws2def.h on Windows Vista, Windows Server 2008 and Windows 7 (include Winsock2.h); </dt> <dt>Ws2ipdef.h on Windows Vista, Windows Server 2008 and Windows 7 (include Ws2tcpip.h)</dt></span></span> </dl> |
