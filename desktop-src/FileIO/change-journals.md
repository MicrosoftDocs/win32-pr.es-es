---
description: Cuando se realiza cualquier cambio en un archivo o directorio de un volumen, el diario de cambios USN para ese volumen se actualiza con una descripción del cambio y el nombre del archivo o directorio.
ms.assetid: 9a158c2b-da8e-4ca9-b3c1-2185cf41eb7d
title: Cambiar diarios
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb5052ec87830a822270071a6ee00f1c3f7cffdd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "103912873"
---
# <a name="change-journals"></a><span data-ttu-id="8692e-103">Cambiar diarios</span><span class="sxs-lookup"><span data-stu-id="8692e-103">Change Journals</span></span>

<span data-ttu-id="8692e-104">Una aplicación de copia de seguridad automática es un ejemplo de un programa que debe comprobar si hay cambios en el estado de un volumen para realizar su tarea.</span><span class="sxs-lookup"><span data-stu-id="8692e-104">An automatic backup application is one example of a program that must check for changes to the state of a volume to perform its task.</span></span> <span data-ttu-id="8692e-105">El método de fuerza bruta para comprobar los cambios en los directorios o archivos es examinar todo el volumen.</span><span class="sxs-lookup"><span data-stu-id="8692e-105">The brute force method of checking for changes in directories or files is to scan the entire volume.</span></span> <span data-ttu-id="8692e-106">Sin embargo, esto no suele ser un enfoque aceptable debido a la disminución del rendimiento del sistema que podría provocar.</span><span class="sxs-lookup"><span data-stu-id="8692e-106">However, this is often not an acceptable approach because of the decrease in system performance it would cause.</span></span> <span data-ttu-id="8692e-107">Otro método es que la aplicación registre una notificación de directorio (llamando a las funciones [**FindFirstChangeNotification**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstchangenotificationa) o [**ReadDirectoryChangesW**](/windows/desktop/api/WinBase/nf-winbase-readdirectorychangesw) ) de los directorios de los que se va a realizar una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="8692e-107">Another method is for the application to register a directory notification (by calling the [**FindFirstChangeNotification**](/windows/desktop/api/FileAPI/nf-fileapi-findfirstchangenotificationa) or [**ReadDirectoryChangesW**](/windows/desktop/api/WinBase/nf-winbase-readdirectorychangesw) functions) for the directories to be backed up.</span></span> <span data-ttu-id="8692e-108">Esto es más eficaz que el primer método, sin embargo, requiere que una aplicación se esté ejecutando en todo momento.</span><span class="sxs-lookup"><span data-stu-id="8692e-108">This is more efficient than the first method, however, it requires that an application be running at all times.</span></span> <span data-ttu-id="8692e-109">Además, si se debe realizar una copia de seguridad de un gran número de directorios y archivos, la cantidad de procesamiento y sobrecarga de memoria para este tipo de aplicación también podría hacer que el rendimiento del sistema operativo disminuya.</span><span class="sxs-lookup"><span data-stu-id="8692e-109">Also, if a large number of directories and files must be backed up, the amount of processing and memory overhead for such an application might also cause the operating system's performance to decrease.</span></span>

<span data-ttu-id="8692e-110">Para evitar estas desventajas, el sistema de archivos NTFS mantiene un diario de cambios de números de secuencias actualizadas (USN).</span><span class="sxs-lookup"><span data-stu-id="8692e-110">To avoid these disadvantages, the NTFS file system maintains an update sequence number (USN) change journal.</span></span> <span data-ttu-id="8692e-111">Cuando se realiza cualquier cambio en un archivo o directorio de un volumen, el diario de cambios USN para ese volumen se actualiza con una descripción del cambio y el nombre del archivo o directorio.</span><span class="sxs-lookup"><span data-stu-id="8692e-111">When any change is made to a file or directory in a volume, the USN change journal for that volume is updated with a description of the change and the name of the file or directory.</span></span>

<span data-ttu-id="8692e-112">Los diarios de cambios también son necesarios para recuperar la indexación del sistema de archivos, por ejemplo después de un error de equipo o de volumen.</span><span class="sxs-lookup"><span data-stu-id="8692e-112">Change journals are also needed to recover file system indexing for example after a computer or volume failure.</span></span> <span data-ttu-id="8692e-113">La capacidad de recuperar la indexación significa que el sistema de archivos puede evitar el proceso lento de volver a indexar todo el volumen en estos casos.</span><span class="sxs-lookup"><span data-stu-id="8692e-113">The ability to recover indexing means the file system can avoid the time-consuming process of reindexing the entire volume in such cases.</span></span>

<span data-ttu-id="8692e-114">En los temas siguientes se describen los diarios de cambios.</span><span class="sxs-lookup"><span data-stu-id="8692e-114">The following topics discuss change journals.</span></span>

## <a name="in-this-section"></a><span data-ttu-id="8692e-115">En esta sección</span><span class="sxs-lookup"><span data-stu-id="8692e-115">In this section</span></span>



| <span data-ttu-id="8692e-116">Tema</span><span class="sxs-lookup"><span data-stu-id="8692e-116">Topic</span></span>                                                                                                                             | <span data-ttu-id="8692e-117">Descripción</span><span class="sxs-lookup"><span data-stu-id="8692e-117">Description</span></span>                                                                                                                                                                                                                                          |
|-----------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="8692e-118">Cambiar registros de diario</span><span class="sxs-lookup"><span data-stu-id="8692e-118">Change Journal Records</span></span>](change-journal-records.md)<br/>                                                                   | <span data-ttu-id="8692e-119">A medida que se agregan, eliminan y modifican archivos, directorios y otros objetos del sistema de archivos NTFS, el sistema de archivos NTFS escribe en secuencias los registros del diario de cambios, uno para cada volumen del equipo.</span><span class="sxs-lookup"><span data-stu-id="8692e-119">As files, directories, and other NTFS file system objects are added, deleted, and modified, the NTFS file system enters change journal records in streams, one for each volume on the computer.</span></span><br/>                                           |
| [<span data-ttu-id="8692e-120">Usar el identificador del diario de cambios</span><span class="sxs-lookup"><span data-stu-id="8692e-120">Using the Change Journal Identifier</span></span>](using-the-change-journal-identifier.md)<br/>                                         | <span data-ttu-id="8692e-121">El sistema de archivos NTFS asocia un identificador de 64 bits sin signo a cada diario de cambios.</span><span class="sxs-lookup"><span data-stu-id="8692e-121">The NTFS file system associates an unsigned 64-bit identifier with each change journal.</span></span><br/>                                                                                                                                                   |
| [<span data-ttu-id="8692e-122">Creación, modificación y eliminación de un diario de cambios</span><span class="sxs-lookup"><span data-stu-id="8692e-122">Creating, Modifying, and Deleting a Change Journal</span></span>](creating-modifying-and-deleting-a-change-journal.md)<br/>             | <span data-ttu-id="8692e-123">Los administradores pueden crear, eliminar y volver a crear diarios de cambios.</span><span class="sxs-lookup"><span data-stu-id="8692e-123">Administrators can create, delete, and re-create change journals.</span></span><br/>                                                                                                                                                                         |
| [<span data-ttu-id="8692e-124">Obtención de un identificador de volumen para las operaciones del diario de cambios</span><span class="sxs-lookup"><span data-stu-id="8692e-124">Obtaining a Volume Handle for Change Journal Operations</span></span>](obtaining-a-volume-handle-for-change-journal-operations.md)<br/> | <span data-ttu-id="8692e-125">Para obtener un identificador de un volumen para su uso con las operaciones del diario de cambios del número de secuencias actualizadas (USN), llame a la función [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) con el parámetro *lpFileName* establecido en una cadena de la siguiente forma: \\ \\ . \\ *X*.</span><span class="sxs-lookup"><span data-stu-id="8692e-125">To obtain a handle to a volume for use with update sequence number (USN) change journal operations, call the [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea) function with the *lpFileName* parameter set to a string of the following form: \\\\.\\*X*.</span></span><br/> |
| [<span data-ttu-id="8692e-126">Cambiar operaciones de diario</span><span class="sxs-lookup"><span data-stu-id="8692e-126">Change Journal Operations</span></span>](change-journal-operations.md)<br/>                                                             | <span data-ttu-id="8692e-127">Códigos y estructuras de control que se usarán con el diario de cambios del número de secuencias actualizadas (USN) del sistema de archivos NTFS.</span><span class="sxs-lookup"><span data-stu-id="8692e-127">Control codes and structures to use with the NTFS file system update sequence number (USN) change journal.</span></span><br/>                                                                                                                                |



 

 

 




