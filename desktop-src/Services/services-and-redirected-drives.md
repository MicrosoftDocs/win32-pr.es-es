---
description: Un servicio (o cualquier proceso que se ejecute en un contexto de seguridad diferente) que deba tener acceso a un recurso remoto debe usar el nombre UNC (Convención de nomenclatura universal) para tener acceso al recurso.
ms.assetid: 2582259d-077c-4089-9a87-1a377994f0bd
title: Servicios y unidades redirigidas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a3b1435e69ded3bf13a0869a0b9ad2b90bb4682c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104002842"
---
# <a name="services-and-redirected-drives"></a><span data-ttu-id="7c705-103">Servicios y unidades redirigidas</span><span class="sxs-lookup"><span data-stu-id="7c705-103">Services and Redirected Drives</span></span>

<span data-ttu-id="7c705-104">Un servicio (o cualquier proceso que se ejecute en un contexto de seguridad diferente) que deba tener acceso a un recurso remoto debe usar el nombre UNC (Convención de nomenclatura universal) para tener acceso al recurso.</span><span class="sxs-lookup"><span data-stu-id="7c705-104">A service (or any process running in a different security context) that must access a remote resource should use the Universal Naming Convention (UNC) name to access the resource.</span></span> <span data-ttu-id="7c705-105">El servicio debe tener los privilegios adecuados para tener acceso al recurso.</span><span class="sxs-lookup"><span data-stu-id="7c705-105">The service must have appropriate privileges to access the resource.</span></span> <span data-ttu-id="7c705-106">Si un servicio del lado servidor utiliza una conexión RPC, la delegación debe estar habilitada en el servidor remoto.</span><span class="sxs-lookup"><span data-stu-id="7c705-106">If a server-side service uses an RPC connection, delegation must be enabled on the remote server.</span></span>

<span data-ttu-id="7c705-107">Las letras de unidad no son globales para el sistema.</span><span class="sxs-lookup"><span data-stu-id="7c705-107">Drive letters are not global to the system.</span></span> <span data-ttu-id="7c705-108">Cada sesión de inicio de sesión recibe su propio conjunto de Letras de unidad de la a a la Z. Por lo tanto, las unidades redirigidas no se pueden compartir entre procesos que se ejecutan en distintas cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="7c705-108">Each logon session receives its own set of drive letters from A to Z. Therefore, redirected drives cannot be shared between processes running under different user accounts.</span></span> <span data-ttu-id="7c705-109">Además, un servicio (o cualquier proceso que se ejecute en su propia sesión de inicio de sesión) no puede tener acceso a las letras de unidad que se establecieron en una sesión de inicio de sesión diferente.</span><span class="sxs-lookup"><span data-stu-id="7c705-109">Moreover, a service (or any process running within its own logon session) cannot access the drive letters that were established within a different logon session.</span></span>

<span data-ttu-id="7c705-110">Un servicio no debe tener acceso directamente a los recursos locales o de red a través de las letras de unidad asignadas, ni debe llamar al comando **net use** para asignar las letras de unidad en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="7c705-110">A service should not directly access local or network resources through mapped drive letters, nor should it call the **net use** command to map drive letters at run time.</span></span> <span data-ttu-id="7c705-111">El comando **net use** no se recomienda por varias razones:</span><span class="sxs-lookup"><span data-stu-id="7c705-111">The **net use** command is not recommended for several reasons:</span></span>

-   <span data-ttu-id="7c705-112">Las asignaciones de unidad existen entre los contextos de inicio de sesión, por lo que si una aplicación se ejecuta en el contexto de la [cuenta LocalService](localservice-account.md), cualquier otro servicio que se ejecute en ese contexto puede tener acceso a la unidad asignada.</span><span class="sxs-lookup"><span data-stu-id="7c705-112">Drive mappings exist across logon contexts, so if an application is running in the context of the [LocalService account](localservice-account.md), then any other service running in that context may have access to the mapped drive.</span></span>
-   <span data-ttu-id="7c705-113">Si el servicio proporciona credenciales explícitas a un comando de **uso de red** , esas credenciales podrían compartirse accidentalmente fuera de los límites del servicio.</span><span class="sxs-lookup"><span data-stu-id="7c705-113">If the service provides explicit credentials to a **net use** command, those credentials might be inadvertently shared outside of the service boundaries.</span></span> <span data-ttu-id="7c705-114">En su lugar, el servicio debe utilizar la [suplantación de cliente](/windows/desktop/SecAuthZ/client-impersonation) para suplantar al usuario.</span><span class="sxs-lookup"><span data-stu-id="7c705-114">Instead, the service should use [client impersonation](/windows/desktop/SecAuthZ/client-impersonation) to impersonate the user.</span></span>
-   <span data-ttu-id="7c705-115">Varios servicios que se ejecutan en el mismo contexto pueden interferir entre sí.</span><span class="sxs-lookup"><span data-stu-id="7c705-115">Multiple services running in the same context may interfere with each other.</span></span> <span data-ttu-id="7c705-116">Si ambos servicios realizan un **uso neto** explícito y proporcionan las mismas credenciales al mismo tiempo, se producirá un error en un servicio con el error "ya conectado".</span><span class="sxs-lookup"><span data-stu-id="7c705-116">If both services perform an explicit **net use** and provide the same credentials at the same time, one service will fail with an "already connected" error.</span></span>

<span data-ttu-id="7c705-117">Además, un servicio no debe usar las [funciones de red de Windows](/windows/desktop/WNet/windows-networking-functions) para administrar las letras de unidad asignadas.</span><span class="sxs-lookup"><span data-stu-id="7c705-117">Additionally, a service should not use the [Windows Networking Functions](/windows/desktop/WNet/windows-networking-functions) to manage mapped drive letters.</span></span> <span data-ttu-id="7c705-118">Aunque las funciones de WNet pueden volver correctamente, el comportamiento resultante no es el previsto.</span><span class="sxs-lookup"><span data-stu-id="7c705-118">Although the WNet functions may return successfully, the resulting behavior is not as intended.</span></span> <span data-ttu-id="7c705-119">Cuando el sistema establece una unidad redirigida, se almacena por usuario.</span><span class="sxs-lookup"><span data-stu-id="7c705-119">When the system establishes a redirected drive, it is stored on a per-user basis.</span></span> <span data-ttu-id="7c705-120">Solo el usuario puede administrar la unidad redirigida.</span><span class="sxs-lookup"><span data-stu-id="7c705-120">Only the user is able to manage the redirected drive.</span></span> <span data-ttu-id="7c705-121">El sistema realiza un seguimiento de las unidades redirigidas según el identificador de seguridad (SID) de inicio de sesión del usuario.</span><span class="sxs-lookup"><span data-stu-id="7c705-121">The system keeps track of redirected drives based on the user's logon security identifier (SID).</span></span> <span data-ttu-id="7c705-122">El SID de inicio de sesión es un identificador único para la sesión de inicio de sesión del usuario.</span><span class="sxs-lookup"><span data-stu-id="7c705-122">The logon SID is a unique identifier for the user's logon session.</span></span> <span data-ttu-id="7c705-123">Un solo usuario puede tener varias sesiones de inicio de sesión simultáneas en el sistema.</span><span class="sxs-lookup"><span data-stu-id="7c705-123">A single user can have multiple, simultaneous logon sessions on the system.</span></span>

<span data-ttu-id="7c705-124">Si un servicio está configurado para ejecutarse en una cuenta de usuario, el sistema siempre crea una nueva sesión de inicio de sesión para el usuario e inicia el servicio en esa nueva sesión de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="7c705-124">If a service is configured to run under a user account, the system always creates a new logon session for the user and starts the service in that new logon session.</span></span> <span data-ttu-id="7c705-125">Por lo tanto, un servicio no puede administrar las asignaciones de unidad establecidas en otras sesiones del usuario.</span><span class="sxs-lookup"><span data-stu-id="7c705-125">Therefore, a service cannot manage the drive mappings established within the user's other sessions.</span></span>

<span data-ttu-id="7c705-126">**Windows Server 2003:** En un equipo que tiene varias interfaces de red (es decir, un equipo de host múltiple), se pueden producir retrasos hasta 60 segundos cuando se usan rutas de acceso UNC para acceder a archivos almacenados en un servidor de bloque de mensajes del servidor (SMB) remoto.</span><span class="sxs-lookup"><span data-stu-id="7c705-126">**Windows Server 2003:** On a computer that has multiple network interfaces (that is, a multihomed computer), delays up to 60 seconds may occur when using UNC paths to access files that are stored on a remote server message block (SMB) server.</span></span> <span data-ttu-id="7c705-127">Para obtener más información, consulte el [artículo 890553](https://support.microsoft.com/kb/890553) en la Knowledge base de ayuda y soporte técnico.</span><span class="sxs-lookup"><span data-stu-id="7c705-127">For more information, see [article 890553](https://support.microsoft.com/kb/890553) in the Help and Support Knowledge Base.</span></span>

 

 
