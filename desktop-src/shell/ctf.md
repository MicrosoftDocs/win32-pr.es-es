---
description: Marcas que controlan el comportamiento de la función que realiza la llamada. Lo usan SHCreateThread y SHCreateThreadWithHandle. En esas funciones, estos valores se definen como de tipo SHCT \_ FLAGS.
title: Marcas CTF (Shlwapi.h)
ms.topic: reference
ms.date: 05/31/2018
ms.assetid: 66cda866-7a39-4c5a-a795-a4c5c64cbab7
api_name:
- CTF_INSIST
- CTF_THREAD_REF
- CTF_PROCESS_REF
- CTF_COINIT_STA
- CTF_COINIT
- CTF_FREELIBANDEXIT
- CTF_REF_COUNTED
- CTF_WAIT_ALLOWCOM
- CTF_UNUSED
- CTF_INHERITWOW64
- CTF_WAIT_NO_REENTRANCY
- CTF_KEYBOARD_LOCALE
- CTF_OLEINITIALIZE
- CTF_COINIT_MTA
- CTF_NOADDREFLIB
api_type:
- HeaderDef
api_location:
- Shlwapi.h
topic_type:
- APIRef
- kbSyntax
ms.openlocfilehash: bfad2b2e662a80501d0f869d6f9e7849e01c5dcc3e949834b698a3c583fef3d6
ms.sourcegitcommit: e858bbe701567d4583c50a11326e42d7ea51804b
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/11/2021
ms.locfileid: "118224849"
---
# <a name="ctf-flags"></a>Marcas CTF

Marcas que controlan el comportamiento de la función que realiza la llamada. Lo usan [**SHCreateThread**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethread) y [**SHCreateThreadWithHandle.**](/windows/desktop/api/Shlwapi/nf-shlwapi-shcreatethreadwithhandle) En esas funciones, estos valores se definen como de tipo SHCT \_ FLAGS.



| Constante o valor                                                                                                                                                                                                                                             | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span id="CTF_INSIST"></span><span id="ctf_insist"></span><dl> <dt>**CTF \_ 0x00000001 DE 0X00000001**</dt> <dt></dt> </dl>                                       | 0x00000001. Si se produce un error en el intento de crear el subproceso con [**CreateThread,**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) si se establece esta marca, la función a la que apunta *pfnThreadProc* se llamará sincrónicamente desde el subproceso que realiza la llamada. Esta marca solo se puede usar si *pfnCallback* es **NULL.**<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_THREAD_REF"></span><span id="ctf_thread_ref"></span><dl> <dt>**CTF \_ Thread \_ REF**</dt> <dt>0x00000002</dt> </dl>                          | 0x00000002. Mantenga una referencia al subproceso de creación mientras dure la llamada a la función a la que apunta *pfnThreadProc.* Esta referencia se debe haber establecido con [**SHSetThreadRef.**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref)<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <span id="CTF_PROCESS_REF"></span><span id="ctf_process_ref"></span><dl> <dt>**CTF \_ Process \_ REF**</dt> <dt>0x00000004</dt> </dl>                       | 0x00000004. Mantenga una referencia al proceso Windows Explorer mientras dure la llamada a la función a la que *apunta pfnThreadProc*. Esta marca es útil para los [controladores de extensiones de Shell,](handlers.md)que pueden necesitar evitar que el proceso de Windows Explorer se cierre prematuramente. Esta acción es útil durante tareas como trabajar en un subproceso en segundo plano o copiar archivos. Para obtener más información, [**vea SHGetInstanceExplorer**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetinstanceexplorer).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_COINIT_STA"></span><span id="ctf_coinit_sta"></span><dl> <dt>**CTF \_ COINIT \_ STA**</dt> <dt>0x00000008</dt> </dl>                          | 0x00000008. Inicialice COM como un único apartamento subproceso (STA) para el subproceso creado antes de llamar a la función opcional a la que apunta *pfnCallback* o a la función a la que *apunta pfnThreadProc.* Esta marca es útil cuando es necesario inicializar COM para un subproceso. COM también se cancelará automáticamente de inicialización.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span id="CTF_COINIT"></span><span id="ctf_coinit"></span><dl> <dt>**CTF \_ 0x00000008 COINIT**</dt> <dt></dt> </dl>                                       | Equivalente a CTF \_ COINIT \_ STA.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span id="CTF_FREELIBANDEXIT"></span><span id="ctf_freelibandexit"></span><dl> <dt>**CTF \_ FREELIBANDEXIT**</dt> <dt>0x00000010</dt> </dl>               | 0x00000010. **Internet Explorer 6 o posterior.** [**Se llamará**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) a LoadLibrary en el archivo DLL que contiene la *función pfnThreadProc* para evitar que se descargue. Después *de que pfnThreadProc* vuelva, el archivo DLL se liberará con [**FreeLibrary,**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibrary)lo que reduce el recuento de referencias de DLL. Pase esta marca para evitar que el archivo DLL se descargue prematuramente; por ejemplo, por [**CoFreeUnusedLibraries**](/windows/win32/api/combaseapi/nf-combaseapi-cofreeunusedlibraries). Tenga en cuenta que si se pasa esta marca, *la función pfnThreadProc* debe residir en un archivo DLL. Esta marca es implícita en Windows Vista y versiones posteriores.<br/>                                                                                                                                                                                                                                                                   |
| <span id="CTF_REF_COUNTED"></span><span id="ctf_ref_counted"></span><dl> <dt>**CTF \_ Ref \_ COUNTED**</dt> <dt>0x00000020</dt> </dl>                       | 0x00000020. **Internet Explorer 6 o posterior.** Se creará automáticamente una referencia de subproceso para el subproceso creado y se establecerá [**con SHSetThreadRef**](/windows/desktop/api/Shlwapi/nf-shlwapi-shsetthreadref). Una vez que se devuelve *pfnThreadProc,* se libera la referencia del subproceso y se envían mensajes hasta que el recuento de referencias en la referencia del subproceso cae a cero, es decir, hasta que los subprocesos que dependen del subproceso creado han liberado sus referencias.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_WAIT_ALLOWCOM"></span><span id="ctf_wait_allowcom"></span><dl> <dt>**CTF \_ Wait \_ ALLOWCOM**</dt> <dt>0x00000040</dt> </dl>                 | 0x00000040. **Internet Explorer 6 o posterior.** El subproceso que realiza la llamada espera y envía mensajes COM [**y SendMessage.**](/windows/win32/api/winuser/nf-winuser-sendmessage) Si el procedimiento sincrónico intenta enviar un mensaje Windows con **SendMessage** a una ventana hospedada en el subproceso de llamada, el mensaje llegará correctamente. Si el procedimiento sincrónico intenta usar COM para comunicarse con un objeto STA hospedado en el subproceso de llamada, la llamada de función alcanzará correctamente el objeto deseado. El subproceso que realiza la llamada está abierto para volver a entrar en la elasticidad. Aunque el subproceso que realiza la llamada puede controlar el uso del procedimiento sincrónico de **SendMessage** y COM, si otros subprocesos usan **SendMessage** o COM para comunicarse con objetos hospedados en el subproceso de llamada, pueden tratarse de mensajes inesperados o llamadas de función que se procesan mientras se completa el procedimiento sincrónico.<br/> |
| <span id="CTF_UNUSED"></span><span id="ctf_unused"></span><dl> <dt>**CTF \_ Sin usar**</dt> <dt>0x00000080</dt> </dl>                                       | 0x00000080. **Internet Explorer 7 o posterior.** No se usa.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span id="CTF_INHERITWOW64"></span><span id="ctf_inheritwow64"></span><dl> <dt>**CTF \_ INHERITWOW64**</dt> <dt>0x00000100</dt> </dl>                     | 0x00000100. **Internet Explorer 7 o posterior.** El nuevo subproceso hereda el Windows Windows de 64 bits (WOW64) de 64 bits para el redirector del sistema de archivos.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_WAIT_NO_REENTRANCY"></span><span id="ctf_wait_no_reentrancy"></span><dl> <dt>**CTF \_ WAIT \_ NO \_ REENTRANCY**</dt> <dt>0x00000200</dt> </dl> | 0x00000200. **Windows Vista o posterior.** El subproceso que realiza la llamada bloquea todos los demás procesos mientras espera a que el procedimiento sincrónico se ejecute en el nuevo subproceso. Si el procedimiento sincrónico intenta enviar un mensaje Windows con [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) a una ventana hospedada en el subproceso que realiza la llamada, el procedimiento sincrónico se interbloquea. Si el procedimiento sincrónico intenta usar COM para hablar con un objeto STA hospedado en el subproceso de llamada, esto también hace que el procedimiento sincrónico interbloquee. El subproceso que realiza la llamada está protegido de todos los problemas de reesguardo mediante la especificación de esta marca.<br/>                                                                                                                                                                                                                                                                |
| <span id="CTF_KEYBOARD_LOCALE"></span><span id="ctf_keyboard_locale"></span><dl> <dt>**CTF \_ CONFIGURACIÓN \_ REGIONAL DEL**</dt> TECLADO <dt>0x00000400</dt> </dl>           | 0x00000400. **Windows 7 o posterior.** Use la configuración regional del teclado del subproceso original en el nuevo subproceso que genera.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span id="CTF_OLEINITIALIZE"></span><span id="ctf_oleinitialize"></span><dl> <dt>**CTF \_ OLEINITIALIZE**</dt> <dt>0x00000800</dt> </dl>                  | 0x00000800. **Windows 7 o posterior.** Inicialice COM con el modelo de apartamento de un solo subproceso (STA) para el subproceso creado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span id="CTF_COINIT_MTA"></span><span id="ctf_coinit_mta"></span><dl> <dt>**CTF \_ 0x00001000 \_ MTA DE COINIT**</dt> <dt></dt> </dl>                          | 0x00001000. **Windows 7 y versiones posteriores.** Inicialice COM con el modelo de apartamento multiproceso (MTA) para el subproceso creado.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span id="CTF_NOADDREFLIB"></span><span id="ctf_noaddreflib"></span><dl> <dt>**CTF \_ NOADDREFLIB**</dt> <dt>0x00002000</dt> </dl>                        | 0x00002000. **Windows 7 o posterior.** Esta marca es básicamente lo contrario de CTF \_ FREELIBANDEXIT. Esto evita las [**llamadas a LoadLibrary**](/windows/win32/api/libloaderapi/nf-libloaderapi-loadlibrarya) / [**FreeLibraryAndExitThread**](/windows/win32/api/libloaderapi/nf-libloaderapi-freelibraryandexitthread) que pueden dar lugar a la contención del bloqueo del cargador. Use CTF NOADDREFLIB solo cuando el nuevo subproceso tenga medios para asegurarse de que el código del procedimiento del subproceso \_ original permanecerá cargado. Este valor no debe usarse en el contexto de objetos COM, ya que los objetos COM deben asegurarse de que el archivo DLL permanece cargado (normalmente, COM descarga los archivos DLL).<br/>                                                                                                                                                                                                                                                                                                                    |



## <a name="remarks"></a>Comentarios

Si no se especifica ninguna marca WAIT de CTF, el subproceso que realiza la llamada \_ \_ esperará y enviará [**mensajes SendMessage.**](/windows/win32/api/winuser/nf-winuser-sendmessage) Si el procedimiento sincrónico intenta enviar un mensaje Windows con **SendMessage** a una ventana hospedada en el subproceso de llamada, el mensaje llegará a la ventana deseada. Si el procedimiento sincrónico intenta usar COM para hablar con un objeto STA hospedado en el subproceso que realiza la llamada, el procedimiento sincrónico se interbloqueará. El subproceso que realiza la llamada está abierto para volver a entrar en la elasticidad. Aunque el subproceso que realiza la llamada puede controlar el uso del procedimiento sincrónico **de SendMessage**, si otros subprocesos usan **SendMessage** para comunicarse con una ventana hospedada en el subproceso de llamada, estos mensajes podrían ser inesperados. Esto puede hacer que se procesen mientras se completa el procedimiento sincrónico.

## <a name="requirements"></a>Requisitos



| Requisito | Value |
|-------------------------------------|--------------------------------------------------------------------------------------|
| Cliente mínimo compatible<br/> | Windows 2000 Professional, Windows XP, Windows 7 aplicaciones de \[ escritorio\]<br/>    |
| Servidor mínimo compatible<br/> | \[Solo aplicaciones de escritorio\] de Windows 2000 Server<br/>                                 |
| Encabezado<br/>                   | <dl> <dt>Shlwapi.h</dt> </dl> |



 

 
