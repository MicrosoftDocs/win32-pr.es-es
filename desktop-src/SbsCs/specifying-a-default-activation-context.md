---
description: Especificar un contexto de activación predeterminado
ms.assetid: 4d9a8552-7098-458d-a592-45524871cce5
title: Especificar un contexto de activación predeterminado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 32cf0225a8e4290a09f7e6524a4b3ef47f9c4c4e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104002764"
---
# <a name="specifying-a-default-activation-context"></a><span data-ttu-id="7401e-103">Especificar un contexto de activación predeterminado</span><span class="sxs-lookup"><span data-stu-id="7401e-103">Specifying a Default Activation Context</span></span>

<span data-ttu-id="7401e-104">Cuando la aplicación o el componente crean un nuevo proceso, Windows busca un manifiesto de aplicación predeterminado.</span><span class="sxs-lookup"><span data-stu-id="7401e-104">When your application or component creates a new process, Windows searches for a default application manifest.</span></span> <span data-ttu-id="7401e-105">Tenga en cuenta que un manifiesto incluido como un recurso en la aplicación tiene prioridad sobre un manifiesto externo.</span><span class="sxs-lookup"><span data-stu-id="7401e-105">Note that a manifest included as a resource in the application takes precedence over an external manifest.</span></span> <span data-ttu-id="7401e-106">El contexto de activación predeterminado es el primer contexto de activación que está activo antes de que se haya activado cualquier otro contexto de activación.</span><span class="sxs-lookup"><span data-stu-id="7401e-106">The default activation context is the first activation context that is active before any other activation context has been activated.</span></span> <span data-ttu-id="7401e-107">Este contexto de activación siempre está activo a menos que Active otros contextos.</span><span class="sxs-lookup"><span data-stu-id="7401e-107">This activation context is always active unless you activate other contexts.</span></span> <span data-ttu-id="7401e-108">Si define \_ \_ el reconocimiento de aislamiento habilitado al compilar la aplicación o el componente, llamadas como [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance), [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya)y [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) pueden realizar la administración automática del contexto.</span><span class="sxs-lookup"><span data-stu-id="7401e-108">If you define ISOLATION\_AWARE\_ENABLED when you compile your application or component, calls like [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance), [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya), and [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) can perform automatic context management.</span></span>

<span data-ttu-id="7401e-109">El cargador permite que una aplicación especifique su contexto de activación predeterminado mediante dos métodos.</span><span class="sxs-lookup"><span data-stu-id="7401e-109">The loader allows an application to specify its default activation context by two methods.</span></span> <span data-ttu-id="7401e-110">Puede colocar el archivo de manifiesto en los recursos del archivo ejecutable y el cargador lo encontrará.</span><span class="sxs-lookup"><span data-stu-id="7401e-110">You can put the manifest file in the resources of the executable and the loader will find it.</span></span> <span data-ttu-id="7401e-111">Esto es lo mismo que colocar el archivo de manifiesto en la tabla de recursos del archivo ejecutable.</span><span class="sxs-lookup"><span data-stu-id="7401e-111">This is the same as putting the manifest file in the executable's resource table.</span></span> <span data-ttu-id="7401e-112">Puede colocar el manifiesto en un archivo denominado *MyApp*. exe. Manifest en el mismo directorio que *MyApp*. exe y el cargador lo encuentra al buscar *MyApp*. exe.</span><span class="sxs-lookup"><span data-stu-id="7401e-112">You can place the manifest in a file named *Myapp*.exe.Manifest in the same directory as *Myapp*.exe, and the loader finds it while looking for *Myapp*.exe.</span></span>

<span data-ttu-id="7401e-113">Si utiliza ninguno de estos métodos, la aplicación se inicia con el contexto de activación predeterminado del sistema, que contiene un conjunto mínimo de ensamblados.</span><span class="sxs-lookup"><span data-stu-id="7401e-113">If you use none of these methods, the application starts with the system default activation context, which contains a minimal set of assemblies.</span></span>

<span data-ttu-id="7401e-114">Una manera mejor de usar la administración automática de contexto es compilando la aplicación con el reconocimiento de aislamiento \_ \_ habilitado definido.</span><span class="sxs-lookup"><span data-stu-id="7401e-114">A better way of using automatic context management is by compiling your application with ISOLATION\_AWARE\_ENABLED defined.</span></span> <span data-ttu-id="7401e-115">El método recomendado es establecer esto en la línea de comandos del compilador para todo el proyecto que se compila en lugar de establecerse en archivos de código fuente o encabezados individuales.</span><span class="sxs-lookup"><span data-stu-id="7401e-115">The recommended method is to set this on the compiler's command line for the entire project being built rather than being set in individual source files or headers.</span></span> <span data-ttu-id="7401e-116">Esto hace que la mayoría de las API de Win32 conozcan los contextos de activación y cómo administrarlos.</span><span class="sxs-lookup"><span data-stu-id="7401e-116">This makes most Win32 APIs aware of activation contexts and how to manage them.</span></span> <span data-ttu-id="7401e-117">En lugar de tener que realizar su propia administración de contexto de activación, solo tiene que colocar un manifiesto en la tabla de recursos en el ID. \_ de recurso del manifiesto ISOLATIONAWARE \_ \_ (valor numérico 2), de tipo RT \_ manifest (valor numérico 24). Las funciones como [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa), [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance)y [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) activan este contexto automáticamente antes de efectuar la llamada real.</span><span class="sxs-lookup"><span data-stu-id="7401e-117">Instead of having to do your own activation context management, you simply need to place a manifest in your resource table at resource ID ISOLATIONAWARE\_MANIFEST\_RESOURCE\_ID (numeric value 2), of type RT\_MANIFEST (numeric value 24.) Functions such as [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa), [**CoCreateInstance**](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance), and [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) then automatically activate this context before making the actual call.</span></span>

<span data-ttu-id="7401e-118">Tenga en cuenta que si se compila con \_ el reconocimiento de aislamiento \_ habilitado, no se puede realizar su propia administración de contexto de activación.</span><span class="sxs-lookup"><span data-stu-id="7401e-118">Note that if you compile with ISOLATION\_AWARE\_ENABLED defined, you cannot also do your own activation context management.</span></span> <span data-ttu-id="7401e-119">Con el \_ reconocimiento de aislamiento \_ habilitado, Windows omite cualquier creación de contexto de activación dinámica que la aplicación pueda intentar realizar entre las llamadas a [**ActivateActCtx**](/windows/desktop/api/Winbase/nf-winbase-activateactctx) y [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) .</span><span class="sxs-lookup"><span data-stu-id="7401e-119">With ISOLATION\_AWARE\_ENABLED defined, Windows ignores any dynamic activation context creation your application may attempt to do between [**ActivateActCtx**](/windows/desktop/api/Winbase/nf-winbase-activateactctx) and [**CreateWindow**](/windows/win32/api/winuser/nf-winuser-createwindowa) calls.</span></span> <span data-ttu-id="7401e-120">Esto significa que cuando la aplicación usa el \_ reconocimiento de aislamiento \_ habilitado, debe asegurarse de que el manifiesto contiene una lista completa de todos los ensamblados que requiere el componente.</span><span class="sxs-lookup"><span data-stu-id="7401e-120">This means that when your application uses ISOLATION\_AWARE\_ENABLED you must make sure that the manifest contains a complete list of all assemblies that your component requires.</span></span>

 

 
