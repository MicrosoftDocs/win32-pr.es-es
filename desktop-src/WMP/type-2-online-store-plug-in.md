---
title: Complemento de la tienda en línea de tipo 2
description: Complemento de la tienda en línea de tipo 2
ms.assetid: 16e90a01-20be-49a6-96df-de81a7283f42
keywords:
- Windows Media Player tiendas en línea, Complementos
- tiendas en línea, Complementos
- tipo 2 tiendas en línea, Complementos
- Windows Media Player tiendas en línea, interfaz IWMPSubscriptionService
- tiendas en línea, interfaz IWMPSubscriptionService
- tipo 2 tiendas en línea, interfaz IWMPSubscriptionService
- complementos, Windows Media Player tiendas en línea
- complementos, tiendas en línea
- complementos, tipo 2 tiendas en línea
- complementos, interfaz IWMPSubscriptionService
- Complementos de Windows Media Player, escriba 2 tiendas en línea
- Complementos de Windows Media Player, tiendas en línea
- Complementos de Windows Media Player, Windows Media Player tiendas en línea
- Complementos de Media Player de Windows, interfaz IWMPSubscriptionService
- IWMPSubscriptionService
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c6d2f3aeeaa7456c3452b498a1a728e24c96783c
ms.sourcegitcommit: ad672d3a10192c5ccac619ad2524407109266e93
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/25/2020
ms.locfileid: "104149131"
---
# <a name="type-2-online-store-plug-in"></a><span data-ttu-id="dc581-118">Complemento de la tienda en línea de tipo 2</span><span class="sxs-lookup"><span data-stu-id="dc581-118">Type 2 Online Store Plug-in</span></span>

<span data-ttu-id="dc581-119">Un complemento de la tienda en línea de tipo 2 es un componente COM que implementa la interfaz [IWMPSubscriptionService](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice) y, opcionalmente, la interfaz [IWMPSubscriptionService2](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice2) .</span><span class="sxs-lookup"><span data-stu-id="dc581-119">A type 2 online store plug-in is a COM component that implements the [IWMPSubscriptionService](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice) interface and optionally the [IWMPSubscriptionService2](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice2) interface.</span></span> <span data-ttu-id="dc581-120">Windows Media Player 9 llama a los métodos de la interfaz **IWMPSubscriptionService** .</span><span class="sxs-lookup"><span data-stu-id="dc581-120">Windows Media Player 9 calls the methods of the **IWMPSubscriptionService** interface.</span></span> <span data-ttu-id="dc581-121">Windows Media Player 10 o posterior llama a los métodos de las interfaces **IWMPSubscriptionService** y **IWMPSubscriptionService2** .</span><span class="sxs-lookup"><span data-stu-id="dc581-121">Windows Media Player 10 or later calls the methods of both the **IWMPSubscriptionService** and **IWMPSubscriptionService2** interfaces.</span></span>

<span data-ttu-id="dc581-122">Un complemento de la tienda en línea de tipo 2 se empaqueta como un servidor COM en proceso.</span><span class="sxs-lookup"><span data-stu-id="dc581-122">A type 2 online store plug-in is packaged as an in-process COM server.</span></span> <span data-ttu-id="dc581-123">Es decir, el complemento se implementa en un archivo. dll que se asigna al proceso de Media Player de Windows.</span><span class="sxs-lookup"><span data-stu-id="dc581-123">That is, the plug-in is implemented in a .dll file that is mapped into the Windows Media Player process.</span></span>

<span data-ttu-id="dc581-124">Windows Media Player activa los complementos de la tienda en línea de tipo 2 según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="dc581-124">Windows Media Player activates type 2 online store plug-ins as needed.</span></span> <span data-ttu-id="dc581-125">Por ejemplo, supongamos que el usuario intenta reproducir una canción protegida y no hay ninguna licencia actual para reproducirla.</span><span class="sxs-lookup"><span data-stu-id="dc581-125">For example, suppose the user attempts to play a protected song, and there is no current license to play it.</span></span> <span data-ttu-id="dc581-126">En ese caso, Windows Media Player inspecciona el atributo **ContentDistributor** en el encabezado de archivo o en el encabezado de DRM.</span><span class="sxs-lookup"><span data-stu-id="dc581-126">In that case, Windows Media Player inspects the **ContentDistributor** attribute in either the file header or the DRM header.</span></span> <span data-ttu-id="dc581-127">Si existe un valor que coincide con el nombre de clave de una tienda en línea, Windows Media Player comprueba el registro para ver si la tienda en línea ha proporcionado un complemento de tipo 2.</span><span class="sxs-lookup"><span data-stu-id="dc581-127">If a value exists that matches the key name of an online store, Windows Media Player checks the registry to see whether that online store has provided a type 2 plug-in.</span></span> <span data-ttu-id="dc581-128">Si el complemento existe, Windows Media Player carga el complemento y llama a sus métodos para determinar si el usuario tiene derechos para reproducir la canción.</span><span class="sxs-lookup"><span data-stu-id="dc581-128">If the plug-in exists, Windows Media Player loads the plug-in and calls its methods to determine whether the user is has the rights to play the song.</span></span>

<span data-ttu-id="dc581-129">En la lista siguiente se describen algunos de los escenarios en los que Windows Media Player llama a un complemento de almacén en línea de tipo 2.</span><span class="sxs-lookup"><span data-stu-id="dc581-129">The following list describes some of the scenarios in which Windows Media Player calls a type 2 online store plug-in.</span></span>

-   <span data-ttu-id="dc581-130">**El usuario intenta reproducir el contenido de la tienda en línea.**</span><span class="sxs-lookup"><span data-stu-id="dc581-130">**The user attempts to play online store content.**</span></span> <span data-ttu-id="dc581-131">Cuando esto sucede, Windows Media Player llama al método [IWMPSubscriptionService:: allowPlay](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowplay) del complemento, pasando un puntero al elemento multimedia digital que el usuario está intentando reproducir.</span><span class="sxs-lookup"><span data-stu-id="dc581-131">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService::allowPlay](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowplay) method, passing a pointer to the digital media item that the user is attempting to play.</span></span> <span data-ttu-id="dc581-132">La tienda en línea puede utilizarla como una oportunidad para actualizar la licencia del usuario para reproducir el contenido o para no permitir la reproducción.</span><span class="sxs-lookup"><span data-stu-id="dc581-132">The online store can use this as an opportunity to update the user's license to play the content or to disallow playback.</span></span> <span data-ttu-id="dc581-133">Si el complemento devuelve **true** en el parámetro *pfAllowPlay* , Windows Media Player intenta reproducir el contenido.</span><span class="sxs-lookup"><span data-stu-id="dc581-133">If the plug-in returns **TRUE** in the *pfAllowPlay* parameter, Windows Media Player attempts to play the content.</span></span> <span data-ttu-id="dc581-134">Se producirá un error en la reproducción si no existe una licencia válida; Este proceso no elude la administración de derechos digitales (DRM).</span><span class="sxs-lookup"><span data-stu-id="dc581-134">Playback will still fail if a valid license does not exist; this process does not circumvent digital rights management (DRM).</span></span>
-   <span data-ttu-id="dc581-135">**El usuario solicita permiso para grabar contenido en un CD o DVD.**</span><span class="sxs-lookup"><span data-stu-id="dc581-135">**The user requests permission to burn content to a CD or DVD.**</span></span> <span data-ttu-id="dc581-136">Cuando esto sucede, Windows Media Player llama al método [IWMPSubscriptionService:: allowCDBurn](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowcdburn) del complemento.</span><span class="sxs-lookup"><span data-stu-id="dc581-136">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService::allowCDBurn](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-allowcdburn) method.</span></span>
-   <span data-ttu-id="dc581-137">**El usuario intenta sincronizar el contenido de la tienda en línea con un dispositivo o Windows Media Player está listo para sincronizar automáticamente el contenido de la tienda en línea con un dispositivo.**</span><span class="sxs-lookup"><span data-stu-id="dc581-137">**The user attempts to synchronize online store content with a device, or Windows Media Player is ready to automatically synchronize online store content with a device.**</span></span> <span data-ttu-id="dc581-138">Cuando esto sucede, Windows Media Player llama al método [IWMPSubscriptionService2::P repareforsync](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-prepareforsync) del complemento para avisar a la tienda en línea de que un elemento multimedia está a punto de sincronizarse con un dispositivo determinado, identificado por su nombre canónico.</span><span class="sxs-lookup"><span data-stu-id="dc581-138">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService2::prepareForSync](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-prepareforsync) method to alert the online store that a media item is about to be synchronized with a particular device, which is identified by its canonical name.</span></span> <span data-ttu-id="dc581-139">Esta es una oportunidad para que la tienda en línea determine si el usuario puede sincronizar el elemento multimedia con el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="dc581-139">This is an opportunity for the online store to determine whether the user is allowed to synchronize the media item with the device.</span></span> <span data-ttu-id="dc581-140">También es una oportunidad para que la tienda en línea Prepare el dispositivo para la sincronización y para actualizar registros, como los recuentos de sincronización, asociados con el dispositivo o el elemento multimedia.</span><span class="sxs-lookup"><span data-stu-id="dc581-140">It is also an opportunity for the online store to prepare the device for synchronization and to update records, such as synchronization counts, associated with the device or the media item.</span></span> <span data-ttu-id="dc581-141">El complemento debe pasar las tareas de permiso, preparación y conservación de registros a un subproceso independiente y volver inmediatamente desde **prepareForSync**.</span><span class="sxs-lookup"><span data-stu-id="dc581-141">The plug-in should pass the permission, preparation, and record-keeping tasks to a separate thread and return immediately from **prepareForSync**.</span></span> <span data-ttu-id="dc581-142">Cuando el subproceso independiente ha finalizado su trabajo, debe notificar a Windows Media Player llamando a [IWMPSubscriptionServiceCallback:: alcomplete](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservicecallback-oncomplete).</span><span class="sxs-lookup"><span data-stu-id="dc581-142">When the separate thread has finished its work, it must notify Windows Media Player by calling [IWMPSubscriptionServiceCallback::onComplete](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservicecallback-oncomplete).</span></span>
-   <span data-ttu-id="dc581-143">**Un dispositivo está disponible para el procesamiento en segundo plano.**</span><span class="sxs-lookup"><span data-stu-id="dc581-143">**A device becomes available for background processing.**</span></span> <span data-ttu-id="dc581-144">Cuando se conecta un dispositivo, Windows Media Player alerta a la tienda en línea de que el dispositivo está disponible y está inactivo mediante una llamada a [IWMPSubscriptionService2::D eviceavailable](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-deviceavailable).</span><span class="sxs-lookup"><span data-stu-id="dc581-144">When a device is connected, Windows Media Player alerts the online store that the device is available and idle by calling [IWMPSubscriptionService2::deviceAvailable](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-deviceavailable).</span></span>
-   <span data-ttu-id="dc581-145">**El usuario hace clic en un botón para activar una tienda en línea en Windows Media Player.**</span><span class="sxs-lookup"><span data-stu-id="dc581-145">**The user clicks a button to activate an online store in Windows Media Player.**</span></span> <span data-ttu-id="dc581-146">Cuando esto ocurre, Windows Media Player llama al método [IWMPSubscriptionService2:: serviceEvent](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-serviceevent) del complemento.</span><span class="sxs-lookup"><span data-stu-id="dc581-146">When this occurs, Windows Media Player calls the plug-in's [IWMPSubscriptionService2::serviceEvent](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-serviceevent) method.</span></span> <span data-ttu-id="dc581-147">Windows Media Player también llama a este método cuando el usuario cambia a otro servicio.</span><span class="sxs-lookup"><span data-stu-id="dc581-147">Windows Media Player also calls this method when the user switches to another service.</span></span>
-   <span data-ttu-id="dc581-148">**Windows Media Player entra en un estado de baja actividad.**</span><span class="sxs-lookup"><span data-stu-id="dc581-148">**Windows Media Player enters a state of low activity.**</span></span> <span data-ttu-id="dc581-149">Cuando esto sucede, el reproductor llama al método [IWMPSubscriptionService:: startBackgroundProcessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-startbackgroundprocessing) del complemento.</span><span class="sxs-lookup"><span data-stu-id="dc581-149">When this happens, the Player calls the plug-in's [IWMPSubscriptionService::startBackgroundProcessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice-startbackgroundprocessing) method.</span></span> <span data-ttu-id="dc581-150">La tienda en línea puede utilizar esta oportunidad para iniciar o reactivar los subprocesos que realizan tareas en segundo plano, como renovar licencias expiradas o compilar datos de recuento de la reproducción.</span><span class="sxs-lookup"><span data-stu-id="dc581-150">The online store can use this opportunity to start or wake up any threads that perform background tasks, such as renewing expired licenses or compiling play-count data.</span></span>
-   <span data-ttu-id="dc581-151">**Windows Media Player entra en un estado de alta actividad.**</span><span class="sxs-lookup"><span data-stu-id="dc581-151">**Windows Media Player enters a state of high activity.**</span></span> <span data-ttu-id="dc581-152">Cuando esto sucede, Windows Media Player llama al método [IWMPSubscriptionService2:: stopBackgroundProcessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-stopbackgroundprocessing) del complemento.</span><span class="sxs-lookup"><span data-stu-id="dc581-152">When this happens, Windows Media Player calls the plug-in's [IWMPSubscriptionService2::stopBackgroundProcessing](/previous-versions/windows/desktop/api/subscriptionservices/nf-subscriptionservices-iwmpsubscriptionservice2-stopbackgroundprocessing) method.</span></span> <span data-ttu-id="dc581-153">Esto informa al complemento de que debe suspender los subprocesos que realizan tareas en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="dc581-153">This informs the plug-in that it must suspend any threads that are performing background tasks.</span></span>

<span data-ttu-id="dc581-154">Windows Media Player libera el componente de la tienda en línea cuando finaliza la sesión del reproductor.</span><span class="sxs-lookup"><span data-stu-id="dc581-154">Windows Media Player releases the online store component when the Player session ends.</span></span> <span data-ttu-id="dc581-155">En el momento de la versión, el componente debe interrumpir cualquier procesamiento en segundo plano en curso y, a continuación, cerrar.</span><span class="sxs-lookup"><span data-stu-id="dc581-155">Upon release, the component must interrupt any background processing in progress and then shut down.</span></span>

## <a name="related-topics"></a><span data-ttu-id="dc581-156">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="dc581-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="dc581-157">**Interfaz IWMPSubscriptionService**</span><span class="sxs-lookup"><span data-stu-id="dc581-157">**IWMPSubscriptionService Interface**</span></span>](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice)
</dt> <dt>

[<span data-ttu-id="dc581-158">**Interfaz IWMPSubscriptionService2**</span><span class="sxs-lookup"><span data-stu-id="dc581-158">**IWMPSubscriptionService2 Interface**</span></span>](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservice2)
</dt> <dt>

[<span data-ttu-id="dc581-159">**Interfaz IWMPSubscriptionServiceCallback**</span><span class="sxs-lookup"><span data-stu-id="dc581-159">**IWMPSubscriptionServiceCallback Interface**</span></span>](/previous-versions/windows/desktop/api/subscriptionservices/nn-subscriptionservices-iwmpsubscriptionservicecallback)
</dt> <dt>

[<span data-ttu-id="dc581-160">**Ejemplos de la tienda en línea de tipo 2**</span><span class="sxs-lookup"><span data-stu-id="dc581-160">**Type 2 Online Store Samples**</span></span>](type-2-online-store-samples.md)
</dt> </dl>

 

 




