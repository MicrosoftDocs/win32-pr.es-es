---
description: Las cuentas de usuario de Windows XP permiten que varios usuarios inicien sesión simultáneamente, cada uno con su propia configuración y que ejecute sus propias aplicaciones.
ms.assetid: bc404afc-f73e-404d-854d-faab5cf205a5
title: Cuentas de usuario con cambio rápido de usuario y Escritorio remoto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fc26471bcf56efce79fb5ccc91a78c24e43ae312
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104997752"
---
# <a name="user-accounts-with-fast-user-switching-and-remote-desktop"></a><span data-ttu-id="bf5fc-103">Cuentas de usuario con cambio rápido de usuario y Escritorio remoto</span><span class="sxs-lookup"><span data-stu-id="bf5fc-103">User Accounts with Fast User Switching and Remote Desktop</span></span>

<span data-ttu-id="bf5fc-104">Las cuentas de usuario de Windows XP permiten que varios usuarios inicien sesión simultáneamente, cada uno con su propia configuración y que ejecute sus propias aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-104">Windows XP user accounts enable multiple users to be logged on simultaneously, each with his or her own settings and each running his or her own applications.</span></span> <span data-ttu-id="bf5fc-105">Dado que un usuario no tiene que cerrar sesión para permitir el acceso a otro usuario, se puede acceder fácilmente al escritorio de cada usuario mediante la característica de cambio rápido de usuario.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-105">Because one user does not have to log off to allow access to another user, each user's desktop is easily accessed using the fast user switching feature.</span></span> <span data-ttu-id="bf5fc-106">Las cuentas de usuario también incluyen la característica de Terminal Server personal o Escritorio remoto, que permite a los usuarios tener acceso a su cuenta de escritorio desde sistemas remotos.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-106">User accounts also include the Personal Terminal Server feature, or Remote Desktop, which enables users to access their desktop account from remote systems.</span></span>

<span data-ttu-id="bf5fc-107">Se tratan los temas siguientes.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-107">The following topics are discussed.</span></span>

-   [<span data-ttu-id="bf5fc-108">Requisitos de uso de la infraestructura</span><span class="sxs-lookup"><span data-stu-id="bf5fc-108">Infrastructure Usage Requirements</span></span>](#infrastructure-usage-requirements)
-   [<span data-ttu-id="bf5fc-109">Compatibilidad con las aplicaciones existentes</span><span class="sxs-lookup"><span data-stu-id="bf5fc-109">Compatibility with Existing Applications</span></span>](#compatibility-with-existing-applications)
-   [<span data-ttu-id="bf5fc-110">Registrando notificación de cambio de sesión</span><span class="sxs-lookup"><span data-stu-id="bf5fc-110">Registering for Session Switching Notification</span></span>](#registering-for-session-switching-notification)
-   [<span data-ttu-id="bf5fc-111">Asegurarse de que solo se está ejecutando una instancia de la aplicación</span><span class="sxs-lookup"><span data-stu-id="bf5fc-111">Ensuring Only One Instance of Your Application Is Running</span></span>](#ensuring-only-one-instance-of-your-application-is-running)
-   [<span data-ttu-id="bf5fc-112">Cierre de la aplicación en todas las sesiones</span><span class="sxs-lookup"><span data-stu-id="bf5fc-112">Shutting Down Your Application Across All Sessions</span></span>](#shutting-down-your-application-across-all-sessions)
-   [<span data-ttu-id="bf5fc-113">Interacción con servicios del sistema</span><span class="sxs-lookup"><span data-stu-id="bf5fc-113">Interaction with System Services</span></span>](#interaction-with-system-services)
-   [<span data-ttu-id="bf5fc-114">Escritorio remoto y ancho de banda</span><span class="sxs-lookup"><span data-stu-id="bf5fc-114">Remote Desktop and Bandwidth</span></span>](#remote-desktop-and-bandwidth)

## <a name="infrastructure-usage-requirements"></a><span data-ttu-id="bf5fc-115">Requisitos de uso de la infraestructura</span><span class="sxs-lookup"><span data-stu-id="bf5fc-115">Infrastructure Usage Requirements</span></span>

<span data-ttu-id="bf5fc-116">La infraestructura subyacente heredada de Windows 2000 admite la separación del estado de los datos de usuario, la configuración de usuario y la configuración del equipo.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-116">Underlying infrastructure inherited from Windows 2000 supports state separation of user data, user settings, and computer settings.</span></span> <span data-ttu-id="bf5fc-117">Al aprovechar esta infraestructura, se necesita lo siguiente para ejecutar correctamente la aplicación en Windows XP.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-117">Taking advantage of this infrastructure, the following are required to successfully run your application under Windows XP.</span></span>

-   <span data-ttu-id="bf5fc-118">El valor predeterminado es la carpeta **Mis documentos** para el almacenamiento de datos creados por el usuario.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-118">Default to the **My Documents** folder for storage of user-created data.</span></span>
-   <span data-ttu-id="bf5fc-119">Clasifique y almacene los datos de la aplicación correctamente.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-119">Classify and store application data correctly.</span></span>
-   <span data-ttu-id="bf5fc-120">Se degradan correctamente en los mensajes de "acceso denegado".</span><span class="sxs-lookup"><span data-stu-id="bf5fc-120">Degrade gracefully on "Access Denied" messages.</span></span>

<span data-ttu-id="bf5fc-121">Los archivos temporales, los archivos asignados a la memoria y los documentos deben almacenarse en el subdirectorio correspondiente del directorio del perfil del usuario.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-121">Temporary files, memory-mapped files, and documents should all be stored in the appropriate subdirectory of the user's profile directory.</span></span> <span data-ttu-id="bf5fc-122">Use [**SHGetFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderlocation) o [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) para determinar la ubicación de almacenamiento adecuada para estos archivos.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-122">Use [**SHGetFolderLocation**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderlocation) or [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) to determine the appropriate storage location for these files.</span></span> <span data-ttu-id="bf5fc-123">Al pasar la marca [**CSIDL \_ AppData**](csidl.md) a estas funciones, se devuelve la ruta de acceso de un directorio del sistema de archivos que sirve de repositorio común para los datos específicos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-123">Passing the [**CSIDL\_APPDATA**](csidl.md) flag to these functions returns the path of a file system directory that serves as a common repository for application-specific data.</span></span> <span data-ttu-id="bf5fc-124">Use la marca [**CSIDL \_ local \_ AppData**](csidl.md) en lugar de **CSIDL \_ AppData** para los datos que deben cambiar cuando el usuario cambia, como archivos temporales.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-124">Use the flag [**CSIDL\_LOCAL\_APPDATA**](csidl.md) in place of **CSIDL\_APPDATA** for data that should change when the user changes, such as temporary files.</span></span>

<span data-ttu-id="bf5fc-125">Los requisitos mencionados anteriormente son un subconjunto de los del programa de certificación de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-125">The requirements listed above are a subset of those in the Microsoft Certification program.</span></span> <span data-ttu-id="bf5fc-126">Para obtener más información, consulte la página del **programa certificado para Windows** en https://www.microsoft.com/windowsserver2003/partners/isvs/cfw.mspx .</span><span class="sxs-lookup"><span data-stu-id="bf5fc-126">For more information, see the **Certified for Windows Program** page at https://www.microsoft.com/windowsserver2003/partners/isvs/cfw.mspx.</span></span>

## <a name="compatibility-with-existing-applications"></a><span data-ttu-id="bf5fc-127">Compatibilidad con las aplicaciones existentes</span><span class="sxs-lookup"><span data-stu-id="bf5fc-127">Compatibility with Existing Applications</span></span>

<span data-ttu-id="bf5fc-128">Tanto el cambio rápido de usuario como el personal Terminal Server utilizan la tecnología de Terminal Services y, por tanto, son compatibles con la mayoría de las aplicaciones de Microsoft Win32 anteriores.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-128">Both fast user switching and Personal Terminal Server use Terminal Services technology and therefore are compatible with most earlier Microsoft Win32 applications.</span></span> <span data-ttu-id="bf5fc-129">Si una aplicación es compatible con el logotipo de Windows 2000, implementando características básicas de separación de perfiles y administración de energía, esa aplicación debe ejecutarse correctamente en cuentas de usuario individuales de Windows XP.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-129">If an application is Windows 2000 Logo compliant, implementing basic profile separation and power management features, that application should run properly under individual Windows XP user accounts.</span></span>

## <a name="registering-for-session-switching-notification"></a><span data-ttu-id="bf5fc-130">Registrando notificación de cambio de sesión</span><span class="sxs-lookup"><span data-stu-id="bf5fc-130">Registering for Session Switching Notification</span></span>

<span data-ttu-id="bf5fc-131">Normalmente, no es necesario notificar a una aplicación cuando se produce un cambio de escritorio.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-131">Typically, an application does not need to be notified when a desktop switch occurs.</span></span> <span data-ttu-id="bf5fc-132">Sin embargo, las aplicaciones que se deben notificar cuando la cuenta en la que se ejecutan es el escritorio actual, como las aplicaciones que tienen acceso al puerto serie u otros recursos compartidos, pueden registrarse para recibir notificaciones de cambio de escritorio.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-132">However, applications that must be notified when the account under which they are running is the current desktop, such as applications that access the serial port or other shared resources, can register for desktop switch notification.</span></span> <span data-ttu-id="bf5fc-133">Para registrarse para una notificación, utilice la función [**WTSRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsregistersessionnotification) .</span><span class="sxs-lookup"><span data-stu-id="bf5fc-133">To register for a notification, use the [**WTSRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsregistersessionnotification) function.</span></span>

<span data-ttu-id="bf5fc-134">Una vez que se ha llamado a esa función, la ventana con el identificador *hWnd* se registra para recibir un mensaje de [**cambio de WM \_ \_ WTSSESSION**](../termserv/wm-wtssession-change.md) a través de su función **WndProc** .</span><span class="sxs-lookup"><span data-stu-id="bf5fc-134">Once that function has been called, the window with handle *hWnd* is registered to receive a [**WM\_WTSSESSION\_CHANGE**](../termserv/wm-wtssession-change.md) message through its **WndProc** function.</span></span> <span data-ttu-id="bf5fc-135">El identificador de sesión se envía en el parámetro **lParam** y un código que indica que el evento que generó el mensaje se envía en **wParam** como una de las marcas siguientes.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-135">The session ID is sent in the **lParam** parameter, and a code that indicates the event that generated the message is sent in **wParam** as one of the following flags.</span></span>

-   <span data-ttu-id="bf5fc-136">conexión de la consola de WTS \_ \_</span><span class="sxs-lookup"><span data-stu-id="bf5fc-136">WTS\_CONSOLE\_CONNECT</span></span>
-   <span data-ttu-id="bf5fc-137">desconexión de la consola de WTS \_ \_</span><span class="sxs-lookup"><span data-stu-id="bf5fc-137">WTS\_CONSOLE\_DISCONNECT</span></span>
-   <span data-ttu-id="bf5fc-138">\_conexión remota de WTS \_</span><span class="sxs-lookup"><span data-stu-id="bf5fc-138">WTS\_REMOTE\_CONNECT</span></span>
-   <span data-ttu-id="bf5fc-139">desconexión remota de WTS \_ \_</span><span class="sxs-lookup"><span data-stu-id="bf5fc-139">WTS\_REMOTE\_DISCONNECT</span></span>
-   <span data-ttu-id="bf5fc-140">cierre de sesión de sesión de WTS \_ \_</span><span class="sxs-lookup"><span data-stu-id="bf5fc-140">WTS\_SESSION\_LOGOFF</span></span>
-   <span data-ttu-id="bf5fc-141">Inicio de sesión de sesión de WTS \_ \_</span><span class="sxs-lookup"><span data-stu-id="bf5fc-141">WTS\_SESSION\_LOGON</span></span>

<span data-ttu-id="bf5fc-142">Las aplicaciones pueden usar este mensaje para realizar el seguimiento de su estado, así como para liberar y adquirir recursos específicos de la consola.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-142">Applications can use this message to track their state, as well as to release and acquire console-specific resources.</span></span> <span data-ttu-id="bf5fc-143">Los escritorios de usuario se pueden cambiar dinámicamente entre el control remoto y el control de consola.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-143">User desktops can be dynamically switched between remote and console control.</span></span> <span data-ttu-id="bf5fc-144">Las aplicaciones deben usar el mensaje de [**\_ \_ cambio de WTSSESSION de WM**](../termserv/wm-wtssession-change.md) para sincronizar con el estado de conexión local o remota.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-144">Applications should use the [**WM\_WTSSESSION\_CHANGE**](../termserv/wm-wtssession-change.md) message to synchronize with the remote or local connection state.</span></span>

<span data-ttu-id="bf5fc-145">Cuando el proceso ya no requiera estas notificaciones o finalice, debe llamar a [**WTSUnRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsunregistersessionnotification) para anular el registro de su notificación.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-145">When your process no longer requires these notifications or is terminating, it should call [**WTSUnRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsunregistersessionnotification) to unregister its notification.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="bf5fc-146">Se cuentan las referencias de los valores **hWnd** pasados a [**WTSRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsregistersessionnotification) , por lo que debe realizar un número igual de llamadas a [**WTSUnRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsunregistersessionnotification) para asegurarse de que se liberan todos los recursos asignados.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-146">The **hWnd** values passed to [**WTSRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsregistersessionnotification) are reference counted, so you must make an equal number of calls to [**WTSUnRegisterSessionNotification**](/windows/win32/api/wtsapi32/nf-wtsapi32-wtsunregistersessionnotification) to ensure the release of all allocated resources.</span></span>

 

## <a name="ensuring-only-one-instance-of-your-application-is-running"></a><span data-ttu-id="bf5fc-147">Asegurarse de que solo se está ejecutando una instancia de la aplicación</span><span class="sxs-lookup"><span data-stu-id="bf5fc-147">Ensuring Only One Instance of Your Application Is Running</span></span>

<span data-ttu-id="bf5fc-148">Muchas aplicaciones deben asegurarse de que solo tienen una instancia en ejecución.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-148">Many applications must ensure that they have only one instance running.</span></span> <span data-ttu-id="bf5fc-149">Hay varias maneras de hacerlo en Windows XP.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-149">There are several ways to do this in Windows XP.</span></span> <span data-ttu-id="bf5fc-150">Entre ellas se encuentran las siguientes:</span><span class="sxs-lookup"><span data-stu-id="bf5fc-150">Among them are the following:</span></span>

-   <span data-ttu-id="bf5fc-151">Use [**FindWindow**](/windows/win32/api/winuser/nf-winuser-findwindowa) o [**FindWindowEx**](/windows/win32/api/winuser/nf-winuser-findwindowexa) para buscar una ventana conocida que abra la aplicación.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-151">Use [**FindWindow**](/windows/win32/api/winuser/nf-winuser-findwindowa) or [**FindWindowEx**](/windows/win32/api/winuser/nf-winuser-findwindowexa) to search for a known window that your application opens.</span></span> <span data-ttu-id="bf5fc-152">Si esa ventana ya está abierta, puede usarla como una indicación de que la aplicación ya se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-152">If that window is already open, you can use that as an indication that the application is already running.</span></span>
-   <span data-ttu-id="bf5fc-153">Cree un objeto mutex o Semaphore cuando se abra la aplicación y cierre el objeto cuando la aplicación finalice.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-153">Create a mutex or semaphore object when your application is opened, and close that object when the application terminates.</span></span> <span data-ttu-id="bf5fc-154">El espacio de nombres de objeto global se separa para cada escritorio, lo que permite una lista única de objetos de exclusión mutua y semáforo para cada uno.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-154">The global object namespace is separated for each desktop, allowing a unique list of mutex and semaphore objects for each.</span></span>

## <a name="shutting-down-your-application-across-all-sessions"></a><span data-ttu-id="bf5fc-155">Cierre de la aplicación en todas las sesiones</span><span class="sxs-lookup"><span data-stu-id="bf5fc-155">Shutting Down Your Application Across All Sessions</span></span>

<span data-ttu-id="bf5fc-156">Es posible que una aplicación deba cerrarse en todas las sesiones.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-156">An application might need to shut itself down across all sessions.</span></span> <span data-ttu-id="bf5fc-157">Por ejemplo, una aplicación que se ejecuta en dos o más sesiones simultáneamente podría descargar un nuevo archivo de la Web.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-157">For example, an application running in two or more sessions simultaneously might download a new file from the web.</span></span> <span data-ttu-id="bf5fc-158">Después, es posible que deba cerrarse y reiniciarse con los bits actualizados.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-158">Then it might need to close itself and restart with the updated bits.</span></span> <span data-ttu-id="bf5fc-159">Esto, por supuesto, debe realizarse en todas las sesiones en ejecución.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-159">This, of course, would need to be done in all running sessions.</span></span> <span data-ttu-id="bf5fc-160">Se debe escribir la aplicación para que se cierre correctamente cuando se reciba una notificación.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-160">Your application should be written so that it exits cleanly when a notification is received.</span></span>

## <a name="interaction-with-system-services"></a><span data-ttu-id="bf5fc-161">Interacción con servicios del sistema</span><span class="sxs-lookup"><span data-stu-id="bf5fc-161">Interaction with System Services</span></span>

<span data-ttu-id="bf5fc-162">Desde el punto de vista de programación, es necesario solucionar los siguientes casos.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-162">From a programmatic standpoint, the following cases need to be addressed.</span></span>

-   <span data-ttu-id="bf5fc-163">El proceso de servidor recibe una solicitud directa de un proceso de cliente.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-163">The server process receives a direct request from a client process.</span></span>

    <span data-ttu-id="bf5fc-164">En este caso, es probable que el mensaje se transmita mediante una llamada a procedimiento local (LPC) o una llamada a procedimiento remoto (RPC).</span><span class="sxs-lookup"><span data-stu-id="bf5fc-164">In this case, the message is probably transmitted using a local procedure call (LPC) or a remote procedure call (RPC).</span></span> <span data-ttu-id="bf5fc-165">Hay API para LPC o RPC que permiten la recuperación del token de cliente.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-165">There are APIs for either LPC or RPC that enable retrieval of the client token.</span></span> <span data-ttu-id="bf5fc-166">Una vez que se obtiene el token de cliente, el servidor puede usarlo en una llamada a [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera).</span><span class="sxs-lookup"><span data-stu-id="bf5fc-166">Once the client token is obtained, the server can use it in a call to [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera).</span></span> <span data-ttu-id="bf5fc-167">Esto abre el proceso en la estación de ventana correcta, suponiendo que el token de usuario del cliente tiene una etiqueta de sesión, que debería.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-167">This brings up the process on the correct window station, assuming that the client user token has a session tag, which it should.</span></span>

    > [!Note]  
    > <span data-ttu-id="bf5fc-168">[**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera) no admite la herencia de control entre sesiones en este momento.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-168">[**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera) does not support handle inheritance across sessions at this time.</span></span>

     

-   <span data-ttu-id="bf5fc-169">El proceso de servidor recibe una notificación y debe mostrar la interfaz de usuario, pero la pantalla no tiene que estar en el contexto del usuario actual.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-169">The server process receives a notification and needs to display the UI, but the display does not have to be in the current user's context.</span></span>

    <span data-ttu-id="bf5fc-170">En este caso, el proceso de servidor puede duplicar su token de proceso principal y cambiar el identificador de sesión en cuestión para que coincida con el identificador de sesión actual.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-170">In this case, the server process can duplicate its primary process token and change the session identifier in question to match the current session identifier.</span></span> <span data-ttu-id="bf5fc-171">El identificador de la sesión actual se puede obtener mediante la función [**WTSGetActiveConsoleSessionId**](/windows/win32/api/winbase/nf-winbase-wtsgetactiveconsolesessionid) .</span><span class="sxs-lookup"><span data-stu-id="bf5fc-171">The current session identifier can be obtained by using the [**WTSGetActiveConsoleSessionId**](/windows/win32/api/winbase/nf-winbase-wtsgetactiveconsolesessionid) function.</span></span>

    > [!Note]  
    > <span data-ttu-id="bf5fc-172">Para establecer el identificador de sesión de token, se necesita el **\_ \_ privilegio de TCB se**.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-172">To set the token session ID, you need the **SE\_TCB\_PRIVILEGE**.</span></span> <span data-ttu-id="bf5fc-173">Solo tendrá esto como un servicio que se ejecuta en NT AUTHORITY \\ System.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-173">You will have this only as a service running in NT AUTHORITY\\SYSTEM.</span></span>

     

## <a name="remote-desktop-and-bandwidth"></a><span data-ttu-id="bf5fc-174">Escritorio remoto y ancho de banda</span><span class="sxs-lookup"><span data-stu-id="bf5fc-174">Remote Desktop and Bandwidth</span></span>

<span data-ttu-id="bf5fc-175">Con la adición de la característica Escritorio remoto a Windows XP, las aplicaciones deben hacer un esfuerzo para no usar más ancho de banda de lo necesario, evitando los complejos dibujos de pantalla y los efectos de animación si el escritorio está conectado de forma remota.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-175">With the addition of the Remote Desktop feature to Windows XP, applications should make an effort not to use more bandwidth than needed, avoiding extensive screen drawings and animation effects if the desktop is connected remotely.</span></span> <span data-ttu-id="bf5fc-176">Para determinar si la sesión actual es remota, puede llamar a [**GetSystemMetrics**](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) con **SM \_ REMOTESESSION**.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-176">To determine whether the current session is remote, you can call [**GetSystemMetrics**](/windows/win32/api/winuser/nf-winuser-getsystemmetrics) with **SM\_REMOTESESSION**.</span></span> <span data-ttu-id="bf5fc-177">No obstante, tenga en cuenta que esta llamada no distingue entre el remoto y el desconectado.</span><span class="sxs-lookup"><span data-stu-id="bf5fc-177">Be aware, however, that this call does not distinguish between remote and disconnected.</span></span>

 

 
