---
title: WM_GET_LICENSE_DATA estructura (Drmexternals. h)
description: La estructura de datos de la licencia de Get de WM \_ \_ \_ contiene información sobre dónde adquirir una licencia DRM.
ms.assetid: 7e8053d5-f3f5-4519-97f5-6dbd89982f3a
keywords:
- WM_GET_LICENSE_DATA estructura de Windows Media Format
topic_type:
- apiref
api_name:
- WM_GET_LICENSE_DATA
api_location:
- Drmexternals.h
api_type:
- HeaderDef
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 4f238bea29ab7271896dc7516b6424e4cc298f5c
ms.sourcegitcommit: a1494c819bc5200050696e66057f1020f5b142cb
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/12/2020
ms.locfileid: "104422306"
---
# <a name="wm_get_license_data-structure"></a><span data-ttu-id="ee611-104">\_Estructura de \_ datos de licencia de obtención de WM \_</span><span class="sxs-lookup"><span data-stu-id="ee611-104">WM\_GET\_LICENSE\_DATA structure</span></span>

<span data-ttu-id="ee611-105">La estructura de datos de la licencia de Get de WM contiene información sobre dónde adquirir una [*licencia*](wmformat-glossary.md) [*DRM*](wmformat-glossary.md) . **\_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="ee611-105">The **WM\_GET\_LICENSE\_DATA** structure contains information about where to acquire a [*DRM*](wmformat-glossary.md) [*license*](wmformat-glossary.md).</span></span>

## <a name="syntax"></a><span data-ttu-id="ee611-106">Sintaxis</span><span class="sxs-lookup"><span data-stu-id="ee611-106">Syntax</span></span>


```C++
typedef struct _WMGetLicenseData {
  DWORD   dwSize;
  HRESULT hr;
  WCHAR   *wszURL;
  WCHAR   *wszLocalFilename;
  BYTE    *pbPostData;
  DWORD   dwPostDataSize;
} WM_GET_LICENSE_DATA;
```



## <a name="members"></a><span data-ttu-id="ee611-107">Miembros</span><span class="sxs-lookup"><span data-stu-id="ee611-107">Members</span></span>

<dl> <dt>

<span data-ttu-id="ee611-108">**dwSize**</span><span class="sxs-lookup"><span data-stu-id="ee611-108">**dwSize**</span></span>
</dt> <dd>

<span data-ttu-id="ee611-109">**DWORD** que contiene el tamaño de la estructura de datos de la **\_ \_ licencia \_ de WM Get** , en bytes.</span><span class="sxs-lookup"><span data-stu-id="ee611-109">**DWORD** containing the size of the **WM\_GET\_LICENSE\_DATA** structure, in bytes.</span></span>

</dd> <dt>

<span data-ttu-id="ee611-110">**h**</span><span class="sxs-lookup"><span data-stu-id="ee611-110">**hr**</span></span>
</dt> <dd>

<span data-ttu-id="ee611-111">Código de retorno **HRESULT** .</span><span class="sxs-lookup"><span data-stu-id="ee611-111">**HRESULT** return code.</span></span>

</dd> <dt>

<span data-ttu-id="ee611-112">**wszURL**</span><span class="sxs-lookup"><span data-stu-id="ee611-112">**wszURL**</span></span>
</dt> <dd>

<span data-ttu-id="ee611-113">Cadena terminada en NULL de caracteres anchos que contiene la dirección URL de adquisición de licencias.</span><span class="sxs-lookup"><span data-stu-id="ee611-113">Wide-character null-terminated string containing the license acquisition URL.</span></span> <span data-ttu-id="ee611-114">Use esta cadena y la cadena **pbPostData** en la adquisición de licencias no silenciosa.</span><span class="sxs-lookup"><span data-stu-id="ee611-114">Use this string and the **pbPostData** string in non-silent license acquisition.</span></span>

</dd> <dt>

<span data-ttu-id="ee611-115">**wszLocalFilename**</span><span class="sxs-lookup"><span data-stu-id="ee611-115">**wszLocalFilename**</span></span>
</dt> <dd>

<span data-ttu-id="ee611-116">Cadena terminada en NULL de caracteres anchos que contiene una página HTML local generada por el componente DRM.</span><span class="sxs-lookup"><span data-stu-id="ee611-116">Wide-character null-terminated string containing a local HTML page that is generated by the DRM component.</span></span> <span data-ttu-id="ee611-117">Cuando esta cadena se carga en un explorador, redirige automáticamente la solicitud HTTP a la dirección URL de adquisición de licencias, junto con los datos post necesarios.</span><span class="sxs-lookup"><span data-stu-id="ee611-117">When this string is loaded into a browser, it automatically redirects the HTTP request to the license acquisition URL, along with the necessary post data.</span></span> <span data-ttu-id="ee611-118">El uso de esta dirección URL local ahora está en desuso.</span><span class="sxs-lookup"><span data-stu-id="ee611-118">Use of this local URL is now deprecated.</span></span> <span data-ttu-id="ee611-119">El enfoque recomendado es usar las cadenas **wszURL** y **pbPostData** .</span><span class="sxs-lookup"><span data-stu-id="ee611-119">The recommended approach is to use the **wszURL** and **pbPostData** strings.</span></span>

</dd> <dt>

<span data-ttu-id="ee611-120">**pbPostData**</span><span class="sxs-lookup"><span data-stu-id="ee611-120">**pbPostData**</span></span>
</dt> <dd>

<span data-ttu-id="ee611-121">Puntero a una matriz de bytes que contiene los datos que se van a exponer en la dirección URL de adquisición de licencias.</span><span class="sxs-lookup"><span data-stu-id="ee611-121">Pointer to a byte array containing the data to be posted to the license acquisition URL.</span></span> <span data-ttu-id="ee611-122">Debe agregar la siguiente cadena al principio de la cadena **pbPostData** : "nonsilent = 1&Challenge =".</span><span class="sxs-lookup"><span data-stu-id="ee611-122">You must add the following string to the beginning of the **pbPostData** string: "nonsilent=1&challenge=".</span></span> <span data-ttu-id="ee611-123">La cadena resultante se debe anexar a **wszURL** al formar la solicitud HTTP.</span><span class="sxs-lookup"><span data-stu-id="ee611-123">The resulting string should then be appended to **wszURL** when you form the HTTP request.</span></span>

</dd> <dt>

<span data-ttu-id="ee611-124">**dwPostDataSize**</span><span class="sxs-lookup"><span data-stu-id="ee611-124">**dwPostDataSize**</span></span>
</dt> <dd>

<span data-ttu-id="ee611-125">**DWORD** que indica el tamaño de **pbPostData** sin la cadena "nonsilent = 1&Challenge =" a la que se hace referencia en **pbPostData**.</span><span class="sxs-lookup"><span data-stu-id="ee611-125">**DWORD** that indicates the size of **pbPostData** without the "nonsilent=1&challenge=" string referred to in **pbPostData**.</span></span>

</dd> </dl>

## <a name="remarks"></a><span data-ttu-id="ee611-126">Observaciones</span><span class="sxs-lookup"><span data-stu-id="ee611-126">Remarks</span></span>

<span data-ttu-id="ee611-127">Esta estructura rellenada se devuelve en el parámetro *pValue* del método [**IWMStatusCallback:: en status**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus) si **el \_ Estado de WMT** es igual a **WMT \_ sin \_ derechos \_ ex** o la **\_ \_ licencia de adquisición de WMT**.</span><span class="sxs-lookup"><span data-stu-id="ee611-127">This filled-in structure is returned in the *pValue* parameter of the [**IWMStatusCallback::OnStatus**](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmstatuscallback-onstatus) method if **WMT\_STATUS** equals **WMT\_NO\_RIGHTS\_EX** or **WMT\_ACQUIRE\_LICENSE**.</span></span> <span data-ttu-id="ee611-128">En el caso de \_ los eventos de WMT no \_ Rights \_ ex, el miembro **HR** será la \_ licencia NS e requerida, la licencia \_ \_ NS \_ e \_ \_ obsoleta o los \_ \_ \_ derechos incorrectos \_ .</span><span class="sxs-lookup"><span data-stu-id="ee611-128">For WMT\_NO\_RIGHTS\_EX events, the **hr** member will be NS\_E\_LICENSE\_REQUIRED, NS\_E\_LICENSE\_OUTOFDATE, or NS\_E\_LICENSE\_INCORRECT\_RIGHTS.</span></span> <span data-ttu-id="ee611-129">Cualquiera de estos errores indica que se debe adquirir una nueva licencia navegando a la dirección URL del miembro **wszURL** .</span><span class="sxs-lookup"><span data-stu-id="ee611-129">Any of these errors indicates that a new license must be acquired by navigating to the URL in the **wszURL** member.</span></span>

<span data-ttu-id="ee611-130">En el caso de los eventos de licencia de adquisición de WMT \_ \_ , el miembro **HR** pasará la macro Succeeded si se adquirió correctamente una licencia.</span><span class="sxs-lookup"><span data-stu-id="ee611-130">For WMT\_ACQUIRE\_LICENSE events, the **hr** member will pass the SUCCEEDED macro if a license was successfully acquired.</span></span> <span data-ttu-id="ee611-131">Si este evento se recibe después de un intento de adquisición silenciosa y **HR** es igual a NS \_ E \_ DRM \_ License \_ NOTACQUIRED, indica que el servidor de licencias solo admite la adquisición no silenciosa para esta licencia.</span><span class="sxs-lookup"><span data-stu-id="ee611-131">If this event is received after an attempt at silent acquisition, and **hr** equals NS\_E\_DRM\_LICENSE\_NOTACQUIRED, it indicates that only non-silent acquisition is supported by the license server for this license.</span></span>

<span data-ttu-id="ee611-132">La aplicación de ejemplo AudioPlayer muestra cómo utilizar correctamente la información devuelta en esta estructura.</span><span class="sxs-lookup"><span data-stu-id="ee611-132">The Audioplayer sample application demonstrates how to correctly use the information returned in this structure.</span></span>

## <a name="requirements"></a><span data-ttu-id="ee611-133">Requisitos</span><span class="sxs-lookup"><span data-stu-id="ee611-133">Requirements</span></span>



| <span data-ttu-id="ee611-134">Requisito</span><span class="sxs-lookup"><span data-stu-id="ee611-134">Requirement</span></span> | <span data-ttu-id="ee611-135">Value</span><span class="sxs-lookup"><span data-stu-id="ee611-135">Value</span></span> |
|-------------------------------------|-------------------------------------------------------------------------------------------|
| <span data-ttu-id="ee611-136">Cliente mínimo compatible</span><span class="sxs-lookup"><span data-stu-id="ee611-136">Minimum supported client</span></span><br/> | <span data-ttu-id="ee611-137">\[Solo aplicaciones de escritorio\] de Windows 2000 Professional</span><span class="sxs-lookup"><span data-stu-id="ee611-137">Windows 2000 Professional \[desktop apps only\]</span></span><br/>                                |
| <span data-ttu-id="ee611-138">Servidor mínimo compatible</span><span class="sxs-lookup"><span data-stu-id="ee611-138">Minimum supported server</span></span><br/> | <span data-ttu-id="ee611-139">\[Solo aplicaciones de escritorio\] de Windows 2000 Server</span><span class="sxs-lookup"><span data-stu-id="ee611-139">Windows 2000 Server \[desktop apps only\]</span></span><br/>                                      |
| <span data-ttu-id="ee611-140">Versión</span><span class="sxs-lookup"><span data-stu-id="ee611-140">Version</span></span><br/>                  | <span data-ttu-id="ee611-141">SDK de Windows Media Format 7 o versiones posteriores del SDK</span><span class="sxs-lookup"><span data-stu-id="ee611-141">Windows Media Format 7 SDK, or later versions of the SDK</span></span><br/>                       |
| <span data-ttu-id="ee611-142">Encabezado</span><span class="sxs-lookup"><span data-stu-id="ee611-142">Header</span></span><br/>                   | <dl> <span data-ttu-id="ee611-143"><dt>Drmexternals. h</dt></span><span class="sxs-lookup"><span data-stu-id="ee611-143"><dt>Drmexternals.h</dt></span></span> </dl> |



## <a name="see-also"></a><span data-ttu-id="ee611-144">Vea también</span><span class="sxs-lookup"><span data-stu-id="ee611-144">See also</span></span>

<dl> <dt>

[<span data-ttu-id="ee611-145">**IWMDRMReader:: AcquireLicense**</span><span class="sxs-lookup"><span data-stu-id="ee611-145">**IWMDRMReader::AcquireLicense**</span></span>](/previous-versions/windows/desktop/api/Wmsdkidl/nf-wmsdkidl-iwmdrmreader-acquirelicense)
</dt> <dt>

[<span data-ttu-id="ee611-146">**Estructuras**</span><span class="sxs-lookup"><span data-stu-id="ee611-146">**Structures**</span></span>](structures.md)
</dt> </dl>

 

 





