---
description: En este tema se describe cómo se deben usar los enlaces.
ms.assetid: 9ced0ac4-e602-425f-b954-6af9c741699a
title: Información general sobre enlaces
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 36c5d89f111604418d1dc3ea9a4ebce6fe0a8124
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105659939"
---
# <a name="hooks-overview"></a><span data-ttu-id="ba1fc-103">Información general sobre enlaces</span><span class="sxs-lookup"><span data-stu-id="ba1fc-103">Hooks Overview</span></span>

<span data-ttu-id="ba1fc-104">Un *enlace* es un mecanismo por el que una aplicación puede interceptar eventos, como mensajes, acciones del mouse y pulsaciones de teclas.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-104">A *hook* is a mechanism by which an application can intercept events, such as messages, mouse actions, and keystrokes.</span></span> <span data-ttu-id="ba1fc-105">Una función que intercepta un tipo determinado de evento se conoce como procedimiento de *enlace*.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-105">A function that intercepts a particular type of event is known as a *hook procedure*.</span></span> <span data-ttu-id="ba1fc-106">Un procedimiento de enlace puede actuar en cada evento que recibe y, a continuación, modificar o descartar el evento.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-106">A hook procedure can act on each event it receives, and then modify or discard the event.</span></span>

<span data-ttu-id="ba1fc-107">En el siguiente ejemplo se usan los enlaces:</span><span class="sxs-lookup"><span data-stu-id="ba1fc-107">The following some example uses for hooks:</span></span>

-   <span data-ttu-id="ba1fc-108">Supervisar mensajes con fines de depuración</span><span class="sxs-lookup"><span data-stu-id="ba1fc-108">Monitor messages for debugging purposes</span></span>
-   <span data-ttu-id="ba1fc-109">Proporcionar compatibilidad para grabar y reproducir macros</span><span class="sxs-lookup"><span data-stu-id="ba1fc-109">Provide support for recording and playback of macros</span></span>
-   <span data-ttu-id="ba1fc-110">Proporcionar compatibilidad con una tecla de ayuda (F1)</span><span class="sxs-lookup"><span data-stu-id="ba1fc-110">Provide support for a help key (F1)</span></span>
-   <span data-ttu-id="ba1fc-111">Simular la entrada del mouse y del teclado</span><span class="sxs-lookup"><span data-stu-id="ba1fc-111">Simulate mouse and keyboard input</span></span>
-   <span data-ttu-id="ba1fc-112">Implementar una aplicación de aprendizaje basado en equipos (CBT)</span><span class="sxs-lookup"><span data-stu-id="ba1fc-112">Implement a computer-based training (CBT) application</span></span>

> [!Note]  
> <span data-ttu-id="ba1fc-113">Los enlaces tienden a ralentizar el sistema porque aumentan la cantidad de procesamiento que el sistema debe realizar para cada mensaje.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-113">Hooks tend to slow down the system because they increase the amount of processing the system must perform for each message.</span></span> <span data-ttu-id="ba1fc-114">Solo debe instalar un enlace cuando sea necesario y quitarlo lo antes posible.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-114">You should install a hook only when necessary, and remove it as soon as possible.</span></span>

 

<span data-ttu-id="ba1fc-115">En esta sección se trata lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="ba1fc-115">This section discusses the following:</span></span>

-   [<span data-ttu-id="ba1fc-116">Cadenas de enlace</span><span class="sxs-lookup"><span data-stu-id="ba1fc-116">Hook Chains</span></span>](#hook-chains)
-   [<span data-ttu-id="ba1fc-117">Procedimientos de enlace</span><span class="sxs-lookup"><span data-stu-id="ba1fc-117">Hook Procedures</span></span>](#hook-procedures)
-   [<span data-ttu-id="ba1fc-118">Tipos de enlace</span><span class="sxs-lookup"><span data-stu-id="ba1fc-118">Hook Types</span></span>](#hook-types)
    -   [<span data-ttu-id="ba1fc-119">QU \_ CALLWNDPROC y qu \_ CALLWNDPROCRET</span><span class="sxs-lookup"><span data-stu-id="ba1fc-119">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>](#wh_callwndproc-and-wh_callwndprocret)
    -   [<span data-ttu-id="ba1fc-120">QU \_ CBT</span><span class="sxs-lookup"><span data-stu-id="ba1fc-120">WH\_CBT</span></span>](#wh_cbt)
    -   [<span data-ttu-id="ba1fc-121">QU \_ depuración</span><span class="sxs-lookup"><span data-stu-id="ba1fc-121">WH\_DEBUG</span></span>](#wh_debug)
    -   [<span data-ttu-id="ba1fc-122">QU \_ FOREGROUNDIDLE</span><span class="sxs-lookup"><span data-stu-id="ba1fc-122">WH\_FOREGROUNDIDLE</span></span>](#wh_foregroundidle)
    -   [<span data-ttu-id="ba1fc-123">\_qume</span><span class="sxs-lookup"><span data-stu-id="ba1fc-123">WH\_GETMESSAGE</span></span>](#wh_getmessage)
    -   [<span data-ttu-id="ba1fc-124">QU \_ JOURNALPLAYBACK</span><span class="sxs-lookup"><span data-stu-id="ba1fc-124">WH\_JOURNALPLAYBACK</span></span>](#wh_journalplayback)
    -   [<span data-ttu-id="ba1fc-125">QU \_ JOURNALRECORD</span><span class="sxs-lookup"><span data-stu-id="ba1fc-125">WH\_JOURNALRECORD</span></span>](#wh_journalrecord)
    -   [<span data-ttu-id="ba1fc-126">QU \_ Keyboard \_ ll</span><span class="sxs-lookup"><span data-stu-id="ba1fc-126">WH\_KEYBOARD\_LL</span></span>](#wh_keyboard_ll)
    -   [<span data-ttu-id="ba1fc-127">QU \_ Keyboard</span><span class="sxs-lookup"><span data-stu-id="ba1fc-127">WH\_KEYBOARD</span></span>](#wh_keyboard)
    -   [<span data-ttu-id="ba1fc-128">QU \_ mouse \_ ll</span><span class="sxs-lookup"><span data-stu-id="ba1fc-128">WH\_MOUSE\_LL</span></span>](#wh_mouse_ll)
    -   [<span data-ttu-id="ba1fc-129">QU \_ mouse</span><span class="sxs-lookup"><span data-stu-id="ba1fc-129">WH\_MOUSE</span></span>](#wh_mouse)
    -   [<span data-ttu-id="ba1fc-130">QU \_ MSGFILTER y qu \_ SYSMSGFILTER</span><span class="sxs-lookup"><span data-stu-id="ba1fc-130">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>](#wh_msgfilter-and-wh_sysmsgfilter)
    -   [<span data-ttu-id="ba1fc-131">QU \_ Shell</span><span class="sxs-lookup"><span data-stu-id="ba1fc-131">WH\_SHELL</span></span>](#wh_shell)

## <a name="hook-chains"></a><span data-ttu-id="ba1fc-132">Cadenas de enlace</span><span class="sxs-lookup"><span data-stu-id="ba1fc-132">Hook Chains</span></span>

<span data-ttu-id="ba1fc-133">El sistema admite muchos tipos diferentes de enlaces; cada tipo proporciona acceso a un aspecto diferente del mecanismo de control de mensajes.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-133">The system supports many different types of hooks; each type provides access to a different aspect of its message-handling mechanism.</span></span> <span data-ttu-id="ba1fc-134">Por ejemplo, una aplicación puede usar el [enlace \_ del mouse](#wh_mouse) para supervisar el tráfico de mensajes de mouse.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-134">For example, an application can use the [WH\_MOUSE](#wh_mouse) hook to monitor the message traffic for mouse messages.</span></span>

<span data-ttu-id="ba1fc-135">El sistema mantiene una cadena de enlace independiente para cada tipo de enlace.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-135">The system maintains a separate hook chain for each type of hook.</span></span> <span data-ttu-id="ba1fc-136">Una *cadena de enlaces* es una lista de punteros a funciones de devolución de llamada especiales definidas por la aplicación llamadas *procedimientos de enlace*.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-136">A *hook chain* is a list of pointers to special, application-defined callback functions called *hook procedures*.</span></span> <span data-ttu-id="ba1fc-137">Cuando se produce un mensaje que está asociado a un tipo determinado de enlace, el sistema pasa el mensaje a cada uno de los procedimientos de enlace a los que se hace referencia en la cadena de enlaces, uno después de otro.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-137">When a message occurs that is associated with a particular type of hook, the system passes the message to each hook procedure referenced in the hook chain, one after the other.</span></span> <span data-ttu-id="ba1fc-138">La acción que puede realizar un procedimiento de enlace depende del tipo de enlace implicado.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-138">The action a hook procedure can take depends on the type of hook involved.</span></span> <span data-ttu-id="ba1fc-139">Los procedimientos de enlace para algunos tipos de enlaces solo pueden supervisar mensajes; otros usuarios pueden modificar los mensajes o detener su progreso a través de la cadena, evitando que lleguen al siguiente procedimiento de enlace o a la ventana de destino.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-139">The hook procedures for some types of hooks can only monitor messages; others can modify messages or stop their progress through the chain, preventing them from reaching the next hook procedure or the destination window.</span></span>

## <a name="hook-procedures"></a><span data-ttu-id="ba1fc-140">Procedimientos de enlace</span><span class="sxs-lookup"><span data-stu-id="ba1fc-140">Hook Procedures</span></span>

<span data-ttu-id="ba1fc-141">Para beneficiarse de un tipo determinado de enlace, el desarrollador proporciona un procedimiento de enlace y usa la función [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) para instalarlo en la cadena asociada con el enlace.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-141">To take advantage of a particular type of hook, the developer provides a hook procedure and uses the [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function to install it into the chain associated with the hook.</span></span> <span data-ttu-id="ba1fc-142">Un procedimiento de enlace debe tener la siguiente sintaxis:</span><span class="sxs-lookup"><span data-stu-id="ba1fc-142">A hook procedure must have the following syntax:</span></span>

``` syntax
LRESULT CALLBACK HookProc(
  int nCode, 
  WPARAM wParam, 
  LPARAM lParam
)
{
   // process event
   ...

   return CallNextHookEx(NULL, nCode, wParam, lParam);
}
```

<span data-ttu-id="ba1fc-143">*HookProc* es un marcador de posición para un nombre definido por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-143">*HookProc* is a placeholder for an application-defined name.</span></span>

<span data-ttu-id="ba1fc-144">El parámetro *nCode* es un código de enlace que el procedimiento de enlace usa para determinar la acción que se va a realizar.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-144">The *nCode* parameter is a hook code that the hook procedure uses to determine the action to perform.</span></span> <span data-ttu-id="ba1fc-145">El valor del código de enlace depende del tipo del enlace; cada tipo tiene su propio conjunto característico de códigos de enlace.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-145">The value of the hook code depends on the type of the hook; each type has its own characteristic set of hook codes.</span></span> <span data-ttu-id="ba1fc-146">Los valores de los parámetros *wParam* e *lParam* dependen del código de enlace, pero suelen contener información sobre un mensaje que se envió o se publicó.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-146">The values of the *wParam* and *lParam* parameters depend on the hook code, but they typically contain information about a message that was sent or posted.</span></span>

<span data-ttu-id="ba1fc-147">La función [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) siempre instala un procedimiento de enlace al principio de una cadena de enlaces.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-147">The [**SetWindowsHookEx**](/windows/win32/api/winuser/nf-winuser-setwindowshookexa) function always installs a hook procedure at the beginning of a hook chain.</span></span> <span data-ttu-id="ba1fc-148">Cuando se produce un evento supervisado por un tipo de enlace determinado, el sistema llama al procedimiento situado al principio de la cadena de enlace asociada al enlace.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-148">When an event occurs that is monitored by a particular type of hook, the system calls the procedure at the beginning of the hook chain associated with the hook.</span></span> <span data-ttu-id="ba1fc-149">Cada procedimiento de enlace de la cadena determina si se debe pasar el evento al procedimiento siguiente.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-149">Each hook procedure in the chain determines whether to pass the event to the next procedure.</span></span> <span data-ttu-id="ba1fc-150">Un procedimiento de enlace pasa un evento al procedimiento siguiente mediante una llamada a la función [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-150">A hook procedure passes an event to the next procedure by calling the [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex) function.</span></span>

<span data-ttu-id="ba1fc-151">Tenga en cuenta que los procedimientos de enlace para algunos tipos de enlaces solo pueden supervisar mensajes.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-151">Note that the hook procedures for some types of hooks can only monitor messages.</span></span> <span data-ttu-id="ba1fc-152">el sistema pasa los mensajes a cada procedimiento de enlace, con independencia de si un procedimiento determinado llama a [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex).</span><span class="sxs-lookup"><span data-stu-id="ba1fc-152">the system passes messages to each hook procedure, regardless of whether a particular procedure calls [**CallNextHookEx**](/windows/win32/api/winuser/nf-winuser-callnexthookex).</span></span>

<span data-ttu-id="ba1fc-153">Un *enlace global* supervisa los mensajes de todos los subprocesos del mismo escritorio que el subproceso que realiza la llamada.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-153">A *global hook* monitors messages for all threads in the same desktop as the calling thread.</span></span> <span data-ttu-id="ba1fc-154">Un *enlace específico del subproceso* solo supervisa los mensajes de un subproceso individual.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-154">A *thread-specific hook* monitors messages for only an individual thread.</span></span> <span data-ttu-id="ba1fc-155">Se puede llamar a un procedimiento de enlace global en el contexto de cualquier aplicación en el mismo escritorio que el subproceso que realiza la llamada, por lo que el procedimiento debe encontrarse en un módulo DLL independiente.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-155">A global hook procedure can be called in the context of any application in the same desktop as the calling thread, so the procedure must be in a separate DLL module.</span></span> <span data-ttu-id="ba1fc-156">Solo se llama a un procedimiento de enlace específico del subproceso en el contexto del subproceso asociado.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-156">A thread-specific hook procedure is called only in the context of the associated thread.</span></span> <span data-ttu-id="ba1fc-157">Si una aplicación instala un procedimiento de enlace para uno de sus propios subprocesos, el procedimiento de enlace puede estar en el mismo módulo que el resto del código de la aplicación o en un archivo DLL.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-157">If an application installs a hook procedure for one of its own threads, the hook procedure can be in either the same module as the rest of the application's code or in a DLL.</span></span> <span data-ttu-id="ba1fc-158">Si la aplicación instala un procedimiento de enlace para un subproceso de una aplicación diferente, el procedimiento debe estar en un archivo DLL.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-158">If the application installs a hook procedure for a thread of a different application, the procedure must be in a DLL.</span></span> <span data-ttu-id="ba1fc-159">Para obtener más información, consulte [bibliotecas de vínculos dinámicos](../dlls/dynamic-link-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="ba1fc-159">For information, see [Dynamic-Link Libraries](../dlls/dynamic-link-libraries.md).</span></span>

> [!Note]  
> <span data-ttu-id="ba1fc-160">Los enlaces globales solo se deben usar con fines de depuración; de lo contrario, debe evitarlos.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-160">You should use global hooks only for debugging purposes; otherwise, you should avoid them.</span></span> <span data-ttu-id="ba1fc-161">Los enlaces globales perjudican el rendimiento del sistema y causan conflictos con otras aplicaciones que implementan el mismo tipo de enlace global.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-161">Global hooks hurt system performance and cause conflicts with other applications that implement the same type of global hook.</span></span>

 

## <a name="hook-types"></a><span data-ttu-id="ba1fc-162">Tipos de enlace</span><span class="sxs-lookup"><span data-stu-id="ba1fc-162">Hook Types</span></span>

<span data-ttu-id="ba1fc-163">Cada tipo de enlace permite a una aplicación supervisar un aspecto diferente del mecanismo de control de mensajes del sistema.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-163">Each type of hook enables an application to monitor a different aspect of the system's message-handling mechanism.</span></span> <span data-ttu-id="ba1fc-164">En las secciones siguientes se describen los enlaces disponibles.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-164">The following sections describe the available hooks.</span></span>

-   [<span data-ttu-id="ba1fc-165">QU \_ CALLWNDPROC y qu \_ CALLWNDPROCRET</span><span class="sxs-lookup"><span data-stu-id="ba1fc-165">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>](#wh_callwndproc-and-wh_callwndprocret)
-   [<span data-ttu-id="ba1fc-166">QU \_ CBT</span><span class="sxs-lookup"><span data-stu-id="ba1fc-166">WH\_CBT</span></span>](#wh_cbt)
-   [<span data-ttu-id="ba1fc-167">QU \_ depuración</span><span class="sxs-lookup"><span data-stu-id="ba1fc-167">WH\_DEBUG</span></span>](#wh_debug)
-   [<span data-ttu-id="ba1fc-168">QU \_ FOREGROUNDIDLE</span><span class="sxs-lookup"><span data-stu-id="ba1fc-168">WH\_FOREGROUNDIDLE</span></span>](#wh_foregroundidle)
-   [<span data-ttu-id="ba1fc-169">\_qume</span><span class="sxs-lookup"><span data-stu-id="ba1fc-169">WH\_GETMESSAGE</span></span>](#wh_getmessage)
-   [<span data-ttu-id="ba1fc-170">QU \_ JOURNALPLAYBACK</span><span class="sxs-lookup"><span data-stu-id="ba1fc-170">WH\_JOURNALPLAYBACK</span></span>](#wh_journalplayback)
-   [<span data-ttu-id="ba1fc-171">QU \_ JOURNALRECORD</span><span class="sxs-lookup"><span data-stu-id="ba1fc-171">WH\_JOURNALRECORD</span></span>](#wh_journalrecord)
-   [<span data-ttu-id="ba1fc-172">QU \_ Keyboard \_ ll</span><span class="sxs-lookup"><span data-stu-id="ba1fc-172">WH\_KEYBOARD\_LL</span></span>](#wh_keyboard_ll)
-   [<span data-ttu-id="ba1fc-173">QU \_ Keyboard</span><span class="sxs-lookup"><span data-stu-id="ba1fc-173">WH\_KEYBOARD</span></span>](#wh_keyboard)
-   [<span data-ttu-id="ba1fc-174">QU \_ mouse \_ ll</span><span class="sxs-lookup"><span data-stu-id="ba1fc-174">WH\_MOUSE\_LL</span></span>](#wh_mouse_ll)
-   [<span data-ttu-id="ba1fc-175">QU \_ mouse</span><span class="sxs-lookup"><span data-stu-id="ba1fc-175">WH\_MOUSE</span></span>](#wh_mouse)
-   [<span data-ttu-id="ba1fc-176">QU \_ MSGFILTER y qu \_ SYSMSGFILTER</span><span class="sxs-lookup"><span data-stu-id="ba1fc-176">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>](#wh_msgfilter-and-wh_sysmsgfilter)
-   [<span data-ttu-id="ba1fc-177">QU \_ Shell</span><span class="sxs-lookup"><span data-stu-id="ba1fc-177">WH\_SHELL</span></span>](#wh_shell)

### <a name="wh_callwndproc-and-wh_callwndprocret"></a><span data-ttu-id="ba1fc-178">QU \_ CALLWNDPROC y qu \_ CALLWNDPROCRET</span><span class="sxs-lookup"><span data-stu-id="ba1fc-178">WH\_CALLWNDPROC and WH\_CALLWNDPROCRET</span></span>

<span data-ttu-id="ba1fc-179">Los enlaces **qu \_ CALLWNDPROC** y **qu \_ CALLWNDPROCRET** permiten supervisar los mensajes enviados a los procedimientos de ventana.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-179">The **WH\_CALLWNDPROC** and **WH\_CALLWNDPROCRET** hooks enable you to monitor messages sent to window procedures.</span></span> <span data-ttu-id="ba1fc-180">El sistema llama a un procedimiento de enlace de **qu \_ CALLWNDPROC** antes de pasar el mensaje al procedimiento de ventana receptor y llama al procedimiento del enlace **qu \_ CALLWNDPROCRET** después de que el procedimiento de ventana haya procesado el mensaje.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-180">The system calls a **WH\_CALLWNDPROC** hook procedure before passing the message to the receiving window procedure, and calls the **WH\_CALLWNDPROCRET** hook procedure after the window procedure has processed the message.</span></span>

<span data-ttu-id="ba1fc-181">El enlace **qu \_ CALLWNDPROCRET** pasa un puntero a una estructura [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct) al procedimiento de enlace.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-181">The **WH\_CALLWNDPROCRET** hook passes a pointer to a [**CWPRETSTRUCT**](/windows/win32/api/winuser/ns-winuser-cwpretstruct) structure to the hook procedure.</span></span> <span data-ttu-id="ba1fc-182">La estructura contiene el valor devuelto por el procedimiento de ventana que procesó el mensaje, así como los parámetros de mensaje asociados al mensaje.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-182">The structure contains the return value from the window procedure that processed the message, as well as the message parameters associated with the message.</span></span> <span data-ttu-id="ba1fc-183">La subclase de la ventana no funciona para los mensajes que se establecen entre los procesos.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-183">Subclassing the window does not work for messages set between processes.</span></span>

<span data-ttu-id="ba1fc-184">Para obtener más información, vea las funciones de devolución de llamada [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) y [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-184">For more information, see the [*CallWndProc*](/previous-versions/windows/desktop/legacy/ms644975(v=vs.85)) and [*CallWndRetProc*](/windows/win32/api/winuser/nc-winuser-hookproc) callback functions.</span></span>

### <a name="wh_cbt"></a><span data-ttu-id="ba1fc-185">QU \_ CBT</span><span class="sxs-lookup"><span data-stu-id="ba1fc-185">WH\_CBT</span></span>

<span data-ttu-id="ba1fc-186">El sistema llama a un procedimiento de enlace de **qude \_** antes de activar, crear, destruir, minimizar, maximizar, mover o cambiar el tamaño de una ventana; antes de completar un comando del sistema; antes de quitar un evento del mouse o del teclado de la cola de mensajes del sistema, antes de establecer el foco de entrada o antes de sincronizar con la cola de mensajes del sistema.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-186">The system calls a **WH\_CBT** hook procedure before activating, creating, destroying, minimizing, maximizing, moving, or sizing a window; before completing a system command; before removing a mouse or keyboard event from the system message queue; before setting the input focus; or before synchronizing with the system message queue.</span></span> <span data-ttu-id="ba1fc-187">El valor que devuelve el procedimiento de enlace determina si el sistema permite o impide una de estas operaciones.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-187">The value the hook procedure returns determines whether the system allows or prevents one of these operations.</span></span> <span data-ttu-id="ba1fc-188">El enlace de **\_ CBT** está diseñado principalmente para aplicaciones de aprendizaje basado en equipos (CBT).</span><span class="sxs-lookup"><span data-stu-id="ba1fc-188">The **WH\_CBT** hook is intended primarily for computer-based training (CBT) applications.</span></span>

<span data-ttu-id="ba1fc-189">Para obtener más información, vea la función de devolución de llamada [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-189">For more information, see the [*CBTProc*](/previous-versions/windows/desktop/legacy/ms644977(v=vs.85)) callback function.</span></span>

<span data-ttu-id="ba1fc-190">Para obtener información, consulte [WinEvents](/windows/desktop/WinAuto/winevents-infrastructure).</span><span class="sxs-lookup"><span data-stu-id="ba1fc-190">For information, see [WinEvents](/windows/desktop/WinAuto/winevents-infrastructure).</span></span>

### <a name="wh_debug"></a><span data-ttu-id="ba1fc-191">QU \_ depuración</span><span class="sxs-lookup"><span data-stu-id="ba1fc-191">WH\_DEBUG</span></span>

<span data-ttu-id="ba1fc-192">El sistema llama a un procedimiento de enlace de **\_ depuración de qu** antes de llamar a los procedimientos de enlace asociados a cualquier otro enlace del sistema.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-192">The system calls a **WH\_DEBUG** hook procedure before calling hook procedures associated with any other hook in the system.</span></span> <span data-ttu-id="ba1fc-193">Puede usar este enlace para determinar si se permite que el sistema llame a los procedimientos de enlace asociados a otros tipos de enlaces.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-193">You can use this hook to determine whether to allow the system to call hook procedures associated with other types of hooks.</span></span>

<span data-ttu-id="ba1fc-194">Para obtener más información, vea la función de devolución de llamada [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-194">For more information, see the [*DebugProc*](/previous-versions/windows/desktop/legacy/ms644978(v=vs.85)) callback function.</span></span>

### <a name="wh_foregroundidle"></a><span data-ttu-id="ba1fc-195">QU \_ FOREGROUNDIDLE</span><span class="sxs-lookup"><span data-stu-id="ba1fc-195">WH\_FOREGROUNDIDLE</span></span>

<span data-ttu-id="ba1fc-196">El enlace **qu \_ FOREGROUNDIDLE** le permite realizar tareas de prioridad baja en momentos en los que el subproceso en primer plano está inactivo.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-196">The **WH\_FOREGROUNDIDLE** hook enables you to perform low priority tasks during times when its foreground thread is idle.</span></span> <span data-ttu-id="ba1fc-197">El sistema llama a un procedimiento de enlace **qu \_ FOREGROUNDIDLE** cuando el subproceso en primer plano de la aplicación está a punto de convertirse en inactivo.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-197">The system calls a **WH\_FOREGROUNDIDLE** hook procedure when the application's foreground thread is about to become idle.</span></span>

<span data-ttu-id="ba1fc-198">Para obtener más información, vea la función de devolución de llamada [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-198">For more information, see the [*ForegroundIdleProc*](/previous-versions/windows/desktop/legacy/ms644980(v=vs.85)) callback function.</span></span>

### <a name="wh_getmessage"></a><span data-ttu-id="ba1fc-199">\_qume</span><span class="sxs-lookup"><span data-stu-id="ba1fc-199">WH\_GETMESSAGE</span></span>

<span data-ttu-id="ba1fc-200">El enlace **qu \_ GETMESSAGE** permite a una aplicación supervisar los mensajes que se van a devolver mediante la función [**GETMESSAGE**](/windows/win32/api/winuser/nf-winuser-getmessage) o [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-200">The **WH\_GETMESSAGE** hook enables an application to monitor messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="ba1fc-201">Puede usar el enlace **qu \_ GETMESSAGE** para supervisar la entrada del mouse y del teclado, y otros mensajes enviados a la cola de mensajes.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-201">You can use the **WH\_GETMESSAGE** hook to monitor mouse and keyboard input and other messages posted to the message queue.</span></span>

<span data-ttu-id="ba1fc-202">Para obtener más información, vea la función de devolución de llamada [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-202">For more information, see the [*GetMsgProc*](/previous-versions/windows/desktop/legacy/ms644981(v=vs.85)) callback function.</span></span>

### <a name="wh_journalplayback"></a><span data-ttu-id="ba1fc-203">QU \_ JOURNALPLAYBACK</span><span class="sxs-lookup"><span data-stu-id="ba1fc-203">WH\_JOURNALPLAYBACK</span></span>

<span data-ttu-id="ba1fc-204">El enlace **qu \_ JOURNALPLAYBACK** permite a una aplicación insertar mensajes en la cola de mensajes del sistema.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-204">The **WH\_JOURNALPLAYBACK** hook enables an application to insert messages into the system message queue.</span></span> <span data-ttu-id="ba1fc-205">Puede usar este enlace para reproducir una serie de eventos de mouse y teclado registrados anteriormente mediante el uso de [qu \_ JOURNALRECORD](#wh_journalrecord).</span><span class="sxs-lookup"><span data-stu-id="ba1fc-205">You can use this hook to play back a series of mouse and keyboard events recorded earlier by using [WH\_JOURNALRECORD](#wh_journalrecord).</span></span> <span data-ttu-id="ba1fc-206">La entrada normal del mouse y del teclado está deshabilitada, siempre y cuando esté instalado el enlace **qu \_ JOURNALPLAYBACK** .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-206">Regular mouse and keyboard input is disabled as long as a **WH\_JOURNALPLAYBACK** hook is installed.</span></span> <span data-ttu-id="ba1fc-207">Un enlace **qu \_ JOURNALPLAYBACK** es un enlace global; no se puede usar como un enlace específico del subproceso.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-207">A **WH\_JOURNALPLAYBACK** hook is a global hook—it cannot be used as a thread-specific hook.</span></span>

<span data-ttu-id="ba1fc-208">El enlace **qu \_ JOURNALPLAYBACK** devuelve un valor de tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-208">The **WH\_JOURNALPLAYBACK** hook returns a time-out value.</span></span> <span data-ttu-id="ba1fc-209">Este valor indica al sistema el número de milisegundos que hay que esperar antes de procesar el mensaje actual desde el enlace de reproducción.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-209">This value tells the system how many milliseconds to wait before processing the current message from the playback hook.</span></span> <span data-ttu-id="ba1fc-210">Esto permite al enlace controlar el tiempo de los eventos que se reproduce.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-210">This enables the hook to control the timing of the events it plays back.</span></span>

<span data-ttu-id="ba1fc-211">Para obtener más información, vea la función de devolución de llamada [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-211">For more information, see the [*JournalPlaybackProc*](/previous-versions/windows/desktop/legacy/ms644982(v=vs.85)) callback function.</span></span>

### <a name="wh_journalrecord"></a><span data-ttu-id="ba1fc-212">QU \_ JOURNALRECORD</span><span class="sxs-lookup"><span data-stu-id="ba1fc-212">WH\_JOURNALRECORD</span></span>

<span data-ttu-id="ba1fc-213">El enlace **qu \_ JOURNALRECORD** le permite supervisar y grabar eventos de entrada.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-213">The **WH\_JOURNALRECORD** hook enables you to monitor and record input events.</span></span> <span data-ttu-id="ba1fc-214">Normalmente, este enlace se usa para registrar una secuencia de eventos del mouse y del teclado que se reproducirán más tarde mediante el uso de [qu \_ JOURNALPLAYBACK](#wh_journalplayback).</span><span class="sxs-lookup"><span data-stu-id="ba1fc-214">Typically, you use this hook to record a sequence of mouse and keyboard events to play back later by using [WH\_JOURNALPLAYBACK](#wh_journalplayback).</span></span> <span data-ttu-id="ba1fc-215">El enlace **qu \_ JOURNALRECORD** es un enlace global; no se puede usar como un enlace específico del subproceso.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-215">The **WH\_JOURNALRECORD** hook is a global hook—it cannot be used as a thread-specific hook.</span></span>

<span data-ttu-id="ba1fc-216">Para obtener más información, vea la función de devolución de llamada [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-216">For more information, see the [*JournalRecordProc*](/previous-versions/windows/desktop/legacy/ms644983(v=vs.85)) callback function.</span></span>

### <a name="wh_keyboard_ll"></a><span data-ttu-id="ba1fc-217">QU \_ Keyboard \_ ll</span><span class="sxs-lookup"><span data-stu-id="ba1fc-217">WH\_KEYBOARD\_LL</span></span>

<span data-ttu-id="ba1fc-218">El enlace **qu \_ Keyboard \_ ll** permite supervisar los eventos de entrada de teclado que se van a publicar en una cola de entrada de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-218">The **WH\_KEYBOARD\_LL** hook enables you to monitor keyboard input events about to be posted in a thread input queue.</span></span>

<span data-ttu-id="ba1fc-219">Para obtener más información, vea la función de devolución de llamada [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-219">For more information, see the [*LowLevelKeyboardProc*](/previous-versions/windows/desktop/legacy/ms644985(v=vs.85)) callback function.</span></span>

### <a name="wh_keyboard"></a><span data-ttu-id="ba1fc-220">QU \_ Keyboard</span><span class="sxs-lookup"><span data-stu-id="ba1fc-220">WH\_KEYBOARD</span></span>

<span data-ttu-id="ba1fc-221">El enlace de **\_ teclado qu** permite a una aplicación supervisar el tráfico de mensajes para los mensajes [**WM \_ KEYDOWN**](/windows/desktop/inputdev/wm-keydown) y [**WM \_ KEYUP**](/windows/desktop/inputdev/wm-keyup) que va a ser devuelto por la función [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) o [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-221">The **WH\_KEYBOARD** hook enables an application to monitor message traffic for [**WM\_KEYDOWN**](/windows/desktop/inputdev/wm-keydown) and [**WM\_KEYUP**](/windows/desktop/inputdev/wm-keyup) messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="ba1fc-222">Puede usar el enlace **de \_ teclado qu** para supervisar las entradas de teclado enviadas a una cola de mensajes.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-222">You can use the **WH\_KEYBOARD** hook to monitor keyboard input posted to a message queue.</span></span>

<span data-ttu-id="ba1fc-223">Para obtener más información, vea la función de devolución de llamada [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-223">For more information, see the [*KeyboardProc*](/previous-versions/windows/desktop/legacy/ms644984(v=vs.85)) callback function.</span></span>

### <a name="wh_mouse_ll"></a><span data-ttu-id="ba1fc-224">QU \_ mouse \_ ll</span><span class="sxs-lookup"><span data-stu-id="ba1fc-224">WH\_MOUSE\_LL</span></span>

<span data-ttu-id="ba1fc-225">El enlace **qu \_ mouse \_ ll** le permite supervisar los eventos de entrada del mouse que se van a publicar en una cola de entrada del subproceso.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-225">The **WH\_MOUSE\_LL** hook enables you to monitor mouse input events about to be posted in a thread input queue.</span></span>

<span data-ttu-id="ba1fc-226">Para obtener más información, vea la función de devolución de llamada [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-226">For more information, see the [*LowLevelMouseProc*](/previous-versions/windows/desktop/legacy/ms644986(v=vs.85)) callback function.</span></span>

### <a name="wh_mouse"></a><span data-ttu-id="ba1fc-227">QU \_ mouse</span><span class="sxs-lookup"><span data-stu-id="ba1fc-227">WH\_MOUSE</span></span>

<span data-ttu-id="ba1fc-228">El **enganche \_ del mouse** permite supervisar los mensajes de mouse que se van a devolver mediante la función [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) o [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-228">The **WH\_MOUSE** hook enables you to monitor mouse messages about to be returned by the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) or [**PeekMessage**](/windows/win32/api/winuser/nf-winuser-peekmessagea) function.</span></span> <span data-ttu-id="ba1fc-229">Puede usar el enlace **\_ del mouse** para supervisar la entrada del mouse enviada a una cola de mensajes.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-229">You can use the **WH\_MOUSE** hook to monitor mouse input posted to a message queue.</span></span>

<span data-ttu-id="ba1fc-230">Para obtener más información, vea la función de devolución de llamada [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-230">For more information, see the [*MouseProc*](/previous-versions/windows/desktop/legacy/ms644988(v=vs.85)) callback function.</span></span>

### <a name="wh_msgfilter-and-wh_sysmsgfilter"></a><span data-ttu-id="ba1fc-231">QU \_ MSGFILTER y qu \_ SYSMSGFILTER</span><span class="sxs-lookup"><span data-stu-id="ba1fc-231">WH\_MSGFILTER and WH\_SYSMSGFILTER</span></span>

<span data-ttu-id="ba1fc-232">Los enlaces **qu \_ MSGFILTER** y **qu \_ SYSMSGFILTER** permiten supervisar mensajes que van a ser procesados por un menú, una barra de desplazamiento, un cuadro de mensaje o un cuadro de diálogo, y detectar cuándo se va a activar una ventana diferente como resultado de presionar la combinación de teclas Alt + Tab o Alt + Esc.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-232">The **WH\_MSGFILTER** and **WH\_SYSMSGFILTER** hooks enable you to monitor messages about to be processed by a menu, scroll bar, message box, or dialog box, and to detect when a different window is about to be activated as a result of the user's pressing the ALT+TAB or ALT+ESC key combination.</span></span> <span data-ttu-id="ba1fc-233">El enlace **qu \_ MSGFILTER** solo puede supervisar los mensajes pasados a un menú, una barra de desplazamiento, un cuadro de mensaje o un cuadro de diálogo creado por la aplicación que instaló el procedimiento de enlace.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-233">The **WH\_MSGFILTER** hook can only monitor messages passed to a menu, scroll bar, message box, or dialog box created by the application that installed the hook procedure.</span></span> <span data-ttu-id="ba1fc-234">El enlace **qu \_ SYSMSGFILTER** supervisa estos mensajes para todas las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-234">The **WH\_SYSMSGFILTER** hook monitors such messages for all applications.</span></span>

<span data-ttu-id="ba1fc-235">Los enlaces **qu \_ MSGFILTER** y **qu \_ SYSMSGFILTER** permiten realizar el filtrado de mensajes durante los bucles modales equivalentes al filtrado realizado en el bucle de mensajes principal.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-235">The **WH\_MSGFILTER** and **WH\_SYSMSGFILTER** hooks enable you to perform message filtering during modal loops that is equivalent to the filtering done in the main message loop.</span></span> <span data-ttu-id="ba1fc-236">Por ejemplo, una aplicación suele examinar un nuevo mensaje en el bucle principal entre el momento en que recupera el mensaje de la cola y el tiempo que envía el mensaje, lo que realiza un procesamiento especial según corresponda.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-236">For example, an application often examines a new message in the main loop between the time it retrieves the message from the queue and the time it dispatches the message, performing special processing as appropriate.</span></span> <span data-ttu-id="ba1fc-237">Sin embargo, durante un bucle modal, el sistema recupera y envía mensajes sin permitir a una aplicación la posibilidad de filtrar los mensajes en su bucle de mensajes principal.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-237">However, during a modal loop, the system retrieves and dispatches messages without allowing an application the chance to filter the messages in its main message loop.</span></span> <span data-ttu-id="ba1fc-238">Si una aplicación instala un procedimiento de enlace **qu \_ MSGFILTER** o **qu \_ SYSMSGFILTER** , el sistema llama al procedimiento durante el bucle modal.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-238">If an application installs a **WH\_MSGFILTER** or **WH\_SYSMSGFILTER** hook procedure, the system calls the procedure during the modal loop.</span></span>

<span data-ttu-id="ba1fc-239">Una aplicación puede llamar al enlace **qu \_ MSGFILTER** directamente llamando a la función [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-239">An application can call the **WH\_MSGFILTER** hook directly by calling the [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) function.</span></span> <span data-ttu-id="ba1fc-240">Mediante esta función, la aplicación puede usar el mismo código para filtrar los mensajes durante los bucles modales que se usan en el bucle de mensajes principal.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-240">By using this function, the application can use the same code to filter messages during modal loops as it uses in the main message loop.</span></span> <span data-ttu-id="ba1fc-241">Para ello, encapsula las operaciones de filtrado en un procedimiento de enlace de **\_ MSGFILTER** y llama a **CallMsgFilter** entre las llamadas a las funciones [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) y [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-241">To do so, encapsulate the filtering operations in a **WH\_MSGFILTER** hook procedure and call **CallMsgFilter** between the calls to the [**GetMessage**](/windows/win32/api/winuser/nf-winuser-getmessage) and [**DispatchMessage**](/windows/win32/api/winuser/nf-winuser-dispatchmessage) functions.</span></span>

``` syntax
while (GetMessage(&msg, (HWND) NULL, 0, 0)) 
{ 
    if (!CallMsgFilter(&qmsg, 0)) 
        DispatchMessage(&qmsg); 
} 
```

<span data-ttu-id="ba1fc-242">El último argumento de [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) se pasa simplemente al procedimiento de enlace; puede escribir cualquier valor.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-242">The last argument of [**CallMsgFilter**](/windows/win32/api/winuser/nf-winuser-callmsgfiltera) is simply passed to the hook procedure; you can enter any value.</span></span> <span data-ttu-id="ba1fc-243">El procedimiento de enlace, definiendo una constante como **MSGF \_ MAINLOOP**, puede usar este valor para determinar dónde se llamó al procedimiento.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-243">The hook procedure, by defining a constant such as **MSGF\_MAINLOOP**, can use this value to determine where the procedure was called from.</span></span>

<span data-ttu-id="ba1fc-244">Para obtener más información, vea las funciones de devolución de llamada [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85)) y [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-244">For more information, see the [*MessageProc*](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85)) and [*SysMsgProc*](/previous-versions/windows/desktop/legacy/ms644992(v=vs.85)) callback functions.</span></span>

### <a name="wh_shell"></a><span data-ttu-id="ba1fc-245">QU \_ Shell</span><span class="sxs-lookup"><span data-stu-id="ba1fc-245">WH\_SHELL</span></span>

<span data-ttu-id="ba1fc-246">Una aplicación de Shell puede usar el enlace del **\_ Shell de qu** para recibir notificaciones importantes.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-246">A shell application can use the **WH\_SHELL** hook to receive important notifications.</span></span> <span data-ttu-id="ba1fc-247">El sistema llama a un procedimiento de enlace de **\_ Shell de qu** cuando la aplicación de Shell está a punto de activarse y cuando se crea o se destruye una ventana de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-247">The system calls a **WH\_SHELL** hook procedure when the shell application is about to be activated and when a top-level window is created or destroyed.</span></span>

<span data-ttu-id="ba1fc-248">Tenga en cuenta que las aplicaciones de Shell personalizadas no reciben los mensajes del **\_ Shell** .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-248">Note that custom shell applications do not receive **WH\_SHELL** messages.</span></span> <span data-ttu-id="ba1fc-249">Por lo tanto, cualquier aplicación que se registre como el shell predeterminado debe llamar a la función [**SystemParametersInfo**](/windows/desktop/api/winuser/nf-winuser-systemparametersinfoa) antes de que esta pueda recibir los mensajes **de \_ Shell** .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-249">Therefore, any application that registers itself as the default shell must call the [**SystemParametersInfo**](/windows/desktop/api/winuser/nf-winuser-systemparametersinfoa) function before it (or any other application) can receive **WH\_SHELL** messages.</span></span> <span data-ttu-id="ba1fc-250">Se debe llamar a esta función con **SPI \_ SETMINIMIZEDMETRICS** y una estructura [**MINIMIZEDMETRICS**](/windows/win32/api/winuser/ns-winuser-minimizedmetrics) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-250">This function must be called with **SPI\_SETMINIMIZEDMETRICS** and a [**MINIMIZEDMETRICS**](/windows/win32/api/winuser/ns-winuser-minimizedmetrics) structure.</span></span> <span data-ttu-id="ba1fc-251">Establezca el miembro **iArrange** de esta estructura en **ARW \_ Hide**.</span><span class="sxs-lookup"><span data-stu-id="ba1fc-251">Set the **iArrange** member of this structure to **ARW\_HIDE**.</span></span>

<span data-ttu-id="ba1fc-252">Para obtener más información, vea la función de devolución de llamada [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="ba1fc-252">For more information, see the [*ShellProc*](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) callback function.</span></span>

 

 
