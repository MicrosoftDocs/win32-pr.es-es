---
title: Protección contra reentrada en funciones de enlace
description: Mientras una función de enlace procesa un evento, se pueden desencadenar eventos adicionales, lo que puede hacer que la función de enlace se vuelva a escribir antes de que finalice el procesamiento del evento original.
ms.assetid: 2382e7a4-82df-423a-8479-66e28baf8105
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 74e2b0dc6f8951bf48ce3fecabd3a81bd345388d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104421174"
---
# <a name="guarding-against-reentrancy-in-hook-functions"></a><span data-ttu-id="856b7-103">Protección contra reentrada en funciones de enlace</span><span class="sxs-lookup"><span data-stu-id="856b7-103">Guarding Against Reentrancy in Hook Functions</span></span>

<span data-ttu-id="856b7-104">Mientras una función de enlace procesa un evento, se pueden desencadenar eventos adicionales, lo que puede hacer que la función de enlace se vuelva a escribir antes de que finalice el procesamiento del evento original.</span><span class="sxs-lookup"><span data-stu-id="856b7-104">While a hook function processes an event, additional events may be triggered, which may cause the hook function to reenter before the processing for the original event is finished.</span></span> <span data-ttu-id="856b7-105">El problema con la reentrada en las funciones de enlace es que los eventos se completan fuera de secuencia, a menos que la función de enlace controle esta situación.</span><span class="sxs-lookup"><span data-stu-id="856b7-105">The problem with reentrancy in hook functions is that events are completed out of sequence unless the hook function handles this situation.</span></span>

<span data-ttu-id="856b7-106">Por ejemplo, considere un caso en el que una función de enlace en un programa lector de pantalla está procesando el evento [**\_ \_ VALUECHANGE del objeto de evento**](event-constants.md) para un control de edición.</span><span class="sxs-lookup"><span data-stu-id="856b7-106">For example, consider a case where a hook function in a screen reader program is processing the [**EVENT\_OBJECT\_VALUECHANGE**](event-constants.md) event for an edit control.</span></span> <span data-ttu-id="856b7-107">Si, al procesar el primer evento de cambio de valor, se vuelve a escribir la función de enlace para procesar un evento de cambio de valor subsiguiente, el segundo evento se completa antes del primer evento.</span><span class="sxs-lookup"><span data-stu-id="856b7-107">If, while processing the first value change event the hook function is reentered to process a subsequent value change event, the second event is completed before the first event.</span></span> <span data-ttu-id="856b7-108">Esta situación da lugar a que el lector de pantalla transmita información incorrecta al usuario.</span><span class="sxs-lookup"><span data-stu-id="856b7-108">This situation results in the screen reader conveying inaccurate information to the user.</span></span>

<span data-ttu-id="856b7-109">Dado que se interrumpe el procesamiento de eventos, es posible que se reciban eventos adicionales cada vez que la función de enlace llame a una función que provoque que la cola de mensajes del subproceso propietario se compruebe.</span><span class="sxs-lookup"><span data-stu-id="856b7-109">Because event processing is interrupted, additional events might be received any time the hook function calls a function that causes the owning thread's message queue to get checked.</span></span> <span data-ttu-id="856b7-110">Esto sucede cuando se llama a cualquiera de los siguientes elementos dentro de la función de enlace:</span><span class="sxs-lookup"><span data-stu-id="856b7-110">This happens when any of the following are called within the hook function:</span></span>

-   <span data-ttu-id="856b7-111">La función [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage), [**GetMessage**](/windows/desktop/api/winuser/nf-winuser-getmessage), [**PeekMessage**](/windows/desktop/api/winuser/nf-winuser-peekmessagea), [**DialogBox**](/windows/desktop/api/winuser/nf-winuser-dialogboxa)o [**MessageBox**](/windows/desktop/api/winuser/nf-winuser-messagebox) de Windows</span><span class="sxs-lookup"><span data-stu-id="856b7-111">The Windows [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage), [**GetMessage**](/windows/desktop/api/winuser/nf-winuser-getmessage), [**PeekMessage**](/windows/desktop/api/winuser/nf-winuser-peekmessagea), [**DialogBox**](/windows/desktop/api/winuser/nf-winuser-dialogboxa), or [**MessageBox**](/windows/desktop/api/winuser/nf-winuser-messagebox) function</span></span>
-   <span data-ttu-id="856b7-112">Microsoft Active Accessibility Functions [**AccessibleObjectFromEvent**](/windows/desktop/api/Oleacc/nf-oleacc-accessibleobjectfromevent), [**AccessibleObjectFromWindow**](/windows/desktop/api/Oleacc/nf-oleacc-accessibleobjectfromwindow), [**AccessibleObjectFromPoint**](/windows/desktop/api/Oleacc/nf-oleacc-accessibleobjectfrompoint)</span><span class="sxs-lookup"><span data-stu-id="856b7-112">The Microsoft Active Accessibility functions [**AccessibleObjectFromEvent**](/windows/desktop/api/Oleacc/nf-oleacc-accessibleobjectfromevent), [**AccessibleObjectFromWindow**](/windows/desktop/api/Oleacc/nf-oleacc-accessibleobjectfromwindow), [**AccessibleObjectFromPoint**](/windows/desktop/api/Oleacc/nf-oleacc-accessibleobjectfrompoint)</span></span>
-   <span data-ttu-id="856b7-113">Una interfaz [**IAccessible**](/windows/desktop/api/oleacc/nn-oleacc-iaccessible) u otro método o propiedad del modelo de objetos componentes (com) que cruza los límites del proceso</span><span class="sxs-lookup"><span data-stu-id="856b7-113">An [**IAccessible**](/windows/desktop/api/oleacc/nn-oleacc-iaccessible) interface or other Component Object Model (COM) property or method that crosses process boundaries</span></span>

<span data-ttu-id="856b7-114">Dado que las funciones de enlace llaman a métodos y propiedades [**AccessibleObjectFromEvent**](/windows/desktop/api/Oleacc/nf-oleacc-accessibleobjectfromevent) y [**IAccessible**](/windows/desktop/api/oleacc/nn-oleacc-iaccessible) , no es posible evitar la reentrada.</span><span class="sxs-lookup"><span data-stu-id="856b7-114">Because hook functions call [**AccessibleObjectFromEvent**](/windows/desktop/api/Oleacc/nf-oleacc-accessibleobjectfromevent) and [**IAccessible**](/windows/desktop/api/oleacc/nn-oleacc-iaccessible) properties and methods, it is not possible to prevent reentrancy.</span></span> <span data-ttu-id="856b7-115">La única solución es que los desarrolladores de cliente agreguen código en la función de enlace que detecte la reentrada y tome las medidas adecuadas si se vuelve a escribir la función de enlace.</span><span class="sxs-lookup"><span data-stu-id="856b7-115">The only solution is for client developers to add code in the hook function that detects reentrancy and take appropriate action if the hook function is reentered.</span></span>

 

 