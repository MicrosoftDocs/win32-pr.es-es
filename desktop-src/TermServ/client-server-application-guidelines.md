---
title: Instrucciones para aplicaciones cliente/servidor
description: Las aplicaciones cliente/servidor no deben suponer que una conexión de un solo equipo es equivalente a una sesión de un solo usuario.
ms.assetid: 69822ef1-eca8-4302-b014-8e5894d52109
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cd0c1a71256f3ab469bfeb1c08b2d096b56ac1b5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "105685720"
---
# <a name="clientserver-application-guidelines"></a><span data-ttu-id="82c68-103">Instrucciones para aplicaciones cliente/servidor</span><span class="sxs-lookup"><span data-stu-id="82c68-103">Client/Server application guidelines</span></span>

<span data-ttu-id="82c68-104">Las aplicaciones cliente/servidor no deben suponer que una conexión de un solo equipo es equivalente a una sesión de un solo usuario.</span><span class="sxs-lookup"><span data-stu-id="82c68-104">Client/server applications must not assume that a single computer connection is equivalent to a single user session.</span></span> <span data-ttu-id="82c68-105">Este es un caso especial del problema descrito en [direcciones IP y nombres de equipo](ip-addresses-and-computer-names.md).</span><span class="sxs-lookup"><span data-stu-id="82c68-105">This is a special case of the issue discussed in [IP Addresses and Computer Names](ip-addresses-and-computer-names.md).</span></span>

<span data-ttu-id="82c68-106">Para identificar de forma única una conexión cliente/servidor, cada módulo cliente debe usar un nombre o un identificador único.</span><span class="sxs-lookup"><span data-stu-id="82c68-106">To uniquely identify a client/server connection, each client module must use a unique name or identifier.</span></span> <span data-ttu-id="82c68-107">Las aplicaciones pueden usar objetos o canalizaciones con nombre, Sockets u otros métodos IPC.</span><span class="sxs-lookup"><span data-stu-id="82c68-107">Applications can use named objects or pipes, sockets, or other IPC methods.</span></span> <span data-ttu-id="82c68-108">Para obtener más información, vea [espacios de nombres de objetos de kernel](kernel-object-namespaces.md).</span><span class="sxs-lookup"><span data-stu-id="82c68-108">For more information, see [Kernel Object Namespaces](kernel-object-namespaces.md).</span></span>

<span data-ttu-id="82c68-109">Para que sea Servicios de Escritorio remoto compatible, el módulo de servidor en una aplicación cliente/servidor debe ser capaz de administrar varios clientes que se conectan desde el mismo equipo.</span><span class="sxs-lookup"><span data-stu-id="82c68-109">To be Remote Desktop Services compatible, the server module in a client/server application must be able to handle multiple clients connecting from the same computer.</span></span> <span data-ttu-id="82c68-110">Para ello, el módulo de servidor debe aceptar conexiones de cliente a través de una interfaz global bien definida, como RPC o canalizaciones con nombre.</span><span class="sxs-lookup"><span data-stu-id="82c68-110">To accomplish this, the server module must accept client connections through a well-defined global interface, such as RPC or named pipes.</span></span> <span data-ttu-id="82c68-111">El servidor y el cliente deben negociar un canal de comunicación diferente para cada sesión de usuario.</span><span class="sxs-lookup"><span data-stu-id="82c68-111">The server and client must negotiate a different communication channel for each user session.</span></span> <span data-ttu-id="82c68-112">El cliente debe establecer una conexión con el servidor mediante el uso de protocolos que admiten fácilmente este tipo de operación, como TCP/IP, donde se puede usar una conexión de socket diferente para cada aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="82c68-112">The client must establish a connection to the server by using protocols that easily support this type of operation, such as TCP/IP, where a different socket connection can be used for each client application.</span></span>

<span data-ttu-id="82c68-113">El módulo cliente puede llamar a la función [**ProcessIdToSessionId**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-processidtosessionid) para recuperar el identificador de su servicios de escritorio remoto sesión.</span><span class="sxs-lookup"><span data-stu-id="82c68-113">The client module can call the [**ProcessIdToSessionId**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-processidtosessionid) function to retrieve the identifier of its Remote Desktop Services session.</span></span> <span data-ttu-id="82c68-114">Después, el cliente usa algún tipo de comunicación entre procesos para pasar su identificador de sesión al módulo del servidor.</span><span class="sxs-lookup"><span data-stu-id="82c68-114">The client then uses some form of interprocess communication to pass its session identifier to the server module.</span></span> <span data-ttu-id="82c68-115">Los módulos de cliente y servidor pueden usar el identificador de sesión para configurar un canal de comunicación privado.</span><span class="sxs-lookup"><span data-stu-id="82c68-115">The client and server modules can then use the session identifier to set up a private communication channel.</span></span> <span data-ttu-id="82c68-116">Por ejemplo, el módulo de servidor puede usar un identificador de sesión para tener acceso a los objetos del espacio de nombres de la sesión para los objetos de kernel.</span><span class="sxs-lookup"><span data-stu-id="82c68-116">For example, the server module can use a session identifier to access objects in the session's namespace for kernel objects.</span></span>

<span data-ttu-id="82c68-117">Además, el módulo de servidor puede usar el identificador de sesión en una llamada a [**WTSQuerySessionInformation**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsquerysessioninformationa) para recuperar información adicional sobre el cliente.</span><span class="sxs-lookup"><span data-stu-id="82c68-117">Furthermore, the server module can use the session identifier in a [**WTSQuerySessionInformation**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtsquerysessioninformationa) call to retrieve additional information about the client.</span></span> <span data-ttu-id="82c68-118">El módulo de servidor también puede usar el identificador de sesión en una llamada a [**WTSSendMessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) para mostrar un mensaje en el terminal del cliente.</span><span class="sxs-lookup"><span data-stu-id="82c68-118">The server module can also use the session identifier in a [**WTSSendMessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) call to display a message on the client terminal.</span></span> <span data-ttu-id="82c68-119">El módulo servidor también puede crear dos eventos para supervisar la conexión de cliente y desconectarse de una sesión.</span><span class="sxs-lookup"><span data-stu-id="82c68-119">The server module can also create two events to monitor client connection to and disconnection from a session.</span></span> <span data-ttu-id="82c68-120">Sin embargo, debe estar registrado en el servidor host de sesión de Escritorio remoto (host de sesión de escritorio remoto) para ello.</span><span class="sxs-lookup"><span data-stu-id="82c68-120">However, it must be registered on the Remote Desktop Session Host (RD Session Host) server to do this.</span></span> <span data-ttu-id="82c68-121">Para obtener más información, vea [supervisar conexiones y desconexiones de sesión](monitoring-session-connections-and-disconnections.md).</span><span class="sxs-lookup"><span data-stu-id="82c68-121">For more information, see [Monitoring Session Connections and Disconnections](monitoring-session-connections-and-disconnections.md).</span></span>

<span data-ttu-id="82c68-122">Los mensajes de entrada del usuario son una posible fuente de problemas para las aplicaciones cliente/servidor.</span><span class="sxs-lookup"><span data-stu-id="82c68-122">Prompts for user input are a potential source of problems for client/server applications.</span></span> <span data-ttu-id="82c68-123">Por ejemplo, si un servicio llama a la función [**MessageBox**](/windows/desktop/api/winuser/nf-winuser-messagebox) , el cuadro de mensaje se muestra en el escritorio del servidor host de sesión de escritorio remoto, no en el escritorio del cliente.</span><span class="sxs-lookup"><span data-stu-id="82c68-123">For example, if a service calls the [**MessageBox**](/windows/desktop/api/winuser/nf-winuser-messagebox) function, the message box is displayed on the desktop of the RD Session Host server, not on the client desktop.</span></span> <span data-ttu-id="82c68-124">Para mostrar un mensaje en un escritorio cliente, el servicio puede llamar a la función [**WtsSendMessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) .</span><span class="sxs-lookup"><span data-stu-id="82c68-124">To display a message on a client desktop, the service can call the [**WtsSendMessage**](/windows/desktop/api/Wtsapi32/nf-wtsapi32-wtssendmessagea) function.</span></span> <span data-ttu-id="82c68-125">Como alternativa, el servicio puede solicitar la entrada del módulo cliente y el módulo cliente puede mostrar la interfaz de usuario y enviar la entrada resultante de vuelta al servicio.</span><span class="sxs-lookup"><span data-stu-id="82c68-125">Alternatively, the service can request input from the client module, and the client module can display the user interface and send the resulting input back to the service.</span></span>

<span data-ttu-id="82c68-126">Los procesos generados a partir de varias sesiones pueden enviar y recibir datos entre sí mediante el uso de bloques de memoria compartida.</span><span class="sxs-lookup"><span data-stu-id="82c68-126">Processes spawned from multiple sessions can send data to and receive data from each other through the use of shared memory blocks.</span></span> <span data-ttu-id="82c68-127">Para obtener más información, consulte [crear memoria compartida con nombre](/windows/desktop/Memory/creating-named-shared-memory).</span><span class="sxs-lookup"><span data-stu-id="82c68-127">For more information, see [Creating Named Shared Memory](/windows/desktop/Memory/creating-named-shared-memory).</span></span> <span data-ttu-id="82c68-128">No se puede usar la memoria compartida en las siguientes condiciones:</span><span class="sxs-lookup"><span data-stu-id="82c68-128">Shared memory cannot be used under the following conditions:</span></span>

-   <span data-ttu-id="82c68-129">Varias sesiones generaron los procesos que usan el bloque de memoria compartida.</span><span class="sxs-lookup"><span data-stu-id="82c68-129">The processes using the shared memory block were spawned by multiple sessions.</span></span>
-   <span data-ttu-id="82c68-130">Las sesiones comparten las mismas credenciales de autenticación de usuario.</span><span class="sxs-lookup"><span data-stu-id="82c68-130">The sessions share the same user authentication credential.</span></span>

 

 