---
description: Las funciones globales y locales se admiten para la migración desde código de 16 bits o para mantener la compatibilidad con el código fuente con Windows de 16 bits.
ms.assetid: 97707ce7-4c65-4d0e-ba69-47fdaee73a9b
title: Funciones globales y locales
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cf356647f92f0e7d82e914a91020c438363ff082
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103907878"
---
# <a name="global-and-local-functions"></a><span data-ttu-id="1ebaa-103">Funciones globales y locales</span><span class="sxs-lookup"><span data-stu-id="1ebaa-103">Global and Local Functions</span></span>

<span data-ttu-id="1ebaa-104">Las funciones globales y locales se admiten para la migración desde código de 16 bits o para mantener la compatibilidad con el código fuente con Windows de 16 bits.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-104">The global and local functions are supported for porting from 16-bit code, or for maintaining source code compatibility with 16-bit Windows.</span></span> <span data-ttu-id="1ebaa-105">A partir de Windows de 32 bits, las funciones globales y locales se implementan como funciones contenedoras que llaman a las [funciones del montón](heap-functions.md) correspondientes mediante un identificador del montón predeterminado del proceso.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-105">Starting with 32-bit Windows, the global and local functions are implemented as wrapper functions that call the corresponding [heap functions](heap-functions.md) using a handle to the process's default heap.</span></span> <span data-ttu-id="1ebaa-106">Por lo tanto, las funciones globales y locales tienen una mayor sobrecarga que otras funciones de administración de memoria.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-106">Therefore, the global and local functions have greater overhead than other memory management functions.</span></span>

<span data-ttu-id="1ebaa-107">Las [funciones del montón](heap-functions.md) proporcionan más características y control que las funciones globales y locales.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-107">The [heap functions](heap-functions.md) provide more features and control than the global and local functions.</span></span> <span data-ttu-id="1ebaa-108">Las nuevas aplicaciones deben usar las funciones del montón, a menos que la documentación indique específicamente que se debe usar una función global o local.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-108">New applications should use the heap functions unless documentation specifically states that a global or local function should be used.</span></span> <span data-ttu-id="1ebaa-109">Por ejemplo, algunas funciones de Windows asignan memoria que se debe liberar con [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree)y las funciones globales todavía se utilizan con intercambio dinámico de datos (DDE), las funciones del portapapeles y los objetos de datos OLE.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-109">For example, some Windows functions allocate memory that must be freed with [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree), and the global functions are still used with Dynamic Data Exchange (DDE), the clipboard functions, and OLE data objects.</span></span> <span data-ttu-id="1ebaa-110">Para obtener una lista completa de las funciones globales y locales, consulte la tabla en [funciones de administración de memoria](memory-management-functions.md).</span><span class="sxs-lookup"><span data-stu-id="1ebaa-110">For a complete list of global and local functions, see the table in [Memory Management Functions](memory-management-functions.md).</span></span>

<span data-ttu-id="1ebaa-111">La administración de memoria de Windows no proporciona un montón local independiente y un montón global, como Windows de 16 bits.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-111">Windows memory management does not provide a separate local heap and global heap, as 16-bit Windows does.</span></span> <span data-ttu-id="1ebaa-112">Como resultado, las familias de funciones globales y locales son equivalentes y elegir entre ellas es una cuestión de preferencia personal.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-112">As a result, the global and local families of functions are equivalent and choosing between them is a matter of personal preference.</span></span> <span data-ttu-id="1ebaa-113">Tenga en cuenta que el cambio de un modelo de memoria segmentada de 16 bits a un modelo de memoria virtual de 32 bits ha realizado algunas de las funciones globales y locales relacionadas, y sus opciones no son necesarias o no tienen sentido.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-113">Note that the change from a 16-bit segmented memory model to a 32-bit virtual memory model has made some of the related global and local functions and their options unnecessary or meaningless.</span></span> <span data-ttu-id="1ebaa-114">Por ejemplo, ya no hay punteros Near y Far, porque las asignaciones locales y globales devuelven direcciones virtuales de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-114">For example, there are no longer near and far pointers, because both local and global allocations return 32-bit virtual addresses.</span></span>

<span data-ttu-id="1ebaa-115">Los objetos de memoria asignados por [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) y [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) están en páginas privadas y confirmadas con acceso de lectura y escritura al que no pueden tener acceso otros procesos.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-115">Memory objects allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) are in private, committed pages with read/write access that cannot be accessed by other processes.</span></span> <span data-ttu-id="1ebaa-116">En realidad, la memoria asignada mediante **GlobalAlloc** con **GMEM \_ DDESHARE** no se comparte de forma global, ya que se encuentra en Windows de 16 bits.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-116">Memory allocated by using **GlobalAlloc** with **GMEM\_DDESHARE** is not actually shared globally as it is in 16-bit Windows.</span></span> <span data-ttu-id="1ebaa-117">Este valor no tiene ningún efecto y solo está disponible por compatibilidad.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-117">This value has no effect and is available only for compatibility.</span></span> <span data-ttu-id="1ebaa-118">Las aplicaciones que requieren memoria compartida para otros propósitos deben usar objetos de asignación de archivos.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-118">Applications requiring shared memory for other purposes must use file-mapping objects.</span></span> <span data-ttu-id="1ebaa-119">Varios procesos pueden asignar una vista del mismo objeto de asignación de archivos para proporcionar la memoria compartida con nombre.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-119">Multiple processes can map a view of the same file-mapping object to provide named shared memory.</span></span> <span data-ttu-id="1ebaa-120">Para obtener más información, vea [asignación de archivos](file-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="1ebaa-120">For more information, see [File Mapping](file-mapping.md).</span></span>

<span data-ttu-id="1ebaa-121">Las asignaciones de memoria están limitadas solo por la memoria física disponible, incluido el almacenamiento en el archivo de paginación en el disco.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-121">Memory allocations are limited only by the available physical memory, including storage in the paging file on disk.</span></span> <span data-ttu-id="1ebaa-122">Al asignar memoria fija, [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) y [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) devuelven un puntero que el proceso de llamada puede usar inmediatamente para tener acceso a la memoria.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-122">When you allocate fixed memory, [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc) return a pointer that the calling process can immediately use to access the memory.</span></span> <span data-ttu-id="1ebaa-123">Al asignar memoria móvil, el valor devuelto es un identificador.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-123">When you allocate moveable memory, the return value is a handle.</span></span> <span data-ttu-id="1ebaa-124">Para obtener un puntero a un objeto de memoria movible, utilice las funciones [**GlobalLock**](/windows/desktop/api/WinBase/nf-winbase-globallock) y [**LocalLock**](/windows/desktop/api/WinBase/nf-winbase-locallock) .</span><span class="sxs-lookup"><span data-stu-id="1ebaa-124">To get a pointer to a movable memory object, use the [**GlobalLock**](/windows/desktop/api/WinBase/nf-winbase-globallock) and [**LocalLock**](/windows/desktop/api/WinBase/nf-winbase-locallock) functions.</span></span>

<span data-ttu-id="1ebaa-125">El tamaño real de la memoria asignada puede ser mayor que el tamaño solicitado.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-125">The actual size of the memory allocated can be larger than the requested size.</span></span> <span data-ttu-id="1ebaa-126">Para determinar el número real de bytes asignados, utilice la función [**GlobalSize**](/windows/desktop/api/WinBase/nf-winbase-globalsize) o [**variables locales**](/windows/desktop/api/WinBase/nf-winbase-localsize) .</span><span class="sxs-lookup"><span data-stu-id="1ebaa-126">To determine the actual number of bytes allocated, use the [**GlobalSize**](/windows/desktop/api/WinBase/nf-winbase-globalsize) or [**LocalSize**](/windows/desktop/api/WinBase/nf-winbase-localsize) function.</span></span> <span data-ttu-id="1ebaa-127">Si la cantidad asignada es mayor que la cantidad solicitada, el proceso puede utilizar la cantidad completa.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-127">If the amount allocated is greater than the amount requested, the process can use the entire amount.</span></span>

<span data-ttu-id="1ebaa-128">Las funciones [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc) y [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc) cambian el tamaño o los atributos de un objeto de memoria asignado por [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) y [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc).</span><span class="sxs-lookup"><span data-stu-id="1ebaa-128">The [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc) and [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc) functions change the size or the attributes of a memory object allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc) and [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc).</span></span> <span data-ttu-id="1ebaa-129">El tamaño puede aumentar o disminuir.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-129">The size can increase or decrease.</span></span>

<span data-ttu-id="1ebaa-130">Las funciones [**GlobalFree**](/windows/desktop/api/WinBase/nf-winbase-globalfree) y [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree) liberan memoria asignada por [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc), [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc), [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc)o [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc).</span><span class="sxs-lookup"><span data-stu-id="1ebaa-130">The [**GlobalFree**](/windows/desktop/api/WinBase/nf-winbase-globalfree) and [**LocalFree**](/windows/desktop/api/WinBase/nf-winbase-localfree) functions release memory allocated by [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc), [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc), [**GlobalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalrealloc), or [**LocalReAlloc**](/windows/desktop/api/WinBase/nf-winbase-localrealloc).</span></span> <span data-ttu-id="1ebaa-131">Para descartar el objeto de memoria especificado sin invalidar el identificador, utilice la función [**GlobalDiscard**](/windows/desktop/api/WinBase/nf-winbase-globaldiscard) o [**LocalDiscard**](/windows/win32/api/minwinbase/nf-minwinbase-localdiscard) .</span><span class="sxs-lookup"><span data-stu-id="1ebaa-131">To discard the specified memory object without invalidating the handle, use the [**GlobalDiscard**](/windows/desktop/api/WinBase/nf-winbase-globaldiscard) or [**LocalDiscard**](/windows/win32/api/minwinbase/nf-minwinbase-localdiscard) function.</span></span> <span data-ttu-id="1ebaa-132">El identificador se puede usar más adelante por **GlobalReAlloc** o **LocalReAlloc** para asignar un nuevo bloque de memoria asociado al mismo identificador.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-132">The handle can be used later by **GlobalReAlloc** or **LocalReAlloc** to allocate a new block of memory associated with the same handle.</span></span>

<span data-ttu-id="1ebaa-133">Para devolver información sobre un objeto de memoria especificado, utilice la función [**indicadores_globales**](/windows/desktop/api/WinBase/nf-winbase-globalflags) o [**LocalFlags**](/windows/desktop/api/WinBase/nf-winbase-localflags) .</span><span class="sxs-lookup"><span data-stu-id="1ebaa-133">To return information about a specified memory object, use the [**GlobalFlags**](/windows/desktop/api/WinBase/nf-winbase-globalflags) or [**LocalFlags**](/windows/desktop/api/WinBase/nf-winbase-localflags) function.</span></span> <span data-ttu-id="1ebaa-134">La información incluye el recuento de bloqueos del objeto e indica si el objeto es descartable o ya se ha descartado.</span><span class="sxs-lookup"><span data-stu-id="1ebaa-134">The information includes the object's lock count and indicates whether the object is discardable or has already been discarded.</span></span> <span data-ttu-id="1ebaa-135">Para devolver un identificador al objeto de memoria asociado a un puntero especificado, utilice la función [**GlobalHandle**](/windows/desktop/api/WinBase/nf-winbase-globalhandle) o [**LocalHandle**](/windows/desktop/api/WinBase/nf-winbase-localhandle) .</span><span class="sxs-lookup"><span data-stu-id="1ebaa-135">To return a handle to the memory object associated with a specified pointer, use the [**GlobalHandle**](/windows/desktop/api/WinBase/nf-winbase-globalhandle) or [**LocalHandle**](/windows/desktop/api/WinBase/nf-winbase-localhandle) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="1ebaa-136">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="1ebaa-136">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="1ebaa-137">Comparar métodos de asignación de memoria</span><span class="sxs-lookup"><span data-stu-id="1ebaa-137">Comparing Memory Allocation Methods</span></span>](comparing-memory-allocation-methods.md)
</dt> </dl>

 

 
