---
description: Los contextos de activación son visibles en todo el proceso.
ms.assetid: 6eda00d5-9dac-4267-bf61-b481814201f8
title: Subprocesos, procedimientos asincrónicos y mensajes de ventana
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e615eb9795ba32bcf4bd227a4933e890e9b89055
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103907830"
---
# <a name="using-threads-asynchronous-procedures-and-window-messages"></a><span data-ttu-id="41c5c-103">Usar subprocesos, procedimientos asincrónicos y mensajes de ventana</span><span class="sxs-lookup"><span data-stu-id="41c5c-103">Using Threads, Asynchronous Procedures, and Window Messages</span></span>

<span data-ttu-id="41c5c-104">Los contextos de activación son visibles en todo el proceso.</span><span class="sxs-lookup"><span data-stu-id="41c5c-104">Activation contexts are visible throughout the entire process.</span></span> <span data-ttu-id="41c5c-105">Sin embargo, las pilas de contexto de activación no son por subproceso y dos subprocesos en el mismo proceso pueden tener diferentes pilas de activación.</span><span class="sxs-lookup"><span data-stu-id="41c5c-105">The activation context stacks are however per-thread, and two threads in the same process can have different activation stacks.</span></span> <span data-ttu-id="41c5c-106">[**CreateThread**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createthread) coloca automáticamente el contexto de activación actual en la parte superior de la pila de activación del subproceso.</span><span class="sxs-lookup"><span data-stu-id="41c5c-106">[**CreateThread**](/windows/desktop/api/processthreadsapi/nf-processthreadsapi-createthread) automatically puts the current activation context at the top of the new thread's activation stack.</span></span> <span data-ttu-id="41c5c-107">Esto puede facilitar la actualización del código existente para usar componentes en paralelo, ya que el nuevo subproceso se puede ejecutar inmediatamente en el contexto de activación actual.</span><span class="sxs-lookup"><span data-stu-id="41c5c-107">This can facilitate upgrading existing code to use side-by-side components because the new thread can run immediately in the current activation context.</span></span>

<span data-ttu-id="41c5c-108">Las llamadas a procedimientos asincrónicos, las devoluciones de llamada de puertos de finalización y cualquier otra devolución de llamada en otros subprocesos obtienen automáticamente el contexto de activación del origen.</span><span class="sxs-lookup"><span data-stu-id="41c5c-108">Asynchronous procedure calls, completion port callbacks, and any other callbacks on other threads automatically get the activation context of the source.</span></span> <span data-ttu-id="41c5c-109">Cuando se llama a la devolución de llamada, se limpia la pila de activación.</span><span class="sxs-lookup"><span data-stu-id="41c5c-109">When the callback is called, the activation stack is cleaned up.</span></span> <span data-ttu-id="41c5c-110">Esto significa que la aplicación puede utilizar llamadas a procedimientos asincrónicos y devoluciones de llamada sin activar explícitamente ningún contexto, ya que la administración del contexto se realizará mediante la infraestructura en paralelo subyacente.</span><span class="sxs-lookup"><span data-stu-id="41c5c-110">This means that your application can use asynchronous procedure calls and callbacks without explicitly activating any contexts because context management will be done by the underlying side-by-side infrastructure.</span></span> <span data-ttu-id="41c5c-111">Para que otros contextos estén activos durante una devolución de llamada o un nuevo subproceso, la aplicación puede realizar su propia administración de contexto.</span><span class="sxs-lookup"><span data-stu-id="41c5c-111">To make other contexts active during a callback or new thread, your application can do its own context management.</span></span> <span data-ttu-id="41c5c-112">En este caso, el programa debe usar la secuencia adecuada de las funciones de activación y desactivación del contexto de activación.</span><span class="sxs-lookup"><span data-stu-id="41c5c-112">In this case your program must use the proper sequence of activation context activate functions and deactivate functions.</span></span>

<span data-ttu-id="41c5c-113">Los contextos de activación son independientes del subproceso.</span><span class="sxs-lookup"><span data-stu-id="41c5c-113">Activation contexts are thread-neutral.</span></span> <span data-ttu-id="41c5c-114">Al activar un contexto solo se cambia la pila del subproceso actual y no se puede activar un contexto entre subprocesos.</span><span class="sxs-lookup"><span data-stu-id="41c5c-114">Activating a context only changes the current thread's stack, and you cannot activate a context across threads.</span></span> <span data-ttu-id="41c5c-115">El subproceso A no puede forzar un contexto en el subproceso B. Las funciones de la API de contexto de activación también tienen en cuenta el subprocesamiento.</span><span class="sxs-lookup"><span data-stu-id="41c5c-115">Thread A cannot force a context onto thread B. The functions of the activation context API are also threading-aware.</span></span>

<span data-ttu-id="41c5c-116">Cuando se usa [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) o [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) para enviar un mensaje de ventana a otro procedimiento de ventana del proceso, el contexto de activación actual se activa antes de que el mensaje se pase al procedimiento de destino.</span><span class="sxs-lookup"><span data-stu-id="41c5c-116">When you use [**SendMessage**](/windows/win32/api/winuser/nf-winuser-sendmessage) or [**PostMessage**](/windows/win32/api/winuser/nf-winuser-postmessagea) to send a window message to another window procedure in your process, the current activation context is activated before the message is passed on to the target procedure.</span></span> <span data-ttu-id="41c5c-117">El contexto de activación actual se envía junto con el mensaje.</span><span class="sxs-lookup"><span data-stu-id="41c5c-117">The current activation context goes along with the message.</span></span> <span data-ttu-id="41c5c-118">Esto garantiza que los mensajes que hacen referencia a objetos COM, nombres DLL u otros recursos en paralelo conserven su información de contexto correcta.</span><span class="sxs-lookup"><span data-stu-id="41c5c-118">This ensures that messages that refer to COM objects, DLL names, or other side-by-side resources retain their correct context information.</span></span>

 

 
