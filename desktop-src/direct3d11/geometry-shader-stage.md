---
title: Fase del sombreador de geometría
description: La fase del sombreador de geometría (GS) ejecuta código de sombreador especificado por la aplicación con los vértices como entrada y la capacidad de generar vértices en la salida.
ms.assetid: F3208862-980E-403F-9154-13B34A882787
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: da66b1e3f9abf4e7db8010887f3e78676d02a874
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "103792441"
---
# <a name="geometry-shader-stage"></a><span data-ttu-id="4d3d4-103">Fase del sombreador de geometría</span><span class="sxs-lookup"><span data-stu-id="4d3d4-103">Geometry Shader Stage</span></span>

<span data-ttu-id="4d3d4-104">La fase del sombreador de geometría (GS) ejecuta código de sombreador especificado por la aplicación con los vértices como entrada y la capacidad de generar vértices en la salida.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-104">The geometry-shader (GS) stage runs application-specified shader code with vertices as input and the ability to generate vertices on output.</span></span>

## <a name="the-geometry-shader"></a><span data-ttu-id="4d3d4-105">Sombreador de geometría</span><span class="sxs-lookup"><span data-stu-id="4d3d4-105">The Geometry Shader</span></span>

<span data-ttu-id="4d3d4-106">A diferencia de los sombreadores de vértices, que operan en un solo vértice, las entradas del sombreador de geometría son los vértices de un primitivo completo (dos vértices para las líneas, tres vértices para triángulos o un solo vértice para el punto).</span><span class="sxs-lookup"><span data-stu-id="4d3d4-106">Unlike vertex shaders, which operate on a single vertex, the geometry shader's inputs are the vertices for a full primitive (two vertices for lines, three vertices for triangles, or single vertex for point).</span></span> <span data-ttu-id="4d3d4-107">Los sombreadores de geometría también pueden traer los datos de vértices de los primitivos adyacentes perimetrales como entrada (dos vértices adicionales para una línea, tres más para un triángulo).</span><span class="sxs-lookup"><span data-stu-id="4d3d4-107">Geometry shaders can also bring in the vertex data for the edge-adjacent primitives as input (an additional two vertices for a line, an additional three for a triangle).</span></span> <span data-ttu-id="4d3d4-108">En la ilustración siguiente se muestra un triángulo y una línea con vértices adyacentes.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-108">The following illustration shows a triangle and a line with adjacent vertices.</span></span>

![Ilustración de un triángulo y una línea con vértices adyacentes](images/d3d10-gs.png)

|     |                 |
|-----|-----------------|
| <span data-ttu-id="4d3d4-110">TV</span><span class="sxs-lookup"><span data-stu-id="4d3d4-110">TV</span></span>  | <span data-ttu-id="4d3d4-111">Vértice de triángulo</span><span class="sxs-lookup"><span data-stu-id="4d3d4-111">Triangle vertex</span></span> |
| <span data-ttu-id="4d3d4-112">AV</span><span class="sxs-lookup"><span data-stu-id="4d3d4-112">AV</span></span>  | <span data-ttu-id="4d3d4-113">Vértice adyacente</span><span class="sxs-lookup"><span data-stu-id="4d3d4-113">Adjacent vertex</span></span> |
| <span data-ttu-id="4d3d4-114">LV</span><span class="sxs-lookup"><span data-stu-id="4d3d4-114">LV</span></span>  | <span data-ttu-id="4d3d4-115">Vértice de línea</span><span class="sxs-lookup"><span data-stu-id="4d3d4-115">Line vertex</span></span>     |



 

<span data-ttu-id="4d3d4-116">La fase del sombreador de geometría puede consumir el \_ valor de VP PrimitiveID generado por el [sistema](d3d10-graphics-programming-guide-input-assembler-stage-using.md) que genera automáticamente el IA.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-116">The geometry-shader stage can consume the SV\_PrimitiveID [system-generated value](d3d10-graphics-programming-guide-input-assembler-stage-using.md) that is auto-generated by the IA.</span></span> <span data-ttu-id="4d3d4-117">Esto permite capturar o calcular los datos por primitivos si se desea.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-117">This allows per-primitive data to be fetched or computed if desired.</span></span>

<span data-ttu-id="4d3d4-118">La fase de sombreador de geometría es capaz de generar varios vértices que formen una sola topología seleccionada (las topologías de salida de fase GS disponibles son: tristripe, linestrip y PointList).</span><span class="sxs-lookup"><span data-stu-id="4d3d4-118">The geometry-shader stage is capable of outputting multiple vertices forming a single selected topology (GS stage output topologies available are: tristrip, linestrip, and pointlist).</span></span> <span data-ttu-id="4d3d4-119">El número de primitivas emitidas puede variar libremente dentro de cualquier invocación del sombreador de geometría, aunque el número máximo de vértices que podrían emitirse se debe declarar de forma estática.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-119">The number of primitives emitted can vary freely within any invocation of the geometry shader, though the maximum number of vertices that could be emitted must be declared statically.</span></span> <span data-ttu-id="4d3d4-120">Las longitudes de franjas emitidas desde una invocación del sombreador de geometría pueden ser arbitrarias y se pueden crear nuevas bandas a través de la función HLSL [RestartStrip](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-so-restartstrip) .</span><span class="sxs-lookup"><span data-stu-id="4d3d4-120">Strip lengths emitted from a geometry shader invocation can be arbitrary, and new strips can be created via the [RestartStrip](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-so-restartstrip) HLSL function.</span></span>

<span data-ttu-id="4d3d4-121">La salida del sombreador de geometría se puede alimentar a la fase de rasterizador o a un búfer de vértice en la memoria a través de la fase de salida de flujo.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-121">Geometry shader output may be fed to the rasterizer stage and/or to a vertex buffer in memory via the stream output stage.</span></span> <span data-ttu-id="4d3d4-122">La salida introducida en la memoria se expande a listas de puntos, líneas y triángulos individuales (exactamente como se pasarían al rasterizador).</span><span class="sxs-lookup"><span data-stu-id="4d3d4-122">Output fed to memory is expanded to individual point/line/triangle lists (exactly as they would be passed to the rasterizer).</span></span>

<span data-ttu-id="4d3d4-123">Cuando un sombreador de geometría está activo, se invoca una vez para cada primitiva que se pasa o se genera anteriormente en la canalización.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-123">When a geometry shader is active, it is invoked once for every primitive passed down or generated earlier in the pipeline.</span></span> <span data-ttu-id="4d3d4-124">Cada invocación del sombreador de geometría ve como entrada los datos para la invocación de primitivos, ya sea un único punto, una sola línea o un solo triángulo.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-124">Each invocation of the geometry shader sees as input the data for the invoking primitive, whether that is a single point, a single line, or a single triangle.</span></span> <span data-ttu-id="4d3d4-125">Una franja de triángulos anterior en la canalización produciría una invocación del sombreador de geometría para cada triángulo individual de la franja (como si la franja estuviera expandida en una lista de triángulos).</span><span class="sxs-lookup"><span data-stu-id="4d3d4-125">A triangle strip from earlier in the pipeline would result in an invocation of the geometry shader for each individual triangle in the strip (as if the strip were expanded out into a triangle list).</span></span> <span data-ttu-id="4d3d4-126">Todos los datos de entrada para cada vértice de la primitiva individual están disponibles (es decir, 3 vértices para el triángulo), además de los datos de vértice adyacentes, si procede o está disponible.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-126">All the input data for each vertex in the individual primitive is available (i.e. 3 vertices for triangle), plus adjacent vertex data if applicable/available.</span></span>

<span data-ttu-id="4d3d4-127">Un sombreador de geometría genera datos de un vértice a la vez anexando vértices a un objeto de flujo de salida.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-127">A geometry shader outputs data one vertex at a time by appending vertices to an output stream object.</span></span> <span data-ttu-id="4d3d4-128">La topología de las secuencias viene determinada por una declaración fija, eligiendo uno de los siguientes: PointStream, LineStream o TriangleStream como salida de la fase GS.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-128">The topology of the streams is determined by a fixed declaration, choosing one of: PointStream, LineStream, or TriangleStream as the output for the GS stage.</span></span> <span data-ttu-id="4d3d4-129">Hay tres tipos de objetos de secuencia disponibles, PointStream, LineStream y TriangleStream, que son todos los objetos con plantilla.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-129">There are three types of stream objects available, PointStream, LineStream and TriangleStream which are all templated objects.</span></span> <span data-ttu-id="4d3d4-130">La topología de la salida viene determinada por su tipo de objeto respectivo, mientras que el formato de los vértices anexados a la secuencia viene determinado por el tipo de plantilla.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-130">The topology of the output is determined by their respective object type, while the format of the vertices appended to the stream is determined by the template type.</span></span> <span data-ttu-id="4d3d4-131">La ejecución de una instancia del sombreador de geometría es atómica desde otras invocaciones, salvo que los datos que se agregan a los flujos son serie.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-131">Execution of a geometry shader instance is atomic from other invocations, except that data added to the streams is serial.</span></span> <span data-ttu-id="4d3d4-132">Las salidas de una invocación determinada de un sombreador de geometría son independientes de otras invocaciones (aunque se respeta la ordenación).</span><span class="sxs-lookup"><span data-stu-id="4d3d4-132">The outputs of a given invocation of a geometry shader are independent of other invocations (though ordering is respected).</span></span> <span data-ttu-id="4d3d4-133">Un sombreador de geometría que genera bandas triángulos iniciará una nueva franja en cada invocación.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-133">A geometry shader generating triangle strips will start a new strip on every invocation.</span></span>

<span data-ttu-id="4d3d4-134">Cuando una salida del sombreador de geometría se identifica como un valor interpretado por el sistema (por ejemplo, la \_ posición VP RenderTargetArrayIndex o VP \_ ), el hardware examina estos datos y realiza algún comportamiento dependiente del valor, además de poder pasar los datos en la siguiente fase del sombreador para la entrada.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-134">When a geometry shader output is identified as a System Interpreted Value (e.g. SV\_RenderTargetArrayIndex or SV\_Position), hardware looks at this data and performs some behavior dependent on the value, in addition to being able to pass the data itself to the next shader stage for input.</span></span> <span data-ttu-id="4d3d4-135">Cuando dicha salida de datos del sombreador de geometría tiene significado para el hardware en función de la primitiva (como la VP \_ RenderTargetArrayIndex o la VP \_ ViewportArrayIndex), en lugar de un carácter por vértice (como la VP \_ ClipDistance \[ n \] o la \_ posición SV), los datos por primitivos se toman del vértice inicial emitido para el primitivo.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-135">When such data output from the geometry shader has meaning to the hardware on a per-primitive basis (such as SV\_RenderTargetArrayIndex or SV\_ViewportArrayIndex), rather than on a per-vertex basis (such as SV\_ClipDistance\[n\] or SV\_Position), the per-primitive data is taken from the leading vertex emitted for the primitive.</span></span>

<span data-ttu-id="4d3d4-136">El sombreador de geometría puede generar primitivos parcialmente completados si el sombreador de geometría finaliza y el primitivo está incompleto.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-136">Partially completed primitives could be generated by the geometry shader if the geometry shader ends and the primitive is incomplete.</span></span> <span data-ttu-id="4d3d4-137">Los primitivos incompletos se descartan de forma silenciosa.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-137">Incomplete primitives are silently discarded.</span></span> <span data-ttu-id="4d3d4-138">Esto es similar a la forma en que el IA trata los primitivos parcialmente completados.</span><span class="sxs-lookup"><span data-stu-id="4d3d4-138">This is similar to the way the IA treats partially completed primitives.</span></span>

<span data-ttu-id="4d3d4-139">El sombreador de geometría puede realizar operaciones de muestreo de la carga y la textura en las que no se necesitan los derivados del espacio de pantalla (samplelevel, samplecmplevelzero, samplegrad).</span><span class="sxs-lookup"><span data-stu-id="4d3d4-139">The geometry shader can perform load and texture sampling operations where screen-space derivatives are not required (samplelevel, samplecmplevelzero, samplegrad).</span></span>

<span data-ttu-id="4d3d4-140">Los algoritmos que se pueden implementar en el sombreador de geometría incluyen:</span><span class="sxs-lookup"><span data-stu-id="4d3d4-140">Algorithms that can be implemented in the geometry shader include:</span></span>

-   <span data-ttu-id="4d3d4-141">Expansión de Sprite de punto</span><span class="sxs-lookup"><span data-stu-id="4d3d4-141">Point Sprite Expansion</span></span>
-   <span data-ttu-id="4d3d4-142">Sistemas de partículas dinámicas</span><span class="sxs-lookup"><span data-stu-id="4d3d4-142">Dynamic Particle Systems</span></span>
-   <span data-ttu-id="4d3d4-143">Generación de peletería/fin</span><span class="sxs-lookup"><span data-stu-id="4d3d4-143">Fur/Fin Generation</span></span>
-   <span data-ttu-id="4d3d4-144">Generación de volúmenes de instantáneas</span><span class="sxs-lookup"><span data-stu-id="4d3d4-144">Shadow Volume Generation</span></span>
-   <span data-ttu-id="4d3d4-145">Representación de un solo paso a mapa</span><span class="sxs-lookup"><span data-stu-id="4d3d4-145">Single Pass Render-to-Cubemap</span></span>
-   <span data-ttu-id="4d3d4-146">Intercambio de materiales Per-Primitive</span><span class="sxs-lookup"><span data-stu-id="4d3d4-146">Per-Primitive Material Swapping</span></span>
-   <span data-ttu-id="4d3d4-147">Configuración de Per-Primitive material: incluida la generación de coordenadas Barycentric como datos primitivos para que un sombreador de píxeles pueda realizar la interpolación de atributos personalizados (para obtener un ejemplo de interpolación normal de orden superior, vea [ejemplo de CubeMapGS](https://msdn.microsoft.com/library/Ee416398(v=VS.85).aspx)).</span><span class="sxs-lookup"><span data-stu-id="4d3d4-147">Per-Primitive Material Setup - Including generation of barycentric coordinates as primitive data so that a pixel shader can perform custom attribute interpolation (for an example of higher-order normal interpolation, see [CubeMapGS Sample](https://msdn.microsoft.com/library/Ee416398(v=VS.85).aspx)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="4d3d4-148">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="4d3d4-148">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4d3d4-149">Canalización de gráficos</span><span class="sxs-lookup"><span data-stu-id="4d3d4-149">Graphics Pipeline</span></span>](overviews-direct3d-11-graphics-pipeline.md)
</dt> <dt>

[<span data-ttu-id="4d3d4-150">Fases de canalización (Direct3D 10)</span><span class="sxs-lookup"><span data-stu-id="4d3d4-150">Pipeline Stages (Direct3D 10)</span></span>](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-pipeline-stages)
</dt> </dl>

 

 