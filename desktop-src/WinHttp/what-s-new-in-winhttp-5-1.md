---
description: En este tema se describen las diferencias más importantes entre la versión 5,1 y la versión 5,0 de WinHTTP.
ms.assetid: df3fcf27-3012-4818-b29c-b8a4dc409828
title: Novedades de WinHTTP 5,1
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 909d5ae8fb1d169af01782d21d2ead56b25c940c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105715165"
---
# <a name="whats-new-in-winhttp-51"></a><span data-ttu-id="710cc-103">Novedades de WinHTTP 5,1</span><span class="sxs-lookup"><span data-stu-id="710cc-103">What's New in WinHTTP 5.1</span></span>

<span data-ttu-id="710cc-104">En este tema se describen las diferencias más importantes entre la versión 5,1 y la versión 5,0 de WinHTTP.</span><span class="sxs-lookup"><span data-stu-id="710cc-104">This topic describes the most important differences between WinHTTP version 5.1 and version 5.0.</span></span> <span data-ttu-id="710cc-105">Muchas de estas diferencias requieren cambios en el código de las aplicaciones que migran de la versión 5,0 a la versión 5,1.</span><span class="sxs-lookup"><span data-stu-id="710cc-105">Many of these differences require code changes in applications migrating from version 5.0 to version 5.1.</span></span> <span data-ttu-id="710cc-106">Algunas de las características de la versión 5,1 solo están disponibles a partir de Windows Server 2003 y Windows XP con Service Pack 2 (SP2), especialmente las características relacionadas con la mejora de la seguridad del cliente frente a los servidores Web malintencionados.</span><span class="sxs-lookup"><span data-stu-id="710cc-106">Some of the features in version 5.1 are only available starting with Windows Server 2003 and Windows XP with Service Pack 2 (SP2), particularly features related to improving the security of the client against malicious Web servers.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="710cc-107">Con el lanzamiento de la versión 5,1 de WinHTTP, la descarga de WinHTTP 5,0 ya no está disponible.</span><span class="sxs-lookup"><span data-stu-id="710cc-107">With the release of WinHTTP Version 5.1, the WinHTTP 5.0 download is no longer available.</span></span> <span data-ttu-id="710cc-108">A partir del 1 de octubre de 2004, Microsoft ha quitado la descarga del SDK de WinHTTP 5,0 de MSDN y ha finalizado el soporte técnico para la versión 5,0.</span><span class="sxs-lookup"><span data-stu-id="710cc-108">As of October 1, 2004, Microsoft has removed the WinHTTP 5.0 SDK download from MSDN and has terminated product support for version 5.0.</span></span>

 

## <a name="dll-name-change"></a><span data-ttu-id="710cc-109">Cambio de nombre de DLL</span><span class="sxs-lookup"><span data-stu-id="710cc-109">DLL Name Change</span></span>

<span data-ttu-id="710cc-110">Se Winhttp.dll el nombre del nuevo archivo DLL de WinHTTP 5,1, mientras que el nombre de la DLL de WinHTTP 5,0 es Winhttp5.dll.</span><span class="sxs-lookup"><span data-stu-id="710cc-110">The name of the new WinHTTP 5.1 DLL is Winhttp.dll, whereas the name of the WinHTTP 5.0 DLL is Winhttp5.dll.</span></span>

<span data-ttu-id="710cc-111">WinHTTP 5,0 y 5,1 pueden coexistir en el mismo sistema. WinHTTP 5,1 no reemplaza ni se instala en WinHTTP 5,0.</span><span class="sxs-lookup"><span data-stu-id="710cc-111">WinHTTP 5.0 and 5.1 can coexist on the same system; WinHTTP 5.1 does not replace, or install over, WinHTTP 5.0.</span></span>

## <a name="redistribution"></a><span data-ttu-id="710cc-112">Redistribución</span><span class="sxs-lookup"><span data-stu-id="710cc-112">Redistribution</span></span>

<span data-ttu-id="710cc-113">WinHTTP 5,1 solo está disponible con Windows Server 2003, Windows 2000 Professional con Service Pack 3 (SP3), Windows XP con Service Pack 1 (SP1) y sistemas operativos posteriores.</span><span class="sxs-lookup"><span data-stu-id="710cc-113">WinHTTP 5.1 is available only with Windows Server 2003, Windows 2000 Professional with Service Pack 3 (SP3), Windows XP with Service Pack 1 (SP1), and later operating systems.</span></span> <span data-ttu-id="710cc-114">Un archivo de módulo de combinación redistribuible (. MSM) no está disponible para WinHTTP 5,1.</span><span class="sxs-lookup"><span data-stu-id="710cc-114">A redistributable merge module (.msm) file is not available for WinHTTP 5.1.</span></span>

## <a name="winhttprequest-progid"></a><span data-ttu-id="710cc-115">WinHttpRequest ProgID</span><span class="sxs-lookup"><span data-stu-id="710cc-115">WinHttpRequest ProgID</span></span>

<span data-ttu-id="710cc-116">El ProgID del componente WinHttpRequest ha cambiado de "WinHttp. WinHttpRequest. 5" a "WinHttp. WinHttpRequest. 5.1".</span><span class="sxs-lookup"><span data-stu-id="710cc-116">The ProgID of the WinHttpRequest component has changed from "WinHttp.WinHttpRequest.5" to "WinHttp.WinHttpRequest.5.1".</span></span> <span data-ttu-id="710cc-117">El CLSID de la clase [**WinHttpRequest**](winhttprequest.md) también ha cambiado.</span><span class="sxs-lookup"><span data-stu-id="710cc-117">The CLSID of the [**WinHttpRequest**](winhttprequest.md) class has also changed.</span></span>

## <a name="async-callback-behavior-change"></a><span data-ttu-id="710cc-118">Cambio de comportamiento de devolución de llamada asincrónica</span><span class="sxs-lookup"><span data-stu-id="710cc-118">Async Callback Behavior Change</span></span>

<span data-ttu-id="710cc-119">Cuando llame a las funciones [**WinHttpWriteData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata), [**WinHttpQueryDataAvailable**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable) y [**WinHttpReadData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata) en modo asincrónico, no se base en los parámetros de salida *lpdwNumberOfBytesWritten*, *lpdwNumberOfBytesAvailable* y *lpdwNumberOfBytesRead* respectivos que se van a establecer.</span><span class="sxs-lookup"><span data-stu-id="710cc-119">When calling the [**WinHttpWriteData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpwritedata), [**WinHttpQueryDataAvailable**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpquerydataavailable) and [**WinHttpReadData**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpreaddata) functions in asynchronous mode, do not rely on the respective *lpdwNumberOfBytesWritten*, *lpdwNumberOfBytesAvailable*, and *lpdwNumberOfBytesRead* OUT parameters to be set.</span></span> <span data-ttu-id="710cc-120">Si la llamada de función se completa de forma asincrónica, WinHTTP no escribe en estos punteros proporcionados por el código de aplicación.</span><span class="sxs-lookup"><span data-stu-id="710cc-120">If the function call completes asynchronously, WinHTTP does not write to these pointers supplied by the application code.</span></span> <span data-ttu-id="710cc-121">En su lugar, la aplicación debe recuperar estos valores con los parámetros *lpvStatusInformation* y *dwStatusInformationLength* en la función de devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="710cc-121">Instead, the application should retrieve these values using *lpvStatusInformation* and *dwStatusInformationLength* parameters to the callback function.</span></span>

## <a name="changes-to-default-settings"></a><span data-ttu-id="710cc-122">Cambios en la configuración predeterminada</span><span class="sxs-lookup"><span data-stu-id="710cc-122">Changes to Default Settings</span></span>

<span data-ttu-id="710cc-123">Los cambios en la configuración predeterminada incluyen:</span><span class="sxs-lookup"><span data-stu-id="710cc-123">Changes to default settings include:</span></span>

-   <span data-ttu-id="710cc-124">La comprobación de certificados de servidor SSL está habilitada de forma predeterminada en WinHTTP 5,1.</span><span class="sxs-lookup"><span data-stu-id="710cc-124">SSL server certificate verification is enabled by default in WinHTTP 5.1.</span></span> <span data-ttu-id="710cc-125">WinHTTP 5,0 no controla los errores que se producen al validar el certificado de servidor como errores irrecuperables. se notifican a la aplicación mediante una notificación de devolución de llamada de **\_ error segura** , pero no hace que se anule la solicitud.</span><span class="sxs-lookup"><span data-stu-id="710cc-125">WinHTTP 5.0 does not handle failures encountered when validating the server certificate as fatal errors; they are reported to the application using a **SECURE\_FAILURE** callback notification, but does not cause the request to be aborted.</span></span> <span data-ttu-id="710cc-126">WinHTTP 5,1, como alternativa, controla los errores de validación de certificados de servidor como errores irrecuperables que anulan la solicitud.</span><span class="sxs-lookup"><span data-stu-id="710cc-126">WinHTTP 5.1, alternatively, handles server certificate validation failures as fatal errors that abort the request.</span></span> <span data-ttu-id="710cc-127">La aplicación puede indicar a WinHTTP que omita un pequeño subconjunto de errores de certificado, como una CA desconocida, una fecha de certificado no válida o expirada o un nombre de sujeto de certificado no válido, con la opción WinHTTP opciones de **\_ \_ \_ marcas de seguridad** .</span><span class="sxs-lookup"><span data-stu-id="710cc-127">The application can instruct WinHTTP to ignore a small subset of certificate errors such as unknown CA, invalid/expired certificate date, or invalid certificate subject name, using the **WINHTTP\_OPTION\_SECURITY\_FLAGS** option.</span></span>
-   <span data-ttu-id="710cc-128">La compatibilidad con la autenticación de Passport está deshabilitada de forma predeterminada en WinHTTP 5,1.</span><span class="sxs-lookup"><span data-stu-id="710cc-128">Passport authentication support is disabled by default in WinHTTP 5.1.</span></span> <span data-ttu-id="710cc-129">La compatibilidad con Passport se puede habilitar con la opción **WinHTTP \_ configurar la \_ \_ \_ autenticación de Passport** .</span><span class="sxs-lookup"><span data-stu-id="710cc-129">Passport support can be enabled with the **WINHTTP\_OPTION\_CONFIGURE\_PASSPORT\_AUTH** option.</span></span> <span data-ttu-id="710cc-130">La búsqueda automática de credenciales de Passport en el registro de claves también está deshabilitada de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="710cc-130">Automatic Passport credential look-up in the Keyring is also disabled by default.</span></span>
-   <span data-ttu-id="710cc-131">Cambio de comportamiento de redireccionamiento: los redireccionamientos HTTP a partir de una dirección URL segura **https:** a una dirección URL **http:** , ya no se siguen automáticamente de forma predeterminada por motivos de seguridad.</span><span class="sxs-lookup"><span data-stu-id="710cc-131">Redirect behavior change: HTTP redirects from a secure **https:** URL to a regular **http:** URL are no longer followed automatically by default for security reasons.</span></span> <span data-ttu-id="710cc-132">Existe una nueva opción, **\_ \_ \_ Directiva de redirección de la opción WinHTTP**, para invalidar el comportamiento de redireccionamiento predeterminado en WinHTTP 5,1.</span><span class="sxs-lookup"><span data-stu-id="710cc-132">There is a new option, **WINHTTP\_OPTION\_REDIRECT\_POLICY**, to override the default redirect behavior in WinHTTP 5.1.</span></span> <span data-ttu-id="710cc-133">Con el componente com **WinHttpRequest** , use la opción New **WinHttpRequestOption \_ EnableHttpsToHttpRedirects** para habilitar las redirecciones de https: a http: URL.</span><span class="sxs-lookup"><span data-stu-id="710cc-133">With the **WinHttpRequest** COM component, use the new **WinHttpRequestOption\_EnableHttpsToHttpRedirects** option to enable redirects from https: to http: URLs.</span></span>
-   <span data-ttu-id="710cc-134">Cuando se crea un archivo de seguimiento de WinHTTP, el acceso se restringe con una ACL para que solo los administradores puedan leer o escribir el archivo.</span><span class="sxs-lookup"><span data-stu-id="710cc-134">When a WinHTTP trace file is created, access is restricted with an ACL such that only administrators can read or write the file.</span></span> <span data-ttu-id="710cc-135">La cuenta de usuario con la que se creó el objeto de escritura también puede modificar la ACL para conceder acceso a otros usuarios.</span><span class="sxs-lookup"><span data-stu-id="710cc-135">The user account under which the tracefile was created can also modify the ACL to grant others access.</span></span> <span data-ttu-id="710cc-136">Esta protección solo está disponible en los sistemas de archivos que admiten la seguridad. es decir, NTFS, no FAT32).</span><span class="sxs-lookup"><span data-stu-id="710cc-136">This protection is available only on file systems which support security; that is, NTFS, not FAT32).</span></span>
-   <span data-ttu-id="710cc-137">A partir de Windows Server 2003 y Windows XP con SP2, el envío de solicitudes a los siguientes puertos conocidos, que no son HTTP, está restringido por razones de seguridad: 21 (FTP), 25 (SMTP), 70 (GOPHER), 110 (POP3), 119 (NNTP), 143 (IMAP).</span><span class="sxs-lookup"><span data-stu-id="710cc-137">Starting with Windows Server 2003 and Windows XP with SP2, sending requests to the following well-known, non-HTTP, ports is restricted for security reasons: 21 (FTP), 25 (SMTP), 70 (GOPHER), 110 (POP3), 119 (NNTP), 143 (IMAP).</span></span>
-   <span data-ttu-id="710cc-138">A partir de Windows Server 2003 y Windows XP con SP2, la cantidad máxima de datos de encabezado que WinHTTP acepta en una respuesta HTTP es de 64 KB, de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="710cc-138">Starting with Windows Server 2003, and Windows XP with SP2, the maximum amount of header data WinHTTP accepts in an HTTP response is 64K, by default.</span></span> <span data-ttu-id="710cc-139">Si la respuesta HTTP del servidor contiene más de 64 KB de datos de encabezado totales, WinHTTP no podrá realizar la solicitud con un **error WinHTTP error de \_ \_ \_ \_ respuesta del servidor** .</span><span class="sxs-lookup"><span data-stu-id="710cc-139">If the server HTTP response contains more that 64K of total header data, WinHTTP fails the request with an **ERROR\_WINHTTP\_INVALID\_SERVER\_RESPONSE** error.</span></span> <span data-ttu-id="710cc-140">Este límite de 64 k se puede invalidar con la nueva opción de **WinHTTP \_ \_ Max \_ Response \_ \_ size** .</span><span class="sxs-lookup"><span data-stu-id="710cc-140">This 64K limit can be overridden using the new **WINHTTP\_OPTION\_MAX\_RESPONSE\_HEADER\_SIZE** option.</span></span>

## <a name="ipv6-support"></a><span data-ttu-id="710cc-141">Compatibilidad con IPv6</span><span class="sxs-lookup"><span data-stu-id="710cc-141">IPv6 Support</span></span>

<span data-ttu-id="710cc-142">WinHTTP 5,1 agrega compatibilidad con el protocolo de Internet versión 6 (IPv6).</span><span class="sxs-lookup"><span data-stu-id="710cc-142">WinHTTP 5.1 adds support for Internet Protocol Version 6 (IPv6).</span></span> <span data-ttu-id="710cc-143">WinHTTP puede enviar solicitudes HTTP a un servidor cuyo nombre DNS se resuelve en una dirección IPv6, y a partir de Windows Server 2003 y Windows XP con SP2, WinHTTP también admite direcciones literales IPv6.</span><span class="sxs-lookup"><span data-stu-id="710cc-143">WinHTTP can send HTTP requests to a server whose DNS name resolves into an IPv6 address, and starting with Windows Server 2003 and Windows XP with SP2, WinHTTP also supports IPv6 literal addresses.</span></span>

## <a name="new-options-in-the-cc-api-for-winhttp"></a><span data-ttu-id="710cc-144">Nuevas opciones de la API de C/C++ para WinHTTP</span><span class="sxs-lookup"><span data-stu-id="710cc-144">New Options in the C/C++ API for WinHTTP</span></span>

<span data-ttu-id="710cc-145">WinHTTP 5,1 implementa las siguientes opciones nuevas:</span><span class="sxs-lookup"><span data-stu-id="710cc-145">WinHTTP 5.1 implements the following new options:</span></span>

<dl> <span data-ttu-id="710cc-146">" \# definir la \_ opción de WinHTTP inicio de sesión de \_ Passport \_ \_ 86"</span><span class="sxs-lookup"><span data-stu-id="710cc-146">"\#define WINHTTP\_OPTION\_PASSPORT\_SIGN\_OUT 86"</span></span>  
<span data-ttu-id="710cc-147">" \# definir la \_ opción de WinHTTP \_ \_ dirección URL de retorno de Passport \_ 87"</span><span class="sxs-lookup"><span data-stu-id="710cc-147">"\#define WINHTTP\_OPTION\_PASSPORT\_RETURN\_URL 87"</span></span>  
<span data-ttu-id="710cc-148">" \# definir la \_ Directiva de redirección de la opción de WinHTTP \_ \_ 88"</span><span class="sxs-lookup"><span data-stu-id="710cc-148">"\#define WINHTTP\_OPTION\_REDIRECT\_POLICY 88"</span></span>  
</dl>

<span data-ttu-id="710cc-149">A partir de Windows Server 2003 y Windows XP con SP2, WinHTTP 5,1 implementa las siguientes opciones nuevas.</span><span class="sxs-lookup"><span data-stu-id="710cc-149">Starting with Windows Server 2003 and Windows XP with SP2, WinHTTP 5.1 implements the following new options.</span></span> <span data-ttu-id="710cc-150">En Windows 2000 Professional con SP3 o Windows XP con SP1, sin embargo, se produce un error en las llamadas a [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) o [**WinHttpQueryOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryoption) con estos identificadores de opción:</span><span class="sxs-lookup"><span data-stu-id="710cc-150">On Windows 2000 Professional with SP3 or Windows XP with SP1, however, calls to [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) or [**WinHttpQueryOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpqueryoption) with these option IDs fail:</span></span>

<dl> <span data-ttu-id="710cc-151">" \# definir el tiempo de espera de respuesta de recepción de la opción de WinHTTP \_ \_ \_ \_ 7"</span><span class="sxs-lookup"><span data-stu-id="710cc-151">"\#define WINHTTP\_OPTION\_RECEIVE\_RESPONSE\_TIMEOUT 7"</span></span>  
<span data-ttu-id="710cc-152">" \# definir la \_ opción de WinHTTP \_ Max \_ HTTP \_ Automatic \_ redirecciones 89"</span><span class="sxs-lookup"><span data-stu-id="710cc-152">"\#define WINHTTP\_OPTION\_MAX\_HTTP\_AUTOMATIC\_REDIRECTS 89"</span></span>  
<span data-ttu-id="710cc-153">" \# definir la \_ opción WinHTTP \_ Max \_ HTTP \_ status \_ continue 90"</span><span class="sxs-lookup"><span data-stu-id="710cc-153">"\#define WINHTTP\_OPTION\_MAX\_HTTP\_STATUS\_CONTINUE 90"</span></span>  
<span data-ttu-id="710cc-154">" \# definir \_ el tamaño máximo del encabezado de respuesta de la opción WinHTTP \_ \_ \_ \_ 91"</span><span class="sxs-lookup"><span data-stu-id="710cc-154">"\#define WINHTTP\_OPTION\_MAX\_RESPONSE\_HEADER\_SIZE 91"</span></span>  
<span data-ttu-id="710cc-155">" \# definir la \_ opción de WinHTTP \_ Max \_ response \_ \_ size size 92"</span><span class="sxs-lookup"><span data-stu-id="710cc-155">"\#define WINHTTP\_OPTION\_MAX\_RESPONSE\_DRAIN\_SIZE 92"</span></span>  
</dl>

## <a name="new-options-in-the-winhttprequest-51-component"></a><span data-ttu-id="710cc-156">Nuevas opciones en el componente WinHttpRequest 5,1</span><span class="sxs-lookup"><span data-stu-id="710cc-156">New Options in the WinHttpRequest 5.1 Component</span></span>

<span data-ttu-id="710cc-157">El componente WinHttpRequest 5,1 implementa las siguientes opciones nuevas:</span><span class="sxs-lookup"><span data-stu-id="710cc-157">The WinHttpRequest 5.1 component implements the following new options:</span></span>

<dl> <span data-ttu-id="710cc-158">"WinHttpRequestOption \_ RevertImpersonationOverSsl"</span><span class="sxs-lookup"><span data-stu-id="710cc-158">"WinHttpRequestOption\_RevertImpersonationOverSsl"</span></span>  
<span data-ttu-id="710cc-159">"WinHttpRequestOption \_ EnableHttpsToHttpRedirects"</span><span class="sxs-lookup"><span data-stu-id="710cc-159">"WinHttpRequestOption\_EnableHttpsToHttpRedirects"</span></span>  
<span data-ttu-id="710cc-160">"WinHttpRequestOption \_ EnablePassportAuthentication"</span><span class="sxs-lookup"><span data-stu-id="710cc-160">"WinHttpRequestOption\_EnablePassportAuthentication"</span></span>  
</dl>

<span data-ttu-id="710cc-161">Las siguientes opciones nuevas de WinHttpRequest 5,1 están disponibles a partir de Windows Server 2003 y Windows XP con SP2:</span><span class="sxs-lookup"><span data-stu-id="710cc-161">The following new WinHttpRequest 5.1 options are available starting with Windows Server 2003 and Windows XP with SP2:</span></span>

<dl> <span data-ttu-id="710cc-162">"WinHttpRequestOption \_ MaxAutomaticRedirects"</span><span class="sxs-lookup"><span data-stu-id="710cc-162">"WinHttpRequestOption\_MaxAutomaticRedirects"</span></span>  
<span data-ttu-id="710cc-163">"WinHttpRequestOption \_ MaxResponseHeaderSize"</span><span class="sxs-lookup"><span data-stu-id="710cc-163">"WinHttpRequestOption\_MaxResponseHeaderSize"</span></span>  
<span data-ttu-id="710cc-164">"WinHttpRequestOption \_ MaxResponseDrainSize"</span><span class="sxs-lookup"><span data-stu-id="710cc-164">"WinHttpRequestOption\_MaxResponseDrainSize"</span></span>  
<span data-ttu-id="710cc-165">"WinHttpRequestOptions \_ EnableHttp1 \_ 1"</span><span class="sxs-lookup"><span data-stu-id="710cc-165">"WinHttpRequestOptions\_EnableHttp1\_1"</span></span>  
</dl>

## <a name="proxies-are-not-trusted-when-auto-logon-security-is-set-to-high"></a><span data-ttu-id="710cc-166">Los servidores proxy no son de confianza cuando la seguridad de inicio de sesión automático está establecida en alta</span><span class="sxs-lookup"><span data-stu-id="710cc-166">Proxies Are Not Trusted When Auto-Logon Security is Set to High</span></span>

<span data-ttu-id="710cc-167">En WinHTTP 5,0, los servidores proxy siempre son de confianza para el inicio de sesión automático.</span><span class="sxs-lookup"><span data-stu-id="710cc-167">In WinHTTP 5.0, proxy servers are always trusted for auto-logon.</span></span> <span data-ttu-id="710cc-168">Esto ya no es válido para WinHTTP 5,1 que se ejecuta en Windows Server 2003 y Windows XP con SP2 cuando se establece la opción de directiva **\_ \_ \_ \_ alta de seguridad de inicio de sesión automático de WinHTTP** .</span><span class="sxs-lookup"><span data-stu-id="710cc-168">This is no longer valid for WinHTTP 5.1 running on Windows Server 2003 and Windows XP with SP2 when the **WINHTTP\_AUTOLOGON\_SECURITY\_LEVEL\_HIGH** policy option is set.</span></span>

## <a name="web-proxy-auto-discovery-autoproxy-api"></a><span data-ttu-id="710cc-169">API de detección automática de proxy web (AutoProxy)</span><span class="sxs-lookup"><span data-stu-id="710cc-169">Web Proxy Auto-Discovery (AutoProxy) API</span></span>

<span data-ttu-id="710cc-170">Para facilitar la configuración de los valores de proxy para las aplicaciones basadas en WinHTTP, WinHTTP ahora implementa el protocolo de detección automática de proxy web (WPAD), también denominado *AutoProxy*.</span><span class="sxs-lookup"><span data-stu-id="710cc-170">To ease the configuration of proxy settings for WinHTTP-based applications, WinHTTP now implements the Web Proxy Auto-Discovery (WPAD) protocol, also referred to as *autoproxy*.</span></span> <span data-ttu-id="710cc-171">Es el mismo protocolo que los exploradores Web, como Internet Explorer, implementan para detectar la configuración de proxy automáticamente sin necesidad de que un usuario final especifique un servidor proxy manualmente.</span><span class="sxs-lookup"><span data-stu-id="710cc-171">This is the same protocol that web browsers, such as Internet Explorer, implement to discover the proxy configuration automatically without requiring an end-user to specify a proxy server manually.</span></span> <span data-ttu-id="710cc-172">Para admitir el AutoProxy, WinHTTP 5,1 implementa una nueva función de C/C++, [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl), además de dos funciones auxiliares, [**WinHttpDetectAutoProxyConfigUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpdetectautoproxyconfigurl) y [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser).</span><span class="sxs-lookup"><span data-stu-id="710cc-172">To support autoproxy, WinHTTP 5.1 implements a new C/C++ function, [**WinHttpGetProxyForUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetproxyforurl), plus two supporting functions, [**WinHttpDetectAutoProxyConfigUrl**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpdetectautoproxyconfigurl) and [**WinHttpGetIEProxyConfigForCurrentUser**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpgetieproxyconfigforcurrentuser).</span></span>

## <a name="known-issues"></a><span data-ttu-id="710cc-173">Problemas conocidos</span><span class="sxs-lookup"><span data-stu-id="710cc-173">Known Issues</span></span>

<span data-ttu-id="710cc-174">Se sabe que existen los siguientes problemas en WinHTTP 5,1 en Windows 2000 Professional con SP3 y Windows XP con SP1.</span><span class="sxs-lookup"><span data-stu-id="710cc-174">The following issues are known to exist in WinHTTP 5.1 on Windows 2000 Professional with SP3 and Windows XP with SP1.</span></span> <span data-ttu-id="710cc-175">Estos problemas se resuelven para WinHTTP a partir de Windows Server 2003 y Windows XP con SP2:</span><span class="sxs-lookup"><span data-stu-id="710cc-175">These issues are resolved for WinHTTP starting with Windows Server 2003 and Windows XP with SP2:</span></span>

-   <span data-ttu-id="710cc-176">Si la aplicación usa la función [**WinHttpSetTimeouts**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsettimeouts) o el método [**SetTimeouts**](iwinhttprequest-settimeouts.md) en el componente [**WinHttpRequest**](iwinhttprequest-interface.md) para establecer un tiempo de espera de resolución DNS no infinito, como el parámetro *dwResolveTimeout* , se produce una pérdida de identificador de subproceso cada vez que WinHTTP resuelve un nombre DNS.</span><span class="sxs-lookup"><span data-stu-id="710cc-176">If the application uses the [**WinHttpSetTimeouts**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsettimeouts) function or the [**SetTimeouts**](iwinhttprequest-settimeouts.md) method on the [**WinHttpRequest**](iwinhttprequest-interface.md) component to set a non-infinite DNS resolve timeout such as the *dwResolveTimeout* parameter, a thread handle leak occurs each time WinHTTP resolves a DNS name.</span></span> <span data-ttu-id="710cc-177">A través de un gran número de solicitudes HTTP, esto provoca una pérdida de memoria considerable.</span><span class="sxs-lookup"><span data-stu-id="710cc-177">Over a large number of HTTP requests, this causes a significant memory leak.</span></span> <span data-ttu-id="710cc-178">La solución alternativa es dejar sin cambios la configuración de tiempo de espera de resolución infinita predeterminada (un valor de 0 especifica un tiempo de espera infinito).</span><span class="sxs-lookup"><span data-stu-id="710cc-178">The workaround is to leave the default infinite resolve timeout setting unchanged (a value of 0 specifies an infinite timeout).</span></span> <span data-ttu-id="710cc-179">Esto es muy recomendable en cualquier caso, ya que la compatibilidad con los tiempos de espera de las resoluciones de nombres DNS en WinHTTP es costosa en términos de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="710cc-179">This is strongly recommended in any case as supporting timeouts on DNS name resolutions in WinHTTP is expensive in terms of performance.</span></span> <span data-ttu-id="710cc-180">En Windows 2000 y versiones posteriores, el establecimiento de un tiempo de espera de resolución de DNS en WinHTTP no es necesario, ya que el servicio cliente DNS subyacente implementa su propio tiempo de espera de resolución.</span><span class="sxs-lookup"><span data-stu-id="710cc-180">For Windows 2000 and later, setting a DNS resolve timeout in WinHTTP is unnecessary as the underlying DNS client service implements its own resolve timeout.</span></span>
-   <span data-ttu-id="710cc-181">Al procesar las solicitudes asincrónicas, WinHTTP no controla la suplantación de subprocesos correctamente.</span><span class="sxs-lookup"><span data-stu-id="710cc-181">When processing asynchronous requests, WinHTTP does not handle thread impersonation properly.</span></span> <span data-ttu-id="710cc-182">Esto hace que se produzca un error en las solicitudes que requieren autenticación NTLM/Negotiate, a menos que se proporcionen explícitamente las credenciales mediante las funciones [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials) o [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) .</span><span class="sxs-lookup"><span data-stu-id="710cc-182">This causes requests that require NTLM/Negotiate authentication to fail, unless credentials are explicitly given using the [**WinHttpSetCredentials**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetcredentials) or [**WinHttpSetOption**](/windows/desktop/api/Winhttp/nf-winhttp-winhttpsetoption) functions.</span></span>

 

 



