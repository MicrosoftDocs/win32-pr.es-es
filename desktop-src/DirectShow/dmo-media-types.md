---
description: Tipos de medios DMO
ms.assetid: 40958e12-09c7-4ce5-aa4d-5ed8b1f40aa3
title: Tipos de medios DMO
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1997abb1cc3c8eb10301778982ef7a46690855ed
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/03/2021
ms.locfileid: "104547427"
---
# <a name="dmo-media-types"></a><span data-ttu-id="e055f-103">Tipos de medios DMO</span><span class="sxs-lookup"><span data-stu-id="e055f-103">DMO Media Types</span></span>

<span data-ttu-id="e055f-104">Un tipo de medio describe el formato asociado a un flujo de datos multimedia.</span><span class="sxs-lookup"><span data-stu-id="e055f-104">A media type describes the format associated with a stream of media data.</span></span> <span data-ttu-id="e055f-105">En este artículo se describe cómo administrar DMOs tipos de medios.</span><span class="sxs-lookup"><span data-stu-id="e055f-105">This article describes how DMOs handle media types.</span></span> <span data-ttu-id="e055f-106">Está destinado principalmente a desarrolladores que escriben sus propios DMOs personalizados.</span><span class="sxs-lookup"><span data-stu-id="e055f-106">It is primarily intended for developers who are writing their own custom DMOs.</span></span>

<span data-ttu-id="e055f-107">Los tipos de medios se definen mediante la estructura de [**\_ \_ tipo de medio DMO**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) .</span><span class="sxs-lookup"><span data-stu-id="e055f-107">Media types are defined using the [**DMO\_MEDIA\_TYPE**](/previous-versions/windows/desktop/api/mediaobj/ns-mediaobj-dmo_media_type) structure.</span></span> <span data-ttu-id="e055f-108">Esta estructura incluye la siguiente información:</span><span class="sxs-lookup"><span data-stu-id="e055f-108">This structure includes the following information:</span></span>

-   <span data-ttu-id="e055f-109">El *tipo principal* es un identificador único global (GUID) que define una amplia categoría, como audio o vídeo.</span><span class="sxs-lookup"><span data-stu-id="e055f-109">The *major type* is a globally unique identifier (GUID) that defines a broad category, such as audio or video.</span></span>
-   <span data-ttu-id="e055f-110">El *subtipo* es un GUID que define aspectos más específicos del tipo.</span><span class="sxs-lookup"><span data-stu-id="e055f-110">The *subtype* is a GUID that defines more specific aspects of the type.</span></span> <span data-ttu-id="e055f-111">Por ejemplo, en el vídeo, los subtipos incluyen el vídeo RGB de 16 bits, RGB de 24 bits, UYVY, codificado en DV, etc.</span><span class="sxs-lookup"><span data-stu-id="e055f-111">For example, within video, the subtypes include 16-bit RGB, 24-bit RGB, UYVY, DV-encoded video, and so forth.</span></span>
-   <span data-ttu-id="e055f-112">El *bloque de formato* es una estructura secundaria que especifica completamente el formato.</span><span class="sxs-lookup"><span data-stu-id="e055f-112">The *format block* is a secondary structure that fully specifies the format.</span></span> <span data-ttu-id="e055f-113">El diseño del bloque de formato depende del tipo de datos.</span><span class="sxs-lookup"><span data-stu-id="e055f-113">The layout of the format block depends on the type of data.</span></span> <span data-ttu-id="e055f-114">Por ejemplo, PCM audio usa la estructura **WAVEFORMATEX** .</span><span class="sxs-lookup"><span data-stu-id="e055f-114">For example, PCM audio uses the **WAVEFORMATEX** structure.</span></span> <span data-ttu-id="e055f-115">El vídeo usa otras estructuras, como **VIDEOINFOHEADER** y **VIDEOINFOHEADER2**.</span><span class="sxs-lookup"><span data-stu-id="e055f-115">Video uses various other structures, including **VIDEOINFOHEADER** and **VIDEOINFOHEADER2**.</span></span> <span data-ttu-id="e055f-116">El diseño del bloque de formato se identifica mediante un GUID de tipo de formato.</span><span class="sxs-lookup"><span data-stu-id="e055f-116">The layout of the format block is identified by a format type GUID.</span></span> <span data-ttu-id="e055f-117">Por ejemplo, FORMAT \_ WaveFormatEx especifica una estructura **WaveFormatEx** .</span><span class="sxs-lookup"><span data-stu-id="e055f-117">For example, FORMAT\_WaveFormatEx specifies a **WAVEFORMATEX** structure.</span></span>

<span data-ttu-id="e055f-118">Cuando se crea por primera vez una DMO, las secuencias no tienen un tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="e055f-118">When a DMO is first created, the streams do not have a media type.</span></span> <span data-ttu-id="e055f-119">Para que DMO pueda procesar los datos, el cliente debe establecer un tipo de medio para cada flujo.</span><span class="sxs-lookup"><span data-stu-id="e055f-119">Before the DMO can process any data, the client must set a media type for each stream.</span></span> <span data-ttu-id="e055f-120">Este proceso se describe desde la perspectiva del cliente en el [establecimiento de tipos de medios en un DMO](setting-media-types-on-a-dmo.md).</span><span class="sxs-lookup"><span data-stu-id="e055f-120">This process is described from the client's perspective in [Setting Media Types on a DMO](setting-media-types-on-a-dmo.md).</span></span>

<span data-ttu-id="e055f-121">**Tipos de medios en el registro**</span><span class="sxs-lookup"><span data-stu-id="e055f-121">**Media Types in the Registry**</span></span>

<span data-ttu-id="e055f-122">Un DMO puede Agregar una lista de tipos de medios que admite al registro mediante una llamada a la función [**DMORegister**](/previous-versions/windows/desktop/api/Dmoreg/nf-dmoreg-dmoregister) .</span><span class="sxs-lookup"><span data-stu-id="e055f-122">A DMO can add a list of media types that it supports to the registry, by calling the [**DMORegister**](/previous-versions/windows/desktop/api/Dmoreg/nf-dmoreg-dmoregister) function.</span></span> <span data-ttu-id="e055f-123">Una aplicación puede usar esta información para buscar DMOs que coincidan con un formato determinado.</span><span class="sxs-lookup"><span data-stu-id="e055f-123">An application can use this information to search for DMOs that match a particular format.</span></span> <span data-ttu-id="e055f-124">La información del registro no está pensada para ser exhaustiva.</span><span class="sxs-lookup"><span data-stu-id="e055f-124">The information in the registry is not meant to be comprehensive.</span></span> <span data-ttu-id="e055f-125">Normalmente, incluiría solo los tipos principales que admite DMO.</span><span class="sxs-lookup"><span data-stu-id="e055f-125">Typically, you would include only the main types that the DMO supports.</span></span> <span data-ttu-id="e055f-126">La entrada del registro tiene claves independientes para los tipos de entrada y salida, pero no distingue entre flujos individuales.</span><span class="sxs-lookup"><span data-stu-id="e055f-126">The registry entry has separate keys for input and output types, but does not distinguish among individual streams.</span></span>

<span data-ttu-id="e055f-127">La función **DMORegister** utiliza la estructura de [**\_ \_ MEDIATYPE parcial de DMO**](/previous-versions/windows/desktop/api/Dmoreg/ns-dmoreg-dmo_partial_mediatype) para describir los tipos de medios.</span><span class="sxs-lookup"><span data-stu-id="e055f-127">The **DMORegister** function uses the [**DMO\_PARTIAL\_MEDIATYPE**](/previous-versions/windows/desktop/api/Dmoreg/ns-dmoreg-dmo_partial_mediatype) structure to describe media types.</span></span> <span data-ttu-id="e055f-128">Esta estructura contiene un subconjunto de la información que se encuentra en la estructura de **\_ \_ tipo de medio DMO** , es decir, el tipo principal y el subtipo.</span><span class="sxs-lookup"><span data-stu-id="e055f-128">This structure contains a subset of the information found in the **DMO\_MEDIA\_TYPE** structure—namely the major type and the subtype.</span></span> <span data-ttu-id="e055f-129">No incluye un bloque de formato, porque el bloque de formato contiene normalmente información que es demasiado granular para incluirla en el registro, como el alto y el ancho de una imagen de vídeo.</span><span class="sxs-lookup"><span data-stu-id="e055f-129">It does not include a format block, because the format block typically contains information that is too granular to include in the registry, such as the height and width of a video image.</span></span>

<span data-ttu-id="e055f-130">**Tipos de medios preferidos**</span><span class="sxs-lookup"><span data-stu-id="e055f-130">**Preferred Media Types**</span></span>

<span data-ttu-id="e055f-131">Una vez que la aplicación ha creado un DMO, puede consultar a DMO los tipos de medios que admite.</span><span class="sxs-lookup"><span data-stu-id="e055f-131">After the application has created a DMO, it can query the DMO for the media types it supports.</span></span> <span data-ttu-id="e055f-132">Para cada flujo, DMO crea una lista de tipos de medios (posiblemente vacíos), clasificada en orden de preferencia.</span><span class="sxs-lookup"><span data-stu-id="e055f-132">For each stream, the DMO creates a list of media types (possibly empty), ranked in order of preference.</span></span> <span data-ttu-id="e055f-133">Los métodos [**IMediaObject:: GetInputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getinputtype) y [**IMediaObject:: GetOutputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputtype) enumeran los tipos preferidos.</span><span class="sxs-lookup"><span data-stu-id="e055f-133">The [**IMediaObject::GetInputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getinputtype) and [**IMediaObject::GetOutputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-getoutputtype) methods enumerate the preferred types.</span></span> <span data-ttu-id="e055f-134">Los tipos preferidos de un flujo pueden cambiar dinámicamente cuando la aplicación establece tipos de medios en otras secuencias.</span><span class="sxs-lookup"><span data-stu-id="e055f-134">A stream's preferred types can change dynamically when the application sets media types on other streams.</span></span> <span data-ttu-id="e055f-135">Por ejemplo, la lista de tipos de salida preferidos podría cambiar después de establecer el tipo de entrada, o viceversa.</span><span class="sxs-lookup"><span data-stu-id="e055f-135">For example, the list of preferred output types might change after the input type is set, or vice versa.</span></span> <span data-ttu-id="e055f-136">Sin embargo, no es necesario que DMO actualice sus tipos preferidos dinámicamente.</span><span class="sxs-lookup"><span data-stu-id="e055f-136">However, the DMO is not required to update its preferred types dynamically.</span></span> <span data-ttu-id="e055f-137">La aplicación no puede suponer que todos los tipos que recibe son válidos.</span><span class="sxs-lookup"><span data-stu-id="e055f-137">The application cannot assume that every type it receives is valid.</span></span> <span data-ttu-id="e055f-138">Por esta razón, los métodos [**IMediaObject:: SetInputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setinputtype) y [**IMediaObject:: SetOutputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setoutputtype) admiten una marca para probar un tipo específico.</span><span class="sxs-lookup"><span data-stu-id="e055f-138">For this reason, the [**IMediaObject::SetInputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setinputtype) and [**IMediaObject::SetOutputType**](/previous-versions/windows/desktop/api/Mediaobj/nf-mediaobj-imediaobject-setoutputtype) methods support a flag for testing a specific type.</span></span>

<span data-ttu-id="e055f-139">Los métodos **GetInputType** y **GetOutputType** devuelven una estructura de **\_ \_ tipo de medio DMO** .</span><span class="sxs-lookup"><span data-stu-id="e055f-139">The **GetInputType** and **GetOutputType** methods both return a **DMO\_MEDIA\_TYPE** structure.</span></span> <span data-ttu-id="e055f-140">DMO puede dejar en blanco parte de la información de esta estructura para indicar un intervalo de tipos.</span><span class="sxs-lookup"><span data-stu-id="e055f-140">The DMO can leave some of the information in this structure blank, to indicate a range of types.</span></span> <span data-ttu-id="e055f-141">El tipo o subtipo principal puede ser el GUID \_ null y el bloque de formato puede estar vacío (cero bytes).</span><span class="sxs-lookup"><span data-stu-id="e055f-141">The major type or subtype can be GUID\_NULL, and the format block can be empty (zero bytes).</span></span> <span data-ttu-id="e055f-142">Si el bloque de formato está vacío, el tipo de formato debe ser GUID \_ null.</span><span class="sxs-lookup"><span data-stu-id="e055f-142">If the format block is empty, the format type must be GUID\_NULL.</span></span>

<span data-ttu-id="e055f-143">Una vez que la aplicación establece todos los tipos de entrada de DMO, el DMO debe devolver generalmente al menos un tipo completo para cada flujo de salida.</span><span class="sxs-lookup"><span data-stu-id="e055f-143">After the application sets all of a DMO's input types, the DMO should generally return at least one complete type for each output stream.</span></span> <span data-ttu-id="e055f-144">Un tipo de resultado completo facilita las pruebas y las aplicaciones pueden utilizarlo como valor predeterminado razonable.</span><span class="sxs-lookup"><span data-stu-id="e055f-144">A complete output type facilitates testing, and applications can use it as a reasonable default.</span></span> <span data-ttu-id="e055f-145">La aplicación de prueba de DMO se basa en este comportamiento.</span><span class="sxs-lookup"><span data-stu-id="e055f-145">The DMO test application relies on this behavior.</span></span> <span data-ttu-id="e055f-146">(Consulte [uso de la aplicación DMOTest](using-the-dmotest-application.md)).</span><span class="sxs-lookup"><span data-stu-id="e055f-146">(See [Using the DMOTest Application](using-the-dmotest-application.md).)</span></span>

<span data-ttu-id="e055f-147">**Establecer los tipos de medios**</span><span class="sxs-lookup"><span data-stu-id="e055f-147">**Setting the Media Types**</span></span>

<span data-ttu-id="e055f-148">Las aplicaciones usan los métodos **SetInputType** y **SetOutputType** para probar, establecer o borrar tipos en una secuencia especificada.</span><span class="sxs-lookup"><span data-stu-id="e055f-148">Applications use the **SetInputType** and **SetOutputType** methods to test, set, or clear types on a specified stream.</span></span> <span data-ttu-id="e055f-149">La aplicación debe especificar por completo el tipo.</span><span class="sxs-lookup"><span data-stu-id="e055f-149">The application must fully specify the type.</span></span> <span data-ttu-id="e055f-150">DMO comprueba si puede aceptar el tipo propuesto.</span><span class="sxs-lookup"><span data-stu-id="e055f-150">The DMO verifies whether it can accept the proposed type.</span></span> <span data-ttu-id="e055f-151">La respuesta puede depender de qué tipos se han establecido en otras secuencias.</span><span class="sxs-lookup"><span data-stu-id="e055f-151">The answer may depend on which types have been set on other streams.</span></span> <span data-ttu-id="e055f-152">La \_ marca DMO set \_ TYPEF \_ Clear borra el tipo de una secuencia, por lo que la aplicación puede "deshacer" y probar otra combinación.</span><span class="sxs-lookup"><span data-stu-id="e055f-152">The DMO\_SET\_TYPEF\_CLEAR flag clears a stream's type, so the application can "back out" and try another combination.</span></span>

<span data-ttu-id="e055f-153">**Escenarios de ejemplo**</span><span class="sxs-lookup"><span data-stu-id="e055f-153">**Example Scenarios**</span></span>

<span data-ttu-id="e055f-154">En los siguientes ejemplos se describen algunos escenarios típicos para ilustrar los puntos realizados en las secciones anteriores.</span><span class="sxs-lookup"><span data-stu-id="e055f-154">The following examples describe some typical scenarios, to illustrate the points made in the previous sections.</span></span>

-   <span data-ttu-id="e055f-155">**Descodificadores de vídeo.**</span><span class="sxs-lookup"><span data-stu-id="e055f-155">**Video Decoders.**</span></span> <span data-ttu-id="e055f-156">En un descodificador de vídeo típico, el tipo de entrada determina en parte el tipo de salida.</span><span class="sxs-lookup"><span data-stu-id="e055f-156">In a typical video decoder, the input type partly determines the output type.</span></span> <span data-ttu-id="e055f-157">Por ejemplo, normalmente ambas secuencias deben tener la misma velocidad de fotogramas y dimensiones de imagen.</span><span class="sxs-lookup"><span data-stu-id="e055f-157">For example, usually both streams must have the same frame rate and image dimensions.</span></span> <span data-ttu-id="e055f-158">Una opción no es definir ningún tipo de salida preferido hasta que se establezca el tipo de entrada.</span><span class="sxs-lookup"><span data-stu-id="e055f-158">One option is not to define any preferred output types until the input type is set.</span></span> <span data-ttu-id="e055f-159">Otra opción es enumerar un conjunto de tipos incompletos, omitiendo el bloque de formato.</span><span class="sxs-lookup"><span data-stu-id="e055f-159">Another option is to enumerate a set of incomplete types, omitting the format block.</span></span> <span data-ttu-id="e055f-160">Use el subtipo para indicar los tipos sin comprimir admitidos, como RGB de 16 bits, RGB de 24 bits, etc.</span><span class="sxs-lookup"><span data-stu-id="e055f-160">Use the subtype to indicate the supported uncompressed types, such as 16-bit RGB, 24-bit RGB, and so forth.</span></span> <span data-ttu-id="e055f-161">Además, los descodificadores de vídeo no admiten normalmente el establecimiento del tipo de salida antes del tipo de entrada.</span><span class="sxs-lookup"><span data-stu-id="e055f-161">Also, video decoders generally do not support setting the output type before the input type.</span></span> <span data-ttu-id="e055f-162">El escenario habitual es descodificar a partir de un formato de entrada conocido, por lo que esta limitación es razonable.</span><span class="sxs-lookup"><span data-stu-id="e055f-162">The usual scenario is to decode from a known input format, so this limitation is reasonable.</span></span>
-   <span data-ttu-id="e055f-163">**Descodificadores de audio.**</span><span class="sxs-lookup"><span data-stu-id="e055f-163">**Audio Decoders.**</span></span> <span data-ttu-id="e055f-164">Un descodificador de audio podría admitir un conjunto limitado y fijo de formatos de salida.</span><span class="sxs-lookup"><span data-stu-id="e055f-164">An audio decoder might support a limited, fixed set of output formats.</span></span> <span data-ttu-id="e055f-165">En ese caso, es posible que pueda crear una lista de formatos de salida preferidos antes de que se conozca el formato de entrada.</span><span class="sxs-lookup"><span data-stu-id="e055f-165">In that case, it may be able to create a list of preferred output formats before the input format is known.</span></span>
-   <span data-ttu-id="e055f-166">**Compresores.**</span><span class="sxs-lookup"><span data-stu-id="e055f-166">**Compressors.**</span></span> <span data-ttu-id="e055f-167">En la mayoría de los casos, un compresor de vídeo no puede especificar por completo sus formatos de salida preferidos hasta que la aplicación establece el formato de entrada y viceversa.</span><span class="sxs-lookup"><span data-stu-id="e055f-167">In most cases, a video compressor cannot fully specify its preferred output formats until the application sets the input format, and vice versa.</span></span> <span data-ttu-id="e055f-168">En su lugar, DMO debe devolver un tipo incompleto sin bloque de formato.</span><span class="sxs-lookup"><span data-stu-id="e055f-168">Instead, the DMO should return an incomplete type with no format block.</span></span> <span data-ttu-id="e055f-169">En el caso de la compresión de audio y vídeo, la aplicación normalmente necesita establecer varios parámetros de salida, como la velocidad de bits.</span><span class="sxs-lookup"><span data-stu-id="e055f-169">For both audio and video compression, the application usually needs to set various output parameters, such as the bit rate.</span></span> <span data-ttu-id="e055f-170">Sin embargo, después de establecer el tipo de entrada, el compresor debe devolver al menos un tipo de salida completo, por las razones mencionadas anteriormente.</span><span class="sxs-lookup"><span data-stu-id="e055f-170">However, after the input type is set, the compressor should return at least one complete output type, for the reasons mentioned previously.</span></span>

## <a name="related-topics"></a><span data-ttu-id="e055f-171">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e055f-171">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e055f-172">Escritura de DMO</span><span class="sxs-lookup"><span data-stu-id="e055f-172">Writing a DMO</span></span>](writing-a-dmo.md)
</dt> </dl>

 

 



