---
description: Enumera los paquetes de seguridad que se pueden usar con SSPI.
ms.assetid: f5999d41-b334-49be-8883-d9b9042d20dc
title: Usar paquetes de seguridad
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df24bba0f910ba74a633e8a43f961cee4fb505db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105668123"
---
# <a name="using-security-packages"></a><span data-ttu-id="9cebb-103">Usar paquetes de seguridad</span><span class="sxs-lookup"><span data-stu-id="9cebb-103">Using Security Packages</span></span>

<span data-ttu-id="9cebb-104">La [*interfaz del proveedor de compatibilidad para seguridad*](../secgloss/s-gly.md) (SSPI) se puede usar con los siguientes [*paquetes de seguridad*](../secgloss/s-gly.md):</span><span class="sxs-lookup"><span data-stu-id="9cebb-104">The [*Security Support Provider Interface*](../secgloss/s-gly.md) (SSPI) can be used with the following [*security packages*](../secgloss/s-gly.md):</span></span>

-   [<span data-ttu-id="9cebb-105">Paquete de seguridad de Kerberos</span><span class="sxs-lookup"><span data-stu-id="9cebb-105">Kerberos Security Package</span></span>](#kerberos-security-package)
-   [<span data-ttu-id="9cebb-106">Paquete de seguridad de NTLM</span><span class="sxs-lookup"><span data-stu-id="9cebb-106">NTLM Security Package</span></span>](#ntlm-security-package)

<span data-ttu-id="9cebb-107">Los protocolos [*Kerberos*](../secgloss/k-gly.md) y NTLM se implementan como paquetes de seguridad del [*proveedor de compatibilidad para seguridad*](../secgloss/s-gly.md) (SSP) de Secur32.dll proporcionado con el sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="9cebb-107">The [*Kerberos*](../secgloss/k-gly.md) and NTLM protocols are implemented as security packages from the Secur32.dll [*security support provider*](../secgloss/s-gly.md) (SSP) supplied with the operating system.</span></span> <span data-ttu-id="9cebb-108">De forma predeterminada, la [*autoridad de seguridad local*](../secgloss/l-gly.md) (LSA) carga la compatibilidad con la autenticación Kerberos y NTLM en un equipo cuando se inicia el sistema.</span><span class="sxs-lookup"><span data-stu-id="9cebb-108">By default, support for both Kerberos and NTLM authentication are loaded by the [*local security authority*](../secgloss/l-gly.md) (LSA) on a computer when the system starts.</span></span> <span data-ttu-id="9cebb-109">En los dominios de Windows Server o Windows, se puede usar cualquiera de los paquetes para autenticar los inicios de sesión de red y las conexiones de cliente/servidor.</span><span class="sxs-lookup"><span data-stu-id="9cebb-109">In Windows Server or Windows domains, either package can be used to authenticate network logons and client/server connections.</span></span> <span data-ttu-id="9cebb-110">La que se utiliza depende de las capacidades del equipo en el otro lado de la conexión.</span><span class="sxs-lookup"><span data-stu-id="9cebb-110">Which one is used depends on the capabilities of the computer on the other side of the connection.</span></span> <span data-ttu-id="9cebb-111">Siempre se prefiere el protocolo Kerberos, si está disponible.</span><span class="sxs-lookup"><span data-stu-id="9cebb-111">The Kerberos protocol is always preferred, if available.</span></span>

<span data-ttu-id="9cebb-112">Una vez que se ha establecido un contexto de seguridad para un usuario interactivo, se puede cargar otra instancia del paquete Kerberos o NTLM mediante un proceso que se ejecuta en el contexto de seguridad del usuario para admitir el intercambio, la firma, la comprobación, el cifrado y el descifrado de los mensajes.</span><span class="sxs-lookup"><span data-stu-id="9cebb-112">After a security context for an interactive user has been established, another instance of the Kerberos or NTLM package can be loaded by a process running in the security context of the user to support the exchanging, signing, verifying, encrypting, and decrypting of messages.</span></span> <span data-ttu-id="9cebb-113">Sin embargo, no se permite el acceso a las [*claves de sesión*](../secgloss/s-gly.md) o a los vales de la memoria caché de credenciales a un proceso distinto de LSA.</span><span class="sxs-lookup"><span data-stu-id="9cebb-113">However, no process other than the LSA is ever permitted access to [*session keys*](../secgloss/s-gly.md) or tickets in the credentials cache.</span></span>

<span data-ttu-id="9cebb-114">Los servicios del sistema y las aplicaciones de nivel de transporte tienen acceso a un SSP a través de SSPI, que proporciona funciones para enumerar los paquetes de seguridad disponibles en un sistema, seleccionar un paquete y usar ese paquete para obtener una conexión autenticada.</span><span class="sxs-lookup"><span data-stu-id="9cebb-114">System services and transport-level applications access an SSP through SSPI, which provides functions for enumerating the security packages available on a system, selecting a package, and using that package to obtain an authenticated connection.</span></span>

<span data-ttu-id="9cebb-115">Los métodos de SSPI son rutinas genéricas que los programadores pueden usar sin conocer los detalles de un [*Protocolo de seguridad*](../secgloss/s-gly.md)determinado.</span><span class="sxs-lookup"><span data-stu-id="9cebb-115">The methods in SSPI are generic routines that developers can use without knowing the details of a particular [*security protocol*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="9cebb-116">Por ejemplo, cuando se autentica una conexión cliente/servidor:</span><span class="sxs-lookup"><span data-stu-id="9cebb-116">For example, when a client/server connection is authenticated:</span></span>

1.  <span data-ttu-id="9cebb-117">La aplicación en el lado cliente de la conexión envía [*las credenciales*](../secgloss/c-gly.md) al servidor mediante la función [**InitializeSecurityContext de SSPI (general)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta).</span><span class="sxs-lookup"><span data-stu-id="9cebb-117">The application on the client side of the connection sends [*credentials*](../secgloss/c-gly.md) to the server using the SSPI function [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta).</span></span>
2.  <span data-ttu-id="9cebb-118">La aplicación en el lado servidor de la conexión responde con la función SSPI [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span><span class="sxs-lookup"><span data-stu-id="9cebb-118">The application on the server side of the connection responds with the SSPI function [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span></span>
3.  <span data-ttu-id="9cebb-119">Una vez que se ha autenticado la conexión, la LSA del servidor usa la información del cliente para crear un [*token de acceso*](../secgloss/a-gly.md).</span><span class="sxs-lookup"><span data-stu-id="9cebb-119">After the connection has been authenticated, the LSA on the server uses information from the client to build an [*access token*](../secgloss/a-gly.md).</span></span>
4.  <span data-ttu-id="9cebb-120">Después, el servidor puede llamar a la función SSPI [**ImpersonateSecurityContext**](/windows/desktop/api/Sspi/nf-sspi-impersonatesecuritycontext) para adjuntar el token de acceso a un subproceso de suplantación para el servicio.</span><span class="sxs-lookup"><span data-stu-id="9cebb-120">The server can then call the SSPI function [**ImpersonateSecurityContext**](/windows/desktop/api/Sspi/nf-sspi-impersonatesecuritycontext) to attach the access token to an impersonation thread for the service.</span></span>

## <a name="kerberos-security-package"></a><span data-ttu-id="9cebb-121">Paquete de seguridad de Kerberos</span><span class="sxs-lookup"><span data-stu-id="9cebb-121">Kerberos Security Package</span></span>

<span data-ttu-id="9cebb-122">El [*paquete de seguridad*](../secgloss/s-gly.md) de Kerberos se basa en el [*Protocolo de autenticación Kerberos*](../secgloss/k-gly.md).</span><span class="sxs-lookup"><span data-stu-id="9cebb-122">The Kerberos [*security package*](../secgloss/s-gly.md) is based on the [*Kerberos authentication protocol*](../secgloss/k-gly.md).</span></span>

<span data-ttu-id="9cebb-123">Si se utiliza el protocolo Kerberos para autenticar una conexión cliente/servidor, [**InitializeSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) genera un mensaje GSSAPI que incluye un \_ \_ mensaje de solicitud de solicitud de KRB PA desde el cliente.</span><span class="sxs-lookup"><span data-stu-id="9cebb-123">If the Kerberos protocol is being used to authenticate a client/server connection, [**InitializeSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) generates a GSSAPI message that includes a KRB\_AP\_REQ message from the client.</span></span> <span data-ttu-id="9cebb-124">A continuación, [**AcceptSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) genera un mensaje GSSAPI que incluye un \_ mensaje KRB AP \_ REP del servidor.</span><span class="sxs-lookup"><span data-stu-id="9cebb-124">[**AcceptSecurityContext (Kerberos)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) then generates a GSSAPI message that includes a KRB\_AP\_REP message from the server.</span></span>

<span data-ttu-id="9cebb-125">Para obtener información general sobre los pasos que se realizan en segundo plano en la implementación de un protocolo Kerberos, consulte [Microsoft Kerberos](microsoft-kerberos.md).</span><span class="sxs-lookup"><span data-stu-id="9cebb-125">For background information on the steps that take place behind the scenes in the implementation of a Kerberos protocol, see [Microsoft Kerberos](microsoft-kerberos.md).</span></span>

<span data-ttu-id="9cebb-126">Todos los servicios distribuidos usan SSPI para tener acceso al protocolo Kerberos.</span><span class="sxs-lookup"><span data-stu-id="9cebb-126">All distributed services use SSPI to access the Kerberos protocol.</span></span> <span data-ttu-id="9cebb-127">Una lista parcial de las formas en que se usa el protocolo Kerberos para la autenticación incluye:</span><span class="sxs-lookup"><span data-stu-id="9cebb-127">A partial list of the ways in which the Kerberos protocol is used for authentication includes:</span></span>

-   <span data-ttu-id="9cebb-128">Servicios del administrador de trabajos de impresión</span><span class="sxs-lookup"><span data-stu-id="9cebb-128">Print spooler services</span></span>
-   <span data-ttu-id="9cebb-129">Acceso a archivos remotos de CIFS/SMB</span><span class="sxs-lookup"><span data-stu-id="9cebb-129">CIFS/SMB remote file access</span></span>
-   <span data-ttu-id="9cebb-130">Consultas [*LDAP*](../secgloss/l-gly.md) en el Active Directory</span><span class="sxs-lookup"><span data-stu-id="9cebb-130">[*LDAP*](../secgloss/l-gly.md) queries to the Active Directory</span></span>
-   <span data-ttu-id="9cebb-131">Referencias y administración del sistema de archivos distribuido</span><span class="sxs-lookup"><span data-stu-id="9cebb-131">Distributed file system management and referrals</span></span>
-   <span data-ttu-id="9cebb-132">Autenticación de la entidad de seguridad de host a host de IPsec</span><span class="sxs-lookup"><span data-stu-id="9cebb-132">IPsec host-to-host security authority authentication</span></span>
-   <span data-ttu-id="9cebb-133">Solicitudes de reserva para la calidad de servicio de la red</span><span class="sxs-lookup"><span data-stu-id="9cebb-133">Reservation requests for network Quality of Service</span></span>
-   <span data-ttu-id="9cebb-134">Autenticación de intranet en Internet Information Services</span><span class="sxs-lookup"><span data-stu-id="9cebb-134">Intranet authentication to Internet Information Services</span></span>
-   <span data-ttu-id="9cebb-135">Administración remota de servidores o estaciones de trabajo mediante RPC autenticado</span><span class="sxs-lookup"><span data-stu-id="9cebb-135">Remote server or workstation management using authenticated RPC</span></span>
-   <span data-ttu-id="9cebb-136">[*Solicitudes de certificado*](../secgloss/c-gly.md) a servicios de Certificate Server para usuarios y equipos del dominio</span><span class="sxs-lookup"><span data-stu-id="9cebb-136">[*Certificate requests*](../secgloss/c-gly.md) to Certificate Services for domain users and computers</span></span>

## <a name="ntlm-security-package"></a><span data-ttu-id="9cebb-137">Paquete de seguridad de NTLM</span><span class="sxs-lookup"><span data-stu-id="9cebb-137">NTLM Security Package</span></span>

<span data-ttu-id="9cebb-138">El paquete de seguridad NTLM se basa en el protocolo de autenticación NTLM.</span><span class="sxs-lookup"><span data-stu-id="9cebb-138">The NTLM security package is based on the NTLM authentication protocol.</span></span>

 

 
