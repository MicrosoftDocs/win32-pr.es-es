---
title: Información general de StoClien
description: En el ejemplo StoClien se muestra cómo el cliente usa el almacenamiento estructurado y cómo dirige un componente de servidor para que use este almacenamiento.
ms.assetid: 1f540e0f-2189-4f45-aad3-9b4b56732907
keywords:
- Información general de StoClien
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ee37f6f84cf981bda637abbd96ff8e8f0314d8ee
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "105665577"
---
# <a name="stoclien-overview"></a><span data-ttu-id="a564b-104">Información general de StoClien</span><span class="sxs-lookup"><span data-stu-id="a564b-104">StoClien Overview</span></span>

## <a name="purpose"></a><span data-ttu-id="a564b-105">Propósito</span><span class="sxs-lookup"><span data-stu-id="a564b-105">Purpose</span></span>

<span data-ttu-id="a564b-106">El enfoque principal del ejemplo [StoClien](structured-storage-client-sample--stoclien-.md) es cómo el cliente usa el almacenamiento estructurado y cómo indica a un componente de servidor que use este almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="a564b-106">The principal focus of the [StoClien](structured-storage-client-sample--stoclien-.md) sample is how the client uses structured storage and how it instructs a server component to use this storage.</span></span> <span data-ttu-id="a564b-107">En el ejemplo StoClien se muestra un modelo de programación de servicios de almacenamiento estructurado.</span><span class="sxs-lookup"><span data-stu-id="a564b-107">The StoClien sample demonstrates a programming model of structured storage services.</span></span>

## <a name="functionality"></a><span data-ttu-id="a564b-108">Funcionalidad</span><span class="sxs-lookup"><span data-stu-id="a564b-108">Functionality</span></span>

<span data-ttu-id="a564b-109">La funcionalidad [StoClien](structured-storage-client-sample--stoclien-.md) es similar a los ejemplos de "Scribble" en algunas versiones de Microsoft Visual C++.</span><span class="sxs-lookup"><span data-stu-id="a564b-109">The [StoClien](structured-storage-client-sample--stoclien-.md) functionality is similar to the "scribble" samples in some versions of Microsoft Visual C++.</span></span> <span data-ttu-id="a564b-110">La diferencia entre el ejemplo StoClien y el ejemplo [StoServe](structured-storage-server-sample--stoserve-.md) es una arquitectura interna basada en la tecnología com.</span><span class="sxs-lookup"><span data-stu-id="a564b-110">The difference between the StoClien sample and the [StoServe](structured-storage-server-sample--stoserve-.md) sample is an internal architecture based on COM technology.</span></span> <span data-ttu-id="a564b-111">Una distinción de arquitectura clara se mantiene entre el cliente COM y el servidor COM.</span><span class="sxs-lookup"><span data-stu-id="a564b-111">A clear architectural distinction is kept between COM client and COM server.</span></span>

<span data-ttu-id="a564b-112">[StoClien](structured-storage-client-sample--stoclien-.md) carga y guarda sus dibujos en el almacenamiento estructurado de archivos compuestos com.</span><span class="sxs-lookup"><span data-stu-id="a564b-112">[StoClien](structured-storage-client-sample--stoclien-.md) loads and saves its drawings in the structured storage of COM compound files.</span></span>

<span data-ttu-id="a564b-113">En el ejemplo [StoClien](structured-storage-client-sample--stoclien-.md) se crea y se usa el objeto com de copaper conectable que se proporciona como \_ componente DllPaper CLSID en el servidor [StoServe](structured-storage-server-sample--stoserve-.md) .</span><span class="sxs-lookup"><span data-stu-id="a564b-113">The [StoClien](structured-storage-client-sample--stoclien-.md) sample creates and uses the connectable COPaper COM object that is provided as the CLSID\_DllPaper component in the [StoServe](structured-storage-server-sample--stoserve-.md) server.</span></span> <span data-ttu-id="a564b-114">El cliente StoClien crea un objeto de copaper y lo controla a través de la interfaz IPaper que expone el objeto.</span><span class="sxs-lookup"><span data-stu-id="a564b-114">The StoClien client creates a COPaper object and controls it through the IPaper interface that the object exposes.</span></span> <span data-ttu-id="a564b-115">StoClien obtiene los datos de dibujo del usuario y los representa gráficamente en una ventana que administra.</span><span class="sxs-lookup"><span data-stu-id="a564b-115">StoClien obtains drawing data from the user and graphically represents it in a window that it manages.</span></span> <span data-ttu-id="a564b-116">StoClien usa la interfaz IPaper de copaper para guardar los datos de dibujo en copapeles y dirigir las operaciones de almacenamiento de archivos en estos datos.</span><span class="sxs-lookup"><span data-stu-id="a564b-116">StoClien uses the COPaper IPaper interface to save the drawing data in COPaper and to direct file storage operations on this data.</span></span>

<span data-ttu-id="a564b-117">Un objeto COM de copapeles encapsula solo el almacenamiento basado en servidor de los datos del papel de dibujo: no se proporciona ningún comportamiento de la interfaz gráfica de usuario (GUI) en el lado del servidor.</span><span class="sxs-lookup"><span data-stu-id="a564b-117">A COPaper COM object encapsulates only the server-based storage of the drawing paper data: No graphical user interface (GUI) behavior is provided on the server side.</span></span> <span data-ttu-id="a564b-118">Todo el comportamiento de la interfaz gráfica de usuario está aislado en el cliente.</span><span class="sxs-lookup"><span data-stu-id="a564b-118">All GUI behavior is isolated in the client.</span></span> <span data-ttu-id="a564b-119">Las características de almacenamiento y administración de datos de los objetos de copaper solo están disponibles a través de una interfaz personalizada COM, IPaper.</span><span class="sxs-lookup"><span data-stu-id="a564b-119">The data management and storage features of COPaper objects are available only through an COM custom interface, IPaper.</span></span>

<span data-ttu-id="a564b-120">[StoClien](structured-storage-client-sample--stoclien-.md) coopera con el copapel para cargar y guardar los datos del dibujo de copapeles.</span><span class="sxs-lookup"><span data-stu-id="a564b-120">[StoClien](structured-storage-client-sample--stoclien-.md) cooperates with the COPaper to load and save the COPaper drawing data.</span></span> <span data-ttu-id="a564b-121">StoClien obtiene una interfaz [**IStorage**](/windows/desktop/api/Objidl/nn-objidl-istorage) para el objeto de almacenamiento en un archivo compuesto.</span><span class="sxs-lookup"><span data-stu-id="a564b-121">StoClien obtains an [**IStorage**](/windows/desktop/api/Objidl/nn-objidl-istorage) interface for the storage object in a compound file.</span></span> <span data-ttu-id="a564b-122">En las operaciones de carga y guardado, StoClien pasa un puntero a la interfaz **IStorage** para copaper en el servidor.</span><span class="sxs-lookup"><span data-stu-id="a564b-122">In its load and save operations, StoClien passes a pointer to the **IStorage** interface to COPaper in the server.</span></span> <span data-ttu-id="a564b-123">El copaper usa el **IStorage** proporcionado para crear secuencias en el almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="a564b-123">COPaper uses the provided **IStorage** to create streams in the storage.</span></span> <span data-ttu-id="a564b-124">El copaper puede usar la interfaz [**IStream**](/windows/desktop/api/Objidl/nn-objidl-istream) estándar para leer y escribir los datos de dibujo que administra.</span><span class="sxs-lookup"><span data-stu-id="a564b-124">COPaper can then use the standard [**IStream**](/windows/desktop/api/Objidl/nn-objidl-istream) interface for reading and writing the drawing data it manages.</span></span>

<span data-ttu-id="a564b-125">El copapel solo administra los datos del dibujo; no realiza ninguna acción de la GUI.</span><span class="sxs-lookup"><span data-stu-id="a564b-125">COPaper only manages the drawing data; it performs no GUI actions.</span></span> <span data-ttu-id="a564b-126">[StoClien](structured-storage-client-sample--stoclien-.md) proporciona la interfaz gráfica de usuario para la aplicación de dibujo.</span><span class="sxs-lookup"><span data-stu-id="a564b-126">[StoClien](structured-storage-client-sample--stoclien-.md) provides the GUI for the drawing application.</span></span> <span data-ttu-id="a564b-127">Lo encapsula en un objeto central de C++ CGuiPaper.</span><span class="sxs-lookup"><span data-stu-id="a564b-127">It encapsulates this in a central CGuiPaper C++ object.</span></span>

<span data-ttu-id="a564b-128">[StoClien](structured-storage-client-sample--stoclien-.md) también implementa la interfaz personalizada de IPaperSink en un objeto COPaperSink com y conecta esta interfaz con un punto de conexión adecuado en el objeto de copaper del servidor.</span><span class="sxs-lookup"><span data-stu-id="a564b-128">[StoClien](structured-storage-client-sample--stoclien-.md) also implements the custom IPaperSink interface in a COPaperSink COM object and connects this interface to an appropriate connection point in the server COPaper object.</span></span> <span data-ttu-id="a564b-129">El copaper usa la interfaz IPaperSink conectada para volver a enviar las notificaciones a StoClien.</span><span class="sxs-lookup"><span data-stu-id="a564b-129">COPaper uses the connected IPaperSink interface to send notifications back to StoClien.</span></span> <span data-ttu-id="a564b-130">La repintado normal de la GUI de los datos del dibujo de copapeles se realiza en StoClien con la tecnología de objetos conectables de copapeles.</span><span class="sxs-lookup"><span data-stu-id="a564b-130">The normal GUI repainting of the COPaper drawing data is done in StoClien using the COPaper connectable object technology.</span></span>

<span data-ttu-id="a564b-131">[StoClien](structured-storage-client-sample--stoclien-.md) es una aplicación que puede ejecutar directamente de forma normal o desde la ventana del símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="a564b-131">[StoClien](structured-storage-client-sample--stoclien-.md) is an application that you can execute directly in the normal manner or from the command prompt window.</span></span> <span data-ttu-id="a564b-132">StoClien acepta un parámetro de nombre de archivo opcional en la línea de comandos.</span><span class="sxs-lookup"><span data-stu-id="a564b-132">StoClien accepts an optional file name parameter on the command line.</span></span>

<span data-ttu-id="a564b-133">En el ejemplo siguiente, Drawing. PAP es un archivo compuesto que contiene almacenamiento estructurado compatible con DllPaper de datos de dibujo.</span><span class="sxs-lookup"><span data-stu-id="a564b-133">In the following example, Drawing.pap is a compound file containing DllPaper-compatible structured storage of drawing data.</span></span> <span data-ttu-id="a564b-134">Si no se especifica ningún parámetro de nombre de archivo de línea de comandos, [StoClien](structured-storage-client-sample--stoclien-.md) usa el nombre de archivo predeterminado StoClien. PAP e intenta abrirlo en el mismo directorio que el Stoclien.exe en ejecución.</span><span class="sxs-lookup"><span data-stu-id="a564b-134">If no command line file name parameter is specified, [StoClien](structured-storage-client-sample--stoclien-.md) uses the default file name Stoclien.pap and attempts to open it in the same directory as the executing Stoclien.exe.</span></span>

<span data-ttu-id="a564b-135">**StoClien c: \\ dibujos \\ Drawing. PAP**</span><span class="sxs-lookup"><span data-stu-id="a564b-135">**StoClien c:\\drawings\\drawing.pap**</span></span>

## <a name="support-information"></a><span data-ttu-id="a564b-136">Información complementaria</span><span class="sxs-lookup"><span data-stu-id="a564b-136">Support Information</span></span>

<span data-ttu-id="a564b-137">Para obtener más información, descripciones funcionales y un tutorial de código para [StoClien](structured-storage-client-sample--stoclien-.md), consulte la sección sobre el paseo por el código de Stoclien.htm.</span><span class="sxs-lookup"><span data-stu-id="a564b-137">For more information, functional descriptions and a code tutorial for [StoClien](structured-storage-client-sample--stoclien-.md), see the Code Tour section in Stoclien.htm.</span></span> <span data-ttu-id="a564b-138">Para obtener más información acerca de la operación de usuario externo de StoClien, consulte las secciones uso y operación de Stoclien.htm.</span><span class="sxs-lookup"><span data-stu-id="a564b-138">For more information about the external user operation of StoClien, see the Usage and Operation sections in Stoclien.htm.</span></span> <span data-ttu-id="a564b-139">Para leer Stoclient.htm, ejecute Tutorial.exe en el directorio principal del tutorial y haga clic en la lección StoClien en la tabla de lecciones.</span><span class="sxs-lookup"><span data-stu-id="a564b-139">To read Stoclient.htm, run Tutorial.exe in the main tutorial directory and click the StoClien lesson in the table of lessons.</span></span> <span data-ttu-id="a564b-140">O bien, haga clic en Stoclien.htm después de buscar el directorio principal del tutorial en el explorador de Windows.</span><span class="sxs-lookup"><span data-stu-id="a564b-140">Alternatively, click Stoclien.htm after locating the main tutorial directory in Windows Explorer.</span></span> <span data-ttu-id="a564b-141">Para obtener más información sobre cómo funciona [**StoServe**](structured-storage-server-sample--stoserve-.md) y expone sus servicios a StoClien, consulte Stoserve.htm en el directorio principal del tutorial.</span><span class="sxs-lookup"><span data-stu-id="a564b-141">For more information about how [**StoServe**](structured-storage-server-sample--stoserve-.md) works and exposes its services to StoClien, see Stoserve.htm in the main tutorial directory.</span></span> <span data-ttu-id="a564b-142">Tenga en cuenta que debe compilar el Stoserve.dll antes de generar StoClien.</span><span class="sxs-lookup"><span data-stu-id="a564b-142">Be aware that you must build the Stoserve.dll before building StoClien.</span></span> <span data-ttu-id="a564b-143">El archivo make de [**StoServe**](structured-storage-server-sample--stoserve-.md) registra ese servidor en el registro del sistema, por lo que debe compilar [**StoServe**](structured-storage-server-sample--stoserve-.md) antes de intentar ejecutar StoClien.</span><span class="sxs-lookup"><span data-stu-id="a564b-143">The makefile for [**StoServe**](structured-storage-server-sample--stoserve-.md) registers that server in the system registry, so you must build [**StoServe**](structured-storage-server-sample--stoserve-.md) before attempting to run StoClien.</span></span>

<span data-ttu-id="a564b-144">Para obtener más información sobre cómo configurar un sistema para compilar y probar los ejemplos de código de esta serie de tutoriales de COM, vea [Cómo crear ejemplos](how-to-build-samples.md).</span><span class="sxs-lookup"><span data-stu-id="a564b-144">For more information about setting up a system to build and test the code samples in this COM Tutorial series, see [How to Build Samples](how-to-build-samples.md).</span></span> <span data-ttu-id="a564b-145">El archivo make proporcionado (make) es compatible con Microsoft NMAKE.</span><span class="sxs-lookup"><span data-stu-id="a564b-145">The supplied makefile (MAKEFILE) is Microsoft NMAKE-compatible.</span></span> <span data-ttu-id="a564b-146">Para crear una compilación de depuración, emita el comando NMAKE en la ventana del símbolo del sistema.</span><span class="sxs-lookup"><span data-stu-id="a564b-146">To create a debug build, issue the NMAKE command in the command prompt window.</span></span>

<span data-ttu-id="a564b-147">Para mayor comodidad, se proporciona un archivo de proyecto para cada ejemplo que se usa en Microsoft Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a564b-147">For convenience, a project file is provided for each sample for use in Microsoft Visual Studio.</span></span> <span data-ttu-id="a564b-148">Para cargar el proyecto para el ejemplo [StoClien](structured-storage-client-sample--stoclien-.md) , ejecute Visual Studio en el símbolo del sistema en el directorio de ejemplo de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="a564b-148">To load the project for the [StoClien](structured-storage-client-sample--stoclien-.md) sample, run Visual Studio at the command prompt in the sample directory as follows:</span></span>

<span data-ttu-id="a564b-149">MSDEV STOCLIEN. DSP</span><span class="sxs-lookup"><span data-stu-id="a564b-149">MSDEV STOCLIEN.DSP</span></span>

<span data-ttu-id="a564b-150">También puede hacer doble clic en el archivo Stoclient. DSP en el explorador de Windows para cargar un proyecto de ejemplo en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a564b-150">You can also double-click the Stoclient.dsp file in Windows Explorer to load a sample project into Visual Studio.</span></span> <span data-ttu-id="a564b-151">En Visual Studio, puede examinar las clases de C++ del origen de ejemplo y, por lo general, realizar las demás operaciones de edición-compilación-depuración.</span><span class="sxs-lookup"><span data-stu-id="a564b-151">In Visual Studio, you can browse the C++ classes of the sample source and generally perform the other edit-compile-debug operations.</span></span> <span data-ttu-id="a564b-152">Tenga en cuenta que, como parte del SDK del servidor, la compilación de estos ejemplos desde dentro de Visual Studio requiere la configuración adecuada de las rutas de acceso de directorio en Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a564b-152">Be aware that, as part of the Server SDK, the compilation of these samples from within Visual Studio requires the proper setting of directory paths in Visual Studio.</span></span> <span data-ttu-id="a564b-153">Para obtener más información, vea [Cómo crear ejemplos](how-to-build-samples.md).</span><span class="sxs-lookup"><span data-stu-id="a564b-153">For more information, see [How to Build Samples](how-to-build-samples.md).</span></span>

## <a name="remarks"></a><span data-ttu-id="a564b-154">Observaciones</span><span class="sxs-lookup"><span data-stu-id="a564b-154">Remarks</span></span>

<span data-ttu-id="a564b-155">El ejemplo de cliente y otros ejemplos relacionados deben compilarse antes de poder ejecutar el cliente.</span><span class="sxs-lookup"><span data-stu-id="a564b-155">The client sample and other related samples must be compiled before you can run the client.</span></span> <span data-ttu-id="a564b-156">Para obtener más información sobre la creación de los ejemplos, vea [Cómo crear ejemplos](how-to-build-samples.md).</span><span class="sxs-lookup"><span data-stu-id="a564b-156">For more information about building the samples, see [How to Build Samples](how-to-build-samples.md).</span></span> <span data-ttu-id="a564b-157">Si ha creado los ejemplos adecuados, Stoclien.exe es el ejecutable de cliente que se ejecutará para este ejemplo.</span><span class="sxs-lookup"><span data-stu-id="a564b-157">If you have built the appropriate samples, Stoclien.exe is the client executable to run for this sample.</span></span>

<span data-ttu-id="a564b-158">La aplicación Stoclien.exe proporciona la interfaz de usuario para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="a564b-158">The Stoclien.exe application provides the user interface for this tutorial.</span></span> <span data-ttu-id="a564b-159">Ejercita los Stoserve.dll asociados, pero independientes, para demostrar el uso de cliente y servidor del almacenamiento estructurado COM en archivos compuestos.</span><span class="sxs-lookup"><span data-stu-id="a564b-159">It exercises the associated, but independent, Stoserve.dll to demonstrate both client and server use of COM structured storage in compound files.</span></span>

 

 




