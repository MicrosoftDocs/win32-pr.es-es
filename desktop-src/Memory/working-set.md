---
description: El espacio de trabajo de un proceso es el conjunto de páginas del espacio de direcciones virtuales del proceso que residen actualmente en la memoria física.
ms.assetid: ff05276a-1d40-4844-b649-10e32e3f1937
title: Espacio de trabajo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4985e7eb526d5dda8469ccc2f46bfe6fd050c745
ms.sourcegitcommit: b01ad017c152c6756f3638623fe335877644d414
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/06/2021
ms.locfileid: "111549897"
---
# <a name="working-set"></a><span data-ttu-id="1b7e2-103">Espacio de trabajo</span><span class="sxs-lookup"><span data-stu-id="1b7e2-103">Working Set</span></span>

<span data-ttu-id="1b7e2-104">El espacio de trabajo de un proceso es el conjunto de páginas del espacio de direcciones virtuales del proceso que residen actualmente en la memoria física.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-104">The working set of a process is the set of pages in the virtual address space of the process that are currently resident in physical memory.</span></span> <span data-ttu-id="1b7e2-105">El espacio de trabajo solo contiene asignaciones de memoria paginables; Las asignaciones de memoria no paginables, como las [](large-page-support.md) extensiones de ventana de direcciones [](address-windowing-extensions.md) (AWE) o las asignaciones de páginas grandes, no se incluyen en el espacio de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-105">The working set contains only pageable memory allocations; nonpageable memory allocations such as [Address Windowing Extensions](address-windowing-extensions.md) (AWE) or [large page allocations](large-page-support.md) are not included in the working set.</span></span>

<span data-ttu-id="1b7e2-106">Cuando un proceso hace referencia a memoria paginable que no está actualmente en su espacio de trabajo, se *produce un error de* página.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-106">When a process references pageable memory that is not currently in its working set, a *page fault* occurs.</span></span> <span data-ttu-id="1b7e2-107">El controlador de errores de la página del sistema intenta resolver el error de la página y, si se realiza correctamente, la página se agrega al conjunto de trabajo.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-107">The system page fault handler attempts to resolve the page fault and, if it succeeds, the page is added to the working set.</span></span> <span data-ttu-id="1b7e2-108">(El acceso a AWE o asignaciones de páginas grandes nunca produce un error de página, porque estas asignaciones no se pueden paginar).</span><span class="sxs-lookup"><span data-stu-id="1b7e2-108">(Accessing AWE or large page allocations never causes a page fault, because these allocations are not pageable .)</span></span>

<span data-ttu-id="1b7e2-109">Un *error de página* duro debe resolverse mediante la lectura del contenido de la página desde el almacén de respaldo de la página, que es el archivo de paginación del sistema o un archivo asignado a memoria creado por el proceso. </span><span class="sxs-lookup"><span data-stu-id="1b7e2-109">A *hard page fault* must be resolved by reading page contents from the page's *backing store*, which is either the system paging file or a memory-mapped file created by the process.</span></span> <span data-ttu-id="1b7e2-110">Un *error de página de software* se puede resolver sin tener acceso a la tienda de respaldo.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-110">A *soft page fault* can be resolved without accessing the backing store.</span></span> <span data-ttu-id="1b7e2-111">Se produce un error de página flexible cuando:</span><span class="sxs-lookup"><span data-stu-id="1b7e2-111">A soft page fault occurs when:</span></span>

-   <span data-ttu-id="1b7e2-112">La página está en el espacio de trabajo de algún otro proceso, por lo que ya está en la memoria.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-112">The page is in the working set of some other process, so it is already resident in memory.</span></span>
-   <span data-ttu-id="1b7e2-113">La página está en transición, porque se ha quitado de los conjuntos de trabajo de todos los procesos que usaban la página y aún no se ha reasignado, o ya está residentes como resultado de una operación de captura previa del administrador de memoria.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-113">The page is in transition, because it either has been removed from the working sets of all processes that were using the page and has not yet been repurposed, or it is already resident as a result of a memory manager prefetch operation.</span></span>
-   <span data-ttu-id="1b7e2-114">Un proceso hace referencia a una página virtual asignada por primera vez (a veces denominada error *de petición cero).*</span><span class="sxs-lookup"><span data-stu-id="1b7e2-114">A process references an allocated virtual page for the first time (sometimes called a *demand-zero fault*).</span></span>

<span data-ttu-id="1b7e2-115">Las páginas se pueden quitar de un conjunto de trabajo de proceso como resultado de las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="1b7e2-115">Pages can be removed from a process working set as a result of the following actions:</span></span>

-   <span data-ttu-id="1b7e2-116">El proceso reduce o vacía el espacio de trabajo mediante una llamada a la función [**SetProcessWorkingSetSize**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsize), [**SetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex) [**o EmptyWorkingSet.**](/windows/win32/api/psapi/nf-psapi-emptyworkingset)</span><span class="sxs-lookup"><span data-stu-id="1b7e2-116">The process reduces or empties the working set by calling the [**SetProcessWorkingSetSize**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsize), [**SetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex) or [**EmptyWorkingSet**](/windows/win32/api/psapi/nf-psapi-emptyworkingset) function.</span></span>
-   <span data-ttu-id="1b7e2-117">El proceso llama a [**la función VirtualUnlock**](/windows/win32/api/memoryapi/nf-memoryapi-virtualunlock) en un intervalo de memoria que no está bloqueado.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-117">The process calls the [**VirtualUnlock**](/windows/win32/api/memoryapi/nf-memoryapi-virtualunlock) function on a memory range that is not locked.</span></span>
-   <span data-ttu-id="1b7e2-118">El proceso desasigna una vista asignada de un archivo mediante la [**función UnmapViewOfFile.**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile)</span><span class="sxs-lookup"><span data-stu-id="1b7e2-118">The process unmaps a mapped view of a file using the [**UnmapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile) function.</span></span>
-   <span data-ttu-id="1b7e2-119">El administrador de memoria recorta las páginas del espacio de trabajo para crear más memoria disponible.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-119">The memory manager trims pages from the working set to create more available memory.</span></span>
-   <span data-ttu-id="1b7e2-120">El administrador de memoria debe quitar una página del espacio de trabajo para dejar espacio para una nueva página (por ejemplo, porque el espacio de trabajo tiene su tamaño máximo).</span><span class="sxs-lookup"><span data-stu-id="1b7e2-120">The memory manager must remove a page from the working set to make room for a new page (for example, because the working set is at its maximum size).</span></span>

<span data-ttu-id="1b7e2-121">Si varios procesos comparten una página, quitar la página del conjunto de trabajo de un proceso no afecta a otros procesos.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-121">If several processes share a page, removing the page from the working set of one process does not affect other processes.</span></span> <span data-ttu-id="1b7e2-122">Después de quitar una página de los conjuntos de trabajo de todos los procesos que la estaban usando, la página se convierte en una *página de transición*.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-122">After a page is removed from the working sets of all processes that were using it, the page becomes a *transition page*.</span></span> <span data-ttu-id="1b7e2-123">Las páginas de transición permanecen almacenadas en caché en la MEMORIA RAM hasta que algún proceso hace referencia a la página de nuevo o se reasigna (por ejemplo, se rellena con ceros y se da a otro proceso).</span><span class="sxs-lookup"><span data-stu-id="1b7e2-123">Transition pages remain cached in RAM until the page is either referenced again by some process or repurposed (for example, filled with zeros and given to another process).</span></span> <span data-ttu-id="1b7e2-124">Si se ha modificado una página de transición desde que se escribió por última vez en el disco (es decir, si la página está "desusada"), la página debe escribirse en su memoria de respaldo para poder reasignarse.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-124">If a transition page has been modified since it was last written to disk (that is, if the page is "dirty"), then the page must be written to its backing store before it can be repurposed.</span></span> <span data-ttu-id="1b7e2-125">El sistema puede empezar a escribir páginas de transición desa partir de su almacén de respaldo en cuanto dichas páginas estén disponibles.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-125">The system may start writing dirty transition pages to their backing store as soon as such pages become available.</span></span>

<span data-ttu-id="1b7e2-126">Cada proceso tiene un tamaño mínimo y máximo del espacio de trabajo que afecta al comportamiento de paginación de memoria virtual del proceso.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-126">Each process has a minimum and maximum working set size that affect the virtual memory paging behavior of the process.</span></span> <span data-ttu-id="1b7e2-127">Para obtener el tamaño actual del conjunto de trabajo de un proceso especificado, use la [**función GetProcessMemoryInfo.**](/windows/win32/api/psapi/nf-psapi-getprocessmemoryinfo)</span><span class="sxs-lookup"><span data-stu-id="1b7e2-127">To obtain the current size of the working set of a specified process, use the [**GetProcessMemoryInfo**](/windows/win32/api/psapi/nf-psapi-getprocessmemoryinfo) function.</span></span> <span data-ttu-id="1b7e2-128">Para obtener o cambiar los tamaños mínimo y máximo del espacio de trabajo, use las funciones [**GetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-getprocessworkingsetsizeex) y [**SetProcessWorkingSetSizeEx.**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex)</span><span class="sxs-lookup"><span data-stu-id="1b7e2-128">To obtain or change the minimum and maximum working set sizes, use the [**GetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-getprocessworkingsetsizeex) and [**SetProcessWorkingSetSizeEx**](/windows/win32/api/memoryapi/nf-memoryapi-setprocessworkingsetsizeex) functions.</span></span>

<span data-ttu-id="1b7e2-129">La interfaz de programación de aplicaciones de estado de proceso (PSAPI) proporciona una serie de funciones que devuelven información detallada sobre el conjunto de trabajo de un proceso.</span><span class="sxs-lookup"><span data-stu-id="1b7e2-129">The process status application programming interface (PSAPI) provides a number of functions that return detailed information about the working set of a process.</span></span> <span data-ttu-id="1b7e2-130">Para obtener más información, vea [Información del conjunto de trabajo.](../psapi/working-set-information.md)</span><span class="sxs-lookup"><span data-stu-id="1b7e2-130">For details, see [Working Set Information](../psapi/working-set-information.md).</span></span>

 

 
