---
title: Acerca de los controles de animación
description: Un control de animación es una ventana que muestra un Audio-Video clip intercalado (AVI). Un clip AVI es una serie de fotogramas de mapa de bits como una película. Los controles de animación solo pueden mostrar clips AVI que no contienen audio.
ms.assetid: 6be69d1a-5b2c-41d5-b6d7-e86ddac2cb0d
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1625828e5f4febce7314da365c9db93ce3a07136
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/21/2020
ms.locfileid: "105656431"
---
# <a name="about-animation-controls"></a><span data-ttu-id="9691c-105">Acerca de los controles de animación</span><span class="sxs-lookup"><span data-stu-id="9691c-105">About Animation Controls</span></span>

<span data-ttu-id="9691c-106">Un *control de animación* es una ventana que muestra un Audio-Video clip intercalado (AVI).</span><span class="sxs-lookup"><span data-stu-id="9691c-106">An *animation control* is a window that displays an Audio-Video Interleaved (AVI) clip.</span></span> <span data-ttu-id="9691c-107">Un clip AVI es una serie de fotogramas de mapa de bits como una película.</span><span class="sxs-lookup"><span data-stu-id="9691c-107">An AVI clip is a series of bitmap frames like a movie.</span></span> <span data-ttu-id="9691c-108">Los controles de animación solo pueden mostrar clips AVI que no contienen audio.</span><span class="sxs-lookup"><span data-stu-id="9691c-108">Animation controls can only display AVI clips that do not contain audio.</span></span>

<span data-ttu-id="9691c-109">Un uso común de un control de animación es indicar la actividad del sistema durante una operación larga.</span><span class="sxs-lookup"><span data-stu-id="9691c-109">One common use for an animation control is to indicate system activity during a lengthy operation.</span></span> <span data-ttu-id="9691c-110">Esto es posible porque el subproceso de la operación continúa ejecutándose mientras se muestra el clip AVI.</span><span class="sxs-lookup"><span data-stu-id="9691c-110">This is possible because the operation thread continues executing while the AVI clip is displayed.</span></span> <span data-ttu-id="9691c-111">Por ejemplo, el cuadro de diálogo Buscar del explorador de Windows muestra una lupa en movimiento mientras el sistema busca un archivo.</span><span class="sxs-lookup"><span data-stu-id="9691c-111">For example, the Find dialog box of Windows Explorer displays a moving magnifying glass as the system searches for a file.</span></span>

> [!Note]  
> <span data-ttu-id="9691c-112">Si usa ComCtl32.dll versión 6, no se admite el subproceso; Asegúrese de que la aplicación no bloquea la interfaz de usuario o de lo contrario, no se producirá la animación.</span><span class="sxs-lookup"><span data-stu-id="9691c-112">If you are using ComCtl32.dll version 6 the thread is not supported; make sure that your application does not block the UI, or else the animation will not occur.</span></span>

 

<span data-ttu-id="9691c-113">Un control de animación puede mostrar un clip AVI procedente de un archivo AVI sin comprimir o de un archivo AVI comprimido mediante la codificación de longitud de ejecución ( \_ RLE8 de BI).</span><span class="sxs-lookup"><span data-stu-id="9691c-113">An animation control can display an AVI clip originating from either an uncompressed AVI file or from an AVI file that was compressed using run-length (BI\_RLE8) encoding.</span></span> <span data-ttu-id="9691c-114">Puede Agregar el clip AVI a la aplicación como un recurso AVI, o bien el clip puede acompañar a la aplicación como un archivo AVI independiente.</span><span class="sxs-lookup"><span data-stu-id="9691c-114">You can add the AVI clip to your application as an AVI resource, or the clip can accompany your application as a separate AVI file.</span></span>

> [!Note]  
> <span data-ttu-id="9691c-115">El archivo AVI o el recurso no deben tener un canal de sonido.</span><span class="sxs-lookup"><span data-stu-id="9691c-115">The AVI file, or resource, must not have a sound channel.</span></span> <span data-ttu-id="9691c-116">Las capacidades del control de animación son muy limitadas y están sujetas a cambios.</span><span class="sxs-lookup"><span data-stu-id="9691c-116">The capabilities of the animation control are very limited and are subject to change.</span></span> <span data-ttu-id="9691c-117">Si necesita un control para proporcionar funciones de reproducción y grabación multimedia para su aplicación, puede usar el control MCIWnd.</span><span class="sxs-lookup"><span data-stu-id="9691c-117">If you need a control to provide multimedia playback and recording capabilities for your application, you can use the MCIWnd control.</span></span> <span data-ttu-id="9691c-118">Para obtener más información, vea [clase de ventana MCIWnd](/windows/desktop/Multimedia/mciwnd-window-class).</span><span class="sxs-lookup"><span data-stu-id="9691c-118">For more information, see [MCIWnd Window Class](/windows/desktop/Multimedia/mciwnd-window-class).</span></span>

 

<span data-ttu-id="9691c-119">En esta sección se tratan los temas siguientes.</span><span class="sxs-lookup"><span data-stu-id="9691c-119">This section discusses the following topics.</span></span>

-   [<span data-ttu-id="9691c-120">Creación de controles de animación</span><span class="sxs-lookup"><span data-stu-id="9691c-120">Animation Control Creation</span></span>](#animation-control-creation)
-   [<span data-ttu-id="9691c-121">Acerca de los mensajes de control de animación</span><span class="sxs-lookup"><span data-stu-id="9691c-121">About Animation Control Messages</span></span>](#about-animation-control-messages)
-   [<span data-ttu-id="9691c-122">Procesamiento de mensajes predeterminado</span><span class="sxs-lookup"><span data-stu-id="9691c-122">Default Message Processing</span></span>](#default-message-processing)

## <a name="animation-control-creation"></a><span data-ttu-id="9691c-123">Creación de controles de animación</span><span class="sxs-lookup"><span data-stu-id="9691c-123">Animation Control Creation</span></span>

<span data-ttu-id="9691c-124">Un control de animación pertenece a la clase de ventana [**animar \_ clase**](common-control-window-classes.md) .</span><span class="sxs-lookup"><span data-stu-id="9691c-124">An animation control belongs to the [**ANIMATE\_CLASS**](common-control-window-classes.md) window class.</span></span> <span data-ttu-id="9691c-125">Puede crear un control de animación mediante las funciones [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) o [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) , o bien [**animar \_ Create**](/windows/desktop/api/Commctrl/nf-commctrl-animate_create) macro.</span><span class="sxs-lookup"><span data-stu-id="9691c-125">You create an animation control by using the [**CreateWindow**](/windows/desktop/api/winuser/nf-winuser-createwindowa) or [**CreateWindowEx**](/windows/desktop/api/winuser/nf-winuser-createwindowexa) function or the [**Animate\_Create**](/windows/desktop/api/Commctrl/nf-commctrl-animate_create) macro.</span></span> <span data-ttu-id="9691c-126">La macro coloca el control de animación en la esquina superior izquierda de la ventana primaria y, si no se especifica el estilo del [**\_ centro de ACS**](animation-control-styles.md) , establece el ancho y el alto del control en función de las dimensiones de un fotograma en el clip AVI.</span><span class="sxs-lookup"><span data-stu-id="9691c-126">The macro positions the animation control in the upper-left corner of the parent window and, if the [**ACS\_CENTER**](animation-control-styles.md) style is not specified, sets the width and height of the control based on the dimensions of a frame in the AVI clip.</span></span> <span data-ttu-id="9691c-127">Si se especifica **ACS \_ Center** , **animar \_ crear** establece el ancho y el alto del control en cero.</span><span class="sxs-lookup"><span data-stu-id="9691c-127">If **ACS\_CENTER** is specified, **Animate\_Create** sets the width and height of the control to zero.</span></span> <span data-ttu-id="9691c-128">Puede utilizar la función [**SetWindowPos**](/windows/desktop/api/winuser/nf-winuser-setwindowpos) para establecer la posición y el tamaño del control.</span><span class="sxs-lookup"><span data-stu-id="9691c-128">You can use the [**SetWindowPos**](/windows/desktop/api/winuser/nf-winuser-setwindowpos) function to set the position and size of the control.</span></span>

<span data-ttu-id="9691c-129">Si crea un control de animación dentro de un cuadro de diálogo o de un recurso de cuadro de diálogo, el control se destruye automáticamente cuando el usuario cierra el cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="9691c-129">If you create an animation control within a dialog box or from a dialog box resource, the control is automatically destroyed when the user closes the dialog box.</span></span> <span data-ttu-id="9691c-130">Si crea un control de animación dentro de una ventana, debe destruir explícitamente el control.</span><span class="sxs-lookup"><span data-stu-id="9691c-130">If you create an animation control within a window, you must explicitly destroy the control.</span></span>

## <a name="about-animation-control-messages"></a><span data-ttu-id="9691c-131">Acerca de los mensajes de control de animación</span><span class="sxs-lookup"><span data-stu-id="9691c-131">About Animation Control Messages</span></span>

<span data-ttu-id="9691c-132">Una aplicación envía mensajes a un control de animación para abrir, reproducir, detener y cerrar el clip AVI correspondiente.</span><span class="sxs-lookup"><span data-stu-id="9691c-132">An application sends messages to an animation control to open, play, stop, and close the corresponding AVI clip.</span></span> <span data-ttu-id="9691c-133">Cada mensaje tiene una o varias macros que puede usar en lugar de enviar el mensaje explícitamente.</span><span class="sxs-lookup"><span data-stu-id="9691c-133">Each message has one or more macros that you can use instead of sending the message explicitly.</span></span>

<span data-ttu-id="9691c-134">Después de crear un control de animación, una aplicación envía el mensaje [**\_ Open de ACM**](acm-open.md) para abrir un clip AVI y cargarlo en la memoria.</span><span class="sxs-lookup"><span data-stu-id="9691c-134">After creating an animation control, an application sends the [**ACM\_OPEN**](acm-open.md) message to open an AVI clip and load it into memory.</span></span> <span data-ttu-id="9691c-135">El mensaje especifica la ruta de acceso de un archivo AVI o el nombre de un recurso AVI.</span><span class="sxs-lookup"><span data-stu-id="9691c-135">The message specifies either the path of an AVI file or the name of an AVI resource.</span></span> <span data-ttu-id="9691c-136">El sistema carga el recurso AVI desde el módulo que creó el control Animation.</span><span class="sxs-lookup"><span data-stu-id="9691c-136">The system loads the AVI resource from the module that created the animation control.</span></span>

<span data-ttu-id="9691c-137">Si el control de animación tiene el estilo de [**\_ reproducción automática de ACS**](animation-control-styles.md) , el control comienza a reproducir el clip AVI inmediatamente después de que se abra el archivo AVI o el recurso AVI.</span><span class="sxs-lookup"><span data-stu-id="9691c-137">If the animation control has the [**ACS\_AUTOPLAY**](animation-control-styles.md) style, the control begins playing the AVI clip immediately after the AVI file or AVI resource is opened.</span></span> <span data-ttu-id="9691c-138">De lo contrario, una aplicación puede usar el mensaje [**ACM \_ Play**](acm-play.md) para iniciar el clip AVI.</span><span class="sxs-lookup"><span data-stu-id="9691c-138">Otherwise, an application can use the [**ACM\_PLAY**](acm-play.md) message to start the AVI clip.</span></span> <span data-ttu-id="9691c-139">Una aplicación puede detener el clip en cualquier momento enviando el mensaje [**de \_ detención de ACM**](acm-stop.md) .</span><span class="sxs-lookup"><span data-stu-id="9691c-139">An application can stop the clip at any time by sending the [**ACM\_STOP**](acm-stop.md) message.</span></span> <span data-ttu-id="9691c-140">El último fotograma jugado sigue mostrándose cuando el control termina de reproducir el clip AVI o cuando se envía la **\_ detención de ACM** .</span><span class="sxs-lookup"><span data-stu-id="9691c-140">The last frame played remains displayed when the control finishes playing the AVI clip or when **ACM\_STOP** is sent.</span></span>

<span data-ttu-id="9691c-141">Un control de animación puede enviar dos códigos de notificación a su ventana primaria: [ACN \_ Start](acn-start.md) y [ACN \_ Stop](acn-stop.md).</span><span class="sxs-lookup"><span data-stu-id="9691c-141">An animation control can send two notification codes to its parent window: [ACN\_START](acn-start.md) and [ACN\_STOP](acn-stop.md).</span></span> <span data-ttu-id="9691c-142">La mayoría de las aplicaciones no controlan ninguna notificación.</span><span class="sxs-lookup"><span data-stu-id="9691c-142">Most applications do not handle either notification.</span></span>

<span data-ttu-id="9691c-143">Para cerrar el archivo AVI o el recurso AVI y quitarlo de la memoria, una aplicación puede usar la macro de [**animación de \_ cierre**](/windows/desktop/api/Commctrl/nf-commctrl-animate_close) , que envía [**ACM \_ Open**](acm-open.md) con el nombre de archivo o el nombre de recurso establecido en **null**.</span><span class="sxs-lookup"><span data-stu-id="9691c-143">To close the AVI file or AVI resource and remove it from memory, an application can use the [**Animate\_Close**](/windows/desktop/api/Commctrl/nf-commctrl-animate_close) macro, which sends [**ACM\_OPEN**](acm-open.md) with the file name or resource name set to **NULL**.</span></span>

## <a name="default-message-processing"></a><span data-ttu-id="9691c-144">Procesamiento de mensajes predeterminado</span><span class="sxs-lookup"><span data-stu-id="9691c-144">Default Message Processing</span></span>

<span data-ttu-id="9691c-145">En esta sección se describen los mensajes de ventana que se controlan mediante el procedimiento de ventana de la clase de ventana [**Animate \_ Class**](common-control-window-classes.md) .</span><span class="sxs-lookup"><span data-stu-id="9691c-145">This section describes the window messages handled by the window procedure for the [**ANIMATE\_CLASS**](common-control-window-classes.md) window class.</span></span>



| <span data-ttu-id="9691c-146">Message</span><span class="sxs-lookup"><span data-stu-id="9691c-146">Message</span></span>                                    | <span data-ttu-id="9691c-147">Procesamiento realizado</span><span class="sxs-lookup"><span data-stu-id="9691c-147">Processing performed</span></span>                                                                                                                                                                                                                                                                        |
|--------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="9691c-148">**cierre de WM \_**</span><span class="sxs-lookup"><span data-stu-id="9691c-148">**WM\_CLOSE**</span></span>](/windows/desktop/winmsg/wm-close)           | <span data-ttu-id="9691c-149">Libera el archivo AVI o el recurso AVI asociado al control Animation.</span><span class="sxs-lookup"><span data-stu-id="9691c-149">Frees the AVI file or AVI resource associated with the animation control.</span></span>                                                                                                                                                                                                                   |
| [<span data-ttu-id="9691c-150">**destrucción de WM \_**</span><span class="sxs-lookup"><span data-stu-id="9691c-150">**WM\_DESTROY**</span></span>](/windows/desktop/winmsg/wm-destroy)       | <span data-ttu-id="9691c-151">Libera el archivo AVI o el recurso AVI, libera una estructura de datos interna y, a continuación, llama a la función [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) .</span><span class="sxs-lookup"><span data-stu-id="9691c-151">Frees the AVI file or AVI resource, frees an internal data structure, and then calls the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span>                                                                                                                                                |
| [<span data-ttu-id="9691c-152">**ERASEBKGND de WM \_**</span><span class="sxs-lookup"><span data-stu-id="9691c-152">**WM\_ERASEBKGND**</span></span>](/windows/desktop/winmsg/wm-erasebkgnd) | <span data-ttu-id="9691c-153">Borra el fondo de la ventana utilizando el color de fondo actual para los controles estáticos.</span><span class="sxs-lookup"><span data-stu-id="9691c-153">Erases the window background using the current background color for static controls.</span></span>                                                                                                                                                                                                        |
| [<span data-ttu-id="9691c-154">**NCCREATE de WM \_**</span><span class="sxs-lookup"><span data-stu-id="9691c-154">**WM\_NCCREATE**</span></span>](/windows/desktop/winmsg/wm-nccreate)     | <span data-ttu-id="9691c-155">Asigna e inicializa una estructura de datos interna y, a continuación, llama a [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="9691c-155">Allocates and initializes an internal data structure and then calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span></span>                                                                                                                                                                              |
| [<span data-ttu-id="9691c-156">**NCHITTEST de WM \_**</span><span class="sxs-lookup"><span data-stu-id="9691c-156">**WM\_NCHITTEST**</span></span>](/windows/desktop/inputdev/wm-nchittest) | <span data-ttu-id="9691c-157">Devuelve el valor de la prueba de posicionamiento de HTTRANSPARENT.</span><span class="sxs-lookup"><span data-stu-id="9691c-157">Returns the HTTRANSPARENT hit test value.</span></span>                                                                                                                                                                                                                                                   |
| [<span data-ttu-id="9691c-158">**pintura de WM \_**</span><span class="sxs-lookup"><span data-stu-id="9691c-158">**WM\_PAINT**</span></span>](/windows/desktop/gdi/wm-paint)              | <span data-ttu-id="9691c-159">Dibuja un marco AVI en el control de animación.</span><span class="sxs-lookup"><span data-stu-id="9691c-159">Draws an AVI frame in the animation control.</span></span>                                                                                                                                                                                                                                                |
| [<span data-ttu-id="9691c-160">**tamaño de WM \_**</span><span class="sxs-lookup"><span data-stu-id="9691c-160">**WM\_SIZE**</span></span>](/windows/desktop/winmsg/wm-size)             | <span data-ttu-id="9691c-161">Comprueba si el control tiene el estilo de [**\_ centro de ACS**](animation-control-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="9691c-161">Checks if the control has the [**ACS\_CENTER**](animation-control-styles.md) style.</span></span> <span data-ttu-id="9691c-162">Si el control no lo hace, llama a [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="9691c-162">If the control does not, it calls [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca).</span></span> <span data-ttu-id="9691c-163">De lo contrario, centra la animación en el control, invalida el control y, a continuación, llama a **DefWindowProc**.</span><span class="sxs-lookup"><span data-stu-id="9691c-163">Otherwise, it centers the animation in the control, invalidates the control, and then calls **DefWindowProc**.</span></span> |



 

 

 