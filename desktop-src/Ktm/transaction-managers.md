---
description: Un administrador de transacciones (TM) es una instancia de un registro. En KTM, los objetos de TM especifican el registro y algunas de las funciones de TM. Normalmente hay muchos objetos TM en un nodo determinado. Los administradores de recursos (RMs) deben estar asociados a un TM específico.
ms.assetid: 8d43977a-84cf-4109-b7db-f9c94a226c5d
title: Administradores de transacciones
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 313215816642201c75ae5f0facae3bf98799c8d1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105677692"
---
# <a name="transaction-managers"></a><span data-ttu-id="5f65c-106">Administradores de transacciones</span><span class="sxs-lookup"><span data-stu-id="5f65c-106">Transaction Managers</span></span>

<span data-ttu-id="5f65c-107">Un administrador de transacciones (TM) es una instancia de un registro.</span><span class="sxs-lookup"><span data-stu-id="5f65c-107">A transaction manager (TM) is an instance of a log.</span></span> <span data-ttu-id="5f65c-108">En KTM, los objetos de TM especifican el registro y algunas de las funciones de TM.</span><span class="sxs-lookup"><span data-stu-id="5f65c-108">In KTM, the TM objects specify the log and some of the functionality of the TM.</span></span> <span data-ttu-id="5f65c-109">Normalmente hay muchos objetos TM en un nodo determinado.</span><span class="sxs-lookup"><span data-stu-id="5f65c-109">There are typically many TM objects on a particular node.</span></span> <span data-ttu-id="5f65c-110">Los administradores de recursos (RMs) deben estar asociados a un TM específico.</span><span class="sxs-lookup"><span data-stu-id="5f65c-110">Resource managers (RMs) must be associated with a specific TM.</span></span> <span data-ttu-id="5f65c-111">Hay tres tipos de TM:</span><span class="sxs-lookup"><span data-stu-id="5f65c-111">There are three types of TMs:</span></span>

-   <span data-ttu-id="5f65c-112">TM volátil, que no tiene ningún registro.</span><span class="sxs-lookup"><span data-stu-id="5f65c-112">A volatile TM, which has no log.</span></span>
-   <span data-ttu-id="5f65c-113">TM normal, que tiene un registro y se utiliza para coordinar las transacciones de uno o más RMs.</span><span class="sxs-lookup"><span data-stu-id="5f65c-113">A regular TM, which has a log and is used to coordinate the transactions of one or more RMs.</span></span>
-   <span data-ttu-id="5f65c-114">Un administrador de transacciones superior.</span><span class="sxs-lookup"><span data-stu-id="5f65c-114">A superior transaction manager.</span></span>

## <a name="volatile-transaction-managers"></a><span data-ttu-id="5f65c-115">Administradores de transacciones volátiles</span><span class="sxs-lookup"><span data-stu-id="5f65c-115">Volatile Transaction Managers</span></span>

<span data-ttu-id="5f65c-116">Un TM volátil es un TM para RMs de solo lectura o volátil.</span><span class="sxs-lookup"><span data-stu-id="5f65c-116">A volatile TM is a TM for read-only or volatile RMs.</span></span> <span data-ttu-id="5f65c-117">No tiene un registro y no conserva el estado de las transacciones a través de los reinicios del sistema.</span><span class="sxs-lookup"><span data-stu-id="5f65c-117">It does not have a log and does not persist the state of transactions across system restarts.</span></span>

## <a name="transaction-managers"></a><span data-ttu-id="5f65c-118">Administradores de transacciones</span><span class="sxs-lookup"><span data-stu-id="5f65c-118">Transaction Managers</span></span>

<span data-ttu-id="5f65c-119">Las TM tienen un registro, uno o más RMs duradero o volátil, o ambos.</span><span class="sxs-lookup"><span data-stu-id="5f65c-119">TMs have a log, one or more durable or volatile RMs, or both.</span></span> <span data-ttu-id="5f65c-120">El TM mantendrá el estado de una transacción a través de los reinicios del sistema hasta que se completen las transacciones.</span><span class="sxs-lookup"><span data-stu-id="5f65c-120">The TM will persist the state of a transaction across system restarts until the transactions are completed.</span></span> <span data-ttu-id="5f65c-121">Se utiliza un modelo de anulación de la operación, por lo que las transacciones que estaban activas pero no se prepararon cuando se apaga el objeto TM se revierten.</span><span class="sxs-lookup"><span data-stu-id="5f65c-121">A presumed-abort model is used, so transactions which were active but not prepared when the TM object is shut down are rolled back.</span></span> <span data-ttu-id="5f65c-122">Al abrir un TM por primera vez, debe recuperar el TM mediante una llamada a la función [**RecoverTransactionManager**](/windows/desktop/api/Ktmw32/nf-ktmw32-recovertransactionmanager) .</span><span class="sxs-lookup"><span data-stu-id="5f65c-122">When you open a TM for the first time, you must recover the TM by calling the [**RecoverTransactionManager**](/windows/desktop/api/Ktmw32/nf-ktmw32-recovertransactionmanager) function.</span></span>

## <a name="superior-transaction-managers"></a><span data-ttu-id="5f65c-123">Administradores de transacciones superiores</span><span class="sxs-lookup"><span data-stu-id="5f65c-123">Superior Transaction Managers</span></span>

<span data-ttu-id="5f65c-124">Un TM superior es un TM para otras TM.</span><span class="sxs-lookup"><span data-stu-id="5f65c-124">A superior TM is a TM for other TMs.</span></span> <span data-ttu-id="5f65c-125">Coordina las transacciones.</span><span class="sxs-lookup"><span data-stu-id="5f65c-125">It coordinates transactions.</span></span> <span data-ttu-id="5f65c-126">También emite notificaciones de **\_ notificaciones de \_ preparación** para el administrador de transacciones de kernel (KTM).</span><span class="sxs-lookup"><span data-stu-id="5f65c-126">It also issues **TRANSACTION\_NOTIFY\_PREPARE** notifications to the Kernel Transaction Manager (KTM).</span></span> <span data-ttu-id="5f65c-127">Un ejemplo de un TM superior es Microsoft Coordinador de transacciones distribuidas (DTC).</span><span class="sxs-lookup"><span data-stu-id="5f65c-127">An example of a superior TM is the Microsoft Distributed Transaction Coordinator (DTC).</span></span> <span data-ttu-id="5f65c-128">Esta capacidad incluye una responsabilidad adicional en tiempo de recuperación.</span><span class="sxs-lookup"><span data-stu-id="5f65c-128">This ability comes with an added recovery-time responsibility.</span></span> <span data-ttu-id="5f65c-129">Durante la recuperación, el RM debe llamar primero a la función [**OpenEnlistment**](/windows/desktop/api/Ktmw32/nf-ktmw32-openenlistment) para volver a abrir la inscripción.</span><span class="sxs-lookup"><span data-stu-id="5f65c-129">During recovery, the RM must first call the [**OpenEnlistment**](/windows/desktop/api/Ktmw32/nf-ktmw32-openenlistment) function to re-open the enlistment.</span></span> <span data-ttu-id="5f65c-130">También debe proporcionar (o volver a proporcionar) el resultado de la transacción si se confirmó la transacción. es gratuito proporcionar un resultado llamando a la función [**CommitTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-committransaction) o a la función [**RollbackTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbacktransaction) .</span><span class="sxs-lookup"><span data-stu-id="5f65c-130">It must also deliver (or re-deliver) the transaction's outcome if the transaction was committed; it is free to deliver an outcome by calling either the [**CommitTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-committransaction) function or the [**RollbackTransaction**](/windows/desktop/api/Ktmw32/nf-ktmw32-rollbacktransaction) function.</span></span> <span data-ttu-id="5f65c-131">Esta obligación no finaliza hasta que se ha recibido un evento de notificación de **\_ \_ confirmación \_** completa de transacción asociada o de notificaciones de **\_ \_ reversión \_** completa. Si un TM superior no puede realizar estas operaciones en el momento de la recuperación, el KTM limpiará las transacciones que no hayan recibido resultados al final de la fase de recuperación.</span><span class="sxs-lookup"><span data-stu-id="5f65c-131">This obligation does not end until it has received an associated **TRANSACTION\_NOTIFY\_COMMIT\_COMPLETE** or **TRANSACTION\_NOTIFY\_ROLLBACK\_COMPLETE** notification event.If a superior TM fails to perform these operations at recovery time, the KTM will clean up any transactions that have not received outcomes by the end of the recovery phase.</span></span> <span data-ttu-id="5f65c-132">Sin embargo, esto puede dar lugar a resultados incoherentes en las transacciones.</span><span class="sxs-lookup"><span data-stu-id="5f65c-132">However, this can result in inconsistent transaction outcomes.</span></span>

## <a name="transaction-manager-functions"></a><span data-ttu-id="5f65c-133">Funciones del administrador de transacciones</span><span class="sxs-lookup"><span data-stu-id="5f65c-133">Transaction Manager Functions</span></span>

<span data-ttu-id="5f65c-134">Las siguientes funciones se usan con administradores de transacciones.</span><span class="sxs-lookup"><span data-stu-id="5f65c-134">The following functions are used with transaction managers.</span></span>



| <span data-ttu-id="5f65c-135">Función</span><span class="sxs-lookup"><span data-stu-id="5f65c-135">Function</span></span>                                                                            | <span data-ttu-id="5f65c-136">Descripción</span><span class="sxs-lookup"><span data-stu-id="5f65c-136">Description</span></span>                                                                                    |
|-------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5f65c-137">**CreateTransactionManager**</span><span class="sxs-lookup"><span data-stu-id="5f65c-137">**CreateTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-createtransactionmanager)                        | <span data-ttu-id="5f65c-138">Crea un nuevo objeto de administrador de transacciones (TM) y devuelve un identificador con el acceso especificado.</span><span class="sxs-lookup"><span data-stu-id="5f65c-138">Creates a new transaction manager (TM) object and returns a handle with the specified access.</span></span>  |
| [<span data-ttu-id="5f65c-139">**GetCurrentClockTransactionManager**</span><span class="sxs-lookup"><span data-stu-id="5f65c-139">**GetCurrentClockTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-getcurrentclocktransactionmanager) | <span data-ttu-id="5f65c-140">Obtiene un valor de reloj virtual de un administrador de transacciones.</span><span class="sxs-lookup"><span data-stu-id="5f65c-140">Obtains a virtual clock value from a transaction manager.</span></span>                                      |
| [<span data-ttu-id="5f65c-141">**GetTransactionManagerId**</span><span class="sxs-lookup"><span data-stu-id="5f65c-141">**GetTransactionManagerId**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-gettransactionmanagerid)                          | <span data-ttu-id="5f65c-142">Obtiene un identificador para el administrador de transacciones especificado.</span><span class="sxs-lookup"><span data-stu-id="5f65c-142">Obtains an identifier for the specified transaction manager.</span></span>                                   |
| [<span data-ttu-id="5f65c-143">**OpenTransactionManager**</span><span class="sxs-lookup"><span data-stu-id="5f65c-143">**OpenTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-opentransactionmanager)                            | <span data-ttu-id="5f65c-144">Abre un administrador de transacciones existente.</span><span class="sxs-lookup"><span data-stu-id="5f65c-144">Opens an existing transaction manager.</span></span>                                                         |
| [<span data-ttu-id="5f65c-145">**RecoverTransactionManager**</span><span class="sxs-lookup"><span data-stu-id="5f65c-145">**RecoverTransactionManager**</span></span>](/windows/desktop/api/Ktmw32/nf-ktmw32-recovertransactionmanager)                      | <span data-ttu-id="5f65c-146">Recupera el estado de un administrador de transacciones desde su archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="5f65c-146">Recovers a transaction manager's state from its log file.</span></span>                                      |
| [<span data-ttu-id="5f65c-147">**RollforwardTransactionManager**</span><span class="sxs-lookup"><span data-stu-id="5f65c-147">**RollforwardTransactionManager**</span></span>](/windows/desktop/api/KtmW32/nf-ktmw32-rollforwardtransactionmanager)              | <span data-ttu-id="5f65c-148">Recupera el estado de un administrador de transacciones desde su archivo de registro hasta el valor de reloj virtual especificado.</span><span class="sxs-lookup"><span data-stu-id="5f65c-148">Recovers a transaction manager's state from its log file to the specified virtual clock value.</span></span> |



 

 

 



