---
description: Para proporcionar una justificación del texto, una aplicación puede usar uno de dos métodos.
ms.assetid: 1190baed-5959-4f7a-8946-ac3b3da85821
title: Procesamiento de scripts complejos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 87bea5b75e87afc4177b03c03f4263ba2592a0e0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104082081"
---
# <a name="processing-complex-scripts"></a><span data-ttu-id="0caea-103">Procesamiento de scripts complejos</span><span class="sxs-lookup"><span data-stu-id="0caea-103">Processing Complex Scripts</span></span>

<span data-ttu-id="0caea-104">Para proporcionar una justificación del texto, una aplicación puede usar uno de dos métodos.</span><span class="sxs-lookup"><span data-stu-id="0caea-104">To provide text justification, an application can use one of two methods.</span></span> <span data-ttu-id="0caea-105">Para una implementación simple de la justificación multilingüe, la aplicación debe llamar a [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify).</span><span class="sxs-lookup"><span data-stu-id="0caea-105">For a simple implementation of multilingual justification, the application should call [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify).</span></span> <span data-ttu-id="0caea-106">Genera la matriz DX Delta mediante la consideración de kashida, el espaciado entre palabras y, a continuación, el espaciado entre caracteres.</span><span class="sxs-lookup"><span data-stu-id="0caea-106">It generates the delta dx array by considering kashida, then interword spacing, and then intercharacter spacing.</span></span> <span data-ttu-id="0caea-107">Para obtener una justificación más sofisticada, la aplicación puede generar una matriz DX Delta actualizada con su propio conocimiento de lenguaje y la información recuperada por [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) en la matriz [**\_ VISATTR de script**](/windows/win32/api/usp10/ns-usp10-script_visattr) .</span><span class="sxs-lookup"><span data-stu-id="0caea-107">For more sophisticated justification, the application can generate an updated delta dx array using its own language knowledge and the information retrieved by [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) in the [**SCRIPT\_VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr) array.</span></span>

<span data-ttu-id="0caea-108">Se debe insertar el espacio de justificación o kashida, donde se identifique por el miembro **uJustification** de la [**secuencia de comandos \_ VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr).</span><span class="sxs-lookup"><span data-stu-id="0caea-108">Justification space or kashida should be inserted where identified by the **uJustification** member of [**SCRIPT\_VISATTR**](/windows/win32/api/usp10/ns-usp10-script_visattr).</span></span> <span data-ttu-id="0caea-109">Al realizar la justificación entre caracteres, la aplicación debe insertar espacio adicional solo después de los glifos marcados con el carácter de alineación de SCRIPT \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="0caea-109">When performing inter-character justification, the application should insert extra space only after glyphs marked with SCRIPT\_JUSTIFY\_CHARACTER.</span></span>

<span data-ttu-id="0caea-110">La aplicación realiza la colocación del símbolo de intercalación y la prueba de posicionamiento mediante [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) y [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox).</span><span class="sxs-lookup"><span data-stu-id="0caea-110">The application does caret placement and hit testing by using [**ScriptXtoCP**](/windows/desktop/api/Usp10/nf-usp10-scriptxtocp) and [**ScriptCPtoX**](/windows/desktop/api/Usp10/nf-usp10-scriptcptox).</span></span> <span data-ttu-id="0caea-111">Para obtener más información, vea [administrar la colocación del símbolo de intercalación y la prueba de posicionamiento](managing-caret-placement-and-hit-testing.md).</span><span class="sxs-lookup"><span data-stu-id="0caea-111">For more information, see [Managing Caret Placement and Hit Testing](managing-caret-placement-and-hit-testing.md).</span></span>

<span data-ttu-id="0caea-112">Para obtener los anchos de una manera independiente de la fuente, la aplicación llama a [**ScriptGetLogicalWidths**](/windows/desktop/api/Usp10/nf-usp10-scriptgetlogicalwidths).</span><span class="sxs-lookup"><span data-stu-id="0caea-112">To get widths in a font-independent manner, the application calls [**ScriptGetLogicalWidths**](/windows/desktop/api/Usp10/nf-usp10-scriptgetlogicalwidths).</span></span> <span data-ttu-id="0caea-113">Al pasar los anchos lógicos a [**ScriptApplyLogicalWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptapplylogicalwidth), se puede volver a mostrar un bloque de texto en los mismos límites con una pérdida aceptable de calidad incluso cuando la fuente original no esté disponible.</span><span class="sxs-lookup"><span data-stu-id="0caea-113">By passing the logical widths to [**ScriptApplyLogicalWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptapplylogicalwidth), a block of text can be redisplayed in the same boundaries with acceptable loss of quality even when the original font is not available.</span></span> <span data-ttu-id="0caea-114">Genera una matriz de anchos de glifo ([anchos de avance](uniscribe-glossary.md)) adecuado para pasar a [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout).</span><span class="sxs-lookup"><span data-stu-id="0caea-114">It generates an array of glyph widths ([advance widths](uniscribe-glossary.md)) suitable for passing to [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout).</span></span> <span data-ttu-id="0caea-115">Esta grabación y reaplicación de la información de ancho avanzado de una manera independiente de la fuente puede ser útil en situaciones como la generación de metadatos en un formato definido por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0caea-115">Such recording and reapplying of advance width information in a font-independent manner can be useful in situations such as metafiling in an application defined format.</span></span>

> [!Note]  
> <span data-ttu-id="0caea-116">Los metaarchivos no admiten índices de glifo.</span><span class="sxs-lookup"><span data-stu-id="0caea-116">Metafiles do not support glyph indexes.</span></span> <span data-ttu-id="0caea-117">Para escribir en un metarchivo mejorado, la aplicación debe utilizar [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) y escribir los caracteres lógicos directamente.</span><span class="sxs-lookup"><span data-stu-id="0caea-117">To write to an enhanced metafile, the application should use [**ExtTextOut**](/windows/win32/api/wingdi/nf-wingdi-exttextouta) and write the logical characters directly.</span></span> <span data-ttu-id="0caea-118">Con este mecanismo, la generación y colocación del glifo no se produce hasta que el texto se reproduce.</span><span class="sxs-lookup"><span data-stu-id="0caea-118">Using this mechanism, the glyph generation and placement does not occur until the text is played back.</span></span>

 

<span data-ttu-id="0caea-119">Para recuperar los glifos específicos que se usan para el valor predeterminado, los valores en blanco, kashida, etc., para la fuente actual, la aplicación debe llamar a [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span><span class="sxs-lookup"><span data-stu-id="0caea-119">To retrieve the specific glyphs that are used for the default, blanks, kashida, and so forth, for the current font, the application should call [**ScriptGetFontProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetfontproperties).</span></span> <span data-ttu-id="0caea-120">Para determinar qué caracteres de una ejecución son compatibles con la fuente seleccionada, la aplicación llama a [**ScriptGetCMap**](/windows/desktop/api/Usp10/nf-usp10-scriptgetcmap).</span><span class="sxs-lookup"><span data-stu-id="0caea-120">To determine which characters in a run are supported by the selected font, the application calls [**ScriptGetCMap**](/windows/desktop/api/Usp10/nf-usp10-scriptgetcmap).</span></span> <span data-ttu-id="0caea-121">Los caracteres que no están disponibles tienen el glifo predeterminado en el búfer del glifo.</span><span class="sxs-lookup"><span data-stu-id="0caea-121">Characters that are not available have the default glyph in the glyph buffer.</span></span> <span data-ttu-id="0caea-122">Tenga en cuenta que este método produce un error si una fuente representa un carácter utilizando una combinación de glifos en lugar de un único glifo.</span><span class="sxs-lookup"><span data-stu-id="0caea-122">Note that this method fails if a font renders a character using a combination of glyphs instead of a single glyph.</span></span> <span data-ttu-id="0caea-123">Por ejemplo, 00C9; La letra mayúscula latina E con acento agudo se puede representar con un glifo E de mayúsculas y un glifo de agudos.</span><span class="sxs-lookup"><span data-stu-id="0caea-123">For example, 00C9; LATIN CAPITAL LETTER E WITH ACUTE can be rendered using a capital E glyph and an acute glyph.</span></span> <span data-ttu-id="0caea-124">Para determinar la compatibilidad de fuentes para una cadena que contiene estos tipos de puntos de código, la aplicación puede llamar a [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape).</span><span class="sxs-lookup"><span data-stu-id="0caea-124">To determine the font support for a string that contains these kinds of code points, the application can call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape).</span></span> <span data-ttu-id="0caea-125">Para obtener más información, consulte [uso de motores de modelado](using-shaping-engines.md).</span><span class="sxs-lookup"><span data-stu-id="0caea-125">For more information, see [Using Shaping Engines](using-shaping-engines.md).</span></span>

<span data-ttu-id="0caea-126">La función [**ScriptCacheGetHeight**](/windows/desktop/api/Usp10/nf-usp10-scriptcachegetheight) devuelve el alto de la fuente de la memoria caché de fuentes.</span><span class="sxs-lookup"><span data-stu-id="0caea-126">The [**ScriptCacheGetHeight**](/windows/desktop/api/Usp10/nf-usp10-scriptcachegetheight) function returns the height of the font from the font cache.</span></span> <span data-ttu-id="0caea-127">[**ScriptGetProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetproperties) proporciona información sobre el procesamiento especial que se requiere para todos los scripts, indizados por script.</span><span class="sxs-lookup"><span data-stu-id="0caea-127">[**ScriptGetProperties**](/windows/desktop/api/Usp10/nf-usp10-scriptgetproperties) provides information on the special processing required for all the scripts, indexed by script.</span></span> <span data-ttu-id="0caea-128">Por ejemplo, incluye el lenguaje principal asociado con el script, datos que indican si el script es numérico y datos que indican si el script es un script complejo.</span><span class="sxs-lookup"><span data-stu-id="0caea-128">For example, it includes the primary language associated with the script, data indicating if the script is numeric, and data indicating if the script is a complex script.</span></span>

<span data-ttu-id="0caea-129">[**ScriptGetGlyphABCWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptgetglyphabcwidth) devuelve el [ancho ABC](uniscribe-glossary.md) de un glifo determinado, que puede ser útil para dibujar gráficos de glifos.</span><span class="sxs-lookup"><span data-stu-id="0caea-129">[**ScriptGetGlyphABCWidth**](/windows/desktop/api/Usp10/nf-usp10-scriptgetglyphabcwidth) returns the [ABC width](uniscribe-glossary.md) of a given glyph, which might be useful for drawing glyph charts.</span></span> <span data-ttu-id="0caea-130">Sin embargo, no debe usarse para el formato de texto de script complejo normal.</span><span class="sxs-lookup"><span data-stu-id="0caea-130">However, it should not be used for normal complex script text formatting.</span></span>

## <a name="related-topics"></a><span data-ttu-id="0caea-131">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="0caea-131">Related Topics</span></span>

[<span data-ttu-id="0caea-132">Usar Uniscribe</span><span class="sxs-lookup"><span data-stu-id="0caea-132">Using Uniscribe</span></span>](using-uniscribe.md)


 

 
