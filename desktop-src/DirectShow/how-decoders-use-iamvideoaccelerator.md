---
description: Cómo usan los descodificadores IAMVideoAccelerator
ms.assetid: 0bc6b65b-4502-4c6f-a0f2-82a2bd444d1d
title: Cómo usan los descodificadores IAMVideoAccelerator
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 436768b3561a999f6708ef4f6438b816e0ad303b
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "103997639"
---
# <a name="how-decoders-use-iamvideoaccelerator"></a><span data-ttu-id="3fd2d-103">Cómo usan los descodificadores IAMVideoAccelerator</span><span class="sxs-lookup"><span data-stu-id="3fd2d-103">How Decoders Use IAMVideoAccelerator</span></span>

<span data-ttu-id="3fd2d-104">La interfaz [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) habilita las operaciones de aceleración de vídeo genéricas, incluida la aceleración de vídeo de DirectX (va).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-104">The [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) interface enables generic video acceleration operations, including DirectX Video Acceleration (VA).</span></span> <span data-ttu-id="3fd2d-105">Para la aceleración que no es de DirectX, el controlador de vídeo y descodificador deben adherirse a un protocolo común.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-105">For non-DirectX VA acceleration, the decoder and video driver must both adhere to a common protocol.</span></span>

<span data-ttu-id="3fd2d-106">En esta sección se describe el orden general de las operaciones que debe seguir cualquier descodificador al usar esta interfaz.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-106">This section describes the general order of operations that any decoder should follow when using this interface.</span></span> <span data-ttu-id="3fd2d-107">Puede encontrar más información específica sobre los descodificadores basados en de DirectX VA en [asignación de aceleración de vídeo de DirectX a IAMVideoAccelerator](mapping-directx-video-acceleration-to-iamvideoaccelerator.md).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-107">Further information specific to DirectX VA-based decoders can be found in [Mapping DirectX Video Acceleration to IAMVideoAccelerator](mapping-directx-video-acceleration-to-iamvideoaccelerator.md).</span></span>

> [!Note]  
> <span data-ttu-id="3fd2d-108">Esta interfaz está disponible en Windows 2000 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-108">This interface is available in Windows 2000 and later.</span></span>

 

<span data-ttu-id="3fd2d-109">La interfaz [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) se expone en el PIN de entrada del [mezclador de superposición](overlay-mixer-filter.md) o el procesador de mezcla de vídeo (VMR).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-109">The [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) interface is exposed on the input pin of the [Overlay Mixer](overlay-mixer-filter.md) or Video Mixing Renderer (VMR).</span></span> <span data-ttu-id="3fd2d-110">La interfaz [**IAMVideoAcceleratorNotify**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoacceleratornotify) se expone en el PIN de salida del descodificador.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-110">The [**IAMVideoAcceleratorNotify**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoacceleratornotify) interface is exposed on the decoder's output pin.</span></span> <span data-ttu-id="3fd2d-111">La secuencia de eventos para la conexión de los PIN del filtro es la siguiente:</span><span class="sxs-lookup"><span data-stu-id="3fd2d-111">The sequence of events for connecting the filter pins is as follows:</span></span>

1.  <span data-ttu-id="3fd2d-112">El administrador de gráficos de filtro llama a [**IPin:: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) en el PIN de salida del filtro del descodificador.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-112">The Filter Graph Manager calls [**IPin::Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) on the decoder filter's output pin.</span></span> <span data-ttu-id="3fd2d-113">Un [**\_ \_ tipo de medio am**](/windows/win32/api/strmif/ns-strmif-am_media_type) es un parámetro opcional.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-113">An [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) is an optional parameter.</span></span>
    -   <span data-ttu-id="3fd2d-114">[**AM \_ El \_ tipo de medio**](/windows/win32/api/strmif/ns-strmif-am_media_type) es una estructura de datos que describe un tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-114">[**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) is a data structure that describes a type of media.</span></span> <span data-ttu-id="3fd2d-115">Contiene un GUID de majortype (que, en nuestro caso, debe ser un vídeo de MEDIATYPE \_ ), un GUID de subtipo (que en nuestro caso debe ser un GUID de acelerador de vídeo) y otras muchas cosas.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-115">It contains a majortype GUID (which in our case should be MEDIATYPE\_Video), a subtype GUID (which in our case should be a video accelerator GUID), and a variety of other things.</span></span> <span data-ttu-id="3fd2d-116">Una de estas cosas es un GUID de tipo de formato que contiene información sobre los medios, incluido en nuestro caso, el ancho y el alto de una imagen de vídeo sin comprimir, probablemente en una estructura [**MPEG1VIDEOINFO**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-mpeg1videoinfo), [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader), [**MPEG2VIDEOINFO**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-mpeg2videoinfo)o [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) .</span><span class="sxs-lookup"><span data-stu-id="3fd2d-116">One of those things is a format type GUID containing information about the media, including in our case the width and height of an uncompressed video picture, most likely in an [**MPEG1VIDEOINFO**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-mpeg1videoinfo), [**VIDEOINFOHEADER**](/previous-versions/windows/desktop/api/amvideo/ns-amvideo-videoinfoheader), [**MPEG2VIDEOINFO**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-mpeg2videoinfo), or [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) structure.</span></span>
    -   <span data-ttu-id="3fd2d-117">La estructura de [**\_ \_ tipo de medio am**](/windows/win32/api/strmif/ns-strmif-am_media_type) , si está presente, indica al descodificador que opere con el tipo de medio especificado, que puede ser "totalmente especificado" o "especificado parcialmente".</span><span class="sxs-lookup"><span data-stu-id="3fd2d-117">The [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) structure, if present, tells the decoder to operate using the specified media type, which may be "fully specified" or "partially specified".</span></span> <span data-ttu-id="3fd2d-118">Si se especifica "Full", el descodificador simplemente intentaría trabajar con ese tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-118">If "fully specified," the decoder would normally simply attempt to operate with that media type.</span></span> <span data-ttu-id="3fd2d-119">Si "se ha especificado parcialmente", intentará encontrar un modo de operación compatible "totalmente especificado" que pueda usar para conectarse de forma coherente con el tipo de medio "especificado parcialmente".</span><span class="sxs-lookup"><span data-stu-id="3fd2d-119">If "partially specified," it will attempt to find a "fully-specified" compatible mode of operation that it can use to connect in a manner consistent with the "partially-specified" media type.</span></span>
    -   <span data-ttu-id="3fd2d-120">La manera habitual de intentar encontrar un tipo de medio "totalmente especificado" para usar en una conexión es simplemente ejecutar una lista de todos los tipos de medios "totalmente especificados" que admite el PIN de salida, que es compatible con el tipo de medio "especificado parcialmente" e intenta conectarse a cada uno de ellos hasta que se realiza correctamente.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-120">The ordinary manner for attempting to find a "fully-specified" media type to use for a connection is to simply run through a list of every "fully-specified" media type that the output pin supports which is compatible with the "partially-specified" media type and attempt to connect with each of them until successful.</span></span> <span data-ttu-id="3fd2d-121">Normalmente, el proceso sería similar si no \_ \_ se incluye ningún tipo de medio am en la llamada a [**IPin:: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) , pero con el PIN de salida que necesita comprobar todos sus tipos de medios.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-121">The process would normally be similar if no AM\_MEDIA\_TYPE is contained in the [**IPin::Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) call, but with the output pin needing to check all of its media types.</span></span>
2.  <span data-ttu-id="3fd2d-122">Si el descodificador desea comprobar si un [**\_ \_ tipo de medio am**](/windows/win32/api/strmif/ns-strmif-am_media_type) específico (incluido un GUID de acelerador de vídeo) es compatible con el PIN de entrada de nivel inferior, puede llamar a [**IPin:: QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) (con el GUID de acelerador de vídeo como el subtipo del **\_ \_ tipo de medio am**) o simplemente intentar conectarse a ese pin tal y como se describe en el elemento 5.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-122">If the decoder wants to check whether a specific [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) (including a video accelerator GUID) is supported by the downstream input pin, it can call that pin's [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) (with the video accelerator GUID as the subtype of the **AM\_MEDIA\_TYPE**) or it can simply attempt to connect to that pin as described in item 5 below.</span></span>
3.  <span data-ttu-id="3fd2d-123">Si el descodificador no sabe qué GUID de acelerador de vídeo admite el PIN de entrada de nivel inferior y no desea proponer solo un GUID de acelerador de vídeo candidato determinado llamando a [**IPin:: QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept)del PIN de entrada de nivel inferior, el descodificador puede llamar a [**IAMVideoAccelerator:: GetVideoAcceleratorGUIDs**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getvideoacceleratorguids) para obtener una lista de los GUID del acelerador de vídeo que admite el PIN.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-123">If the decoder does not know which video accelerator GUIDs the downstream input pin supports and does not wish to propose just some particular candidate video accelerator GUID by calling the downstream input pin's [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept), the decoder can call [**IAMVideoAccelerator::GetVideoAcceleratorGUIDs**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getvideoacceleratorguids) to get a list of the video accelerator GUIDs the pin supports.</span></span>
4.  <span data-ttu-id="3fd2d-124">Para algunos GUID de acelerador de vídeo determinados, el descodificador puede llamar a [**IAMVideoAccelerator:: GetUncompFormatsSupported**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getuncompformatssupported) del PIN de entrada de nivel inferior para obtener una lista de los formatos de píxeles de **DDPIXELFORMAT** que se pueden usar para representar un GUID de acelerador de vídeo específico.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-124">For some particular video accelerator GUIDs, the decoder can call the downstream input pin's [**IAMVideoAccelerator::GetUncompFormatsSupported**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getuncompformatssupported) to get a list of the **DDPIXELFORMAT** pixel formats that can be used to render a specific video accelerator GUID.</span></span> <span data-ttu-id="3fd2d-125">La lista devuelta debe considerarse en orden de preferencia decreciente (es decir, con el formato más preferido indicado en primer lugar).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-125">The list returned should be considered to be in decreasing preference order (that is, with the most preferred format listed first).</span></span>
5.  <span data-ttu-id="3fd2d-126">El descodificador llama a [**IPin:: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection)del PIN de entrada de nivel inferior, pasándole un [**\_ \_ tipo de medio am**](/windows/win32/api/strmif/ns-strmif-am_media_type) con el GUID de acelerador de vídeo adecuado como el subtipo del tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-126">The decoder calls the downstream input pin's [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection), passing it an [**AM\_MEDIA\_TYPE**](/windows/win32/api/strmif/ns-strmif-am_media_type) with the proper video accelerator GUID as the subtype of the media type.</span></span> <span data-ttu-id="3fd2d-127">Esto configura la conexión para la operación, incluida la creación de las superficies de salida sin comprimir (que se asignan con el ancho y el alto que se encuentran en el **\_ \_ tipo de medio am** y el número de superficies que se asignan en una llamada que se describe a continuación, y cualquier otra información que el acelerador de vídeo tenga disponible y desee usar para ese propósito, como el propio GUID de</span><span class="sxs-lookup"><span data-stu-id="3fd2d-127">This sets up the connection for operation, including the creation of the uncompressed output surfaces (which are allocated using the width and height found in **AM\_MEDIA\_TYPE**, and the number of surfaces to allocate found by a call described below, and whatever other information the video accelerator has available and wishes to use for that purpose—such as the video accelerator GUID itself).</span></span> <span data-ttu-id="3fd2d-128">Si el PIN de entrada de nivel inferior rechaza el GUID de acelerador de vídeo o algún otro aspecto de la conexión, puede producirse un error en **IPin:: ReceiveConnection** .</span><span class="sxs-lookup"><span data-stu-id="3fd2d-128">If the downstream input pin rejects the video accelerator GUID or some other aspect of the connection, this can cause the **IPin::ReceiveConnection** to fail.</span></span> <span data-ttu-id="3fd2d-129">Si **IPin:: ReceiveConnection** produce un error, esto se indica en un **HRESULT** devuelto y el descodificador puede intentar realizar la llamada de nuevo, por ejemplo, con un nuevo GUID de acelerador de vídeo en la estructura de **\_ \_ tipo de medio am** .</span><span class="sxs-lookup"><span data-stu-id="3fd2d-129">If **IPin::ReceiveConnection** fails, this is indicated in a returned **HRESULT**, and the decoder can try to make the call again, for example, with a new video accelerator GUID in the **AM\_MEDIA\_TYPE** structure.</span></span>
    -   [!Note]  
        > <span data-ttu-id="3fd2d-130">Esta es otra manera (y la forma más definitiva) para que el descodificador determine qué es compatible con el PIN de entrada de nivel inferior, simplemente llamando a [**IPin:: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) e intentando conectarse y, a continuación, comprobando si el intento de conexión se realizó correctamente.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-130">This is another way (and the most definitive way) for the decoder to determine what is supported by the downstream input pin—simply calling [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) and trying to connect, and then checking whether the connection attempt was successful.</span></span>

         

    -   <span data-ttu-id="3fd2d-131">Durante el [**IPin:: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection), el representador llama a [**IAMVideoAcceleratorNotify:: GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo)del descodificador, pasándole el GUID del acelerador de vídeo y una estructura [**AMVAUncompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompbufferinfo) para averiguar el número de superficies sin comprimir que se van a asignar.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-131">During the [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection), the renderer calls the decoder's [**IAMVideoAcceleratorNotify::GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo), passing it the video accelerator GUID and an [**AMVAUncompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompbufferinfo) structure, in order to figure out how many uncompressed surfaces to allocate.</span></span> <span data-ttu-id="3fd2d-132">El descodificador rellena y devuelve la estructura, que contiene el número mínimo y máximo de superficies que se van a asignar del tipo determinado, y una estructura **DDPIXELFORMAT** que describe el formato de píxel de las superficies que se van a asignar.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-132">The decoder fills in and returns the structure, which contains the minimum and maximum number of surfaces to be allocated of the particular type, and a **DDPIXELFORMAT** structure describing the pixel format of the surfaces to be allocated.</span></span>
    -   [!Note]  
        > <span data-ttu-id="3fd2d-133">En realidad, no se pasa nada al descodificador en la llamada a [**IAMVideoAcceleratorNotify:: GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo) que no sea el GUID del acelerador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-133">Nothing is actually passed in to the decoder in the call to [**IAMVideoAcceleratorNotify::GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo) other than the video accelerator GUID.</span></span>

         

6.  <span data-ttu-id="3fd2d-134">El representador llama al [**IAMVideoAcceleratorNotify:: SetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-setuncompsurfacesinfo)del descodificador, pasando al descodificador el número real de superficies sin comprimir que se asignaron.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-134">The renderer calls the decoder's [**IAMVideoAcceleratorNotify::SetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-setuncompsurfacesinfo), passing to the decoder the actual number of uncompressed surfaces that were allocated.</span></span>
7.  <span data-ttu-id="3fd2d-135">El representador llama a [**IAMVideoAcceleratorNotify:: GetCreateVideoAcceleratorData**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getcreatevideoacceleratordata) del descodificador para obtener los datos necesarios para inicializar el acelerador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-135">The renderer calls the decoder's [**IAMVideoAcceleratorNotify::GetCreateVideoAcceleratorData**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getcreatevideoacceleratordata) to get any data needed to initialize the video accelerator.</span></span>
8.  <span data-ttu-id="3fd2d-136">El descodificador llama a [**IAMVideoAccelerator:: GetCompBufferInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getcompbufferinfo), pasándole un GUID de acelerador de vídeo, una estructura [**AMVAUncompDataInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompdatainfo) y el número de tipos de búfer comprimidos, para obtener un conjunto de estructuras de datos [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) , uno correspondiente a cada tipo de búfer de datos comprimidos utilizado por el GUID del acelerador de vídeo.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-136">The decoder calls [**IAMVideoAccelerator::GetCompBufferInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getcompbufferinfo), passing it a video accelerator GUID, an [**AMVAUncompDataInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompdatainfo) structure, and the number of compressed buffer types, to get in return a set of [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) data structures, one corresponding to each type of compressed data buffer used by the video accelerator GUID.</span></span>
    -   <span data-ttu-id="3fd2d-137">La estructura [**AMVAUncompDataInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompdatainfo) contiene el ancho y el alto de los datos sin comprimir descodificados (en píxeles) y el DDPIXELFORMAT de la imagen sin comprimir.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-137">The [**AMVAUncompDataInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvauncompdatainfo) structure contains the width and height of the decoded uncompressed data (in pixels) and the DDPIXELFORMAT of the uncompressed picture.</span></span>
    -   <span data-ttu-id="3fd2d-138">Las estructuras de datos [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) devueltas contienen:</span><span class="sxs-lookup"><span data-stu-id="3fd2d-138">The [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) data structures returned each contain:</span></span>
        -   <span data-ttu-id="3fd2d-139">El número de búferes comprimidos necesarios para el tipo específico.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-139">The number of compressed buffers needed of the specific type.</span></span>
        -   <span data-ttu-id="3fd2d-140">Ancho y alto de la superficie que se va a crear (campos que pueden tener o no un significado real).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-140">The width and height of the surface to create (fields which may or may not have any actual meaning).</span></span>
            > [!Note]  
            > <span data-ttu-id="3fd2d-141">La operación de asignación de superficie de DirectDraw para los búferes comprimidos no proporciona actualmente el ancho o el alto de estas superficies para ser mayor o igual que 2 ^ 15, aunque es posible que la llamada de asignación de superficie no falle de forma abierta si se infringe este límite.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-141">The DirectDraw surface allocation operation for the compressed buffers does not currently provide for the width or height of these surfaces to be greater than or equal to 2^15, although the surface allocation call may not overtly fail if this limit is violated.</span></span> <span data-ttu-id="3fd2d-142">Por lo tanto, el controlador podría estructurar sus solicitudes de memoria de búfer comprimida para evitar los tamaños extremos.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-142">Therefore, the driver could structure its requests for compressed buffer memory to avoid such extreme sizes.</span></span> <span data-ttu-id="3fd2d-143">Por ejemplo, en lugar de solicitar un búfer con width = "1" y height = "65536", el controlador debe solicitar un búfer de width = "1024" y height = "64".</span><span class="sxs-lookup"><span data-stu-id="3fd2d-143">For example, rather than requesting a buffer with width="1" and height="65536", the driver should request a buffer of width="1024" and height="64".</span></span>

             

        -   <span data-ttu-id="3fd2d-144">Número total de bytes que va a usar la superficie.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-144">The total number of bytes to be used by the surface.</span></span>
        -   <span data-ttu-id="3fd2d-145">Estructura de tipo **DDSCAPS2** que define un objeto DirectDrawSurface, que describe las funciones para crear superficies para almacenar datos comprimidos.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-145">A structure of type **DDSCAPS2** defining a DirectDrawSurface object, describing the capabilities to create surfaces to store compressed data.</span></span>
        -   <span data-ttu-id="3fd2d-146">Un DDPIXELFORMAT, que describe el formato de píxel que se usa para crear superficies para almacenar datos comprimidos (un campo que puede tener o no un significado real).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-146">A DDPIXELFORMAT, describing the pixel format used to create surfaces to store compressed data (a field which may or may not have any actual meaning).</span></span>

> [!Note]  
> <span data-ttu-id="3fd2d-147">Las llamadas del representador a algunos de los métodos de interfaz [**IAMVideoAcceleratorNotify**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoacceleratornotify) del descodificador pueden (y normalmente) aparecer dentro de la llamada del descodificador a [**IPin:: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection)del representador.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-147">The renderer's calls to some of the decoder's [**IAMVideoAcceleratorNotify**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoacceleratornotify) interface methods may (and normally would) occur inside of the decoder's call to the renderer's [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection).</span></span> <span data-ttu-id="3fd2d-148">En concreto, esto se aplica a lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="3fd2d-148">Specifically, this applies to the following:</span></span>
>
> -   <span data-ttu-id="3fd2d-149">[**IAMVideoAcceleratorNotify:: GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo),</span><span class="sxs-lookup"><span data-stu-id="3fd2d-149">[**IAMVideoAcceleratorNotify::GetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getuncompsurfacesinfo),</span></span>
> -   <span data-ttu-id="3fd2d-150">[**IAMVideoAcceleratorNotify:: SetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-setuncompsurfacesinfo)y</span><span class="sxs-lookup"><span data-stu-id="3fd2d-150">[**IAMVideoAcceleratorNotify::SetUncompSurfacesInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-setuncompsurfacesinfo), and</span></span>
> -   <span data-ttu-id="3fd2d-151">[**IAMVideoAcceleratorNotify:: GetCreateVideoAcceleratorData**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getcreatevideoacceleratordata).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-151">[**IAMVideoAcceleratorNotify::GetCreateVideoAcceleratorData**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoacceleratornotify-getcreatevideoacceleratordata).</span></span>

 

> [!Note]  
> <span data-ttu-id="3fd2d-152">Para admitir los cambios de formato dinámico, el descodificador también puede llamar a [**IPin:: ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) y otros métodos por encima mientras los filtros están conectados y en ejecución.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-152">To support dynamic format changes, the decoder may also call [**IPin::ReceiveConnection**](/windows/desktop/api/Strmif/nf-strmif-ipin-receiveconnection) and other methods per above while the filters are connected and running.</span></span> <span data-ttu-id="3fd2d-153">Esta funcionalidad se proporciona para admitir los cambios de formato dinámico (aunque no se encuentran en H. 263, anexo P, es decir, ya que todos los conjuntos de datos se inician de nuevo desde cero y, por tanto, se pierde cualquier información de imagen de referencia).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-153">This capability is provided in order to support dynamic format changes (although not in the H.263, Annex P, sense - as all data sets are started up again from scratch and any reference picture information is therefore lost).</span></span>

 

<span data-ttu-id="3fd2d-154">A continuación se describe el uso de [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) durante la operación después de la inicialización:</span><span class="sxs-lookup"><span data-stu-id="3fd2d-154">The following is a description of [**IAMVideoAccelerator**](/previous-versions/windows/desktop/api/videoacc/nn-videoacc-iamvideoaccelerator) use during operation after initialization:</span></span>

1.  <span data-ttu-id="3fd2d-155">Para cada superficie sin comprimir, el descodificador llama a [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) para comenzar el procesamiento y crear la imagen de salida.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-155">For each uncompressed surface, the decoder calls [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) to begin the processing to create the output picture.</span></span> <span data-ttu-id="3fd2d-156">Cuando lo hace, el descodificador envía una estructura [**AMVABeginFrameInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabeginframeinfo) .</span><span class="sxs-lookup"><span data-stu-id="3fd2d-156">When it does this, the decoder sends an [**AMVABeginFrameInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabeginframeinfo) structure.</span></span>
    -   <span data-ttu-id="3fd2d-157">La estructura [**AMVABeginFrameInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabeginframeinfo) contiene un índice para un búfer de destino, un puntero a algunos datos que se van a enviar de nivel inferior y un puntero a un lugar donde el acelerador puede colocar algunos datos para que el descodificador pueda leerlos.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-157">The [**AMVABeginFrameInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabeginframeinfo) structure contains an index for a destination buffer, a pointer to some data to send downstream, and a pointer to a place where the accelerator can put some data for the decoder to read.</span></span>
    -   <span data-ttu-id="3fd2d-158">Nota 1: el Acelerador realmente no recibe el índice de búfer de destino, ya que lo traduce el representador antes de pasar al nivel inferior.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-158">NOTE 1: The accelerator does not actually receive the destination buffer index, as it is translated by the renderer before going downstream.</span></span>
    -   <span data-ttu-id="3fd2d-159">Nota 2: [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) se puede llamar más de una vez entre las llamadas a [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-159">NOTE 2: [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) can be called more than once between calls to [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe).</span></span>
    -   <span data-ttu-id="3fd2d-160">Nota 3: no hay ninguna suposición dentro de la operación de interfaz que sea necesario llamar a [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) y [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) para el procesamiento de cada imagen individual en el fragmentada.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-160">NOTE 3: There is no assumption within the interface operation that [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) and [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) need to be called for the processing of every individual picture in the bitstream.</span></span>

        <span data-ttu-id="3fd2d-161">Lo que [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) hace, en lo que se refiere a la interfaz, es crear una asociación dentro del representador entre un índice y una superficie sin comprimir.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-161">What [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) does, as far as the interface is concerned, is create an association within the renderer between an index and an uncompressed surface.</span></span> <span data-ttu-id="3fd2d-162">También proporciona un medio para llamar a una función específica en un controlador de dispositivo (compatible con un medio de pasar datos arbitrarios entre el descodificador y el controlador de dispositivo).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-162">It also provides a means to call a specific function in a device driver (with support of a means of passing arbitrary data back and forth between the decoder and the device driver).</span></span>

        <span data-ttu-id="3fd2d-163">(Sin embargo, en la operación de DirectX VA hay un requisito que se describe a continuación que se debe llamar a [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) y [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) para el procesamiento de cada imagen individual en el fragmentada).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-163">(However, in DirectX VA operation there is a requirement described below that [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) and [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) do need to be called for the processing of every individual picture in the bitstream.)</span></span>

2.  <span data-ttu-id="3fd2d-164">Para enviar datos sin comprimir al acelerador, el descodificador llama a:</span><span class="sxs-lookup"><span data-stu-id="3fd2d-164">For sending uncompressed data to the accelerator, the decoder calls:</span></span>
    -   <span data-ttu-id="3fd2d-165">[**IAMVideoAccelerator:: QueryRenderStatus**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-queryrenderstatus) para determinar si un búfer es seguro para leer o escribir en él.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-165">[**IAMVideoAccelerator::QueryRenderStatus**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-queryrenderstatus) to determine whether a buffer is safe for reading from or writing to.</span></span>
    -   <span data-ttu-id="3fd2d-166">[**IAMVideoAccelerator:: getBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getbuffer) para bloquear y obtener acceso a un búfer especificado (si no lo ha llamado previamente para obtener ese acceso).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-166">[**IAMVideoAccelerator::GetBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getbuffer) to lock and obtain access to a specified buffer (if it has not previously called this to get that access).</span></span> <span data-ttu-id="3fd2d-167">**GetBuffer** también se puede usar para obtener una copia del contenido de la última imagen de salida sin comprimir para la que se llamó a [**IAMVideoAccelerator:: BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) , ya que no se ha llamado a [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) para ese índice de búfer de destino.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-167">**GetBuffer** can also be used to get a copy of the contents of the last uncompressed output picture for which [**IAMVideoAccelerator::BeginFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-beginframe) was called, providing [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) has not been called for that destination buffer index.</span></span> <span data-ttu-id="3fd2d-168">Si DDI devuelve un estado de representación de DDERR \_ WASSTILLDRAWING para el búfer solicitado, se operará un bucle de suspensión dentro de **getBuffer** hasta que se desactive esta condición.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-168">If the DDI returns a render status of DDERR\_WASSTILLDRAWING for the requested buffer, a sleep loop will be operated within **GetBuffer** until this condition is cleared.</span></span> <span data-ttu-id="3fd2d-169">Para llamar a **getBuffer**, el descodificador necesitará cierta información de una estructura de datos [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) que se obtiene llamando a [**IAMVideoAccelerator:: GetCompBufferInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getcompbufferinfo).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-169">In order to call **GetBuffer**, the decoder will need some information from an [**AMVACompBufferInfo**](/previous-versions/windows/desktop/api/amva/ns-amva-amvacompbufferinfo) data structure which is obtained by calling [**IAMVideoAccelerator::GetCompBufferInfo**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getcompbufferinfo).</span></span>
    -   <span data-ttu-id="3fd2d-170">[**IAMVideoAccelerator:: Execute**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-execute) para indicar que se deben procesar los datos de un conjunto de búferes comprimidos, tal y como se indica en una matriz de estructuras de datos [**AMVABUFFERINFO**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabufferinfo) .</span><span class="sxs-lookup"><span data-stu-id="3fd2d-170">[**IAMVideoAccelerator::Execute**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-execute) to indicate that the data in a set of compressed buffers as indicated in an array of [**AMVABUFFERINFO**](/previous-versions/windows/desktop/api/amva/ns-amva-amvabufferinfo) data structures should be processed.</span></span> <span data-ttu-id="3fd2d-171">Un dwFunction de código de función se pasa al controlador en esta llamada.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-171">A function code dwFunction is passed to the driver in this call.</span></span> <span data-ttu-id="3fd2d-172">También se pasa un puntero lpPrivateInputData a algunos datos para enviar el nivel inferior, y se pasa un puntero lpPrivateOutputData a un lugar donde el proceso de nivel inferior puede poner algunos datos para que el descodificador pueda leerlos.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-172">A lpPrivateInputData pointer is also passed to some data to send downstream, and a lpPrivateOutputData pointer is passed to a place where the downstream process can put some data for the decoder to read.</span></span>
    -   <span data-ttu-id="3fd2d-173">[**IAMVideoAccelerator:: ReleaseBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-releasebuffer) para indicar que el descodificador ha completado el uso de un búfer especificado durante el tiempo y ya no necesita acceso bloqueado al búfer.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-173">[**IAMVideoAccelerator::ReleaseBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-releasebuffer) to indicate that the decoder has completed use of a specified buffer for the moment and no longer needs locked access to the buffer.</span></span> <span data-ttu-id="3fd2d-174">(Si el descodificador desea seguir usando el búfer, simplemente no puede llamar a **IAMVideoAccelerator:: ReleaseBuffer** por el momento, lo que evita la necesidad de llamar a [**IAMVideoAccelerator:: getBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getbuffer) hasta que realmente realmente intenta no usar el búfer). El descodificador no debe escribir en el búfer después de llamar a [**Execute**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-execute) hasta que [**QueryRenderStatus**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-queryrenderstatus) indique que el búfer es seguro para escritura.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-174">(If the decoder wishes to continue to use the buffer, it can simply not call **IAMVideoAccelerator::ReleaseBuffer** for the moment, thus avoiding the need to call [**IAMVideoAccelerator::GetBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-getbuffer) until it really intends to not use the buffer anymore.) The decoder should not write into the buffer after [**Execute**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-execute) is called until [**QueryRenderStatus**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-queryrenderstatus) indicates that the buffer is safe for writing.</span></span>
3.  <span data-ttu-id="3fd2d-175">Para completar el procesamiento de salida para un búfer de destino, el descodificador llama a [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe).</span><span class="sxs-lookup"><span data-stu-id="3fd2d-175">To complete output processing for a destination buffer, the decoder calls [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe).</span></span> <span data-ttu-id="3fd2d-176">Puede pasar algunos datos arbitrarios de nivel inferior con esta llamada y, esencialmente, todo esto sucede como resultado de esta llamada.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-176">It can pass some arbitrary data downstream with this call, and that's essentially all that happens as a result of this call.</span></span> <span data-ttu-id="3fd2d-177">No envía un índice de búfer de destino en esta llamada, por lo que no puede indicar al acelerador exactamente qué búfer de destino se ha completado a menos que esta indicación esté contenida en los datos arbitrarios que se pasan.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-177">It doesn't send a destination buffer index in this call, so it can't indicate to the accelerator precisely what destination buffer is completed unless this indication is contained in the arbitrary data that is passed.</span></span>
4.  <span data-ttu-id="3fd2d-178">Para mostrar un fotograma, el descodificador llama a [**IAMVideoAccelerator::D isplayframe**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-displayframe) con el índice del marco que se va a mostrar y una estructura [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) que contiene las marcas de tiempo de inicio y detención y las marcas pertinentes, como **dwTypeSpecificFlags** en la estructura de [**\_ \_ propiedades AM SAMPLE2**](/windows/win32/api/strmif/ns-strmif-am_sample2_properties) , y **dwInterlaceFlags** en la estructura [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) .</span><span class="sxs-lookup"><span data-stu-id="3fd2d-178">To display a frame, the decoder calls [**IAMVideoAccelerator::DisplayFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-displayframe) with the index of the frame to display and a [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) structure containing start and stop time stamps and relevant flags such as **dwTypeSpecificFlags** in the [**AM\_SAMPLE2\_PROPERTIES**](/windows/win32/api/strmif/ns-strmif-am_sample2_properties) structure, and **dwInterlaceFlags** in the [**VIDEOINFOHEADER2**](/previous-versions/windows/desktop/api/dvdmedia/ns-dvdmedia-videoinfoheader2) structure.</span></span> <span data-ttu-id="3fd2d-179">El descodificador debe comprobar que todas las operaciones de descompresión que afectan al contenido del marco se han completado antes de llamar a **DisplayFrame**.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-179">The decoder must verify that all decompression operations that affect the content of the frame have completed before calling **DisplayFrame**.</span></span>
5.  <span data-ttu-id="3fd2d-180">Por último, el descodificador debe, tras la finalización de todo el procesamiento, indicar la finalización de todos los fotogramas de salida que se han iniciado, llamando a [**IAMVideoAccelerator:: EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) y libera todos sus búferes bloqueados llamando a [**IAMVideoAccelerator:: ReleaseBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-releasebuffer) para cada búfer sin liberar.</span><span class="sxs-lookup"><span data-stu-id="3fd2d-180">Finally, the decoder should, upon completion of all processing, indicate completion of all remaining begun output frames by calling [**IAMVideoAccelerator::EndFrame**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-endframe) and release all of its locked buffers by calling [**IAMVideoAccelerator::ReleaseBuffer**](/previous-versions/windows/desktop/api/videoacc/nf-videoacc-iamvideoaccelerator-releasebuffer) for each unreleased buffer.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3fd2d-181">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="3fd2d-181">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3fd2d-182">Interfaces y especificaciones del descodificador</span><span class="sxs-lookup"><span data-stu-id="3fd2d-182">Decoder Interfaces and Specifications</span></span>](decoder-interfaces-and-specifications.md)
</dt> </dl>

 

 



