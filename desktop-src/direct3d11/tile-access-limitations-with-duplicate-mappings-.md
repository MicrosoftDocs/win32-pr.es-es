---
title: Limitaciones de acceso de iconos con asignaciones duplicadas
description: En esta sección se describen las limitaciones de acceso a los mosaicos con asignaciones duplicadas.
ms.assetid: 7A498E0D-9151-4A89-B7C3-C4F476457D17
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0909b0d10e286e5f774f6893b692abdeb19d3ef7
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "104075244"
---
# <a name="tile-access-limitations-with-duplicate-mappings"></a><span data-ttu-id="c4924-103">Limitaciones de acceso de iconos con asignaciones duplicadas</span><span class="sxs-lookup"><span data-stu-id="c4924-103">Tile access limitations with duplicate mappings</span></span>

<span data-ttu-id="c4924-104">En esta sección se describen las limitaciones de acceso a los mosaicos con asignaciones duplicadas.</span><span class="sxs-lookup"><span data-stu-id="c4924-104">This section describes tile access limitations with duplicate mappings.</span></span>

## <a name="copying-tiled-resources-with-overlapping-source-and-destination"></a><span data-ttu-id="c4924-105">Copiar recursos en mosaico con origen y destino superpuestos</span><span class="sxs-lookup"><span data-stu-id="c4924-105">Copying tiled resources with overlapping source and destination</span></span>

<span data-ttu-id="c4924-106">Si los mosaicos del área de origen y de destino de una operación de copia \* tienen asignaciones duplicadas en el área de copia que se habrían superpuesto aunque ambos recursos no estuvieran en mosaico y la operación de copia \* admita copias que se superpongan, la operación de copia \* se comportará correctamente (como si el origen se copiara en una ubicación temporal antes de pasar al destino)</span><span class="sxs-lookup"><span data-stu-id="c4924-106">If tiles in the source and destination area of a Copy\* operation have duplicated mappings in the copy area that would have overlapped even if both resources were not tiled resources and the Copy\* operation supports overlapping copies, the Copy\* operation will behave fine (as if the source is copied to a temporary location before going to the destination).</span></span> <span data-ttu-id="c4924-107">Pero si la superposición no es obvia (como los recursos de origen y de destino son diferentes, pero las asignaciones o asignaciones de recursos compartidos se duplican en una superficie determinada), los resultados de la operación de copia en los mosaicos que se comparten no están definidos.</span><span class="sxs-lookup"><span data-stu-id="c4924-107">But if the overlap is not obvious (like the source and destination resources are different but share mappings or mappings are duplicated over a given surface), results of the copy operation on the tiles that are shared are undefined.</span></span>

## <a name="copying-to-tiled-resource-with-duplicated-tiles-in-destination-area"></a><span data-ttu-id="c4924-108">Copiar a un recurso en mosaico con iconos duplicados en el área de destino</span><span class="sxs-lookup"><span data-stu-id="c4924-108">Copying to tiled resource with duplicated tiles in destination area</span></span>

<span data-ttu-id="c4924-109">La copia a un recurso en mosaico con mosaicos duplicados en el área de destino produce resultados sin definir en estos mosaicos a menos que los datos sean idénticos; los distintos mosaicos pueden escribir los mosaicos en pedidos diferentes.</span><span class="sxs-lookup"><span data-stu-id="c4924-109">Copying to a tiled resource with duplicated tiles in the destination area produces undefined results in these tiles unless the data itself is identical; different tiles might write the tiles in different orders.</span></span>

## <a name="uav-accesses-to-duplicate-tiles-mappings"></a><span data-ttu-id="c4924-110">UAV accede a asignaciones de mosaicos duplicadas</span><span class="sxs-lookup"><span data-stu-id="c4924-110">UAV accesses to duplicate tiles mappings</span></span>

<span data-ttu-id="c4924-111">Supongamos que una vista de acceso desordenado (UAV) de un recurso en mosaico tiene asignaciones de mosaicos duplicadas en su área o con otros recursos enlazados a la canalización.</span><span class="sxs-lookup"><span data-stu-id="c4924-111">Suppose an unordered access view (UAV) on a tiled resource has duplicate tile mappings in its area or with other resources bound to the pipeline.</span></span> <span data-ttu-id="c4924-112">El orden de los accesos a estos mosaicos duplicados es indefinido si lo realizan varios subprocesos, de la misma forma que cualquier ordenación del acceso a la memoria de UAVs en general no está ordenada.</span><span class="sxs-lookup"><span data-stu-id="c4924-112">Ordering of accesses to these duplicated tiles is undefined if performed by different threads, just as any ordering of memory access to UAVs in general is unordered.</span></span>

## <a name="rendering-after-tile-mapping-changes-or-content-updates-from-outside-mappings"></a><span data-ttu-id="c4924-113">Representación tras cambios de asignación de iconos o actualizaciones de contenido desde asignaciones externas</span><span class="sxs-lookup"><span data-stu-id="c4924-113">Rendering after tile mapping changes or content updates from outside mappings</span></span>

<span data-ttu-id="c4924-114">Si las asignaciones de iconos de un recurso en mosaico han cambiado o el contenido de los mosaicos de grupos en mosaico asignados ha cambiado a través de otras asignaciones de recursos en mosaico, y el recurso en mosaico se representará a través de la vista de destino de presentación o de la vista de galería de símbolos de profundidad, la aplicación debe borrar (con la función Fixed API Clear) o copiar por completo mediante Copy \* /Update \* API los mosaicos que han cambiado en el área que se representa (asignado o no).</span><span class="sxs-lookup"><span data-stu-id="c4924-114">If a tiled resource's tile mappings have changed or content in mapped tiled pool tiles have changed via another tiled resource's mappings, and the tiled resource is going to be rendered via render target view or depth stencil view, the application must Clear (using the fixed function Clear APIs) or fully copy over using Copy\*/Update\* APIs the tiles that have changed within the area being rendered (mapped or not).</span></span> <span data-ttu-id="c4924-115">Si un error de una aplicación se borra o se copia en estos casos, las estructuras de optimización de hardware de la vista de destino de presentación o la vista de galería de símbolos de profundidad indicadas serán obsoletas y darán lugar a resultados de representación de elementos no utilizados en hardware e incoherencias en el hardware diferente.</span><span class="sxs-lookup"><span data-stu-id="c4924-115">Failure of an application to clear or copy in these cases results in hardware optimization structures for the given render target view or depth stencil view being stale and will result in garbage rendering results on some hardware and inconsistency across different hardware.</span></span> <span data-ttu-id="c4924-116">Estas estructuras de datos de optimización ocultas que usa el hardware pueden ser locales para asignaciones individuales y no visibles para otras asignaciones a la misma memoria.</span><span class="sxs-lookup"><span data-stu-id="c4924-116">These hidden optimization data structures used by hardware might be local to individual mappings and not visible to other mappings to the same memory.</span></span>

<span data-ttu-id="c4924-117">La operación [**ID3D11DeviceContext1:: Clearview**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-clearview) permite borrar vistas de destino de representación con rectángulos.</span><span class="sxs-lookup"><span data-stu-id="c4924-117">The [**ID3D11DeviceContext1::ClearView**](/windows/desktop/api/D3D11_1/nf-d3d11_1-id3d11devicecontext1-clearview) operation supports clearing render target views with rectangles.</span></span> <span data-ttu-id="c4924-118">En el caso de hardware que admita recursos en mosaico, **Clearview** también debe admitir el borrado de las vistas de estarcido de profundidad con rectángulos, solo con la profundidad de las superficies (sin estarcido).</span><span class="sxs-lookup"><span data-stu-id="c4924-118">For hardware that supports tiled resources, **ClearView** must also support clearing of depth stencil views with rectangles, for depth only surfaces (without stencil).</span></span> <span data-ttu-id="c4924-119">Esta operación permite a las aplicaciones borrar solo el área necesaria de una superficie.</span><span class="sxs-lookup"><span data-stu-id="c4924-119">This operation allows applications to clear only the necessary area of a surface.</span></span>

<span data-ttu-id="c4924-120">Si una aplicación necesita conservar el contenido de la memoria existente de las áreas de un recurso en mosaico en el que han cambiado las asignaciones, esa aplicación debe solucionar el requisito de borrado.</span><span class="sxs-lookup"><span data-stu-id="c4924-120">If an application needs to preserve existing memory contents of areas in a tiled resource where mappings have changed, that application must work around the clear requirement.</span></span> <span data-ttu-id="c4924-121">La aplicación puede llevar a cabo esta solución alternativa, para lo que debe guardar primero el contenido en el que han cambiado las asignaciones de iconos (copiándolo en una superficie temporal, por ejemplo, mediante [**ID3D11DeviceContext2:: CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles)), emitiendo el comando CLEAR necesario y copiando el contenido de nuevo.</span><span class="sxs-lookup"><span data-stu-id="c4924-121">The application can accomplish this work-around by first saving the contents where tile mappings have changed (by copying them to a temporary surface, for example, by using [**ID3D11DeviceContext2::CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles)), issuing the required clear command and then copying the contents back.</span></span> <span data-ttu-id="c4924-122">Aunque esto llevaría a cabo la tarea de conservar el contenido de la superficie para la representación incremental, el inconveniente es que el rendimiento de la representación subsiguiente en la superficie puede verse afectado porque se podrían perder las optimizaciones de representación.</span><span class="sxs-lookup"><span data-stu-id="c4924-122">While this would accomplish the task of preserving surface contents for incremental rendering, the downside is that subsequent rendering performance on the surface might suffer because rendering optimizations might be lost.</span></span>

<span data-ttu-id="c4924-123">Si un mosaico se asigna a varios recursos en mosaico al mismo tiempo y el contenido de los mosaicos se manipula por cualquier medio (representación, copia, etc.) a través de uno de los recursos en mosaico, si el mismo mosaico se va a representar a través de cualquier otro recurso en mosaico, el icono se debe borrar primero tal y como se ha descrito anteriormente.</span><span class="sxs-lookup"><span data-stu-id="c4924-123">If a tile is mapped into multiple tiled resources at the same time and tile contents are manipulated by any means (render, copy, and so on) via one of the tiled resources, if the same tile is to be rendered via any other tiled resource, the tile must be cleared first as previously described.</span></span>

## <a name="rendering-to-tiles-shared-outside-render-area"></a><span data-ttu-id="c4924-124">Representar en mosaicos compartidos fuera del área de representación</span><span class="sxs-lookup"><span data-stu-id="c4924-124">Rendering to tiles shared outside render area</span></span>

<span data-ttu-id="c4924-125">Supongamos que se está representando un área en un recurso en mosaico y que el área de representación a la que se hace referencia en el área de representación también se asigna desde fuera del área de representación (incluidos a través de otros recursos en mosaico, al mismo tiempo o no).</span><span class="sxs-lookup"><span data-stu-id="c4924-125">Suppose an area in a tiled resource is being rendered to and the tile pool tiles referenced by the render area are also mapped to from outside the render area (including via other tiled resources, at the same time or not).</span></span> <span data-ttu-id="c4924-126">No se garantiza que los datos representados en estos mosaicos aparezcan correctamente cuando se ven a través de las otras asignaciones, aunque el diseño de memoria subyacente sea compatible.</span><span class="sxs-lookup"><span data-stu-id="c4924-126">Data rendered to these tiles isn't guaranteed to appear correctly when viewed through the other mappings, even though the underlying memory layout is compatible.</span></span> <span data-ttu-id="c4924-127">Este hecho se debe a que las estructuras de datos de optimización tienen algún uso de hardware que puede ser local para las asignaciones individuales para las superficies representables y no visibles para otras asignaciones a la misma ubicación de memoria.</span><span class="sxs-lookup"><span data-stu-id="c4924-127">This fact is due to optimization data structures some hardware use that can be local to individual mappings for renderable surfaces and not visible to other mappings to the same memory location.</span></span> <span data-ttu-id="c4924-128">Para solucionar esta restricción, puede copiar desde la asignación representada a todas las demás asignaciones a la misma memoria a la que se puede tener acceso (o borrar esa memoria o copiar otros datos en ella si ya no se necesita el contenido anterior).</span><span class="sxs-lookup"><span data-stu-id="c4924-128">You can work around this restriction by copying from the rendered mapping to all the other mappings to the same memory that might be accessed (or clearing that memory or copying other data to it if the old contents are no longer needed).</span></span> <span data-ttu-id="c4924-129">Aunque parece ser redundante, el resto de las asignaciones a la misma memoria comprenden correctamente cómo obtener acceso a su contenido y, al menos, el ahorro de memoria de tener solo una copia de seguridad de memoria física permanece intacto.</span><span class="sxs-lookup"><span data-stu-id="c4924-129">While this work-around seems redundant, it makes all other mappings to the same memory correctly understand how to access its contents, and at least the memory savings of having only a single physical memory backing remains intact.</span></span> <span data-ttu-id="c4924-130">Además, cuando se cambia entre el uso de diferentes recursos en mosaico que comparten asignaciones (a menos que solo se lean), debe llamar a la API [**ID3D11DeviceContext2:: TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) entre los modificadores.</span><span class="sxs-lookup"><span data-stu-id="c4924-130">Also, when you switch between using different tiled resources that share mappings (unless only reading), you must call the [**ID3D11DeviceContext2::TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) API in between the switches.</span></span>

## <a name="rendering-to-tiles-shared-within-render-area"></a><span data-ttu-id="c4924-131">Representar en mosaicos compartidos dentro del área de representación</span><span class="sxs-lookup"><span data-stu-id="c4924-131">Rendering to tiles shared within render area</span></span>

<span data-ttu-id="c4924-132">Si un área de un recurso en mosaico se está representando en el área de representación, varios mosaicos se asignan a la misma ubicación del grupo de mosaicos y los resultados de la representación no se definen en esos mosaicos.</span><span class="sxs-lookup"><span data-stu-id="c4924-132">If an area in a tiled resource is being rendered to and within the render area multiple tiles are mapped to the same tile pool location, rendering results are undefined on those tiles.</span></span>

## <a name="data-compatibility-across-tiled-resources-sharing-tiles"></a><span data-ttu-id="c4924-133">Compatibilidad de datos en recursos en mosaico compartir iconos</span><span class="sxs-lookup"><span data-stu-id="c4924-133">Data compatibility across tiled resources sharing tiles</span></span>

<span data-ttu-id="c4924-134">Suponga que varios recursos en mosaico tienen asignaciones a las mismas ubicaciones de grupo de mosaicos y cada recurso se usa para tener acceso a los mismos datos.</span><span class="sxs-lookup"><span data-stu-id="c4924-134">Suppose multiple tiled resources have mappings to the same tile pool locations and each resource is used to access the same data.</span></span> <span data-ttu-id="c4924-135">Este escenario solo es válido si se evitan las demás reglas sobre cómo evitar problemas con las estructuras de optimización de hardware, se realizan las llamadas adecuadas a [**ID3D11DeviceContext2:: TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) y los recursos en mosaico son compatibles entre sí.</span><span class="sxs-lookup"><span data-stu-id="c4924-135">This scenario is only valid if the other rules about avoiding problems with hardware optimization structures are avoided, appropriate calls to [**ID3D11DeviceContext2::TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier) are made, and the tiled resources are compatible with each other.</span></span> <span data-ttu-id="c4924-136">Este último se describe aquí en lo que se refiere a lo que significa que los recursos en mosaico comparten iconos para que no sean compatibles.</span><span class="sxs-lookup"><span data-stu-id="c4924-136">The latter is described here in terms of what it means for tiled resources sharing tiles to be incompatible.</span></span> <span data-ttu-id="c4924-137">Las condiciones de incompatibilidad para tener acceso a los mismos datos a través de asignaciones de mosaicos duplicadas son el uso de diferentes dimensiones o formato de superficie, o diferencias en la presencia de marcadores de destino de representación o de estarcido de profundidad en los recursos.</span><span class="sxs-lookup"><span data-stu-id="c4924-137">The incompatibility conditions of accessing the same data across duplicate tile mappings are the use of different surface dimensions or format, or differences in the presence of render target or depth stencil bind flags on the resources.</span></span> <span data-ttu-id="c4924-138">La escritura en la memoria con un tipo de asignación produce resultados no definidos si posteriormente se lee o se representa a través de una asignación de un recurso incompatible.</span><span class="sxs-lookup"><span data-stu-id="c4924-138">Writing to the memory with one type of mapping produces undefined results if you subsequently read or render via a mapping from an incompatible resource.</span></span> <span data-ttu-id="c4924-139">Si las otras asignaciones de uso compartido de recursos se inicializan por primera vez con nuevos datos (reciclando la memoria para un propósito diferente), la operación de lectura o de presentación subsiguiente es correcta, ya que los datos no se purgan entre interpretaciones incompatibles.</span><span class="sxs-lookup"><span data-stu-id="c4924-139">If the other resource sharing mappings are first initialized with new data (recycling the memory for a different purpose), the subsequent read or render operation is fine since data isn't bleeding across incompatible interpretations.</span></span> <span data-ttu-id="c4924-140">Sin embargo, debe llamar a la API **TiledResourceBarrier** cuando cambie entre el acceso a asignaciones incompatibles como este.</span><span class="sxs-lookup"><span data-stu-id="c4924-140">But, you must call the **TiledResourceBarrier** API when you switch between accessing incompatible mappings like this.</span></span>

<span data-ttu-id="c4924-141">Si el marcador de enlace de la galería de símbolos de profundidad o destino de representación no está establecido en ninguno de los recursos que comparten asignaciones entre sí, hay muchas menos restricciones.</span><span class="sxs-lookup"><span data-stu-id="c4924-141">If the render target or depth stencil bind flag isn't set on any of the resources sharing mappings with each other, there are far fewer restrictions.</span></span> <span data-ttu-id="c4924-142">Siempre que los tipos de formato y superficie (por ejemplo, Texture2D) sean los mismos, se pueden compartir los mosaicos.</span><span class="sxs-lookup"><span data-stu-id="c4924-142">As long as the format and surface types (for example, Texture2D) are the same, tiles can be shared.</span></span> <span data-ttu-id="c4924-143">Los distintos formatos compatibles son casos como superficies de BC \* y el tamaño equivalente sin comprimir 32 bits o 16 bits por formato de componente, como BC6H y R32G32B32A32.</span><span class="sxs-lookup"><span data-stu-id="c4924-143">Different formats being compatible are cases such as BC\* surfaces and the equivalent sized uncompressed 32 bit or 16 bit per component format, like BC6H and R32G32B32A32.</span></span> <span data-ttu-id="c4924-144">Muchos formatos de elementos de 32 bits por elemento también pueden tener alias R32 \_ \* (R10G10B10A2 \_ \* , R8G8B8A8 \_ \* , B8G8R8A8 \_ \* , B8G8R8X8 \_ \* , R16G16 \_ \* ); esta operación siempre se permite para los recursos no en mosaico.</span><span class="sxs-lookup"><span data-stu-id="c4924-144">Many 32 bit per element formats can be aliased with R32\_\* as well (R10G10B10A2\_\*, R8G8B8A8\_\*, B8G8R8A8\_\*,B8G8R8X8\_\*,R16G16\_\*); this operation has always been allowed for non-tiled resources.</span></span>

<span data-ttu-id="c4924-145">El uso compartido entre mosaicos empaquetados y no empaquetados es correcto si los formatos son compatibles y los mosaicos se rellenan con colores sólidos.</span><span class="sxs-lookup"><span data-stu-id="c4924-145">Sharing between packed and non-packed tiles is fine if the formats are compatible and the tiles are filled with solid color.</span></span>

<span data-ttu-id="c4924-146">Por último, si no hay nada más común sobre las asignaciones de iconos de uso compartido de recursos, excepto si ninguno tiene marcadores de destino de representación o de estarcido de profundidad, solo se puede compartir de forma segura la memoria rellenada con 0. la asignación aparecerá como cualquier 0 descodifica en para la definición del formato de recurso especificado (normalmente solo 0).</span><span class="sxs-lookup"><span data-stu-id="c4924-146">Finally, if nothing is common about the resources sharing tile mappings except that none have render target or depth stencil bind flags, only memory filled with 0 can be shared safely; the mapping will appear as whatever 0 decodes to for the definition of the given resource format (typically just 0).</span></span>

## <a name="related-topics"></a><span data-ttu-id="c4924-147">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="c4924-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c4924-148">Acceso de canalización a recursos en mosaico</span><span class="sxs-lookup"><span data-stu-id="c4924-148">Pipeline access to tiled resources</span></span>](pipeline-access-to-tiled-resources.md)
</dt> </dl>

 

 




