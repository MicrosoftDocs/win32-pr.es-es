---
description: Un objeto de temporizador que se pueda esperar es un objeto de sincronización cuyo estado está establecido en señalado cuando llega el momento de vencimiento especificado.
ms.assetid: 5d39ada0-ea31-40d7-b075-aeb657ee508c
title: Objetos de temporizador de espera
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2b9597617705fcd78bb71f63e33a475e3bca78e3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105668157"
---
# <a name="waitable-timer-objects"></a><span data-ttu-id="d0358-103">Objetos de temporizador de espera</span><span class="sxs-lookup"><span data-stu-id="d0358-103">Waitable Timer Objects</span></span>

<span data-ttu-id="d0358-104">Un *objeto de temporizador* que se pueda esperar es un objeto de sincronización cuyo estado está establecido en señalado cuando llega el momento de vencimiento especificado.</span><span class="sxs-lookup"><span data-stu-id="d0358-104">A *waitable timer object* is a synchronization object whose state is set to signaled when the specified due time arrives.</span></span> <span data-ttu-id="d0358-105">Hay dos tipos de temporizadores de espera que se pueden crear: restablecimiento manual y sincronización.</span><span class="sxs-lookup"><span data-stu-id="d0358-105">There are two types of waitable timers that can be created: manual-reset and synchronization.</span></span> <span data-ttu-id="d0358-106">Un temporizador de cualquier tipo también puede ser un temporizador periódico.</span><span class="sxs-lookup"><span data-stu-id="d0358-106">A timer of either type can also be a periodic timer.</span></span>



| <span data-ttu-id="d0358-107">Object</span><span class="sxs-lookup"><span data-stu-id="d0358-107">Object</span></span>                | <span data-ttu-id="d0358-108">Descripción</span><span class="sxs-lookup"><span data-stu-id="d0358-108">Description</span></span>                                                                                                                                                                                             |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d0358-109">temporizador de restablecimiento manual</span><span class="sxs-lookup"><span data-stu-id="d0358-109">manual-reset timer</span></span>    | <span data-ttu-id="d0358-110">Un temporizador cuyo estado permanece señalado hasta que se llama a [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) para establecer un nuevo tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="d0358-110">A timer whose state remains signaled until [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) is called to establish a new due time.</span></span>                                                                          |
| <span data-ttu-id="d0358-111">temporizador de sincronización</span><span class="sxs-lookup"><span data-stu-id="d0358-111">synchronization timer</span></span> | <span data-ttu-id="d0358-112">Un temporizador cuyo estado permanece señalado hasta que un subproceso completa una operación de espera en el objeto de temporizador.</span><span class="sxs-lookup"><span data-stu-id="d0358-112">A timer whose state remains signaled until a thread completes a wait operation on the timer object.</span></span>                                                                                                     |
| <span data-ttu-id="d0358-113">temporizador periódico</span><span class="sxs-lookup"><span data-stu-id="d0358-113">periodic timer</span></span>        | <span data-ttu-id="d0358-114">Un temporizador que se reactiva cada vez que expira el período especificado hasta que el temporizador se restablece o se cancela.</span><span class="sxs-lookup"><span data-stu-id="d0358-114">A timer that is reactivated each time the specified period expires, until the timer is reset or canceled.</span></span> <span data-ttu-id="d0358-115">Un temporizador periódico es un temporizador periódico de restablecimiento manual o un temporizador de sincronización periódico.</span><span class="sxs-lookup"><span data-stu-id="d0358-115">A periodic timer is either a periodic manual-reset timer or a periodic synchronization timer.</span></span> |



 

> [!Note]  
> <span data-ttu-id="d0358-116">Cuando se señala un temporizador, el procesador debe ejecutar para procesar las instrucciones asociadas.</span><span class="sxs-lookup"><span data-stu-id="d0358-116">When a timer is signaled, the processor must run to process the associated instructions.</span></span> <span data-ttu-id="d0358-117">Los temporizadores periódicos de alta frecuencia mantienen el procesador continuamente ocupado, lo que impide que el sistema permanezca en un [Estado de energía](../power/system-power-states.md) inferior durante un período de tiempo significativo.</span><span class="sxs-lookup"><span data-stu-id="d0358-117">High-frequency periodic timers keep the processor continually busy, which prevents the system from remaining in a lower [power state](../power/system-power-states.md) for any meaningful amount of time.</span></span> <span data-ttu-id="d0358-118">Esto puede tener un impacto negativo en la duración de la batería del equipo portátil y en escenarios que dependen de la administración eficaz de la energía, como centros de recursos de gran tamaño.</span><span class="sxs-lookup"><span data-stu-id="d0358-118">This can have a negative impact on portable computer battery life and scenarios that depend on effective power management, such as large datacenters.</span></span> <span data-ttu-id="d0358-119">Para lograr una mayor eficacia energética, considere la posibilidad de usar notificaciones basadas en eventos en lugar de notificaciones basadas en el tiempo en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d0358-119">For greater energy efficiency, consider using event-based notifications instead of time-based notifications in your application.</span></span> <span data-ttu-id="d0358-120">Si es necesario un temporizador, use un temporizador que se señale una vez en lugar de un temporizador periódico, o establezca el intervalo en un valor superior a un segundo.</span><span class="sxs-lookup"><span data-stu-id="d0358-120">If a timer is necessary, use a timer that is signaled once rather than a periodic timer, or set the interval to a value greater than one second.</span></span>

 

<span data-ttu-id="d0358-121">Un subproceso utiliza la función [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) o [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) para crear un objeto de temporizador.</span><span class="sxs-lookup"><span data-stu-id="d0358-121">A thread uses the [**CreateWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerw) or [**CreateWaitableTimerEx**](/windows/win32/api/synchapi/nf-synchapi-createwaitabletimerexw) function to create a timer object.</span></span> <span data-ttu-id="d0358-122">El subproceso de creación especifica si el temporizador es un temporizador de restablecimiento manual o un temporizador de sincronización.</span><span class="sxs-lookup"><span data-stu-id="d0358-122">The creating thread specifies whether the timer is a manual-reset timer or a synchronization timer.</span></span> <span data-ttu-id="d0358-123">El subproceso de creación puede especificar un nombre para el objeto de temporizador.</span><span class="sxs-lookup"><span data-stu-id="d0358-123">The creating thread can specify a name for the timer object.</span></span> <span data-ttu-id="d0358-124">Los subprocesos de otros procesos pueden abrir un identificador de un temporizador existente especificando su nombre en una llamada a la función [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) .</span><span class="sxs-lookup"><span data-stu-id="d0358-124">Threads in other processes can open a handle to an existing timer by specifying its name in a call to the [**OpenWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-openwaitabletimerw) function.</span></span> <span data-ttu-id="d0358-125">Cualquier subproceso con un identificador a un objeto de temporizador puede utilizar una de las [funciones de espera](wait-functions.md) para esperar a que el estado del temporizador se establezca en señalado.</span><span class="sxs-lookup"><span data-stu-id="d0358-125">Any thread with a handle to a timer object can use one of the [wait functions](wait-functions.md) to wait for the timer state to be set to signaled.</span></span>

-   <span data-ttu-id="d0358-126">El subproceso llama a la función [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) para activar el temporizador.</span><span class="sxs-lookup"><span data-stu-id="d0358-126">The thread calls the [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) function to activate the timer.</span></span> <span data-ttu-id="d0358-127">Tenga en cuenta el uso de los siguientes parámetros para **SetWaitableTimer**:</span><span class="sxs-lookup"><span data-stu-id="d0358-127">Note the use of the following parameters for **SetWaitableTimer**:</span></span>
-   <span data-ttu-id="d0358-128">Use el parámetro *lpDueTime* para especificar la hora a la que se establecerá el temporizador en el estado señalado.</span><span class="sxs-lookup"><span data-stu-id="d0358-128">Use the *lpDueTime* parameter to specify the time at which the timer is to be set to the signaled state.</span></span> <span data-ttu-id="d0358-129">Cuando se establece un temporizador de restablecimiento manual en el estado señalado, permanece en este estado hasta que [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) establece una nueva hora de vencimiento.</span><span class="sxs-lookup"><span data-stu-id="d0358-129">When a manual-reset timer is set to the signaled state, it remains in this state until [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) establishes a new due time.</span></span> <span data-ttu-id="d0358-130">Cuando un temporizador de sincronización se establece en el estado señalado, permanece en este estado hasta que un subproceso completa una operación de espera en el objeto de temporizador.</span><span class="sxs-lookup"><span data-stu-id="d0358-130">When a synchronization timer is set to the signaled state, it remains in this state until a thread completes a wait operation on the timer object.</span></span>
-   <span data-ttu-id="d0358-131">Use el parámetro *lPeriod* de la función [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) para especificar el período del temporizador.</span><span class="sxs-lookup"><span data-stu-id="d0358-131">Use the *lPeriod* parameter of the [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer) function to specify the timer period.</span></span> <span data-ttu-id="d0358-132">Si el período no es cero, el temporizador es un temporizador periódico; se reactiva cada vez que el período expira, hasta que el temporizador se restablece o se cancela.</span><span class="sxs-lookup"><span data-stu-id="d0358-132">If the period is not zero, the timer is a periodic timer; it is reactivated each time the period expires, until the timer is reset or canceled.</span></span> <span data-ttu-id="d0358-133">Si el punto es cero, el temporizador no es un temporizador periódico; se señaliza una vez y luego se desactiva.</span><span class="sxs-lookup"><span data-stu-id="d0358-133">If the period is zero, the timer is not a periodic timer; it is signaled once and then deactivated.</span></span>

<span data-ttu-id="d0358-134">Un subproceso puede usar la función [**CancelWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-cancelwaitabletimer) para establecer el temporizador en el estado inactivo.</span><span class="sxs-lookup"><span data-stu-id="d0358-134">A thread can use the [**CancelWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-cancelwaitabletimer) function to set the timer to the inactive state.</span></span> <span data-ttu-id="d0358-135">Para restablecer el temporizador, llame a [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer).</span><span class="sxs-lookup"><span data-stu-id="d0358-135">To reset the timer, call [**SetWaitableTimer**](/windows/win32/api/synchapi/nf-synchapi-setwaitabletimer).</span></span> <span data-ttu-id="d0358-136">Cuando haya terminado con el objeto de temporizador, llame a [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle) para cerrar el identificador del objeto de temporizador.</span><span class="sxs-lookup"><span data-stu-id="d0358-136">When you are finished with the timer object, call [**CloseHandle**](/windows/win32/api/handleapi/nf-handleapi-closehandle) to close the handle to the timer object.</span></span>

<span data-ttu-id="d0358-137">El comportamiento de un temporizador de espera se puede resumir de la manera siguiente:</span><span class="sxs-lookup"><span data-stu-id="d0358-137">The behavior of a waitable timer can be summarized as follows:</span></span>

-   <span data-ttu-id="d0358-138">Cuando se establece un temporizador, se cancela si ya estaba activo, el estado del temporizador no es señalado y el temporizador se coloca en la cola del temporizador del kernel.</span><span class="sxs-lookup"><span data-stu-id="d0358-138">When a timer is set, it is canceled if it was already active, the state of the timer is nonsignaled, and the timer is placed in the kernel timer queue.</span></span>
-   <span data-ttu-id="d0358-139">Cuando un temporizador expira, el temporizador se establece en el estado señalado.</span><span class="sxs-lookup"><span data-stu-id="d0358-139">When a timer expires, the timer is set to the signaled state.</span></span> <span data-ttu-id="d0358-140">Si el temporizador tiene una rutina de finalización, se pone en la cola del subproceso que establece el temporizador.</span><span class="sxs-lookup"><span data-stu-id="d0358-140">If the timer has a completion routine, it is queued to the thread that set the timer.</span></span> <span data-ttu-id="d0358-141">La rutina de finalización permanece en la cola de [llamadas a procedimiento asincrónico](asynchronous-procedure-calls.md) (APC) del subproceso hasta que el subproceso entra en un estado de espera de alerta.</span><span class="sxs-lookup"><span data-stu-id="d0358-141">The completion routine remains in the [asynchronous procedure call](asynchronous-procedure-calls.md) (APC) queue of the thread until the thread enters an alertable wait state.</span></span> <span data-ttu-id="d0358-142">En ese momento, se envía la APC y se llama a la rutina de finalización.</span><span class="sxs-lookup"><span data-stu-id="d0358-142">At that time, the APC is dispatched and the completion routine is called.</span></span> <span data-ttu-id="d0358-143">Si el temporizador es periódico, se vuelve a colocar en la cola del temporizador del kernel.</span><span class="sxs-lookup"><span data-stu-id="d0358-143">If the timer is periodic, it is placed back in the kernel timer queue.</span></span>
-   <span data-ttu-id="d0358-144">Cuando se cancela un temporizador, se quita de la cola del temporizador del kernel si estaba pendiente.</span><span class="sxs-lookup"><span data-stu-id="d0358-144">When a timer is canceled, it is removed from the kernel timer queue if it was pending.</span></span> <span data-ttu-id="d0358-145">Si el temporizador expiró y todavía hay un APC en cola para el subproceso que estableció el temporizador, el APC se quita de la cola APC del subproceso.</span><span class="sxs-lookup"><span data-stu-id="d0358-145">If the timer had expired and there is still an APC queued to the thread that set the timer, the APC is removed from the thread's APC queue.</span></span> <span data-ttu-id="d0358-146">El estado señalado del temporizador no se ve afectado.</span><span class="sxs-lookup"><span data-stu-id="d0358-146">The signaled state of the timer is not affected.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d0358-147">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="d0358-147">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d0358-148">Llamadas a procedimientos asincrónicos</span><span class="sxs-lookup"><span data-stu-id="d0358-148">Asynchronous Procedure Calls</span></span>](asynchronous-procedure-calls.md)
</dt> <dt>

[<span data-ttu-id="d0358-149">Usar objetos de temporizador de espera</span><span class="sxs-lookup"><span data-stu-id="d0358-149">Using Waitable Timer Objects</span></span>](using-waitable-timer-objects.md)
</dt> </dl>

 

 
