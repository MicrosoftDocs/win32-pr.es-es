---
description: Trabajar con destinos de representación de Direct3D
ms.assetid: 271b919c-421b-4484-8e60-afbf3cbdca44
title: Trabajar con destinos de representación de Direct3D
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f8aca19082c5db9521cfc1c7341fd74c98270cbc
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105666763"
---
# <a name="working-with-direct3d-render-targets"></a><span data-ttu-id="50b97-103">Trabajar con destinos de representación de Direct3D</span><span class="sxs-lookup"><span data-stu-id="50b97-103">Working with Direct3D Render Targets</span></span>

<span data-ttu-id="50b97-104">Se definen varios subtipos de medios para los destinos de representación de Direct3D para su uso con VMR-7 y VMR-9.</span><span class="sxs-lookup"><span data-stu-id="50b97-104">Several media subtypes for Direct3D render targets are defined for use with the VMR-7 and the VMR-9.</span></span> <span data-ttu-id="50b97-105">Cuando un filtro de nivel superior propone una conexión con uno de estos subtipos, indica al VMR que la representación se va a realizar en un destino de representación de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="50b97-105">When an upstream filter proposes a connection with one of these subtypes, it indicates to the VMR that the rendering is to be performed on a Direct3D render target.</span></span> <span data-ttu-id="50b97-106">En el caso de VMR-7, será un destino de representación de Direct3D 7 Direct3D y para VMR-9, que será un destino de representación de Direct3D 9 Direct3D.</span><span class="sxs-lookup"><span data-stu-id="50b97-106">For VMR-7, this will be a DirectX 7 Direct3D render target, and for VMR-9 this will be a DirectX 9 Direct3D render target.</span></span> <span data-ttu-id="50b97-107">Si el VMR está en modo de mezcla, la superficie también será una superficie de textura de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="50b97-107">If the VMR is in mixing mode, the surface will also be a Direct3D texture surface.</span></span> <span data-ttu-id="50b97-108">Si VMR no está en modo de mezcla, la superficie será una superficie de Direct3D normal.</span><span class="sxs-lookup"><span data-stu-id="50b97-108">If the VMR is not in mixing mode, the surface will be a regular Direct3D surface.</span></span> <span data-ttu-id="50b97-109">Los formatos de píxel ARGB solo se admiten cuando el VMR está en modo de mezcla.</span><span class="sxs-lookup"><span data-stu-id="50b97-109">The ARGB pixel formats are only supported when the VMR is in mixing mode.</span></span> <span data-ttu-id="50b97-110">Los subtipos de destino de representación son:</span><span class="sxs-lookup"><span data-stu-id="50b97-110">The render target subtypes are:</span></span>



| <span data-ttu-id="50b97-111">VMR-7</span><span class="sxs-lookup"><span data-stu-id="50b97-111">VMR-7</span></span>                                | <span data-ttu-id="50b97-112">VMR-9</span><span class="sxs-lookup"><span data-stu-id="50b97-112">VMR-9</span></span>                                |
|--------------------------------------|--------------------------------------|
| <span data-ttu-id="50b97-113">MEDIASUBTYPE \_ RGB32 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="50b97-113">MEDIASUBTYPE\_RGB32\_D3D\_DX7\_RT</span></span>    | <span data-ttu-id="50b97-114">MEDIASUBTYPE \_ RGB32 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="50b97-114">MEDIASUBTYPE\_RGB32\_D3D\_DX9\_RT</span></span>    |
| <span data-ttu-id="50b97-115">MEDIASUBTYPE \_ RGB16 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="50b97-115">MEDIASUBTYPE\_RGB16\_D3D\_DX7\_RT</span></span>    | <span data-ttu-id="50b97-116">MEDIASUBTYPE \_ RGB16 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="50b97-116">MEDIASUBTYPE\_RGB16\_D3D\_DX9\_RT</span></span>    |
| <span data-ttu-id="50b97-117">MEDIASUBTYPE \_ ARGB32 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="50b97-117">MEDIASUBTYPE\_ARGB32\_D3D\_DX7\_RT</span></span>   | <span data-ttu-id="50b97-118">MEDIASUBTYPE \_ ARGB32 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="50b97-118">MEDIASUBTYPE\_ARGB32\_D3D\_DX9\_RT</span></span>   |
| <span data-ttu-id="50b97-119">MEDIASUBTYPE \_ ARGB4444 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="50b97-119">MEDIASUBTYPE\_ARGB4444\_D3D\_DX7\_RT</span></span> | <span data-ttu-id="50b97-120">MEDIASUBTYPE \_ ARGB4444 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="50b97-120">MEDIASUBTYPE\_ARGB4444\_D3D\_DX9\_RT</span></span> |
| <span data-ttu-id="50b97-121">MEDIASUBTYPE \_ ARGB1555 \_ D3D \_ DX7 \_ RT</span><span class="sxs-lookup"><span data-stu-id="50b97-121">MEDIASUBTYPE\_ARGB1555\_D3D\_DX7\_RT</span></span> | <span data-ttu-id="50b97-122">MEDIASUBTYPE \_ ARGB1555 \_ D3D \_ DX9 \_ RT</span><span class="sxs-lookup"><span data-stu-id="50b97-122">MEDIASUBTYPE\_ARGB1555\_D3D\_DX9\_RT</span></span> |



 

<span data-ttu-id="50b97-123">Estos tipos se definen en el archivo de encabezado UUID. h.</span><span class="sxs-lookup"><span data-stu-id="50b97-123">These types are defined in the header file uuids.h.</span></span> <span data-ttu-id="50b97-124">Los tipos de medios de RGB32 de MEDIASUBTYPE \_ son un formato RGBx888 y los \_ tipos de medios MEDIASUBTYPE RGB16 son un formato RGB565.</span><span class="sxs-lookup"><span data-stu-id="50b97-124">The MEDIASUBTYPE\_RGB32 media types are an RGBx888 format and MEDIASUBTYPE\_RGB16 media types are an RGB565 format.</span></span> <span data-ttu-id="50b97-125">Para obtener más información sobre estos formatos de píxeles, consulte la documentación sobre gráficos de DirectX.</span><span class="sxs-lookup"><span data-stu-id="50b97-125">For more information on these pixel formats, see the DirectX Graphics documentation.</span></span>

<span data-ttu-id="50b97-126">**Solicitud de una superficie desbloqueada**</span><span class="sxs-lookup"><span data-stu-id="50b97-126">**Requesting an Unlocked Surface**</span></span>

<span data-ttu-id="50b97-127">El bloqueo y el desbloqueo de las superficies de DirectDraw son operaciones costosamente costosas.</span><span class="sxs-lookup"><span data-stu-id="50b97-127">Locking and unlocking DirectDraw surfaces are computationally expensive operations.</span></span> <span data-ttu-id="50b97-128">Al usar los subtipos de medios de destino de representación de Direct3D, el filtro de nivel superior necesita que las superficies se desbloqueen para que pueda trabajar en ellas con el hardware de gráficos.</span><span class="sxs-lookup"><span data-stu-id="50b97-128">When using the Direct3D render target media subtypes, the upstream filter needs the surfaces to be unlocked so that it can operate on them with the graphics hardware.</span></span> <span data-ttu-id="50b97-129">Para evitar una operación innecesaria de desbloqueo de bloqueo, VMR admite una nueva marca en el método [**IMemAllocator:: getBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) , AM \_ GBF \_ NODDSURFACELOCK, que indica a la VMR que no bloquee la superficie DirectDraw antes de pasar una muestra al filtro de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="50b97-129">To avoid an unnecessary locking-unlocking operation, the VMR supports a new flag on the [**IMemAllocator::GetBuffer**](/windows/desktop/api/Strmif/nf-strmif-imemallocator-getbuffer) method, AM\_GBF\_NODDSURFACELOCK, that instructs the VMR not to lock the DirectDraw surface before passing a sample to the upstream filter.</span></span> <span data-ttu-id="50b97-130">Cuando se usa esta marca, se producirá un error en las llamadas a [**IMediaSample:: GetPointer**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getpointer) porque no hay ningún puntero bloqueado.</span><span class="sxs-lookup"><span data-stu-id="50b97-130">When this flag is used, calls to [**IMediaSample::GetPointer**](/windows/desktop/api/Strmif/nf-strmif-imediasample-getpointer) will fail because there is no locked pointer.</span></span> <span data-ttu-id="50b97-131">Para obtener acceso a la superficie de DirectDraw, el filtro debe llamar a **QueryInterface** en el objeto [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) devuelto y solicitar la interfaz [**IVMRSurface**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurface) .</span><span class="sxs-lookup"><span data-stu-id="50b97-131">To obtain access to the DirectDraw surface, the filter must call **QueryInterface** on the returned [**IMediaSample**](/windows/desktop/api/Strmif/nn-strmif-imediasample) object and request the [**IVMRSurface**](/windows/desktop/api/Strmif/nn-strmif-ivmrsurface) interface.</span></span> <span data-ttu-id="50b97-132">Obviamente, el filtro de nivel superior debe asegurarse de que la superficie no esté bloqueada cuando vuelva a liberar el ejemplo en la lista de disponibilidad.</span><span class="sxs-lookup"><span data-stu-id="50b97-132">Obviously, the upstream filter must ensure that the surface is not locked when it releases the sample back to the free list.</span></span>

 

 



