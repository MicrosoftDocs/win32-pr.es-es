---
title: Técnicas habituales para mejorar los mapas de profundidad de sombras
description: En este artículo técnico se proporciona información general sobre algunos algoritmos de mapa de profundidad de sombra comunes y artefactos comunes, y se explican varias técnicas, que abarcan en gran parte del nivel básico al intermedio, que se pueden usar para aumentar la calidad de las asignaciones de instantáneas estándar.
ms.assetid: bf994838-a261-0379-9301-eb9b250d216c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c8b25507d7f6b8608d4dacf5fab620bc8a3294c7
ms.sourcegitcommit: 218b1ff779402c3ebe1786679e1aa80a5c0d6c95
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/01/2020
ms.locfileid: "103794182"
---
# <a name="common-techniques-to-improve-shadow-depth-maps"></a><span data-ttu-id="43aff-103">Técnicas habituales para mejorar los mapas de profundidad de sombras</span><span class="sxs-lookup"><span data-stu-id="43aff-103">Common Techniques to Improve Shadow Depth Maps</span></span>

<span data-ttu-id="43aff-104">Las asignaciones sombra, introducidas por primera vez en 1978, son una técnica común para agregar sombras a los juegos.</span><span class="sxs-lookup"><span data-stu-id="43aff-104">Shadow maps, first introduced in 1978, are a common technique for adding shadows to games.</span></span> <span data-ttu-id="43aff-105">Tres décadas después, a pesar de los avances en hardware y software, los artefactos de sombreado, como los bordes de Shimmering, el alias de perspectiva y otros problemas de precisión, se conservan.</span><span class="sxs-lookup"><span data-stu-id="43aff-105">Three decades later, despite advances in hardware and software, shadowing artifacts—namely shimmering edges, perspective aliasing, and other precision issues—persist.</span></span>

<span data-ttu-id="43aff-106">En este artículo técnico se proporciona información general sobre algunos algoritmos de mapa de profundidad de sombra comunes y artefactos comunes, y se explican varias técnicas, que abarcan en gran parte del nivel básico al intermedio, que se pueden usar para aumentar la calidad de las asignaciones de instantáneas estándar.</span><span class="sxs-lookup"><span data-stu-id="43aff-106">This technical article provides an overview of some common shadow depth map algorithms and common artifacts, and explains several techniques—ranging in difficulty from basic to intermediate—that can be used to increase the quality of standard shadow maps.</span></span> <span data-ttu-id="43aff-107">Agregar mapas de sombra básicos a un título normalmente es sencillo, pero entender los matices de los artefactos de sombra puede ser desafiante.</span><span class="sxs-lookup"><span data-stu-id="43aff-107">Adding basic shadow maps to a title typically is straightforward, but understanding the nuances of shadow artifacts can be challenging.</span></span> <span data-ttu-id="43aff-108">Este artículo técnico está escrito para el desarrollador de gráficos intermedios que ha implementado sombras, pero no comprende por completo por qué aparecen artefactos específicos y no está seguro de cómo solucionarlos.</span><span class="sxs-lookup"><span data-stu-id="43aff-108">This technical article is written for the intermediate graphics developer who has implemented shadows, but does not fully understand why specific artifacts appear and is not sure how to work around them.</span></span>

<span data-ttu-id="43aff-109">La selección de las técnicas correctas para mitigar artefactos específicos no es trivial.</span><span class="sxs-lookup"><span data-stu-id="43aff-109">Selecting the correct techniques to mitigate specific artifacts is nontrivial.</span></span> <span data-ttu-id="43aff-110">Cuando se resuelven las deficiencias en el mapa de sombras, la diferencia de calidad puede ser impresionante (Figura 1).</span><span class="sxs-lookup"><span data-stu-id="43aff-110">When shadow map shortcomings are addressed, the difference in quality can be impressive (Figure 1).</span></span> <span data-ttu-id="43aff-111">La implementación correcta de estas técnicas mejora drásticamente las sombras estándar.</span><span class="sxs-lookup"><span data-stu-id="43aff-111">Correctly implementing these techniques drastically improves standard shadows.</span></span> <span data-ttu-id="43aff-112">Las técnicas que se explican en este artículo se implementan en el ejemplo de CascadedShadowMaps11 en el SDK de DirectX.</span><span class="sxs-lookup"><span data-stu-id="43aff-112">The techniques explained in this article are implemented in the sample CascadedShadowMaps11 in the DirectX SDK.</span></span>

<span data-ttu-id="43aff-113">**Figura 1. Sombras con artefactos graves (izquierda) y sombras después de implementar las técnicas descritas en este artículo (derecha)**</span><span class="sxs-lookup"><span data-stu-id="43aff-113">**Figure 1. Shadows with severe artifacts (left), and shadows after implementing the techniques described in this article (right)**</span></span>

![sombras con artefactos graves (izquierda) y sombras después de implementar las técnicas descritas en este artículo (derecha)](images/shadows-before-and-after.jpg)

## <a name="shadow-depth-maps-review"></a><span data-ttu-id="43aff-115">Revisión de mapas de profundidad de sombra</span><span class="sxs-lookup"><span data-stu-id="43aff-115">Shadow Depth Maps Review</span></span>

<span data-ttu-id="43aff-116">El algoritmo de mapa de profundidad de sombra es un algoritmo de dos pasos.</span><span class="sxs-lookup"><span data-stu-id="43aff-116">The shadow depth map algorithm is a two-pass algorithm.</span></span> <span data-ttu-id="43aff-117">El primer paso genera un mapa de profundidad en el espacio claro.</span><span class="sxs-lookup"><span data-stu-id="43aff-117">The first pass generates a depth map in light space.</span></span> <span data-ttu-id="43aff-118">En el segundo paso, este mapa se usa para comparar la profundidad de cada píxel en el espacio claro con su profundidad correspondiente en el mapa de profundidad del espacio de la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-118">In the second pass, this map is used to compare each pixel's depth in light space against its corresponding depth in the light space depth map.</span></span>

<span data-ttu-id="43aff-119">**Figura 2. Partes clave de una escena sombra**</span><span class="sxs-lookup"><span data-stu-id="43aff-119">**Figure 2. Key parts of a shadow scene**</span></span>

![partes clave de una escena sombra](images/key-parts-of-shadow-scene.jpg)

### <a name="pass-1"></a><span data-ttu-id="43aff-121">Paso 1</span><span class="sxs-lookup"><span data-stu-id="43aff-121">Pass 1</span></span>

<span data-ttu-id="43aff-122">La escena se muestra en la figura 2.</span><span class="sxs-lookup"><span data-stu-id="43aff-122">The scene is shown in Figure 2.</span></span> <span data-ttu-id="43aff-123">En el primer paso (Figura 3), la geometría se representa en un búfer de profundidad desde el punto de vista de la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-123">In the first pass (Figure 3), the geometry is rendered into a depth buffer from the point of view of the light.</span></span> <span data-ttu-id="43aff-124">Más concretamente, el sombreador de vértices transforma la geometría en un espacio de vista clara.</span><span class="sxs-lookup"><span data-stu-id="43aff-124">More specifically, the vertex shader transforms the geometry into light-view space.</span></span>

<span data-ttu-id="43aff-125">El resultado final de este primer paso es un búfer de profundidad que contiene la información de profundidad de la escena desde el punto de vista de la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-125">The end result of this first pass is a depth buffer containing the scene's depth information from the point of view of the light.</span></span> <span data-ttu-id="43aff-126">Ahora se puede usar en el paso 2 para determinar qué píxeles se ocluidos de la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-126">This now can be used in pass 2 to determine which pixels are occluded from the light.</span></span>

<span data-ttu-id="43aff-127">**Figura 3. Primer paso de la asignación de sombra básica**</span><span class="sxs-lookup"><span data-stu-id="43aff-127">**Figure 3. First pass of basic shadow mapping**</span></span>

![primer paso de la asignación de sombra básica](images/first-pass-of-basic-hadow-mapping.png)

### <a name="pass-2"></a><span data-ttu-id="43aff-129">Paso 2</span><span class="sxs-lookup"><span data-stu-id="43aff-129">Pass 2</span></span>

<span data-ttu-id="43aff-130">En el segundo paso (Figura 4), el sombreador de vértices transforma cada vértice dos veces.</span><span class="sxs-lookup"><span data-stu-id="43aff-130">In the second pass (Figure 4), the vertex shader transforms each vertex twice.</span></span> <span data-ttu-id="43aff-131">Cada vértice se transforma en el espacio de la vista de la cámara y se pasa al sombreador de píxeles como la posición.</span><span class="sxs-lookup"><span data-stu-id="43aff-131">Each vertex is transformed into the camera's view space and passed to the pixel shader as the position.</span></span> <span data-ttu-id="43aff-132">Cada vértice también se transforma por la matriz de texturas de vista-proyección de la luz y se pasa al sombreador de píxeles como una coordenada de textura.</span><span class="sxs-lookup"><span data-stu-id="43aff-132">Each vertex is also transformed by the light's view-projection-texture matrix and passed to the pixel shader as a texture coordinate.</span></span> <span data-ttu-id="43aff-133">La matriz View-Projection-Texture es la misma matriz que se usa para representar la escena en Pass 1 con una transformación adicional.</span><span class="sxs-lookup"><span data-stu-id="43aff-133">The view-projection-texture matrix is the same matrix used to render the scene in pass 1 with one additional transform.</span></span> <span data-ttu-id="43aff-134">Es una transformación que escala y traduce los puntos del espacio de vista (de-1 a 1 en X e y) al espacio de textura (de 0 a 1 en X y de 1 a 0 en Y).</span><span class="sxs-lookup"><span data-stu-id="43aff-134">It's a transformation that scales and translates the points from view space (–1 to 1 in X and Y) to texture space (0 to 1 in X and 1 to 0 in Y).</span></span>

<span data-ttu-id="43aff-135">El sombreador de píxeles recibe la posición interpolada y las coordenadas de textura interpoladas.</span><span class="sxs-lookup"><span data-stu-id="43aff-135">The pixel shader receives the interpolated position and the interpolated texture coordinates.</span></span> <span data-ttu-id="43aff-136">Todo lo necesario para realizar la prueba de profundidad es ahora en esta coordenada de textura.</span><span class="sxs-lookup"><span data-stu-id="43aff-136">Everything needed to perform the depth test is now in this texture coordinate.</span></span> <span data-ttu-id="43aff-137">La prueba de profundidad se puede realizar ahora indizando el búfer de profundidad desde el primer paso con las coordenadas de textura X e y y comparando el valor de profundidad resultante con la coordenada de textura Z.</span><span class="sxs-lookup"><span data-stu-id="43aff-137">The depth test can now be performed by indexing the depth buffer from the first pass with the X and Y texture coordinates and comparing the resulting depth value against the Z-texture coordinate.</span></span>

<span data-ttu-id="43aff-138">**Figura 4. Segundo paso de la asignación de sombra básica**</span><span class="sxs-lookup"><span data-stu-id="43aff-138">**Figure 4. Second pass of basic shadow mapping**</span></span>

![segundo paso de la asignación de sombra básica](images/second-pass-of-basic-shadow-mapping.png)

## <a name="shadow-map-artifacts"></a><span data-ttu-id="43aff-140">Artefactos de mapa de sombras</span><span class="sxs-lookup"><span data-stu-id="43aff-140">Shadow Map Artifacts</span></span>

<span data-ttu-id="43aff-141">El algoritmo de mapa de profundidad de sombra es el algoritmo de sombreado en tiempo real más utilizado, pero todavía produce varios artefactos que requieren mitigación.</span><span class="sxs-lookup"><span data-stu-id="43aff-141">The shadow depth map algorithm is the most widely used real-time shadowing algorithm, but still produces several artifacts requiring mitigation.</span></span> <span data-ttu-id="43aff-142">A continuación se resumen los tipos de artefactos que se pueden producir.</span><span class="sxs-lookup"><span data-stu-id="43aff-142">The types of artifacts that can occur are summarized next.</span></span>

### <a name="perspective-aliasing"></a><span data-ttu-id="43aff-143">Alias de perspectiva</span><span class="sxs-lookup"><span data-stu-id="43aff-143">Perspective Aliasing</span></span>

<span data-ttu-id="43aff-144">El alias de perspectiva, un artefacto común, se muestra en la figura 5.</span><span class="sxs-lookup"><span data-stu-id="43aff-144">Perspective aliasing, a common artifact, is shown in Figure 5.</span></span> <span data-ttu-id="43aff-145">Se produce cuando la asignación de píxeles en el espacio de la vista a textura en el mapa de sombras no es una relación de uno a uno.</span><span class="sxs-lookup"><span data-stu-id="43aff-145">It occurs when the mapping of pixels in view space to texels in the shadow map is not a one-to-one ratio.</span></span> <span data-ttu-id="43aff-146">Esto se debe a que los píxeles cercanos al plano próximo están más juntos y requieren una resolución de mapa de sombras superior.</span><span class="sxs-lookup"><span data-stu-id="43aff-146">This is because pixels close to the near plane are closer together and require a higher shadow map resolution.</span></span>

<span data-ttu-id="43aff-147">En la ilustración 6 se muestra un mapa de sombras y un frustum de vista.</span><span class="sxs-lookup"><span data-stu-id="43aff-147">Figure 6 shows a shadow map and a view frustum.</span></span> <span data-ttu-id="43aff-148">Cerca del ojo, los píxeles están más juntos y muchos píxeles se asignan a la misma sombra textura.</span><span class="sxs-lookup"><span data-stu-id="43aff-148">Near the eye, the pixels are closer together, and many pixels map to the same shadow texels.</span></span> <span data-ttu-id="43aff-149">Los píxeles del plano lejano se distribuyen, lo que reduce el alias de perspectiva.</span><span class="sxs-lookup"><span data-stu-id="43aff-149">The pixels by the far plane are spread out, thereby reducing perspective aliasing.</span></span>

<span data-ttu-id="43aff-150">**Figura 5. Alias de perspectiva alta (izquierda) frente a alias de perspectiva baja (derecha)**</span><span class="sxs-lookup"><span data-stu-id="43aff-150">**Figure 5. High-perspective aliasing (left) vs. low-perspective aliasing (right)**</span></span>

![alias de perspectiva alta (izquierda) frente a alias de perspectiva baja (derecha)](images/high-perspective-aliasing-vs-low-perspective-aliasing.jpg)

<span data-ttu-id="43aff-152">Para la imagen a la izquierda, el alias de perspectiva es mayor; hay demasiados píxeles de espacio ocular asignados al mismo textura de mapa de sombras.</span><span class="sxs-lookup"><span data-stu-id="43aff-152">For the image at left, perspective aliasing is higher; too many eye-space pixels map to the same shadow-map texels.</span></span> <span data-ttu-id="43aff-153">En la imagen de la derecha, el alias de perspectiva es bajo porque hay una asignación 1:1 entre los píxeles de espacio de ojo y el textura de mapa de sombras.</span><span class="sxs-lookup"><span data-stu-id="43aff-153">In the image at right, perspective aliasing is low because there is a 1:1 mapping between the eye-space pixels and shadow-map texels.</span></span>

<span data-ttu-id="43aff-154">**Figura 6. Ver el frustum con el mapa de instantáneas**</span><span class="sxs-lookup"><span data-stu-id="43aff-154">**Figure 6. View frustum with shadow map**</span></span>

![ver el frustum con el mapa de instantáneas](images/view-frustum-with-shadow-map.jpg)

<span data-ttu-id="43aff-156">Los píxeles claros del plano lejano representan el alias de baja perspectiva y los píxeles oscuros del plano próximo representan un alias de perspectiva alta.</span><span class="sxs-lookup"><span data-stu-id="43aff-156">Light pixels in the far plane represent low-perspective aliasing, and dark pixels in the near plane represent high-perspective aliasing.</span></span>

<span data-ttu-id="43aff-157">La resolución de mapa de sombras también puede ser demasiado alta.</span><span class="sxs-lookup"><span data-stu-id="43aff-157">Shadow map resolution can also be too high.</span></span> <span data-ttu-id="43aff-158">Aunque una resolución mayor es menos apreciable, no obstante, puede dar lugar a objetos pequeños, como hilos de teléfono, no sombras.</span><span class="sxs-lookup"><span data-stu-id="43aff-158">Although a higher resolution is less noticeable, it nevertheless can result in small objects, such as telephone wires, not casting shadows.</span></span> <span data-ttu-id="43aff-159">Además, si la resolución es demasiado alta, pueden producirse graves problemas de rendimiento debido a los patrones de acceso de textura.</span><span class="sxs-lookup"><span data-stu-id="43aff-159">Also, having too high of a resolution can cause severe performance issues because of texture access patterns.</span></span>

<span data-ttu-id="43aff-160">Mapas de sombra de perspectiva (PSMs) y mapas de sombra de perspectiva de espacio ligero (LSPSMs) intentan direccionar el alias de la perspectiva mediante la inclinación de la matriz de proyección de la luz para colocar más textura cerca del ojo en el que se necesitan.</span><span class="sxs-lookup"><span data-stu-id="43aff-160">Perspective shadow maps (PSMs) and light space perspective shadow maps (LSPSMs) attempt to address perspective aliasing by skewing the light's projection matrix in order to place more texels near the eye where they are needed.</span></span> <span data-ttu-id="43aff-161">Desafortunadamente, ninguna de las técnicas puede resolver el alias de perspectiva.</span><span class="sxs-lookup"><span data-stu-id="43aff-161">Unfortunately, neither technique is able to solve the perspective aliasing.</span></span> <span data-ttu-id="43aff-162">La parametrización de la transformación necesaria para asignar píxeles de espacio ocular a textura en la instantánea no se puede enlazar mediante un sesgo lineal.</span><span class="sxs-lookup"><span data-stu-id="43aff-162">The parameterization of the transform required to map eye-space pixels to texels in the shadow map cannot be bound by a linear skew.</span></span> <span data-ttu-id="43aff-163">Se requiere una parametrización logarítmica.</span><span class="sxs-lookup"><span data-stu-id="43aff-163">A logarithmic parameterization is required.</span></span> <span data-ttu-id="43aff-164">PSMs colocan muchos detalles cerca del ojo, lo que hace que las sombras lejanas sean de baja calidad o incluso desaparezcan.</span><span class="sxs-lookup"><span data-stu-id="43aff-164">PSMs put too much detail near the eye, causing distant shadows to be of low quality or to even disappear.</span></span> <span data-ttu-id="43aff-165">LSPSMs realiza un mejor trabajo de buscar un medio entre una resolución cada vez mayor cerca del ojo y mantener los detalles suficientes para los objetos alejados.</span><span class="sxs-lookup"><span data-stu-id="43aff-165">LSPSMs do a better job of finding a middle ground between increasing resolution near the eye, and leaving enough detail for objects far away.</span></span> <span data-ttu-id="43aff-166">Ambas técnicas degeneraban sombras ortográficas en algunas configuraciones de escena.</span><span class="sxs-lookup"><span data-stu-id="43aff-166">Both techniques degenerate to orthographic shadows in some scene configurations.</span></span> <span data-ttu-id="43aff-167">Esta desgeneración puede ser responsable de la representación de un mapa de sombras independiente para cada cara del frustum de la vista, aunque esto resulta caro.</span><span class="sxs-lookup"><span data-stu-id="43aff-167">This degeneration can be counteracted by rendering a separate shadow map for each face of the view frustum, although this is expensive.</span></span> <span data-ttu-id="43aff-168">Los mapas de sombras de perspectiva logarítmica (LogPSMs) también representan un mapa independiente por cada aspecto del frustum de la vista.</span><span class="sxs-lookup"><span data-stu-id="43aff-168">Logarithmic perspective shadow maps (LogPSMs) also render a separate map per face of the view frustum.</span></span> <span data-ttu-id="43aff-169">Esta técnica usa la rasterización no lineal para colocar más textura cerca del ojo.</span><span class="sxs-lookup"><span data-stu-id="43aff-169">This technique uses nonlinear rasterization to place more texels near the eye.</span></span> <span data-ttu-id="43aff-170">El hardware de clase D3D10 y D3D11 no admite la rasterización no lineal.</span><span class="sxs-lookup"><span data-stu-id="43aff-170">D3D10 and D3D11-class hardware do not support nonlinear rasterization.</span></span> <span data-ttu-id="43aff-171">Para obtener más información sobre estas técnicas y algoritmos, vea la sección referencias.</span><span class="sxs-lookup"><span data-stu-id="43aff-171">For more information about these techniques and algorithms, see the References section.</span></span>

<span data-ttu-id="43aff-172">Los mapas de sombras en cascada (CSMs) son la técnica más popular para tratar con el alias de perspectiva.</span><span class="sxs-lookup"><span data-stu-id="43aff-172">Cascaded shadow maps (CSMs) are the most popular technique for dealing with perspective aliasing.</span></span> <span data-ttu-id="43aff-173">Aunque CSMs se puede combinar con PSMs y LSPSMs, no es necesario.</span><span class="sxs-lookup"><span data-stu-id="43aff-173">Although CSMs can be combined with PSMs and LSPSMs, it's unnecessary.</span></span> <span data-ttu-id="43aff-174">El uso de CSMs para corregir errores de alias de perspectiva se trata en el artículo complementario, [mapas de instantáneas en cascada](/windows/desktop/DxTechArts/cascaded-shadow-maps).</span><span class="sxs-lookup"><span data-stu-id="43aff-174">Using CSMs to fix perspective aliasing errors is addressed in the companion article, [Cascaded Shadow Maps](/windows/desktop/DxTechArts/cascaded-shadow-maps).</span></span>

### <a name="projective-aliasing"></a><span data-ttu-id="43aff-175">Alias proyectado</span><span class="sxs-lookup"><span data-stu-id="43aff-175">Projective Aliasing</span></span>

<span data-ttu-id="43aff-176">El alias proyectado es más difícil de mostrar que el alias de perspectiva.</span><span class="sxs-lookup"><span data-stu-id="43aff-176">Projective aliasing is harder to show than perspective aliasing.</span></span> <span data-ttu-id="43aff-177">Las sombras destiendes resaltadas en la figura 7 muestran errores de alias proyectados.</span><span class="sxs-lookup"><span data-stu-id="43aff-177">The distended shadows highlighted in Figure 7 demonstrate projective aliasing errors.</span></span> <span data-ttu-id="43aff-178">El alias proyectado se produce cuando la asignación entre textura en el espacio de la cámara a textura en el espacio de la luz no es una relación de uno a uno; Esto se debe a la orientación de la geometría con respecto a la cámara ligera.</span><span class="sxs-lookup"><span data-stu-id="43aff-178">Projective aliasing occurs when the mapping between texels in camera space to texels in light space is not a one-to-one ratio; this is because of the orientation of the geometry with respect to the light camera.</span></span> <span data-ttu-id="43aff-179">El suavizado de contornos se produce como el plano tangente de la geometría se convierte en paralelo a los rayos claros.</span><span class="sxs-lookup"><span data-stu-id="43aff-179">Projective aliasing occurs as the tangent plane of the geometry becomes parallel to the light rays.</span></span>

<span data-ttu-id="43aff-180">**Figura 7. Alias de proyección alta frente a alias bajo de proyecto**</span><span class="sxs-lookup"><span data-stu-id="43aff-180">**Figure 7. High-projective aliasing vs. low-projective aliasing**</span></span>

![alias de proyección alta frente a alias bajo de proyecto](images/high-projective-aliasing-vs-low%20projective-aliasing.jpg)

<span data-ttu-id="43aff-182">Las técnicas que se usan para mitigar los errores de alias de perspectiva también mitigan el alias proyectado.</span><span class="sxs-lookup"><span data-stu-id="43aff-182">Techniques used to alleviate perspective aliasing errors also mitigate projective aliasing.</span></span> <span data-ttu-id="43aff-183">El alias proyectado se produce cuando la superficie normal es ortogonal a la luz; estas superficies deben recibir menos luz en función de las ecuaciones de iluminación difusa.</span><span class="sxs-lookup"><span data-stu-id="43aff-183">Projective aliasing occurs when the surface normal is orthogonal to the light; these surfaces should be receiving less light based on diffuse lighting equations.</span></span>

### <a name="shadow-acne-and-erroneous-self-shadowing"></a><span data-ttu-id="43aff-184">Sombra acne y Self-Shadowing errónea</span><span class="sxs-lookup"><span data-stu-id="43aff-184">Shadow Acne and Erroneous Self-Shadowing</span></span>

<span data-ttu-id="43aff-185">Shadow Acne (Figura 8), un término sinónimo de sombra automática errónea, se produce cuando la asignación de instantáneas cuantifica la profundidad sobre un textura completo.</span><span class="sxs-lookup"><span data-stu-id="43aff-185">Shadow acne (Figure 8), a term synonymous with erroneous self-shadowing, occurs when the shadow map quantizes the depth over an entire texel.</span></span> <span data-ttu-id="43aff-186">Cuando el sombreador compara una profundidad real con este valor, es probable que se realice una sombra automática, ya que no se realizará la sombra.</span><span class="sxs-lookup"><span data-stu-id="43aff-186">When the shader compares an actual depth against this value, it is as likely to be self-shadowed as it is to be unshadowed.</span></span>

<span data-ttu-id="43aff-187">Otro motivo de la sombra acne es que el textura en el espacio de la luz está tan cerca de la profundidad de la textura correspondiente en el mapa de profundidad que los errores de precisión hacen que la prueba de profundidad falle erróneamente.</span><span class="sxs-lookup"><span data-stu-id="43aff-187">Another reason for shadow acne is that the texel in light space is so close to the depth of the corresponding texel in the depth map that precision errors cause the depth test to erroneously fail.</span></span> <span data-ttu-id="43aff-188">Una razón para esta diferencia de precisión es que el mapa de profundidad se calculó por el hardware de rasterización de funciones fijas, mientras que la profundidad que se compara fue calculada por el sombreador.</span><span class="sxs-lookup"><span data-stu-id="43aff-188">One reason for this precision difference is that the depth map was calculated by the fixed-function rasterization hardware, while the depth being compared was computed by the shader.</span></span> <span data-ttu-id="43aff-189">El alias proyectado también puede producir sombras acne.</span><span class="sxs-lookup"><span data-stu-id="43aff-189">Projective aliasing can also cause shadow acne.</span></span>

<span data-ttu-id="43aff-190">**Ilustración 8. Artefacto acne de sombra**</span><span class="sxs-lookup"><span data-stu-id="43aff-190">**Figure 8. Shadow acne artifact**</span></span>

![artefacto acne de sombra](images/shadow-acne-artifact.jpg)

<span data-ttu-id="43aff-192">Tal y como se muestra en la imagen izquierda, algunos de los píxeles no pudieron realizar la prueba de profundidad y crearon artefactos moteados y patrones trama moiré.</span><span class="sxs-lookup"><span data-stu-id="43aff-192">As shown in the left image, some of pixels failed the depth test and created speckled artifacts and moiré patterns.</span></span> <span data-ttu-id="43aff-193">Con el fin de reducir la sombra automática errónea, los límites del plano próximo y el plano lejano del frustum de la vista del espacio de la luz deben calcularse de la forma más estricta posible.</span><span class="sxs-lookup"><span data-stu-id="43aff-193">In order to reduce erroneous self-shadowing, the bounds on the near plane and the far plane for the light space view frustum should be calculated as tightly as possible.</span></span> <span data-ttu-id="43aff-194">La diferencia de profundidad basada en la escala de pendiente y otros tipos de sesgo son otras soluciones que se usan para mitigar la acne de sombra.</span><span class="sxs-lookup"><span data-stu-id="43aff-194">The slope scale-based depth bias and other types of bias are other solutions used to mitigate shadow acne.</span></span>

### <a name="peter-panning"></a><span data-ttu-id="43aff-195">Movimiento panorámico de Peter</span><span class="sxs-lookup"><span data-stu-id="43aff-195">Peter Panning</span></span>

<span data-ttu-id="43aff-196">El término *movimiento panorámico de Peter* deriva su nombre del carácter de libro de un elemento secundario cuya sombra se desconectó y que podría volar.</span><span class="sxs-lookup"><span data-stu-id="43aff-196">The term *Peter Panning* derives its name from a children's book character whose shadow became detached and who could fly.</span></span> <span data-ttu-id="43aff-197">Este artefacto hace que los objetos a los que les faltan sombras parezcan desasociados y flotando por encima de la superficie (Figura 9).</span><span class="sxs-lookup"><span data-stu-id="43aff-197">This artifact makes objects with missing shadows appear to be detached from and to float above the surface (Figure 9).</span></span>

<span data-ttu-id="43aff-198">**Ilustración 9. El artefacto de movimiento panorámico Peter**</span><span class="sxs-lookup"><span data-stu-id="43aff-198">**Figure 9. Peter Panning artifact**</span></span>

![el artefacto de movimiento panorámico Peter](images/peter-panning-artifact.jpg)

<span data-ttu-id="43aff-200">En la imagen de la izquierda, la sombra se separa del objeto, lo que crea un efecto flotante.</span><span class="sxs-lookup"><span data-stu-id="43aff-200">In the image at left, the shadow is detached from the object, creating a floating effect.</span></span>

<span data-ttu-id="43aff-201">Una técnica para quitar Surface acne es agregar algún valor a la posición en píxeles en el espacio de la luz. Esto se denomina agregar un desplazamiento de profundidad.</span><span class="sxs-lookup"><span data-stu-id="43aff-201">One technique for removing surface acne is to add some value to pixel position in light space; this is called adding a depth offset.</span></span> <span data-ttu-id="43aff-202">Peter el movimiento panorámico se produce cuando el desplazamiento de profundidad utilizado es demasiado grande.</span><span class="sxs-lookup"><span data-stu-id="43aff-202">Peter Panning results when the depth offset used is too large.</span></span> <span data-ttu-id="43aff-203">En este caso, el desplazamiento de profundidad hace que la prueba de profundidad pase erróneamente.</span><span class="sxs-lookup"><span data-stu-id="43aff-203">In this case the depth offset causes the depth test to erroneously pass.</span></span> <span data-ttu-id="43aff-204">Al igual que Shadow acne, Peter saning se agrava cuando no hay suficiente precisión en el búfer de profundidad.</span><span class="sxs-lookup"><span data-stu-id="43aff-204">Like shadow acne, Peter Panning is aggravated when there is insufficient precision in the depth buffer.</span></span> <span data-ttu-id="43aff-205">Calcular los planos cercanos y los planos lejanos también ayuda a evitar la panorámica de Peter.</span><span class="sxs-lookup"><span data-stu-id="43aff-205">Calculating tight near planes and far planes also helps avoid Peter Panning.</span></span>

## <a name="techniques-to-improve-shadow-maps"></a><span data-ttu-id="43aff-206">Técnicas para mejorar las asignaciones de instantáneas</span><span class="sxs-lookup"><span data-stu-id="43aff-206">Techniques to Improve Shadow Maps</span></span>

<span data-ttu-id="43aff-207">Agregar sombras a un título es un proceso.</span><span class="sxs-lookup"><span data-stu-id="43aff-207">Adding shadows to a title is a process.</span></span> <span data-ttu-id="43aff-208">El primer paso es conseguir que funcionen los mapas de instantáneas básicos.</span><span class="sxs-lookup"><span data-stu-id="43aff-208">The first step is to get basic shadow maps working.</span></span> <span data-ttu-id="43aff-209">La segunda consiste en asegurarse de que todos los cálculos básicos se realicen de forma óptima: Frusta con la mayor precisión posible, que los planos cercanos y alejados se ajustan de manera estricta, se usa la diferencia de escala de pendiente, etc.</span><span class="sxs-lookup"><span data-stu-id="43aff-209">The second is to ensure all basic calculations are done optimally: frusta fit as tightly as possible, near/far planes fit tightly, slope-scaled bias is used, and so on.</span></span> <span data-ttu-id="43aff-210">Una vez que las sombras básicas están habilitadas y tienen la apariencia que sea posible, el desarrollador tiene una idea más clara de los algoritmos que son necesarios para obtener las sombras con suficiente fidelidad.</span><span class="sxs-lookup"><span data-stu-id="43aff-210">Once basic shadows are enabled, and look as good as possible, the developer has a better idea of what algorithms are needed to get the shadows to sufficient fidelity.</span></span> <span data-ttu-id="43aff-211">En esta sección se proporcionan sugerencias básicas que pueden ser necesarias para obtener mapas de instantáneas básicos.</span><span class="sxs-lookup"><span data-stu-id="43aff-211">Basic tips that may be needed to get basic shadow maps looking at their best are given in this section.</span></span>

### <a name="slope-scale-depth-bias"></a><span data-ttu-id="43aff-212">Slope-Scale sesgo de profundidad</span><span class="sxs-lookup"><span data-stu-id="43aff-212">Slope-Scale Depth Bias</span></span>

<span data-ttu-id="43aff-213">Como se mencionó anteriormente, la sombra automática puede conducir a la sombra de acne.</span><span class="sxs-lookup"><span data-stu-id="43aff-213">As previously mentioned, self-shadowing can lead to shadow acne.</span></span> <span data-ttu-id="43aff-214">Agregar demasiadas sesgo puede dar lugar a la panorámica de Peter.</span><span class="sxs-lookup"><span data-stu-id="43aff-214">Adding too much bias can result in Peter Panning.</span></span> <span data-ttu-id="43aff-215">Además, los polígonos con pendientes pendientes (con respecto a la luz) sufren más de un alias proyectado que polígonos con pendientes superficiales (con respecto a la luz).</span><span class="sxs-lookup"><span data-stu-id="43aff-215">Additionally, polygons with steep slopes (relative to the light) suffer more from projective aliasing than polygons with shallow slopes (relative to the light).</span></span> <span data-ttu-id="43aff-216">Debido a esto, cada valor de mapa de profundidad puede necesitar un desplazamiento diferente en función de la pendiente del polígono con respecto a la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-216">Because of this, each depth map value may need a different offset depending on the polygon's slope relative to the light.</span></span>

<span data-ttu-id="43aff-217">El hardware de Direct3D 10 tiene la capacidad de sesgar un polígono en función de su pendiente con respecto a la dirección de la vista.</span><span class="sxs-lookup"><span data-stu-id="43aff-217">Direct3D 10 hardware has the ability to bias a polygon based on its slope with respect to the view direction.</span></span> <span data-ttu-id="43aff-218">Esto tiene el efecto de aplicar una gran diferencia a un polígono que se ve borde hacia arriba en la dirección de la luz, pero no aplica ningún sesgo a un polígono que enfrente directamente la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-218">This has the effect of applying a large bias to a polygon that is viewed edge-on to the light direction, but not applying any bias to a polygon facing the light directly.</span></span> <span data-ttu-id="43aff-219">En la figura 10 se muestra cómo dos píxeles adyacentes pueden alternar entre el sombreado y el sombreado al realizar pruebas en la misma pendiente no sesgada.</span><span class="sxs-lookup"><span data-stu-id="43aff-219">Figure 10 illustrates how two neighboring pixels can alternate between shadowed and unshadowed when testing against the same unbiased slope.</span></span>

<span data-ttu-id="43aff-220">**Figura 10. Profundidad escalada de pendiente: diferencia respecto a profundidad no sesgada**</span><span class="sxs-lookup"><span data-stu-id="43aff-220">**Figure 10. Slope scaled depth-bias compared to unbiased depth**</span></span>

![profundidad escalada de pendiente: diferencia respecto a profundidad no sesgada](images/slope-scaled-depth-bias-compared-to-unbiased-depth.png)

### <a name="calculating-a-tight-projection"></a><span data-ttu-id="43aff-222">Calcular una proyección estrecha</span><span class="sxs-lookup"><span data-stu-id="43aff-222">Calculating a Tight Projection</span></span>

<span data-ttu-id="43aff-223">Ajustar estrechamente la proyección de la luz al frustum de la vista aumenta la cobertura de la asignación de sombras.</span><span class="sxs-lookup"><span data-stu-id="43aff-223">Tightly fitting the light's projection to the view frustum increases the shadow map coverage.</span></span> <span data-ttu-id="43aff-224">En la figura 11 se muestra que el uso de una proyección arbitraria, o la conexión de la proyección a los límites de la escena, da como resultado un alias de perspectiva mayor.</span><span class="sxs-lookup"><span data-stu-id="43aff-224">Figure 11 illustrates that using an arbitrary projection, or fitting the projection to the scene bounds, results in higher perspective aliasing.</span></span>

<span data-ttu-id="43aff-225">**Figura 11. El frustum de sombra y el frustum de sombra arbitrarios se ajustan a la escena**</span><span class="sxs-lookup"><span data-stu-id="43aff-225">**Figure 11. Arbitrary shadow frustum and shadow frustum fit to scene**</span></span>

![el frustum de sombra y el frustum de sombra arbitrarios se ajustan a la escena](images/arbitrary-shadow-frustum-and-shadow-frustum-fit-to-scene.jpg)

<span data-ttu-id="43aff-227">La vista es desde el punto de vista de la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-227">The view is from the point of view of the light.</span></span> <span data-ttu-id="43aff-228">El trapezoide representa el frustum de la cámara de la vista.</span><span class="sxs-lookup"><span data-stu-id="43aff-228">The trapezoid represents the view camera's frustum.</span></span> <span data-ttu-id="43aff-229">La cuadrícula dibujada sobre la imagen representa la asignación de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="43aff-229">The grid drawn over the image represents the shadow map.</span></span> <span data-ttu-id="43aff-230">La imagen de la derecha muestra que la misma asignación de sombra de resolución crea más cobertura de textura cuando se ajusta mejor a la escena.</span><span class="sxs-lookup"><span data-stu-id="43aff-230">The image on the right shows that the same resolution shadow map creates more texel coverage when it is fit more tightly to the scene.</span></span>

<span data-ttu-id="43aff-231">En la ilustración 12 se muestran Frustums que se ajustan correctamente.</span><span class="sxs-lookup"><span data-stu-id="43aff-231">Figure 12 illustrates frustums that are correctly fit.</span></span> <span data-ttu-id="43aff-232">Para calcular la proyección, los ocho puntos que componen el frustum de la vista se transforman en el espacio de la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-232">To calculate the projection, the eight points that make up the view frustum are transformed into light space.</span></span> <span data-ttu-id="43aff-233">A continuación, se encuentran los valores mínimo y máximo de X e y.</span><span class="sxs-lookup"><span data-stu-id="43aff-233">Next, the minimum and maximum values in X and Y are found.</span></span> <span data-ttu-id="43aff-234">Estos valores componen los límites de una proyección ortográfica.</span><span class="sxs-lookup"><span data-stu-id="43aff-234">These values make up the bounds for an orthographic projection.</span></span>

<span data-ttu-id="43aff-235">**Figura 12. Ajuste de proyección de sombra para ver el frustum**</span><span class="sxs-lookup"><span data-stu-id="43aff-235">**Figure 12. Shadow projection fit to view frustum**</span></span>

![ajuste de proyección de sombra para ver el frustum](images/shadow-projection-fit-to-view-frustum.jpg)

<span data-ttu-id="43aff-237">También es posible recortar el frustum al AABB de escenas para obtener un límite más estricto.</span><span class="sxs-lookup"><span data-stu-id="43aff-237">It is also possible to clip the frustum to the scene AABB to get a tighter bound.</span></span> <span data-ttu-id="43aff-238">Esto no se recomienda en todos los casos, ya que esto puede cambiar el tamaño de la proyección de la cámara Light de fotograma a fotograma.</span><span class="sxs-lookup"><span data-stu-id="43aff-238">This is not advised in all cases because this can change the size of the light camera's projection from frame to frame.</span></span> <span data-ttu-id="43aff-239">Muchas técnicas, como las descritas en la sección mover la luz Texel-Sized incrementos, proporcionan mejores resultados cuando el tamaño de la proyección de la luz permanece constante en cada fotograma.</span><span class="sxs-lookup"><span data-stu-id="43aff-239">Many techniques, such as those described in the section Moving the Light Texel-Sized Increments, give better results when the size of the light's projection remains constant in every frame.</span></span>

### <a name="calculating-the-near-plane-and-far-plane"></a><span data-ttu-id="43aff-240">Cálculo del plano próximo y del plano lejano</span><span class="sxs-lookup"><span data-stu-id="43aff-240">Calculating the Near Plane and Far Plane</span></span>

<span data-ttu-id="43aff-241">El plano cercano y el plano lejano son las piezas finales necesarias para calcular la matriz de proyección.</span><span class="sxs-lookup"><span data-stu-id="43aff-241">The near plane and far plane are the final pieces required to calculate the projection matrix.</span></span> <span data-ttu-id="43aff-242">Cuanto más juntos sean los planos, más precisos serán los valores en el búfer de profundidad.</span><span class="sxs-lookup"><span data-stu-id="43aff-242">The more closely together the planes are, the more precise the values in the depth buffer.</span></span>

<span data-ttu-id="43aff-243">El búfer de profundidad puede ser de 16 bits, de 24 bits o de 32 bits, con valores entre 0 y 1.</span><span class="sxs-lookup"><span data-stu-id="43aff-243">The depth buffer can be 16-bit, 24-bit, or 32-bit, with values between 0 and 1.</span></span> <span data-ttu-id="43aff-244">Por lo general, los búferes de profundidad son de punto fijo, y los valores cercanos al plano cercano se agrupan más estrechamente que los valores cercanos al plano lejano.</span><span class="sxs-lookup"><span data-stu-id="43aff-244">Generally, depth buffers are fixed point, with the values close to the near plane grouped more closely together than the values close to the far plane.</span></span> <span data-ttu-id="43aff-245">El grado de precisión disponible para el búfer de profundidad viene determinado por la relación entre el plano cercano y el plano lejano.</span><span class="sxs-lookup"><span data-stu-id="43aff-245">The degree of precision available to the depth buffer is determined by the ratio of the near plane to the far plane.</span></span> <span data-ttu-id="43aff-246">El uso del plano Near/Far más estrecho posible podría permitir el uso de un búfer de profundidad de 16 bits.</span><span class="sxs-lookup"><span data-stu-id="43aff-246">Using the tightest possible near/far plane could allow use of a 16-bit depth buffer.</span></span> <span data-ttu-id="43aff-247">Un búfer de profundidad de 16 bits podría reducir el uso de memoria al tiempo que aumenta la velocidad de procesamiento.</span><span class="sxs-lookup"><span data-stu-id="43aff-247">A 16-bit depth buffer could reduce the use of memory while increasing processing speed.</span></span>

### <a name="aabb-based-near-plane-and-far-plane"></a><span data-ttu-id="43aff-248">AABB-Based plano próximo y plano lejano</span><span class="sxs-lookup"><span data-stu-id="43aff-248">AABB-Based Near Plane and Far Plane</span></span>

<span data-ttu-id="43aff-249">Una manera fácil y Naive de calcular el plano cercano y el plano lejano es transformar el volumen de límite de la escena en el espacio de la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-249">An easy and naive way to calculate the near plane and far plane is to transform the scene's bounding volume into light space.</span></span> <span data-ttu-id="43aff-250">El menor valor de la coordenada Z es el plano cercano y el mayor valor de la coordenada Z es el plano lejano.</span><span class="sxs-lookup"><span data-stu-id="43aff-250">The smallest Z-coordinate value is the near plane and the largest Z-coordinate value is the far plane.</span></span> <span data-ttu-id="43aff-251">Este enfoque es suficiente para muchas configuraciones de la escena y la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-251">For many configurations of the scene and light, this approach is sufficient.</span></span> <span data-ttu-id="43aff-252">Sin embargo, en el peor de los casos, se puede producir una pérdida significativa de precisión en el búfer de profundidad. La figura 13 muestra este escenario.</span><span class="sxs-lookup"><span data-stu-id="43aff-252">The worst case scenario, however, can result in a significant loss of precision in the depth buffer; Figure 13 shows such a scenario.</span></span> <span data-ttu-id="43aff-253">Aquí el intervalo del plano próximo al plano lejano es cuatro veces más grande de lo necesario.</span><span class="sxs-lookup"><span data-stu-id="43aff-253">Here the range of the near plane to the far plane is four times larger than necessary.</span></span>

<span data-ttu-id="43aff-254">El frustum de vista de la figura 13 se eligió intencionadamente para ser pequeño.</span><span class="sxs-lookup"><span data-stu-id="43aff-254">The view frustum in Figure 13 was purposely chosen to be small.</span></span> <span data-ttu-id="43aff-255">Un frustum de vista pequeño se muestra en una escena muy grande que se compone de pilares que se extienden desde la cámara de vista.</span><span class="sxs-lookup"><span data-stu-id="43aff-255">A small view frustum is shown in a very large scene consisting of pillars extending out from the view camera.</span></span> <span data-ttu-id="43aff-256">El uso del AABB de escenas para los planos Near y Far no es óptimo.</span><span class="sxs-lookup"><span data-stu-id="43aff-256">Using the Scene AABB for the near and far planes is not optimal.</span></span> <span data-ttu-id="43aff-257">El algoritmo CSM descrito en el artículo técnico de [mapas de instantáneas en cascada](/windows/desktop/DxTechArts/cascaded-shadow-maps) debe calcular planos cercanos y alejados para un Frustums muy pequeño.</span><span class="sxs-lookup"><span data-stu-id="43aff-257">The CSM algorithm described in the [Cascaded Shadow Maps](/windows/desktop/DxTechArts/cascaded-shadow-maps) technical article must calculate near and far planes for very small frustums.</span></span>

<span data-ttu-id="43aff-258">**Figura 13. Planos cercanos y lejanos basados en la escena AABB**</span><span class="sxs-lookup"><span data-stu-id="43aff-258">**Figure 13. Near and far planes based on Scene AABB**</span></span>

![planos cercanos y lejanos basados en la escena AABB](images/near-far-%20planes-based-on-scene-aabb.jpg)

### <a name="frustum-based-near-plane-and-far-plane"></a><span data-ttu-id="43aff-260">Frustum-Based plano próximo y plano lejano</span><span class="sxs-lookup"><span data-stu-id="43aff-260">Frustum-Based Near Plane and Far Plane</span></span>

<span data-ttu-id="43aff-261">Otra técnica para calcular los planos Near y Far es transformar el frustum en el espacio de luz y usar los valores mínimo y máximo en Z como los planos cercano y lejano, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="43aff-261">Another technique for calculating the near and far planes is to transform the frustum into light space and use the minimal and maximal values in Z as the near and the far planes, respectively.</span></span> <span data-ttu-id="43aff-262">En la figura 14 se ilustran los dos problemas de este enfoque.</span><span class="sxs-lookup"><span data-stu-id="43aff-262">Figure 14 illustrates the two issues with this approach.</span></span> <span data-ttu-id="43aff-263">En primer lugar, el cálculo es demasiado conservador, como se muestra cuando el frustum se extiende más allá de la geometría de la escena.</span><span class="sxs-lookup"><span data-stu-id="43aff-263">First, the calculation is too conservative, as shown when the frustum extends beyond the scene's geometry.</span></span> <span data-ttu-id="43aff-264">En segundo lugar, el plano próximo podría estar demasiado apretado, lo que provocaría la recorte de las sombras.</span><span class="sxs-lookup"><span data-stu-id="43aff-264">Second, the near plane could be too tight, causing shadow casters to be cropped.</span></span>

<span data-ttu-id="43aff-265">**Figura 14. Planos Near y Far basados únicamente en el frustum de vista**</span><span class="sxs-lookup"><span data-stu-id="43aff-265">**Figure 14. Near and far planes based solely on view frustum**</span></span>

![planos Near y Far basados únicamente en el frustum de vista](images/near-far-planes-based-solely-on-view-frustum.jpg)

### <a name="light-frustum-intersected-with-scene-to-calculate-near-and-far-planes"></a><span data-ttu-id="43aff-267">Frustum ligero intersectado con la escena para calcular planos cercanos y alejados</span><span class="sxs-lookup"><span data-stu-id="43aff-267">Light Frustum Intersected with Scene to Calculate Near and Far Planes</span></span>

<span data-ttu-id="43aff-268">La manera adecuada de calcular los planos Near y Far se muestra en la figura 15.</span><span class="sxs-lookup"><span data-stu-id="43aff-268">The proper way to calculate the near and far planes is shown in Figure 15.</span></span> <span data-ttu-id="43aff-269">Cuatro de los planos del frustum de la luz ortográfica se calcularon usando los valores mínimo y máximo de las coordenadas X e y del frustum de la vista en el espacio de la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-269">Four of the planes of the orthographic light frustum were calculated using the minimum and maximum of the X and Y coordinates of the view frustum in light space.</span></span> <span data-ttu-id="43aff-270">Los dos últimos planos del frustum de vista ortogonal son los planos próximo y lejano.</span><span class="sxs-lookup"><span data-stu-id="43aff-270">The last two planes of the orthogonal view frustum are the near and the far planes.</span></span> <span data-ttu-id="43aff-271">Para encontrar estos planos, los límites de la escena se recortan con los cuatro planos de frustum ligeros conocidos.</span><span class="sxs-lookup"><span data-stu-id="43aff-271">To find these planes, the scene's bounds are clipped against the four known light frustum planes.</span></span> <span data-ttu-id="43aff-272">Los valores Z más pequeños y mayores del límite recién recortado representan el plano próximo y el plano lejano, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="43aff-272">The smallest and largest Z-values from the newly clipped boundary represent the near plane and far plane, respectively.</span></span>

<span data-ttu-id="43aff-273">El código que realiza esta operación se encuentra en el ejemplo CascadedShadowMaps11.</span><span class="sxs-lookup"><span data-stu-id="43aff-273">The code that performs this operation is located in the CascadedShadowMaps11 sample.</span></span> <span data-ttu-id="43aff-274">Los ocho puntos que componen el AABB del mundo se transforman en un espacio de luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-274">The eight points that make up the world's AABB are transformed into light space.</span></span> <span data-ttu-id="43aff-275">La transformación de los puntos en el espacio claro simplifica las pruebas de recorte.</span><span class="sxs-lookup"><span data-stu-id="43aff-275">Transforming the points into light space simplifies the clipping tests.</span></span> <span data-ttu-id="43aff-276">Los cuatro planes conocidos del frustum de luz ahora se pueden representar como líneas.</span><span class="sxs-lookup"><span data-stu-id="43aff-276">The four known planes of the light frustum can now be represented as lines.</span></span> <span data-ttu-id="43aff-277">El volumen de límite de escenas en el espacio claro se puede representar como seis quadrilaterals.</span><span class="sxs-lookup"><span data-stu-id="43aff-277">The scenes bounding volume in light space can be represented as six quadrilaterals.</span></span> <span data-ttu-id="43aff-278">Estos 6 quadrilaterals se pueden convertir en 12 triángulos para el recorte basado en triángulo.</span><span class="sxs-lookup"><span data-stu-id="43aff-278">These 6 quadrilaterals can then be turned into 12 triangles for triangle-based clipping.</span></span> <span data-ttu-id="43aff-279">Los triángulos se recortan de los planos conocidos del frustum de vista (son líneas horizontales y verticales en X e y en el espacio de la luz).</span><span class="sxs-lookup"><span data-stu-id="43aff-279">The triangles are clipped against the known planes of the view frustum (these are horizontal and vertical lines in X and Y in light space).</span></span> <span data-ttu-id="43aff-280">Cuando se encuentra un punto de intersección en X e y, el triángulo 3D se recorta en ese punto.</span><span class="sxs-lookup"><span data-stu-id="43aff-280">When an intersection point is found in X and Y, the 3D triangle is clipped at that point.</span></span> <span data-ttu-id="43aff-281">Los valores Z mínimo y máximo de todos los triángulos recortados son el plano próximo y el plano lejano.</span><span class="sxs-lookup"><span data-stu-id="43aff-281">The minimum and maximum Z-values of all the clipped triangles are the near plane and far plane.</span></span> <span data-ttu-id="43aff-282">En el ejemplo CascadedShadowMaps11 se muestra cómo realizar este recorte en la función **ComputeNearAndFar** .</span><span class="sxs-lookup"><span data-stu-id="43aff-282">The CascadedShadowMaps11 sample shows how to perform this clipping in the **ComputeNearAndFar** function.</span></span>

<span data-ttu-id="43aff-283">Hay dos técnicas más que se pueden usar para calcular los planos más estrechos y cercanos posibles.</span><span class="sxs-lookup"><span data-stu-id="43aff-283">There are two more techniques that could be used to calculate the tightest possible near and far planes.</span></span> <span data-ttu-id="43aff-284">Estas técnicas no se muestran en el ejemplo CascadedShadowMaps.</span><span class="sxs-lookup"><span data-stu-id="43aff-284">These techniques are not shown in the CascadedShadowMaps sample.</span></span>

-   <span data-ttu-id="43aff-285">Incluso los planos Near y Far más estrechos se pueden calcular intersectando una jerarquía de una escena o objetos individuales en una escena en el frustum ligero.</span><span class="sxs-lookup"><span data-stu-id="43aff-285">Even tighter near and far planes could be calculated by intersecting a hierarchy of a scene or individual objects in a scene against the light frustum.</span></span> <span data-ttu-id="43aff-286">Esto sería cada vez más complejo.</span><span class="sxs-lookup"><span data-stu-id="43aff-286">This would be computationally more complex.</span></span> <span data-ttu-id="43aff-287">Aunque no se muestra en el ejemplo CascadedShadowMaps11, podría ser una técnica válida para algunos iconos.</span><span class="sxs-lookup"><span data-stu-id="43aff-287">While not illustrated in the CascadedShadowMaps11 sample, this could be a valid technique for some tiles.</span></span>
-   <span data-ttu-id="43aff-288">El plano lejano podría calcularse tomando el mínimo de:</span><span class="sxs-lookup"><span data-stu-id="43aff-288">The far plane could be calculated by taking the minimum of:</span></span>

    -   <span data-ttu-id="43aff-289">La profundidad más grande del frustum de la vista en el espacio de la luz.</span><span class="sxs-lookup"><span data-stu-id="43aff-289">The largest depth of the view frustum in light space.</span></span>
    -   <span data-ttu-id="43aff-290">La profundidad más grande de la intersección del frustum de la vista y el AABB de la escena.</span><span class="sxs-lookup"><span data-stu-id="43aff-290">The largest depth of the intersection of the view frustum and the scene AABB.</span></span>

<span data-ttu-id="43aff-291">Este enfoque puede ser problemático cuando se usa con mapas de instantáneas en cascada donde es posible indexar fuera de un frustum de vista.</span><span class="sxs-lookup"><span data-stu-id="43aff-291">This approach can be problematic when used with cascaded shadow maps where it is possible to index outside of a view frustum.</span></span> <span data-ttu-id="43aff-292">En este caso, es posible que falte geometría en la asignación de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="43aff-292">In this case, the shadow map might be missing geometry.</span></span>

<span data-ttu-id="43aff-293">**Figura 15. Planos Near y Far basados en la intersección de los cuatro planos calculados del frustum de luz y la geometría de límite de la escena**</span><span class="sxs-lookup"><span data-stu-id="43aff-293">**Figure 15. Near and far planes based on the intersection of the four calculated planes of the light frustum and the scene's bounding geometry**</span></span>

![planos Near y Far basados en la intersección de los cuatro planos calculados del frustum de luz y la geometría de límite de la escena](images/near-far-plane-based-on-intersection-of-four.jpg)

### <a name="moving-the-light-in-texel-sized-increments"></a><span data-ttu-id="43aff-295">Mover la luz en incrementos de Texel-Sized</span><span class="sxs-lookup"><span data-stu-id="43aff-295">Moving the Light in Texel-Sized Increments</span></span>

<span data-ttu-id="43aff-296">Un artefacto común en las asignaciones sombra es el efecto de borde Shimmering.</span><span class="sxs-lookup"><span data-stu-id="43aff-296">A common artifact in shadow maps is the shimmering edge effect.</span></span> <span data-ttu-id="43aff-297">A medida que se mueve la cámara, los píxeles a lo largo de los bordes de las sombras iluminan y oscurecen.</span><span class="sxs-lookup"><span data-stu-id="43aff-297">As the camera moves, the pixels along the shadows' edges brighten and darken.</span></span> <span data-ttu-id="43aff-298">Esto no se puede apreciar en imágenes fijas, pero es muy perceptible y distrae en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="43aff-298">This cannot be seen in still images, but it is very noticeable and distracting in real time.</span></span> <span data-ttu-id="43aff-299">En la figura 16 se resalta este problema y la figura 17 muestra cómo deben ser los bordes de la sombra.</span><span class="sxs-lookup"><span data-stu-id="43aff-299">Figure 16 highlights this problem and Figure 17 shows how the shadow edges should look.</span></span>

<span data-ttu-id="43aff-300">El error Shimmering Edge se produce porque la matriz de proyección ligera se está recalculando cada vez que se mueve la cámara.</span><span class="sxs-lookup"><span data-stu-id="43aff-300">The shimmering edge error occurs because the light projection matrix is being recalculated every time the camera moves.</span></span> <span data-ttu-id="43aff-301">Esto crea diferencias sutiles en las asignaciones de instantáneas generadas.</span><span class="sxs-lookup"><span data-stu-id="43aff-301">This creates subtle differences in the generated shadow maps.</span></span> <span data-ttu-id="43aff-302">Todos los factores siguientes pueden influir en la matriz creada para enlazar la escena.</span><span class="sxs-lookup"><span data-stu-id="43aff-302">All of the following factors can influence the matrix created to bound the scene.</span></span>

-   <span data-ttu-id="43aff-303">Tamaño del frustum de vista</span><span class="sxs-lookup"><span data-stu-id="43aff-303">Size of the view frustum</span></span>
-   <span data-ttu-id="43aff-304">Orientación del frustum de vista</span><span class="sxs-lookup"><span data-stu-id="43aff-304">Orientation of the view frustum</span></span>
-   <span data-ttu-id="43aff-305">Ubicación de la luz</span><span class="sxs-lookup"><span data-stu-id="43aff-305">Location of the light</span></span>
-   <span data-ttu-id="43aff-306">Ubicación de la cámara</span><span class="sxs-lookup"><span data-stu-id="43aff-306">Location of the camera</span></span>

<span data-ttu-id="43aff-307">Cada vez que esta matriz cambia, los bordes de las sombras pueden cambiar.</span><span class="sxs-lookup"><span data-stu-id="43aff-307">Every time this matrix changes, the shadows edges could change.</span></span>

<span data-ttu-id="43aff-308">**Figura 16. Bordes de sombra Shimmering**</span><span class="sxs-lookup"><span data-stu-id="43aff-308">**Figure 16. Shimmering shadow edges**</span></span>

![bordes de sombra Shimmering](images/shimmering-shadow-edges.jpg)

<span data-ttu-id="43aff-310">Los píxeles a lo largo del borde de la sombra entran y salen de la sombra cuando la cámara se mueve de izquierda a derecha.</span><span class="sxs-lookup"><span data-stu-id="43aff-310">The pixels along the border of the shadow come in and out of shadow as the camera moves from left to right.</span></span>

<span data-ttu-id="43aff-311">**Figura 17. Sombras sin bordes Shimmering**</span><span class="sxs-lookup"><span data-stu-id="43aff-311">**Figure 17. Shadows without shimmering edges**</span></span>

![sombras sin bordes Shimmering](images/shadows-without-shimmering-edges.jpg)

<span data-ttu-id="43aff-313">Los bordes de sombra permanecen constantes cuando la cámara se mueve de izquierda a derecha.</span><span class="sxs-lookup"><span data-stu-id="43aff-313">The shadow edges stay constant as the camera moves from left to right.</span></span>

<span data-ttu-id="43aff-314">En el caso de las luces direccionales, la solución a este problema es redondear el valor mínimo o máximo en X e y (que componen los límites de la proyección ortográfica) a incrementos de tamaño en píxeles.</span><span class="sxs-lookup"><span data-stu-id="43aff-314">For directional lights, the solution to this problem is to round the minimum/maximum value in X and Y (that make up the orthographic projection bounds) to pixel size increments.</span></span> <span data-ttu-id="43aff-315">Esto puede hacerse con una operación de división, una operación de piso y una multiplicación.</span><span class="sxs-lookup"><span data-stu-id="43aff-315">This can be done with a divide operation, a floor operation, and a multiply.</span></span>


```C++
        vLightCameraOrthographicMin /= vWorldUnitsPerTexel;
        vLightCameraOrthographicMin = XMVectorFloor( vLightCameraOrthographicMin );
        vLightCameraOrthographicMin *= vWorldUnitsPerTexel;
        vLightCameraOrthographicMax /= vWorldUnitsPerTexel;
        vLightCameraOrthographicMax = XMVectorFloor( vLightCameraOrthographicMax );
        vLightCameraOrthographicMax *= vWorldUnitsPerTexel;
```



<span data-ttu-id="43aff-316">El valor vWorldUnitsPerTexel se calcula tomando como límite el frustum de la vista y dividiéndolo por el tamaño del búfer.</span><span class="sxs-lookup"><span data-stu-id="43aff-316">The vWorldUnitsPerTexel value is calculated by taking a bound of the view frustum, and dividing by the buffer size.</span></span>


```C++
        FLOAT fWorldUnitsPerTexel = fCascadeBound /
        (float)m_CopyOfCascadeConfig.m_iBufferSize;
        vWorldUnitsPerTexel = XMVectorSet( fWorldUnitsPerTexel, fWorldUnitsPerTexel,                            0.0f, 0.0f );
```



<span data-ttu-id="43aff-317">El límite del tamaño máximo del frustum de la vista da lugar a un ajuste más flexible para la proyección ortográfica.</span><span class="sxs-lookup"><span data-stu-id="43aff-317">Bounding the maximum size of the view frustum results in a looser fit for the orthographic projection.</span></span>

<span data-ttu-id="43aff-318">Es importante tener en cuenta que la textura es 1 píxel más grande en ancho y alto cuando se usa esta técnica.</span><span class="sxs-lookup"><span data-stu-id="43aff-318">It is important to note that the texture is 1 pixel larger in width and height when using this technique.</span></span> <span data-ttu-id="43aff-319">Esto mantiene las coordenadas de sombra de la indización fuera de la instantánea.</span><span class="sxs-lookup"><span data-stu-id="43aff-319">This keeps shadow coordinates from indexing outside of the shadow map.</span></span>

### <a name="back-face-and-front-face"></a><span data-ttu-id="43aff-320">Cara posterior y cara frontal</span><span class="sxs-lookup"><span data-stu-id="43aff-320">Back Face and Front Face</span></span>

<span data-ttu-id="43aff-321">Las asignaciones sombra deben representarse con la selección de datos de retroceso estándar, un proceso que omite la rasterización de objetos que el visor no puede ver y acelera la representación de la escena.</span><span class="sxs-lookup"><span data-stu-id="43aff-321">Shadow maps should be rendered with standard back-face culling, a process that skips rasterization of objects that the viewer cannot see, and speeds up rendering of the scene.</span></span> <span data-ttu-id="43aff-322">Otra opción común es representar las asignaciones de sombra con la selección frontal habilitada, lo que significa que se eliminan los objetos que están orientados al visor.</span><span class="sxs-lookup"><span data-stu-id="43aff-322">Another common option is to render shadow maps with front-face culling enabled, which means that objects facing the viewer are eliminated.</span></span> <span data-ttu-id="43aff-323">El argumento para esto es que ayuda con la sombra automática, ya que la geometría que conforman la parte posterior de los objetos es ligeramente desplazada.</span><span class="sxs-lookup"><span data-stu-id="43aff-323">The argument for this is that it helps with self-shadowing as the geometry making up the back of objects is slightly offset.</span></span> <span data-ttu-id="43aff-324">Hay dos problemas con esta idea.</span><span class="sxs-lookup"><span data-stu-id="43aff-324">There are two problems with this idea.</span></span>

-   <span data-ttu-id="43aff-325">Cualquier objeto con geometría de delante o de cara frontal incorrecta provoca artefactos en el mapa de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="43aff-325">Any object with improper front-face or back-face geometry causes artifacts in the shadow map.</span></span> <span data-ttu-id="43aff-326">Sin embargo, si la geometría de cara frontal o de cara trasera es incorrecta, se producirán otros problemas, por lo que puede ser seguro suponer que la geometría del anverso y el frontal se realiza correctamente.</span><span class="sxs-lookup"><span data-stu-id="43aff-326">However, having incorrect front-face or back-face geometry will cause other problems, so it may be safe to assume front-face and back-face geometry is done correctly.</span></span> <span data-ttu-id="43aff-327">Es posible que no resulte práctico crear caras inversas para geometría basada en Sprite como follaje.</span><span class="sxs-lookup"><span data-stu-id="43aff-327">It may be impractical to create back faces for sprite-based geometry such as foliage.</span></span>
-   <span data-ttu-id="43aff-328">Peter es más probable que se produzcan los huecos de movimiento panorámico y sombra cerca de la base de objetos, como las paredes, porque la disparidad de la profundidad de la sombra es demasiado pequeña.</span><span class="sxs-lookup"><span data-stu-id="43aff-328">Peter Panning and shadow gaps near the base of objects such as walls are more likely to occur because the shadow depth disparity is too small.</span></span>

### <a name="shadow-mapfriendly-geometry"></a><span data-ttu-id="43aff-329">Mapa de sombras: geometría descriptiva</span><span class="sxs-lookup"><span data-stu-id="43aff-329">Shadow Map–Friendly Geometry</span></span>

<span data-ttu-id="43aff-330">Crear geometría que funcione bien en mapas de sombras permite más flexibilidad a la hora de combatir artefactos como Peter saning y Shadow acne.</span><span class="sxs-lookup"><span data-stu-id="43aff-330">Creating geometry that works well in shadow maps allows for more flexibility when combating artifacts like Peter Panning and shadow acne.</span></span>

<span data-ttu-id="43aff-331">Los bordes fuertes son problemáticos para la sombra automática.</span><span class="sxs-lookup"><span data-stu-id="43aff-331">Hard edges are problematic for self-shadowing.</span></span> <span data-ttu-id="43aff-332">La disparidad de profundidad cerca de la punta del borde es muy pequeña.</span><span class="sxs-lookup"><span data-stu-id="43aff-332">The depth disparity near the tip of the edge is very small.</span></span> <span data-ttu-id="43aff-333">Incluso un pequeño desplazamiento puede hacer que los objetos pierdan sus sombras (Figura 18).</span><span class="sxs-lookup"><span data-stu-id="43aff-333">Even a small offset can cause objects to lose their shadows (Figure 18).</span></span>

<span data-ttu-id="43aff-334">**Figura 18. Los bordes nítidos provocan la derivación de artefactos de disparidad de baja profundidad con desplazamientos**</span><span class="sxs-lookup"><span data-stu-id="43aff-334">**Figure 18. Sharp edges cause artifacts stemming from low-depth disparity with offsets**</span></span>

![los bordes nítidos provocan la derivación de artefactos de disparidad de baja profundidad con desplazamientos](images/sharp-edges-cause%20artifacts.jpg)

<span data-ttu-id="43aff-336">Los objetos estrechos, como las paredes, deben tener copias de seguridad incluso si nunca están visibles.</span><span class="sxs-lookup"><span data-stu-id="43aff-336">Narrow objects such as walls should have backs even if they are never visible.</span></span> <span data-ttu-id="43aff-337">Esto aumentará la disparidad de profundidad.</span><span class="sxs-lookup"><span data-stu-id="43aff-337">This will increase the depth disparity.</span></span>

<span data-ttu-id="43aff-338">También es importante asegurarse de que la dirección a la que está orientada la geometría sea correcta. es decir, el exterior de un objeto debe volverse a enfrente y el interior de un objeto debe estar delante de la cara.</span><span class="sxs-lookup"><span data-stu-id="43aff-338">It's also important to make sure that the direction the geometry is facing is correct; that is, the outside of an object should be back facing and the inside of an object should be front facing.</span></span> <span data-ttu-id="43aff-339">Esto es importante para la representación con la selección de la selección de la cara posterior habilitada, así como para combatir los efectos de la tendencia de profundidad.</span><span class="sxs-lookup"><span data-stu-id="43aff-339">This is important for rendering with back-face culling enabled, as well as for combating the effects of depth bias.</span></span>

## <a name="summary"></a><span data-ttu-id="43aff-340">Resumen</span><span class="sxs-lookup"><span data-stu-id="43aff-340">Summary</span></span>

<span data-ttu-id="43aff-341">Las técnicas descritas en este artículo se pueden usar para aumentar la calidad de las asignaciones de instantáneas estándar.</span><span class="sxs-lookup"><span data-stu-id="43aff-341">The techniques described in this article can be used to increase the quality of standard shadow maps.</span></span> <span data-ttu-id="43aff-342">El siguiente paso consiste en examinar técnicas que pueden funcionar bien con las asignaciones de instantáneas estándar.</span><span class="sxs-lookup"><span data-stu-id="43aff-342">The next step is to look at techniques that can work well with standard shadow maps.</span></span> <span data-ttu-id="43aff-343">Se recomienda CSMs como técnica superior para combatir el alias de perspectiva.</span><span class="sxs-lookup"><span data-stu-id="43aff-343">CSMs are recommended as a superior technique to combat perspective aliasing.</span></span> <span data-ttu-id="43aff-344">El filtro de porcentaje más cercano o las instantáneas de varianza se pueden usar para suavizar los bordes de la sombra.</span><span class="sxs-lookup"><span data-stu-id="43aff-344">Percentage closer filtering or variance shadow maps can be used to soften shadow edges.</span></span> <span data-ttu-id="43aff-345">Para obtener más información, consulte el artículo técnico sobre [mapas de sombras en cascada](/windows/desktop/DxTechArts/cascaded-shadow-maps) .</span><span class="sxs-lookup"><span data-stu-id="43aff-345">See the [Cascaded Shadow Maps](/windows/desktop/DxTechArts/cascaded-shadow-maps) technical article for more information.</span></span>

<span data-ttu-id="43aff-346">Donnelly, W., y Lauritzen [,.](https://portal.acm.org/citation.cfm?doid=1111411.1111440)</span><span class="sxs-lookup"><span data-stu-id="43aff-346">Donnelly, W., and Lauritzen, A. [Variance Shadow Maps](https://portal.acm.org/citation.cfm?doid=1111411.1111440).</span></span> <span data-ttu-id="43aff-347">Symposium en gráficos 3D interactivos, procedimientos de 2006 Symposium en gráficos y juegos 3D interactivos.</span><span class="sxs-lookup"><span data-stu-id="43aff-347">Symposium on Interactive 3D Graphics, Proceedings of the 2006 Symposium on Interactive 3D Graphics and Games.</span></span> <span data-ttu-id="43aff-348">2006, PP. 161 – 165.</span><span class="sxs-lookup"><span data-stu-id="43aff-348">2006, pp. 161–165.</span></span>

<span data-ttu-id="43aff-349">Engel, Woflgang F. sección 4.</span><span class="sxs-lookup"><span data-stu-id="43aff-349">Engel, Woflgang F. Section 4.</span></span> <span data-ttu-id="43aff-350">Mapas de instantáneas en cascada.</span><span class="sxs-lookup"><span data-stu-id="43aff-350">Cascaded Shadow Maps.</span></span> <span data-ttu-id="43aff-351">ShaderX5, *técnicas de representación avanzadas*, Wolfgang F. Engel, Ed.</span><span class="sxs-lookup"><span data-stu-id="43aff-351">ShaderX5, *Advanced Rendering Techniques*, Wolfgang F. Engel, Ed.</span></span> <span data-ttu-id="43aff-352">Charles River media, Boston, Massachusetts.</span><span class="sxs-lookup"><span data-stu-id="43aff-352">Charles River Media, Boston, Massachusetts.</span></span> <span data-ttu-id="43aff-353">2006.</span><span class="sxs-lookup"><span data-stu-id="43aff-353">2006.</span></span> <span data-ttu-id="43aff-354">PP. 197:206.</span><span class="sxs-lookup"><span data-stu-id="43aff-354">pp. 197–206.</span></span>

<span data-ttu-id="43aff-355">Stamminger, Marc y Drettakis, George.</span><span class="sxs-lookup"><span data-stu-id="43aff-355">Stamminger, Marc, and Drettakis, George.</span></span> <span data-ttu-id="43aff-356">[Mapas de instantáneas de perspectiva](https://portal.acm.org/citation.cfm?id=566616).</span><span class="sxs-lookup"><span data-stu-id="43aff-356">[Perspective Shadow Maps](https://portal.acm.org/citation.cfm?id=566616).</span></span> <span data-ttu-id="43aff-357">Conferencia Internacional sobre gráficos de equipos y técnicas interactivas, *procedimientos de la Conferencia 29 anual sobre gráficos informáticos y técnicas interactivas*.</span><span class="sxs-lookup"><span data-stu-id="43aff-357">International Conference on Computer Graphics and Interactive Techniques, *Proceedings of the 29th Annual Conference on Computer Graphics and Interactive Techniques*.</span></span> <span data-ttu-id="43aff-358">2002, PP 557 – 562.</span><span class="sxs-lookup"><span data-stu-id="43aff-358">2002, pp 557–562.</span></span>

<span data-ttu-id="43aff-359">Wimmer, M., Scherzer, D. y Purgathofer, W. indicadores de [sombra de perspectiva de espacio claro](https://www.cg.tuwien.ac.at/research/vr/lispsm/shadows_egsr2004_revised.pdf).</span><span class="sxs-lookup"><span data-stu-id="43aff-359">Wimmer, M., Scherzer, D., and Purgathofer, W. [Light Space Perspective Shadow Maps](https://www.cg.tuwien.ac.at/research/vr/lispsm/shadows_egsr2004_revised.pdf).</span></span> <span data-ttu-id="43aff-360">Eurographics Symposium en representación.</span><span class="sxs-lookup"><span data-stu-id="43aff-360">Eurographics Symposium on Rendering.</span></span> <span data-ttu-id="43aff-361">2004.</span><span class="sxs-lookup"><span data-stu-id="43aff-361">2004.</span></span> <span data-ttu-id="43aff-362">Revisado el 10 de junio de 2005.</span><span class="sxs-lookup"><span data-stu-id="43aff-362">Revised June 10, 2005.</span></span> <span data-ttu-id="43aff-363">[Technische Universität Wien](https://www.cg.tuwien.ac.at/research/vr/lispsm/).</span><span class="sxs-lookup"><span data-stu-id="43aff-363">[Technische Universität Wien](https://www.cg.tuwien.ac.at/research/vr/lispsm/).</span></span>

 

 
