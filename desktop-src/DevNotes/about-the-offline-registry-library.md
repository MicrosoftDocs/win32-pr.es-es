---
description: La biblioteca del registro sin conexión se utiliza para modificar un subárbol del registro fuera del registro del sistema activo.
ms.assetid: 61db2804-1b67-473f-8dd7-6be6c6a7184e
title: Acerca de la biblioteca de registro sin conexión
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e7e08b401a4a77f55a54c48ad147bf38c8796472
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104495893"
---
# <a name="about-the-offline-registry-library"></a><span data-ttu-id="9cea0-103">Acerca de la biblioteca de registro sin conexión</span><span class="sxs-lookup"><span data-stu-id="9cea0-103">About the Offline Registry Library</span></span>

<span data-ttu-id="9cea0-104">La biblioteca del registro sin conexión se utiliza para modificar un subárbol del registro fuera del registro del sistema activo.</span><span class="sxs-lookup"><span data-stu-id="9cea0-104">The offline registry library is used to modify a registry hive outside of the active system registry.</span></span>

<span data-ttu-id="9cea0-105">La biblioteca del registro sin conexión está pensada para escenarios de actualización del registro, como el mantenimiento de una imagen de sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="9cea0-105">The offline registry library is intended for registry update scenarios such as servicing an operating system image.</span></span> <span data-ttu-id="9cea0-106">Las funciones del registro sin conexión proporcionan las siguientes funcionalidades que no están disponibles con las funciones de registro estándar:</span><span class="sxs-lookup"><span data-stu-id="9cea0-106">The offline registry functions provide the following capabilities that are not available with the standard registry functions:</span></span>

-   <span data-ttu-id="9cea0-107">Las funciones del registro sin conexión se pueden usar para modificar un subárbol del registro en cualquier formato de registro compatible.</span><span class="sxs-lookup"><span data-stu-id="9cea0-107">The offline registry functions can be used to modify a registry hive in any supported registry format.</span></span> <span data-ttu-id="9cea0-108">Las funciones de registro estándar solo pueden realizar cambios en un subárbol del registro activo y los cambios deben ser compatibles con la versión de Windows que se ejecuta en el sistema.</span><span class="sxs-lookup"><span data-stu-id="9cea0-108">The standard registry functions can make changes only to an active registry hive and the changes must be compatible with the version of Windows running on the system.</span></span>
-   <span data-ttu-id="9cea0-109">La biblioteca del registro sin conexión solo requiere acceso de lectura para abrir un archivo de subárbol del registro y escribir el acceso para guardar el archivo.</span><span class="sxs-lookup"><span data-stu-id="9cea0-109">The offline registry library requires only read access to open a registry hive file and write access to save the file.</span></span> <span data-ttu-id="9cea0-110">No se realiza ninguna otra comprobación de acceso en los objetos del subárbol, lo que permite modificar el subárbol con privilegios de usuario estándar.</span><span class="sxs-lookup"><span data-stu-id="9cea0-110">No other access checks are performed on objects in the hive, making it possible to modify the hive with standard user privileges.</span></span> <span data-ttu-id="9cea0-111">Con las funciones de registro estándar, cargar un subárbol en el registro activo es una operación con privilegios que requiere acceso administrativo.</span><span class="sxs-lookup"><span data-stu-id="9cea0-111">With the standard registry functions, loading a hive into the active registry is a privileged operation that requires administrative access.</span></span>

<span data-ttu-id="9cea0-112">Las funciones del registro sin conexión no se deben usar como sustituto de las funciones del registro del sistema por los siguientes motivos:</span><span class="sxs-lookup"><span data-stu-id="9cea0-112">The offline registry functions should not be used as a substitute for the system registry functions for the following reasons:</span></span>

-   <span data-ttu-id="9cea0-113">No es posible compartir subárboles del registro entre procesos mediante las funciones del registro sin conexión.</span><span class="sxs-lookup"><span data-stu-id="9cea0-113">It is impossible to share registry hives between processes using the offline registry functions.</span></span>
-   <span data-ttu-id="9cea0-114">Las funciones del registro sin conexión usan un bloqueo simple que puede provocar una degradación seria del rendimiento de las aplicaciones multiproceso.</span><span class="sxs-lookup"><span data-stu-id="9cea0-114">The offline registry functions use simple locking that can lead to serious performance degradation for multithreaded applications.</span></span>
-   <span data-ttu-id="9cea0-115">Los cambios realizados con las funciones del registro sin conexión no se guardan hasta que se llama a la función [**ORSaveHive**](orsavehive.md) .</span><span class="sxs-lookup"><span data-stu-id="9cea0-115">Changes made with the offline registry functions are not saved until the [**ORSaveHive**](orsavehive.md) function is called.</span></span>

<span data-ttu-id="9cea0-116">Las aplicaciones no deben usar las funciones del registro sin conexión para omitir los requisitos de seguridad del registro del sistema.</span><span class="sxs-lookup"><span data-stu-id="9cea0-116">Applications should not use the offline registry functions to bypass the security requirements of the system registry.</span></span> <span data-ttu-id="9cea0-117">Para cargar un subárbol, una aplicación que se ejecuta sin los privilegios especiales que requiere la función [RegLoadKey](/windows/win32/api/winreg/nf-winreg-regloadkeya) puede usar la función [RegLoadAppKey](/windows/win32/api/winreg/nf-winreg-regloadappkeya) .</span><span class="sxs-lookup"><span data-stu-id="9cea0-117">To load a hive, an application running without the special privileges required by the [RegLoadKey](/windows/win32/api/winreg/nf-winreg-regloadkeya) function can use the [RegLoadAppKey](/windows/win32/api/winreg/nf-winreg-regloadappkeya) function.</span></span>

<span data-ttu-id="9cea0-118">**Windows Server 2003 y Windows XP:** No se admite la función [RegLoadAppKey](/windows/win32/api/winreg/nf-winreg-regloadappkeya) .</span><span class="sxs-lookup"><span data-stu-id="9cea0-118">**Windows Server 2003 and Windows XP:** The [RegLoadAppKey](/windows/win32/api/winreg/nf-winreg-regloadappkeya) function is not supported.</span></span>

<span data-ttu-id="9cea0-119">Un *subárbol del registro sin conexión* es un subárbol del registro que se ha cargado en memoria mediante las funciones del registro sin conexión.</span><span class="sxs-lookup"><span data-stu-id="9cea0-119">An *offline registry hive* is a registry hive that has been loaded into memory using the offline registry functions.</span></span> <span data-ttu-id="9cea0-120">Para crear un subárbol del registro sin conexión vacío, use la función [**ORCreateHive**](orcreatehive.md) .</span><span class="sxs-lookup"><span data-stu-id="9cea0-120">To create an empty offline registry hive, use the [**ORCreateHive**](orcreatehive.md) function.</span></span> <span data-ttu-id="9cea0-121">Para modificar un subárbol del registro existente, use la función [RegSaveKey](/windows/win32/api/winreg/nf-winreg-regsavekeya) o [RegSaveKeyEx](/windows/win32/api/winreg/nf-winreg-regsavekeyexa) para guardar un subárbol del registro del sistema activo en un archivo y, a continuación, use la función [**OROpenHive**](oropenhive.md) para abrir el archivo.</span><span class="sxs-lookup"><span data-stu-id="9cea0-121">To modify an existing registry hive, use the [RegSaveKey](/windows/win32/api/winreg/nf-winreg-regsavekeya) or [RegSaveKeyEx](/windows/win32/api/winreg/nf-winreg-regsavekeyexa) function to save a hive from the active system registry to a file, and then use the [**OROpenHive**](oropenhive.md) function to open the file.</span></span>

<span data-ttu-id="9cea0-122">Las funciones [**ORCreateHive**](orcreatehive.md) y [**OROpenHive**](oropenhive.md) devuelven un identificador a la clave raíz del subárbol del registro sin conexión.</span><span class="sxs-lookup"><span data-stu-id="9cea0-122">The [**ORCreateHive**](orcreatehive.md) and [**OROpenHive**](oropenhive.md) functions return a handle to the root key of the offline registry hive.</span></span> <span data-ttu-id="9cea0-123">Este identificador se puede usar como un identificador de cualquier otra clave del subárbol del registro sin conexión con las siguientes excepciones: las funciones [**ORCreateKey**](orcreatekey.md) y [**OROpenKey**](oropenkey.md) no se pueden usar para devolver un identificador a la clave raíz; no se puede usar la función [**ORCloseKey**](orclosekey.md) para cerrar la clave raíz; y la función [**ORDeleteKey**](ordeletekey.md) no se puede usar para eliminar la clave raíz.</span><span class="sxs-lookup"><span data-stu-id="9cea0-123">This handle can be used like a handle to any other key in the offline registry hive with the following exceptions: the [**ORCreateKey**](orcreatekey.md) and [**OROpenKey**](oropenkey.md) functions cannot be used to return a handle to the root key; the [**ORCloseKey**](orclosekey.md) function cannot be used to close the root key; and the [**ORDeleteKey**](ordeletekey.md) function cannot be used to delete the root key.</span></span> <span data-ttu-id="9cea0-124">En todos estos casos, se produce un error en la función con un **\_ \_ parámetro no válido**.</span><span class="sxs-lookup"><span data-stu-id="9cea0-124">In all of these cases, the function fails with **ERROR\_INVALID\_PARAMETER**.</span></span>

<span data-ttu-id="9cea0-125">Use la función [**ORCreateKey**](orcreatekey.md) para agregar claves a un subárbol del registro abierto sin conexión y a la función [**ORSetValue**](orsetvalue.md) para establecer los valores de las claves.</span><span class="sxs-lookup"><span data-stu-id="9cea0-125">Use the [**ORCreateKey**](orcreatekey.md) function to add keys to an open offline registry hive and the [**ORSetValue**](orsetvalue.md) function to set the keys' values.</span></span> <span data-ttu-id="9cea0-126">La biblioteca del registro sin conexión admite otras operaciones básicas del registro, como enumerar, recuperar y eliminar claves y valores, y establecer atributos clave como la seguridad y el comportamiento de la virtualización.</span><span class="sxs-lookup"><span data-stu-id="9cea0-126">The offline registry library supports other basic registry operations such as enumerating, retrieving, and deleting keys and values, and setting key attributes such as security and virtualization behavior.</span></span> <span data-ttu-id="9cea0-127">Para obtener una lista de funciones, consulte funciones de la [biblioteca del registro sin conexión](offline-registry-library-functions.md).</span><span class="sxs-lookup"><span data-stu-id="9cea0-127">For a list of functions, see [Offline Registry Library Functions](offline-registry-library-functions.md).</span></span>

<span data-ttu-id="9cea0-128">Para guardar los cambios realizados en un subárbol del registro abierto sin conexión, use la función [**ORSaveHive**](orsavehive.md) para guardar el subárbol en un archivo.</span><span class="sxs-lookup"><span data-stu-id="9cea0-128">To save changes made to an open offline registry hive, use the [**ORSaveHive**](orsavehive.md) function to save the hive to a file.</span></span> <span data-ttu-id="9cea0-129">(Los cambios no se conservan a menos que se llame a **ORSaveHive** ). Después de guardar el subárbol, use la función [**ORCloseHive**](orclosehive.md) para cerrar el subárbol y liberar los recursos asociados a él.</span><span class="sxs-lookup"><span data-stu-id="9cea0-129">(The changes do not persist unless **ORSaveHive** is called.) After saving the hive, use the [**ORCloseHive**](orclosehive.md) function to close the hive and free resources associated with it.</span></span>

<span data-ttu-id="9cea0-130">Un subárbol del registro sin conexión solo se valida cuando se abre con la función [**OROpenHive**](oropenhive.md) .</span><span class="sxs-lookup"><span data-stu-id="9cea0-130">An offline registry hive is validated only when it is opened using the [**OROpenHive**](oropenhive.md) function.</span></span> <span data-ttu-id="9cea0-131">Si el subárbol está dañado, simplemente se produce un error en la operación. no se realiza ningún intento de reparar el subárbol.</span><span class="sxs-lookup"><span data-stu-id="9cea0-131">If the hive is corrupt, the operation simply fails; no attempt is made to repair the hive.</span></span> <span data-ttu-id="9cea0-132">Las comprobaciones de acceso en los objetos de Hive no se realizan hasta que el subárbol se carga en un registro activo con la función [RegLoadKey](/windows/win32/api/winreg/nf-winreg-regloadkeya) .</span><span class="sxs-lookup"><span data-stu-id="9cea0-132">Access checks on objects in the hive are not performed until the hive is loaded into an active registry with the [RegLoadKey](/windows/win32/api/winreg/nf-winreg-regloadkeya) function.</span></span>

<span data-ttu-id="9cea0-133">Las funciones del registro sin conexión no admiten las [claves predefinidas](../sysinfo/predefined-keys.md).</span><span class="sxs-lookup"><span data-stu-id="9cea0-133">The offline registry functions do not support the [predefined keys](../sysinfo/predefined-keys.md).</span></span>

<span data-ttu-id="9cea0-134">Todas las cadenas de nombre de valor y clave pasadas a las funciones del registro sin conexión deben ser Unicode.</span><span class="sxs-lookup"><span data-stu-id="9cea0-134">All key and value name strings passed to offline registry functions must be Unicode.</span></span>

## <a name="related-topics"></a><span data-ttu-id="9cea0-135">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="9cea0-135">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9cea0-136">Funciones de la biblioteca del registro sin conexión \_</span><span class="sxs-lookup"><span data-stu-id="9cea0-136">Offline Registry Library\_Functions</span></span>](offline-registry-library-functions.md)
</dt> </dl>

 

 
