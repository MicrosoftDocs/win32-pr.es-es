---
title: Acerca de la entrada de teclado
description: En este tema se describe la entrada de teclado.
ms.assetid: de34727e-e8c7-481d-982d-0e42a02704db
keywords:
- entrada de usuario, entrada de teclado
- captura de la entrada del usuario, entrada de teclado
- entrada mediante teclado
- foco de teclado
- mensajes de pulsación de tecla
- mensajes de caracteres
- pulsaciones de teclas del sistema
- pulsaciones de teclas que no son del sistema
- mensajes de caracteres que no son del sistema
- claves fallcidas
- mensajes de caracteres no enviados
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0de85794901be3fef37156bde29520039f85702b
ms.sourcegitcommit: b3839bea8d55c981d53cb8802d666bf49093b428
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/16/2021
ms.locfileid: "114373198"
---
# <a name="about-keyboard-input"></a><span data-ttu-id="5a06e-114">Acerca de la entrada de teclado</span><span class="sxs-lookup"><span data-stu-id="5a06e-114">About Keyboard Input</span></span>

<span data-ttu-id="5a06e-115">Las aplicaciones deben aceptar la entrada del usuario desde el teclado, así como desde el mouse.</span><span class="sxs-lookup"><span data-stu-id="5a06e-115">Applications should accept user input from the keyboard as well as from the mouse.</span></span> <span data-ttu-id="5a06e-116">Una aplicación recibe la entrada de teclado en forma de mensajes publicados en sus ventanas.</span><span class="sxs-lookup"><span data-stu-id="5a06e-116">An application receives keyboard input in the form of messages posted to its windows.</span></span>

<span data-ttu-id="5a06e-117">En esta sección se describen los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="5a06e-117">This section covers the following topics:</span></span>

-   [<span data-ttu-id="5a06e-118">Modelo de entrada de teclado</span><span class="sxs-lookup"><span data-stu-id="5a06e-118">Keyboard Input Model</span></span>](#keyboard-input-model)
-   [<span data-ttu-id="5a06e-119">Foco y activación del teclado</span><span class="sxs-lookup"><span data-stu-id="5a06e-119">Keyboard Focus and Activation</span></span>](#keyboard-focus-and-activation)
-   [<span data-ttu-id="5a06e-120">Mensajes de pulsación de tecla</span><span class="sxs-lookup"><span data-stu-id="5a06e-120">Keystroke Messages</span></span>](#keystroke-messages)
    -   [<span data-ttu-id="5a06e-121">Pulsaciones de teclas del sistema y no del sistema</span><span class="sxs-lookup"><span data-stu-id="5a06e-121">System and Nonsystem Keystrokes</span></span>](#system-and-nonsystem-keystrokes)
    -   [<span data-ttu-id="5a06e-122">Códigos de clave virtual descritos</span><span class="sxs-lookup"><span data-stu-id="5a06e-122">Virtual-Key Codes Described</span></span>](#virtual-key-codes-described)
    -   [<span data-ttu-id="5a06e-123">Marcas de mensaje de pulsación de tecla</span><span class="sxs-lookup"><span data-stu-id="5a06e-123">Keystroke Message Flags</span></span>](#keystroke-message-flags)
-   [<span data-ttu-id="5a06e-124">Mensajes de caracteres</span><span class="sxs-lookup"><span data-stu-id="5a06e-124">Character Messages</span></span>](#character-messages)
    -   [<span data-ttu-id="5a06e-125">Mensajes de caracteres no del sistema</span><span class="sxs-lookup"><span data-stu-id="5a06e-125">Nonsystem Character Messages</span></span>](#nonsystem-character-messages)
    -   [<span data-ttu-id="5a06e-126">Mensajes de caracteres no enviados</span><span class="sxs-lookup"><span data-stu-id="5a06e-126">Dead-Character Messages</span></span>](#dead-character-messages)
-   [<span data-ttu-id="5a06e-127">Estado de clave</span><span class="sxs-lookup"><span data-stu-id="5a06e-127">Key Status</span></span>](#key-status)
-   [<span data-ttu-id="5a06e-128">Pulsaciones de teclas y traducciones de caracteres</span><span class="sxs-lookup"><span data-stu-id="5a06e-128">Keystroke and Character Translations</span></span>](#keystroke-and-character-translations)
-   [<span data-ttu-id="5a06e-129">Compatibilidad con la tecla de acceso</span><span class="sxs-lookup"><span data-stu-id="5a06e-129">Hot-Key Support</span></span>](#hot-key-support)
-   [<span data-ttu-id="5a06e-130">Teclas de teclado para examinar y otras funciones</span><span class="sxs-lookup"><span data-stu-id="5a06e-130">Keyboard Keys for Browsing and Other Functions</span></span>](#keyboard-keys-for-browsing-and-other-functions)
-   [<span data-ttu-id="5a06e-131">Simulación de entrada</span><span class="sxs-lookup"><span data-stu-id="5a06e-131">Simulating Input</span></span>](#simulating-input)
-   [<span data-ttu-id="5a06e-132">Idiomas, configuraciones regionales y diseños de teclado</span><span class="sxs-lookup"><span data-stu-id="5a06e-132">Languages, Locales, and Keyboard Layouts</span></span>](#languages-locales-and-keyboard-layouts)

## <a name="keyboard-input-model"></a><span data-ttu-id="5a06e-133">Modelo de entrada de teclado</span><span class="sxs-lookup"><span data-stu-id="5a06e-133">Keyboard Input Model</span></span>

<span data-ttu-id="5a06e-134">El sistema proporciona compatibilidad con teclado independiente del dispositivo para las aplicaciones mediante la instalación de un controlador de dispositivo de teclado adecuado para el teclado actual.</span><span class="sxs-lookup"><span data-stu-id="5a06e-134">The system provides device-independent keyboard support for applications by installing a keyboard device driver appropriate for the current keyboard.</span></span> <span data-ttu-id="5a06e-135">El sistema proporciona compatibilidad con teclado independiente del idioma mediante el diseño de teclado específico del idioma seleccionado actualmente por el usuario o la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5a06e-135">The system provides language-independent keyboard support by using the language-specific keyboard layout currently selected by the user or the application.</span></span> <span data-ttu-id="5a06e-136">El controlador del dispositivo de teclado recibe códigos de examen del teclado, que se envían al diseño del teclado, donde se traducen en mensajes y se publican en las ventanas adecuadas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5a06e-136">The keyboard device driver receives scan codes from the keyboard, which are sent to the keyboard layout where they are translated into messages and posted to the appropriate windows in your application.</span></span>

<span data-ttu-id="5a06e-137">Asignado a cada tecla de un teclado es un valor único denominado código *de* examen , un identificador dependiente del dispositivo para la tecla en el teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-137">Assigned to each key on a keyboard is a unique value called a *scan code*, a device-dependent identifier for the key on the keyboard.</span></span> <span data-ttu-id="5a06e-138">Un teclado genera dos códigos de examen cuando el usuario pulsa una tecla: una cuando el usuario presiona la tecla y otra cuando el usuario suelta la tecla.</span><span class="sxs-lookup"><span data-stu-id="5a06e-138">A keyboard generates two scan codes when the user types a key—one when the user presses the key and another when the user releases the key.</span></span>

<span data-ttu-id="5a06e-139">El controlador de dispositivo de teclado interpreta un código de examen y lo traduce (lo asigna) a un código de clave *virtual,* un valor independiente del dispositivo definido por el sistema que identifica el propósito de una clave.</span><span class="sxs-lookup"><span data-stu-id="5a06e-139">The keyboard device driver interprets a scan code and translates (maps) it to a *virtual-key code*, a device-independent value defined by the system that identifies the purpose of a key.</span></span> <span data-ttu-id="5a06e-140">Después de traducir un código de examen, el diseño del teclado crea un mensaje que incluye el código de examen, el código de clave virtual y otra información sobre la pulsación de tecla y, a continuación, coloca el mensaje en la cola de mensajes del sistema.</span><span class="sxs-lookup"><span data-stu-id="5a06e-140">After translating a scan code, the keyboard layout creates a message that includes the scan code, the virtual-key code, and other information about the keystroke, and then places the message in the system message queue.</span></span> <span data-ttu-id="5a06e-141">El sistema quita el mensaje de la cola de mensajes del sistema y lo envía a la cola de mensajes del subproceso adecuado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-141">The system removes the message from the system message queue and posts it to the message queue of the appropriate thread.</span></span> <span data-ttu-id="5a06e-142">Finalmente, el bucle de mensajes del subproceso quita el mensaje y lo pasa al procedimiento de ventana adecuado para su procesamiento.</span><span class="sxs-lookup"><span data-stu-id="5a06e-142">Eventually, the thread's message loop removes the message and passes it to the appropriate window procedure for processing.</span></span> <span data-ttu-id="5a06e-143">En la ilustración siguiente se muestra el modelo de entrada de teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-143">The following figure illustrates the keyboard input model.</span></span>

![modelo de procesamiento de entrada de teclado](images/csinp-01.png)

## <a name="keyboard-focus-and-activation"></a><span data-ttu-id="5a06e-145">Foco y activación del teclado</span><span class="sxs-lookup"><span data-stu-id="5a06e-145">Keyboard Focus and Activation</span></span>

<span data-ttu-id="5a06e-146">El sistema envía mensajes de teclado a la cola de mensajes del subproceso en primer plano que creó la ventana con el foco del teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-146">The system posts keyboard messages to the message queue of the foreground thread that created the window with the keyboard focus.</span></span> <span data-ttu-id="5a06e-147">El *foco del teclado* es una propiedad temporal de una ventana.</span><span class="sxs-lookup"><span data-stu-id="5a06e-147">The *keyboard focus* is a temporary property of a window.</span></span> <span data-ttu-id="5a06e-148">El sistema comparte el teclado entre todas las ventanas de la pantalla desplazando el foco del teclado, en la dirección del usuario, de una ventana a otra.</span><span class="sxs-lookup"><span data-stu-id="5a06e-148">The system shares the keyboard among all windows on the display by shifting the keyboard focus, at the user's direction, from one window to another.</span></span> <span data-ttu-id="5a06e-149">La ventana que tiene el foco de teclado recibe (de la cola de mensajes del subproceso que lo creó) todos los mensajes de teclado hasta que el foco cambia a otra ventana.</span><span class="sxs-lookup"><span data-stu-id="5a06e-149">The window that has the keyboard focus receives (from the message queue of the thread that created it) all keyboard messages until the focus changes to a different window.</span></span>

<span data-ttu-id="5a06e-150">Un subproceso puede llamar a [**la función GetFocus**](/windows/win32/api/winuser/nf-winuser-getfocus) para determinar cuál de sus ventanas (si existe) tiene actualmente el foco de teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-150">A thread can call the [**GetFocus**](/windows/win32/api/winuser/nf-winuser-getfocus) function to determine which of its windows (if any) currently has the keyboard focus.</span></span> <span data-ttu-id="5a06e-151">Un subproceso puede dar el foco del teclado a una de sus ventanas mediante una llamada a la [**función SetFocus.**](/windows/win32/api/winuser/nf-winuser-setfocus)</span><span class="sxs-lookup"><span data-stu-id="5a06e-151">A thread can give the keyboard focus to one of its windows by calling the [**SetFocus**](/windows/win32/api/winuser/nf-winuser-setfocus) function.</span></span> <span data-ttu-id="5a06e-152">Cuando el foco del teclado cambia de una ventana a otra, el sistema envía un mensaje [**\_ KILLFOCUS**](wm-killfocus.md) de WM a la ventana que ha perdido el foco y, a continuación, envía un mensaje [**\_ SETFOCUS**](wm-setfocus.md) de WM a la ventana que ha obtenido el foco.</span><span class="sxs-lookup"><span data-stu-id="5a06e-152">When the keyboard focus changes from one window to another, the system sends a [**WM\_KILLFOCUS**](wm-killfocus.md) message to the window that has lost the focus, and then sends a [**WM\_SETFOCUS**](wm-setfocus.md) message to the window that has gained the focus.</span></span>

<span data-ttu-id="5a06e-153">El concepto de foco de teclado está relacionado con el de la ventana activa.</span><span class="sxs-lookup"><span data-stu-id="5a06e-153">The concept of keyboard focus is related to that of the active window.</span></span> <span data-ttu-id="5a06e-154">La *ventana activa* es la ventana de nivel superior con la que el usuario está trabajando actualmente.</span><span class="sxs-lookup"><span data-stu-id="5a06e-154">The *active window* is the top-level window the user is currently working with.</span></span> <span data-ttu-id="5a06e-155">La ventana con el foco del teclado es la ventana activa o una ventana secundaria de la ventana activa.</span><span class="sxs-lookup"><span data-stu-id="5a06e-155">The window with the keyboard focus is either the active window, or a child window of the active window.</span></span> <span data-ttu-id="5a06e-156">Para ayudar al usuario a identificar la ventana activa, el sistema la coloca en la parte superior del orden Z y resalta su barra de título (si tiene una) y el borde.</span><span class="sxs-lookup"><span data-stu-id="5a06e-156">To help the user identify the active window, the system places it at the top of the Z order and highlights its title bar (if it has one) and border.</span></span>

<span data-ttu-id="5a06e-157">El usuario puede activar una ventana de nivel superior haciendo clic en ella, seleccionándose mediante la combinación de teclas ALT+TAB o ALT+ESC, o bien seleccionándose en la Lista de tareas.</span><span class="sxs-lookup"><span data-stu-id="5a06e-157">The user can activate a top-level window by clicking it, selecting it using the ALT+TAB or ALT+ESC key combination, or selecting it from the Task List.</span></span> <span data-ttu-id="5a06e-158">Un subproceso puede activar una ventana de nivel superior mediante la [**función SetActiveWindow.**](/windows/win32/api/winuser/nf-winuser-setactivewindow)</span><span class="sxs-lookup"><span data-stu-id="5a06e-158">A thread can activate a top-level window by using the [**SetActiveWindow**](/windows/win32/api/winuser/nf-winuser-setactivewindow) function.</span></span> <span data-ttu-id="5a06e-159">Puede determinar si una ventana de nivel superior que creó está activa mediante la [**función GetActiveWindow.**](/windows/win32/api/winuser/nf-winuser-getactivewindow)</span><span class="sxs-lookup"><span data-stu-id="5a06e-159">It can determine whether a top-level window it created is active by using the [**GetActiveWindow**](/windows/win32/api/winuser/nf-winuser-getactivewindow) function.</span></span>

<span data-ttu-id="5a06e-160">Cuando una ventana está desactivada y otra activada, el sistema envía el [**mensaje WM \_ ACTIVATE.**](wm-activate.md)</span><span class="sxs-lookup"><span data-stu-id="5a06e-160">When one window is deactivated and another activated, the system sends the [**WM\_ACTIVATE**](wm-activate.md) message.</span></span> <span data-ttu-id="5a06e-161">La palabra de orden bajo del parámetro *wParam* es cero si se desactiva la ventana y es distinta de cero si se está activando.</span><span class="sxs-lookup"><span data-stu-id="5a06e-161">The low-order word of the *wParam* parameter is zero if the window is being deactivated and nonzero if it is being activated.</span></span> <span data-ttu-id="5a06e-162">Cuando el procedimiento de ventana predeterminado recibe el **mensaje WM \_ ACTIVATE,** establece el foco del teclado en la ventana activa.</span><span class="sxs-lookup"><span data-stu-id="5a06e-162">When the default window procedure receives the **WM\_ACTIVATE** message, it sets the keyboard focus to the active window.</span></span>

<span data-ttu-id="5a06e-163">Para impedir que los eventos de entrada de teclado y mouse lleguen a las aplicaciones, use [**BlockInput**](/windows/win32/api/winuser/nf-winuser-blockinput).</span><span class="sxs-lookup"><span data-stu-id="5a06e-163">To block keyboard and mouse input events from reaching applications, use [**BlockInput**](/windows/win32/api/winuser/nf-winuser-blockinput).</span></span> <span data-ttu-id="5a06e-164">Tenga en cuenta que **la función BlockInput** no interferirá con la tabla de estado de entrada de teclado asincrónica.</span><span class="sxs-lookup"><span data-stu-id="5a06e-164">Note, the **BlockInput** function will not interfere with the asynchronous keyboard input-state table.</span></span> <span data-ttu-id="5a06e-165">Esto significa que llamar a la [**función SendInput mientras**](/windows/win32/api/winuser/nf-winuser-sendinput) se bloquea la entrada cambiará la tabla de estado de entrada de teclado asincrónica.</span><span class="sxs-lookup"><span data-stu-id="5a06e-165">This means that calling the [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function while input is blocked will change the asynchronous keyboard input-state table.</span></span>

## <a name="keystroke-messages"></a><span data-ttu-id="5a06e-166">Mensajes de pulsación de tecla</span><span class="sxs-lookup"><span data-stu-id="5a06e-166">Keystroke Messages</span></span>

<span data-ttu-id="5a06e-167">Al presionar una tecla, se coloca un mensaje [**WM \_ KEYDOWN**](wm-keydown.md) o [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) en la cola de mensajes del subproceso asociada a la ventana que tiene el foco del teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-167">Pressing a key causes a [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message to be placed in the thread message queue attached to the window that has the keyboard focus.</span></span> <span data-ttu-id="5a06e-168">Al liberar una clave, se coloca en la cola un mensaje [**WM \_ KEYUP**](wm-keyup.md) o [**WM \_ SYSKEYUP.**](wm-syskeyup.md)</span><span class="sxs-lookup"><span data-stu-id="5a06e-168">Releasing a key causes a [**WM\_KEYUP**](wm-keyup.md) or [**WM\_SYSKEYUP**](wm-syskeyup.md) message to be placed in the queue.</span></span>

<span data-ttu-id="5a06e-169">Los mensajes de flecha arriba y abajo suelen producirse en pares, pero si el usuario mantiene presionada una tecla lo suficiente como para iniciar la característica de repetición automática del teclado, el sistema genera una serie de mensajes [**\_ WM KEYDOWN**](wm-keydown.md) o [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) en una fila.</span><span class="sxs-lookup"><span data-stu-id="5a06e-169">Key-up and key-down messages typically occur in pairs, but if the user holds down a key long enough to start the keyboard's automatic repeat feature, the system generates a number of [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages in a row.</span></span> <span data-ttu-id="5a06e-170">A continuación, genera un único [**mensaje WM \_ KEYUP**](wm-keyup.md) o [**WM \_ SYSKEYUP**](wm-syskeyup.md) cuando el usuario libera la clave.</span><span class="sxs-lookup"><span data-stu-id="5a06e-170">It then generates a single [**WM\_KEYUP**](wm-keyup.md) or [**WM\_SYSKEYUP**](wm-syskeyup.md) message when the user releases the key.</span></span>

<span data-ttu-id="5a06e-171">En esta sección se describen los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="5a06e-171">This section covers the following topics:</span></span>

-   [<span data-ttu-id="5a06e-172">Pulsaciones de teclas del sistema y no del sistema</span><span class="sxs-lookup"><span data-stu-id="5a06e-172">System and Nonsystem Keystrokes</span></span>](#system-and-nonsystem-keystrokes)
-   [<span data-ttu-id="5a06e-173">Códigos de clave virtual descritos</span><span class="sxs-lookup"><span data-stu-id="5a06e-173">Virtual-Key Codes Described</span></span>](#virtual-key-codes-described)
-   [<span data-ttu-id="5a06e-174">Marcas de mensaje de pulsación de tecla</span><span class="sxs-lookup"><span data-stu-id="5a06e-174">Keystroke Message Flags</span></span>](#keystroke-message-flags)

### <a name="system-and-nonsystem-keystrokes"></a><span data-ttu-id="5a06e-175">Pulsaciones de teclas del sistema y no del sistema</span><span class="sxs-lookup"><span data-stu-id="5a06e-175">System and Nonsystem Keystrokes</span></span>

<span data-ttu-id="5a06e-176">El sistema hace una distinción entre las pulsaciones de teclas del sistema y las pulsaciones de tecla que no son del sistema.</span><span class="sxs-lookup"><span data-stu-id="5a06e-176">The system makes a distinction between system keystrokes and nonsystem keystrokes.</span></span> <span data-ttu-id="5a06e-177">Las pulsaciones de tecla del sistema generan mensajes de pulsación de teclas del sistema, [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) [**y WM \_ SYSKEYUP**](wm-syskeyup.md).</span><span class="sxs-lookup"><span data-stu-id="5a06e-177">System keystrokes produce system keystroke messages, [**WM\_SYSKEYDOWN**](wm-syskeydown.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md).</span></span> <span data-ttu-id="5a06e-178">Las pulsaciones de teclas que no son del sistema generan mensajes de pulsación de teclas que no son del sistema, [**WM \_ KEYDOWN**](wm-keydown.md) [**y WM \_ KEYUP**](wm-keyup.md).</span><span class="sxs-lookup"><span data-stu-id="5a06e-178">Nonsystem keystrokes produce nonsystem keystroke messages, [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_KEYUP**](wm-keyup.md).</span></span>

<span data-ttu-id="5a06e-179">Si el procedimiento de ventana debe procesar un mensaje de pulsación de tecla del sistema, asegúrese de que, después de procesar el mensaje, el procedimiento lo pasa a la [**función DefWindowProc.**](/windows/desktop/api/winuser/nf-winuser-defwindowproca)</span><span class="sxs-lookup"><span data-stu-id="5a06e-179">If your window procedure must process a system keystroke message, make sure that after processing the message the procedure passes it to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span> <span data-ttu-id="5a06e-180">De lo contrario, todas las operaciones del sistema que implican la tecla ALT se deshabilitarán siempre que la ventana tenga el foco del teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-180">Otherwise, all system operations involving the ALT key will be disabled whenever the window has the keyboard focus.</span></span> <span data-ttu-id="5a06e-181">Es decir, el usuario no podrá acceder a los menús de la ventana ni al menú Sistema, ni usar la combinación de teclas ALT+ESC o ALT+TAB para activar otra ventana.</span><span class="sxs-lookup"><span data-stu-id="5a06e-181">That is, the user won't be able to access the window's menus or System menu, or use the ALT+ESC or ALT+TAB key combination to activate a different window.</span></span>

<span data-ttu-id="5a06e-182">Los mensajes de pulsación de tecla del sistema son principalmente para su uso por parte del sistema en lugar de por una aplicación.</span><span class="sxs-lookup"><span data-stu-id="5a06e-182">System keystroke messages are primarily for use by the system rather than by an application.</span></span> <span data-ttu-id="5a06e-183">El sistema los usa para proporcionar su interfaz de teclado integrada a los menús y para permitir al usuario controlar qué ventana está activa.</span><span class="sxs-lookup"><span data-stu-id="5a06e-183">The system uses them to provide its built-in keyboard interface to menus and to allow the user to control which window is active.</span></span> <span data-ttu-id="5a06e-184">Los mensajes de pulsación de tecla del sistema se generan cuando el usuario pulsa una tecla en combinación con la tecla ALT, o cuando los tipos de usuario y ninguna ventana tienen el foco del teclado (por ejemplo, cuando se minimiza la aplicación activa).</span><span class="sxs-lookup"><span data-stu-id="5a06e-184">System keystroke messages are generated when the user types a key in combination with the ALT key, or when the user types and no window has the keyboard focus (for example, when the active application is minimized).</span></span> <span data-ttu-id="5a06e-185">En este caso, los mensajes se publican en la cola de mensajes asociada a la ventana activa.</span><span class="sxs-lookup"><span data-stu-id="5a06e-185">In this case, the messages are posted to the message queue attached to the active window.</span></span>

<span data-ttu-id="5a06e-186">Los mensajes de pulsación de teclas que no son del sistema se usan en las ventanas de la aplicación; La [**función DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) no hace nada con ellos.</span><span class="sxs-lookup"><span data-stu-id="5a06e-186">Nonsystem keystroke messages are for use by application windows; the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function does nothing with them.</span></span> <span data-ttu-id="5a06e-187">Un procedimiento de ventana puede descartar cualquier mensaje de pulsación de tecla que no sea del sistema que no necesite.</span><span class="sxs-lookup"><span data-stu-id="5a06e-187">A window procedure can discard any nonsystem keystroke messages that it does not need.</span></span>

### <a name="virtual-key-codes-described"></a><span data-ttu-id="5a06e-188">Virtual-Key descrito</span><span class="sxs-lookup"><span data-stu-id="5a06e-188">Virtual-Key Codes Described</span></span>

<span data-ttu-id="5a06e-189">El **parámetro wParam** de un mensaje de pulsación de tecla contiene el código de clave virtual de la clave que se presionó o soltó.</span><span class="sxs-lookup"><span data-stu-id="5a06e-189">The **wParam** parameter of a keystroke message contains the virtual-key code of the key that was pressed or released.</span></span> <span data-ttu-id="5a06e-190">Un procedimiento de ventana procesa o omite un mensaje de pulsación de tecla, en función del valor del código de clave virtual.</span><span class="sxs-lookup"><span data-stu-id="5a06e-190">A window procedure processes or ignores a keystroke message, depending on the value of the virtual-key code.</span></span>

<span data-ttu-id="5a06e-191">Un procedimiento de ventana típico procesa solo un pequeño subconjunto de los mensajes de pulsación de tecla que recibe y omite el resto.</span><span class="sxs-lookup"><span data-stu-id="5a06e-191">A typical window procedure processes only a small subset of the keystroke messages that it receives and ignores the rest.</span></span> <span data-ttu-id="5a06e-192">Por ejemplo, un procedimiento de ventana solo puede procesar mensajes de pulsación de teclas [**\_ WM KEYDOWN**](wm-keydown.md) y solo aquellos que contienen códigos de clave virtual para las teclas de movimiento del cursor, las teclas de desplazamiento (también denominadas teclas de control) y las claves de función.</span><span class="sxs-lookup"><span data-stu-id="5a06e-192">For example, a window procedure might process only [**WM\_KEYDOWN**](wm-keydown.md) keystroke messages, and only those that contain virtual-key codes for the cursor movement keys, shift keys (also called control keys), and function keys.</span></span> <span data-ttu-id="5a06e-193">Un procedimiento de ventana típico no procesa mensajes de pulsación de tecla a partir de claves de caracteres.</span><span class="sxs-lookup"><span data-stu-id="5a06e-193">A typical window procedure does not process keystroke messages from character keys.</span></span> <span data-ttu-id="5a06e-194">En su lugar, usa la [**función TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) para convertir el mensaje en mensajes de caracteres.</span><span class="sxs-lookup"><span data-stu-id="5a06e-194">Instead, it uses the [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function to convert the message into character messages.</span></span> <span data-ttu-id="5a06e-195">Para obtener más información sobre **TranslateMessage** y los mensajes de caracteres, vea [Character Messages](#character-messages).</span><span class="sxs-lookup"><span data-stu-id="5a06e-195">For more information about **TranslateMessage** and character messages, see [Character Messages](#character-messages).</span></span>

### <a name="keystroke-message-flags"></a><span data-ttu-id="5a06e-196">Marcas de mensaje de pulsación de tecla</span><span class="sxs-lookup"><span data-stu-id="5a06e-196">Keystroke Message Flags</span></span>

<span data-ttu-id="5a06e-197">El **parámetro lParam** de un mensaje de pulsación de tecla contiene información adicional sobre la pulsación de tecla que generó el mensaje.</span><span class="sxs-lookup"><span data-stu-id="5a06e-197">The **lParam** parameter of a keystroke message contains additional information about the keystroke that generated the message.</span></span> <span data-ttu-id="5a06e-198">Esta información incluye el recuento de repeticiones, el código de examen, la marca de clave extendida, el código de contexto, la marca de estado de clave anterior y la marca de estado de transición.</span><span class="sxs-lookup"><span data-stu-id="5a06e-198">This information includes the repeat count, the scan code, the extended-key flag, the context code, the previous key-state flag, and the transition-state flag.</span></span> <span data-ttu-id="5a06e-199">En la ilustración siguiente se muestran las ubicaciones de estas marcas y valores en **el parámetro lParam.**</span><span class="sxs-lookup"><span data-stu-id="5a06e-199">The following illustration shows the locations of these flags and values in the **lParam** parameter.</span></span>

![las ubicaciones de las marcas y valores del parámetro lparam de un mensaje de pulsación de tecla](images/csinp-02.png)

<span data-ttu-id="5a06e-201">Una aplicación puede usar los siguientes valores para manipular las marcas de pulsación de tecla.</span><span class="sxs-lookup"><span data-stu-id="5a06e-201">An application can use the following values to manipulate the keystroke flags.</span></span>



| <span data-ttu-id="5a06e-202">Value</span><span class="sxs-lookup"><span data-stu-id="5a06e-202">Value</span></span>            | <span data-ttu-id="5a06e-203">Descripción</span><span class="sxs-lookup"><span data-stu-id="5a06e-203">Description</span></span>                                                                       |
|------------------|-----------------------------------------------------------------------------------|
| <span data-ttu-id="5a06e-204">**ALTDOWN DE CTRL \_**</span><span class="sxs-lookup"><span data-stu-id="5a06e-204">**KF\_ALTDOWN**</span></span>  | <span data-ttu-id="5a06e-205">Manipula la marca de tecla ALT, que indica si se presiona la tecla ALT.</span><span class="sxs-lookup"><span data-stu-id="5a06e-205">Manipulates the ALT key flag, which indicates whether the ALT key is pressed.</span></span>     |
| <span data-ttu-id="5a06e-206">**\_DLGMODE de DLGMODE de DLGMODE**</span><span class="sxs-lookup"><span data-stu-id="5a06e-206">**KF\_DLGMODE**</span></span>  | <span data-ttu-id="5a06e-207">Manipula la marca de modo de diálogo, que indica si un cuadro de diálogo está activo.</span><span class="sxs-lookup"><span data-stu-id="5a06e-207">Manipulates the dialog mode flag, which indicates whether a dialog box is active.</span></span> |
| <span data-ttu-id="5a06e-208">**EXTENSIÓN \_ EXTENDIDO**</span><span class="sxs-lookup"><span data-stu-id="5a06e-208">**KF\_EXTENDED**</span></span> | <span data-ttu-id="5a06e-209">Manipula la marca de clave extendida.</span><span class="sxs-lookup"><span data-stu-id="5a06e-209">Manipulates the extended key flag.</span></span>                                                |
| <span data-ttu-id="5a06e-210">**MENUMODE DE CONTEXTUAL \_**</span><span class="sxs-lookup"><span data-stu-id="5a06e-210">**KF\_MENUMODE**</span></span> | <span data-ttu-id="5a06e-211">Manipula la marca de modo de menú, que indica si un menú está activo.</span><span class="sxs-lookup"><span data-stu-id="5a06e-211">Manipulates the menu mode flag, which indicates whether a menu is active.</span></span>         |
| <span data-ttu-id="5a06e-212">**KF \_ REPEAT**</span><span class="sxs-lookup"><span data-stu-id="5a06e-212">**KF\_REPEAT**</span></span>   | <span data-ttu-id="5a06e-213">Manipula la marca de estado de clave anterior.</span><span class="sxs-lookup"><span data-stu-id="5a06e-213">Manipulates the previous key state flag.</span></span>                                          |
| <span data-ttu-id="5a06e-214">**UP de KV \_**</span><span class="sxs-lookup"><span data-stu-id="5a06e-214">**KF\_UP**</span></span>       | <span data-ttu-id="5a06e-215">Manipula la marca de estado de transición.</span><span class="sxs-lookup"><span data-stu-id="5a06e-215">Manipulates the transition state flag.</span></span>                                            |

<span data-ttu-id="5a06e-216">Ejemplo de código:</span><span class="sxs-lookup"><span data-stu-id="5a06e-216">Example code:</span></span>

```cpp
case WM_KEYDOWN:
case WM_KEYUP:
case WM_SYSKEYDOWN:
case WM_SYSKEYUP:
{
    WORD vkCode = LOWORD(wParam);                                       // virtual-key code

    BYTE scanCode = LOBYTE(HIWORD(lParam));                             // scan code
    BOOL scanCodeE0 = (HIWORD(lParam) & KF_EXTENDED) == KF_EXTENDED;    // extended-key flag, 1 if scancode has 0xE0 prefix

    BOOL upFlag = (HIWORD(lParam) & KF_UP) == KF_UP;                    // transition-state flag, 1 on keyup
    BOOL repeatFlag = (HIWORD(lParam) & KF_REPEAT) == KF_REPEAT;        // previous key-state flag, 1 on autorepeat
    WORD repeatCount = LOWORD(lParam);                                  // repeat count, > 0 if several keydown messages was combined into one message

    BOOL altDownFlag = (HIWORD(lParam) & KF_ALTDOWN) == KF_ALTDOWN;     // ALT key was pressed

    BOOL dlgModeFlag = (HIWORD(lParam) & KF_DLGMODE) == KF_DLGMODE;     // dialog box is active
    BOOL menuModeFlag = (HIWORD(lParam) & KF_MENUMODE) == KF_MENUMODE;  // menu is active
    
    // ...
}
break;
```

### <a name="repeat-count"></a><span data-ttu-id="5a06e-217">Número de repeticiones</span><span class="sxs-lookup"><span data-stu-id="5a06e-217">Repeat Count</span></span>

<span data-ttu-id="5a06e-218">Puede comprobar el recuento de repeticiones para determinar si un mensaje de pulsación de tecla representa más de una pulsación de tecla.</span><span class="sxs-lookup"><span data-stu-id="5a06e-218">You can check the repeat count to determine whether a keystroke message represents more than one keystroke.</span></span> <span data-ttu-id="5a06e-219">El sistema incrementa el recuento cuando el teclado genera mensajes [**WM \_ KEYDOWN**](wm-keydown.md) o [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) más rápido de lo que una aplicación puede procesarlos.</span><span class="sxs-lookup"><span data-stu-id="5a06e-219">The system increments the count when the keyboard generates [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages faster than an application can process them.</span></span> <span data-ttu-id="5a06e-220">Esto suele ocurrir cuando el usuario mantiene presionada una tecla el tiempo suficiente para iniciar la característica de repetición automática del teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-220">This often occurs when the user holds down a key long enough to start the keyboard's automatic repeat feature.</span></span> <span data-ttu-id="5a06e-221">En lugar de rellenar la cola de mensajes del sistema con los mensajes de la tecla abajo resultantes, el sistema combina los mensajes en un único mensaje de tecla hacia abajo e incrementa el recuento de repeticiones.</span><span class="sxs-lookup"><span data-stu-id="5a06e-221">Instead of filling the system message queue with the resulting key-down messages, the system combines the messages into a single key down message and increments the repeat count.</span></span> <span data-ttu-id="5a06e-222">La liberación de una clave no puede iniciar la característica de repetición automática, por lo que el recuento de repeticiones para los mensajes [**WM \_ KEYUP**](wm-keyup.md) y [**WM \_ SYSKEYUP**](wm-syskeyup.md) siempre se establece en 1.</span><span class="sxs-lookup"><span data-stu-id="5a06e-222">Releasing a key cannot start the automatic repeat feature, so the repeat count for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages is always set to 1.</span></span>

### <a name="scan-code"></a><span data-ttu-id="5a06e-223">Examinar código</span><span class="sxs-lookup"><span data-stu-id="5a06e-223">Scan Code</span></span>

<span data-ttu-id="5a06e-224">El código de examen es el valor que el hardware de teclado genera cuando el usuario presiona una tecla.</span><span class="sxs-lookup"><span data-stu-id="5a06e-224">The scan code is the value that the keyboard hardware generates when the user presses a key.</span></span> <span data-ttu-id="5a06e-225">Es un valor dependiente del dispositivo que identifica la tecla presionada, en lugar del carácter representado por la tecla .</span><span class="sxs-lookup"><span data-stu-id="5a06e-225">It is a device-dependent value that identifies the key pressed, as opposed to the character represented by the key.</span></span> <span data-ttu-id="5a06e-226">Normalmente, una aplicación omite los códigos de examen.</span><span class="sxs-lookup"><span data-stu-id="5a06e-226">An application typically ignores scan codes.</span></span> <span data-ttu-id="5a06e-227">En su lugar, usa los códigos de clave virtual independientes del dispositivo para interpretar los mensajes de pulsación de teclas.</span><span class="sxs-lookup"><span data-stu-id="5a06e-227">Instead, it uses the device-independent virtual-key codes to interpret keystroke messages.</span></span>

### <a name="extended-key-flag"></a><span data-ttu-id="5a06e-228">Extended-Key flag</span><span class="sxs-lookup"><span data-stu-id="5a06e-228">Extended-Key Flag</span></span>

<span data-ttu-id="5a06e-229">La marca de tecla extendida indica si el mensaje de pulsación de tecla se originó en una de las teclas adicionales del teclado mejorado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-229">The extended-key flag indicates whether the keystroke message originated from one of the additional keys on the enhanced keyboard.</span></span> <span data-ttu-id="5a06e-230">Las teclas extendidas constan de las teclas ALT y CTRL en el lado derecho del teclado; las teclas de dirección INS, DEL, HOME, END, PAGE UP, PAGE DOWN y en los clústeres situados a la izquierda del teclado numérico. tecla NUM LOCK; tecla BREAK (CTRL+PAUSA); la tecla PRINT SCRN; y las claves divide (/) y ENTRAR en el teclado numérico.</span><span class="sxs-lookup"><span data-stu-id="5a06e-230">The extended keys consist of the ALT and CTRL keys on the right-hand side of the keyboard; the INS, DEL, HOME, END, PAGE UP, PAGE DOWN, and arrow keys in the clusters to the left of the numeric keypad; the NUM LOCK key; the BREAK (CTRL+PAUSE) key; the PRINT SCRN key; and the divide (/) and ENTER keys in the numeric keypad.</span></span> <span data-ttu-id="5a06e-231">La marca de clave extendida se establece si la clave es una clave extendida.</span><span class="sxs-lookup"><span data-stu-id="5a06e-231">The extended-key flag is set if the key is an extended key.</span></span>

<span data-ttu-id="5a06e-232">Si se especifica, el código de examen estaba precedido de un byte de prefijo con el 0xE0 (224).</span><span class="sxs-lookup"><span data-stu-id="5a06e-232">If specified, the scan code was preceded by a prefix byte having the value 0xE0 (224).</span></span>

### <a name="context-code"></a><span data-ttu-id="5a06e-233">Código de contexto</span><span class="sxs-lookup"><span data-stu-id="5a06e-233">Context Code</span></span>

<span data-ttu-id="5a06e-234">El código de contexto indica si la tecla ALT estaba fuera de línea cuando se generó el mensaje de pulsación de tecla.</span><span class="sxs-lookup"><span data-stu-id="5a06e-234">The context code indicates whether the ALT key was down when the keystroke message was generated.</span></span> <span data-ttu-id="5a06e-235">El código es 1 si la tecla ALT estaba fuera de servicio y 0 si estaba arriba.</span><span class="sxs-lookup"><span data-stu-id="5a06e-235">The code is 1 if the ALT key was down and 0 if it was up.</span></span>

### <a name="previous-key-state-flag"></a><span data-ttu-id="5a06e-236">Marca Key-State anterior</span><span class="sxs-lookup"><span data-stu-id="5a06e-236">Previous Key-State Flag</span></span>

<span data-ttu-id="5a06e-237">La marca de estado de clave anterior indica si la clave que generó el mensaje de pulsación de tecla estaba previamente arriba o abajo.</span><span class="sxs-lookup"><span data-stu-id="5a06e-237">The previous key-state flag indicates whether the key that generated the keystroke message was previously up or down.</span></span> <span data-ttu-id="5a06e-238">Es 1 si la clave estaba anteriormente fuera de servicio y 0 si la clave estaba anteriormente arriba.</span><span class="sxs-lookup"><span data-stu-id="5a06e-238">It is 1 if the key was previously down and 0 if the key was previously up.</span></span> <span data-ttu-id="5a06e-239">Puede usar esta marca para identificar los mensajes de pulsación de tecla generados por la característica de repetición automática del teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-239">You can use this flag to identify keystroke messages generated by the keyboard's automatic repeat feature.</span></span> <span data-ttu-id="5a06e-240">Esta marca se establece en 1 para los mensajes de pulsación de tecla [**WM \_ KEYDOWN**](wm-keydown.md) y [**WM \_ SYSKEYDOWN**](wm-syskeydown.md) generados por la característica de repetición automática.</span><span class="sxs-lookup"><span data-stu-id="5a06e-240">This flag is set to 1 for [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_SYSKEYDOWN**](wm-syskeydown.md) keystroke messages generated by the automatic repeat feature.</span></span> <span data-ttu-id="5a06e-241">Siempre se establece en 1 para los [**mensajes WM \_ KEYUP**](wm-keyup.md) [**y WM \_ SYSKEYUP.**](wm-syskeyup.md)</span><span class="sxs-lookup"><span data-stu-id="5a06e-241">It is always set to 1 for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages.</span></span>

### <a name="transition-state-flag"></a><span data-ttu-id="5a06e-242">Transition-State flag</span><span class="sxs-lookup"><span data-stu-id="5a06e-242">Transition-State Flag</span></span>

<span data-ttu-id="5a06e-243">La marca de estado de transición indica si al presionar una tecla o liberar una clave se generó el mensaje de pulsación de tecla.</span><span class="sxs-lookup"><span data-stu-id="5a06e-243">The transition-state flag indicates whether pressing a key or releasing a key generated the keystroke message.</span></span> <span data-ttu-id="5a06e-244">Esta marca siempre se establece en 0 para los mensajes [**WM \_ KEYDOWN**](wm-keydown.md) y [**WM \_ SYSKEYDOWN;**](wm-syskeydown.md) siempre se establece en 1 para los mensajes [**WM \_ KEYUP**](wm-keyup.md) y [**WM \_ SYSKEYUP.**](wm-syskeyup.md)</span><span class="sxs-lookup"><span data-stu-id="5a06e-244">This flag is always set to 0 for [**WM\_KEYDOWN**](wm-keydown.md) and [**WM\_SYSKEYDOWN**](wm-syskeydown.md) messages; it is always set to 1 for [**WM\_KEYUP**](wm-keyup.md) and [**WM\_SYSKEYUP**](wm-syskeyup.md) messages.</span></span>

## <a name="character-messages"></a><span data-ttu-id="5a06e-245">Mensajes de caracteres</span><span class="sxs-lookup"><span data-stu-id="5a06e-245">Character Messages</span></span>

<span data-ttu-id="5a06e-246">Los mensajes de pulsación de tecla proporcionan mucha información sobre las pulsaciones de teclas, pero no proporcionan códigos de caracteres para las pulsaciones de teclas de caracteres.</span><span class="sxs-lookup"><span data-stu-id="5a06e-246">Keystroke messages provide a lot of information about keystrokes, but they do not provide character codes for character keystrokes.</span></span> <span data-ttu-id="5a06e-247">Para recuperar códigos de caracteres, una aplicación debe incluir la [**función TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) en su bucle de mensajes de subproceso.</span><span class="sxs-lookup"><span data-stu-id="5a06e-247">To retrieve character codes, an application must include the [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function in its thread message loop.</span></span> <span data-ttu-id="5a06e-248">**TranslateMessage** pasa un mensaje [**WM \_ KEYDOWN**](wm-keydown.md) [**o WM \_ SYSKEYDOWN**](wm-syskeydown.md) al diseño del teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-248">**TranslateMessage** passes a [**WM\_KEYDOWN**](wm-keydown.md) or [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message to the keyboard layout.</span></span> <span data-ttu-id="5a06e-249">El diseño examina el código de clave virtual del mensaje y, si corresponde a una clave de carácter, proporciona el código de carácter equivalente (teniendo en cuenta el estado de las teclas MAYÚS y CAPS LOCK).</span><span class="sxs-lookup"><span data-stu-id="5a06e-249">The layout examines the message's virtual-key code and, if it corresponds to a character key, provides the character code equivalent (taking into account the state of the SHIFT and CAPS LOCK keys).</span></span> <span data-ttu-id="5a06e-250">A continuación, genera un mensaje de caracteres que incluye el código de caracteres y coloca el mensaje en la parte superior de la cola de mensajes.</span><span class="sxs-lookup"><span data-stu-id="5a06e-250">It then generates a character message that includes the character code and places the message at the top of the message queue.</span></span> <span data-ttu-id="5a06e-251">La siguiente iteración del bucle de mensajes quita el mensaje de caracteres de la cola y envía el mensaje al procedimiento de ventana adecuado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-251">The next iteration of the message loop removes the character message from the queue and dispatches the message to the appropriate window procedure.</span></span>

<span data-ttu-id="5a06e-252">En esta sección se describen los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="5a06e-252">This section covers the following topics:</span></span>

-   [<span data-ttu-id="5a06e-253">Mensajes de caracteres no del sistema</span><span class="sxs-lookup"><span data-stu-id="5a06e-253">Nonsystem Character Messages</span></span>](#nonsystem-character-messages)
-   [<span data-ttu-id="5a06e-254">Mensajes de caracteres no enviados</span><span class="sxs-lookup"><span data-stu-id="5a06e-254">Dead-Character Messages</span></span>](#dead-character-messages)

### <a name="nonsystem-character-messages"></a><span data-ttu-id="5a06e-255">Mensajes de caracteres no del sistema</span><span class="sxs-lookup"><span data-stu-id="5a06e-255">Nonsystem Character Messages</span></span>

<span data-ttu-id="5a06e-256">Un procedimiento de ventana puede recibir los siguientes mensajes de caracteres: [**WM \_ CHAR,**](wm-char.md) [**WM \_ DEADCHAR,**](wm-deadchar.md) [**WM \_ SYSCHAR,**](/windows/desktop/menurc/wm-syschar) [**WM \_ SYSDEADCHAR**](wm-sysdeadchar.md)y [**WM \_ UNICHAR**](wm-unichar.md).</span><span class="sxs-lookup"><span data-stu-id="5a06e-256">A window procedure can receive the following character messages: [**WM\_CHAR**](wm-char.md), [**WM\_DEADCHAR**](wm-deadchar.md), [**WM\_SYSCHAR**](/windows/desktop/menurc/wm-syschar), [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md), and [**WM\_UNICHAR**](wm-unichar.md).</span></span> <span data-ttu-id="5a06e-257">La [**función TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) genera un mensaje **WM \_ CHAR** **o WM \_ DEADCHAR** cuando procesa un [**mensaje WM \_ KEYDOWN.**](wm-keydown.md)</span><span class="sxs-lookup"><span data-stu-id="5a06e-257">The [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function generates a **WM\_CHAR** or **WM\_DEADCHAR** message when it processes a [**WM\_KEYDOWN**](wm-keydown.md) message.</span></span> <span data-ttu-id="5a06e-258">De forma similar, genera un mensaje **\_ SYSCHAR** o **WM \_ SYSDEADCHAR** cuando procesa un [**mensaje \_ SYSKEYDOWN de WM.**](wm-syskeydown.md)</span><span class="sxs-lookup"><span data-stu-id="5a06e-258">Similarly, it generates a **WM\_SYSCHAR** or **WM\_SYSDEADCHAR** message when it processes a [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message.</span></span>

<span data-ttu-id="5a06e-259">Una aplicación que procesa la entrada de teclado normalmente omite todos los mensajes [**\_ DE WM CHAR**](wm-char.md) y WM [**\_ UNICHAR,**](wm-unichar.md) pasando cualquier otro mensaje a la [**función DefWindowProc.**](/windows/desktop/api/winuser/nf-winuser-defwindowproca)</span><span class="sxs-lookup"><span data-stu-id="5a06e-259">An application that processes keyboard input typically ignores all but the [**WM\_CHAR**](wm-char.md) and [**WM\_UNICHAR**](wm-unichar.md) messages, passing any other messages to the [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) function.</span></span> <span data-ttu-id="5a06e-260">Tenga en **cuenta que WM \_ CHAR** usa el formato de transformación Unicode (UTF) de 16 bits, mientras **que WM \_ UNICHAR** usa UTF-32.</span><span class="sxs-lookup"><span data-stu-id="5a06e-260">Note that **WM\_CHAR** uses 16-bit Unicode Transformation Format (UTF) while **WM\_UNICHAR** uses UTF-32.</span></span> <span data-ttu-id="5a06e-261">El sistema usa los [**mensajes \_ SYSCHAR**](/windows/desktop/menurc/wm-syschar) y [**WM \_ SYSDEADCHAR**](wm-sysdeadchar.md) de WM para implementar elementos mnemotécnicos de menú.</span><span class="sxs-lookup"><span data-stu-id="5a06e-261">The system uses the [**WM\_SYSCHAR**](/windows/desktop/menurc/wm-syschar) and [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md) messages to implement menu mnemonics.</span></span>

<span data-ttu-id="5a06e-262">El **parámetro wParam** de todos los mensajes de caracteres contiene el código de carácter de la tecla de carácter que se presionó.</span><span class="sxs-lookup"><span data-stu-id="5a06e-262">The **wParam** parameter of all character messages contains the character code of the character key that was pressed.</span></span> <span data-ttu-id="5a06e-263">El valor del código de carácter depende de la clase de ventana de la ventana que recibe el mensaje.</span><span class="sxs-lookup"><span data-stu-id="5a06e-263">The value of the character code depends on the window class of the window receiving the message.</span></span> <span data-ttu-id="5a06e-264">Si se usó la versión Unicode de la función [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) para registrar la clase window, el sistema proporciona caracteres Unicode a todas las ventanas de esa clase.</span><span class="sxs-lookup"><span data-stu-id="5a06e-264">If the Unicode version of the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) function was used to register the window class, the system provides Unicode characters to all windows of that class.</span></span> <span data-ttu-id="5a06e-265">De lo contrario, el sistema proporciona códigos de caracteres ASCII.</span><span class="sxs-lookup"><span data-stu-id="5a06e-265">Otherwise, the system provides ASCII character codes.</span></span> <span data-ttu-id="5a06e-266">Para obtener más información, vea [Unicode y juegos de caracteres.](/windows/desktop/Intl/unicode-and-character-sets)</span><span class="sxs-lookup"><span data-stu-id="5a06e-266">For more information, see [Unicode and Character Sets](/windows/desktop/Intl/unicode-and-character-sets).</span></span>

<span data-ttu-id="5a06e-267">El contenido del **parámetro lParam** de un mensaje de caracteres es idéntico al contenido del parámetro **lParam** del mensaje de tecla abajo que se ha traducido para generar el mensaje de caracteres.</span><span class="sxs-lookup"><span data-stu-id="5a06e-267">The contents of the **lParam** parameter of a character message are identical to the contents of the **lParam** parameter of the key-down message that was translated to produce the character message.</span></span> <span data-ttu-id="5a06e-268">Para obtener información, vea [Marcas de mensajes de pulsación de teclas](#keystroke-message-flags).</span><span class="sxs-lookup"><span data-stu-id="5a06e-268">For information, see [Keystroke Message Flags](#keystroke-message-flags).</span></span>

### <a name="dead-character-messages"></a><span data-ttu-id="5a06e-269">Dead-Character mensajes</span><span class="sxs-lookup"><span data-stu-id="5a06e-269">Dead-Character Messages</span></span>

<span data-ttu-id="5a06e-270">Algunos teclados que no están en inglés contienen teclas de caracteres que no se espera que produzcan caracteres por sí mismos.</span><span class="sxs-lookup"><span data-stu-id="5a06e-270">Some non-English keyboards contain character keys that are not expected to produce characters by themselves.</span></span> <span data-ttu-id="5a06e-271">En su lugar, se usan para agregar un signo diacrítico al carácter generado por la pulsación de tecla posterior.</span><span class="sxs-lookup"><span data-stu-id="5a06e-271">Instead, they are used to add a diacritic to the character produced by the subsequent keystroke.</span></span> <span data-ttu-id="5a06e-272">Estas claves se denominan *claves fallcidas.*</span><span class="sxs-lookup"><span data-stu-id="5a06e-272">These keys are called *dead keys*.</span></span> <span data-ttu-id="5a06e-273">La tecla de circunflejo de un teclado alemán es un ejemplo de una tecla no ejecutada.</span><span class="sxs-lookup"><span data-stu-id="5a06e-273">The circumflex key on a German keyboard is an example of a dead key.</span></span> <span data-ttu-id="5a06e-274">Para escribir el carácter que consta de una "o" con una circunflejo, un usuario alemán escribiría la clave de circunflejo seguida de la clave "o".</span><span class="sxs-lookup"><span data-stu-id="5a06e-274">To enter the character consisting of an "o" with a circumflex, a German user would type the circumflex key followed by the "o" key.</span></span> <span data-ttu-id="5a06e-275">La ventana con el foco del teclado recibiría la siguiente secuencia de mensajes:</span><span class="sxs-lookup"><span data-stu-id="5a06e-275">The window with the keyboard focus would receive the following sequence of messages:</span></span>

1.  [<span data-ttu-id="5a06e-276">**WM \_ KEYDOWN**</span><span class="sxs-lookup"><span data-stu-id="5a06e-276">**WM\_KEYDOWN**</span></span>](wm-keydown.md)
2.  [<span data-ttu-id="5a06e-277">**WM \_ DEADCHAR**</span><span class="sxs-lookup"><span data-stu-id="5a06e-277">**WM\_DEADCHAR**</span></span>](wm-deadchar.md)
3.  [<span data-ttu-id="5a06e-278">**WM \_ KEYUP**</span><span class="sxs-lookup"><span data-stu-id="5a06e-278">**WM\_KEYUP**</span></span>](wm-keyup.md)
4.  [<span data-ttu-id="5a06e-279">**WM \_ KEYDOWN**</span><span class="sxs-lookup"><span data-stu-id="5a06e-279">**WM\_KEYDOWN**</span></span>](wm-keydown.md)
5.  [<span data-ttu-id="5a06e-280">**WM \_ CHAR**</span><span class="sxs-lookup"><span data-stu-id="5a06e-280">**WM\_CHAR**</span></span>](wm-char.md)
6.  [<span data-ttu-id="5a06e-281">**WM \_ KEYUP**</span><span class="sxs-lookup"><span data-stu-id="5a06e-281">**WM\_KEYUP**</span></span>](wm-keyup.md)

<span data-ttu-id="5a06e-282">[**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) genera el mensaje [**\_ DEADCHAR de WM**](wm-deadchar.md) cuando procesa el mensaje WM [**\_ KEYDOWN**](wm-keydown.md) a partir de una clave fallada.</span><span class="sxs-lookup"><span data-stu-id="5a06e-282">[**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) generates the [**WM\_DEADCHAR**](wm-deadchar.md) message when it processes the [**WM\_KEYDOWN**](wm-keydown.md) message from a dead key.</span></span> <span data-ttu-id="5a06e-283">Aunque el *parámetro wParam* del mensaje **\_ DEADCHAR de WM** contiene el código de carácter del signo diacrítico para la clave fallada, una aplicación normalmente omite el mensaje.</span><span class="sxs-lookup"><span data-stu-id="5a06e-283">Although the *wParam* parameter of the **WM\_DEADCHAR** message contains the character code of the diacritic for the dead key, an application typically ignores the message.</span></span> <span data-ttu-id="5a06e-284">En su lugar, procesa el [**mensaje \_ WM CHAR**](wm-char.md) generado por la pulsación de tecla posterior.</span><span class="sxs-lookup"><span data-stu-id="5a06e-284">Instead, it processes the [**WM\_CHAR**](wm-char.md) message generated by the subsequent keystroke.</span></span> <span data-ttu-id="5a06e-285">El *parámetro wParam* del mensaje **CHAR \_ de WM** contiene el código de carácter de la letra con el signo diacrítico.</span><span class="sxs-lookup"><span data-stu-id="5a06e-285">The *wParam* parameter of the **WM\_CHAR** message contains the character code of the letter with the diacritic.</span></span> <span data-ttu-id="5a06e-286">Si la pulsación de tecla posterior genera un carácter que no se puede combinar con un signo diacrítico, el sistema genera dos mensajes **\_ WM CHAR.**</span><span class="sxs-lookup"><span data-stu-id="5a06e-286">If the subsequent keystroke generates a character that cannot be combined with a diacritic, the system generates two **WM\_CHAR** messages.</span></span> <span data-ttu-id="5a06e-287">El *parámetro wParam* de la primera contiene el código de carácter del signo diacrítico; El *parámetro wParam* del segundo contiene el código de carácter de la clave de carácter posterior.</span><span class="sxs-lookup"><span data-stu-id="5a06e-287">The *wParam* parameter of the first contains the character code of the diacritic; the *wParam* parameter of the second contains the character code of the subsequent character key.</span></span>

<span data-ttu-id="5a06e-288">La [**función TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) genera el mensaje [**\_ SYSDEADCHAR**](wm-sysdeadchar.md) de WM cuando procesa el mensaje [**\_ SYSKEYDOWN**](wm-syskeydown.md) de WM a partir de una tecla fallida del sistema (una tecla sin respuesta que se presiona en combinación con la tecla ALT).</span><span class="sxs-lookup"><span data-stu-id="5a06e-288">The [**TranslateMessage**](/windows/desktop/api/winuser/nf-winuser-translatemessage) function generates the [**WM\_SYSDEADCHAR**](wm-sysdeadchar.md) message when it processes the [**WM\_SYSKEYDOWN**](wm-syskeydown.md) message from a system dead key (a dead key that is pressed in combination with the ALT key).</span></span> <span data-ttu-id="5a06e-289">Normalmente, una aplicación omite el **mensaje \_ SYSDEADCHAR de WM.**</span><span class="sxs-lookup"><span data-stu-id="5a06e-289">An application typically ignores the **WM\_SYSDEADCHAR** message.</span></span>

## <a name="key-status"></a><span data-ttu-id="5a06e-290">Estado de la clave</span><span class="sxs-lookup"><span data-stu-id="5a06e-290">Key Status</span></span>

<span data-ttu-id="5a06e-291">Al procesar un mensaje de teclado, es posible que una aplicación deba determinar el estado de otra tecla además de la que generó el mensaje actual.</span><span class="sxs-lookup"><span data-stu-id="5a06e-291">While processing a keyboard message, an application may need to determine the status of another key besides the one that generated the current message.</span></span> <span data-ttu-id="5a06e-292">Por ejemplo, una aplicación de procesamiento de palabras que permita al usuario presionar MAYÚS+END para seleccionar un bloque de texto debe comprobar el estado de la tecla MAYÚS cada vez que reciba un mensaje de pulsación de tecla de la tecla END.</span><span class="sxs-lookup"><span data-stu-id="5a06e-292">For example, a word-processing application that allows the user to press SHIFT+END to select a block of text must check the status of the SHIFT key whenever it receives a keystroke message from the END key.</span></span> <span data-ttu-id="5a06e-293">La aplicación puede usar la [**función GetKeyState**](/windows/win32/api/winuser/nf-winuser-getkeystate) para determinar el estado de una clave virtual en el momento en que se generó el mensaje actual. puede usar la [**función GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) para recuperar el estado actual de una clave virtual.</span><span class="sxs-lookup"><span data-stu-id="5a06e-293">The application can use the [**GetKeyState**](/windows/win32/api/winuser/nf-winuser-getkeystate) function to determine the status of a virtual key at the time the current message was generated; it can use the [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) function to retrieve the current status of a virtual key.</span></span>

<span data-ttu-id="5a06e-294">El diseño del teclado mantiene una lista de nombres.</span><span class="sxs-lookup"><span data-stu-id="5a06e-294">The keyboard layout maintains a list of names.</span></span> <span data-ttu-id="5a06e-295">El nombre de una clave que genera un solo carácter es el mismo que el carácter generado por la clave.</span><span class="sxs-lookup"><span data-stu-id="5a06e-295">The name of a key that produces a single character is the same as the character produced by the key.</span></span> <span data-ttu-id="5a06e-296">El nombre de una clave que no es de caracteres, como TAB y ENTER, se almacena como una cadena de caracteres.</span><span class="sxs-lookup"><span data-stu-id="5a06e-296">The name of a noncharacter key such as TAB and ENTER is stored as a character string.</span></span> <span data-ttu-id="5a06e-297">Una aplicación puede recuperar el nombre de cualquier clave del controlador de dispositivo llamando a la [**función GetKeyNameText.**](/windows/win32/api/winuser/nf-winuser-getkeynametexta)</span><span class="sxs-lookup"><span data-stu-id="5a06e-297">An application can retrieve the name of any key from the device driver by calling the [**GetKeyNameText**](/windows/win32/api/winuser/nf-winuser-getkeynametexta) function.</span></span>

## <a name="keystroke-and-character-translations"></a><span data-ttu-id="5a06e-298">Pulsaciones de teclas y traducciones de caracteres</span><span class="sxs-lookup"><span data-stu-id="5a06e-298">Keystroke and Character Translations</span></span>

<span data-ttu-id="5a06e-299">El sistema incluye varias funciones de propósito especial que traducen códigos de examen, códigos de caracteres y códigos de clave virtual proporcionados por varios mensajes de pulsación de teclas.</span><span class="sxs-lookup"><span data-stu-id="5a06e-299">The system includes several special purpose functions that translate scan codes, character codes, and virtual-key codes provided by various keystroke messages.</span></span> <span data-ttu-id="5a06e-300">Estas funciones incluyen [**MapVirtualKey,**](/windows/win32/api/winuser/nf-winuser-mapvirtualkeya) [**ToAscii,**](/windows/win32/api/winuser/nf-winuser-toascii) [**ToUnicode**](/windows/win32/api/winuser/nf-winuser-tounicode)y [**VkKeyScan.**](/windows/win32/api/winuser/nf-winuser-vkkeyscana)</span><span class="sxs-lookup"><span data-stu-id="5a06e-300">These functions include [**MapVirtualKey**](/windows/win32/api/winuser/nf-winuser-mapvirtualkeya), [**ToAscii**](/windows/win32/api/winuser/nf-winuser-toascii), [**ToUnicode**](/windows/win32/api/winuser/nf-winuser-tounicode), and [**VkKeyScan**](/windows/win32/api/winuser/nf-winuser-vkkeyscana).</span></span>

<span data-ttu-id="5a06e-301">Además, Microsoft Rich Edit 3.0 admite el [IME HexToUnicode,](/windows/desktop/Intl/hextounicode-ime)que permite a un usuario convertir entre caracteres hexadecimales y Unicode mediante teclas de acceso rápido.</span><span class="sxs-lookup"><span data-stu-id="5a06e-301">In addition, Microsoft Rich Edit 3.0 supports the [HexToUnicode IME](/windows/desktop/Intl/hextounicode-ime), which allows a user to convert between hexadecimal and Unicode characters by using hot keys.</span></span> <span data-ttu-id="5a06e-302">Esto significa que cuando Microsoft Rich Edit 3.0 se incorpora a una aplicación, la aplicación heredará las características del IME HexToUnicode.</span><span class="sxs-lookup"><span data-stu-id="5a06e-302">This means that when Microsoft Rich Edit 3.0 is incorporated into an application, the application will inherit the features of the HexToUnicode IME.</span></span>

## <a name="hot-key-support"></a><span data-ttu-id="5a06e-303">Hot-Key compatibilidad</span><span class="sxs-lookup"><span data-stu-id="5a06e-303">Hot-Key Support</span></span>

<span data-ttu-id="5a06e-304">Una *tecla de* acceso rápido es una combinación de claves que genera un mensaje WM [**\_ HOTKEY,**](wm-hotkey.md) un mensaje que el sistema coloca en la parte superior de la cola de mensajes de un subproceso, omitiendo los mensajes existentes en la cola.</span><span class="sxs-lookup"><span data-stu-id="5a06e-304">A *hot key* is a key combination that generates a [**WM\_HOTKEY**](wm-hotkey.md) message, a message the system places at the top of a thread's message queue, bypassing any existing messages in the queue.</span></span> <span data-ttu-id="5a06e-305">Las aplicaciones usan teclas de acceso rápido para obtener la entrada de teclado de alta prioridad del usuario.</span><span class="sxs-lookup"><span data-stu-id="5a06e-305">Applications use hot keys to obtain high-priority keyboard input from the user.</span></span> <span data-ttu-id="5a06e-306">Por ejemplo, al definir una tecla de acceso rápido que consta de la combinación de teclas CTRL+C, una aplicación puede permitir al usuario cancelar una operación larga.</span><span class="sxs-lookup"><span data-stu-id="5a06e-306">For example, by defining a hot key consisting of the CTRL+C key combination, an application can allow the user to cancel a lengthy operation.</span></span>

<span data-ttu-id="5a06e-307">Para definir una tecla de acceso rápido, una aplicación llama a la función [**RegisterHotKey,**](/windows/win32/api/winuser/nf-winuser-registerhotkey) especificando la combinación de claves que genera el mensaje [**WM \_ HOTKEY,**](wm-hotkey.md) el identificador de la ventana para recibir el mensaje y el identificador de la tecla de acceso rápido.</span><span class="sxs-lookup"><span data-stu-id="5a06e-307">To define a hot key, an application calls the [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) function, specifying the combination of keys that generates the [**WM\_HOTKEY**](wm-hotkey.md) message, the handle to the window to receive the message, and the identifier of the hot key.</span></span> <span data-ttu-id="5a06e-308">Cuando el usuario presiona la tecla de acceso rápido, se coloca un mensaje **\_ WM HOTKEY** en la cola de mensajes del subproceso que creó la ventana.</span><span class="sxs-lookup"><span data-stu-id="5a06e-308">When the user presses the hot key, a **WM\_HOTKEY** message is placed in the message queue of the thread that created the window.</span></span> <span data-ttu-id="5a06e-309">El *parámetro wParam* del mensaje contiene el identificador de la tecla de acceso.</span><span class="sxs-lookup"><span data-stu-id="5a06e-309">The *wParam* parameter of the message contains the identifier of the hot key.</span></span> <span data-ttu-id="5a06e-310">La aplicación puede definir varias teclas de acceso rápido para un subproceso, pero cada clave de acceso rápido del subproceso debe tener un identificador único.</span><span class="sxs-lookup"><span data-stu-id="5a06e-310">The application can define multiple hot keys for a thread, but each hot key in the thread must have a unique identifier.</span></span> <span data-ttu-id="5a06e-311">Antes de que finalice la aplicación, debe usar la [**función UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) para destruir la tecla de acceso rápido.</span><span class="sxs-lookup"><span data-stu-id="5a06e-311">Before the application terminates, it should use the [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) function to destroy the hot key.</span></span>

<span data-ttu-id="5a06e-312">Las aplicaciones pueden usar un control de tecla de acceso rápido para facilitar al usuario la elección de una tecla de acceso rápido.</span><span class="sxs-lookup"><span data-stu-id="5a06e-312">Applications can use a hot key control to make it easy for the user to choose a hot key.</span></span> <span data-ttu-id="5a06e-313">Los controles de tecla de acceso activo se usan normalmente para definir una tecla de acceso activa que activa una ventana; no usan las funciones [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) y [**UnregisterHotKey.**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey)</span><span class="sxs-lookup"><span data-stu-id="5a06e-313">Hot key controls are typically used to define a hot key that activates a window; they do not use the [**RegisterHotKey**](/windows/win32/api/winuser/nf-winuser-registerhotkey) and [**UnregisterHotKey**](/windows/win32/api/winuser/nf-winuser-unregisterhotkey) functions.</span></span> <span data-ttu-id="5a06e-314">En su lugar, una aplicación que usa un control de tecla de acceso rápido normalmente envía el mensaje [**\_ SETHOTKEY de WM**](wm-sethotkey.md) para establecer la tecla de acceso rápido.</span><span class="sxs-lookup"><span data-stu-id="5a06e-314">Instead, an application that uses a hot key control typically sends the [**WM\_SETHOTKEY**](wm-sethotkey.md) message to set the hot key.</span></span> <span data-ttu-id="5a06e-315">Cada vez que el usuario presiona la tecla de acceso rápido, el sistema envía un mensaje [**\_ WM SYSCOMMAND**](/windows/desktop/menurc/wm-syscommand) que especifica SC \_ HOTKEY.</span><span class="sxs-lookup"><span data-stu-id="5a06e-315">Whenever the user presses the hot key, the system sends a [**WM\_SYSCOMMAND**](/windows/desktop/menurc/wm-syscommand) message specifying SC\_HOTKEY.</span></span> <span data-ttu-id="5a06e-316">Para obtener más información sobre los controles de tecla de acceso, vea "Using Hot Key Controls" (Usar controles de tecla de acceso) en [Hot Key Controls](../controls/hot-key-controls.md).</span><span class="sxs-lookup"><span data-stu-id="5a06e-316">For more information about hot key controls, see "Using Hot Key Controls" in [Hot Key Controls](../controls/hot-key-controls.md).</span></span>

## <a name="keyboard-keys-for-browsing-and-other-functions"></a><span data-ttu-id="5a06e-317">Teclas de teclado para examinar y otras funciones</span><span class="sxs-lookup"><span data-stu-id="5a06e-317">Keyboard Keys for Browsing and Other Functions</span></span>

<span data-ttu-id="5a06e-318">Windows proporciona compatibilidad con teclados con teclas especiales para funciones del explorador, funciones multimedia, inicio de aplicaciones y administración de energía.</span><span class="sxs-lookup"><span data-stu-id="5a06e-318">Windows provides support for keyboards with special keys for browser functions, media functions, application launching, and power management.</span></span> <span data-ttu-id="5a06e-319">[**WM \_ APPCOMMAND admite**](wm-appcommand.md) las teclas de teclado adicionales.</span><span class="sxs-lookup"><span data-stu-id="5a06e-319">The [**WM\_APPCOMMAND**](wm-appcommand.md) supports the extra keyboard keys.</span></span> <span data-ttu-id="5a06e-320">Además, la [**función ShellProc**](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) se modifica para admitir las teclas de teclado adicionales.</span><span class="sxs-lookup"><span data-stu-id="5a06e-320">In addition, the [**ShellProc**](/previous-versions/windows/desktop/legacy/ms644991(v=vs.85)) function is modified to support the extra keyboard keys.</span></span>

<span data-ttu-id="5a06e-321">Es poco probable que una ventana secundaria de una aplicación de componentes pueda implementar directamente comandos para estas teclas de teclado adicionales.</span><span class="sxs-lookup"><span data-stu-id="5a06e-321">It is unlikely that a child window in a component application will be able to directly implement commands for these extra keyboard keys.</span></span> <span data-ttu-id="5a06e-322">Por lo tanto, cuando se presiona una de estas teclas, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) enviará un mensaje [**DE WM \_ APPCOMMAND**](wm-appcommand.md) a una ventana.</span><span class="sxs-lookup"><span data-stu-id="5a06e-322">So when one of these keys is pressed, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) will send a [**WM\_APPCOMMAND**](wm-appcommand.md) message to a window.</span></span> <span data-ttu-id="5a06e-323">**DefWindowProc también** mostrará el mensaje **WM \_ APPCOMMAND** en su ventana primaria.</span><span class="sxs-lookup"><span data-stu-id="5a06e-323">**DefWindowProc** will also bubble the **WM\_APPCOMMAND** message to its parent window.</span></span> <span data-ttu-id="5a06e-324">Esto es similar a la forma en que se invocan los menús contextuales con el botón derecho del mouse, que es que **DefWindowProc** envía un mensaje [**\_ CONTEXTMENU**](/windows/desktop/menurc/wm-contextmenu) de WM en un clic del botón derecho y lo burbujas a su elemento primario.</span><span class="sxs-lookup"><span data-stu-id="5a06e-324">This is similar to the way context menus are invoked with the right mouse button, which is that **DefWindowProc** sends a [**WM\_CONTEXTMENU**](/windows/desktop/menurc/wm-contextmenu) message on a right button click, and bubbles it to its parent.</span></span> <span data-ttu-id="5a06e-325">Además, si **DefWindowProc** recibe un mensaje **DE WM \_ APPCOMMAND** para una ventana de nivel superior, llamará a un enlace de shell con el código **\_ APPCOMMAND de HSHELL**.</span><span class="sxs-lookup"><span data-stu-id="5a06e-325">Additionally, if **DefWindowProc** receives a **WM\_APPCOMMAND** message for a top-level window, it will call a shell hook with code **HSHELL\_APPCOMMAND**.</span></span>

<span data-ttu-id="5a06e-326">Windows también admite Microsoft IntelliMouse Explorer, que es un mouse con cinco botones.</span><span class="sxs-lookup"><span data-stu-id="5a06e-326">Windows also supports the Microsoft IntelliMouse Explorer, which is a mouse with five buttons.</span></span> <span data-ttu-id="5a06e-327">Los dos botones adicionales admiten la navegación hacia delante y hacia atrás del explorador.</span><span class="sxs-lookup"><span data-stu-id="5a06e-327">The two extra buttons support forward and backward browser navigation.</span></span> <span data-ttu-id="5a06e-328">Para obtener más información, [vea XBUTTONs](about-mouse-input.md).</span><span class="sxs-lookup"><span data-stu-id="5a06e-328">For more information, see [XBUTTONs](about-mouse-input.md).</span></span>

## <a name="simulating-input"></a><span data-ttu-id="5a06e-329">Simulación de entrada</span><span class="sxs-lookup"><span data-stu-id="5a06e-329">Simulating Input</span></span>

<span data-ttu-id="5a06e-330">Para simular una serie ininterrumpida de eventos de entrada de usuario, use la [**función SendInput.**](/windows/win32/api/winuser/nf-winuser-sendinput)</span><span class="sxs-lookup"><span data-stu-id="5a06e-330">To simulate an uninterrupted series of user input events, use the [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function.</span></span> <span data-ttu-id="5a06e-331">La función acepta tres parámetros.</span><span class="sxs-lookup"><span data-stu-id="5a06e-331">The function accepts three parameters.</span></span> <span data-ttu-id="5a06e-332">El primer parámetro, *cInputs*, indica el número de eventos de entrada que se simularán.</span><span class="sxs-lookup"><span data-stu-id="5a06e-332">The first parameter, *cInputs*, indicates the number of input events that will be simulated.</span></span> <span data-ttu-id="5a06e-333">El segundo parámetro, *rgInputs*, es una matriz de estructuras [**INPUT,**](/windows/win32/api/winuser/ns-winuser-input) cada una de las que describe un tipo de evento de entrada e información adicional sobre ese evento.</span><span class="sxs-lookup"><span data-stu-id="5a06e-333">The second parameter, *rgInputs*, is an array of [**INPUT**](/windows/win32/api/winuser/ns-winuser-input) structures, each describing a type of input event and additional information about that event.</span></span> <span data-ttu-id="5a06e-334">El último parámetro, *cbSize*, acepta el tamaño de la estructura **INPUT,** en bytes.</span><span class="sxs-lookup"><span data-stu-id="5a06e-334">The last parameter, *cbSize*, accepts the size of the **INPUT** structure, in bytes.</span></span>

<span data-ttu-id="5a06e-335">La [**función SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) funciona insertando una serie de eventos de entrada simulados en el flujo de entrada de un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="5a06e-335">The [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function works by injecting a series of simulated input events into a device's input stream.</span></span> <span data-ttu-id="5a06e-336">El efecto es similar a llamar al evento [**keybd \_**](/windows/win32/api/winuser/nf-winuser-keybd_event) o a la función de evento de [**mouse \_**](/windows/win32/api/winuser/nf-winuser-mouse_event) repetidamente, salvo que el sistema garantiza que ningún otro evento de entrada se interminpe con los eventos simulados.</span><span class="sxs-lookup"><span data-stu-id="5a06e-336">The effect is similar to calling the [**keybd\_event**](/windows/win32/api/winuser/nf-winuser-keybd_event) or [**mouse\_event**](/windows/win32/api/winuser/nf-winuser-mouse_event) function repeatedly, except that the system ensures that no other input events intermingle with the simulated events.</span></span> <span data-ttu-id="5a06e-337">Cuando se completa la llamada, el valor devuelto indica el número de eventos de entrada que se reproducen correctamente.</span><span class="sxs-lookup"><span data-stu-id="5a06e-337">When the call completes, the return value indicates the number of input events successfully played.</span></span> <span data-ttu-id="5a06e-338">Si este valor es cero, se bloqueó la entrada.</span><span class="sxs-lookup"><span data-stu-id="5a06e-338">If this value is zero, then input was blocked.</span></span>

<span data-ttu-id="5a06e-339">La [**función SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) no restablece el estado actual del teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-339">The [**SendInput**](/windows/win32/api/winuser/nf-winuser-sendinput) function does not reset the keyboard's current state.</span></span> <span data-ttu-id="5a06e-340">Por lo tanto, si el usuario tiene presionadas las teclas al llamar a esta función, podrían interferir con los eventos que genera esta función.</span><span class="sxs-lookup"><span data-stu-id="5a06e-340">Therefore, if the user has any keys pressed when you call this function, they might interfere with the events that this function generates.</span></span> <span data-ttu-id="5a06e-341">Si le preocupa la posible interferencia, compruebe el estado del teclado con la [**función GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) y corrija según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="5a06e-341">If you are concerned about possible interference, check the keyboard's state with the [**GetAsyncKeyState**](/windows/win32/api/winuser/nf-winuser-getasynckeystate) function and correct as necessary.</span></span>

## <a name="languages-locales-and-keyboard-layouts"></a><span data-ttu-id="5a06e-342">Idiomas, configuraciones regionales y diseños de teclado</span><span class="sxs-lookup"><span data-stu-id="5a06e-342">Languages, Locales, and Keyboard Layouts</span></span>

<span data-ttu-id="5a06e-343">Un *idioma* es un idioma natural, como inglés, francés y japonés.</span><span class="sxs-lookup"><span data-stu-id="5a06e-343">A *language* is a natural language, such as English, French, and Japanese.</span></span> <span data-ttu-id="5a06e-344">Un *subidioma* es una variante de un idioma natural que se habla en una región geográfica específica, como los subidiomaes de inglés que se hablan en el Reino Unido y los Estados Unidos.</span><span class="sxs-lookup"><span data-stu-id="5a06e-344">A *sublanguage* is a variant of a natural language that is spoken in a specific geographical region, such as the English sublanguages spoken in the United Kingdom and the United States.</span></span> <span data-ttu-id="5a06e-345">Las aplicaciones usan valores, [denominados identificadores de idioma,](/windows/desktop/Intl/language-identifiers)para identificar idiomas y sublenguajes de forma única.</span><span class="sxs-lookup"><span data-stu-id="5a06e-345">Applications use values, called [language identifiers](/windows/desktop/Intl/language-identifiers), to uniquely identify languages and sublanguages.</span></span>

<span data-ttu-id="5a06e-346">Las aplicaciones suelen *usar configuraciones* regionales para establecer el idioma en el que se procesan la entrada y la salida.</span><span class="sxs-lookup"><span data-stu-id="5a06e-346">Applications typically use *locales* to set the language in which input and output is processed.</span></span> <span data-ttu-id="5a06e-347">Establecer la configuración regional del teclado, por ejemplo, afecta a los valores de caracteres generados por el teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-347">Setting the locale for the keyboard, for example, affects the character values generated by the keyboard.</span></span> <span data-ttu-id="5a06e-348">Establecer la configuración regional de la pantalla o impresora afecta a los glifos mostrados o impresos.</span><span class="sxs-lookup"><span data-stu-id="5a06e-348">Setting the locale for the display or printer affects the glyphs displayed or printed.</span></span> <span data-ttu-id="5a06e-349">Las aplicaciones establecen la configuración regional de un teclado mediante la carga y el uso de diseños de teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-349">Applications set the locale for a keyboard by loading and using keyboard layouts.</span></span> <span data-ttu-id="5a06e-350">Establecen la configuración regional de una pantalla o impresora seleccionando una fuente que admita la configuración regional especificada.</span><span class="sxs-lookup"><span data-stu-id="5a06e-350">They set the locale for a display or printer by selecting a font that supports the specified locale.</span></span>

<span data-ttu-id="5a06e-351">Un diseño de teclado no solo especifica la posición física de las teclas en el teclado, sino que también determina los valores de caracteres generados al presionar esas teclas.</span><span class="sxs-lookup"><span data-stu-id="5a06e-351">A keyboard layout not only specifies the physical position of the keys on the keyboard but also determines the character values generated by pressing those keys.</span></span> <span data-ttu-id="5a06e-352">Cada diseño identifica el idioma de entrada actual y determina qué valores de caracteres se generan mediante las claves y combinaciones de teclas.</span><span class="sxs-lookup"><span data-stu-id="5a06e-352">Each layout identifies the current input language and determines which character values are generated by which keys and key combinations.</span></span>

<span data-ttu-id="5a06e-353">Cada diseño de teclado tiene un identificador correspondiente que identifica el diseño y el idioma.</span><span class="sxs-lookup"><span data-stu-id="5a06e-353">Every keyboard layout has a corresponding handle that identifies the layout and language.</span></span> <span data-ttu-id="5a06e-354">La palabra baja del identificador es un identificador de idioma.</span><span class="sxs-lookup"><span data-stu-id="5a06e-354">The low word of the handle is a language identifier.</span></span> <span data-ttu-id="5a06e-355">La palabra alta es un identificador de dispositivo, que especifica el diseño físico o es cero, lo que indica un diseño físico predeterminado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-355">The high word is a device handle, specifying the physical layout, or is zero, indicating a default physical layout.</span></span> <span data-ttu-id="5a06e-356">El usuario puede asociar cualquier idioma de entrada a un diseño físico.</span><span class="sxs-lookup"><span data-stu-id="5a06e-356">The user can associate any input language with a physical layout.</span></span> <span data-ttu-id="5a06e-357">Por ejemplo, un usuario de habla inglesa que trabaja en francés en ocasiones puede establecer el idioma de entrada del teclado en francés sin cambiar el diseño físico del teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-357">For example, an English-speaking user who very occasionally works in French can set the input language of the keyboard to French without changing the physical layout of the keyboard.</span></span> <span data-ttu-id="5a06e-358">Esto significa que el usuario puede escribir texto en francés mediante el conocido diseño en inglés.</span><span class="sxs-lookup"><span data-stu-id="5a06e-358">This means the user can enter text in French using the familiar English layout.</span></span>

<span data-ttu-id="5a06e-359">Por lo general, no se espera que las aplicaciones manipulen directamente los idiomas de entrada.</span><span class="sxs-lookup"><span data-stu-id="5a06e-359">Applications are generally not expected to manipulate input languages directly.</span></span> <span data-ttu-id="5a06e-360">En su lugar, el usuario configura combinaciones de idioma y diseño y, a continuación, cambia entre ellas.</span><span class="sxs-lookup"><span data-stu-id="5a06e-360">Instead, the user sets up language and layout combinations, then switches among them.</span></span> <span data-ttu-id="5a06e-361">Cuando el usuario hace clic en el texto marcado con un idioma diferente, la aplicación llama a la función [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) para activar el diseño predeterminado del usuario para ese idioma.</span><span class="sxs-lookup"><span data-stu-id="5a06e-361">When the user clicks into text marked with a different language, the application calls the [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) function to activate the user's default layout for that language.</span></span> <span data-ttu-id="5a06e-362">Si el usuario edita texto en un idioma que no está en la lista activa, la aplicación puede llamar a la función [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) con el idioma para obtener un diseño basado en ese idioma.</span><span class="sxs-lookup"><span data-stu-id="5a06e-362">If the user edits text in a language which is not in the active list, the application can call the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function with the language to get a layout based on that language.</span></span>

<span data-ttu-id="5a06e-363">La [**función ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) establece el idioma de entrada para la tarea actual.</span><span class="sxs-lookup"><span data-stu-id="5a06e-363">The [**ActivateKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-activatekeyboardlayout) function sets the input language for the current task.</span></span> <span data-ttu-id="5a06e-364">El *parámetro hkl* puede ser el identificador del diseño del teclado o un identificador de idioma extendido de cero.</span><span class="sxs-lookup"><span data-stu-id="5a06e-364">The *hkl* parameter can be either the handle to the keyboard layout or a zero-extended language identifier.</span></span> <span data-ttu-id="5a06e-365">Los identificadores de diseño de teclado se pueden obtener de [**la función LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) o [**GetKeyboardLayoutList.**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutlist)</span><span class="sxs-lookup"><span data-stu-id="5a06e-365">Keyboard layout handles can be obtained from the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) or [**GetKeyboardLayoutList**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutlist) function.</span></span> <span data-ttu-id="5a06e-366">Los **valores HKL \_ NEXT** y **HKL \_ PREV** también se pueden usar para seleccionar el teclado siguiente o anterior.</span><span class="sxs-lookup"><span data-stu-id="5a06e-366">The **HKL\_NEXT** and **HKL\_PREV** values can also be used to select the next or previous keyboard.</span></span>

<span data-ttu-id="5a06e-367">La [**función GetKeyboardLayoutName**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutnamea) recupera el nombre del diseño de teclado activo para el subproceso que realiza la llamada.</span><span class="sxs-lookup"><span data-stu-id="5a06e-367">The [**GetKeyboardLayoutName**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayoutnamea) function retrieves the name of the active keyboard layout for the calling thread.</span></span> <span data-ttu-id="5a06e-368">Si una aplicación crea el diseño activo mediante la función [**LoadKeyboardLayout,**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) **GetKeyboardLayoutName** recupera la misma cadena usada para crear el diseño.</span><span class="sxs-lookup"><span data-stu-id="5a06e-368">If an application creates the active layout using the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function, **GetKeyboardLayoutName** retrieves the same string used to create the layout.</span></span> <span data-ttu-id="5a06e-369">De lo contrario, la cadena es el identificador de idioma principal correspondiente a la configuración regional del diseño activo.</span><span class="sxs-lookup"><span data-stu-id="5a06e-369">Otherwise, the string is the primary language identifier corresponding to the locale of the active layout.</span></span> <span data-ttu-id="5a06e-370">Esto significa que es posible que la función no diferencie necesariamente entre diseños diferentes con el mismo idioma principal, por lo que no puede devolver información específica sobre el idioma de entrada.</span><span class="sxs-lookup"><span data-stu-id="5a06e-370">This means the function may not necessarily differentiate among different layouts with the same primary language, so cannot return specific information about the input language.</span></span> <span data-ttu-id="5a06e-371">Sin [**embargo, la función GetKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayout) se puede usar para determinar el idioma de entrada.</span><span class="sxs-lookup"><span data-stu-id="5a06e-371">The [**GetKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-getkeyboardlayout) function, however, can be used to determine the input language.</span></span>

<span data-ttu-id="5a06e-372">La [**función LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) carga un diseño de teclado y hace que el diseño esté disponible para el usuario.</span><span class="sxs-lookup"><span data-stu-id="5a06e-372">The [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function loads a keyboard layout and makes the layout available to the user.</span></span> <span data-ttu-id="5a06e-373">Las aplicaciones pueden activar inmediatamente el diseño para el subproceso actual mediante el **valor KLF \_ ACTIVATE.**</span><span class="sxs-lookup"><span data-stu-id="5a06e-373">Applications can make the layout immediately active for the current thread by using the **KLF\_ACTIVATE** value.</span></span> <span data-ttu-id="5a06e-374">Una aplicación puede usar el **valor \_ REORDER** de KLF para reordenar los diseños sin especificar también el **valor KLF \_ ACTIVATE.**</span><span class="sxs-lookup"><span data-stu-id="5a06e-374">An application can use the **KLF\_REORDER** value to reorder the layouts without also specifying the **KLF\_ACTIVATE** value.</span></span> <span data-ttu-id="5a06e-375">Las aplicaciones siempre deben usar el valor **KLF \_ SUBSTITUTE \_ OK** al cargar diseños de teclado para asegurarse de que la preferencia del usuario, si existe, está seleccionada.</span><span class="sxs-lookup"><span data-stu-id="5a06e-375">Applications should always use the **KLF\_SUBSTITUTE\_OK** value when loading keyboard layouts to ensure that the user's preference, if any, is selected.</span></span>

<span data-ttu-id="5a06e-376">Para la compatibilidad multilingüe, [**la función LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) proporciona las marcas **\_ KLF REPLACELANG** y **KLF \_ NOTELLSHELL.**</span><span class="sxs-lookup"><span data-stu-id="5a06e-376">For multilingual support, the [**LoadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-loadkeyboardlayouta) function provides the **KLF\_REPLACELANG** and **KLF\_NOTELLSHELL** flags.</span></span> <span data-ttu-id="5a06e-377">La **marca \_ REPLACELANG** de KLF dirige a la función para reemplazar un diseño de teclado existente sin cambiar el idioma.</span><span class="sxs-lookup"><span data-stu-id="5a06e-377">The **KLF\_REPLACELANG** flag directs the function to replace an existing keyboard layout without changing the language.</span></span> <span data-ttu-id="5a06e-378">El intento de reemplazar un diseño existente con el mismo identificador de idioma pero sin especificar **KLF \_ REPLACELANG** es un error.</span><span class="sxs-lookup"><span data-stu-id="5a06e-378">Attempting to replace an existing layout using the same language identifier but without specifying **KLF\_REPLACELANG** is an error.</span></span> <span data-ttu-id="5a06e-379">La **marca \_ KLF NOTELLSHELL** impide que la función notifique al shell cuando se agrega o reemplaza un diseño de teclado.</span><span class="sxs-lookup"><span data-stu-id="5a06e-379">The **KLF\_NOTELLSHELL** flag prevents the function from notifying the shell when a keyboard layout is added or replaced.</span></span> <span data-ttu-id="5a06e-380">Esto es útil para las aplicaciones que agregan varios diseños en una serie consecutiva de llamadas.</span><span class="sxs-lookup"><span data-stu-id="5a06e-380">This is useful for applications that add multiple layouts in a consecutive series of calls.</span></span> <span data-ttu-id="5a06e-381">Esta marca debe usarse en todas las llamadas, menos en la última.</span><span class="sxs-lookup"><span data-stu-id="5a06e-381">This flag should be used in all but the last call.</span></span>

<span data-ttu-id="5a06e-382">La [**función UnloadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-unloadkeyboardlayout) está restringida en que no puede descargar el idioma de entrada predeterminado del sistema.</span><span class="sxs-lookup"><span data-stu-id="5a06e-382">The [**UnloadKeyboardLayout**](/windows/win32/api/winuser/nf-winuser-unloadkeyboardlayout) function is restricted in that it cannot unload the system default input language.</span></span> <span data-ttu-id="5a06e-383">Esto garantiza que el usuario siempre tiene un diseño disponible para escribir texto con el mismo juego de caracteres que usa el shell y el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="5a06e-383">This ensures that the user always has one layout available for enter text using the same character set as used by the shell and file system.</span></span>

 

 
