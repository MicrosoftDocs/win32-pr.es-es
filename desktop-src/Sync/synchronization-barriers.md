---
description: Una barrera de sincronización permite que varios subprocesos esperen hasta que todos los subprocesos hayan alcanzado un punto de ejecución determinado antes de que continúe cualquier subproceso.
ms.assetid: 3A76E6F7-C38B-4843-9496-36F3C78B700C
title: Barreras de sincronización
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4276f0bbc5a10eef391c12cc51ebd475e563bd44
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104278790"
---
# <a name="synchronization-barriers"></a><span data-ttu-id="fa9c3-103">Barreras de sincronización</span><span class="sxs-lookup"><span data-stu-id="fa9c3-103">Synchronization Barriers</span></span>

<span data-ttu-id="fa9c3-104">Una barrera de sincronización permite que varios subprocesos esperen hasta que todos los subprocesos hayan alcanzado un punto de ejecución determinado antes de que continúe cualquier subproceso.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-104">A synchronization barrier enables multiple threads to wait until all threads have all reached a particular point of execution before any thread continues.</span></span> <span data-ttu-id="fa9c3-105">No se pueden compartir barreras de sincronización entre procesos.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-105">Synchronization barriers cannot be shared across processes.</span></span>

<span data-ttu-id="fa9c3-106">Las barreras de sincronización son útiles para los cálculos por fases, en los que los subprocesos que ejecutan el mismo código en paralelo deben completar una fase antes de pasar a la siguiente.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-106">Synchronization barriers are useful for phased computations, in which threads executing the same code in parallel must all complete one phase before moving on to the next.</span></span>

<span data-ttu-id="fa9c3-107">Para crear una barrera de sincronización, llame a la función [**InitializeSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-initializesynchronizationbarrier) y especifique un número máximo de subprocesos y el número de veces que un subproceso debe girar antes de que se bloquee.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-107">To create a synchronization barrier, call the [**InitializeSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-initializesynchronizationbarrier) function and specify a maximum number of threads and how many times a thread should spin before it blocks.</span></span> <span data-ttu-id="fa9c3-108">A continuación, inicie los subprocesos que usarán la barrera.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-108">Then launch the threads that will use the barrier.</span></span> <span data-ttu-id="fa9c3-109">Una vez que cada subproceso finaliza su trabajo, llama a [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) para esperar a la barrera.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-109">After each thread finishes its work, it calls [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) to wait at the barrier.</span></span> <span data-ttu-id="fa9c3-110">La función **EnterSynchronizationBarrier** bloquea cada subproceso hasta que el número de subprocesos bloqueados en la barrera alcanza el número máximo de subprocesos para la barrera, momento en el cual **EnterSynchronizationBarrier** Desbloquea todos los subprocesos.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-110">The **EnterSynchronizationBarrier** function blocks each thread until the number of threads blocked in the barrier reaches the maximum thread count for the barrier, at which point **EnterSynchronizationBarrier** unblocks all the threads.</span></span> <span data-ttu-id="fa9c3-111">La función **EnterSynchronizationBarrier** devuelve **true** para exactamente uno de los subprocesos que entró en la barrera y devuelve **false** para todos los demás subprocesos.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-111">The **EnterSynchronizationBarrier** function returns **TRUE** for exactly one of the threads that entered the barrier, and returns **FALSE** for all other threads.</span></span>

<span data-ttu-id="fa9c3-112">Para liberar una barrera de sincronización cuando ya no sea necesaria, llame a [**DeleteSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-deletesynchronizationbarrier).</span><span class="sxs-lookup"><span data-stu-id="fa9c3-112">To release a synchronization barrier when it is no longer needed, call [**DeleteSynchronizationBarrier**](/windows/desktop/api/SynchAPI/nf-synchapi-deletesynchronizationbarrier).</span></span> <span data-ttu-id="fa9c3-113">Es seguro llamar a esta función inmediatamente después de llamar a [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) , ya que la función garantiza que todos los subprocesos han terminado de usar la barrera antes de que se libere.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-113">It is safe to call this function immediately after calling [**EnterSynchronizationBarrier**](/windows/desktop/api/synchapi/nf-synchapi-entersynchronizationbarrier) because that function ensures that all threads have finished using the barrier before it is released.</span></span>

<span data-ttu-id="fa9c3-114">Si nunca se va a eliminar una barrera de sincronización, los subprocesos pueden especificar las **marcas de barrera de sincronización sin marca de \_ \_ \_ \_ eliminación** cuando entran en la barrera.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-114">If a synchronization barrier will never be deleted, threads can specify the **SYNCHRONIZATION\_BARRIER\_FLAGS\_NO\_DELETE** flag when they enter the barrier.</span></span> <span data-ttu-id="fa9c3-115">Todos los subprocesos que usan la barrera deben especificar esta marca; Si no hay ningún subproceso, se omite la marca.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-115">All threads using the barrier must specify this flag; if any thread does not, the flag is ignored.</span></span> <span data-ttu-id="fa9c3-116">Esta marca hace que la función omita el trabajo adicional necesario para la seguridad de la eliminación, lo que puede mejorar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-116">This flag causes the function to skip the extra work required for deletion safety, which can improve performance.</span></span> <span data-ttu-id="fa9c3-117">Tenga en cuenta que la eliminación de una barrera mientras esta marca está en vigor puede dar lugar a un acceso de identificador no válido y a uno o más subprocesos bloqueados de forma permanente.</span><span class="sxs-lookup"><span data-stu-id="fa9c3-117">Note that deleting a barrier while this flag is in effect may result in an invalid handle access and one or more permanently blocked threads.</span></span>

 

 



