---
description: La interfaz IWiaImageFilter es una interfaz de extensión implementada por desarrolladores de filtros de procesamiento de imágenes y llamada por la adquisición de imágenes de Windows (WIA) 2,0.
ms.assetid: 2abe913b-bb2b-486d-a3f4-d5932433fc82
title: Interfaz IWiaImageFilter (WIA. h)
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- IWiaImageFilter
api_type:
- COM
api_location:
- Wia.h
ms.openlocfilehash: 8d859b79d15db627bb09cb60f758791a8b5860f7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103909858"
---
# <a name="iwiaimagefilter-interface"></a><span data-ttu-id="3215a-103">Interfaz IWiaImageFilter</span><span class="sxs-lookup"><span data-stu-id="3215a-103">IWiaImageFilter interface</span></span>

<span data-ttu-id="3215a-104">La interfaz **IWiaImageFilter** es una interfaz de extensión implementada por desarrolladores de filtros de procesamiento de imágenes y llamada por la adquisición de imágenes de Windows (WIA) 2,0.</span><span class="sxs-lookup"><span data-stu-id="3215a-104">The **IWiaImageFilter** interface is an extension interface implemented by image processing filter developers and called by Windows Image Acquisition (WIA) 2.0.</span></span>

## <a name="members"></a><span data-ttu-id="3215a-105">Miembros</span><span class="sxs-lookup"><span data-stu-id="3215a-105">Members</span></span>

<span data-ttu-id="3215a-106">La interfaz **IWiaImageFilter** hereda de la interfaz [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) .</span><span class="sxs-lookup"><span data-stu-id="3215a-106">The **IWiaImageFilter** interface inherits from the [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) interface.</span></span> <span data-ttu-id="3215a-107">**IWiaImageFilter** también tiene estos tipos de miembros:</span><span class="sxs-lookup"><span data-stu-id="3215a-107">**IWiaImageFilter** also has these types of members:</span></span>

-   [<span data-ttu-id="3215a-108">Métodos</span><span class="sxs-lookup"><span data-stu-id="3215a-108">Methods</span></span>](#methods)

### <a name="methods"></a><span data-ttu-id="3215a-109">Métodos</span><span class="sxs-lookup"><span data-stu-id="3215a-109">Methods</span></span>

<span data-ttu-id="3215a-110">La interfaz **IWiaImageFilter** tiene estos métodos.</span><span class="sxs-lookup"><span data-stu-id="3215a-110">The **IWiaImageFilter** interface has these methods.</span></span>



| <span data-ttu-id="3215a-111">Método</span><span class="sxs-lookup"><span data-stu-id="3215a-111">Method</span></span>                                                                | <span data-ttu-id="3215a-112">Descripción</span><span class="sxs-lookup"><span data-stu-id="3215a-112">Description</span></span>                                                                                             |
|:----------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="3215a-113">**ApplyProperties**</span><span class="sxs-lookup"><span data-stu-id="3215a-113">**ApplyProperties**</span></span>](-wia-iwiaimagefilter-applyproperties.md)       | <span data-ttu-id="3215a-114">Permite que el filtro de procesamiento de imágenes escriba las propiedades de nuevo en el controlador (y en el dispositivo).</span><span class="sxs-lookup"><span data-stu-id="3215a-114">Enables the image processing filter to write properties back to the driver (and device).</span></span><br/>     |
| [<span data-ttu-id="3215a-115">**FilterPreviewImage**</span><span class="sxs-lookup"><span data-stu-id="3215a-115">**FilterPreviewImage**</span></span>](-wia-iwiaimagefilter-filterpreviewimage.md) | <span data-ttu-id="3215a-116">Filtra la imagen de vista previa.</span><span class="sxs-lookup"><span data-stu-id="3215a-116">Filters the preview image.</span></span><br/>                                                                   |
| [<span data-ttu-id="3215a-117">**InitializeFilter**</span><span class="sxs-lookup"><span data-stu-id="3215a-117">**InitializeFilter**</span></span>](-wia-iwiaimagefilter-initializefilter.md)     | <span data-ttu-id="3215a-118">Inicializa el filtro.</span><span class="sxs-lookup"><span data-stu-id="3215a-118">Initializes the filter.</span></span> <span data-ttu-id="3215a-119">Lo llama WIA 2,0 antes de descargar cada imagen.</span><span class="sxs-lookup"><span data-stu-id="3215a-119">Called by WIA 2.0 before each image download.</span></span> <br/>                       |
| [<span data-ttu-id="3215a-120">**SetNewCallback**</span><span class="sxs-lookup"><span data-stu-id="3215a-120">**SetNewCallback**</span></span>](-wia-iwiaimagefilter-setnewcallback.md)         | <span data-ttu-id="3215a-121">Establece una nueva devolución de llamada de aplicación para el filtro de procesamiento de imágenes que se va a usar para las llamadas de reenvío.</span><span class="sxs-lookup"><span data-stu-id="3215a-121">Sets a new application callback for the image processing filter to use for forwarding calls.</span></span><br/> |



 

## <a name="remarks"></a><span data-ttu-id="3215a-122">Observaciones</span><span class="sxs-lookup"><span data-stu-id="3215a-122">Remarks</span></span>

<span data-ttu-id="3215a-123">Los desarrolladores de filtros de procesamiento de imágenes deben implementar esta interfaz y la interfaz [**IWiaTransferCallback**](-wia-iwiatransfercallback.md) .</span><span class="sxs-lookup"><span data-stu-id="3215a-123">Image processing filter developers should implement this interface and the [**IWiaTransferCallback**](-wia-iwiatransfercallback.md) interface.</span></span>

<span data-ttu-id="3215a-124">WIA 2,0 llama a los métodos de filtro.</span><span class="sxs-lookup"><span data-stu-id="3215a-124">WIA 2.0 calls filter methods.</span></span> <span data-ttu-id="3215a-125">Nunca se llama directamente desde una aplicación.</span><span class="sxs-lookup"><span data-stu-id="3215a-125">They are never called directly from an application.</span></span>

<span data-ttu-id="3215a-126">Microsoft proporciona el componente WIA 2,0 Preview, que almacena en caché la imagen de vista previa original y sin filtrar que se adquiere del escáner.</span><span class="sxs-lookup"><span data-stu-id="3215a-126">Microsoft supplies the WIA 2.0 Preview Component, which caches the original, unfiltered preview image that is acquired from the scanner.</span></span> <span data-ttu-id="3215a-127">Una aplicación utiliza [CoCreateInstance](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance) para crear una instancia del componente de vista previa de WIA 2,0 (CLSID \_ WiaPreview), que carga el filtro mediante [**IWiaItem2:: getExtension**](-wia-iwiaitem2-getextension.md).</span><span class="sxs-lookup"><span data-stu-id="3215a-127">An application uses [CoCreateInstance](/windows/win32/api/combaseapi/nf-combaseapi-cocreateinstance) to co-create an instance of the WIA 2.0 Preview Component (CLSID\_WiaPreview), which loads the filter using [**IWiaItem2::GetExtension**](-wia-iwiaitem2-getextension.md).</span></span> <span data-ttu-id="3215a-128">Se llama al filtro automáticamente cuando la aplicación llama a [**IWiaTransfer::D scargar**](-wia-iwiatransfer-download.md).</span><span class="sxs-lookup"><span data-stu-id="3215a-128">The filter is called automatically when the application calls [**IWiaTransfer::Download**](-wia-iwiatransfer-download.md).</span></span>

<span data-ttu-id="3215a-129">El filtro de procesamiento de imágenes siempre se ejecuta cuando se examina una imagen.</span><span class="sxs-lookup"><span data-stu-id="3215a-129">The image processing filter is always executed when an image is scanned.</span></span> <span data-ttu-id="3215a-130">Una aplicación no puede adquirir una imagen del escáner sin tener primero aplicado el filtro de creación de imágenes.</span><span class="sxs-lookup"><span data-stu-id="3215a-130">An application cannot acquire an image from the scanner without having the imaging filter applied first.</span></span>

<span data-ttu-id="3215a-131">Un filtro debe implementar el brillo y el contraste como mínimo.</span><span class="sxs-lookup"><span data-stu-id="3215a-131">A filter must implement brightness and contrast at a minimum.</span></span> <span data-ttu-id="3215a-132">La interfaz de usuario común, que proporciona controles de brillo y contraste al usuario, puede mostrar vistas previas exactas al usuario.</span><span class="sxs-lookup"><span data-stu-id="3215a-132">The common UI, which provides brightness and contrast controls to the user, can display accurate previews to the user.</span></span>

<span data-ttu-id="3215a-133">Un filtro de procesamiento de imágenes nunca debe modificar el miembro *lMessage* de la estructura [**WiaTransferParams**](-wia-wiatransferparams.md) .</span><span class="sxs-lookup"><span data-stu-id="3215a-133">An image processing filter should never modify the *lMessage* member of the [**WiaTransferParams**](-wia-wiatransferparams.md) structure.</span></span>

<span data-ttu-id="3215a-134">Para leer las propiedades necesarias, el filtro de procesamiento de imágenes debe llamar a [**IWiaPropertyStorage:: GetPropertyStream**](/windows/desktop/api/wia_xp/nf-wia_xp-iwiapropertystorage-getpropertystream) en la interfaz [**IWiaPropertyStorage**](/windows/desktop/api/wia_xp/nn-wia_xp-iwiapropertystorage) que obtiene del elemento mediante una llamada a [IWiaImageFilter:: QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span><span class="sxs-lookup"><span data-stu-id="3215a-134">To read the required properties the image processing filter should call [**IWiaPropertyStorage::GetPropertyStream**](/windows/desktop/api/wia_xp/nf-wia_xp-iwiapropertystorage-getpropertystream) on the [**IWiaPropertyStorage**](/windows/desktop/api/wia_xp/nn-wia_xp-iwiapropertystorage) interface that it gets from the item by calling [IWiaImageFilter::QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span></span> <span data-ttu-id="3215a-135">Después, el filtro puede crear instancias de una instancia de [IPropertyStorage](/windows/win32/api/propidlbase/nn-propidlbase-ipropertystorage) en esta secuencia para leer las propiedades de los elementos.</span><span class="sxs-lookup"><span data-stu-id="3215a-135">The filter can then instantiate an [IPropertyStorage](/windows/win32/api/propidlbase/nn-propidlbase-ipropertystorage) instance on this stream to read the items properties.</span></span> <span data-ttu-id="3215a-136">El filtro de procesamiento de imágenes no debe llamar directamente a [IWiaPropertyStorage:: ReadMultiple](/windows/win32/api/propidlbase/nf-propidlbase-ipropertystorage-readmultiple) porque este método llama a la del controlador `drvReadItemProperties` , pero el servicio WIA 2,0 ya ha bloqueado el controlador en la `drvAcquireItemData` llamada, por lo que esta llamada superará el tiempo de espera y producirá un error.</span><span class="sxs-lookup"><span data-stu-id="3215a-136">The image processing filter should not call [IWiaPropertyStorage::ReadMultiple](/windows/win32/api/propidlbase/nf-propidlbase-ipropertystorage-readmultiple) directly because this method calls into the driver's `drvReadItemProperties`, but the WIA 2.0 service has already locked the driver in the `drvAcquireItemData` call so this call will timeout and fail.</span></span>

<span data-ttu-id="3215a-137">Las propiedades que le interesa el filtro pueden ser, por ejemplo, la configuración de brillo y contraste.</span><span class="sxs-lookup"><span data-stu-id="3215a-137">The properties that the filter is interested in could for example be the brightness and contrast settings.</span></span> <span data-ttu-id="3215a-138">Normalmente, el filtro también necesita leer el formato de imagen, así como la propiedad de vista previa, [**WIA \_ DPS \_ Preview**](-wia-wiaitempropscannerdevice.md), de *pWiaItem2*.</span><span class="sxs-lookup"><span data-stu-id="3215a-138">The filter typically also needs to read the image format as well as the preview property, [**WIA\_DPS\_PREVIEW**](-wia-wiaitempropscannerdevice.md), from *pWiaItem2*.</span></span> <span data-ttu-id="3215a-139">Todas estas propiedades se usan en el proceso de filtrado.</span><span class="sxs-lookup"><span data-stu-id="3215a-139">These properties are all used in the filtering process.</span></span>

<span data-ttu-id="3215a-140">Los componentes de WIA 2,0 siempre escriben datos sin filtrar en el filtro de procesamiento de imágenes.</span><span class="sxs-lookup"><span data-stu-id="3215a-140">The WIA 2.0 components always writes unfiltered data into the image processing filter.</span></span> <span data-ttu-id="3215a-141">El algoritmo de procesamiento de imágenes implementado por el flujo del filtro puede filtrar los datos más de una vez y no tiene que preocuparse por la generación de los mismos resultados que al filtrar los datos una vez.</span><span class="sxs-lookup"><span data-stu-id="3215a-141">The image processing algorithm implemented by the filter's stream can filter the data more than once and does not have to be concerned with producing the same results as filtering the data once.</span></span>

<span data-ttu-id="3215a-142">El filtro debe prestar atención a la propiedad de [**\_ \_ vista previa de DPS de WIA**](-wia-wiaitempropscannerdevice.md) , especialmente si algunas tareas relacionadas con el filtro se tratan en el hardware.</span><span class="sxs-lookup"><span data-stu-id="3215a-142">The filter must pay attention to the [**WIA\_DPS\_PREVIEW**](-wia-wiaitempropscannerdevice.md) property, especially if some filter related tasks are handled in hardware.</span></span> <span data-ttu-id="3215a-143">Por ejemplo, un determinado controlador puede cambiar el brillo de la lámpara en el hardware del escáner, en función de cómo la aplicación haya establecido el brillo en un elemento de WIA 2,0.</span><span class="sxs-lookup"><span data-stu-id="3215a-143">For example, a certain driver can change the brightness of the lamp in the scanner hardware depending on how the application has set the brightness into a WIA 2.0 item.</span></span> <span data-ttu-id="3215a-144">Durante el análisis final (cuando la aplicación llama a [**IWiaTransfer::D scargar**](-wia-iwiatransfer-download.md)), el controlador normalmente modificaría la lámpara física del escáner.</span><span class="sxs-lookup"><span data-stu-id="3215a-144">During the final scan (when the application calls [**IWiaTransfer::Download**](-wia-iwiatransfer-download.md)) the driver would typically modify the physical lamp of the scanner.</span></span> <span data-ttu-id="3215a-145">En este caso, es posible que el filtro de procesamiento de imágenes no tenga que realizar ningún procesamiento de brillo.</span><span class="sxs-lookup"><span data-stu-id="3215a-145">In this case the image processing filter may not have to perform any brightness processing at all.</span></span> <span data-ttu-id="3215a-146">Sin embargo, durante un examen de vista previa, el controlador no debe modificar el brillo de la lámpara; en su lugar, se debe tener cuidado únicamente en el filtro de procesamiento de imágenes.</span><span class="sxs-lookup"><span data-stu-id="3215a-146">During a preview scan, however, the driver should not modify the brightness of the lamp—instead this should be taken care of solely in the image processing filter.</span></span> <span data-ttu-id="3215a-147">Es importante que el componente de vista previa de WIA 2,0 y el filtro de procesamiento de imágenes devuelvan imágenes precisas en función de las propiedades establecidas en el elemento.</span><span class="sxs-lookup"><span data-stu-id="3215a-147">It is important that the WIA 2.0 Preview Component and the image processing filter return accurate images based on the properties set into the item.</span></span>

<span data-ttu-id="3215a-148">Un filtro de procesamiento de imágenes debe admitir todos los formatos de imagen admitidos por el controlador.</span><span class="sxs-lookup"><span data-stu-id="3215a-148">An image processing filter must support all image formats that the driver supports.</span></span>

<span data-ttu-id="3215a-149">Al filtro de procesamiento de imágenes siempre se le proporciona una imagen que corresponde al área de selección establecida en el elemento para el que se está adquiriendo la imagen.</span><span class="sxs-lookup"><span data-stu-id="3215a-149">The image processing filter is always given an image corresponding to the selection area set into the item for which we are acquiring the image.</span></span> <span data-ttu-id="3215a-150">Sin embargo, tenga en cuenta que el controlador puede haber girado la imagen en caso de que admita la propiedad de [**\_ \_ rotación de IP de WIA**](-wia-wiaitempropscanneritem.md) .</span><span class="sxs-lookup"><span data-stu-id="3215a-150">Note, however, that the image may have been rotated by the driver in case it supports the [**WIA\_IPS\_ROTATION**](-wia-wiaitempropscanneritem.md) property.</span></span>

<span data-ttu-id="3215a-151">El filtro de procesamiento de imágenes se crea a través de [**IWiaItem2:: getExtension**](-wia-iwiaitem2-getextension.md), normalmente no de la aplicación, sino por componentes de WIA 2,0 cuando una aplicación llama a [**IWiaPreview:: GetNewPreview**](-wia-iwiapreview-getnewpreview.md) o [**IWiaTransfer::D scargar**](-wia-iwiatransfer-download.md).</span><span class="sxs-lookup"><span data-stu-id="3215a-151">The image processing filter is created through [**IWiaItem2::GetExtension**](-wia-iwiaitem2-getextension.md), typically not by the application but by WIA 2.0 components when an application calls [**IWiaPreview::GetNewPreview**](-wia-iwiapreview-getnewpreview.md) or [**IWiaTransfer::Download**](-wia-iwiatransfer-download.md).</span></span>

<span data-ttu-id="3215a-152">La interfaz **IWiaImageFilter** , al igual que todas las interfaces del modelo de objetos componentes (com), hereda los métodos de interfaz [IUnknown](/windows/win32/api/unknwn/nn-unknwn-iunknown) .</span><span class="sxs-lookup"><span data-stu-id="3215a-152">The **IWiaImageFilter** interface, like all Component Object Model (COM) interfaces, inherits the [IUnknown](/windows/win32/api/unknwn/nn-unknwn-iunknown) interface methods.</span></span>



| <span data-ttu-id="3215a-153">Métodos IUnknown</span><span class="sxs-lookup"><span data-stu-id="3215a-153">IUnknown Methods</span></span>                                        | <span data-ttu-id="3215a-154">Descripción</span><span class="sxs-lookup"><span data-stu-id="3215a-154">Description</span></span>                               |
|---------------------------------------------------------|-------------------------------------------|
| <span data-ttu-id="3215a-155">[IUnknown:: QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q))</span><span class="sxs-lookup"><span data-stu-id="3215a-155">[IUnknown::QueryInterface](/windows/win32/api/unknwn/nf-unknwn-iunknown-queryinterface(q))</span></span> | <span data-ttu-id="3215a-156">Devuelve punteros a las interfaces compatibles.</span><span class="sxs-lookup"><span data-stu-id="3215a-156">Returns pointers to supported interfaces.</span></span> |
| [<span data-ttu-id="3215a-157">IUnknown:: AddRef</span><span class="sxs-lookup"><span data-stu-id="3215a-157">IUnknown::AddRef</span></span>](/windows/win32/api/unknwn/nf-unknwn-iunknown-addref)                 | <span data-ttu-id="3215a-158">Incrementa el recuento de referencias.</span><span class="sxs-lookup"><span data-stu-id="3215a-158">Increments reference count.</span></span>               |
| [<span data-ttu-id="3215a-159">IUnknown:: Release</span><span class="sxs-lookup"><span data-stu-id="3215a-159">IUnknown::Release</span></span>](/windows/win32/api/unknwn/nf-unknwn-iunknown-release)               | <span data-ttu-id="3215a-160">Reduce el recuento de referencias.</span><span class="sxs-lookup"><span data-stu-id="3215a-160">Decrements reference count.</span></span>               |



 

## <a name="requirements"></a><span data-ttu-id="3215a-161">Requisitos</span><span class="sxs-lookup"><span data-stu-id="3215a-161">Requirements</span></span>



| <span data-ttu-id="3215a-162">Requisito</span><span class="sxs-lookup"><span data-stu-id="3215a-162">Requirement</span></span> | <span data-ttu-id="3215a-163">Value</span><span class="sxs-lookup"><span data-stu-id="3215a-163">Value</span></span> |
|-------------------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="3215a-164">Cliente mínimo compatible</span><span class="sxs-lookup"><span data-stu-id="3215a-164">Minimum supported client</span></span><br/> | <span data-ttu-id="3215a-165">Solo aplicaciones de escritorio de Windows Vista \[\]</span><span class="sxs-lookup"><span data-stu-id="3215a-165">Windows Vista \[desktop apps only\]</span></span><br/>                                     |
| <span data-ttu-id="3215a-166">Servidor mínimo compatible</span><span class="sxs-lookup"><span data-stu-id="3215a-166">Minimum supported server</span></span><br/> | <span data-ttu-id="3215a-167">Solo aplicaciones de escritorio de Windows Server 2008 \[\]</span><span class="sxs-lookup"><span data-stu-id="3215a-167">Windows Server 2008 \[desktop apps only\]</span></span><br/>                               |
| <span data-ttu-id="3215a-168">Encabezado</span><span class="sxs-lookup"><span data-stu-id="3215a-168">Header</span></span><br/>                   | <dl> <span data-ttu-id="3215a-169"><dt>WIA. h</dt></span><span class="sxs-lookup"><span data-stu-id="3215a-169"><dt>Wia.h</dt></span></span> </dl>   |
| <span data-ttu-id="3215a-170">IDL</span><span class="sxs-lookup"><span data-stu-id="3215a-170">IDL</span></span><br/>                      | <dl> <span data-ttu-id="3215a-171"><dt>WIA. idl</dt></span><span class="sxs-lookup"><span data-stu-id="3215a-171"><dt>Wia.idl</dt></span></span> </dl> |



 

 
