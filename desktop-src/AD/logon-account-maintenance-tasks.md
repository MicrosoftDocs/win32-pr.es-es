---
title: Tareas de mantenimiento de la cuenta de inicio de sesión
description: En este tema se describen los problemas relacionados con las tareas de mantenimiento de la cuenta de inicio de sesión.
ms.assetid: 528be433-58ef-400b-ba9a-d114f3f94ec6
ms.tgt_platform: multiple
keywords:
- Tareas de mantenimiento de la cuenta de inicio de sesión AD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fa0f11f69d9a974fd666871833029eda0e059329
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/17/2020
ms.locfileid: "104420519"
---
# <a name="logon-account-maintenance-tasks"></a><span data-ttu-id="210bb-104">Tareas de mantenimiento de la cuenta de inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="210bb-104">Logon Account Maintenance Tasks</span></span>

<span data-ttu-id="210bb-105">En este tema se describen los problemas relacionados con las tareas de mantenimiento de la cuenta de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="210bb-105">This topic describes issues that pertain to logon account maintenance tasks.</span></span>

<span data-ttu-id="210bb-106">Hay dos problemas principales que se refieren a las tareas de mantenimiento de la cuenta de inicio de sesión:</span><span class="sxs-lookup"><span data-stu-id="210bb-106">There are two primary issues that concern logon account maintenance tasks:</span></span>

-   <span data-ttu-id="210bb-107">Actualización de la contraseña de la cuenta para una instancia de servicio que se ejecuta en una cuenta de usuario.</span><span class="sxs-lookup"><span data-stu-id="210bb-107">Updating the account password for a service instance that runs under a user account.</span></span> <span data-ttu-id="210bb-108">Para obtener más información, consulte [cambiar la contraseña en la cuenta de usuario de un servicio](changing-the-password-on-a-serviceampaposs-user-account.md).</span><span class="sxs-lookup"><span data-stu-id="210bb-108">For more information, see [Changing the Password on a Service's User Account](changing-the-password-on-a-serviceampaposs-user-account.md).</span></span>
-   <span data-ttu-id="210bb-109">Control de los cambios en la cuenta de inicio de sesión de una instancia de servicio.</span><span class="sxs-lookup"><span data-stu-id="210bb-109">Handling changes to the logon account of a service instance.</span></span>

<span data-ttu-id="210bb-110">Este último es un caso poco frecuente, pero puede ocurrir.</span><span class="sxs-lookup"><span data-stu-id="210bb-110">The latter is a rare case, but can happen.</span></span> <span data-ttu-id="210bb-111">El sistema proporciona la herramienta administrativa administración de equipos que permite cambiar a una cuenta de inicio de sesión de servicio.</span><span class="sxs-lookup"><span data-stu-id="210bb-111">The system provides the Computer Management administrative tool that enables change to a service logon account.</span></span> <span data-ttu-id="210bb-112">Además, otras aplicaciones pueden usar la función [**ChangeServiceConfig**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfiga) para especificar una nueva cuenta de inicio de sesión para un servicio instalado.</span><span class="sxs-lookup"><span data-stu-id="210bb-112">In addition, other applications can use the [**ChangeServiceConfig**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfiga) function to specify a new logon account for an installed service.</span></span> <span data-ttu-id="210bb-113">De forma predeterminada, se requieren privilegios de administrador local para cambiar una cuenta de servicio.</span><span class="sxs-lookup"><span data-stu-id="210bb-113">By default, local administrator privileges are required to change a service account.</span></span> <span data-ttu-id="210bb-114">Si esto ocurriera, podría afectar al servicio de dos maneras:</span><span class="sxs-lookup"><span data-stu-id="210bb-114">If this did happen, it could affect your service in two ways:</span></span>

-   <span data-ttu-id="210bb-115">Si ha registrado nombres de entidad de seguridad de servicio (SPN), se registrarán en la cuenta equivocada.</span><span class="sxs-lookup"><span data-stu-id="210bb-115">If you have registered service principal names (SPNs), they will be registered on the wrong account.</span></span>
-   <span data-ttu-id="210bb-116">Si establece ACE para conceder acceso al servicio, ahora concederá acceso a la cuenta equivocada.</span><span class="sxs-lookup"><span data-stu-id="210bb-116">If you set ACEs to grant access to the service, they would now grant access to the wrong account.</span></span>

<span data-ttu-id="210bb-117">Un enfoque consiste en que el instalador del servicio almacene los SPN registrados para cada instancia de servicio en el registro del equipo host.</span><span class="sxs-lookup"><span data-stu-id="210bb-117">One approach is to have the service installer store the registered SPNs for each service instance in the registry on the host computer.</span></span> <span data-ttu-id="210bb-118">Puede usar la misma clave del registro en HKEY \_ local \_ Machine que usó para almacenar la cadena de enlace para el SCP de servicio.</span><span class="sxs-lookup"><span data-stu-id="210bb-118">You could use the same registry key under HKEY\_LOCAL\_MACHINE that you used to store the binding string for the service SCP.</span></span> <span data-ttu-id="210bb-119">Cuando se inicia el servicio, llama a la función [**QueryServiceConfig**](/windows/desktop/api/winsvc/nf-winsvc-queryserviceconfiga) para determinar su cuenta de inicio de sesión y, a continuación, consulta el servidor de Active Directory para determinar si los SPN están registrados en el objeto de directorio de dicha cuenta.</span><span class="sxs-lookup"><span data-stu-id="210bb-119">When the service starts, it calls the [**QueryServiceConfig**](/windows/desktop/api/winsvc/nf-winsvc-queryserviceconfiga) function to determine its logon account and then queries the Active Directory server to determine whether the SPNs are registered on the directory object for that account.</span></span> <span data-ttu-id="210bb-120">Si los SPN no están registrados, o están registrados en la cuenta equivocada, el servicio rechaza el inicio y muestra un mensaje que indica que un administrador de dominio debe ejecutar el programa de configuración del servicio para actualizar la configuración de la cuenta de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="210bb-120">If the SPNs are not registered, or are registered on the wrong account, the service refuses to start and displays a message saying that a domain administrator must run the service's configuration program to update the logon account settings.</span></span> <span data-ttu-id="210bb-121">Tenga en cuenta que el administrador debe completar esta reconfiguración porque la cuenta de servicio no debe tener acceso para actualizar su propio SPN.</span><span class="sxs-lookup"><span data-stu-id="210bb-121">Be aware that this reconfiguration must be completed by an administrator because the service account should not have access to update its own SPN.</span></span> <span data-ttu-id="210bb-122">Tenga en cuenta también que se deben quitar los SPN de la cuenta anterior; de lo contrario, los SPN serán inservibles para la autenticación porque no son únicos en el bosque.</span><span class="sxs-lookup"><span data-stu-id="210bb-122">Also be aware that SPNs must be removed from the old account, otherwise the SPNs will be useless for authentication because they are not unique in the forest.</span></span>

 

 