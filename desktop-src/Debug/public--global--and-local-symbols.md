---
description: La funcionalidad de control de símbolos de la API de DbgHelp ha evolucionado a lo largo de los años.
ms.assetid: 6dc41682-6104-418b-b045-7afe8c2b11e9
title: Símbolos públicos, globales y locales
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 623bf93ec8f11d1cec9c5fec64e2479dd91ee5cd
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104080156"
---
# <a name="public-global-and-local-symbols"></a><span data-ttu-id="f03b3-103">Símbolos públicos, globales y locales</span><span class="sxs-lookup"><span data-stu-id="f03b3-103">Public, Global, and Local Symbols</span></span>

<span data-ttu-id="f03b3-104">La funcionalidad de control de símbolos de la API de DbgHelp ha evolucionado a lo largo de los años.</span><span class="sxs-lookup"><span data-stu-id="f03b3-104">The symbol handling capabilities of the DbgHelp API have evolved over the years.</span></span> <span data-ttu-id="f03b3-105">Para asegurarse de que el código funciona en diversos escenarios y proporciona detalles completos sobre los símbolos, utilice las funciones más recientes siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="f03b3-105">To ensure that your code works in a variety of scenarios and provides full details on the symbols, use the newest functions whenever possible.</span></span> <span data-ttu-id="f03b3-106">Por ejemplo, [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) reemplaza a [**SymEnumerateSymbols64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumeratesymbols), [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) reemplaza a [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname)y [**SymFromAddr**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromaddr) reemplaza [**SymGetSymFromAddr64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromaddr).</span><span class="sxs-lookup"><span data-stu-id="f03b3-106">For example, [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) replaces [**SymEnumerateSymbols64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumeratesymbols), [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) replaces [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname), and [**SymFromAddr**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromaddr) replaces [**SymGetSymFromAddr64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromaddr).</span></span>

## <a name="public-symbols"></a><span data-ttu-id="f03b3-107">Símbolos públicos</span><span class="sxs-lookup"><span data-stu-id="f03b3-107">Public Symbols</span></span>

<span data-ttu-id="f03b3-108">Las versiones iniciales de DbgHelp.dll admiten el examen de solo símbolos públicos.</span><span class="sxs-lookup"><span data-stu-id="f03b3-108">Initial versions of DbgHelp.dll supported examining only public symbols.</span></span> <span data-ttu-id="f03b3-109">Estos símbolos se generan para cualquier elemento del código que se debe exponer entre distintos archivos de código fuente.</span><span class="sxs-lookup"><span data-stu-id="f03b3-109">These symbols are generated for any item in the code that must be exposed between different source files.</span></span> <span data-ttu-id="f03b3-110">También incluyen todos los elementos que se exportan fuera del módulo.</span><span class="sxs-lookup"><span data-stu-id="f03b3-110">They also include all items that are exported out of the module.</span></span>

<span data-ttu-id="f03b3-111">Los símbolos se incrustan en la imagen o se almacenan por separado en un archivo. dbg o. pdb.</span><span class="sxs-lookup"><span data-stu-id="f03b3-111">The symbols are either embedded in the image, or stored separately in a .dbg or .pdb file.</span></span> <span data-ttu-id="f03b3-112">La única información almacenada es el nombre y la dirección del símbolo.</span><span class="sxs-lookup"><span data-stu-id="f03b3-112">The only information stored is the symbol name and address.</span></span> <span data-ttu-id="f03b3-113">Los nombres están disponibles como nombres representativos.</span><span class="sxs-lookup"><span data-stu-id="f03b3-113">The names are available as decorated names.</span></span> <span data-ttu-id="f03b3-114">Para ver los nombres no representativos, llame a la función [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) con SYMOPT \_ UNDNAME o use la función [**UnDecorateSymbolName**](/windows/desktop/api/Dbghelp/nf-dbghelp-undecoratesymbolname) .</span><span class="sxs-lookup"><span data-stu-id="f03b3-114">To view undecorated names, call the [**SymSetOptions**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetoptions) function with SYMOPT\_UNDNAME, or use the [**UnDecorateSymbolName**](/windows/desktop/api/Dbghelp/nf-dbghelp-undecoratesymbolname) function.</span></span>

<span data-ttu-id="f03b3-115">Tenga en cuenta que la API de DbgHelp no se diseñó inicialmente para admitir varias instancias del mismo símbolo dentro de un módulo.</span><span class="sxs-lookup"><span data-stu-id="f03b3-115">Note that the DbgHelp API was not initially designed to support multiple instances of the same symbol within a module.</span></span> <span data-ttu-id="f03b3-116">Esto se debe a que los símbolos públicos están restringidos a nombres únicos dentro de un módulo.</span><span class="sxs-lookup"><span data-stu-id="f03b3-116">This is because public symbols are restricted to unique names within a module.</span></span> <span data-ttu-id="f03b3-117">Por lo tanto, [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname) devuelve solo el primer símbolo que coincide con.</span><span class="sxs-lookup"><span data-stu-id="f03b3-117">Therefore, [**SymGetSymFromName64**](/windows/desktop/api/Dbghelp/nf-dbghelp-symgetsymfromname) returns only the first symbol that matches.</span></span> <span data-ttu-id="f03b3-118">Para recuperar todos los símbolos que coinciden, llame a [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols).</span><span class="sxs-lookup"><span data-stu-id="f03b3-118">To retrieve all symbols that match, call [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols).</span></span>

## <a name="global-and-local-symbols"></a><span data-ttu-id="f03b3-119">Símbolos globales y locales</span><span class="sxs-lookup"><span data-stu-id="f03b3-119">Global and Local Symbols</span></span>

<span data-ttu-id="f03b3-120">Las versiones más recientes de DbgHelp.dll admiten símbolos globales y locales al utilizar archivos. pdb.</span><span class="sxs-lookup"><span data-stu-id="f03b3-120">Newer versions of DbgHelp.dll support global and local symbols when using .pdb files.</span></span> <span data-ttu-id="f03b3-121">Estas nuevas versiones incluyen funciones estáticas, con ámbito dentro de un archivo de código fuente, parámetros de función y variables locales.</span><span class="sxs-lookup"><span data-stu-id="f03b3-121">These new versions include static functions, functions scoped within a source file, function parameters, and local variables.</span></span> <span data-ttu-id="f03b3-122">Cuando DbgHelp busca un símbolo, comprueba las tablas de símbolos globales y locales antes de comprobar la tabla de símbolos públicos.</span><span class="sxs-lookup"><span data-stu-id="f03b3-122">When DbgHelp searches for a symbol, it checks the global and local symbol tables before checking the public symbol table.</span></span> <span data-ttu-id="f03b3-123">Esto se debe a que hay más información disponible para estos tipos de símbolos que está disponible para los símbolos públicos.</span><span class="sxs-lookup"><span data-stu-id="f03b3-123">This is because there is more information available for these types of symbols than is available for public symbols.</span></span>

<span data-ttu-id="f03b3-124">Los símbolos globales y locales se almacenan con nombres no representativos.</span><span class="sxs-lookup"><span data-stu-id="f03b3-124">Global and local symbols are stored with undecorated names.</span></span> <span data-ttu-id="f03b3-125">Por lo tanto, la \_ marca SYMOPT UNDNAME no tiene ningún efecto.</span><span class="sxs-lookup"><span data-stu-id="f03b3-125">Therefore, the SYMOPT\_UNDNAME flag has no effect.</span></span> <span data-ttu-id="f03b3-126">Para obtener nombres representativos de símbolos, debe usar la \_ marca SYMOPT Public \_ only.</span><span class="sxs-lookup"><span data-stu-id="f03b3-126">To get decorated symbol names, you must use the SYMOPT\_PUBLICS\_ONLY flag.</span></span> <span data-ttu-id="f03b3-127">Esto hace que DbgHelp busque solo los símbolos públicos.</span><span class="sxs-lookup"><span data-stu-id="f03b3-127">This causes DbgHelp to search only the public symbols.</span></span>

<span data-ttu-id="f03b3-128">Para ver los símbolos locales o los parámetros de función, llame a la función [**SymSetContext**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetcontext) con el miembro **InstructionOffset** de la estructura de [**\_ \_ marco de pila IMAGEHLP**](/windows/desktop/api/DbgHelp/ns-dbghelp-imagehlp_stack_frame) establecida en la dirección de cualquier símbolo de función.</span><span class="sxs-lookup"><span data-stu-id="f03b3-128">To view local symbols or function parameters, call the [**SymSetContext**](/windows/desktop/api/Dbghelp/nf-dbghelp-symsetcontext) function with the **InstructionOffset** member of the [**IMAGEHLP\_STACK\_FRAME**](/windows/desktop/api/DbgHelp/ns-dbghelp-imagehlp_stack_frame) structure set to the address of any function symbol.</span></span> <span data-ttu-id="f03b3-129">Las llamadas subsiguientes a [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) y [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) pueden funcionar en el contexto de esta dirección.</span><span class="sxs-lookup"><span data-stu-id="f03b3-129">Subsequent calls to [**SymFromName**](/windows/desktop/api/Dbghelp/nf-dbghelp-symfromname) and [**SymEnumSymbols**](/windows/desktop/api/Dbghelp/nf-dbghelp-symenumsymbols) can operate within the context of this address.</span></span> <span data-ttu-id="f03b3-130">Para ello, establezca el parámetro *BaseOfDll* en **null** y omita el especificador de módulo del parámetro *Name* o *Mask* .</span><span class="sxs-lookup"><span data-stu-id="f03b3-130">To do so, set the *BaseOfDll* parameter to **NULL** and omit the module specifier from the *Name* or *Mask* parameter.</span></span> <span data-ttu-id="f03b3-131">Esto obliga a DbgHelp a buscar símbolos coincidentes dentro del ámbito indicado por **SymSetContext**.</span><span class="sxs-lookup"><span data-stu-id="f03b3-131">This forces DbgHelp to search for matching symbols within the scope indicated by **SymSetContext**.</span></span>

<span data-ttu-id="f03b3-132">Para determinar si un símbolo es un parámetro, compruebe el miembro **Flags** de la estructura [**Symbol \_ info**](/windows/desktop/api/DbgHelp/ns-dbghelp-symbol_info) .</span><span class="sxs-lookup"><span data-stu-id="f03b3-132">To determine if a symbol is a parameter, check the **Flags** member of the [**SYMBOL\_INFO**](/windows/desktop/api/DbgHelp/ns-dbghelp-symbol_info) structure.</span></span> <span data-ttu-id="f03b3-133">Si el símbolo es un parámetro, el miembro contiene el \_ parámetro SYMFLAG.</span><span class="sxs-lookup"><span data-stu-id="f03b3-133">If the symbol is a parameter, the member contains SYMFLAG\_PARAMETER.</span></span> <span data-ttu-id="f03b3-134">Si es un símbolo local, el miembro contiene SYMFLAG \_ local.</span><span class="sxs-lookup"><span data-stu-id="f03b3-134">If it is a local symbol, the member contains SYMFLAG\_LOCAL.</span></span>

 

 



