---
title: Registrar interfaces
description: Registro de una interfaz de llamada a procedimiento remoto (RPC).
ms.assetid: c22e3fa8-98be-461a-b06d-292d3f655ffc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30ea9e851e8c9663c8f66d983d3400b1ee398a9d
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "104268251"
---
# <a name="registering-interfaces"></a><span data-ttu-id="bdefd-103">Registrar interfaces</span><span class="sxs-lookup"><span data-stu-id="bdefd-103">Registering Interfaces</span></span>

<span data-ttu-id="bdefd-104">En esta sección se ofrece una explicación detallada del proceso de registro de una interfaz RPC.</span><span class="sxs-lookup"><span data-stu-id="bdefd-104">This section presents a detailed discussion of the process of registering an RPC interface.</span></span>

<span data-ttu-id="bdefd-105">La información de esta sección se presenta en los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="bdefd-105">The information in this section is presented in the following topics:</span></span>

-   [<span data-ttu-id="bdefd-106">Funciones de registro de interfaz</span><span class="sxs-lookup"><span data-stu-id="bdefd-106">Interface Registration Functions</span></span>](#interface-registration-functions)
-   [<span data-ttu-id="bdefd-107">Vectores de punto de entrada</span><span class="sxs-lookup"><span data-stu-id="bdefd-107">Entry-Point Vectors</span></span>](#entry-point-vectors)
-   [<span data-ttu-id="bdefd-108">EPVs Manager</span><span class="sxs-lookup"><span data-stu-id="bdefd-108">Manager EPVs</span></span>](#manager-epvs)
-   [<span data-ttu-id="bdefd-109">Registrar una única implementación de una interfaz</span><span class="sxs-lookup"><span data-stu-id="bdefd-109">Registering a Single Implementation of an Interface</span></span>](#registering-a-single-implementation-of-an-interface)
-   [<span data-ttu-id="bdefd-110">Registro de varias implementaciones de una interfaz</span><span class="sxs-lookup"><span data-stu-id="bdefd-110">Registering Multiple Implementations of an Interface</span></span>](#registering-multiple-implementations-of-an-interface)
-   [<span data-ttu-id="bdefd-111">Reglas para invocar rutinas de administrador</span><span class="sxs-lookup"><span data-stu-id="bdefd-111">Rules for Invoking Manager Routines</span></span>](#rules-for-invoking-manager-routines)
-   [<span data-ttu-id="bdefd-112">Enviar una llamada a un procedimiento remoto a una rutina de Server-Manager</span><span class="sxs-lookup"><span data-stu-id="bdefd-112">Dispatching a Remote Procedure Call to a Server-Manager Routine</span></span>](#dispatching-a-remote-procedure-call-to-a-server-manager-routine)
-   [<span data-ttu-id="bdefd-113">Proporcionar su propia Object-Inquiry función</span><span class="sxs-lookup"><span data-stu-id="bdefd-113">Supplying Your Own Object-Inquiry Function</span></span>](#supplying-your-own-object-inquiry-function)

## <a name="interface-registration-functions"></a><span data-ttu-id="bdefd-114">Funciones de registro de interfaz</span><span class="sxs-lookup"><span data-stu-id="bdefd-114">Interface Registration Functions</span></span>

<span data-ttu-id="bdefd-115">Los servidores registran sus interfaces mediante una llamada a la función [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) .</span><span class="sxs-lookup"><span data-stu-id="bdefd-115">Servers register their interfaces by calling the [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) function.</span></span> <span data-ttu-id="bdefd-116">Los programas de servidor complejos suelen admitir más de una interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-116">Complex server programs often support more than one interface.</span></span> <span data-ttu-id="bdefd-117">Las aplicaciones de servidor deben llamar a esta función una vez para cada interfaz que admitan.</span><span class="sxs-lookup"><span data-stu-id="bdefd-117">Server applications must call this function once for each interface they support.</span></span>

<span data-ttu-id="bdefd-118">Además, los servidores pueden admitir varias versiones de la misma interfaz, cada una con su propia implementación de las funciones de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-118">Also, servers can support multiple versions of the same interface, each with its own implementation of the interface's functions.</span></span> <span data-ttu-id="bdefd-119">Si el programa de servidor lo hace, debe proporcionar un conjunto de puntos de entrada.</span><span class="sxs-lookup"><span data-stu-id="bdefd-119">If your server program does this, it must provide a set of entry points.</span></span> <span data-ttu-id="bdefd-120">Un punto de entrada es una rutina de administrador que envía llamadas para una versión de una interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-120">An entry point is a manager routine that dispatches calls for a version of an interface.</span></span> <span data-ttu-id="bdefd-121">Debe haber un punto de entrada para cada versión de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-121">There must be one entry point for each version of the interface.</span></span> <span data-ttu-id="bdefd-122">El grupo de puntos de entrada se denomina vector de punto de entrada.</span><span class="sxs-lookup"><span data-stu-id="bdefd-122">The group of entry points is called an entry point vector.</span></span> <span data-ttu-id="bdefd-123">Para obtener más información, consulte [vectores de punto de entrada](#entry-point-vectors).</span><span class="sxs-lookup"><span data-stu-id="bdefd-123">For details, see [Entry-Point Vectors](#entry-point-vectors).</span></span>

<span data-ttu-id="bdefd-124">Además de la función estándar [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), RPC también admite otras funciones de registro de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-124">In addition to the standard function [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), RPC also supports other interface registration functions.</span></span> <span data-ttu-id="bdefd-125">La función [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) amplía las capacidades de **RpcServerRegisterIf** al permitirle especificar un conjunto de marcas de registro (consulte [marcas de registro](interface-registration-flags.md)de la interfaz), el número máximo de solicitudes simultáneas de llamada a procedimiento remoto que el servidor puede aceptar y el tamaño máximo en bytes de los bloques de datos entrantes.</span><span class="sxs-lookup"><span data-stu-id="bdefd-125">The [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) function extends the capabilities of **RpcServerRegisterIf** by enabling you to specify a set of registration flags (see [Interface Registration Flags](interface-registration-flags.md)), the maximum number of concurrent remote procedure call requests the server can accept, and the maximum size in bytes of incoming data blocks.</span></span>

<span data-ttu-id="bdefd-126">La biblioteca RPC también contiene una función denominada [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex).</span><span class="sxs-lookup"><span data-stu-id="bdefd-126">The RPC library also contains a function called [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex).</span></span> <span data-ttu-id="bdefd-127">Al igual que la función [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) , esta función registra una interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-127">Like the [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif) function, this function registers an interface.</span></span> <span data-ttu-id="bdefd-128">El programa del servidor también puede usar esta función para especificar un conjunto de marcas de registro (vea [marcas de registro](interface-registration-flags.md)de la interfaz), el número máximo de solicitudes simultáneas de llamada a procedimiento remoto que el servidor puede aceptar y una función de devolución de llamada de seguridad.</span><span class="sxs-lookup"><span data-stu-id="bdefd-128">Your server program can also use this function to specify a set of registration flags (see [Interface Registration Flags](interface-registration-flags.md)), the maximum number of concurrent remote procedure call requests the server can accept, and a security callback function.</span></span>

<span data-ttu-id="bdefd-129">Las funciones [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)y [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) establecen valores en la tabla interna del registro de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-129">The [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), and [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) functions set values in the internal interface registry table.</span></span> <span data-ttu-id="bdefd-130">Esta tabla se usa para asignar el UUID de interfaz y el UUID de objeto a un administrador EPV.</span><span class="sxs-lookup"><span data-stu-id="bdefd-130">This table is used to map the interface UUID and object UUIDs to a manager EPV.</span></span> <span data-ttu-id="bdefd-131">EPV Manager es una matriz de punteros de función que contiene exactamente un puntero de función para cada prototipo de función en la interfaz especificada en el archivo IDL.</span><span class="sxs-lookup"><span data-stu-id="bdefd-131">The manager EPV is an array of function pointers that contains exactly one function pointer for each function prototype in the interface specified in the IDL file.</span></span>

<span data-ttu-id="bdefd-132">Para obtener información sobre cómo proporcionar varios EPVs para proporcionar varias implementaciones de la interfaz, vea [varias implementaciones de interfaz](#registering-multiple-implementations-of-an-interface).</span><span class="sxs-lookup"><span data-stu-id="bdefd-132">For information on supplying multiple EPVs to provide multiple implementations of the interface, see [Multiple Interface Implementations](#registering-multiple-implementations-of-an-interface).</span></span>

<span data-ttu-id="bdefd-133">La biblioteca en tiempo de ejecución utiliza la tabla del registro de la interfaz (establecida mediante llamadas a la función [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2)) y la tabla del registro de objetos (establecida mediante llamadas a la función [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype)) para asignar el UUID de interfaz y objeto al puntero de función.</span><span class="sxs-lookup"><span data-stu-id="bdefd-133">The run-time library uses the interface registry table (set by calls to the function [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2)) and the object registry table (set by calls to the function [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype)) to map interface and object UUIDs to the function pointer.</span></span>

<span data-ttu-id="bdefd-134">Si desea que el programa de servidor Quite una interfaz del registro de la biblioteca en tiempo de ejecución de RPC, llame a la función [**RpcServerUnregisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterif) .</span><span class="sxs-lookup"><span data-stu-id="bdefd-134">When you want your server program to remove an interface from the RPC run-time library registry, call the [**RpcServerUnregisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterif) function.</span></span> <span data-ttu-id="bdefd-135">Después de quitar la interfaz del registro, la biblioteca en tiempo de ejecución de RPC ya no aceptará nuevas llamadas para esa interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-135">After the interface is removed from the registry, the RPC run-time library will no longer accept new calls for that interface.</span></span>

## <a name="entry-point-vectors"></a><span data-ttu-id="bdefd-136">Vectores de punto de entrada</span><span class="sxs-lookup"><span data-stu-id="bdefd-136">Entry-point Vectors</span></span>

<span data-ttu-id="bdefd-137">El vector de punto de entrada (EPV) del administrador es una matriz de punteros de función que apunta a las implementaciones de las funciones especificadas en el archivo IDL.</span><span class="sxs-lookup"><span data-stu-id="bdefd-137">The manager entry-point vector (EPV) is an array of function pointers that point to implementations of the functions specified in the IDL file.</span></span> <span data-ttu-id="bdefd-138">El número de elementos de la matriz se corresponde con el número de funciones especificadas en el archivo IDL.</span><span class="sxs-lookup"><span data-stu-id="bdefd-138">The number of elements in the array corresponds to the number of functions specified in the IDL file.</span></span> <span data-ttu-id="bdefd-139">RPC admite varios vectores de punto de entrada que representan varias implementaciones de las funciones especificadas en la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-139">RPC supports multiple entry-point vectors representing multiple implementations of the functions specified in the interface.</span></span>

<span data-ttu-id="bdefd-140">El compilador MIDL genera automáticamente un tipo de datos Manager EPV para su uso en la creación de EPVs Manager.</span><span class="sxs-lookup"><span data-stu-id="bdefd-140">The MIDL compiler automatically generates a manager EPV data type for use in constructing manager EPVs.</span></span> <span data-ttu-id="bdefd-141">El tipo de datos se denomina \* if-name \***\_ Server \_ EPV**, donde *-Name* especifica el identificador de interfaz en el archivo IDL.</span><span class="sxs-lookup"><span data-stu-id="bdefd-141">The data type is named \*if-name\***\_SERVER\_EPV**, where *if-name* specifies the interface identifier in the IDL file.</span></span>

<span data-ttu-id="bdefd-142">El compilador MIDL crea e inicializa automáticamente un administrador predeterminado EPV en el supuesto de que existe una rutina de administrador con el mismo nombre para cada procedimiento de la interfaz y se especifica en el archivo IDL.</span><span class="sxs-lookup"><span data-stu-id="bdefd-142">The MIDL compiler automatically creates and initializes a default manager EPV on the assumption that a manager routine of the same name exists for each procedure in the interface and is specified in the IDL file.</span></span>

<span data-ttu-id="bdefd-143">Cuando un servidor ofrece varias implementaciones de la misma interfaz, el servidor debe crear un EPV de administrador adicional para cada implementación.</span><span class="sxs-lookup"><span data-stu-id="bdefd-143">When a server offers multiple implementations of the same interface, the server must create one additional manager EPV for each implementation.</span></span> <span data-ttu-id="bdefd-144">Cada EPV debe contener exactamente un punto de entrada (dirección de una función) para cada procedimiento definido en el archivo IDL.</span><span class="sxs-lookup"><span data-stu-id="bdefd-144">Each EPV must contain exactly one entry point (address of a function) for each procedure defined in the IDL file.</span></span> <span data-ttu-id="bdefd-145">La aplicación de servidor declara e inicializa una variable EPV de administrador de tipo *If-name \* \* \* \_ Server \_ EPV*\* para cada implementación adicional de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-145">The server application declares and initializes one manager EPV variable of type *if-name\*\*\*\_SERVER\_EPV*\* for each additional implementation of the interface.</span></span> <span data-ttu-id="bdefd-146">Para registrar EPVs, llama a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) una vez por cada tipo de objeto que admite.</span><span class="sxs-lookup"><span data-stu-id="bdefd-146">To register the EPVs it calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) once for each object type it supports.</span></span>

<span data-ttu-id="bdefd-147">Cuando el cliente realiza una llamada a procedimiento remoto al servidor, el EPV que contiene el puntero de función se selecciona basándose en el UUID de la interfaz y el tipo de objeto.</span><span class="sxs-lookup"><span data-stu-id="bdefd-147">When the client makes a remote procedure call to the server, the EPV containing the function pointer is selected based on the interface UUID and the object type.</span></span> <span data-ttu-id="bdefd-148">El tipo de objeto se deriva del UUID del objeto mediante la función de consulta de objeto o la asignación controlada por tabla controlada por [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span><span class="sxs-lookup"><span data-stu-id="bdefd-148">The object type is derived from the object UUID by the object-inquiry function or the table-driven mapping controlled by [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span></span>

## <a name="manager-epvs"></a><span data-ttu-id="bdefd-149">EPVs Manager</span><span class="sxs-lookup"><span data-stu-id="bdefd-149">Manager EPVs</span></span>

<span data-ttu-id="bdefd-150">De forma predeterminada, el compilador MIDL usa los nombres de procedimiento del archivo IDL de una interfaz para generar un administrador EPV, que el compilador coloca directamente en el código auxiliar del servidor.</span><span class="sxs-lookup"><span data-stu-id="bdefd-150">By default, the MIDL compiler uses the procedure names from an interface's IDL file to generate a manager EPV, which the compiler places directly into the server stub.</span></span> <span data-ttu-id="bdefd-151">Este EPV predeterminado se inicializa estáticamente mediante los nombres de procedimiento declarados en la definición de interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-151">This default EPV is statically initialized using the procedure names declared in the interface definition.</span></span>

<span data-ttu-id="bdefd-152">Para registrar un administrador mediante el EPV predeterminado, especifique **null** como el valor del parámetro *MgrEpv* en una llamada a la función [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) .</span><span class="sxs-lookup"><span data-stu-id="bdefd-152">To register a manager using the default EPV, specify **NULL** as the value of the *MgrEpv* parameter in a call to either the [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) function.</span></span> <span data-ttu-id="bdefd-153">Si los nombres de rutina utilizados por un administrador se corresponden con los de la definición de interfaz, puede registrar este administrador mediante el EPV predeterminado de la interfaz generada por el compilador de MIDL.</span><span class="sxs-lookup"><span data-stu-id="bdefd-153">If the routine names used by a manager correspond to those of the interface definition, you can register this manager using the default EPV of the interface generated by the MIDL compiler.</span></span> <span data-ttu-id="bdefd-154">También puede registrar un administrador mediante un EPV que proporciona la aplicación de servidor.</span><span class="sxs-lookup"><span data-stu-id="bdefd-154">You can also register a manager using an EPV that the server application supplies.</span></span>

<span data-ttu-id="bdefd-155">Un servidor puede (y a veces debe) crear y registrar un EPV de administrador que no sea **nulo** para una interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-155">A server can (and sometimes must) create and register a non-**null** manager EPV for an interface.</span></span> <span data-ttu-id="bdefd-156">Para seleccionar un EPV proporcionado por una aplicación de servidor, pase la dirección de un EPV cuyo valor se ha declarado por el servidor como el valor del parámetro *MgrEpv* a.</span><span class="sxs-lookup"><span data-stu-id="bdefd-156">To select a server application–supplied EPV, pass the address of an EPV whose value has been declared by the server as the value of the *MgrEpv* a parameter.</span></span> <span data-ttu-id="bdefd-157">Un valor no **null** para *MgrEpv* un parámetro siempre invalida un EPV predeterminado en el código auxiliar del servidor.</span><span class="sxs-lookup"><span data-stu-id="bdefd-157">A non-**null** value for the *MgrEpv* a parameter always overrides a default EPV in the server stub.</span></span>

<span data-ttu-id="bdefd-158">El compilador MIDL genera automáticamente un tipo de datos Manager EPV ( \_ \_ EPV de administración de RPC) para que una aplicación de servidor lo use en la creación de EPVs Manager.</span><span class="sxs-lookup"><span data-stu-id="bdefd-158">The MIDL compiler automatically generates a manager EPV data type (RPC\_MGR\_EPV) for a server application to use in constructing manager EPVs.</span></span> <span data-ttu-id="bdefd-159">Un administrador EPV debe contener exactamente un punto de entrada (dirección de función) para cada procedimiento definido en el archivo IDL.</span><span class="sxs-lookup"><span data-stu-id="bdefd-159">A manager EPV must contain exactly one entry point (function address) for each procedure defined in the IDL file.</span></span>

<span data-ttu-id="bdefd-160">Un servidor debe proporcionar un EPV que no sea **null** en los casos siguientes:</span><span class="sxs-lookup"><span data-stu-id="bdefd-160">A server must supply a non-**null** EPV in the following cases:</span></span>

-   <span data-ttu-id="bdefd-161">Cuando los nombres de las rutinas de administrador difieren de los nombres de procedimiento declarados en la definición de interfaz</span><span class="sxs-lookup"><span data-stu-id="bdefd-161">When the names of manager routines differ from the procedure names declared in the interface definition</span></span>
-   <span data-ttu-id="bdefd-162">Cuando el servidor usa el valor predeterminado de EPV para registrar otra implementación de la interfaz</span><span class="sxs-lookup"><span data-stu-id="bdefd-162">When the server uses the default EPV for registering another implementation of the interface</span></span>

<span data-ttu-id="bdefd-163">Un servidor declara un administrador EPV inicializando una variable de tipo *If-name \* \* \* \_ Server \_ EPV*\* para cada implementación de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-163">A server declares a manager EPV by initializing a variable of type *if-name\*\*\*\_SERVER\_EPV*\* for each implementation of the interface.</span></span>

## <a name="registering-a-single-implementation-of-an-interface"></a><span data-ttu-id="bdefd-164">Registrar una única implementación de una interfaz</span><span class="sxs-lookup"><span data-stu-id="bdefd-164">Registering a Single Implementation of an Interface</span></span>

<span data-ttu-id="bdefd-165">Cuando un servidor solo ofrece una implementación de una interfaz, el servidor llama a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) solo una vez.</span><span class="sxs-lookup"><span data-stu-id="bdefd-165">When a server offers only one implementation of an interface, the server calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) only once.</span></span> <span data-ttu-id="bdefd-166">En el caso estándar, el servidor utiliza el administrador predeterminado EPV.</span><span class="sxs-lookup"><span data-stu-id="bdefd-166">In the standard case, the server uses the default manager EPV.</span></span> <span data-ttu-id="bdefd-167">(La excepción es cuando el administrador usa nombres de rutina que difieren de los declarados en la interfaz).</span><span class="sxs-lookup"><span data-stu-id="bdefd-167">(The exception is when the manager uses routine names that differ from those declared in the interface.)</span></span>

<span data-ttu-id="bdefd-168">Para el caso estándar, proporcione los siguientes valores para las llamadas a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2):</span><span class="sxs-lookup"><span data-stu-id="bdefd-168">For the standard case, you supply the following values for calls to [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2):</span></span>

-   <span data-ttu-id="bdefd-169">EPVs Manager</span><span class="sxs-lookup"><span data-stu-id="bdefd-169">Manager EPVs</span></span>

    <span data-ttu-id="bdefd-170">Para usar el valor predeterminado de EPV, especifique un valor **null** para el parámetro *MgrEpv* .</span><span class="sxs-lookup"><span data-stu-id="bdefd-170">To use the default EPV, specify a **null** value for the *MgrEpv* a parameter.</span></span>

-   <span data-ttu-id="bdefd-171">UUID de tipo de administrador</span><span class="sxs-lookup"><span data-stu-id="bdefd-171">Manager type UUID</span></span>

    <span data-ttu-id="bdefd-172">Al usar el valor predeterminado de EPV, registre la interfaz con un UUID de tipo de administrador Nil proporcionando un valor **null** o un UUID nulo para el parámetro *MgrTypeUuid* a.</span><span class="sxs-lookup"><span data-stu-id="bdefd-172">When using the default EPV, register the interface with a nil manager type UUID by supplying either a **null** value or a nil UUID for the *MgrTypeUuid* a parameter.</span></span> <span data-ttu-id="bdefd-173">En este caso, todas las llamadas a procedimientos remotos, independientemente del UUID del objeto en su identificador de enlace, se envían al valor predeterminado de EPV, suponiendo que no se ha realizado ninguna llamada a [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="bdefd-173">In this case, all remote procedure calls, regardless of the object UUID in their binding handle, are dispatched to the default EPV, assuming no [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) calls have been made.</span></span>

    <span data-ttu-id="bdefd-174">También puede proporcionar un UUID de tipo de administrador que no sea Nil.</span><span class="sxs-lookup"><span data-stu-id="bdefd-174">You can also provide a non-nil manager type UUID.</span></span> <span data-ttu-id="bdefd-175">En este caso, también debe llamar a la rutina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="bdefd-175">In this case, you must also call the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine.</span></span>

## <a name="registering-multiple-implementations-of-an-interface"></a><span data-ttu-id="bdefd-176">Registro de varias implementaciones de una interfaz</span><span class="sxs-lookup"><span data-stu-id="bdefd-176">Registering Multiple Implementations of an Interface</span></span>

<span data-ttu-id="bdefd-177">Puede proporcionar más de una implementación de los procedimientos remotos especificados en el archivo IDL.</span><span class="sxs-lookup"><span data-stu-id="bdefd-177">You can supply more than one implementation of the remote procedure(s) specified in the IDL file.</span></span> <span data-ttu-id="bdefd-178">La aplicación de servidor llama a [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para asignar el UUID del objeto al tipo UUID y llama a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) para asociar el administrador EPVs con un UUID de tipo.</span><span class="sxs-lookup"><span data-stu-id="bdefd-178">The server application calls [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) to map object UUIDs to type UUIDs and calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to associate manager EPVs with a type UUID.</span></span> <span data-ttu-id="bdefd-179">Cuando una llamada a procedimiento remoto llega con su UUID de objeto, la biblioteca en tiempo de ejecución del servidor RPC asigna el UUID del objeto a un tipo UUID.</span><span class="sxs-lookup"><span data-stu-id="bdefd-179">When a remote procedure call arrives with its object UUID, the RPC server run-time library maps the object UUID to a type UUID.</span></span> <span data-ttu-id="bdefd-180">A continuación, la aplicación de servidor usa el tipo UUID y el UUID de la interfaz para seleccionar el administrador EPV.</span><span class="sxs-lookup"><span data-stu-id="bdefd-180">The server application then uses the type UUID and the interface UUID to select the manager EPV.</span></span>

<span data-ttu-id="bdefd-181">También puede especificar su propia función para resolver la asignación desde el UUID del objeto al tipo de administrador UUID.</span><span class="sxs-lookup"><span data-stu-id="bdefd-181">You can also specify your own function to resolve the mapping from object UUID to manager type UUID.</span></span> <span data-ttu-id="bdefd-182">La función de asignación se especifica cuando se llama a [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span><span class="sxs-lookup"><span data-stu-id="bdefd-182">You specify the mapping function when you call [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span></span>

<span data-ttu-id="bdefd-183">Para ofrecer varias implementaciones de una interfaz, un servidor debe registrar cada implementación llamando a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) por separado.</span><span class="sxs-lookup"><span data-stu-id="bdefd-183">To offer multiple implementations of an interface, a server must register each implementation by calling [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) separately.</span></span> <span data-ttu-id="bdefd-184">Para cada implementación que un servidor registra, proporciona el mismo *IfSpec* un parámetro, pero un par diferente de *MgrTypeUuid* y *MgrEpv* a los parámetros.</span><span class="sxs-lookup"><span data-stu-id="bdefd-184">For each implementation a server registers, it supplies the same *IfSpec* a parameter, but a different pair of *MgrTypeUuid* and *MgrEpv* a parameters.</span></span>

<span data-ttu-id="bdefd-185">En el caso de varios administradores, use [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="bdefd-185">In the case of multiple managers, use [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) as follows:</span></span>

-   <span data-ttu-id="bdefd-186">EPVs Manager</span><span class="sxs-lookup"><span data-stu-id="bdefd-186">Manager EPVs</span></span>

    <span data-ttu-id="bdefd-187">Para ofrecer varias implementaciones de una interfaz, un servidor debe:</span><span class="sxs-lookup"><span data-stu-id="bdefd-187">To offer multiple implementations of an interface, a server must:</span></span>

    -   <span data-ttu-id="bdefd-188">Cree un EPV de administrador que no sea **nulo** para cada implementación adicional.</span><span class="sxs-lookup"><span data-stu-id="bdefd-188">Create a non-**null** manager EPV for each additional implementation.</span></span>
    -   <span data-ttu-id="bdefd-189">Especifique un valor distinto de **null** para el *parámetro MgrEpv* en [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span><span class="sxs-lookup"><span data-stu-id="bdefd-189">Specify a non-**null** value for the *MgrEpv* a parameter in [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span></span>

    <span data-ttu-id="bdefd-190">Tenga en cuenta que el servidor también se puede registrar con el administrador predeterminado EPV.</span><span class="sxs-lookup"><span data-stu-id="bdefd-190">Please note that the server can also register with the default manager EPV.</span></span>

-   <span data-ttu-id="bdefd-191">UUID de tipo de administrador</span><span class="sxs-lookup"><span data-stu-id="bdefd-191">Manager type UUID</span></span>

    <span data-ttu-id="bdefd-192">Proporcione un UUID de tipo de administrador para cada EPV de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-192">Provide a manager type UUID for each EPV of the interface.</span></span> <span data-ttu-id="bdefd-193">El UUID de tipo Nil (o valor **null** ) para *MgrTypeUuid* se puede especificar un parámetro para una de las EPVs de administración.</span><span class="sxs-lookup"><span data-stu-id="bdefd-193">The nil type UUID (or **null** value) for the *MgrTypeUuid* a parameter can be specified for one of the manager EPVs.</span></span> <span data-ttu-id="bdefd-194">Cada UUID de tipo debe ser diferente.</span><span class="sxs-lookup"><span data-stu-id="bdefd-194">Each type UUID must be different.</span></span>

## <a name="rules-for-invoking-manager-routines"></a><span data-ttu-id="bdefd-195">Reglas para invocar rutinas de administrador</span><span class="sxs-lookup"><span data-stu-id="bdefd-195">Rules for Invoking Manager Routines</span></span>

<span data-ttu-id="bdefd-196">La biblioteca en tiempo de ejecución de RPC envía una llamada de procedimiento remoto entrante a un administrador que ofrece la interfaz RPC solicitada.</span><span class="sxs-lookup"><span data-stu-id="bdefd-196">The RPC run-time library dispatches an incoming remote procedure call to a manager that offers the requested RPC interface.</span></span> <span data-ttu-id="bdefd-197">Cuando se registran varios administradores para una interfaz, la biblioteca en tiempo de ejecución de RPC debe seleccionar uno de ellos.</span><span class="sxs-lookup"><span data-stu-id="bdefd-197">When multiple managers are registered for an interface, the RPC run-time library must select one of them.</span></span> <span data-ttu-id="bdefd-198">Para seleccionar un administrador, la biblioteca en tiempo de ejecución de RPC utiliza el UUID del objeto especificado por el identificador de enlace de la llamada.</span><span class="sxs-lookup"><span data-stu-id="bdefd-198">To select a manager, the RPC run-time library uses the object UUID specified by the call's binding handle.</span></span>

<span data-ttu-id="bdefd-199">La biblioteca en tiempo de ejecución aplica las siguientes reglas al interpretar el UUID del objeto de una llamada a procedimiento remoto:</span><span class="sxs-lookup"><span data-stu-id="bdefd-199">The run-time library applies the following rules when interpreting the object UUID of a remote procedure call:</span></span>

-   <span data-ttu-id="bdefd-200">UUID de objeto Nil</span><span class="sxs-lookup"><span data-stu-id="bdefd-200">Nil object UUIDs</span></span>

    <span data-ttu-id="bdefd-201">A un UUID de objeto Nil se le asigna automáticamente el UUID de tipo Nil (no es válido especificar un UUID de objeto Nil en la rutina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) ).</span><span class="sxs-lookup"><span data-stu-id="bdefd-201">A nil object UUID is automatically assigned the nil type UUID (it is illegal to specify a nil object UUID in the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine).</span></span> <span data-ttu-id="bdefd-202">Por lo tanto, una llamada a procedimiento remoto cuyo identificador de enlace contiene un UUID de objeto Nil se envía automáticamente al administrador registrado con el UUID de tipo Nil, si existe.</span><span class="sxs-lookup"><span data-stu-id="bdefd-202">Therefore, a remote procedure call whose binding handle contains a nil object UUID is automatically dispatched to the manager registered with the nil type UUID, if any.</span></span>

-   <span data-ttu-id="bdefd-203">UUID de objeto no Nil</span><span class="sxs-lookup"><span data-stu-id="bdefd-203">Non-nil object UUIDs</span></span>

    <span data-ttu-id="bdefd-204">En principio, una llamada a procedimiento remoto cuyo identificador de enlace contiene un UUID de objeto distinto de Nil debe ser procesada por un administrador cuyo tipo UUID coincida con el tipo del UUID del objeto.</span><span class="sxs-lookup"><span data-stu-id="bdefd-204">In principle, a remote procedure call whose binding handle contains a non-nil object UUID should be processed by a manager whose type UUID matches the type of the object UUID.</span></span> <span data-ttu-id="bdefd-205">Sin embargo, la identificación del administrador correcto requiere que el servidor haya especificado el tipo de UUID del objeto llamando a la rutina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="bdefd-205">However, identifying the correct manager requires that the server has specified the type of that object UUID by calling the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine.</span></span>

    <span data-ttu-id="bdefd-206">Si un servidor no llama a la rutina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para un UUID de objeto que no sea Nil, una llamada a procedimiento remoto para ese UUID de objeto va al administrador EPV que da servicio a las llamadas a procedimientos remotos con un UUID de objeto nulo (es decir, el UUID de tipo Nil).</span><span class="sxs-lookup"><span data-stu-id="bdefd-206">If a server fails to call the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine for a non-nil object UUID, a remote procedure call for that object UUID goes to the manager EPV that services remote procedure calls with a nil object UUID (that is, the nil type UUID).</span></span>

    <span data-ttu-id="bdefd-207">No se pueden ejecutar llamadas a procedimientos remotos con un UUID de objeto que no sea Nil en el identificador de enlace si el servidor asignado a ese UUID de objeto no Nil es un UUID de tipo llamando a la rutina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) , pero no registró también un EPV de administrador para ese UUID de tipo llamando a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span><span class="sxs-lookup"><span data-stu-id="bdefd-207">Remote procedure calls with a non-nil object UUID in the binding handle cannot be executed if the server assigned that non-nil object UUID a type UUID by calling the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine, but did not also register a manager EPV for that type UUID by calling [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2).</span></span>

<span data-ttu-id="bdefd-208">En la tabla siguiente se resumen las acciones que utiliza la biblioteca en tiempo de ejecución para seleccionar la rutina Manager.</span><span class="sxs-lookup"><span data-stu-id="bdefd-208">The following table summarizes the actions that the run-time library uses to select the manager routine.</span></span>



| <span data-ttu-id="bdefd-209">UUID del objeto de la llamada</span><span class="sxs-lookup"><span data-stu-id="bdefd-209">Object UUID of call</span></span> | <span data-ttu-id="bdefd-210">Tipo de conjunto de servidores para el UUID del objeto</span><span class="sxs-lookup"><span data-stu-id="bdefd-210">Server set type for object UUID?</span></span> | <span data-ttu-id="bdefd-211">¿EPV el tipo de servidor registrado?</span><span class="sxs-lookup"><span data-stu-id="bdefd-211">Server registered EPV type?</span></span> | <span data-ttu-id="bdefd-212">Enviando acción</span><span class="sxs-lookup"><span data-stu-id="bdefd-212">Dispatching action</span></span>                                                                                                                                 |
|---------------------|----------------------------------|-----------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="bdefd-213">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-213">Nil</span></span>                 | <span data-ttu-id="bdefd-214">No aplicable</span><span class="sxs-lookup"><span data-stu-id="bdefd-214">Not applicable</span></span>                   | <span data-ttu-id="bdefd-215">Sí</span><span class="sxs-lookup"><span data-stu-id="bdefd-215">Yes</span></span>                         | <span data-ttu-id="bdefd-216">Utiliza el administrador con el UUID de tipo Nil.</span><span class="sxs-lookup"><span data-stu-id="bdefd-216">Uses the manager with the nil type UUID.</span></span>                                                                                                           |
| <span data-ttu-id="bdefd-217">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-217">Nil</span></span>                 | <span data-ttu-id="bdefd-218">No es aplicable</span><span class="sxs-lookup"><span data-stu-id="bdefd-218">Not applicable</span></span>                   | <span data-ttu-id="bdefd-219">No</span><span class="sxs-lookup"><span data-stu-id="bdefd-219">No</span></span>                          | <span data-ttu-id="bdefd-220">Error ( \_ no se \_ admite el tipo de RPC S \_ ); rechaza la llamada a procedimiento remoto.</span><span class="sxs-lookup"><span data-stu-id="bdefd-220">Error (RPC\_S\_UNSUPPORTED\_TYPE); rejects the remote procedure call.</span></span>                                                                              |
| <span data-ttu-id="bdefd-221">No Nil</span><span class="sxs-lookup"><span data-stu-id="bdefd-221">Non-nil</span></span>             | <span data-ttu-id="bdefd-222">Sí</span><span class="sxs-lookup"><span data-stu-id="bdefd-222">Yes</span></span>                              | <span data-ttu-id="bdefd-223">Sí</span><span class="sxs-lookup"><span data-stu-id="bdefd-223">Yes</span></span>                         | <span data-ttu-id="bdefd-224">Utiliza el administrador con el mismo tipo UUID.</span><span class="sxs-lookup"><span data-stu-id="bdefd-224">Uses the manager with the same type UUID.</span></span>                                                                                                          |
| <span data-ttu-id="bdefd-225">No Nil</span><span class="sxs-lookup"><span data-stu-id="bdefd-225">Non-nil</span></span>             | <span data-ttu-id="bdefd-226">No</span><span class="sxs-lookup"><span data-stu-id="bdefd-226">No</span></span>                               | <span data-ttu-id="bdefd-227">Omitido</span><span class="sxs-lookup"><span data-stu-id="bdefd-227">Ignored</span></span>                     | <span data-ttu-id="bdefd-228">Utiliza el administrador con el UUID de tipo Nil.</span><span class="sxs-lookup"><span data-stu-id="bdefd-228">Uses the manager with the nil type UUID.</span></span> <span data-ttu-id="bdefd-229">Si no hay ningún administrador con el tipo Nil UUID, error (RPC \_ S \_ UNSUPPORTEDTYPE); rechaza la llamada a procedimiento remoto.</span><span class="sxs-lookup"><span data-stu-id="bdefd-229">If no manager with the nil type UUID, error (RPC\_S\_UNSUPPORTEDTYPE); rejects the remote procedure call.</span></span> |
| <span data-ttu-id="bdefd-230">No Nil</span><span class="sxs-lookup"><span data-stu-id="bdefd-230">Non-nil</span></span>             | <span data-ttu-id="bdefd-231">Sí</span><span class="sxs-lookup"><span data-stu-id="bdefd-231">Yes</span></span>                              | <span data-ttu-id="bdefd-232">No</span><span class="sxs-lookup"><span data-stu-id="bdefd-232">No</span></span>                          | <span data-ttu-id="bdefd-233">Error (RPC \_ S \_ UNSUPPORTEDTYPE); rechaza la llamada a procedimiento remoto.</span><span class="sxs-lookup"><span data-stu-id="bdefd-233">Error (RPC\_S\_UNSUPPORTEDTYPE); rejects the remote procedure call.</span></span>                                                                                |



 

<span data-ttu-id="bdefd-234">El UUID del objeto de la llamada es el UUID del objeto encontrado en un identificador de enlace para una llamada a procedimiento remoto.</span><span class="sxs-lookup"><span data-stu-id="bdefd-234">The object UUID of the call is the object UUID found in a binding handle for a remote procedure call.</span></span>

<span data-ttu-id="bdefd-235">El servidor establece el tipo del UUID del objeto mediante una llamada a [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para especificar el UUID del tipo de un objeto.</span><span class="sxs-lookup"><span data-stu-id="bdefd-235">The server sets the type of the object UUID by calling [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) to specify the type UUID for an object.</span></span>

<span data-ttu-id="bdefd-236">El servidor registra el tipo para el administrador EPV llamando a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) con el mismo UUID de tipo.</span><span class="sxs-lookup"><span data-stu-id="bdefd-236">The server registers the type for the manager EPV by calling [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex) or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) using the same type UUID.</span></span>

> [!Note]  
> <span data-ttu-id="bdefd-237">Al UUID del objeto Nil siempre se le asigna automáticamente el UUID de tipo Nil.</span><span class="sxs-lookup"><span data-stu-id="bdefd-237">The nil object UUID is always automatically assigned the nil type UUID.</span></span> <span data-ttu-id="bdefd-238">No es válido especificar un UUID de objeto Nil en la rutina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) .</span><span class="sxs-lookup"><span data-stu-id="bdefd-238">It is illegal to specify a nil object UUID in the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine.</span></span>

 

## <a name="dispatching-a-remote-procedure-call-to-a-server-manager-routine"></a><span data-ttu-id="bdefd-239">Enviar una llamada a procedimiento remoto a una rutina del administrador de servidores</span><span class="sxs-lookup"><span data-stu-id="bdefd-239">Dispatching a Remote Procedure Call to a Server-manager Routine</span></span>

<span data-ttu-id="bdefd-240">En las tablas siguientes se muestran los pasos que la biblioteca en tiempo de ejecución de RPC toma para enviar una llamada a procedimiento remoto a una rutina del administrador de servidores.</span><span class="sxs-lookup"><span data-stu-id="bdefd-240">The following tables show the steps that the RPC run-time library takes to dispatch a remote procedure call to a server-manager routine.</span></span>

<span data-ttu-id="bdefd-241">En las tablas siguientes se describe un caso simple en el que el servidor registra el administrador predeterminado EPV.</span><span class="sxs-lookup"><span data-stu-id="bdefd-241">A simple case where the server registers the default manager EPV, is described in the following tables.</span></span>

<span data-ttu-id="bdefd-242">**Tabla del registro de la interfaz**</span><span class="sxs-lookup"><span data-stu-id="bdefd-242">**Interface Registry Table**</span></span>



| <span data-ttu-id="bdefd-243">UUID de interfaz</span><span class="sxs-lookup"><span data-stu-id="bdefd-243">Interface UUID</span></span> | <span data-ttu-id="bdefd-244">UUID de tipo de administrador</span><span class="sxs-lookup"><span data-stu-id="bdefd-244">Manager type UUID</span></span> | <span data-ttu-id="bdefd-245">Vector de punto de entrada</span><span class="sxs-lookup"><span data-stu-id="bdefd-245">Entry-point vector</span></span> |
|----------------|-------------------|--------------------|
| <span data-ttu-id="bdefd-246">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="bdefd-246">*uuid1*</span></span>        | <span data-ttu-id="bdefd-247">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-247">Nil</span></span>               | <span data-ttu-id="bdefd-248">EPV predeterminado</span><span class="sxs-lookup"><span data-stu-id="bdefd-248">Default EPV</span></span>        |



 

<span data-ttu-id="bdefd-249">**Tabla del registro de objetos**</span><span class="sxs-lookup"><span data-stu-id="bdefd-249">**Object Registry Table**</span></span>



| <span data-ttu-id="bdefd-250">UUID del objeto</span><span class="sxs-lookup"><span data-stu-id="bdefd-250">Object UUID</span></span>             | <span data-ttu-id="bdefd-251">Tipo de objeto</span><span class="sxs-lookup"><span data-stu-id="bdefd-251">Object type</span></span> |
|-------------------------|-------------|
| <span data-ttu-id="bdefd-252">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-252">Nil</span></span>                     | <span data-ttu-id="bdefd-253">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-253">Nil</span></span>         |
| <span data-ttu-id="bdefd-254">(Cualquier otro UUID del objeto)</span><span class="sxs-lookup"><span data-stu-id="bdefd-254">(Any other object UUID)</span></span> | <span data-ttu-id="bdefd-255">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-255">Nil</span></span>         |



 

<span data-ttu-id="bdefd-256">**Asignar el identificador de enlace a un vector de punto de entrada (EPV)**</span><span class="sxs-lookup"><span data-stu-id="bdefd-256">**Mapping the Binding Handle to an Entry-point Vector (EPV)**</span></span>



| <span data-ttu-id="bdefd-257">UUID de interfaz (desde el identificador de enlace del cliente)</span><span class="sxs-lookup"><span data-stu-id="bdefd-257">Interface UUID (from client binding handle)</span></span> | <span data-ttu-id="bdefd-258">UUID del objeto (desde el identificador de enlace del cliente)</span><span class="sxs-lookup"><span data-stu-id="bdefd-258">Object UUID (from client binding handle)</span></span> | <span data-ttu-id="bdefd-259">Tipo de objeto (de la tabla del registro de objetos)</span><span class="sxs-lookup"><span data-stu-id="bdefd-259">Object type (from object registry table)</span></span> | <span data-ttu-id="bdefd-260">Manager EPV (de la tabla del registro de la interfaz)</span><span class="sxs-lookup"><span data-stu-id="bdefd-260">Manager EPV (from interface registry table)</span></span> |
|---------------------------------------------|------------------------------------------|------------------------------------------|---------------------------------------------|
| <span data-ttu-id="bdefd-261">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="bdefd-261">*uuid1*</span></span>                                     | <span data-ttu-id="bdefd-262">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-262">Nil</span></span>                                      | <span data-ttu-id="bdefd-263">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-263">Nil</span></span>                                      | <span data-ttu-id="bdefd-264">EPV predeterminado</span><span class="sxs-lookup"><span data-stu-id="bdefd-264">Default EPV</span></span>                                 |
| <span data-ttu-id="bdefd-265">Lo mismo que antes.</span><span class="sxs-lookup"><span data-stu-id="bdefd-265">Same as above</span></span>                               | <span data-ttu-id="bdefd-266">*uuidA*</span><span class="sxs-lookup"><span data-stu-id="bdefd-266">*uuidA*</span></span>                                  | <span data-ttu-id="bdefd-267">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-267">Nil</span></span>                                      | <span data-ttu-id="bdefd-268">EPV predeterminado</span><span class="sxs-lookup"><span data-stu-id="bdefd-268">Default EPV</span></span>                                 |



 

<span data-ttu-id="bdefd-269">En los pasos siguientes se describen las acciones que toma la biblioteca en tiempo de ejecución del servidor RPC, tal como se muestra en las tablas anteriores, cuando un cliente con la interfaz UUID *uuid1* la llama.</span><span class="sxs-lookup"><span data-stu-id="bdefd-269">The following steps describe the actions that the RPC server's run-time library take, as shown in the preceding tables, when a client with interface UUID *uuid1* calls it.</span></span>

1.  <span data-ttu-id="bdefd-270">El servidor llama a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) para asociar una interfaz que ofrece con el UUID del tipo de administrador Nil y con el administrador predeterminado generado por MIDL EPV.</span><span class="sxs-lookup"><span data-stu-id="bdefd-270">The server calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to associate an interface it offers with the nil manager type UUID and with the MIDL-generated default manager EPV.</span></span> <span data-ttu-id="bdefd-271">Esta llamada agrega una entrada en la tabla del registro de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-271">This call adds an entry in the interface registry table.</span></span> <span data-ttu-id="bdefd-272">El UUID de la interfaz se encuentra en el parámetro *IfSpec* a.</span><span class="sxs-lookup"><span data-stu-id="bdefd-272">The interface UUID is contained in the *IfSpec* a parameter.</span></span>
2.  <span data-ttu-id="bdefd-273">De forma predeterminada, la tabla del registro de objetos asocia todos los UUID de objeto con el tipo nulo UUID.</span><span class="sxs-lookup"><span data-stu-id="bdefd-273">By default, the object registry table associates all object UUIDs with the nil type UUID.</span></span> <span data-ttu-id="bdefd-274">En este ejemplo, el servidor no llama a [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span><span class="sxs-lookup"><span data-stu-id="bdefd-274">In this example, the server does not call [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype).</span></span>
3.  <span data-ttu-id="bdefd-275">La biblioteca en tiempo de ejecución del servidor recibe un código de procedimiento remoto que contiene el UUID de interfaz al que pertenece la llamada y el UUID del objeto del identificador de enlace de la llamada.</span><span class="sxs-lookup"><span data-stu-id="bdefd-275">The server run-time library receives a remote procedure code containing the interface UUID that the call belongs to and the object UUID from the call's binding handle.</span></span>

    <span data-ttu-id="bdefd-276">Vea las siguientes entradas de referencia de función para obtener información sobre cómo se establece un UUID de objeto en un controlador de enlace:</span><span class="sxs-lookup"><span data-stu-id="bdefd-276">See the following function reference entries for discussions of how an object UUID is set into a binding handle:</span></span>

    -   [<span data-ttu-id="bdefd-277">**RpcNsBindingImportBegin**</span><span class="sxs-lookup"><span data-stu-id="bdefd-277">**RpcNsBindingImportBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina)
    -   [<span data-ttu-id="bdefd-278">**RpcNsBindingLookupBegin**</span><span class="sxs-lookup"><span data-stu-id="bdefd-278">**RpcNsBindingLookupBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindinglookupbegina)
    -   [<span data-ttu-id="bdefd-279">**RpcBindingFromStringBinding**</span><span class="sxs-lookup"><span data-stu-id="bdefd-279">**RpcBindingFromStringBinding**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding)
    -   [<span data-ttu-id="bdefd-280">**RpcBindingSetObject**</span><span class="sxs-lookup"><span data-stu-id="bdefd-280">**RpcBindingSetObject**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetobject)

4.  <span data-ttu-id="bdefd-281">Mediante el UUID de la interfaz de la llamada a procedimiento remoto, la biblioteca en tiempo de ejecución del servidor ubica el UUID de la interfaz en la tabla del registro de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-281">Using the interface UUID from the remote procedure call, the server's run-time library locates that interface UUID in the interface registry table.</span></span>

    <span data-ttu-id="bdefd-282">Si el servidor no registró la interfaz con [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2), la llamada a procedimiento remoto vuelve al autor de la llamada con una RPC \_ \_ desconocida si el código de estado es \_ .</span><span class="sxs-lookup"><span data-stu-id="bdefd-282">If the server did not register the interface using [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2), then the remote procedure call returns to the caller with an RPC\_S\_UNKNOWN\_IF status code.</span></span>

5.  <span data-ttu-id="bdefd-283">Mediante el UUID del objeto del identificador de enlace, la biblioteca en tiempo de ejecución del servidor ubica ese UUID del objeto en la tabla del registro de objetos.</span><span class="sxs-lookup"><span data-stu-id="bdefd-283">Using the object UUID from the binding handle, the server's run-time library locates that object UUID in the object registry table.</span></span> <span data-ttu-id="bdefd-284">En este ejemplo, todos los objetos UUID se asignan al tipo de objeto Nil.</span><span class="sxs-lookup"><span data-stu-id="bdefd-284">In this example, all object UUIDs map to the nil object type.</span></span>
6.  <span data-ttu-id="bdefd-285">La biblioteca en tiempo de ejecución del servidor ubica el tipo de administrador Nil en la tabla del registro de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-285">The server's run-time library locates the nil manager type in the interface registry table.</span></span>
7.  <span data-ttu-id="bdefd-286">La combinación de la interfaz UUID y el tipo Nil en la tabla del registro de la interfaz se resuelve como el valor predeterminado de EPV, que contiene las rutinas del administrador de servidores que se ejecutarán para el UUID de interfaz encontrado en la llamada a procedimiento remoto.</span><span class="sxs-lookup"><span data-stu-id="bdefd-286">Combining the interface UUID and nil type in the interface registry table resolves to the default EPV, which contains the server-manager routines to be executed for the interface UUID found in the remote procedure call.</span></span>

<span data-ttu-id="bdefd-287">Suponga que el servidor ofrece varias interfaces y varias implementaciones de cada interfaz, tal y como se describe en las tablas siguientes.</span><span class="sxs-lookup"><span data-stu-id="bdefd-287">Assume that the server offers multiple interfaces and multiple implementations of each interface, as described in the following tables.</span></span>

<span data-ttu-id="bdefd-288">**Tabla del registro de la interfaz**</span><span class="sxs-lookup"><span data-stu-id="bdefd-288">**Interface Registry Table**</span></span>



| <span data-ttu-id="bdefd-289">UUID de interfaz</span><span class="sxs-lookup"><span data-stu-id="bdefd-289">Interface UUID</span></span> | <span data-ttu-id="bdefd-290">IDENTIFICADOR de tipo de administrador</span><span class="sxs-lookup"><span data-stu-id="bdefd-290">Manager-type UUID</span></span> | <span data-ttu-id="bdefd-291">Vector de punto de entrada</span><span class="sxs-lookup"><span data-stu-id="bdefd-291">Entry-point vector</span></span> |
|----------------|-------------------|--------------------|
| <span data-ttu-id="bdefd-292">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="bdefd-292">*uuid1*</span></span>        | <span data-ttu-id="bdefd-293">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-293">Nil</span></span>               | <span data-ttu-id="bdefd-294">*epv1*</span><span class="sxs-lookup"><span data-stu-id="bdefd-294">*epv1*</span></span>             |
| <span data-ttu-id="bdefd-295">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="bdefd-295">*uuid1*</span></span>        | <span data-ttu-id="bdefd-296">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="bdefd-296">*uuid3*</span></span>           | <span data-ttu-id="bdefd-297">*epv4*</span><span class="sxs-lookup"><span data-stu-id="bdefd-297">*epv4*</span></span>             |
| <span data-ttu-id="bdefd-298">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="bdefd-298">*uuid2*</span></span>        | <span data-ttu-id="bdefd-299">*uuid4*</span><span class="sxs-lookup"><span data-stu-id="bdefd-299">*uuid4*</span></span>           | <span data-ttu-id="bdefd-300">*epv2*</span><span class="sxs-lookup"><span data-stu-id="bdefd-300">*epv2*</span></span>             |
| <span data-ttu-id="bdefd-301">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="bdefd-301">*uuid2*</span></span>        | <span data-ttu-id="bdefd-302">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="bdefd-302">*uuid7*</span></span>           | <span data-ttu-id="bdefd-303">*epv3*</span><span class="sxs-lookup"><span data-stu-id="bdefd-303">*epv3*</span></span>             |



 

<span data-ttu-id="bdefd-304">**Tabla del registro de objetos**</span><span class="sxs-lookup"><span data-stu-id="bdefd-304">**Object Registry Table**</span></span>



| <span data-ttu-id="bdefd-305">UUID del objeto</span><span class="sxs-lookup"><span data-stu-id="bdefd-305">Object UUID</span></span>      | <span data-ttu-id="bdefd-306">Tipo de objeto</span><span class="sxs-lookup"><span data-stu-id="bdefd-306">Object type</span></span> |
|------------------|-------------|
| <span data-ttu-id="bdefd-307">*uuidA*</span><span class="sxs-lookup"><span data-stu-id="bdefd-307">*uuidA*</span></span>          | <span data-ttu-id="bdefd-308">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="bdefd-308">*uuid3*</span></span>     |
| <span data-ttu-id="bdefd-309">*uuidB*</span><span class="sxs-lookup"><span data-stu-id="bdefd-309">*uuidB*</span></span>          | <span data-ttu-id="bdefd-310">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="bdefd-310">*uuid7*</span></span>     |
| <span data-ttu-id="bdefd-311">*uuidC*</span><span class="sxs-lookup"><span data-stu-id="bdefd-311">*uuidC*</span></span>          | <span data-ttu-id="bdefd-312">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="bdefd-312">*uuid7*</span></span>     |
| <span data-ttu-id="bdefd-313">*uuidD*</span><span class="sxs-lookup"><span data-stu-id="bdefd-313">*uuidD*</span></span>          | <span data-ttu-id="bdefd-314">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="bdefd-314">*uuid3*</span></span>     |
| <span data-ttu-id="bdefd-315">*uuidE*</span><span class="sxs-lookup"><span data-stu-id="bdefd-315">*uuidE*</span></span>          | <span data-ttu-id="bdefd-316">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="bdefd-316">*uuid3*</span></span>     |
| <span data-ttu-id="bdefd-317">*uuidF*</span><span class="sxs-lookup"><span data-stu-id="bdefd-317">*uuidF*</span></span>          | <span data-ttu-id="bdefd-318">*uuid8*</span><span class="sxs-lookup"><span data-stu-id="bdefd-318">*uuid8*</span></span>     |
| <span data-ttu-id="bdefd-319">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-319">Nil</span></span>              | <span data-ttu-id="bdefd-320">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-320">Nil</span></span>         |
| <span data-ttu-id="bdefd-321">(Cualquier otro UUID)</span><span class="sxs-lookup"><span data-stu-id="bdefd-321">(Any other UUID)</span></span> | <span data-ttu-id="bdefd-322">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-322">Nil</span></span>         |



 

<span data-ttu-id="bdefd-323">**Asignar el identificador de enlace a un vector de punto de entrada**</span><span class="sxs-lookup"><span data-stu-id="bdefd-323">**Mapping the Binding Handle to an Entry-point Vector**</span></span>



| <span data-ttu-id="bdefd-324">UUID de interfaz (desde el identificador de enlace del cliente)</span><span class="sxs-lookup"><span data-stu-id="bdefd-324">Interface UUID (from client binding handle)</span></span> | <span data-ttu-id="bdefd-325">UUID del objeto (desde el identificador de enlace del cliente)</span><span class="sxs-lookup"><span data-stu-id="bdefd-325">Object UUID (from client binding handle)</span></span> | <span data-ttu-id="bdefd-326">Tipo de objeto (de la tabla del registro de objetos)</span><span class="sxs-lookup"><span data-stu-id="bdefd-326">Object type (from object registry table)</span></span> | <span data-ttu-id="bdefd-327">Manager EPV (de la tabla del registro de la interfaz)</span><span class="sxs-lookup"><span data-stu-id="bdefd-327">Manager EPV (from interface registry table)</span></span> |
|---------------------------------------------|------------------------------------------|------------------------------------------|---------------------------------------------|
| <span data-ttu-id="bdefd-328">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="bdefd-328">*uuid1*</span></span>                                     | <span data-ttu-id="bdefd-329">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-329">Nil</span></span>                                      | <span data-ttu-id="bdefd-330">Nulo</span><span class="sxs-lookup"><span data-stu-id="bdefd-330">Nil</span></span>                                      | <span data-ttu-id="bdefd-331">*epv1*</span><span class="sxs-lookup"><span data-stu-id="bdefd-331">*epv1*</span></span>                                      |
| <span data-ttu-id="bdefd-332">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="bdefd-332">*uuid1*</span></span>                                     | <span data-ttu-id="bdefd-333">*uuidA*</span><span class="sxs-lookup"><span data-stu-id="bdefd-333">*uuidA*</span></span>                                  | <span data-ttu-id="bdefd-334">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="bdefd-334">*uuid3*</span></span>                                  | <span data-ttu-id="bdefd-335">*epv4*</span><span class="sxs-lookup"><span data-stu-id="bdefd-335">*epv4*</span></span>                                      |
| <span data-ttu-id="bdefd-336">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="bdefd-336">*uuid1*</span></span>                                     | <span data-ttu-id="bdefd-337">*uuidD*</span><span class="sxs-lookup"><span data-stu-id="bdefd-337">*uuidD*</span></span>                                  | <span data-ttu-id="bdefd-338">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="bdefd-338">*uuid3*</span></span>                                  | <span data-ttu-id="bdefd-339">*epv4*</span><span class="sxs-lookup"><span data-stu-id="bdefd-339">*epv4*</span></span>                                      |
| <span data-ttu-id="bdefd-340">*uuid1*</span><span class="sxs-lookup"><span data-stu-id="bdefd-340">*uuid1*</span></span>                                     | <span data-ttu-id="bdefd-341">*uuidE*</span><span class="sxs-lookup"><span data-stu-id="bdefd-341">*uuidE*</span></span>                                  | <span data-ttu-id="bdefd-342">*uuid3*</span><span class="sxs-lookup"><span data-stu-id="bdefd-342">*uuid3*</span></span>                                  | <span data-ttu-id="bdefd-343">*epv4*</span><span class="sxs-lookup"><span data-stu-id="bdefd-343">*epv4*</span></span>                                      |
| <span data-ttu-id="bdefd-344">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="bdefd-344">*uuid2*</span></span>                                     | <span data-ttu-id="bdefd-345">*uuidB*</span><span class="sxs-lookup"><span data-stu-id="bdefd-345">*uuidB*</span></span>                                  | <span data-ttu-id="bdefd-346">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="bdefd-346">*uuid7*</span></span>                                  | <span data-ttu-id="bdefd-347">*epv3*</span><span class="sxs-lookup"><span data-stu-id="bdefd-347">*epv3*</span></span>                                      |
| <span data-ttu-id="bdefd-348">*uuid2*</span><span class="sxs-lookup"><span data-stu-id="bdefd-348">*uuid2*</span></span>                                     | <span data-ttu-id="bdefd-349">*uuidC*</span><span class="sxs-lookup"><span data-stu-id="bdefd-349">*uuidC*</span></span>                                  | <span data-ttu-id="bdefd-350">*uuid7*</span><span class="sxs-lookup"><span data-stu-id="bdefd-350">*uuid7*</span></span>                                  | <span data-ttu-id="bdefd-351">*epv3*</span><span class="sxs-lookup"><span data-stu-id="bdefd-351">*epv3*</span></span>                                      |



 

<span data-ttu-id="bdefd-352">En los pasos siguientes se describen las acciones que toma la biblioteca en tiempo de ejecución del servidor, como se muestra en las tablas anteriores cuando un cliente con la interfaz UUID *uuid2* y el UUID del objeto *uuidC* la llama.</span><span class="sxs-lookup"><span data-stu-id="bdefd-352">The following steps describe the actions that the server's run-time library take, as shown in the preceding tables when a client with interface UUID *uuid2* and object UUID *uuidC* calls it.</span></span>

1.  <span data-ttu-id="bdefd-353">El servidor llama a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) para asociar las interfaces que ofrece con la EPVs de administrador diferente.</span><span class="sxs-lookup"><span data-stu-id="bdefd-353">The server calls [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to associate the interfaces it offers with the different manager EPVs.</span></span> <span data-ttu-id="bdefd-354">Las entradas de la tabla del registro de la interfaz reflejan cuatro llamadas a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) para ofrecer dos interfaces, con dos implementaciones (EPVs) para cada interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-354">The entries in the interface registry table reflect four calls of [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to offer two interfaces, with two implementations (EPVs) for each interface.</span></span>
2.  <span data-ttu-id="bdefd-355">El servidor llama a [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para establecer el tipo de cada objeto que ofrece.</span><span class="sxs-lookup"><span data-stu-id="bdefd-355">The server calls [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) to establish the type of each object it offers.</span></span> <span data-ttu-id="bdefd-356">Además de la Asociación predeterminada del objeto Nil a un tipo Nil, el otro UUID del objeto no encontrado explícitamente en la tabla del registro de objetos también se asigna al UUID de tipo Nil.</span><span class="sxs-lookup"><span data-stu-id="bdefd-356">In addition to the default association of the nil object to a nil type, all other object UUIDs not explicitly found in the object registry table also map to the nil type UUID.</span></span>

    <span data-ttu-id="bdefd-357">En este ejemplo, el servidor llama a la rutina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) seis veces.</span><span class="sxs-lookup"><span data-stu-id="bdefd-357">In this example, the server calls the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine six times.</span></span>

3.  <span data-ttu-id="bdefd-358">La biblioteca en tiempo de ejecución del servidor recibe una llamada a procedimiento remoto que contiene el UUID de interfaz al que pertenece la llamada y un UUID del objeto desde el identificador de enlace de la llamada.</span><span class="sxs-lookup"><span data-stu-id="bdefd-358">The server run-time library receives a remote procedure call containing the interface UUID that the call belongs to and an object UUID from the call's binding handle.</span></span>
4.  <span data-ttu-id="bdefd-359">Con la interfaz UUID de la llamada a procedimiento remoto, la biblioteca en tiempo de ejecución del servidor ubica el UUID de la interfaz en la tabla del registro de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-359">Using the interface UUID from the remote procedure call, the server's run-time library locates the interface UUID in the interface registry table.</span></span>
5.  <span data-ttu-id="bdefd-360">Con el UUID del objeto *uuidC* del identificador de enlace, la biblioteca en tiempo de ejecución del servidor busca el UUID del objeto en la tabla del registro de objetos y encuentra que se asigna al tipo *uuid7*.</span><span class="sxs-lookup"><span data-stu-id="bdefd-360">Using the *uuidC* object UUID from the binding handle, the server's run-time library locates the object UUID in the object registry table and finds that it maps to type *uuid7*.</span></span>
6.  <span data-ttu-id="bdefd-361">Para buscar el tipo de administrador, la biblioteca en tiempo de ejecución del servidor combina la interfaz UUID, *uuid2* y el tipo *uuid7* en la tabla del registro de la interfaz.</span><span class="sxs-lookup"><span data-stu-id="bdefd-361">To locate the manager type, the server's run-time library combines the interface UUID, *uuid2*, and type *uuid7* in the interface registry table.</span></span> <span data-ttu-id="bdefd-362">Se resuelve como *epv3*, que contiene la rutina del administrador del servidor que se va a ejecutar para la llamada a procedimiento remoto.</span><span class="sxs-lookup"><span data-stu-id="bdefd-362">This resolves to *epv3*, which contains the server manager routine to be executed for the remote procedure call.</span></span>

<span data-ttu-id="bdefd-363">Las rutinas de *epv2* nunca se ejecutarán porque el servidor no ha llamado a la rutina [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para agregar objetos con un tipo UUID de *uuid4* a la tabla del registro de objetos.</span><span class="sxs-lookup"><span data-stu-id="bdefd-363">The routines in *epv2* will never be executed because the server has not called the [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) routine to add any objects with a type UUID of *uuid4* to the object registry table.</span></span>

<span data-ttu-id="bdefd-364">Una llamada a procedimiento remoto con la interfaz UUID *uuid2* y el UUID del objeto *uuidF* vuelve al autor de la llamada con un código de estado de tipo de admin. RPC \_ \_ desconocido \_ \_ porque el servidor no llama a [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)o [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) para registrar la interfaz con un tipo de administrador de *uuid8*.</span><span class="sxs-lookup"><span data-stu-id="bdefd-364">A remote procedure call with interface UUID *uuid2* and object UUID *uuidF* returns to the caller with an RPC\_S\_UNKNOWN\_MGR\_TYPE status code because the server did not call [**RpcServerRegisterIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif), [**RpcServerRegisterIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex), or [**RpcServerRegisterIf2**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2) to register the interface with a manager type of *uuid8*.</span></span>

## <a name="return-values"></a><span data-ttu-id="bdefd-365">Valores devueltos</span><span class="sxs-lookup"><span data-stu-id="bdefd-365">Return Values</span></span>

<span data-ttu-id="bdefd-366">Esta función devuelve uno de los valores siguientes.</span><span class="sxs-lookup"><span data-stu-id="bdefd-366">This function returns one of the following values.</span></span>



| <span data-ttu-id="bdefd-367">Value</span><span class="sxs-lookup"><span data-stu-id="bdefd-367">Value</span></span>                             | <span data-ttu-id="bdefd-368">Significado</span><span class="sxs-lookup"><span data-stu-id="bdefd-368">Meaning</span></span>                      |
|-----------------------------------|------------------------------|
| <span data-ttu-id="bdefd-369">RPC \_ S \_ correcto</span><span class="sxs-lookup"><span data-stu-id="bdefd-369">RPC\_S\_OK</span></span>                        | <span data-ttu-id="bdefd-370">Correcto</span><span class="sxs-lookup"><span data-stu-id="bdefd-370">Success</span></span>                      |
| <span data-ttu-id="bdefd-371">el \_ tipo de RPC S \_ \_ ya está \_ registrado</span><span class="sxs-lookup"><span data-stu-id="bdefd-371">RPC\_S\_TYPE\_ALREADY\_REGISTERED</span></span> | <span data-ttu-id="bdefd-372">Tipo UUID ya registrado</span><span class="sxs-lookup"><span data-stu-id="bdefd-372">Type UUID already registered</span></span> |



 

## <a name="supplying-your-own-object-inquiry-function"></a><span data-ttu-id="bdefd-373">Proporcionar su propia función de consulta de objeto</span><span class="sxs-lookup"><span data-stu-id="bdefd-373">Supplying Your Own Object-inquiry Function</span></span>

<span data-ttu-id="bdefd-374">Considere un servidor que administra miles de objetos de muchos tipos diferentes.</span><span class="sxs-lookup"><span data-stu-id="bdefd-374">Consider a server that manages thousands of objects of many different types.</span></span> <span data-ttu-id="bdefd-375">Cada vez que se inicia el servidor, la aplicación de servidor tendría que llamar a la función [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) para cada uno de los objetos, aunque los clientes pueden hacer referencia a solo algunos de ellos (o tardan mucho tiempo en hacer referencia a ellos).</span><span class="sxs-lookup"><span data-stu-id="bdefd-375">Whenever the server started, the server application would have to call the function [**RpcObjectSetType**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype) for every one of the objects, even though clients might refer to only a few of them (or take a long time to refer to them).</span></span> <span data-ttu-id="bdefd-376">Es probable que estos miles de objetos estén en el disco, por lo que recuperar sus tipos llevaría mucho tiempo.</span><span class="sxs-lookup"><span data-stu-id="bdefd-376">These thousands of objects are likely to be on disk, so retrieving their types would be time consuming.</span></span> <span data-ttu-id="bdefd-377">Además, la tabla interna que asigna el UUID del objeto al tipo de administrador UUID básicamente duplicaría la asignación que se mantiene con los propios objetos.</span><span class="sxs-lookup"><span data-stu-id="bdefd-377">Also, the internal table that is mapping the object UUID to the manager type UUID would essentially duplicate the mapping maintained with the objects themselves.</span></span>

<span data-ttu-id="bdefd-378">Para mayor comodidad, el conjunto de funciones RPC incluye la función [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span><span class="sxs-lookup"><span data-stu-id="bdefd-378">For convenience, the RPC function set includes the function [**RpcObjectSetInqFn**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsetinqfn).</span></span> <span data-ttu-id="bdefd-379">Con esta función, debe proporcionar su propia función de consulta de objetos.</span><span class="sxs-lookup"><span data-stu-id="bdefd-379">With this function, you provide your own object-inquiry function.</span></span>

<span data-ttu-id="bdefd-380">Por ejemplo, puede proporcionar su propia función de consulta de objeto al asignar los objetos 100 – 199 al tipo número 1, 200 – 299 al tipo número 2, y así sucesivamente.</span><span class="sxs-lookup"><span data-stu-id="bdefd-380">As an example, you can supply your own object-inquiry function when you map objects 100–199 to type number 1, 200–299 to type number 2, and so on.</span></span> <span data-ttu-id="bdefd-381">La función de consulta de objeto también se puede extender a un sistema de archivos distribuido, donde la aplicación de servidor no tiene una lista de todos los archivos (UUID de objeto) disponibles, o cuando el objeto UUID de objeto tiene archivos en el sistema de archivos y no desea cargar previamente todas las asignaciones entre el UUID de objeto y el tipo UUID.</span><span class="sxs-lookup"><span data-stu-id="bdefd-381">The object inquiry function can also be extended to a distributed file system, where the server application does not have a list of all the files (object UUIDs) available, or when object UUIDs name files in the file system and you do not want to preload all of the mappings between object UUIDs and type UUIDs.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bdefd-382">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="bdefd-382">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bdefd-383">**RpcBindingFromStringBinding**</span><span class="sxs-lookup"><span data-stu-id="bdefd-383">**RpcBindingFromStringBinding**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding)
</dt> <dt>

[<span data-ttu-id="bdefd-384">**RpcBindingSetObject**</span><span class="sxs-lookup"><span data-stu-id="bdefd-384">**RpcBindingSetObject**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingsetobject)
</dt> <dt>

[<span data-ttu-id="bdefd-385">**RpcNsBindingExport**</span><span class="sxs-lookup"><span data-stu-id="bdefd-385">**RpcNsBindingExport**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingexporta)
</dt> <dt>

[<span data-ttu-id="bdefd-386">**RpcNsBindingImportBegin**</span><span class="sxs-lookup"><span data-stu-id="bdefd-386">**RpcNsBindingImportBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindingimportbegina)
</dt> <dt>

[<span data-ttu-id="bdefd-387">**RpcNsBindingLookupBegin**</span><span class="sxs-lookup"><span data-stu-id="bdefd-387">**RpcNsBindingLookupBegin**</span></span>](/windows/desktop/api/Rpcnsi/nf-rpcnsi-rpcnsbindinglookupbegina)
</dt> <dt>

[<span data-ttu-id="bdefd-388">**RpcObjectSetType**</span><span class="sxs-lookup"><span data-stu-id="bdefd-388">**RpcObjectSetType**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcobjectsettype)
</dt> <dt>

[<span data-ttu-id="bdefd-389">**RpcServerRegisterIf**</span><span class="sxs-lookup"><span data-stu-id="bdefd-389">**RpcServerRegisterIf**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif)
</dt> <dt>

[<span data-ttu-id="bdefd-390">**RpcServerRegisterIf2**</span><span class="sxs-lookup"><span data-stu-id="bdefd-390">**RpcServerRegisterIf2**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterif2)
</dt> <dt>

[<span data-ttu-id="bdefd-391">**RpcServerRegisterIfEx**</span><span class="sxs-lookup"><span data-stu-id="bdefd-391">**RpcServerRegisterIfEx**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverregisterifex)
</dt> <dt>

[<span data-ttu-id="bdefd-392">**RpcServerUnregisterIf**</span><span class="sxs-lookup"><span data-stu-id="bdefd-392">**RpcServerUnregisterIf**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterif)
</dt> <dt>

[<span data-ttu-id="bdefd-393">**RpcServerUnregisterIfEx**</span><span class="sxs-lookup"><span data-stu-id="bdefd-393">**RpcServerUnregisterIfEx**</span></span>](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserverunregisterifex)
</dt> </dl>

 

 




