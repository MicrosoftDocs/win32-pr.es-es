---
title: Contrato
description: Un contrato de servicio incluye metadatos que definen cómo un servicio controla los mensajes del canal.
ms.assetid: 670530bf-344b-4480-8357-8984d80c0c68
keywords:
- Servicios Web de contrato para Windows
- WWSAPI
- WWS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7120346dac4d11c21955cd2430ed0a7dc277e88c
ms.sourcegitcommit: 5b98bf8c68922f8f03c14f793fbe17504900559c
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/12/2021
ms.locfileid: "104566888"
---
# <a name="contract"></a><span data-ttu-id="2ae7b-106">Contrato</span><span class="sxs-lookup"><span data-stu-id="2ae7b-106">Contract</span></span>

<span data-ttu-id="2ae7b-107">Un contrato de servicio incluye metadatos que definen cómo un servicio controla los mensajes del canal.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-107">A service contract carries metadata that defines how a service to handles channel messages.</span></span>


<span data-ttu-id="2ae7b-108">Un [**\_ \_ contrato de servicio de WS**](/windows/desktop/api/WebServices/ns-webservices-ws_service_contract) transporta los metadatos de un servicio para administrar un [ \_ mensaje de WS](ws-message.md).</span><span class="sxs-lookup"><span data-stu-id="2ae7b-108">A [**WS\_SERVICE\_CONTRACT**](/windows/desktop/api/WebServices/ns-webservices-ws_service_contract) carries metadata for a service to handle a [WS\_MESSAGE](ws-message.md).</span></span>

![Diagrama que muestra metadatos de WS_SERVICE_CONTRACT en un mensaje a un extremo de servicio.](images/servicecontractintro.png)

<span data-ttu-id="2ae7b-110">Tiene una [**Descripción del \_ contrato \_ de WS**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) y una tabla de funciones.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-110">It has a [**WS\_CONTRACT\_DESCRIPTION**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) and a function table.</span></span> <span data-ttu-id="2ae7b-111">Una aplicación puede especificar opcionalmente [**una \_ \_ devolución de \_ \_ llamada de recepción de mensajes del servicio WS**](/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback).</span><span class="sxs-lookup"><span data-stu-id="2ae7b-111">An application can optionally specify [**WS\_SERVICE\_MESSAGE\_RECEIVE\_CALLBACK**](/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback).</span></span>

<span data-ttu-id="2ae7b-112">Si no se proporciona una [**\_ \_ Descripción del contrato de WS**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) y una tabla de funciones, se requiere que la aplicación especifique una devolución de [**\_ \_ \_ \_ llamada de recepción de mensajes del servicio WS**](/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback).</span><span class="sxs-lookup"><span data-stu-id="2ae7b-112">If a [**WS\_CONTRACT\_DESCRIPTION**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) and a function table are not given, the application is required to specify [**WS\_SERVICE\_MESSAGE\_RECEIVE\_CALLBACK**](/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback).</span></span>

![Diagrama que muestra las operaciones de servicio de agregar y restar en el contrato de servicio de ICalculator.](images/servicecontract.png)


``` syntax
static WS_SERVICE_CONTRACT calculatorContract = 
{
    &calculatorContractDescription, 
    NULL, 
    &calculatorFunctions, 
};
```

<span data-ttu-id="2ae7b-114">Vea el ejemplo de [calculadora](httpcalculatorserviceexample.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-114">See the [calculator](httpcalculatorserviceexample.md) example for details.</span></span>

<span data-ttu-id="2ae7b-115">Descripción del contrato</span><span class="sxs-lookup"><span data-stu-id="2ae7b-115">Contract Description</span></span>

<span data-ttu-id="2ae7b-116">[**WS \_ La \_ Descripción del contrato**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) son los metadatos que definen el contrato de tipo del servicio.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-116">[**WS\_CONTRACT\_DESCRIPTION**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) is metadata defining the type-contract of the service.</span></span> <span data-ttu-id="2ae7b-117">Generado por [wsutil.exe](web-service-compiler-tool.md).</span><span class="sxs-lookup"><span data-stu-id="2ae7b-117">Generated by [wsutil.exe](web-service-compiler-tool.md).</span></span>

<span data-ttu-id="2ae7b-118">En términos de WSDL, una [**\_ \_ Descripción del contrato de WS**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) se asigna a un WSDL: portType.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-118">In terms of WSDL, a [**WS\_CONTRACT\_DESCRIPTION**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) maps to a wsdl:portType.</span></span> <span data-ttu-id="2ae7b-119">Para cada WSDL: portType del documento WSDL se generará **una \_ \_ Descripción** independiente del contrato de WS.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-119">For each wsdl:portType in the WSDL document a separate **WS\_CONTRACT\_DESCRIPTION** will be generated.</span></span>

<span data-ttu-id="2ae7b-120">Una descripción del contrato se compone de una o más [operaciones de servicio](service-operation.md).</span><span class="sxs-lookup"><span data-stu-id="2ae7b-120">A contract description is made up of on or more [service operations](service-operation.md).</span></span> <span data-ttu-id="2ae7b-121">Estas operaciones se proporcionan como una matriz de [**la \_ \_ Descripción**](/windows/desktop/api/WebServices/ns-webservices-ws_operation_description)de la operación de WS.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-121">These operations are given as an array of [**WS\_OPERATION\_DESCRIPTION**](/windows/desktop/api/WebServices/ns-webservices-ws_operation_description).</span></span>

![Diagrama que muestra una WS_CONTRACT_DESCRIPTION como una matriz de WS_OPERATION_DESCRIPTIONs.](images/porttypetocontract.png)

``` syntax
<wsdl:definitions xmlns:soap="https://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:wsu="https://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
xmlns:soapenc="https://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="https://Example.org" 
xmlns:wsa="https://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsp="https://schemas.xmlsoap.org/ws/2004/09/policy" 
xmlns:wsap="https://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:xsd="https://www.w3.org/2001/XMLSchema" 
xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsaw="https://www.w3.org/2006/05/addressing/wsdl" 
xmlns:soap12="https://schemas.xmlsoap.org/wsdl/soap12/" xmlns:wsa10="https://www.w3.org/2005/08/addressing" 
xmlns:wsx="https://schemas.xmlsoap.org/ws/2004/09/mex" targetNamespace="https://Example.org" 
xmlns:wsdl="https://schemas.xmlsoap.org/wsdl/">
 <wsdl:portType name="ICalculator">
  <wsdl:operation name="Add">
   <wsdl:input wsaw:Action="https://Example.org/ICalculator/Add" 
   message="tns:ICalculator_Add_InputMessage" />
   <wsdl:output wsaw:Action="https://Example.org/ICalculator/AddResponse" 
   message="tns:ICalculator_Add_OutputMessage" />
  </wsdl:operation>
 </wsdl:portType>
</wsdl:definitions>
```

<span data-ttu-id="2ae7b-123">Para obtener detalles de la conversión de WSDL: portType a [**WS \_ Contract \_ Description**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) , consulte la [sección salida de WSDL](wsdl-support.md).</span><span class="sxs-lookup"><span data-stu-id="2ae7b-123">For details of wsdl:portType to [**WS\_CONTRACT\_DESCRIPTION**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) conversion, see the [WSDL output section](wsdl-support.md).</span></span>

<span data-ttu-id="2ae7b-124">Ejemplo: [ **\_ \_ Descripción del contrato de WS**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description)</span><span class="sxs-lookup"><span data-stu-id="2ae7b-124">Example: [**WS\_CONTRACT\_DESCRIPTION**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description)</span></span>

``` syntax
static WS_CONTRACT_DESCRIPTION contractDescriptionICalculator =
{
    WsCountOf(serviceOperationsICalculator),
    serviceOperationsICalculator
};
```

<span data-ttu-id="2ae7b-125">Tabla de funciones</span><span class="sxs-lookup"><span data-stu-id="2ae7b-125">Function Table</span></span>

<span data-ttu-id="2ae7b-126">La tabla de funciones es una estructura de punteros de función que representa cada una de las [operaciones de servicio](service-operation.md) en el contrato de servicio.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-126">Function Table is an struct of function pointers representing each of the [service operations](service-operation.md) in the service contract.</span></span> <span data-ttu-id="2ae7b-127">La definición de la tabla de función también se genera mediante [wsutil.exe](web-service-compiler-tool.md).</span><span class="sxs-lookup"><span data-stu-id="2ae7b-127">The function table definition is also generated by [wsutil.exe](web-service-compiler-tool.md).</span></span>

<span data-ttu-id="2ae7b-128">Ejemplo: tabla de funciones</span><span class="sxs-lookup"><span data-stu-id="2ae7b-128">Example: Function Table</span></span>

``` syntax
 // Function Table
struct CalculatorServiceFunctionTable
{
      AddOperation Add;
      SubtractOperation Subtract;
};

// Populate the Function Table
static const CalculatorServiceFunctionTable calculatorFunctions = {Add, Subtract};
```

<span data-ttu-id="2ae7b-129">Usar la [ **\_ devolución de \_ \_ \_ llamada de recepción de mensajes del servicio WS**](/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback)</span><span class="sxs-lookup"><span data-stu-id="2ae7b-129">Using the [**WS\_SERVICE\_MESSAGE\_RECEIVE\_CALLBACK**](/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback)</span></span>

<span data-ttu-id="2ae7b-130">[**WS \_ La \_ \_ devolución de \_ llamada de recepción de mensajes de servicio**](/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback) tiene un rol dual mutuamente excluyente.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-130">[**WS\_SERVICE\_MESSAGE\_RECEIVE\_CALLBACK**](/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback) has a dual mutually exclusive role.</span></span>

<span data-ttu-id="2ae7b-131">Si se especifica una [**\_ \_ Descripción del contrato de WS**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) en el [**\_ \_ contrato de servicio de WS**](/windows/desktop/api/WebServices/ns-webservices-ws_service_contract), se convierte en el controlador de mensajes predeterminado para todas las acciones que no son compatibles con la **\_ \_ Descripción del contrato de WS** especificado.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-131">If a [**WS\_CONTRACT\_DESCRIPTION**](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description) is specified on the [**WS\_SERVICE\_CONTRACT**](/windows/desktop/api/WebServices/ns-webservices-ws_service_contract), this becomes the default message handler for all the actions which are not supported by the specified **WS\_CONTRACT\_DESCRIPTION**.</span></span> <span data-ttu-id="2ae7b-132">De lo contrario, si no se especifica la **\_ \_ Descripción del contrato de WS** en el **\_ \_ contrato de servicio de WS** y se especifica la devolución de [**\_ \_ \_ \_ llamada de recepción de mensajes del servicio WS**](/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback) en el **\_ \_ contrato de servicio WS** , todos los [mensajes](ws-message.md) que llegan se pasan a esta devolución de llamada.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-132">Otherwise, if **WS\_CONTRACT\_DESCRIPTION** is not specified on the **WS\_SERVICE\_CONTRACT**, and the [**WS\_SERVICE\_MESSAGE\_RECEIVE\_CALLBACK**](/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback) is specified on the **WS\_SERVICE\_CONTRACT** all in coming [messages](ws-message.md) are passed to this callback.</span></span>

<span data-ttu-id="2ae7b-133">Para obtener más ejemplos, vea.</span><span class="sxs-lookup"><span data-stu-id="2ae7b-133">For more examples, please see</span></span>

-   [<span data-ttu-id="2ae7b-134">Ejemplo de servicio sin tipo</span><span class="sxs-lookup"><span data-stu-id="2ae7b-134">Untyped service example</span></span>](untypedserviceexample.md)
-   [<span data-ttu-id="2ae7b-135">Ejemplo de servicio de calculadora</span><span class="sxs-lookup"><span data-stu-id="2ae7b-135">Calculator service example</span></span>](httpcalculatorserviceexample.md)
-   [<span data-ttu-id="2ae7b-136">Operaciones de servicio</span><span class="sxs-lookup"><span data-stu-id="2ae7b-136">Service operations</span></span>](service-operation.md)

<span data-ttu-id="2ae7b-137">Las siguientes devoluciones de llamada son parte del contrato:</span><span class="sxs-lookup"><span data-stu-id="2ae7b-137">The following callbacks are part of the contract:</span></span>

-   [<span data-ttu-id="2ae7b-138">**\_devolución de \_ llamada de recepción de mensaje del servicio WS \_ \_**</span><span class="sxs-lookup"><span data-stu-id="2ae7b-138">**WS\_SERVICE\_MESSAGE\_RECEIVE\_CALLBACK**</span></span>](/windows/desktop/api/WebServices/nc-webservices-ws_service_message_receive_callback)
-   [<span data-ttu-id="2ae7b-139">**\_devolución de \_ llamada de stub de servicio WS \_**</span><span class="sxs-lookup"><span data-stu-id="2ae7b-139">**WS\_SERVICE\_STUB\_CALLBACK**</span></span>](/windows/desktop/api/WebServices/nc-webservices-ws_service_stub_callback)

<span data-ttu-id="2ae7b-140">Las siguientes estructuras forman parte del contrato:</span><span class="sxs-lookup"><span data-stu-id="2ae7b-140">The following structures are part of the contract:</span></span>

-   [<span data-ttu-id="2ae7b-141">**\_Descripción del contrato de WS \_**</span><span class="sxs-lookup"><span data-stu-id="2ae7b-141">**WS\_CONTRACT\_DESCRIPTION**</span></span>](/windows/desktop/api/WebServices/ns-webservices-ws_contract_description)
-   [<span data-ttu-id="2ae7b-142">**\_contrato de servicio de WS \_**</span><span class="sxs-lookup"><span data-stu-id="2ae7b-142">**WS\_SERVICE\_CONTRACT**</span></span>](/windows/desktop/api/WebServices/ns-webservices-ws_service_contract)

 

 




