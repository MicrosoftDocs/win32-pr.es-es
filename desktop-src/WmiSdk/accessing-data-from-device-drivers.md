---
description: El proveedor de Modelo de controlador de Windows (WDM) concede acceso a las clases, instancias, métodos y eventos de los controladores de hardware que se ajustan al modelo WDM.
ms.assetid: 8686a613-0e53-4e6e-b193-7839abfb70de
ms.tgt_platform: multiple
title: Acceder a los datos desde los controladores de dispositivos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 72a59b59116ca0f71178fb2faed290d6bc76c9d6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105707411"
---
# <a name="accessing-data-from-device-drivers"></a><span data-ttu-id="734fb-103">Acceder a los datos desde los controladores de dispositivos</span><span class="sxs-lookup"><span data-stu-id="734fb-103">Accessing Data from Device Drivers</span></span>

<span data-ttu-id="734fb-104">El proveedor de Modelo de controlador de Windows (WDM) concede acceso a las clases, instancias, métodos y eventos de los controladores de hardware que se ajustan al modelo WDM.</span><span class="sxs-lookup"><span data-stu-id="734fb-104">The Windows Driver Model (WDM) provider grants access to the classes, instances, methods, and events of hardware drivers that conform to the WDM model.</span></span> <span data-ttu-id="734fb-105">Las clases para los controladores de hardware residen en el \\ \\ \\ espacio de nombres WMI raíz.</span><span class="sxs-lookup"><span data-stu-id="734fb-105">The classes for hardware drivers reside in the \\\\root\\wmi namespace.</span></span>

<span data-ttu-id="734fb-106">El proveedor de WDM es de interés para los usuarios que escriben controladores de dispositivos y para los administradores interesados en los datos de controladores de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="734fb-106">The WDM provider is of interest to those who write device drivers and to administrators who are interested in device driver data.</span></span>

<span data-ttu-id="734fb-107">En este tema se describen las siguientes secciones:</span><span class="sxs-lookup"><span data-stu-id="734fb-107">The following sections are discussed in this topic:</span></span>

-   [<span data-ttu-id="734fb-108">Información para escritores de controladores de dispositivos</span><span class="sxs-lookup"><span data-stu-id="734fb-108">Information for Device Driver Writers</span></span>](#information-for-device-driver-writers)
-   [<span data-ttu-id="734fb-109">Información para administradores y usuarios de datos de controladores</span><span class="sxs-lookup"><span data-stu-id="734fb-109">Information for Administrators and Users of Driver Data</span></span>](#information-for-administrators-and-users-of-driver-data)
-   [<span data-ttu-id="734fb-110">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="734fb-110">Related topics</span></span>](#related-topics)

## <a name="information-for-device-driver-writers"></a><span data-ttu-id="734fb-111">Información para escritores de controladores de dispositivos</span><span class="sxs-lookup"><span data-stu-id="734fb-111">Information for Device Driver Writers</span></span>

<span data-ttu-id="734fb-112">Las clases WMI relacionadas con un controlador de dispositivo específico se crean cuando el proveedor de WDM extrae el MOF binario del archivo ejecutable del controlador de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="734fb-112">WMI classes related to a specific device driver are created when the WDM provider extracts the binary MOF from the device driver executable file.</span></span> <span data-ttu-id="734fb-113">Esto tiene lugar cuando se inicia WMI, se instala un nuevo controlador de dispositivo o se elimina la instancia de [WMIBinaryMofResource](/windows/desktop/WmiCoreProv/wmibinarymofresource) para un controlador determinado.</span><span class="sxs-lookup"><span data-stu-id="734fb-113">This takes place whenever WMI is started, a new device driver is installed, or the instance of [WMIBinaryMofResource](/windows/desktop/WmiCoreProv/wmibinarymofresource) for a particular driver is deleted.</span></span> <span data-ttu-id="734fb-114">Al comprobar Wmiprov. log, puede determinar si se produjo un error al extraer el archivo MOF binario.</span><span class="sxs-lookup"><span data-stu-id="734fb-114">By checking Wmiprov.log, you can determine if an error resulting in failure occurred while extracting the binary MOF file.</span></span> <span data-ttu-id="734fb-115">Los detalles de los errores de [MOFCOMP](mofcomp.md) se muestran en MOFCOMP. log.</span><span class="sxs-lookup"><span data-stu-id="734fb-115">Details of [mofcomp](mofcomp.md) errors are reported in Mofcomp.log.</span></span> <span data-ttu-id="734fb-116">Para obtener más información, consulte [archivos de registro de WMI](wmi-log-files.md).</span><span class="sxs-lookup"><span data-stu-id="734fb-116">For more information, see [WMI Log Files](wmi-log-files.md).</span></span> <span data-ttu-id="734fb-117">Por motivos de rendimiento, el proveedor de WDM no genera eventos al crear o eliminar clases debido a que un proveedor de WDM se inicia o se detiene.</span><span class="sxs-lookup"><span data-stu-id="734fb-117">For performance reasons, the WDM provider does not generate events while creating or deleting classes due to a WDM provider starting or stopping.</span></span>

<span data-ttu-id="734fb-118">El proveedor de WDM transforma todos los datos de WNODE en información de clase.</span><span class="sxs-lookup"><span data-stu-id="734fb-118">The WDM provider transforms all WNODE data into class information.</span></span> <span data-ttu-id="734fb-119">Si se produce un error al transformar los datos de WNODE en datos de clase, se notifica en Wmiprov. log con el encabezado con formato y los bytes representados en el mismo formato que un volcado de memoria.</span><span class="sxs-lookup"><span data-stu-id="734fb-119">If an error is encountered when transforming the data from WNODE to class data, it is reported in Wmiprov.log with the header formatted and bytes rendered in the same form as a memory dump.</span></span>

<span data-ttu-id="734fb-120">Los cambios realizados en la configuración de seguridad del controlador no surtirán efecto hasta que el proveedor de WDM se descargue y se vuelva a cargar.</span><span class="sxs-lookup"><span data-stu-id="734fb-120">Changes made to driver security settings do not take effect until the WDM provider is unloaded and reloaded.</span></span> <span data-ttu-id="734fb-121">Para obtener más información, vea [descargar un proveedor](unloading-a-provider.md).</span><span class="sxs-lookup"><span data-stu-id="734fb-121">For more information, see [Unloading a Provider](unloading-a-provider.md).</span></span>

<span data-ttu-id="734fb-122">WMI también puede crear contadores de alto rendimiento para los controladores de hardware disponibles.</span><span class="sxs-lookup"><span data-stu-id="734fb-122">WMI can also make high-performance counters for hardware drivers available.</span></span> <span data-ttu-id="734fb-123">Para obtener más información acerca de cómo crear clases de alto rendimiento y Mostrar datos en el monitor de sistema de Perfmon, consulte [mejorar la eficacia de un proveedor de instancias](improving-the-efficiency-of-an-instance-provider.md).</span><span class="sxs-lookup"><span data-stu-id="734fb-123">For more information about creating high-performance classes and displaying data in Perfmon System Monitor, see [Improving the Efficiency of an Instance Provider](improving-the-efficiency-of-an-instance-provider.md).</span></span> <span data-ttu-id="734fb-124">Para obtener más información acerca de la escritura de controladores de dispositivos habilitados para WMI, consulte [https://www.microsoft.com/ddk](https://msdn.microsoft.com/library/aa972908.aspx) .</span><span class="sxs-lookup"><span data-stu-id="734fb-124">For more information about writing WMI-enabled device drivers, see [https://www.microsoft.com/ddk](https://msdn.microsoft.com/library/aa972908.aspx).</span></span> <span data-ttu-id="734fb-125">Para obtener más información acerca de los calificadores específicos de WDM en el archivo MOF, consulte [**calificadores específicos del proveedor de WDM**](qualifiers-specific-to-the-wdm-provider.md).</span><span class="sxs-lookup"><span data-stu-id="734fb-125">For more information about WDM specific qualifiers in the MOF file, see [**Qualifiers Specific to the WDM Provider**](qualifiers-specific-to-the-wdm-provider.md).</span></span>

## <a name="information-for-administrators-and-users-of-driver-data"></a><span data-ttu-id="734fb-126">Información para administradores y usuarios de datos de controladores</span><span class="sxs-lookup"><span data-stu-id="734fb-126">Information for Administrators and Users of Driver Data</span></span>

<span data-ttu-id="734fb-127">Al enumerar las instancias de la clase [WMIBinaryMofResource](/windows/desktop/WmiCoreProv/wmibinarymofresource) , se proporciona una lista de los controladores del sistema e información sobre si el proveedor de WDM ha realizado correctamente la compilación de MOF para cada controlador.</span><span class="sxs-lookup"><span data-stu-id="734fb-127">Listing the instances of the [WMIBinaryMofResource](/windows/desktop/WmiCoreProv/wmibinarymofresource) class provides a list of the drivers in the system and information about whether the WDM provider succeeded in compiling the MOFs for each driver.</span></span> <span data-ttu-id="734fb-128">Puede forzar que el proveedor vuelva a compilar y regenerar las clases para un controlador eliminando la instancia de WMIBinaryMofResource que representa ese controlador.</span><span class="sxs-lookup"><span data-stu-id="734fb-128">You can force the provider to recompile and regenerate the classes for a driver by deleting the instance of WMIBinaryMofResource that represents that driver.</span></span> <span data-ttu-id="734fb-129">Los detalles de los errores de [MOFCOMP](mofcomp.md) se muestran en el archivo MOFCOMP. log.</span><span class="sxs-lookup"><span data-stu-id="734fb-129">Details of [mofcomp](mofcomp.md) errors are reported in the Mofcomp.log.</span></span>

<span data-ttu-id="734fb-130">Si el espacio de nombres WMI está dañado, se puede eliminar y volver a abrir para forzar a WDM a volver a generar las clases de controlador.</span><span class="sxs-lookup"><span data-stu-id="734fb-130">If the WMI namespace is corrupted, it can be deleted and reopened to force WDM to rebuild the driver classes.</span></span> <span data-ttu-id="734fb-131">Para obtener más información sobre cómo abrir un espacio de nombres, vea [Crear jerarquías en WMI](creating-hierarchies-within-wmi.md).</span><span class="sxs-lookup"><span data-stu-id="734fb-131">For more information about opening a namespace, see [Creating Hierarchies Within WMI](creating-hierarchies-within-wmi.md).</span></span>

<span data-ttu-id="734fb-132">En ocasiones, las clases de controlador pueden aparecer "en desuso" si se interrumpe la carga de controladores o se producen otras operaciones anómalas.</span><span class="sxs-lookup"><span data-stu-id="734fb-132">Driver classes can occasionally get "stranded" if driver loading is interrupted or other abnormal operations occur.</span></span> <span data-ttu-id="734fb-133">El proveedor de WDM solo buscará y limpiará las clases "en desuso" cuando se instale un nuevo controlador o cuando el valor de clave del registro de **\\ Microsoft \\ WBEM \\ WDMProvider del software** **ProcessStrandedClasses** esté establecido en **true**.</span><span class="sxs-lookup"><span data-stu-id="734fb-133">The WDM provider will only search for and clean up "stranded" classes when a new driver is installed or when the **Software\\Microsoft\\WBEM\\WDMProvider** registry key value **ProcessStrandedClasses** is set to **TRUE**.</span></span> <span data-ttu-id="734fb-134">Si se establece este valor en **true** , se ralentiza el rendimiento de inicio de WMI debido a la operación de limpieza.</span><span class="sxs-lookup"><span data-stu-id="734fb-134">Setting this value to **TRUE** slows WMI startup performance because of the cleanup operation.</span></span> <span data-ttu-id="734fb-135">El valor predeterminado es **FALSE**.</span><span class="sxs-lookup"><span data-stu-id="734fb-135">The default value is **FALSE**.</span></span> <span data-ttu-id="734fb-136">El proveedor de WDM solo comprueba este valor del registro cuando \\ se abre por primera vez el espacio de nombres "root WMI".</span><span class="sxs-lookup"><span data-stu-id="734fb-136">The WDM provider only checks this registry value when the "Root\\Wmi" namespace is opened for the first time.</span></span>

<span data-ttu-id="734fb-137">Si se realizan cambios de seguridad en un controlador de dispositivo WDM, los cambios no entrarán en vigor hasta que el proveedor de WDM se descargue y se vuelva a cargar.</span><span class="sxs-lookup"><span data-stu-id="734fb-137">If security changes are made to a WDM device driver, the changes will not go into effect until the WDM provider is unloaded and reloaded.</span></span> <span data-ttu-id="734fb-138">El servicio de administración de Windows debe detenerse y reiniciarse para lograrlo.</span><span class="sxs-lookup"><span data-stu-id="734fb-138">The Windows Management service must be stopped and restarted to accomplish this.</span></span>

## <a name="related-topics"></a><span data-ttu-id="734fb-139">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="734fb-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="734fb-140">Usar WMI</span><span class="sxs-lookup"><span data-stu-id="734fb-140">Using WMI</span></span>](using-wmi.md)
</dt> </dl>

 

 
