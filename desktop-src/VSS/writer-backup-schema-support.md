---
description: Para implementar completamente una copia de seguridad, es necesario participar en los escritores del sistema.
ms.assetid: ea504f8e-26d9-499e-b3e9-03515b480a75
title: Compatibilidad con el esquema de copia de seguridad del escritor
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 593df12f552f206d5d0eedbf8d021b69ef955c6d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104275421"
---
# <a name="writer-backup-schema-support"></a><span data-ttu-id="2b4f9-103">Compatibilidad con el esquema de copia de seguridad del escritor</span><span class="sxs-lookup"><span data-stu-id="2b4f9-103">Writer Backup Schema Support</span></span>

<span data-ttu-id="2b4f9-104">Para implementar completamente una copia de seguridad, es necesario participar en los escritores del sistema.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-104">To fully implement a backup requires participation of the system's writers.</span></span> <span data-ttu-id="2b4f9-105">Los distintos tipos de copias de seguridad admitidas se conocen como esquemas y se indican mediante una máscara de bits (o OR bit a bit) de los miembros de la enumeración de [**\_ \_ esquema de copia de seguridad de VSS**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema) .</span><span class="sxs-lookup"><span data-stu-id="2b4f9-105">Different types of supported backups are referred to as schemas and are indicated by a bitmask (or bitwise OR) of members of the [**VSS\_BACKUP\_SCHEMA**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema) enumeration.</span></span> <span data-ttu-id="2b4f9-106">Los esquemas válidos que se admiten actualmente son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="2b4f9-106">The currently supported valid schemas include the following:</span></span>

-   <span data-ttu-id="2b4f9-107">Esquema predeterminado: completo (VSS \_ BS sin \_ definir): indica que un escritor admite una copia de seguridad en la que se realizará la copia de seguridad de todos los archivos, independientemente de la fecha de la última copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-107">Default Schema: Full (VSS\_BS\_UNDEFINED)—indicates that a writer supports a backup where all files will be backed up regardless of their last backup date.</span></span> <span data-ttu-id="2b4f9-108">El solicitante puede actualizar el historial de copia de seguridad de cada archivo, y los escritores que admiten el \_ \_ valor de enumeración marca de tiempo de VSS BS, almacenarán una marca de tiempo actualizada con el solicitante.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-108">The backup history of each file can be updated by the requester, and writers supporting the VSS\_BS\_TIMESTAMPED enumeration value, it will store an updated time stamp with the requester.</span></span> <span data-ttu-id="2b4f9-109">Este esquema de copia de seguridad se puede usar como base de una copia de seguridad incremental o diferencial.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-109">This backup scheme can be used as the basis of an incremental or differential backup.</span></span>

    <span data-ttu-id="2b4f9-110">La restauración de una copia de seguridad completa requiere una sola imagen de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-110">Restoring a full backup requires only a single backup image.</span></span>

-   <span data-ttu-id="2b4f9-111">Copia de seguridad ( \_ copia \_ de VSS BS): al \_ igual \_ que el esquema de copia de seguridad completa de VSS BS, indica que un escritor admite una copia de seguridad en la que se realizará la copia de seguridad de todos los archivos, independientemente de su fecha de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-111">Copy Backup (VSS\_BS\_COPY)—like the VSS\_BS\_FULL backup schema, indicates that a writer supports a backup where all files will be backed up regardless of their last backup date.</span></span> <span data-ttu-id="2b4f9-112">No obstante, el historial de copia de seguridad de cada archivo no se actualizará mediante el solicitante o el escritor, y este tipo de copia de seguridad no se puede usar como base de una copia de seguridad incremental o diferencial.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-112">However, the backup history of each file will not be updated by either requester or writer, and this sort of backup cannot be used as the basis of an incremental or differential backup.</span></span>
-   <span data-ttu-id="2b4f9-113">Archivo de registro ( \_ \_ registro de VSS BS): solo se realizará una copia de seguridad de los archivos de registro del escritor.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-113">Log File (VSS\_BS\_LOG)—only a writer's log files are to be backed up.</span></span> <span data-ttu-id="2b4f9-114">Esto requiere que un escritor haya agregado al menos un archivo al menos a un componente mediante el método [**IVssCreateWriterMetadata:: AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) .</span><span class="sxs-lookup"><span data-stu-id="2b4f9-114">This requires a writer to have added at least one file to at least one component using the [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) method.</span></span> <span data-ttu-id="2b4f9-115">Este tipo de copia de seguridad es específico de VSS.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-115">This backup type is specific to VSS.</span></span>
-   <span data-ttu-id="2b4f9-116">Ubicaciones de restauración personalizadas (VSS \_ BS \_ Writer \_ es compatible con el \_ nuevo \_ destino): indica la compatibilidad del escritor con un solicitante que cambia, en el momento de la restauración, donde se restauran sus archivos.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-116">Custom Restore Locations (VSS\_BS\_WRITER\_SUPPORTS\_NEW\_TARGET)—indicates writer support for a requester changing, at restore time, where its files are restored.</span></span> <span data-ttu-id="2b4f9-117">Esto significa que se ha codificado un escritor para comprobar tal reubicación (mediante [**IVssComponent:: GetNewTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtarget)) y tiene la capacidad para trabajar con archivos reubicados.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-117">This means that a writer has been coded to check for such relocation (using [**IVssComponent::GetNewTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtarget)), and has the capacity for working with relocated files.</span></span>
-   <span data-ttu-id="2b4f9-118">Restore with Move (VSS \_ BS \_ Writer \_ admite \_ restore \_ with \_ Move): indica que el escritor admite la ejecución de varias instancias del escritor con el mismo identificador de clase y que admite un solicitante que mueve un componente a una instancia de escritor diferente en el momento de la restauración.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-118">Restore with Move (VSS\_BS\_WRITER\_SUPPORTS\_RESTORE\_WITH\_MOVE)—indicates that the writer supports running multiple writer instances with the same class ID, and it supports a requester moving a component to a different writer instance at restore time.</span></span> <span data-ttu-id="2b4f9-119">La instancia del escritor se especifica mediante un nombre de instancia de escritor persistente que se pasó como el parámetro *wszWriterInstanceName* al método [**CVssWriter:: Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize) .</span><span class="sxs-lookup"><span data-stu-id="2b4f9-119">The writer instance is specified by using a persistent writer instance name that was passed as the *wszWriterInstanceName* parameter to the [**CVssWriter::Initialize**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-initialize) method.</span></span> <span data-ttu-id="2b4f9-120">Un solicitante puede obtener el nombre de instancia del escritor mediante [**IVssExamineWriterMetadataEx:: GetIdentityEx**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadataex-getidentityex) y trasladar los componentes durante la restauración con [**IVssBackupComponentsEx:: SetSelectedForRestoreEx**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex-setselectedforrestoreex).</span><span class="sxs-lookup"><span data-stu-id="2b4f9-120">A requester can obtain the writer instance name using [**IVssExamineWriterMetadataEx::GetIdentityEx**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadataex-getidentityex) and move components during restore using [**IVssBackupComponentsEx::SetSelectedForRestoreEx**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex-setselectedforrestoreex).</span></span>

    <span data-ttu-id="2b4f9-121">**Windows Server 2003 y Windows XP:** Este valor no se admite hasta Windows Server 2003 con Service Pack 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="2b4f9-121">**Windows Server 2003 and Windows XP:** This value is not supported until Windows Server 2003 with Service Pack 1 (SP1).</span></span>

-   <span data-ttu-id="2b4f9-122">Incremental (VSS \_ BS \_ incremental): indica que el escritor usa la API de VSS para ayudar al solicitante, lo que garantiza que solo los archivos que se han cambiado o agregado desde la última copia de seguridad completa o incremental se copiarán en un medio de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-122">Incremental (VSS\_BS\_INCREMENTAL)—indicates that the writer uses the VSS API to help the requester, ensuring that only files that have been changed or added since the last full or incremental backup are to be copied to a storage medium.</span></span>

    <span data-ttu-id="2b4f9-123">La restauración de una copia de seguridad incremental requiere la imagen de copia de seguridad original y todas las imágenes de copia de seguridad incremental realizadas desde la copia de seguridad inicial.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-123">Restoring an incremental backup requires the original backup image and all incremental backup images made since the initial backup.</span></span>

-   <span data-ttu-id="2b4f9-124">Diferencial (VSS \_ BS \_ diferencial): indica que el escritor usa la API de VSS para ayudar al solicitante a asegurarse de que solo los archivos que se han cambiado o agregado desde la última copia de seguridad completa se van a copiar en un medio de almacenamiento; se omite toda la información de copia de seguridad intermedia.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-124">Differential (VSS\_BS\_DIFFERENTIAL)—indicates that the writer uses the VSS API to help the requester ensure that only files that have been changed or added since the last full backup are to be copied to a storage medium; all intermediate backup information is ignored.</span></span>

    <span data-ttu-id="2b4f9-125">La restauración de una copia de seguridad diferencial requiere la imagen de copia de seguridad original y la imagen de copia de seguridad diferencial más reciente realizada desde la última copia de seguridad completa.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-125">Restoring a differential backup requires the original backup image and the most recent differential backup image made since the last full backup.</span></span>

-   <span data-ttu-id="2b4f9-126">Incremental/diferencial: compatibilidad con la marca de tiempo (VSS \_ BS \_ timestamp): indica que un escritor admite el uso del mecanismo de marca de tiempo de VSS para incluir archivos en operaciones incrementales o diferenciales.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-126">Incremental/Differential: Time Stamping Support (VSS\_BS\_TIMESTAMPED)—indicates that a writer supports using the VSS time-stamp mechanism to include files in incremental or differential operations.</span></span> <span data-ttu-id="2b4f9-127">En la copia de seguridad, el escritor debe almacenar el sello de la copia [*de seguridad del conjunto de archivos*](vssgloss-f.md) con el método [**IVssComponent:: SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) y, en la restauración, recuperarlo con [**IVssComponent:: GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="2b4f9-127">At backup, the writer must store a [*file set's*](vssgloss-f.md) backup stamp with the [**IVssComponent::SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) method, and at restore retrieve it with [**IVssComponent::GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span></span>
-   <span data-ttu-id="2b4f9-128">Incremental/diferencial: hora de la última modificación (compatibilidad de VSS \_ BS \_ última \_ modificación): indica que al implementar copias de seguridad incrementales o diferenciales con archivos diferenciados, un escritor puede proporcionar información de hora de última modificación de forma independiente.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-128">Incremental/Differential: Time of Last Modification Support (VSS\_BS\_LAST\_MODIFY)—indicates that when implementing incremental or differential backups with differenced files, a writer can provide last modification time information independently.</span></span> <span data-ttu-id="2b4f9-129">Esta información se puede proporcionar a un solicitante a través del método [**IVssComponent:: AddDifferencedFilesByLastModifyTime**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddifferencedfilesbylastmodifytime) .</span><span class="sxs-lookup"><span data-stu-id="2b4f9-129">This information can be provided to a requester via the [**IVssComponent::AddDifferencedFilesByLastModifyTime**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddifferencedfilesbylastmodifytime) method.</span></span>
-   <span data-ttu-id="2b4f9-130">Incremental/diferencial: limitación de compatibilidad ( \_ de VSS BS \_ exclusivo \_ incremental \_ diferencial): indica la compatibilidad del escritor de esquemas de copia de seguridad diferenciales o incrementales, pero solo de forma exclusiva: por ejemplo, no se puede seguir una copia de seguridad incremental con una copia de seguridad diferencial.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-130">Incremental/Differential: Support Limitation (VSS\_BS\_EXCLUSIVE\_INCREMENTAL\_DIFFERENTIAL)—indicates writer support of both differential or increment backup schemas, but only exclusively: for example, you cannot follow an incremental backup with a differential backup.</span></span>
-   <span data-ttu-id="2b4f9-131">Estado del sistema independiente (VSS \_ BS \_ independiente \_ del sistema \_ ): indica que el escritor admite la copia de seguridad de los datos que forman parte del estado del sistema, pero también se puede realizar una copia de seguridad del estado del sistema de forma independiente.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-131">Independent System State (VSS\_BS\_INDEPENDENT\_SYSTEM\_STATE)—indicates that the writer supports backing up data that is part of the system state, but that can also be backed up independently of the system state.</span></span>

    <span data-ttu-id="2b4f9-132">**Windows Server 2003 y Windows XP:** Este valor no se admite hasta Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-132">**Windows Server 2003 and Windows XP:** This value is not supported until Windows Vista.</span></span>

-   <span data-ttu-id="2b4f9-133">Restauración de Roll-Forward ( \_ \_ restauración con puesta al día de VSS BS \_ ): indica que el escritor admite un solicitante que establezca un punto de restauración de puesta al día mediante [**IVssBackupComponentsEx2:: SetRollForward**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setrollforward).</span><span class="sxs-lookup"><span data-stu-id="2b4f9-133">Roll-Forward Restore (VSS\_BS\_ROLLFORWARD\_RESTORE)—indicates that the writer supports a requester setting a roll-forward restore point using [**IVssBackupComponentsEx2::SetRollForward**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setrollforward).</span></span>

    <span data-ttu-id="2b4f9-134">**Windows Server 2003 y Windows XP:** Este valor no se admite hasta Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-134">**Windows Server 2003 and Windows XP:** This value is not supported until Windows Vista.</span></span>

-   <span data-ttu-id="2b4f9-135">Restore Rename (VSS \_ BS \_ restore \_ Rename): indica que el escritor es compatible con un solicitante que establezca un nombre de restauración mediante [**IVssBackupComponentsEx2:: SetRestoreName**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setrestorename).</span><span class="sxs-lookup"><span data-stu-id="2b4f9-135">Restore Rename (VSS\_BS\_RESTORE\_RENAME)—indicates that the writer supports a requester setting a restore name using [**IVssBackupComponentsEx2::SetRestoreName**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setrestorename).</span></span>

    <span data-ttu-id="2b4f9-136">**Windows Server 2003 y Windows XP:** Este valor no se admite hasta Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="2b4f9-136">**Windows Server 2003 and Windows XP:** This value is not supported until Windows Vista.</span></span>

-   <span data-ttu-id="2b4f9-137">Restauración autoritativa \_ ( \_ restauración autoritativa de VSS BS \_ ): indica que el escritor admite una restauración autoritativa del solicitante mediante [**IVssBackupComponentsEx2:: SetAuthoritativeRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setauthoritativerestore).</span><span class="sxs-lookup"><span data-stu-id="2b4f9-137">Authoritative Restore (VSS\_BS\_AUTHORITATIVE\_RESTORE)—indicates that the writer supports a requester setting authoritative restore using [**IVssBackupComponentsEx2::SetAuthoritativeRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponentsex2-setauthoritativerestore).</span></span>

<span data-ttu-id="2b4f9-138">Los escritores establecen sus esquemas mediante el método [**IVssCreateWriterMetadata:: SetBackupSchema**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setbackupschema) y un solicitante obtiene el esquema de cada escritor llamando a [**IVssExamineWriterMetadata:: GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span><span class="sxs-lookup"><span data-stu-id="2b4f9-138">Writers set their schemas using the [**IVssCreateWriterMetadata::SetBackupSchema**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setbackupschema) method, and a requester obtains each writer's schema by calling [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span>

 

 



