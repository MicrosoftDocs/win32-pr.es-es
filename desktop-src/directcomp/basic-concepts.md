---
title: Conceptos básicos (DirectComposition)
description: En este tema se proporciona información general sobre los conceptos básicos de Microsoft DirectComposition.
ms.assetid: F442BDCA-C913-4438-BFFA-D3F28B68EE85
keywords:
- Conceptos de DirectComposition
- Conceptos básicos de DirectComposition
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0550dc12cb0dcc5262701658d8e3883ee1ce8d82
ms.sourcegitcommit: 73417d55867c804274a55abe5ca71bcba7006119
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/20/2020
ms.locfileid: "104570347"
---
# <a name="basic-concepts"></a><span data-ttu-id="bcb91-105">Conceptos básicos</span><span class="sxs-lookup"><span data-stu-id="bcb91-105">Basic concepts</span></span>

> [!NOTE]
> <span data-ttu-id="bcb91-106">En el caso de las aplicaciones de Windows 10, se recomienda usar las API de Windows. UI. Composition en lugar de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="bcb91-106">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="bcb91-107">Para obtener más información, consulte [modernice su aplicación de escritorio con el nivel de objetos visuales](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="bcb91-107">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="bcb91-108">En este tema se proporciona información general sobre los conceptos básicos de Microsoft DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="bcb91-108">This topic provides an overview of the basic concepts of Microsoft DirectComposition.</span></span> <span data-ttu-id="bcb91-109">Contiene las secciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="bcb91-109">It contains the following sections:</span></span>

-   [<span data-ttu-id="bcb91-110">Composición</span><span class="sxs-lookup"><span data-stu-id="bcb91-110">Composition</span></span>](#composition-target-window)
-   [<span data-ttu-id="bcb91-111">Objetos visuales</span><span class="sxs-lookup"><span data-stu-id="bcb91-111">Visuals</span></span>](#visuals)
    -   [<span data-ttu-id="bcb91-112">Árbol visual</span><span class="sxs-lookup"><span data-stu-id="bcb91-112">Visual tree</span></span>](#visual-tree)
    -   [<span data-ttu-id="bcb91-113">Propiedades de un objeto visual</span><span class="sxs-lookup"><span data-stu-id="bcb91-113">Properties of a visual object</span></span>](#properties-of-a-visual-object)
-   [<span data-ttu-id="bcb91-114">Objeto de dispositivo</span><span class="sxs-lookup"><span data-stu-id="bcb91-114">Device object</span></span>](#device-object)
-   [<span data-ttu-id="bcb91-115">Ventana de destino de composición</span><span class="sxs-lookup"><span data-stu-id="bcb91-115">Composition target window</span></span>](#composition-target-window)
-   [<span data-ttu-id="bcb91-116">Composición transaccional</span><span class="sxs-lookup"><span data-stu-id="bcb91-116">Transactional composition</span></span>](#transactional-composition)
    -   [<span data-ttu-id="bcb91-117">Procesamiento por lotes</span><span class="sxs-lookup"><span data-stu-id="bcb91-117">Batching</span></span>](#batching)
    -   [<span data-ttu-id="bcb91-118">Sincronización</span><span class="sxs-lookup"><span data-stu-id="bcb91-118">Synchronization</span></span>](#synchronization)
    -   [<span data-ttu-id="bcb91-119">Árboles visuales de dispositivos cruzados</span><span class="sxs-lookup"><span data-stu-id="bcb91-119">Cross-device visual trees</span></span>](#cross-device-visual-trees)
-   [<span data-ttu-id="bcb91-120">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="bcb91-120">Related topics</span></span>](#related-topics)

## <a name="composition"></a><span data-ttu-id="bcb91-121">Composición</span><span class="sxs-lookup"><span data-stu-id="bcb91-121">Composition</span></span>

<span data-ttu-id="bcb91-122">DirectComposition define una *composición* como una colección de mapas de bits que se combinan y manipulan aplicando varias transformaciones, efectos y animaciones para generar un resultado visual en una interfaz de usuario de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="bcb91-122">DirectComposition defines a *composition* as a collection of bitmaps that are combined and manipulated by applying various transforms, effects, and animations to produce a visual result in an application UI.</span></span> <span data-ttu-id="bcb91-123">DirectComposition funciona solo con contenido de mapa de bits; no admite vectores o texto.</span><span class="sxs-lookup"><span data-stu-id="bcb91-123">DirectComposition works with bitmap content only; it does not support vectors or text.</span></span> <span data-ttu-id="bcb91-124">DirectComposition no proporciona contenido de mapa de bits.</span><span class="sxs-lookup"><span data-stu-id="bcb91-124">DirectComposition does not provide bitmap content.</span></span> <span data-ttu-id="bcb91-125">En su lugar, proporciona interfaces en las que los usuarios pueden dibujar con D2D, DXGI o cargar su propio contenido de textura.</span><span class="sxs-lookup"><span data-stu-id="bcb91-125">Instead it provides interfaces in which users can draw with D2D, DXGI, or upload their own texture content.</span></span>

<span data-ttu-id="bcb91-126">Una aplicación DirectComposition crea dos conjuntos de objetos para crear una escena: mapas de bits que se componen juntos y objetos visuales que definen las relaciones espaciales entre los mapas de bits.</span><span class="sxs-lookup"><span data-stu-id="bcb91-126">A DirectComposition application creates two sets of objects to compose a scene: bitmaps that are composed together, and visuals that define the spatial relationships among the bitmaps.</span></span> <span data-ttu-id="bcb91-127">Para obtener más información sobre los objetos de mapa de bits admitidos por DirectComposition, vea [objetos Bitmap](bitmap-surfaces.md).</span><span class="sxs-lookup"><span data-stu-id="bcb91-127">For more information about the bitmap objects supported by DirectComposition, see [Bitmap objects](bitmap-surfaces.md).</span></span>

## <a name="visuals"></a><span data-ttu-id="bcb91-128">Objetos visuales</span><span class="sxs-lookup"><span data-stu-id="bcb91-128">Visuals</span></span>

<span data-ttu-id="bcb91-129">Los objetos *visuales* (u *objetos visuales*) son los elementos fundamentales de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="bcb91-129">*Visuals* (or *visual objects*) are the fundamental elements of DirectComposition.</span></span> <span data-ttu-id="bcb91-130">Son los bloques de creación básicos que se usan para crear composiciones y animaciones en la interfaz de usuario de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="bcb91-130">They are the basic building blocks that you use to create compositions and animations in your application UI.</span></span>

<span data-ttu-id="bcb91-131">En términos de programación, un objeto visual es un objeto que tiene un conjunto de propiedades y expone una interfaz que se utiliza para establecer el valor de las propiedades.</span><span class="sxs-lookup"><span data-stu-id="bcb91-131">In programming terms, a visual is an object that has a set of properties, and exposes an interface that you use to set the value of the properties.</span></span> <span data-ttu-id="bcb91-132">La propiedad de contenido de un visual asocia un mapa de bits determinado al visual, mientras que otras propiedades controlan el modo en que DirectComposition coloca y manipula el visual tal como se representa en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="bcb91-132">A visual's Content property associates a particular bitmap with the visual, while other properties control how DirectComposition positions and manipulates the visual as it is rendered to the screen.</span></span>

<span data-ttu-id="bcb91-133">Para obtener más información, vea [propiedades de un visual](#properties-of-a-visual-object).</span><span class="sxs-lookup"><span data-stu-id="bcb91-133">For more information, see [Properties of a Visual](#properties-of-a-visual-object).</span></span>

### <a name="visual-tree"></a><span data-ttu-id="bcb91-134">Árbol visual</span><span class="sxs-lookup"><span data-stu-id="bcb91-134">Visual tree</span></span>

<span data-ttu-id="bcb91-135">DirectComposition crea una composición a partir de una colección jerárquica de objetos visuales denominada *árbol visual*.</span><span class="sxs-lookup"><span data-stu-id="bcb91-135">DirectComposition creates a composition from a hierarchical collection of visual objects called a *visual tree*.</span></span> <span data-ttu-id="bcb91-136">El objeto visual en la raíz de un árbol se denomina *objeto visual raíz* y puede tener uno o más *objetos visuales secundarios* asociados.</span><span class="sxs-lookup"><span data-stu-id="bcb91-136">The visual at the root of a tree is called the *root visual* and it can have one or more *child visuals* associated with it.</span></span> <span data-ttu-id="bcb91-137">Un elemento visual secundario puede tener uno o más objetos visuales secundarios propios.</span><span class="sxs-lookup"><span data-stu-id="bcb91-137">A child visual can have one or more child visuals of its own.</span></span> <span data-ttu-id="bcb91-138">Cualquier objeto visual con objetos visuales secundarios asociados se denomina objeto *visual primario* y todos los objetos visuales secundarios que comparten el mismo elemento primario se denominan *objetos visuales relacionados*.</span><span class="sxs-lookup"><span data-stu-id="bcb91-138">Any visual that has associated child visuals is called a *parent visual*, and all child visuals that share the same parent are called *sibling visuals*.</span></span> <span data-ttu-id="bcb91-139">Un elemento visual determinado junto con todos sus objetos visuales secundarios y descendientes se denomina *subárbol visual*.</span><span class="sxs-lookup"><span data-stu-id="bcb91-139">A particular visual along with all its child and descendent visuals is called a *visual subtree*.</span></span>

<span data-ttu-id="bcb91-140">La ubicación de un objeto visual en el árbol ayuda a determinar la posición de la pantalla y el orden z en relación con los demás objetos visuales de la composición.</span><span class="sxs-lookup"><span data-stu-id="bcb91-140">A visual's location in the tree helps determine its screen position and z-order relative to the other visuals in the composition.</span></span> <span data-ttu-id="bcb91-141">El visual raíz se coloca en relación con la esquina superior izquierda del área cliente de la ventana de destino donde se representa la composición.</span><span class="sxs-lookup"><span data-stu-id="bcb91-141">The root visual is positioned relative to the upper-left corner of the client area of the target window where the composition is rendered.</span></span> <span data-ttu-id="bcb91-142">Todos los objetos visuales secundarios se colocan en relación con la esquina superior izquierda de su objeto visual primario (o el objeto visual especificado por la propiedad TransformParent) y siempre aparecen delante de su elemento primario en el orden z.</span><span class="sxs-lookup"><span data-stu-id="bcb91-142">All child visuals are positioned relative to the upper-left corner of their parent visual (or the visual specified by the TransformParent property), and always appear in front of their parent in the z-order.</span></span>

<span data-ttu-id="bcb91-143">En la ilustración siguiente se muestra una composición de objetos visuales y la estructura del árbol visual que se usa para generar la composición.</span><span class="sxs-lookup"><span data-stu-id="bcb91-143">The following illustration shows a composition of visuals and the structure of the visual tree used to produce the composition.</span></span> <span data-ttu-id="bcb91-144">Visual 1 es el objeto visual raíz y también es el elemento primario de los objetos visuales secundarios 2 y 3, que son objetos visuales relacionados.</span><span class="sxs-lookup"><span data-stu-id="bcb91-144">Visual 1 is the root visual and is also the parent of child Visuals 2 and 3, which are sibling visuals.</span></span> <span data-ttu-id="bcb91-145">Visual 3 tiene dos objetos visuales secundarios propios: objetos visuales 4 y 5.</span><span class="sxs-lookup"><span data-stu-id="bcb91-145">Visual 3 has two child visuals of its own, Visuals 4 and 5.</span></span> <span data-ttu-id="bcb91-146">Juntos, los objetos visuales 3 a 5 componen un subárbol visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-146">Together, Visuals 3 through 5 make up a visual subtree.</span></span>

![composición de objetos visuales y el árbol visual correspondiente](images/visuals-and-corresponding-tree.png)

<span data-ttu-id="bcb91-148">Un objeto visual primario mantiene una lista ordenada de sus objetos visuales secundarios.</span><span class="sxs-lookup"><span data-stu-id="bcb91-148">A parent visual maintains an ordered list of its child visuals.</span></span> <span data-ttu-id="bcb91-149">Cuando los objetos visuales del mismo nivel se colocan de forma que se superponen entre sí, DirectComposition establece el orden z de los elementos del mismo nivel en función del orden en que aparecen en la lista de elementos secundarios del objeto visual primario.</span><span class="sxs-lookup"><span data-stu-id="bcb91-149">When sibling visuals are positioned such that they overlap one another, DirectComposition sets the z-order of the siblings based on the order in which they appear in the parent visual's children list.</span></span> <span data-ttu-id="bcb91-150">Un elemento del mismo nivel que aparece más adelante en la lista se coloca delante de todos los elementos del mismo nivel que aparecen anteriormente en la lista.</span><span class="sxs-lookup"><span data-stu-id="bcb91-150">A sibling that appears later in the list is placed in front of all siblings that appear earlier in the list.</span></span> <span data-ttu-id="bcb91-151">En la ilustración siguiente se muestra el orden z de los objetos visuales secundarios superpuestos.</span><span class="sxs-lookup"><span data-stu-id="bcb91-151">The following illustration shows the z-order of overlapping child visuals.</span></span>

![el orden z de los objetos visuales secundarios superpuestos](images/overlapping-child-visuals.png)

### <a name="properties-of-a-visual-object"></a><span data-ttu-id="bcb91-153">Propiedades de un objeto visual</span><span class="sxs-lookup"><span data-stu-id="bcb91-153">Properties of a visual object</span></span>

<span data-ttu-id="bcb91-154">Un objeto visual expone un conjunto de propiedades que le permiten establecer el contenido del mapa de bits para el objeto visual y controlar el modo en que DirectComposition coloca y manipula el contenido visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-154">A visual object exposes a set of properties that enable you to set the bitmap content for the visual, and to control how DirectComposition positions and manipulates the visual content.</span></span> <span data-ttu-id="bcb91-155">En las secciones siguientes se describe cada propiedad en detalle.</span><span class="sxs-lookup"><span data-stu-id="bcb91-155">The following sections describe each property in detail.</span></span>

-   [<span data-ttu-id="bcb91-156">Propiedad de contenido</span><span class="sxs-lookup"><span data-stu-id="bcb91-156">Content property</span></span>](#content-property)
-   [<span data-ttu-id="bcb91-157">Propiedad clip</span><span class="sxs-lookup"><span data-stu-id="bcb91-157">Clip property</span></span>](#clip-property)
-   [<span data-ttu-id="bcb91-158">Propiedad BorderMode</span><span class="sxs-lookup"><span data-stu-id="bcb91-158">BorderMode property</span></span>](#bordermode-property)
-   [<span data-ttu-id="bcb91-159">Propiedad BitmapInterpolationMode</span><span class="sxs-lookup"><span data-stu-id="bcb91-159">BitmapInterpolationMode property</span></span>](#bitmapinterpolationmode-property)
-   [<span data-ttu-id="bcb91-160">Propiedad CompositeMode</span><span class="sxs-lookup"><span data-stu-id="bcb91-160">CompositeMode property</span></span>](#compositemode-property)
-   [<span data-ttu-id="bcb91-161">Propiedades OffsetX y OffsetY</span><span class="sxs-lookup"><span data-stu-id="bcb91-161">OffsetX and OffsetY properties</span></span>](#offsetx-and-offsety-properties)
-   [<span data-ttu-id="bcb91-162">Propiedad Effect</span><span class="sxs-lookup"><span data-stu-id="bcb91-162">Effect property</span></span>](#effect-property)
-   [<span data-ttu-id="bcb91-163">Transform (propiedad)</span><span class="sxs-lookup"><span data-stu-id="bcb91-163">Transform property</span></span>](#transform-property)
-   [<span data-ttu-id="bcb91-164">Propiedad TransformParent</span><span class="sxs-lookup"><span data-stu-id="bcb91-164">TransformParent property</span></span>](#transformparent-property)

### <a name="content-property"></a><span data-ttu-id="bcb91-165">Propiedad de contenido</span><span class="sxs-lookup"><span data-stu-id="bcb91-165">Content property</span></span>

<span data-ttu-id="bcb91-166">La propiedad de contenido de un objeto visual especifica el contenido del mapa de bits que está asociado con el objeto visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-166">A visual's Content property specifies the bitmap content that is associated with the visual.</span></span> <span data-ttu-id="bcb91-167">Este es el mapa de bits que DirectComposition usa al incluir el visual en una composición.</span><span class="sxs-lookup"><span data-stu-id="bcb91-167">This is the bitmap that DirectComposition uses when you include the visual in a composition.</span></span>

<span data-ttu-id="bcb91-168">Establezca la propiedad de contenido de un visual llamando al método [**IDCompositionVisual:: SetContent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) .</span><span class="sxs-lookup"><span data-stu-id="bcb91-168">You set the Content property of a visual by calling the [**IDCompositionVisual::SetContent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcontent) method.</span></span>

<span data-ttu-id="bcb91-169">Para obtener más información sobre los tipos de contenido de mapa de bits admitidos por DirectComposition, vea [objetos Bitmap](bitmap-surfaces.md).</span><span class="sxs-lookup"><span data-stu-id="bcb91-169">For more information about the types of bitmap content supported by DirectComposition, see [Bitmap objects](bitmap-surfaces.md).</span></span>

### <a name="clip-property"></a><span data-ttu-id="bcb91-170">Propiedad clip</span><span class="sxs-lookup"><span data-stu-id="bcb91-170">Clip property</span></span>

<span data-ttu-id="bcb91-171">La propiedad clip de un visual especifica un área rectangular denominada *región de recorte* (o *rectángulo* de recorte).</span><span class="sxs-lookup"><span data-stu-id="bcb91-171">The Clip property of a visual specifies a rectangular area called the *clipping region* (or *clip rectangle*).</span></span> <span data-ttu-id="bcb91-172">Cuando se representa un visual, solo se muestra la parte del objetos visuales que se encuentra dentro de la región de recorte, mientras que el contenido que se extiende fuera de la región de recorte se recorta (es decir, no se muestra).</span><span class="sxs-lookup"><span data-stu-id="bcb91-172">When a visual is rendered, only the portion of the visual that falls inside the clipping region is displayed, while any content that extends outside the clipping region is clipped (that is, not displayed).</span></span> <span data-ttu-id="bcb91-173">DirectComposition admite regiones de recorte con esquinas redondeadas o cuadradas.</span><span class="sxs-lookup"><span data-stu-id="bcb91-173">DirectComposition supports clipping regions that have rounded or squared corners.</span></span>

<span data-ttu-id="bcb91-174">Establezca la propiedad clip de un visual llamando al método [**IDCompositionVisual:: SetClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) .</span><span class="sxs-lookup"><span data-stu-id="bcb91-174">You set the Clip property of a visual by calling the [**IDCompositionVisual::SetClip**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setclip(constd2d_rect_f_)) method.</span></span>

<span data-ttu-id="bcb91-175">Para obtener más información, vea [recorte](clipping.md).</span><span class="sxs-lookup"><span data-stu-id="bcb91-175">For more information, see [Clipping](clipping.md).</span></span>

### <a name="bordermode-property"></a><span data-ttu-id="bcb91-176">Propiedad BorderMode</span><span class="sxs-lookup"><span data-stu-id="bcb91-176">BorderMode property</span></span>

<span data-ttu-id="bcb91-177">La propiedad BorderMode especifica cómo se componen los bordes de los mapas de bits y los clips asociados a este objeto visual, o con los objetos visuales del subárbol cuya raíz se encuentra en este objeto visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-177">The BorderMode property specifies how to compose the edges of bitmaps and clips associated with this visual, or with visuals in the subtree rooted at this visual.</span></span>

<span data-ttu-id="bcb91-178">El modo de borde afecta a la forma en que se componen los bordes de un mapa de bits cuando se transforma el mapa de bits de forma que los bordes no estén alineados por ejes con coordenadas de entero.</span><span class="sxs-lookup"><span data-stu-id="bcb91-178">The border mode affects how the edges of a bitmap are composed when the bitmap is transformed such that the edges are not axis-aligned with integer coordinates.</span></span> <span data-ttu-id="bcb91-179">También afecta al modo en que el contenido se recorta en las esquinas de un clip con esquinas redondeadas y en el borde de un clip que se transforma de modo que los bordes no estén alineados por ejes con coordenadas de entero.</span><span class="sxs-lookup"><span data-stu-id="bcb91-179">It also affects how content is clipped at the corners of a clip that has rounded corners, and at the edge of a clip that is transformed such that the edges are not axis-aligned with integer coordinates.</span></span>

<span data-ttu-id="bcb91-180">Para obtener más información, vea [**IDCompositionVisual:: SetBorderMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setbordermode).</span><span class="sxs-lookup"><span data-stu-id="bcb91-180">For more information, see [**IDCompositionVisual::SetBorderMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setbordermode).</span></span>

### <a name="bitmapinterpolationmode-property"></a><span data-ttu-id="bcb91-181">Propiedad BitmapInterpolationMode</span><span class="sxs-lookup"><span data-stu-id="bcb91-181">BitmapInterpolationMode property</span></span>

<span data-ttu-id="bcb91-182">La propiedad BitmapInterpolationMode indica a DirectComposition cómo crear un mapa de bits cuando se transforma de modo que no hay una correspondencia uno a uno entre los píxeles del mapa de bits y los píxeles de la pantalla.</span><span class="sxs-lookup"><span data-stu-id="bcb91-182">The BitmapInterpolationMode property tells DirectComposition how to compose a bitmap when it is transformed such that there is no one-to-one correspondence between pixels in the bitmap and pixels on the screen.</span></span>

<span data-ttu-id="bcb91-183">Establezca la propiedad BitmapInterpolationMode de un visual llamando al método [**IDCompositionVisual:: SetBitmapInterpolationMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setbitmapinterpolationmode) .</span><span class="sxs-lookup"><span data-stu-id="bcb91-183">You set the BitmapInterpolationMode property of a visual by calling the [**IDCompositionVisual::SetBitmapInterpolationMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setbitmapinterpolationmode) method.</span></span>

### <a name="compositemode-property"></a><span data-ttu-id="bcb91-184">Propiedad CompositeMode</span><span class="sxs-lookup"><span data-stu-id="bcb91-184">CompositeMode property</span></span>

<span data-ttu-id="bcb91-185">La propiedad CompositeMode indica a DirectComposition cómo combinar el contenido del mapa de bits de un visual con el destino de representación.</span><span class="sxs-lookup"><span data-stu-id="bcb91-185">The CompositeMode property tells DirectComposition how to blend the bitmap content of a visual with the render target.</span></span> <span data-ttu-id="bcb91-186">Para obtener una descripción de los modos compuestos compatibles, vea [**DCOMPOSITION \_ composite \_ mode**](/windows/desktop/api/DcompTypes/ne-dcomptypes-dcomposition_composite_mode).</span><span class="sxs-lookup"><span data-stu-id="bcb91-186">For a description of the supported composite modes, see [**DCOMPOSITION\_COMPOSITE\_MODE**](/windows/desktop/api/DcompTypes/ne-dcomptypes-dcomposition_composite_mode).</span></span>

<span data-ttu-id="bcb91-187">Establezca la propiedad CompositeMode de un visual llamando al método [**IDCompositionVisual:: SetCompositeMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcompositemode) .</span><span class="sxs-lookup"><span data-stu-id="bcb91-187">You set the CompositeMode property of a visual by calling the [**IDCompositionVisual::SetCompositeMode**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-setcompositemode) method.</span></span>

### <a name="offsetx-and-offsety-properties"></a><span data-ttu-id="bcb91-188">Propiedades OffsetX y OffsetY</span><span class="sxs-lookup"><span data-stu-id="bcb91-188">OffsetX and OffsetY properties</span></span>

<span data-ttu-id="bcb91-189">Las propiedades OffsetX y OffsetY indican a DirectComposition dónde colocar un visual horizontal y verticalmente.</span><span class="sxs-lookup"><span data-stu-id="bcb91-189">The OffsetX and OffsetY properties tell DirectComposition where to position a visual horizontally and vertically.</span></span> <span data-ttu-id="bcb91-190">Definen la posición fija bidimensional en la que se calculan todas las transformaciones y los efectos del visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-190">They define the two-dimensional fixed position from which all transforms and effects for the visual are calculated.</span></span>

<span data-ttu-id="bcb91-191">Para un visual raíz, las propiedades OffsetX y OffsetY definen las coordenadas x e y de un punto en relación con la esquina superior izquierda de la ventana que hospeda el visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-191">For a root visual, the OffsetX and OffsetY properties define the x-coordinate and y-coordinate of a point relative to the upper-left corner of the window that hosts the visual.</span></span> <span data-ttu-id="bcb91-192">En el caso de un objeto visual secundario, las coordenadas son relativas a la esquina superior izquierda del elemento primario o, si se especifica la [propiedad TransformParent](#transformparent-property) , la esquina superior izquierda del objeto visual especificado.</span><span class="sxs-lookup"><span data-stu-id="bcb91-192">For a child visual, the coordinates are relative to the upper-left corner of the parent or, if the [TransformParent property](#transformparent-property) is specified, the upper-left corner of the specified visual.</span></span> <span data-ttu-id="bcb91-193">Cuando se representa un visual, se coloca de forma que la esquina superior izquierda del visual coincida con las coordenadas especificadas.</span><span class="sxs-lookup"><span data-stu-id="bcb91-193">When a visual is rendered, it is positioned such that the visual's upper-left corner coincides with the specified coordinates.</span></span>

<span data-ttu-id="bcb91-194">Establezca las propiedades OffsetX y OffsetY de un visual llamando a los métodos [**IDCompositionVisual:: SetOffsetX**](/previous-versions/windows/desktop/legacy/hh449126(v=vs.85)) y [**SetOffsetY**](/previous-versions/windows/desktop/legacy/hh449131(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="bcb91-194">You set the OffsetX and OffsetY properties of a visual by calling the [**IDCompositionVisual::SetOffsetX**](/previous-versions/windows/desktop/legacy/hh449126(v=vs.85)) and [**SetOffsetY**](/previous-versions/windows/desktop/legacy/hh449131(v=vs.85)) methods.</span></span>

### <a name="effect-property"></a><span data-ttu-id="bcb91-195">Propiedad Effect</span><span class="sxs-lookup"><span data-stu-id="bcb91-195">Effect property</span></span>

<span data-ttu-id="bcb91-196">La propiedad efecto permite especificar un efecto, o un grupo de efectos, que modificará el modo en que se compone un visual y su subárbol.</span><span class="sxs-lookup"><span data-stu-id="bcb91-196">The Effect property lets you specify an effect, or group of effects, that will modify how a visual and its subtree is composed.</span></span> <span data-ttu-id="bcb91-197">Por ejemplo, puede especificar los efectos que controlan la opacidad de un control visual, combinar el visual con otro mapa de bits de varias maneras y aplicar transformaciones de perspectiva al visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-197">For example, you can specify effects that control the opacity of a visual, blend the visual with another bitmap in various ways, and apply perspective transforms to the visual.</span></span>

<span data-ttu-id="bcb91-198">Establezca la propiedad Effect de un visual llamando al método [**IDCompositionVisual:: SetEffect**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-seteffect) .</span><span class="sxs-lookup"><span data-stu-id="bcb91-198">You set the Effect property of a visual by calling the [**IDCompositionVisual::SetEffect**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-seteffect) method.</span></span>

<span data-ttu-id="bcb91-199">Para obtener más información, consulte [Effects](effects.md) (Efectos).</span><span class="sxs-lookup"><span data-stu-id="bcb91-199">For more information, see [Effects](effects.md).</span></span>

### <a name="transform-property"></a><span data-ttu-id="bcb91-200">Transform (propiedad)</span><span class="sxs-lookup"><span data-stu-id="bcb91-200">Transform property</span></span>

<span data-ttu-id="bcb91-201">La propiedad transform especifica una transformación bidimensional (2D), o un grupo de transformaciones 2D, para que DirectComposition realice en el visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-201">The Transform property specifies a two-dimensional (2D) transformation, or group of 2D transformations, for DirectComposition to perform on the visual.</span></span> <span data-ttu-id="bcb91-202">Una transformación (o transformación) es una operación que modifica el sistema de coordenadas de un objeto visual con respecto a su elemento primario, o relativo al objeto visual especificado por la [propiedad TransformParent](#transformparent-property).</span><span class="sxs-lookup"><span data-stu-id="bcb91-202">A transformation (or transform) is an operation that modifies the coordinate system of a visual relative to its parent, or relative to the visual specified by the [TransformParent property](#transformparent-property).</span></span> <span data-ttu-id="bcb91-203">Puede usar transformaciones para modificar la posición, el tamaño o la naturaleza de un objeto visual moviéndolo a otra ubicación (traslación), convirtiéndolo en un tamaño mayor o menor (escalado), convirtiéndolo (rotación), distorsionando su forma (sesgando), etc.</span><span class="sxs-lookup"><span data-stu-id="bcb91-203">You can use transforms to alter the position, size, or nature of a visual by moving it to another location (translation), making it larger or smaller (scaling), turning it (rotation), distorting its shape (skewing), and so on.</span></span>

<span data-ttu-id="bcb91-204">Establezca la propiedad transform de un visual llamando al método [**IDCompositionVisual:: SetTransform**](/previous-versions/windows/desktop/legacy/hh449178(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="bcb91-204">You set the Transform property of a visual by calling the [**IDCompositionVisual::SetTransform**](/previous-versions/windows/desktop/legacy/hh449178(v=vs.85)) method.</span></span>

<span data-ttu-id="bcb91-205">Para obtener más información, consulte [Transformaciones](transforms.md).</span><span class="sxs-lookup"><span data-stu-id="bcb91-205">For more information, see [Transforms](transforms.md).</span></span>

### <a name="transformparent-property"></a><span data-ttu-id="bcb91-206">Propiedad TransformParent</span><span class="sxs-lookup"><span data-stu-id="bcb91-206">TransformParent property</span></span>

<span data-ttu-id="bcb91-207">El sistema de coordenadas de un visual se modifica mediante las propiedades OffsetX, offsetY y transform.</span><span class="sxs-lookup"><span data-stu-id="bcb91-207">The coordinate system of a visual is modified by the OffsetX, OffsetY, and Transform properties.</span></span> <span data-ttu-id="bcb91-208">Normalmente, estas propiedades definen el sistema de coordenadas de un objeto visual con respecto a su elemento primario inmediato.</span><span class="sxs-lookup"><span data-stu-id="bcb91-208">Normally, these properties define the coordinate system of a visual relative to its immediate parent.</span></span> <span data-ttu-id="bcb91-209">Para usar un objeto visual distinto del elemento primario como base para el sistema de coordenadas de un objeto visual secundario, use la propiedad TransformParent para especificar un objeto visual diferente como "primario" para fines de transformación.</span><span class="sxs-lookup"><span data-stu-id="bcb91-209">To use some visual other than the parent as the basis for the coordinate system of a child visual, use the TransformParent property to specify a different visual as the "parent" for transform purposes.</span></span>

<span data-ttu-id="bcb91-210">Establezca la propiedad TransformParent de un visual llamando al método [**IDCompositionVisual:: SetTransformParent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-settransformparent) .</span><span class="sxs-lookup"><span data-stu-id="bcb91-210">You set the TransformParent property of a visual by calling the [**IDCompositionVisual::SetTransformParent**](/windows/win32/api/dcomp/nf-dcomp-idcompositionvisual-settransformparent) method.</span></span>

## <a name="device-object"></a><span data-ttu-id="bcb91-211">Objeto de dispositivo</span><span class="sxs-lookup"><span data-stu-id="bcb91-211">Device object</span></span>

<span data-ttu-id="bcb91-212">Para usar DirectComposition, debe crear y manipular una variedad de objetos del modelo de objetos componentes (COM).</span><span class="sxs-lookup"><span data-stu-id="bcb91-212">To use DirectComposition, you must create and manipulate a variety of Component Object Model (COM) objects.</span></span> <span data-ttu-id="bcb91-213">El primer objeto que necesita crear es el *objeto de dispositivo* DirectComposition porque sirve como generador para crear todos los demás objetos que se usan en una composición.</span><span class="sxs-lookup"><span data-stu-id="bcb91-213">The first object that you need to create is the DirectComposition *device object* because it serves as the factory for creating all other objects used in a composition.</span></span>

<span data-ttu-id="bcb91-214">Para crear un objeto de dispositivo, llame a la función [**DCompositionCreateDevice**](/windows/desktop/api/Dcomp/nf-dcomp-dcompositioncreatedevice) , que devuelve un puntero de la interfaz [**IDCompositionDevice**](/windows/win32/api/dcomp/nn-dcomp-idcompositiondevice) .</span><span class="sxs-lookup"><span data-stu-id="bcb91-214">You create a device object by calling the [**DCompositionCreateDevice**](/windows/desktop/api/Dcomp/nf-dcomp-dcompositioncreatedevice) function, which returns an [**IDCompositionDevice**](/windows/win32/api/dcomp/nn-dcomp-idcompositiondevice) interface pointer.</span></span> <span data-ttu-id="bcb91-215">Esta interfaz expone un conjunto de métodos que se usan para crear objetos visuales, objetos de clip, objetos de animación, objetos de transformación, objetos de efecto, etc.</span><span class="sxs-lookup"><span data-stu-id="bcb91-215">This interface exposes a set of methods that you use to create visual objects, clip objects, animation objects, transform objects, effect objects, and so on.</span></span>

<span data-ttu-id="bcb91-216">El objeto de dispositivo sirve otro propósito, además de ser un generador para crear otros objetos.</span><span class="sxs-lookup"><span data-stu-id="bcb91-216">The device object serves one other purpose besides being a factory for creating other objects.</span></span> <span data-ttu-id="bcb91-217">Expone un método denominado [**commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) que pasa un árbol visual a DirectComposition para su procesamiento.</span><span class="sxs-lookup"><span data-stu-id="bcb91-217">It exposes a method called [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) that passes a visual tree to DirectComposition for processing.</span></span> <span data-ttu-id="bcb91-218">Para obtener más información, vea [composición transaccional](#transactional-composition).</span><span class="sxs-lookup"><span data-stu-id="bcb91-218">For more information, see [Transactional Composition](#transactional-composition).</span></span>

<span data-ttu-id="bcb91-219">Recuerde que, aunque se pueden crear varias instancias del objeto de dispositivo en la aplicación, todos los objetos que se usan en una composición determinada deben ser creados por el mismo objeto de dispositivo, con una excepción: puede combinar objetos visuales de objetos de dispositivo diferentes en el mismo árbol visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-219">Remember that, while you can create multiple instances of the device object in your application, all of the objects that you use in a particular composition must be created by the same device object—with one exception: You can combine visual objects from different device objects in the same visual tree.</span></span> <span data-ttu-id="bcb91-220">Al hacerlo, DirectComposition trata el árbol visual como lo haría normalmente, salvo que los cambios en un objeto visual determinado en el árbol solo surten efecto cuando se llama al método [**commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) en el objeto de dispositivo que creó el objeto visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-220">When you do so, DirectComposition treats the visual tree as it normally would, except that changes to a particular visual object in the tree take effect only when the [**Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) method is called on the device object that created the visual object.</span></span>

<span data-ttu-id="bcb91-221">La capacidad de usar objetos visuales de distintos dispositivos en el mismo árbol visual permite que varios subprocesos creen y manipulen un único árbol visual manteniendo dos dispositivos independientes que se pueden usar para confirmar cambios de forma asincrónica.</span><span class="sxs-lookup"><span data-stu-id="bcb91-221">The ability to use visuals from different devices in the same visual tree enables multiple threads to create and manipulate a single visual tree while maintaining two independent devices that can be used to commit changes asynchronously.</span></span> <span data-ttu-id="bcb91-222">Para obtener más información, vea [árboles visuales de dispositivos cruzados](#cross-device-visual-trees).</span><span class="sxs-lookup"><span data-stu-id="bcb91-222">For more information, see [Cross-Device Visual Trees](#cross-device-visual-trees).</span></span>

## <a name="composition-target-window"></a><span data-ttu-id="bcb91-223">Ventana de destino de composición</span><span class="sxs-lookup"><span data-stu-id="bcb91-223">Composition target window</span></span>

<span data-ttu-id="bcb91-224">Un árbol visual debe estar enlazado a una ventana para que cualquiera de los objetos visuales del árbol se pueda mostrar en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="bcb91-224">A visual tree must be bound to a window before any of the tree's visuals can be displayed on the screen.</span></span> <span data-ttu-id="bcb91-225">La ventana, denominada *ventana de destino de composición*, puede ser una ventana de nivel superior o una ventana secundaria.</span><span class="sxs-lookup"><span data-stu-id="bcb91-225">The window, called the *composition target window*, can be a top-level window or a child window.</span></span> <span data-ttu-id="bcb91-226">Además, la ventana de destino de composición puede ser una ventana superpuesta. es decir, puede tener el estilo de ventana con [**\_ \_ capas de WS**](/windows/desktop/winmsg/extended-window-styles) .</span><span class="sxs-lookup"><span data-stu-id="bcb91-226">Also, the composition target window can be a layered window; that is, it can have the [**WS\_EX\_LAYERED**](/windows/desktop/winmsg/extended-window-styles) window style.</span></span>

<span data-ttu-id="bcb91-227">DirectComposition permite que una aplicación enlace un máximo de dos árboles visuales a cada ventana.</span><span class="sxs-lookup"><span data-stu-id="bcb91-227">DirectComposition allows an application to bind a maximum of two visual trees to each window.</span></span> <span data-ttu-id="bcb91-228">Los árboles visuales incluyen uno que se compone de la parte superior de la ventana, pero detrás de todas las ventanas secundarias de la ventana, y otro que se compone en la parte superior de la ventana y en la parte superior de las ventanas secundarias.</span><span class="sxs-lookup"><span data-stu-id="bcb91-228">The visual trees include one that is composed on top of the window itself, but behind all of the window’s child windows, and another that is composed on top of the window and on top of the child windows.</span></span> <span data-ttu-id="bcb91-229">En otras palabras, cada ventana tiene cuatro capas conceptuales y todas las capas se recortan en el área visible de la ventana de destino.</span><span class="sxs-lookup"><span data-stu-id="bcb91-229">In other words, each window has four conceptual layers, and all layers are clipped to the target window's visible region.</span></span> <span data-ttu-id="bcb91-230">En la ilustración siguiente se muestran los cuatro niveles conceptuales de una ventana.</span><span class="sxs-lookup"><span data-stu-id="bcb91-230">The following illustration shows the four conceptual layers of a window.</span></span>

![las capas conceptuales de una ventana](images/directcomposition-layers.png)

## <a name="transactional-composition"></a><span data-ttu-id="bcb91-232">Composición transaccional</span><span class="sxs-lookup"><span data-stu-id="bcb91-232">Transactional composition</span></span>

<span data-ttu-id="bcb91-233">DirectComposition usa un modelo transaccional en el que se crea un conjunto de cambios por lotes de un visual y, a continuación, se "confirma" el conjunto en DirectComposition para procesarlo todos a la vez.</span><span class="sxs-lookup"><span data-stu-id="bcb91-233">DirectComposition uses a transactional model where you create a batched set of changes to a visual and then "commit" the set to DirectComposition for processing all at once.</span></span> <span data-ttu-id="bcb91-234">Puede modificar el mismo objeto visual DirectComposition y confirmar los cambios tantas veces como desee.</span><span class="sxs-lookup"><span data-stu-id="bcb91-234">You can modify the same DirectComposition visual object and commit the changes any number of times.</span></span> <span data-ttu-id="bcb91-235">Cuando el Administrador de ventanas de escritorio (DWM) recoge lotes, recoge todos los lotes pendientes y los aplica al siguiente fotograma en el orden en el que se confirmaron.</span><span class="sxs-lookup"><span data-stu-id="bcb91-235">When the Desktop Window Manager (DWM) picks up batches, it picks up all pending batches and applies them to the next frame in the order they were committed.</span></span>

<span data-ttu-id="bcb91-236">Se garantiza que todos los cambios de una sola confirmación se aplicarán a un solo fotograma.</span><span class="sxs-lookup"><span data-stu-id="bcb91-236">All changes within a single commit are guaranteed to be applied to a single frame.</span></span> <span data-ttu-id="bcb91-237">Dado que DWM recopila lotes una vez por fotograma, puede modificar cualquier objeto concreto solo una vez por fotograma.</span><span class="sxs-lookup"><span data-stu-id="bcb91-237">Because DWM collects batches once per frame, you can modify any particular object only once per frame.</span></span> <span data-ttu-id="bcb91-238">Las confirmaciones posteriores que modifican objetos diferentes también se pueden aplicar al marco actual, pero DirectComposition no garantiza que los cambios se realicen en el mismo marco.</span><span class="sxs-lookup"><span data-stu-id="bcb91-238">Subsequent commits that modify different objects might also be applied to the current frame, but DirectComposition does not guarantee that the changes will occur in the same frame.</span></span>

<span data-ttu-id="bcb91-239">Los métodos [**IDCompositionSurface:: BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) y [**IDCompositionSurface:: EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) permiten sincronizar las actualizaciones de representación con las actualizaciones visuales.</span><span class="sxs-lookup"><span data-stu-id="bcb91-239">The [**IDCompositionSurface::BeginDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw) and [**IDCompositionSurface::EndDraw**](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw) methods let you synchronize rendering updates with visual updates.</span></span> <span data-ttu-id="bcb91-240">Por ejemplo, puede llamar a **IDCompositionSurface:: BeginDraw**, actualizar las propiedades OffsetX y clip de un visual, llamar a [**IDCompositionDevice:: commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit), dibujar contenido con Microsoft DirectX y, a continuación, llamar a **IDCompositionSurface:: EndDraw**.</span><span class="sxs-lookup"><span data-stu-id="bcb91-240">For example, you can call **IDCompositionSurface::BeginDraw**, update the OffsetX and Clip properties of a visual, call [**IDCompositionDevice::Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit), draw content with Microsoft DirectX, and then call **IDCompositionSurface::EndDraw**.</span></span> <span data-ttu-id="bcb91-241">En este caso, Microsoft DirectComposition garantiza que el contenido del mapa de bits y las propiedades visuales se actualicen al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="bcb91-241">In this case, Microsoft DirectComposition ensures that bitmap content and the visual properties are updated at the same time.</span></span>

### <a name="batching"></a><span data-ttu-id="bcb91-242">Procesamiento por lotes</span><span class="sxs-lookup"><span data-stu-id="bcb91-242">Batching</span></span>

<span data-ttu-id="bcb91-243">Puede confirmar varios cambios en el mismo visual o en varios cambios en objetos visuales diferentes en el mismo marco.</span><span class="sxs-lookup"><span data-stu-id="bcb91-243">You can commit multiple changes to the same visual, or multiple changes to different visuals, within the same frame.</span></span> <span data-ttu-id="bcb91-244">Al realizar varios cambios en el mismo visual dentro del mismo marco, tenga en cuenta los puntos siguientes:</span><span class="sxs-lookup"><span data-stu-id="bcb91-244">When making multiple changes to the same visual within the same frame, keep the following points in mind:</span></span>

-   <span data-ttu-id="bcb91-245">Si realiza varios cambios en la misma propiedad de un visual, solo se aplicará el último cambio.</span><span class="sxs-lookup"><span data-stu-id="bcb91-245">If you make multiple changes to the same property of a visual, only the last change is applied.</span></span> <span data-ttu-id="bcb91-246">Por ejemplo, si establece la opacidad en 0, entonces en 0,5 y, por último, en 1,0, solo se aplicará una opacidad de 1,0 al visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-246">For example, if you set the opacity to 0, then to 0.5, and finally to 1.0, only an opacity of 1.0 is applied to the visual.</span></span>
-   <span data-ttu-id="bcb91-247">Si cambia varias propiedades del mismo elemento visual, DirectComposition aplica los cambios primero al elemento visual y, a continuación, a los objetos visuales secundarios.</span><span class="sxs-lookup"><span data-stu-id="bcb91-247">If you change multiple properties of the same visual, DirectComposition applies the changes first to the visual and then to any child visuals.</span></span> <span data-ttu-id="bcb91-248">Las propiedades se aplican en el orden siguiente, independientemente del orden en que se especifiquen:</span><span class="sxs-lookup"><span data-stu-id="bcb91-248">The properties are applied in the following order regardless of the order in which you specify them:</span></span>

    1.  <span data-ttu-id="bcb91-249">Offset</span><span class="sxs-lookup"><span data-stu-id="bcb91-249">Offset</span></span>
    2.  <span data-ttu-id="bcb91-250">Transformación</span><span class="sxs-lookup"><span data-stu-id="bcb91-250">Transform</span></span>
    3.  <span data-ttu-id="bcb91-251">Recortar</span><span class="sxs-lookup"><span data-stu-id="bcb91-251">Clip</span></span>
    4.  <span data-ttu-id="bcb91-252">Efecto</span><span class="sxs-lookup"><span data-stu-id="bcb91-252">Effect</span></span>

    <span data-ttu-id="bcb91-253">En la ilustración siguiente se muestra el resultado de aplicar las cuatro propiedades a un visual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-253">The following illustration shows the result of applying all four properties to a visual.</span></span>

    ![resultado de aplicar las cuatro propiedades a un visual](images/order-of-properties.png)

    <span data-ttu-id="bcb91-255">Recuerde que todos los cambios se aplican al visual de una vez en el contexto del mismo marco.</span><span class="sxs-lookup"><span data-stu-id="bcb91-255">Remember that all changes are applied to the visual at once within the context of the same frame.</span></span> <span data-ttu-id="bcb91-256">Esto significa que, desde la perspectiva del usuario, los cambios en el visual se producen de forma instantánea.</span><span class="sxs-lookup"><span data-stu-id="bcb91-256">This means that, from the user's perspective, the changes to the visual occur instantaneously.</span></span>

-   <span data-ttu-id="bcb91-257">En el caso de la propiedad transform, puede usar [**IDCompositionDevice:: CreateTransformGroup**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtransformgroup) para crear un grupo de transformaciones que se aplicarán a un solo visual a la vez.</span><span class="sxs-lookup"><span data-stu-id="bcb91-257">For the Transform property, you can use [**IDCompositionDevice::CreateTransformGroup**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createtransformgroup) to create a group of transforms to apply to a visual all at once.</span></span> <span data-ttu-id="bcb91-258">DirectComposition aplica las transformaciones en el orden especificado.</span><span class="sxs-lookup"><span data-stu-id="bcb91-258">DirectComposition applies the transforms in the order that you specify.</span></span>
-   <span data-ttu-id="bcb91-259">En la propiedad efecto, puede usar [**IDCompositionEffectGroup**](/windows/win32/api/dcomp/nn-dcomp-idcompositioneffectgroup) para aplicar un grupo de efectos.</span><span class="sxs-lookup"><span data-stu-id="bcb91-259">For the Effect property, you can use [**IDCompositionEffectGroup**](/windows/win32/api/dcomp/nn-dcomp-idcompositioneffectgroup) to apply a group of effects.</span></span> <span data-ttu-id="bcb91-260">DirectComposition aplica los efectos en el orden que especifique.</span><span class="sxs-lookup"><span data-stu-id="bcb91-260">DirectComposition applies the effects in the order that you specify.</span></span> <span data-ttu-id="bcb91-261">Además, las transformaciones de perspectiva 3D producen una reducción del árbol visual una vez aplicadas todas las transformaciones 3D del visual actual.</span><span class="sxs-lookup"><span data-stu-id="bcb91-261">In addition, 3D perspective transformations result in flattening of the visual tree after all 3D transformations in the current visual have been applied.</span></span> <span data-ttu-id="bcb91-262">Esto ayuda a garantizar que el aspecto visual resultante sea lo más parecido posible a 3D.</span><span class="sxs-lookup"><span data-stu-id="bcb91-262">This helps ensure that the resulting visual looks as close to 3D as possible.</span></span>

### <a name="synchronization"></a><span data-ttu-id="bcb91-263">Synchronization</span><span class="sxs-lookup"><span data-stu-id="bcb91-263">Synchronization</span></span>

<span data-ttu-id="bcb91-264">La aplicación puede llamar a DirectComposition desde varios subprocesos al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="bcb91-264">Your application can call DirectComposition from multiple threads at the same time.</span></span> <span data-ttu-id="bcb91-265">Se garantiza el orden de ejecución de las llamadas secuenciales, pero no las llamadas simultáneas.</span><span class="sxs-lookup"><span data-stu-id="bcb91-265">The order of execution is guaranteed for sequential calls, but not for concurrent calls.</span></span> <span data-ttu-id="bcb91-266">Por ejemplo, si el subproceso A modifica un visual y el subproceso B confirma el lote al mismo tiempo, no se define si ese cambio visual se incluye en el lote confirmado o si inicia un lote nuevo.</span><span class="sxs-lookup"><span data-stu-id="bcb91-266">For example, if thread A modifies a visual and thread B commits the batch at the same time, it is not defined whether that visual change is included in the committed batch or whether it starts a new batch.</span></span> <span data-ttu-id="bcb91-267">Por otro lado, si la aplicación usa otros mecanismos de sincronización para asegurarse de que se llama a un método antes que el otro, DirectComposition respeta el orden de llamada y los procesa como si ambas llamadas se emitieron en ese orden desde un único subproceso.</span><span class="sxs-lookup"><span data-stu-id="bcb91-267">On the other hand, if your application uses other synchronization mechanisms to ensure that one method is called before the other, DirectComposition honors the call order and processes them as if both calls were issued in that order from a single thread.</span></span>

### <a name="cross-device-visual-trees"></a><span data-ttu-id="bcb91-268">Árboles visuales de dispositivos cruzados</span><span class="sxs-lookup"><span data-stu-id="bcb91-268">Cross-device visual trees</span></span>

<span data-ttu-id="bcb91-269">Los objetos DirectComposition no están enlazados a subprocesos; puede usar varios subprocesos para modificar el mismo conjunto de objetos.</span><span class="sxs-lookup"><span data-stu-id="bcb91-269">DirectComposition objects are not thread bound; you can use multiple threads to modify the same set of objects.</span></span> <span data-ttu-id="bcb91-270">Sin embargo, tenga en cuenta los siguientes problemas al compartir el mismo objeto de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="bcb91-270">However, be aware of the following issues when sharing the same device object.</span></span>

-   <span data-ttu-id="bcb91-271">Ambos subprocesos deben poder llamar a [**IDCompositionDevice:: commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span><span class="sxs-lookup"><span data-stu-id="bcb91-271">Both threads need to be able to call [**IDCompositionDevice::Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit).</span></span> <span data-ttu-id="bcb91-272">Si solo uno de los subprocesos llama a **IDCompositionDevice:: commit**, el otro subproceso no puede confirmar ninguno de sus cambios en DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="bcb91-272">If only one of the threads calls **IDCompositionDevice::Commit**, the other thread cannot commit any of its changes to DirectComposition.</span></span>
-   <span data-ttu-id="bcb91-273">El comportamiento transaccional podría perderse si un subproceso llama a [**IDCompositionDevice:: commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) mientras el otro subproceso sigue realizando cambios que están diseñados para formar parte de la misma transacción.</span><span class="sxs-lookup"><span data-stu-id="bcb91-273">Transactional behavior might be lost if one thread calls [**IDCompositionDevice::Commit**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit) while the other thread is still making changes that are intended to be part of the same transaction.</span></span>

<span data-ttu-id="bcb91-274">Si necesita confirmar varias transacciones simultáneas en DirectComposition, debe usar varios objetos de dispositivo, posiblemente de varios subprocesos.</span><span class="sxs-lookup"><span data-stu-id="bcb91-274">If you need to commit multiple simultaneous transactions to DirectComposition, you must use multiple device objects, possibly from multiple threads.</span></span> <span data-ttu-id="bcb91-275">En este escenario, los dos objetos de dispositivo comparten el mismo árbol visual y cada objeto de dispositivo confirma sus propias transacciones.</span><span class="sxs-lookup"><span data-stu-id="bcb91-275">In this scenario, the same visual tree is shared by both device objects, and each device object commits its own transactions.</span></span>

<span data-ttu-id="bcb91-276">En la ilustración siguiente se muestra un árbol visual compartido por dos objetos de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="bcb91-276">The following illustration shows a visual tree that is shared by two device objects.</span></span> <span data-ttu-id="bcb91-277">Los objetos visuales 1, 2, 4 y 5 son propiedad de un dispositivo o el otro, pero visual 3 se comparte con ambos dispositivos y, por tanto, se pueden usar para conectar dos subárboles a un único árbol visual de mayor tamaño.</span><span class="sxs-lookup"><span data-stu-id="bcb91-277">Visuals 1, 2, 4 and 5 are owned by one device or the other, but visual 3 is shared by both devices, and can therefore be used to connect two sub-trees into a single, larger visual tree.</span></span> <span data-ttu-id="bcb91-278">Compartir el árbol visual permite manipular los dos dispositivos de dos subprocesos diferentes de forma asincrónica.</span><span class="sxs-lookup"><span data-stu-id="bcb91-278">Sharing the visual tree allows the two devices to be manipulated from two different threads asynchronously.</span></span>

![árbol visual compartido por dos dispositivos](images/shared-visual-tree-1.png)

<span data-ttu-id="bcb91-280">Para ilustrar la utilidad de compartir un árbol visual entre dos dispositivos, considere una arquitectura que habilita la entrada táctil de baja latencia.</span><span class="sxs-lookup"><span data-stu-id="bcb91-280">To illustrate the usefulness of sharing a visual tree between two devices, consider an architecture that enables low-latency touch input.</span></span> <span data-ttu-id="bcb91-281">La arquitectura podría usar dos subprocesos, uno que controla la mayoría de las tareas de la interfaz de usuario y un segundo subproceso dedicado para procesar eventos de entrada táctil.</span><span class="sxs-lookup"><span data-stu-id="bcb91-281">The architecture could use two threads, one that handles most UI tasks, and a second thread dedicated to processing touch input events.</span></span> <span data-ttu-id="bcb91-282">El subproceso Touch actualiza la transformación de un determinado visual basándose en el gesto de entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="bcb91-282">The touch thread updates the transform of a particular visual based on the user input gesture.</span></span> <span data-ttu-id="bcb91-283">Mediante la actualización de la transformación, el subproceso de toque puede hacer que todo el subárbol bajo ese objeto visual siga el dedo del usuario, escale o reduzca verticalmente cuando el usuario ejecute un gesto multitáctil, etc.</span><span class="sxs-lookup"><span data-stu-id="bcb91-283">By updating the transform, the touch thread can make the entire subtree under that visual follow the user’s finger, scale up or down as the user executes a multi-touch gesture, and so on.</span></span> <span data-ttu-id="bcb91-284">El subproceso de interfaz de usuario conserva la propiedad de la mayor parte del árbol de composición, con el subproceso Touch propietario solo de los elementos visuales que se etiquetan para la respuesta táctil asincrónica.</span><span class="sxs-lookup"><span data-stu-id="bcb91-284">The UI thread retains ownership of most of the composition tree, with the touch thread owning only the few visuals that are tagged for asynchronous touch response.</span></span> <span data-ttu-id="bcb91-285">En la ilustración siguiente se muestra una versión simplificada de este tipo de árbol de composición:</span><span class="sxs-lookup"><span data-stu-id="bcb91-285">The following illustration shows a simplified version of such a composition tree:</span></span>

![árbol visual compartido entre un subproceso de interfaz de usuario y un subproceso táctil](images/shared-visual-tree-2.png)

<span data-ttu-id="bcb91-287">Normalmente, el subproceso de la interfaz de usuario solo modifica los objetos visuales que posee exclusivamente y el subproceso Touch modifica únicamente el visual compartido.</span><span class="sxs-lookup"><span data-stu-id="bcb91-287">Typically, the UI thread modifies only the visuals that it owns exclusively, and the touch thread modifies only the shared visual.</span></span> <span data-ttu-id="bcb91-288">La única excepción se produce al crear o destruir un subárbol habilitado para Touch.</span><span class="sxs-lookup"><span data-stu-id="bcb91-288">The only exception occurs when creating or destroying a touch-enabled subtree.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bcb91-289">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="bcb91-289">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bcb91-290">**IDCompositionSurface:: BeginDraw**</span><span class="sxs-lookup"><span data-stu-id="bcb91-290">**IDCompositionSurface::BeginDraw**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-begindraw)
</dt> <dt>

[<span data-ttu-id="bcb91-291">**IDCompositionSurface::EndDraw**</span><span class="sxs-lookup"><span data-stu-id="bcb91-291">**IDCompositionSurface::EndDraw**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositionsurface-enddraw)
</dt> <dt>

[<span data-ttu-id="bcb91-292">**IDCompositonDevice:: commit**</span><span class="sxs-lookup"><span data-stu-id="bcb91-292">**IDCompositonDevice::Commit**</span></span>](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-commit)
</dt> <dt>

[<span data-ttu-id="bcb91-293">Conceptos de DirectComposition</span><span class="sxs-lookup"><span data-stu-id="bcb91-293">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 