---
description: Una instantánea es una instantánea de un volumen que duplica todos los datos que se encuentran en ese volumen en un instante bien definido en el tiempo. VSS identifica cada instantánea mediante un GUID persistente.
ms.assetid: 8ef2478a-c8bc-4517-9a14-e1d9226ec4cd
title: Instantáneas y conjuntos de instantáneas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 18709842b1fb0fbf6d6cce2557b51042dfb024ea
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105696967"
---
# <a name="shadow-copies-and-shadow-copy-sets"></a><span data-ttu-id="df375-104">Instantáneas y conjuntos de instantáneas</span><span class="sxs-lookup"><span data-stu-id="df375-104">Shadow Copies and Shadow Copy Sets</span></span>

<span data-ttu-id="df375-105">Una [*instantánea es una instantánea de*](vssgloss-s.md) un volumen que duplica todos los datos que se encuentran en ese volumen en un instante bien definido en el tiempo.</span><span class="sxs-lookup"><span data-stu-id="df375-105">A [*shadow copy*](vssgloss-s.md) is a snapshot of a volume that duplicates all of the data that is held on that volume at one well-defined instant in time.</span></span> <span data-ttu-id="df375-106">VSS identifica cada instantánea mediante un GUID persistente.</span><span class="sxs-lookup"><span data-stu-id="df375-106">VSS identifies each shadow copy by a persistent GUID.</span></span>

<span data-ttu-id="df375-107">Un [*conjunto de instantáneas*](vssgloss-s.md) es una colección de instantáneas de varios volúmenes que se han realizado al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="df375-107">A [*shadow copy set*](vssgloss-s.md) is a collection of shadow copies of various volumes all taken at the same time.</span></span> <span data-ttu-id="df375-108">VSS identifica cada instantánea establecida por un GUID persistente.</span><span class="sxs-lookup"><span data-stu-id="df375-108">VSS identifies each shadow copy set by a persistent GUID.</span></span>

<span data-ttu-id="df375-109">El modo en que un determinado proveedor de hardware o software decida implementar instantáneas está completamente a su discreción.</span><span class="sxs-lookup"><span data-stu-id="df375-109">How a particular hardware or software vendor chooses to implement shadow copies is completely at its discretion.</span></span> <span data-ttu-id="df375-110">Una vez creada una instantánea, hay dos imágenes del volumen de copia de instantáneas disponibles en el sistema: el volumen original, al que se puede tener acceso de forma convencional. y los datos copiados, a los que se puede tener acceso a través de la API de VSS.</span><span class="sxs-lookup"><span data-stu-id="df375-110">Once a shadow copy is created, there are effectively two images of the shadow-copied volume available to the system: the original volume, which can be accessed conventionally; and the copied data, which can be accessed through the VSS API.</span></span>

<span data-ttu-id="df375-111">Esto permite que se lleven a cabo dos conjuntos de actividades al mismo tiempo:</span><span class="sxs-lookup"><span data-stu-id="df375-111">This allows two sets of activities to take place at the same time:</span></span>

-   <span data-ttu-id="df375-112">Las aplicaciones normales del sistema pueden continuar o reanudar rápidamente el uso del volumen original, actualizando los datos en el disco.</span><span class="sxs-lookup"><span data-stu-id="df375-112">Ordinary applications on the system can quickly continue or resume using the original volume, updating data on the disk.</span></span>
-   <span data-ttu-id="df375-113">Las aplicaciones que usan la API de solicitante de VSS para tener acceso al volumen de copia sombra pueden realizar copias de seguridad o operaciones similares.</span><span class="sxs-lookup"><span data-stu-id="df375-113">Applications that are using the VSS requester API to access the shadow-copied volume can perform backups or similar operations.</span></span>

<span data-ttu-id="df375-114">No es necesario implementar instantáneas de la misma manera para todos los archivos, directorios o volúmenes.</span><span class="sxs-lookup"><span data-stu-id="df375-114">Shadow copies need not be implemented in the same way for every file, directory, or volume.</span></span> <span data-ttu-id="df375-115">Diferentes implementaciones del mecanismo de instantáneas ([*proveedores*](vssgloss-p.md)) pueden utilizar diferentes enfoques para crear una instantánea.</span><span class="sxs-lookup"><span data-stu-id="df375-115">Different implementations of the shadow copy mechanism ([*providers*](vssgloss-p.md)) may use different approaches to creating a shadow copy.</span></span> <span data-ttu-id="df375-116">Sin embargo, para todas las aplicaciones que usan la API de VSS, todas las instantáneas deben aparecer igual.</span><span class="sxs-lookup"><span data-stu-id="df375-116">However, to all applications that are using the VSS API, all shadow copies should appear the same.</span></span>

<span data-ttu-id="df375-117">Para obtener información sobre la implementación predeterminada del proveedor de Windows, vea [proveedor del sistema](providers.md).</span><span class="sxs-lookup"><span data-stu-id="df375-117">For information on the default Windows provider implementation, see [System Provider](providers.md).</span></span>

## <a name="default-shadow-copy-state"></a><span data-ttu-id="df375-118">Estado predeterminado de la instantánea</span><span class="sxs-lookup"><span data-stu-id="df375-118">Default Shadow Copy State</span></span>

<span data-ttu-id="df375-119">Aunque el sistema de archivos vacíe todos los búferes de e/s antes de crear una instantánea, esto no garantizará que las e/s incompletas se controlen correctamente.</span><span class="sxs-lookup"><span data-stu-id="df375-119">Even though the file system flushes all I/O buffers prior to creating a shadow copy, this will not ensure that incomplete I/O is properly handled.</span></span>

<span data-ttu-id="df375-120">Por lo tanto, suponiendo que el sistema no tiene ninguna aplicación habilitada para VSS, se dice que los datos de una instantánea están en un [*estado coherente con el bloqueo*](vssgloss-c.md).</span><span class="sxs-lookup"><span data-stu-id="df375-120">Therefore, assuming that the system has no VSS-enabled applications, the data in a shadow copy is said to be in a [*crash-consistent state*](vssgloss-c.md).</span></span> <span data-ttu-id="df375-121">Una instantánea en un estado coherente con el bloqueo contiene una imagen del disco que es la misma que la que existía después de un cierre catastrófico del sistema.</span><span class="sxs-lookup"><span data-stu-id="df375-121">A shadow copy in a crash-consistent state contains an image of the disk that is the same as that which would exist following a catastrophic system shutdown.</span></span> <span data-ttu-id="df375-122">Todos los archivos abiertos seguirán existiendo en el volumen, pero no se garantiza que estén libres de operaciones de e/s incompletas o daños en los datos.</span><span class="sxs-lookup"><span data-stu-id="df375-122">All files that were open will still exist on the volume, but they are not guaranteed to be free of incomplete I/O operations or data corruption.</span></span>

<span data-ttu-id="df375-123">Aunque el estado coherente con el bloqueo no soluciona todos los problemas asociados con la definición de un conjunto de copia de seguridad estable (consulte los [problemas comunes de copia](common-volume-backup-issues.md)de seguridad del volumen), tiene varias ventajas sobre el conjunto de copia de seguridad que tendrían que usar las operaciones de copia de seguridad convencionales:</span><span class="sxs-lookup"><span data-stu-id="df375-123">While the crash-consistent state does not fully deal with all the issues associated with defining a stable backup set (see [Common Volume Backup Issues](common-volume-backup-issues.md)), it has several advantages over the backup set that conventional backup operations would have to use:</span></span>

-   <span data-ttu-id="df375-124">Un volumen incluido en una instantánea, incluso en un estado coherente con el bloqueo, todavía contiene todos los archivos.</span><span class="sxs-lookup"><span data-stu-id="df375-124">A volume contained in a shadow copy, even in a crash-consistent state, still contains all files.</span></span> <span data-ttu-id="df375-125">Un conjunto de copia de seguridad creado sin una instantánea no contendría todos los archivos abiertos en el momento de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="df375-125">A backup set created without a shadow copy would not contain all files open at the time of the backup.</span></span> <span data-ttu-id="df375-126">Los archivos mantenidos abiertos en el momento de la operación de copia de seguridad se excluyen de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="df375-126">Files held open at the time of the backup operation are excluded from the backup.</span></span>
-   <span data-ttu-id="df375-127">La instantánea del volumen se crea en un instante en el tiempo, no atravesando un sistema de archivos activo, que normalmente requiere mucho más tiempo.</span><span class="sxs-lookup"><span data-stu-id="df375-127">The shadow copy of the volume is created at one instant in time, and not by traversing an active file system, which typically requires much more time.</span></span>

<span data-ttu-id="df375-128">Las aplicaciones de un sistema que no son compatibles con VSS (procesadores de texto, editores, etc.) probablemente tendrán sus archivos en un estado coherente con el bloqueo.</span><span class="sxs-lookup"><span data-stu-id="df375-128">Applications on a system that are not VSS-aware—word processors, editors, and so on—will likely have their files left in a crash-consistent state.</span></span> <span data-ttu-id="df375-129">Sin embargo, las aplicaciones compatibles con VSS (escritores) pueden coordinar sus acciones para que el estado de sus archivos en la instantánea esté bien definido y sea coherente.</span><span class="sxs-lookup"><span data-stu-id="df375-129">However, VSS-aware applications (writers) can coordinate their actions so that the state of their files in the shadow copy is well defined and consistent.</span></span>

## <a name="shadow-copy-freeze-and-thaw"></a><span data-ttu-id="df375-130">Inmovilización e reanudación de instantáneas</span><span class="sxs-lookup"><span data-stu-id="df375-130">Shadow Copy Freeze and Thaw</span></span>

<span data-ttu-id="df375-131">La creación de todas las operaciones de instantáneas de VSS está [*entre corchetes y se*](vssgloss-f.md) [*reanudan*](vssgloss-t.md) los eventos, que los escritores usan para poner sus archivos en un estado estable antes de la instantánea.</span><span class="sxs-lookup"><span data-stu-id="df375-131">The creation of every VSS shadow copy operation is bracketed by [*Freeze*](vssgloss-f.md) and [*Thaw*](vssgloss-t.md) events, which writers use to put their files in a stable state prior to shadow copy.</span></span>

<span data-ttu-id="df375-132">Tener inmovilizar y reanudar eventos como parte del modelo de VSS significa:</span><span class="sxs-lookup"><span data-stu-id="df375-132">Having Freeze and Thaw events as part of the VSS model means:</span></span>

-   <span data-ttu-id="df375-133">Controlar el evento Freeze significa que los usuarios que desarrollan escritores deben tener un punto claramente delineado en el ciclo de copia de seguridad en el que se aseguren de que se detienen todas las operaciones de escritura en el disco y que los archivos están en un estado bien definido para la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="df375-133">Handling the Freeze event means that those who are developing writers must have a clearly delineated point in the backup cycle where they ensure that all write operations to the disk are stopped and that files are in a well-defined state for backup.</span></span>
-   <span data-ttu-id="df375-134">Controlar el evento reanudar proporciona el mecanismo para que los escritores reanuden las escrituras en el disco y limpien los archivos temporales u otra información de estado temporal creada en asociación con la instantánea.</span><span class="sxs-lookup"><span data-stu-id="df375-134">Handling the Thaw event provides the mechanism for writers to resume writes to the disk and clean up any temporary files or other temporary state information that were created in association with the shadow copy.</span></span>
-   <span data-ttu-id="df375-135">La ventana predeterminada entre los eventos Freeze y procongele es corta (normalmente 60 segundos); por lo tanto, se puede minimizar la interrupción real de cualquier servicio que proporcione un escritor.</span><span class="sxs-lookup"><span data-stu-id="df375-135">The default window between the Freeze and Thaw events is short (typically 60 seconds); therefore, actual interruption of any service that a writer provides can be minimized.</span></span>
-   <span data-ttu-id="df375-136">El control de otros eventos (como PrepareForSnapshot) anterior y después de los eventos Freeze y reanudación, respectivamente, proporciona la flexibilidad necesaria para permitir que los escritores realicen operaciones complicadas para admitir las instantáneas.</span><span class="sxs-lookup"><span data-stu-id="df375-136">Handling of other events (such as PrepareForSnapshot) preceding and following the Freeze and Thaw events, respectively, provides the necessary flexibility to allow writers to complete complicated operations to support shadow copies.</span></span>

 

 



