---
description: Las API de manipulación directa permiten crear excelentes experiencias de usuario pan, zoom y arrastre. Para ello, procesa la entrada táctil en una región u objeto, genera transformaciones de salida y aplica las transformaciones a los elementos de la interfaz de usuario.
ms.assetid: 26358bc5-71e9-40f0-9243-9bddd961a0e5
title: Manipulación directa
ms.topic: article
ms.date: 02/03/2020
ms.openlocfilehash: 6db2a50893914dfb25050768f88cb289a1ecf3ea
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104152268"
---
# <a name="direct-manipulation"></a><span data-ttu-id="a965c-104">Manipulación directa</span><span class="sxs-lookup"><span data-stu-id="a965c-104">Direct Manipulation</span></span>

<span data-ttu-id="a965c-105">Las API de manipulación directa permiten crear excelentes experiencias de usuario pan, zoom y arrastre.</span><span class="sxs-lookup"><span data-stu-id="a965c-105">The Direct Manipulation APIs let you create great pan, zoom, and drag user experiences.</span></span> <span data-ttu-id="a965c-106">Para ello, procesa la entrada táctil en una región u objeto, genera transformaciones de salida y aplica las transformaciones a los elementos de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="a965c-106">To do this, it processes touch input on a region or object, generates output transforms, and applies the transforms to UI elements.</span></span> <span data-ttu-id="a965c-107">Puede usar la manipulación directa para optimizar la capacidad de respuesta y reducir la latencia a través del procesamiento de entrada fuera de subproceso, la prueba de posicionamiento de entrada sin subproceso opcional y la predicción de entrada y salida.</span><span class="sxs-lookup"><span data-stu-id="a965c-107">You can use Direct Manipulation to optimize responsiveness and reduce latency through off-thread input processing, optional off-thread input hit testing, and input/output prediction.</span></span>

<span data-ttu-id="a965c-108">Cualquier aplicación que use la manipulación directa para procesar interacciones táctiles muestra las animaciones de Windows 8 fluidas y los comportamientos de comentarios de interacción que se ajustan a las [directrices para interacciones de usuario comunes](/windows/uwp/design/input/).</span><span class="sxs-lookup"><span data-stu-id="a965c-108">Any application that uses Direct Manipulation to process touch interactions displays the fluid Windows 8 animations and interaction feedback behaviors that conform to the [Guidelines for common user interactions](/windows/uwp/design/input/).</span></span>

## <a name="developer-audience"></a><span data-ttu-id="a965c-109">Audiencia de los desarrolladores</span><span class="sxs-lookup"><span data-stu-id="a965c-109">Developer Audience</span></span>

<span data-ttu-id="a965c-110">La API de manipulación directa está dirigida a desarrolladores experimentados que saben C/C++, tienen una comprensión sólida del [modelo de objetos componentes (com)](../com/component-object-model--com--portal.md)y están familiarizados con los conceptos de programación de Windows.</span><span class="sxs-lookup"><span data-stu-id="a965c-110">The Direct Manipulation API is for experienced developers who know C/C++, have a solid understanding of the [Component Object Model (COM)](../com/component-object-model--com--portal.md), and are familiar with Windows programming concepts.</span></span>

## <a name="run-time-requirements"></a><span data-ttu-id="a965c-111">Requisitos de tiempo de ejecución</span><span class="sxs-lookup"><span data-stu-id="a965c-111">Run-time requirements</span></span>

<span data-ttu-id="a965c-112">La manipulación directa se presentó en Windows 8.</span><span class="sxs-lookup"><span data-stu-id="a965c-112">Direct Manipulation was introduced in Windows 8.</span></span> <span data-ttu-id="a965c-113">Se incluye en las versiones de 32 y 64 bits.</span><span class="sxs-lookup"><span data-stu-id="a965c-113">It is included in both 32-bit and 64-bit versions.</span></span>

## <a name="why-use-directmanipulation"></a><span data-ttu-id="a965c-114">Por qué usar DirectManipulation</span><span class="sxs-lookup"><span data-stu-id="a965c-114">Why use DirectManipulation</span></span>

### <a name="handles-interactions-in-a-straightforward-and-consistent-manner"></a><span data-ttu-id="a965c-115">Controla las interacciones de una manera sencilla y coherente</span><span class="sxs-lookup"><span data-stu-id="a965c-115">Handles interactions in a straightforward and consistent manner</span></span>

<span data-ttu-id="a965c-116">La manipulación directa funciona declarando previamente los comportamientos e interacciones de una región u objeto.</span><span class="sxs-lookup"><span data-stu-id="a965c-116">Direct Manipulation works by pre-declaring the behaviors and interactions for a region or object.</span></span> <span data-ttu-id="a965c-117">Por ejemplo, una página web se configura a menudo para la panorámica y el zoom.</span><span class="sxs-lookup"><span data-stu-id="a965c-117">For example, a web page is often configured for pan and zoom.</span></span> <span data-ttu-id="a965c-118">En tiempo de ejecución, la entrada se asocia a esta región u objeto a través de una llamada de API simple.</span><span class="sxs-lookup"><span data-stu-id="a965c-118">At runtime, input is then associated with this region/object through a simple API call.</span></span> <span data-ttu-id="a965c-119">A partir de este punto, la manipulación directa directa realiza todo el trabajo pesado de procesar la entrada, aplicar restricciones y personalidad, y generar las transformaciones de salida.</span><span class="sxs-lookup"><span data-stu-id="a965c-119">From this point forward Direct Manipulation does all the heavy lifting of processing the input, applying constraints and personality, and generating the output transforms.</span></span>

### <a name="build-responsive-touch-applications"></a><span data-ttu-id="a965c-120">Creación de aplicaciones táctiles con capacidad de respuesta</span><span class="sxs-lookup"><span data-stu-id="a965c-120">Build responsive touch applications</span></span>

<span data-ttu-id="a965c-121">Para optimizar la capacidad de respuesta y minimizar la latencia, el procesamiento de la manipulación directa se produce en un subproceso independiente e independiente del subproceso de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="a965c-121">To optimize responsiveness and minimize latency, Direct Manipulation processing occurs on a separate, independent thread from the UI thread.</span></span> <span data-ttu-id="a965c-122">Como resultado, las transformaciones de salida pueden ejecutarse en paralelo a la actividad en el subproceso de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="a965c-122">As a result, output transforms can run in parallel to activity on the UI thread.</span></span> <span data-ttu-id="a965c-123">La actividad del subproceso de la interfaz de usuario puede incluir lógica de aplicación, representación, diseño y cualquier otro elemento que consuma ciclos en el procesador.</span><span class="sxs-lookup"><span data-stu-id="a965c-123">The UI thread activity may include application logic, rendering, layout, and anything else that consumes cycles on the processor.</span></span>

### <a name="implementation-flexibility"></a><span data-ttu-id="a965c-124">Flexibilidad de implementación</span><span class="sxs-lookup"><span data-stu-id="a965c-124">Implementation flexibility</span></span>

<span data-ttu-id="a965c-125">Las interfaces que se incluyen con la manipulación directa proporcionan compatibilidad completa para el control de entradas, el reconocimiento de interacción, las notificaciones de comentarios y las actualizaciones de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="a965c-125">The interfaces included with Direct Manipulation provide comprehensive support for input handling, interaction recognition, feedback notifications, and UI updates.</span></span> <span data-ttu-id="a965c-126">Las interfaces también incorporan servicios del sistema como [DirectComposition](../directcomp/directcomposition-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a965c-126">The interfaces also incorporate system services such as [DirectComposition](../directcomp/directcomposition-portal.md).</span></span>

## <a name="basic-concepts"></a><span data-ttu-id="a965c-127">Conceptos básicos</span><span class="sxs-lookup"><span data-stu-id="a965c-127">Basic concepts</span></span>

<span data-ttu-id="a965c-128">La implementación de la manipulación directa más básica consta de una *ventanilla*, *contenido* e *interacciones*.</span><span class="sxs-lookup"><span data-stu-id="a965c-128">The most basic Direct Manipulation implementation consists of a *viewport*, *content*, and *interactions*.</span></span> <span data-ttu-id="a965c-129">La *ventanilla* es una región que puede recibir y procesar la entrada de interacciones del usuario.</span><span class="sxs-lookup"><span data-stu-id="a965c-129">The *viewport* is a region that is able to receive and process input from user interactions.</span></span> <span data-ttu-id="a965c-130">También es la región del contenido que es visible para el usuario final.</span><span class="sxs-lookup"><span data-stu-id="a965c-130">It is also the region of the content that is visible to the end-user.</span></span> <span data-ttu-id="a965c-131">El *contenido* es el objeto real que los usuarios finales pueden ver y es lo que mueve o escala en respuesta a una interacción del usuario.</span><span class="sxs-lookup"><span data-stu-id="a965c-131">The *content* is the actual object that end-users can see and is what moves or scales in response to a user interaction.</span></span> <span data-ttu-id="a965c-132">Las *interacciones* del usuario principal (también conocidas como *manipulaciones*) que admite la manipulación directa son la panorámica y el zoom.</span><span class="sxs-lookup"><span data-stu-id="a965c-132">The primary user *interactions* (also known as *manipulations*) supported by Direct Manipulation are panning and zooming.</span></span> <span data-ttu-id="a965c-133">Estas interacciones aplican una transformación trasladar o escalar al contenido dentro de la ventanilla, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="a965c-133">These interactions apply a translate or scale transform to the content within the viewport, respectively.</span></span> <span data-ttu-id="a965c-134">Se pueden configurar varias ventanillas (cada una con su propio contenido) en una sola ventana para crear una experiencia de interfaz de usuario enriquecida.</span><span class="sxs-lookup"><span data-stu-id="a965c-134">Multiple viewports (each with their own content) can be configured in a single window to create a rich UI experience.</span></span>

<span data-ttu-id="a965c-135">En esta ilustración se muestra una implementación de manipulación directa básica antes y después de la panorámica.</span><span class="sxs-lookup"><span data-stu-id="a965c-135">This figure shows a basic Direct Manipulation implementation before and after panning.</span></span>

![implementación de la manipulación directa básica antes y después de la panorámica.](images/dm-art-1.png)

<span data-ttu-id="a965c-137">Durante la inicialización de la manipulación directa se crea una instancia de un objeto **DCompDirectManipulationCompositor** y se asocia a la manipulación directa.</span><span class="sxs-lookup"><span data-stu-id="a965c-137">During initialization of Direct Manipulation a **DCompDirectManipulationCompositor** object is instantiated and is associated with Direct Manipulation.</span></span> <span data-ttu-id="a965c-138">Este objeto es un contenedor alrededor de [DirectComposition](../directcomp/directcomposition-portal.md), que es el compositor del sistema.</span><span class="sxs-lookup"><span data-stu-id="a965c-138">This object is a wrapper around [DirectComposition](../directcomp/directcomposition-portal.md), which is the system compositor.</span></span> <span data-ttu-id="a965c-139">El objeto es responsable de aplicar las transformaciones de salida y de impulsar las actualizaciones visuales.</span><span class="sxs-lookup"><span data-stu-id="a965c-139">The object is responsible for applying the output transforms and driving visual updates.</span></span>

<span data-ttu-id="a965c-140">Un contacto representa un punto táctil identificado por el **pointerId** proporcionado en el mensaje de [WM/_POINTERDOWN](../inputmsg/wm-pointerdown.md) .</span><span class="sxs-lookup"><span data-stu-id="a965c-140">A contact represents a touch point identified by the **pointerId** provided in the [WM/_POINTERDOWN](../inputmsg/wm-pointerdown.md) message.</span></span> <span data-ttu-id="a965c-141">Cuando se recibe un mensaje de **\_ POINTERDOWN de WM** , la aplicación llama a [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact).</span><span class="sxs-lookup"><span data-stu-id="a965c-141">When a **WM\_POINTERDOWN** message is received, the application calls [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact).</span></span> <span data-ttu-id="a965c-142">La aplicación notifica a Manipulationabout directos los contactos que deben controlarse y las ventanillas que deben reaccionar a esos contactos.</span><span class="sxs-lookup"><span data-stu-id="a965c-142">The application notifies Direct Manipulationabout the contacts that should be handled and the viewport(s) that should react to those contacts.</span></span> <span data-ttu-id="a965c-143">La entrada del teclado y del mouse tiene valores de **pointerId** especiales para que se puedan controlar adecuadamente mediante la manipulación directa.</span><span class="sxs-lookup"><span data-stu-id="a965c-143">Keyboard and mouse input have special **pointerId** values so they can be handled appropriately by Direct Manipulation.</span></span>

<span data-ttu-id="a965c-144">En nuestro caso básico anterior, cuando se llama a [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) se producen algunas cosas:</span><span class="sxs-lookup"><span data-stu-id="a965c-144">In our basic case above, when [**SetContact**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationviewport-setcontact) is called a few things happen:</span></span>

- <span data-ttu-id="a965c-145">Cuando el usuario realiza una panorámica, se envía un mensaje de [WM/_POINTERCAPTURECHANGED](../inputmsg/wm-pointercapturechanged.md) a la aplicación para notificar que el contacto lo ha consumido la manipulación directa.</span><span class="sxs-lookup"><span data-stu-id="a965c-145">When the user performs a pan, a [WM/_POINTERCAPTURECHANGED](../inputmsg/wm-pointercapturechanged.md) message is sent to the application to notify that the contact has been consumed by Direct Manipulation.</span></span>
- <span data-ttu-id="a965c-146">Cuando el usuario mueve los movimientos, la ventanilla desencadena eventos de actualización que usa el contenedor [DirectComposition](../directcomp/directcomposition-portal.md) para controlar las actualizaciones visuales en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="a965c-146">When the user moves the moves, the viewport fires update events which are used by the [DirectComposition](../directcomp/directcomposition-portal.md) wrapper to drive visual updates to the screen.</span></span> <span data-ttu-id="a965c-147">En el movimiento panorámico de un usuario en una ventanilla, parecerá que el contenido se mueve sin problemas en el contacto.</span><span class="sxs-lookup"><span data-stu-id="a965c-147">To a user panning in a viewport, the content will appear to move smoothly under the contact.</span></span>
- <span data-ttu-id="a965c-148">Cuando el usuario levanta el contacto, el usuario ve que el contenido se sigue moviendo a medida que pasa a una animación de inercia, con lo que se reduce gradualmente hasta que alcanza su lugar final.</span><span class="sxs-lookup"><span data-stu-id="a965c-148">When the user lifts the contact, the user sees the content continue to move as it transitions into an inertia animation, gradually decelerating until it reaches its final resting place.</span></span>

## <a name="processing-keyboard-and-mouse-input"></a><span data-ttu-id="a965c-149">Procesar la entrada del teclado y del mouse</span><span class="sxs-lookup"><span data-stu-id="a965c-149">Processing keyboard and mouse input</span></span>

<span data-ttu-id="a965c-150">La manipulación directa permite que los mensajes del mouse y del teclado se reenvíen manualmente desde el subproceso de la interfaz de usuario de la aplicación a través de la API de [**ProcessInput**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationmanager-processinput) para que se puedan controlar adecuadamente mediante la manipulación directa.</span><span class="sxs-lookup"><span data-stu-id="a965c-150">Direct Manipulation allows keyboard and mouse messages to be forwarded manually from the application UI thread via the [**ProcessInput**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationmanager-processinput) API such that they can be handled appropriately by Direct Manipulation.</span></span>

## <a name="directmanipulation-and-the-hwnd"></a><span data-ttu-id="a965c-151">DirectManipulation y HWND</span><span class="sxs-lookup"><span data-stu-id="a965c-151">DirectManipulation and the HWND</span></span>

<span data-ttu-id="a965c-152">La manipulación directa está asociada a un HWND de Win32 para recibir y procesar los mensajes de entrada de puntero para esa ventana.</span><span class="sxs-lookup"><span data-stu-id="a965c-152">Direct Manipulation is associated with a Win32 HWND in order to receive and process pointer input messages for that window.</span></span> <span data-ttu-id="a965c-153">A medida que la manipulación directa calcula valores de salida, realiza devoluciones de llamada asincrónicas a los objetos del [modelo de objetos componentes (com)](../com/component-object-model--com--portal.md) de manipulación directa que se implementan en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a965c-153">As Direct Manipulation computes output values, it makes asynchronous callbacks to the Direct Manipulation [Component Object Model (COM)](../com/component-object-model--com--portal.md) objects that are implemented in the application.</span></span> <span data-ttu-id="a965c-154">Estas devoluciones de llamada informan a la aplicación sobre la transformación que se aplicó a los objetos.</span><span class="sxs-lookup"><span data-stu-id="a965c-154">These callbacks inform the application about the transform that was applied to the objects.</span></span> <span data-ttu-id="a965c-155">La manipulación directa se activa en el HWND especificado llamando a [**Activate**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationmanager-activate).</span><span class="sxs-lookup"><span data-stu-id="a965c-155">Direct Manipulation is activated on the specified HWND by calling [**Activate**](/windows/win32/api/DirectManipulation/nf-directmanipulation-idirectmanipulationmanager-activate).</span></span>

## <a name="supporting-documentation"></a><span data-ttu-id="a965c-156">Documentación complementaria</span><span class="sxs-lookup"><span data-stu-id="a965c-156">Supporting documentation</span></span>

- [<span data-ttu-id="a965c-157">Ventanillas y contenido</span><span class="sxs-lookup"><span data-stu-id="a965c-157">Viewports and content</span></span>](directmanipulation-viewports-and-content.md)
- [<span data-ttu-id="a965c-158">Usar varias ventanillas en DirectManipulation</span><span class="sxs-lookup"><span data-stu-id="a965c-158">Using multiple viewports in DirectManipulation</span></span>](directmanipulation-multiple-vieports.md)
- [<span data-ttu-id="a965c-159">Procesar la entrada con DirectManipulation</span><span class="sxs-lookup"><span data-stu-id="a965c-159">Processing input with DirectManipulation</span></span>](directmanipulation-processing-input-with-directmanipulation.md)
- [<span data-ttu-id="a965c-160">Motor de composición</span><span class="sxs-lookup"><span data-stu-id="a965c-160">Composition engine</span></span>](directmanipulation-composition-engine.md)
- [<span data-ttu-id="a965c-161">Referencia de manipulación directa</span><span class="sxs-lookup"><span data-stu-id="a965c-161">Direct Manipulation Reference</span></span>](direct-manipulation-reference.md)

- [<span data-ttu-id="a965c-162">COMPILACIÓN 2013: WCL-022: haga que su aplicación de escritorio sea fantástica con Touch, mouse y lápiz</span><span class="sxs-lookup"><span data-stu-id="a965c-162">BUILD 2013: WCL-022: Make your desktop app great with touch, mouse, and pen</span></span>](https://channel9.msdn.com/Events/Build/2013/4-022)
- [<span data-ttu-id="a965c-163">Procesar entrada táctil con el ejemplo de manipulación directa</span><span class="sxs-lookup"><span data-stu-id="a965c-163">Process touch input with Direct Manipulation sample</span></span>](https://github.com/microsoft/Windows-classic-samples/tree/1d363ff4bd17d8e20415b92e2ee989d615cc0d91/Samples/TouchInputDirectManipulation)
