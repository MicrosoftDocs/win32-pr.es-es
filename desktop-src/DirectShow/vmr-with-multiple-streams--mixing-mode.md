---
description: VMR con varias secuencias (modo de combinación)
ms.assetid: 053edb70-8631-4fe4-a137-2fe54e02ab9e
title: VMR con varias secuencias (modo de combinación)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a21a954b0ad78afbceabf0fde493f920961b90dd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105678075"
---
# <a name="vmr-with-multiple-streams-mixing-mode"></a><span data-ttu-id="4b969-103">VMR con varias secuencias (modo de combinación)</span><span class="sxs-lookup"><span data-stu-id="4b969-103">VMR with Multiple Streams (Mixing Mode)</span></span>

<span data-ttu-id="4b969-104">VMR puede representar varios flujos de entrada.</span><span class="sxs-lookup"><span data-stu-id="4b969-104">The VMR can render multiple input streams.</span></span> <span data-ttu-id="4b969-105">En esta configuración, denominada modo de combinación, VMR carga su mezclador y compositor para realizar la combinación y la mezcla antes de la representación.</span><span class="sxs-lookup"><span data-stu-id="4b969-105">In this configuration, called mixing mode, the VMR loads its mixer and compositor to perform the mixing and blending prior to rendering.</span></span> <span data-ttu-id="4b969-106">Se puede usar el modo de combinación mientras VMR está en modo de ventana o modo sin ventanas.</span><span class="sxs-lookup"><span data-stu-id="4b969-106">Mixing mode can be used either while the VMR is in windowed mode or windowless mode.</span></span>

<span data-ttu-id="4b969-107">El modo de mezcla requiere que el controlador de gráficos admita las \_ marcas de capacidad DDCAPS BLTFOURCC y DDCAPS \_ BLTSTRETCH (conversión de espacio de colores y Stretch blitting, respectivamente).</span><span class="sxs-lookup"><span data-stu-id="4b969-107">Mixing mode requires that the graphics driver supports the DDCAPS\_BLTFOURCC and DDCAPS\_BLTSTRETCH capability flags (color space conversion and stretch blitting, respectively).</span></span> <span data-ttu-id="4b969-108">Casi todos los controladores de gráficos nuevos tienen esas capacidades.</span><span class="sxs-lookup"><span data-stu-id="4b969-108">Almost all new graphics drivers have those capabilities.</span></span> <span data-ttu-id="4b969-109">Además, el controlador debe admitir la creación de destinos de representación de Direct3D para la profundidad del píxel de la pantalla actual.</span><span class="sxs-lookup"><span data-stu-id="4b969-109">In addition, the driver must support the creation of Direct3D render targets for the current display pixel depth.</span></span> <span data-ttu-id="4b969-110">Algunos dispositivos no admiten las operaciones de Direct3D cuando la pantalla se establece en 24 bits por píxel.</span><span class="sxs-lookup"><span data-stu-id="4b969-110">Some devices do not support Direct3D operations when the display is set to 24 bits per pixel.</span></span> <span data-ttu-id="4b969-111">Para obtener más información, consulte la documentación del SDK de gráficos de DirectX.</span><span class="sxs-lookup"><span data-stu-id="4b969-111">For more information, see the DirectX Graphics SDK documentation.</span></span>

> [!Note]  
> <span data-ttu-id="4b969-112">Cuando el VMR mezcla varias secuencias de vídeo, el gráfico de filtros no se busca correctamente.</span><span class="sxs-lookup"><span data-stu-id="4b969-112">When the VMR mixes multiple video streams, the filter graph does not seek correctly.</span></span> <span data-ttu-id="4b969-113">Si necesita buscar varias secuencias de vídeo, debe crear gráficos de filtro independientes que compartan el mismo objeto de presentador personalizado.</span><span class="sxs-lookup"><span data-stu-id="4b969-113">If you need to seek multiple video streams, you must create separate filter graphs that share the same custom allocator-presenter object.</span></span>

 

<span data-ttu-id="4b969-114">**Configuración de VMR-7 para varias secuencias**</span><span class="sxs-lookup"><span data-stu-id="4b969-114">**Configuring the VMR-7 for Multiple Streams**</span></span>

<span data-ttu-id="4b969-115">Para representar varios flujos de entrada con VMR-7, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="4b969-115">To render multiple input streams with the VMR-7, do the following:</span></span>

1.  <span data-ttu-id="4b969-116">Antes de conectar cualquiera de los pin de entrada de VMR, llame al método [**IVMRFilterConfig:: SetNumberOfStreams**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setnumberofstreams) con el número de flujos.</span><span class="sxs-lookup"><span data-stu-id="4b969-116">Before connecting any of the VMR's input pins, call the [**IVMRFilterConfig::SetNumberOfStreams**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setnumberofstreams) method with the number of streams.</span></span> <span data-ttu-id="4b969-117">Esto hace que VMR cargue el mezclador y el compositor, y para crear el número especificado de clavijas de entrada.</span><span class="sxs-lookup"><span data-stu-id="4b969-117">This causes the VMR to load the mixer and compositor and to create the specified number of input pins.</span></span>
2.  <span data-ttu-id="4b969-118">Llame a [**IVMRFilterConfig:: SetRenderingPrefs**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setrenderingprefs) para especificar varias preferencias de representación.</span><span class="sxs-lookup"><span data-stu-id="4b969-118">Call [**IVMRFilterConfig::SetRenderingPrefs**](/windows/desktop/api/Strmif/nf-strmif-ivmrfilterconfig-setrenderingprefs) to specify various rendering preferences.</span></span>
3.  <span data-ttu-id="4b969-119">Conecte los pin a los filtros de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="4b969-119">Connect the pins to the upstream filters.</span></span> <span data-ttu-id="4b969-120">La forma más fácil de hacerlo es llamar a [**IGraphBuilder:: RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) para cada flujo de entrada.</span><span class="sxs-lookup"><span data-stu-id="4b969-120">The easiest way to do this is to call [**IGraphBuilder::RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) for each input stream.</span></span> <span data-ttu-id="4b969-121">Si el PIN de salida en el filtro de nivel superior (normalmente un descodificador) y el PIN de entrada en VMR no pueden estar de acuerdo en una conexión, se creará una nueva instancia de VMR con la configuración predeterminada.</span><span class="sxs-lookup"><span data-stu-id="4b969-121">If the output pin on the upstream filter (usually a decoder) and the input pin on the VMR cannot agree on a connection, then a new instance of the VMR with default settings will be created.</span></span> <span data-ttu-id="4b969-122">Esto producirá una nueva ventana con "ActiveMovie" en la barra de título.</span><span class="sxs-lookup"><span data-stu-id="4b969-122">This will result in a new window with "ActiveMovie" in the title bar.</span></span> <span data-ttu-id="4b969-123">Para evitar que esto suceda, la aplicación siempre debe comprobar que se está usando la instancia correcta de VMR llamando a un método como [**IPin:: ConnectTo**](/windows/desktop/api/Strmif/nf-strmif-ipin-connectedto).</span><span class="sxs-lookup"><span data-stu-id="4b969-123">To prevent this from happening, the application should always verify that the correct instance of the VMR is being used by calling a method such as [**IPin::ConnectedTo**](/windows/desktop/api/Strmif/nf-strmif-ipin-connectedto).</span></span> <span data-ttu-id="4b969-124">Otra opción consiste en agregar el filtro de origen y, a continuación, conectar los pin mediante **IGraphBuilder:: Connect**.</span><span class="sxs-lookup"><span data-stu-id="4b969-124">Another option is to add the source filter and then connect the pins using **IGraphBuilder::Connect**.</span></span>
4.  <span data-ttu-id="4b969-125">Use la interfaz [**IVMRMixerControl**](/windows/desktop/api/Strmif/nn-strmif-ivmrmixercontrol) en VMR para controlar los parámetros de cada secuencia, como el valor alfa, el orden Z y el rectángulo de salida.</span><span class="sxs-lookup"><span data-stu-id="4b969-125">Use the [**IVMRMixerControl**](/windows/desktop/api/Strmif/nn-strmif-ivmrmixercontrol) interface on the VMR to control parameters for each stream, such as the alpha value, the Z-ordering, and the output rectangle.</span></span>
5.  <span data-ttu-id="4b969-126">Ejecute el gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="4b969-126">Run the filter graph.</span></span>

<span data-ttu-id="4b969-127">**Configuración de VMR-9 para varias secuencias**</span><span class="sxs-lookup"><span data-stu-id="4b969-127">**Configuring the VMR-9 for Multiple Streams**</span></span>

<span data-ttu-id="4b969-128">De forma predeterminada, VMR-9 crea cuatro clavijas de entrada.</span><span class="sxs-lookup"><span data-stu-id="4b969-128">By default, the VMR-9 creates four input pins.</span></span> <span data-ttu-id="4b969-129">Si desea mezclar más de cuatro transmisiones de vídeo, llame a [**IVMRFilterConfig9:: SetNumberOfStreams**](/previous-versions/windows/desktop/api/Vmr9/nf-vmr9-ivmrfilterconfig9-setnumberofstreams) antes de conectar cualquier clavija de entrada.</span><span class="sxs-lookup"><span data-stu-id="4b969-129">If you want to mix more than four video streams, call [**IVMRFilterConfig9::SetNumberOfStreams**](/previous-versions/windows/desktop/api/Vmr9/nf-vmr9-ivmrfilterconfig9-setnumberofstreams) before connecting any input pins.</span></span> <span data-ttu-id="4b969-130">Use la interfaz [**IVMRMixerControl9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrmixercontrol9) para establecer los parámetros de flujo, como alfa, orden Z y posición.</span><span class="sxs-lookup"><span data-stu-id="4b969-130">Use the [**IVMRMixerControl9**](/previous-versions/windows/desktop/api/Vmr9/nn-vmr9-ivmrmixercontrol9) interface to set the stream parameters, such as alpha, Z-order, and position.</span></span>

## <a name="related-topics"></a><span data-ttu-id="4b969-131">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="4b969-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4b969-132">Usar el modo de mezcla de VMR</span><span class="sxs-lookup"><span data-stu-id="4b969-132">Using VMR Mixing Mode</span></span>](using-vmr-mixing-mode.md)
</dt> </dl>

 

 



