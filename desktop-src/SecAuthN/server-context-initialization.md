---
description: Al igual que el cliente, el servidor también adquiere un identificador de credenciales para estar listo para responder a una solicitud de autenticación entrante desde el cliente.
ms.assetid: 2a0aeadf-e099-4264-8522-e498f437bf75
title: Inicialización de contexto de servidor
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1362c8fd71e079392f10a8e35f76ad511de3c49f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103813579"
---
# <a name="server-context-initialization"></a><span data-ttu-id="a9aa3-103">Inicialización de contexto de servidor</span><span class="sxs-lookup"><span data-stu-id="a9aa3-103">Server Context Initialization</span></span>

<span data-ttu-id="a9aa3-104">Al igual que el cliente, el servidor también adquiere un identificador de [*credenciales*](../secgloss/c-gly.md) para estar listo para responder a una solicitud de autenticación entrante desde el cliente.</span><span class="sxs-lookup"><span data-stu-id="a9aa3-104">Like the client, the server also acquires a [*credentials*](../secgloss/c-gly.md) handle to be ready to respond to an incoming authentication request from the client.</span></span> <span data-ttu-id="a9aa3-105">Las credenciales del servidor se usan para autenticar el servidor en el cliente en [*protocolos de seguridad*](../secgloss/s-gly.md) que admiten la autenticación de servidor o la autenticación mutua.</span><span class="sxs-lookup"><span data-stu-id="a9aa3-105">Server credentials are used to authenticate the server to the client in [*security protocols*](../secgloss/s-gly.md) that support server authentication or mutual authentication.</span></span> <span data-ttu-id="a9aa3-106">El servidor obtiene un identificador de sus credenciales definidas por la cuenta de servicio usada para iniciar el servidor.</span><span class="sxs-lookup"><span data-stu-id="a9aa3-106">The server obtains a handle to its credentials defined by the service account used to start the server.</span></span> <span data-ttu-id="a9aa3-107">Para ello, llama a [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea).</span><span class="sxs-lookup"><span data-stu-id="a9aa3-107">It does so by calling [**AcquireCredentialsHandle**](/windows/win32/api/sspi/nf-sspi-acquirecredentialshandlea).</span></span>

<span data-ttu-id="a9aa3-108">El servidor puede adquirir su identificador de credenciales y, a continuación, pasar a un estado de escucha, o puede esperar en un estado de escucha hasta que llegue una solicitud de conexión y, a continuación, adquiera un identificador de credenciales de entrada.</span><span class="sxs-lookup"><span data-stu-id="a9aa3-108">The server can acquire its credentials handle and then go into a listen state, or it can wait in a listen state until a connection request arrives and then acquire an inbound credentials handle.</span></span> <span data-ttu-id="a9aa3-109">Para obtener más información sobre las funciones de credenciales, vea [Administración de credenciales](authentication-functions.md).</span><span class="sxs-lookup"><span data-stu-id="a9aa3-109">For more information on credentials functions, see [Credential Management](authentication-functions.md).</span></span>

<span data-ttu-id="a9aa3-110">Cuando el servidor recibe un mensaje de solicitud de conexión de un cliente, crea un [*contexto de seguridad*](../secgloss/s-gly.md) local para el cliente mediante [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span><span class="sxs-lookup"><span data-stu-id="a9aa3-110">When the server receives a connection request message from a client, it creates a local [*security context*](../secgloss/s-gly.md) for the client using [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext).</span></span> <span data-ttu-id="a9aa3-111">El servidor utiliza este contexto de seguridad local para llevar a cabo solicitudes futuras del mismo cliente.</span><span class="sxs-lookup"><span data-stu-id="a9aa3-111">The server uses this local security context to carry out future requests by the same client.</span></span> <span data-ttu-id="a9aa3-112">Para obtener más información sobre las funciones de contexto, consulte [Administración de contexto](authentication-functions.md).</span><span class="sxs-lookup"><span data-stu-id="a9aa3-112">For more information on context functions, see [Context Management](authentication-functions.md).</span></span>

<span data-ttu-id="a9aa3-113">El servidor comprueba el estado de retorno y el descriptor de búfer de salida para asegurarse de que no hay errores hasta el momento y puede rechazar la solicitud de conexión si hay errores.</span><span class="sxs-lookup"><span data-stu-id="a9aa3-113">The server checks the return status and output buffer descriptor to ensure there are no errors so far, and can reject the connection request if there are errors.</span></span> <span data-ttu-id="a9aa3-114">Si hay información en el búfer de salida devuelto por [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), empaqueta ese búfer en un mensaje de respuesta al cliente.</span><span class="sxs-lookup"><span data-stu-id="a9aa3-114">If there is information in the output buffer returned by [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), it bundles that buffer into a response message to the client.</span></span>

<span data-ttu-id="a9aa3-115">Cualquier búfer de salida de [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) debe enviarse de vuelta al cliente.</span><span class="sxs-lookup"><span data-stu-id="a9aa3-115">Any output buffer from [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) must be sent back to the client.</span></span> <span data-ttu-id="a9aa3-116">Además, si el estado de retorno requiere que el protocolo continúe (seg., es \_ \_ \_ necesario o \_ seg \_ \_ y \_ continuar), se requiere otro intercambio de mensajes con el cliente.</span><span class="sxs-lookup"><span data-stu-id="a9aa3-116">In addition, if the return status requires the protocol to continue (SEC\_I\_CONTINUE\_NEEDED or SEC\_I\_COMPLETE\_AND\_CONTINUE), another message exchange with the client is required.</span></span>

<span data-ttu-id="a9aa3-117">En el caso de las piernas adicionales, el servidor espera a que el cliente responda con otro mensaje.</span><span class="sxs-lookup"><span data-stu-id="a9aa3-117">For additional legs, the server waits for the client to respond with another message.</span></span> <span data-ttu-id="a9aa3-118">Este tiempo de espera se puede agotar para evitar un ataque de denegación de servicio en el que un cliente nunca responde de forma intencionada, lo que provoca que un subproceso de servidor y pronto, todos los subprocesos de servidor, deje de responder.</span><span class="sxs-lookup"><span data-stu-id="a9aa3-118">This wait can be timed out so as to avoid a denial of service attack where a client purposely never responds, causing a server thread and soon, all server threads, to stop responding.</span></span>

 

 
