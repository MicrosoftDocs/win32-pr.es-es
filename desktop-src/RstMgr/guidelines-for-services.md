---
title: Directrices para servicios
description: Los servicios deben cumplir estas directrices para asegurarse de que el administrador de reinicio puede apagar y reiniciar los servicios si es necesario para instalar las actualizaciones. Las aplicaciones pueden usar las directrices que se describen en directrices para las aplicaciones.
ms.assetid: 69a98f82-71bb-4780-8a3f-294cc5629900
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 51374c0a4c6fc561b8259aadf15e3d5487e12483
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104078093"
---
# <a name="guidelines-for-services"></a><span data-ttu-id="e6ebd-104">Directrices para servicios</span><span class="sxs-lookup"><span data-stu-id="e6ebd-104">Guidelines for Services</span></span>

<span data-ttu-id="e6ebd-105">Los servicios deben cumplir estas directrices para asegurarse de que el administrador de reinicio puede apagar y reiniciar los servicios si es necesario para instalar las actualizaciones.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-105">Services should adhere to these guidelines to ensure that the Restart Manager can shut down and restart services if necessary to install updates.</span></span> <span data-ttu-id="e6ebd-106">Las aplicaciones pueden usar las directrices que se describen en [directrices para las aplicaciones](guidelines-for-applications.md).</span><span class="sxs-lookup"><span data-stu-id="e6ebd-106">Applications can use the guidelines that are described in [Guidelines for Applications](guidelines-for-applications.md).</span></span>

-   <span data-ttu-id="e6ebd-107">Los servicios deben ser capaces de cerrarse y reiniciarse con el [Administrador de control de servicios](/windows/desktop/Services/service-control-manager) sin necesidad de reiniciar el sistema.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-107">Services should be capable of being shut down and restarted using the [Service Control Manager](/windows/desktop/Services/service-control-manager) without requiring a system restart.</span></span> <span data-ttu-id="e6ebd-108">Las excepciones a esta directriz son los procesos críticos del sistema que se ejecutan en el contexto de lsass.exe o services.exe.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-108">The exceptions to this guideline are critical system processes that run in the context of lsass.exe or services.exe.</span></span>
-   <span data-ttu-id="e6ebd-109">El administrador de reinicio respeta las dependencias de servicio.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-109">Restart Manager honors service dependencies.</span></span> <span data-ttu-id="e6ebd-110">Cuando un servicio se cierra y se reinicia, sus servicios dependientes se apagan y se reinician.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-110">When a service is shut down and restarted, its dependent services are shut down and restarted.</span></span>
-   <span data-ttu-id="e6ebd-111">Los servicios deben especificar el intervalo de recuperación y el período de restablecimiento en el [Administrador de control de servicios (SCM)](/windows/desktop/Services/service-control-manager).</span><span class="sxs-lookup"><span data-stu-id="e6ebd-111">Services should specify the recovery interval and reset period in the [Service Control Manager (SCM)](/windows/desktop/Services/service-control-manager).</span></span> <span data-ttu-id="e6ebd-112">El intervalo de recuperación es el tiempo, en milisegundos, después del último error que el SCM espera antes de realizar la acción de recuperación.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-112">The recovery interval is the time, in msecs, after the last failure that the SCM waits before taking the recovery action.</span></span> <span data-ttu-id="e6ebd-113">El período de restablecimiento es el tiempo, en segundos, después del último error que el administrador de control de servicios espera antes de restablecer el recuento de errores a 0.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-113">The reset period is the time, in seconds, after the last failure that the Service Control Manager waits before resetting the failure count to 0.</span></span> <span data-ttu-id="e6ebd-114">Los servicios pueden usar la función [**ChangeServiceConfig2**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfig2a) para cambiar los valores de configuración.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-114">Services can use [**ChangeServiceConfig2**](/windows/desktop/api/winsvc/nf-winsvc-changeserviceconfig2a) function to change the configuration settings.</span></span>

    <span data-ttu-id="e6ebd-115">Los [servicios críticos](critical-system-services.md) deben usar la siguiente configuración de recuperación para especificar que el servicio se reinicie un minuto después del primer error al reiniciar el servicio, se reinicie dos minutos después del segundo error y que el equipo se reinicie un minuto después del tercer error.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-115">[Critical services](critical-system-services.md) should use the following recovery settings to specify that the service be restarted one minute after the first failure to restart the service, restarted two minutes after the second failure, and that the computer be restarted one minute after the third failure.</span></span> <span data-ttu-id="e6ebd-116">El recuento de errores se restablece en 0 después de 300 segundos.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-116">The failure count is reset to 0 after 300 seconds.</span></span>

    <dl> <span data-ttu-id="e6ebd-117">Acciones de recuperación: restart/60000/restart/120000/reboot/60000 & RESET = 300</span><span class="sxs-lookup"><span data-stu-id="e6ebd-117">Recovery Actions: Restart/60000/Restart/120000/Reboot/60000 & Reset =300</span></span>  
    </dl>

    <span data-ttu-id="e6ebd-118">Los [servicios críticos](critical-system-services.md) deben iniciarse antes que los servicios no críticos.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-118">[Critical services](critical-system-services.md) should be started before non-critical services.</span></span> <span data-ttu-id="e6ebd-119">Los servicios que no son críticos deben usar la siguiente configuración de recuperación para especificar que el servicio se reinicie dos minutos después del primer error al reiniciar el servicio.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-119">Services that are not critical services should use the following recovery settings to specify that the service be restarted two minutes after the first failure to restart the service.</span></span> <span data-ttu-id="e6ebd-120">El servicio no se reinicia después del segundo error y es necesario que un administrador intervenga en este caso.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-120">The service is not restarted after the second failure, and an administrator would need to intervene in this case.</span></span> <span data-ttu-id="e6ebd-121">El recuento de errores se restablece en 0 después de 900 segundos.</span><span class="sxs-lookup"><span data-stu-id="e6ebd-121">The failure count is reset to 0 after 900 seconds.</span></span>

    <dl> <span data-ttu-id="e6ebd-122">Acciones de recuperación: restart/120000/restart/300000/None/0 & RESET = 900</span><span class="sxs-lookup"><span data-stu-id="e6ebd-122">Recovery Actions: Restart/120000/Restart/300000/None/0 & Reset = 900</span></span>  
    </dl>

 

 