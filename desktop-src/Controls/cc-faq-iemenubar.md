---
title: Creación de una barra de menús de Explorer-Style de Internet
description: A primera vista, la barra de menús de Microsoft Internet Explorer 5 y versiones posteriores tiene un aspecto similar al de un menú estándar. Sin embargo, tiene un aspecto bastante diferente cuando empieza a usarlo.
ms.assetid: e0fe25f2-3d49-4c5a-a3f9-2f468f2cfef2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b262bc55407d263c97d4bd7e3938a9794d3a58f5
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/21/2020
ms.locfileid: "103904844"
---
# <a name="how-to-create-an-internet-explorer-style-menu-bar"></a><span data-ttu-id="33491-104">Creación de una barra de menús de Explorer-Style de Internet</span><span class="sxs-lookup"><span data-stu-id="33491-104">How to Create an Internet Explorer-Style Menu Bar</span></span>

<span data-ttu-id="33491-105">A primera vista, la barra de menús de Microsoft Internet Explorer 5 y versiones posteriores tiene un aspecto similar al de un menú estándar.</span><span class="sxs-lookup"><span data-stu-id="33491-105">At first glance, the menu bar in Microsoft Internet Explorer 5 and later looks similar to a standard menu.</span></span> <span data-ttu-id="33491-106">Sin embargo, tiene un aspecto bastante diferente cuando empieza a usarlo.</span><span class="sxs-lookup"><span data-stu-id="33491-106">However, it looks quite different when you begin using it.</span></span>

<span data-ttu-id="33491-107">En la captura de pantalla siguiente se muestra la barra de menús de Windows Internet Explorer con el menú herramientas seleccionado.</span><span class="sxs-lookup"><span data-stu-id="33491-107">The following screen shot shows the Windows Internet Explorer menu bar with the Tools menu selected.</span></span>

![captura de pantalla que muestra la barra de menús de Windows Internet Explorer, con el menú herramientas seleccionado](images/howto8.jpg)

<span data-ttu-id="33491-109">La barra de menús es en realidad un control de barra de herramientas que se parece a un menú estándar.</span><span class="sxs-lookup"><span data-stu-id="33491-109">The menu bar is actually a toolbar control that looks like a standard menu.</span></span> <span data-ttu-id="33491-110">En lugar de los elementos de menú de nivel superior, una barra de menús tiene una serie de botones de solo texto que muestran un menú desplegable cuando se hace clic en él.</span><span class="sxs-lookup"><span data-stu-id="33491-110">Instead of top-level menu items, a menu bar has a series of text-only buttons that display a drop-down menu when clicked.</span></span> <span data-ttu-id="33491-111">Sin embargo, como un tipo especializado de barra de herramientas, una barra de menús tiene algunas capacidades que carecen de los menús estándar:</span><span class="sxs-lookup"><span data-stu-id="33491-111">However, as a specialized type of toolbar, a menu bar has some capabilities that standard menus lack:</span></span>

-   <span data-ttu-id="33491-112">Se puede personalizar mediante técnicas de barra de herramientas estándar, lo que permite al usuario desplace, elimine o agregue elementos.</span><span class="sxs-lookup"><span data-stu-id="33491-112">It can be customized using standard toolbar techniques, allowing the user to move, delete, or add items.</span></span>
-   <span data-ttu-id="33491-113">Puede tener un seguimiento activo, de modo que los usuarios sepan cuándo están sobre un elemento de nivel superior sin tener que hacer clic primero en él.</span><span class="sxs-lookup"><span data-stu-id="33491-113">It can have hot-tracking, so that users will know when they are over a top-level item without having to click it first.</span></span>

<span data-ttu-id="33491-114">Una barra de menús se puede incorporar a un control rebar, lo que le ofrece las siguientes características:</span><span class="sxs-lookup"><span data-stu-id="33491-114">A menu bar can be incorporated into a rebar control, giving it the following features:</span></span>

-   <span data-ttu-id="33491-115">Puede tener un agarrador, que permite al usuario desplace o cambie el tamaño de la banda.</span><span class="sxs-lookup"><span data-stu-id="33491-115">It can have a gripper, which allows the user to move or resize the band.</span></span>
-   <span data-ttu-id="33491-116">Puede compartir una franja en el control rebar con otras bandas, como la barra de herramientas estándar de la ilustración anterior.</span><span class="sxs-lookup"><span data-stu-id="33491-116">It can share a strip in the rebar control with other bands, such as the standard toolbar in the preceding illustration.</span></span>
-   <span data-ttu-id="33491-117">Puede mostrar un botón de contenido adicional cuando está incluido en una banda adyacente, lo que permite al usuario acceder a los elementos ocultos.</span><span class="sxs-lookup"><span data-stu-id="33491-117">It can display a chevron when it is covered by an adjacent band, giving the user access to the hidden items.</span></span>
-   <span data-ttu-id="33491-118">Puede tener un mapa de bits de fondo definido por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="33491-118">It can have an application-defined background bitmap.</span></span>

<span data-ttu-id="33491-119">En este tema se describe cómo implementar una barra de menús.</span><span class="sxs-lookup"><span data-stu-id="33491-119">This topic discusses how to implement a menu bar.</span></span> <span data-ttu-id="33491-120">Puesto que una barra de menús es una implementación especializada de un control de barra de herramientas, el foco se centrará en los temas específicos de las barras de menús.</span><span class="sxs-lookup"><span data-stu-id="33491-120">Since a menu bar is a specialized implementation of a toolbar control, the focus will be on topics that are specific to menu bars.</span></span> <span data-ttu-id="33491-121">Para obtener una explicación de cómo incorporar una barra de herramientas a un control rebar, vea [Cómo crear una barra de herramientas de Explorer-Style de Internet](cc-faq-ietoolbar.md) y [acerca de los controles rebar](rebar-controls.md).</span><span class="sxs-lookup"><span data-stu-id="33491-121">For a discussion of how to incorporate a toolbar into a rebar control, see [How to Create an Internet Explorer-Style Toolbar](cc-faq-ietoolbar.md) and [About Rebar Controls](rebar-controls.md).</span></span>

-   [<span data-ttu-id="33491-122">Crear una barra de herramientas en una barra de menús</span><span class="sxs-lookup"><span data-stu-id="33491-122">Making a Toolbar into a Menu Bar</span></span>](#making-a-toolbar-into-a-menu-bar)
-   [<span data-ttu-id="33491-123">Controlar la navegación con el menú Hot-Tracking deshabilitado</span><span class="sxs-lookup"><span data-stu-id="33491-123">Handling Navigation with Menu Hot-Tracking Disabled</span></span>](#handling-navigation-with-menu-hot-tracking-disabled)
    -   [<span data-ttu-id="33491-124">Navegación con el mouse</span><span class="sxs-lookup"><span data-stu-id="33491-124">Mouse Navigation</span></span>](#mouse-navigation)
    -   [<span data-ttu-id="33491-125">Navegación con el teclado</span><span class="sxs-lookup"><span data-stu-id="33491-125">Keyboard Navigation</span></span>](#keyboard-navigation)
    -   [<span data-ttu-id="33491-126">Navegación mixta</span><span class="sxs-lookup"><span data-stu-id="33491-126">Mixed Navigation</span></span>](#mixed-navigation)
-   [<span data-ttu-id="33491-127">Controlar la navegación con el Hot-Tracking de menús habilitado</span><span class="sxs-lookup"><span data-stu-id="33491-127">Handling Navigation with Menu Hot-Tracking Enabled</span></span>](#handling-navigation-with-menu-hot-tracking-enabled)
    -   [<span data-ttu-id="33491-128">Procesamiento de mensajes para el seguimiento activo de menús</span><span class="sxs-lookup"><span data-stu-id="33491-128">Message Processing for Menu Hot-Tracking</span></span>](#message-processing-for-menu-hot-tracking)
    -   [<span data-ttu-id="33491-129">Navegación con el mouse</span><span class="sxs-lookup"><span data-stu-id="33491-129">Mouse Navigation</span></span>](#mouse-navigation)
    -   [<span data-ttu-id="33491-130">Navegación con el teclado</span><span class="sxs-lookup"><span data-stu-id="33491-130">Keyboard Navigation</span></span>](#keyboard-navigation)

## <a name="making-a-toolbar-into-a-menu-bar"></a><span data-ttu-id="33491-131">Crear una barra de herramientas en una barra de menús</span><span class="sxs-lookup"><span data-stu-id="33491-131">Making a Toolbar into a Menu Bar</span></span>

<span data-ttu-id="33491-132">Para crear una barra de herramientas en una barra de menús:</span><span class="sxs-lookup"><span data-stu-id="33491-132">To make a toolbar into a menu bar:</span></span>

-   <span data-ttu-id="33491-133">Cree una barra de herramientas plana incluyendo [**TBSTYLE \_ plano**](toolbar-control-and-button-styles.md) con las demás marcas de estilo de ventana.</span><span class="sxs-lookup"><span data-stu-id="33491-133">Create a flat toolbar by including [**TBSTYLE\_FLAT**](toolbar-control-and-button-styles.md) with the other window style flags.</span></span> <span data-ttu-id="33491-134">El **estilo \_ plano TBSTYLE** también habilita el seguimiento activo.</span><span class="sxs-lookup"><span data-stu-id="33491-134">The **TBSTYLE\_FLAT** style also enables hot-tracking.</span></span> <span data-ttu-id="33491-135">Con este estilo, la barra de menús tiene un aspecto muy similar al de un menú estándar hasta que el usuario activa un botón.</span><span class="sxs-lookup"><span data-stu-id="33491-135">With this style, the menu bar looks much like a standard menu until the user activates a button.</span></span> <span data-ttu-id="33491-136">A continuación, el botón parece salir de la barra de herramientas y dejar de presionar cuando se hace clic en él, al igual que un botón estándar.</span><span class="sxs-lookup"><span data-stu-id="33491-136">Then, the button appears to stand out from the toolbar and depress when it is clicked, just like a standard button.</span></span> <span data-ttu-id="33491-137">Dado que está habilitado el seguimiento activo, todo lo que se necesita para activar un botón es que el cursor mantenga el mouse sobre él.</span><span class="sxs-lookup"><span data-stu-id="33491-137">Because hot-tracking is enabled, all that is needed to activate a button is for the cursor to hover over it.</span></span> <span data-ttu-id="33491-138">Si el cursor se mueve a otro botón, se activará y se desactivará el botón anterior.</span><span class="sxs-lookup"><span data-stu-id="33491-138">If the cursor moves to another button, it will be activated and the old button deactivated.</span></span>
-   <span data-ttu-id="33491-139">Cree botones de estilo de lista incluyendo [**la \_ lista TBSTYLE**](toolbar-control-and-button-styles.md) con las demás marcas de estilo de ventana.</span><span class="sxs-lookup"><span data-stu-id="33491-139">Create list-style buttons by including [**TBSTYLE\_LIST**](toolbar-control-and-button-styles.md) with the other window style flags.</span></span> <span data-ttu-id="33491-140">Este estilo crea un botón más delgado que es más parecido a un elemento de menú de nivel superior estándar.</span><span class="sxs-lookup"><span data-stu-id="33491-140">This style creates a thinner button that looks more like a standard top-level menu item.</span></span>
-   <span data-ttu-id="33491-141">Para que los botones sean de solo texto, establezca el miembro **iBitmap** de la estructura [**TBBUTTON**](/windows/desktop/api/Commctrl/ns-commctrl-tbbutton) del botón en I \_ IMAGENONE y el miembro **iString** en el texto del botón.</span><span class="sxs-lookup"><span data-stu-id="33491-141">Make the buttons text-only by setting the **iBitmap** member of the button's [**TBBUTTON**](/windows/desktop/api/Commctrl/ns-commctrl-tbbutton) structure to I\_IMAGENONE and the **iString** member to the button text.</span></span>
-   <span data-ttu-id="33491-142">Asigne a cada botón el estilo de [**\_ lista desplegable BTNS**](toolbar-control-and-button-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="33491-142">Give each button the [**BTNS\_DROPDOWN**](toolbar-control-and-button-styles.md) style.</span></span> <span data-ttu-id="33491-143">Al hacer clic en el botón, el control de barra de herramientas envía a la aplicación una notificación [ \_ desplegable de TBN](tbn-dropdown.md) para pedirle que muestre el menú del botón.</span><span class="sxs-lookup"><span data-stu-id="33491-143">When the button is clicked, the toolbar control sends your application a [TBN\_DROPDOWN](tbn-dropdown.md) notification to prompt it to display the button's menu.</span></span>
-   <span data-ttu-id="33491-144">Incorpore la barra de menús en una banda rebar.</span><span class="sxs-lookup"><span data-stu-id="33491-144">Incorporate the menu bar into a rebar band.</span></span> <span data-ttu-id="33491-145">Habilite los agarradores y las comillas angulares, como [se describe en cómo crear una barra de herramientas de Explorer-Style de Internet](cc-faq-ietoolbar.md).</span><span class="sxs-lookup"><span data-stu-id="33491-145">Enable both grippers and chevrons, as discussed in [How to Create an Internet Explorer-Style Toolbar](cc-faq-ietoolbar.md).</span></span>
-   <span data-ttu-id="33491-146">Implemente un controlador [ \_ desplegable de TBN](tbn-dropdown.md) para mostrar el *menú* desplegable del botón cuando se haga clic en él.</span><span class="sxs-lookup"><span data-stu-id="33491-146">Implement a [TBN\_DROPDOWN](tbn-dropdown.md) handler to display the button's *drop-down menu* when it is clicked.</span></span> <span data-ttu-id="33491-147">El menú desplegable es un tipo de menú emergente.</span><span class="sxs-lookup"><span data-stu-id="33491-147">The drop-down menu is a type of pop-up menu.</span></span> <span data-ttu-id="33491-148">Se crea mediante la función [**TrackPopupMenu**](/windows/desktop/api/winuser/nf-winuser-trackpopupmenu) , con la esquina superior izquierda alineada con la esquina inferior izquierda del botón.</span><span class="sxs-lookup"><span data-stu-id="33491-148">It is created by using the [**TrackPopupMenu**](/windows/desktop/api/winuser/nf-winuser-trackpopupmenu) function, with its upper-left corner aligned with the lower-left corner of the button.</span></span>
-   <span data-ttu-id="33491-149">Implemente la navegación con el teclado, de modo que la barra de menús sea totalmente accesible sin un mouse.</span><span class="sxs-lookup"><span data-stu-id="33491-149">Implement keyboard navigation, so that the menu bar is fully accessible without a mouse.</span></span>
-   <span data-ttu-id="33491-150">Implemente el seguimiento activo del menú.</span><span class="sxs-lookup"><span data-stu-id="33491-150">Implement menu hot-tracking.</span></span> <span data-ttu-id="33491-151">Con los menús estándar, una vez que se muestra el menú de un elemento de menú de nivel superior, al mover el cursor sobre otro elemento de nivel superior, se muestra automáticamente el menú y se contrae el menú del elemento anterior.</span><span class="sxs-lookup"><span data-stu-id="33491-151">With standard menus, once a top level menu item's menu has been displayed, moving the cursor over another top-level item automatically displays its menu and collapses the menu of the previous item.</span></span> <span data-ttu-id="33491-152">El control de barra de herramientas realizará un seguimiento del cursor y cambiará la imagen del botón, pero mostrará automáticamente el nuevo menú.</span><span class="sxs-lookup"><span data-stu-id="33491-152">The toolbar control will hot-track the cursor and change the button image, but it does automatically display the new menu.</span></span> <span data-ttu-id="33491-153">La aplicación debe hacerlo explícitamente.</span><span class="sxs-lookup"><span data-stu-id="33491-153">Your application must do so explicitly.</span></span>

<span data-ttu-id="33491-154">La mayoría de estos elementos son sencillos de implementar y se tratan en otro lugar.</span><span class="sxs-lookup"><span data-stu-id="33491-154">Most of these items are straightforward to implement and are discussed elsewhere.</span></span> <span data-ttu-id="33491-155">Vea [Cómo crear una barra de herramientas de Explorer-Style de Internet](cc-faq-ietoolbar.md), [acerca de los controles de barra de herramientas](toolbar-controls-overview.md)o acerca de [los controles rebar](rebar-controls.md) para obtener una explicación general sobre cómo utilizar las barras de herramientas y los controles rebar.</span><span class="sxs-lookup"><span data-stu-id="33491-155">See [How to Create an Internet Explorer-Style Toolbar](cc-faq-ietoolbar.md), [About Toolbar Controls](toolbar-controls-overview.md), or [About Rebar Controls](rebar-controls.md) for a general discussion of how to use toolbars and rebar controls.</span></span> <span data-ttu-id="33491-156">Vea [menús](/windows/desktop/menurc/menus) para obtener una explicación de cómo controlar los menús emergentes.</span><span class="sxs-lookup"><span data-stu-id="33491-156">See [Menus](/windows/desktop/menurc/menus) for a discussion of how to handle pop-up menus.</span></span> <span data-ttu-id="33491-157">En el resto de este tema se explican los dos últimos elementos, la navegación con el teclado y el seguimiento de los menús.</span><span class="sxs-lookup"><span data-stu-id="33491-157">The final two items, keyboard navigation and menu hot-tracking, are discussed in the remainder of this topic.</span></span>

## <a name="handling-navigation-with-menu-hot-tracking-disabled"></a><span data-ttu-id="33491-158">Controlar la navegación con el menú Hot-Tracking deshabilitado</span><span class="sxs-lookup"><span data-stu-id="33491-158">Handling Navigation with Menu Hot-Tracking Disabled</span></span>

<span data-ttu-id="33491-159">Los usuarios pueden elegir entre desplazarse por la barra de menús con el mouse, el teclado o una combinación de ambos.</span><span class="sxs-lookup"><span data-stu-id="33491-159">Users can choose to navigate the menu bar with the mouse, the keyboard, or a mixture of both.</span></span> <span data-ttu-id="33491-160">Para implementar la navegación por la barra de menús, la aplicación debe controlar las notificaciones de la barra de herramientas y supervisar el mouse y el teclado.</span><span class="sxs-lookup"><span data-stu-id="33491-160">To implement menu bar navigation, your application must handle toolbar notifications and monitor the mouse and keyboard.</span></span> <span data-ttu-id="33491-161">Esta tarea se puede dividir en dos partes distintas: con y sin seguimiento activo de menús.</span><span class="sxs-lookup"><span data-stu-id="33491-161">This task can be broken into two distinct parts: with and without menu hot-tracking.</span></span> <span data-ttu-id="33491-162">En esta sección se describe cómo controlar la navegación cuando no se muestra ningún menú y el seguimiento activo del menú no está habilitado.</span><span class="sxs-lookup"><span data-stu-id="33491-162">This section discusses how to handle navigation when no menus are displayed and menu hot-tracking is not enabled.</span></span>

### <a name="mouse-navigation"></a><span data-ttu-id="33491-163">Navegación con el mouse</span><span class="sxs-lookup"><span data-stu-id="33491-163">Mouse Navigation</span></span>

<span data-ttu-id="33491-164">Si el seguimiento activo de menú está deshabilitado, puede tratar una barra de menús como una barra de herramientas normal.</span><span class="sxs-lookup"><span data-stu-id="33491-164">If menu hot-tracking is disabled, you can treat a menu bar as a normal toolbar.</span></span> <span data-ttu-id="33491-165">Si el usuario navega por un mouse, todo lo que tiene que hacer la aplicación es controlar la notificación de [ \_ desplegable TBN](tbn-dropdown.md) .</span><span class="sxs-lookup"><span data-stu-id="33491-165">If the user is navigating with a mouse, all your application needs to do is handle the [TBN\_DROPDOWN](tbn-dropdown.md) notification.</span></span> <span data-ttu-id="33491-166">Cuando se reciba esta notificación, mostrar el menú desplegable correspondiente y habilitar el seguimiento activo del menú.</span><span class="sxs-lookup"><span data-stu-id="33491-166">When this notification is received, display the appropriate drop-down menu, and enable menu hot-tracking.</span></span> <span data-ttu-id="33491-167">A partir de ese entonces, se encontrará en el régimen de seguimiento de cambios activos descrito en [controlar la navegación con el menú Hot-Tracking habilitado](#handling-navigation-with-menu-hot-tracking-enabled).</span><span class="sxs-lookup"><span data-stu-id="33491-167">From then on, you are in the menu hot-tracking regime discussed in [Handling Navigation with Menu Hot-Tracking Enabled](#handling-navigation-with-menu-hot-tracking-enabled).</span></span>

<span data-ttu-id="33491-168">Como se describe en [navegación mixta](#mixed-navigation), también debe controlar la notificación [de \_ HOTITEMCHANGE de TBN](tbn-hotitemchange.md) para realizar un seguimiento del botón activo.</span><span class="sxs-lookup"><span data-stu-id="33491-168">As discussed in [Mixed Navigation](#mixed-navigation), you also need to handle the [TBN\_HOTITEMCHANGE](tbn-hotitemchange.md) notification to keep track of the active button.</span></span> <span data-ttu-id="33491-169">Esta notificación es irrelevante si el usuario solo está navegando con el mouse, pero es necesario cuando se mezcla la navegación con el mouse y el teclado.</span><span class="sxs-lookup"><span data-stu-id="33491-169">This notification is irrelevant if the user is only navigating with the mouse, but it is necessary when mouse and keyboard navigation are mixed.</span></span>

### <a name="keyboard-navigation"></a><span data-ttu-id="33491-170">Navegación mediante teclado</span><span class="sxs-lookup"><span data-stu-id="33491-170">Keyboard Navigation</span></span>

<span data-ttu-id="33491-171">Como se indicó en la sección anterior, el usuario puede realizar una serie de operaciones de navegación con el teclado cuando el seguimiento activo del menú está deshabilitado.</span><span class="sxs-lookup"><span data-stu-id="33491-171">As noted in the previous section, the user can do a number of navigation operations with the keyboard when menu hot-tracking is disabled.</span></span> <span data-ttu-id="33491-172">Los controles de barra de herramientas solo admiten la navegación con el teclado si tienen el foco.</span><span class="sxs-lookup"><span data-stu-id="33491-172">Toolbar controls support keyboard navigation only if they have focus.</span></span> <span data-ttu-id="33491-173">Tampoco controlan todas las pulsaciones de teclas necesarias para las barras de menús.</span><span class="sxs-lookup"><span data-stu-id="33491-173">They also do not handle all the key presses that are needed for menu bars.</span></span> <span data-ttu-id="33491-174">La solución más sencilla para controlar la navegación mediante el teclado es procesar explícitamente los eventos de presión de teclas relevantes.</span><span class="sxs-lookup"><span data-stu-id="33491-174">The simplest solution to handling keyboard navigation is to process the relevant key press events explicitly.</span></span>

<span data-ttu-id="33491-175">Si el seguimiento activo de menú está deshabilitado, la aplicación debe controlar estos eventos de pulsación de teclas de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="33491-175">If menu hot-tracking is disabled, your application must handle these key press events in the following way:</span></span>

-   <span data-ttu-id="33491-176">Tecla F10.</span><span class="sxs-lookup"><span data-stu-id="33491-176">The F10 key.</span></span> <span data-ttu-id="33491-177">Active el primer botón con [**TB \_ SETHOTITEM**](tb-sethotitem.md).</span><span class="sxs-lookup"><span data-stu-id="33491-177">Activate the first button with [**TB\_SETHOTITEM**](tb-sethotitem.md).</span></span>
-   <span data-ttu-id="33491-178">Las teclas de flecha izquierda y derecha.</span><span class="sxs-lookup"><span data-stu-id="33491-178">The LEFT ARROW and RIGHT ARROW keys.</span></span> <span data-ttu-id="33491-179">Active el botón adyacente con [**TB \_ SETHOTITEM**](tb-sethotitem.md).</span><span class="sxs-lookup"><span data-stu-id="33491-179">Activate the adjacent button with [**TB\_SETHOTITEM**](tb-sethotitem.md).</span></span> <span data-ttu-id="33491-180">Si el usuario intenta navegar fuera de cualquier extremo de la barra de menús, active el primer botón en el extremo opuesto.</span><span class="sxs-lookup"><span data-stu-id="33491-180">If the user attempts to navigate off either end of the menu bar, activate the first button at the opposite end.</span></span>
-   <span data-ttu-id="33491-181">Tecla ESCAPE.</span><span class="sxs-lookup"><span data-stu-id="33491-181">The ESCAPE key.</span></span> <span data-ttu-id="33491-182">Desactivar el botón activo con [**TB \_ SETHOTITEM**](tb-sethotitem.md).</span><span class="sxs-lookup"><span data-stu-id="33491-182">Deactivate the active button with [**TB\_SETHOTITEM**](tb-sethotitem.md).</span></span> <span data-ttu-id="33491-183">La barra de menús debe devolverse al estado que tenía antes de activar el primer botón.</span><span class="sxs-lookup"><span data-stu-id="33491-183">The menu bar should be returned to the state it had prior to activating the first button.</span></span>
-   <span data-ttu-id="33491-184">Tecla de aceleración de *tecla* Alt.</span><span class="sxs-lookup"><span data-stu-id="33491-184">An ALT-*Key* accelerator key.</span></span> <span data-ttu-id="33491-185">Use el mensaje [**TB \_ MAPACCELERATOR**](tb-mapaccelerator.md) para determinar a qué botón corresponde el carácter de *tecla* .</span><span class="sxs-lookup"><span data-stu-id="33491-185">Use the [**TB\_MAPACCELERATOR**](tb-mapaccelerator.md) message to determine which button the *Key* character corresponds to.</span></span> <span data-ttu-id="33491-186">Mostrar el menú desplegable del botón y habilitar el seguimiento activo del menú.</span><span class="sxs-lookup"><span data-stu-id="33491-186">Display the button's drop-down menu and enable menu hot-tracking.</span></span>
-   <span data-ttu-id="33491-187">Tecla FLECHA ABAJO.</span><span class="sxs-lookup"><span data-stu-id="33491-187">The DOWN ARROW key.</span></span> <span data-ttu-id="33491-188">Si un botón está activo pero no se ha mostrado ningún menú, muestre el menú del botón y habilite el seguimiento activo del menú.</span><span class="sxs-lookup"><span data-stu-id="33491-188">If a button is active but no menu has been displayed, display the button's menu and enable menu hot-tracking.</span></span>
-   <span data-ttu-id="33491-189">Tecla ENTRAR.</span><span class="sxs-lookup"><span data-stu-id="33491-189">The ENTER key.</span></span> <span data-ttu-id="33491-190">Desactivar el botón activo con [**TB \_ SETHOTITEM**](tb-sethotitem.md).</span><span class="sxs-lookup"><span data-stu-id="33491-190">Deactivate the active button with [**TB\_SETHOTITEM**](tb-sethotitem.md).</span></span> <span data-ttu-id="33491-191">La barra de menús debe devolverse al estado que tenía antes de activar el primer botón.</span><span class="sxs-lookup"><span data-stu-id="33491-191">The menu bar should be returned to the state it had prior to activating the first button.</span></span>

### <a name="mixed-navigation"></a><span data-ttu-id="33491-192">Navegación mixta</span><span class="sxs-lookup"><span data-stu-id="33491-192">Mixed Navigation</span></span>

<span data-ttu-id="33491-193">Los controladores de navegación de teclado descritos en la sección anterior básicamente realizan dos tareas: realizar un seguimiento del botón activo y mostrar el menú adecuado cuando se selecciona un botón.</span><span class="sxs-lookup"><span data-stu-id="33491-193">The keyboard navigation handlers outlined in the preceding section basically do two tasks: keep track of the active button and display the appropriate menu when a button is selected.</span></span> <span data-ttu-id="33491-194">Estos controladores son suficientes siempre que el usuario navegue solo con el teclado.</span><span class="sxs-lookup"><span data-stu-id="33491-194">These handlers are sufficient as long as the user navigates only with the keyboard.</span></span> <span data-ttu-id="33491-195">Sin embargo, los usuarios suelen mezclar la navegación con el teclado y el mouse.</span><span class="sxs-lookup"><span data-stu-id="33491-195">However, users often mix keyboard and mouse navigation.</span></span> <span data-ttu-id="33491-196">Por ejemplo, pueden activar el primer botón con la tecla F10, usar el mouse para activar otro botón y, a continuación, abrir su menú con la tecla flecha abajo.</span><span class="sxs-lookup"><span data-stu-id="33491-196">For example, they might activate the first button with the F10 key, use the mouse to activate a different button, and then open its menu with the DOWN ARROW key.</span></span> <span data-ttu-id="33491-197">Si solo está supervisando las pulsaciones de teclas para realizar un seguimiento de la clave activa, se mostrará el menú equivocado.</span><span class="sxs-lookup"><span data-stu-id="33491-197">If you are only monitoring key presses to keep track of the active key, you will display the wrong menu.</span></span> <span data-ttu-id="33491-198">También debe controlar la notificación [TBN \_ HOTITEMCHANGE](tbn-hotitemchange.md) para realizar un seguimiento preciso del botón activo.</span><span class="sxs-lookup"><span data-stu-id="33491-198">You must also handle the [TBN\_HOTITEMCHANGE](tbn-hotitemchange.md) notification to accurately keep track of the active button.</span></span>

## <a name="handling-navigation-with-menu-hot-tracking-enabled"></a><span data-ttu-id="33491-199">Controlar la navegación con el Hot-Tracking de menús habilitado</span><span class="sxs-lookup"><span data-stu-id="33491-199">Handling Navigation with Menu Hot-Tracking Enabled</span></span>

<span data-ttu-id="33491-200">Cuando el seguimiento activo del menú está habilitado, la aplicación debe cambiar la manera en que responde a la navegación del usuario.</span><span class="sxs-lookup"><span data-stu-id="33491-200">When menu hot-tracking is enabled, your application must change the way it responds to user navigation.</span></span> <span data-ttu-id="33491-201">Para replicar el comportamiento de los menús estándar, debe implementar las siguientes características explícitamente.</span><span class="sxs-lookup"><span data-stu-id="33491-201">To replicate the behavior of standard menus, you must implement the following features explicitly.</span></span>

<span data-ttu-id="33491-202">Con la navegación del mouse:</span><span class="sxs-lookup"><span data-stu-id="33491-202">With mouse navigation:</span></span>

-   <span data-ttu-id="33491-203">Si el usuario mueve el cursor sobre otro botón, ese menú aparece inmediatamente y desaparece el menú anterior.</span><span class="sxs-lookup"><span data-stu-id="33491-203">If the user moves the cursor over another button, that menu immediately appears and the previous menu disappears.</span></span>
-   <span data-ttu-id="33491-204">El seguimiento activo del menú permanece activo hasta que el usuario selecciona un comando o hace clic en un punto que no forma parte de la región del menú.</span><span class="sxs-lookup"><span data-stu-id="33491-204">Menu hot-tracking stays active until the user selects a command or clicks a point that is not part of the menu region.</span></span> <span data-ttu-id="33491-205">Cualquier acción desactiva el seguimiento activo del menú hasta que se hace clic en otro botón.</span><span class="sxs-lookup"><span data-stu-id="33491-205">Either action deactivates menu hot-tracking until another button is clicked.</span></span>
-   <span data-ttu-id="33491-206">Si el cursor se desplaza fuera del menú, el menú desplegable actual permanece hasta que el cursor se desplaza de nuevo a, o cuando el usuario hace clic en un punto externo, el área que se incluye en el menú.</span><span class="sxs-lookup"><span data-stu-id="33491-206">If the cursor moves off the menu, the current drop-down menu remains until the cursor moves back onto, or the user clicks a point outside, the area covered by the menu.</span></span> <span data-ttu-id="33491-207">Si el cursor vuelve a un botón diferente del que se muestra actualmente, se contrae el menú anterior y se muestra el menú nuevo.</span><span class="sxs-lookup"><span data-stu-id="33491-207">If the cursor returns to a different button than the one currently being displayed, the old menu is collapsed and the new menu is displayed.</span></span>

<span data-ttu-id="33491-208">Con la navegación mediante el teclado:</span><span class="sxs-lookup"><span data-stu-id="33491-208">With keyboard navigation:</span></span>

-   <span data-ttu-id="33491-209">La tecla de flecha derecha mueve el foco a la derecha.</span><span class="sxs-lookup"><span data-stu-id="33491-209">The RIGHT ARROW key moves the focus to the right.</span></span> <span data-ttu-id="33491-210">Si el elemento tiene un submenú, muestre el submenú.</span><span class="sxs-lookup"><span data-stu-id="33491-210">If the item has a submenu, display the submenu.</span></span> <span data-ttu-id="33491-211">Si el elemento no tiene un submenú, contraiga el menú y los submenús, active el botón siguiente con [**TB \_ SETHOTITEM**](tb-sethotitem.md)y muestre el menú del botón adyacente.</span><span class="sxs-lookup"><span data-stu-id="33491-211">If the item does not have a submenu, collapse the menu and any submenus, activate the next button with [**TB\_SETHOTITEM**](tb-sethotitem.md), and display the menu for the adjacent button.</span></span> <span data-ttu-id="33491-212">Si el último botón está activo cuando se recibe este mensaje, muestra el menú del primer botón.</span><span class="sxs-lookup"><span data-stu-id="33491-212">If the last button is active when this message is received, display the menu for the first button.</span></span>
-   <span data-ttu-id="33491-213">La tecla de flecha izquierda mueve el foco a la izquierda.</span><span class="sxs-lookup"><span data-stu-id="33491-213">The LEFT ARROW key moves the focus to the left.</span></span> <span data-ttu-id="33491-214">Si el elemento es un submenú, debe contraerlo y cambiar el foco a su menú primario.</span><span class="sxs-lookup"><span data-stu-id="33491-214">If the item is a submenu, collapse it and shift focus to its parent menu.</span></span> <span data-ttu-id="33491-215">Si el elemento no es un submenú, contraiga el menú, active el botón siguiente con [**TB \_ SETHOTITEM**](tb-sethotitem.md)y muestre el menú de ese botón.</span><span class="sxs-lookup"><span data-stu-id="33491-215">If the item is not a submenu, collapse the menu, activate the next button with [**TB\_SETHOTITEM**](tb-sethotitem.md), and display the menu for that button.</span></span>

<!-- -->

-   <span data-ttu-id="33491-216">La tecla ESCAPE hace una copia de seguridad de la pantalla en un solo paso.</span><span class="sxs-lookup"><span data-stu-id="33491-216">The ESCAPE key backs the display up one step.</span></span>
    -   <span data-ttu-id="33491-217">Si se muestra un submenú, se contrae y el foco se desplaza hasta el menú primario.</span><span class="sxs-lookup"><span data-stu-id="33491-217">If a submenu is displayed, it is collapsed and focus shifts to the parent menu.</span></span>
    -   <span data-ttu-id="33491-218">Si se muestra el menú de un botón, se contrae y el seguimiento activo del menú está deshabilitado.</span><span class="sxs-lookup"><span data-stu-id="33491-218">If a button's menu is displayed, it is collapsed and menu hot-tracking is disabled.</span></span> <span data-ttu-id="33491-219">El botón del elemento permanece activo.</span><span class="sxs-lookup"><span data-stu-id="33491-219">The item's button remains active.</span></span>
    -   <span data-ttu-id="33491-220">Si no se muestra ningún menú pero hay un botón activo, el botón está desactivado y el seguimiento activo del menú está deshabilitado.</span><span class="sxs-lookup"><span data-stu-id="33491-220">If no menus are displayed but a button is active, the button is deactivated and menu hot-tracking is disabled.</span></span>
-   <span data-ttu-id="33491-221">Las teclas flecha arriba y flecha abajo solo se usan para navegar dentro de un menú determinado.</span><span class="sxs-lookup"><span data-stu-id="33491-221">The UP ARROW and DOWN ARROW keys are used only to navigate within a particular menu.</span></span>
-   <span data-ttu-id="33491-222">La tecla entrar inicia el comando asociado a un elemento de menú.</span><span class="sxs-lookup"><span data-stu-id="33491-222">The ENTER key launches the command associated with a menu item.</span></span> <span data-ttu-id="33491-223">Si el elemento de menú tiene un submenú, la tecla entrar lo muestra.</span><span class="sxs-lookup"><span data-stu-id="33491-223">If the menu item has a submenu, the ENTER key displays it.</span></span>

<span data-ttu-id="33491-224">Al igual que en el caso de los menús deshabilitados de seguimiento activo, la aplicación debe ser capaz de controlar el mouse, el teclado y la navegación mixta.</span><span class="sxs-lookup"><span data-stu-id="33491-224">As with the menu hot-tracking disabled case, your application must be able to handle mouse, keyboard, and mixed navigation.</span></span> <span data-ttu-id="33491-225">Sin embargo, el hecho de que se muestre un menú significa que la mensajería tendrá que administrarse de un modo diferente.</span><span class="sxs-lookup"><span data-stu-id="33491-225">However, the fact that a menu is displayed means that messaging will have to be handled somewhat differently.</span></span>

### <a name="message-processing-for-menu-hot-tracking"></a><span data-ttu-id="33491-226">Procesamiento de mensajes para Hot-Tracking de menú</span><span class="sxs-lookup"><span data-stu-id="33491-226">Message Processing for Menu Hot-Tracking</span></span>

<span data-ttu-id="33491-227">El seguimiento activo del menú requiere que se muestre un menú en todo momento, además del breve intervalo necesario para cambiar a un nuevo menú.</span><span class="sxs-lookup"><span data-stu-id="33491-227">Menu hot-tracking requires that a menu be displayed at all times, apart from the brief interval required to switch to a new menu.</span></span> <span data-ttu-id="33491-228">Sin embargo, el menú desplegable que muestra [**TrackPopupMenu**](/windows/desktop/api/winuser/nf-winuser-trackpopupmenu) es modal.</span><span class="sxs-lookup"><span data-stu-id="33491-228">However, the drop-down menu that is displayed by [**TrackPopupMenu**](/windows/desktop/api/winuser/nf-winuser-trackpopupmenu) is modal.</span></span> <span data-ttu-id="33491-229">La aplicación seguirá recibiendo algunos mensajes directamente, incluido el [**\_ comando de WM**](/windows/desktop/menurc/wm-command), [TBN \_ HOTITEMCHANGE](tbn-hotitemchange.md)y mensajes de menú normales, como [**WM \_ MENUSELECT**](/windows/desktop/menurc/wm-menuselect).</span><span class="sxs-lookup"><span data-stu-id="33491-229">Your application will continue to receive some messages directly, including [**WM\_COMMAND**](/windows/desktop/menurc/wm-command), [TBN\_HOTITEMCHANGE](tbn-hotitemchange.md), and normal menu-related messages such as [**WM\_MENUSELECT**](/windows/desktop/menurc/wm-menuselect).</span></span> <span data-ttu-id="33491-230">Sin embargo, no recibirá directamente mensajes de teclado o de mouse de bajo nivel.</span><span class="sxs-lookup"><span data-stu-id="33491-230">However, it will not receive low-level keyboard or mouse messages directly.</span></span> <span data-ttu-id="33491-231">Para controlar mensajes como [**WM \_ MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove), debe establecer un enlace de mensaje para interceptar los mensajes que se dirigen al menú.</span><span class="sxs-lookup"><span data-stu-id="33491-231">To handle messages such as [**WM\_MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove), you must set a message hook to intercept messages that are directed to the menu.</span></span>

<span data-ttu-id="33491-232">Cuando se muestra un menú desplegable, establezca el enlace del mensaje mediante una llamada a la función [**SetWindowsHookEx**](/windows/desktop/api/winuser/nf-winuser-setwindowshookexa) con el parámetro *IDHOOK* establecido en qu \_ MSGFILTER.</span><span class="sxs-lookup"><span data-stu-id="33491-232">When a drop-down menu is displayed, set the message hook by calling the [**SetWindowsHookEx**](/windows/desktop/api/winuser/nf-winuser-setwindowshookexa) function with the *idHook* parameter set to WH\_MSGFILTER.</span></span> <span data-ttu-id="33491-233">Todos los mensajes destinados al menú se pasarán al [procedimiento de enlace](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="33491-233">All messages intended for the menu will be passed to your [hook procedure](/previous-versions/windows/desktop/legacy/ms644987(v=vs.85)).</span></span> <span data-ttu-id="33491-234">Por ejemplo, el fragmento de código siguiente establece un enlace de mensaje que interceptará los mensajes que vayan a un menú desplegable.</span><span class="sxs-lookup"><span data-stu-id="33491-234">For example, the following code fragment sets a message hook that will trap messages that are going to a drop-down menu.</span></span> <span data-ttu-id="33491-235">`MsgHook` es el nombre del procedimiento de enlace y `hhookMsg` es el identificador del procedimiento.</span><span class="sxs-lookup"><span data-stu-id="33491-235">`MsgHook` is the name of the hook procedure, and `hhookMsg` is the handle to the procedure.</span></span>


```
hhookMsg = SetWindowsHookEx(WH_MSGFILTER, MsgHook, HINST_THISDLL, 0);
```



<span data-ttu-id="33491-236">Los mensajes de menú se identifican estableciendo el parámetro *nCode* del procedimiento de enlace en el \_ menú MSGF.</span><span class="sxs-lookup"><span data-stu-id="33491-236">Menu messages are identified by setting the hook procedure's *nCode* parameter to MSGF\_MENU.</span></span> <span data-ttu-id="33491-237">El parámetro *lParam* apuntará a una estructura [**MSG**](/windows/win32/api/winuser/ns-winuser-msg) con el mensaje.</span><span class="sxs-lookup"><span data-stu-id="33491-237">The *lParam* parameter will point to a [**MSG**](/windows/win32/api/winuser/ns-winuser-msg) structure with the message.</span></span> <span data-ttu-id="33491-238">En el resto de este tema se explican los detalles de los mensajes que se deben controlar y cómo hacerlo.</span><span class="sxs-lookup"><span data-stu-id="33491-238">The details of which messages need to be handled, and how, are discussed in the remainder of this topic.</span></span>

<span data-ttu-id="33491-239">La aplicación debe pasar todos los mensajes al siguiente enlace de mensaje mediante una llamada a la función [**CallNextHookEx**](/windows/desktop/api/winuser/nf-winuser-callnexthookex) .</span><span class="sxs-lookup"><span data-stu-id="33491-239">Your application must pass all messages on to the next message hook by calling the [**CallNextHookEx**](/windows/desktop/api/winuser/nf-winuser-callnexthookex) function.</span></span> <span data-ttu-id="33491-240">También debe enviar los mensajes del mouse directamente al control de barra de herramientas, asegurándose de convertir las coordenadas del punto en el espacio de coordenadas del cliente de la barra de herramientas.</span><span class="sxs-lookup"><span data-stu-id="33491-240">You must also send mouse messages directly to the toolbar control, making sure to convert any point coordinates to the toolbar client coordinate space.</span></span> <span data-ttu-id="33491-241">El envío de los mensajes directamente garantiza que el control de barra de herramientas reciba los mensajes de mouse correspondientes.</span><span class="sxs-lookup"><span data-stu-id="33491-241">Sending the messages directly ensures that the toolbar control receives the appropriate mouse messages.</span></span> <span data-ttu-id="33491-242">Por ejemplo, la barra de herramientas debe recibir mensajes de [**WM \_ MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) para realizar un seguimiento activo de sus botones.</span><span class="sxs-lookup"><span data-stu-id="33491-242">For instance, the toolbar needs to receive [**WM\_MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) messages in order to hot-track its buttons.</span></span>

<span data-ttu-id="33491-243">Cuando se activa un botón nuevo, la aplicación debe contraer el menú desplegable anterior con un mensaje de [**\_ CANCELMODE de WM**](/windows/desktop/winmsg/wm-cancelmode) y mostrar un menú nuevo.</span><span class="sxs-lookup"><span data-stu-id="33491-243">When a new button is activated, your application must collapse the old drop-down menu with a [**WM\_CANCELMODE**](/windows/desktop/winmsg/wm-cancelmode) message, and display a new menu.</span></span> <span data-ttu-id="33491-244">También debe contraer el menú desplegable cuando el foco se realiza desde la barra de menús con la navegación mediante el teclado o haciendo clic fuera del área de menús.</span><span class="sxs-lookup"><span data-stu-id="33491-244">It must also collapse the drop-down menu when focus is taken from the menu bar with keyboard navigation or by clicking outside the menu area.</span></span> <span data-ttu-id="33491-245">Siempre que se contrae un menú, debe liberar su enlace de mensaje mediante la función [**UnhookWindowsHookEx**](/windows/desktop/api/winuser/nf-winuser-unhookwindowshookex) .</span><span class="sxs-lookup"><span data-stu-id="33491-245">Whenever you collapse a menu, you should free its message hook by using the [**UnhookWindowsHookEx**](/windows/desktop/api/winuser/nf-winuser-unhookwindowshookex) function.</span></span> <span data-ttu-id="33491-246">Si necesita mostrar otro menú desplegable, cree un nuevo enlace de mensaje.</span><span class="sxs-lookup"><span data-stu-id="33491-246">If you need to display another drop-down menu, create a new message hook.</span></span> <span data-ttu-id="33491-247">Cuando se inicia un comando, el menú se contrae automáticamente, pero debe liberar explícitamente el enlace del mensaje.</span><span class="sxs-lookup"><span data-stu-id="33491-247">When a command is launched, the menu will be collapsed automatically but you must explicitly free the message hook.</span></span>

<span data-ttu-id="33491-248">En el ejemplo de código siguiente se libera el enlace del mensaje que se estableció en el ejemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="33491-248">The following code example frees the message hook that was set in the previous example.</span></span>


```
UnhookWindowsHookEx(hhookMsg);
```



### <a name="mouse-navigation"></a><span data-ttu-id="33491-249">Navegación con el mouse</span><span class="sxs-lookup"><span data-stu-id="33491-249">Mouse Navigation</span></span>

<span data-ttu-id="33491-250">Cuando un control de barra de herramientas normal realiza un seguimiento activo de los botones, resalta el botón activo y envía a la aplicación una notificación de [TBN \_ HOTITEMCHANGE](tbn-hotitemchange.md) cada vez que se activa un botón nuevo.</span><span class="sxs-lookup"><span data-stu-id="33491-250">When a normal toolbar control hot-tracks buttons, it highlights the active button and sends the application a [TBN\_HOTITEMCHANGE](tbn-hotitemchange.md) notification each time a new button is activated.</span></span> <span data-ttu-id="33491-251">La aplicación es responsable de mostrar el menú desplegable adecuado.</span><span class="sxs-lookup"><span data-stu-id="33491-251">Your application is responsible for displaying the appropriate drop-down menu.</span></span> <span data-ttu-id="33491-252">Así, debe:</span><span class="sxs-lookup"><span data-stu-id="33491-252">It must:</span></span>

-   <span data-ttu-id="33491-253">Controle la notificación de [ \_ HOTITEMCHANGE de TBN](tbn-hotitemchange.md) para realizar un seguimiento del botón activo.</span><span class="sxs-lookup"><span data-stu-id="33491-253">Handle the [TBN\_HOTITEMCHANGE](tbn-hotitemchange.md) notification to keep track of the active button.</span></span> <span data-ttu-id="33491-254">Cuando el botón activo cambie, contraiga el menú anterior y cree uno nuevo.</span><span class="sxs-lookup"><span data-stu-id="33491-254">When the active button changes, collapse the old menu and create a new one.</span></span>
-   <span data-ttu-id="33491-255">Controle la notificación de [ \_ desplegable TBN](tbn-dropdown.md) que se envía cuando se hace clic en un botón.</span><span class="sxs-lookup"><span data-stu-id="33491-255">Handle the [TBN\_DROPDOWN](tbn-dropdown.md) notification that is sent when a button is clicked.</span></span> <span data-ttu-id="33491-256">A continuación, debe contraer el menú y deshabilitar el seguimiento activo del menú.</span><span class="sxs-lookup"><span data-stu-id="33491-256">It should then collapse the menu and disable menu hot-tracking.</span></span> <span data-ttu-id="33491-257">El botón permanece activo.</span><span class="sxs-lookup"><span data-stu-id="33491-257">The button remains active.</span></span>
-   <span data-ttu-id="33491-258">Controle los mensajes [**WM \_ LBUTTONDOWN**](/windows/desktop/inputdev/wm-lbuttondown), [**WM \_ RBUTTONDOWN**](/windows/desktop/inputdev/wm-rbuttondown)y [**WM \_ MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) en el procedimiento de enlace de mensajes, para realizar un seguimiento de la posición del mouse.</span><span class="sxs-lookup"><span data-stu-id="33491-258">Handle the [**WM\_LBUTTONDOWN**](/windows/desktop/inputdev/wm-lbuttondown), [**WM\_RBUTTONDOWN**](/windows/desktop/inputdev/wm-rbuttondown), and [**WM\_MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) messages in your message hook procedure, to keep track of the mouse position.</span></span> <span data-ttu-id="33491-259">Si se hace clic en el mouse fuera del área de menú, contraiga el menú desplegable actual, desactive el seguimiento activo del menú y devuelva la barra de menús a su estado de preactivación.</span><span class="sxs-lookup"><span data-stu-id="33491-259">If the mouse is clicked outside the menu area, collapse the current drop-down menu, deactivate menu hot-tracking, and return the menu bar to its preactivation state.</span></span>
-   <span data-ttu-id="33491-260">Cuando se inicia un comando de menú, deshabilite el seguimiento activo del menú.</span><span class="sxs-lookup"><span data-stu-id="33491-260">When a menu command is launched, disable menu hot-tracking.</span></span> <span data-ttu-id="33491-261">El menú se contraerá automáticamente, pero debe liberar explícitamente el enlace del mensaje.</span><span class="sxs-lookup"><span data-stu-id="33491-261">The menu will be collapsed automatically but you must explicitly free the message hook.</span></span>

<span data-ttu-id="33491-262">También debe controlar la mensajería relacionada con menús, como el mensaje de [**\_ INITMENUPOPUP de WM**](/windows/desktop/menurc/wm-initmenupopup) que se envía cuando un elemento de menú necesita mostrar un submenú.</span><span class="sxs-lookup"><span data-stu-id="33491-262">You must also handle menu-related messaging, such as the [**WM\_INITMENUPOPUP**](/windows/desktop/menurc/wm-initmenupopup) message that is sent when a menu item needs to display a submenu.</span></span> <span data-ttu-id="33491-263">Para obtener una explicación de cómo controlar estos mensajes, vea [menús](/windows/desktop/menurc/menus).</span><span class="sxs-lookup"><span data-stu-id="33491-263">For a discussion of how to handle such messages, see [Menus](/windows/desktop/menurc/menus).</span></span>

### <a name="keyboard-navigation"></a><span data-ttu-id="33491-264">Navegación mediante teclado</span><span class="sxs-lookup"><span data-stu-id="33491-264">Keyboard Navigation</span></span>

<span data-ttu-id="33491-265">La aplicación debe procesar los mensajes del teclado en el procedimiento de enlace de mensajes y actuar sobre los que afectan al seguimiento activo del menú.</span><span class="sxs-lookup"><span data-stu-id="33491-265">Your application must process keyboard messages in the message hook procedure and act on those that affect menu hot-tracking.</span></span> <span data-ttu-id="33491-266">Se deben administrar las siguientes presiones de tecla:</span><span class="sxs-lookup"><span data-stu-id="33491-266">The following key presses must be handled:</span></span>

-   <span data-ttu-id="33491-267">Tecla ESCAPE.</span><span class="sxs-lookup"><span data-stu-id="33491-267">The ESCAPE key.</span></span> <span data-ttu-id="33491-268">La tecla ESCAPE hace una copia de seguridad de la presentación un nivel.</span><span class="sxs-lookup"><span data-stu-id="33491-268">The ESCAPE key backs the display up one level.</span></span> <span data-ttu-id="33491-269">Si se muestra un submenú, debe contraerse.</span><span class="sxs-lookup"><span data-stu-id="33491-269">If a submenu is being displayed, it must be collapsed.</span></span> <span data-ttu-id="33491-270">Si se muestra el menú principal de un botón, contraigalo y deshabilite el seguimiento activo del menú.</span><span class="sxs-lookup"><span data-stu-id="33491-270">If a button's primary menu is displayed, collapse it and disable menu hot-tracking.</span></span> <span data-ttu-id="33491-271">El botón permanece activo.</span><span class="sxs-lookup"><span data-stu-id="33491-271">The button remains active.</span></span>
-   <span data-ttu-id="33491-272">Tecla FLECHA DERECHA.</span><span class="sxs-lookup"><span data-stu-id="33491-272">The RIGHT ARROW key.</span></span> <span data-ttu-id="33491-273">Si el elemento tiene un submenú, lo muestra.</span><span class="sxs-lookup"><span data-stu-id="33491-273">If the item has a submenu, display it.</span></span> <span data-ttu-id="33491-274">Si el elemento no tiene un submenú, contraiga el menú y los submenús, active el botón siguiente con [**TB \_ SETHOTITEM**](tb-sethotitem.md)y muestre el menú.</span><span class="sxs-lookup"><span data-stu-id="33491-274">If the item does not have a submenu, collapse the menu and any submenus, activate the next button with [**TB\_SETHOTITEM**](tb-sethotitem.md), and display its menu.</span></span> <span data-ttu-id="33491-275">Si el último botón estaba activo cuando se recibió esta notificación, muestre el menú del primer botón.</span><span class="sxs-lookup"><span data-stu-id="33491-275">If the last button was active when this notification was received, display the menu for the first button.</span></span>
-   <span data-ttu-id="33491-276">Tecla FLECHA IZQUIERDA.</span><span class="sxs-lookup"><span data-stu-id="33491-276">The LEFT ARROW key.</span></span> <span data-ttu-id="33491-277">Si el elemento está en un submenú, debe contraerlo y cambiar el foco a su menú primario.</span><span class="sxs-lookup"><span data-stu-id="33491-277">If the item is in a submenu, collapse it and shift focus to its parent menu.</span></span> <span data-ttu-id="33491-278">Si el elemento no es un submenú, contraiga el menú, active el botón adyacente con [**TB \_ SETHOTITEM**](tb-sethotitem.md)y muestre el menú.</span><span class="sxs-lookup"><span data-stu-id="33491-278">If the item is not a submenu, collapse the menu, activate the adjacent button with [**TB\_SETHOTITEM**](tb-sethotitem.md), and display its menu.</span></span> <span data-ttu-id="33491-279">Si el primer botón estaba activo cuando se recibió esta notificación, muestre el menú del último botón.</span><span class="sxs-lookup"><span data-stu-id="33491-279">If the first button was active when this notification was received, display the menu for the last button.</span></span>
-   <span data-ttu-id="33491-280">Las teclas flecha arriba y flecha abajo.</span><span class="sxs-lookup"><span data-stu-id="33491-280">The UP ARROW and DOWN ARROW keys.</span></span> <span data-ttu-id="33491-281">Estas teclas se utilizan para navegar dentro de un menú, pero no afectan directamente al seguimiento activo del menú.</span><span class="sxs-lookup"><span data-stu-id="33491-281">These keys are used to navigate within a menu but do not directly affect menu hot-tracking.</span></span>
-   <span data-ttu-id="33491-282">Tecla de aceleración de *tecla* Alt.</span><span class="sxs-lookup"><span data-stu-id="33491-282">An ALT-*Key* accelerator key.</span></span> <span data-ttu-id="33491-283">Use el mensaje [**TB \_ MAPACCELERATOR**](tb-mapaccelerator.md) para determinar a qué botón corresponde el carácter de *tecla* .</span><span class="sxs-lookup"><span data-stu-id="33491-283">Use the [**TB\_MAPACCELERATOR**](tb-mapaccelerator.md) message to determine which button the *Key* character corresponds to.</span></span> <span data-ttu-id="33491-284">Si corresponde a un botón diferente del que está activo actualmente, contraiga el menú desplegable actual, active el botón nuevo con [**TB \_ SETHOTITEM**](tb-sethotitem.md)y muestre el menú del botón adyacente.</span><span class="sxs-lookup"><span data-stu-id="33491-284">If it corresponds to a different button than the currently active one, collapse the current drop-down menu, activate the new button with [**TB\_SETHOTITEM**](tb-sethotitem.md), and display the menu for the adjacent button.</span></span> <span data-ttu-id="33491-285">Si el *carácter de tecla* corresponde al botón que se muestra actualmente, contraiga el menú desplegable y deshabilite el seguimiento activo del menú.</span><span class="sxs-lookup"><span data-stu-id="33491-285">If the *Key character* corresponds to the currently displayed button, collapse the drop-down menu and disable menu hot-tracking.</span></span> <span data-ttu-id="33491-286">El botón debe permanecer activo.</span><span class="sxs-lookup"><span data-stu-id="33491-286">The button should remain active.</span></span>

 

 