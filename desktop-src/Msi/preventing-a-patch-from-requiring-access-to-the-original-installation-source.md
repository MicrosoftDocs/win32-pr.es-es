---
description: No es posible eliminar todas las circunstancias en las que la aplicación de una revisión puede requerir acceso al origen de instalación original.
ms.assetid: f7028c55-e4a5-4596-af7a-728c9f4f367e
title: Impedir que una revisión requiera acceso al origen de instalación original
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: baee8b261ff0a3f6bb94fb141ee765726ffa2ced
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103909005"
---
# <a name="preventing-a-patch-from-requiring-access-to-the-original-installation-source"></a><span data-ttu-id="8f756-103">Impedir que una revisión requiera acceso al origen de instalación original</span><span class="sxs-lookup"><span data-stu-id="8f756-103">Preventing a Patch from Requiring Access to the Original Installation Source</span></span>

<span data-ttu-id="8f756-104">No es posible eliminar todas las circunstancias en las que la aplicación de una revisión puede requerir acceso al origen de instalación original.</span><span class="sxs-lookup"><span data-stu-id="8f756-104">It is not possible to eliminate all circumstances under which the application of a patch may require access to the original installation source.</span></span>

<span data-ttu-id="8f756-105">Siga los puntos que se indican a continuación para minimizar la posibilidad de que la revisión requiera acceso al origen original:</span><span class="sxs-lookup"><span data-stu-id="8f756-105">Adhere to following points to minimize the possibility that your patch will require access to the original source:</span></span>

-   <span data-ttu-id="8f756-106">Usar revisiones solo de archivo completo.</span><span class="sxs-lookup"><span data-stu-id="8f756-106">Use whole-file only patches.</span></span> <span data-ttu-id="8f756-107">Esto elimina la necesidad de crear revisiones binarias para todas las versiones publicadas anteriormente del archivo.</span><span class="sxs-lookup"><span data-stu-id="8f756-107">This eliminates the need to create binary patches for all previously released versions of the file.</span></span> <span data-ttu-id="8f756-108">Tenga en cuenta que las revisiones de archivo completas suelen tener un tamaño mayor que las revisiones binarias.</span><span class="sxs-lookup"><span data-stu-id="8f756-108">Note that whole file patches are generally larger in size than binary patches.</span></span> <span data-ttu-id="8f756-109">Puede establecer fácilmente una revisión para que sea una revisión de archivo completa mediante la creación de la propiedad IncludeWholeFilesOnly con un valor de 1 (uno) en el archivo de las propiedades de creación de revisiones (PCP).</span><span class="sxs-lookup"><span data-stu-id="8f756-109">You can easily set a patch to be a whole file patch by authoring the IncludeWholeFilesOnly property with a value of 1 (one) in the Patch Creation Properties (PCP) file.</span></span>
-   <span data-ttu-id="8f756-110">Asegúrese de que ninguna de las acciones personalizadas tenga acceso a la ubicación de origen original.</span><span class="sxs-lookup"><span data-stu-id="8f756-110">Ensure that none of your custom actions access the original source location.</span></span>
-   <span data-ttu-id="8f756-111">Asegúrese de que la acción ResolveSource esté condicional para que solo se ejecute cuando sea necesario, o bien no esté presente en absoluto.</span><span class="sxs-lookup"><span data-stu-id="8f756-111">Ensure that the ResolveSource action is conditionalized so that it only runs when needed, or alternatively is not present at all.</span></span>
-   <span data-ttu-id="8f756-112">Rellene la [tabla MsiFileHash](msifilehash-table.md) para todos los archivos que no tienen versiones.</span><span class="sxs-lookup"><span data-stu-id="8f756-112">Populate the [MsiFileHash Table](msifilehash-table.md) for all unversioned files.</span></span> <span data-ttu-id="8f756-113">La herramienta Windows Installer SDK, Msifiler.exe, puede hacerlo fácilmente.</span><span class="sxs-lookup"><span data-stu-id="8f756-113">The Windows Installer SDK tool, Msifiler.exe, can easily do this for you.</span></span>
-   <span data-ttu-id="8f756-114">Asegúrese de que todos los archivos tengan la información de idioma y la versión correctas.</span><span class="sxs-lookup"><span data-stu-id="8f756-114">Ensure that all files have the correct version and language information.</span></span> <span data-ttu-id="8f756-115">La herramienta Windows Installer SDK, Msifiler.exe, puede hacerlo fácilmente.</span><span class="sxs-lookup"><span data-stu-id="8f756-115">The Windows Installer SDK tool, Msifiler.exe, can easily do this for you.</span></span>

## <a name="source-requirements-when-patching"></a><span data-ttu-id="8f756-116">Requisitos de origen al aplicar revisiones</span><span class="sxs-lookup"><span data-stu-id="8f756-116">Source Requirements When Patching</span></span>

<span data-ttu-id="8f756-117">Es posible que sea necesario tener acceso a los orígenes de instalación originales para aplicar la revisión en los casos siguientes:</span><span class="sxs-lookup"><span data-stu-id="8f756-117">Access to the original installation sources may be required to apply the patch in the following cases:</span></span>

-   <span data-ttu-id="8f756-118">La revisión se aplica a una característica que se ejecuta actualmente desde el origen.</span><span class="sxs-lookup"><span data-stu-id="8f756-118">The patch applies to a feature that is currently run from source.</span></span> <span data-ttu-id="8f756-119">En este caso, la característica pasa del estado de origen de ejecución al estado local.</span><span class="sxs-lookup"><span data-stu-id="8f756-119">In this case, the feature is transitioned from the run-from-source state to the local state.</span></span>
-   <span data-ttu-id="8f756-120">La revisión se aplica a un componente que tiene un archivo que falta o que está dañado.</span><span class="sxs-lookup"><span data-stu-id="8f756-120">The patch applies to a component that has a missing or corrupted file.</span></span>
-   <span data-ttu-id="8f756-121">La revisión se aplica a un archivo de un componente que también contiene archivos sin versión sin entradas MsiFileHash.</span><span class="sxs-lookup"><span data-stu-id="8f756-121">The patch applies to a file in a component that also contains unversioned files with no MsiFileHash entries.</span></span> <span data-ttu-id="8f756-122">Se necesita una [tabla MsiFileHash](msifilehash-table.md) rellenada para evitar que se vuelvan a copiar innecesariamente los archivos que no tienen versiones desde la ubicación de origen.</span><span class="sxs-lookup"><span data-stu-id="8f756-122">A populated [MsiFileHash Table](msifilehash-table.md) is required to prevent unnecessary recopying of unversioned files from the source location.</span></span>
-   <span data-ttu-id="8f756-123">La revisión se aplicó con un REINSTALLMODE de AMUS o emus.</span><span class="sxs-lookup"><span data-stu-id="8f756-123">The patch was applied with a REINSTALLMODE of amus or emus.</span></span> <span data-ttu-id="8f756-124">Esta opción es peligrosa porque realiza operaciones de copia de archivos independientemente de la versión del archivo.</span><span class="sxs-lookup"><span data-stu-id="8f756-124">This option is dangerous in that it performs file copy operations regardless of file version.</span></span> <span data-ttu-id="8f756-125">Esto puede dar lugar a inreving de archivos y casi siempre requiere el origen.</span><span class="sxs-lookup"><span data-stu-id="8f756-125">This can lead to down-reving of files and almost always requires the source.</span></span> <span data-ttu-id="8f756-126">El valor de REINSTALLMODE recomendado es OMUs.</span><span class="sxs-lookup"><span data-stu-id="8f756-126">The recommended REINSTALLMODE value is omus.</span></span>
-   <span data-ttu-id="8f756-127">Falta el paquete en caché para el producto.</span><span class="sxs-lookup"><span data-stu-id="8f756-127">The cached package for the product is missing.</span></span> <span data-ttu-id="8f756-128">El paquete almacenado en caché es necesario para la aplicación de una revisión.</span><span class="sxs-lookup"><span data-stu-id="8f756-128">The cached package is needed for application of a patch.</span></span> <span data-ttu-id="8f756-129">El paquete almacenado en caché se almacena en la carpeta% WINDIR% \\ Installer.</span><span class="sxs-lookup"><span data-stu-id="8f756-129">The cached package is stored in the %windir%\\Installer folder.</span></span>
-   <span data-ttu-id="8f756-130">El paquete se crea para hacer una llamada a la [acción ResolveSource](resolvesource-action.md).</span><span class="sxs-lookup"><span data-stu-id="8f756-130">The package is authored to make a call to the [ResolveSource Action](resolvesource-action.md).</span></span> <span data-ttu-id="8f756-131">Por lo general, esta acción debe evitarse o aplicarse condicionalmente, porque su ejecución siempre produce un acceso al origen.</span><span class="sxs-lookup"><span data-stu-id="8f756-131">This action should generally be avoided or conditionalized appropriately, because its execution always results in an access to the source.</span></span>
-   <span data-ttu-id="8f756-132">El paquete tiene una acción personalizada que intenta tener acceso al origen de alguna manera.</span><span class="sxs-lookup"><span data-stu-id="8f756-132">The package has a custom action that attempts to access the source in some manner.</span></span> <span data-ttu-id="8f756-133">El ejemplo más común es una acción personalizada de tipo 23 instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="8f756-133">The most common example is a type 23 concurrent installation custom action.</span></span>
    > [!Note]  
    > <span data-ttu-id="8f756-134">No se recomiendan instalaciones simultáneas para la instalación de aplicaciones destinadas a publicarse en el público.</span><span class="sxs-lookup"><span data-stu-id="8f756-134">Concurrent installations are not recommended for the installation of applications intended for release to the public.</span></span> <span data-ttu-id="8f756-135">Para obtener información acerca de las instalaciones simultáneas, consulte [instalaciones](concurrent-installations.md)simultáneas.</span><span class="sxs-lookup"><span data-stu-id="8f756-135">For information about concurrent installations please see [Concurrent Installations](concurrent-installations.md).</span></span>

     

-   <span data-ttu-id="8f756-136">El paquete de revisión consta de revisiones binarias que no se aplican a la versión actual del archivo en el equipo.</span><span class="sxs-lookup"><span data-stu-id="8f756-136">The patch package consists of binary patches that do not apply to the current version of the file on the computer.</span></span>

<span data-ttu-id="8f756-137">Considere el ejemplo siguiente, donde Windows Installer requiere acceso al origen original al aplicar una revisión:</span><span class="sxs-lookup"><span data-stu-id="8f756-137">Consider the following example where Windows Installer requires access to the original source when applying a patch:</span></span>

1.  <span data-ttu-id="8f756-138">Instale la versión RTM del ejemplo del producto.</span><span class="sxs-lookup"><span data-stu-id="8f756-138">Install RTM version of the product Example.</span></span>
2.  <span data-ttu-id="8f756-139">Aplique la revisión Qfe1. MSP al equipo.</span><span class="sxs-lookup"><span data-stu-id="8f756-139">Apply patch Qfe1.msp to the computer.</span></span> <span data-ttu-id="8f756-140">Esta versión de revisión 1,0 de Example.dll a la versión 1,1.</span><span class="sxs-lookup"><span data-stu-id="8f756-140">This patches version 1.0 of Example.dll to version 1.1.</span></span>
3.  <span data-ttu-id="8f756-141">Se proporciona una nueva revisión, Qfe2. MSP, que actualiza Example.dll a la versión 1,2 y que Qfe1. MSP está obsoleto.</span><span class="sxs-lookup"><span data-stu-id="8f756-141">A new patch, Qfe2.msp is provided, which updates Example.dll to version 1.2 and obsoletes Qfe1.msp.</span></span> <span data-ttu-id="8f756-142">Sin embargo, la revisión solo se creó para tener como destino la versión 1,0 de Example.dll porque se generó con la versión RTM del producto.</span><span class="sxs-lookup"><span data-stu-id="8f756-142">However, the patch was only created to target version 1.0 of Example.dll because it was generated using the RTM version of the product.</span></span> <span data-ttu-id="8f756-143">Example.dll versión 1,2 incluye la corrección incluida en Example.dll versión 1,1, pero se generó el archivo. MSP entre las imágenes RTM y QFE2.</span><span class="sxs-lookup"><span data-stu-id="8f756-143">Example.dll version 1.2 includes the fix contained in Example.dll version 1.1, but the .msp file was generated between the RTM and QFE2 images.</span></span> <span data-ttu-id="8f756-144">Por lo tanto, cuando se aplica Qfe2. MSP al equipo, Windows Installer necesita tener acceso al origen original.</span><span class="sxs-lookup"><span data-stu-id="8f756-144">So, when Qfe2.msp is applied to the computer, Windows Installer needs to access the original source.</span></span> <span data-ttu-id="8f756-145">La revisión binaria de Example.dll no se puede aplicar a la versión 1,1; solo se puede aplicar a la versión 1,0.</span><span class="sxs-lookup"><span data-stu-id="8f756-145">The binary patch for Example.dll cannot apply to version 1.1; it can only apply to version 1.0.</span></span> <span data-ttu-id="8f756-146">Como resultado, el instalador vuelve a copiar la versión 1,0 de Example.dll desde la ubicación de origen original para que la revisión se pueda aplicar correctamente.</span><span class="sxs-lookup"><span data-stu-id="8f756-146">This results in the Installer recopying version 1.0 of Example.dll from the original source location so that the patch can be applied successfully.</span></span>

## <a name="source-requirements-when-removing-a-patch"></a><span data-ttu-id="8f756-147">Requisitos de origen al quitar una revisión</span><span class="sxs-lookup"><span data-stu-id="8f756-147">Source Requirements When Removing a Patch</span></span>

<span data-ttu-id="8f756-148">Es posible que sea necesario tener acceso a los orígenes de instalación originales para quitar una revisión si el Windows Installer no ha almacenado la información de línea de base de la revisión.</span><span class="sxs-lookup"><span data-stu-id="8f756-148">Access to the original installation sources may be required to remove a patch if the Windows Installer has not stored baseline information about the patch.</span></span> <span data-ttu-id="8f756-149">A partir de Windows Installer 3,0, el instalador guarda selectivamente la información de línea de base de los archivos cuando se actualizan.</span><span class="sxs-lookup"><span data-stu-id="8f756-149">Beginning with Windows Installer 3.0, the installer selectively saves baseline information about files when they are updated.</span></span> <span data-ttu-id="8f756-150">Para obtener más información acerca de la caché de línea de base, consulte [reducir el tamaño](reducing-patch-size.md) de la revisión.</span><span class="sxs-lookup"><span data-stu-id="8f756-150">For more information about the baseline cache, see [Reducing Patch Size](reducing-patch-size.md) .</span></span>

 

 



