---
description: Compatibilidad con extensiones de MTP
ms.assetid: 9e5f3da6-346a-4eca-bc85-2755c569986d
title: Compatibilidad con extensiones de MTP
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 898df3f1347af2ccc42a796b480156b6603b13ec
ms.sourcegitcommit: 0f7a8198bacd5493ab1e78a9583c7a3578794765
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/25/2021
ms.locfileid: "110423735"
---
# <a name="supporting-mtp-extensions"></a><span data-ttu-id="e4485-103">Compatibilidad con extensiones de MTP</span><span class="sxs-lookup"><span data-stu-id="e4485-103">Supporting MTP Extensions</span></span>

## <a name="media-transfer-protocol"></a><span data-ttu-id="e4485-104">Protocolo de transferencia de medios</span><span class="sxs-lookup"><span data-stu-id="e4485-104">Media Transfer Protocol</span></span>

<span data-ttu-id="e4485-105">El Protocolo de transferencia de medios (MTP) es una extensión del Protocolo de transferencia de imágenes (PTP).</span><span class="sxs-lookup"><span data-stu-id="e4485-105">Media Transfer Protocol (MTP) is an extension to the Picture Transfer Protocol (PTP).</span></span> <span data-ttu-id="e4485-106">Como resultado, todas las semánticas del protocolo PTP son válidas en MTP.</span><span class="sxs-lookup"><span data-stu-id="e4485-106">As a result, all PTP protocol semantics are valid in MTP.</span></span>

<span data-ttu-id="e4485-107">MTP se comunica mediante comandos y respuestas entre dos partes, el iniciador y el respondedor.</span><span class="sxs-lookup"><span data-stu-id="e4485-107">MTP communicates by using commands and responses between two parties, the initiator and the responder.</span></span> <span data-ttu-id="e4485-108">Los roles de los dispositivos implicados están muy claramente definidos.</span><span class="sxs-lookup"><span data-stu-id="e4485-108">The roles of the involved devices are very clearly defined.</span></span> <span data-ttu-id="e4485-109">El equipo suele ser el iniciador y el dispositivo siempre es el respondedor.</span><span class="sxs-lookup"><span data-stu-id="e4485-109">The PC typically is the initiator, and the device is always the responder.</span></span> <span data-ttu-id="e4485-110">Un dispositivo que no es de PC también podría ser un iniciador (por ejemplo, una baraja de automóviles o una caja X de Microsoft).</span><span class="sxs-lookup"><span data-stu-id="e4485-110">A non-PC device could also be an initiator (for example, a car deck or a Microsoft X-box).</span></span> <span data-ttu-id="e4485-111">Un dispositivo nunca puede asumir ambos roles al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="e4485-111">A device can never assume both roles at the same time.</span></span>

<span data-ttu-id="e4485-112">El iniciador inicia la comunicación mediante el envío de un comando al respondedor.</span><span class="sxs-lookup"><span data-stu-id="e4485-112">The initiator starts communication by sending a command to the responder.</span></span> <span data-ttu-id="e4485-113">El respondedor procesa el comando y devuelve una respuesta adecuada.</span><span class="sxs-lookup"><span data-stu-id="e4485-113">The responder processes the command and sends back an appropriate response.</span></span> <span data-ttu-id="e4485-114">Puede haber una fase de datos asociada al comando.</span><span class="sxs-lookup"><span data-stu-id="e4485-114">There might be a data phase associated with the command.</span></span> <span data-ttu-id="e4485-115">Si este es el caso, la dirección del flujo de datos debe conocerse de antemano y ser aceptada por el iniciador y el respondedor.</span><span class="sxs-lookup"><span data-stu-id="e4485-115">If this is the case, the direction of data flow must be known beforehand and accepted by both the initiator and the responder.</span></span> <span data-ttu-id="e4485-116">Tenga en cuenta que no hay un encabezado descriptivo que indique los flujos de datos para los nuevos comandos.</span><span class="sxs-lookup"><span data-stu-id="e4485-116">Be aware that there is not a descriptive header that indicates data flows for new commands.</span></span>

<span data-ttu-id="e4485-117">El respondedor puede iniciar la comunicación independientemente del iniciador.</span><span class="sxs-lookup"><span data-stu-id="e4485-117">The responder can start communication independent of the initiator.</span></span> <span data-ttu-id="e4485-118">Por ejemplo, el respondedor puede enviar eventos al iniciador.</span><span class="sxs-lookup"><span data-stu-id="e4485-118">For example, the responder can send events to the initiator.</span></span> <span data-ttu-id="e4485-119">Sin embargo, no se puede enviar ningún dato junto con el evento .</span><span class="sxs-lookup"><span data-stu-id="e4485-119">However, no data can be sent together with the event.</span></span> <span data-ttu-id="e4485-120">Si hay algún dato que deba leerse como parte del evento, el iniciador debe enviar un comando MTP y, a continuación, el dispositivo puede enviar datos en respuesta al comando.</span><span class="sxs-lookup"><span data-stu-id="e4485-120">If there is any data that needs to be read as part of the event, the initiator must send an MTP command, and the device can then send data in response to the command.</span></span>

<span data-ttu-id="e4485-121">Para obtener una descripción completa de MTP, consulte la [especificación de MTP](https://www.usb.org/sites/default/files/MTPv1_1.zip).</span><span class="sxs-lookup"><span data-stu-id="e4485-121">For a complete description of MTP, refer to the [MTP specification](https://www.usb.org/sites/default/files/MTPv1_1.zip).</span></span>

## <a name="sending-mtp-commands"></a><span data-ttu-id="e4485-122">Envío de comandos MTP</span><span class="sxs-lookup"><span data-stu-id="e4485-122">Sending MTP Commands</span></span>

<span data-ttu-id="e4485-123">Las aplicaciones pueden enviar comandos MTP a un dispositivo invocando el [**método IPortableDevice::SendCommand.**](/windows/desktop/api/PortableDeviceApi/nf-portabledeviceapi-iportabledevice-sendcommand)</span><span class="sxs-lookup"><span data-stu-id="e4485-123">Applications can send MTP commands to a device by invoking the [**IPortableDevice::SendCommand**](/windows/desktop/api/PortableDeviceApi/nf-portabledeviceapi-iportabledevice-sendcommand) method.</span></span> <span data-ttu-id="e4485-124">El comando que se envía depende de si hay una fase de datos y de si los datos adjuntos se leen o escriben en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e4485-124">The command that is sent depends on whether there is a data phase, and, on whether any accompanying data is read from or written to the device.</span></span> <span data-ttu-id="e4485-125">En la tabla siguiente se describen los tres posibles comandos de extensión MTP.</span><span class="sxs-lookup"><span data-stu-id="e4485-125">The following table describes the three possible MTP extension commands.</span></span>

<span data-ttu-id="e4485-126">Tenga en cuenta que estos comandos son específicos de MTP; y, por lo tanto, solo se implementan mediante el controlador de clase MTP de WPD.</span><span class="sxs-lookup"><span data-stu-id="e4485-126">Be aware that these commands are specific to MTP; and are therefore, only implemented by the WPD MTP class driver.</span></span>



| <span data-ttu-id="e4485-127">Comando</span><span class="sxs-lookup"><span data-stu-id="e4485-127">Command</span></span>  | <span data-ttu-id="e4485-128">Descripción</span><span class="sxs-lookup"><span data-stu-id="e4485-128">Description</span></span>  |
|--------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="e4485-129">**TRANSFERENCIA DE DATOS \_ FINALES \_ EXT DEL COMANDO WPD MTP \_ \_ \_ \_**</span><span class="sxs-lookup"><span data-stu-id="e4485-129">**WPD\_COMMAND\_MTP\_EXT\_END\_DATA\_TRANSFER**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-end-data-transfer)                                      | <span data-ttu-id="e4485-130">Emite un comando MTP que indica la conclusión de una operación de lectura o escritura de datos.</span><span class="sxs-lookup"><span data-stu-id="e4485-130">Issues an MTP command that signals the conclusion of a data read or write operation.</span></span>              |
| [<span data-ttu-id="e4485-131">**COMANDO WPD \_ \_ MTP \_ EXT EXECUTE COMMAND WITHOUT DATA \_ \_ \_ \_ \_ PHASE**</span><span class="sxs-lookup"><span data-stu-id="e4485-131">**WPD\_COMMAND\_MTP\_EXT\_EXECUTE\_COMMAND\_WITHOUT\_DATA\_PHASE**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-execute-command-without-data-phase)  | <span data-ttu-id="e4485-132">Emite un comando MTP sin una fase de datos correspondiente.</span><span class="sxs-lookup"><span data-stu-id="e4485-132">Issues an MTP command without a corresponding data phase.</span></span>                                         |
| [<span data-ttu-id="e4485-133">**COMANDO WPD \_ \_ MTP EXT EXECUTE COMMAND WITH DATA TO WRITE (COMANDO MTP EXT EXECUTE DE WPD \_ \_ CON DATOS PARA \_ \_ \_ \_ \_ ESCRIBIR)**</span><span class="sxs-lookup"><span data-stu-id="e4485-133">**WPD\_COMMAND\_MTP\_EXT\_EXECUTE\_COMMAND\_WITH\_DATA\_TO\_WRITE**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-execute-command-with-data-to-write) | <span data-ttu-id="e4485-134">Emite un comando MTP que va seguido de los datos adjuntos, que se escribirán en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e4485-134">Issues an MTP command that is followed by accompanying data, which will be written to the device.</span></span> |
| [<span data-ttu-id="e4485-135">**COMANDO WPD \_ \_ MTP EXT EXECUTE COMMAND WITH DATA TO READ (COMANDO MTP EXT EXECUTE DE WPD \_ \_ CON DATOS PARA \_ \_ \_ \_ \_ LEER)**</span><span class="sxs-lookup"><span data-stu-id="e4485-135">**WPD\_COMMAND\_MTP\_EXT\_EXECUTE\_COMMAND\_WITH\_DATA\_TO\_READ**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-execute-command-with-data-to-read)   | <span data-ttu-id="e4485-136">Emite un comando MTP seguido de los datos adjuntos, que se leen desde el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e4485-136">Issues an MTP command that is followed by accompanying data, which is read from the device.</span></span>       |
| [<span data-ttu-id="e4485-137">**COMANDO WPD \_ \_ MTP \_ EXT READ \_ \_ DATA**</span><span class="sxs-lookup"><span data-stu-id="e4485-137">**WPD\_COMMAND\_MTP\_EXT\_READ\_DATA**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-read-data)                                                       | <span data-ttu-id="e4485-138">Emite un comando MTP que envía datos desde el dispositivo al equipo.</span><span class="sxs-lookup"><span data-stu-id="e4485-138">Issues an MTP command that sends data from the device to the PC.</span></span>                                  |
| [<span data-ttu-id="e4485-139">**COMANDO WPD \_ \_ MTP \_ EXT WRITE \_ \_ DATA**</span><span class="sxs-lookup"><span data-stu-id="e4485-139">**WPD\_COMMAND\_MTP\_EXT\_WRITE\_DATA**</span></span>](/windows/desktop/wpd_sdk/wpd-command-mtp-ext-write-data)                                                     | <span data-ttu-id="e4485-140">Emite un comando MTP que envía datos al dispositivo desde el equipo.</span><span class="sxs-lookup"><span data-stu-id="e4485-140">Issues an MTP command that sends data to the device from the PC.</span></span>                                  |



 

<span data-ttu-id="e4485-141">Independientemente de la fase, se deben especificar **WPD \_ PROPERTY \_ MTP \_ EXT OPERATION \_ \_ CODE** y **WPD PROPERTY \_ \_ MTP EXT OPERATION \_ \_ \_ PARAMS.**</span><span class="sxs-lookup"><span data-stu-id="e4485-141">Regardless of the phase, **WPD\_PROPERTY\_MTP\_EXT\_OPERATION\_CODE** and **WPD\_PROPERTY\_MTP\_EXT\_OPERATION\_PARAMS** must be specified.</span></span>

<span data-ttu-id="e4485-142">Si el controlador MTP pudo enviar el comando al dispositivo, los valores devueltos siempre contendrán **WPD \_ PROPERTY \_ MTP \_ EXT RESPONSE \_ \_ CODE**.</span><span class="sxs-lookup"><span data-stu-id="e4485-142">If the MTP driver was able to send the command to the device, the return values will always contain **WPD\_PROPERTY\_MTP\_EXT\_RESPONSE\_CODE**.</span></span> <span data-ttu-id="e4485-143">Si el código de respuesta indica que se ha producido correctamente y si la semántica del comando permite parámetros de respuesta, **WPD \_ PROPERTY \_ MTP \_ EXT RESPONSE \_ \_ PARAMS** también estará disponible.</span><span class="sxs-lookup"><span data-stu-id="e4485-143">If the response code indicates success and if the semantics of the command allow for response parameters, **WPD\_PROPERTY\_MTP\_EXT\_RESPONSE\_PARAMS** will also be available.</span></span>

## <a name="related-topics"></a><span data-ttu-id="e4485-144">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e4485-144">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e4485-145">**Guía de programación**</span><span class="sxs-lookup"><span data-stu-id="e4485-145">**Programming Guide**</span></span>](programming-guide.md)
</dt> </dl>

 

 
