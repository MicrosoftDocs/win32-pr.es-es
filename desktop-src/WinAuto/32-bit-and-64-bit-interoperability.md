---
title: interoperabilidad de 32 y 64 bits
description: Las aplicaciones de tecnología de asistencia necesitan comunicarse a través de los límites del proceso para obtener información de la interfaz de usuario de Microsoft Active Accessibility servidores y proveedores de automatización de la interfaz de usuario de Microsoft.
ms.assetid: 8b46daed-4fd9-430c-bb4d-24be9c8015b5
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6897082db00e27d77d90e5fc72d5f229834ce760
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "103792478"
---
# <a name="32-bit-and-64-bit-interoperability"></a><span data-ttu-id="7e3d3-103">interoperabilidad de 32 y 64 bits</span><span class="sxs-lookup"><span data-stu-id="7e3d3-103">32-bit and 64-bit Interoperability</span></span>

<span data-ttu-id="7e3d3-104">Las aplicaciones de tecnología de asistencia necesitan comunicarse a través de los límites del proceso para obtener información de la interfaz de usuario de Microsoft Active Accessibility servidores y proveedores de automatización de la interfaz de usuario de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-104">Assistive technology applications need to communicate across process boundaries to get UI information from Microsoft Active Accessibility servers and Microsoft UI Automation providers.</span></span> <span data-ttu-id="7e3d3-105">En este tema se describen los principales problemas de comunicación entre procesos que se deben tener en cuenta al desarrollar aplicaciones de accesibilidad de Windows.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-105">This topic describes the main interprocess communication issues that you need to keep in mind when developing Windows accessibility applications.</span></span>

<span data-ttu-id="7e3d3-106">Cuando las aplicaciones usan la API de automatización de Windows, los componentes de tiempo de ejecución de Microsoft Active Accessibility y de la automatización de la interfaz de usuario controlan automáticamente todos los problemas y las complejidades que conlleva la realización de comunicaciones entre procesos (IPC), incluidos los problemas de interoperabilidad implicados cuando un proceso es de 32 bits y el otro es de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-106">When applications use the Windows Automation API, the Microsoft Active Accessibility and UI Automation run-time components automatically handle all of the issues and complexities involved in performing interprocess communications (IPC), including the interoperability issues involved when one process is 32-bits and the other is 64-bits.</span></span> <span data-ttu-id="7e3d3-107">Microsoft reconoce que hay ocasiones en que una aplicación de tecnología de asistencia puede necesitar usar algún tipo de IPC en lugar de la API de automatización de Windows para comunicarse con un servidor de Microsoft Active Accessibility o un proveedor de automatización de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-107">Microsoft recognizes that there are occasions when an assistive technology application may need to use some form of IPC instead of the Windows Automation API to communicate with a Microsoft Active Accessibility server or UI Automation provider.</span></span> <span data-ttu-id="7e3d3-108">En estas ocasiones, Microsoft recomienda que utilice mensajes DCOM o Windows (aquellos con valores menores que los de **\_ usuario de WM**) para comunicarse con otros procesos.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-108">On these occasions, Microsoft recommends that you use DCOM or Windows messages (those with values less than that of **WM\_USER**) to communicate with other processes.</span></span> <span data-ttu-id="7e3d3-109">Al igual que la API de automatización de Windows, los mensajes de Windows y DCOM controlan automáticamente todos los problemas de IPC, incluida la interoperabilidad de 32 bits a 64 bits.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-109">Like the Windows Automation API, DCOM and Windows messages automatically handle all IPC issues for you, including 32-bit to 64-bit interoperability.</span></span>

<span data-ttu-id="7e3d3-110">Cuando la API de automatización de Windows, DCOM y los mensajes de Windows no son una opción, tenga en cuenta los siguientes problemas al implementar el método IPC elegido:</span><span class="sxs-lookup"><span data-stu-id="7e3d3-110">When the Windows Automation API, DCOM, and Windows messages are not an option, keep the following issues in mind when implementing your chosen IPC method:</span></span>

-   <span data-ttu-id="7e3d3-111">Memoria compartida: cuando se usa la memoria compartida, tenga en cuenta que una estructura en un proceso de 32 bits puede tener un diseño y un tamaño distintos que la misma estructura en un proceso de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-111">Shared Memory—When using shared memory, be aware that a structure in a 32-bit process may have a different size and layout than the same structure in a 64-bit process.</span></span> <span data-ttu-id="7e3d3-112">Esto es especialmente cierto en el caso de las estructuras que contienen punteros o identificadores.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-112">This is especially true for structures that contain pointers or handles.</span></span>
-   <span data-ttu-id="7e3d3-113">Truncamiento de puntero: aunque una aplicación de 32 bits puede usar el tipo de datos **LONGLONG** para almacenar un valor de 64 bits, hay instancias en las que no existe ningún elemento de la API de Windows que permita a la aplicación de 32 bits recibir un valor de 64 bits de un proceso de 64 bits o enviar un valor de 64 bits a un proceso de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-113">Pointer Truncation—Although a 32-bit application can use the **LONGLONG** data type to store a 64-bit value, there are instances where no Windows API element exists that would enable the 32-bit application to receive a 64-bit value from a 64-bit process, or to send a 64-bit value to a 64-bit process.</span></span> <span data-ttu-id="7e3d3-114">Por ejemplo, las funciones [**GetWindowLongPtr**](/windows/desktop/api/winuser/nf-winuser-getwindowlongptra) y [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) truncan todos los valores de puntero, lo que sale de la aplicación de 32 bits con un valor inútil.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-114">For example, the [**GetWindowLongPtr**](/windows/desktop/api/winuser/nf-winuser-getwindowlongptra) and [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) functions truncate all pointer values, leaving the 32-bit application with a useless value.</span></span>
-   <span data-ttu-id="7e3d3-115">Identificadores: dado que los identificadores Kernel32 y user32 32 solo son significativos en los procesos de 32 y 64 bits, se pueden transferir entre procesos sin problemas.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-115">Handles—Because kernel32 and user32 handles are only 32-bit significant in both 32-bit and 64-bit processes, they can be transferred between processes without a problem.</span></span> <span data-ttu-id="7e3d3-116">Sin embargo, algunos elementos que Windows define como identificadores son simplemente punteros ajustados (por ejemplo, **HTREEITEM**).</span><span class="sxs-lookup"><span data-stu-id="7e3d3-116">However, some items that Windows defines as handles are really just wrapped pointers (for example, **HTREEITEM**).</span></span> <span data-ttu-id="7e3d3-117">Estos "identificadores" se truncarán si se pasan de un proceso de 64 bits a un proceso de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-117">These "handles" will be truncated if they are passed from a 64-bit process to a 32-bit process.</span></span>
-   <span data-ttu-id="7e3d3-118">[WinEvent](winevents-infrastructure.md) Funciones de enlace: para registrar una función de enlace en contexto con un proceso de servidor de 32 bits, la función de enlace debe residir en un archivo DLL de 32 bits.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-118">[WinEvent](winevents-infrastructure.md) Hook Functions—To register an in-context hook function with a 32-bit server process, the hook function must reside in a 32-bit DLL.</span></span> <span data-ttu-id="7e3d3-119">Del mismo modo, para registrar una función de enlace en contexto con un proceso de servidor de 64 bits, la función de enlace debe residir en un archivo DLL de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-119">Similarly, to register an in-context hook function with a 64-bit server process, the hook function must reside in a 64-bit DLL.</span></span> <span data-ttu-id="7e3d3-120">Si una aplicación de tecnología de asistencia intenta registrar una función de enlace en contexto con un servidor que tiene una profundidad de bits diferente, los eventos se seguirán entregando a la función de enlace, pero se entregarán fuera de contexto.</span><span class="sxs-lookup"><span data-stu-id="7e3d3-120">If an assistive technology application attempts to register an in-context hook function with a server that has a different bit-depth, events will still be delivered to the hook function, but they will be delivered out-of-context.</span></span> <span data-ttu-id="7e3d3-121">Para obtener más información, consulte WinEvents y [funciones de enlace en contexto y fuera de contexto](in-context-and-out-of-context-hook-functions.md).</span><span class="sxs-lookup"><span data-stu-id="7e3d3-121">For more information, see WinEvents and [In-Context and Out-of-Context Hook Functions](in-context-and-out-of-context-hook-functions.md).</span></span>

<span data-ttu-id="7e3d3-122">Para obtener más información sobre la interoperabilidad de 32 y 64 bits, consulte [interoperabilidad de procesos](/windows/desktop/WinProg64/process-interoperability).</span><span class="sxs-lookup"><span data-stu-id="7e3d3-122">For more information about 32-bit and 64-bit interoperability, see [Process Interoperability](/windows/desktop/WinProg64/process-interoperability).</span></span>

## <a name="related-topics"></a><span data-ttu-id="7e3d3-123">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="7e3d3-123">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="7e3d3-124">Introducción a la API de automatización de Windows</span><span class="sxs-lookup"><span data-stu-id="7e3d3-124">Windows Automation API Overview</span></span>](windows-automation-api-overview.md)
</dt> </dl>

 

 