---
description: Un solicitante es cualquier aplicación que use la API de VSS (específicamente la interfaz IVssBackupComponents) para solicitar los servicios de la Servicio de instantáneas de volumen para crear y administrar instantáneas y conjuntos de instantáneas de uno o más volúmenes.
ms.assetid: e49920d0-5b66-4aa1-b3ca-641629df5f8a
title: Solicitantes
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b676b8cd287365b257e3b6ee85a7e47a70f88ef3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104276350"
---
# <a name="requesters"></a><span data-ttu-id="78037-103">Solicitantes</span><span class="sxs-lookup"><span data-stu-id="78037-103">Requesters</span></span>

<span data-ttu-id="78037-104">Un [*solicitante*](vssgloss-r.md) es cualquier aplicación que use la API de VSS (específicamente la interfaz [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) ) para solicitar los servicios de la servicio de instantáneas de volumen para crear y administrar instantáneas y conjuntos de instantáneas de uno o más volúmenes.</span><span class="sxs-lookup"><span data-stu-id="78037-104">A [*requester*](vssgloss-r.md) is any application that uses the VSS API (specifically the [**IVssBackupComponents**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssbackupcomponents) interface) to request the services of the Volume Shadow Copy Service to create and manage shadow copies and shadow copy sets of one or more volumes.</span></span>

<span data-ttu-id="78037-105">El ejemplo más típico de un solicitante (y el único que se trata en esta documentación) es una aplicación de copia de seguridad/restauración compatible con VSS, que usa datos de copia sombra como origen estable para sus operaciones de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="78037-105">The most typical example of a requester (and the only one addressed in this documentation) is a VSS-aware backup/restore application, which uses shadow-copied data as a stable source for its backup operations.</span></span>

<span data-ttu-id="78037-106">Además de iniciar las instantáneas, las aplicaciones del solicitante de copias de seguridad y recuperación se comunican con los productores de datos (escritores) para recopilar información sobre el sistema y para indicar a los escritores que deben preparar sus datos para la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="78037-106">In addition to initiating shadow copies, backup/recover requester applications communicate with data producers (writers) to gather information on the system and to signal writers to prepare their data for backup.</span></span>

## <a name="requester-state"></a><span data-ttu-id="78037-107">Estado del solicitante</span><span class="sxs-lookup"><span data-stu-id="78037-107">Requester State</span></span>

<span data-ttu-id="78037-108">Un solicitante mantiene su información de estado en un objeto de metadatos basado en XML denominado documento de componentes de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="78037-108">A requester maintains its state information in an XML-based metadata object called the Backup Components Document.</span></span> <span data-ttu-id="78037-109">Los metadatos del solicitante son necesarios, pero no suficientes para permitir que un solicitante realice una copia de seguridad y, a continuación, restaure un sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="78037-109">The requester metadata is necessary, but not sufficient to allow a requester to back up and then restore a file system.</span></span> <span data-ttu-id="78037-110">Las razones para esto son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="78037-110">The reasons for this are the following:</span></span>

-   <span data-ttu-id="78037-111">Durante una operación de copia de seguridad, solo un subconjunto de todos los componentes implicados en la copia de seguridad, que no se [*selecciona para*](vssgloss-s.md) los componentes de copia de seguridad sin seleccionar para los antecesores de copia de seguridad y que se pueda seleccionar para los componentes de copia de seguridad que se han [*incluido explícitamente*](vssgloss-e.md) en la copia de seguridad, se han agregado al documento componentes de copia de seguridad del solicitante</span><span class="sxs-lookup"><span data-stu-id="78037-111">During a backup operation, only a subset of all the components involved in the backup—[*nonselectable for backup*](vssgloss-s.md) components without selectable for backup ancestors and selectable for backup components that have been [*included explicitly*](vssgloss-e.md) in the backup—have had their information added to the requester's Backup Components Document.</span></span>
-   <span data-ttu-id="78037-112">La información incluso para los componentes agregados al documento componentes de copia de seguridad está incompleta: no se incluyen las especificaciones de archivos y rutas de acceso.</span><span class="sxs-lookup"><span data-stu-id="78037-112">The information even for those components added to the Backup Components Document is incomplete—file and path specifications are not included.</span></span>
-   <span data-ttu-id="78037-113">Durante las operaciones de restauración, un componente [*incluido implícitamente*](vssgloss-i.md) en la copia de seguridad puede [*seleccionarse para la restauración*](vssgloss-s.md) y, por tanto, se puede incluir explícitamente en la restauración.</span><span class="sxs-lookup"><span data-stu-id="78037-113">During restore operations, a component [*implicitly included*](vssgloss-i.md) in the backup may be [*selectable for restore*](vssgloss-s.md) and therefore can be explicitly included in the restore.</span></span> <span data-ttu-id="78037-114">Esto requerirá la actualización del documento componentes de copia de seguridad del solicitante con información de copias almacenadas del documento de metadatos del escritor de un escritor.</span><span class="sxs-lookup"><span data-stu-id="78037-114">This will require the updating of the requester's Backup Components Document with information from stored copies of a writer's Writer Metadata Document.</span></span>

<span data-ttu-id="78037-115">Para permitir la especificación completa de una operación de copia de seguridad o restauración, la API de VSS permite al solicitante consultar los metadatos de los escritores en ejecución (durante las copias de seguridad) o examinar los metadatos del escritor almacenados (durante las restauraciones).</span><span class="sxs-lookup"><span data-stu-id="78037-115">To allow for full specification of a backup or restore operation, the VSS API allows the requester to query running writers' metadata (during backups) or examine stored writer metadata (during restores).</span></span> <span data-ttu-id="78037-116">Además, un escritor puede modificar la información del componente en el documento componentes de copia de seguridad en el transcurso de una operación de copia de seguridad o restauración.</span><span class="sxs-lookup"><span data-stu-id="78037-116">In addition, a writer can modify component information in the Backup Components Document in the course of a backup or restore operation.</span></span>

<span data-ttu-id="78037-117">Con la información sobre qué componentes se han seleccionado para copias de seguridad y restauración, y las reglas relativas a la selección de componentes (para obtener más información, consulte Configuración de la [organización de componentes](definition-of-components-by-writers.md) y [trabajar con selecciones y rutas de acceso lógicas](working-with-selectability-and-logical-paths.md)), un solicitante puede determinar los archivos de los que el escritor necesita realizar copias de seguridad o restaurar, y dónde puede encontrar esos archivos.</span><span class="sxs-lookup"><span data-stu-id="78037-117">Using the information about which components have been selected for backup and restore and the rules regarding component selection (for more information, see [Setting up Component Organization](definition-of-components-by-writers.md) and [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md)), a requester can determine which files of which writer it needs to back up or restore, and where it can find those files.</span></span>

<span data-ttu-id="78037-118">Como parte de una copia de seguridad, los metadatos del solicitante y del escritor deben almacenarse para que se puedan usar en la restauración.</span><span class="sxs-lookup"><span data-stu-id="78037-118">As part of a backup, both requester and writer metadata must be stored so that it can be used in the restore.</span></span> <span data-ttu-id="78037-119">Por el contrario, las operaciones de restauración requieren la recuperación de los componentes antiguos de copia de seguridad y los documentos de metadatos del escritor para obtener instrucciones completas sobre la restauración de archivos.</span><span class="sxs-lookup"><span data-stu-id="78037-119">Conversely, restore operations require the retrieval of the old Backup Components and Writer Metadata Documents to obtain full instructions on restoring files.</span></span>

## <a name="requester-interprocess-communication"></a><span data-ttu-id="78037-120">Comunicación entre procesos del solicitante</span><span class="sxs-lookup"><span data-stu-id="78037-120">Requester Interprocess Communication</span></span>

<span data-ttu-id="78037-121">El solicitante mantiene el control sobre las operaciones de copia de seguridad y restauración de VSS mediante la generación de eventos COM a través de varias llamadas en la API del solicitante.</span><span class="sxs-lookup"><span data-stu-id="78037-121">The requester maintains control over VSS backup and restore operations by generating COM events through various calls in the requester API.</span></span> <span data-ttu-id="78037-122">Estas llamadas pueden hacer lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="78037-122">These calls can do the following:</span></span>

-   <span data-ttu-id="78037-123">Realice solicitudes de los proveedores, por ejemplo, [**IVssBackupComponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) hace que el proveedor cree una instantánea del volumen seleccionado.</span><span class="sxs-lookup"><span data-stu-id="78037-123">Make requests of the providers, for example, [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset) causes the provider to create a shadow copy of the selected volume.</span></span>
-   <span data-ttu-id="78037-124">Desencadene que los escritores devuelvan información, por ejemplo, [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) permite al solicitante obtener el documento de metadatos del escritor de cada escritor.</span><span class="sxs-lookup"><span data-stu-id="78037-124">Trigger the writers to return information, for example, [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) enables the requester to obtain each writer's Writer Metadata Document.</span></span>
-   <span data-ttu-id="78037-125">Exigir a los escritores que se preparen o controlen varias fases de las operaciones de instantáneas y copia de seguridad, por ejemplo, [**IVssBackupComponents::P repareforbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) indica a los escritores que se configuren para la inmovilización de e/s.</span><span class="sxs-lookup"><span data-stu-id="78037-125">Require writers to prepare for or handle various phases of the shadow copy and backup operations, for example, [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) signals writers to set up for the I/O freeze.</span></span>

<span data-ttu-id="78037-126">Un solicitante recibe información de los escritores a través de documentos de metadatos de escritor en directo o almacenados y mediante el uso de la interfaz [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) , que el escritor puede actualizar.</span><span class="sxs-lookup"><span data-stu-id="78037-126">A requester receives information from the writers through live or stored Writer Metadata Documents and through the use of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface, which the writer can update.</span></span>

## <a name="life-cycle-of-a-requester-during-backup"></a><span data-ttu-id="78037-127">Ciclo de vida de un solicitante durante la copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="78037-127">Life Cycle of a Requester during Backup</span></span>

<span data-ttu-id="78037-128">A continuación se facilita un resumen del ciclo de vida del solicitante para la copia de seguridad:</span><span class="sxs-lookup"><span data-stu-id="78037-128">The following is a summary of the requester life cycle for backup:</span></span>

1.  <span data-ttu-id="78037-129">Crear instancias e inicializar interfaces de la API de VSS.</span><span class="sxs-lookup"><span data-stu-id="78037-129">Instantiate and initialize VSS API interfaces.</span></span>
2.  <span data-ttu-id="78037-130">Póngase en contacto con escritores y recupere su información.</span><span class="sxs-lookup"><span data-stu-id="78037-130">Contact writers and retrieve their information.</span></span>
3.  <span data-ttu-id="78037-131">Elija los datos de los que desea hacer una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="78037-131">Choose data to back up.</span></span>
4.  <span data-ttu-id="78037-132">Solicite una instantánea del proveedor.</span><span class="sxs-lookup"><span data-stu-id="78037-132">Request a shadow copy of the provider.</span></span>
5.  <span data-ttu-id="78037-133">Realice una copia de seguridad de los datos.</span><span class="sxs-lookup"><span data-stu-id="78037-133">Back up the data.</span></span>
6.  <span data-ttu-id="78037-134">Libere la interfaz y la instantánea.</span><span class="sxs-lookup"><span data-stu-id="78037-134">Release the interface and the shadow copy.</span></span>

## <a name="life-cycle-of-a-requester-during-restore"></a><span data-ttu-id="78037-135">Ciclo de vida de un solicitante durante la restauración</span><span class="sxs-lookup"><span data-stu-id="78037-135">Life Cycle of a Requester during Restore</span></span>

<span data-ttu-id="78037-136">El ciclo de vida de restauración no requiere una instantánea, pero todavía requiere la cooperación del escritor:</span><span class="sxs-lookup"><span data-stu-id="78037-136">The restore life cycle does not require a shadow copy, but still requires writer cooperation:</span></span>

1.  <span data-ttu-id="78037-137">Cree instancias de las interfaces de la API de VSS.</span><span class="sxs-lookup"><span data-stu-id="78037-137">Instantiate VSS API interfaces.</span></span>
2.  <span data-ttu-id="78037-138">Inicializa el solicitante para la operación de restauración mediante la carga de un documento almacenado de componentes de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="78037-138">Initialize the requester for the restore operation by loading a stored Backup Components Document.</span></span>
3.  <span data-ttu-id="78037-139">Recuperar documentos de componentes de copia de seguridad y metadatos del escritor almacenados.</span><span class="sxs-lookup"><span data-stu-id="78037-139">Retrieve stored Writer Metadata and Backup Components Documents.</span></span>
4.  <span data-ttu-id="78037-140">Póngase en contacto con los escritores para inicializar la cooperación.</span><span class="sxs-lookup"><span data-stu-id="78037-140">Contact the writers to initialize cooperation.</span></span>
5.  <span data-ttu-id="78037-141">Compruebe si hay actualizaciones del escritor en el documento componentes de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="78037-141">Check for writer updates to the Backup Components Document.</span></span>
6.  <span data-ttu-id="78037-142">Restaure los datos.</span><span class="sxs-lookup"><span data-stu-id="78037-142">Restore the data.</span></span>

 

 



