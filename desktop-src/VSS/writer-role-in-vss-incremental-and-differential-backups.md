---
description: 'Normalmente, la participación de un escritor en copias de seguridad incrementales y diferenciales tiene lugar mientras se controlan los eventos de identificación (CVssWriter:: he identify), PrepareForBackup (CVssWriter: OnPrepareBackup) y postsnapshot (CVssWriter: OnPostSnapshot).'
ms.assetid: 85c4e003-b531-4283-83aa-dd5cc53f35b1
title: Rol de escritor en copias de seguridad incrementales y diferenciales de VSS
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f2cda57d907bed4572f0c0f71f9ee829bee18299
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104541699"
---
# <a name="writer-role-in-vss-incremental-and-differential-backups"></a><span data-ttu-id="03adb-103">Rol de escritor en copias de seguridad incrementales y diferenciales de VSS</span><span class="sxs-lookup"><span data-stu-id="03adb-103">Writer Role in VSS Incremental and Differential Backups</span></span>

<span data-ttu-id="03adb-104">Normalmente, la participación de un escritor en copias de seguridad incrementales y diferenciales tiene lugar mientras se controlan los eventos de [*identificación*](vssgloss-i.md) ([**CVssWriter:: he Identify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify)), [*PrepareForBackup*](vssgloss-p.md) ([**CVssWriter: OnPrepareBackup**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpreparebackup)) y *postsnapshot* ([**CVssWriter: OnPostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot)).</span><span class="sxs-lookup"><span data-stu-id="03adb-104">A writer's participation in incremental and differential backups typically takes place while handling [*Identify*](vssgloss-i.md) ([**CVssWriter::OnIdentify**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onidentify)), [*PrepareForBackup*](vssgloss-p.md) ([**CVssWriter:OnPrepareBackup**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpreparebackup)), and *PostSnapshot* ([**CVssWriter:OnPostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot)) events.</span></span> <span data-ttu-id="03adb-105">La forma en que participa un escritor es la forma de si admite marcas de copia de seguridad y horas de última modificación, y si el solicitante que ejecuta la copia de seguridad admite [*operaciones de archivo parciales*](vssgloss-p.md).</span><span class="sxs-lookup"><span data-stu-id="03adb-105">How a writer participates is shaped by whether it supports backup stamps and last modification times, and whether the requester running the backup supports [*partial file operations*](vssgloss-p.md).</span></span>

## <a name="handling-identify-events-during-incremental-and-differential-backups"></a><span data-ttu-id="03adb-106">Control de eventos de identificación durante las copias de seguridad incrementales y diferenciales</span><span class="sxs-lookup"><span data-stu-id="03adb-106">Handling Identify Events during Incremental and Differential Backups</span></span>

<span data-ttu-id="03adb-107">Al controlar el evento de identificación, los escritores establecen su arquitectura básica para la operación de copia de seguridad incremental y diferencial mediante las máscaras esquema de copia de seguridad ([**\_ \_ esquema de copia de seguridad de VSS**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema)) y tipo de copia de seguridad de especificación de archivo ([**\_ \_ \_ \_ tipo de copia de seguridad**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)de especificación de archivo</span><span class="sxs-lookup"><span data-stu-id="03adb-107">While handling the Identify event, writers establish their basic architecture for incremental and differential backup operation through the backup schema ([**VSS\_BACKUP\_SCHEMA**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema)) and file specification backup type ([**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)) masks.</span></span>

<span data-ttu-id="03adb-108">Un escritor indica qué operaciones admite en su documento de metadatos del escritor mediante la creación de una máscara de bits de los valores de [**\_ \_ esquema de copia de seguridad de VSS**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema) y su paso al método [**IVssCreateWriterMetadata:: SetBackupSchema**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setbackupschema) .</span><span class="sxs-lookup"><span data-stu-id="03adb-108">A writer indicates which operations it supports in its Writer Metadata Document by creating a bit mask of [**VSS\_BACKUP\_SCHEMA**](/windows/desktop/api/Vss/ne-vss-vss_backup_schema) values and passing it to the [**IVssCreateWriterMetadata::SetBackupSchema**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setbackupschema) method.</span></span> <span data-ttu-id="03adb-109">Con esto, un escritor puede indicar si admite lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="03adb-109">With this, a writer can indicate whether it supports the following:</span></span>

-   <span data-ttu-id="03adb-110">Copias de seguridad incrementales (se **\_ \_ incremental de VSS BS**)</span><span class="sxs-lookup"><span data-stu-id="03adb-110">Incremental backups (**VSS\_BS\_INCREMENTAL**)</span></span>
-   <span data-ttu-id="03adb-111">Copias de seguridad diferenciales (de **VSS \_ BS \_ diferencial**)</span><span class="sxs-lookup"><span data-stu-id="03adb-111">Differential backups (**VSS\_BS\_DIFFERENTIAL**)</span></span>
-   <span data-ttu-id="03adb-112">Las copias de seguridad incrementales y diferenciales no se pueden mezclar (**VSS \_ BS \_ exclusivo \_ incremental \_ diferencial**)</span><span class="sxs-lookup"><span data-stu-id="03adb-112">Incremental and differential backups cannot be mixed (**VSS\_BS\_EXCLUSIVE\_INCREMENTAL\_DIFFERENTIAL**)</span></span>
-   <span data-ttu-id="03adb-113">Copias de seguridad incrementales y diferenciales mediante marcas de copia de seguridad (**VSS \_ BS \_ timestamp**)</span><span class="sxs-lookup"><span data-stu-id="03adb-113">Incremental and differential backups using backup stamps (**VSS\_BS\_TIMESTAMPED**)</span></span>
-   <span data-ttu-id="03adb-114">Copias de seguridad incrementales y diferenciales en base a la información sobre la última modificación de un archivo (**VSS \_ BS \_ última \_ modificación**)</span><span class="sxs-lookup"><span data-stu-id="03adb-114">Incremental and differential backups on the basis of information about a file's last modification (**VSS\_BS\_LAST\_MODIFY**)</span></span>

<span data-ttu-id="03adb-115">Los escritores usan la máscara de tipo de copia de seguridad de especificación de archivo para proporcionar información de nivel de conjunto de archivos a los solicitantes sobre cómo incluir archivos en una copia de seguridad incremental o diferencial.</span><span class="sxs-lookup"><span data-stu-id="03adb-115">Writers use the file specification backup type mask to provide file set level information to requesters on how to include files in an incremental or differential backup.</span></span>

<span data-ttu-id="03adb-116">Un escritor puede establecer la máscara del tipo de copia de seguridad de la especificación de archivo de un conjunto de archivos cuando agrega el conjunto de archivos a un componente mediante la creación de una máscara de bits de los valores del tipo de copia de seguridad de las especificaciones de archivo de VSS y pasándolo a [**IVssCreateWriterMetadata:: AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata:: AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles)o [**IVssCreateWriterMetadata:: AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup). [**\_ \_ \_ \_**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type)</span><span class="sxs-lookup"><span data-stu-id="03adb-116">A writer can set a file set's file specification backup type mask when it adds the file set to a component by creating a bit mask of [**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type) values and passing it to [**IVssCreateWriterMetadata::AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles), or [**IVssCreateWriterMetadata::AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup).</span></span>

<span data-ttu-id="03adb-117">Hay tres valores de "copia de seguridad necesaria" de la enumeración de [**\_ tipo de copia de \_ \_ seguridad \_ de especificación de archivo de VSS**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type) que afectan a las copias de seguridad diferenciales e incrementales:</span><span class="sxs-lookup"><span data-stu-id="03adb-117">There are three "backup required" values of the [**VSS\_FILE\_SPEC\_BACKUP\_TYPE**](/windows/desktop/api/Vss/ne-vss-vss_file_spec_backup_type) enumeration that affect differential and incremental backups:</span></span>

-   <span data-ttu-id="03adb-118">**VSS \_ FSBT \_ todas las \_ copias de seguridad \_ necesarias**</span><span class="sxs-lookup"><span data-stu-id="03adb-118">**VSS\_FSBT\_ALL\_BACKUP\_REQUIRED**</span></span>
-   <span data-ttu-id="03adb-119">**se \_ \_ requiere la copia de seguridad incremental FSBT de VSS \_ \_**</span><span class="sxs-lookup"><span data-stu-id="03adb-119">**VSS\_FSBT\_INCREMENTAL\_BACKUP\_REQUIRED**</span></span>
-   <span data-ttu-id="03adb-120">**se \_ \_ requiere la \_ copia de seguridad diferencial FSBT \_ de VSS**</span><span class="sxs-lookup"><span data-stu-id="03adb-120">**VSS\_FSBT\_DIFFERENTIAL\_BACKUP\_REQUIRED**</span></span>

<span data-ttu-id="03adb-121">Hay tres valores de "se requiere la instantánea":</span><span class="sxs-lookup"><span data-stu-id="03adb-121">There are three "shadow copy required" values:</span></span>

-   <span data-ttu-id="03adb-122">**VSS \_ FSBT \_ todas las \_ instantáneas \_ necesarias**</span><span class="sxs-lookup"><span data-stu-id="03adb-122">**VSS\_FSBT\_ALL\_SNAPSHOT\_REQUIRED**</span></span>
-   <span data-ttu-id="03adb-123">**se \_ \_ requiere la instantánea incremental FSBT de VSS \_ \_**</span><span class="sxs-lookup"><span data-stu-id="03adb-123">**VSS\_FSBT\_INCREMENTAL\_SNAPSHOT\_REQUIRED**</span></span>
-   <span data-ttu-id="03adb-124">**se \_ \_ requiere la \_ instantánea \_ diferencial FSBT de VSS**</span><span class="sxs-lookup"><span data-stu-id="03adb-124">**VSS\_FSBT\_DIFFERENTIAL\_SNAPSHOT\_REQUIRED**</span></span>

<span data-ttu-id="03adb-125">Los conjuntos de archivos etiquetados con un tipo de copia de seguridad de especificación de archivo de "instantánea necesaria" indican si un solicitante debe copiar datos de una instantánea al realizar operaciones de copia de seguridad INCREMENTAl, diferencial o de todos (lo que incluye operaciones incrementales y diferenciales).</span><span class="sxs-lookup"><span data-stu-id="03adb-125">File sets tagged with a file specification backup type of "shadow copy required" indicate whether a requester needs to copy data from a shadow copy when performing INCREMENTAL, DIFFERENTIAL, or ALL (which includes both incremental and differential operations) backup operations.</span></span>

<span data-ttu-id="03adb-126">La marca "se requiere copia de seguridad", que se aplica a las operaciones de copia de seguridad INCREMENTAl, diferencial o todas, indica que el escritor espera que haya una copia de la versión actual del conjunto de archivos disponible después de la restauración de cualquier operación de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="03adb-126">The "backup required" flag, applied to INCREMENTAL, DIFFERENTIAL, or ALL backup operations, indicates that the writer expects a copy of the current version of the file set to be available following the restore of any backup operation.</span></span> <span data-ttu-id="03adb-127">Normalmente, esto significa que si un conjunto de archivos se etiqueta con "se requiere copia de seguridad", todos sus miembros se copiarán en el medio de copia de seguridad durante una copia de seguridad incremental o diferencial, independientemente de Cuándo se haya producido la última copia de seguridad o modificación.</span><span class="sxs-lookup"><span data-stu-id="03adb-127">Typically, this means that if a file set is tagged with "backup required," all its members will be copied to backup media during an incremental or differential backup, regardless of when their backup or modification last occurred.</span></span>

<span data-ttu-id="03adb-128">De forma predeterminada, los conjuntos de archivos se agregan a los componentes con un tipo de copia de seguridad de especificación de archivo de **VSS \_ FSBT \_ All \_ backup \_ required** \| **VSS \_ FSBT \_ All \_ Snapshot \_ required**.</span><span class="sxs-lookup"><span data-stu-id="03adb-128">By default, file sets are added to components with a file specification backup type of **VSS\_FSBT\_ALL\_BACKUP\_REQUIRED** \| **VSS\_FSBT\_ALL\_SNAPSHOT\_REQUIRED**.</span></span> <span data-ttu-id="03adb-129">Por lo tanto, a menos que un programador del escritor decida no usar el valor predeterminado (al elegir otro tipo de copia de seguridad de especificación de archivo, usar operaciones de archivo parciales o usar archivos diferenciados), los archivos de la mayoría de los conjuntos de archivos se copiarán normalmente en su totalidad en medios de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="03adb-129">Therefore, unless a writer developer decides not to use the default (by choosing another file specification backup type, using partial file operations, or using differenced files), the files in most file sets will typically be copied in their entirety to backup media.</span></span>

<span data-ttu-id="03adb-130">En este momento, el documento de metadatos del escritor del escritor se rellena completamente con la mayor parte de la información que necesitará un solicitante para iniciar una copia de seguridad diferencial o incremental.</span><span class="sxs-lookup"><span data-stu-id="03adb-130">At this point, the writer's Writer Metadata Document is fully populated with most of information a requester will need to start a differential or incremental backup.</span></span> <span data-ttu-id="03adb-131">La especificación adicional del conjunto de archivos o la información de nivel de archivo para admitir la copia de seguridad se controlará durante el evento [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) .</span><span class="sxs-lookup"><span data-stu-id="03adb-131">Addition specification of file set or file level information to support the backup will be handled during the [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) event.</span></span>

## <a name="handling-prepareforbackup-events-during-incremental-and-differential-backups"></a><span data-ttu-id="03adb-132">Control de eventos PrepareForBackup durante las copias de seguridad incrementales y diferenciales</span><span class="sxs-lookup"><span data-stu-id="03adb-132">Handling PrepareForBackup Events during Incremental and Differential Backups</span></span>

<span data-ttu-id="03adb-133">Antes de que el solicitante continúe con la operación de copia de seguridad real, los escritores pueden modificar la especificación de una copia de seguridad [*incremental*](vssgloss-i.md) o [*diferencial*](vssgloss-d.md) mediante la modificación del documento de componentes de copia de seguridad del solicitante a través de la interfaz [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) .</span><span class="sxs-lookup"><span data-stu-id="03adb-133">Before the requester proceeds with the actual backup operation, writers can modify the specification of an [*incremental*](vssgloss-i.md) or [*differential*](vssgloss-d.md) backup by altering the requester's Backup Components Document through the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface.</span></span>

<span data-ttu-id="03adb-134">Dado que los escritores usan la interfaz [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) , normalmente realizan estos preparativos al controlar el evento [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) .</span><span class="sxs-lookup"><span data-stu-id="03adb-134">Because the writers use the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface, they typically perform these preparations while handling the [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) event.</span></span>

<span data-ttu-id="03adb-135">En [**CVssWriter: OnPrepareBackup**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpreparebackup), los escritores pueden especificar con mayor precisión el modo en que algunos archivos se van a evaluar para la copia de seguridad, especificar qué mecanismos deben usarse para realizar copias de seguridad y, posiblemente, establecer marcas de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="03adb-135">In [**CVssWriter:OnPrepareBackup**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpreparebackup), writers can more precisely specify how some files are to be evaluated for backup, specify what mechanisms should be used in backing them up, and possibly set backup stamps.</span></span>

<dl> <dt>

<span data-ttu-id="03adb-136"><span id="Partial_Files"></span><span id="partial_files"></span><span id="PARTIAL_FILES"></span>Archivos parciales</span><span class="sxs-lookup"><span data-stu-id="03adb-136"><span id="Partial_Files"></span><span id="partial_files"></span><span id="PARTIAL_FILES"></span>Partial Files</span></span>
</dt> <dd>

<span data-ttu-id="03adb-137">Si un solicitante los admite, un escritor puede elegir tener una copia de seguridad incremental o diferencial implementada mediante operaciones de archivo parciales.</span><span class="sxs-lookup"><span data-stu-id="03adb-137">If a requester supports them, a writer can choose to have an incremental or differential backup implemented by using partial file operations.</span></span> <span data-ttu-id="03adb-138">(Los escritores pueden determinar si un solicitante admite operaciones de archivo parciales mediante una llamada a [**CVssWriter:: IsPartialFileSupportEnabled**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-ispartialfilesupportenabled)).</span><span class="sxs-lookup"><span data-stu-id="03adb-138">(Writers can determine if a requester supports partial file operations by calling [**CVssWriter::IsPartialFileSupportEnabled**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-ispartialfilesupportenabled).)</span></span>

<span data-ttu-id="03adb-139">Los escritores usan [**IVssComponent:: AddPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-addpartialfile) para indicar las partes de los archivos seleccionados de los que se va a realizar una copia de seguridad durante la operación diferencial o incremental.</span><span class="sxs-lookup"><span data-stu-id="03adb-139">Writers use [**IVssComponent::AddPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-addpartialfile) to indicate those portions of the selected files to be backed up during the incremental or differential operation.</span></span> <span data-ttu-id="03adb-140">Los solicitantes deben respetar esta especificación y siempre deben realizar copias de seguridad de las secciones especificadas de los archivos.</span><span class="sxs-lookup"><span data-stu-id="03adb-140">Requesters must respect this specification, and must always back up the specified sections of the files.</span></span> <span data-ttu-id="03adb-141">(Consulte [trabajar con archivos parciales](working-with-partial-files.md) para obtener más información sobre las operaciones de archivo parciales).</span><span class="sxs-lookup"><span data-stu-id="03adb-141">(See [Working with Partial Files](working-with-partial-files.md) for more information on partial file operations.)</span></span>

<span data-ttu-id="03adb-142">Mediante [**IVssComponent:: AddPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-addpartialfile), un escritor puede Agregar un archivo a la copia de seguridad que no se agregó previamente a uno de sus conjuntos de componentes (por [**IVssCreateWriterMetadata:: AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata:: AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles)o [**IVssCreateWriterMetadata:: AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup)) como un archivo parcial.</span><span class="sxs-lookup"><span data-stu-id="03adb-142">Using [**IVssComponent::AddPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-addpartialfile), a writer can add a file to the backup that was not previously added to one of its component sets (by [**IVssCreateWriterMetadata::AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles), or [**IVssCreateWriterMetadata::AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup)) as a partial file.</span></span> <span data-ttu-id="03adb-143">Los archivos nuevos que se agreguen a la copia de seguridad de esta manera deben estar en un volumen del que ya se estén realizando instantáneas para esta copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="03adb-143">Any new files added to the backup in this manner must be on a volume that already is being shadow copied for this backup.</span></span>

<span data-ttu-id="03adb-144">Si un archivo está implicado en operaciones de archivo parcial, reemplaza cualquier tipo de copia de seguridad de especificación de archivo, que se omite.</span><span class="sxs-lookup"><span data-stu-id="03adb-144">If a file is involved with partial file operations, this supersedes any file specification backup type, which is ignored.</span></span>

</dd> <dt>

<span data-ttu-id="03adb-145"><span id="Differenced_Files"></span><span id="differenced_files"></span><span id="DIFFERENCED_FILES"></span>Archivos diferenciados</span><span class="sxs-lookup"><span data-stu-id="03adb-145"><span id="Differenced_Files"></span><span id="differenced_files"></span><span id="DIFFERENCED_FILES"></span>Differenced Files</span></span>
</dt> <dd>

<span data-ttu-id="03adb-146">Los escritores que admiten un esquema de copia de seguridad de última modificación (**\_ \_ esquema de VSS BS**) pueden agregar [*archivos diferenciados*](vssgloss-d.md) a una copia de seguridad incremental o diferencial.</span><span class="sxs-lookup"><span data-stu-id="03adb-146">Writers that support a last modified backup schema (**VSS\_BS\_SCHEMA**) can add [*differenced files*](vssgloss-d.md) to an incremental or differential backup.</span></span>

<span data-ttu-id="03adb-147">En la especificación de un archivo diferenciado, un escritor usa [**IVssComponent:: AddDifferencedFileByLastModifyTime**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddifferencedfilesbylastmodifytime) y especifica una ruta de acceso, un nombre de archivo y una marca recursiva; sin embargo, no es necesario que coincidan con un conjunto de archivos incluido en ningún componente.</span><span class="sxs-lookup"><span data-stu-id="03adb-147">In specifying a differenced file, a writer uses [**IVssComponent::AddDifferencedFileByLastModifyTime**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-adddifferencedfilesbylastmodifytime) and specifies a path, a file name, and a recursive flag—however, these do not have to match a file set included in any component.</span></span>

<span data-ttu-id="03adb-148">De hecho, un escritor puede Agregar un archivo que no se haya agregado previamente a uno de sus conjuntos de componentes (por [**IVssCreateWriterMetadata:: AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata:: AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles)o [**IVssCreateWriterMetadata:: AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup)) a la copia de seguridad como un archivo diferenciado.</span><span class="sxs-lookup"><span data-stu-id="03adb-148">In fact, a writer can add a file not previously added to one of its component sets (by [**IVssCreateWriterMetadata::AddDatabaseFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabasefiles), [**IVssCreateWriterMetadata::AddDatabaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles), or [**IVssCreateWriterMetadata::AddFilesToFileGroup**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addfilestofilegroup)) to the backup as a differenced file.</span></span> <span data-ttu-id="03adb-149">Los archivos nuevos que se agreguen a la copia de seguridad de esta manera deben estar en un volumen del que ya se estén realizando instantáneas para esta copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="03adb-149">Any new files added to the backup in this manner must be on a volume that already is being shadow copied for this backup.</span></span>

<span data-ttu-id="03adb-150">Normalmente, un sistema de escritura también especificará una hora de última modificación al agregar un archivo diferenciado, en función del propio mecanismo de historial del escritor.</span><span class="sxs-lookup"><span data-stu-id="03adb-150">Typically, a writer will also specify a time of last modification when adding a differenced file—based on the writer's own history mechanism.</span></span> <span data-ttu-id="03adb-151">La hora de la última modificación, si se especifica, siempre debe ser utilizada por los solicitantes para determinar si un archivo debe incluirse en una copia de seguridad incremental o diferencial.</span><span class="sxs-lookup"><span data-stu-id="03adb-151">This last modification time, if specified, must always be used by requesters in determining if a file needs to be included in an incremental or differential backup.</span></span>

<span data-ttu-id="03adb-152">Un escritor puede optar por no especificar una hora de última modificación al agregar un archivo diferenciado a un conjunto de copia de seguridad incremental o diferencial.</span><span class="sxs-lookup"><span data-stu-id="03adb-152">A writer may choose not to specify a last modification time when adding a differenced file to an incremental or differential backup set.</span></span> <span data-ttu-id="03adb-153">Si este es el caso, los solicitantes pueden usar sus propios mecanismos, por ejemplo, registros de copias de seguridad anteriores o información del sistema de archivos, para determinar si el archivo diferenciado debe incluirse en una copia de seguridad incremental o diferencial.</span><span class="sxs-lookup"><span data-stu-id="03adb-153">If this is the case, requesters are free to use their own mechanisms—for instance, logs of previous backups or file system information—to determine whether the differenced file should be included in an incremental or differential backup.</span></span>

<span data-ttu-id="03adb-154">Se omite el tipo de copia de seguridad de especificación de archivo de cualquier archivo diferenciado.</span><span class="sxs-lookup"><span data-stu-id="03adb-154">The file specification backup type of any differenced file is ignored.</span></span>

</dd> <dt>

<span data-ttu-id="03adb-155"><span id="Backup_Stamps"></span><span id="backup_stamps"></span><span id="BACKUP_STAMPS"></span>Marcas de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="03adb-155"><span id="Backup_Stamps"></span><span id="backup_stamps"></span><span id="BACKUP_STAMPS"></span>Backup Stamps</span></span>
</dt> <dd>

<span data-ttu-id="03adb-156">Los escritores que admiten marcas de copia de seguridad (**VSS \_ BS \_ timestamp**) tienen su propio formato privado para almacenar información sobre cuándo se produjo una copia de seguridad por última vez.</span><span class="sxs-lookup"><span data-stu-id="03adb-156">Writers that support backup stamps (**VSS\_BS\_TIMESTAMP**) have their own private format for storing information about when a backup last occurred.</span></span> <span data-ttu-id="03adb-157">El escritor genera esta información durante la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="03adb-157">This information is generated by the writer during backup.</span></span>

<span data-ttu-id="03adb-158">El sello de copia de seguridad se almacena en el documento componentes de copia de seguridad como una cadena mediante el método [**IVssComponent:: SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) .</span><span class="sxs-lookup"><span data-stu-id="03adb-158">The backup stamp is stored in the Backup Components Document as a string by the [**IVssComponent::SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) method.</span></span> <span data-ttu-id="03adb-159">La marca de copia de seguridad se aplica a todos los conjuntos de archivos del componente (o conjunto de componentes) correspondientes a la instancia de [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent).</span><span class="sxs-lookup"><span data-stu-id="03adb-159">The backup stamp applies to all file sets in the component (or component set) corresponding to the instance of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent).</span></span>

<span data-ttu-id="03adb-160">Si un solicitante tiene acceso al sello de copia de seguridad de una copia de seguridad anterior, lo hará disponible para el escritor llamando a [**IVssBackupComponents:: SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="03adb-160">If a requester has access to the backup stamp of a previous backup, it will have made it available to the writer by calling [**IVssBackupComponents::SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp).</span></span>

<span data-ttu-id="03adb-161">Después, un escritor puede examinar esta marca de tiempo mediante [**IVssComponent:: GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="03adb-161">A writer then can examine this time stamp using [**IVssComponent::GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span></span>

<span data-ttu-id="03adb-162">Tenga en cuenta que el solicitante simplemente almacena y devuelve la cadena que contiene el sello de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="03adb-162">Note that the requester merely stores and returns the string containing the backup stamp.</span></span> <span data-ttu-id="03adb-163">No se sabe nada sobre el formato de la cadena o cómo usarlo; solo el escritor tiene esa información.</span><span class="sxs-lookup"><span data-stu-id="03adb-163">It does not know anything about the string's format or how to use it; only the writer has that information.</span></span>

<span data-ttu-id="03adb-164">Un escritor puede optar por actualizar el sello de copia de seguridad actual mediante [**IVssComponent:: SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) después de haber llamado a [**IVssComponent:: GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp), con lo que se graba en su propio formato la fecha de la operación de copia de seguridad incremental o diferencial actual.</span><span class="sxs-lookup"><span data-stu-id="03adb-164">A writer may choose to update the current backup stamp using [**IVssComponent::SetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-setbackupstamp) after it has called [**IVssComponent::GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp), thus recording in its own format the date of the current incremental or differential backup operation.</span></span>

</dd> </dl>

 

 



