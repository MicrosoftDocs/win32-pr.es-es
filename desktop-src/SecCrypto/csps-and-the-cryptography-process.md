---
description: Las funciones de CryptoAPI usan proveedores de servicios de cifrado (CSP) para realizar el cifrado y el descifrado, así como para proporcionar seguridad y almacenamiento de claves.
ms.assetid: 7977e59b-7ce1-4bb4-aae4-d67b7d646493
title: CSP y el proceso de criptografía
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f5404fc3641a9a2c753158f5acb84850f3f0f29
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104082058"
---
# <a name="csps-and-the-cryptography-process"></a><span data-ttu-id="9ca54-103">CSP y el proceso de criptografía</span><span class="sxs-lookup"><span data-stu-id="9ca54-103">CSPs and the Cryptography Process</span></span>

<span data-ttu-id="9ca54-104">Las funciones de [*CryptoAPI*](../secgloss/c-gly.md) usan [*proveedores de servicios de cifrado*](../secgloss/c-gly.md) (CSP) para realizar el cifrado y el descifrado, así como para proporcionar seguridad y almacenamiento de claves.</span><span class="sxs-lookup"><span data-stu-id="9ca54-104">[*CryptoAPI*](../secgloss/c-gly.md) functions use [*cryptographic service providers*](../secgloss/c-gly.md) (CSPs) to perform encryption and decryption, and to provide key storage and security.</span></span> <span data-ttu-id="9ca54-105">Estos CSP son módulos independientes.</span><span class="sxs-lookup"><span data-stu-id="9ca54-105">These CSPs are independent modules.</span></span> <span data-ttu-id="9ca54-106">Idealmente, los CSP se escriben para ser independientes de una aplicación determinada, de modo que cualquier aplicación se ejecute con una variedad de CSP.</span><span class="sxs-lookup"><span data-stu-id="9ca54-106">Ideally, CSPs are written to be independent of a particular application, so that any application will run with a variety of CSPs.</span></span> <span data-ttu-id="9ca54-107">Sin embargo, en realidad, algunas aplicaciones tienen requisitos específicos que requieren un CSP personalizado.</span><span class="sxs-lookup"><span data-stu-id="9ca54-107">In reality, however, some applications have specific requirements that require a customized CSP.</span></span> <span data-ttu-id="9ca54-108">Se compara con el modelo de Windows [*GDI*](../secgloss/g-gly.md) .</span><span class="sxs-lookup"><span data-stu-id="9ca54-108">This compares to the Windows [*GDI*](../secgloss/g-gly.md) model.</span></span> <span data-ttu-id="9ca54-109">Los CSP son análogos a los controladores de dispositivos de gráficos.</span><span class="sxs-lookup"><span data-stu-id="9ca54-109">CSPs are analogous to graphics device drivers.</span></span>

<span data-ttu-id="9ca54-110">La calidad de la protección de las claves dentro del sistema es un parámetro de diseño del CSP y no del sistema en su totalidad.</span><span class="sxs-lookup"><span data-stu-id="9ca54-110">The quality of protection for keys within the system is a design parameter of the CSP and not of the system as a whole.</span></span> <span data-ttu-id="9ca54-111">Esto permite que una aplicación se ejecute en una variedad de contextos de seguridad sin modificaciones.</span><span class="sxs-lookup"><span data-stu-id="9ca54-111">This allows an application to run in a variety of security contexts without modification.</span></span>

<span data-ttu-id="9ca54-112">Las aplicaciones de acceso a las internamente criptográficas se restringen cuidadosamente.</span><span class="sxs-lookup"><span data-stu-id="9ca54-112">The access applications have to the cryptographic internals is carefully restricted.</span></span> <span data-ttu-id="9ca54-113">Esto facilita el desarrollo de aplicaciones seguras y portátiles.</span><span class="sxs-lookup"><span data-stu-id="9ca54-113">This facilitates secure and portable application development.</span></span>

<span data-ttu-id="9ca54-114">Se aplican las tres reglas de diseño siguientes:</span><span class="sxs-lookup"><span data-stu-id="9ca54-114">The following three design rules apply:</span></span>

-   <span data-ttu-id="9ca54-115">Las aplicaciones no pueden tener acceso directamente al material de creación de claves.</span><span class="sxs-lookup"><span data-stu-id="9ca54-115">Applications cannot directly access keying material.</span></span> <span data-ttu-id="9ca54-116">Dado que todo el material de creación de claves se genera dentro del CSP y lo usa la aplicación a través de identificadores opacos, no hay ningún riesgo de que una aplicación o sus archivos dll asociados revelan el material de creación de claves o eligen material de clave de orígenes aleatorios deficientes.</span><span class="sxs-lookup"><span data-stu-id="9ca54-116">Because all keying material is generated within the CSP and used by the application through opaque handles, there is no risk of an application or its associated DLLs either divulging keying material or choosing keying material from poor random sources.</span></span>
-   <span data-ttu-id="9ca54-117">Las aplicaciones no pueden especificar los detalles de las operaciones criptográficas.</span><span class="sxs-lookup"><span data-stu-id="9ca54-117">Applications cannot specify the details of cryptographic operations.</span></span> <span data-ttu-id="9ca54-118">La interfaz de CSP permite a una aplicación elegir un algoritmo de cifrado o de firma, pero el CSP realiza la implementación de cada operación criptográfica.</span><span class="sxs-lookup"><span data-stu-id="9ca54-118">The CSP interface allows an application to choose an encryption or signature algorithm, but the implementation of every cryptographic operation is done by the CSP.</span></span>
-   <span data-ttu-id="9ca54-119">Las aplicaciones no controlan [*las credenciales*](../secgloss/c-gly.md) de usuario ni otros datos de autenticación de usuario.</span><span class="sxs-lookup"><span data-stu-id="9ca54-119">Applications do not handle user [*credentials*](../secgloss/c-gly.md) or other user authentication data.</span></span> <span data-ttu-id="9ca54-120">El CSP realiza la autenticación del usuario; por lo tanto, los futuros CSP con capacidades de autenticación avanzadas, como las entradas biométricas, funcionarán sin necesidad de cambiar el modelo de autenticación de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9ca54-120">User authentication is done by the CSP; therefore, future CSPs with advanced authentication capabilities, such as biometric inputs, will function without needing to change the application authentication model.</span></span>

<span data-ttu-id="9ca54-121">Como mínimo, un CSP consta de una biblioteca de vínculos dinámicos (DLL) y un [*archivo de signatura*](../secgloss/s-gly.md).</span><span class="sxs-lookup"><span data-stu-id="9ca54-121">At a minimum, a CSP consists of a dynamic-link library (DLL) and a [*signature file*](../secgloss/s-gly.md).</span></span> <span data-ttu-id="9ca54-122">El archivo de signatura es necesario para asegurarse de que [*CryptoAPI*](../secgloss/c-gly.md) reconoce el CSP.</span><span class="sxs-lookup"><span data-stu-id="9ca54-122">The signature file is necessary to ensure that the [*CryptoAPI*](../secgloss/c-gly.md) recognizes the CSP.</span></span> <span data-ttu-id="9ca54-123">CryptoAPI valida esta firma periódicamente para asegurarse de que se detecta cualquier alteración con el CSP.</span><span class="sxs-lookup"><span data-stu-id="9ca54-123">CryptoAPI validates this signature periodically to ensure that any tampering with the CSP is detected.</span></span>

<span data-ttu-id="9ca54-124">Algunos CSP pueden implementar una fracción de su funcionalidad en un servicio separado por direcciones llamado a través de RPC local o en hardware llamado a través de un controlador de dispositivo del sistema.</span><span class="sxs-lookup"><span data-stu-id="9ca54-124">Some CSPs can implement a fraction of their functionality in an address-separated service called through local RPC or in hardware called through a system device driver.</span></span> <span data-ttu-id="9ca54-125">El aislamiento de operaciones de cifrado globales y de estado de clave global en un servicio separado por la dirección o en el hardware mantiene las claves y las operaciones seguras de la manipulación dentro de un espacio de datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9ca54-125">Isolating global key-state and central cryptographic operations in an address-separated service or in hardware keeps keys and operations safe from tampering within an application data space.</span></span>

<span data-ttu-id="9ca54-126">No es aconsejable que las aplicaciones aprovechen los atributos específicos de un CSP específico.</span><span class="sxs-lookup"><span data-stu-id="9ca54-126">It is unwise for applications to take advantage of attributes particular to a specific CSP.</span></span> <span data-ttu-id="9ca54-127">Por ejemplo, el proveedor de servicios criptográficos de base de Microsoft (proporcionado con CryptoAPI) admite claves de sesión de 40 bits y claves públicas de 512 bits.</span><span class="sxs-lookup"><span data-stu-id="9ca54-127">For example, the Microsoft Base Cryptographic Provider (supplied with CryptoAPI) supports 40-bit session keys and 512-bit public keys.</span></span> <span data-ttu-id="9ca54-128">Las aplicaciones que manipulen estas claves deben evitar suposiciones sobre la cantidad de memoria necesaria para almacenar estas claves, ya que es probable que se produzca un error en la aplicación si se usa un CSP diferente.</span><span class="sxs-lookup"><span data-stu-id="9ca54-128">Applications manipulating these keys must avoid assumptions about the amount of memory needed to store these keys because the application is likely to fail if a different CSP is used.</span></span> <span data-ttu-id="9ca54-129">Las aplicaciones bien escritas deben trabajar con diversos CSP.</span><span class="sxs-lookup"><span data-stu-id="9ca54-129">Well-written applications must work with a variety of CSPs.</span></span>

<span data-ttu-id="9ca54-130">Para obtener más información sobre los tipos de proveedor de servicios criptográficos y los CSP predefinidos que se pueden usar con CryptoAPI, consulte tipos de proveedor de servicios [criptográficos](cryptographic-provider-types.md) y [proveedores de servicios criptográficos de Microsoft](microsoft-cryptographic-service-providers.md).</span><span class="sxs-lookup"><span data-stu-id="9ca54-130">For details about cryptographic provider types and predefined CSPs that can be used with CryptoAPI, see [Cryptographic Provider Types](cryptographic-provider-types.md) and [Microsoft Cryptographic Service Providers](microsoft-cryptographic-service-providers.md).</span></span>

 

 
