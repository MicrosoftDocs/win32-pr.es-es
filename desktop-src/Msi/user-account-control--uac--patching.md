---
description: La aplicación de revisiones de control de cuentas de usuario (UAC) permite a los autores de instalaciones Windows Installer identificar revisiones firmadas digitalmente que los usuarios que no son administradores pueden aplicar en el futuro.
ms.assetid: f7d64f61-24c8-4037-a10b-d68d0e9e3c42
title: Revisión de control de cuentas de usuario (UAC)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6d111a39245ab15b24c1734d278a8e0a477e68a6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "103913450"
---
# <a name="user-account-control-uac-patching"></a><span data-ttu-id="0d90f-103">Revisión de control de cuentas de usuario (UAC)</span><span class="sxs-lookup"><span data-stu-id="0d90f-103">User Account Control (UAC) Patching</span></span>

<span data-ttu-id="0d90f-104">La aplicación de revisiones de [*control de cuentas de usuario*](u-gly.md) (UAC) permite a los autores de instalaciones Windows Installer identificar revisiones firmadas digitalmente que los usuarios que no son administradores pueden aplicar en el futuro.</span><span class="sxs-lookup"><span data-stu-id="0d90f-104">[*User Account Control*](u-gly.md) (UAC) patching enables the authors of Windows Installer installations to identify digitally-signed patches that can be applied in the future by non-administrator users.</span></span>

<span data-ttu-id="0d90f-105">Si la firma digital no coincide con el certificado, Windows Vista muestra un cuadro de diálogo de UAC que solicita autorización de administrador antes de instalar la revisión.</span><span class="sxs-lookup"><span data-stu-id="0d90f-105">If the digital signature does not match the certificate, Windows Vista displays a UAC dialog box requesting administrator authorization before installing the patch.</span></span> <span data-ttu-id="0d90f-106">En sistemas anteriores a Windows Vista, el instalador no aplicará una revisión firmada que no coincida con el certificado.</span><span class="sxs-lookup"><span data-stu-id="0d90f-106">On systems earlier than Windows Vista, the installer will not apply a signed patch that does not match the certificate.</span></span>

<span data-ttu-id="0d90f-107">Si un usuario no administrador intenta aplicar una revisión a una aplicación y no se cumplen las siguientes condiciones, Windows Vista notificará al usuario que se necesita autorización de administrador antes de instalar la revisión.</span><span class="sxs-lookup"><span data-stu-id="0d90f-107">If a non-administrator attempts to apply a patch to an application, and the following conditions have not been met, Windows Vista will notify the user that administrator authorization is required before installing the patch.</span></span> <span data-ttu-id="0d90f-108">Un usuario que no sea administrador puede seguir instalando la revisión sin necesidad de obtener autorización de administrador adicional, siempre que se cumplan las siguientes condiciones.</span><span class="sxs-lookup"><span data-stu-id="0d90f-108">A non-administrator can continue installing the patch, without needing to obtain additional administrator authorization, provided the following conditions are met.</span></span>

-   <span data-ttu-id="0d90f-109">La aplicación se instaló en Windows Vista o Windows XP con Windows Installer 3,0 o posterior.</span><span class="sxs-lookup"><span data-stu-id="0d90f-109">The application was installed on Windows Vista or Windows XP using Windows Installer 3.0 or later.</span></span>

    <span data-ttu-id="0d90f-110">**Windows Server 2008:** No compatible.</span><span class="sxs-lookup"><span data-stu-id="0d90f-110">**Windows Server 2008:** Not supported.</span></span>

-   <span data-ttu-id="0d90f-111">Si la aplicación se instaló en Windows XP, la aplicación también se debe haber instalado desde un medio extraíble, como un disco de CD-ROM o DVD.</span><span class="sxs-lookup"><span data-stu-id="0d90f-111">If the application was installed on Windows XP, the application must also have been installed from removable media, such a CD-ROM or DVD disk.</span></span> <span data-ttu-id="0d90f-112">Esta restricción no se aplica si la aplicación se instaló en Windows Vista.</span><span class="sxs-lookup"><span data-stu-id="0d90f-112">This restriction does not apply if the application was installed on Windows Vista.</span></span>
-   <span data-ttu-id="0d90f-113">La aplicación no se instaló desde una imagen de origen de [instalación administrativa](administrative-installation.md) .</span><span class="sxs-lookup"><span data-stu-id="0d90f-113">The application was not installed from an [administrative installation](administrative-installation.md) source image.</span></span>
-   <span data-ttu-id="0d90f-114">La aplicación se instaló originalmente por equipo.</span><span class="sxs-lookup"><span data-stu-id="0d90f-114">The application was originally installed per-machine.</span></span> <span data-ttu-id="0d90f-115">Para obtener información acerca de cómo permitir que los usuarios que no son administradores apliquen revisiones a aplicaciones administradas por el usuario después de que un administrador haya aprobado la revisión como de confianza, consulte [aplicación de revisiones Per-User aplicaciones administradas](patching-per-user-managed-applications.md).</span><span class="sxs-lookup"><span data-stu-id="0d90f-115">For information about how to enable non-administrators to apply patches to per-user-managed applications after the patch has been approved as trusted by an administrator, see [Patching Per-User Managed Applications](patching-per-user-managed-applications.md).</span></span>
-   <span data-ttu-id="0d90f-116">La [tabla MsiPatchCertificate](msipatchcertificate-table.md) se encuentra en el paquete del instalador de Windows (archivo. msi) y contiene la información necesaria para habilitar UAC.</span><span class="sxs-lookup"><span data-stu-id="0d90f-116">The [MsiPatchCertificate table](msipatchcertificate-table.md) is present in the Window Installer package (.msi file) and contains the information needed to enable UAC.</span></span> <span data-ttu-id="0d90f-117">Es posible que la tabla y la información se hayan incluido en el paquete de instalación original o que se hayan agregado al paquete mediante un archivo de revisión de Windows Installer (archivo. msp).</span><span class="sxs-lookup"><span data-stu-id="0d90f-117">The table and information may have been be included in the original installation package or added to the package by a Windows Installer patch file (.msp file).</span></span>
-   <span data-ttu-id="0d90f-118">Las revisiones se firman digitalmente con un certificado que aparece en la [tabla MsiPatchCertificate](msipatchcertificate-table.md).</span><span class="sxs-lookup"><span data-stu-id="0d90f-118">The patches are digitally signed by a certificate listed in the [MsiPatchCertificate table](msipatchcertificate-table.md).</span></span> <span data-ttu-id="0d90f-119">Para obtener más información sobre los certificados de firma digital, consulte [firmas digitales y Windows Installer](digital-signatures-and-windows-installer.md).</span><span class="sxs-lookup"><span data-stu-id="0d90f-119">For more information about digital signature certificates, see [Digital Signatures and Windows Installer](digital-signatures-and-windows-installer.md).</span></span>
-   <span data-ttu-id="0d90f-120">La firma digital del paquete de revisión se puede comprobar con el certificado de la [tabla MsiPatchCertificate](msipatchcertificate-table.md).</span><span class="sxs-lookup"><span data-stu-id="0d90f-120">The digital signature on the patch package can be verified against the certificate in the [MsiPatchCertificate table](msipatchcertificate-table.md).</span></span> <span data-ttu-id="0d90f-121">Para obtener más información acerca del uso de firmas digitales, certificados digitales y [**WinVerifyTrust**](/windows/win32/api/wintrust/nf-wintrust-winverifytrust), consulte la sección [seguridad](https://msdn.microsoft.com/library/cc527452.aspx) del kit de desarrollo de software (SDK) de Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="0d90f-121">For more information about the use of digital signatures, digital certificates, and [**WinVerifyTrust**](/windows/win32/api/wintrust/nf-wintrust-winverifytrust), see the [Security](https://msdn.microsoft.com/library/cc527452.aspx) section of the Microsoft Windows Software Development Kit (SDK).</span></span>
-   <span data-ttu-id="0d90f-122">El certificado de firmante que se usa para comprobar la firma digital en el paquete de revisión es válido y no se ha revocado.</span><span class="sxs-lookup"><span data-stu-id="0d90f-122">The signer certificate used to verify the digital signature on the patch package is valid and has not been revoked.</span></span>
    > [!Note]  
    > <span data-ttu-id="0d90f-123">Aunque no puede firmar una revisión mediante un certificado expirado, la evaluación de una firma digital en una revisión no genera un error si el certificado ha expirado.</span><span class="sxs-lookup"><span data-stu-id="0d90f-123">Although you cannot sign a patch using an expired certificate, evaluation of a digital signature on a patch does not fail if the certificate has expired.</span></span> <span data-ttu-id="0d90f-124">La evaluación usa la [tabla MsiPatchCertificate](msipatchcertificate-table.md)actual, que consta de la tabla MsiPatchCertificate en el paquete original y los cambios realizados en la tabla por revisiones secuenciados antes de la actual.</span><span class="sxs-lookup"><span data-stu-id="0d90f-124">Evaluation uses the current [MsiPatchCertificate table](msipatchcertificate-table.md), which consists of the MsiPatchCertificate table in the original package and any changes to the table by patches sequenced prior to the current one.</span></span> <span data-ttu-id="0d90f-125">Una revisión puede agregar nuevos certificados a la tabla MsiPatchCertificate para evaluar las revisiones secuenciadas después de la revisión actual.</span><span class="sxs-lookup"><span data-stu-id="0d90f-125">A patch can add new certificates to the MsiPatchCertificate table to evaluate patches sequenced after the current patch.</span></span> <span data-ttu-id="0d90f-126">Siempre se rechaza un certificado revocado.</span><span class="sxs-lookup"><span data-stu-id="0d90f-126">A revoked certificate is always rejected.</span></span>

     

-   <span data-ttu-id="0d90f-127">La revisión con privilegios mínimos no se ha deshabilitado mediante el establecimiento de la propiedad [**MSIDISABLELUAPATCHING**](msidisableluapatching.md) o de la directiva [DisableLUAPatching](disableluapatching.md) .</span><span class="sxs-lookup"><span data-stu-id="0d90f-127">Least-privilege patching has not been disabled by setting the [**MSIDISABLELUAPATCHING**](msidisableluapatching.md) property or the [DisableLUAPatching](disableluapatching.md) policy.</span></span>

<span data-ttu-id="0d90f-128">Una revisión que se ha aplicado mediante la aplicación de revisiones de UAC también puede quitarla un usuario que no sea de administrador.</span><span class="sxs-lookup"><span data-stu-id="0d90f-128">A patch that has been applied using UAC patching can also be removed by a non-administrator.</span></span>

<span data-ttu-id="0d90f-129">Los administradores pueden aplicar revisiones a los productos instalados por equipo independientemente de la configuración de UAC de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0d90f-129">Administrators can apply patches to per-machine installed products regardless of the application's UAC setting.</span></span>

<span data-ttu-id="0d90f-130">Puede determinar si la aplicación de revisiones con privilegios mínimos está habilitada para una aplicación mediante la función [**MsiGetProductInfoEx**](/windows/desktop/api/Msi/nf-msi-msigetproductinfoexa) para consultar la propiedad INSTALLPROPERTY de la \_ \_ aplicación Lua autorizada o mediante \_ el método [**ProductInfo**](installer-productinfo.md) para consultar la propiedad "AuthorizedLUAApp".</span><span class="sxs-lookup"><span data-stu-id="0d90f-130">You can determine whether least-privilege patching is enabled for an application by using the [**MsiGetProductInfoEx**](/windows/desktop/api/Msi/nf-msi-msigetproductinfoexa) function to query for the INSTALLPROPERTY\_AUTHORIZED\_LUA\_APP property, or by using the [**ProductInfo**](installer-productinfo.md) method to query for the "AuthorizedLUAApp" property.</span></span> <span data-ttu-id="0d90f-131">Si el valor de cualquiera de las propiedades es 1, la aplicación se habilita para la revisión de la cuenta de usuario con privilegios mínimos.</span><span class="sxs-lookup"><span data-stu-id="0d90f-131">If the value of either property is 1, the application is enabled for least-privilege user account patching.</span></span>

<span data-ttu-id="0d90f-132">Un administrador puede deshabilitar la revisión de privilegios mínimos en el equipo estableciendo la directiva [DisableLUAPatching](disableluapatching.md) en 1.</span><span class="sxs-lookup"><span data-stu-id="0d90f-132">An administrator can disable least-privilege patching on the computer by setting the [DisableLUAPatching](disableluapatching.md) policy to 1.</span></span> <span data-ttu-id="0d90f-133">Puede establecer la propiedad [**MSIDISABLELUAPATCHING**](msidisableluapatching.md) en 1 durante la instalación inicial de una aplicación para evitar la aplicación de revisiones con privilegios mínimos solo para esa aplicación.</span><span class="sxs-lookup"><span data-stu-id="0d90f-133">You can set the [**MSIDISABLELUAPATCHING**](msidisableluapatching.md) property to 1 during the initial installation of an application to prevent least-privilege patching for that application only.</span></span>

<span data-ttu-id="0d90f-134">Esta funcionalidad está disponible a partir de Windows Installer versión 3,0.</span><span class="sxs-lookup"><span data-stu-id="0d90f-134">This functionality is available beginning with Windows Installer version 3.0.</span></span> <span data-ttu-id="0d90f-135">La revisión del control de cuentas de usuario (UAC) se denominaba revisión de la cuenta de usuario con privilegios mínimos (LUA) en Windows XP.</span><span class="sxs-lookup"><span data-stu-id="0d90f-135">User Account Control (UAC) patching was called least-privilege user account (LUA) patching in Windows XP.</span></span> <span data-ttu-id="0d90f-136">La revisión de LUA no está disponible en Windows 2000 y Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="0d90f-136">LUA patching is not available on Windows 2000 and Windows Server 2003.</span></span>

<span data-ttu-id="0d90f-137">Para obtener más información acerca de la compatibilidad de aplicaciones y el desarrollo de aplicaciones compatibles con el control de cuentas de usuario (UAC), consulte la información de UAC que se proporciona en [Microsoft TechNet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc709691(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="0d90f-137">For more information about application compatibility and developing applications that are compatible with User Account Control (UAC), see the UAC information that is provided on [Microsoft Technet](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc709691(v=ws.10)).</span></span>

 

 
