---
description: Una actualización principal es una actualización completa de un producto que necesita un cambio de la propiedad ProductCode.
ms.assetid: 0c8f2aad-b301-4404-9051-694d97db1a8d
title: Actualizaciones principales
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7795695072f6c153373db914781ac4b919cd2572
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104542734"
---
# <a name="major-upgrades"></a><span data-ttu-id="f5a85-103">Actualizaciones principales</span><span class="sxs-lookup"><span data-stu-id="f5a85-103">Major Upgrades</span></span>

<span data-ttu-id="f5a85-104">Una actualización principal es una actualización completa de un producto que necesita un cambio de la propiedad [**ProductCode**](productcode.md) .</span><span class="sxs-lookup"><span data-stu-id="f5a85-104">A major upgrade is a comprehensive update of a product that needs a change of the [**ProductCode**](productcode.md) Property.</span></span>

<span data-ttu-id="f5a85-105">Una actualización importante típica quita una versión anterior de una aplicación e instala una nueva versión.</span><span class="sxs-lookup"><span data-stu-id="f5a85-105">A typical major upgrade removes a previous version of an application and installs a new version.</span></span> <span data-ttu-id="f5a85-106">Una actualización principal puede reorganizar el árbol de componentes de características.</span><span class="sxs-lookup"><span data-stu-id="f5a85-106">A major upgrade can reorganize the feature component tree.</span></span> <span data-ttu-id="f5a85-107">Para obtener más información, vea [**ProductCode**](productcode.md) y [cambiar el código de producto](changing-the-product-code.md).</span><span class="sxs-lookup"><span data-stu-id="f5a85-107">For more information, see [**ProductCode**](productcode.md) and [Changing the Product Code](changing-the-product-code.md).</span></span>

<span data-ttu-id="f5a85-108">Durante una actualización importante mediante Windows Installer, el instalador busca en el equipo del usuario las aplicaciones que están relacionadas con la actualización pendiente y, cuando detecta una, recupera la versión de la aplicación instalada del registro del sistema.</span><span class="sxs-lookup"><span data-stu-id="f5a85-108">During a major upgrade using Windows Installer, the installer searches the user's computer for applications that are related to the pending upgrade, and when it detects one, it retrieves the version of the installed application from the system registry.</span></span> <span data-ttu-id="f5a85-109">A continuación, el instalador usa la información de la base de datos de actualización para determinar si se va a actualizar la aplicación instalada.</span><span class="sxs-lookup"><span data-stu-id="f5a85-109">The installer then uses information in the upgrade database to determine whether to upgrade the installed application.</span></span>

<span data-ttu-id="f5a85-110">Para habilitar las funcionalidades de actualización del instalador, cada paquete debe tener una propiedad [**UpgradeCode**](upgradecode.md) y una [tabla de actualización](upgrade-table.md).</span><span class="sxs-lookup"><span data-stu-id="f5a85-110">To enable the installer upgrade capabilities, each package should have an [**UpgradeCode**](upgradecode.md) Property and an [Upgrade Table](upgrade-table.md).</span></span> <span data-ttu-id="f5a85-111">Cada producto o conjunto de productos independiente debe tener su propio **UpgradeCode**.</span><span class="sxs-lookup"><span data-stu-id="f5a85-111">Each stand-alone product or product suite should have its own **UpgradeCode**.</span></span> <span data-ttu-id="f5a85-112">Para obtener más información sobre el uso de **UpgradeCode** , consulte la sección [uso de UpgradeCode](using-an-upgradecode.md).</span><span class="sxs-lookup"><span data-stu-id="f5a85-112">For more information about using the **UpgradeCode** see the section [Using an UpgradeCode](using-an-upgradecode.md).</span></span> <span data-ttu-id="f5a85-113">Cada registro de la tabla de actualización proporciona una combinación del código de actualización, la versión del producto y la información de idioma que se usa para identificar un conjunto de productos afectados por la actualización.</span><span class="sxs-lookup"><span data-stu-id="f5a85-113">Each record in the Upgrade table gives a combination of the upgrade code, product version, and language information used to identify a set of products affected by the upgrade.</span></span> <span data-ttu-id="f5a85-114">Cuando la [acción FindRelatedProducts](findrelatedproducts-action.md) detecta que un producto afectado está instalado en el sistema, anexa el código de producto a una propiedad de la columna ActionProperty de la tabla de actualización.</span><span class="sxs-lookup"><span data-stu-id="f5a85-114">When the [FindRelatedProducts Action](findrelatedproducts-action.md) detects that an affected product is installed on the system, it appends the product code to a property in the ActionProperty column of the Upgrade table.</span></span> <span data-ttu-id="f5a85-115">La [acción RemoveExistingProducts](removeexistingproducts-action.md) y la [acción MigrateFeatureStates](migratefeaturestates-action.md) quitan o migran los productos enumerados en la lista ActionProperty.</span><span class="sxs-lookup"><span data-stu-id="f5a85-115">The [RemoveExistingProducts action](removeexistingproducts-action.md) and the [MigrateFeatureStates Action](migratefeaturestates-action.md) remove or migrate the products listed in the ActionProperty list.</span></span> <span data-ttu-id="f5a85-116">Los autores de paquetes también pueden seguir el procedimiento descrito en el tema [preparación de una aplicación para futuras actualizaciones importantes](preparing-an-application-for-future-major-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="f5a85-116">Package authors can also follow the procedure described in the topic: [Preparing an Application for Future Major Upgrades](preparing-an-application-for-future-major-upgrades.md).</span></span>

<span data-ttu-id="f5a85-117">Windows Installer los paquetes de actualización se pueden crear de forma que las actualizaciones principales no se instalarán si el usuario ya tiene instalada una versión más reciente de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f5a85-117">Windows Installer upgrade packages can be authored such that major upgrades will not install if the user already has a newer version of the application installed.</span></span> <span data-ttu-id="f5a85-118">Para obtener más información sobre cómo crear un paquete que no se instalará en una versión más reciente, vea impedir que se instale [un paquete antiguo en una versión más reciente](preventing-an-old-package-from-installing-over-a-newer-version.md) .</span><span class="sxs-lookup"><span data-stu-id="f5a85-118">For more information about how to author a package that will not install over a newer version, see [Preventing an Old Package from Installing Over a Newer Version](preventing-an-old-package-from-installing-over-a-newer-version.md)</span></span>

> [!Note]  
> <span data-ttu-id="f5a85-119">Windows Installer solo utiliza los tres primeros campos de la versión del producto.</span><span class="sxs-lookup"><span data-stu-id="f5a85-119">Windows Installer uses only the first three fields of the product version.</span></span> <span data-ttu-id="f5a85-120">Vea [**ProductVersion**](productversion.md) (propiedad) para obtener descripciones de estos campos.</span><span class="sxs-lookup"><span data-stu-id="f5a85-120">See [**ProductVersion**](productversion.md) Property for descriptions of these fields.</span></span> <span data-ttu-id="f5a85-121">Si incluye un cuarto campo en la versión del producto, el instalador omite el cuarto campo.</span><span class="sxs-lookup"><span data-stu-id="f5a85-121">If you include a fourth field in your product version, the installer ignores the fourth field.</span></span>

 

<span data-ttu-id="f5a85-122">El método recomendado para aplicar una actualización principal mediante la instalación del paquete completo para el producto actualizado.</span><span class="sxs-lookup"><span data-stu-id="f5a85-122">The recommended method of applying a major upgrade by installing the full package for the updated product.</span></span> <span data-ttu-id="f5a85-123">Para obtener información acerca de cómo aplicar una actualización principal mediante la instalación del producto, consulte [aplicar actualizaciones principales instalando el producto](applying-major-upgrades-by-installing-the-product.md).</span><span class="sxs-lookup"><span data-stu-id="f5a85-123">For information about how to apply a major upgrade by installing the product, see [Applying Major Upgrades by Installing the Product](applying-major-upgrades-by-installing-the-product.md).</span></span>

<span data-ttu-id="f5a85-124">Una actualización importante aplicada como [paquete de revisión](patch-packages.md) para el producto no se puede secuenciar con otras actualizaciones y no es una [revisión desinstalable](uninstallable-patches.md).</span><span class="sxs-lookup"><span data-stu-id="f5a85-124">A major upgrade applied as a [Patch Package](patch-packages.md) for the product cannot be sequenced with other updates and is not an [uninstallable patch](uninstallable-patches.md).</span></span> <span data-ttu-id="f5a85-125">Para obtener información acerca de cómo aplicar un paquete de revisión de actualización principal a un paquete de Windows Installer [, consulte aplicación de actualizaciones importantes mediante la revisión de la instalación local del producto](applying-major-upgrades-by-patching-the-local-installation-of-the-product.md).</span><span class="sxs-lookup"><span data-stu-id="f5a85-125">For information about how to apply a major upgrade patch package to a Windows Installer package see [Applying Major Upgrades by Patching the Local Installation of the Product](applying-major-upgrades-by-patching-the-local-installation-of-the-product.md).</span></span> <span data-ttu-id="f5a85-126">No se recomienda la aplicación de una actualización principal mediante un paquete de revisión. en su lugar, aplique las actualizaciones principales instalando el producto completo.</span><span class="sxs-lookup"><span data-stu-id="f5a85-126">The application of a major upgrade using a patch package is not recommended, instead apply major upgrades by installing the full product.</span></span>

> [!Note]  
> <span data-ttu-id="f5a85-127">Si se instala una aplicación en el [contexto de instalación](installation-context.md)por usuario, también se debe realizar cualquier actualización importante a la aplicación mediante el contexto por usuario.</span><span class="sxs-lookup"><span data-stu-id="f5a85-127">If an application is installed in the per-user [installation context](installation-context.md), any major upgrade to the application must also be performed using the per-user context.</span></span> <span data-ttu-id="f5a85-128">Si se instala una aplicación en el contexto de instalación por equipo, también se debe realizar cualquier actualización importante a la aplicación mediante el contexto por equipo.</span><span class="sxs-lookup"><span data-stu-id="f5a85-128">If an application is installed in the per-machine installation context, any major upgrade to the application must also be performed using the per-machine context.</span></span> <span data-ttu-id="f5a85-129">En el Windows Installer no se instalarán las actualizaciones principales en el contexto de instalación.</span><span class="sxs-lookup"><span data-stu-id="f5a85-129">The Windows Installer will not install major upgrades across installation context.</span></span>

 

<span data-ttu-id="f5a85-130">Puede condicionar las acciones personalizadas que se secuencian después de [InstallValidate](installvalidate-action.md) para controlar las actualizaciones importantes mediante la propiedad [**UPGRADINGPRODUCTCODE**](upgradingproductcode.md) :</span><span class="sxs-lookup"><span data-stu-id="f5a85-130">You can condition custom actions that are sequenced after [InstallValidate](installvalidate-action.md) to handle major upgrades by using the [**UPGRADINGPRODUCTCODE**](upgradingproductcode.md) property:</span></span>

-   <span data-ttu-id="f5a85-131">Si desea que una acción personalizada se ejecute durante la desinstalación del producto, pero no durante la eliminación del producto mediante una actualización principal, use esta condición.</span><span class="sxs-lookup"><span data-stu-id="f5a85-131">If you want a custom action to run during an uninstallation of the product, but not during the removal of the product by a major upgrade, use this condition.</span></span>

    <span data-ttu-id="f5a85-132">REMOVE = "ALL" y no [ **UPGRADINGPRODUCTCODE**](upgradingproductcode.md)</span><span class="sxs-lookup"><span data-stu-id="f5a85-132">REMOVE="ALL" AND NOT [**UPGRADINGPRODUCTCODE**](upgradingproductcode.md)</span></span>

-   <span data-ttu-id="f5a85-133">Si desea que una acción personalizada se ejecute solo durante una actualización principal, use esta condición.</span><span class="sxs-lookup"><span data-stu-id="f5a85-133">If you want a custom action to run only during a major upgrade, use this condition.</span></span>

    [<span data-ttu-id="f5a85-134">**UPGRADINGPRODUCTCODE**</span><span class="sxs-lookup"><span data-stu-id="f5a85-134">**UPGRADINGPRODUCTCODE**</span></span>](upgradingproductcode.md)

 

 



