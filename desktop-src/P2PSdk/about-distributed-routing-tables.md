---
description: Una tabla de enrutamiento distribuida (DRT) existe como una malla de nodos cooperativos, donde cada nodo es una instancia de una aplicación que usa la API de DRT.
ms.assetid: 257ad7ea-636b-45f2-b514-4a213939d107
title: Acerca de las tablas de enrutamiento distribuido
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 2dfca9f81cc609d97584ef5a11f999722c696858
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103909801"
---
# <a name="about-distributed-routing-tables"></a><span data-ttu-id="85908-103">Acerca de las tablas de enrutamiento distribuido</span><span class="sxs-lookup"><span data-stu-id="85908-103">About Distributed Routing Tables</span></span>

<span data-ttu-id="85908-104">Una tabla de enrutamiento distribuida (DRT) existe como una malla de nodos cooperativos, donde cada nodo es una instancia de una aplicación que usa la API de DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-104">A Distributed Routing Table (DRT) exists as a mesh of cooperating nodes, where each node is an instance of an application using the DRT API.</span></span> <span data-ttu-id="85908-105">Los nodos que publican claves son responsables de ayudar a otros nodos a publicar y resolver claves.</span><span class="sxs-lookup"><span data-stu-id="85908-105">Nodes that publish keys are responsible for assisting other nodes publish and resolve keys.</span></span> <span data-ttu-id="85908-106">Los nodos también pueden participar en un modo de "resolver solo", que no les exige que ayuden a los compañeros.</span><span class="sxs-lookup"><span data-stu-id="85908-106">Nodes can also participate in a "resolve only" fashion, which does not require them to assist peers.</span></span> <span data-ttu-id="85908-107">El protocolo DRT se ejecuta a través de un transporte UDP/IPv6.</span><span class="sxs-lookup"><span data-stu-id="85908-107">The DRT protocol executes over a UDP/IPv6 transport.</span></span>

<span data-ttu-id="85908-108">Un nodo que publica una clave genera y mantiene una tabla de enrutamiento local de otros nodos en la malla.</span><span class="sxs-lookup"><span data-stu-id="85908-108">A node that publishes a key builds and maintains a local routing table of other nodes in the mesh.</span></span> <span data-ttu-id="85908-109">Esta tabla de enrutamiento está optimizada para que el nodo pueda localizar rápidamente una clave específica de la malla mediante la búsqueda de la clave directamente en la tabla de enrutamiento local o mediante la petición de otras claves de publicación de nodos que se acerquen numéricamente al destino.</span><span class="sxs-lookup"><span data-stu-id="85908-109">This routing table is optimized so that the node can quickly locate a specific key in the mesh by finding the key directly in the local routing table, or by asking other nodes publishing keys numerically close to the target.</span></span> <span data-ttu-id="85908-110">Esta acción se repite hasta que se encuentra la clave requerida o hasta que el nodo determina que no existe esa clave.</span><span class="sxs-lookup"><span data-stu-id="85908-110">This action is repeated until the required key is found or the node determines that no such key exists.</span></span>

<span data-ttu-id="85908-111">Las claves de DRT son enteros de 256 bits sin signo.</span><span class="sxs-lookup"><span data-stu-id="85908-111">DRT keys are 256-bit unsigned integers.</span></span> <span data-ttu-id="85908-112">La proximidad entre las claves se define por la diferencia numérica entre ellas.</span><span class="sxs-lookup"><span data-stu-id="85908-112">Closeness between keys is defined by the numerical difference between them.</span></span> <span data-ttu-id="85908-113">El espacio de DRT se considera circular.</span><span class="sxs-lookup"><span data-stu-id="85908-113">The DRT keyspace is considered circular.</span></span> <span data-ttu-id="85908-114">Por ejemplo, el primer valor de clave posible y el último valor de clave posible se consideran vecinos.</span><span class="sxs-lookup"><span data-stu-id="85908-114">For example, the first possible key value, and the last possible key value are considered neighbors.</span></span>

<span data-ttu-id="85908-115">En un DRT seguro, se necesitan nodos para autenticar las claves que publican.</span><span class="sxs-lookup"><span data-stu-id="85908-115">In a secure DRT, nodes are required to authenticate the keys they publish.</span></span> <span data-ttu-id="85908-116">El mecanismo por el que los nodos autentican las claves deben establecerse mediante la API de DRT cuando se inicializa la DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-116">The mechanism by which nodes authenticate keys must be set using the DRT API when the DRT is initialized.</span></span> <span data-ttu-id="85908-117">Esto se realiza mediante la elección de un proveedor de seguridad para DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-117">This is done by choosing a security provider for the DRT.</span></span> <span data-ttu-id="85908-118">Un proveedor de seguridad es un módulo que puede generar tokens que se usan para autenticar claves y comprobar los tokens generados por otros nodos.</span><span class="sxs-lookup"><span data-stu-id="85908-118">A security provider is a module that can produce tokens used to authenticate keys, and verify tokens produced by other nodes.</span></span> <span data-ttu-id="85908-119">Debe implementar la interfaz del proveedor de seguridad que se define en esta documentación.</span><span class="sxs-lookup"><span data-stu-id="85908-119">It must implement the security provider interface that is defined in this documentation.</span></span> <span data-ttu-id="85908-120">La DRT de Windows 7 se suministra con dos proveedores de seguridad totalmente implementados que se pueden usar para compilar aplicaciones de Windows.</span><span class="sxs-lookup"><span data-stu-id="85908-120">The Windows 7 DRT ships with two fully implemented security providers that can be used to build Windows applications.</span></span>

<span data-ttu-id="85908-121">Durante la inicialización, una aplicación también debe proporcionar el DRT con un proveedor de arranque.</span><span class="sxs-lookup"><span data-stu-id="85908-121">During initialization, an application must also supply the DRT with a bootstrap provider.</span></span> <span data-ttu-id="85908-122">El proveedor de bootstrap es un módulo que puede recuperar los puntos de conexión de red de los nodos que ya están presentes en la malla de DRT y al que se llama cuando se establece un nuevo nodo.</span><span class="sxs-lookup"><span data-stu-id="85908-122">The bootstrap provider is a module that can retrieve the network endpoints of nodes already present in the DRT mesh, and is called upon by the DRT when a new node is established.</span></span> <span data-ttu-id="85908-123">Al igual que el módulo de proveedor de seguridad, el proveedor de arranque debe implementar una interfaz bien definida.</span><span class="sxs-lookup"><span data-stu-id="85908-123">Like the security provider module, the bootstrap provider must implement a well defined interface.</span></span> <span data-ttu-id="85908-124">La DRT de Windows 7 se suministra con dos proveedores de bootstrap totalmente implementados.</span><span class="sxs-lookup"><span data-stu-id="85908-124">The Windows 7 DRT ships with two fully implemented bootstrap providers.</span></span>

<span data-ttu-id="85908-125">La DRT tiene en cuenta los vecinos inmediatos de una clave especial.</span><span class="sxs-lookup"><span data-stu-id="85908-125">The DRT considers the immediate neighbors of a key special.</span></span> <span data-ttu-id="85908-126">Las cinco claves más pequeñas numéricamente menores y las cinco claves más cercanas numéricamente mayores que una clave publicada forman lo que se denomina conjunto de hojas.</span><span class="sxs-lookup"><span data-stu-id="85908-126">The five closest keys numerically smaller and the five closest keys numerically larger than a published key form what is called a leaf set.</span></span> <span data-ttu-id="85908-127">DRT informa de los cambios en el conjunto de hojas de una clave a través de la API de DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-127">The DRT reports changes to the leaf set of a key through the DRT API.</span></span>

## <a name="drt-life-cycle-and-state-transitions"></a><span data-ttu-id="85908-128">Ciclo de vida de DRT y transiciones de estado</span><span class="sxs-lookup"><span data-stu-id="85908-128">DRT Life Cycle and State Transitions</span></span>

<span data-ttu-id="85908-129">Una aplicación puede inicializar una instancia de DRT local mediante la función [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen) .</span><span class="sxs-lookup"><span data-stu-id="85908-129">An application can initialize a local DRT instance using the [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen) function.</span></span> <span data-ttu-id="85908-130">Esta función desencadena el proceso de arranque, donde la API de DRT llama a en el proveedor de bootstrap para conocer las claves y los puntos de conexión de red de otros nodos que ya participan en el DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-130">This function triggers the bootstrapping process, where the DRT API calls upon the bootstrap provider to learn the keys and network endpoints of other nodes already participating in the DRT.</span></span> <span data-ttu-id="85908-131">Si el proveedor de arranque localiza correctamente al menos otro nodo, el DRT entra en el \_ estado activo de DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-131">If the bootstrap provider successfully locates at least one other node, the DRT enters the DRT\_ACTIVE state.</span></span> <span data-ttu-id="85908-132">En este estado, la aplicación puede buscar claves publicadas por otros nodos y puede publicar claves que se puedan resolver.</span><span class="sxs-lookup"><span data-stu-id="85908-132">In this state, the application can search for keys published by other nodes, and can publish keys that can be resolved.</span></span> <span data-ttu-id="85908-133">Si el proveedor de arranque no puede localizar otros nodos correctamente, el DRT entra en el \_ Estado independiente de DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-133">If the bootstrap provider cannot successfully locate other nodes, the DRT enters the DRT\_ALONE state.</span></span> <span data-ttu-id="85908-134">La DRT permanecerá en el \_ Estado independiente de DRT e intentará iniciarse de forma periódica para buscar elementos del mismo nivel y pasar al \_ estado activo de DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-134">The DRT will stay in the DRT\_ALONE state and will attempt to bootstrap periodically in order to locate peers and move to the DRT\_ACTIVE state.</span></span>

<span data-ttu-id="85908-135">Un nodo puede pasar a estos Estados desde DRT \_ activo.</span><span class="sxs-lookup"><span data-stu-id="85908-135">A node can transition to these states from DRT\_ACTIVE.</span></span>

| <span data-ttu-id="85908-136">Estado del ciclo de vida</span><span class="sxs-lookup"><span data-stu-id="85908-136">Life Cycle State</span></span> | <span data-ttu-id="85908-137">Condiciones</span><span class="sxs-lookup"><span data-stu-id="85908-137">Conditions</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="85908-138">\_solo DRT</span><span class="sxs-lookup"><span data-stu-id="85908-138">DRT\_ALONE</span></span>       | <span data-ttu-id="85908-139">El nodo local no ha detectado otros nodos en la DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-139">The local node has not discovered other nodes in the DRT.</span></span> <span data-ttu-id="85908-140">Mientras se encuentra en este estado, el nodo continúa escuchando otros nodos dentro de DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-140">While in this state, the node continues to listen for other nodes within the DRT.</span></span><br/> <span data-ttu-id="85908-141">Si otro nodo se une a DRT, el nodo local pasará al \_ estado activo de DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-141">If another node joins the DRT, the local node will transition to the DRT\_ACTIVE state.</span></span> <span data-ttu-id="85908-142">Si la red está inactiva, pasará a DRT \_ no \_ Network.</span><span class="sxs-lookup"><span data-stu-id="85908-142">If the network is down, it will transition to DRT\_NO\_NETWORK.</span></span> <span data-ttu-id="85908-143">En caso de que se produzca un error grave con la DRT, el nodo pasará al \_ Estado de error de DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-143">In the event of a serious error with the DRT the node will transition to the DRT\_FAULTED state.</span></span><br/> |
| <span data-ttu-id="85908-144">DRT \_ sin \_ red</span><span class="sxs-lookup"><span data-stu-id="85908-144">DRT\_NO\_NETWORK</span></span> | <span data-ttu-id="85908-145">Cuando un nodo pierde la conectividad de red, pasa al estado de \_ no \_ red de DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-145">When a node loses network connectivity, it transitions to the DRT\_NO\_NETWORK state.</span></span> <span data-ttu-id="85908-146">En este momento, la aplicación puede esperar a que se restaure la conectividad de red y puede cerrar la DRT.</span><span class="sxs-lookup"><span data-stu-id="85908-146">At this point the application can wait for network connectivity to be restored, and can close the DRT.</span></span><br/>                                                                                                                                                                                                                    |
| <span data-ttu-id="85908-147">error de DRT \_</span><span class="sxs-lookup"><span data-stu-id="85908-147">DRT\_FAULTED</span></span>     | <span data-ttu-id="85908-148">Se ha producido un error grave dentro del nodo local.</span><span class="sxs-lookup"><span data-stu-id="85908-148">A serious error has occurred within the local node.</span></span> <span data-ttu-id="85908-149">Por ejemplo, si el equipo local se queda sin memoria física.</span><span class="sxs-lookup"><span data-stu-id="85908-149">For example, if the local machine runs out of physical memory.</span></span><br/> <span data-ttu-id="85908-150">Mientras un nodo entra en este estado, la aplicación debe llamar a la API [**DrtClose**](/windows/desktop/api/drt/nf-drt-drtclose) , corregir el problema y volver a inicializar la DRT con [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen).</span><span class="sxs-lookup"><span data-stu-id="85908-150">While a node enters this state, the application must call the [**DrtClose**](/windows/desktop/api/drt/nf-drt-drtclose) API, correct the problem, and re-initialize the DRT with [**DrtOpen**](/windows/desktop/api/drt/nf-drt-drtopen).</span></span><br/>                                                                                                   |



 

## <a name="related-topics"></a><span data-ttu-id="85908-151">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="85908-151">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="85908-152">Usar el Table API de enrutamiento distribuido</span><span class="sxs-lookup"><span data-stu-id="85908-152">Using the Distributed Routing Table API</span></span>](using-the-distributed-routing-table-api.md)
</dt> <dt>

[<span data-ttu-id="85908-153">Referencia de Table API de enrutamiento distribuido</span><span class="sxs-lookup"><span data-stu-id="85908-153">Distributed Routing Table API Reference</span></span>](distributed-routing-table-api-reference.md)
</dt> </dl>

 

 




