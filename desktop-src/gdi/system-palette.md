---
description: El sistema mantiene una paleta del sistema para cada dispositivo que utiliza las paletas.
ms.assetid: 4c93ce8c-6b3a-4016-bb47-786c25b93374
title: Paleta del sistema
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6d8738cf63eef0b77f2d184f2cf95b6550b81053
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104997656"
---
# <a name="system-palette"></a><span data-ttu-id="89b77-103">Paleta del sistema</span><span class="sxs-lookup"><span data-stu-id="89b77-103">System Palette</span></span>

<span data-ttu-id="89b77-104">El sistema mantiene una *paleta del sistema* para cada dispositivo que utiliza las paletas.</span><span class="sxs-lookup"><span data-stu-id="89b77-104">The system maintains a *system palette* for each device that uses palettes.</span></span> <span data-ttu-id="89b77-105">La paleta del sistema contiene los valores de color de todos los colores que el dispositivo puede mostrar o dibujar actualmente.</span><span class="sxs-lookup"><span data-stu-id="89b77-105">The system palette contains the color values for all colors that can currently be displayed or drawn by the device.</span></span> <span data-ttu-id="89b77-106">Aparte de ver el contenido de la paleta del sistema, las aplicaciones no pueden tener acceso directamente a la paleta del sistema.</span><span class="sxs-lookup"><span data-stu-id="89b77-106">Other than viewing the contents of the system palette, applications cannot access the system palette directly.</span></span> <span data-ttu-id="89b77-107">En su lugar, el sistema tiene un control completo de la paleta del sistema y solo permite el acceso a través del uso de las paletas lógicas.</span><span class="sxs-lookup"><span data-stu-id="89b77-107">Instead, the system has complete control of the system palette and permits access only through the use of logical palettes.</span></span>

<span data-ttu-id="89b77-108">Una aplicación puede ver el contenido de la paleta del sistema mediante la función [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) .</span><span class="sxs-lookup"><span data-stu-id="89b77-108">An application can view the contents of the system palette by using the [**GetSystemPaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getsystempaletteentries) function.</span></span> <span data-ttu-id="89b77-109">Esta función recupera el contenido de una o varias entradas, hasta el número total de entradas de la paleta del sistema.</span><span class="sxs-lookup"><span data-stu-id="89b77-109">This function retrieves the contents of one or more entries, up to the total number of entries in the system palette.</span></span> <span data-ttu-id="89b77-110">El total siempre es igual al número devuelto para el valor SIZEPALETTE por la función [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) y es igual que el tamaño máximo de cualquier paleta lógica determinada.</span><span class="sxs-lookup"><span data-stu-id="89b77-110">The total is always equal to the number returned for the SIZEPALETTE value by the [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function and is the same as the maximum size for any given logical palette.</span></span>

<span data-ttu-id="89b77-111">Aunque las aplicaciones no pueden cambiar los colores de la paleta del sistema directamente, pueden provocar cambios al realizar las paletas lógicas.</span><span class="sxs-lookup"><span data-stu-id="89b77-111">Although applications cannot change colors in the system palette directly, they may cause changes when realizing logical palettes.</span></span> <span data-ttu-id="89b77-112">Para obtener una paleta, el sistema examina cada color solicitado e intenta encontrar una entrada en la paleta del sistema que contenga una coincidencia exacta.</span><span class="sxs-lookup"><span data-stu-id="89b77-112">To realize a palette, the system examines each requested color and attempts to find an entry in the system palette that contains an exact match.</span></span> <span data-ttu-id="89b77-113">Si el sistema encuentra un color coincidente, asigna el índice de la paleta lógica al índice de la paleta del sistema correspondiente.</span><span class="sxs-lookup"><span data-stu-id="89b77-113">If the system finds a matching color, it maps the logical palette index to the corresponding system palette index.</span></span> <span data-ttu-id="89b77-114">Si el sistema no encuentra una coincidencia exacta, copia el color solicitado en una entrada de la paleta del sistema sin usar antes de asignar los índices.</span><span class="sxs-lookup"><span data-stu-id="89b77-114">If the system does not find an exact match, it copies the requested color to an unused system palette entry before mapping the indexes.</span></span> <span data-ttu-id="89b77-115">Si todas las entradas de la paleta del sistema están en uso, el sistema asigna el índice de la paleta lógica a la entrada de la paleta del sistema cuyo color coincide más estrechamente con el color solicitado.</span><span class="sxs-lookup"><span data-stu-id="89b77-115">If all system palette entries are in use, the system maps the logical palette index to the system palette entry whose color most closely matches the requested color.</span></span> <span data-ttu-id="89b77-116">Una vez establecida esta asignación, las aplicaciones no pueden invalidarla.</span><span class="sxs-lookup"><span data-stu-id="89b77-116">After this mapping is set, applications cannot override it.</span></span> <span data-ttu-id="89b77-117">Por ejemplo, las aplicaciones no pueden utilizar índices de paleta del sistema para especificar los colores; solo se permiten índices de paleta lógicos.</span><span class="sxs-lookup"><span data-stu-id="89b77-117">For example, applications cannot use system palette indexes to specify colors; only logical palette indexes are permitted.</span></span>

<span data-ttu-id="89b77-118">Las aplicaciones pueden modificar el modo en que se asignan los índices estableciendo el miembro **peFlags** de la estructura [**PALETTEENTRY**](/previous-versions//dd162769(v=vs.85)) en los valores seleccionados al crear la paleta lógica.</span><span class="sxs-lookup"><span data-stu-id="89b77-118">Applications can modify the way indexes are mapped by setting the **peFlags** member of the [**PALETTEENTRY**](/previous-versions//dd162769(v=vs.85)) structure to selected values when creating the logical palette.</span></span> <span data-ttu-id="89b77-119">Por ejemplo, la \_ marca PC nocollapse indica al sistema que copie inmediatamente el color solicitado en una entrada de la paleta del sistema sin usar, independientemente de si una entrada de la paleta del sistema ya contiene ese color.</span><span class="sxs-lookup"><span data-stu-id="89b77-119">For example, the PC\_NOCOLLAPSE flag directs the system to immediately copy the requested color to an unused system palette entry regardless of whether a system palette entry already contains that color.</span></span> <span data-ttu-id="89b77-120">Además, la marca de PC \_ Explicit indica al sistema que asigne el índice de la paleta lógica a un índice de la paleta del sistema especificado explícitamente.</span><span class="sxs-lookup"><span data-stu-id="89b77-120">Also, the PC\_EXPLICIT flag directs the system to map the logical palette index to an explicitly given system palette index.</span></span> <span data-ttu-id="89b77-121">(La aplicación proporciona el índice de la paleta del sistema en la palabra de orden inferior de la estructura **PALETTEENTRY** ).</span><span class="sxs-lookup"><span data-stu-id="89b77-121">(The application gives the system palette index in the low-order word of the **PALETTEENTRY** structure.)</span></span>

<span data-ttu-id="89b77-122">Las paletas se pueden realizar como una paleta de fondo o de primer plano especificando **true** o **false** respectivamente para el parámetro *bForceBackground* en la función [**SelectPalette**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette) .</span><span class="sxs-lookup"><span data-stu-id="89b77-122">Palettes can be realized as either a background palette or a foreground palette by specifying **TRUE** or **FALSE** respectively for the *bForceBackground* parameter in the [**SelectPalette**](/windows/desktop/api/Wingdi/nf-wingdi-selectpalette) function.</span></span> <span data-ttu-id="89b77-123">Solo puede haber una paleta de primer plano en el sistema a la vez.</span><span class="sxs-lookup"><span data-stu-id="89b77-123">There can be only one foreground palette in the system at a time.</span></span> <span data-ttu-id="89b77-124">Si la ventana es la ventana activa actualmente o un descendiente de la ventana activa actualmente, puede obtener una paleta de primer plano.</span><span class="sxs-lookup"><span data-stu-id="89b77-124">If the window is the currently active window or a descendent of the currently active window, it can realize a foreground palette.</span></span> <span data-ttu-id="89b77-125">De lo contrario, la paleta se realiza como una paleta de fondo, independientemente del valor del parámetro *bForceBackground* .</span><span class="sxs-lookup"><span data-stu-id="89b77-125">Otherwise the palette is realized as a background palette regardless of the value of the *bForceBackground* parameter.</span></span> <span data-ttu-id="89b77-126">La propiedad Critical de una paleta de primer plano es que, cuando se realiza, puede sobrescribir todas las entradas (excepto las entradas estáticas) en la paleta del sistema.</span><span class="sxs-lookup"><span data-stu-id="89b77-126">The critical property of a foreground palette is that, when realized, it can overwrite all entries (except for the static entries) in the system palette.</span></span> <span data-ttu-id="89b77-127">Para ello, el sistema marca todas las entradas que no son estáticas en la paleta del sistema como no utilizadas antes de la realización de una paleta de primer plano, con lo que se eliminan todas las entradas usadas.</span><span class="sxs-lookup"><span data-stu-id="89b77-127">The system accomplishes this by marking all of the entries that are not static in the system palette as unused before the realization of a foreground palette, thereby eliminating all of the used entries.</span></span> <span data-ttu-id="89b77-128">No se produce ningún preprocesamiento en la paleta del sistema para la realización de una paleta de fondo.</span><span class="sxs-lookup"><span data-stu-id="89b77-128">No preprocessing occurs on the system palette for a background palette realization.</span></span> <span data-ttu-id="89b77-129">La paleta de primer plano establece todos los colores no estáticos posibles.</span><span class="sxs-lookup"><span data-stu-id="89b77-129">The foreground palette sets all of the possible nonstatic colors.</span></span> <span data-ttu-id="89b77-130">Las paletas de fondo solo pueden establecer lo que permanece abierto y se clasifican por orden de prioridad en la primera de ellas.</span><span class="sxs-lookup"><span data-stu-id="89b77-130">Background palettes can set only what remains open and are prioritized in a first-come, first-serve manner.</span></span> <span data-ttu-id="89b77-131">Normalmente, las aplicaciones usan las paletas de fondo para las ventanas secundarias que obtienen sus propias paletas individuales.</span><span class="sxs-lookup"><span data-stu-id="89b77-131">Typically, applications use background palettes for child windows which realize their own individual palettes.</span></span> <span data-ttu-id="89b77-132">Esto ayuda a minimizar el número de cambios que se producen en la paleta del sistema.</span><span class="sxs-lookup"><span data-stu-id="89b77-132">This helps minimize the number of changes that occur to the system palette.</span></span>

<span data-ttu-id="89b77-133">Una entrada de la paleta del sistema sin usar es cualquier entrada que no esté reservada y no contenga un color estático.</span><span class="sxs-lookup"><span data-stu-id="89b77-133">An unused system palette entry is any entry that is not reserved and does not contain a static color.</span></span> <span data-ttu-id="89b77-134">Las entradas reservadas se marcan explícitamente con el \_ valor reservado de PC.</span><span class="sxs-lookup"><span data-stu-id="89b77-134">Reserved entries are explicitly marked with the PC\_RESERVED value.</span></span> <span data-ttu-id="89b77-135">Estas entradas se crean cuando una aplicación obtiene una paleta lógica para la animación de la paleta.</span><span class="sxs-lookup"><span data-stu-id="89b77-135">These entries are created when an application realizes a logical palette for palette animation.</span></span> <span data-ttu-id="89b77-136">El sistema crea entradas de color estáticas que se corresponden con los colores de la paleta predeterminada.</span><span class="sxs-lookup"><span data-stu-id="89b77-136">Static color entries are created by the system and correspond to the colors in the default palette.</span></span> <span data-ttu-id="89b77-137">La función [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) se puede usar para recuperar el valor NUMRESERVED, que especifica el número de entradas de la paleta del sistema reservadas para los colores estáticos.</span><span class="sxs-lookup"><span data-stu-id="89b77-137">The [**GetDeviceCaps**](/windows/desktop/api/Wingdi/nf-wingdi-getdevicecaps) function can be used to retrieve the NUMRESERVED value, which specifies the number of system palette entries reserved for static colors.</span></span>

<span data-ttu-id="89b77-138">Dado que la paleta del sistema tiene un número limitado de entradas, la selección y la finalización de una paleta lógica para un dispositivo determinado pueden afectar a los colores asociados a otras paletas lógicas para el mismo dispositivo.</span><span class="sxs-lookup"><span data-stu-id="89b77-138">Because the system palette has a limited number of entries, selecting and realizing a logical palette for a given device may affect the colors associated with other logical palettes for the same device.</span></span> <span data-ttu-id="89b77-139">Estos cambios de color son especialmente importantes cuando se producen en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="89b77-139">These color changes are especially dramatic when they occur on the display.</span></span> <span data-ttu-id="89b77-140">Una aplicación puede asegurarse de que se usan colores razonables para su paleta lógica seleccionada actualmente restableciendo la paleta antes de cada uso.</span><span class="sxs-lookup"><span data-stu-id="89b77-140">An application can make sure that reasonable colors are used for its currently selected logical palette by resetting the palette before each use.</span></span> <span data-ttu-id="89b77-141">Una aplicación restablece la paleta llamando a las funciones [**UnrealizeObject**](/windows/desktop/api/Wingdi/nf-wingdi-unrealizeobject) y [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) .</span><span class="sxs-lookup"><span data-stu-id="89b77-141">An application resets the palette by calling the [**UnrealizeObject**](/windows/desktop/api/Wingdi/nf-wingdi-unrealizeobject) and [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) functions.</span></span> <span data-ttu-id="89b77-142">El uso de estas funciones hace que el sistema reasigne los colores de la paleta lógica a colores razonables en la paleta del sistema.</span><span class="sxs-lookup"><span data-stu-id="89b77-142">Using these functions causes the system to remap the colors in the logical palette to reasonable colors in the system palette.</span></span>

 

 
