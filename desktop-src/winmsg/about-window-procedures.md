---
description: Cada ventana es miembro de una clase de ventana determinada. La clase Window determina el procedimiento de ventana predeterminado que usa una ventana individual para procesar sus mensajes.
ms.assetid: 3a8e8f4e-910d-4863-a4a7-dd37c2dfa402
title: Acerca de los procedimientos de ventana
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f1f63586b9ca4ac6fe8486ba112316174533b44e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105697806"
---
# <a name="about-window-procedures"></a><span data-ttu-id="dd51c-104">Acerca de los procedimientos de ventana</span><span class="sxs-lookup"><span data-stu-id="dd51c-104">About Window Procedures</span></span>

<span data-ttu-id="dd51c-105">Cada ventana es miembro de una clase de ventana determinada.</span><span class="sxs-lookup"><span data-stu-id="dd51c-105">Each window is a member of a particular window class.</span></span> <span data-ttu-id="dd51c-106">La clase Window determina el procedimiento de ventana predeterminado que usa una ventana individual para procesar sus mensajes.</span><span class="sxs-lookup"><span data-stu-id="dd51c-106">The window class determines the default window procedure that an individual window uses to process its messages.</span></span> <span data-ttu-id="dd51c-107">Todas las ventanas que pertenecen a la misma clase usan el mismo procedimiento de ventana predeterminado.</span><span class="sxs-lookup"><span data-stu-id="dd51c-107">All windows belonging to the same class use the same default window procedure.</span></span> <span data-ttu-id="dd51c-108">Por ejemplo, el sistema define un procedimiento de ventana para la clase de cuadro combinado (**ComboBox**); todos los cuadros combinados usan ese procedimiento de ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-108">For example, the system defines a window procedure for the combo box class (**COMBOBOX**); all combo boxes then use that window procedure.</span></span>

<span data-ttu-id="dd51c-109">Normalmente, una aplicación registra al menos una nueva clase de ventana y su procedimiento de ventana asociado.</span><span class="sxs-lookup"><span data-stu-id="dd51c-109">An application typically registers at least one new window class and its associated window procedure.</span></span> <span data-ttu-id="dd51c-110">Después de registrar una clase, la aplicación puede crear muchas ventanas de esa clase, que utilizan el mismo procedimiento de ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-110">After registering a class, the application can create many windows of that class, all of which use the same window procedure.</span></span> <span data-ttu-id="dd51c-111">Como esto significa que varios orígenes pueden llamar simultáneamente al mismo fragmento de código, debe tener cuidado al modificar los recursos compartidos desde un procedimiento de ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-111">Because this means several sources could simultaneously call the same piece of code, you must be careful when modifying shared resources from a window procedure.</span></span> <span data-ttu-id="dd51c-112">Para obtener más información, vea [clases de ventana](window-classes.md).</span><span class="sxs-lookup"><span data-stu-id="dd51c-112">For more information, see [Window Classes](window-classes.md).</span></span>

<span data-ttu-id="dd51c-113">Los procedimientos de ventana para los cuadros de diálogo (denominados procedimientos de cuadro de diálogo) tienen una estructura similar y una función como procedimientos de ventana normales.</span><span class="sxs-lookup"><span data-stu-id="dd51c-113">Window procedures for dialog boxes (called dialog box procedures) have a similar structure and function as regular window procedures.</span></span> <span data-ttu-id="dd51c-114">Todos los puntos que hacen referencia a los procedimientos de ventana en esta sección también se aplican a los procedimientos del cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="dd51c-114">All points referring to window procedures in this section also apply to dialog box procedures.</span></span> <span data-ttu-id="dd51c-115">Para obtener más información, consulte [cuadros de diálogo](/windows/desktop/dlgbox/dialog-boxes).</span><span class="sxs-lookup"><span data-stu-id="dd51c-115">For more information, see [Dialog Boxes](/windows/desktop/dlgbox/dialog-boxes).</span></span>

<span data-ttu-id="dd51c-116">En esta sección se tratan los temas siguientes.</span><span class="sxs-lookup"><span data-stu-id="dd51c-116">This section discusses the following topics.</span></span>

-   [<span data-ttu-id="dd51c-117">Estructura de un procedimiento de ventana</span><span class="sxs-lookup"><span data-stu-id="dd51c-117">Structure of a Window Procedure</span></span>](#structure-of-a-window-procedure)
-   [<span data-ttu-id="dd51c-118">Procedimiento de ventana predeterminado</span><span class="sxs-lookup"><span data-stu-id="dd51c-118">Default Window Procedure</span></span>](#default-window-procedure)
-   [<span data-ttu-id="dd51c-119">Subclases de procedimientos de ventana</span><span class="sxs-lookup"><span data-stu-id="dd51c-119">Window Procedure Subclassing</span></span>](#window-procedure-subclassing)
    -   [<span data-ttu-id="dd51c-120">Subclases de instancia</span><span class="sxs-lookup"><span data-stu-id="dd51c-120">Instance Subclassing</span></span>](#instance-subclassing)
    -   [<span data-ttu-id="dd51c-121">Subclase global</span><span class="sxs-lookup"><span data-stu-id="dd51c-121">Global Subclassing</span></span>](#global-subclassing)
-   [<span data-ttu-id="dd51c-122">Superclase de procedimientos de ventana</span><span class="sxs-lookup"><span data-stu-id="dd51c-122">Window Procedure Superclassing</span></span>](#window-procedure-superclassing)

## <a name="structure-of-a-window-procedure"></a><span data-ttu-id="dd51c-123">Estructura de un procedimiento de ventana</span><span class="sxs-lookup"><span data-stu-id="dd51c-123">Structure of a Window Procedure</span></span>

<span data-ttu-id="dd51c-124">Un procedimiento de ventana es una función que tiene cuatro parámetros y devuelve un valor con signo.</span><span class="sxs-lookup"><span data-stu-id="dd51c-124">A window procedure is a function that has four parameters and returns a signed value.</span></span> <span data-ttu-id="dd51c-125">Los parámetros se componen de un identificador de ventana, un identificador de mensaje **uint** y dos parámetros de mensaje declarados con los tipos de datos **wParam** e **lParam** .</span><span class="sxs-lookup"><span data-stu-id="dd51c-125">The parameters consist of a window handle, a **UINT** message identifier, and two message parameters declared with the **WPARAM** and **LPARAM** data types.</span></span> <span data-ttu-id="dd51c-126">Para obtener más información, vea [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="dd51c-126">For more information, see [**WindowProc**](/previous-versions/windows/desktop/legacy/ms633573(v=vs.85)).</span></span>

<span data-ttu-id="dd51c-127">Los parámetros de mensaje suelen contener información en sus palabras de orden inferior y de orden superior.</span><span class="sxs-lookup"><span data-stu-id="dd51c-127">Message parameters often contain information in both their low-order and high-order words.</span></span> <span data-ttu-id="dd51c-128">Hay varias macros que una aplicación puede usar para extraer información de los parámetros del mensaje.</span><span class="sxs-lookup"><span data-stu-id="dd51c-128">There are several macros an application can use to extract information from the message parameters.</span></span> <span data-ttu-id="dd51c-129">Por ejemplo, la macro [**LOWORD**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85)) extrae la palabra de orden inferior (de bits 0 a 15) de un parámetro de mensaje.</span><span class="sxs-lookup"><span data-stu-id="dd51c-129">The [**LOWORD**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85)) macro, for example, extracts the low-order word (bits 0 through 15) from a message parameter.</span></span> <span data-ttu-id="dd51c-130">Otras macros son [**HIWORD**](/previous-versions/windows/desktop/legacy/ms632657(v=vs.85)), [**LOBYTE**](/previous-versions/windows/desktop/legacy/ms632658(v=vs.85))y [**HIBYTE**](/previous-versions/windows/desktop/legacy/ms632656(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="dd51c-130">Other macros include [**HIWORD**](/previous-versions/windows/desktop/legacy/ms632657(v=vs.85)), [**LOBYTE**](/previous-versions/windows/desktop/legacy/ms632658(v=vs.85)), and [**HIBYTE**](/previous-versions/windows/desktop/legacy/ms632656(v=vs.85)).</span></span>

<span data-ttu-id="dd51c-131">La interpretación del valor devuelto depende del mensaje determinado.</span><span class="sxs-lookup"><span data-stu-id="dd51c-131">The interpretation of the return value depends on the particular message.</span></span> <span data-ttu-id="dd51c-132">Consulte la descripción de cada mensaje para determinar el valor devuelto adecuado.</span><span class="sxs-lookup"><span data-stu-id="dd51c-132">Consult the description of each message to determine the appropriate return value.</span></span>

<span data-ttu-id="dd51c-133">Dado que es posible llamar a un procedimiento de ventana de forma recursiva, es importante minimizar el número de variables locales que usa.</span><span class="sxs-lookup"><span data-stu-id="dd51c-133">Because it is possible to call a window procedure recursively, it is important to minimize the number of local variables that it uses.</span></span> <span data-ttu-id="dd51c-134">Al procesar mensajes individuales, una aplicación debe llamar a funciones fuera del procedimiento de ventana para evitar el uso excesivo de variables locales, lo que podría provocar un desbordamiento de la pila durante la recursividad profunda.</span><span class="sxs-lookup"><span data-stu-id="dd51c-134">When processing individual messages, an application should call functions outside the window procedure to avoid excessive use of local variables, possibly causing the stack to overflow during deep recursion.</span></span>

## <a name="default-window-procedure"></a><span data-ttu-id="dd51c-135">Procedimiento de ventana predeterminado</span><span class="sxs-lookup"><span data-stu-id="dd51c-135">Default Window Procedure</span></span>

<span data-ttu-id="dd51c-136">La función de procedimiento de ventana predeterminada, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) define cierto comportamiento fundamental compartido por todas las ventanas.</span><span class="sxs-lookup"><span data-stu-id="dd51c-136">The default window procedure function, [**DefWindowProc**](/windows/desktop/api/winuser/nf-winuser-defwindowproca) defines certain fundamental behavior shared by all windows.</span></span> <span data-ttu-id="dd51c-137">El procedimiento de ventana predeterminado proporciona la funcionalidad mínima para una ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-137">The default window procedure provides the minimal functionality for a window.</span></span> <span data-ttu-id="dd51c-138">Un procedimiento de ventana definido por la aplicación debe pasar cualquier mensaje que no procese a la función **DefWindowProc** para el procesamiento predeterminado.</span><span class="sxs-lookup"><span data-stu-id="dd51c-138">An application-defined window procedure should pass any messages that it does not process to the **DefWindowProc** function for default processing.</span></span>

## <a name="window-procedure-subclassing"></a><span data-ttu-id="dd51c-139">Subclases de procedimientos de ventana</span><span class="sxs-lookup"><span data-stu-id="dd51c-139">Window Procedure Subclassing</span></span>

<span data-ttu-id="dd51c-140">Cuando una aplicación crea una ventana, el sistema asigna un bloque de memoria para almacenar información específica de la ventana, incluida la dirección del procedimiento de ventana que procesa los mensajes para la ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-140">When an application creates a window, the system allocates a block of memory for storing information specific to the window, including the address of the window procedure that processes messages for the window.</span></span> <span data-ttu-id="dd51c-141">Cuando el sistema necesita pasar un mensaje a la ventana, busca en la información específica de la ventana la dirección del procedimiento de ventana y pasa el mensaje a ese procedimiento.</span><span class="sxs-lookup"><span data-stu-id="dd51c-141">When the system needs to pass a message to the window, it searches the window-specific information for the address of the window procedure and passes the message to that procedure.</span></span>

<span data-ttu-id="dd51c-142">La *subclase* es una técnica que permite a una aplicación interceptar y procesar los mensajes enviados o publicados en una ventana determinada antes de que la ventana tenga la oportunidad de procesarlos.</span><span class="sxs-lookup"><span data-stu-id="dd51c-142">*Subclassing* is a technique that allows an application to intercept and process messages sent or posted to a particular window before the window has a chance to process them.</span></span> <span data-ttu-id="dd51c-143">Mediante la subclase de una ventana, una aplicación puede aumentar, modificar o supervisar el comportamiento de la ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-143">By subclassing a window, an application can augment, modify, or monitor the behavior of the window.</span></span> <span data-ttu-id="dd51c-144">Una aplicación puede subclaser una ventana que pertenece a una clase global del sistema, como un control de edición o un cuadro de lista.</span><span class="sxs-lookup"><span data-stu-id="dd51c-144">An application can subclass a window belonging to a system global class, such as an edit control or a list box.</span></span> <span data-ttu-id="dd51c-145">Por ejemplo, una aplicación podría subclaser un control de edición para evitar que el control acepte determinados caracteres.</span><span class="sxs-lookup"><span data-stu-id="dd51c-145">For example, an application could subclass an edit control to prevent the control from accepting certain characters.</span></span> <span data-ttu-id="dd51c-146">Sin embargo, no puede subclaser una ventana o clase que pertenezca a otra aplicación.</span><span class="sxs-lookup"><span data-stu-id="dd51c-146">However, you cannot subclass a window or class that belongs to another application.</span></span> <span data-ttu-id="dd51c-147">Todas las subclases deben realizarse dentro del mismo proceso.</span><span class="sxs-lookup"><span data-stu-id="dd51c-147">All subclassing must be performed within the same process.</span></span>

<span data-ttu-id="dd51c-148">Una aplicación subclase una ventana reemplazando la dirección del procedimiento de ventana original de la ventana por la dirección de un nuevo procedimiento de ventana, denominado *procedimiento de subclase*.</span><span class="sxs-lookup"><span data-stu-id="dd51c-148">An application subclasses a window by replacing the address of the window's original window procedure with the address of a new window procedure, called the *subclass procedure*.</span></span> <span data-ttu-id="dd51c-149">A partir de ese momento, el procedimiento de subclase recibe los mensajes enviados o publicados en la ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-149">Thereafter, the subclass procedure receives any messages sent or posted to the window.</span></span>

<span data-ttu-id="dd51c-150">El procedimiento de subclase puede tomar tres acciones al recibir un mensaje: puede pasar el mensaje al procedimiento de ventana original, modificar el mensaje y pasarlo al procedimiento de ventana original, o procesar el mensaje y no pasarlo al procedimiento de ventana original.</span><span class="sxs-lookup"><span data-stu-id="dd51c-150">The subclass procedure can take three actions upon receiving a message: it can pass the message to the original window procedure, modify the message and pass it to the original window procedure, or process the message and not pass it to the original window procedure.</span></span> <span data-ttu-id="dd51c-151">Si el procedimiento de subclase procesa un mensaje, puede hacerlo antes, después o antes y después de pasar el mensaje al procedimiento de ventana original.</span><span class="sxs-lookup"><span data-stu-id="dd51c-151">If the subclass procedure processes a message, it can do so before, after, or both before and after it passes the message to the original window procedure.</span></span>

<span data-ttu-id="dd51c-152">El sistema proporciona dos tipos de subclases: [Instance](#instance-subclassing) y [global](#global-subclassing).</span><span class="sxs-lookup"><span data-stu-id="dd51c-152">The system provides two types of subclassing: [instance](#instance-subclassing) and [global](#global-subclassing).</span></span> <span data-ttu-id="dd51c-153">En las *subclases de instancia*, una aplicación reemplaza la dirección del procedimiento de ventana de una única instancia de una ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-153">In *instance subclassing*, an application replaces the window procedure address of a single instance of a window.</span></span> <span data-ttu-id="dd51c-154">Una aplicación debe usar la subclase de instancia para subclase de una ventana existente.</span><span class="sxs-lookup"><span data-stu-id="dd51c-154">An application must use instance subclassing to subclass an existing window.</span></span> <span data-ttu-id="dd51c-155">En la *subclase global*, una aplicación reemplaza la dirección del procedimiento de ventana en la estructura [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) de una clase de ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-155">In *global subclassing*, an application replaces the address of the window procedure in the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure of a window class.</span></span> <span data-ttu-id="dd51c-156">Todas las ventanas posteriores creadas con la clase tienen la dirección del procedimiento de subclase, pero las ventanas existentes de la clase no se ven afectadas.</span><span class="sxs-lookup"><span data-stu-id="dd51c-156">All subsequent windows created with the class have the address of the subclass procedure, but existing windows of the class are not affected.</span></span>

### <a name="instance-subclassing"></a><span data-ttu-id="dd51c-157">Subclases de instancia</span><span class="sxs-lookup"><span data-stu-id="dd51c-157">Instance Subclassing</span></span>

<span data-ttu-id="dd51c-158">Una aplicación subclase una instancia de una ventana mediante la función [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) .</span><span class="sxs-lookup"><span data-stu-id="dd51c-158">An application subclasses an instance of a window by using the [**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) function.</span></span> <span data-ttu-id="dd51c-159">La aplicación pasa la marca **GWL \_ WndProc** , el identificador a la ventana a la subclase y la dirección del procedimiento de la subclase a **SetWindowLong**.</span><span class="sxs-lookup"><span data-stu-id="dd51c-159">The application passes the **GWL\_WNDPROC** flag, the handle to the window to subclass, and the address of the subclass procedure to **SetWindowLong**.</span></span> <span data-ttu-id="dd51c-160">El procedimiento de subclase puede residir en el ejecutable de la aplicación o en un archivo DLL.</span><span class="sxs-lookup"><span data-stu-id="dd51c-160">The subclass procedure can reside in either the application's executable or a DLL.</span></span>

<span data-ttu-id="dd51c-161">[**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) devuelve la dirección del procedimiento de ventana original de la ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-161">[**SetWindowLong**](/windows/win32/api/winuser/nf-winuser-setwindowlonga) returns the address of the window's original window procedure.</span></span> <span data-ttu-id="dd51c-162">La aplicación debe guardar la dirección y utilizarla en las llamadas subsiguientes a la función [**CallWindowProc**](/windows/win32/api/winuser/nf-winuser-callwindowproca) para pasar los mensajes interceptados al procedimiento de ventana original.</span><span class="sxs-lookup"><span data-stu-id="dd51c-162">The application must save the address, using it in subsequent calls to the [**CallWindowProc**](/windows/win32/api/winuser/nf-winuser-callwindowproca) function, to pass intercepted messages to the original window procedure.</span></span> <span data-ttu-id="dd51c-163">La aplicación también debe tener la dirección del procedimiento de ventana original para quitar la subclase de la ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-163">The application must also have the original window procedure address to remove the subclass from the window.</span></span> <span data-ttu-id="dd51c-164">Para quitar la subclase, la aplicación llama de nuevo a **SetWindowLong** , pasando la dirección del procedimiento de ventana original con la marca **GWL \_ WndProc** y el identificador a la ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-164">To remove the subclass, the application calls **SetWindowLong** again, passing the address of the original window procedure with the **GWL\_WNDPROC** flag and the handle to the window.</span></span>

<span data-ttu-id="dd51c-165">El sistema posee las clases globales del sistema y los aspectos de los controles pueden cambiar de una versión del sistema a la siguiente.</span><span class="sxs-lookup"><span data-stu-id="dd51c-165">The system owns the system global classes, and aspects of the controls might change from one version of the system to the next.</span></span> <span data-ttu-id="dd51c-166">Si la aplicación debe subclaser una ventana que pertenece a una clase global del sistema, es posible que el desarrollador tenga que actualizar la aplicación cuando se lance una nueva versión del sistema.</span><span class="sxs-lookup"><span data-stu-id="dd51c-166">If the application must subclass a window that belongs to a system global class, the developer may need to update the application when a new version of the system is released.</span></span>

<span data-ttu-id="dd51c-167">Dado que la creación de subclases de instancia se produce después de crear una ventana, no se pueden agregar bytes adicionales a la ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-167">Because instance subclassing occurs after a window is created, you cannot add any extra bytes to the window.</span></span> <span data-ttu-id="dd51c-168">Las aplicaciones que subclasen una ventana deben usar la lista de propiedades de la ventana para almacenar los datos necesarios para una instancia de la ventana de la subclase.</span><span class="sxs-lookup"><span data-stu-id="dd51c-168">Applications that subclass a window should use the window's property list to store any data needed for an instance of the subclassed window.</span></span> <span data-ttu-id="dd51c-169">Para obtener más información, vea propiedades de la [ventana](window-properties.md).</span><span class="sxs-lookup"><span data-stu-id="dd51c-169">For more information, see [Window Properties](window-properties.md).</span></span>

<span data-ttu-id="dd51c-170">Cuando una aplicación subclase una ventana subclase, debe quitar las subclases en el orden inverso en el que se realizaron.</span><span class="sxs-lookup"><span data-stu-id="dd51c-170">When an application subclasses a subclassed window, it must remove the subclasses in the reverse order they were performed.</span></span> <span data-ttu-id="dd51c-171">Si no se revierte el orden de eliminación, puede producirse un error irrecuperable en el sistema.</span><span class="sxs-lookup"><span data-stu-id="dd51c-171">If the removal order is not reversed, an unrecoverable system error may occur.</span></span>

### <a name="global-subclassing"></a><span data-ttu-id="dd51c-172">Subclase global</span><span class="sxs-lookup"><span data-stu-id="dd51c-172">Global Subclassing</span></span>

<span data-ttu-id="dd51c-173">Para subclases globales de una clase de ventana, la aplicación debe tener un identificador a una ventana de la clase.</span><span class="sxs-lookup"><span data-stu-id="dd51c-173">To globally subclass a window class, the application must have a handle to a window of the class.</span></span> <span data-ttu-id="dd51c-174">La aplicación también necesita el identificador para quitar la subclase.</span><span class="sxs-lookup"><span data-stu-id="dd51c-174">The application also needs the handle to remove the subclass.</span></span> <span data-ttu-id="dd51c-175">Para obtener el identificador, una aplicación normalmente crea una ventana oculta de la clase para la que se van a crear subclases.</span><span class="sxs-lookup"><span data-stu-id="dd51c-175">To get the handle, an application typically creates a hidden window of the class to be subclassed.</span></span> <span data-ttu-id="dd51c-176">Después de obtener el identificador, la aplicación llama a la función [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) , especificando el identificador, la marca **GCL \_ WndProc** y la dirección del procedimiento de la subclase.</span><span class="sxs-lookup"><span data-stu-id="dd51c-176">After obtaining the handle, the application calls the [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) function, specifying the handle, the **GCL\_WNDPROC** flag, and the address of the subclass procedure.</span></span> <span data-ttu-id="dd51c-177">**SetClassLong** devuelve la dirección del procedimiento de ventana original para la clase.</span><span class="sxs-lookup"><span data-stu-id="dd51c-177">**SetClassLong** returns the address of the original window procedure for the class.</span></span>

<span data-ttu-id="dd51c-178">La dirección del procedimiento de ventana original se usa en la subclase global de la misma manera que se usa en la subclase de instancia.</span><span class="sxs-lookup"><span data-stu-id="dd51c-178">The original window procedure address is used in global subclassing in the same way it is used in instance subclassing.</span></span> <span data-ttu-id="dd51c-179">El procedimiento de subclase pasa los mensajes al procedimiento de ventana original mediante una llamada a [**CallWindowProc**](/windows/win32/api/winuser/nf-winuser-callwindowproca).</span><span class="sxs-lookup"><span data-stu-id="dd51c-179">The subclass procedure passes messages to the original window procedure by calling [**CallWindowProc**](/windows/win32/api/winuser/nf-winuser-callwindowproca).</span></span> <span data-ttu-id="dd51c-180">La aplicación quita la subclase de la clase de ventana llamando a [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) de nuevo, especificando la dirección del procedimiento de ventana original, la marca **GCL \_ WndProc** y el identificador de una ventana de la clase que se va a subclase.</span><span class="sxs-lookup"><span data-stu-id="dd51c-180">The application removes the subclass from the window class by calling [**SetClassLong**](/windows/win32/api/winuser/nf-winuser-setclasslonga) again, specifying the address of the original window procedure, the **GCL\_WNDPROC** flag, and the handle to a window of the class being subclassed.</span></span> <span data-ttu-id="dd51c-181">Una aplicación que subclase globalmente una clase de control debe quitar la subclase cuando la aplicación finaliza; de lo contrario, puede producirse un error irrecuperable en el sistema.</span><span class="sxs-lookup"><span data-stu-id="dd51c-181">An application that globally subclasses a control class must remove the subclass when the application terminates; otherwise, an unrecoverable system error may occur.</span></span>

<span data-ttu-id="dd51c-182">La subclase global tiene las mismas limitaciones que las subclases de instancia, además de algunas restricciones adicionales.</span><span class="sxs-lookup"><span data-stu-id="dd51c-182">Global subclassing has the same limitations as instance subclassing, plus some additional restrictions.</span></span> <span data-ttu-id="dd51c-183">Una aplicación no debe utilizar los bytes adicionales para la clase o la instancia de la ventana sin saber exactamente cómo las utiliza el procedimiento de ventana original.</span><span class="sxs-lookup"><span data-stu-id="dd51c-183">An application should not use the extra bytes for either the class or the window instance without knowing exactly how the original window procedure uses them.</span></span> <span data-ttu-id="dd51c-184">Si la aplicación debe asociar datos a una ventana, debe utilizar las propiedades de la ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-184">If the application must associate data with a window, it should use window properties.</span></span>

## <a name="window-procedure-superclassing"></a><span data-ttu-id="dd51c-185">Superclase de procedimientos de ventana</span><span class="sxs-lookup"><span data-stu-id="dd51c-185">Window Procedure Superclassing</span></span>

<span data-ttu-id="dd51c-186">La *superclase* es una técnica que permite a una aplicación crear una nueva clase de ventana con la funcionalidad básica de la clase existente, además de mejoras proporcionadas por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="dd51c-186">*Superclassing* is a technique that allows an application to create a new window class with the basic functionality of the existing class, plus enhancements provided by the application.</span></span> <span data-ttu-id="dd51c-187">Una superclase se basa en una clase de ventana existente denominada *clase base*.</span><span class="sxs-lookup"><span data-stu-id="dd51c-187">A superclass is based on an existing window class called the *base class*.</span></span> <span data-ttu-id="dd51c-188">Con frecuencia, la clase base es una clase de ventana global del sistema, como un control de edición, pero puede ser cualquier clase de ventana.</span><span class="sxs-lookup"><span data-stu-id="dd51c-188">Frequently, the base class is a system global window class such as an edit control, but it can be any window class.</span></span>

<span data-ttu-id="dd51c-189">Una superclase tiene su propio procedimiento de ventana, denominado procedimiento de superclase.</span><span class="sxs-lookup"><span data-stu-id="dd51c-189">A superclass has its own window procedure, called the superclass procedure.</span></span> <span data-ttu-id="dd51c-190">El *procedimiento* de la superclase puede llevar a cabo tres acciones al recibir un mensaje: puede pasar el mensaje al procedimiento de ventana original, modificar el mensaje y pasarlo al procedimiento de ventana original, o procesar el mensaje y no pasarlo al procedimiento de ventana original.</span><span class="sxs-lookup"><span data-stu-id="dd51c-190">The *superclass procedure* can take three actions upon receiving a message: It can pass the message to the original window procedure, modify the message and pass it to the original window procedure, or process the message and not pass it to the original window procedure.</span></span> <span data-ttu-id="dd51c-191">Si el procedimiento de la superclase procesa un mensaje, puede hacerlo antes, después o antes y después de pasar el mensaje al procedimiento de ventana original.</span><span class="sxs-lookup"><span data-stu-id="dd51c-191">If the superclass procedure processes a message, it can do so before, after, or both before and after it passes the message to the original window procedure.</span></span>

<span data-ttu-id="dd51c-192">A diferencia de un procedimiento de subclase, un procedimiento de superclase puede procesar los mensajes de creación de ventanas ([**WM \_ NCCREATE**](wm-nccreate.md), la [**\_ creación de WM**](wm-create.md), etc.), pero también debe pasarlos al procedimiento de ventana de clase base original para que el procedimiento de ventana de clase base pueda realizar su procedimiento de inicialización.</span><span class="sxs-lookup"><span data-stu-id="dd51c-192">Unlike a subclass procedure, a superclass procedure can process window creation messages ([**WM\_NCCREATE**](wm-nccreate.md), [**WM\_CREATE**](wm-create.md), and so on), but it must also pass them to the original base-class window procedure so that the base-class window procedure can perform its initialization procedure.</span></span>

<span data-ttu-id="dd51c-193">Para repartir una clase de ventana, una aplicación llama primero a la función [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) para recuperar información sobre la clase base.</span><span class="sxs-lookup"><span data-stu-id="dd51c-193">To superclass a window class, an application first calls the [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) function to retrieve information about the base class.</span></span> <span data-ttu-id="dd51c-194">**GetClassInfo** rellena una estructura [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) con los valores de la estructura **WNDCLASS** de la clase base.</span><span class="sxs-lookup"><span data-stu-id="dd51c-194">**GetClassInfo** fills a [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure with the values from the **WNDCLASS** structure of the base class.</span></span> <span data-ttu-id="dd51c-195">A continuación, la aplicación copia su propio identificador de instancia en el miembro **hInstance** de la estructura **WNDCLASS** y copia el nombre de la superclase en el miembro **lpszClassName** .</span><span class="sxs-lookup"><span data-stu-id="dd51c-195">Next, the application copies its own instance handle into the **hInstance** member of the **WNDCLASS** structure and copies the name of the superclass into the **lpszClassName** member.</span></span> <span data-ttu-id="dd51c-196">Si la clase base tiene un menú, la aplicación debe proporcionar un nuevo menú con los mismos identificadores de menú y copiar el nombre del menú en el miembro **lpszMenuName** .</span><span class="sxs-lookup"><span data-stu-id="dd51c-196">If the base class has a menu, the application must provide a new menu with the same menu identifiers and copy the menu name into the **lpszMenuName** member.</span></span> <span data-ttu-id="dd51c-197">Si el procedimiento de la superclase procesa el mensaje del [**\_ comando de WM**](/windows/desktop/menurc/wm-command) y no lo pasa al procedimiento de ventana de la clase base, el menú no necesita tener identificadores correspondientes.</span><span class="sxs-lookup"><span data-stu-id="dd51c-197">If the superclass procedure processes the [**WM\_COMMAND**](/windows/desktop/menurc/wm-command) message and does not pass it to the window procedure of the base class, the menu need not have corresponding identifiers.</span></span> <span data-ttu-id="dd51c-198">**GetClassInfo** no devuelve el miembro **lpszMenuName**, **lpszClassName** o **hInstance** de la estructura **WNDCLASS** .</span><span class="sxs-lookup"><span data-stu-id="dd51c-198">**GetClassInfo** does not return the **lpszMenuName**, **lpszClassName**, or **hInstance** member of the **WNDCLASS** structure.</span></span>

<span data-ttu-id="dd51c-199">Una aplicación también debe establecer el miembro **lpfnWndProc** de la estructura [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) .</span><span class="sxs-lookup"><span data-stu-id="dd51c-199">An application must also set the **lpfnWndProc** member of the [**WNDCLASS**](/windows/win32/api/winuser/ns-winuser-wndclassa) structure.</span></span> <span data-ttu-id="dd51c-200">La función [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) rellena este miembro con la dirección del procedimiento de ventana original para la clase.</span><span class="sxs-lookup"><span data-stu-id="dd51c-200">The [**GetClassInfo**](/windows/win32/api/winuser/nf-winuser-getclassinfoa) function fills this member with the address of the original window procedure for the class.</span></span> <span data-ttu-id="dd51c-201">La aplicación debe guardar esta dirección para pasar mensajes al procedimiento de ventana original y, a continuación, copiar la dirección del procedimiento de la superclase en el miembro **lpfnWndProc** .</span><span class="sxs-lookup"><span data-stu-id="dd51c-201">The application must save this address, to pass messages to the original window procedure, and then copy the address of the superclass procedure into the **lpfnWndProc** member.</span></span> <span data-ttu-id="dd51c-202">La aplicación puede, si es necesario, modificar cualquier otro miembro de la estructura **WNDCLASS** .</span><span class="sxs-lookup"><span data-stu-id="dd51c-202">The application can, if necessary, modify any other members of the **WNDCLASS** structure.</span></span> <span data-ttu-id="dd51c-203">Después de rellenar la estructura **WNDCLASS** , la aplicación registra la superclase pasando la dirección de la estructura a la función [**RegisterClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) .</span><span class="sxs-lookup"><span data-stu-id="dd51c-203">After it fills the **WNDCLASS** structure, the application registers the superclass by passing the address of the structure to the [**RegisterClass**](/windows/win32/api/winuser/nf-winuser-registerclassa) function.</span></span> <span data-ttu-id="dd51c-204">La superclase se puede usar para crear ventanas.</span><span class="sxs-lookup"><span data-stu-id="dd51c-204">The superclass can then be used to create windows.</span></span>

<span data-ttu-id="dd51c-205">Dado que la superclase registra una nueva clase de ventana, una aplicación puede Agregar a los bytes de clase adicionales y a los bytes de ventana adicionales.</span><span class="sxs-lookup"><span data-stu-id="dd51c-205">Because superclassing registers a new window class, an application can add to both the extra class bytes and the extra window bytes.</span></span> <span data-ttu-id="dd51c-206">La superclase no debe utilizar los bytes adicionales originales para la clase base o la ventana por las mismas razones por las que una subclase de instancia o una subclase global no deben utilizarlos.</span><span class="sxs-lookup"><span data-stu-id="dd51c-206">The superclass must not use the original extra bytes for the base class or the window for the same reasons that an instance subclass or a global subclass should not use them.</span></span> <span data-ttu-id="dd51c-207">Además, si la aplicación agrega bytes adicionales para su uso en la clase o en la instancia de la ventana, debe hacer referencia a los bytes adicionales en relación con el número de bytes adicionales utilizados por la clase base original.</span><span class="sxs-lookup"><span data-stu-id="dd51c-207">Also, if the application adds extra bytes for its use to either the class or the window instance, it must reference the extra bytes relative to the number of extra bytes used by the original base class.</span></span> <span data-ttu-id="dd51c-208">Dado que el número de bytes utilizados por la clase base puede variar de una versión de la clase base a la siguiente, el desplazamiento inicial para los bytes adicionales de la superclase también puede variar de una versión de la clase base a la siguiente.</span><span class="sxs-lookup"><span data-stu-id="dd51c-208">Because the number of bytes used by the base class may vary from one version of the base class to the next, the starting offset for the superclass's own extra bytes may also vary from one version of the base class to the next.</span></span>

 

 
