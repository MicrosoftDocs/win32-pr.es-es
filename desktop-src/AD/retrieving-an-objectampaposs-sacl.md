---
title: Recuperar la SACL de un objeto
description: El descriptor de seguridad de un objeto de Active Directory Domain Services puede contener una lista de control de acceso del sistema (SACL).
ms.assetid: b1da91a2-d9b0-48a3-9de5-1e588209032d
ms.tgt_platform: multiple
keywords:
- DACL AD
- SACL AD, recuperar la SACL de un objeto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 537846f2080aecdab8e22f5fce5bdfa36298fb74
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/17/2020
ms.locfileid: "104358799"
---
# <a name="retrieving-an-objects-sacl"></a><span data-ttu-id="8c829-105">Recuperar la SACL de un objeto</span><span class="sxs-lookup"><span data-stu-id="8c829-105">Retrieving an Object's SACL</span></span>

<span data-ttu-id="8c829-106">El descriptor de seguridad de un objeto de Active Directory Domain Services puede contener una lista de control de acceso del sistema (SACL).</span><span class="sxs-lookup"><span data-stu-id="8c829-106">The security descriptor of an object in Active Directory Domain Services may contain a system access-control list (SACL).</span></span> <span data-ttu-id="8c829-107">Una SACL contiene entradas de control de acceso (ACE) que especifican los tipos de intentos de acceso que generan registros de auditoría en el registro de eventos de seguridad de un controlador de dominio.</span><span class="sxs-lookup"><span data-stu-id="8c829-107">A SACL contains access-control entries (ACEs) that specify the types of access attempts that generate audit records in the security event log of a domain controller.</span></span> <span data-ttu-id="8c829-108">Tenga en cuenta que una SACL genera entradas de registro solo en el controlador de dominio en el que se produjo el intento de acceso, no en todos los DC que contienen una réplica del objeto.</span><span class="sxs-lookup"><span data-stu-id="8c829-108">Be aware that a SACL generates log entries only on the domain controller where the access attempt occurred, not on every DC that contains a replica of the object.</span></span>

<span data-ttu-id="8c829-109">Para establecer u obtener la SACL de un descriptor de seguridad de objeto, el privilegio de **\_ \_ nombre de seguridad se** debe habilitar en el token de acceso del subproceso que lo solicita.</span><span class="sxs-lookup"><span data-stu-id="8c829-109">To set or get the SACL from an object security descriptor, the **SE\_SECURITY\_NAME** privilege must be enabled in the access token of the requesting thread.</span></span> <span data-ttu-id="8c829-110">El grupo administradores tiene este privilegio de forma predeterminada y se puede asignar a otros usuarios o grupos.</span><span class="sxs-lookup"><span data-stu-id="8c829-110">The administrators group has this privilege by default, and it can be assigned to other users or groups.</span></span> <span data-ttu-id="8c829-111">Para obtener más información, consulte [derechos de acceso de SACL](/windows/desktop/SecAuthZ/sacl-access-right).</span><span class="sxs-lookup"><span data-stu-id="8c829-111">For more information, see [SACL Access Right](/windows/desktop/SecAuthZ/sacl-access-right).</span></span>

<span data-ttu-id="8c829-112">Para obtener y establecer la SACL de un objeto de directorio, use la interfaz [**IADsSecurityDescriptor**](/windows/desktop/api/iads/nn-iads-iadssecuritydescriptor) .</span><span class="sxs-lookup"><span data-stu-id="8c829-112">To get and set the SACL of a directory object, use the [**IADsSecurityDescriptor**](/windows/desktop/api/iads/nn-iads-iadssecuritydescriptor) interface.</span></span> <span data-ttu-id="8c829-113">Con C++, el método [**IADsSecurityDescriptor:: get \_ SystemAcl**](/windows/desktop/ADSI/iadssecuritydescriptor-property-methods) devuelve un puntero [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) .</span><span class="sxs-lookup"><span data-stu-id="8c829-113">Using C++, the [**IADsSecurityDescriptor::get\_SystemAcl**](/windows/desktop/ADSI/iadssecuritydescriptor-property-methods) method returns an [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) pointer.</span></span> <span data-ttu-id="8c829-114">Llame a **QueryInterface** en ese puntero **IDispatch** para obtener una interfaz [**IADsAccessControlList**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrollist) y use los métodos de esa interfaz para tener acceso a las ACE individuales en la SACL.</span><span class="sxs-lookup"><span data-stu-id="8c829-114">Call **QueryInterface** on that **IDispatch** pointer to get an [**IADsAccessControlList**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrollist) interface, and use the methods on that interface to access the individual ACEs in the SACL.</span></span> <span data-ttu-id="8c829-115">Para obtener más información sobre el procedimiento para modificar una SACL, que es similar a la de modificar una DACL, consulte [configuración de derechos de acceso en un objeto](setting-access-rights-on-an-object.md).</span><span class="sxs-lookup"><span data-stu-id="8c829-115">For more information about the procedure for modifying a SACL, which is similar to that for modifying a DACL, see [Setting Access Rights on an Object](setting-access-rights-on-an-object.md).</span></span>

<span data-ttu-id="8c829-116">Para enumerar las ACE en una SACL, use el método [**IADsAccessControlList:: get \_ \_ NewEnum**](/windows/desktop/api/iads/nf-iads-iadsaccesscontrollist-get__newenum) , que devuelve un puntero [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) .</span><span class="sxs-lookup"><span data-stu-id="8c829-116">To enumerate the ACEs in a SACL, use the [**IADsAccessControlList::get\_\_NewEnum**](/windows/desktop/api/iads/nf-iads-iadsaccesscontrollist-get__newenum) method, which returns an [**IUnknown**](/windows/win32/api/unknwn/nn-unknwn-iunknown) pointer.</span></span> <span data-ttu-id="8c829-117">Llame a **QueryInterface** en ese puntero **IUnknown** para obtener una interfaz [**IEnumVARIANT**](/windows/win32/api/oaidl/nn-oaidl-ienumvariant) .</span><span class="sxs-lookup"><span data-stu-id="8c829-117">Call **QueryInterface** on that **IUnknown** pointer to get an [**IEnumVARIANT**](/windows/win32/api/oaidl/nn-oaidl-ienumvariant) interface.</span></span> <span data-ttu-id="8c829-118">Use el método [**IEnumVARIANT:: Next**](/windows/win32/api/oaidl/nf-oaidl-ienumvariant-next) para enumerar las ACE de la ACL.</span><span class="sxs-lookup"><span data-stu-id="8c829-118">Use the [**IEnumVARIANT::Next**](/windows/win32/api/oaidl/nf-oaidl-ienumvariant-next) method to enumerate the ACEs in the ACL.</span></span> <span data-ttu-id="8c829-119">Cada ACE se devuelve como un **valor de tipo Variant** que contiene un puntero [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) ; Tenga en cuenta que el miembro de **VT** es el **\_ envío de VT**.</span><span class="sxs-lookup"><span data-stu-id="8c829-119">Each ACE is returned as a **VARIANT** that contains an [**IDispatch**](/windows/win32/api/oaidl/nn-oaidl-idispatch) pointer; be aware that the **vt** member is **VT\_DISPATCH**.</span></span> <span data-ttu-id="8c829-120">Llame a **QueryInterface** en ese puntero **IDispatch** para obtener una interfaz [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) para la ACE.</span><span class="sxs-lookup"><span data-stu-id="8c829-120">Call **QueryInterface** on that **IDispatch** pointer to get an [**IADsAccessControlEntry**](/windows/desktop/api/iads/nn-iads-iadsaccesscontrolentry) interface for the ACE.</span></span> <span data-ttu-id="8c829-121">Use los métodos de la interfaz **IADsAccessControlEntry** para establecer u obtener los componentes de una ACE.</span><span class="sxs-lookup"><span data-stu-id="8c829-121">Use the **IADsAccessControlEntry** interface methods to set or get the components of an ACE.</span></span>

<span data-ttu-id="8c829-122">Para obtener más información acerca de las SACL, consulte:</span><span class="sxs-lookup"><span data-stu-id="8c829-122">For more information about SACLs, see:</span></span>

-   [<span data-ttu-id="8c829-123">Listas de control de acceso (ACL)</span><span class="sxs-lookup"><span data-stu-id="8c829-123">Access-Control Lists (ACLs)</span></span>](/windows/desktop/SecAuthZ/access-control-lists)
-   [<span data-ttu-id="8c829-124">Generación de auditoría</span><span class="sxs-lookup"><span data-stu-id="8c829-124">Audit Generation</span></span>](/windows/desktop/SecAuthZ/audit-generation)

 

 