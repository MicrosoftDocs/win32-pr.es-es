---
description: VSS permite que un solicitante tenga acceso a la instantánea de los volúmenes que contienen datos para copia de seguridad y para copiar los datos en un medio de copia de seguridad.
ms.assetid: 187f26f2-f191-4703-9bde-3357f1ceef0c
title: Información general sobre la copia de seguridad real de archivos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 98a504ff5a41725e33a2eb27792a3c6c89d00276
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105696997"
---
# <a name="overview-of-actual-backup-of-files"></a><span data-ttu-id="e76c9-103">Información general sobre la copia de seguridad real de archivos</span><span class="sxs-lookup"><span data-stu-id="e76c9-103">Overview of Actual Backup Of Files</span></span>

<span data-ttu-id="e76c9-104">VSS permite que un solicitante tenga acceso a la instantánea de los volúmenes que contienen datos para copia de seguridad y para copiar los datos en un medio de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="e76c9-104">VSS enables a requester to access the shadow copy of volumes containing data for backup and to copy data to backup media.</span></span> <span data-ttu-id="e76c9-105">Normalmente, los escritores continúan con el funcionamiento normal durante este proceso.</span><span class="sxs-lookup"><span data-stu-id="e76c9-105">Writers generally proceed with normal operation during this process.</span></span> <span data-ttu-id="e76c9-106">Para obtener más información, vea [información general sobre el procesamiento de una copia de seguridad en VSS](overview-of-processing-a-backup-under-vss.md).</span><span class="sxs-lookup"><span data-stu-id="e76c9-106">For more information, see [Overview of Processing a Backup Under VSS](overview-of-processing-a-backup-under-vss.md).</span></span>

<span data-ttu-id="e76c9-107">En la tabla siguiente se muestra la secuencia de acciones y eventos necesarios para realizar una copia de seguridad de los archivos.</span><span class="sxs-lookup"><span data-stu-id="e76c9-107">The following table shows the sequence of actions and events that are required for files to be backed up.</span></span>



<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="e76c9-108">Acción del solicitante</span><span class="sxs-lookup"><span data-stu-id="e76c9-108">Requester action</span></span></th>
<th><span data-ttu-id="e76c9-109">Evento</span><span class="sxs-lookup"><span data-stu-id="e76c9-109">Event</span></span></th>
<th><span data-ttu-id="e76c9-110">Acción del escritor</span><span class="sxs-lookup"><span data-stu-id="e76c9-110">Writer action</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="e76c9-111">Acceder a los archivos en el volumen de copia sombra (consulte <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getsnapshotproperties"><strong>IVssBackupComponents:: GetSnapshotProperties</strong></a>, <a href="/windows/desktop/api/Vss/ns-vss-vss_snapshot_prop"><strong>VSS_SNAPSHOT_PROP</strong></a>)</span><span class="sxs-lookup"><span data-stu-id="e76c9-111">Access files on the shadow-copied volume (see <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getsnapshotproperties"><strong>IVssBackupComponents::GetSnapshotProperties</strong></a>, <a href="/windows/desktop/api/Vss/ns-vss-vss_snapshot_prop"><strong>VSS_SNAPSHOT_PROP</strong></a>)</span></span></td>
<td><span data-ttu-id="e76c9-112">None</span><span class="sxs-lookup"><span data-stu-id="e76c9-112">None</span></span></td>
<td><span data-ttu-id="e76c9-113">None</span><span class="sxs-lookup"><span data-stu-id="e76c9-113">None</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="e76c9-114">Generar la lista de archivos de los que se realizará una copia de seguridad y copiar los datos de archivos en los medios de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="e76c9-114">Generate the list of files to back up, and copy file data to backup media.</span></span></td>
<td><span data-ttu-id="e76c9-115">None</span><span class="sxs-lookup"><span data-stu-id="e76c9-115">None</span></span></td>
<td><span data-ttu-id="e76c9-116">None</span><span class="sxs-lookup"><span data-stu-id="e76c9-116">None</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="e76c9-117">Indica si la copia de seguridad se realizó correctamente o no con <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupsucceeded"><strong>IVssBackupComponents:: SetBackupSucceeded</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="e76c9-117">Indicate the success or failure of the backup with <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupsucceeded"><strong>IVssBackupComponents::SetBackupSucceeded</strong></a>.</span></span></td>
<td><span data-ttu-id="e76c9-118">None</span><span class="sxs-lookup"><span data-stu-id="e76c9-118">None</span></span></td>
<td><span data-ttu-id="e76c9-119">None</span><span class="sxs-lookup"><span data-stu-id="e76c9-119">None</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="e76c9-120">El solicitante indica que la copia de seguridad se ha completado llamando a <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete"><strong>IVssBackupComponents:: BackupComplete</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="e76c9-120">The requester indicates that the backup has completed by calling <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete"><strong>IVssBackupComponents::BackupComplete</strong></a>.</span></span></td>
<td><span data-ttu-id="e76c9-121"><a href="vssgloss-b.md"><em>BackupComplete</em></a></span><span class="sxs-lookup"><span data-stu-id="e76c9-121"><a href="vssgloss-b.md"><em>BackupComplete</em></a></span></span></td>
<td><span data-ttu-id="e76c9-122">Realice cualquier limpieza posterior a la copia de seguridad (vea <a href="/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete"><strong>CVssWriter:: OnBackupComplete</strong></a>, <a href="/windows/desktop/api/VsWriter/nl-vswriter-ivsswritercomponents"><strong>IVssWriterComponents</strong></a>, <a href="/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent"><strong>IVssComponent</strong></a>).</span><span class="sxs-lookup"><span data-stu-id="e76c9-122">Perform any post-backup cleanup (see <a href="/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete"><strong>CVssWriter::OnBackupComplete</strong></a>, <a href="/windows/desktop/api/VsWriter/nl-vswriter-ivsswritercomponents"><strong>IVssWriterComponents</strong></a>, <a href="/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent"><strong>IVssComponent</strong></a>).</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="e76c9-123">El solicitante espera a que todos los escritores confirmen la recepción del evento <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete"><strong>IVssBackupComponents:: BackupComplete</strong></a> mediante <a href="/windows/desktop/api/Vss/nn-vss-ivssasync"><strong>IVssAsync</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="e76c9-123">The requester waits for all writers to acknowledge receipt of the <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-backupcomplete"><strong>IVssBackupComponents::BackupComplete</strong></a> event using <a href="/windows/desktop/api/Vss/nn-vss-ivssasync"><strong>IVssAsync</strong></a>.</span></span> <span data-ttu-id="e76c9-124">También debe comprobar el estado del escritor (consulte <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus"><strong>IVssBackupComponents:: GatherWriterStatus</strong></a>, <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus"><strong>IVssBackupComponents:: GetWriterStatus</strong></a>).</span><span class="sxs-lookup"><span data-stu-id="e76c9-124">It should also verify writer status (see <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus"><strong>IVssBackupComponents::GatherWriterStatus</strong></a>, <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus"><strong>IVssBackupComponents::GetWriterStatus</strong></a>).</span></span> <span data-ttu-id="e76c9-125">El solicitante debe llamar a <strong>GatherWriterStatus</strong> en este momento para que la sesión del escritor se establezca en un estado completado.</span><span class="sxs-lookup"><span data-stu-id="e76c9-125">The requester must call <strong>GatherWriterStatus</strong> at this time to cause the writer session to be set to a completed state.</span></span>
<blockquote>
[!Note]<br />
<span data-ttu-id="e76c9-126">Esto solo es necesario en Windows Server 2008 con Service Pack 2 (SP2) y versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="e76c9-126">This is only necessary on Windows Server 2008 with Service Pack 2 (SP2) and earlier.</span></span>
</blockquote>
<br/></td>
<td><span data-ttu-id="e76c9-127">None</span><span class="sxs-lookup"><span data-stu-id="e76c9-127">None</span></span></td>
<td><span data-ttu-id="e76c9-128">None</span><span class="sxs-lookup"><span data-stu-id="e76c9-128">None</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="e76c9-129">Guarde el documento componentes de copia de seguridad y cada documento de metadatos de escritor en documentos XML, que se pueden escribir en el medio de copia de seguridad (vea <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-saveasxml"><strong>IVssBackupComponents:: SaveAsXML</strong></a> y <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-saveasxml"><strong>IVssExamineWriterMetadata:: SaveAsXML</strong></a>).</span><span class="sxs-lookup"><span data-stu-id="e76c9-129">Save the Backup Components Document and each Writer Metadata Document to XML documents, which can be written to the backup media (see <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-saveasxml"><strong>IVssBackupComponents::SaveAsXML</strong></a> and <a href="/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-saveasxml"><strong>IVssExamineWriterMetadata::SaveAsXML</strong></a>).</span></span></td>
<td><span data-ttu-id="e76c9-130">None</span><span class="sxs-lookup"><span data-stu-id="e76c9-130">None</span></span></td>
<td><span data-ttu-id="e76c9-131">None</span><span class="sxs-lookup"><span data-stu-id="e76c9-131">None</span></span></td>
</tr>
</tbody>
</table>



 

## <a name="writer-actions-during-backup-of-files"></a><span data-ttu-id="e76c9-132">Acciones del escritor durante la copia de seguridad de archivos</span><span class="sxs-lookup"><span data-stu-id="e76c9-132">Writer Actions during Backup of Files</span></span>

<span data-ttu-id="e76c9-133">Una vez completada la instantánea, todas las operaciones de e/s en el sistema del que se realiza una copia de seguridad deberían ser capaces de reanudar sin interrumpir la integridad de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="e76c9-133">After the shadow copy has been completed, all I/O operations on the system that is being backed up should be able to resume without disrupting the integrity of the backup.</span></span> <span data-ttu-id="e76c9-134">Esta es una de las motivaciones principales para tener la funcionalidad de la instantánea.</span><span class="sxs-lookup"><span data-stu-id="e76c9-134">This is one of the prime motivations for having the shadow copy functionality.</span></span>

<span data-ttu-id="e76c9-135">Por lo tanto, como en la fase de detección (consulte [información general de la fase de detección de copias de seguridad](overview-of-the-backup-discovery-phase.md)), hay pocas peticiones en los escritores mientras se realiza una copia de seguridad de los archivos.</span><span class="sxs-lookup"><span data-stu-id="e76c9-135">Therefore, as in the discovery phase (see [Overview of the Backup Discovery Phase](overview-of-the-backup-discovery-phase.md)), there are few demands placed on the writers while files are actually being backed up.</span></span>

<span data-ttu-id="e76c9-136">Una vez que se ha completado una copia de seguridad y un solicitante ha generado un evento [*BackupComplete*](vssgloss-b.md) , VSS llamará al método [**CVssWriter:: OnBackupComplete**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete) de cada escritor, un método virtual que, de forma predeterminada, simplemente devuelve **true**.</span><span class="sxs-lookup"><span data-stu-id="e76c9-136">After a backup has completed, and a requester has generated a [*BackupComplete*](vssgloss-b.md) event, VSS will call each writer's [**CVssWriter::OnBackupComplete**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete) method, a virtual method that by default simply returns **TRUE**.</span></span> <span data-ttu-id="e76c9-137">Sin embargo, los escritores pueden invalidar la implementación predeterminada y realizar acciones como la eliminación de los archivos temporales restantes, o bien usar la interfaz [**IVssWriterComponents**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswritercomponents) con la que se llama para comprobar el estado de la copia de seguridad de cada uno de los componentes que se [*incluyen explícitamente*](vssgloss-e.md) (y cualquier [*conjunto de componentes*](vssgloss-c.md) que puedan definir) recuperando el objeto [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) correspondiente.</span><span class="sxs-lookup"><span data-stu-id="e76c9-137">However, writers can override the default implementation and take such actions as removing remaining temporary files, or use the [**IVssWriterComponents**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswritercomponents) interface it is called with to check the state of the backup of each of its [*included explicitly*](vssgloss-e.md) components (and any [*component set*](vssgloss-c.md) they might define) by retrieving the corresponding [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) object.</span></span> <span data-ttu-id="e76c9-138">Después, el escritor puede determinar, y actuar sobre, el éxito o el error de la copia de seguridad mediante una llamada a [**IVssComponent: GetBackupSucceeded**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupsucceeded).</span><span class="sxs-lookup"><span data-stu-id="e76c9-138">The writer can then determine, and act on, the success or failure of the backup by calling [**IVssComponent:GetBackupSucceeded**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupsucceeded).</span></span> <span data-ttu-id="e76c9-139">El valor devuelto por **IVssComponent: GetBackupSucceeded** solo será **true** si se ha realizado correctamente la copia de seguridad de todos los archivos incluidos explícitamente en el componente y todos los [*incluidos implícitamente*](vssgloss-i.md) de cualquiera de sus [*subcomponentes*](vssgloss-s.md) .</span><span class="sxs-lookup"><span data-stu-id="e76c9-139">The value returned by **IVssComponent:GetBackupSucceeded** will be **TRUE** only if all explicitly included files in the component and all [*implicitly included*](vssgloss-i.md) of any of its [*subcomponents*](vssgloss-s.md) have been successfully backed up.</span></span>

<span data-ttu-id="e76c9-140">Cuando se ha completado la llamada a [**CVssWriter:: OnBackupComplete**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete) , el solicitante debe llamar a [**Ivssbackupcomponents:: GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) y [**IVssBackupComponents:: GetWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus) (para cada escritor) una última vez.</span><span class="sxs-lookup"><span data-stu-id="e76c9-140">When the call to [**CVssWriter::OnBackupComplete**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onbackupcomplete) has completed, the requester should call [**IVssBackupComponents::GatherWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwriterstatus) and [**IVssBackupComponents::GetWriterStatus**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwriterstatus) (for each writer) one last time.</span></span> <span data-ttu-id="e76c9-141">La memoria de estado de sesión del escritor es un recurso limitado y los escritores deben volver a usar los Estados de sesión.</span><span class="sxs-lookup"><span data-stu-id="e76c9-141">The writer session state memory is a limited resource and writers must eventually reuse session states.</span></span> <span data-ttu-id="e76c9-142">Este paso marca el estado de la sesión de copia de seguridad del escritor como completado e informa a VSS de que esta ranura de sesión de copia de seguridad se puede volver a usar en una operación de copia de seguridad posterior.</span><span class="sxs-lookup"><span data-stu-id="e76c9-142">This step marks the writer’s backup session state as completed and notifies VSS that this backup session slot can be reused by a subsequent backup operation.</span></span>

## <a name="requester-actions-during-backup-of-files"></a><span data-ttu-id="e76c9-143">Acciones del solicitante durante la copia de seguridad de archivos</span><span class="sxs-lookup"><span data-stu-id="e76c9-143">Requester Actions during Backup of Files</span></span>

<span data-ttu-id="e76c9-144">Como se indicó en [información general de la fase de detección de copias de seguridad](overview-of-the-backup-discovery-phase.md), no debe generar la lista real de archivos de los que se realizará una copia de seguridad hasta que se haya completado la instantánea.</span><span class="sxs-lookup"><span data-stu-id="e76c9-144">As noted in [Overview of the Backup Discovery Phase](overview-of-the-backup-discovery-phase.md), you should not generate the actual list of files to be backed up until the shadow copy has completed.</span></span>

<span data-ttu-id="e76c9-145">El [*objeto de dispositivo*](vssgloss-d.md) correspondiente a la instantánea de un volumen determinado se usa para obtener acceso a los archivos del volumen de instantáneas una vez que se ha completado la instantánea.</span><span class="sxs-lookup"><span data-stu-id="e76c9-145">The [*device object*](vssgloss-d.md) corresponding to the shadow copy of a given volume is used to get access to files on the shadow copied volume once the shadow copy has completed.</span></span> <span data-ttu-id="e76c9-146">El objeto de dispositivo se obtiene del objeto de [**\_ \_ prop de instantáneas de VSS**](/windows/desktop/api/Vss/ns-vss-vss_snapshot_prop) devuelto por [**IVssBackupComponents:: GetSnapshotProperties**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getsnapshotproperties).</span><span class="sxs-lookup"><span data-stu-id="e76c9-146">The device object is obtained from the [**VSS\_SNAPSHOT\_PROP**](/windows/desktop/api/Vss/ns-vss-vss_snapshot_prop) object returned by [**IVssBackupComponents::GetSnapshotProperties**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getsnapshotproperties).</span></span> <span data-ttu-id="e76c9-147">Cada instantánea de un conjunto de instantáneas tendrá su propio objeto de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e76c9-147">Each shadow copy of a shadow copy set will have its own device object.</span></span>

<span data-ttu-id="e76c9-148">El objeto de dispositivo y las rutas de acceso obtenidas a partir de las especificaciones de los documentos de metadatos de escritura se usan para seleccionar archivos para copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="e76c9-148">The device object and the paths obtained from the Writer Metadata Document specifications of components are then used to select files for backup.</span></span> <span data-ttu-id="e76c9-149">Vea [acceso del solicitante a los datos de copia sombra](requestor-access-to-shadow-copied-data.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="e76c9-149">See [Requester Access to Shadow Copied Data](requestor-access-to-shadow-copied-data.md) for more information.</span></span>

<span data-ttu-id="e76c9-150">Los archivos que se incluirán en la lista de copia de seguridad dependen de la naturaleza de la copia de seguridad determinada, tras la selección de componentes [*para la copia de seguridad*](vssgloss-s.md)y la estructura de ruta de acceso lógica del escritor (vea [trabajar con la selección de copias de seguridad](working-with-selectability-for-backup.md)).</span><span class="sxs-lookup"><span data-stu-id="e76c9-150">Which files will be included in the backup list depends on the nature of the particular backup, upon component [*selectability for backup*](vssgloss-s.md), and the logical path structure of the writer (see [Working with Selectability for Backup](working-with-selectability-for-backup.md)).</span></span>

<span data-ttu-id="e76c9-151">Además de los archivos especificados en los componentes, un escritor determinado también puede tener archivos excluidos explícitamente.</span><span class="sxs-lookup"><span data-stu-id="e76c9-151">In addition to files specified in the components, a given writer may also have explicitly excluded files.</span></span> <span data-ttu-id="e76c9-152">La exclusión de archivos debe respetarse siempre, independientemente de los componentes seleccionados.</span><span class="sxs-lookup"><span data-stu-id="e76c9-152">File exclusion must always be respected, regardless of which components are selected.</span></span>

<span data-ttu-id="e76c9-153">También como se indicó en [información general de la fase de detección de copias de seguridad](overview-of-the-backup-discovery-phase.md), puede aparecer una carpeta montada o un punto de reanálisis en una instantánea y se puede realizar una copia de seguridad de ella.</span><span class="sxs-lookup"><span data-stu-id="e76c9-153">Also as noted in [Overview of the Backup Discovery Phase](overview-of-the-backup-discovery-phase.md), a mounted folder or reparse point can appear in a shadow copy and can be backed up.</span></span> <span data-ttu-id="e76c9-154">Sin embargo, no se puede atravesar una carpeta montada o un punto de reanálisis en el volumen de copia sombra (vea [trabajar con carpetas montadas y puntos de análisis](working-with-reparse-and-mount-points.md)).</span><span class="sxs-lookup"><span data-stu-id="e76c9-154">However, a mounted folder or reparse point cannot be traversed on the shadow-copied volume (see [Working with Mounted Folders and Reparse Points](working-with-reparse-and-mount-points.md)).</span></span>

<span data-ttu-id="e76c9-155">También se debe tener cuidado durante una operación de copia de seguridad, si la [*ruta de acceso alternativa*](vssgloss-a.md) devuelta por [**IVssWMFiledesc:: GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) no está en blanco.</span><span class="sxs-lookup"><span data-stu-id="e76c9-155">Care should also be taken during a backup operation, if the [*alternate path*](vssgloss-a.md) returned by [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation) is not blank.</span></span> <span data-ttu-id="e76c9-156">Una ruta de acceso alternativa difiere de una [*asignación de ubicación alternativa*](vssgloss-a.md) en que solo se usa durante las copias de seguridad, mientras que una asignación de ubicación alternativa se usa solo durante las restauraciones.</span><span class="sxs-lookup"><span data-stu-id="e76c9-156">An alternate path differs from an [*alternate location mapping*](vssgloss-a.md) in that it is used only during backups, while an alternate location mapping is used only during restores.</span></span>

<span data-ttu-id="e76c9-157">En este caso, no se realizará una copia de seguridad de los datos desde su ubicación normal (indicada por [**IVssWMFiledesc:: GetPath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath)), sino desde la ubicación devuelta por [**IVssWMFiledesc:: GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation).</span><span class="sxs-lookup"><span data-stu-id="e76c9-157">In this case, the data is not to be backed up from its normal location (indicated by [**IVssWMFiledesc::GetPath**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getpath)), but from the location returned by [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation).</span></span> <span data-ttu-id="e76c9-158">En la restauración, el archivo se debe devolver a su ubicación normal.</span><span class="sxs-lookup"><span data-stu-id="e76c9-158">On restore, the file should be returned to its normal location.</span></span> <span data-ttu-id="e76c9-159">Vea [ubicaciones de copia de seguridad y restauración no predeterminadas](non-default-backup-and-restore-locations.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="e76c9-159">See [Non-Default Backup and Restore Locations](non-default-backup-and-restore-locations.md) for more information.</span></span>

<span data-ttu-id="e76c9-160">VSS no impone restricciones en el mecanismo real de copia de seguridad de datos en un medio de almacenamiento ni en la elección de ese medio.</span><span class="sxs-lookup"><span data-stu-id="e76c9-160">VSS places no restrictions on the actual mechanism of backing up data to a storage medium or the choice of that medium.</span></span> <span data-ttu-id="e76c9-161">Sin embargo, se recomienda que los archivos de cada componente de cada [*instancia del escritor*](vssgloss-w.md) se procesen como una unidad.</span><span class="sxs-lookup"><span data-stu-id="e76c9-161">However, it is recommended that the files of each component of each [*writer instance*](vssgloss-w.md) be processed as a unit.</span></span> <span data-ttu-id="e76c9-162">Vea [generar un conjunto de copia de seguridad](generating-a-backup-set.md) para obtener una explicación de los procedimientos recomendados para generar la lista de archivos de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="e76c9-162">See [Generating A Backup Set](generating-a-backup-set.md) for a discussion of best practices in generating the backup file list.</span></span>

<span data-ttu-id="e76c9-163">El éxito o el error de la copia de seguridad de cualquiera de los archivos administrados por un componente determinado y, si define un [*conjunto de componentes*](vssgloss-c.md), sus [*subcomponentes*](vssgloss-s.md) de una instancia de escritor determinada deben conservarse en el documento de componentes de copia de seguridad llamando a [**IVssBackupComponents:: SetBackupSucceeded**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupsucceeded).</span><span class="sxs-lookup"><span data-stu-id="e76c9-163">The success or failure of backing up any of the files managed by a given component and (if it defines a [*component set*](vssgloss-c.md)) its [*subcomponents*](vssgloss-s.md) for a given writer instance should be preserved in the Backup Components Document by calling [**IVssBackupComponents::SetBackupSucceeded**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupsucceeded).</span></span> <span data-ttu-id="e76c9-164">Si no se puede realizar una copia de seguridad de un archivo administrado por un componente o un conjunto de componentes, se dice que se produce un error en todo el componente.</span><span class="sxs-lookup"><span data-stu-id="e76c9-164">If any file managed by a component or component set fails to back up, the entire component is said to fail.</span></span> <span data-ttu-id="e76c9-165">Siempre se debe registrar la información exacta sobre el archivo del que no se pudo realizar la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="e76c9-165">Exact information about which file failed to back up should always be logged.</span></span>

<span data-ttu-id="e76c9-166">Es posible que los desarrolladores le resulten útiles para almacenar un registro en el medio de copia de seguridad del que se realizan copias de seguridad de los archivos, los componentes y conjuntos de componentes de los que eran miembros, su especificación y sus rutas de acceso originales.</span><span class="sxs-lookup"><span data-stu-id="e76c9-166">Developers may find it helpful to store a record on the backup media of which files are backed up, the components and component set they were a member of, their specification, and what their original paths were.</span></span> <span data-ttu-id="e76c9-167">También puede ser útil almacenar información, como la definición de componente de cada escritor.</span><span class="sxs-lookup"><span data-stu-id="e76c9-167">It may also be useful to store information such as each writer's component definition.</span></span> <span data-ttu-id="e76c9-168">Esto puede hacer que la operación de recuperación sea más sencilla.</span><span class="sxs-lookup"><span data-stu-id="e76c9-168">Doing this may make the retrieval operation simpler.</span></span> <span data-ttu-id="e76c9-169">Sin embargo, estos detalles se dejan en el desarrollador del solicitante.</span><span class="sxs-lookup"><span data-stu-id="e76c9-169">However, such details are left to the requester developer.</span></span>

<span data-ttu-id="e76c9-170">Dado que los escritores pueden modificar el documento de componentes de copia de seguridad mientras controlan el evento de [**instantáneas**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot) que genera la llamada del solicitante a [**IVssBackupComponents::D Osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), el documento componentes de copia de seguridad no debe guardarse hasta que se haya completado la llamada asincrónica.</span><span class="sxs-lookup"><span data-stu-id="e76c9-170">Because writers can modify the Backup Components Document while handling the [**PostSnapshot**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostsnapshot) event generated by the requester's call to [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset), the Backup Components Document should not be saved until after that asynchronous call has completed.</span></span>

<span data-ttu-id="e76c9-171">Aunque puede tener lugar antes, esto también es un momento conveniente para guardar el documento de metadatos del escritor.</span><span class="sxs-lookup"><span data-stu-id="e76c9-171">Although it may take place earlier, this is also a convenient time to save the Writer Metadata Document.</span></span>

<span data-ttu-id="e76c9-172">Es muy importante que el documento componentes de copia de seguridad y los documentos de metadatos del escritor se conserven mediante [**IVssBackupComponents:: SaveAsXML**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-saveasxml) y [**IVssExamineWriterMetadata:: SaveAsXML**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-saveasxml).</span><span class="sxs-lookup"><span data-stu-id="e76c9-172">It is very important that both the Backup Components Document and the Writer Metadata Documents be preserved using [**IVssBackupComponents::SaveAsXML**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-saveasxml) and [**IVssExamineWriterMetadata::SaveAsXML**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-saveasxml).</span></span> <span data-ttu-id="e76c9-173">Si no es así, no será posible usar VSS durante la restauración de archivos.</span><span class="sxs-lookup"><span data-stu-id="e76c9-173">If they are not, it will not be possible to make use of VSS during file restoration.</span></span>

<span data-ttu-id="e76c9-174">Además de almacenar los metadatos originales, algunas aplicaciones de copia de seguridad pueden resultar útiles para guardar una copia de su propia lista de archivos (en su propio formato optimizado), y su escritor, componente, procedimiento de restauración y información de ubicación asociados, en el medio de copia de seguridad para su recuperación posterior.</span><span class="sxs-lookup"><span data-stu-id="e76c9-174">In addition to storing the original metadata, some backup applications may find it useful to save a copy of their own list of the files (in their own optimized format)—and their associated writer, component, restore procedure, and location information—to the backup media for later retrieval.</span></span> <span data-ttu-id="e76c9-175">Esta lista se puede usar para evitar algunos de los análisis y la comparación de los documentos de metadatos del escritor y los documentos de componentes de copia de seguridad durante la restauración.</span><span class="sxs-lookup"><span data-stu-id="e76c9-175">Such a list can be used to avoid some of the parsing and comparing of Writer Metadata Documents and the Backup Component Documents during restore.</span></span>

<span data-ttu-id="e76c9-176">Los volúmenes de los que se realiza una copia de seguridad pueden tener datos no administrados por escritores de VSS.</span><span class="sxs-lookup"><span data-stu-id="e76c9-176">Volumes being backed up may have data that is not managed by VSS writers.</span></span> <span data-ttu-id="e76c9-177">Se puede realizar una copia de seguridad de estos datos desde el volumen de instantáneas, donde estará en un [*estado coherente con el bloqueo*](vssgloss-c.md).</span><span class="sxs-lookup"><span data-stu-id="e76c9-177">This data can and should be backed up from the shadow copied volume, where it will be in a [*crash-consistent state*](vssgloss-c.md).</span></span> <span data-ttu-id="e76c9-178">Consulte [copias de seguridad sin participación del escritor](backups-without-writer-participation.md) para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="e76c9-178">See [Backups without Writer Participation](backups-without-writer-participation.md) for more information.</span></span>

 

 




