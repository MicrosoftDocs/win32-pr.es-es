---
title: Archivos compuestos asincrónicos
description: Los archivos compuestos asincrónicos, la implementación proporcionada por el sistema de almacenamiento asincrónico, permiten la descarga eficaz de archivos compuestos desde Internet en general y la web en particular.
ms.assetid: 6cad074e-07a8-434f-a402-e29cb66a1a18
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 04de2162b50283b12bc8deed6ec908d92e7584d7
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104421191"
---
# <a name="asynchronous-compound-files"></a><span data-ttu-id="dddc4-103">Archivos compuestos asincrónicos</span><span class="sxs-lookup"><span data-stu-id="dddc4-103">Asynchronous Compound Files</span></span>

<span data-ttu-id="dddc4-104">Los archivos compuestos asincrónicos, la implementación proporcionada por el sistema de almacenamiento asincrónico, permiten la descarga eficaz de archivos compuestos desde Internet en general y la web en particular.</span><span class="sxs-lookup"><span data-stu-id="dddc4-104">Asynchronous Compound Files, the system-provided implementation of asynchronous storage, enables the efficient downloading of compound files from the Internet in general and the Web in particular.</span></span> <span data-ttu-id="dddc4-105">En el diagrama siguiente se muestra la arquitectura básica de archivos compuestos asíncronos.</span><span class="sxs-lookup"><span data-stu-id="dddc4-105">The basic architecture of Asynchronous Compound Files is shown in the following diagram.</span></span>

![arquitectura básica de archivos compuestos asíncronos](images/asy-stor.png)

<span data-ttu-id="dddc4-107">La implementación asincrónica de archivos compuestos puede trabajar con nuevos tipos de moniker asincrónicos que entienden los protocolos de Internet y pueden enlazarse a un objeto identificado por una dirección URL.</span><span class="sxs-lookup"><span data-stu-id="dddc4-107">The Asynchronous Compound Files implementation can work with new asynchronous moniker types that understand Internet protocols and can bind to an object identified by a URL.</span></span> <span data-ttu-id="dddc4-108">Este tipo de moniker devolvería un puntero [**IStream**](/windows/desktop/api/Objidl/nn-objidl-istream) o [**IStorage**](/windows/desktop/api/Objidl/nn-objidl-istorage) asincrónico de la llamada del cliente a [**IMoniker:: BindToStorage**](/windows/win32/api/objidl/nf-objidl-imoniker-bindtostorage).</span><span class="sxs-lookup"><span data-stu-id="dddc4-108">Such a moniker would return an asynchronous [**IStream**](/windows/desktop/api/Objidl/nn-objidl-istream) or [**IStorage**](/windows/desktop/api/Objidl/nn-objidl-istorage) pointer from the client's call to [**IMoniker::BindToStorage**](/windows/win32/api/objidl/nf-objidl-imoniker-bindtostorage).</span></span>

<span data-ttu-id="dddc4-109">En general, los archivos compuestos se implementan sobre un objeto de matriz de bytes, una abstracción de un archivo que representa los datos de un objeto como una matriz de bytes plana.</span><span class="sxs-lookup"><span data-stu-id="dddc4-109">Compound Files in general are implemented on top of a byte array object, an abstraction of a file that represents an object's data as a flat byte array.</span></span> <span data-ttu-id="dddc4-110">El objeto de matriz de bytes expone su funcionalidad a través de la interfaz [**ILockBytes**](/windows/desktop/api/Objidl/nn-objidl-ilockbytes) .</span><span class="sxs-lookup"><span data-stu-id="dddc4-110">The byte array object exposes its functionality through the [**ILockBytes**](/windows/desktop/api/Objidl/nn-objidl-ilockbytes) interface.</span></span> <span data-ttu-id="dddc4-111">Si una matriz de bytes admite el almacenamiento asincrónico sin bloqueos, devuelve E \_ pendiente a la implementación de archivo compuesto, que a su vez propaga el error de vuelta al autor de la llamada.</span><span class="sxs-lookup"><span data-stu-id="dddc4-111">If a byte array supports nonblocking asynchronous storage, it returns E\_PENDING to the compound-file implementation, which in turn propagates the error back to the caller.</span></span>

<span data-ttu-id="dddc4-112">Para realizar un seguimiento de los datos disponibles durante una descarga, una matriz de bytes que admite el almacenamiento asincrónico expone la interfaz [**IFillLockBytes**](/windows/desktop/api/Objidl/nn-objidl-ifilllockbytes) en un objeto contenedor proporcionado por el sistema específicamente para este fin.</span><span class="sxs-lookup"><span data-stu-id="dddc4-112">To keep track of the data available during a download, a byte array that supports asynchronous storage exposes the [**IFillLockBytes**](/windows/desktop/api/Objidl/nn-objidl-ifilllockbytes) interface on a wrapper object provided by the system specifically for this purpose.</span></span> <span data-ttu-id="dddc4-113">El código de descarga proporcionado por un moniker asincrónico llama a esta interfaz para rellenar la matriz de bytes de forma asincrónica, ya que los datos están disponibles.</span><span class="sxs-lookup"><span data-stu-id="dddc4-113">The downloading code provided by an asynchronous moniker calls this interface to fill the byte array asynchronously, as data is available.</span></span> <span data-ttu-id="dddc4-114">El objeto contenedor también expone una interfaz **ILockBytes** , que la implementación de archivos compuestos asincrónicos utiliza para leer y escribir datos de y en la matriz.</span><span class="sxs-lookup"><span data-stu-id="dddc4-114">The wrapper object also exposes an **ILockBytes** interface, which the Asynchronous Compound Files implementation uses to read and write data from and to the array.</span></span>

<span data-ttu-id="dddc4-115">Los objetos de flujo y almacenamiento asincrónicos proporcionan un punto de conexión para la interfaz [**IProgressNotify**](/windows/win32/api/objidl/nn-objidl-iprogressnotify) , que se implementa mediante el código de descarga del moniker asincrónico.</span><span class="sxs-lookup"><span data-stu-id="dddc4-115">Asynchronous storage and stream objects provide a connection point for the [**IProgressNotify**](/windows/win32/api/objidl/nn-objidl-iprogressnotify) interface, which is implemented by the asynchronous moniker's downloading code.</span></span> <span data-ttu-id="dddc4-116">La implementación asincrónica de archivos compuestos llama a **IProgressNotify** para proporcionar al descargador información sobre el estado de la operación de descarga.</span><span class="sxs-lookup"><span data-stu-id="dddc4-116">The Asynchronous Compound Files implementation calls **IProgressNotify** to provide the downloader with information about the status of the downloading operation.</span></span>

 

 