---
title: Notificar el índice de cambios (características heredadas del entorno de Windows)
description: Con Microsoft Windows Desktop Search (WDS) 2,6, los controladores de protocolo para un almacén de datos determinado pueden indicar al indexador de WDS Cuándo han cambiado los datos de su almacén.
ms.assetid: 700b1707-dd11-4a30-8f00-5c4aae1173ff
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6021cfe5cd7061a3d3255e56d08e665a6caedf03
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/10/2020
ms.locfileid: "104274506"
---
# <a name="notifying-the-index-of-changes-legacy-windows-environment-features"></a><span data-ttu-id="422d9-103">Notificar el índice de cambios (características heredadas del entorno de Windows)</span><span class="sxs-lookup"><span data-stu-id="422d9-103">Notifying the Index of Changes (Legacy Windows Environment Features)</span></span>

> [!NOTE]
> <span data-ttu-id="422d9-104">Windows Desktop Search 2. x es una tecnología obsoleta que estaba disponible originalmente como complemento para Windows XP y Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="422d9-104">Windows Desktop Search 2.x is an obsolete technology that was originally available as an add-in for Windows XP and Windows Server 2003.</span></span> <span data-ttu-id="422d9-105">En versiones posteriores, use la [búsqueda de Windows](../search/-search-3x-wds-overview.md) en su lugar.</span><span class="sxs-lookup"><span data-stu-id="422d9-105">On later releases, use [Windows Search](../search/-search-3x-wds-overview.md) instead.</span></span>

<span data-ttu-id="422d9-106">Con Microsoft Windows Desktop Search (WDS) 2,6, los controladores de protocolo para un almacén de datos determinado pueden indicar al indexador de WDS Cuándo han cambiado los datos de su almacén.</span><span class="sxs-lookup"><span data-stu-id="422d9-106">With Microsoft Windows Desktop Search (WDS) 2.6, protocol handlers for a given data store can tell the WDS Indexer when data in their store has changed.</span></span> <span data-ttu-id="422d9-107">Esto mejora el rendimiento, ya que garantiza que el indexador no rastrea todo el almacén en los índices incrementales.</span><span class="sxs-lookup"><span data-stu-id="422d9-107">This improves performance by ensuring the Indexer doesn't crawl the entire store on incremental indexes.</span></span> <span data-ttu-id="422d9-108">Con las API de notificación, los controladores de protocolo pueden notificar al indizador que un elemento se ha cambiado o eliminado, y pueden agregar ámbitos a la cola de rastreo de las direcciones URL que requieren indexación.</span><span class="sxs-lookup"><span data-stu-id="422d9-108">Using notification APIs, protocol handlers can notify the Indexer that an item has been moved or deleted, and they can add scopes to the WDS Indexer's crawl queue of URLs requiring indexing.</span></span> <span data-ttu-id="422d9-109">La notificación es útil para aplicaciones como el correo electrónico, donde el controlador de protocolo supervisa el almacén y notifica al indexador que los elementos han cambiado y requieren indexación.</span><span class="sxs-lookup"><span data-stu-id="422d9-109">Notification is helpful for applications such as email, where the protocol handler monitors the store and notifies the Indexer that items have changed and require indexing.</span></span>

## <a name="isearchitemschangedsink"></a><span data-ttu-id="422d9-110">ISearchItemsChangedSink</span><span class="sxs-lookup"><span data-stu-id="422d9-110">ISearchItemsChangedSink</span></span>

<span data-ttu-id="422d9-111">Los controladores de protocolo notifican al indexador los cambios a través de la interfaz [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) .</span><span class="sxs-lookup"><span data-stu-id="422d9-111">Protocol handlers notify the Indexer of changes through the [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) interface.</span></span> <span data-ttu-id="422d9-112">La información sobre los cambios de datos se debe recopilar en los \_ \_ Structs de cambio de elementos de búsqueda y en el \_ tipo \_ de búsqueda de \_ tipos de enumeración de cambios y, a continuación, comunicarse con el indizador mediante el método **OnItemsChanged** de la interfaz **ISearchItemsChangedSink** .</span><span class="sxs-lookup"><span data-stu-id="422d9-112">Information about data changes should be collected in SEARCH\_ITEM\_CHANGE structs and SEARCH\_KIND\_OF\_CHANGE enumeration types and then communicated to the Indexer through the **OnItemsChanged** method of the **ISearchItemsChangedSink** interface.</span></span>

<span data-ttu-id="422d9-113">Para tener acceso a esta interfaz, los controladores de protocolo personalizados primero deben crear instancias de un objeto [**ISearchManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchmanager) para obtener acceso al objeto [**ISearchCatalogManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchcatalogmanager) .</span><span class="sxs-lookup"><span data-stu-id="422d9-113">To access this interface, a custom protocol handlers must first instantiate an [**ISearchManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchmanager) object to gain access to the [**ISearchCatalogManager**](/windows/desktop/api/searchapi/nn-searchapi-isearchcatalogmanager) object.</span></span> <span data-ttu-id="422d9-114">Desde allí, se pueden crear instancias de un objeto [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) y notificar al indexador los cambios de los datos.</span><span class="sxs-lookup"><span data-stu-id="422d9-114">From there, one can instantiate an [**ISearchItemsChangedSink**](/windows/desktop/api/searchapi/nn-searchapi-isearchitemschangedsink) object and notify the Indexer of the data changes.</span></span>

<span data-ttu-id="422d9-115">El método OnItemsChanged permite recopilar y comunicar los cambios de datos en el almacén de datos del cliente para iniciar la indexación.</span><span class="sxs-lookup"><span data-stu-id="422d9-115">The OnItemsChanged method lets you collect and communicate data changes to your customer data store to initiate indexing.</span></span>



| <span data-ttu-id="422d9-116">Dirección</span><span class="sxs-lookup"><span data-stu-id="422d9-116">Direction</span></span> | <span data-ttu-id="422d9-117">Variable</span><span class="sxs-lookup"><span data-stu-id="422d9-117">Variable</span></span>              | <span data-ttu-id="422d9-118">Descripción</span><span class="sxs-lookup"><span data-stu-id="422d9-118">Description</span></span>                                                              |
|-----------|-----------------------|--------------------------------------------------------------------------|
| <span data-ttu-id="422d9-119">En</span><span class="sxs-lookup"><span data-stu-id="422d9-119">In</span></span>        | <span data-ttu-id="422d9-120">dwNumberofChanges</span><span class="sxs-lookup"><span data-stu-id="422d9-120">dwNumberofChanges</span></span>     | <span data-ttu-id="422d9-121">Número total de cambios en la notificación.</span><span class="sxs-lookup"><span data-stu-id="422d9-121">Total number of changes in the notification.</span></span>                             |
| <span data-ttu-id="422d9-122">En</span><span class="sxs-lookup"><span data-stu-id="422d9-122">In</span></span>        | <span data-ttu-id="422d9-123">DataChangeEntries\[\]</span><span class="sxs-lookup"><span data-stu-id="422d9-123">DataChangeEntries\[\]</span></span> | <span data-ttu-id="422d9-124">Todas las notificaciones de cambios en una matriz de elementos de búsqueda \_ \_ cambian estructuras.</span><span class="sxs-lookup"><span data-stu-id="422d9-124">All change notifications in an array of SEARCH\_ITEM\_CHANGE structures.</span></span> |
| <span data-ttu-id="422d9-125">Fuera</span><span class="sxs-lookup"><span data-stu-id="422d9-125">Out</span></span>       | <span data-ttu-id="422d9-126">dwBatchId</span><span class="sxs-lookup"><span data-stu-id="422d9-126">dwBatchId</span></span>             | <span data-ttu-id="422d9-127">IDENTIFICADOR del lote que se devolverá con errores.</span><span class="sxs-lookup"><span data-stu-id="422d9-127">The batch ID that will be passed back with errors.</span></span>                       |
| <span data-ttu-id="422d9-128">Fuera</span><span class="sxs-lookup"><span data-stu-id="422d9-128">Out</span></span>       | <span data-ttu-id="422d9-129">hrCompletionCodes\[\]</span><span class="sxs-lookup"><span data-stu-id="422d9-129">hrCompletionCodes\[\]</span></span> | <span data-ttu-id="422d9-130">Indica si se aceptó cada dirección URL para la indización.</span><span class="sxs-lookup"><span data-stu-id="422d9-130">Indicates whether each URL was accepted for indexing.</span></span>                    |



 

<span data-ttu-id="422d9-131">La \_ \_ estructura de cambio del elemento de búsqueda identifica el tipo de cambio que se ha producido, así como la dirección URL actual del elemento y la dirección URL anterior, si procede.</span><span class="sxs-lookup"><span data-stu-id="422d9-131">The SEARCH\_ITEM\_CHANGE structure identifies the kind of change that occurred as well as the item's current URL and previous URL, if applicable.</span></span> <span data-ttu-id="422d9-132">La estructura se define de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="422d9-132">The structure is defined as follows:</span></span>



| <span data-ttu-id="422d9-133">Nombre de la propiedad</span><span class="sxs-lookup"><span data-stu-id="422d9-133">Property Name</span></span> | <span data-ttu-id="422d9-134">Tipo de propiedad</span><span class="sxs-lookup"><span data-stu-id="422d9-134">Property Type</span></span>                  | <span data-ttu-id="422d9-135">Descripción</span><span class="sxs-lookup"><span data-stu-id="422d9-135">Description</span></span>                                                                |
|---------------|--------------------------------|----------------------------------------------------------------------------|
| <span data-ttu-id="422d9-136">Cambio</span><span class="sxs-lookup"><span data-stu-id="422d9-136">Change</span></span>        | <span data-ttu-id="422d9-137">\_tipo \_ de búsqueda de \_ cambio</span><span class="sxs-lookup"><span data-stu-id="422d9-137">SEARCH\_KIND\_OF\_CHANGE</span></span>       | <span data-ttu-id="422d9-138">El tipo de cambio que se notifica.</span><span class="sxs-lookup"><span data-stu-id="422d9-138">The type of change that is being notified.</span></span>                                 |
| <span data-ttu-id="422d9-139">URL</span><span class="sxs-lookup"><span data-stu-id="422d9-139">URL</span></span>           | <span data-ttu-id="422d9-140">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="422d9-140">LPWSTR</span></span>                         | <span data-ttu-id="422d9-141">Dirección URL del objeto que ha cambiado.</span><span class="sxs-lookup"><span data-stu-id="422d9-141">The URL for the object that has changed.</span></span>                                   |
| <span data-ttu-id="422d9-142">OldURL</span><span class="sxs-lookup"><span data-stu-id="422d9-142">OldURL</span></span>        | <span data-ttu-id="422d9-143">LPWSTR</span><span class="sxs-lookup"><span data-stu-id="422d9-143">LPWSTR</span></span>                         | <span data-ttu-id="422d9-144">Si la notificación es un movimiento, se proporciona la dirección URL anterior y debe ser única.</span><span class="sxs-lookup"><span data-stu-id="422d9-144">If the notification is a move, the old URL is provided and must be unique.</span></span> |
| <span data-ttu-id="422d9-145">Prioridad</span><span class="sxs-lookup"><span data-stu-id="422d9-145">Priority</span></span>      | <span data-ttu-id="422d9-146">prioridad de la notificación de búsqueda \_ \_</span><span class="sxs-lookup"><span data-stu-id="422d9-146">SEARCH\_NOTIFICATION\_PRIORITY</span></span> | <span data-ttu-id="422d9-147">Prioridad del cambio.</span><span class="sxs-lookup"><span data-stu-id="422d9-147">The priority of the change.</span></span>                                                |



 

<span data-ttu-id="422d9-148">El \_ tipo \_ de búsqueda de la \_ enumeración de cambios se define de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="422d9-148">The SEARCH\_KIND\_OF\_CHANGE enumeration is defined as follows:</span></span>



| <span data-ttu-id="422d9-149">Valor de enumeración</span><span class="sxs-lookup"><span data-stu-id="422d9-149">Enum Value</span></span>                           | <span data-ttu-id="422d9-150">Value</span><span class="sxs-lookup"><span data-stu-id="422d9-150">Value</span></span>   | <span data-ttu-id="422d9-151">Descripción</span><span class="sxs-lookup"><span data-stu-id="422d9-151">Description</span></span>                                                                                     |
|--------------------------------------|---------|-------------------------------------------------------------------------------------------------|
| <span data-ttu-id="422d9-152">BUSCAR \_ cambiar \_ Agregar</span><span class="sxs-lookup"><span data-stu-id="422d9-152">SEARCH\_CHANGE\_ADD</span></span>                  | <span data-ttu-id="422d9-153">0</span><span class="sxs-lookup"><span data-stu-id="422d9-153">0</span></span>       | <span data-ttu-id="422d9-154">La notificación es para una dirección URL adicional.</span><span class="sxs-lookup"><span data-stu-id="422d9-154">The notification is for an additional URL.</span></span>                                                      |
| <span data-ttu-id="422d9-155">BUSCAR \_ cambiar \_ eliminar</span><span class="sxs-lookup"><span data-stu-id="422d9-155">SEARCH\_CHANGE\_DELETE</span></span>               | <span data-ttu-id="422d9-156">1</span><span class="sxs-lookup"><span data-stu-id="422d9-156">1</span></span>       | <span data-ttu-id="422d9-157">La notificación es para la eliminación de una dirección URL.</span><span class="sxs-lookup"><span data-stu-id="422d9-157">The notification is for the deletion of a URL.</span></span>                                                  |
| <span data-ttu-id="422d9-158">BUSCAR \_ cambiar \_ modificar</span><span class="sxs-lookup"><span data-stu-id="422d9-158">SEARCH\_CHANGE\_MODIFY</span></span>               | <span data-ttu-id="422d9-159">2</span><span class="sxs-lookup"><span data-stu-id="422d9-159">2</span></span>       | <span data-ttu-id="422d9-160">La notificación es que se ha modificado una dirección URL.</span><span class="sxs-lookup"><span data-stu-id="422d9-160">The notification is that a URL has been modified.</span></span>                                               |
| <span data-ttu-id="422d9-161">\_cambiar nombre de cambio de búsqueda \_ \_</span><span class="sxs-lookup"><span data-stu-id="422d9-161">SEARCH\_CHANGE\_MOVE\_RENAME</span></span>         | <span data-ttu-id="422d9-162">3</span><span class="sxs-lookup"><span data-stu-id="422d9-162">3</span></span>       | <span data-ttu-id="422d9-163">La notificación es para el movimiento y el cambio de nombre de un objeto a una nueva dirección URL.</span><span class="sxs-lookup"><span data-stu-id="422d9-163">The notification is for the move and rename of an object to a new URL.</span></span>                          |
| <span data-ttu-id="422d9-164">Buscar en el directorio de semántica de \_ cambios \_ \_</span><span class="sxs-lookup"><span data-stu-id="422d9-164">SEARCH\_CHANGE\_SEMANTICS\_DIRECTORY</span></span> | <span data-ttu-id="422d9-165">0x10000</span><span class="sxs-lookup"><span data-stu-id="422d9-165">0x10000</span></span> | <span data-ttu-id="422d9-166">La notificación es para una dirección URL de contenedor.</span><span class="sxs-lookup"><span data-stu-id="422d9-166">The notification is for a container URL.</span></span>                                                        |
| <span data-ttu-id="422d9-167">semántica de cambio de búsqueda \_ \_ \_ superficial</span><span class="sxs-lookup"><span data-stu-id="422d9-167">SEARCH\_CHANGE\_SEMANTICS\_SHALLOW</span></span>   | <span data-ttu-id="422d9-168">0x20000</span><span class="sxs-lookup"><span data-stu-id="422d9-168">0x20000</span></span> | <span data-ttu-id="422d9-169">La notificación es para una dirección URL de contenedor que solo debe tener indizadas sus propiedades de contenedor.</span><span class="sxs-lookup"><span data-stu-id="422d9-169">The notification is for a container URL that should only have its container properties indexed.</span></span> |
| <span data-ttu-id="422d9-170">seguridad de la semántica de cambios de búsqueda \_ \_ \_</span><span class="sxs-lookup"><span data-stu-id="422d9-170">SEARCH\_CHANGE\_SEMANTICS\_SECURITY</span></span>  | <span data-ttu-id="422d9-171">0x40000</span><span class="sxs-lookup"><span data-stu-id="422d9-171">0x40000</span></span> | <span data-ttu-id="422d9-172">La notificación es para una dirección URL o un contenedor que ha cambiado sus propiedades de seguridad.</span><span class="sxs-lookup"><span data-stu-id="422d9-172">The notification is for a URL or container URL that has had its security properties changed.</span></span>    |



 

<span data-ttu-id="422d9-173">La \_ enumeración prioridad de notificación de búsqueda \_ se define de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="422d9-173">The SEARCH\_NOTIFICATION\_PRIORITY enumeration is defined as follows:</span></span>



| <span data-ttu-id="422d9-174">Valor de enumeración</span><span class="sxs-lookup"><span data-stu-id="422d9-174">Enum Value</span></span>               | <span data-ttu-id="422d9-175">Value</span><span class="sxs-lookup"><span data-stu-id="422d9-175">Value</span></span> | <span data-ttu-id="422d9-176">Descripción</span><span class="sxs-lookup"><span data-stu-id="422d9-176">Description</span></span>                                                                                                                                                                    |
|--------------------------|-------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="422d9-177">\_prioridad normal de búsqueda \_</span><span class="sxs-lookup"><span data-stu-id="422d9-177">SEARCH\_NORMAL\_PRIORITY</span></span> | <span data-ttu-id="422d9-178">0</span><span class="sxs-lookup"><span data-stu-id="422d9-178">0</span></span>     | <span data-ttu-id="422d9-179">Solo se debe usar una prioridad normal al indizar la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="422d9-179">Only a normal priority should be used when indexing the URL.</span></span> <span data-ttu-id="422d9-180">Estas notificaciones se procesan antes de la indización incremental en segundo plano normal de los archivos y almacenes de un usuario.</span><span class="sxs-lookup"><span data-stu-id="422d9-180">These notifications are processed before the normal background incremental indexing of a user's files and stores.</span></span> |



 

 

 
