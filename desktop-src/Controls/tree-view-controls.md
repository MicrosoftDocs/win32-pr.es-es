---
title: Acerca de los controles Tree-View
description: Un control de vista de árbol es una ventana que muestra una lista jerárquica de elementos, como los encabezados de un documento, las entradas de un índice o los archivos y directorios de un disco.
ms.assetid: 10cc7949-dd77-412d-bad1-db8d8a049582
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df70a2d3c2f841b022930a07ee2f140ee5bfc8e3
ms.sourcegitcommit: 5f33645661bf8c825a7a2e73950b1f4ea0f1cd82
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/21/2020
ms.locfileid: "103995687"
---
# <a name="about-tree-view-controls"></a><span data-ttu-id="623da-103">Acerca de los controles Tree-View</span><span class="sxs-lookup"><span data-stu-id="623da-103">About Tree-View Controls</span></span>

<span data-ttu-id="623da-104">Un control de vista de árbol es una ventana que muestra una lista jerárquica de elementos, como los encabezados de un documento, las entradas de un índice o los archivos y directorios de un disco.</span><span class="sxs-lookup"><span data-stu-id="623da-104">A tree-view control is a window that displays a hierarchical list of items, such as the headings in a document, the entries in an index, or the files and directories on a disk.</span></span> <span data-ttu-id="623da-105">Cada elemento se compone de una etiqueta y una imagen de mapa de imágenes opcional, y cada elemento puede tener una lista de subelementos asociados.</span><span class="sxs-lookup"><span data-stu-id="623da-105">Each item consists of a label and an optional bitmapped image, and each item can have a list of subitems associated with it.</span></span> <span data-ttu-id="623da-106">Al hacer clic en un elemento, el usuario puede expandir o contraer la lista asociada de subelementos.</span><span class="sxs-lookup"><span data-stu-id="623da-106">By clicking an item, the user can expand or collapse the associated list of subitems.</span></span>

<span data-ttu-id="623da-107">En la ilustración siguiente se muestra un control de vista de árbol simple con un nodo raíz, un nodo expandido y un nodo contraído.</span><span class="sxs-lookup"><span data-stu-id="623da-107">The following illustration shows a simple tree-view control with a root node, an expanded node, and a collapsed node.</span></span> <span data-ttu-id="623da-108">El control usa un mapa de bits para el elemento seleccionado y otro mapa de bits para otros elementos.</span><span class="sxs-lookup"><span data-stu-id="623da-108">The control uses one bitmap for the selected item and another bitmap for other items.</span></span>

![captura de pantalla que muestra cinco nodos en una jerarquía; el texto de un nodo está seleccionado, pero los nodos no se vinculan entre sí por líneas](images/tv-simple.png)

<span data-ttu-id="623da-110">Después de crear un control de vista de árbol, se agregan, quitan, organizan o manipulan elementos mediante el envío de mensajes al control.</span><span class="sxs-lookup"><span data-stu-id="623da-110">After creating a tree-view control, you add, remove, arrange, or otherwise manipulate items by sending messages to the control.</span></span> <span data-ttu-id="623da-111">Cada mensaje tiene una o más macros correspondientes que puede usar en lugar de enviar el mensaje explícitamente.</span><span class="sxs-lookup"><span data-stu-id="623da-111">Each message has one or more corresponding macros that you can use instead of sending the message explicitly.</span></span>

<span data-ttu-id="623da-112">Los temas siguientes se describen en esta sección.</span><span class="sxs-lookup"><span data-stu-id="623da-112">The following topics are discussed in this section.</span></span>

-   [<span data-ttu-id="623da-113">Estilos de vista de árbol</span><span class="sxs-lookup"><span data-stu-id="623da-113">Tree-View Styles</span></span>](#tree-view-styles)
-   [<span data-ttu-id="623da-114">Elementos primarios y secundarios</span><span class="sxs-lookup"><span data-stu-id="623da-114">Parent and Child Items</span></span>](#parent-and-child-items)
-   [<span data-ttu-id="623da-115">Etiquetas de elemento</span><span class="sxs-lookup"><span data-stu-id="623da-115">Item Labels</span></span>](#item-labels)
-   [<span data-ttu-id="623da-116">Edición de etiquetas de vista de árbol</span><span class="sxs-lookup"><span data-stu-id="623da-116">Tree-View Label Editing</span></span>](#tree-view-label-editing)
-   [<span data-ttu-id="623da-117">Posición del elemento de vista de árbol</span><span class="sxs-lookup"><span data-stu-id="623da-117">Tree-View Item Position</span></span>](#tree-view-item-position)
-   [<span data-ttu-id="623da-118">Información general de los Estados de los elementos de vista de árbol</span><span class="sxs-lookup"><span data-stu-id="623da-118">Tree-View Item States Overview</span></span>](#tree-view-item-states-overview)
-   [<span data-ttu-id="623da-119">Selección de elementos</span><span class="sxs-lookup"><span data-stu-id="623da-119">Item Selection</span></span>](#item-selection)
-   [<span data-ttu-id="623da-120">Información del elemento</span><span class="sxs-lookup"><span data-stu-id="623da-120">Item Information</span></span>](#item-information)
-   [<span data-ttu-id="623da-121">Listas de imágenes de vista de árbol</span><span class="sxs-lookup"><span data-stu-id="623da-121">Tree-View Image Lists</span></span>](#tree-view-image-lists)
-   [<span data-ttu-id="623da-122">Operaciones de arrastrar y colocar</span><span class="sxs-lookup"><span data-stu-id="623da-122">Drag-and-Drop Operations</span></span>](#drag-and-drop-operations)
-   [<span data-ttu-id="623da-123">Mensajes de notificación del control de vista de árbol</span><span class="sxs-lookup"><span data-stu-id="623da-123">Tree-View Control Notification Messages</span></span>](#tree-view-control-notification-messages)
-   [<span data-ttu-id="623da-124">Procesamiento de mensajes de control de Tree-View predeterminado</span><span class="sxs-lookup"><span data-stu-id="623da-124">Default Tree-View Control Message Processing</span></span>](#default-tree-view-control-message-processing)
-   [<span data-ttu-id="623da-125">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="623da-125">Related topics</span></span>](#related-topics)

## <a name="tree-view-styles"></a><span data-ttu-id="623da-126">Estilos de Tree-View</span><span class="sxs-lookup"><span data-stu-id="623da-126">Tree-View Styles</span></span>

<span data-ttu-id="623da-127">Los estilos de vista de árbol rigen aspectos de la apariencia de un control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-127">Tree-view styles govern aspects of a tree-view control's appearance.</span></span> <span data-ttu-id="623da-128">Los estilos iniciales se establecen al crear el control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-128">You set the initial styles when you create the tree-view control.</span></span> <span data-ttu-id="623da-129">Puede recuperar y cambiar los estilos después de crear el control de vista de árbol mediante las funciones [**GetWindowLong**](/windows/desktop/api/winuser/nf-winuser-getwindowlonga) y [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) .</span><span class="sxs-lookup"><span data-stu-id="623da-129">You can retrieve and change the styles after creating the tree-view control by using the [**GetWindowLong**](/windows/desktop/api/winuser/nf-winuser-getwindowlonga) and [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga) functions.</span></span>

<span data-ttu-id="623da-130">El [**estilo \_ HASLINES de TV**](tree-view-control-window-styles.md) mejora la representación gráfica de la jerarquía de un control de vista de árbol mediante el dibujo de líneas que vinculan elementos secundarios a su elemento primario, tal como se muestra en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="623da-130">The [**TVS\_HASLINES**](tree-view-control-window-styles.md) style enhances the graphic representation of a tree-view control's hierarchy by drawing lines that link child items to their parent item, as shown in the following illustration.</span></span>

![captura de pantalla que muestra la organización anterior, pero con líneas que unen los nodos. la primera línea Desciende del nodo raíz](images/tv-haslines.png)

<span data-ttu-id="623da-132">Por sí solo, este estilo no dibuja líneas en la raíz de la jerarquía.</span><span class="sxs-lookup"><span data-stu-id="623da-132">By itself, this style does not draw lines at the root of the hierarchy.</span></span> <span data-ttu-id="623da-133">Para ello, debe combinar los estilos [**TV \_ HASLINES**](tree-view-control-window-styles.md) y [**TV \_ LINESATROOT**](tree-view-control-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-133">To do so, you need to combine the [**TVS\_HASLINES**](tree-view-control-window-styles.md) and [**TVS\_LINESATROOT**](tree-view-control-window-styles.md) styles.</span></span> <span data-ttu-id="623da-134">El resultado se muestra en la ilustración siguiente.</span><span class="sxs-lookup"><span data-stu-id="623da-134">The result is shown in the following illustration.</span></span>

![captura de pantalla que muestra la organización anterior, pero con una línea horizontal adicional que conduce al nodo raíz](images/tv-rootlines.png)

<span data-ttu-id="623da-136">El usuario puede expandir o contraer la lista de elementos secundarios de un elemento primario haciendo doble clic en el elemento primario.</span><span class="sxs-lookup"><span data-stu-id="623da-136">The user can expand or collapse a parent item's list of child items by double-clicking the parent item.</span></span> <span data-ttu-id="623da-137">Un control de vista de árbol con el estilo [**TV \_ HASBUTTONS**](tree-view-control-window-styles.md) agrega un botón al lado izquierdo de cada elemento primario.</span><span class="sxs-lookup"><span data-stu-id="623da-137">A tree-view control that has the [**TVS\_HASBUTTONS**](tree-view-control-window-styles.md) style adds a button to the left side of each parent item.</span></span> <span data-ttu-id="623da-138">El usuario puede hacer clic en el botón una vez en lugar de hacer doble clic en el elemento primario para expandir o contraer el elemento secundario.</span><span class="sxs-lookup"><span data-stu-id="623da-138">The user can click the button once instead of double-clicking the parent item to expand or collapse the child.</span></span> <span data-ttu-id="623da-139">**Televisores \_ HASBUTTONS** no agrega botones a los elementos de la raíz de la jerarquía.</span><span class="sxs-lookup"><span data-stu-id="623da-139">**TVS\_HASBUTTONS** does not add buttons to items at the root of the hierarchy.</span></span> <span data-ttu-id="623da-140">Para ello, debe combinar los [**televisores \_ HASLINES**](tree-view-control-window-styles.md), los [**televisores \_ LINESATROOT**](tree-view-control-window-styles.md)y los **televisores \_ HASBUTTONS**.</span><span class="sxs-lookup"><span data-stu-id="623da-140">To do so, you must combine [**TVS\_HASLINES**](tree-view-control-window-styles.md), [**TVS\_LINESATROOT**](tree-view-control-window-styles.md), and **TVS\_HASBUTTONS**.</span></span> <span data-ttu-id="623da-141">Esta combinación de estilos se muestra en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="623da-141">This combination of styles is shown in the following illustration.</span></span>

![captura de pantalla que muestra la organización anterior, pero con los botones de expansión/contracción en cada vértice de dos líneas](images/tv-hasbuttons.png)

<span data-ttu-id="623da-143">El [**estilo \_ casillas de televisores**](tree-view-control-window-styles.md) crea casillas junto a cada elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-143">The [**TVS\_CHECKBOXES**](tree-view-control-window-styles.md) style creates checkboxes next to each item.</span></span> <span data-ttu-id="623da-144">Si desea usar el estilo de casilla, debe establecer el estilo de **las \_ casillas de los televisores** (con [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga)) después de crear el control de vista de árbol y antes de rellenar el árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-144">If you want to use the checkbox style, you must set the **TVS\_CHECKBOXES** style (with [**SetWindowLong**](/windows/desktop/api/winuser/nf-winuser-setwindowlonga)) after you create the tree-view control and before you populate the tree.</span></span> <span data-ttu-id="623da-145">De lo contrario, las casillas podrían aparecer desactivadas, en función de los problemas de temporización.</span><span class="sxs-lookup"><span data-stu-id="623da-145">Otherwise, the checkboxes might appear unchecked, depending on timing issues.</span></span> <span data-ttu-id="623da-146">En la ilustración siguiente se muestra el estilo de la casilla.</span><span class="sxs-lookup"><span data-stu-id="623da-146">The following illustration shows the checkbox style.</span></span>

![captura de pantalla que muestra la organización anterior, pero con una casilla junto a cada nodo; dos de las casillas están seleccionadas](images/tv-haschecks.png)

<span data-ttu-id="623da-148">El [**estilo \_ FULLROWSELECT de los televisores**](tree-view-control-window-styles.md) hace que el resaltado de la selección se extienda sobre el ancho completo del control, no solo sobre el propio elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-148">The [**TVS\_FULLROWSELECT**](tree-view-control-window-styles.md) style causes the selection highlight to extend over the full width of the control, not just over the item itself.</span></span> <span data-ttu-id="623da-149">En la ilustración siguiente se muestra este estilo.</span><span class="sxs-lookup"><span data-stu-id="623da-149">The following illustration shows this style.</span></span>

![captura de pantalla que muestra la disposición original de cinco nodos sin líneas, pero el resaltado de la selección extiende el ancho completo del control](images/tv-fullrow.png)

<span data-ttu-id="623da-151">El [**estilo \_ EDITLABELS de los televisores**](tree-view-control-window-styles.md) permite al usuario editar las etiquetas de los elementos de la vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-151">The [**TVS\_EDITLABELS**](tree-view-control-window-styles.md) style makes it possible for the user to edit the labels of tree-view items.</span></span> <span data-ttu-id="623da-152">Para obtener más información sobre la edición de etiquetas, vea [edición de etiquetas de vista de árbol](#tree-view-label-editing).</span><span class="sxs-lookup"><span data-stu-id="623da-152">For more information about editing labels, see [Tree-View Label Editing](#tree-view-label-editing).</span></span>

<span data-ttu-id="623da-153">Para obtener más información sobre estos y otros estilos, vea [estilos de la ventana de control de vista de árbol](tree-view-control-window-styles.md).</span><span class="sxs-lookup"><span data-stu-id="623da-153">For more information on these and other styles, see [Tree-View Control Window Styles](tree-view-control-window-styles.md).</span></span>

## <a name="parent-and-child-items"></a><span data-ttu-id="623da-154">Elementos primarios y secundarios</span><span class="sxs-lookup"><span data-stu-id="623da-154">Parent and Child Items</span></span>

<span data-ttu-id="623da-155">Cualquier elemento de un control de vista de árbol puede tener una lista de subelementos (denominados *elementos secundarios*) asociados.</span><span class="sxs-lookup"><span data-stu-id="623da-155">Any item in a tree-view control can have a list of subitems—called *child items*—associated with it.</span></span> <span data-ttu-id="623da-156">Un elemento que tiene uno o más elementos secundarios se denomina *elemento primario*.</span><span class="sxs-lookup"><span data-stu-id="623da-156">An item that has one or more child items is called a *parent item*.</span></span> <span data-ttu-id="623da-157">Un elemento secundario se muestra debajo de su elemento primario y se le aplica una sangría para indicar que está subordinado al primario.</span><span class="sxs-lookup"><span data-stu-id="623da-157">A child item is displayed below its parent item and is indented to indicate that it is subordinate to the parent.</span></span> <span data-ttu-id="623da-158">Un elemento que no tiene ningún elemento primario aparece en la parte superior de la jerarquía y se denomina *elemento raíz*.</span><span class="sxs-lookup"><span data-stu-id="623da-158">An item that has no parent appears at the top of the hierarchy and is called a *root item*.</span></span>

<span data-ttu-id="623da-159">Para agregar un elemento a un control de vista de árbol, envíe el mensaje [**TVM \_ INSERTITEM**](tvm-insertitem.md) al control.</span><span class="sxs-lookup"><span data-stu-id="623da-159">To add an item to a tree-view control, send the [**TVM\_INSERTITEM**](tvm-insertitem.md) message to the control.</span></span> <span data-ttu-id="623da-160">El mensaje devuelve un identificador al tipo HTREEITEM, que identifica de forma única el elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-160">The message returns a handle to the HTREEITEM type, which uniquely identifies the item.</span></span> <span data-ttu-id="623da-161">Al agregar un elemento, debe especificar el identificador del elemento primario del nuevo elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-161">When adding an item, you must specify the handle to the new item's parent item.</span></span> <span data-ttu-id="623da-162">Si especifica **null** o el \_ valor raíz TVI en lugar de un identificador de elemento primario en la estructura [**TVINSERTSTRUCT**](/windows/win32/api/commctrl/ns-commctrl-tvinsertstructa) , el elemento se agrega como un elemento raíz.</span><span class="sxs-lookup"><span data-stu-id="623da-162">If you specify **NULL** or the TVI\_ROOT value instead of a parent item handle in the [**TVINSERTSTRUCT**](/windows/win32/api/commctrl/ns-commctrl-tvinsertstructa) structure, the item is added as a root item.</span></span>

<span data-ttu-id="623da-163">En un momento dado, el estado de la lista de elementos secundarios de un elemento primario puede expandirse o contraerse.</span><span class="sxs-lookup"><span data-stu-id="623da-163">At any given time, the state of a parent item's list of child items can be either expanded or collapsed.</span></span> <span data-ttu-id="623da-164">Cuando se expande el estado, los elementos secundarios se muestran debajo del elemento primario.</span><span class="sxs-lookup"><span data-stu-id="623da-164">When the state is expanded, the child items are displayed below the parent item.</span></span> <span data-ttu-id="623da-165">Cuando se contrae, no se muestran los elementos secundarios.</span><span class="sxs-lookup"><span data-stu-id="623da-165">When it is collapsed, the child items are not displayed.</span></span> <span data-ttu-id="623da-166">La lista alterna automáticamente entre los Estados expandido y contraído cuando el usuario hace doble clic en el elemento primario o, si el elemento primario tiene el estilo [**\_ HASBUTTONS de TV**](tree-view-control-window-styles.md) , cuando el usuario hace clic en el botón asociado al elemento primario.</span><span class="sxs-lookup"><span data-stu-id="623da-166">The list automatically toggles between the expanded and collapsed states when the user double-clicks the parent item or, if the parent has the [**TVS\_HASBUTTONS**](tree-view-control-window-styles.md) style, when the user clicks the button associated with the parent item.</span></span> <span data-ttu-id="623da-167">Una aplicación puede expandir o contraer los elementos secundarios mediante el mensaje [**TVM \_ Expand**](tvm-expand.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-167">An application can expand or collapse the child items by using the [**TVM\_EXPAND**](tvm-expand.md) message.</span></span>

<span data-ttu-id="623da-168">Un control de vista de árbol envía a la ventana primaria un mensaje de notificación [TVN \_ ITEMEXPANDING](tvn-itemexpanding.md) cuando la lista de elementos secundarios de un elemento primario está a punto de expandirse o contraerse.</span><span class="sxs-lookup"><span data-stu-id="623da-168">A tree-view control sends the parent window a [TVN\_ITEMEXPANDING](tvn-itemexpanding.md) notification message when a parent item's list of child items is about to be expanded or collapsed.</span></span> <span data-ttu-id="623da-169">La notificación proporciona a una aplicación la oportunidad de evitar el cambio o establecer los atributos del elemento primario que dependen del estado de la lista de elementos secundarios.</span><span class="sxs-lookup"><span data-stu-id="623da-169">The notification gives an application the opportunity to prevent the change or to set any attributes of the parent item that depend on the state of the list of child items.</span></span> <span data-ttu-id="623da-170">Después de cambiar el estado de la lista, el control de vista de árbol envía a la ventana primaria un mensaje de notificación de [TVN \_ ITEMEXPANDED](tvn-itemexpanded.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-170">After changing the state of the list, the tree-view control sends the parent window a [TVN\_ITEMEXPANDED](tvn-itemexpanded.md) notification message.</span></span>

<span data-ttu-id="623da-171">Cuando se expande una lista de elementos secundarios, se aplica una sangría relativa al elemento primario.</span><span class="sxs-lookup"><span data-stu-id="623da-171">When a list of child items is expanded, it is indented relative to the parent item.</span></span> <span data-ttu-id="623da-172">Puede establecer la cantidad de sangría mediante el mensaje [**TVM \_ SETINDENT**](tvm-setindent.md) o recuperar la cantidad actual mediante el mensaje [**TVM \_ GETINDENT**](tvm-getindent.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-172">You can set the amount of indentation by using the [**TVM\_SETINDENT**](tvm-setindent.md) message or retrieve the current amount by using the [**TVM\_GETINDENT**](tvm-getindent.md) message.</span></span>

<span data-ttu-id="623da-173">Un control de vista de árbol utiliza la memoria asignada del montón del proceso que crea el control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-173">A tree-view control uses memory allocated from the heap of the process that creates the tree-view control.</span></span> <span data-ttu-id="623da-174">El número máximo de elementos de una vista de árbol se basa en la cantidad de memoria disponible en el montón.</span><span class="sxs-lookup"><span data-stu-id="623da-174">The maximum number of items in a tree view is based on the amount of memory available in the heap.</span></span>

## <a name="item-labels"></a><span data-ttu-id="623da-175">Etiquetas de elemento</span><span class="sxs-lookup"><span data-stu-id="623da-175">Item Labels</span></span>

<span data-ttu-id="623da-176">Normalmente, se especifica el texto de la etiqueta de un elemento al agregarlo al control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-176">You typically specify the text of an item's label when adding the item to the tree-view control.</span></span> <span data-ttu-id="623da-177">El mensaje [**TVM \_ INSERTITEM**](tvm-insertitem.md) incluye una estructura [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) que define las propiedades del elemento, incluida una cadena que contiene el texto de la etiqueta.</span><span class="sxs-lookup"><span data-stu-id="623da-177">The [**TVM\_INSERTITEM**](tvm-insertitem.md) message includes a [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) structure that defines the item's properties, including a string containing the text of the label.</span></span>

<span data-ttu-id="623da-178">Un control de vista de árbol asigna memoria para almacenar cada elemento; el texto de las etiquetas del elemento ocupa una parte importante de esta memoria.</span><span class="sxs-lookup"><span data-stu-id="623da-178">A tree-view control allocates memory for storing each item; the text of the item labels takes up a significant portion of this memory.</span></span> <span data-ttu-id="623da-179">Si la aplicación mantiene una copia de las cadenas en el control de vista de árbol, puede reducir los requisitos de memoria del control especificando el \_ valor de LPSTR TEXTCALLBACK en el miembro **miembros pszText** de [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) en lugar de pasar cadenas reales a la vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-179">If your application maintains a copy of the strings in the tree-view control, you can decrease the memory requirements of the control by specifying the LPSTR\_TEXTCALLBACK value in the **pszText** member of [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) instead of passing actual strings to the tree view.</span></span> <span data-ttu-id="623da-180">El uso de LPSTR \_ TEXTCALLBACK hace que el control de vista de árbol recupere el texto de la etiqueta de un elemento de la ventana primaria siempre que sea necesario volver a dibujar el elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-180">Using LPSTR\_TEXTCALLBACK causes the tree-view control to retrieve the text of an item's label from the parent window whenever the item needs to be redrawn.</span></span> <span data-ttu-id="623da-181">Para recuperar el texto, el control de vista de árbol envía un mensaje de notificación [ \_ GETDISPINFO de TVN](tvn-getdispinfo.md) , que incluye la dirección de una estructura [**NMTVDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmtvdispinfoa) .</span><span class="sxs-lookup"><span data-stu-id="623da-181">To retrieve the text, the tree-view control sends a [TVN\_GETDISPINFO](tvn-getdispinfo.md) notification message, which includes the address of an [**NMTVDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmtvdispinfoa) structure.</span></span> <span data-ttu-id="623da-182">La ventana primaria debe rellenar los miembros adecuados de la estructura incluida.</span><span class="sxs-lookup"><span data-stu-id="623da-182">The parent window must fill the appropriate members of the included structure.</span></span>

## <a name="tree-view-label-editing"></a><span data-ttu-id="623da-183">Edición de Tree-View etiqueta</span><span class="sxs-lookup"><span data-stu-id="623da-183">Tree-View Label Editing</span></span>

<span data-ttu-id="623da-184">El usuario puede editar directamente las etiquetas de los elementos de un control de vista de árbol que tenga el estilo [**TV \_ EDITLABELS**](tree-view-control-window-styles.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-184">The user can directly edit the labels of items in a tree-view control that has the [**TVS\_EDITLABELS**](tree-view-control-window-styles.md) style.</span></span> <span data-ttu-id="623da-185">El usuario comienza a editar haciendo clic en la etiqueta del elemento que tiene el foco.</span><span class="sxs-lookup"><span data-stu-id="623da-185">The user begins editing by clicking the label of the item that has the focus.</span></span> <span data-ttu-id="623da-186">Una aplicación comienza a editarse mediante el mensaje [**TVM \_ EDITLABEL**](tvm-editlabel.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-186">An application begins editing by using the [**TVM\_EDITLABEL**](tvm-editlabel.md) message.</span></span> <span data-ttu-id="623da-187">El control de vista de árbol notifica a la ventana primaria cuando comienza la edición y cuando se cancela o se completa.</span><span class="sxs-lookup"><span data-stu-id="623da-187">The tree-view control notifies the parent window when editing begins and when it is canceled or completed.</span></span> <span data-ttu-id="623da-188">Cuando se completa la edición, la ventana primaria es responsable de actualizar la etiqueta del elemento, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="623da-188">When editing is completed, the parent window is responsible for updating the item's label, if appropriate.</span></span>

<span data-ttu-id="623da-189">Cuando comienza la edición de etiquetas, un control de vista de árbol envía a su ventana primaria un mensaje de notificación de [TVN \_ BEGINLABELEDIT](tvn-beginlabeledit.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-189">When label editing begins, a tree-view control sends its parent window a [TVN\_BEGINLABELEDIT](tvn-beginlabeledit.md) notification message.</span></span> <span data-ttu-id="623da-190">Al procesar esta notificación, una aplicación puede permitir la edición de algunas etiquetas y evitar la edición de otras.</span><span class="sxs-lookup"><span data-stu-id="623da-190">By processing this notification, an application can allow editing of some labels and prevent editing of others.</span></span> <span data-ttu-id="623da-191">Devolver cero permite la edición y devolver un valor distinto de cero lo evita.</span><span class="sxs-lookup"><span data-stu-id="623da-191">Returning zero allows editing, and returning nonzero prevents it.</span></span>

<span data-ttu-id="623da-192">Cuando la edición de etiquetas se cancela o se completa, un control de vista de árbol envía a su ventana primaria un mensaje de notificación de [TVN \_ ENDLABELEDIT](tvn-endlabeledit.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-192">When label editing is canceled or completed, a tree-view control sends its parent window a [TVN\_ENDLABELEDIT](tvn-endlabeledit.md) notification message.</span></span> <span data-ttu-id="623da-193">El parámetro *lParam* es la dirección de una estructura [**NMTVDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmtvdispinfoa) .</span><span class="sxs-lookup"><span data-stu-id="623da-193">The *lParam* parameter is the address of an [**NMTVDISPINFO**](/windows/win32/api/commctrl/ns-commctrl-nmtvdispinfoa) structure.</span></span> <span data-ttu-id="623da-194">El parámetro *Item* es una estructura [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) que identifica el elemento e incluye el texto editado.</span><span class="sxs-lookup"><span data-stu-id="623da-194">The *item* parameter is a [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) structure that identifies the item and includes the edited text.</span></span> <span data-ttu-id="623da-195">La ventana primaria es responsable de actualizar la etiqueta del elemento si desea mantener la nueva etiqueta.</span><span class="sxs-lookup"><span data-stu-id="623da-195">The parent window is responsible for updating the item's label if it wishes to keep the new label.</span></span> <span data-ttu-id="623da-196">El miembro **miembros pszText** de **TVITEM** es cero si se cancela la edición.</span><span class="sxs-lookup"><span data-stu-id="623da-196">The **pszText** member of **TVITEM** is zero if editing is canceled.</span></span>

<span data-ttu-id="623da-197">Durante la edición de etiquetas, normalmente en respuesta al mensaje de notificación [TVN \_ BEGINLABELEDIT](tvn-beginlabeledit.md) , puede recuperar el identificador del control de edición que se usa para la edición de etiquetas mediante el mensaje [**TVM \_ GETEDITCONTROL**](tvm-geteditcontrol.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-197">During label editing, typically in response to the [TVN\_BEGINLABELEDIT](tvn-beginlabeledit.md) notification message, you can retrieve the handle to the edit control used for label editing by using the [**TVM\_GETEDITCONTROL**](tvm-geteditcontrol.md) message.</span></span> <span data-ttu-id="623da-198">Puede enviar un mensaje [**\_ SETLIMITTEXT de EM**](em-setlimittext.md) para limitar la cantidad de texto que un usuario puede escribir o subclase del control de edición para interceptar y descartar los caracteres no válidos.</span><span class="sxs-lookup"><span data-stu-id="623da-198">You can send the edit control an [**EM\_SETLIMITTEXT**](em-setlimittext.md) message to limit the amount of text a user can enter or subclass the edit control to intercept and discard invalid characters.</span></span> <span data-ttu-id="623da-199">Tenga en cuenta, sin embargo, que el control de edición solo se muestra *después* de   \_ Enviar TVN BEGINLABELEDIT.</span><span class="sxs-lookup"><span data-stu-id="623da-199">Note, however, that the edit control is displayed only *after* TVN\_BEGINLABELEDIT is sent.</span></span>

## <a name="tree-view-item-position"></a><span data-ttu-id="623da-200">Tree-View posición del elemento</span><span class="sxs-lookup"><span data-stu-id="623da-200">Tree-View Item Position</span></span>

<span data-ttu-id="623da-201">La posición inicial de un elemento se establece cuando el elemento se agrega al control de vista de árbol mediante el mensaje de la opción [**TVM \_ INSERTITEM**](tvm-insertitem.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-201">An item's initial position is set when the item is added to the tree-view control by using the [**TVM\_INSERTITEM**](tvm-insertitem.md) message.</span></span> <span data-ttu-id="623da-202">El mensaje incluye una estructura [**TVINSERTSTRUCT**](/windows/win32/api/commctrl/ns-commctrl-tvinsertstructa) que especifica el identificador del elemento primario y el identificador del elemento después del cual se va a insertar el nuevo elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-202">The message includes a [**TVINSERTSTRUCT**](/windows/win32/api/commctrl/ns-commctrl-tvinsertstructa) structure that specifies the handle to the parent item and the handle to the item after which the new item is to be inserted.</span></span> <span data-ttu-id="623da-203">El segundo identificador debe identificar un elemento secundario del elemento primario especificado o uno de estos valores: TVI \_ First, TVI \_ Last u TVI \_ Sort.</span><span class="sxs-lookup"><span data-stu-id="623da-203">The second handle must identify either a child item of the given parent or one of these values: TVI\_FIRST, TVI\_LAST, or TVI\_SORT.</span></span>

<span data-ttu-id="623da-204">Cuando \_ se especifica TVI First o TVI \_ Last, el control de vista de árbol coloca el nuevo elemento al principio o al final de la lista de elementos secundarios del elemento primario especificado.</span><span class="sxs-lookup"><span data-stu-id="623da-204">When TVI\_FIRST or TVI\_LAST is specified, the tree-view control places the new item at the beginning or end of the given parent item's list of child items.</span></span> <span data-ttu-id="623da-205">Cuando \_ se especifica TVI Sort, el control de vista de árbol inserta el nuevo elemento en la lista de elementos secundarios en orden alfabético según el texto de las etiquetas de los elementos.</span><span class="sxs-lookup"><span data-stu-id="623da-205">When TVI\_SORT is specified, the tree-view control inserts the new item into the list of child items in alphabetical order based on the text of the item labels.</span></span>

<span data-ttu-id="623da-206">Puede colocar la lista de elementos secundarios de un elemento primario en orden alfabético mediante el mensaje [**de \_ SORTCHILDREN TVM**](tvm-sortchildren.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-206">You can put a parent item's list of child items in alphabetical order by using the [**TVM\_SORTCHILDREN**](tvm-sortchildren.md) message.</span></span> <span data-ttu-id="623da-207">El mensaje incluye un parámetro que especifica si todos los niveles de elementos secundarios que descienden del elemento primario dado también se ordenan en orden alfabético.</span><span class="sxs-lookup"><span data-stu-id="623da-207">The message includes a parameter that specifies whether all levels of child items descending from the given parent item are also sorted in alphabetical order.</span></span>

<span data-ttu-id="623da-208">El mensaje [**TVM \_ SORTCHILDRENCB**](tvm-sortchildrencb.md) le permite ordenar los elementos secundarios en función de los criterios que defina.</span><span class="sxs-lookup"><span data-stu-id="623da-208">The [**TVM\_SORTCHILDRENCB**](tvm-sortchildrencb.md) message allows you to sort child items based on criteria that you define.</span></span> <span data-ttu-id="623da-209">Cuando se usa este mensaje, se especifica una función de devolución de llamada definida por la aplicación a la que el control de vista de árbol puede llamar cuando sea necesario decidir el orden relativo de dos elementos secundarios.</span><span class="sxs-lookup"><span data-stu-id="623da-209">When you use this message, you specify an application-defined callback function that the tree-view control can call whenever the relative order of two child items needs to be decided.</span></span> <span data-ttu-id="623da-210">La función de devolución de llamada recibe valores definidos por la aplicación de 2 32 bits para los elementos que se están comparando y un tercer valor de 32 bits que se especifica al enviar **TVM \_ SORTCHILDRENCB**.</span><span class="sxs-lookup"><span data-stu-id="623da-210">The callback function receives two 32-bit application-defined values for the items being compared and a third 32-bit value that you specify when sending **TVM\_SORTCHILDRENCB**.</span></span>

## <a name="tree-view-item-states-overview"></a><span data-ttu-id="623da-211">Información general sobre los Estados de los elementos Tree-View</span><span class="sxs-lookup"><span data-stu-id="623da-211">Tree-View Item States Overview</span></span>

<span data-ttu-id="623da-212">Cada elemento de un control de vista de árbol tiene un estado actual.</span><span class="sxs-lookup"><span data-stu-id="623da-212">Each item in a tree-view control has a current state.</span></span> <span data-ttu-id="623da-213">La información de estado de cada elemento incluye un conjunto de marcas de bits, así como índices de lista de imágenes que indican la imagen de estado del elemento y la imagen de superposición.</span><span class="sxs-lookup"><span data-stu-id="623da-213">The state information for each item includes a set of bit flags as well as image list indexes that indicate the item's state image and overlay image.</span></span> <span data-ttu-id="623da-214">Las marcas de bits indican si el elemento está seleccionado, deshabilitado, expandido, etc.</span><span class="sxs-lookup"><span data-stu-id="623da-214">The bit flags indicate whether the item is selected, disabled, expanded, and so on.</span></span> <span data-ttu-id="623da-215">En su mayor parte, un control de vista de árbol establece automáticamente el estado de un elemento para reflejar las acciones del usuario, como la selección de un elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-215">For the most part, a tree-view control automatically sets an item's state to reflect user actions, such as selection of an item.</span></span> <span data-ttu-id="623da-216">Sin embargo, también puede establecer el estado de un elemento mediante el mensaje [**TVM \_ SETITEM**](tvm-setitem.md) , y puede recuperar el estado actual de un elemento mediante el mensaje de [**\_ GETITEM de TVM**](tvm-getitem.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-216">However, you can also set an item's state by using the [**TVM\_SETITEM**](tvm-setitem.md) message, and you can retrieve the current state of an item by using the [**TVM\_GETITEM**](tvm-getitem.md) message.</span></span> <span data-ttu-id="623da-217">Para obtener una lista completa de los Estados de elemento, vea [Estados de elemento de control de vista de árbol](tree-view-control-item-states.md).</span><span class="sxs-lookup"><span data-stu-id="623da-217">For a complete list of item states, see [Tree-View Control Item States](tree-view-control-item-states.md).</span></span>

<span data-ttu-id="623da-218">El estado actual de un elemento se especifica mediante el miembro de **Estado** de la estructura [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) .</span><span class="sxs-lookup"><span data-stu-id="623da-218">An item's current state is specified by the **state** member of the [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) structure.</span></span> <span data-ttu-id="623da-219">Un control de vista de árbol puede cambiar el estado de un elemento para reflejar una acción del usuario, como seleccionar el elemento o establecer el foco en el elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-219">A tree-view control might change an item's state to reflect a user action, such as selecting the item or setting the focus to the item.</span></span> <span data-ttu-id="623da-220">Además, una aplicación podría cambiar el estado de un elemento para deshabilitar u ocultar el elemento o para especificar una imagen de superposición o imagen de estado.</span><span class="sxs-lookup"><span data-stu-id="623da-220">In addition, an application might change an item's state to disable or hide the item or to specify an overlay image or state image.</span></span>

<span data-ttu-id="623da-221">Al especificar o cambiar el estado de un elemento, el miembro **statemask** de [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) especifica qué bits de estado establecer y el miembro **State** contiene los nuevos valores de esos bits.</span><span class="sxs-lookup"><span data-stu-id="623da-221">When you specify or change an item's state, the **statemask** member of [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) specifies which state bits to set, and the **state** member contains the new values for those bits.</span></span>

<span data-ttu-id="623da-222">Para establecer la imagen de superposición de un elemento, **statemask** debe incluir el valor [**TVIS \_ OVERLAYMASK**](tree-view-control-item-states.md) y el **Estado** debe incluir el índice basado en uno de la imagen de superposición desplazada a la izquierda 8 bits mediante la macro [**INDEXTOOVERLAYMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) .</span><span class="sxs-lookup"><span data-stu-id="623da-222">To set an item's overlay image, **statemask** must include the [**TVIS\_OVERLAYMASK**](tree-view-control-item-states.md) value, and **state** must include the one-based index of the overlay image shifted left 8 bits by using the [**INDEXTOOVERLAYMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) macro.</span></span> <span data-ttu-id="623da-223">El índice puede ser cero para no especificar ninguna imagen de superposición.</span><span class="sxs-lookup"><span data-stu-id="623da-223">The index can be zero to specify no overlay image.</span></span>

<span data-ttu-id="623da-224">Se muestra una imagen de Estado junto al icono de un elemento para indicar un estado definido por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="623da-224">A state image is displayed next to an item's icon to indicate an application-defined state.</span></span> <span data-ttu-id="623da-225">Las imágenes de estado se incluyen en una *lista de imágenes de estado* que se especifica mediante el envío de un mensaje [**TVM \_ SETIMAGELIST**](tvm-setimagelist.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-225">State images are contained in a *state image list* that is specified by sending a [**TVM\_SETIMAGELIST**](tvm-setimagelist.md) message.</span></span> <span data-ttu-id="623da-226">Para establecer la imagen de estado de un elemento, incluya el valor de [**TVIS \_ STATEIMAGEMASK**](tree-view-control-item-states.md) en el miembro **Statemask** de la estructura [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) .</span><span class="sxs-lookup"><span data-stu-id="623da-226">To set an item's state image, include the [**TVIS\_STATEIMAGEMASK**](tree-view-control-item-states.md) value in the **statemask** member of the [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) structure.</span></span> <span data-ttu-id="623da-227">Los bits 12 a 15 del miembro **State** de la estructura especifican el índice en la lista de imágenes de estado de la imagen que se va a dibujar.</span><span class="sxs-lookup"><span data-stu-id="623da-227">Bits 12 through 15 of the structure's **state** member specify the index in the state image list of the image to be drawn.</span></span>

<span data-ttu-id="623da-228">Para establecer el índice de la imagen de estado, use [**INDEXTOSTATEIMAGEMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextostateimagemask).</span><span class="sxs-lookup"><span data-stu-id="623da-228">To set the state image index, use [**INDEXTOSTATEIMAGEMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextostateimagemask).</span></span> <span data-ttu-id="623da-229">Esta macro toma un índice y establece los bits del 12 al 15 adecuadamente.</span><span class="sxs-lookup"><span data-stu-id="623da-229">This macro takes an index, and sets bits 12 through 15 appropriately.</span></span> <span data-ttu-id="623da-230">Para indicar que el elemento no tiene ninguna imagen de estado, establezca el índice en cero.</span><span class="sxs-lookup"><span data-stu-id="623da-230">To indicate that the item has no state image, set the index to zero.</span></span> <span data-ttu-id="623da-231">Esta Convención significa que la imagen cero de la lista de imágenes de estado no se puede usar como una imagen de estado.</span><span class="sxs-lookup"><span data-stu-id="623da-231">This convention means that image zero in the state image list cannot be used as a state image.</span></span> <span data-ttu-id="623da-232">Para aislar los bits del 12 al 15 del miembro de **Estado** , use la máscara [**\_ STATEIMAGEMASK de TVIS**](tree-view-control-item-states.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-232">To isolate bits 12 through 15 of the **state** member, use the [**TVIS\_STATEIMAGEMASK**](tree-view-control-item-states.md) mask.</span></span> <span data-ttu-id="623da-233">Para obtener más información acerca de las imágenes de superposición y de estado, consulte [listas de imágenes de vista de árbol](#tree-view-image-lists).</span><span class="sxs-lookup"><span data-stu-id="623da-233">For more information about overlay and state images, see [Tree-View Image Lists](#tree-view-image-lists).</span></span>

## <a name="item-selection"></a><span data-ttu-id="623da-234">Selección de elementos</span><span class="sxs-lookup"><span data-stu-id="623da-234">Item Selection</span></span>

<span data-ttu-id="623da-235">Un control de vista de árbol notifica a la ventana primaria cuando la selección cambia de un elemento a otro mediante el envío de los mensajes de notificación [TVN \_ SELCHANGING](tvn-selchanging.md) y [TVN \_ SELCHANGED](tvn-selchanged.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-235">A tree-view control notifies the parent window when the selection changes from one item to another by sending the [TVN\_SELCHANGING](tvn-selchanging.md) and [TVN\_SELCHANGED](tvn-selchanged.md) notification messages.</span></span> <span data-ttu-id="623da-236">Ambas notificaciones incluyen un valor que especifica si el cambio es el resultado de un clic del mouse o una pulsación de tecla.</span><span class="sxs-lookup"><span data-stu-id="623da-236">Both notifications include a value that specifies whether the change is the result of a mouse click or a keystroke.</span></span> <span data-ttu-id="623da-237">Las notificaciones también incluyen información sobre el elemento que obtiene la selección y el elemento que pierde la selección.</span><span class="sxs-lookup"><span data-stu-id="623da-237">The notifications also include information about the item that is gaining the selection and the item that is losing the selection.</span></span> <span data-ttu-id="623da-238">Puede usar esta información para establecer atributos de elementos que dependen del estado de selección del elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-238">You can use this information to set item attributes that depend on the selection state of the item.</span></span> <span data-ttu-id="623da-239">Si se devuelve **true** en respuesta a TVN \_ SELCHANGING, se evita que la selección cambie y se devuelve **false** , lo que permite realizar el cambio.</span><span class="sxs-lookup"><span data-stu-id="623da-239">Returning **TRUE** in response to TVN\_SELCHANGING prevents the selection from changing, and returning **FALSE** allows the change.</span></span>

<span data-ttu-id="623da-240">Una aplicación puede cambiar la selección mediante el envío del mensaje [**TVM \_ SELECTITEM**](tvm-selectitem.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-240">An application can change the selection by sending the [**TVM\_SELECTITEM**](tvm-selectitem.md) message.</span></span>

## <a name="item-information"></a><span data-ttu-id="623da-241">Información del elemento</span><span class="sxs-lookup"><span data-stu-id="623da-241">Item Information</span></span>

<span data-ttu-id="623da-242">Los controles de vista de árbol admiten una serie de mensajes que recuperan información sobre los elementos del control.</span><span class="sxs-lookup"><span data-stu-id="623da-242">Tree-view controls support a number of messages that retrieve information about items in the control.</span></span>

<span data-ttu-id="623da-243">El mensaje de [**\_ GETITEM de TVM**](tvm-getitem.md) puede recuperar el identificador y los atributos de un elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-243">The [**TVM\_GETITEM**](tvm-getitem.md) message can retrieve an item's handle and attributes.</span></span> <span data-ttu-id="623da-244">Los atributos de un elemento incluyen su estado actual, los índices de la lista de imágenes del control de las imágenes de mapa de bits seleccionadas y no seleccionadas del elemento, una marca que indica si el elemento tiene elementos secundarios, la dirección de la cadena de etiqueta del elemento y el valor de 32 bits definido por la aplicación del elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-244">An item's attributes include its current state, the indexes in the control's image list of the item's selected and nonselected bitmapped images, a flag that indicates whether the item has child items, the address of the item's label string, and the item's application-defined 32-bit value.</span></span>

<span data-ttu-id="623da-245">El mensaje [**TVM \_ GETNEXTITEM**](tvm-getnextitem.md) recupera el elemento de vista de árbol que lleva la relación especificada con el elemento actual.</span><span class="sxs-lookup"><span data-stu-id="623da-245">The [**TVM\_GETNEXTITEM**](tvm-getnextitem.md) message retrieves the tree-view item that bears the specified relationship to the current item.</span></span> <span data-ttu-id="623da-246">El mensaje puede recuperar el elemento primario de un elemento, el elemento visible siguiente o anterior, el primer elemento secundario, etc.</span><span class="sxs-lookup"><span data-stu-id="623da-246">The message can retrieve an item's parent, the next or previous visible item, the first child item, and so on.</span></span>

<span data-ttu-id="623da-247">El mensaje [**TVM \_ GETITEMRECT**](tvm-getitemrect.md) recupera el rectángulo delimitador de un elemento de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-247">The [**TVM\_GETITEMRECT**](tvm-getitemrect.md) message retrieves the bounding rectangle for a tree-view item.</span></span> <span data-ttu-id="623da-248">Los mensajes [**TVM \_ GETCOUNT**](tvm-getcount.md) y [**TVM \_ GETVISIBLECOUNT**](tvm-getvisiblecount.md) recuperan un recuento de los elementos de un control de vista de árbol y un recuento de los elementos que pueden estar totalmente visibles en la ventana del control de vista de árbol, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="623da-248">The [**TVM\_GETCOUNT**](tvm-getcount.md) and [**TVM\_GETVISIBLECOUNT**](tvm-getvisiblecount.md) messages retrieve a count of the items in a tree-view control and a count of the items that can be fully visible in the tree-view control's window, respectively.</span></span> <span data-ttu-id="623da-249">Puede asegurarse de que un elemento determinado esté visible mediante el mensaje de la [**\_ ENSUREVISIBLE de TVM**](tvm-ensurevisible.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-249">You can ensure that a particular item is visible by using the [**TVM\_ENSUREVISIBLE**](tvm-ensurevisible.md) message.</span></span>

## <a name="tree-view-image-lists"></a><span data-ttu-id="623da-250">Tree-View listas de imágenes</span><span class="sxs-lookup"><span data-stu-id="623da-250">Tree-View Image Lists</span></span>

<span data-ttu-id="623da-251">Cada elemento de un control de vista de árbol puede tener cuatro imágenes de mapa de bits asociadas.</span><span class="sxs-lookup"><span data-stu-id="623da-251">Each item in a tree-view control can have four bitmapped images associated with it.</span></span>

-   <span data-ttu-id="623da-252">Una imagen, como una carpeta abierta, que se muestra cuando se selecciona el elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-252">An image, such as an open folder, displayed when the item is selected.</span></span>
-   <span data-ttu-id="623da-253">Una imagen, como una carpeta cerrada, que se muestra cuando no se selecciona el elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-253">An image, such as a closed folder, displayed when the item is not selected.</span></span>
-   <span data-ttu-id="623da-254">Imagen superpuesta dibujada de forma transparente sobre la imagen seleccionada o no seleccionada.</span><span class="sxs-lookup"><span data-stu-id="623da-254">An overlay image that is drawn transparently over the selected or nonselected image.</span></span>
-   <span data-ttu-id="623da-255">Una imagen de estado, que es una imagen adicional que se muestra a la izquierda de la imagen seleccionada o no seleccionada.</span><span class="sxs-lookup"><span data-stu-id="623da-255">A state image, which is an additional image displayed to the left of the selected or nonselected image.</span></span> <span data-ttu-id="623da-256">Puede usar las imágenes de estado, como las casillas activada y desactivada, para indicar los Estados de los elementos definidos por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="623da-256">You can use state images, such as checked and cleared check boxes, to indicate application-defined item states.</span></span>

<span data-ttu-id="623da-257">De forma predeterminada, un control de vista de árbol no muestra imágenes de elementos.</span><span class="sxs-lookup"><span data-stu-id="623da-257">By default, a tree-view control does not display item images.</span></span> <span data-ttu-id="623da-258">Para mostrar imágenes de elementos, debe crear listas de imágenes y asociarlas al control.</span><span class="sxs-lookup"><span data-stu-id="623da-258">To display item images, you must create image lists and associate them with the control.</span></span> <span data-ttu-id="623da-259">Para obtener más información acerca de las listas de imágenes, consulte [listas de imágenes](image-lists.md).</span><span class="sxs-lookup"><span data-stu-id="623da-259">For more information about image lists, see [Image Lists](image-lists.md).</span></span>

<span data-ttu-id="623da-260">Un control de vista de árbol puede tener dos listas de imágenes: una lista de imágenes normal y una lista de imágenes de estado.</span><span class="sxs-lookup"><span data-stu-id="623da-260">A tree-view control can have two image lists: a normal image list and a state image list.</span></span> <span data-ttu-id="623da-261">Una lista de imágenes normal almacena las imágenes seleccionadas, no seleccionadas y superpuestas.</span><span class="sxs-lookup"><span data-stu-id="623da-261">A normal image list stores the selected, nonselected, and overlay images.</span></span> <span data-ttu-id="623da-262">Una lista de imágenes de estado almacena imágenes de estado.</span><span class="sxs-lookup"><span data-stu-id="623da-262">A state image list stores state images.</span></span> <span data-ttu-id="623da-263">Use la función [**ImageList \_ Create**](/windows/desktop/api/Commctrl/nf-commctrl-imagelist_create) para crear una lista de imágenes y use otras funciones de lista de imágenes para agregar mapas de bits a la lista de imágenes.</span><span class="sxs-lookup"><span data-stu-id="623da-263">Use the [**ImageList\_Create**](/windows/desktop/api/Commctrl/nf-commctrl-imagelist_create) function to create an image list, and use other image list functions to add bitmaps to the image list.</span></span> <span data-ttu-id="623da-264">A continuación, para asociar la lista de imágenes con el control de vista de árbol, use el mensaje [**TVM \_ SETIMAGELIST**](tvm-setimagelist.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-264">Then, to associate the image list with the tree-view control, use the [**TVM\_SETIMAGELIST**](tvm-setimagelist.md) message.</span></span> <span data-ttu-id="623da-265">El mensaje [**TVM \_ GETIMAGELIST**](tvm-getimagelist.md) recupera un identificador de una de las listas de imágenes del control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-265">The [**TVM\_GETIMAGELIST**](tvm-getimagelist.md) message retrieves a handle to one of a tree-view control's image lists.</span></span> <span data-ttu-id="623da-266">Este mensaje es útil si necesita agregar más imágenes a la lista.</span><span class="sxs-lookup"><span data-stu-id="623da-266">This message is useful if you need to add more images to the list.</span></span>

<span data-ttu-id="623da-267">Además de las imágenes seleccionadas y no seleccionadas, una lista de imágenes normales del control de vista de árbol puede contener hasta cuatro imágenes superpuestas.</span><span class="sxs-lookup"><span data-stu-id="623da-267">In addition to the selected and nonselected images, a tree-view control's normal image list can contain up to four overlay images.</span></span> <span data-ttu-id="623da-268">Las imágenes superpuestas se identifican mediante un índice basado en uno y están diseñadas para dibujarse de forma transparente sobre las imágenes seleccionadas y no seleccionadas.</span><span class="sxs-lookup"><span data-stu-id="623da-268">Overlay images are identified by a one-based index and are designed to be drawn transparently over the selected and nonselected images.</span></span> <span data-ttu-id="623da-269">Para asignar un índice de máscara de superposición a una imagen en la lista de imágenes normales, llame a la función [**ImageList \_ SetOverlayImage**](/windows/desktop/api/Commctrl/nf-commctrl-imagelist_setoverlayimage) .</span><span class="sxs-lookup"><span data-stu-id="623da-269">To assign an overlay mask index to an image in the normal image list, call the [**ImageList\_SetOverlayImage**](/windows/desktop/api/Commctrl/nf-commctrl-imagelist_setoverlayimage) function.</span></span>

<span data-ttu-id="623da-270">De forma predeterminada, todos los elementos muestran la primera imagen de la lista de imágenes normal para los Estados seleccionado y no seleccionado.</span><span class="sxs-lookup"><span data-stu-id="623da-270">By default, all items display the first image in the normal image list for both the selected and nonselected states.</span></span> <span data-ttu-id="623da-271">Además, de forma predeterminada, los elementos no muestran imágenes de superposición o imágenes de estado.</span><span class="sxs-lookup"><span data-stu-id="623da-271">Also, by default, items do not display overlay images or state images.</span></span> <span data-ttu-id="623da-272">Puede cambiar estos comportamientos predeterminados para un elemento mediante el envío del mensaje [**TVM \_ INSERTITEM**](tvm-insertitem.md) o [**TVM \_ SETITEM**](tvm-setitem.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-272">You can change these default behaviors for an item by sending the [**TVM\_INSERTITEM**](tvm-insertitem.md) or [**TVM\_SETITEM**](tvm-setitem.md) message.</span></span> <span data-ttu-id="623da-273">Estos mensajes usan la estructura [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) para especificar índices de lista de imágenes para un elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-273">These messages use the [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) structure to specify image list indexes for an item.</span></span>

<span data-ttu-id="623da-274">Para especificar imágenes seleccionadas y no seleccionadas de un elemento, establezca los bits de \_ imagen TVIF SELECTEDIMAGE y TVIF \_ en el miembro **Mask** de la estructura [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) y especifique los índices de la lista de imágenes normal del control en los miembros **iSelectImage** y **iImage** .</span><span class="sxs-lookup"><span data-stu-id="623da-274">To specify an item's selected and nonselected images, set the TVIF\_SELECTEDIMAGE and TVIF\_IMAGE bits in the **mask** member of the [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) structure and specify indexes from the control's normal image list in the **iSelectImage** and **iImage** members.</span></span> <span data-ttu-id="623da-275">Como alternativa, puede especificar el valor I \_ IMAGECALLBACK en **ISelectImage** y **iImage** en lugar de especificar los índices.</span><span class="sxs-lookup"><span data-stu-id="623da-275">Alternatively, you can specify the I\_IMAGECALLBACK value in **iSelectImage** and **iImage** instead of specifying indexes.</span></span> <span data-ttu-id="623da-276">Esto hace que el control consulte su ventana primaria para obtener un índice de la lista de imágenes cada vez que se vuelva a dibujar el elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-276">This causes the control to query its parent window for an image list index each time the item is about to be redrawn.</span></span> <span data-ttu-id="623da-277">El control envía el mensaje de notificación [TVN \_ GETDISPINFO](tvn-getdispinfo.md) para recuperar el índice.</span><span class="sxs-lookup"><span data-stu-id="623da-277">The control sends the [TVN\_GETDISPINFO](tvn-getdispinfo.md) notification message to retrieve the index.</span></span>

<span data-ttu-id="623da-278">Para asociar una imagen de superposición a un elemento, use la macro [**INDEXTOOVERLAYMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) para especificar un índice de máscara de superposición en el miembro **State** de la estructura [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) del elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-278">To associate an overlay image with an item, use the [**INDEXTOOVERLAYMASK**](/windows/desktop/api/Commctrl/nf-commctrl-indextooverlaymask) macro to specify an overlay mask index in the **state** member of the item's [**TVITEM**](/windows/win32/api/commctrl/ns-commctrl-tvitema) structure.</span></span> <span data-ttu-id="623da-279">También debe establecer los bits [**TVIS \_ OVERLAYMASK**](tree-view-control-item-states.md) en el miembro **stateMask** .</span><span class="sxs-lookup"><span data-stu-id="623da-279">You must also set the [**TVIS\_OVERLAYMASK**](tree-view-control-item-states.md) bits in the **stateMask** member.</span></span> <span data-ttu-id="623da-280">Los índices de máscara superpuestas están basados en uno; un índice de cero indica que no se ha especificado ninguna imagen de superposición.</span><span class="sxs-lookup"><span data-stu-id="623da-280">Overlay mask indexes are one-based; an index of zero indicates that no overlay image was specified.</span></span>

<span data-ttu-id="623da-281">Las imágenes de estado se almacenan en una lista de imágenes de estado independiente y se identifican por su índice.</span><span class="sxs-lookup"><span data-stu-id="623da-281">State images are stored in a separate state image list and identified by their index.</span></span> <span data-ttu-id="623da-282">Para especificar la lista de imágenes de estado, envíe un mensaje [**TVM \_ SETIMAGELIST**](tvm-setimagelist.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-282">To specify the state image list, send a [**TVM\_SETIMAGELIST**](tvm-setimagelist.md) message.</span></span> <span data-ttu-id="623da-283">A diferencia del control de vista de lista, que utiliza un índice basado en uno para identificar imágenes de estado, las imágenes de estado de control de vista de árbol se identifican mediante un índice basado en cero.</span><span class="sxs-lookup"><span data-stu-id="623da-283">Unlike the list-view control, which uses a one-based index to identify state images, tree-view control state images are identified by a zero-based index.</span></span> <span data-ttu-id="623da-284">Sin embargo, un índice de cero indica que el elemento no tiene una imagen de estado.</span><span class="sxs-lookup"><span data-stu-id="623da-284">However, an index of zero indicates that the item does not have a state image.</span></span> <span data-ttu-id="623da-285">Por lo tanto, la imagen cero no se puede usar como una imagen de estado.</span><span class="sxs-lookup"><span data-stu-id="623da-285">Consequently, image zero cannot be used as a state image.</span></span> <span data-ttu-id="623da-286">Para obtener más información sobre los Estados de los elementos y las imágenes de estado, consulte [información general sobre los Estados de los elementos de vista de árbol](#tree-view-item-states-overview).</span><span class="sxs-lookup"><span data-stu-id="623da-286">For further discussion of item states and state images, see [Tree-View Item States Overview](#tree-view-item-states-overview).</span></span>

## <a name="drag-and-drop-operations"></a><span data-ttu-id="623da-287">Operaciones de arrastrar y colocar</span><span class="sxs-lookup"><span data-stu-id="623da-287">Drag-and-Drop Operations</span></span>

<span data-ttu-id="623da-288">Un control de vista de árbol notifica a la ventana primaria cuando el usuario empieza a arrastrar un elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-288">A tree-view control notifies the parent window when the user starts to drag an item.</span></span> <span data-ttu-id="623da-289">La ventana primaria recibe un mensaje de notificación de [TVN \_ BEGINDRAG](tvn-begindrag.md) cuando el usuario comienza a arrastrar un elemento con el botón primario del mouse y un mensaje de notificación de [TVN \_ BEGINRDRAG](tvn-beginrdrag.md) cuando el usuario comienza a arrastrar con el botón derecho.</span><span class="sxs-lookup"><span data-stu-id="623da-289">The parent window receives a [TVN\_BEGINDRAG](tvn-begindrag.md) notification message when the user begins dragging an item with the left mouse button and a [TVN\_BEGINRDRAG](tvn-beginrdrag.md) notification message when the user begins dragging with the right button.</span></span> <span data-ttu-id="623da-290">Puede impedir que un control de vista de árbol Envíe estas notificaciones proporcionando el estilo [**\_ DISABLEDRAGDROP de los televisores**](tree-view-control-window-styles.md) al control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-290">You can prevent a tree-view control from sending these notifications by giving the tree-view control the [**TVS\_DISABLEDRAGDROP**](tree-view-control-window-styles.md) style.</span></span>

<span data-ttu-id="623da-291">Se obtiene una imagen para mostrar durante una operación de arrastre mediante el mensaje [**TVM \_ CREATEDRAGIMAGE**](tvm-createdragimage.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-291">You obtain an image to display during a drag operation by using the [**TVM\_CREATEDRAGIMAGE**](tvm-createdragimage.md) message.</span></span> <span data-ttu-id="623da-292">El control de vista de árbol crea un mapa de bits de arrastre basado en la etiqueta del elemento que se está arrastrando.</span><span class="sxs-lookup"><span data-stu-id="623da-292">The tree-view control creates a dragging bitmap based on the label of the item being dragged.</span></span> <span data-ttu-id="623da-293">Después, el control de vista de árbol crea una lista de imágenes, le agrega el mapa de bits y devuelve el identificador de la lista de imágenes.</span><span class="sxs-lookup"><span data-stu-id="623da-293">Then the tree-view control creates an image list, adds the bitmap to it, and returns the handle to the image list.</span></span>

<span data-ttu-id="623da-294">Debe proporcionar el código que realmente arrastra el elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-294">You must provide the code that actually drags the item.</span></span> <span data-ttu-id="623da-295">Normalmente, esto implica el uso de las funciones de arrastre de las funciones de la lista de imágenes y el procesamiento de los mensajes de [**WM \_ MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) y [**WM \_ LBUTTONUP**](/windows/desktop/inputdev/wm-lbuttonup) (o [**WM \_ RBUTTONUP**](/windows/desktop/inputdev/wm-rbuttonup)) enviados a la ventana primaria una vez iniciada la operación de arrastre.</span><span class="sxs-lookup"><span data-stu-id="623da-295">This typically involves using the dragging capabilities of the image list functions and processing the [**WM\_MOUSEMOVE**](/windows/desktop/inputdev/wm-mousemove) and [**WM\_LBUTTONUP**](/windows/desktop/inputdev/wm-lbuttonup) (or [**WM\_RBUTTONUP**](/windows/desktop/inputdev/wm-rbuttonup)) messages sent to the parent window after the drag operation has begun.</span></span>

<span data-ttu-id="623da-296">Si los elementos de un control de vista de árbol son los destinos de las operaciones de arrastrar y colocar, debe saber cuándo está el puntero del mouse en un elemento de destino.</span><span class="sxs-lookup"><span data-stu-id="623da-296">If items in a tree-view control are to be the targets of drag-and-drop operations, you need to know when the mouse pointer is on a target item.</span></span> <span data-ttu-id="623da-297">Puede averiguar mediante el mensaje [**TVM \_ HITTEST**](tvm-hittest.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-297">You can find out by using the [**TVM\_HITTEST**](tvm-hittest.md) message.</span></span> <span data-ttu-id="623da-298">Se especifica la dirección de una estructura [**TVHITTESTINFO**](/windows/win32/api/commctrl/ns-commctrl-tvhittestinfo) que contiene las coordenadas actuales del puntero del mouse.</span><span class="sxs-lookup"><span data-stu-id="623da-298">You specify the address of a [**TVHITTESTINFO**](/windows/win32/api/commctrl/ns-commctrl-tvhittestinfo) structure that contains the current coordinates of the mouse pointer.</span></span> <span data-ttu-id="623da-299">Cuando se devuelve la función [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) , la estructura contiene una marca que indica la ubicación del puntero del mouse en relación con el control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-299">When the [**SendMessage**](/windows/desktop/api/winuser/nf-winuser-sendmessage) function returns, the structure contains a flag indicating the location of the mouse pointer relative to the tree-view control.</span></span> <span data-ttu-id="623da-300">Si el puntero se encuentra sobre un elemento en el control de vista de árbol, la estructura contiene también el identificador del elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-300">If the pointer is over an item in the tree-view control, the structure contains the handle to the item as well.</span></span>

<span data-ttu-id="623da-301">Puede indicar que un elemento es el destino de una operación de arrastrar y colocar mediante el mensaje [**TVM \_ SETITEM**](tvm-setitem.md) para establecer el estado en el valor de [**TVIS \_ DROPHILITED**](tree-view-control-item-states.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-301">You can indicate that an item is the target of a drag-and-drop operation by using the [**TVM\_SETITEM**](tvm-setitem.md) message to set the state to the [**TVIS\_DROPHILITED**](tree-view-control-item-states.md) value.</span></span> <span data-ttu-id="623da-302">Un elemento que tiene este estado se dibuja en el estilo utilizado para indicar un destino de arrastrar y colocar.</span><span class="sxs-lookup"><span data-stu-id="623da-302">An item that has this state is drawn in the style used to indicate a drag-and-drop target.</span></span>

## <a name="tree-view-control-notification-messages"></a><span data-ttu-id="623da-303">Tree-View de mensajes de notificación de control</span><span class="sxs-lookup"><span data-stu-id="623da-303">Tree-View Control Notification Messages</span></span>

<span data-ttu-id="623da-304">Un control de vista de árbol envía los siguientes mensajes de notificación a su ventana primaria en forma de mensajes de notificación de [**WM \_**](wm-notify.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-304">A tree-view control sends the following notification messages to its parent window in the form of [**WM\_NOTIFY**](wm-notify.md) messages.</span></span>



| <span data-ttu-id="623da-305">notificación</span><span class="sxs-lookup"><span data-stu-id="623da-305">Notification</span></span>                                    | <span data-ttu-id="623da-306">Descripción</span><span class="sxs-lookup"><span data-stu-id="623da-306">Description</span></span>                                                                            |
|-------------------------------------------------|----------------------------------------------------------------------------------------|
| [<span data-ttu-id="623da-307">TVN \_ BEGINDRAG</span><span class="sxs-lookup"><span data-stu-id="623da-307">TVN\_BEGINDRAG</span></span>](tvn-begindrag.md)             | <span data-ttu-id="623da-308">Indica el inicio de una operación de arrastrar y colocar.</span><span class="sxs-lookup"><span data-stu-id="623da-308">Signals the start of a drag-and-drop operation.</span></span>                                        |
| <span data-ttu-id="623da-309">[TVN \_ BEGINLABELEDIT](tvn-beginlabeledit.md)  </span><span class="sxs-lookup"><span data-stu-id="623da-309">[TVN\_BEGINLABELEDIT](tvn-beginlabeledit.md)  </span></span> | <span data-ttu-id="623da-310">Señala el inicio de la edición de etiquetas en contexto.</span><span class="sxs-lookup"><span data-stu-id="623da-310">Signals the start of in-place label editing.</span></span>                                           |
| [<span data-ttu-id="623da-311">TVN \_ BEGINRDRAG</span><span class="sxs-lookup"><span data-stu-id="623da-311">TVN\_BEGINRDRAG</span></span>](tvn-beginrdrag.md)           | <span data-ttu-id="623da-312">Indica que el botón secundario del mouse ha iniciado una operación de arrastrar y colocar.</span><span class="sxs-lookup"><span data-stu-id="623da-312">Signals that the right mouse button has started a drag-and-drop operation.</span></span>             |
| [<span data-ttu-id="623da-313">TVN \_ DELETEITEM</span><span class="sxs-lookup"><span data-stu-id="623da-313">TVN\_DELETEITEM</span></span>](tvn-deleteitem.md)           | <span data-ttu-id="623da-314">Indica la eliminación de un elemento específico.</span><span class="sxs-lookup"><span data-stu-id="623da-314">Signals the deletion of a specific item.</span></span>                                               |
| [<span data-ttu-id="623da-315">TVN \_ ENDLABELEDIT</span><span class="sxs-lookup"><span data-stu-id="623da-315">TVN\_ENDLABELEDIT</span></span>](tvn-endlabeledit.md)       | <span data-ttu-id="623da-316">Señala el final de la edición de la etiqueta.</span><span class="sxs-lookup"><span data-stu-id="623da-316">Signals the end of label editing.</span></span>                                                      |
| [<span data-ttu-id="623da-317">TVN \_ GETDISPINFO</span><span class="sxs-lookup"><span data-stu-id="623da-317">TVN\_GETDISPINFO</span></span>](tvn-getdispinfo.md)         | <span data-ttu-id="623da-318">Solicita información que el control de vista de árbol requiere para mostrar un elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-318">Requests information that the tree-view control requires to display an item.</span></span>           |
| [<span data-ttu-id="623da-319">TVN \_ ITEMEXPANDED</span><span class="sxs-lookup"><span data-stu-id="623da-319">TVN\_ITEMEXPANDED</span></span>](tvn-itemexpanded.md)       | <span data-ttu-id="623da-320">Indica que la lista de elementos secundarios de un elemento primario se ha expandido o contraído.</span><span class="sxs-lookup"><span data-stu-id="623da-320">Signals that a parent item's list of child items was expanded or collapsed.</span></span>            |
| [<span data-ttu-id="623da-321">TVN \_ ITEMEXPANDING</span><span class="sxs-lookup"><span data-stu-id="623da-321">TVN\_ITEMEXPANDING</span></span>](tvn-itemexpanding.md)     | <span data-ttu-id="623da-322">Indica que la lista de elementos secundarios de un elemento primario está a punto de expandirse o contraerse.</span><span class="sxs-lookup"><span data-stu-id="623da-322">Signals that a parent item's list of child items is about to be expanded or collapsed.</span></span> |
| [<span data-ttu-id="623da-323">TVN ( \_ KEYDOWN)</span><span class="sxs-lookup"><span data-stu-id="623da-323">TVN\_KEYDOWN</span></span>](tvn-keydown.md)                 | <span data-ttu-id="623da-324">Señala un evento de teclado.</span><span class="sxs-lookup"><span data-stu-id="623da-324">Signals a keyboard event.</span></span>                                                              |
| [<span data-ttu-id="623da-325">TVN \_ SELCHANGED</span><span class="sxs-lookup"><span data-stu-id="623da-325">TVN\_SELCHANGED</span></span>](tvn-selchanged.md)           | <span data-ttu-id="623da-326">Indica que la selección ha cambiado de un elemento a otro.</span><span class="sxs-lookup"><span data-stu-id="623da-326">Signals that the selection has changed from one item to another.</span></span>                       |
| [<span data-ttu-id="623da-327">TVN \_ SELCHANGING</span><span class="sxs-lookup"><span data-stu-id="623da-327">TVN\_SELCHANGING</span></span>](tvn-selchanging.md)         | <span data-ttu-id="623da-328">Indica que la selección está a punto de cambiarse de un elemento a otro.</span><span class="sxs-lookup"><span data-stu-id="623da-328">Signals that the selection is about to be changed from one item to another.</span></span>            |
| [<span data-ttu-id="623da-329">TVN \_ SETDISPINFO</span><span class="sxs-lookup"><span data-stu-id="623da-329">TVN\_SETDISPINFO</span></span>](tvn-setdispinfo.md)         | <span data-ttu-id="623da-330">Notifica a una ventana primaria que debe actualizar la información que mantiene para un elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-330">Notifies a parent window that it must update the information it maintains for an item.</span></span> |



 

## <a name="default-tree-view-control-message-processing"></a><span data-ttu-id="623da-331">Procesamiento de mensajes de control de Tree-View predeterminado</span><span class="sxs-lookup"><span data-stu-id="623da-331">Default Tree-View Control Message Processing</span></span>

<span data-ttu-id="623da-332">En esta sección se describe el procesamiento de mensajes de ventana que realiza un control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-332">This section describes the window message processing performed by a tree-view control.</span></span> <span data-ttu-id="623da-333">Los mensajes específicos de los controles de vista de árbol se describen en otras secciones de este documento, por lo que no se incluyen aquí.</span><span class="sxs-lookup"><span data-stu-id="623da-333">Messages specific to tree-view controls are discussed in other sections of this document, so they are not included here.</span></span>



| <span data-ttu-id="623da-334">Message</span><span class="sxs-lookup"><span data-stu-id="623da-334">Message</span></span>                                            | <span data-ttu-id="623da-335">Procesamiento realizado</span><span class="sxs-lookup"><span data-stu-id="623da-335">Processing performed</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="623da-336">**comando de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-336">**WM\_COMMAND**</span></span>](/windows/desktop/menurc/wm-command)               | <span data-ttu-id="623da-337">Procesa los mensajes de notificación del control [en la \_ actualización](en-update.md) y [en \_ KILLFOCUS](en-killfocus.md) y reenvía todas las demás notificaciones del control de edición a la ventana primaria.</span><span class="sxs-lookup"><span data-stu-id="623da-337">Processes the [EN\_UPDATE](en-update.md) and [EN\_KILLFOCUS](en-killfocus.md) edit control notification messages and forwards all other edit control notifications to the parent window.</span></span> <span data-ttu-id="623da-338">No hay ningún valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="623da-338">There is no return value.</span></span>                                                                                                                                                                                                                                                                                                |
| [<span data-ttu-id="623da-339">**creación de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-339">**WM\_CREATE**</span></span>](/windows/desktop/winmsg/wm-create)                 | <span data-ttu-id="623da-340">Asigna memoria e inicializa estructuras de datos internas.</span><span class="sxs-lookup"><span data-stu-id="623da-340">Allocates memory and initializes internal data structures.</span></span> <span data-ttu-id="623da-341">Devuelve cero si es correcto o-1 en caso contrario.</span><span class="sxs-lookup"><span data-stu-id="623da-341">It returns zero if successful, or -1 otherwise.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="623da-342">**destrucción de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-342">**WM\_DESTROY**</span></span>](/windows/desktop/winmsg/wm-destroy)               | <span data-ttu-id="623da-343">Libera todos los recursos del sistema asociados al control.</span><span class="sxs-lookup"><span data-stu-id="623da-343">Frees all system resources associated with the control.</span></span> <span data-ttu-id="623da-344">Devuelve cero.</span><span class="sxs-lookup"><span data-stu-id="623da-344">It returns zero.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [<span data-ttu-id="623da-345">**\_habilitación de WM**</span><span class="sxs-lookup"><span data-stu-id="623da-345">**WM\_ENABLE**</span></span>](/windows/desktop/winmsg/wm-enable)                 | <span data-ttu-id="623da-346">Habilita o deshabilita el control.</span><span class="sxs-lookup"><span data-stu-id="623da-346">Enables or disables the control.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| [<span data-ttu-id="623da-347">**ERASEBKGND de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-347">**WM\_ERASEBKGND**</span></span>](/windows/desktop/winmsg/wm-erasebkgnd)         | <span data-ttu-id="623da-348">Borra el fondo de la ventana con el color de fondo actual del control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-348">Erases the window background using the current background color for the tree-view control.</span></span> <span data-ttu-id="623da-349">Devuelve **true**.</span><span class="sxs-lookup"><span data-stu-id="623da-349">It returns **TRUE**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="623da-350">**GETDLGCODE de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-350">**WM\_GETDLGCODE**</span></span>](/windows/desktop/dlgbox/wm-getdlgcode)         | <span data-ttu-id="623da-351">Devuelve una combinación de los valores de DLGC \_ WANTARROWS y DLGC \_ WANTCHARS.</span><span class="sxs-lookup"><span data-stu-id="623da-351">Returns a combination of the DLGC\_WANTARROWS and DLGC\_WANTCHARS values.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [<span data-ttu-id="623da-352">**GETFONT de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-352">**WM\_GETFONT**</span></span>](/windows/desktop/winmsg/wm-getfont)               | <span data-ttu-id="623da-353">Devuelve el identificador de la fuente de la etiqueta actual.</span><span class="sxs-lookup"><span data-stu-id="623da-353">Returns the handle to the current label font.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [<span data-ttu-id="623da-354">**HSCROLL de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-354">**WM\_HSCROLL**</span></span>](wm-hscroll.md)                  | <span data-ttu-id="623da-355">Desplaza el control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-355">Scrolls the tree-view control.</span></span> <span data-ttu-id="623da-356">Devuelve **true** si se produce el desplazamiento o **false** en caso contrario.</span><span class="sxs-lookup"><span data-stu-id="623da-356">It returns **TRUE** if scrolling occurs, or **FALSE** otherwise.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="623da-357">**KEYDOWN de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-357">**WM\_KEYDOWN**</span></span>](/windows/desktop/inputdev/wm-keydown)             | <span data-ttu-id="623da-358">Envía el mensaje de notificación [ \_ KEYDOWN TVN](tvn-keydown.md) a la ventana primaria para todas las claves.</span><span class="sxs-lookup"><span data-stu-id="623da-358">Sends the [TVN\_KEYDOWN](tvn-keydown.md) notification message to the parent window for all keys.</span></span> <span data-ttu-id="623da-359">Envía el mensaje de notificación de [devolución de nm \_ (vista de árbol)](nm-return-tree-view-.md) cuando el usuario presiona la tecla entrar.</span><span class="sxs-lookup"><span data-stu-id="623da-359">Sends the [NM\_RETURN (tree view)](nm-return-tree-view-.md) notification message when the user presses the ENTER key.</span></span> <span data-ttu-id="623da-360">Mueve el símbolo de intercalación cuando el usuario presiona las teclas de dirección o la tecla RE PÁG, Av Pág, Inicio, final o retroceso.</span><span class="sxs-lookup"><span data-stu-id="623da-360">It moves the caret when the user presses the direction keys or the PAGE UP, PAGE DOWN, HOME, END, or BACKSPACE key.</span></span> <span data-ttu-id="623da-361">Desplaza el control de vista de árbol cuando el usuario presiona la tecla CTRL junto con esas teclas.</span><span class="sxs-lookup"><span data-stu-id="623da-361">It scrolls the tree-view control when the user presses the CTRL key in combination with those keys.</span></span> <span data-ttu-id="623da-362">Devuelve **true** si se procesa una clave o **false** en caso contrario.</span><span class="sxs-lookup"><span data-stu-id="623da-362">It returns **TRUE** if a key is processed, or **FALSE** otherwise.</span></span> |
| [<span data-ttu-id="623da-363">**KILLFOCUS de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-363">**WM\_KILLFOCUS**</span></span>](/windows/desktop/inputdev/wm-killfocus)         | <span data-ttu-id="623da-364">Vuelve a dibujar el elemento que tiene el foco, si existe, y envía un mensaje de notificación de [ \_ KILLFOCUS (vista de árbol) de nm](nm-killfocus-tree-view.md) a la ventana primaria.</span><span class="sxs-lookup"><span data-stu-id="623da-364">Repaints the focused item, if any, and sends an [NM\_KILLFOCUS (tree view)](nm-killfocus-tree-view.md) notification message to the parent window.</span></span>                                                                                                                                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="623da-365">**LBUTTONDBLCLK de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-365">**WM\_LBUTTONDBLCLK**</span></span>](/windows/desktop/inputdev/wm-lbuttondblclk) | <span data-ttu-id="623da-366">Cancela la edición de etiquetas y, si se hizo doble clic en un elemento, envía el mensaje de notificación de [ \_ DBLCLK (vista de árbol) de nm](nm-dblclk-tree-view.md) a la ventana primaria.</span><span class="sxs-lookup"><span data-stu-id="623da-366">Cancels label editing and, if an item was double-clicked, sends the [NM\_DBLCLK (tree view)](nm-dblclk-tree-view.md) notification message to the parent window.</span></span> <span data-ttu-id="623da-367">Si la ventana primaria devuelve 0, el control de vista de árbol alterna el estado expandido del elemento y envía a la ventana primaria los mensajes de notificación [TVN \_ ITEMEXPANDING](tvn-itemexpanding.md) y [TVN \_ ITEMEXPANDED](tvn-itemexpanded.md) .</span><span class="sxs-lookup"><span data-stu-id="623da-367">If the parent window returns 0, the tree-view control toggles the expanded state of the item, sending the parent window the [TVN\_ITEMEXPANDING](tvn-itemexpanding.md) and [TVN\_ITEMEXPANDED](tvn-itemexpanded.md) notification messages.</span></span> <span data-ttu-id="623da-368">No hay ningún valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="623da-368">There is no return value.</span></span>                                                                             |
| [<span data-ttu-id="623da-369">**LBUTTONDOWN de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-369">**WM\_LBUTTONDOWN**</span></span>](/windows/desktop/inputdev/wm-lbuttondown)     | <span data-ttu-id="623da-370">Alterna el estado expandido si el usuario hizo clic en el botón asociado a un elemento primario.</span><span class="sxs-lookup"><span data-stu-id="623da-370">Toggles the expanded state if the user clicked the button associated with a parent item.</span></span> <span data-ttu-id="623da-371">Si el usuario hizo clic en una etiqueta de elemento, el control de vista de árbol selecciona y establece el foco en el elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-371">If the user clicked an item label, the tree-view control selects and sets the focus to the item.</span></span> <span data-ttu-id="623da-372">Si el usuario mueve el mouse antes de soltar el botón del mouse, el control de vista de árbol inicia una operación de arrastrar y colocar.</span><span class="sxs-lookup"><span data-stu-id="623da-372">If the user moves the mouse before releasing the mouse button, the tree-view control begins a drag-and-drop operation.</span></span> <span data-ttu-id="623da-373">No hay ningún valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="623da-373">There is no return value.</span></span>                                                                                                                                                                          |
| [<span data-ttu-id="623da-374">**pintura de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-374">**WM\_PAINT**</span></span>](/windows/desktop/gdi/wm-paint)                      | <span data-ttu-id="623da-375">Pinta la región no válida del control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-375">Paints the invalid region of the tree-view control.</span></span> <span data-ttu-id="623da-376">Devuelve cero.</span><span class="sxs-lookup"><span data-stu-id="623da-376">It returns zero.</span></span> <span data-ttu-id="623da-377">Si el parámetro *wParam* no es **null**, el control supone que el valor es un identificador de un contexto de dispositivo (HDC) y dibuja usando ese contexto de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="623da-377">If the *wParam* parameter is non-**NULL**, the control assumes that the value is a handle to a device context (HDC) and paints using that device context.</span></span>                                                                                                                                                                                                                                                                                      |
| [<span data-ttu-id="623da-378">**RBUTTONDOWN de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-378">**WM\_RBUTTONDOWN**</span></span>](/windows/desktop/inputdev/wm-rbuttondown)     | <span data-ttu-id="623da-379">Comprueba si se hizo clic en un elemento y se inició una operación de arrastre.</span><span class="sxs-lookup"><span data-stu-id="623da-379">Checks to see if an item was clicked and a drag operation was begun.</span></span> <span data-ttu-id="623da-380">Si se ha iniciado la operación, envía un mensaje de notificación [TVN \_ BEGINRDRAG](tvn-beginrdrag.md) a la ventana primaria y resalta el destino de colocación.</span><span class="sxs-lookup"><span data-stu-id="623da-380">If the operation has begun, it sends a [TVN\_BEGINRDRAG](tvn-beginrdrag.md) notification message to the parent window and highlights the drop target.</span></span> <span data-ttu-id="623da-381">De lo contrario, envía un mensaje de notificación de [ \_ RCLICK (vista de árbol) de nm](nm-rclick-tree-view.md) a la ventana primaria.</span><span class="sxs-lookup"><span data-stu-id="623da-381">Otherwise, it sends an [NM\_RCLICK (tree view)](nm-rclick-tree-view.md) notification message to the parent window.</span></span> <span data-ttu-id="623da-382">No hay ningún valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="623da-382">There is no return value.</span></span>                                                                                                                                           |
| [<span data-ttu-id="623da-383">**SETFOCUS de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-383">**WM\_SETFOCUS**</span></span>](/windows/desktop/inputdev/wm-setfocus)           | <span data-ttu-id="623da-384">Vuelve a dibujar el elemento enfocado, si existe, y envía un mensaje de notificación de [ \_ SETFOCUS de nm](nm-setfocus.md) a la ventana primaria.</span><span class="sxs-lookup"><span data-stu-id="623da-384">Repaints the focused item, if any, and sends an [NM\_SETFOCUS](nm-setfocus.md) notification message to the parent window.</span></span>                                                                                                                                                                                                                                                                                                                                                                                          |
| [<span data-ttu-id="623da-385">**WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-385">**WM\_SETFONT**</span></span>](/windows/desktop/winmsg/wm-setfont)               | <span data-ttu-id="623da-386">Guarda el identificador de fuente especificado y vuelve a dibujar el control de vista de árbol con la nueva fuente.</span><span class="sxs-lookup"><span data-stu-id="623da-386">Saves the specified font handle and repaints the tree-view control using the new font.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                              |
| [<span data-ttu-id="623da-387">**SETREDRAW de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-387">**WM\_SETREDRAW**</span></span>](/windows/desktop/gdi/wm-setredraw)              | <span data-ttu-id="623da-388">Establece o borra la marca de volver a dibujar.</span><span class="sxs-lookup"><span data-stu-id="623da-388">Sets or clears the redraw flag.</span></span> <span data-ttu-id="623da-389">El control de vista de árbol se vuelve a dibujar cuando se establece la marca de volver a dibujar.</span><span class="sxs-lookup"><span data-stu-id="623da-389">The tree-view control is redrawn after the redraw flag is set.</span></span> <span data-ttu-id="623da-390">Devuelve cero.</span><span class="sxs-lookup"><span data-stu-id="623da-390">It returns zero.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                     |
| [<span data-ttu-id="623da-391">**tamaño de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-391">**WM\_SIZE**</span></span>](/windows/desktop/winmsg/wm-size)                     | <span data-ttu-id="623da-392">Vuelve a calcular las variables internas que dependen del tamaño del área cliente del control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-392">Recomputes internal variables that depend on the size of the tree-view control's client area.</span></span> <span data-ttu-id="623da-393">Devuelve **true**.</span><span class="sxs-lookup"><span data-stu-id="623da-393">It returns **TRUE**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                  |
| [<span data-ttu-id="623da-394">**STYLECHANGED de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-394">**WM\_STYLECHANGED**</span></span>](/windows/desktop/winmsg/wm-stylechanged)     | <span data-ttu-id="623da-395">Cancela la edición de etiquetas y vuelve a dibujar el control de vista de árbol con los nuevos estilos.</span><span class="sxs-lookup"><span data-stu-id="623da-395">Cancels label editing and redraws the tree-view control using the new styles.</span></span> <span data-ttu-id="623da-396">Devuelve cero.</span><span class="sxs-lookup"><span data-stu-id="623da-396">It returns zero.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [<span data-ttu-id="623da-397">**SYSCOLORCHANGE de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-397">**WM\_SYSCOLORCHANGE**</span></span>](/windows/desktop/gdi/wm-syscolorchange)    | <span data-ttu-id="623da-398">Vuelve a dibujar el control de vista de árbol usando el nuevo color si se establece la marca de volver a dibujar.</span><span class="sxs-lookup"><span data-stu-id="623da-398">Redraws the tree-view control using the new color if the redraw flag is set.</span></span> <span data-ttu-id="623da-399">No hay ningún valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="623da-399">There is no return value.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                              |
| [<span data-ttu-id="623da-400">**temporizador de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-400">**WM\_TIMER**</span></span>](/windows/desktop/winmsg/wm-timer)                   | <span data-ttu-id="623da-401">Comienza a editar una etiqueta de elemento.</span><span class="sxs-lookup"><span data-stu-id="623da-401">Begins editing an item label.</span></span> <span data-ttu-id="623da-402">Si el usuario hace clic en la etiqueta del elemento enfocado, el control de vista de árbol establece un temporizador en lugar de entrar en el modo de edición inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="623da-402">If the user clicks the label of the focused item, the tree-view control sets a timer instead of entering edit mode immediately.</span></span> <span data-ttu-id="623da-403">El temporizador permite que la vista de árbol Evite entrar en el modo de edición si el usuario hace doble clic en la etiqueta.</span><span class="sxs-lookup"><span data-stu-id="623da-403">The timer makes it possible for the tree view to avoid entering edit mode if the user double-clicks the label.</span></span> <span data-ttu-id="623da-404">Devuelve cero.</span><span class="sxs-lookup"><span data-stu-id="623da-404">It returns zero.</span></span>                                                                                                                                                                                                                       |
| [<span data-ttu-id="623da-405">**VSCROLL de WM \_**</span><span class="sxs-lookup"><span data-stu-id="623da-405">**WM\_VSCROLL**</span></span>](wm-vscroll.md)                  | <span data-ttu-id="623da-406">Desplaza el control de vista de árbol.</span><span class="sxs-lookup"><span data-stu-id="623da-406">Scrolls the tree-view control.</span></span> <span data-ttu-id="623da-407">Devuelve **true** si se produce el desplazamiento o **false** en caso contrario.</span><span class="sxs-lookup"><span data-stu-id="623da-407">It returns **TRUE** if scrolling occurs, or **FALSE** otherwise.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                     |



 

## <a name="related-topics"></a><span data-ttu-id="623da-408">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="623da-408">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="623da-409">EJEMPLO: CustDTv ilustra el dibujo personalizado en una vista de árbol (Q248496)</span><span class="sxs-lookup"><span data-stu-id="623da-409">SAMPLE: CustDTv Illustrates Custom Draw in a TreeView (Q248496)</span></span>](https://support.microsoft.com/default.aspx?scid=kb;EN-US;q248496)
</dt> </dl>

 

 