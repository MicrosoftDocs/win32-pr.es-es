---
description: Los requisitos de contexto se expresan como una combinación de marcadores de bits que se pasan a la función InitializeSecurityContext (general) o AcceptSecurityContext (general).
ms.assetid: 4a44b829-4202-46c0-b17e-04943fa067ab
title: Requisitos de contexto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86af5f71557bdd53229b5c8ed6afc14dc24edb46
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104277343"
---
# <a name="context-requirements"></a><span data-ttu-id="4e553-103">Requisitos de contexto</span><span class="sxs-lookup"><span data-stu-id="4e553-103">Context Requirements</span></span>

<span data-ttu-id="4e553-104">Los requisitos de contexto se expresan como una combinación de marcadores de bits que se pasan a la función [**InitializeSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) o [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) .</span><span class="sxs-lookup"><span data-stu-id="4e553-104">Context requirements are expressed as a combination of bit flags passed to either the [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) or [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) function.</span></span> <span data-ttu-id="4e553-105">Estas marcas afectan al [*contexto*](/windows/desktop/SecGloss/c-gly) de varias maneras.</span><span class="sxs-lookup"><span data-stu-id="4e553-105">These flags affect the [*context*](/windows/desktop/SecGloss/c-gly) in a number of ways.</span></span> <span data-ttu-id="4e553-106">No todas las marcas se aplican a todos los contextos.</span><span class="sxs-lookup"><span data-stu-id="4e553-106">Not all flags apply to all contexts.</span></span> <span data-ttu-id="4e553-107">Algunos solo son válidos para el servidor, otros solo para el cliente.</span><span class="sxs-lookup"><span data-stu-id="4e553-107">Some are valid only for the server, others only for the client.</span></span>

<span data-ttu-id="4e553-108">El autor de la llamada usa el parámetro *fContextReq* de la llamada [**InitializeSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) o [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) para especificar un conjunto de marcas que indican las capacidades necesarias.</span><span class="sxs-lookup"><span data-stu-id="4e553-108">The caller uses the *fContextReq* parameter of the [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) or [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) call to specify a set of flags that indicate the required capabilities.</span></span> <span data-ttu-id="4e553-109">Cuando la función devuelve, el parámetro *pfContextAttr* indica los atributos del contexto establecido.</span><span class="sxs-lookup"><span data-stu-id="4e553-109">When the function returns, the *pfContextAttr* parameter indicates the attributes of the established context.</span></span> <span data-ttu-id="4e553-110">El autor de la llamada determina si los atributos de contexto finales son aceptables.</span><span class="sxs-lookup"><span data-stu-id="4e553-110">The caller determines whether the final context attributes are acceptable.</span></span>

<span data-ttu-id="4e553-111">Las marcas solicitadas o devueltas por [**InitializeSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) tienen el prefijo de ISC.</span><span class="sxs-lookup"><span data-stu-id="4e553-111">Flags requested from or returned by [**InitializeSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) are prefixed by ISC.</span></span> <span data-ttu-id="4e553-112">Los solicitados desde o devueltos por [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) tienen el prefijo ASC.</span><span class="sxs-lookup"><span data-stu-id="4e553-112">Those requested from or returned by [**AcceptSecurityContext (General)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) are prefixed by ASC.</span></span> <span data-ttu-id="4e553-113">Las marcas que se pasan a una función incluyen REQ, mientras que las marcas devueltas incluyen RET.</span><span class="sxs-lookup"><span data-stu-id="4e553-113">Flags passed into a function include REQ, while returned flags include RET.</span></span> <span data-ttu-id="4e553-114">Por ejemplo, una marca de solicitud para la autenticación mutua pasada a **InitializeSecurityContext (general)** es ISC \_ req \_ Mutual \_ auth.</span><span class="sxs-lookup"><span data-stu-id="4e553-114">For example, a request flag for mutual authentication passed to **InitializeSecurityContext (General)** is ISC\_REQ\_MUTUAL\_AUTH.</span></span> <span data-ttu-id="4e553-115">Un servidor que solicita autenticación mutua pasa ASC \_ req \_ Mutual \_ auth a **AcceptSecurityContext (general)**.</span><span class="sxs-lookup"><span data-stu-id="4e553-115">A server requesting mutual authentication passes ASC\_REQ\_MUTUAL\_AUTH to **AcceptSecurityContext (General)**.</span></span> <span data-ttu-id="4e553-116">Si se logra la autenticación mutua, **InitializeSecurityContext (general)** devuelve ISC \_ RET \_ Mutual \_ auth y **AcceptSecurityContext (general)** devuelve ASC \_ RET \_ Mutual \_ auth.</span><span class="sxs-lookup"><span data-stu-id="4e553-116">If mutual authentication is achieved, **InitializeSecurityContext (General)** returns ISC\_RET\_MUTUAL\_AUTH and **AcceptSecurityContext (General)** returns ASC\_RET\_MUTUAL\_AUTH.</span></span> <span data-ttu-id="4e553-117">Si el autor de la llamada solicita la autenticación mutua, pero el [*paquete de seguridad*](/windows/desktop/SecGloss/s-gly) indica que no se puede realizar, el autor de la llamada debe decidir si cancelar el contexto o continuar.</span><span class="sxs-lookup"><span data-stu-id="4e553-117">If the caller requests mutual authentication, but the [*security package*](/windows/desktop/SecGloss/s-gly) indicates that it cannot be performed, the caller must decide whether to cancel the context or continue.</span></span>

<span data-ttu-id="4e553-118">En la tabla siguiente se describen las distintas marcas de requisito de contexto.</span><span class="sxs-lookup"><span data-stu-id="4e553-118">The following table describes the various context requirement flags.</span></span>



| <span data-ttu-id="4e553-119">Marca</span><span class="sxs-lookup"><span data-stu-id="4e553-119">Flag</span></span>                             | <span data-ttu-id="4e553-120">Descripción</span><span class="sxs-lookup"><span data-stu-id="4e553-120">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="4e553-121">Delegado</span><span class="sxs-lookup"><span data-stu-id="4e553-121">DELEGATE</span></span><br/>              | <span data-ttu-id="4e553-122">El servidor de la aplicación de transporte puede crear nuevos contextos de seguridad que suplantan al cliente que serán aceptados por otros servidores como contextos del cliente.</span><span class="sxs-lookup"><span data-stu-id="4e553-122">The server in the transport application can build new security contexts impersonating the client that will be accepted by other servers as the client's contexts.</span></span> <span data-ttu-id="4e553-123">Delegate solo funciona si \_ se establece la autenticación mutua.</span><span class="sxs-lookup"><span data-stu-id="4e553-123">Delegate works only if MUTUAL\_AUTH is set.</span></span> <span data-ttu-id="4e553-124">El delegado solo se admite actualmente en [*Kerberos*](/windows/desktop/SecGloss/k-gly).</span><span class="sxs-lookup"><span data-stu-id="4e553-124">DELEGATE is currently supported only by [*Kerberos*](/windows/desktop/SecGloss/k-gly).</span></span> <span data-ttu-id="4e553-125">Además, Kerberos delegará solo en un servidor que tenga la marca \_ de confianza para la \_ delegación.</span><span class="sxs-lookup"><span data-stu-id="4e553-125">Further, Kerberos will delegate only to a server that has the flag TRUSTED\_FOR\_DELEGATION.</span></span> <span data-ttu-id="4e553-126">No use esta marca para la [*delegación restringida*](/windows/desktop/SecGloss/c-gly).</span><span class="sxs-lookup"><span data-stu-id="4e553-126">Do not use this flag for [*constrained delegation*](/windows/desktop/SecGloss/c-gly).</span></span><br/> |
| <span data-ttu-id="4e553-127">\_autenticación mutua</span><span class="sxs-lookup"><span data-stu-id="4e553-127">MUTUAL\_AUTH</span></span><br/>          | <span data-ttu-id="4e553-128">Las partes que se comunican deben autenticar sus identidades entre sí.</span><span class="sxs-lookup"><span data-stu-id="4e553-128">The communicating parties must authenticate their identities to each other.</span></span> <span data-ttu-id="4e553-129">Sin \_ la autenticación mutua, el cliente autentica su identidad en el servidor.</span><span class="sxs-lookup"><span data-stu-id="4e553-129">Without MUTUAL\_AUTH, the client authenticates its identity to the server.</span></span> <span data-ttu-id="4e553-130">Con \_ la autenticación mutua, el servidor también debe autenticar su identidad en el cliente.</span><span class="sxs-lookup"><span data-stu-id="4e553-130">With MUTUAL\_AUTH, the server also must authenticate its identity to the client.</span></span><br/> <span data-ttu-id="4e553-131">Cuando se usa el paquete de seguridad [*Schannel*](/windows/desktop/SecGloss/s-gly) , el servidor establece la constante de **\_ \_ \_ autenticación mutua de ASC RET** solo en la última llamada a [**AcceptSecurityContext (Negotiate)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), después de que la asignación de certificados se ha completado correctamente.</span><span class="sxs-lookup"><span data-stu-id="4e553-131">When using the [*Schannel*](/windows/desktop/SecGloss/s-gly) security package, the server sets the **ASC\_RET\_MUTUAL\_AUTH** constant only in the last call to [**AcceptSecurityContext (Negotiate)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), after certificate mapping has successfully completed.</span></span><br/>           |
| <span data-ttu-id="4e553-132">detección de reproducción \_</span><span class="sxs-lookup"><span data-stu-id="4e553-132">REPLAY\_DETECT</span></span><br/>        | <span data-ttu-id="4e553-133">El [*paquete de seguridad*](/windows/desktop/SecGloss/s-gly) detecta los paquetes reproducidos y notifica al autor de la llamada si se ha reproducido un paquete.</span><span class="sxs-lookup"><span data-stu-id="4e553-133">The [*security package*](/windows/desktop/SecGloss/s-gly) detects replayed packets and notifies the caller if a packet has been replayed.</span></span> <span data-ttu-id="4e553-134">El uso de esta marca implica todas las condiciones especificadas por la marca de integridad.</span><span class="sxs-lookup"><span data-stu-id="4e553-134">The use of this flag implies all of the conditions specified by the INTEGRITY flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="4e553-135">detección de secuencia \_</span><span class="sxs-lookup"><span data-stu-id="4e553-135">SEQUENCE\_DETECT</span></span><br/>      | <span data-ttu-id="4e553-136">El contexto debe estar autorizado para detectar la entrega desordenada de paquetes más adelante a través de las funciones de compatibilidad de mensajes.</span><span class="sxs-lookup"><span data-stu-id="4e553-136">The context must be allowed to detect out-of-order delivery of packets later through the message support functions.</span></span> <span data-ttu-id="4e553-137">El uso de esta marca implica todas las condiciones especificadas por la marca de integridad.</span><span class="sxs-lookup"><span data-stu-id="4e553-137">Use of this flag implies all of the conditions specified by the INTEGRITY flag.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="4e553-138">CONFIDENCIALIDAD</span><span class="sxs-lookup"><span data-stu-id="4e553-138">CONFIDENTIALITY</span></span><br/>       | <span data-ttu-id="4e553-139">El contexto puede proteger los datos mientras están en tránsito mediante las funciones [**EncryptMessage (general)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) y [**DecryptMessage (general)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) .</span><span class="sxs-lookup"><span data-stu-id="4e553-139">The context can protect data while in transit using the [**EncryptMessage (General)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) and [**DecryptMessage (General)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) functions.</span></span> <span data-ttu-id="4e553-140">La marca de CONFIDENCIALidad no funciona si el contexto generado es para la cuenta de invitado.</span><span class="sxs-lookup"><span data-stu-id="4e553-140">The CONFIDENTIALITY flag does not work if the generated context is for the Guest account.</span></span><br/>                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="4e553-141">USAR \_ clave de sesión \_</span><span class="sxs-lookup"><span data-stu-id="4e553-141">USE\_SESSION\_KEY</span></span><br/>     | <span data-ttu-id="4e553-142">Se debe negociar una nueva [*clave de sesión*](/windows/desktop/SecGloss/s-gly) .</span><span class="sxs-lookup"><span data-stu-id="4e553-142">A new [*session key*](/windows/desktop/SecGloss/s-gly) must be negotiated.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="4e553-143">SOLICITAR \_ \_ credenciales</span><span class="sxs-lookup"><span data-stu-id="4e553-143">PROMPT\_FOR\_CREDS</span></span><br/>    | <span data-ttu-id="4e553-144">Si el cliente es un usuario interactivo, el paquete de seguridad debe, si es posible, pedir al usuario las [*credenciales*](/windows/desktop/SecGloss/c-gly)adecuadas.</span><span class="sxs-lookup"><span data-stu-id="4e553-144">If the client is an interactive user, the security package must, if possible, prompt the user for the appropriate [*credentials*](/windows/desktop/SecGloss/c-gly).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                          |
| <span data-ttu-id="4e553-145">USAR \_ \_ credenciales proporcionadas</span><span class="sxs-lookup"><span data-stu-id="4e553-145">USE\_SUPPLIED\_CREDS</span></span><br/>  | <span data-ttu-id="4e553-146">La información de credenciales específica del paquete está disponible en el búfer de entrada.</span><span class="sxs-lookup"><span data-stu-id="4e553-146">Package-specific credential information is available in the input buffer.</span></span> <span data-ttu-id="4e553-147">El paquete de seguridad puede usar estas [*credenciales*](/windows/desktop/SecGloss/c-gly) para autenticar la conexión.</span><span class="sxs-lookup"><span data-stu-id="4e553-147">The security package can use these [*credentials*](/windows/desktop/SecGloss/c-gly) to authenticate the connection.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="4e553-148">GUARDAR \_ \_ credenciales proporcionadas</span><span class="sxs-lookup"><span data-stu-id="4e553-148">SAVE\_SUPPLIED\_CREDS</span></span><br/> | <span data-ttu-id="4e553-149">Las credenciales proporcionadas deben almacenarse en caché con las credenciales adicionales.</span><span class="sxs-lookup"><span data-stu-id="4e553-149">The supplied credentials should be cached with the supplemental credentials.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="4e553-150">ASIGNAR \_ memoria</span><span class="sxs-lookup"><span data-stu-id="4e553-150">ALLOCATE\_MEMORY</span></span><br/>      | <span data-ttu-id="4e553-151">El [*paquete de seguridad*](/windows/desktop/SecGloss/s-gly) debe asignar memoria.</span><span class="sxs-lookup"><span data-stu-id="4e553-151">The [*security package*](/windows/desktop/SecGloss/s-gly) must allocate memory.</span></span> <span data-ttu-id="4e553-152">El llamador debe llamar finalmente a la función [**FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) para liberar memoria asignada por el paquete de seguridad.</span><span class="sxs-lookup"><span data-stu-id="4e553-152">The caller must eventually call the [**FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) function to free memory allocated by the security package.</span></span><br/>                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="4e553-153">USAR \_ el \_ estilo DCE</span><span class="sxs-lookup"><span data-stu-id="4e553-153">USE\_DCE\_STYLE</span></span><br/>       | <span data-ttu-id="4e553-154">El autor de la llamada espera una [*transacción*](/windows/desktop/SecGloss/t-gly)de autenticación de tres tramos.</span><span class="sxs-lookup"><span data-stu-id="4e553-154">The caller expects a three-leg authentication [*transaction*](/windows/desktop/SecGloss/t-gly).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="4e553-155">DIAGRAMA</span><span class="sxs-lookup"><span data-stu-id="4e553-155">DATAGRAM</span></span><br/>              | <span data-ttu-id="4e553-156">Se debe usar la semántica de [*datagramas*](/windows/desktop/SecGloss/d-gly) .</span><span class="sxs-lookup"><span data-stu-id="4e553-156">[*Datagram*](/windows/desktop/SecGloss/d-gly) semantics must be used.</span></span> <span data-ttu-id="4e553-157">Para obtener más información, vea [contextos de datagramas](datagram-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="4e553-157">For more information, see [Datagram Contexts](datagram-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="4e553-158">CONNECTION</span><span class="sxs-lookup"><span data-stu-id="4e553-158">CONNECTION</span></span><br/>            | <span data-ttu-id="4e553-159">Se debe usar la semántica de conexión.</span><span class="sxs-lookup"><span data-stu-id="4e553-159">Connection semantics must be used.</span></span> <span data-ttu-id="4e553-160">Para obtener más información, vea [contextos orientados a conexiones](connection-oriented-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="4e553-160">For more information, see [Connection-Oriented Contexts](connection-oriented-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <span data-ttu-id="4e553-161">Stream</span><span class="sxs-lookup"><span data-stu-id="4e553-161">STREAM</span></span><br/>                | <span data-ttu-id="4e553-162">Se debe usar la semántica de secuencia.</span><span class="sxs-lookup"><span data-stu-id="4e553-162">Stream semantics must be used.</span></span> <span data-ttu-id="4e553-163">Para obtener más información, vea [contextos de secuencia](stream-contexts.md).</span><span class="sxs-lookup"><span data-stu-id="4e553-163">For more information, see [Stream Contexts](stream-contexts.md).</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <span data-ttu-id="4e553-164">\_error extendido</span><span class="sxs-lookup"><span data-stu-id="4e553-164">EXTENDED\_ERROR</span></span><br/>       | <span data-ttu-id="4e553-165">Se deben generar mensajes de respuesta de error para el elemento del mismo nivel si se produce un error en el contexto.</span><span class="sxs-lookup"><span data-stu-id="4e553-165">Error reply messages for the peer must be generated if the context fails.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="4e553-166">INTEGRACIÓN</span><span class="sxs-lookup"><span data-stu-id="4e553-166">INTEGRITY</span></span><br/>             | <span data-ttu-id="4e553-167">Se puede comprobar la integridad del búfer, pero no está habilitada la detección de secuencias o respuestas.</span><span class="sxs-lookup"><span data-stu-id="4e553-167">Buffer integrity can be verified but no sequencing or reply detection is enabled.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="4e553-168">SIN \_ integridad</span><span class="sxs-lookup"><span data-stu-id="4e553-168">NO\_INTEGRITY</span></span><br/>         | <span data-ttu-id="4e553-169">Se omite el requisito de **integridad** .</span><span class="sxs-lookup"><span data-stu-id="4e553-169">The **INTEGRITY** requirement is ignored.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="4e553-170">IDENTIFICAR</span><span class="sxs-lookup"><span data-stu-id="4e553-170">IDENTIFY</span></span><br/>              | <span data-ttu-id="4e553-171">Cuando un servidor suplanta un contexto que tiene este marcador establecido, la suplantación produce un acceso extremadamente limitado.</span><span class="sxs-lookup"><span data-stu-id="4e553-171">When a server impersonates a context that has this flag set, that impersonation yields extremely limited access.</span></span> <span data-ttu-id="4e553-172">La suplantación con el conjunto de IDENTIFICADOres se usa para comprobar la identidad del cliente.</span><span class="sxs-lookup"><span data-stu-id="4e553-172">Impersonation with IDENTIFY set is used to verify the client's identity.</span></span><br/>                                                                                                                                                                                                                                                                                                                                                                                                       |



 

 

