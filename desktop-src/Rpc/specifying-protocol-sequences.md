---
title: Especificar secuencias de protocolo
description: Las aplicaciones de servidor deben seleccionar una o más secuencias de protocolo para usarlas al comunicarse con el cliente a través de la red. La elección de las secuencias de protocolo depende de la red. Consulte interpretar la información de enlace y seleccionar una secuencia de protocolo.
ms.assetid: bde26a86-dc4f-4d18-ba51-c6536c62bb75
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a700299e3d2bd98fa5fb0aaebea25e907d85afb0
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104359226"
---
# <a name="specifying-protocol-sequences"></a><span data-ttu-id="553cd-105">Especificar secuencias de protocolo</span><span class="sxs-lookup"><span data-stu-id="553cd-105">Specifying Protocol Sequences</span></span>

<span data-ttu-id="553cd-106">Las aplicaciones de servidor deben seleccionar una o más secuencias de protocolo para usarlas al comunicarse con el cliente a través de la red.</span><span class="sxs-lookup"><span data-stu-id="553cd-106">Server applications must select one or more protocol sequences to use when communicating with the client over the network.</span></span> <span data-ttu-id="553cd-107">La elección de las secuencias de protocolo depende de la red.</span><span class="sxs-lookup"><span data-stu-id="553cd-107">The choice of protocol sequences is network-dependent.</span></span> <span data-ttu-id="553cd-108">Consulte [interpretar la información de enlace](interpreting-binding-information.md) y [seleccionar una secuencia de protocolo](selecting-a-protocol-sequence.md).</span><span class="sxs-lookup"><span data-stu-id="553cd-108">See [Interpreting Binding Information](interpreting-binding-information.md) and [Selecting a Protocol Sequence](selecting-a-protocol-sequence.md).</span></span>

<span data-ttu-id="553cd-109">El programa de servidor puede permitir que los clientes se conecten mediante cualquier secuencia de protocolos que admita la red.</span><span class="sxs-lookup"><span data-stu-id="553cd-109">Your server program may allow clients to connect using any protocol sequence that the network supports.</span></span> <span data-ttu-id="553cd-110">Para ello, invoque [**RpcServerUseAllProtseqs**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqs) y pase \_ \_ \_ el valor predeterminado de los requisitos máximos de RPC C PROTSEQ Max \_ \_ como primer parámetro.</span><span class="sxs-lookup"><span data-stu-id="553cd-110">To do this, invoke [**RpcServerUseAllProtseqs**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqs) and pass RPC\_C\_PROTSEQ\_MAX\_REQS\_DEFAULT as the first parameter.</span></span> <span data-ttu-id="553cd-111">Sin embargo, no es el enfoque recomendado.</span><span class="sxs-lookup"><span data-stu-id="553cd-111">However, that is not the recommended approach.</span></span> <span data-ttu-id="553cd-112">En su lugar, el uso de **ncalrpc** para llamadas locales y **ncacn \_ IP \_ TCP** o **ncacn \_ http** para llamadas remotas suele ser suficiente.</span><span class="sxs-lookup"><span data-stu-id="553cd-112">Rather, using **ncalrpc** for local calls and **ncacn\_ip\_tcp** or **ncacn\_http** for remote calls is usually sufficient.</span></span> <span data-ttu-id="553cd-113">Las redes heterogéneas no son frecuentes y prácticamente todas las redes admiten TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="553cd-113">Heterogenous networks are uncommon, and virtually all networks support TCP/IP.</span></span>

<span data-ttu-id="553cd-114">Si desea que el cliente restrinja la asignación de puertos para los puntos de conexión dinámicos a un intervalo de puertos específico, llame a [**RpcServerUseAllProtseqsEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsex) en su lugar.</span><span class="sxs-lookup"><span data-stu-id="553cd-114">If you want your client to restrict port allocation for dynamic endpoints to a specific port range, call [**RpcServerUseAllProtseqsEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsex) instead.</span></span> <span data-ttu-id="553cd-115">Esta función es específica de Microsoft RPC y es muy útil para las llamadas a procedimientos remotos que pasan a través de un firewall.</span><span class="sxs-lookup"><span data-stu-id="553cd-115">This function is specific to Microsoft RPC, and is extremely useful for remote procedure calls that pass through a firewall.</span></span> <span data-ttu-id="553cd-116">Usa un parámetro adicional para pasar las marcas de control de asignación de puerto a la función.</span><span class="sxs-lookup"><span data-stu-id="553cd-116">It uses an extra parameter to pass port allocation control flags to the function.</span></span> <span data-ttu-id="553cd-117">Vea [configurar el registro para asignaciones de puerto y enlace selectivo](configuring-the-windows-xp-2000-nt-registry-for-port-allocations-and-selective-binding.md).</span><span class="sxs-lookup"><span data-stu-id="553cd-117">See [Configuring the Registry for Port Allocations and Selective Binding](configuring-the-windows-xp-2000-nt-registry-for-port-allocations-and-selective-binding.md).</span></span>

<span data-ttu-id="553cd-118">Puede especificar secuencias de protocolos e información de extremo en el archivo MIDL cuando desarrolle las interfaces del servidor.</span><span class="sxs-lookup"><span data-stu-id="553cd-118">You can specify protocol sequences and endpoint information in your MIDL file when you develop the server's interfaces.</span></span> <span data-ttu-id="553cd-119">Si lo hace, el servidor debe usar [**RpcServerUseAllProtseqsIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsif) para registrar todas las secuencias de protocolo y la información de punto de conexión asociada proporcionada en el archivo IDL.</span><span class="sxs-lookup"><span data-stu-id="553cd-119">If you do, your server should use [**RpcServerUseAllProtseqsIf**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsif) to register all the protocol sequences and associated endpoint information provided in the IDL file.</span></span> <span data-ttu-id="553cd-120">Además, hay una función [**RpcServerUseAllProtseqsIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsifex) correspondiente que también permite al servidor pasar las marcas de asignación de puertos.</span><span class="sxs-lookup"><span data-stu-id="553cd-120">In addition, there is a corresponding [**RpcServerUseAllProtseqsIfEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseallprotseqsifex) function that also allows the server to pass port allocation–control flags.</span></span>

<span data-ttu-id="553cd-121">Si desea configurar los programas de cliente y servidor para que se comuniquen con una secuencia de protocolo especificada, la aplicación de servidor debe llamar a [**RpcServerUseProtseq**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseq).</span><span class="sxs-lookup"><span data-stu-id="553cd-121">If you want to configure your client and server programs to communicate with a specified protocol sequence, the server application should call [**RpcServerUseProtseq**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseq).</span></span> <span data-ttu-id="553cd-122">Para obtener una lista completa de las secuencias de protocolo RPC de Microsoft, vea [constantes de secuencia de protocolos](protocol-sequence-constants.md).</span><span class="sxs-lookup"><span data-stu-id="553cd-122">For a complete list of Microsoft RPC protocol sequences, see [Protocol Sequence Constants](protocol-sequence-constants.md).</span></span>

<span data-ttu-id="553cd-123">Microsoft RPC también proporciona [**RpcServerUseProtseqEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqex) para permitir que las aplicaciones seleccionen secuencias de protocolo específicas y controlen la asignación dinámica de puertos.</span><span class="sxs-lookup"><span data-stu-id="553cd-123">Microsoft RPC also provides [**RpcServerUseProtseqEx**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqex) to enable applications to select specific protocol sequences and control dynamic port allocation.</span></span>

<span data-ttu-id="553cd-124">Además de los protocolos orientados a la conexión, Microsoft RPC es compatible también con los protocolos de datagramas (sin conexión).</span><span class="sxs-lookup"><span data-stu-id="553cd-124">In addition to connection-oriented protocols, Microsoft RPC supports datagram (connectionless) protocols as well.</span></span> <span data-ttu-id="553cd-125">Se recomiendan los protocolos orientados a la conexión; los protocolos de datagrama tienen diferentes conjuntos de características que los protocolos orientados a la conexión y solo se deben usar si un programador del sistema distribuido requiere una característica disponible únicamente en los protocolos de datagramas.</span><span class="sxs-lookup"><span data-stu-id="553cd-125">Connection-oriented protocols are recommended; datagram protocols have different feature sets than connection-oriented protocols, and should only be used if a distributed system developer requires a feature available only in datagram protocols.</span></span> <span data-ttu-id="553cd-126">Algunas de las características disponibles cuando se usan protocolos de datagrama son:</span><span class="sxs-lookup"><span data-stu-id="553cd-126">Some of the features available when using datagram protocols are:</span></span>

-   <span data-ttu-id="553cd-127">Los datagramas admiten los protocolos de transporte UDP e IPX sin conexión.</span><span class="sxs-lookup"><span data-stu-id="553cd-127">Datagrams support the UDP and IPX connectionless transport protocols.</span></span>
-   <span data-ttu-id="553cd-128">Dado que no es necesario establecer y mantener una conexión, el protocolo RPC de datagrama requiere menos sobrecarga de recursos.</span><span class="sxs-lookup"><span data-stu-id="553cd-128">Because it is not necessary to establish and maintain a connection, the datagram RPC protocol requires less resource overhead.</span></span>
-   <span data-ttu-id="553cd-129">Los datagramas permiten un enlace más rápido.</span><span class="sxs-lookup"><span data-stu-id="553cd-129">Datagrams enable faster binding.</span></span>
-   <span data-ttu-id="553cd-130">Al igual que con RPC orientado a la conexión, las llamadas RPC de datagrama son de forma predeterminada *nonidempotent*.</span><span class="sxs-lookup"><span data-stu-id="553cd-130">As with connection-oriented RPC, datagram RPC calls are by default *nonidempotent*.</span></span> <span data-ttu-id="553cd-131">Esto significa que se garantiza que la llamada no se ejecute más de una vez.</span><span class="sxs-lookup"><span data-stu-id="553cd-131">This means the call is guaranteed not to be executed more than once.</span></span> <span data-ttu-id="553cd-132">Sin embargo, una función puede marcarse como idempotente en el archivo IDL que indica a RPC que es inofensivo ejecutar la función más de una vez como respuesta a una única solicitud de cliente.</span><span class="sxs-lookup"><span data-stu-id="553cd-132">However, a function can be marked as idempotent in the IDL file telling RPC that it is harmless to execute the function more than once in response to a single, client request.</span></span> <span data-ttu-id="553cd-133">Esto permite que el tiempo de ejecución mantenga menos estado en el servidor.</span><span class="sxs-lookup"><span data-stu-id="553cd-133">This allows the run time to maintain less state on the server.</span></span> <span data-ttu-id="553cd-134">Tenga en cuenta que una llamada idempotente se volverá a ejecutar solo en raras circunstancias en una red inestable.</span><span class="sxs-lookup"><span data-stu-id="553cd-134">Note that an idempotent call would be re-executed only in rare circumstances on an unstable network.</span></span>
-   <span data-ttu-id="553cd-135">Datagrama RPC admite el atributo IDL de [difusión](/windows/desktop/Midl/broadcast) .</span><span class="sxs-lookup"><span data-stu-id="553cd-135">Datagram RPC supports the [broadcast](/windows/desktop/Midl/broadcast) IDL attribute.</span></span> <span data-ttu-id="553cd-136">La difusión permite a un cliente emitir mensajes a varios servidores al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="553cd-136">Broadcast enables a client to issue messages to multiple servers at the same time.</span></span> <span data-ttu-id="553cd-137">Esto permite al cliente localizar uno de varios servidores disponibles en la red o controlar varios servidores simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="553cd-137">This lets the client locate one of several available servers on the network, or control multiple servers simultaneously.</span></span> <span data-ttu-id="553cd-138">Tenga en cuenta que la difusión del datagrama solo es válida dentro del vínculo local y normalmente no cruza los enrutadores.</span><span class="sxs-lookup"><span data-stu-id="553cd-138">Note that the datagram broadcast is valid only within the local link, and usually does not cross routers.</span></span> <span data-ttu-id="553cd-139">Las llamadas de difusión son implícitamente idempotente.</span><span class="sxs-lookup"><span data-stu-id="553cd-139">Broadcast calls are implicitly idempotent.</span></span> <span data-ttu-id="553cd-140">Si la llamada contiene \[ parámetros **out** \] , solo se devuelve la primera respuesta del servidor.</span><span class="sxs-lookup"><span data-stu-id="553cd-140">If the call contains \[**out**\] parameters, only the first server response is returned.</span></span> <span data-ttu-id="553cd-141">Una vez que un servidor responde, todas las RPC futuras sobre ese identificador de enlace se enviarán solo a ese servidor, incluidas las llamadas con el atributo de difusión.</span><span class="sxs-lookup"><span data-stu-id="553cd-141">Once a server responds, all future RPCs over that binding handle will be sent to that server only, including calls with the broadcast attribute.</span></span> <span data-ttu-id="553cd-142">Para enviar otra difusión, cree un nuevo identificador de enlace o llame a [**RpcBindingReset**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingreset) en el identificador existente.</span><span class="sxs-lookup"><span data-stu-id="553cd-142">To send another broadcast, create a new binding handle or call [**RpcBindingReset**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingreset) on the existing handle.</span></span>
-   <span data-ttu-id="553cd-143">El datagrama RPC admite el atributo [puede](/windows/desktop/Midl/maybe) ser IDL.</span><span class="sxs-lookup"><span data-stu-id="553cd-143">Datagram RPC supports the [maybe](/windows/desktop/Midl/maybe) IDL attribute.</span></span> <span data-ttu-id="553cd-144">Esto permite al cliente enviar una llamada al servidor sin tener que esperar una respuesta o una confirmación.</span><span class="sxs-lookup"><span data-stu-id="553cd-144">This lets the client send a call to the server without waiting for a response or confirmation.</span></span> <span data-ttu-id="553cd-145">La llamada no puede contener \[  \] parámetros out.</span><span class="sxs-lookup"><span data-stu-id="553cd-145">The call cannot contain \[**out**\] parameters.</span></span> <span data-ttu-id="553cd-146">Las llamadas que usan las llamadas **\[ quizás \]** son implícitamente idempotente.</span><span class="sxs-lookup"><span data-stu-id="553cd-146">Calls using the **\[maybe\]** calls are implicitly idempotent.</span></span>

 

 