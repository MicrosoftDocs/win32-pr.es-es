---
title: Control de excepciones (RPC)
description: RPC utiliza el mismo enfoque para el control de excepciones que la API de Windows.
ms.assetid: 7133d3f4-ed84-4cde-bc77-88e73ced9073
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 25de594a648cddb70f26b42e8b0dbf1d6a9dd51d
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/10/2020
ms.locfileid: "104488843"
---
# <a name="exception-handling-rpc"></a><span data-ttu-id="03b91-103">Control de excepciones (RPC)</span><span class="sxs-lookup"><span data-stu-id="03b91-103">Exception Handling (RPC)</span></span>

<span data-ttu-id="03b91-104">RPC utiliza el mismo enfoque para el control de excepciones que la API de Windows.</span><span class="sxs-lookup"><span data-stu-id="03b91-104">RPC uses the same approach to exception handling as the Windows API.</span></span>

<span data-ttu-id="03b91-105">La estructura RpcEndFinally de RpcFinally de [**RpcTryFinally**](rpctryfinally.md)  /  [](/previous-versions/aa375699(v=vs.80))  /  [](/previous-versions/aa375634(v=vs.80)) es equivalente a la instrucción **try-finally** de Windows.</span><span class="sxs-lookup"><span data-stu-id="03b91-105">The [**RpcTryFinally**](rpctryfinally.md) / [**RpcFinally**](/previous-versions/aa375699(v=vs.80)) / [**RpcEndFinally**](/previous-versions/aa375634(v=vs.80)) structure is equivalent to the Windows **try-finally** statement.</span></span> <span data-ttu-id="03b91-106">La construcción de excepción RPC [**RpcTryExcept**](rpctryexcept.md)  /  [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept)  /  [**RpcEndExcept**](/previous-versions/aa375629(v=vs.80)) es equivalente a la instrucción **try-except de** Windows.</span><span class="sxs-lookup"><span data-stu-id="03b91-106">The RPC exception construct [**RpcTryExcept**](rpctryexcept.md) / [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept) / [**RpcEndExcept**](/previous-versions/aa375629(v=vs.80)) is equivalent to the Windows **try-except** statement.</span></span>

<span data-ttu-id="03b91-107">Cuando se usan los controladores de excepciones RPC, el código fuente del lado cliente es portátil.</span><span class="sxs-lookup"><span data-stu-id="03b91-107">When you use the RPC exception handlers, your client-side source code is portable.</span></span> <span data-ttu-id="03b91-108">Los diferentes archivos de encabezado RPC proporcionados para cada plataforma resuelven las macros **RpcTry** y [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept) para cada plataforma.</span><span class="sxs-lookup"><span data-stu-id="03b91-108">The different RPC header files provided for each platform resolve the **RpcTry** and [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept) macros for each platform.</span></span> <span data-ttu-id="03b91-109">En el entorno de Windows, estas macros se asignan directamente a las instrucciones **try-finally** y **try-except** de Windows.</span><span class="sxs-lookup"><span data-stu-id="03b91-109">In the Windows environment, these macros map directly to the Windows **try-finally** and **try-except** statements.</span></span> <span data-ttu-id="03b91-110">En otros entornos, estas macros se asignan a otras implementaciones específicas de la plataforma de los controladores de excepciones.</span><span class="sxs-lookup"><span data-stu-id="03b91-110">In other environments, these macros map to other platform-specific implementations of exception handlers.</span></span>

<span data-ttu-id="03b91-111">Las posibles excepciones que producen estas estructuras incluyen el conjunto de códigos de error devueltos por las funciones RPC con los prefijos RPC \_ S \_ y RPC \_ X y el conjunto de excepciones que devuelve Windows.</span><span class="sxs-lookup"><span data-stu-id="03b91-111">Potential exceptions raised by these structures include the set of error codes returned by the RPC functions with the prefixes RPC\_S\_ and RPC\_X and the set of exceptions returned by Windows.</span></span> <span data-ttu-id="03b91-112">Para obtener más información, vea [valores devueltos de RPC](rpc-return-values.md).</span><span class="sxs-lookup"><span data-stu-id="03b91-112">For details, see [RPC Return Values](rpc-return-values.md).</span></span>

<span data-ttu-id="03b91-113">Mientras que las macros **RpcTry** y [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept) proporcionan una manera personalizable independiente de la plataforma para controlar las excepciones, en Windows Vista y versiones posteriores de Windows, [**RpcExceptionFilter**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcexceptionfilter) es la forma recomendada de controlar las excepciones.</span><span class="sxs-lookup"><span data-stu-id="03b91-113">While the **RpcTry** and [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept) macros provide a customizable platform-agnostic way to handle exceptions, in Windows Vista and later versions of Windows, [**RpcExceptionFilter**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcexceptionfilter) is the recommended way of handling exceptions.</span></span> <span data-ttu-id="03b91-114">No requiere que se escriban filtros personalizados para capturar muchas de las excepciones estructuradas más comunes. sin embargo, los filtros de excepción personalizados siguen requiriendo **RpcExcept**.</span><span class="sxs-lookup"><span data-stu-id="03b91-114">It does not require custom filters to be written to capture many of the most common structured exceptions; however, custom exception filters still require **RpcExcept**.</span></span>

<span data-ttu-id="03b91-115">Las excepciones que se producen en la aplicación de servidor, el código auxiliar de servidor y la biblioteca en tiempo de ejecución del servidor (encima del nivel de transporte) se propagan al cliente.</span><span class="sxs-lookup"><span data-stu-id="03b91-115">Exceptions that occur in the server application, server stub, and server run-time library (above the transport layer) are propagated to the client.</span></span> <span data-ttu-id="03b91-116">Ninguna excepción se propaga desde el nivel de transporte de servidor.</span><span class="sxs-lookup"><span data-stu-id="03b91-116">No exceptions are propagated from the server-transport level.</span></span> <span data-ttu-id="03b91-117">El método recomendado para que una rutina de servidor devuelva errores al tiempo de ejecución de RPC es producir una excepción.</span><span class="sxs-lookup"><span data-stu-id="03b91-117">The recommended method for a server routine to return errors to the RPC run time is to throw an exception.</span></span> <span data-ttu-id="03b91-118">Una rutina de servidor puede usar cualquier método que sea adecuado para comunicar errores entre las rutinas del servidor, pero si encuentra un error que impide que se ejecute el procedimiento remoto, debe generar una excepción después de la limpieza y antes de volver al tiempo de ejecución de RPC, en lugar de devolver un valor a RPC que solo la rutina de servidor reconoce como un error.</span><span class="sxs-lookup"><span data-stu-id="03b91-118">A server routine can use whatever methods is appropriate for communicating errors between server routines, but if it encounters an error that prevents it from executing the remote procedure, it should raise an exception after cleaning up and before returning to the RPC run time, rather than returning a value to RPC that only the server routine recognizes as an error.</span></span>

<span data-ttu-id="03b91-119">En la siguiente ilustración se muestra cómo se devuelven las excepciones del servidor al cliente.</span><span class="sxs-lookup"><span data-stu-id="03b91-119">The following figure shows how exceptions are returned from the server to the client.</span></span>

![las excepciones se devuelven desde el servidor al cliente a través del tiempo de ejecución de RPC respectivo de cada componente](images/prog-a20.png)

<span data-ttu-id="03b91-121">Los controladores de excepciones de RPC difieren ligeramente de las macros de control de excepciones Open software Foundation-Distributed Computing Environment (OSF-DCE) **try**, **Finally** y **catch**.</span><span class="sxs-lookup"><span data-stu-id="03b91-121">The RPC exception handlers differ slightly from the Open Software Foundation-Distributed Computing Environment (OSF-DCE) exception-handling macros **TRY**, **FINALLY**, and **CATCH**.</span></span> <span data-ttu-id="03b91-122">Varios proveedores proporcionan archivos de inclusión que asignan las funciones RPC de OSF-DCE a las funciones de Microsoft RPC, entre las que se incluyen **try**, **catch**, **catch** \_ **All** y **ENDTRY**.</span><span class="sxs-lookup"><span data-stu-id="03b91-122">Various vendors provide include files that map the OSF-DCE RPC functions to the Microsoft RPC functions, including **TRY**, **CATCH**, **CATCH**\_**ALL**, and **ENDTRY**.</span></span> <span data-ttu-id="03b91-123">Estos archivos de encabezado también asignan los códigos de error de RPC \_ s \_ \* en los códigos de error de la excepción de OSF-DCE, los RPC \_ s \_ \* y de asignación \_ de RPC x \_ \* a RPC \_ x \_ \* .</span><span class="sxs-lookup"><span data-stu-id="03b91-123">These header files also map the RPC\_S\_\* error codes onto the OSF-DCE exception counterparts, rpc\_s\_\*, and map RPC\_X\_\* error codes to rpc\_x\_\*.</span></span> <span data-ttu-id="03b91-124">Para la portabilidad de OSF-DCE, use estos archivos de inclusión.</span><span class="sxs-lookup"><span data-stu-id="03b91-124">For OSF-DCE portability, use these include files.</span></span> <span data-ttu-id="03b91-125">Para obtener más información sobre los controladores de excepciones RPC, consulte [**RpcExceptionFilter**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcexceptionfilter), [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept), [**RpcFinally**](/previous-versions/aa375699(v=vs.80)).</span><span class="sxs-lookup"><span data-stu-id="03b91-125">For more information about the RPC exception handlers, see [**RpcExceptionFilter**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcexceptionfilter), [**RpcExcept**](/windows/desktop/api/Rpc/nf-rpc-rpcexcept), [**RpcFinally**](/previous-versions/aa375699(v=vs.80)).</span></span> <span data-ttu-id="03b91-126">Para obtener más información sobre los controladores de excepciones de Windows, vea [control de excepciones estructurado](/windows/desktop/Debug/structured-exception-handling).</span><span class="sxs-lookup"><span data-stu-id="03b91-126">For more information about the Windows exception handlers, see [Structured Exception Handling](/windows/desktop/Debug/structured-exception-handling).</span></span>

 

 
