---
title: Categorización de aplicaciones y proveedores de servicios en capas
description: Winsock 2 aloja protocolos en capas.
ms.assetid: 1c5efd2e-1b42-4c20-a4da-b81a5fc4243c
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a966d54da0be26f75a074de18abe1b9e080c0c9f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105705648"
---
# <a name="categorizing-layered-service-providers-and-apps"></a><span data-ttu-id="fc9e4-103">Categorización de aplicaciones y proveedores de servicios en capas</span><span class="sxs-lookup"><span data-stu-id="fc9e4-103">Categorizing layered service providers and apps</span></span>

> [!Note]  
> <span data-ttu-id="fc9e4-104">Los proveedores de servicios superpuestos están desusados.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-104">Layered Service Providers are deprecated.</span></span> <span data-ttu-id="fc9e4-105">A partir de Windows 8 y Windows Server 2012, use la [plataforma de filtrado de Windows](../fwp/windows-filtering-platform-start-page.md).</span><span class="sxs-lookup"><span data-stu-id="fc9e4-105">Starting with Windows 8 and Windows Server 2012, use [Windows Filtering Platform](../fwp/windows-filtering-platform-start-page.md).</span></span>

 

<span data-ttu-id="fc9e4-106">Winsock 2 aloja protocolos en capas.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-106">Winsock 2 accommodates layered protocols.</span></span> <span data-ttu-id="fc9e4-107">Un protocolo en capas es aquél que implementa solo funciones de comunicaciones de nivel superior, mientras que se basa en una pila de transporte subyacente para el intercambio de datos real con un punto de conexión remoto.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-107">A layered protocol is one that implements only higher level communications functions, while relying on an underlying transport stack for the actual exchange of data with a remote endpoint.</span></span> <span data-ttu-id="fc9e4-108">Un ejemplo de un protocolo superpuesto o de un proveedor de servicios por capas sería un nivel de seguridad que agrega el protocolo al proceso de establecimiento de conexión para realizar la autenticación y establecer un esquema de cifrado acordado mutuamente.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-108">An example of a layered protocol or layered service provider would be a security layer that adds protocol to the connection establishment process in order to perform authentication and to establish a mutually agreed upon encryption scheme.</span></span> <span data-ttu-id="fc9e4-109">Por lo general, este protocolo de seguridad requeriría los servicios de un protocolo de transporte confiable subyacente, como TCP o SPX.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-109">Such a security protocol would generally require the services of an underlying reliable transport protocol such as TCP or SPX.</span></span> <span data-ttu-id="fc9e4-110">El término protocolo base implementado por el proveedor base hace referencia a un proveedor Winsock que implementa un protocolo como TCP o SPX, que es capaz de realizar comunicaciones de datos con un punto de conexión remoto.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-110">The term base protocol implemented by base provider refers to a Winsock provider that implements a protocol such as TCP or SPX which is capable of performing data communications with a remote endpoint.</span></span> <span data-ttu-id="fc9e4-111">El término protocolo superpuesto se usa para describir un protocolo que no puede ser independiente.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-111">The term layered protocol is used to describe a protocol that cannot stand alone.</span></span> <span data-ttu-id="fc9e4-112">Estos protocolos en capas se instalan como proveedores de servicios superpuestos (LSP) de Winsock.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-112">These layered protocols are installed as Winsock Layered Service Providers (LSPs).</span></span>

<span data-ttu-id="fc9e4-113">Un ejemplo de un LSP es el proveedor de servicios de cliente de Firewall de Microsoft instalado como parte de Internet Secutity and Authentication Server (ISA) en los clientes.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-113">An example of an LSP is the Microsoft Firewall Client Service Provider installed as part of the Internet Secutity and Authentication Server (ISA) on clients.</span></span> <span data-ttu-id="fc9e4-114">El proveedor de servicios de cliente de Firewall de Microsoft se instala a través de los proveedores base Winsock para TCP y UDP.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-114">The Microsoft Firewall Client Service Provider installs over the Winsock base providers for TCP and UDP.</span></span> <span data-ttu-id="fc9e4-115">Una biblioteca de vínculos dinámicos (DLL) en el software cliente de Firewall de ISA se convierte en un proveedor de servicios superpuesto de Winsock que utilizan todas las aplicaciones Winsock de forma transparente.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-115">A dynamic-link library (DLL) in the ISA Firewall Client software becomes a Winsock layered service provider that all Winsock applications use transparently.</span></span> <span data-ttu-id="fc9e4-116">De esta manera, el LSP del cliente de Firewall de ISA puede interceptar las llamadas de función de Winsock desde las aplicaciones cliente y, a continuación, enrutar una solicitud al proveedor de servicios base subyacente original si el destino es local o al servicio de firewall en un equipo servidor ISA si el destino es remoto.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-116">This way, the ISA Firewall Client LSP can intercept Winsock function calls from client applications and then route a request to the original underlying base service provider if the destination is local or to the Firewall service on an ISA Server computer if the destination is remote.</span></span> <span data-ttu-id="fc9e4-117">Un LSP similar se instala como parte del servicio de Firewall de Microsoft Forefront y del cliente de puerta de enlace de administración de amenazas (TMG) en los clientes.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-117">A similar LSP is installed as part of the Microsoft Forefront Firewall Service and the Threat Management Gateway (TMG) Client on clients.</span></span>

<span data-ttu-id="fc9e4-118">Durante la inicialización del LSP, el LSP debe proporcionar punteros a un número de funciones de la interfaz del proveedor de servicios (SPI) de Winsock.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-118">During LSP initialization, the LSP must provide pointers to a number of Winsock Service Provider Interface (SPI) functions.</span></span> <span data-ttu-id="fc9e4-119">Esta función se llamará durante el procesamiento normal mediante el nivel directamente por encima del LSP (otro LSP o Ws2 \_32.DLL).</span><span class="sxs-lookup"><span data-stu-id="fc9e4-119">These functions will be called during normal processing by the layer directly above the LSP (either another LSP or Ws2\_32.DLL).</span></span>

<span data-ttu-id="fc9e4-120">Es posible definir categorías de LSP basadas en el subconjunto de funciones SPI que implementa un LSP y la naturaleza del procesamiento adicional que se realiza para cada una de esas funciones.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-120">It is possible to define LSP categories based upon the subset of SPI functions an LSP implements and the nature of the extra processing performed for each of those functions.</span></span> <span data-ttu-id="fc9e4-121">Mediante la clasificación de los LSP, así como la clasificación de las aplicaciones que usan Sockets Winsock, se puede determinar de forma selectiva si un LSP debe estar implicado en un proceso determinado en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-121">By classifying LSPs, as well as classifying applications which use Winsock sockets, it becomes possible to selectively determine if an LSP should be involved in a given process at runtime.</span></span>

<span data-ttu-id="fc9e4-122">En Windows Vista y versiones posteriores, se proporciona un nuevo método para clasificar las aplicaciones y los proveedores de servicios con capas de Winsock de modo que solo se carguen determinados LSP.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-122">On Windows Vista and later, a new method is provided for categorizing both Winsock Layered Service Providers and applications so that only certain LSPs will be loaded.</span></span> <span data-ttu-id="fc9e4-123">Hay varias razones para agregar estas características.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-123">There are several reasons for adding these features.</span></span>

<span data-ttu-id="fc9e4-124">Uno de los motivos principales es que ciertos procesos críticos del sistema, como Winlogon y LSASS, crean sockets, pero estos procesos no usan estos Sockets para enviar tráfico en la red.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-124">One of the primary reasons is that certain system critical processes such as winlogon and lsass create sockets, but these processes do not use these sockets to send any traffic on the network.</span></span> <span data-ttu-id="fc9e4-125">Por lo tanto, la mayoría de los LSP no se deben cargar en estos procesos.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-125">So most LSPs should not be loaded into these processes.</span></span> <span data-ttu-id="fc9e4-126">También se han documentado varios casos en los que los LSP erróneos pueden hacer que *lsass.exe* bloqueen.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-126">A number of cases have also been documented where buggy LSPs can cause *lsass.exe* to crash.</span></span> <span data-ttu-id="fc9e4-127">Si LSASS se bloquea, el sistema fuerza el apagado.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-127">If lsass crashes, the system forces a shutdown.</span></span> <span data-ttu-id="fc9e4-128">Un efecto secundario de estos procesos del sistema que cargan LSP es que estos procesos no salen nunca, por lo que cuando se instala o se quita un LSP, se requiere un reinicio.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-128">A side affect of these system processes loading LSPs is that these processes never exit so when an LSP is installed or removed, a reboot is required.</span></span>

<span data-ttu-id="fc9e4-129">Una razón secundaria es que hay algunos casos en los que es posible que las aplicaciones no quieran cargar determinados LSP.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-129">A secondary reason is that there are some cases where applications may not want to load certain LSPs.</span></span> <span data-ttu-id="fc9e4-130">Por ejemplo, es posible que algunas aplicaciones no quieran cargar LSP de cifrado, lo que podría impedir que la aplicación se comunique con otros sistemas que no tienen instalado el LSP de cyptographic.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-130">For example, some applications may not want to load cryptographic LSPs which could prevent the application from communicating with other systems that do not have the cyptographic LSP installed.</span></span>

<span data-ttu-id="fc9e4-131">Por último, los LSP pueden utilizar categorías de LSP para determinar en qué punto de la cadena de protocolo Winsock deben instalarse por sí mismos.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-131">Finally, LSP categories can be used by other LSPs to determine where in the Winsock protocol chain they should install themselves.</span></span> <span data-ttu-id="fc9e4-132">Durante años, varios desarrolladores de LSP han deseado una forma de saber cómo se comportará un LSP.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-132">For years, various LSP developers have wanted a way of knowing how an LSP will behave.</span></span> <span data-ttu-id="fc9e4-133">Por ejemplo, un LSP que inspecciona el flujo de datos desearía estar por encima de un LSP que cifra los datos.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-133">For example, an LSP that inspects the data stream would want to be above an LSP that encrypts the data.</span></span> <span data-ttu-id="fc9e4-134">Por supuesto, este método de categorización de LSP no es una prueba de engaño, ya que se basa en LSP de terceros para clasificarse adecuadamente.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-134">Of course, this method of LSP categorization isn't fool proof since it relies on third-party LSPs to categorize themselves appropriately.</span></span>

<span data-ttu-id="fc9e4-135">La categorización de LSP y otras mejoras de seguridad en Windows Vista y versiones posteriores están diseñadas para ayudar a evitar que los usuarios instalen involuntariamente LSP malintencionados.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-135">The LSP categorization and other security enhancements in Windows Vista and later are designed to help prevent users from unintentionally installing malicious LSPs.</span></span>

## <a name="lsp-categories"></a><span data-ttu-id="fc9e4-136">Categorías de LSP</span><span class="sxs-lookup"><span data-stu-id="fc9e4-136">LSP Categories</span></span>

<span data-ttu-id="fc9e4-137">En Windows Vista y versiones posteriores, un LSP se puede clasificar en función de cómo interactúe con los datos y las llamadas de Windows Sockets.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-137">On Windows Vista and later, an LSP can be classified based on how it interacts with Windows Sockets calls and data.</span></span> <span data-ttu-id="fc9e4-138">Una categoría de LSP es un grupo de comportamientos identificables en un subconjunto de las funciones de Winsock SPI.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-138">An LSP category is an identifiable group of behaviors on a subset of Winsock SPI functions.</span></span> <span data-ttu-id="fc9e4-139">Por ejemplo, un filtro de contenido HTTP se clasificaría como un inspector de datos (la \_ categoría del inspector de LSP).</span><span class="sxs-lookup"><span data-stu-id="fc9e4-139">For example, an HTTP content filter would be categorized as a data inspector (the LSP\_INSPECTOR category).</span></span> <span data-ttu-id="fc9e4-140">La \_ categoría inspector de LSP inspeccionará (pero no modificará) los parámetros para las funciones de transferencia de datos.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-140">The LSP\_INSPECTOR category will inspect (but not alter) parameters to data transfer SPI functions.</span></span> <span data-ttu-id="fc9e4-141">Una aplicación puede consultar la categoría de un LSP y elegir no cargar el LSP en función de la categoría de LSP y el conjunto de categorías de LSP permitidos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-141">An application can query for the category of an LSP and choose to not load the LSP based on the LSP category and the application's set of permitted LSP categories.</span></span>

<span data-ttu-id="fc9e4-142">En la tabla siguiente se enumeran las categorías en las que se puede clasificar un LSP.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-142">The following table lists categories that an LSP can be classified into.</span></span>

| <span data-ttu-id="fc9e4-143">Categoría de LSP</span><span class="sxs-lookup"><span data-stu-id="fc9e4-143">LSP Category</span></span>              | <span data-ttu-id="fc9e4-144">Descripción</span><span class="sxs-lookup"><span data-stu-id="fc9e4-144">Description</span></span>                                                     |
|---------------------------|-----------------------------------------------------------------|
| <span data-ttu-id="fc9e4-145">**\_compresión criptográfica de LSP \_**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-145">**LSP\_CRYPTO\_COMPRESS**</span></span> | <span data-ttu-id="fc9e4-146">El LSP es un proveedor de compresión de datos o criptografía.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-146">The LSP is a cryptography or data compression provider.</span></span>         |
| <span data-ttu-id="fc9e4-147">**Firewall de LSP \_**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-147">**LSP\_FIREWALL**</span></span>         | <span data-ttu-id="fc9e4-148">El LSP es un proveedor de Firewall.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-148">The LSP is a firewall provider.</span></span>                                 |
| <span data-ttu-id="fc9e4-149">**\_caché local de LSP \_**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-149">**LSP\_LOCAL\_CACHE**</span></span>     | <span data-ttu-id="fc9e4-150">El LSP es un proveedor de caché local.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-150">The LSP is a local cache provider.</span></span>                              |
| <span data-ttu-id="fc9e4-151">**modificación de entrada de LSP \_ \_**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-151">**LSP\_INBOUND\_MODIFY**</span></span>  | <span data-ttu-id="fc9e4-152">El LSP modifica los datos de entrada.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-152">The LSP modifies inbound data.</span></span>                                  |
| <span data-ttu-id="fc9e4-153">**Inspector de LSP \_**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-153">**LSP\_INSPECTOR**</span></span>        | <span data-ttu-id="fc9e4-154">El LSP inspecciona o filtra los datos.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-154">The LSP inspects or filters data.</span></span>                               |
| <span data-ttu-id="fc9e4-155">**modificación de salida de LSP \_ \_**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-155">**LSP\_OUTBOUND\_MODIFY**</span></span> | <span data-ttu-id="fc9e4-156">El LSP modifica los datos de salida.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-156">The LSP modifies outbound data.</span></span>                                 |
| <span data-ttu-id="fc9e4-157">**\_proxy LSP**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-157">**LSP\_PROXY**</span></span>            | <span data-ttu-id="fc9e4-158">El LSP actúa como proxy y redirige los paquetes.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-158">The LSP acts as a proxy and redirects packets.</span></span>                  |
| <span data-ttu-id="fc9e4-159">**redirector de LSP \_**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-159">**LSP\_REDIRECTOR**</span></span>       | <span data-ttu-id="fc9e4-160">El LSP es un redirector de red.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-160">The LSP is a network redirector.</span></span>                                |
| <span data-ttu-id="fc9e4-161">**\_sistema LSP**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-161">**LSP\_SYSTEM**</span></span>           | <span data-ttu-id="fc9e4-162">El LSP es aceptable para su uso en servicios y procesos del sistema.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-162">The LSP is acceptable for use in services and system processes.</span></span> |



 

<span data-ttu-id="fc9e4-163">Un LSP puede pertenecer a más de una categoría.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-163">An LSP may belong to more than one category.</span></span> <span data-ttu-id="fc9e4-164">Por ejemplo, un firewall/LSP de seguridad puede pertenecer a las categorías Inspector (**\_ Inspector de LSP**) y firewall (**LSP \_**).</span><span class="sxs-lookup"><span data-stu-id="fc9e4-164">For example, a firewall/security LSP could belong to both the inspector (**LSP\_INSPECTOR**) and firewall (**LSP\_FIREWALL**) categories.</span></span>

<span data-ttu-id="fc9e4-165">Si un LSP no tiene un conjunto de categorías, se considera que está en el resto de la categoría.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-165">If an LSP does not have a category set, it is considered to be in the All Other category.</span></span> <span data-ttu-id="fc9e4-166">Esta categoría de LSP no se cargará en los servicios o procesos del sistema (por ejemplo, LSASS, Winlogon y muchos procesos svchost).</span><span class="sxs-lookup"><span data-stu-id="fc9e4-166">This LSP category will not be loaded in services or system processes (for example, lsass, winlogon, and many svchost processes).</span></span>

## <a name="categorizing-lsps"></a><span data-ttu-id="fc9e4-167">Categorización de LSP</span><span class="sxs-lookup"><span data-stu-id="fc9e4-167">Categorizing LSPs</span></span>

<span data-ttu-id="fc9e4-168">Varias funciones nuevas están disponibles en Windows Vista y versiones posteriores para clasificar un LSP:</span><span class="sxs-lookup"><span data-stu-id="fc9e4-168">Several new functions are available on Windows Vista and later for categorizing an LSP:</span></span>

-   [<span data-ttu-id="fc9e4-169">**WSCGetProviderInfo**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-169">**WSCGetProviderInfo**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo)
-   [<span data-ttu-id="fc9e4-170">**WSCGetProviderInfo32**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-170">**WSCGetProviderInfo32**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo32)
-   [<span data-ttu-id="fc9e4-171">**WSCSetProviderInfo**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-171">**WSCSetProviderInfo**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo)
-   [<span data-ttu-id="fc9e4-172">**WSCSetProviderInfo32**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-172">**WSCSetProviderInfo32**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo32)

<span data-ttu-id="fc9e4-173">Para clasificar un LSP, se llama a la función [**WSCSetProviderInfo**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo) o [**WSCSETPROVIDERINFO32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo32) con un GUID para identificar la entrada oculta de LSP, la clase de información que se va a establecer para esta entrada del protocolo LSP y un conjunto de marcas que se usan para modificar el comportamiento de la función.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-173">In order to categorize an LSP, the [**WSCSetProviderInfo**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo) or [**WSCSetProviderInfo32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetproviderinfo32) function is called with a GUID to identify the LSP hidden entry, the information class to be set for this LSP protocol entry, and a set of flags used to modify the behavior of the function.</span></span>

<span data-ttu-id="fc9e4-174">La función [**WSCGetProviderInfo**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo) o [**WSCGetProviderInfo32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo32) se utiliza de forma similar para recuperar los datos asociados a una clase de información para un LSP.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-174">The [**WSCGetProviderInfo**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo) or [**WSCGetProviderInfo32**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetproviderinfo32) function is similarly used to retrieve the data associated with an information class for an LSP.</span></span>

## <a name="categorizing-applications"></a><span data-ttu-id="fc9e4-175">Categorizar aplicaciones</span><span class="sxs-lookup"><span data-stu-id="fc9e4-175">Categorizing Applications</span></span>

<span data-ttu-id="fc9e4-176">Hay varias funciones nuevas disponibles en Windows Vista y versiones posteriores para clasificar una aplicación:</span><span class="sxs-lookup"><span data-stu-id="fc9e4-176">Several new functions are available on Windows Vista and later for categorizing an application:</span></span>

-   [<span data-ttu-id="fc9e4-177">**WSCGetApplicationCategory**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-177">**WSCGetApplicationCategory**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetapplicationcategory)
-   [<span data-ttu-id="fc9e4-178">**WSCSetApplicationCategory**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-178">**WSCSetApplicationCategory**</span></span>](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetapplicationcategory)

<span data-ttu-id="fc9e4-179">Para clasificar una aplicación, se llama a la función [**WSCSetApplicationCategory**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetapplicationcategory) con la ruta de acceso de carga de la imagen ejecutable para identificar la aplicación, los argumentos de la línea de comandos usados al iniciar la aplicación y las categorías de LSP que se permiten para todas las instancias de esta aplicación.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-179">In order to categorize an application, the [**WSCSetApplicationCategory**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscsetapplicationcategory) function is called with the load path to the executable image to identify the application, the command line arguments used when starting the application, and the LSP categories which are permitted for all instances of this application.</span></span>

<span data-ttu-id="fc9e4-180">La función [**WSCGetApplicationCategory**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetapplicationcategory) se utiliza de forma similar para recuperar las categorías de proveedor de servicios por capas (LSP) asociadas a una aplicación.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-180">The [**WSCGetApplicationCategory**](/windows/desktop/api/Ws2spi/nf-ws2spi-wscgetapplicationcategory) function is similarly used to retrieve the layered service provider (LSP) categories associated with an application.</span></span>

## <a name="determining-which-lsps-get-loaded"></a><span data-ttu-id="fc9e4-181">Determinar qué LSP se cargan</span><span class="sxs-lookup"><span data-stu-id="fc9e4-181">Determining Which LSPs Get Loaded</span></span>

<span data-ttu-id="fc9e4-182">La última parte de la categorización del LSP es determinar qué LSP se cargarán en cada proceso.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-182">The final part of LSP categorization is determining which LSPs will be loaded into which processes.</span></span> <span data-ttu-id="fc9e4-183">Cuando un proceso carga Winsock, se realizan las siguientes comparaciones de la categoría de la aplicación y de las categorías de LSP para todos los LSP instalados:</span><span class="sxs-lookup"><span data-stu-id="fc9e4-183">When a process loads Winsock, the following comparisons are made of the application category and the LSP categories for all installed LSPs:</span></span>

-   <span data-ttu-id="fc9e4-184">Si la aplicación no se clasifica por categorías, permita que se carguen todos los LSP en el proceso.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-184">If the application is not categorized, allow all LSPs to be loaded into the process.</span></span>
-   <span data-ttu-id="fc9e4-185">Si tanto la aplicación como el LSP tienen asignadas categorías, deben cumplirse todas las condiciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="fc9e4-185">If both the application and the LSP have assigned categories, all of the following must be true:</span></span> <dl> <span data-ttu-id="fc9e4-186">Al menos una de las categorías de LSP está presente en las categorías especificadas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-186">At least one of the LSP categories is present in the application's specified categories.</span></span>  
    <span data-ttu-id="fc9e4-187">Solo las categorías especificadas en las categorías especificadas de la aplicación se especifican en las categorías LSP.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-187">Only categories specified in the application's specified categories are specified in the LSPs categories.</span></span> <span data-ttu-id="fc9e4-188">Por ejemplo, si la aplicación especifica una categoría, debe estar en la categoría del LSP.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-188">For example, if the application specifies a category it must be in the LSP's category.</span></span>  
    <span data-ttu-id="fc9e4-189">Si la \_ categoría del sistema LSP está presente en la categoría de la aplicación, debe estar presente en las categorías del LSP.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-189">If the LSP\_SYSTEM category is present in the application's category, it must be present in the LSP's categories.</span></span>  
    </dl>

> [!Note]  
> <span data-ttu-id="fc9e4-190">Si no se clasifica un LSP, su categoría es realmente cero.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-190">If an LSP is not categorized, its category is effectively zero.</span></span> <span data-ttu-id="fc9e4-191">Para que se produzca una coincidencia, todas las categorías especificadas del LSP deben estar presentes en las categorías de la aplicación (las categorías de la aplicación deben ser un superconjunto de las categorías del LSP) con la salvedad de que si \_ el sistema de LSP está presente en la categoría de la aplicación, también debe estar presente en la categoría del LSP.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-191">For a match to occur, all the LSP's specified categories must be present in the application's categories (the application's categories must be a superset of the LSP's categories) with the caveat that if LSP\_SYSTEM is present in the application's category it must also be present in the LSP's category.</span></span>

 

<span data-ttu-id="fc9e4-192">Considere el ejemplo siguiente:</span><span class="sxs-lookup"><span data-stu-id="fc9e4-192">Consider the following example:</span></span>

<span data-ttu-id="fc9e4-193">La aplicación *Foo.exe* se clasifica como sistema LSP \_ + firewall de LSP \_ + \_ compresión criptográfica de LSP \_ .</span><span class="sxs-lookup"><span data-stu-id="fc9e4-193">The *Foo.exe* application is categorized as LSP\_SYSTEM + LSP\_FIREWALL + LSP\_CRYPTO\_COMPRESS.</span></span> <span data-ttu-id="fc9e4-194">La *Bar.exe* de la aplicación se clasifica como \_ firewall de LSP + \_ compresión criptográfica de LSP \_ .</span><span class="sxs-lookup"><span data-stu-id="fc9e4-194">The application *Bar.exe* is categorized as LSP\_FIREWALL + LSP\_CRYPTO\_COMPRESS.</span></span> <span data-ttu-id="fc9e4-195">Hay cuatro LSP instalados en el sistema:</span><span class="sxs-lookup"><span data-stu-id="fc9e4-195">There are four LSPs installed on the system:</span></span>

-   <span data-ttu-id="fc9e4-196">LSP1 ha establecido una categoría de \_ sistema LSP.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-196">LSP1 has set a category of LSP\_SYSTEM.</span></span>
-   <span data-ttu-id="fc9e4-197">LSP2 no es un conjunto de categorías, por lo que su categoría es cero.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-197">LSP2 is not categories set, so its category is zero.</span></span>
-   <span data-ttu-id="fc9e4-198">LSP3 ha establecido una categoría de Firewall de LSP \_ .</span><span class="sxs-lookup"><span data-stu-id="fc9e4-198">LSP3 has set a category of LSP\_FIREWALL.</span></span>
-   <span data-ttu-id="fc9e4-199">LSP4 tiene categorías establecidas de sistema de LSP + Firewall de LSP/ \_ \_ \_ compresión criptográfica de LSP \_ + Inspector de LSP \_</span><span class="sxs-lookup"><span data-stu-id="fc9e4-199">LSP4 has set categories of LSP\_SYSTEM + LSP\_FIREWALL + LSP\_CRYPTO\_COMPRESS + LSP\_INSPECTOR</span></span>

<span data-ttu-id="fc9e4-200">En este ejemplo, la aplicación de *Foo.exe* solo cargaría LSP1, mientras que la aplicación *Bar.exe* cargaría LSP3.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-200">In this example, the *Foo.exe* application would only load LSP1, while the *Bar.exe* application would load LSP3.</span></span>

## <a name="determining-winsock-providers-installed"></a><span data-ttu-id="fc9e4-201">Determinar los proveedores de Winsock instalados</span><span class="sxs-lookup"><span data-stu-id="fc9e4-201">Determining Winsock Providers Installed</span></span>

<span data-ttu-id="fc9e4-202">El kit de desarrollo de software (SDK) de Microsoft Windows incluye un programa Winsock de ejemplo que se puede usar para determinar los proveedores de transporte Winsock instalados en un equipo local.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-202">The Microsoft Windows Software Development Kit (SDK) includes a sample Winsock program that can be used to determine the Winsock transport providers installed on a local computer.</span></span> <span data-ttu-id="fc9e4-203">De forma predeterminada, el código fuente de este ejemplo de Winsock se instala en el directorio siguiente del Windows SDK para Windows 7:</span><span class="sxs-lookup"><span data-stu-id="fc9e4-203">By default, the source code for this Winsock sample is installed in the following directory of the Windows SDK for Windows 7:</span></span>

<span data-ttu-id="fc9e4-204">*C: \\ archivos de programa \\ Microsoft SDK \\ Windows \\ v 7.0 \\ Samples \\ NetDs \\ Winsock \\ LSP*</span><span class="sxs-lookup"><span data-stu-id="fc9e4-204">*C:\\Program Files\\Microsoft SDKs\\Windows\\v7.0\\Samples\\NetDs\\winsock\\LSP*</span></span>

<span data-ttu-id="fc9e4-205">Este ejemplo es una utilidad para instalar y probar proveedores de servicios superpuestos.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-205">This sample is a utility for installing and testing layered service providers.</span></span> <span data-ttu-id="fc9e4-206">Pero también se puede usar para recopilar mediante programación información detallada del catálogo de Winsock en un equipo local.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-206">But it can also be used to programmatically collect detailed information from the Winsock catalog on a local computer.</span></span> <span data-ttu-id="fc9e4-207">Para enumerar todos los proveedores de Winsock actuales, incluidos los proveedores base y los proveedores de servicios de capa, compile este ejemplo de Winsock y ejecute el siguiente comando de la consola:</span><span class="sxs-lookup"><span data-stu-id="fc9e4-207">To list all of the current Winsock providers including both base providers and layer service providers, build this Winsock sample and execute the following console command:</span></span>

<span data-ttu-id="fc9e4-208">**instlsp-p**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-208">**instlsp -p**</span></span>

<span data-ttu-id="fc9e4-209">La salida será una lista de proveedores de Winsock instalados en el equipo local, incluidos los proveedores de servicios superpuestos.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-209">The output will be a list of Winsock providers installed on the local computer including layered service providers.</span></span> <span data-ttu-id="fc9e4-210">La salida muestra el ID. de catálogo y el nombre de cadena del proveedor Winsock</span><span class="sxs-lookup"><span data-stu-id="fc9e4-210">The output lists the catalog ID and the string name for the Winsock provider</span></span>

<span data-ttu-id="fc9e4-211">Para recopilar información más detallada sobre todos los proveedores de Winsock, ejecute el siguiente comando de la consola:</span><span class="sxs-lookup"><span data-stu-id="fc9e4-211">To collect more detailed information on all Winsock providers, execute the following console command:</span></span>

<span data-ttu-id="fc9e4-212">**instlsp-p-v**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-212">**instlsp -p -v**</span></span>

<span data-ttu-id="fc9e4-213">La salida será una lista de las estructuras [**WSAPROTOCOL \_ info**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) que se admiten en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-213">The output will be a list [**WSAPROTOCOL\_INFO**](/windows/win32/api/winsock2/ns-winsock2-wsaprotocol_infoa) structures supported on the local computer.</span></span>

<span data-ttu-id="fc9e4-214">Para obtener una lista de los proveedores de servicios en capas instalados en el equipo local, ejecute el siguiente comando de la consola:</span><span class="sxs-lookup"><span data-stu-id="fc9e4-214">For a list of only layered service providers installed on the local computer, execute the following console command:</span></span>

<span data-ttu-id="fc9e4-215">**instlsp-l**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-215">**instlsp -l**</span></span>

<span data-ttu-id="fc9e4-216">Para asignar la estructura de LSP, ejecute el siguiente comando de la consola:</span><span class="sxs-lookup"><span data-stu-id="fc9e4-216">To map the LSP structure, execute the following console command:</span></span>

<span data-ttu-id="fc9e4-217">**instlsp-m**</span><span class="sxs-lookup"><span data-stu-id="fc9e4-217">**instlsp -m**</span></span>

> [!Note]  
> <span data-ttu-id="fc9e4-218">La característica TDI está en desuso y se quitará en versiones futuras de Microsoft Windows.</span><span class="sxs-lookup"><span data-stu-id="fc9e4-218">The TDI feature is deprecated and will be removed in future versions of Microsoft Windows.</span></span> <span data-ttu-id="fc9e4-219">En función de cómo use TDI, utilice el kernel de Winsock (WSK) o la plataforma de filtrado de Windows (WFP).</span><span class="sxs-lookup"><span data-stu-id="fc9e4-219">Depending on how you use TDI, use either the Winsock Kernel (WSK) or Windows Filtering Platform (WFP).</span></span> <span data-ttu-id="fc9e4-220">Para obtener más información sobre WFP y WSK, consulte [plataforma de filtrado de Windows](../fwp/windows-filtering-platform-start-page.md) y kernel de [Winsock](/windows-hardware/drivers/ddi/_netvista/).</span><span class="sxs-lookup"><span data-stu-id="fc9e4-220">For more information about WFP and WSK, see [Windows Filtering Platform](../fwp/windows-filtering-platform-start-page.md) and [Winsock Kernel](/windows-hardware/drivers/ddi/_netvista/).</span></span> <span data-ttu-id="fc9e4-221">Para obtener una entrada de blog sobre las redes de Windows Core sobre WSK y TDI, consulte [Introducción a Winsock kernel (WSK)](/archive/blogs/wndp/).</span><span class="sxs-lookup"><span data-stu-id="fc9e4-221">For a Windows Core Networking blog entry about WSK and TDI, see [Introduction to Winsock Kernel (WSK)](/archive/blogs/wndp/).</span></span>

 

 

 
