---
description: Un identificador de un recurso de comunicaciones tiene un conjunto asociado de parámetros de tiempo de espera que afectan al comportamiento de las operaciones de lectura y escritura.
ms.assetid: 271d4c68-1f6d-4483-a9a1-703220de761f
title: Tiempos de espera
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6db31fafc0f4d98832f1fb7fa5d22b32cba33d73
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103807400"
---
# <a name="time-outs"></a><span data-ttu-id="f931d-103">Tiempos de espera</span><span class="sxs-lookup"><span data-stu-id="f931d-103">Time-Outs</span></span>

<span data-ttu-id="f931d-104">Un identificador de un recurso de comunicaciones tiene un conjunto asociado de parámetros de tiempo de espera que afectan al comportamiento de las operaciones de lectura y escritura.</span><span class="sxs-lookup"><span data-stu-id="f931d-104">A handle to a communications resource has an associated set of time-out parameters that affect the behavior of read and write operations.</span></span> <span data-ttu-id="f931d-105">Los tiempos de espera pueden provocar que una operación [**readfile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile)o [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) finalice cuando transcurre un intervalo de tiempo de espera, aunque no se haya leído o escrito el número especificado de caracteres.</span><span class="sxs-lookup"><span data-stu-id="f931d-105">Time-outs can cause a [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), or [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) operation to conclude when a time-out interval elapses, even though the specified number of characters have not been read or written.</span></span> <span data-ttu-id="f931d-106">No se trata como un error cuando se produce un tiempo de espera durante una operación de lectura o escritura (es decir, el valor devuelto de la función de lectura o escritura indica Success).</span><span class="sxs-lookup"><span data-stu-id="f931d-106">It is not treated as an error when a time-out occurs during a read or write operation (that is, the read or write function's return value indicates success).</span></span> <span data-ttu-id="f931d-107">El recuento de bytes leídos o escritos realmente lo detecta **readfile** o **WriteFile** (o la función [**GetOverlappedResult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) o [**FileIOCompletionRoutine**](/windows/desktop/api/minwinbase/nc-minwinbase-lpoverlapped_completion_routine) , si la e/s se realizó como una operación superpuesta).</span><span class="sxs-lookup"><span data-stu-id="f931d-107">The count of bytes actually read or written is reported by **ReadFile** or **WriteFile** (or by the [**GetOverlappedResult**](/windows/desktop/api/ioapiset/nf-ioapiset-getoverlappedresult) or [**FileIOCompletionRoutine**](/windows/desktop/api/minwinbase/nc-minwinbase-lpoverlapped_completion_routine) function, if the I/O was performed as an overlapped operation).</span></span>

<span data-ttu-id="f931d-108">Cuando una aplicación abre un recurso de comunicaciones, el sistema establece los valores de tiempo de espera del recurso en los valores en vigor cuando se utilizó por última vez el recurso.</span><span class="sxs-lookup"><span data-stu-id="f931d-108">When an application opens a communications resource, the system sets the resource's time-out values to the values in effect when the resource was last used.</span></span> <span data-ttu-id="f931d-109">Si nunca se ha abierto el recurso de comunicaciones, el sistema establece los valores de tiempo de espera en algún valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="f931d-109">If the communications resource has never been opened, the system sets the time-out values to some default value.</span></span> <span data-ttu-id="f931d-110">En cualquier caso, una aplicación siempre debe determinar los valores de tiempo de espera actuales después de abrir el recurso y, a continuación, establecerlos explícitamente para satisfacer sus requisitos.</span><span class="sxs-lookup"><span data-stu-id="f931d-110">In either case, an application should always determine the current time-out values after opening the resource, and then explicitly set them to meet its requirements.</span></span> <span data-ttu-id="f931d-111">Para determinar los valores de tiempo de espera actuales de un recurso de comunicaciones, utilice la función [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) .</span><span class="sxs-lookup"><span data-stu-id="f931d-111">To determine the current time-out values of a communications resource, use the [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) function.</span></span> <span data-ttu-id="f931d-112">Para cambiar los valores de tiempo de espera, utilice la función [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) .</span><span class="sxs-lookup"><span data-stu-id="f931d-112">To change the time-out values, use the [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) function.</span></span>

<span data-ttu-id="f931d-113">Los parámetros de tiempo de espera habilitan dos tipos de tiempos de espera.</span><span class="sxs-lookup"><span data-stu-id="f931d-113">Two types of time-outs are enabled by the time-out parameters.</span></span> <span data-ttu-id="f931d-114">Se produce un tiempo de espera de intervalo cuando el tiempo transcurrido entre la recepción de dos caracteres cualesquiera supera un número especificado de milisegundos.</span><span class="sxs-lookup"><span data-stu-id="f931d-114">An interval time-out occurs when the time between the receipt of any two characters exceeds a specified number of milliseconds.</span></span> <span data-ttu-id="f931d-115">El tiempo se inicia cuando se recibe el primer carácter y se reinicia cuando se recibe cada nuevo carácter.</span><span class="sxs-lookup"><span data-stu-id="f931d-115">Timing starts when the first character is received and is restarted when each new character is received.</span></span> <span data-ttu-id="f931d-116">Se produce un tiempo de espera total cuando la cantidad total de tiempo consumida por una operación de lectura supera un número calculado de milisegundos.</span><span class="sxs-lookup"><span data-stu-id="f931d-116">A total time-out occurs when the total amount of time consumed by a read operation exceeds a calculated number of milliseconds.</span></span> <span data-ttu-id="f931d-117">El tiempo se inicia inmediatamente cuando comienza la operación de e/s.</span><span class="sxs-lookup"><span data-stu-id="f931d-117">Timing starts immediately when the I/O operation begins.</span></span> <span data-ttu-id="f931d-118">Las operaciones de escritura solo admiten tiempos de espera totales.</span><span class="sxs-lookup"><span data-stu-id="f931d-118">Write operations support only total time-outs.</span></span> <span data-ttu-id="f931d-119">Las operaciones de lectura admiten tanto el intervalo como los tiempos de espera totales, que se pueden usar por separado o combinados.</span><span class="sxs-lookup"><span data-stu-id="f931d-119">Read operations support both interval and total time-outs, which can be used separately or combined.</span></span>

<span data-ttu-id="f931d-120">El tiempo, en milisegundos, del período de tiempo de espera total para una operación de lectura o escritura se calcula mediante el multiplicador y los valores constantes de la estructura [**COMMTIMEOUTS**](/windows/desktop/api/Winbase/ns-winbase-commtimeouts) especificada en la función [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) o [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) .</span><span class="sxs-lookup"><span data-stu-id="f931d-120">The time, in milliseconds, of the total time-out period for a read or write operation is calculated by using the multiplier and constant values from the [**COMMTIMEOUTS**](/windows/desktop/api/Winbase/ns-winbase-commtimeouts) structure specified in the [**GetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-getcommtimeouts) or [**SetCommTimeouts**](/windows/desktop/api/Winbase/nf-winbase-setcommtimeouts) function.</span></span> <span data-ttu-id="f931d-121">Se usa la siguiente fórmula:</span><span class="sxs-lookup"><span data-stu-id="f931d-121">The following formula is used:</span></span>


```C++
Timeout = (MULTIPLIER * number_of_bytes) + CONSTANT
```



<span data-ttu-id="f931d-122">El uso de un multiplicador y una constante permite que el período de tiempo de espera total varíe, en función de la cantidad de datos que se solicitan.</span><span class="sxs-lookup"><span data-stu-id="f931d-122">Using both a multiplier and a constant enables the total time-out period to vary, depending on the amount of data being requested.</span></span> <span data-ttu-id="f931d-123">Una aplicación solo puede utilizar la constante estableciendo el multiplicador en cero, o usar solo el multiplicador estableciendo la constante en cero.</span><span class="sxs-lookup"><span data-stu-id="f931d-123">An application can use only the constant by setting the multiplier to zero, or use only the multiplier by setting the constant to zero.</span></span> <span data-ttu-id="f931d-124">Si tanto la constante como el multiplicador son cero, no se utiliza el tiempo de espera total.</span><span class="sxs-lookup"><span data-stu-id="f931d-124">If both the constant and multiplier are zero, total time-out is not used.</span></span>

<span data-ttu-id="f931d-125">Si todos los parámetros de tiempo de espera de lectura son cero, los tiempos de espera de lectura no se usan y no se completa una operación de lectura hasta que se haya leído el número solicitado de bytes o se produzca un error.</span><span class="sxs-lookup"><span data-stu-id="f931d-125">If all read time-out parameters are zero, read time-outs are not used, and a read operation is not complete until the requested number of bytes have been read or an error occurs.</span></span> <span data-ttu-id="f931d-126">Del mismo modo, si todos los parámetros de tiempo de espera de escritura son cero, no se completa una operación de escritura hasta que se haya escrito el número de bytes solicitado o se produzca un error.</span><span class="sxs-lookup"><span data-stu-id="f931d-126">Similarly, if all write time-out parameters are zero, a write operation is not completed until the requested number of bytes have been written or an error occurs.</span></span>

<span data-ttu-id="f931d-127">Si el parámetro de tiempo de espera de intervalo de lectura es el valor **MAXDWORD** y los parámetros de tiempo de espera de lectura total son cero, una operación de lectura se completa inmediatamente después de leer los caracteres que están disponibles en el búfer de entrada, incluso si está vacío.</span><span class="sxs-lookup"><span data-stu-id="f931d-127">If the read interval time-out parameter is the **MAXDWORD** value and both read total time-out parameters are zero, a read operation is completed immediately after reading whatever characters are available in the input buffer, even if it is empty.</span></span>

<span data-ttu-id="f931d-128">El intervalo de tiempo obliga a que se devuelva una operación de lectura cuando hay un periodo en recepción.</span><span class="sxs-lookup"><span data-stu-id="f931d-128">Interval timing forces a read operation to return when there is a lull in reception.</span></span> <span data-ttu-id="f931d-129">Un proceso que usa los tiempos de espera de intervalo puede establecer un parámetro de intervalo bastante corto, de modo que pueda responder rápidamente a ráfagas aisladas de uno o algunos caracteres, aunque puede recopilar grandes búferes de caracteres con una sola llamada cuando los datos se reciben en una secuencia estable.</span><span class="sxs-lookup"><span data-stu-id="f931d-129">A process using interval time-outs can set a fairly short interval parameter, so it can respond quickly to small, isolated bursts of one or a few characters, yet it can still collect large buffers of characters with a single call when data is received in a steady stream.</span></span>

<span data-ttu-id="f931d-130">Los tiempos de espera de una operación de escritura pueden ser útiles cuando la transmisión está bloqueada por algún tipo de control de flujo o cuando se ha llamado a la función [**SetCommBreak**](/windows/desktop/api/Winbase/nf-winbase-setcommbreak) para suspender la transmisión de caracteres.</span><span class="sxs-lookup"><span data-stu-id="f931d-130">Time-outs for a write operation can be useful when transmission is blocked by some kind of flow control or when the [**SetCommBreak**](/windows/desktop/api/Winbase/nf-winbase-setcommbreak) function has been called to suspend character transmission.</span></span>

<span data-ttu-id="f931d-131">En la tabla siguiente se resume el comportamiento de las operaciones de lectura en función de los valores especificados para los tiempos de espera totales e intervalos.</span><span class="sxs-lookup"><span data-stu-id="f931d-131">The following table summarizes the behavior of read operations based on the values specified for total and interval time-outs.</span></span>



| <span data-ttu-id="f931d-132">Total</span><span class="sxs-lookup"><span data-stu-id="f931d-132">Total</span></span> | <span data-ttu-id="f931d-133">Intervalo</span><span class="sxs-lookup"><span data-stu-id="f931d-133">Interval</span></span> | <span data-ttu-id="f931d-134">Comportamiento</span><span class="sxs-lookup"><span data-stu-id="f931d-134">Behavior</span></span>                                                                                                                                                                                 |
|-------|----------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f931d-135">0</span><span class="sxs-lookup"><span data-stu-id="f931d-135">0</span></span>     | <span data-ttu-id="f931d-136">0</span><span class="sxs-lookup"><span data-stu-id="f931d-136">0</span></span>        | <span data-ttu-id="f931d-137">Devuelve cuando el búfer se rellena completamente.</span><span class="sxs-lookup"><span data-stu-id="f931d-137">Returns when the buffer is completely filled.</span></span> <span data-ttu-id="f931d-138">Los tiempos de espera no se usan.</span><span class="sxs-lookup"><span data-stu-id="f931d-138">Time-outs are not used.</span></span>                                                                                                                    |
| <span data-ttu-id="f931d-139">T</span><span class="sxs-lookup"><span data-stu-id="f931d-139">T</span></span>     | <span data-ttu-id="f931d-140">0</span><span class="sxs-lookup"><span data-stu-id="f931d-140">0</span></span>        | <span data-ttu-id="f931d-141">Devuelve cuando el búfer se rellena completamente o cuando se han transcurrido T milisegundos desde el inicio de la operación.</span><span class="sxs-lookup"><span data-stu-id="f931d-141">Returns when the buffer is completely filled or when T milliseconds have elapsed since the beginning of the operation.</span></span>                                                                   |
| <span data-ttu-id="f931d-142">0</span><span class="sxs-lookup"><span data-stu-id="f931d-142">0</span></span>     | <span data-ttu-id="f931d-143">Y</span><span class="sxs-lookup"><span data-stu-id="f931d-143">Y</span></span>        | <span data-ttu-id="f931d-144">Devuelve cuando el búfer se rellena completamente o cuando se han transcurrido Y milisegundos entre la recepción de dos caracteres cualesquiera.</span><span class="sxs-lookup"><span data-stu-id="f931d-144">Returns when the buffer is completely filled or when Y milliseconds have elapsed between the receipt of any two characters.</span></span> <span data-ttu-id="f931d-145">El tiempo no comienza hasta que se recibe el primer carácter.</span><span class="sxs-lookup"><span data-stu-id="f931d-145">Timing does not begin until the first character is received.</span></span> |
| <span data-ttu-id="f931d-146">T</span><span class="sxs-lookup"><span data-stu-id="f931d-146">T</span></span>     | <span data-ttu-id="f931d-147">Y</span><span class="sxs-lookup"><span data-stu-id="f931d-147">Y</span></span>        | <span data-ttu-id="f931d-148">Devuelve cuando el búfer se rellena completamente o cuando se produce un tipo de tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="f931d-148">Returns when the buffer is completely filled or when either type of time-out occurs.</span></span>                                                                                                     |



 

> [!Note]  
> <span data-ttu-id="f931d-149">Sin embargo, ese tiempo es relativo al sistema que controla el dispositivo físico.</span><span class="sxs-lookup"><span data-stu-id="f931d-149">However, that timing is relative to the system controlling the physical device.</span></span> <span data-ttu-id="f931d-150">Para un dispositivo remoto, como un módem, el tiempo es relativo al sistema del servidor al que está conectado el módem.</span><span class="sxs-lookup"><span data-stu-id="f931d-150">For a remote device such as a modem, the timing is relative to the server system to which the modem is attached.</span></span> <span data-ttu-id="f931d-151">Cualquier retraso de propagación de red no se factoriza en.</span><span class="sxs-lookup"><span data-stu-id="f931d-151">Any network propagation delay is not factored in.</span></span> <span data-ttu-id="f931d-152">Por ejemplo, una aplicación cliente podría especificar un tiempo de espera total que se calcula como 500 milisegundos.</span><span class="sxs-lookup"><span data-stu-id="f931d-152">For example, a client application might specify a total time-out that computes to be 500 milliseconds.</span></span> <span data-ttu-id="f931d-153">Cuando han transcurrido 500 milisegundos en el servidor, se devuelve al cliente un error de tiempo de espera.</span><span class="sxs-lookup"><span data-stu-id="f931d-153">When 500 milliseconds have elapsed at the server, a time-out error is returned to the client.</span></span> <span data-ttu-id="f931d-154">Si hay un retraso de propagación de la red de 50 milisegundos, el cliente no recibirá ninguna notificación del tiempo de espera hasta aproximadamente 50 milisegundos después del tiempo de espera realmente producido.</span><span class="sxs-lookup"><span data-stu-id="f931d-154">If there is a 50 milliseconds network propagation delay, the client will not be notified of the time-out until approximately 50 milliseconds after the time-out actually occurred.</span></span>

 

> [!Note]  
> <span data-ttu-id="f931d-155">Los parámetros de tiempo de espera afectan al comportamiento de las operaciones de lectura y escritura superpuestas en un dispositivo de comunicaciones.</span><span class="sxs-lookup"><span data-stu-id="f931d-155">The time-out parameters affect the behavior of overlapped read and write operations on a communications device.</span></span> <span data-ttu-id="f931d-156">Con e/s superpuestas, la función [**readfile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex)o [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) puede devolver antes de que se haya completado la operación.</span><span class="sxs-lookup"><span data-stu-id="f931d-156">With overlapped I/O, the [**ReadFile**](/windows/desktop/api/fileapi/nf-fileapi-readfile), [**WriteFile**](/windows/desktop/api/fileapi/nf-fileapi-writefile), [**ReadFileEx**](/windows/desktop/api/fileapi/nf-fileapi-readfileex), or [**WriteFileEx**](/windows/desktop/api/fileapi/nf-fileapi-writefileex) function can return before the operation has been completed.</span></span> <span data-ttu-id="f931d-157">Los parámetros de tiempo de espera pueden determinar cuándo se ha completado la operación.</span><span class="sxs-lookup"><span data-stu-id="f931d-157">The time-out parameters can determine when the operation has been completed.</span></span>

 

 

 
