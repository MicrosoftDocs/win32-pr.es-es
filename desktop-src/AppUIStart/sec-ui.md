---
title: Consideraciones de seguridad de la interfaz de usuario de Windows
description: En este tema se proporciona información sobre las consideraciones de seguridad en la interfaz de usuario de Windows.
ms.assetid: D560E59A-D6C8-40a9-AABB-DE5A47C94E6E
keywords:
- Interfaz de usuario de Windows, seguridad
- seguridad para la interfaz de usuario de Windows
- seguridad de cadena
- entrada de usuario, validación
- validación de entradas de usuario
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 71b714de3ab12cb10d6e5d9a2e251c34eeeff7a5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104078176"
---
# <a name="security-considerations-windows-user-interface"></a>Consideraciones de seguridad: interfaz de usuario de Windows

En este tema se proporciona información sobre las consideraciones de seguridad en la interfaz de usuario de Windows. En este tema no se proporciona todo lo que necesita saber acerca de los problemas de seguridad. En su lugar, úselo como punto de partida y referencia para esta área tecnológica.

Con el aumento de la interconectividad de equipos, ahora los desarrolladores deben preocuparse de la seguridad de las aplicaciones. Sin embargo, la seguridad también mejora la seguridad y la solidez de las aplicaciones generales. por lo tanto, es otra manera que el desarrollador puede proporcionar una buena experiencia del usuario. En los temas siguientes se tratan algunos posibles problemas de seguridad cuando se usa la interfaz de usuario de Windows.

-   [Consideraciones sobre cadenas](#string-considerations)
-   [Datos proporcionados por el usuario](#user-input)
-   [alertas de seguridad](#security-alerts)
-   [Temas relacionados](#related-topics)

## <a name="string-considerations"></a>Consideraciones sobre cadenas

Muchas funciones, mensajes y macros usan cadenas en sus parámetros. Sin embargo, a menudo las cadenas no se comprueban para la terminación null o para la longitud. Un problema relacionado es el cálculo incorrecto de la longitud de una cadena o búfer. En cualquier caso, esto puede provocar el desbordamiento del búfer o el truncamiento de datos, lo que puede afectar negativamente a la aplicación. Para obtener más información acerca de las saturaciones del búfer y otros problemas de seguridad, consulte *Writing Secure Code* by Michael Howard y David LeBlanc, Microsoft Press, 2002.

Para controlar las cadenas de una manera segura, debe hacer lo siguiente:

-   Compruebe las cadenas para la terminación nula o la longitud adecuada, según corresponda.
-   Tenga especial cuidado para determinar la longitud de una cadena o un búfer, especialmente cuando contiene valores **TCHAR** .
-   Si crea una cadena o usa una cadena que se usó previamente, Inicialícelo en cero o inserte un terminador nulo, según corresponda.

Además, considere la posibilidad de usar las funciones [StrSafe](/windows/desktop/menurc/strsafe-ovw) al tratar con cadenas. Estas funciones están diseñadas para controlar las cadenas de forma segura.

## <a name="user-input"></a>Entrada del usuario

La interfaz de usuario de Windows está preocupada por obtener y responder a la información de los usuarios. Sin embargo, los usuarios que escriben datos incorrectos pueden interrumpir la aplicación, independientemente de si pretenden hacerlo. Por lo tanto, la regla cardinal es que se deben validar todas las entradas.

La principal preocupación son los datos de cadena, que se describen en [consideraciones de cadena](#string-considerations). Sin embargo, todos los tipos de entrada deben validarse antes de que la aplicación los use. Otro problema es cuando los datos se validan en un momento, pero los cambios antes de que se usen, por ejemplo, al recibir mensajes que proporcionan la longitud del texto. Por lo tanto, si hay una posibilidad de que los datos cambien, debe comprobar los datos justo antes de utilizarlos.

## <a name="security-alerts"></a>Alertas de seguridad

En la tabla siguiente se enumeran las características que, si se usan incorrectamente, pueden poner en peligro la seguridad de las aplicaciones.



| Característica                                                                                                                                                   | Mitigación                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [**GetAtomName**](/windows/desktop/api/winbase/nf-winbase-getatomnamea)                                                                                                               | Tenga cuidado al especificar el tamaño del búfer.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| [**GlobalGetAtomName**](/windows/desktop/api/winbase/nf-winbase-globalgetatomnamea)                                                                                                   | Cualquier aplicación puede obtener acceso a los átomos de cadena globales. Sin embargo, si otra aplicación es inestable, podría tratar de resolver los recuentos de referencias y eliminarlos. En su lugar, debe considerar el uso de átomos de enteros globales.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| [**ImpersonateDdeClientWindow**](/windows/desktop/api/dde/nf-dde-impersonateddeclientwindow)                                                                                 | Si se produce un error en la función, las solicitudes de cliente posteriores se realizan en el contexto de seguridad del proceso de llamada. Esto puede ser un problema si el proceso de llamada se ejecuta como una cuenta con privilegios elevados. Por lo tanto, si se produce un error en la llamada o se produce un error, no continúa la ejecución de la solicitud del cliente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**DdeImpersonateClient**](/windows/desktop/api/ddeml/nf-ddeml-ddeimpersonateclient)                                                                                             | Si se produce un error en la función, las solicitudes de cliente posteriores se realizan en el contexto de seguridad del proceso de llamada. Esto puede ser un problema si el proceso de llamada se ejecuta como una cuenta con privilegios elevados. Por lo tanto, si se produce un error en la llamada o se produce un error, no continúa la ejecución de la solicitud del cliente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**GetClipboardFormatName**](/windows/desktop/api/winuser/nf-winuser-getclipboardformatnamea)                                                                                         | El cálculo incorrecto del tamaño adecuado del búfer *lpszFormatName* , especialmente cuando la aplicación se usa en versiones ANSI y Unicode, puede provocar un desbordamiento del búfer. Además, tenga en cuenta que la cadena se trunca si es más larga que el parámetro *cchMaxCount* , lo que puede provocar la pérdida de información.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| [**GetMenuString**](/windows/desktop/api/winuser/nf-winuser-getmenustringa)                                                                                                           | El parámetro *lpString* es un búfer **TCHAR** y *nMaxCount* es la longitud de la cadena de menú en **TCHAR** s. El ajuste incorrecto de estos parámetros puede ser la longitud de la cadena de menú en caracteres. Cambiar el tamaño de estos parámetros de forma incorrecta puede provocar el truncamiento de la cadena, lo que provoca una posible pérdida de datos.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| [**GetStringTypeA**](/windows/desktop/api/winnls/nf-winnls-getstringtypea), [**GetStringTypeEx**](/windows/win32/api/stringapiset/nf-stringapiset-getstringtypeexw), [**GetStringTypeW**](/windows/desktop/api/stringapiset/nf-stringapiset-getstringtypew) | Para evitar un desbordamiento del búfer, establezca el tamaño del búfer de *lpCharType* correctamente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [**LoadLibrary**](/windows/desktop/api/libloaderapi/nf-libloaderapi-loadlibrarya)                                                                                                                       | El uso incorrecto de **LoadLibrary** puede poner en peligro la seguridad de la aplicación mediante la carga de una DLL incorrecta.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| [**Fall**](/windows/desktop/api/winuser/nf-winuser-loadstringa)                                                                                                                 | Un uso incorrecto incluye la especificación de un tamaño incorrecto en el parámetro *nBufferMax* . Por ejemplo, sizeof (*lpBuffer*) proporciona el tamaño del búfer en bytes, lo que podría provocar un desbordamiento del búfer para la versión Unicode de la función. Las situaciones de desbordamiento del búfer son la causa de muchos problemas de seguridad en las aplicaciones. En este caso, el uso `sizeof(lpBuffer)/sizeof(TCHAR)` de proporciona el tamaño adecuado del búfer.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| [**lstrcat**](/windows/desktop/api/winbase/nf-winbase-lstrcata)                                                                                                                       | Esta función usa el control de excepciones estructurado (SEH) para detectar infracciones de acceso y otros errores. Cuando esta función detecta errores SEH, devuelve **null** sin la terminación nula de la cadena y sin el valor null, sin tener que terminar la cadena y sin notificar al llamador del error. El autor de la llamada no es seguro suponer que el espacio insuficiente es la condición de error. El primer argumento, *lpString1*, debe ser lo suficientemente grande como para contener *lpString2* y el cierre ' \\ 0 '; de lo contrario, se puede producir una saturación del búfer. Las saturaciones del búfer pueden provocar un ataque de denegación de servicio contra la aplicación si se produce una infracción de acceso. En el peor de los casos, una saturación del búfer puede permitir que un atacante Inserte código ejecutable en el proceso, especialmente si *lpString1* es un búfer basado en la pila. Considere la posibilidad de usar una de las siguientes alternativas. [**StringCbCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcbcata) o [**StringCchCat**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcata).                                                                                                                                                                                       |
| [**lstrcpy**](/windows/desktop/api/winbase/nf-winbase-lstrcpya)                                                                                                                       | Esta función usa el control de excepciones estructurado (SEH) para detectar infracciones de acceso y otros errores. Cuando esta función detecta errores SEH, devuelve **null** sin la terminación nula de la cadena y sin el valor null, sin tener que terminar la cadena y sin notificar al llamador del error. El autor de la llamada no es seguro suponer que el espacio insuficiente es la condición de error. El primer argumento, *lpString1*, debe ser lo suficientemente grande como para contener *lpString2* y el cierre ' \\ 0 '; de lo contrario, se puede producir una saturación del búfer. Las saturaciones del búfer pueden provocar un ataque de denegación de servicio contra la aplicación si se produce una infracción de acceso. En el peor de los casos, una saturación del búfer puede permitir que un atacante Inserte código ejecutable en el proceso, especialmente si *lpString1* es un búfer basado en la pila. Considere la posibilidad de usar [**StringCchCopy**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) en su lugar.                                                                                                                                                                                                                                                               |
| [**lstrcpyn**](/windows/desktop/api/winbase/nf-winbase-lstrcpyna)                                                                                                                     | Esta función usa el control de excepciones estructurado (SEH) para detectar infracciones de acceso y otros errores. Cuando esta función detecta errores SEH, devuelve **null** sin la terminación nula de la cadena y sin el valor null, sin tener que terminar la cadena y sin notificar al llamador del error. El autor de la llamada no es seguro suponer que el espacio insuficiente es la condición de error. Si *lpString1* no es suficientemente grande para contener la cadena copiada, se puede producir una saturación del búfer. Además, al copiar una cadena completa, tenga en cuenta que [sizeof](https://msdn.microsoft.com/library/0w557fh7(VS.71).aspx) devuelve el número de bytes en lugar de **WCHAR**, que **sizeof** devuelve el número de bytes en lugar de caracteres, que es incorrecto para la versión Unicode de esta función. Las saturaciones del búfer pueden provocar un ataque de denegación de servicio contra la aplicación si se produce una infracción de acceso. En el peor de los casos, una saturación del búfer puede permitir que un atacante Inserte código ejecutable en el proceso, especialmente si *lpString1* es un búfer basado en la pila. Considere la posibilidad de usar [**StringCchCopy**](/windows/desktop/api/strsafe/nf-strsafe-stringcchcopya) en su lugar. |
| [**lstrlen**](/windows/desktop/api/winbase/nf-winbase-lstrlena)                                                                                                                       | [**lstrlen**](/windows/desktop/api/winbase/nf-winbase-lstrlena) supone que *lpString* es una cadena terminada en NULL. En caso contrario, podría provocar una saturación del búfer o un ataque de denegación de servicio en la aplicación. Considere la posibilidad de usar una de las siguientes alternativas. [**StringCbLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcblengtha) o [**StringCchLength**](/windows/desktop/api/strsafe/nf-strsafe-stringcchlengtha).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| [**wsprintf**](/windows/desktop/api/winuser/nf-winuser-wsprintfa)                                                                                                                     | No se garantiza que la cadena devuelta en *lpOut* esté terminada en NULL. Además, evite el formato% s, lo que puede provocar una saturación del búfer. Si se produce una infracción de acceso, provoca una denegación de servicio en la aplicación. En el peor de los casos, un atacante puede inyectar código ejecutable. Considere la posibilidad de usar una de las siguientes alternativas. [**StringCbPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa)o [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).                                                                                                                                                                                                                                                                                                                                         |
| [**wvsprintf**](/windows/desktop/api/winuser/nf-winuser-wvsprintfa)                                                                                                                   | No se garantiza que la cadena devuelta en *lpOutput* esté terminada en NULL. Además, evite el uso del formato% s, lo que puede provocar una saturación del búfer. Esto puede conducir a una denegación de servicio si se produce una infracción de acceso o un atacante puede inyectar código ejecutable. Considere la posibilidad de usar una de las siguientes alternativas. [**StringCbPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfa), [**StringCbPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbprintfexa), [**StringCbVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfa), [**StringCbVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcbvprintfexa), [**StringCchPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfa), [**StringCchPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchprintfexa), [**StringCchVPrintf**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfa)o [**StringCchVPrintfEx**](/windows/desktop/api/strsafe/nf-strsafe-stringcchvprintfexa).                                                                                                                                                                                                                                                                                                                                                      |



 

## <a name="related-topics"></a>Temas relacionados

<dl> <dt>

[Seguridad de Microsoft](https://www.microsoft.com/security/)
</dt> <dt>

[Identidad y seguridad](/windows/desktop/security)
</dt> <dt>

[Índice de procedimientos de seguridad](/previous-versions/msp-n-p/ff650055(v=pandp.10))
</dt> <dt>

[Recursos de seguridad de TechNet](https://www.microsoft.com/technet/security/default.mspx)
</dt> <dt>

[Prácticas recomendadas para las API de seguridad](/windows/desktop/SecBP/best-practices-for-the-security-apis)
</dt> </dl>

 

 