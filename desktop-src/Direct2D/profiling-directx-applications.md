---
title: Generación de perfiles de aplicaciones de DirectX
description: Muestra cómo medir algunas de las medidas de tiempo de rendimiento más importantes para una aplicación DirectX mediante las herramientas XPerf y GPUView que se incluyen como parte del kit de herramientas de rendimiento de Windows.
ms.assetid: 4B2F7273-C9B0-4DD3-B559-6220CDE62129
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0280389d4f8f2161e5e07f8906df7ea0484ad458
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/04/2021
ms.locfileid: "104571015"
---
# <a name="profiling-directx-apps"></a><span data-ttu-id="6df65-103">Generación de perfiles de aplicaciones de DirectX</span><span class="sxs-lookup"><span data-stu-id="6df65-103">Profiling DirectX Apps</span></span>

<span data-ttu-id="6df65-104">Esto muestra cómo medir algunas de las medidas de tiempo de rendimiento más importantes para una aplicación [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) mediante las herramientas **XPerf** y **GPUView** que se incluyen como parte del kit de herramientas de rendimiento de Windows.</span><span class="sxs-lookup"><span data-stu-id="6df65-104">This shows you how to measure some of the most important performance time measurements for a [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) app using the **XPerf** and **GPUView** tools that ship as part of the Windows Performance Toolkit.</span></span> <span data-ttu-id="6df65-105">Esta no es una guía completa para comprender las herramientas, sino su aplicabilidad específica para analizar el rendimiento de las aplicaciones de DirectX.</span><span class="sxs-lookup"><span data-stu-id="6df65-105">This is not a comprehensive guide for understanding the tools, rather their specific applicability for analyzing DirectX app performance.</span></span> <span data-ttu-id="6df65-106">Aunque la mayoría de las técnicas descritas aquí son relevantes para todas las aplicaciones de DirectX, es más importante para las aplicaciones que usan cadenas de intercambio y no para las aplicaciones de DirectX basadas en XAML que usan SIS/VSI y animaciones XAML.</span><span class="sxs-lookup"><span data-stu-id="6df65-106">While most of the techniques discussed here are relevant to all DirectX apps, it is most relevant to apps that use swap chains and not to DirectX applications built on XAML that use SIS/VSIS and XAML animations.</span></span> <span data-ttu-id="6df65-107">Le guiaremos a través de las mediciones clave de tiempo de rendimiento, la adquisición e instalación de las herramientas y la realización de seguimientos de medición del rendimiento y su análisis para comprender los cuellos de botella de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6df65-107">We walk you through key performance time measurements, how to acquire and install the tools, and take performance measurement traces then analyze them to understand app bottlenecks.</span></span>

## <a name="about-the-tools"></a><span data-ttu-id="6df65-108">Acerca de las herramientas</span><span class="sxs-lookup"><span data-stu-id="6df65-108">About the Tools</span></span>

### <a name="xperf"></a><span data-ttu-id="6df65-109">**XPerf**</span><span class="sxs-lookup"><span data-stu-id="6df65-109">**XPerf**</span></span>

<span data-ttu-id="6df65-110">**XPerf** es un conjunto de herramientas de análisis de rendimiento basadas en el seguimiento de eventos para Windows (ETW) diseñado para medir y analizar el rendimiento y el uso de recursos detallados del sistema y la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6df65-110">**XPerf** is a set of performance analysis tools built on top of Event Tracing for Windows (ETW) designed for measuring and analyzing detailed system and app performance and resource usage.</span></span> <span data-ttu-id="6df65-111">A partir de Windows 8, esta herramienta de línea de comandos tiene una interfaz gráfica de usuario y se denomina Windows performance Recorder (WPR) y Windows Performance Analyzer (WPA).</span><span class="sxs-lookup"><span data-stu-id="6df65-111">Starting in Windows 8 this command line tool has a graphical user interface and is called the Windows Performance Recorder (WPR) and Windows Performance Analyzer (WPA).</span></span> <span data-ttu-id="6df65-112">Puede encontrar más información sobre estas herramientas en la Página Web de [Windows performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)) (WPT): [Windows performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)).</span><span class="sxs-lookup"><span data-stu-id="6df65-112">More information about these tools can be found at the web page for [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)) (WPT): [Windows Performance Toolkit](/previous-versions/windows/it-pro/windows-8.1-and-8/hh162945(v=win.10)).</span></span>

<span data-ttu-id="6df65-113">ETW recopila eventos de kernel solicitados y los guarda en un archivo denominado archivo de registro de seguimiento de eventos (ETL).</span><span class="sxs-lookup"><span data-stu-id="6df65-113">An ETW collects requested kernel events and saves them into a file called an event trace log (ETL) file.</span></span> <span data-ttu-id="6df65-114">Estos eventos de kernel proporcionan una amplia información sobre una aplicación y las características del sistema cuando se ejecuta la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6df65-114">These kernel events provide extensive information about an app and system characteristics when running the app.</span></span> <span data-ttu-id="6df65-115">Los datos se recopilan mediante la habilitación de la captura de seguimiento, la realización del escenario de aplicación deseado que necesita análisis y la detención de la captura, que guarda los datos en un archivo ETL.</span><span class="sxs-lookup"><span data-stu-id="6df65-115">Data is collected by enabling trace capture, performing the desired app scenario that needs analysis, stopping the capture which saves the data in an ETL file.</span></span> <span data-ttu-id="6df65-116">A continuación, puede analizar el archivo en el mismo equipo o en otro diferente mediante la herramienta de línea de comandos **xperf.exe** o la herramienta de análisis de seguimiento visual **xperfview.exe**.</span><span class="sxs-lookup"><span data-stu-id="6df65-116">You can then analyze the file on the same or a different machine using either the command line tool **xperf.exe** or the visual trace analysis tool **xperfview.exe**.</span></span>

### <a name="gpuview"></a><span data-ttu-id="6df65-117">GPUView</span><span class="sxs-lookup"><span data-stu-id="6df65-117">GPUView</span></span>

<span data-ttu-id="6df65-118">**GPUView** es una herramienta de desarrollo para determinar el rendimiento de la unidad de procesamiento de gráficos (GPU) y la CPU.</span><span class="sxs-lookup"><span data-stu-id="6df65-118">**GPUView** is a development tool for determining the performance of the graphics processing unit (GPU) and CPU.</span></span> <span data-ttu-id="6df65-119">Observa el rendimiento con respecto al procesamiento de búfer de acceso directo a memoria (DMA) y el resto del procesamiento de vídeo en el hardware de vídeo.</span><span class="sxs-lookup"><span data-stu-id="6df65-119">It looks at performance with regard to direct memory access (DMA) buffer processing and all other video processing on the video hardware.</span></span>

<span data-ttu-id="6df65-120">En el caso de las aplicaciones de [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) que dependen en gran medida de la GPU, **GPUView** es una herramienta eficaz para comprender la relación entre el trabajo realizado en la CPU y la GPU.</span><span class="sxs-lookup"><span data-stu-id="6df65-120">For [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) apps that rely heavily on the GPU, **GPUView** is a powerful tool for understanding the relationship between work done on the CPU vs. GPU.</span></span> <span data-ttu-id="6df65-121">Para obtener más información sobre **GPUView**, consulte [uso de GPUView](/windows-hardware/drivers/display/using-gpuview).</span><span class="sxs-lookup"><span data-stu-id="6df65-121">For more info about **GPUView** see [Using GPUView](/windows-hardware/drivers/display/using-gpuview).</span></span>

<span data-ttu-id="6df65-122">De forma similar a **XPerf**, primero se toma un seguimiento de ETW iniciando el servicio de seguimiento, ejercitando el escenario en el que se debe tener en cuenta el análisis de la aplicación, deteniendo el servicio y guardando la información en un archivo ETL.</span><span class="sxs-lookup"><span data-stu-id="6df65-122">Similar to **XPerf**, an ETW trace is first taken by starting the tracing service, exercising the scenario that needs analysis for the app under consideration, stopping the service and saving the information in an ETL file.</span></span> <span data-ttu-id="6df65-123">**GPUView** presenta los datos presentes en el archivo ETL en un formato gráfico.</span><span class="sxs-lookup"><span data-stu-id="6df65-123">**GPUView** presents the data present in the ETL file in a graphical format.</span></span>

<span data-ttu-id="6df65-124">Después de instalar la herramienta **GPUView** , se recomienda leer el tema "presentación principal de **GPUView**" en el menú "ayuda de **GPUView** ".</span><span class="sxs-lookup"><span data-stu-id="6df65-124">After installing the **GPUView** tool, it is we recommend you read the "**GPUView**’s Main Display" topic under the "**GPUView** Help" menu.</span></span> <span data-ttu-id="6df65-125">Contiene información útil sobre cómo interpretar la interfaz de usuario de **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="6df65-125">It contains useful information about how to interpret the **GPUView** UI.</span></span>

## <a name="installing-the-tools"></a><span data-ttu-id="6df65-126">Instalación de las herramientas</span><span class="sxs-lookup"><span data-stu-id="6df65-126">Installing the Tools</span></span>

<span data-ttu-id="6df65-127">Tanto **XPerf** como **GPUView** se incluyen en el kit de herramientas de rendimiento de Windows (WPT).</span><span class="sxs-lookup"><span data-stu-id="6df65-127">Both **XPerf** and **GPUView** are included in the Windows Performance Toolkit (WPT).</span></span>

<span data-ttu-id="6df65-128">**XPerf** se distribuye como parte del kit de desarrollo de software (SDK) de Windows para Windows.</span><span class="sxs-lookup"><span data-stu-id="6df65-128">**XPerf** ships as part of the Windows Software Development Kit (SDK) for Windows.</span></span> <span data-ttu-id="6df65-129">[Descargue el Windows SDK](https://dev.windows.com/downloads).</span><span class="sxs-lookup"><span data-stu-id="6df65-129">[Download the Windows SDK](https://dev.windows.com/downloads).</span></span>

<span data-ttu-id="6df65-130">**GPUView** está disponible en Windows Assessment and Deployment Kit (Windows ADK).</span><span class="sxs-lookup"><span data-stu-id="6df65-130">**GPUView** is available in the Windows Assessment and Deployment Kit (Windows ADK).</span></span> <span data-ttu-id="6df65-131">[Descargue Windows ADK](/windows-hardware/get-started/adk-install).</span><span class="sxs-lookup"><span data-stu-id="6df65-131">[Download the Windows ADK](/windows-hardware/get-started/adk-install).</span></span>

<span data-ttu-id="6df65-132">Después de la instalación, debe agregar los directorios que contienen **XPerf** y **GPUView** a la variable del sistema "path".</span><span class="sxs-lookup"><span data-stu-id="6df65-132">After installation, you must add the directories that contain **XPerf** and **GPUView** to the system "Path" variable.</span></span>

<span data-ttu-id="6df65-133">Haga clic en el botón Inicio y escriba "variables del sistema".</span><span class="sxs-lookup"><span data-stu-id="6df65-133">Click the Start button and type "System Variables".</span></span> <span data-ttu-id="6df65-134">Se abre el ventana Propiedades del sistema.</span><span class="sxs-lookup"><span data-stu-id="6df65-134">The System Properties window opens.</span></span> <span data-ttu-id="6df65-135">Haga clic en "editar las variables de entorno del sistema".</span><span class="sxs-lookup"><span data-stu-id="6df65-135">Click "Edit the system environment variables".</span></span> <span data-ttu-id="6df65-136">Seleccione "variables de entorno" en el cuadro de diálogo "propiedades del sistema".</span><span class="sxs-lookup"><span data-stu-id="6df65-136">Select "Environment Variables" from the "System Properties" dialog box.</span></span> <span data-ttu-id="6df65-137">La variable "path" se encuentra en "variables del sistema".</span><span class="sxs-lookup"><span data-stu-id="6df65-137">The "Path" variable is found under "System variables".</span></span> <span data-ttu-id="6df65-138">Anexe el directorio que contiene **xperf.exe** y **GPUView.exe** a la ruta de acceso.</span><span class="sxs-lookup"><span data-stu-id="6df65-138">Append the directory containing **xperf.exe** and **GPUView.exe** to the path.</span></span> <span data-ttu-id="6df65-139">Estos ejecutables se encuentran en el directorio "Windows performance Toolkit" dentro de "kits de Windows".</span><span class="sxs-lookup"><span data-stu-id="6df65-139">These executables are found in the "Windows Performance Toolkit" directory inside the "Windows Kits".</span></span> <span data-ttu-id="6df65-140">La ubicación predeterminada es: **C: \\ archivos de programa (x86) \\ kits de Windows \\ 10 \\ Windows performance Toolkit**.</span><span class="sxs-lookup"><span data-stu-id="6df65-140">The default location is: **C:\\Program Files (x86)\\Windows Kits\\10\\Windows Performance Toolkit**.</span></span>

## <a name="performance-time-measurements"></a><span data-ttu-id="6df65-141">Medidas de tiempo de rendimiento</span><span class="sxs-lookup"><span data-stu-id="6df65-141">Performance Time Measurements</span></span>

<span data-ttu-id="6df65-142">La mayoría de las aplicaciones esperan ejecutarse sin problemas y responder a los datos proporcionados por el usuario.</span><span class="sxs-lookup"><span data-stu-id="6df65-142">Most apps expect to run smoothly and be responsive to user input.</span></span> <span data-ttu-id="6df65-143">Sin embargo, en función del escenario que desee, un aspecto de rendimiento podría ser más importante que otro.</span><span class="sxs-lookup"><span data-stu-id="6df65-143">However, depending upon the scenario the you want, one aspect of performance might be more important than another.</span></span> <span data-ttu-id="6df65-144">Por ejemplo, en el caso de una aplicación de lector de noticias que se ejecuta en un Touch Tablet PC, el aspecto más importante es ver un solo artículo a la vez y desplazarse por el mismo artículo u otro distinto.</span><span class="sxs-lookup"><span data-stu-id="6df65-144">For instance, for a news reader app running on a touch tablet PC, the most important aspect is to view a single article at a time and to pan/zoom/scroll through the same or a different article.</span></span> <span data-ttu-id="6df65-145">En este escenario, la capacidad de representar todo el contenido de cada fotograma no es necesario.</span><span class="sxs-lookup"><span data-stu-id="6df65-145">In this scenario the ability to render all the content every frame is not necessary.</span></span> <span data-ttu-id="6df65-146">Sin embargo, la capacidad de desplazarse por el artículo sin problemas en un gesto táctil es muy importante.</span><span class="sxs-lookup"><span data-stu-id="6df65-146">However, the ability to scroll through the article smoothly upon a touch gesture is extremely important.</span></span>

<span data-ttu-id="6df65-147">En otra instancia, un juego o una aplicación de representación de vídeo que usa muchas animaciones tiene problemas si se quitan los fotogramas.</span><span class="sxs-lookup"><span data-stu-id="6df65-147">In another instance, a game or a video rendering app that uses lots of animations glitches if frames are dropped.</span></span> <span data-ttu-id="6df65-148">En este caso, la capacidad de presentar contenido en la pantalla sin interuption de los datos proporcionados por el usuario es muy importante.</span><span class="sxs-lookup"><span data-stu-id="6df65-148">In this case, the ability to present content on the screen without interuption from user input is extremely important.</span></span>

<span data-ttu-id="6df65-149">Para comprender qué parte de la aplicación es problemática, el primer paso es decidir los escenarios más importantes.</span><span class="sxs-lookup"><span data-stu-id="6df65-149">In order to understand which part of the app is problematic, the first step is to decide on the most important scenarios.</span></span> <span data-ttu-id="6df65-150">Una vez que se comprenden los aspectos básicos de la aplicación y cómo se van a ejercitar, es más fácil buscar problemas con las herramientas.</span><span class="sxs-lookup"><span data-stu-id="6df65-150">Once the core aspects of the app are understood and how they will be exercised, looking for problems using the tools becomes easier.</span></span>

<span data-ttu-id="6df65-151">Algunas de las métricas de tiempo de rendimiento más comunes son las siguientes:</span><span class="sxs-lookup"><span data-stu-id="6df65-151">Some of the most common performance time metrics are as follows:</span></span>

### <a name="startup-time"></a><span data-ttu-id="6df65-152">Tiempo de inicio</span><span class="sxs-lookup"><span data-stu-id="6df65-152">Startup-time</span></span>

<span data-ttu-id="6df65-153">Tiempo medido desde el inicio del proceso hasta que se llega a la pantalla.</span><span class="sxs-lookup"><span data-stu-id="6df65-153">Time measured from process launch to first present hitting the screen.</span></span> <span data-ttu-id="6df65-154">Esta medida es más útil cuando el sistema está caliente, lo que significa que la medición se realiza una vez que se inicia la aplicación varias veces.</span><span class="sxs-lookup"><span data-stu-id="6df65-154">This measurement is more useful when the system is warm meaning the measurement is taken after the app is launched a few times.</span></span>

### <a name="cpu-time-per-frame"></a><span data-ttu-id="6df65-155">Tiempo de CPU por fotograma</span><span class="sxs-lookup"><span data-stu-id="6df65-155">CPU time per frame</span></span>

<span data-ttu-id="6df65-156">El tiempo durante el cual la CPU procesa activamente la carga de trabajo de la aplicación para un fotograma.</span><span class="sxs-lookup"><span data-stu-id="6df65-156">The time for which CPU actively processes the app workload for one frame.</span></span> <span data-ttu-id="6df65-157">Si la aplicación se ejecuta sin problemas, todo el procesamiento necesario para un fotograma se produce dentro de un intervalo de sincronización de v.</span><span class="sxs-lookup"><span data-stu-id="6df65-157">If the app is running smoothly, all the processing required for one frame happens within one v-sync interval.</span></span> <span data-ttu-id="6df65-158">Con la frecuencia de actualización del monitor de 60 Hz, esto llega a 16ms estándar por fotograma.</span><span class="sxs-lookup"><span data-stu-id="6df65-158">With the monitor refresh rate of 60Hz, this comes to 16ms per frame.</span></span> <span data-ttu-id="6df65-159">Si el tiempo de CPU o el marco es mayor que 16ms estándar, es posible que se necesiten optimizaciones de la CPU para producir una experiencia de aplicación sin problemas.</span><span class="sxs-lookup"><span data-stu-id="6df65-159">If CPU time/frame is greater than 16ms, CPU optimizations might be needed to produce a glitch free app experience.</span></span>

### <a name="gpu-time-per-frame"></a><span data-ttu-id="6df65-160">Tiempo de GPU por fotograma</span><span class="sxs-lookup"><span data-stu-id="6df65-160">GPU time per frame</span></span>

<span data-ttu-id="6df65-161">El tiempo durante el cual la GPU procesa activamente la carga de trabajo de la aplicación para un fotograma.</span><span class="sxs-lookup"><span data-stu-id="6df65-161">The time for which GPU actively processes the app workload for one frame.</span></span> <span data-ttu-id="6df65-162">Una aplicación está enlazada por GPU cuando el tiempo que se tarda en procesar el valor de los datos de un fotograma es superior a 16ms estándar.</span><span class="sxs-lookup"><span data-stu-id="6df65-162">An app is GPU bound when the time taken to process a frame worth of data is more than 16ms.</span></span>

<span data-ttu-id="6df65-163">Poder comprender si una aplicación es un límite de CPU o GPU limitará la parte problemática del código.</span><span class="sxs-lookup"><span data-stu-id="6df65-163">Being able to understand whether an app is CPU or GPU bound will narrow the problematic part of the code.</span></span>

## <a name="taking-performance-time-measurement-trace"></a><span data-ttu-id="6df65-164">Seguimiento de medición de tiempo de rendimiento</span><span class="sxs-lookup"><span data-stu-id="6df65-164">Taking performance time measurement trace</span></span>

<span data-ttu-id="6df65-165">Siga estos pasos para realizar un seguimiento:</span><span class="sxs-lookup"><span data-stu-id="6df65-165">Perform these steps to take a trace:</span></span>

1.  <span data-ttu-id="6df65-166">Abra una ventana de comandos como administrador.</span><span class="sxs-lookup"><span data-stu-id="6df65-166">Open a command window as an administrator.</span></span>
2.  <span data-ttu-id="6df65-167">Cierre la aplicación si ya se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="6df65-167">Close the app if it is already running.</span></span>
3.  <span data-ttu-id="6df65-168">Cambie los directorios al directorio *gpuview* dentro de la carpeta Windows performance Toolkit.</span><span class="sxs-lookup"><span data-stu-id="6df65-168">Change directories to the *gpuview* directory inside the Windows Performance Toolkit folder.</span></span>
4.  <span data-ttu-id="6df65-169">Escriba "log. cmd" para iniciar el seguimiento de eventos.</span><span class="sxs-lookup"><span data-stu-id="6df65-169">Type "log.cmd" to start event tracing.</span></span> <span data-ttu-id="6df65-170">Esta opción registra los eventos más interesantes.</span><span class="sxs-lookup"><span data-stu-id="6df65-170">This option logs the most interesting events.</span></span> <span data-ttu-id="6df65-171">Otras opciones disponibles registran el ámbito de los eventos.</span><span class="sxs-lookup"><span data-stu-id="6df65-171">Other available options log different scope of the events.</span></span> <span data-ttu-id="6df65-172">Por ejemplo, ' v ' o el modo de registro detallado captura todos los eventos de los que **GPUView** es consciente.</span><span class="sxs-lookup"><span data-stu-id="6df65-172">For instance ‘v’ or verbose log mode captures all events that the **GPUView** is aware of.</span></span>
5.  <span data-ttu-id="6df65-173">Inicie el ejemplo y ejecute el ejemplo de forma que cubra la ruta de rendimiento que necesita analizar.</span><span class="sxs-lookup"><span data-stu-id="6df65-173">Launch the sample, and exercise the sample in a manner that covers the performance path that you need to analyze.</span></span>
6.  <span data-ttu-id="6df65-174">Vuelva a las ventanas de comandos y escriba "log. cmd" de nuevo para detener el registro.</span><span class="sxs-lookup"><span data-stu-id="6df65-174">Go back to the command windows and type "log.cmd" again to stop logging.</span></span>
7.  <span data-ttu-id="6df65-175">Esto genera un archivo llamado "Merged. ETL" en la carpeta *gpuview* .</span><span class="sxs-lookup"><span data-stu-id="6df65-175">This outputs a file called "merged.etl" in the *gpuview* folder.</span></span> <span data-ttu-id="6df65-176">Puede guardar este archivo en otra ubicación y puede analizarlo en el mismo equipo o en otro diferente.</span><span class="sxs-lookup"><span data-stu-id="6df65-176">You can save this file to another location and you can analyze it on the same or a different machine.</span></span> <span data-ttu-id="6df65-177">Para ver los detalles de la captura de la pila, guarde el archivo de símbolos (. pdb) asociado a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6df65-177">In order to view stack capture details, save the symbol file (.pdb) associated with the app.</span></span>

## <a name="measurements"></a><span data-ttu-id="6df65-178">Medidas</span><span class="sxs-lookup"><span data-stu-id="6df65-178">Measurements</span></span>


> [!Note]  
> <span data-ttu-id="6df65-179">El ejemplo de medición de la realización de geometría se realiza en un equipo de cuatro núcleos con una tarjeta gráfica de DirectX11 integrada.</span><span class="sxs-lookup"><span data-stu-id="6df65-179">The measurements for geometry realization sample are taken on a Quad Core machine with an integrated DirectX11 graphics card.</span></span> <span data-ttu-id="6df65-180">Las medidas varían en función de la configuración de la máquina.</span><span class="sxs-lookup"><span data-stu-id="6df65-180">The measurements vary depending upon the machine configuration.</span></span>

 

<span data-ttu-id="6df65-181">En esta sección se muestra cómo medir el tiempo de inicio, la CPU y la hora de GPU por medida de fotogramas.</span><span class="sxs-lookup"><span data-stu-id="6df65-181">This section demonstrates how to measure the startup-time, CPU and GPU time per frame measurements.</span></span> <span data-ttu-id="6df65-182">Puede capturar un seguimiento de rendimiento para el mismo ejemplo en la máquina y ver las diferencias en las distintas mediciones.</span><span class="sxs-lookup"><span data-stu-id="6df65-182">You can capture a performance trace for the same sample on your machine and see the differences in the various measurements.</span></span>

<span data-ttu-id="6df65-183">Para analizar el seguimiento en **GPUView**, abra el archivo "Merged. ELT" mediante **GPUView.exe**.</span><span class="sxs-lookup"><span data-stu-id="6df65-183">To analyze the trace in **GPUView**, open the "merged.elt" file using **GPUView.exe**.</span></span>

### <a name="startup-time"></a><span data-ttu-id="6df65-184">Tiempo de inicio</span><span class="sxs-lookup"><span data-stu-id="6df65-184">Startup-time</span></span>

<span data-ttu-id="6df65-185">El tiempo de inicio se mide por el tiempo total transcurrido desde el inicio de la aplicación hasta que el contenido aparece por primera vez en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="6df65-185">The startup time is measured by the total time spent from the app start until the content first appears on the screen.</span></span>

<span data-ttu-id="6df65-186">La medida de tiempo de inicio se realiza mejor siguiendo los pasos indicados en la sección anterior con estas variaciones:</span><span class="sxs-lookup"><span data-stu-id="6df65-186">The startup-time measurement is best taken by following the steps listed in the previous section with these variations:</span></span>

-   <span data-ttu-id="6df65-187">Si realiza las medidas de inicio la primera vez que inicia la aplicación, se denomina Inicio en frío.</span><span class="sxs-lookup"><span data-stu-id="6df65-187">If the you take the start-up measurements the very first time you launch the app, it is called cold startup.</span></span> <span data-ttu-id="6df65-188">Esto puede variar de las medidas tomadas después de iniciar la aplicación varias veces en poco tiempo.</span><span class="sxs-lookup"><span data-stu-id="6df65-188">This may vary from measurements taken after you launch the app a few times over in a small duration of time.</span></span> <span data-ttu-id="6df65-189">Esto se denomina Inicio en caliente.</span><span class="sxs-lookup"><span data-stu-id="6df65-189">This is called warm startup.</span></span> <span data-ttu-id="6df65-190">En función del número de recursos que cree una aplicación en el inicio, puede haber una gran diferencia entre los dos tiempos de inicio.</span><span class="sxs-lookup"><span data-stu-id="6df65-190">Depending upon how many resources an app creates at launch, there can be a big difference between the two startup times.</span></span> <span data-ttu-id="6df65-191">En función de los objetivos de la aplicación, puede ser conveniente medir uno u otro.</span><span class="sxs-lookup"><span data-stu-id="6df65-191">Depending upon app goals, measuring one or the other might be desirable.</span></span>
-   <span data-ttu-id="6df65-192">Al registrar la información de rendimiento, finalice la aplicación en cuanto el primer fotograma se muestre en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="6df65-192">When you log performance information, terminate the app as soon as the first frame shows up on the screen.</span></span>

### <a name="calculating-start-up-time-using-gpuview"></a><span data-ttu-id="6df65-193">Calcular el tiempo de inicio mediante **GPUView**</span><span class="sxs-lookup"><span data-stu-id="6df65-193">Calculating start-up time using **GPUView**</span></span>

1.  <span data-ttu-id="6df65-194">En **GPUView**, desplácese hacia abajo hasta el proceso correspondiente, en este caso GeometryRealization.exe.</span><span class="sxs-lookup"><span data-stu-id="6df65-194">In **GPUView**, scroll down to the relevant process, in this case GeometryRealization.exe.</span></span>

    ![Captura de pantalla que muestra un ejemplo de procesos en GPUView.](images/profile1.png)

2.  <span data-ttu-id="6df65-196">La cola de la CPU de contexto representa la carga de trabajo de gráficos en cola en el hardware, pero no necesariamente la procesa el hardware.</span><span class="sxs-lookup"><span data-stu-id="6df65-196">The context CPU queue represents the graphics workload queued to the hardware, but not necessarily being processed by the hardware.</span></span> <span data-ttu-id="6df65-197">Cuando se abre el archivo de seguimiento, muestra todos los eventos registrados entre el momento en que se tomó el seguimiento.</span><span class="sxs-lookup"><span data-stu-id="6df65-197">When the trace file is opened, it shows all the events logged between the time the trace was taken.</span></span> <span data-ttu-id="6df65-198">Para calcular el tiempo de inicio, seleccione la región de interés, acerque la parte inicial de la primera cola de la CPU de contexto (es la que muestra la actividad) mediante Ctrl + Z.</span><span class="sxs-lookup"><span data-stu-id="6df65-198">In order to calculate the startup-time, select the region of interest, zoom into the initial portion of the first Context CPU Queue (this is the one that shows activity) using Ctrl +Z.</span></span> <span data-ttu-id="6df65-199">Puede encontrar más información sobre los controles de **GPUView** en la sección del archivo de ayuda de **GPUView** "Summary of **GPUView** Controls".</span><span class="sxs-lookup"><span data-stu-id="6df65-199">More information about **GPUView** Controls can be found in the **GPUView** Help file section "Summary of **GPUView** Controls".</span></span> <span data-ttu-id="6df65-200">En la siguiente ilustración solo se muestra el proceso de GeometryRealization.exe de zoom en la primera parte de la cola de la CPU de contexto.</span><span class="sxs-lookup"><span data-stu-id="6df65-200">The figure below only shows the GeometryRealization.exe process zoomed in to the first part of the Context CPU Queue.</span></span> <span data-ttu-id="6df65-201">El color de la cola de la CPU de contexto se indica mediante el rectángulo que se encuentra justo debajo de la cola y los mismos paquetes de datos de color en la cola muestran el trabajo de GPU en cola en el hardware.</span><span class="sxs-lookup"><span data-stu-id="6df65-201">The color of the Context CPU Queue is denoted by the rectangle right below the queue and same color data packets in the queue show GPU work queued up on the hardware.</span></span> <span data-ttu-id="6df65-202">El paquete del patrón de trama en la cola de contexto muestra el paquete presente, lo que significa que la aplicación desea que el hardware presente el contenido en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="6df65-202">The hatch pattern packet in the context queue shows the present packet which means that the app wants the hardware to present the content on the screen.</span></span>

    ![Captura de pantalla que muestra ejemplos de la ' contexto C P U la cola '.](images/profile2.png)

3.  <span data-ttu-id="6df65-204">La hora de inicio es la hora a la que se inicia la aplicación por primera vez (en este caso, el módulo de punto de entrada del subproceso de interfaz de usuario SHCORE.dll) hasta la hora en que el contexto aparece por primera vez (marcado por un paquete de trama).</span><span class="sxs-lookup"><span data-stu-id="6df65-204">The startup-time is the time when the app first starts (in this case UI thread entry point module SHCORE.dll) till the time the context first appears (marked by a hatch packet).</span></span> <span data-ttu-id="6df65-205">En la ilustración se resalta el área de interés.</span><span class="sxs-lookup"><span data-stu-id="6df65-205">The figure here highlights the area of interest.</span></span>

    > [!Note]  
    > <span data-ttu-id="6df65-206">La información actual actual se representa en la cola de volteo y, por lo tanto, el tiempo que se tarda se extiende hasta que el paquete actual se completa realmente en la cola de volteo.</span><span class="sxs-lookup"><span data-stu-id="6df65-206">The actual present info is represented in the flip queue and thus the time take is extended till the present packet actually completes in the flip queue.</span></span>

     

    <span data-ttu-id="6df65-207">La barra de estado completa no está visible en la ilustración siguiente, que también muestra el tiempo transcurrido entre las partes resaltadas.</span><span class="sxs-lookup"><span data-stu-id="6df65-207">The complete status bar is not visible in the figure below which also shows the elapsed time between the highlighted portions.</span></span> <span data-ttu-id="6df65-208">Este es el tiempo de inicio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6df65-208">This is the startup-time of the app.</span></span> <span data-ttu-id="6df65-209">En este caso, para la máquina mencionada anteriormente, llegó a estar alrededor de 240ms.</span><span class="sxs-lookup"><span data-stu-id="6df65-209">In this case for the machine mentioned above, it came out to be around 240ms.</span></span>

    ![Captura de pantalla que muestra las áreas de interés con respecto al tiempo de inicio en el "contexto C P U la cola".](images/profile3.png)

### <a name="cpu-and-gpu-time-per-frame"></a><span data-ttu-id="6df65-211">Tiempo de CPU y GPU por fotograma</span><span class="sxs-lookup"><span data-stu-id="6df65-211">CPU and GPU Time per frame</span></span>

<span data-ttu-id="6df65-212">Hay algunos aspectos que se deben tener en cuenta al medir el tiempo de CPU.</span><span class="sxs-lookup"><span data-stu-id="6df65-212">There are a few things to think about when measuring CPU time.</span></span> <span data-ttu-id="6df65-213">Busque las áreas del seguimiento en las que ha ejecutado el escenario que se va a analizar.</span><span class="sxs-lookup"><span data-stu-id="6df65-213">Look for the areas in the trace where you have exercised the scenario to be analyzed.</span></span> <span data-ttu-id="6df65-214">Por ejemplo, en el ejemplo de realización de geometría, uno de los escenarios que se han analizado es la transición entre la representación de primitivos 2048 y 8192, todo no realizado (como en, Geometry no se tesela cada fotograma).</span><span class="sxs-lookup"><span data-stu-id="6df65-214">For instance, in the geometry realization sample one of the scenarios that has been analyzed is the transition between rendering 2048 and 8192 primitives, all unrealized (as in, geometry is not tessellated every frame).</span></span> <span data-ttu-id="6df65-215">El seguimiento muestra claramente la diferencia en la actividad de la CPU y la GPU antes y después de la transición en el número de primitivas.</span><span class="sxs-lookup"><span data-stu-id="6df65-215">The trace clearly shows difference in CPU and GPU activity before and after the transition in the number of primitives.</span></span>

<span data-ttu-id="6df65-216">Se están analizando dos escenarios para calcular el tiempo de la CPU y la GPU por fotograma.</span><span class="sxs-lookup"><span data-stu-id="6df65-216">Two scenarios are being analyzed to calculate CPU and GPU time per frame.</span></span> <span data-ttu-id="6df65-217">Son los siguientes:</span><span class="sxs-lookup"><span data-stu-id="6df65-217">They are as follows.</span></span>

-   <span data-ttu-id="6df65-218">Transición de la representación de 2048 primitivos no reales a 8192 primitivas no realizadas.</span><span class="sxs-lookup"><span data-stu-id="6df65-218">Transitioning from rendering 2048 unrealized primitives to 8192 unrealized primitives.</span></span>
-   <span data-ttu-id="6df65-219">Transición de la representación de 8192 de primitivas realizadas a 8192 primitivas no realizadas.</span><span class="sxs-lookup"><span data-stu-id="6df65-219">Transitioning from rendering 8192 realized primitives to 8192 unrealized primitives.</span></span>

<span data-ttu-id="6df65-220">En ambos casos, se observó que la velocidad de fotogramas se ha quitado drásticamente.</span><span class="sxs-lookup"><span data-stu-id="6df65-220">In both the cases, it was observed that the frame rate dropped drastically.</span></span> <span data-ttu-id="6df65-221">Medida de la CPU y la hora de la GPU, la relación entre los dos y otros patrones del seguimiento puede proporcionar información útil sobre las áreas problemáticas de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6df65-221">Measuring CPU and GPU time, the relationship between the two as well as a few other patterns in the trace can give useful info about problematic areas in the app.</span></span>

### <a name="calculating-cpu-and-gpu-time-when-2048-primitives-are-being-rendered-unrealized"></a><span data-ttu-id="6df65-222">Calcular la hora de la CPU y la GPU en que se representan los 2048 primitivos no reales</span><span class="sxs-lookup"><span data-stu-id="6df65-222">Calculating CPU and GPU time when 2048 primitives are being rendered unrealized</span></span>

1.  <span data-ttu-id="6df65-223">Abra el archivo de seguimiento mediante **GPUView.exe**.</span><span class="sxs-lookup"><span data-stu-id="6df65-223">Open the trace file using **GPUView.exe**.</span></span>
2.  <span data-ttu-id="6df65-224">Desplácese hacia abajo hasta el proceso de GeometryRealization.exe.</span><span class="sxs-lookup"><span data-stu-id="6df65-224">Scroll down to the GeometryRealization.exe process.</span></span>
3.  <span data-ttu-id="6df65-225">Seleccione un área para calcular el tiempo de CPU y haga zoom en ella con CTRL + Z.</span><span class="sxs-lookup"><span data-stu-id="6df65-225">Select an area for calculating CPU time and zoom into it using CTRL + Z.</span></span>

    ![Captura de pantalla que muestra un área seleccionada para calcular el tiempo de U U hora de C en la ' cola de la CPU de contexto '.](images/profile4.png)

4.  <span data-ttu-id="6df65-227">Muestre la información de la sincronización de v alternando entre F8.</span><span class="sxs-lookup"><span data-stu-id="6df65-227">Show v-sync information by toggling between F8.</span></span> <span data-ttu-id="6df65-228">Mantener el zoom hasta que sea fácil ver claramente un valor de VSYNC de los datos.</span><span class="sxs-lookup"><span data-stu-id="6df65-228">Keeping zooming in till it is easy to see one vsync worth of data clearly.</span></span> <span data-ttu-id="6df65-229">Las líneas azules son los tiempos de sincronización de v.</span><span class="sxs-lookup"><span data-stu-id="6df65-229">The blue lines are where the v-sync times.</span></span> <span data-ttu-id="6df65-230">Normalmente, estos errores se producen una vez cada 16 ms (60 fps), pero si DWM detecta un problema de rendimiento, se ejecuta más lentamente, por lo que se producirá una vez cada 32 ms (30 fps).</span><span class="sxs-lookup"><span data-stu-id="6df65-230">Usually, these occur once every 16 ms (60 fps), but if DWM is encountering a performance problem, it runs slower so they will occur once every 32 ms (30 fps).</span></span> <span data-ttu-id="6df65-231">Para obtener un intervalo de tiempo, seleccione una barra azul hasta la siguiente y, a continuación, examine el número de MS indicado en la esquina inferior derecha de la ventana **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="6df65-231">To get a sense of time, select from one blue bar to the next and then look at the number of ms reported in the lower right hand corner of the **GPUView** window.</span></span>

    ![Captura de pantalla que muestra un ejemplo de tiempos de sincronización de v.](images/profile5.png)

5.  <span data-ttu-id="6df65-233">Para medir el tiempo de CPU por fotograma, mida el tiempo que tardan todos los subprocesos implicados en la representación.</span><span class="sxs-lookup"><span data-stu-id="6df65-233">To measure the CPU time per frame, measure the length of time taken by all the threads involved in rendering.</span></span> <span data-ttu-id="6df65-234">Podría merecer la pena limitar el subproceso que se espera que sea más relevante desde el punto de vista del rendimiento.</span><span class="sxs-lookup"><span data-stu-id="6df65-234">It might be worthwhile to narrow down the thread that is expected to be most relevant from a performance standpoint.</span></span> <span data-ttu-id="6df65-235">Por ejemplo, en el ejemplo de realización de geometría, el contenido se anima y debe representarse en la pantalla cada fotograma que hace que el subproceso de la interfaz de usuario sea el importante.</span><span class="sxs-lookup"><span data-stu-id="6df65-235">For instance in the geometry realization sample, the content is animating and needs to be rendered on the screen every frame making the UI thread the important one.</span></span> <span data-ttu-id="6df65-236">Una vez que determine el subproceso que se va a examinar, mida la longitud de las barras en este subproceso.</span><span class="sxs-lookup"><span data-stu-id="6df65-236">Once you determine which thread to look at, measure the length of the bars on this thread.</span></span> <span data-ttu-id="6df65-237">Al calcular el promedio de algunos de estos se produce el tiempo de CPU por fotograma.</span><span class="sxs-lookup"><span data-stu-id="6df65-237">Averaging a few of these yields CPU time per frame.</span></span> <span data-ttu-id="6df65-238">En la ilustración siguiente se muestra el tiempo invertido en el subproceso de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="6df65-238">The figure below shows time taken up on the UI thread.</span></span> <span data-ttu-id="6df65-239">También muestra que este tiempo se ajusta bien entre dos sincronizaciones v consecutivas, lo que significa que está llegando a 60FPS.</span><span class="sxs-lookup"><span data-stu-id="6df65-239">It also shows that this time fits well between two consecutive v-syncs which mean that it is hitting 60FPS.</span></span>

    ![Captura de pantalla que muestra el tiempo que se tarda en el subproceso U I.](images/profile6.png)

    <span data-ttu-id="6df65-241">También puede comprobar observando la cola de volteo para el período de tiempo correspondiente, que muestra que DWM puede presentar cada fotograma.</span><span class="sxs-lookup"><span data-stu-id="6df65-241">You can also verify by looking at the flip queue for the corresponding time frame which shows that DWM is able to present every frame.</span></span>

    ![Captura de pantalla que muestra un ejemplo de la ' Flip Queue '.](images/profile7.png)

6.  <span data-ttu-id="6df65-243">La hora de la GPU se puede medir de la misma manera que el tiempo de CPU.</span><span class="sxs-lookup"><span data-stu-id="6df65-243">The GPU time can be measured in the same way as the CPU time.</span></span> <span data-ttu-id="6df65-244">Acerque el área relevante como en el caso de medir el tiempo de CPU.</span><span class="sxs-lookup"><span data-stu-id="6df65-244">Zoom into the relevant area as in the case of measuring CPU time.</span></span> <span data-ttu-id="6df65-245">Mida la longitud de las barras en la cola de hardware de GPU con el mismo color que el color de la cola de la CPU de contexto.</span><span class="sxs-lookup"><span data-stu-id="6df65-245">Measure the length of the bars in the GPU hardware Queue with the same color as the color of the Context CPU Queue.</span></span> <span data-ttu-id="6df65-246">Siempre que las barras quepan en las sincronizaciones de v consecutivas, la aplicación se ejecuta sin problemas en 60FPS.</span><span class="sxs-lookup"><span data-stu-id="6df65-246">As long as the bars fit within consecutive v-syncs, the app is running smoothly at 60FPS.</span></span>

    ![Captura de pantalla que muestra un ejemplo de la "cola de hardware de GPU" que muestra la información que una aplicación se está ejecutando en 60 F P S.](images/profile8.png)

### <a name="calculating-cpu-and-gpu-time-when-8192-primitives-are-being-rendered-unrealized"></a><span data-ttu-id="6df65-248">Calcular la hora de la CPU y la GPU en que se representan los 8192 primitivos no reales</span><span class="sxs-lookup"><span data-stu-id="6df65-248">Calculating CPU and GPU time when 8192 primitives are being rendered unrealized</span></span>

1.  <span data-ttu-id="6df65-249">Si sigue los mismos pasos de nuevo, el seguimiento muestra que todo el trabajo de CPU de un fotograma no se ajusta a una sincronización v y a la siguiente.</span><span class="sxs-lookup"><span data-stu-id="6df65-249">If you follow the same steps again, the trace shows that all the CPU work for one frame does not fit between one v-sync and the next.</span></span> <span data-ttu-id="6df65-250">Esto significa que la aplicación está enlazada a la CPU.</span><span class="sxs-lookup"><span data-stu-id="6df65-250">This means that the app is CPU bound.</span></span> <span data-ttu-id="6df65-251">El subproceso de la interfaz de usuario está saturando la CPU.</span><span class="sxs-lookup"><span data-stu-id="6df65-251">The UI thread is saturating the CPU.</span></span>

    ![Captura de pantalla que muestra un ejemplo del subproceso de interfaz de usuario que satura la U de C P.](images/profile9.png)

    <span data-ttu-id="6df65-253">Al examinar la cola de volteo, también está claro que DWM no puede presentar cada fotograma.</span><span class="sxs-lookup"><span data-stu-id="6df65-253">Looking at the flip queue, it is also clear that DWM is not able to present every frame.</span></span>

    ![Captura de pantalla que muestra un ejemplo de D W M no se puede presentar cada fotograma.](images/profile10.png)

2.  <span data-ttu-id="6df65-255">Para analizar dónde se está dedicando el tiempo, abra el seguimiento en **XPerf**.</span><span class="sxs-lookup"><span data-stu-id="6df65-255">In order to analyze where the time is getting spent, open the trace in **XPerf**.</span></span> <span data-ttu-id="6df65-256">Para analizar el tiempo de inicio en **XPerf**, busque primero el intervalo de tiempo en **GPUView**.</span><span class="sxs-lookup"><span data-stu-id="6df65-256">To analyze startup time in **XPerf**, first find the time interval in **GPUView**.</span></span> <span data-ttu-id="6df65-257">Pasar el mouse por encima de la izquierda del intervalo y la derecha y tomar nota del tiempo absoluto que se muestra en la parte inferior de la ventana de **GPUView** .</span><span class="sxs-lookup"><span data-stu-id="6df65-257">Mouse over the left of the interval and the right and take note of the absolute time shown in the bottom of the **GPUView** window.</span></span> <span data-ttu-id="6df65-258">A continuación, abra el mismo archivo. ETL en **XPerf** y, desplácese hacia abajo hasta el gráfico "muestreo de la CPU por CPU", haga clic con el botón derecho y seleccione "seleccionar intervalo...". Esto permite escribir en el intervalo de interés que se descubrió examinando el seguimiento de la GPU.</span><span class="sxs-lookup"><span data-stu-id="6df65-258">Then open the same .etl file in **XPerf** and, scroll down to the "CPU Sampling by CPU" graph, right click and select "Select Interval…" This allows for typing in the interval of interest which was discovered by looking at the GPU trace.</span></span>

    ![Captura de pantalla que muestra ' C P U muestreo por C P U ' en ' análisis de rendimiento de Windows '.](images/profile11.png)

3.  <span data-ttu-id="6df65-260">Vaya al menú de seguimiento y asegúrese de que la opción "cargar símbolos" está activada.</span><span class="sxs-lookup"><span data-stu-id="6df65-260">Go to the Trace menu, and make sure "Load Symbols" is checked.</span></span> <span data-ttu-id="6df65-261">Además, vaya a seguimiento-> configurar rutas de acceso de símbolos y escriba la ruta de acceso de símbolos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6df65-261">Also, go to Trace -> Configure Symbol Paths, and type in the app symbol path.</span></span> <span data-ttu-id="6df65-262">Un archivo de símbolos contiene información de depuración sobre un ejecutable compilado en una base de datos independiente (. pdb).</span><span class="sxs-lookup"><span data-stu-id="6df65-262">A symbol file contains debugging information about a compiled executable in a separate database (.pdb).</span></span> <span data-ttu-id="6df65-263">Este archivo se conoce comúnmente como PDB.</span><span class="sxs-lookup"><span data-stu-id="6df65-263">This file is commonly referred to as a PDB.</span></span> <span data-ttu-id="6df65-264">Encontrará más información sobre los archivos de símbolos aquí: [archivos de símbolos](/windows/desktop/Debug/symbol-files).</span><span class="sxs-lookup"><span data-stu-id="6df65-264">More on symbol files can be found here: [Symbol Files](/windows/desktop/Debug/symbol-files).</span></span> <span data-ttu-id="6df65-265">Este archivo puede encontrarse en la carpeta "debug" del directorio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6df65-265">This file can be located in the "Debug" folder of the app directory.</span></span>

4.  <span data-ttu-id="6df65-266">Para obtener el desglose de la hora en que se está empleando la aplicación, haga clic con el botón derecho en el intervalo seleccionado en el paso anterior y haga clic en tabla de resumen.</span><span class="sxs-lookup"><span data-stu-id="6df65-266">In order to get the breakdown of where the time is being spent in the app, right click on the interval selected in the previous step and click Summary Table.</span></span> <span data-ttu-id="6df65-267">Para obtener una visión general de cuánto tiempo se dedica a cada archivo dll, desactive "pila" en el menú "columnas".</span><span class="sxs-lookup"><span data-stu-id="6df65-267">To get an overview of how much time is spent in each dll, uncheck "Stack" from the "Columns" menu.</span></span> <span data-ttu-id="6df65-268">Observe que en la columna "recuento" se muestra el número de muestras que se encuentran dentro de la función o el archivo dll especificados.</span><span class="sxs-lookup"><span data-stu-id="6df65-268">Note that the "Count" column here shows how many samples are within the given dll/function.</span></span> <span data-ttu-id="6df65-269">Dado que se toma aproximadamente un ejemplo por MS, este número puede usarse como una mejor aproximación a la cantidad de tiempo empleado en cada archivo dll o función.</span><span class="sxs-lookup"><span data-stu-id="6df65-269">Because approximately one sample is taken per ms, this number can be used as a best guess for how much time is spent in each dll/function.</span></span> <span data-ttu-id="6df65-270">Al activar la "pila" en el menú columnas, se proporcionará el tiempo inclusivo invertido en cada función del gráfico de llamadas.</span><span class="sxs-lookup"><span data-stu-id="6df65-270">Checking the "Stack" from Columns menu will give the inclusive time spent in each function in the call graph.</span></span> <span data-ttu-id="6df65-271">Esto le ayudará a desglosar aún más los puntos problemáticos.</span><span class="sxs-lookup"><span data-stu-id="6df65-271">This will help to break down the problem points further.</span></span>

5.  <span data-ttu-id="6df65-272">La información de seguimiento de la pila de 2048 primitivas no realizadas revela que el 30% del tiempo de CPU se emplea en el proceso de realización de geometría.</span><span class="sxs-lookup"><span data-stu-id="6df65-272">Stack trace information for 2048 unrealized primitives reveals that 30% of CPU time is spent in geometry realization process.</span></span> <span data-ttu-id="6df65-273">De eso alrededor del 36% del tiempo se dedica a la teselación geométrica y al trazado.</span><span class="sxs-lookup"><span data-stu-id="6df65-273">Of that around 36% of the time is being spent in geometry tessellation and stroking.</span></span>

6.  <span data-ttu-id="6df65-274">La información de seguimiento de la pila de 8192 primitivas no realizadas revela que alrededor del 60% del tiempo de CPU (4 núcleos) se emplea en la realización de la geometría.</span><span class="sxs-lookup"><span data-stu-id="6df65-274">Stack trace information for 8192 unrealized primitives reveals that around 60% of the CPU time (4 cores) is spent in the geometry realization.</span></span>

    ![Captura de pantalla que muestra información de seguimiento de la pila para el tiempo de C P U.](images/profile12.png)

### <a name="calculating-cpu-time-when-8192-primitives-are-being-rendered-realized"></a><span data-ttu-id="6df65-276">Calcular el tiempo de CPU cuando se representan los 8192 primitivos</span><span class="sxs-lookup"><span data-stu-id="6df65-276">Calculating CPU time when 8192 primitives are being rendered realized</span></span>

<span data-ttu-id="6df65-277">Está claro de los perfiles a los que la aplicación está enlazada a la CPU.</span><span class="sxs-lookup"><span data-stu-id="6df65-277">It is clear from the profiles that the app is CPU bound.</span></span> <span data-ttu-id="6df65-278">Con el fin de reducir el tiempo invertido por la CPU, se pueden crear geometrías una vez y almacenarse en caché.</span><span class="sxs-lookup"><span data-stu-id="6df65-278">In order to reduce the time spent by the CPU, geometries can be created once and cached.</span></span> <span data-ttu-id="6df65-279">El contenido almacenado en caché se puede representar en cada fotograma sin incurrir en el costo de teselación de geometría por fotograma.</span><span class="sxs-lookup"><span data-stu-id="6df65-279">The cached content can be rendered every frame without incurring the geometry tessellation cost per frame.</span></span> <span data-ttu-id="6df65-280">Al examinar el seguimiento en **GPUView** para la parte de la aplicación que se ha realizado, es evidente que DWM puede presentar cada fotograma y el tiempo de CPU ha disminuido drásticamente.</span><span class="sxs-lookup"><span data-stu-id="6df65-280">When looking at the trace in **GPUView** for the realized part of the app, it is clear that DWM is able to present every frame and the CPU time has reduced drastically.</span></span>

![Captura de pantalla que muestra un ejemplo de un seguimiento en GPUView que muestra D W M puede presentar cada fotograma.](images/profile13.png)

<span data-ttu-id="6df65-282">La primera parte del gráfico muestra las primitivas 8192 realizadas.</span><span class="sxs-lookup"><span data-stu-id="6df65-282">The first part of the graph shows realized 8192 primitives.</span></span> <span data-ttu-id="6df65-283">El tiempo de CPU correspondiente por fotograma puede caber en dos sincronizaciones v consecutivas.</span><span class="sxs-lookup"><span data-stu-id="6df65-283">The corresponding CPU time per frame is able to fit within two consecutive v-syncs.</span></span> <span data-ttu-id="6df65-284">En la parte posterior del gráfico, esto no es cierto.</span><span class="sxs-lookup"><span data-stu-id="6df65-284">In the later part of the graph this is not true.</span></span>

<span data-ttu-id="6df65-285">Al buscar en **XPerf**, la CPU está en estado inactivo durante el tiempo más largo con solo un 25% del tiempo de CPU dedicado a la aplicación de realización de geometría.</span><span class="sxs-lookup"><span data-stu-id="6df65-285">Looking in **XPerf**, CPU is sitting idle for the longest time with only about 25% of the CPU time being spent on the geometry realization app.</span></span>

![captura de pantalla gpuview.](images/profile14.png)

## <a name="summary"></a><span data-ttu-id="6df65-287">Resumen</span><span class="sxs-lookup"><span data-stu-id="6df65-287">Summary</span></span>

<span data-ttu-id="6df65-288">Tanto **GPUView** como **XPerf** como herramientas eficaces para analizar el rendimiento de las aplicaciones de [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) .</span><span class="sxs-lookup"><span data-stu-id="6df65-288">Both **GPUView** and **XPerf** and powerful tools for analyzing performance of [DirectX](/previous-versions/windows/apps/jj262109(v=win.10)) apps.</span></span> <span data-ttu-id="6df65-289">Este artículo es una guía básica para el uso de estas herramientas y la comprensión de las medidas de rendimiento y las medidas de aplicación básicas.</span><span class="sxs-lookup"><span data-stu-id="6df65-289">This article is a primer for using these tools and understanding basic performance measurements and app characteristics.</span></span> <span data-ttu-id="6df65-290">Además de comprender el uso de las herramientas, es importante comprender la aplicación que se está analizando.</span><span class="sxs-lookup"><span data-stu-id="6df65-290">Apart from understanding usage of tools, it is first important to understand the app being analyzed.</span></span> <span data-ttu-id="6df65-291">Comience a buscar respuestas a preguntas como ¿qué es la aplicación que está intentando lograr?</span><span class="sxs-lookup"><span data-stu-id="6df65-291">Start with finding answers to questions like what is the app trying to achieve?</span></span> <span data-ttu-id="6df65-292">¿Qué subprocesos del sistema son más importantes?</span><span class="sxs-lookup"><span data-stu-id="6df65-292">Which threads in the system are most important?</span></span> <span data-ttu-id="6df65-293">¿Cuáles son las ventajas y desventajas que tiene que hacer?</span><span class="sxs-lookup"><span data-stu-id="6df65-293">What trade-offs are you willing to make?</span></span> <span data-ttu-id="6df65-294">Al analizar los seguimientos de rendimiento, empiece por mirar en lugares problemáticos obvios.</span><span class="sxs-lookup"><span data-stu-id="6df65-294">When analyzing performance traces, start by looking at obvious problematic places.</span></span> <span data-ttu-id="6df65-295">¿El límite de la CPU o la GPU de la aplicación?</span><span class="sxs-lookup"><span data-stu-id="6df65-295">Is the app CPU or GPU bound?</span></span> <span data-ttu-id="6df65-296">¿La aplicación puede presentar cada fotograma?</span><span class="sxs-lookup"><span data-stu-id="6df65-296">Is the app able to present every frame?</span></span> <span data-ttu-id="6df65-297">Las herramientas, junto con una descripción de la aplicación, pueden proporcionar información muy útil al comprender, buscar y, por último, resolver problemas de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="6df65-297">Tools together with an understanding of the app can give very useful information in understanding, finding and finally solving performance problems.</span></span>

 

 