---
description: Especifica el modelo de hospedaje del proveedor. Al establecer esta propiedad, el proveedor se carga en un proceso de host compartido que tiene un nivel de privilegios especificado.
ms.assetid: 1e5c778d-cd29-449b-88e2-fe0c90d0edcd
ms.tgt_platform: multiple
title: Hospedaje y seguridad de proveedores
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: db6b88a5727f34fbb76baf62dcdf0488e5eb9eb7
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105706928"
---
# <a name="provider-hosting-and-security"></a><span data-ttu-id="f525c-104">Hospedaje y seguridad de proveedores</span><span class="sxs-lookup"><span data-stu-id="f525c-104">Provider Hosting and Security</span></span>

<span data-ttu-id="f525c-105">La propiedad [**HostingModel**](--win32provider.md) de la instancia de **\_ \_ Win32Provider** que representa el proveedor especifica el modelo de hospedaje del proveedor.</span><span class="sxs-lookup"><span data-stu-id="f525c-105">The [**HostingModel**](--win32provider.md) property in the **\_\_Win32Provider** instance that represents your provider specifies the provider hosting model.</span></span> <span data-ttu-id="f525c-106">Al establecer esta propiedad, el proveedor se carga en un proceso de host compartido que tiene un nivel de privilegios especificado.</span><span class="sxs-lookup"><span data-stu-id="f525c-106">Setting this property causes the provider to be loaded into a shared host process that has a specified level of privilege.</span></span>

## <a name="shared-provider-host-process"></a><span data-ttu-id="f525c-107">Proceso de host de proveedor compartido</span><span class="sxs-lookup"><span data-stu-id="f525c-107">Shared Provider Host Process</span></span>

<span data-ttu-id="f525c-108">WMI reside en un host de servicio compartido con otros servicios.</span><span class="sxs-lookup"><span data-stu-id="f525c-108">WMI resides in a shared service host with several other services.</span></span> <span data-ttu-id="f525c-109">Para evitar la detención de todos los servicios cuando se produce un error en un proveedor, los proveedores se cargan en un proceso de host independiente denominado "Wmiprvse.exe".</span><span class="sxs-lookup"><span data-stu-id="f525c-109">To avoid stopping all the services when a provider fails, providers are loaded into a separate host process named "Wmiprvse.exe".</span></span> <span data-ttu-id="f525c-110">Se puede ejecutar más de un proceso con este nombre.</span><span class="sxs-lookup"><span data-stu-id="f525c-110">More than one process with this name can be running.</span></span> <span data-ttu-id="f525c-111">Cada una de ellas puede ejecutarse en una cuenta diferente con una seguridad variable.</span><span class="sxs-lookup"><span data-stu-id="f525c-111">Each can run under a different account with varying security.</span></span> <span data-ttu-id="f525c-112">Tenga en cuenta que, a partir de Windows Vista, use el comando [**WinMgmt**](winmgmt.md) para ejecutar WMI en un proceso independiente mediante un puerto fijo.</span><span class="sxs-lookup"><span data-stu-id="f525c-112">Be aware that, starting with Windows Vista, use the [**winmgmt**](winmgmt.md) command to run WMI in a separate process by itself using a fixed port.</span></span> <span data-ttu-id="f525c-113">Para obtener más información, vea [conectarse a WMI de forma remota a partir de vista](connecting-to-wmi-remotely-starting-with-vista.md).</span><span class="sxs-lookup"><span data-stu-id="f525c-113">For more information, see [Connecting to WMI Remotely Starting with Vista](connecting-to-wmi-remotely-starting-with-vista.md).</span></span>

<span data-ttu-id="f525c-114">El host compartido puede ejecutarse en una de las siguientes cuentas del sistema en un proceso de host Wmiprvse.exe:</span><span class="sxs-lookup"><span data-stu-id="f525c-114">The shared host can run under one of the following system accounts in a Wmiprvse.exe host process:</span></span>

-   [<span data-ttu-id="f525c-115">LocalSystem (Sistema local)</span><span class="sxs-lookup"><span data-stu-id="f525c-115">LocalSystem</span></span>](/windows/desktop/Services/localsystem-account)
-   [<span data-ttu-id="f525c-116">NetworkService (Servicio de red)</span><span class="sxs-lookup"><span data-stu-id="f525c-116">NetworkService</span></span>](/windows/desktop/Services/networkservice-account)
-   [<span data-ttu-id="f525c-117">LocalService (Servicio local)</span><span class="sxs-lookup"><span data-stu-id="f525c-117">LocalService</span></span>](/windows/desktop/Services/localservice-account)

<span data-ttu-id="f525c-118">Un proveedor también puede ser un servidor COM local (. exe) o autohospedado, que no requiere un host del proveedor WMI.</span><span class="sxs-lookup"><span data-stu-id="f525c-118">A provider can also be a local COM server (.exe), or self-hosted, which does not require a WMI provider host.</span></span>

## <a name="setting-the-hosting-model"></a><span data-ttu-id="f525c-119">Establecer el modelo de hospedaje</span><span class="sxs-lookup"><span data-stu-id="f525c-119">Setting the Hosting Model</span></span>

<span data-ttu-id="f525c-120">Dado que LocalSystem es una cuenta con privilegios, se recomienda establecer [**HostingModel**](--win32provider.md) en **NetworkServiceHost** cuando un proveedor se ejecute en un proceso de Wmiprvse.exe.</span><span class="sxs-lookup"><span data-stu-id="f525c-120">Because LocalSystem is a privileged account, it is recommended that you set [**HostingModel**](--win32provider.md) to **NetworkServiceHost** when a provider is running in a Wmiprvse.exe process.</span></span> <span data-ttu-id="f525c-121">La cuenta NetworkServiceHost es para los servicios que no requieren privilegios extensivos, pero que deben comunicarse de forma remota con otros sistemas.</span><span class="sxs-lookup"><span data-stu-id="f525c-121">NetworkServiceHost account is for services that do not require extensive privileges, but do need to communicate remotely with other systems.</span></span>

<span data-ttu-id="f525c-122">Si no establece un valor para la propiedad [**HostingModel**](--win32provider.md) , WMI establecerá un valor predeterminado de **NetworkServiceHostOrSelfHost**.</span><span class="sxs-lookup"><span data-stu-id="f525c-122">If you do not set a value for the [**HostingModel**](--win32provider.md) property, WMI will set a default value of **NetworkServiceHostOrSelfHost**.</span></span> <span data-ttu-id="f525c-123">Si el valor de **HostingModel** se establece en **LocalSystemHost**, WMI utiliza el seguimiento para generar los eventos 5603 y 5604 en el registro de eventos de Windows.</span><span class="sxs-lookup"><span data-stu-id="f525c-123">If the **HostingModel** value is set to **LocalSystemHost**, WMI uses tracing to generate events 5603 and 5604 in the Windows Event Log.</span></span> <span data-ttu-id="f525c-124">Dado que la cuenta local [LocalSystem](/windows/desktop/Services/localsystem-account) tiene privilegios elevados, no se recomienda esta configuración.</span><span class="sxs-lookup"><span data-stu-id="f525c-124">Because the local [LocalSystem](/windows/desktop/Services/localsystem-account) account is highly privileged, this setting is not recommended.</span></span> <span data-ttu-id="f525c-125">Puede ver estos eventos en el **visor de eventos**.</span><span class="sxs-lookup"><span data-stu-id="f525c-125">You can view these events in the **Event Viewer**.</span></span> <span data-ttu-id="f525c-126">Para obtener más información, vea seguimiento de la [actividad WMI](tracing-wmi-activity.md).</span><span class="sxs-lookup"><span data-stu-id="f525c-126">For more information, see [Tracing WMI Activity](tracing-wmi-activity.md).</span></span>

<span data-ttu-id="f525c-127">Establezca la propiedad [**HostingModel**](--win32provider.md) para los proveedores desacoplados como "desacoplado: com".</span><span class="sxs-lookup"><span data-stu-id="f525c-127">Set the [**HostingModel**](--win32provider.md) property for decoupled providers as "Decoupled:Com".</span></span> <span data-ttu-id="f525c-128">Los proveedores creados mediante la adición de clases de instrumentación de [**Microsoft. Management. Infrastructure**](/previous-versions//hh872326(v=vs.85)) en el .NET Framework son proveedores desacoplados.</span><span class="sxs-lookup"><span data-stu-id="f525c-128">Providers created by adding instrumentation classes from [**Microsoft.Management.Infrastructure**](/previous-versions//hh872326(v=vs.85)) in the .NET Framework are decoupled providers.</span></span> <span data-ttu-id="f525c-129">(**System. Management. Instrumentation** ya no se admite). Para obtener más información sobre la creación de un proveedor desacoplado, vea [incorporación de un proveedor en una aplicación](incorporating-a-provider-in-an-application.md).</span><span class="sxs-lookup"><span data-stu-id="f525c-129">(**System.Management.Instrumentation** is no longer supported.) For more information about creating a decoupled provider, see [Incorporating a Provider in an Application](incorporating-a-provider-in-an-application.md).</span></span>

<span data-ttu-id="f525c-130">El modelo de hospedaje se especifica en la propiedad [**HostingModel**](--win32provider.md) de la instancia de **\_ \_ Win32Provider** que representa el proveedor.</span><span class="sxs-lookup"><span data-stu-id="f525c-130">The hosting model is specified in the [**HostingModel**](--win32provider.md) property in the **\_\_Win32Provider** instance that represents your provider.</span></span>

<span data-ttu-id="f525c-131">**Para establecer el modelo de hospedaje para un proveedor**</span><span class="sxs-lookup"><span data-stu-id="f525c-131">**To set the hosting model for a provider**</span></span>

1.  <span data-ttu-id="f525c-132">En el archivo MOF que define el proveedor, cree una instancia de [**\_ \_ Win32Provider**](--win32provider.md).</span><span class="sxs-lookup"><span data-stu-id="f525c-132">In the MOF file that defines your provider, create an instance of [**\_\_Win32Provider**](--win32provider.md).</span></span>
2.  <span data-ttu-id="f525c-133">Asigne un nombre al proveedor en la propiedad **nombre** y asigne el identificador de clase (CLSID) del objeto com del proveedor a la propiedad **CLSID** .</span><span class="sxs-lookup"><span data-stu-id="f525c-133">Assign a name to the provider in the **Name** property and assign the class identifier (CLSID) of the provider COM object to the **Clsid** property.</span></span>

    <span data-ttu-id="f525c-134">En el ejemplo de código siguiente se asigna un nombre a la propiedad **Name** y el CSLID del objeto com Provider a la propiedad **CLSID** .</span><span class="sxs-lookup"><span data-stu-id="f525c-134">The following code example assigns a name to the **Name** property and the CSLID of the provider COM object to the **Clsid** property.</span></span>

    ``` syntax
    Instance of __Win32Provider as $NewProvider
    {
        Name = "MyProvider";
        Clsid = "{.......}";
    }
    ```

3.  <span data-ttu-id="f525c-135">Asigne el valor de host compartido adecuado a la propiedad [**HostingModel**](--win32provider.md) .</span><span class="sxs-lookup"><span data-stu-id="f525c-135">Assign the appropriate shared host value to the [**HostingModel**](--win32provider.md) property.</span></span> <span data-ttu-id="f525c-136">Los valores de host compartido como "NetworkServiceHost" se definen en la propiedad **HostingSpecification** de la clase de [**\_ proveedores msft**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) .</span><span class="sxs-lookup"><span data-stu-id="f525c-136">Shared host values such as "NetworkServiceHost" are defined in the **HostingSpecification** property of [**MSFT\_Providers**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) class.</span></span>

    <span data-ttu-id="f525c-137">En el ejemplo de código siguiente se asigna un valor de host compartido a la propiedad [**HostingModel**](--win32provider.md) .</span><span class="sxs-lookup"><span data-stu-id="f525c-137">The following code example assigns a shared host value to the [**HostingModel**](--win32provider.md) property.</span></span>

    ``` syntax
    HostingModel = "NetworkServiceHost";
    ```

<span data-ttu-id="f525c-138">En el ejemplo de código siguiente se muestra cómo registrar un proveedor en NetworkServiceHost.</span><span class="sxs-lookup"><span data-stu-id="f525c-138">The following code example shows how to register a provider in NetworkServiceHost.</span></span>

``` syntax
Instance of __Win32Provider as $NewProvider
{
    Name = "MyProvider";
    Clsid = "{.......}";
    HostingModel = "NetworkServiceHost";
}
```

<span data-ttu-id="f525c-139">Si tiene varios proveedores, puede agruparlos en un host de servicio específico registrando el proveedor para que resida en la instancia específica.</span><span class="sxs-lookup"><span data-stu-id="f525c-139">If you have multiple providers, you can group them into a specific service host by registering your provider so that it resides in the specific instance.</span></span>

<span data-ttu-id="f525c-140">En el ejemplo de código siguiente también se registra un proveedor en NetworkServiceHost.</span><span class="sxs-lookup"><span data-stu-id="f525c-140">The following code example also registers a provider in NetworkServiceHost.</span></span> <span data-ttu-id="f525c-141">La clase de [**\_ proveedores de msft**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) define valores para los dos valores que se combinan para crear la propiedad **HostingModel** de [**\_ \_ Win32Provider**](--win32provider.md) .</span><span class="sxs-lookup"><span data-stu-id="f525c-141">The [**MSFT\_Providers**](/previous-versions/windows/desktop/wmisystemprov/msft-providers) class defines values for the two values that combine to create the [**\_\_Win32Provider**](--win32provider.md) **HostingModel** property.</span></span> <span data-ttu-id="f525c-142">En el ejemplo, el valor "NetworkServiceHost" procede de la propiedad **HostingSpecification** de los **\_ proveedores msft** y "LocalServiceHost" procede de la propiedad **HostingGroup** .</span><span class="sxs-lookup"><span data-stu-id="f525c-142">In the example, "NetworkServiceHost" value comes from the **HostingSpecification** property of **MSFT\_Providers** and "LocalServiceHost" comes from the **HostingGroup** property.</span></span>

``` syntax
Instance of __Win32Provider as $NewProvider
{
    Name = "MyProvider";
    Clsid = "{.......}";
    HostingModel = "NetworkServiceHost:MySharedHost";
}
```

<span data-ttu-id="f525c-143">Existen problemas de desarrollo especiales para los proveedores que no están desacoplados y que se hospedan en el proceso de Wmiprvse.</span><span class="sxs-lookup"><span data-stu-id="f525c-143">Special development issues exist for providers that are not decoupled and are hosted in the Wmiprvse process.</span></span> <span data-ttu-id="f525c-144">Para obtener más información, vea [depuración de proveedores](debugging-providers.md).</span><span class="sxs-lookup"><span data-stu-id="f525c-144">For more information, see [Debugging Providers](debugging-providers.md).</span></span>

<span data-ttu-id="f525c-145">Si está escribiendo un proveedor que contiene el registro de la propiedad o del proveedor de clases, no todos los modelos de subprocesos funcionan.</span><span class="sxs-lookup"><span data-stu-id="f525c-145">If you are writing a provider that contains property or class provider registration, not all threading models work.</span></span> <span data-ttu-id="f525c-146">Para obtener más información, vea [elegir el registro correcto](choosing-correct-registration.md).</span><span class="sxs-lookup"><span data-stu-id="f525c-146">For more information, see [Choosing Correct Registration](choosing-correct-registration.md).</span></span>

## <a name="hostingmodel-values-for-in-process-providers"></a><span data-ttu-id="f525c-147">Valores de HostingModel para proveedores de In-Process</span><span class="sxs-lookup"><span data-stu-id="f525c-147">HostingModel Values for In-Process Providers</span></span>

<span data-ttu-id="f525c-148">En la lista siguiente se enumeran los valores del modelo de hospedaje de proveedor que se usarán en la instancia de [**\_ \_ Win32Provider**](--win32provider.md) para los proveedores que se ejecutan en un proceso de Wmiprvse.exe.</span><span class="sxs-lookup"><span data-stu-id="f525c-148">The following list lists the provider hosting model values to use in the [**\_\_Win32Provider**](--win32provider.md) instance for providers that run in a Wmiprvse.exe process.</span></span>



| <span data-ttu-id="f525c-149">Valor de [ **\_ \_ Win32Provider. HostingModel**](--win32provider.md)</span><span class="sxs-lookup"><span data-stu-id="f525c-149">Value in [**\_\_Win32Provider.HostingModel**](--win32provider.md)</span></span> | <span data-ttu-id="f525c-150">Descripción</span><span class="sxs-lookup"><span data-stu-id="f525c-150">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|--------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="f525c-151">**SelfHost**</span><span class="sxs-lookup"><span data-stu-id="f525c-151">**SelfHost**</span></span>                                                       | <span data-ttu-id="f525c-152">El proveedor comienza a usar la implementación del servidor local en lugar de in-Process.</span><span class="sxs-lookup"><span data-stu-id="f525c-152">The provider starts using the local server implementation instead of in-process.</span></span> <span data-ttu-id="f525c-153">El contexto de seguridad del proceso en el que se ejecuta el proveedor determina el contexto de seguridad del proveedor.</span><span class="sxs-lookup"><span data-stu-id="f525c-153">The security context of the process in which the provider runs determines the provider security context.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="f525c-154">**LocalSystemHost**</span><span class="sxs-lookup"><span data-stu-id="f525c-154">**LocalSystemHost**</span></span>                                                | <span data-ttu-id="f525c-155">El proveedor, si se implementa como in-Process, se carga en un host de proveedor compartido que se ejecuta en el contexto de [LocalSystem](/windows/desktop/Services/localsystem-account) .</span><span class="sxs-lookup"><span data-stu-id="f525c-155">The provider, if implemented as in-process, is loaded into a shared provider host running under [LocalSystem](/windows/desktop/Services/localsystem-account) context.</span></span> <span data-ttu-id="f525c-156">A partir de Windows Vista, **LocalSystemHost** ya no es el modelo de hospedaje predeterminado si el [**HostingModel**](--win32provider.md) de un proveedor WMI (**\_ \_ Win32Provider**.\*\*\*\* La propiedad HostingModel) no está especificada.</span><span class="sxs-lookup"><span data-stu-id="f525c-156">Starting with Windows Vista, **LocalSystemHost** is no longer the default hosting model if the [**HostingModel**](--win32provider.md) of a WMI provider (**\_\_Win32Provider**.**HostingModel** property) is unspecified.</span></span> <span data-ttu-id="f525c-157">Para obtener más información, vea [seguridad de los modelos de hospedaje](#provider-hosting-and-security).</span><span class="sxs-lookup"><span data-stu-id="f525c-157">For more information, see [Security of Hosting Models](#provider-hosting-and-security).</span></span>                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="f525c-158">**LocalSystemHostOrSelfHost**</span><span class="sxs-lookup"><span data-stu-id="f525c-158">**LocalSystemHostOrSelfHost**</span></span>                                      | <span data-ttu-id="f525c-159">El proveedor se autohospeda o se carga en el proceso de Wmiprvse.exe que se ejecuta en la cuenta [LocalSystem](/windows/desktop/Services/localsystem-account) .</span><span class="sxs-lookup"><span data-stu-id="f525c-159">The provider is self-hosted or loaded into the Wmiprvse.exe process running under the [LocalSystem](/windows/desktop/Services/localsystem-account) account.</span></span> <span data-ttu-id="f525c-160">Dado que LocalSystem es una cuenta con privilegios elevados, se genera una entrada en el registro de eventos de NT de seguridad para notificar a los administradores de un proveedor que se ejecutan en este estado de confianza.</span><span class="sxs-lookup"><span data-stu-id="f525c-160">Because LocalSystem is a highly privileged account, an entry is generated in the Security NT Event Log to notify administrators of a provider running in this trusted status.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="f525c-161">**NetworkServiceHost**</span><span class="sxs-lookup"><span data-stu-id="f525c-161">**NetworkServiceHost**</span></span>                                             | <span data-ttu-id="f525c-162">El proveedor, si se implementa como in-Process, se carga en el proceso de Wmiprvse.exe que se ejecuta en la cuenta [NetworkService](/windows/desktop/Services/networkservice-account) .</span><span class="sxs-lookup"><span data-stu-id="f525c-162">The provider, if implemented as in-process, is loaded into the Wmiprvse.exe process running under [NetworkService](/windows/desktop/Services/networkservice-account) account.</span></span> <span data-ttu-id="f525c-163">A partir de Windows Vista, este es el modelo de hospedaje predeterminado si el [**HostingModel**](--win32provider.md) de un proveedor WMI (**\_ \_ Win32Provider**.\*\*\*\* La propiedad HostingModel) no está especificada.</span><span class="sxs-lookup"><span data-stu-id="f525c-163">Starting with Windows Vista, this is the default hosting model if the [**HostingModel**](--win32provider.md) of a WMI provider (**\_\_Win32Provider**.**HostingModel** property) is unspecified.</span></span> <span data-ttu-id="f525c-164">Para obtener más información, vea [seguridad de los modelos de hospedaje](#provider-hosting-and-security).</span><span class="sxs-lookup"><span data-stu-id="f525c-164">For more information, see [Security of Hosting Models](#provider-hosting-and-security).</span></span><br/> <span data-ttu-id="f525c-165">**NetworkServiceHost** tiene privilegios limitados y, por tanto, reduce la posibilidad de que se produzca un ataque de elevación de privilegios.</span><span class="sxs-lookup"><span data-stu-id="f525c-165">**NetworkServiceHost** has limited privileges and therefore reduces the possibility of an elevation of privilege attack.</span></span> <span data-ttu-id="f525c-166">Si el proveedor solo funciona dentro del equipo local, establezca la propiedad [**HostingModel**](--win32provider.md) en **LocalServiceHost**.</span><span class="sxs-lookup"><span data-stu-id="f525c-166">If the provider only operates within the local computer, then set the [**HostingModel**](--win32provider.md) property to **LocalServiceHost**.</span></span><br/> |
| <span data-ttu-id="f525c-167">**NetworkServiceHostOrSelfHost**</span><span class="sxs-lookup"><span data-stu-id="f525c-167">**NetworkServiceHostOrSelfHost**</span></span>                                   | <span data-ttu-id="f525c-168">El proveedor se autohospeda o se carga en el proceso de WmiPrvse.exe que se ejecuta en la cuenta [NetworkService](/windows/desktop/Services/networkservice-account) .</span><span class="sxs-lookup"><span data-stu-id="f525c-168">The provider is self-hosted or loaded into the WmiPrvse.exe process running under the [NetworkService](/windows/desktop/Services/networkservice-account) account.</span></span> <span data-ttu-id="f525c-169">**NetworkServiceHostOrSelfHost** es la configuración predeterminada cuando la propiedad [**HostingModel**](--win32provider.md) de **\_ \_ Win32Provider** es **null**.</span><span class="sxs-lookup"><span data-stu-id="f525c-169">**NetworkServiceHostOrSelfHost** is the default configuration when the [**HostingModel**](--win32provider.md) property in **\_\_Win32Provider** is **NULL**.</span></span> <span data-ttu-id="f525c-170">Dado que **NetworkServiceHostOrSelfHost** es el valor predeterminado, los proveedores de sistemas operativos anteriores pueden seguir funcionando en Windows Vista, windows Server 2008 y los sistemas operativos posteriores.</span><span class="sxs-lookup"><span data-stu-id="f525c-170">Because **NetworkServiceHostOrSelfHost** is the default, providers from earlier operating systems can continue to work in Windows Vista, Windows Server 2008, and later operating systems.</span></span>                                                                                                                                                                                                                                             |
| <span data-ttu-id="f525c-171">**LocalServiceHost**</span><span class="sxs-lookup"><span data-stu-id="f525c-171">**LocalServiceHost**</span></span>                                               | <span data-ttu-id="f525c-172">El proveedor, si se implementa como in-Process, se carga en el proceso de Wmiprvse.exe que se ejecuta en la cuenta [LocalService](/windows/desktop/Services/localservice-account) .</span><span class="sxs-lookup"><span data-stu-id="f525c-172">The provider, if implemented as in-process, is loaded into the Wmiprvse.exe process running under the [LocalService](/windows/desktop/Services/localservice-account) account.</span></span> <span data-ttu-id="f525c-173">Este es el modelo de hospedaje recomendado para los servicios porque LocalService tiene privilegios limitados.</span><span class="sxs-lookup"><span data-stu-id="f525c-173">This is the recommended hosting model for services because LocalService has limited privileges.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

## <a name="hostingmodel-values-for-decoupled-providers"></a><span data-ttu-id="f525c-174">Valores de HostingModel para proveedores desacoplados</span><span class="sxs-lookup"><span data-stu-id="f525c-174">HostingModel Values for Decoupled Providers</span></span>

<span data-ttu-id="f525c-175">En la lista siguiente se enumeran los valores del modelo de hospedaje de proveedor para los proveedores desacoplados.</span><span class="sxs-lookup"><span data-stu-id="f525c-175">The following list lists the provider hosting model values for decoupled providers.</span></span>

<dl> <dt>

<span data-ttu-id="f525c-176"><span id="Decoupled_Com"></span><span id="decoupled_com"></span><span id="DECOUPLED_COM"></span>**Desacoplado: com**</span><span class="sxs-lookup"><span data-stu-id="f525c-176"><span id="Decoupled_Com"></span><span id="decoupled_com"></span><span id="DECOUPLED_COM"></span>**Decoupled:Com**</span></span>
</dt> <dd>

<span data-ttu-id="f525c-177">El proveedor es un proveedor desacoplado hospedado en un proceso independiente que es un cliente de WMI.</span><span class="sxs-lookup"><span data-stu-id="f525c-177">The provider is a decoupled provider hosted in a separate process that is a client to WMI.</span></span>

<span data-ttu-id="f525c-178">En el ejemplo siguiente se muestra el especificador FoldIdentity para la propiedad [**HostingModel**](--win32provider.md) establecida en **false**, lo que permite al proveedor suplantar al cliente.</span><span class="sxs-lookup"><span data-stu-id="f525c-178">The following example shows the FoldIdentity specifier for the [**HostingModel**](--win32provider.md) property set to **FALSE**, which allows the provider to impersonate the client.</span></span>

``` syntax
Decoupled:Com:FoldIdentity(FALSE)
```

<span data-ttu-id="f525c-179">Si no se especifica FoldIdentity, el valor de FoldIdentity se establece en **true** de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="f525c-179">If FoldIdentity is not specified, the FoldIdentity value is set to **TRUE** by default.</span></span> <span data-ttu-id="f525c-180">Por motivos de seguridad, se recomienda no especificar FoldIdentity (FALSE), ya que una aplicación no autorizada con suplantación de delegado puede afectar a todo el dominio.</span><span class="sxs-lookup"><span data-stu-id="f525c-180">For security reasons, it is recommended that you not specify FoldIdentity(FALSE) since a rogue application with impersonation of Delegate can affect an entire domain.</span></span>

<span data-ttu-id="f525c-181">En el ejemplo siguiente se muestra la propiedad [**HostingModel**](--win32provider.md) establecida de la manera recomendada, que es equivalente a establecer FOLDIDENTITY (true).</span><span class="sxs-lookup"><span data-stu-id="f525c-181">The following example shows the [**HostingModel**](--win32provider.md) property set in the recommended manner that is equivalent to setting FoldIdentity(TRUE).</span></span>

``` syntax
Decoupled:Com
```

</dd> <dt>

<span data-ttu-id="f525c-182"><span id="Decoupled_Noncom"></span><span id="decoupled_noncom"></span><span id="DECOUPLED_NONCOM"></span>**Desacoplado: Noncom**</span><span class="sxs-lookup"><span data-stu-id="f525c-182"><span id="Decoupled_Noncom"></span><span id="decoupled_noncom"></span><span id="DECOUPLED_NONCOM"></span>**Decoupled:Noncom**</span></span>
</dt> <dd>

<span data-ttu-id="f525c-183">Solo para uso interno.</span><span class="sxs-lookup"><span data-stu-id="f525c-183">For internal use only.</span></span> <span data-ttu-id="f525c-184">No se admite.</span><span class="sxs-lookup"><span data-stu-id="f525c-184">Not supported.</span></span>

</dd> </dl>

## <a name="security-of-hosting-models"></a><span data-ttu-id="f525c-185">Seguridad de los modelos de hospedaje</span><span class="sxs-lookup"><span data-stu-id="f525c-185">Security of Hosting Models</span></span>

<span data-ttu-id="f525c-186">En la mayoría de los casos, **LocalSystem** no es necesario y el contexto **NetworkServiceHost** es más adecuado.</span><span class="sxs-lookup"><span data-stu-id="f525c-186">For most situations, **LocalSystem** is unnecessary and the **NetworkServiceHost** context is more appropriate.</span></span> <span data-ttu-id="f525c-187">La mayoría de los proveedores de WMI deben suplantar el contexto de seguridad del cliente para realizar las operaciones solicitadas en nombre del cliente WMI.</span><span class="sxs-lookup"><span data-stu-id="f525c-187">Most WMI Providers must impersonate the client security context to perform requested operations on behalf of the WMI client.</span></span> <span data-ttu-id="f525c-188">A partir de Windows Vista, un proveedor WMI que carece de una definición de modelo de hospedaje y se ejecuta como si se estuviera ejecutando en **LocalSystem** no se ejecutará correctamente.</span><span class="sxs-lookup"><span data-stu-id="f525c-188">Starting with Windows Vista, a WMI provider that lacks a hosting model definition and executes as if it is running under **LocalSystem** will not run properly.</span></span> <span data-ttu-id="f525c-189">Para corregir esta situación, cambie el modelo de hospedaje esperado y asegúrese de que el código del proveedor WMI realiza las operaciones en el contexto de seguridad del cliente mediante la suplantación del cliente WMI.</span><span class="sxs-lookup"><span data-stu-id="f525c-189">To correct this situation, change the expected hosting model and ensure that the WMI provider code performs the operations in the client security context by impersonating the WMI client.</span></span> <span data-ttu-id="f525c-190">LocalSystem rara vez es un requisito.</span><span class="sxs-lookup"><span data-stu-id="f525c-190">LocalSystem is rarely an requirement.</span></span> <span data-ttu-id="f525c-191">Si el proveedor debe tener ese nivel de privilegios, especifique el modelo de hospedaje con la siguiente instrucción en el archivo MOF.</span><span class="sxs-lookup"><span data-stu-id="f525c-191">If your provider must have that level of privilege, specify the hosting model with the following statement in the MOF file.</span></span>

``` syntax
HostingModel=LocalSystemHost
```

## <a name="related-topics"></a><span data-ttu-id="f525c-192">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="f525c-192">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f525c-193">Elección del registro correcto</span><span class="sxs-lookup"><span data-stu-id="f525c-193">Choosing Correct Registration</span></span>](choosing-correct-registration.md)
</dt> <dt>

[<span data-ttu-id="f525c-194">Acceso a los espacios de nombres WMI</span><span class="sxs-lookup"><span data-stu-id="f525c-194">Access to WMI Namespaces</span></span>](access-to-wmi-namespaces.md)
</dt> <dt>

[<span data-ttu-id="f525c-195">Proteger los espacios de nombres de WMI</span><span class="sxs-lookup"><span data-stu-id="f525c-195">Securing WMI Namespaces</span></span>](securing-wmi-namespaces.md)
</dt> <dt>

[<span data-ttu-id="f525c-196">Clases de solución de problemas y configuración del proveedor</span><span class="sxs-lookup"><span data-stu-id="f525c-196">Provider Configuration and Troubleshooting Classes</span></span>](provider-configuration-and-troubleshooting-classes.md)
</dt> <dt>

[<span data-ttu-id="f525c-197">**Proveedores de MSFT \_**</span><span class="sxs-lookup"><span data-stu-id="f525c-197">**MSFT\_Providers**</span></span>](/previous-versions/windows/desktop/wmisystemprov/msft-providers)
</dt> <dt>

[<span data-ttu-id="f525c-198">Mantenimiento de la seguridad de WMI</span><span class="sxs-lookup"><span data-stu-id="f525c-198">Maintaining WMI Security</span></span>](maintaining-wmi-security.md)
</dt> </dl>

 

