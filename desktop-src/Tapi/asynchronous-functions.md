---
description: Una operación que se completa de forma asincrónica realiza parte de su procesamiento en la llamada de función realizada por la aplicación y el resto de la misma en un subproceso de ejecución independiente después de que TAPI 2. x se haya devuelto desde la llamada de función.
ms.assetid: 37b544e4-6413-4741-b8b6-ec676ce4ca97
title: Funciones asincrónicas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 135e792a4b1d6a25a4f49fbb2abe2c19ce3071ad
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105678123"
---
# <a name="asynchronous-functions"></a><span data-ttu-id="d813f-103">Funciones asincrónicas</span><span class="sxs-lookup"><span data-stu-id="d813f-103">Asynchronous Functions</span></span>

<span data-ttu-id="d813f-104">Una operación que se completa de forma asincrónica realiza parte de su procesamiento en la llamada de función realizada por la aplicación y el resto de la misma en un subproceso de ejecución independiente después de que TAPI 2. x se haya devuelto desde la llamada de función.</span><span class="sxs-lookup"><span data-stu-id="d813f-104">An operation that completes asynchronously performs part of its processing in the function call made by the application and the remainder of it in an independent execution thread after TAPI 2.x has returned from the function call.</span></span> <span data-ttu-id="d813f-105">Para garantizar la finalización del procesamiento de la llamada, el proveedor de servicios vectore la solicitud a otra entidad activa del sistema (por ejemplo, un servidor LAN, hardware de complemento, conmutador o red) y, a continuación, vuelve a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d813f-105">To ensure completion of the call's processing, the service provider vectors the request to another active entity in the system—such as a LAN server, add-in hardware, a switch, or a network—and then returns to the application.</span></span> <span data-ttu-id="d813f-106">En este momento, se devuelve un resultado de error negativo o un identificador de solicitud positivo a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d813f-106">At this time, either a negative error result or a positive request identifier is returned to the application.</span></span>

<span data-ttu-id="d813f-107">En el momento de la finalización asincrónica (el proveedor de servicios ha recibido una interrupción del hardware, lo que significa que se debe entregar un mensaje), el proveedor de servicios llama a TAPISRV e informa de que "el evento *X* se acaba de realizar.</span><span class="sxs-lookup"><span data-stu-id="d813f-107">At the time of asynchronous completion (the service provider has received an interrupt from the hardware, meaning that a message must be delivered), the service provider calls TAPISRV and reports that "Event *X* has just taken place.</span></span> <span data-ttu-id="d813f-108">Entregue un mensaje apropiado a todas las aplicaciones afectadas ".</span><span class="sxs-lookup"><span data-stu-id="d813f-108">Deliver an appropriate message to all concerned applications."</span></span> <span data-ttu-id="d813f-109">Cuando TAPISRV recibe este mensaje, reenvía el mensaje a la biblioteca de vínculos dinámicos TAPI, en el proceso de la aplicación, que, a su vez, envía un mensaje de ventana, señala un identificador de evento o se envía a un puerto de finalización de e/s, de acuerdo con el esquema de notificación de mensajes seleccionado por la aplicación en [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) o [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa).</span><span class="sxs-lookup"><span data-stu-id="d813f-109">When TAPISRV receives this message, it forwards the message to the TAPI dynamic-link library, in the application's process, which in turn posts a window message, signals an event handle, or posts to an I/O completion port, according to the message notification scheme selected by the application in [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) or [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa).</span></span>

<span data-ttu-id="d813f-110">Cuando se completa la parte asincrónica de la operación, se envía un mensaje de [**\_ respuesta de línea**](./line-reply.md) (o [**\_ respuesta de teléfono**](./phone-reply.md)) a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d813f-110">When the asynchronous portion of the operation completes, a [**LINE\_REPLY**](./line-reply.md) (or [**PHONE\_REPLY**](./phone-reply.md)) message is sent to the application.</span></span> <span data-ttu-id="d813f-111">Este mensaje contiene, como uno de sus parámetros, el identificador de solicitud devuelto por la llamada de función.</span><span class="sxs-lookup"><span data-stu-id="d813f-111">This message contains, as one of its parameters, the request identifier returned by the function call.</span></span> <span data-ttu-id="d813f-112">Este identificador de solicitud permite a la aplicación determinar qué solicitud original se ha completado.</span><span class="sxs-lookup"><span data-stu-id="d813f-112">This request identifier allows the application to determine which original request has completed.</span></span> <span data-ttu-id="d813f-113">(Las aplicaciones deben recordar los identificadores de solicitud de todas sus solicitudes en curso para que los mensajes de respuesta se puedan controlar correctamente). Un segundo parámetro para el mensaje de respuesta de línea \_ (o respuesta de teléfono \_ ) es el valor devuelto asincrónico.</span><span class="sxs-lookup"><span data-stu-id="d813f-113">(Applications should remember the request identifiers of all their requests in progress so that reply messages can be properly handled.) A second parameter to the LINE\_REPLY (or PHONE\_REPLY) message is the asynchronous return value.</span></span> <span data-ttu-id="d813f-114">Puede ser un valor negativo (para un error) o cero si la operación se completó correctamente.</span><span class="sxs-lookup"><span data-stu-id="d813f-114">This is either a negative value (for an error) or zero if the operation completed successfully.</span></span> <span data-ttu-id="d813f-115">En el caso de las operaciones asincrónicas, se puede devolver cualquiera de los valores devueltos como parte de la función Return o como el parámetro *dwParam2* en el mensaje de respuesta de línea \_ o de respuesta de teléfono \_ .</span><span class="sxs-lookup"><span data-stu-id="d813f-115">For asynchronous operations, any of the return values may be returned as part of the function return or as the *dwParam2* parameter in the LINE\_REPLY or PHONE\_REPLY message.</span></span> <span data-ttu-id="d813f-116">El valor 0, que indica que se ha realizado correctamente, solo se devolverá en el mensaje de respuesta de línea \_ y nunca como el valor devuelto de la función.</span><span class="sxs-lookup"><span data-stu-id="d813f-116">The value 0, which indicates success, will only be returned in the LINE\_REPLY message, and never as the function's return value.</span></span>

<span data-ttu-id="d813f-117">Las funciones Initialize ( [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) y [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa)) indican a TAPI cómo enviar estos mensajes a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d813f-117">The initialize functions ( [**lineInitializeEx**](/windows/win32/api/tapi/nf-tapi-lineinitializeexa) and [**phoneInitializeEx**](/windows/win32/api/tapi/nf-tapi-phoneinitializeexa)) tell TAPI how to send these messages to the application.</span></span>

> [!Note]  
> <span data-ttu-id="d813f-118">En algunos casos, si una aplicación multiproceso llama a una función asincrónica desde un subproceso distinto del subproceso desde el que la aplicación inicializó el dispositivo de línea o teléfono, la aplicación puede recibir el mensaje de respuesta de [**línea \_**](./line-reply.md) o de [**\_ respuesta de teléfono**](./phone-reply.md) antes de que se devuelva la función asincrónica.</span><span class="sxs-lookup"><span data-stu-id="d813f-118">In some cases, if a multithreaded application calls an asynchronous function from a thread other than the thread from which the application initialized the line or phone device, the application may receive the [**LINE\_REPLY**](./line-reply.md) or [**PHONE\_REPLY**](./phone-reply.md) message before the asynchronous function has returned.</span></span> <span data-ttu-id="d813f-119">En tales casos, la aplicación debe guardar los parámetros del mensaje y esperar hasta que se devuelva la función asincrónica y se conozca el identificador de la solicitud antes de procesar el mensaje.</span><span class="sxs-lookup"><span data-stu-id="d813f-119">In such cases, the application should save the message parameters and wait until the asynchronous function returns and the request identifier is known before processing the message.</span></span>

 

 

 
