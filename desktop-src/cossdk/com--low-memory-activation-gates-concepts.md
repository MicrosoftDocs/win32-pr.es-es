---
description: COM+ intenta evitar situaciones en las que se deben ejecutar estas rutas de acceso de error en un servidor.
ms.assetid: 0de125a2-2e91-49b9-a903-6c2e173e22a2
title: Conceptos de las puertas de activación de Low-Memory COM+
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 37d844a0492301ef067f5b3cd0e0749ec3a21779
ms.sourcegitcommit: bf526e267d3991892733bdd229c66d5365cf244a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/05/2021
ms.locfileid: "104003269"
---
# <a name="com-low-memory-activation-gates-concepts"></a><span data-ttu-id="f2d78-103">Conceptos de las puertas de activación de Low-Memory COM+</span><span class="sxs-lookup"><span data-stu-id="f2d78-103">COM+ Low-Memory Activation Gates Concepts</span></span>

<span data-ttu-id="f2d78-104">Por lo general, la sincronización no es necesaria cuando se tiene un contenedor uniproceso (STA) porque el apartamento proporciona la sincronización automáticamente.</span><span class="sxs-lookup"><span data-stu-id="f2d78-104">Generally, synchronization is not required when you have a single-threaded apartment (STA) because the apartment provides the synchronization for you.</span></span> <span data-ttu-id="f2d78-105">La sincronización es importante cuando tiene un contenedor multiproceso (MTA) y un objeto de subproceso libre.</span><span class="sxs-lookup"><span data-stu-id="f2d78-105">Synchronization becomes important when you have a multithreaded apartment (MTA) and a free-threaded object.</span></span> <span data-ttu-id="f2d78-106">En el pasado, los objetos de subprocesamiento libre tenían que controlar el bloqueo.</span><span class="sxs-lookup"><span data-stu-id="f2d78-106">In the past, free-threaded objects have had to handle locking.</span></span> <span data-ttu-id="f2d78-107">Puede eliminar la necesidad de usar el bloqueo estableciendo el atributo de sincronización de un componente.</span><span class="sxs-lookup"><span data-stu-id="f2d78-107">You can eliminate the need to use locking by setting the synchronization attribute for a component.</span></span>

<span data-ttu-id="f2d78-108">Los problemas de confiabilidad suelen producirse cuando los recursos de un servidor no pueden reaccionar de forma eficaz a las cargas máximas.</span><span class="sxs-lookup"><span data-stu-id="f2d78-108">Reliability problems often occur when a server's resources cannot react efficiently to peak loads.</span></span> <span data-ttu-id="f2d78-109">Cuando un servidor no tiene suficientes recursos físicos para satisfacer la demanda máxima, puede agotar la memoria virtual.</span><span class="sxs-lookup"><span data-stu-id="f2d78-109">When a server doesn't have enough physical resources to meet peak demand, it can exhaust virtual memory.</span></span> <span data-ttu-id="f2d78-110">Esto se convierte en un problema si el código del usuario o del sistema no controla correctamente los errores de asignación de memoria.</span><span class="sxs-lookup"><span data-stu-id="f2d78-110">This becomes a problem if the user code or system code does not properly handle memory allocation failures.</span></span> <span data-ttu-id="f2d78-111">El servidor comienza a ralentizarse y, a medida que se agota la memoria, se produce un error en las asignaciones de memoria.</span><span class="sxs-lookup"><span data-stu-id="f2d78-111">The server begins to slow down, and as memory is exhausted, memory allocations fail.</span></span> <span data-ttu-id="f2d78-112">El servidor ejecuta las rutas de acceso de error para controlar los errores de asignación.</span><span class="sxs-lookup"><span data-stu-id="f2d78-112">The server executes error paths to handle the allocation failures.</span></span> <span data-ttu-id="f2d78-113">Si una ruta de acceso de error contiene un error en el código del sistema o del usuario que se ejecuta en el servidor, es muy difícil interceptar y controlar de forma segura.</span><span class="sxs-lookup"><span data-stu-id="f2d78-113">If an error path contains a bug in the system or user code running on the server, it's extremely difficult to trap and handle safely.</span></span>

<span data-ttu-id="f2d78-114">COM+ intenta evitar situaciones en las que se deben ejecutar estas rutas de acceso de error en un servidor.</span><span class="sxs-lookup"><span data-stu-id="f2d78-114">COM+ attempts to prevent situations in which these error paths have to be executed on a server.</span></span> <span data-ttu-id="f2d78-115">A través de la característica de puertas de activación de memoria insuficiente, COM+ supervisa proactivamente la carga de memoria en el sistema y garantiza que haya una cantidad razonable de memoria disponible antes de ejecutar el código de usuario.</span><span class="sxs-lookup"><span data-stu-id="f2d78-115">Through the low-memory activation gates feature, COM+ proactively monitors memory load in the system and ensures that a reasonable amount of memory is available before executing user code.</span></span> <span data-ttu-id="f2d78-116">Si el porcentaje de memoria virtual disponible para la aplicación cae por debajo de un umbral fijo, se produce un error en la activación antes de que se cree un objeto o una aplicación de servidor COM+ (como se muestra en la ilustración siguiente).</span><span class="sxs-lookup"><span data-stu-id="f2d78-116">If the percentage of virtual memory available to the application falls below a fixed threshold, the activation fails before a COM+ server application or object is created (as shown in the illustration below).</span></span> <span data-ttu-id="f2d78-117">Si se producen errores en estas activaciones que normalmente se ejecutarían, la característica de puertas de activación de memoria insuficiente minimiza los problemas asociados a las asignaciones de memoria en el código de usuario, lo que mejora considerablemente la confiabilidad del sistema.</span><span class="sxs-lookup"><span data-stu-id="f2d78-117">By failing these activations that would normally run, the low-memory activation gates feature minimizes the problems associated with memory allocations in user code, which significantly enhances system reliability.</span></span>

![Diagrama que muestra la relación entre una aplicación COM+ y una puerta de activación de memoria insuficiente.](images/ada5ef02-f2b1-46bb-b0fc-fe7d65f31b43.png)

<span data-ttu-id="f2d78-119">La característica de puertas de activación de memoria insuficiente solo se aplica a los componentes COM configurados que se instalan en una aplicación COM+.</span><span class="sxs-lookup"><span data-stu-id="f2d78-119">The low-memory activation gates feature applies only to configured COM components that are installed in a COM+ application.</span></span>

## <a name="how-the-low-memory-activation-gates-feature-works"></a><span data-ttu-id="f2d78-120">Cómo funciona la característica de puertas de activación de Low-Memory</span><span class="sxs-lookup"><span data-stu-id="f2d78-120">How the Low-Memory Activation Gates Feature Works</span></span>

<span data-ttu-id="f2d78-121">La característica de puertas de activación de memoria insuficiente usa un nivel de umbral fijo diferente en función del tipo de activación.</span><span class="sxs-lookup"><span data-stu-id="f2d78-121">The low-memory activation gates feature uses a different fixed threshold level depending on the type of activation.</span></span> <span data-ttu-id="f2d78-122">Al crear una aplicación de servidor COM+, COM+ permite la activación si está disponible más del 10 por ciento de la memoria virtual.</span><span class="sxs-lookup"><span data-stu-id="f2d78-122">When creating a COM+ server application, COM+ allows the activation if more than 10 percent of virtual memory is available.</span></span> <span data-ttu-id="f2d78-123">Si hay disponible menos del 10 por ciento, COM+ realiza una asignación de prueba para averiguar si el archivo de paginación se puede expandir para acomodar la nueva carga de memoria.</span><span class="sxs-lookup"><span data-stu-id="f2d78-123">If less than 10 percent is available, COM+ makes a test allocation to find out if the paging file can expand to accommodate the new memory load.</span></span> <span data-ttu-id="f2d78-124">Si el archivo de paginación se expande, se crea la aplicación de servidor.</span><span class="sxs-lookup"><span data-stu-id="f2d78-124">If the paging file expands, the server application is created.</span></span> <span data-ttu-id="f2d78-125">Si no se puede expandir el archivo de paginación, se produce un error en la activación y no se asigna la memoria.</span><span class="sxs-lookup"><span data-stu-id="f2d78-125">If the paging file cannot be expanded, the activation fails and memory is not allocated.</span></span>

<span data-ttu-id="f2d78-126">El proceso es similar al crear un objeto.</span><span class="sxs-lookup"><span data-stu-id="f2d78-126">The process is similar when creating an object.</span></span> <span data-ttu-id="f2d78-127">En este caso, COM+ permite la activación si está disponible más del 5 por ciento de la memoria virtual.</span><span class="sxs-lookup"><span data-stu-id="f2d78-127">In this case, COM+ allows the activation if more than 5 percent of virtual memory is available.</span></span> <span data-ttu-id="f2d78-128">Si hay disponible menos del 5 por ciento, COM+ continúa con una asignación de prueba.</span><span class="sxs-lookup"><span data-stu-id="f2d78-128">If less than 5 percent is available, COM+ proceeds with a test allocation.</span></span> <span data-ttu-id="f2d78-129">De nuevo, si la asignación de prueba expande el archivo de paginación, se crea el objeto.</span><span class="sxs-lookup"><span data-stu-id="f2d78-129">Again, if the test allocation expands the paging file, the object is created.</span></span> <span data-ttu-id="f2d78-130">En caso contrario, se produce un error en la activación.</span><span class="sxs-lookup"><span data-stu-id="f2d78-130">If not, the activation fails.</span></span>

<span data-ttu-id="f2d78-131">Los niveles de umbral fijos para las puertas de activación de memoria insuficiente no se pueden configurar actualmente.</span><span class="sxs-lookup"><span data-stu-id="f2d78-131">The fixed threshold levels for low-memory activation gates are currently not configurable.</span></span> <span data-ttu-id="f2d78-132">Por esta razón, no hay ninguna tarea asociada a esta característica.</span><span class="sxs-lookup"><span data-stu-id="f2d78-132">For this reason, there are no tasks associated with this feature.</span></span>

 

 



