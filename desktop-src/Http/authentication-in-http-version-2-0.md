---
title: Autenticación (API de servidor HTTP)
description: A partir de la versión 2,0, la API del servidor HTTP realiza la autenticación del lado servidor para la aplicación.
ms.assetid: e8e41e8e-1b10-4747-b18e-763e0752ade4
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 16d523df90861c83a45f67811edad243ceee5165
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/10/2020
ms.locfileid: "104421805"
---
# <a name="authentication-http-server-api"></a><span data-ttu-id="30822-103">Autenticación (API de servidor HTTP)</span><span class="sxs-lookup"><span data-stu-id="30822-103">Authentication (HTTP Server API)</span></span>

<span data-ttu-id="30822-104">Algunas aplicaciones de servidor requieren la autenticación del cliente para tener acceso a los recursos y las solicitudes HTTP del servicio.</span><span class="sxs-lookup"><span data-stu-id="30822-104">Some server applications require client authentication to access resources and service HTTP requests.</span></span> <span data-ttu-id="30822-105">A partir de la versión 2,0, la API del servidor HTTP realiza la autenticación del lado servidor para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="30822-105">Starting with version 2.0, the HTTP Server API performs server side authentication for the application.</span></span> <span data-ttu-id="30822-106">En la API del servidor HTTP versión 1,0, la aplicación de servidor tenía que implementar su propia autenticación.</span><span class="sxs-lookup"><span data-stu-id="30822-106">In the HTTP Server API version 1.0, the server application had to implement its own authentication.</span></span> <span data-ttu-id="30822-107">Entre las ventajas de la autenticación realizada por la API del servidor HTTP se incluyen las siguientes:</span><span class="sxs-lookup"><span data-stu-id="30822-107">Some advantages of authentication performed by the HTTP Server API include:</span></span>

-   <span data-ttu-id="30822-108">Las aplicaciones se pueden ejecutar con pocos privilegios, lo que reduce los riesgos de seguridad.</span><span class="sxs-lookup"><span data-stu-id="30822-108">Applications can run under low privileges, thus reducing security risks.</span></span>
-   <span data-ttu-id="30822-109">La autenticación se realiza en modo kernel, lo que reduce las transiciones del modo de usuario al modo kernel durante la autenticación.</span><span class="sxs-lookup"><span data-stu-id="30822-109">Authentication is performed in kernel mode, thus reducing transitions from user mode to kernel mode during authentication.</span></span>
-   <span data-ttu-id="30822-110">La autenticación realizada en modo kernel permite que las aplicaciones de servidor se ejecuten en diferentes cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="30822-110">Authentication performed in kernel mode allows server applications to run on different user accounts.</span></span> <span data-ttu-id="30822-111">En la versión 1,0, todas las aplicaciones de la máquina deben ejecutarse en la misma cuenta de usuario para autenticarse en el nombre principal del servicio (SPN).</span><span class="sxs-lookup"><span data-stu-id="30822-111">In version 1.0, all applications on the machine must run under the same user account to authenticate on the Service Principle Name (SPN).</span></span>
-   <span data-ttu-id="30822-112">El protocolo de enlace de autenticación NTLM no se restablece si un proceso de trabajo se recicla mientras el protocolo de enlace está en curso.</span><span class="sxs-lookup"><span data-stu-id="30822-112">The NTLM authentication handshake is not reset if a worker process is recycled while the handshake is in process.</span></span>

<span data-ttu-id="30822-113">Para aprovechar la autenticación de la versión 2,0, la aplicación habilita los esquemas de autenticación que la API del servidor HTTP aplica a las direcciones URL para las que se ha registrado la aplicación.</span><span class="sxs-lookup"><span data-stu-id="30822-113">To take advantage of the version 2.0 authentication, the application enables the authentication schemes that the HTTP Server API applies to the URLs for which the application has registered.</span></span> <span data-ttu-id="30822-114">La autenticación se puede habilitar en el grupo de URL o la sesión del servidor.</span><span class="sxs-lookup"><span data-stu-id="30822-114">Authentication can be enabled on the server session or URL group.</span></span> <span data-ttu-id="30822-115">El grupo de direcciones URL hereda los esquemas de autenticación habilitados por la sesión del servidor si no se establece ninguno en el grupo de direcciones URL.</span><span class="sxs-lookup"><span data-stu-id="30822-115">The URL group inherits the authentication schemes enabled by the server session if none are set on the URL group.</span></span> <span data-ttu-id="30822-116">La API del servidor HTTP admite los siguientes esquemas:</span><span class="sxs-lookup"><span data-stu-id="30822-116">The HTTP Server API supports the following schemes:</span></span>

-   <span data-ttu-id="30822-117">Negotiate</span><span class="sxs-lookup"><span data-stu-id="30822-117">Negotiate</span></span>
-   <span data-ttu-id="30822-118">NTLM</span><span class="sxs-lookup"><span data-stu-id="30822-118">NTLM</span></span>
-   <span data-ttu-id="30822-119">Digest</span><span class="sxs-lookup"><span data-stu-id="30822-119">Digest</span></span>
-   <span data-ttu-id="30822-120">Básico</span><span class="sxs-lookup"><span data-stu-id="30822-120">Basic</span></span>

<span data-ttu-id="30822-121">La aplicación de servidor también puede implementar esquemas de autenticación no admitidos por la API del servidor HTTP.</span><span class="sxs-lookup"><span data-stu-id="30822-121">The server application can also implement authentication schemes not supported by the HTTP Server API.</span></span> <span data-ttu-id="30822-122">La API del servidor HTTP envía las solicitudes a la aplicación para los esquemas de autenticación que no se admiten o para los esquemas que no se han habilitado en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="30822-122">The HTTP Server API sends requests to the application for authentication schemes that are not supported, or for schemes that have not been enabled by the application.</span></span>

### <a name="enabling-authentication"></a><span data-ttu-id="30822-123">Habilitar la autenticación</span><span class="sxs-lookup"><span data-stu-id="30822-123">Enabling Authentication</span></span>

<span data-ttu-id="30822-124">La aplicación de servidor habilita y configura la autenticación en la sesión de servidor o el grupo de direcciones URL con las funciones [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) o [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="30822-124">The server application enables and configures authentication on the server session or URL group with the [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty) functions as follows:</span></span>

1.  <span data-ttu-id="30822-125">La aplicación habilita la autenticación mediante la especificación de **HttpServerAuthenticationProperty** en el parámetro *Property* de [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) o [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span><span class="sxs-lookup"><span data-stu-id="30822-125">The application enables authentication by specifying **HttpServerAuthenticationProperty** in the *Property* parameter of [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span></span>
2.  <span data-ttu-id="30822-126">La aplicación especifica los parámetros de configuración en la estructura de [**información de autenticación del \_ servidor \_ \_ http**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) en el parámetro *pPropertyInformation* de [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) o [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span><span class="sxs-lookup"><span data-stu-id="30822-126">The application specifies the configuration parameters in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure in the *pPropertyInformation* parameter of [**HttpSetServerSessionProperty**](/windows/desktop/api/Http/nf-http-httpsetserversessionproperty) or [**HttpSetUrlGroupProperty**](/windows/desktop/api/Http/nf-http-httpseturlgroupproperty).</span></span> <span data-ttu-id="30822-127">La aplicación especifica los esquemas de autenticación habilitados, si está deshabilitado el almacenamiento en caché de credenciales NTLM y proporciona los parámetros básicos y de resumen en la estructura de **\_ información de \_ autenticación \_ del servidor http** .</span><span class="sxs-lookup"><span data-stu-id="30822-127">The application specifies the authentication schemes enabled, whether NTLM credential caching is disabled, and supplies the Basic and Digest parameters in the **HTTP\_SERVER\_AUTHENTICATION\_INFO** structure.</span></span>

### <a name="authentication-procedure"></a><span data-ttu-id="30822-128">Procedimiento de autenticación</span><span class="sxs-lookup"><span data-stu-id="30822-128">Authentication Procedure</span></span>

<span data-ttu-id="30822-129">Para iniciar la autenticación de servidor HTTP, la aplicación habilita la propiedad de autenticación antes de que llegue la primera solicitud a la cola de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="30822-129">To initiate HTTP Server authentication, the application enables the authentication property before the first request arrives on the request queue.</span></span> <span data-ttu-id="30822-130">Los pasos siguientes son el flujo de procesamiento común para autenticar una solicitud.</span><span class="sxs-lookup"><span data-stu-id="30822-130">The following steps are the common processing flow for authenticating a request.</span></span>

1.  <span data-ttu-id="30822-131">La aplicación habilita la autenticación.</span><span class="sxs-lookup"><span data-stu-id="30822-131">The application enables authentication.</span></span> <span data-ttu-id="30822-132">Vea la sección anterior "habilitación de la autenticación".</span><span class="sxs-lookup"><span data-stu-id="30822-132">See the preceding "Enabling Authentication" section.</span></span>
    > [!Note]  
    > <span data-ttu-id="30822-133">El cliente envía una solicitud no autenticada.</span><span class="sxs-lookup"><span data-stu-id="30822-133">The client sends an unauthenticated request.</span></span> <span data-ttu-id="30822-134">La API del servidor HTTP pasa la solicitud a la aplicación de servidor y permite generar el desafío inicial de 401.</span><span class="sxs-lookup"><span data-stu-id="30822-134">The HTTP Server API passes the request to the server application and allows it to generate the initial 401 challenge.</span></span> <span data-ttu-id="30822-135">La API del servidor HTTP incluye la estructura de información de autenticación de la [**\_ solicitud \_ \_ http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) insertada con la estructura de la [**\_ solicitud HTTP**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="30822-135">The HTTP Server API includes the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure embedded with the [**HTTP\_REQUEST**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)) structure.</span></span> <span data-ttu-id="30822-136">El miembro **AuthStatus** indica **HttpAuthStatusNotAuthenticated**</span><span class="sxs-lookup"><span data-stu-id="30822-136">The **AuthStatus** member indicates **HttpAuthStatusNotAuthenticated**</span></span>

     

2.  <span data-ttu-id="30822-137">La aplicación examina el miembro **AuthStatus** de la estructura [**de \_ \_ \_ información de autenticación de la solicitud HTTP**](/windows/desktop/api/Http/ns-http-http_request_auth_info) para determinar si se ha autenticado la solicitud.</span><span class="sxs-lookup"><span data-stu-id="30822-137">The application examines the **AuthStatus** member of the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to determine if the request has been authenticated.</span></span> <span data-ttu-id="30822-138">Si la solicitud no se ha autenticado, la aplicación puede atender la solicitud como anónima o enviar un desafío de autenticación 401 inicial.</span><span class="sxs-lookup"><span data-stu-id="30822-138">If the request has not been authenticated, the application can service the request as anonymous or send an initial 401 authentication challenge.</span></span>
3.  <span data-ttu-id="30822-139">Si la aplicación atiende la solicitud como anónima, controla la solicitud y envía la respuesta final a la aplicación cliente, al igual que si la autenticación no estuviera implicada.</span><span class="sxs-lookup"><span data-stu-id="30822-139">If the application services the request as anonymous, it handles the request and sends the final response to the client application, just as if the authentication was not involved.</span></span>
4.  <span data-ttu-id="30822-140">Si en su lugar la aplicación requiere autenticación, envía el desafío inicial 401 con uno o varios encabezados de WWW-Authenticate que indican los esquemas disponibles para el cliente.</span><span class="sxs-lookup"><span data-stu-id="30822-140">If instead the application requires authentication, it sends the initial 401 challenge with one or more WWW-Authenticate headers indicating the available schemes to the client.</span></span> <span data-ttu-id="30822-141">La aplicación debe utilizar la estructura [**http \_ Multiple \_ knowd \_ headers**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) para compilar el conjunto necesario de encabezados cuando se envía más de un encabezado de autenticación en la respuesta.</span><span class="sxs-lookup"><span data-stu-id="30822-141">The application should use the [**HTTP\_MULTIPLE\_KNOWN\_HEADERS**](/windows/desktop/api/Http/ns-http-http_multiple_known_headers) structure to build the required set of headers when more than one authentication header is sent in the response.</span></span>
    > [!Note]
    >
    > <span data-ttu-id="30822-142">El cliente vuelve a enviar la solicitud con el encabezado de autorización para un esquema seleccionado en el conjunto de esquemas disponibles indicado por la aplicación de servidor en la respuesta inicial 401.</span><span class="sxs-lookup"><span data-stu-id="30822-142">The client resends the request with the authorization header for a scheme selected from the set of available schemes indicated by the server application in initial 401 response.</span></span>
    >
    > <span data-ttu-id="30822-143">La API del servidor HTTP examina el encabezado de autorización de solicitud de autorización para determinar si el esquema está habilitado.</span><span class="sxs-lookup"><span data-stu-id="30822-143">The HTTP Server API examines the authorization request authorization header to determine if the scheme is enabled.</span></span> <span data-ttu-id="30822-144">Si es así, la API del servidor HTTP realiza la autenticación y controla todos los intercambios provisionales de solicitud/401-respuesta hasta que finalice el protocolo de enlace de autenticación.</span><span class="sxs-lookup"><span data-stu-id="30822-144">If it is, then the HTTP Server API performs authentication and handles all interim request/401-response exchanges, until the authentication handshake is finalized.</span></span>
    >
    > <span data-ttu-id="30822-145">Cuando la API del servidor HTTP completa el intento de autenticación, envía la solicitud a la aplicación con los resultados del intento de autenticación en la estructura de [**\_ \_ \_ información**](/windows/desktop/api/Http/ns-http-http_request_auth_info) de autenticación de la solicitud HTTP que se devuelve con la solicitud.</span><span class="sxs-lookup"><span data-stu-id="30822-145">When The HTTP Server API completes the authentication attempt, it sends the request to the application with the results of the authentication attempt in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure that is returned with the request.</span></span> <span data-ttu-id="30822-146">Si se produce un error en el intento de autenticación por una de las razones siguientes, la API del servidor HTTP no pasa la solicitud a la aplicación:</span><span class="sxs-lookup"><span data-stu-id="30822-146">If the authentication attempt fails for one of the following reasons, the HTTP Server API does not pass the request to the application:</span></span>
    >
    > -   <span data-ttu-id="30822-147">Si se produce un error en el protocolo de enlace de autenticación debido a un error interno de la API del servidor HTTP, como un error de asignación de memoria, la API del servidor HTTP genera una respuesta 503 (servicio no disponible) y vuelve a enviar al cliente.</span><span class="sxs-lookup"><span data-stu-id="30822-147">If the authentication handshake fails due to an internal HTTP Server API error such as a memory allocation failure, the HTTP Server API generates a 503 (service unavailable) response and sends back to client.</span></span>
    > -   <span data-ttu-id="30822-148">Si un encabezado de autorización con formato incorrecto, como un encabezado sin nombre de esquema, o la codificación Base64 con formato incorrecto de las credenciales de cliente encontradas, la API del servidor HTTP genera una respuesta 400 (solicitud incorrecta) y vuelve a enviar al cliente.</span><span class="sxs-lookup"><span data-stu-id="30822-148">If a malformed authorization header such as a header without a scheme name, or malformed Base64 encoding of client credentials encountered, the HTTP Server API generates a 400 (bad request) response and sends back to client.</span></span>

     

5.  <span data-ttu-id="30822-149">La aplicación de servidor examina el miembro **AuthStatus** de la estructura de información de autenticación de la [**\_ solicitud \_ \_ http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) para determinar si la autenticación fue correcta.</span><span class="sxs-lookup"><span data-stu-id="30822-149">The server application examines the **AuthStatus** member of the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to determine if authentication was successful.</span></span> <span data-ttu-id="30822-150">Cuando se produce un error de autenticación, la API del servidor HTTP incluye el error devuelto por [AcceptSecurityContext](/previous-versions/windows/embedded/ms937012(v=msdn.10)) en el miembro **SecStatus** de la estructura de información de autenticación de la **\_ solicitud \_ \_ http** .</span><span class="sxs-lookup"><span data-stu-id="30822-150">When authentication fails, the HTTP Server API includes the error returned from [AcceptSecurityContext](/previous-versions/windows/embedded/ms937012(v=msdn.10)) in the **SecStatus** member of the **HTTP\_REQUEST\_AUTH\_INFO** structure.</span></span> <span data-ttu-id="30822-151">Si se produce un error en el intento de autenticación debido a credenciales no válidas, la aplicación puede generar otro desafío 401 con el encabezado de WWW-Authenticate deseado o puede decidir atender la solicitud como anónima.</span><span class="sxs-lookup"><span data-stu-id="30822-151">If the authentication attempt fails due to bad credentials, the application can generate another 401 challenge with the desired WWW-Authenticate header, or may decided to service the request as anonymous.</span></span>
6.  <span data-ttu-id="30822-152">Si la autenticación se realizó correctamente, la aplicación usa el token proporcionado en la estructura de información de autenticación de la [**\_ solicitud \_ \_ http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) para suplantar al cliente y obtener acceso a los recursos.</span><span class="sxs-lookup"><span data-stu-id="30822-152">If authentication was successful, the application uses the token provided in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure to impersonate the client and to access resources.</span></span> <span data-ttu-id="30822-153">El identificador de token de acceso que se devuelve a la aplicación es válido siempre que el identificador de solicitud sea válido, que suele ser hasta que la aplicación completa la respuesta a la solicitud.</span><span class="sxs-lookup"><span data-stu-id="30822-153">The access token handle returned to the application is valid as long as the request ID is valid, which is typically until the application completes the response to the request.</span></span> <span data-ttu-id="30822-154">No obstante, el token puede expirar durante este período y es posible que la aplicación necesite enviar otro desafío 401 al cliente.</span><span class="sxs-lookup"><span data-stu-id="30822-154">The token may, however, expire during this period and the application may need to send another 401 challenge to the client.</span></span>
7.  <span data-ttu-id="30822-155">La aplicación envía la respuesta final de 200 aceptar y debe cerrar el identificador del token de acceso.</span><span class="sxs-lookup"><span data-stu-id="30822-155">The application sends the final 200 OK response, and it must close the handle to the access token.</span></span>
    > [!Note]  
    > <span data-ttu-id="30822-156">La API del servidor HTTP anexa los datos de autenticación mutua a la respuesta final de 200 correcto, si se generó una durante el protocolo de enlace de autenticación.</span><span class="sxs-lookup"><span data-stu-id="30822-156">The HTTP Server API appends the mutual authentication data to the final 200 OK response, if one was generated during the authentication handshake.</span></span>

     

### <a name="ntlm-null-sessions"></a><span data-ttu-id="30822-157">Sesiones NULAs de NTLM</span><span class="sxs-lookup"><span data-stu-id="30822-157">NTLM NULL Sessions</span></span>

<span data-ttu-id="30822-158">Tenga en cuenta que una sesión nula NTLM indicada en el contexto de seguridad final no se trata como autenticada.</span><span class="sxs-lookup"><span data-stu-id="30822-158">Note that an NTLM NULL session indicated in the final security context, is not treated as authenticated.</span></span> <span data-ttu-id="30822-159">En este caso, la solicitud se envía a la aplicación con un error HttpAuthStatusFailure en la estructura de información de autenticación de la [**\_ solicitud \_ \_ http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) y la aplicación puede enviar otro desafío 401.</span><span class="sxs-lookup"><span data-stu-id="30822-159">In this case, the request is sent to the application with an HttpAuthStatusFailure error in the [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure and the application can send another 401 challenge.</span></span>

### <a name="preemptive-authentication"></a><span data-ttu-id="30822-160">Autenticación preferente</span><span class="sxs-lookup"><span data-stu-id="30822-160">Preemptive Authentication</span></span>

<span data-ttu-id="30822-161">Según el protocolo HTTP, una vez que el cliente ha establecido la autenticación de un recurso, puede enviar de forma preferente el encabezado de autorización correspondiente con las solicitudes consecutivas posteriores para el recurso sin esperar un desafío 401 desde el servidor.</span><span class="sxs-lookup"><span data-stu-id="30822-161">According to the HTTP protocol, after the client has established authentication for a resource, it can preemptively send the corresponding authorization header with subsequent consecutive requests for the resource without waiting for a 401 challenge from the server.</span></span> <span data-ttu-id="30822-162">Si el esquema indicado en el encabezado de autorización sigue estando habilitado por la aplicación y admitido por la API del servidor HTTP, el servidor HTTP intentará la autenticación sin enviar la solicitud a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="30822-162">If the scheme indicated in the Authorization header is still enabled by the application and supported by the HTTP Server API, the HTTP Server attempts authentication without sending the request to the application.</span></span> <span data-ttu-id="30822-163">Cuando la aplicación recibe este tipo de solicitud autenticada, puede optar por descartar la solicitud y volver a generar el desafío 401 inicial o el servicio de la solicitud como autenticado.</span><span class="sxs-lookup"><span data-stu-id="30822-163">When this type of authenticated request is received by the application, it can choose to discard the request and regenerate the initial 401 challenge or service the request as authenticated.</span></span>

### <a name="mutual-authentication"></a><span data-ttu-id="30822-164">Autenticación mutua</span><span class="sxs-lookup"><span data-stu-id="30822-164">Mutual Authentication</span></span>

<span data-ttu-id="30822-165">Los datos de autenticación mutua se generan cuando se usa el esquema Negotiate durante el protocolo de enlace y se resuelve en Kerberos, y el cliente ha solicitado la autenticación mutua.</span><span class="sxs-lookup"><span data-stu-id="30822-165">Mutual authentication data is generated when the negotiate scheme is used during handshake and it is resolved to Kerberos, and client has asked for mutual authentication.</span></span> <span data-ttu-id="30822-166">Los datos de autenticación mutua se insertan automáticamente mediante la API del servidor HTTP en la respuesta final 200 aceptar enviada por la aplicación de servidor.</span><span class="sxs-lookup"><span data-stu-id="30822-166">The mutual authentication data is automatically inserted by HTTP Server API in the final 200 OK response sent by the server application.</span></span> <span data-ttu-id="30822-167">De forma predeterminada, la API de servidor HTTP no pasa los datos de autenticación mutua a la aplicación de servidor, ya que controla automáticamente el envío del mismo.</span><span class="sxs-lookup"><span data-stu-id="30822-167">By default HTTP Server API does not pass the Mutual authentication data to the server application, since it automatically handles the sending of it.</span></span> <span data-ttu-id="30822-168">Sin embargo, si la aplicación de servidor habilita la marca ReceiveMutualAuth en la estructura de [**\_ información de \_ autenticación \_ del servidor http**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) en la configuración, los datos de autenticación mutua se pasan a la aplicación en la estructura de información de autenticación de [**\_ solicitud \_ \_ http**](/windows/desktop/api/Http/ns-http-http_request_auth_info) insertada con la [**\_ solicitud HTTP**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85))autenticada.</span><span class="sxs-lookup"><span data-stu-id="30822-168">However, if server application enables the ReceiveMutualAuth flag in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure in configuration, the mutual authentication data is passed to the application in [**HTTP\_REQUEST\_AUTH\_INFO**](/windows/desktop/api/Http/ns-http-http_request_auth_info) structure embedded with the authenticated [**HTTP\_REQUEST**](/previous-versions/windows/desktop/legacy/aa364545(v=vs.85)).</span></span> <span data-ttu-id="30822-169">En este caso, la aplicación debe enviar los datos de autenticación mutua con la respuesta 200 aceptar final.</span><span class="sxs-lookup"><span data-stu-id="30822-169">In this case application should send the mutual authentication data with the final 200 OK response.</span></span> <span data-ttu-id="30822-170">En el caso de que un único equipo atienda varios sitios, todos los sitios del equipo utilizan las credenciales de la cuenta del equipo local en el dominio para la autenticación mutua.</span><span class="sxs-lookup"><span data-stu-id="30822-170">In the case where multiple sites are served by a single computer, all sites on the computer use the credentials for the Local Machine Account in the domain for mutual authentication.</span></span>

 

 
