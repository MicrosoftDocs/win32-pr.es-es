---
title: Procesamiento de registros
description: Las API de servidor HTTP utilizan la base de datos de enrutamiento para aplicar comprobaciones de acceso durante los registros.
ms.assetid: d72aa213-b8e8-4fe9-b98c-41114d2cea56
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7c1e02d2511d9967454d5cbddd93b2c0380d1172
ms.sourcegitcommit: 73417d55867c804274a55abe5ca71bcba7006119
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/20/2020
ms.locfileid: "104488500"
---
# <a name="processing-registrations"></a><span data-ttu-id="f31b1-103">Procesamiento de registros</span><span class="sxs-lookup"><span data-stu-id="f31b1-103">Processing Registrations</span></span>

<span data-ttu-id="f31b1-104">Las API de servidor HTTP utilizan la base de datos de enrutamiento para aplicar comprobaciones de acceso durante los registros.</span><span class="sxs-lookup"><span data-stu-id="f31b1-104">The HTTP Server APIs use the routing database to apply access checks during registrations.</span></span> <span data-ttu-id="f31b1-105">Un registro para un [UrlPrefix](urlprefix-strings.md) debe pasar una serie de comprobaciones de acceso para asegurarse de que el usuario que se registra para el espacio de nombres tiene derechos de acceso.</span><span class="sxs-lookup"><span data-stu-id="f31b1-105">A registration for a [UrlPrefix](urlprefix-strings.md) must pass a series of access checks to ensure that the user registering for the namespace has access rights.</span></span> <span data-ttu-id="f31b1-106">Utilice la función [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) para agregar un nuevo registro.</span><span class="sxs-lookup"><span data-stu-id="f31b1-106">Use the [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) function to add a new registration.</span></span>

<span data-ttu-id="f31b1-107">**Para agregar un nuevo registro con HttpAddUrl**</span><span class="sxs-lookup"><span data-stu-id="f31b1-107">**To add a new registration with HttpAddUrl**</span></span>

1.  <span data-ttu-id="f31b1-108">Si el número de puerto de UrlPrefix tiene reservas o registros para un esquema diferente del esquema en el UrlPrefix, se produce un error en el registro.</span><span class="sxs-lookup"><span data-stu-id="f31b1-108">If the port number in the UrlPrefix has reservations or registrations for a scheme different from the scheme in the UrlPrefix, the registration fails.</span></span> <span data-ttu-id="f31b1-109">HTTP y HTTPS no se admiten en el mismo puerto.</span><span class="sxs-lookup"><span data-stu-id="f31b1-109">HTTP and HTTPS cannot be supported on the same port.</span></span>
2.  <span data-ttu-id="f31b1-110">El registro se divide en el depósito adecuado para el registro.</span><span class="sxs-lookup"><span data-stu-id="f31b1-110">The registration is slotted into the appropriate bucket for the registration.</span></span> <span data-ttu-id="f31b1-111">Los cubos se basan en el tipo de host de la dirección URL, tal como se describe en la sección [enrutamiento de solicitudes entrantes](routing-incoming-requests.md) .</span><span class="sxs-lookup"><span data-stu-id="f31b1-111">The buckets are based on the host type of the URL as outlined in the [Routing Incoming Requests](routing-incoming-requests.md) section.</span></span> <span data-ttu-id="f31b1-112">Los pasos siguientes son relativos a este depósito en particular.</span><span class="sxs-lookup"><span data-stu-id="f31b1-112">The following steps are relative to this particular bucket.</span></span>
3.  <span data-ttu-id="f31b1-113">Si existe una entrada de registro duplicada, devuelve un código de error.</span><span class="sxs-lookup"><span data-stu-id="f31b1-113">If a duplicate registration entry exists, return an error code.</span></span>
4.  <span data-ttu-id="f31b1-114">Seleccione las entradas de reserva con los componentes de esquema, host y puerto que son iguales a los de UrlPrefix.</span><span class="sxs-lookup"><span data-stu-id="f31b1-114">Select reservation entries with scheme, host and port components that are equal to those of the UrlPrefix.</span></span> <span data-ttu-id="f31b1-115">A partir de estos, busque la entrada con la coincidencia de **relativeUri** más larga.</span><span class="sxs-lookup"><span data-stu-id="f31b1-115">From these, locate the entry with the longest **relativeUri** match.</span></span> <span data-ttu-id="f31b1-116">Si la entrada existe, compruebe los permisos en función de la ACL asociada a esa entrada y devuelva el resultado correcto.</span><span class="sxs-lookup"><span data-stu-id="f31b1-116">If the entry exists, check permissions based on the ACL associated with that entry and return success.</span></span> <span data-ttu-id="f31b1-117">Si la entrada no existe, la devolución de un ERROR \_ ya existe en el \_ código.</span><span class="sxs-lookup"><span data-stu-id="f31b1-117">If the entry does not exist, return an ERROR\_ALREADY\_EXISTS code.</span></span>

<span data-ttu-id="f31b1-118">En los siguientes ejemplos se muestra el proceso para instalar un registro en la base de datos de enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="f31b1-118">The following examples illustrate the process to install a registration in the routing database.</span></span> <span data-ttu-id="f31b1-119">Las reservas 1 y 2 existen en la base de datos de enrutamiento.</span><span class="sxs-lookup"><span data-stu-id="f31b1-119">Reservations 1 and 2 exist in the routing database.</span></span>

-   <span data-ttu-id="f31b1-120">Reserva 1: `https://+:80/vroot/subdir/` para el usuario a y el usuario C. Esta reserva se coloca en el cubo "+".</span><span class="sxs-lookup"><span data-stu-id="f31b1-120">Reservation 1: `https://+:80/vroot/subdir/` for User A and User C. This reservation is placed in the "+" bucket.</span></span>
-   <span data-ttu-id="f31b1-121">Reserva 2: `https://adatum.com:80/vroot/` para el usuario B. Esta reserva se coloca en el cubo "host explícito".</span><span class="sxs-lookup"><span data-stu-id="f31b1-121">Reservation 2: `https://adatum.com:80/vroot/` for User B. This reservation is placed in the "Explicit Host" bucket.</span></span>
-   <span data-ttu-id="f31b1-122">Registro: el `https://+:80/vroot/subdir/` usuario B produce un error debido a la reserva 1.</span><span class="sxs-lookup"><span data-stu-id="f31b1-122">Registration: `https://+:80/vroot/subdir/` by User B fails due to reservation 1.</span></span>
-   <span data-ttu-id="f31b1-123">Registro: el `https://adatum.com:80/vroot/subdir/` usuario B se ejecuta correctamente debido a la reserva 2.</span><span class="sxs-lookup"><span data-stu-id="f31b1-123">Registration: `https://adatum.com:80/vroot/subdir/` by User B succeeds due to reservation 2.</span></span>
-   <span data-ttu-id="f31b1-124">Registro: `https://adatum.com:80/vroot/subdir/` el usuario C produce un error debido a la reserva más explícita 2.</span><span class="sxs-lookup"><span data-stu-id="f31b1-124">Registration: `https://adatum.com:80/vroot/subdir/` by User C fails due to the more explicit reservation 2.</span></span> <span data-ttu-id="f31b1-125">La reserva de caracteres comodín seguros no tiene significado en el contexto de la reserva o registro explícitos.</span><span class="sxs-lookup"><span data-stu-id="f31b1-125">The strong wildcard reservation does not have meaning within the context of the explicit reservation or registration.</span></span>
-   <span data-ttu-id="f31b1-126">Registro: `https://+:80/vroot/subdir/` el usuario a se realiza correctamente debido A la reserva 1.</span><span class="sxs-lookup"><span data-stu-id="f31b1-126">Registration: `https://+:80/vroot/subdir/` by User A succeeds due to reservation 1.</span></span>
-   <span data-ttu-id="f31b1-127">Registro: el `https://adatum.com:80/vroot/anotherdir/` usuario B se ejecuta correctamente debido a la reserva 2.</span><span class="sxs-lookup"><span data-stu-id="f31b1-127">Registration: `https://adatum.com:80/vroot/anotherdir/` by User B succeeds due to reservation 2.</span></span>

<span data-ttu-id="f31b1-128">La comprobación de acceso para el registro no incluye comprobaciones de privilegios de delegación.</span><span class="sxs-lookup"><span data-stu-id="f31b1-128">The access check for registration does not include checks for delegation privileges.</span></span> <span data-ttu-id="f31b1-129">No hay comprobaciones de acceso basadas en las reservas (vea [**HttpRemoveUrl**](/windows/desktop/api/Http/nf-http-httpremoveurl)).</span><span class="sxs-lookup"><span data-stu-id="f31b1-129">There are no access checks based on reservations (see [**HttpRemoveUrl**](/windows/desktop/api/Http/nf-http-httpremoveurl)).</span></span> <span data-ttu-id="f31b1-130">El único requisito para eliminar un registro nos indica que el proceso de llamada debe haber creado el registro.</span><span class="sxs-lookup"><span data-stu-id="f31b1-130">The only requirement for deleting a registration us that the calling process must have created the registration.</span></span>

 

 




