---
description: Los controladores de filtro, que son implementaciones de la interfaz de IFilter, analizan documentos en busca de texto y propiedades.
ms.assetid: 2ee9ea19-ae03-4f14-8f06-f8aa670e204e
title: Descripción de los controladores de filtro en Windows Search
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e49cc1d3e479ae03645665618c60a33bdcfe19ba
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104540718"
---
# <a name="understanding-filter-handlers-in-windows-search"></a><span data-ttu-id="947d1-103">Descripción de los controladores de filtro en Windows Search</span><span class="sxs-lookup"><span data-stu-id="947d1-103">Understanding Filter Handlers in Windows Search</span></span>

<span data-ttu-id="947d1-104">Los controladores de filtro, que son implementaciones de la interfaz de [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) , analizan documentos en busca de texto y propiedades.</span><span class="sxs-lookup"><span data-stu-id="947d1-104">Filter handlers, which are implementations of the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) interface, scan documents for text and properties.</span></span> <span data-ttu-id="947d1-105">Los controladores de filtro extraen fragmentos de texto de estos elementos, filtran el formato incrustado y conservan información sobre la posición del texto.</span><span class="sxs-lookup"><span data-stu-id="947d1-105">Filter handlers extract chunks of text from these items, filtering out embedded formatting and retaining information about the position of the text.</span></span> <span data-ttu-id="947d1-106">También extraen fragmentos de valores, que son propiedades del documento.</span><span class="sxs-lookup"><span data-stu-id="947d1-106">They also extract chunks of values, which are document properties.</span></span> <span data-ttu-id="947d1-107">**IFilter** es la base para la creación de aplicaciones de nivel superior como indexadores de documentos y visores independientes de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="947d1-107">**IFilter** is the foundation for building higher-level applications such as document indexers and application-independent viewers.</span></span>

<span data-ttu-id="947d1-108">Este tema se organiza de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="947d1-108">This topic is organized as follows:</span></span>

- [<span data-ttu-id="947d1-109">Acerca de la interfaz IFilter</span><span class="sxs-lookup"><span data-stu-id="947d1-109">About the IFilter Interface</span></span>](#about-the-ifilter-interface)
  - [<span data-ttu-id="947d1-110">Proceso de aislamiento</span><span class="sxs-lookup"><span data-stu-id="947d1-110">Isolation Process</span></span>](#isolation-process)
  - [<span data-ttu-id="947d1-111">Archivos dll de IFilter</span><span class="sxs-lookup"><span data-stu-id="947d1-111">IFilter DLLs</span></span>](#ifilter-dlls)
  - [<span data-ttu-id="947d1-112">Estructura de IFilter</span><span class="sxs-lookup"><span data-stu-id="947d1-112">IFilter Structure</span></span>](#ifilter-structure)
  - [<span data-ttu-id="947d1-113">Código nativo</span><span class="sxs-lookup"><span data-stu-id="947d1-113">Native Code</span></span>](#native-code)
- [<span data-ttu-id="947d1-114">Buscar el identificador de clase de IFilter</span><span class="sxs-lookup"><span data-stu-id="947d1-114">Finding the IFilter Class Identifier</span></span>](#finding-the-ifilter-class-identifier)
  - [<span data-ttu-id="947d1-115">IFilter:: GetChunk y identificadores de código de configuración regional</span><span class="sxs-lookup"><span data-stu-id="947d1-115">IFilter::GetChunk and Locale Code Identifiers</span></span>](#ifiltergetchunk-and-locale-code-identifiers)
- [<span data-ttu-id="947d1-116">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="947d1-116">Additional Resources</span></span>](#additional-resources)
- [<span data-ttu-id="947d1-117">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="947d1-117">Related topics</span></span>](#related-topics)

## <a name="about-the-ifilter-interface"></a><span data-ttu-id="947d1-118">Acerca de la interfaz IFilter</span><span class="sxs-lookup"><span data-stu-id="947d1-118">About the IFilter Interface</span></span>

<span data-ttu-id="947d1-119">Microsoft Windows Search usa filtros para extraer el contenido de los elementos que se van a incluir en un índice de texto completo.</span><span class="sxs-lookup"><span data-stu-id="947d1-119">Microsoft Windows Search uses filters to extract the content of items for inclusion in a full-text index.</span></span> <span data-ttu-id="947d1-120">Puede extender Windows Search para indexar tipos de archivo nuevos o propietarios escribiendo filtros para extraer el contenido y controladores de propiedades para extraer las propiedades de los archivos.</span><span class="sxs-lookup"><span data-stu-id="947d1-120">You can extend Windows Search to index new or proprietary file types by writing filters to extract the content, and property handlers to extract the properties of files.</span></span>

<span data-ttu-id="947d1-121">La interfaz [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) está diseñada para satisfacer las necesidades específicas de los motores de búsqueda de texto completo.</span><span class="sxs-lookup"><span data-stu-id="947d1-121">The [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) interface is designed to meet the specific needs of full-text search engines.</span></span> <span data-ttu-id="947d1-122">Los motores de búsqueda de texto completo, como Windows Search, llaman a los métodos de **IFilter** para extraer información de texto y de propiedades y agregarlas a un índice.</span><span class="sxs-lookup"><span data-stu-id="947d1-122">Full-text search engines like Windows Search call the **IFilter** methods to extract text and property information and add them to an index.</span></span> <span data-ttu-id="947d1-123">Windows Search rompe los resultados del método [**IFilter:: gettext**](/windows/win32/api/filter/nf-filter-ifilter-gettext) devuelto en palabras, los normaliza y los guarda en un índice.</span><span class="sxs-lookup"><span data-stu-id="947d1-123">Windows Search breaks the results of the returned [**IFilter::GetText**](/windows/win32/api/filter/nf-filter-ifilter-gettext) method into words, normalizes them, and saves them in an index.</span></span> <span data-ttu-id="947d1-124">Si está disponible, el motor de búsqueda utiliza el identificador de código de idioma (LCID) de un fragmento de texto para realizar la separación y normalización de palabras específicas del idioma.</span><span class="sxs-lookup"><span data-stu-id="947d1-124">If available, the search engine uses the language code identifier (LCID) of a text chunk to perform language-specific word breaking and normalization.</span></span>

<span data-ttu-id="947d1-125">Windows Search usa tres funciones, que se describen en la tabla siguiente, para tener acceso a los controladores de filtro registrados (implementaciones de la interfaz de [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) ).</span><span class="sxs-lookup"><span data-stu-id="947d1-125">Windows Search uses three functions, described in the following table, to access registered filter handlers (implementations of the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) interface).</span></span> <span data-ttu-id="947d1-126">Estas funciones son especialmente útiles cuando se carga y se enlaza a un controlador de filtro de un objeto incrustado.</span><span class="sxs-lookup"><span data-stu-id="947d1-126">These functions are especially useful when loading and binding to an embedded object's filter handler.</span></span>

| <span data-ttu-id="947d1-127">Función</span><span class="sxs-lookup"><span data-stu-id="947d1-127">Function</span></span>               | <span data-ttu-id="947d1-128">Descripción</span><span class="sxs-lookup"><span data-stu-id="947d1-128">Description</span></span>                                                                                                                                                                                               |
|------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="947d1-129">LoadIFilter</span><span class="sxs-lookup"><span data-stu-id="947d1-129">LoadIFilter</span></span>            | <span data-ttu-id="947d1-130">Obtiene un puntero al [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) que es más adecuado para el tipo de contenido especificado.</span><span class="sxs-lookup"><span data-stu-id="947d1-130">Gets a pointer to the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) that is most suitable for the specified content type.</span></span>                                                                                            |
| <span data-ttu-id="947d1-131">BindIFilterFromStorage</span><span class="sxs-lookup"><span data-stu-id="947d1-131">BindIFilterFromStorage</span></span> | <span data-ttu-id="947d1-132">Obtiene un puntero al [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) que es más adecuado para el contenido incluido en un objeto de [interfaz IStorage](/windows/win32/api/objidl/nn-objidl-istorage) .</span><span class="sxs-lookup"><span data-stu-id="947d1-132">Gets a pointer to the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) that is most suitable for the content contained in an [IStorage Interface](/windows/win32/api/objidl/nn-objidl-istorage) object.</span></span> |
| <span data-ttu-id="947d1-133">BindIFilterFromStream</span><span class="sxs-lookup"><span data-stu-id="947d1-133">BindIFilterFromStream</span></span>  | <span data-ttu-id="947d1-134">Obtiene un puntero al [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) que es más adecuado para un identificador de clase especificado (CLSID) recuperado de una variable de flujo.</span><span class="sxs-lookup"><span data-stu-id="947d1-134">Gets a pointer to the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) that is most suitable for a specified class identifier (CLSID) retrieved from a stream variable.</span></span>                                                 |

<span data-ttu-id="947d1-135">La interfaz [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) tiene cinco métodos, que se describen en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="947d1-135">The [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) interface has five methods, described in the following table.</span></span>

| <span data-ttu-id="947d1-136">Método</span><span class="sxs-lookup"><span data-stu-id="947d1-136">Method</span></span>                                                    | <span data-ttu-id="947d1-137">Descripción</span><span class="sxs-lookup"><span data-stu-id="947d1-137">Description</span></span>                                                                                                        |
|-----------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="947d1-138">**IFilter:: init**</span><span class="sxs-lookup"><span data-stu-id="947d1-138">**IFilter::Init**</span></span>](/windows/win32/api/filter/nf-filter-ifilter-init)          | <span data-ttu-id="947d1-139">Inicializa una sesión de filtrado.</span><span class="sxs-lookup"><span data-stu-id="947d1-139">Initializes a filtering session.</span></span>                                                                                   |
| [<span data-ttu-id="947d1-140">**IFilter:: GetChunk**</span><span class="sxs-lookup"><span data-stu-id="947d1-140">**IFilter::GetChunk**</span></span>](/windows/win32/api/filter/nf-filter-ifilter-getchunk)     | <span data-ttu-id="947d1-141">Coloca [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) al principio del primer fragmento o siguiente y devuelve un descriptor.</span><span class="sxs-lookup"><span data-stu-id="947d1-141">Positions [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) at the beginning of the first or next chunk and returns a descriptor.</span></span> |
| [<span data-ttu-id="947d1-142">**IFilter:: GetText**</span><span class="sxs-lookup"><span data-stu-id="947d1-142">**IFilter::GetText**</span></span>](/windows/win32/api/filter/nf-filter-ifilter-gettext)       | <span data-ttu-id="947d1-143">Recupera texto del fragmento actual.</span><span class="sxs-lookup"><span data-stu-id="947d1-143">Retrieves text from the current chunk.</span></span>                                                                             |
| [<span data-ttu-id="947d1-144">**IFilter:: GetValue**</span><span class="sxs-lookup"><span data-stu-id="947d1-144">**IFilter::GetValue**</span></span>](/windows/win32/api/filter/nf-filter-ifilter-getvalue)     | <span data-ttu-id="947d1-145">Recupera los valores del fragmento actual.</span><span class="sxs-lookup"><span data-stu-id="947d1-145">Retrieves values from the current chunk.</span></span>                                                                           |
| [<span data-ttu-id="947d1-146">**IFilter:: BindRegion**</span><span class="sxs-lookup"><span data-stu-id="947d1-146">**IFilter::BindRegion**</span></span>](/windows/win32/api/filter/nf-filter-ifilter-bindregion) | <span data-ttu-id="947d1-147">Recupera una interfaz que representa la parte especificada del objeto.</span><span class="sxs-lookup"><span data-stu-id="947d1-147">Retrieves an interface representing the specified portion of object.</span></span> <span data-ttu-id="947d1-148">Reservado para uso futuro.</span><span class="sxs-lookup"><span data-stu-id="947d1-148">Reserved for future use.</span></span>                      |

### <a name="isolation-process"></a><span data-ttu-id="947d1-149">Proceso de aislamiento</span><span class="sxs-lookup"><span data-stu-id="947d1-149">Isolation Process</span></span>

<span data-ttu-id="947d1-150">Windows Search ejecuta IFilters en el contexto de seguridad del sistema local con derechos restringidos.</span><span class="sxs-lookup"><span data-stu-id="947d1-150">Windows Search runs IFilters in the Local System security context with restricted rights.</span></span> <span data-ttu-id="947d1-151">En este proceso de aislamiento de host de [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) , se quitan varios derechos:</span><span class="sxs-lookup"><span data-stu-id="947d1-151">In this [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) host isolation process, a number of rights are removed:</span></span>

- <span data-ttu-id="947d1-152">Código restringido</span><span class="sxs-lookup"><span data-stu-id="947d1-152">Restricted Code</span></span>
- <span data-ttu-id="947d1-153">Todos</span><span class="sxs-lookup"><span data-stu-id="947d1-153">Everyone</span></span>
- <span data-ttu-id="947d1-154">Local</span><span class="sxs-lookup"><span data-stu-id="947d1-154">Local</span></span>
- <span data-ttu-id="947d1-155">Interactive</span><span class="sxs-lookup"><span data-stu-id="947d1-155">Interactive</span></span>
- <span data-ttu-id="947d1-156">Usuarios autenticados</span><span class="sxs-lookup"><span data-stu-id="947d1-156">Authenticated Users</span></span>
- <span data-ttu-id="947d1-157">Usuarios integrados</span><span class="sxs-lookup"><span data-stu-id="947d1-157">Built-in Users</span></span>
- <span data-ttu-id="947d1-158">Identificador de seguridad (SID) de los usuarios</span><span class="sxs-lookup"><span data-stu-id="947d1-158">Users' security identifier (SID)</span></span>

<span data-ttu-id="947d1-159">La eliminación de estos derechos significa que la interfaz [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) no tiene acceso al sistema de disco o a la red, ni a ninguna función de interfaz de usuario o portapapeles.</span><span class="sxs-lookup"><span data-stu-id="947d1-159">The removal of these rights means the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) interface does not have access to the disk system or network or to any user interface or clipboard functions.</span></span> <span data-ttu-id="947d1-160">Además, el proceso de aislamiento se ejecuta bajo un objeto de trabajo que impide que se creen procesos secundarios e impone un límite de 100 MB en el espacio de trabajo.</span><span class="sxs-lookup"><span data-stu-id="947d1-160">Furthermore, the isolation process runs under a job object that prevents child processes from being created and imposes a 100 MB limit on the working set.</span></span> <span data-ttu-id="947d1-161">el proceso de aislamiento de host de interfaz **IFilter** aumenta la estabilidad de la plataforma de indexación, debido a la posibilidad de que los filtros de terceros se implementen incorrectamente.</span><span class="sxs-lookup"><span data-stu-id="947d1-161">the **IFilter** interface host isolation process increases the stability of the indexing platform, due to the possibility of incorrectly implemented third-party filters.</span></span>

> [!NOTE]  
> <span data-ttu-id="947d1-162">Los controladores de filtro se deben escribir para administrar los búferes y apilarse correctamente.</span><span class="sxs-lookup"><span data-stu-id="947d1-162">Filter handlers must be written to manage buffers, and stack correctly.</span></span> <span data-ttu-id="947d1-163">Todas las copias de cadena deben tener comprobaciones explícitas para evitar las saturaciones del búfer.</span><span class="sxs-lookup"><span data-stu-id="947d1-163">All string copies must have explicit checks to guard against buffer overruns.</span></span> <span data-ttu-id="947d1-164">Siempre debe comprobar el tamaño asignado del búfer.</span><span class="sxs-lookup"><span data-stu-id="947d1-164">You should always verify the allocated size of the buffer.</span></span> <span data-ttu-id="947d1-165">Siempre debe probar el tamaño de los datos con respecto al tamaño del búfer.</span><span class="sxs-lookup"><span data-stu-id="947d1-165">You should always test the size of the data against the size of the buffer.</span></span>

### <a name="ifilter-dlls"></a><span data-ttu-id="947d1-166">Archivos dll de IFilter</span><span class="sxs-lookup"><span data-stu-id="947d1-166">IFilter DLLs</span></span>

<span data-ttu-id="947d1-167">[**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) de Los archivos dll implementan la interfaz **IFilter** para permitir que un cliente Extraiga información de texto y valores de propiedad de un tipo de archivo, una clase o un tipo percibido.</span><span class="sxs-lookup"><span data-stu-id="947d1-167">[**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) DLLs implement the **IFilter** interface to enable a client to extract text and property value information from a file type, class, or perceived type.</span></span> <span data-ttu-id="947d1-168">El proceso de filtrado de Windows Search **SearchFilterHost.exe** enlaza con el **IFilter** registrado para la clase, el tipo percibido o la extensión de nombre del elemento.</span><span class="sxs-lookup"><span data-stu-id="947d1-168">The Windows Search filtering process **SearchFilterHost.exe** binds to the **IFilter** that is registered for the class, perceived type, or name extension of the item.</span></span>

### <a name="ifilter-structure"></a><span data-ttu-id="947d1-169">Estructura de IFilter</span><span class="sxs-lookup"><span data-stu-id="947d1-169">IFilter Structure</span></span>

<span data-ttu-id="947d1-170">Cada [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) es un archivo DLL que implementa un servidor de modelo de objetos componentes (com) en proceso para proporcionar las capacidades de filtrado especificadas.</span><span class="sxs-lookup"><span data-stu-id="947d1-170">Each [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) is a DLL file that implements an in-process Component Object Model (COM) server to supply the specified filtering capabilities.</span></span> <span data-ttu-id="947d1-171">En la ilustración siguiente se muestra la estructura general de una DLL de **IFilter** típica.</span><span class="sxs-lookup"><span data-stu-id="947d1-171">The following figure illustrates shows the overall structure of a typical **IFilter** DLLs.</span></span> <span data-ttu-id="947d1-172">Un ejemplo más complejo podría implementar más de una clase de **IFilter** .</span><span class="sxs-lookup"><span data-stu-id="947d1-172">A more complex example could implement more than one **IFilter** class.</span></span>

![diagrama de la estructura de un archivo dll de IFilter típico](images/ifilter-structure.png)

### <a name="native-code"></a><span data-ttu-id="947d1-174">Código nativo</span><span class="sxs-lookup"><span data-stu-id="947d1-174">Native Code</span></span>

<span data-ttu-id="947d1-175">Los filtros se deben escribir en código nativo debido a posibles problemas de control de versiones de Common Language Runtime (CLR) con el proceso en el que se ejecutan varios complementos.</span><span class="sxs-lookup"><span data-stu-id="947d1-175">Filters must be written in native code due to potential common language runtime (CLR) versioning issues with the process that multiple add-ins run in.</span></span> <span data-ttu-id="947d1-176">En Windows 7 y versiones posteriores y versiones posteriores, los filtros escritos en código administrado se bloquean explícitamente.</span><span class="sxs-lookup"><span data-stu-id="947d1-176">In Windows 7 and later and later, filters written in managed code are explicitly blocked.</span></span>

## <a name="finding-the-ifilter-class-identifier"></a><span data-ttu-id="947d1-177">Buscar el identificador de clase de IFilter</span><span class="sxs-lookup"><span data-stu-id="947d1-177">Finding the IFilter Class Identifier</span></span>

<span data-ttu-id="947d1-178">La clase del archivo dll de [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) se registra en la clave del registro PersistentHandler.</span><span class="sxs-lookup"><span data-stu-id="947d1-178">The class of the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) DLL is registered under the PersistentHandler registry key.</span></span> <span data-ttu-id="947d1-179">En el ejemplo siguiente, para los archivos HTML, se muestra cómo buscar el archivo dll de **IFilter** para un documento HTML.</span><span class="sxs-lookup"><span data-stu-id="947d1-179">The following example, for HTML files, illustrates how to find the **IFilter** DLL for an HTML document.</span></span> <span data-ttu-id="947d1-180">Este ejemplo sigue una lógica similar a la utilizada por el sistema para buscar el **IFilter** asociado a un elemento.</span><span class="sxs-lookup"><span data-stu-id="947d1-180">This example follows logic similar to that used by the system to find the **IFilter** associated with an item.</span></span>

1. <span data-ttu-id="947d1-181">Compruebe si la extensión para el tipo de archivos que los filtros de DLL tiene un PersistentHandler registrado en la entrada del registro \\ HKEY \_ local \_ Machine \\ software \\ classes.</span><span class="sxs-lookup"><span data-stu-id="947d1-181">Check whether the extension for the type of files that the DLL filters has a PersistentHandler registered under the registry entry \\HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Classes.</span></span> <span data-ttu-id="947d1-182">Permita que esta clave sea `Value1` .</span><span class="sxs-lookup"><span data-stu-id="947d1-182">Let this key be `Value1`.</span></span> <span data-ttu-id="947d1-183">Si esa entrada ya existe, vaya al paso 4 de este procedimiento y úselo `Value1` en esa clave.</span><span class="sxs-lookup"><span data-stu-id="947d1-183">If that entry already exists, then skip to step 4 of this procedure and use `Value1` in that key.</span></span> <span data-ttu-id="947d1-184">Los valores son de tipo REG \_ SZ.</span><span class="sxs-lookup"><span data-stu-id="947d1-184">The values are of type REG\_SZ.</span></span>

```
    \HKEY_LOCAL_MACHINE
       SOFTWARE
          Classes
             .htm
                PersistentHandler
                   {EEC97550-47A9-11CF-B952-00AA0051FE20}
```

2. <span data-ttu-id="947d1-185">Como alternativa, si no hay un PersistentHandler registrado para la extensión, busque el CLSID asociado con el tipo de documento en la entrada del registro \\ HKEY \_ local \_ Machine \\ software \\ classes.</span><span class="sxs-lookup"><span data-stu-id="947d1-185">Alternatively, if there is not a PersistentHandler registered for the extension, find the CLSID associated with the document type under the registry entry \\HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Classes.</span></span> <span data-ttu-id="947d1-186">Permita que esta clave sea `Value2` .</span><span class="sxs-lookup"><span data-stu-id="947d1-186">Let this key be `Value2`.</span></span>

```
    \HKEY_LOCAL_MACHINE
       SOFTWARE
          Classes
             htmlfile
                 = Class for WWW HTML files
                CLSID
                   {25336920-03F9-11CF-8FD0-00AA00686F13}
```

3. <span data-ttu-id="947d1-187">Determinar si un PersistentHandler está registrado para el CLSID.</span><span class="sxs-lookup"><span data-stu-id="947d1-187">Determine whether a PersistentHandler is registered for the CLSID.</span></span> <span data-ttu-id="947d1-188">Con `Value2` el valor determinado en el paso 2, busque PersistentHandler para la \\ \_ entrada HKEY local \_ Machine \\ software \\ classes \\ CLSID \\ value2.</span><span class="sxs-lookup"><span data-stu-id="947d1-188">Using `Value2` determined in step 2, find the PersistentHandler for the \\HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Classes\\CLSID\\Value2 entry.</span></span> <span data-ttu-id="947d1-189">Permita que esta clave sea `Value3` .</span><span class="sxs-lookup"><span data-stu-id="947d1-189">Let this key be `Value3`.</span></span>

```
    \HKEY_LOCAL_MACHINE
       SOFTWARE
          Classes
             htmlfile
                 = Class for WWW HTML files
                PersistentHandler
                   {EEC97550-47A9-11CF-B952-00AA0051FE20}
```

4. <span data-ttu-id="947d1-190">Determine el GUID del controlador persistente de [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) .</span><span class="sxs-lookup"><span data-stu-id="947d1-190">Determine the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) persistent handler GUID.</span></span> <span data-ttu-id="947d1-191">Con `Value1` y `Value3` , busque el GUID del controlador persistente de **IFilter** para el tipo de documento.</span><span class="sxs-lookup"><span data-stu-id="947d1-191">Using `Value1` and `Value3`, find the **IFilter** Persistent Handler GUID for the document type.</span></span> <span data-ttu-id="947d1-192">El valor de la entrada del registro \\ HKEY \_ local \_ Machine \\ software \\ classes \\ CLSID \\ Value1 o 3 \\ PersistentAddinsRegistered \\ 89BCB740-6119-101A-BCB7-00DD010655AF "/> da como resultado el GUID PersistentHandler de **IFilter** para este tipo de documento.</span><span class="sxs-lookup"><span data-stu-id="947d1-192">The value under the registry entry \\HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Classes\\CLSID\\Value1 or 3\\PersistentAddinsRegistered\\ 89BCB740-6119-101A-BCB7-00DD010655AF"/> yields the **IFilter** PersistentHandler GUID for this document type.</span></span> <span data-ttu-id="947d1-193">Permita que esta clave sea `Value4` .</span><span class="sxs-lookup"><span data-stu-id="947d1-193">Let this key be `Value4`.</span></span> <span data-ttu-id="947d1-194">En este ejemplo, el GUID de la interfaz de **IFilter** es 89BCB740-6119-101A-BCB7-00DD010655AF.</span><span class="sxs-lookup"><span data-stu-id="947d1-194">In this example, the **IFilter** interface GUID is 89BCB740-6119-101A-BCB7-00DD010655AF.</span></span>

```
    HKEY_LOCAL_MACHINE
       SOFTWARE
          Classes
             {EEC97550-47A9-11CF-B952-00AA0051FE20}
                 = HTML File Persistent Handler
                    Data type         REG_SZ
                        PersistentAddinsRegistered
                        {89BCB740-6119-101A-BCB7-00DD010655AF}

                    Data type         REG_SZ
                        default = {E0CA5340-4534-11CF-B952-00AA0051FE20}
```

> [!NOTE]  
> <span data-ttu-id="947d1-195">En este ejemplo, el archivo dll de [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) para documentos HTML es nlhtml.dll.</span><span class="sxs-lookup"><span data-stu-id="947d1-195">In this example, the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) DLL for HTML documents is nlhtml.dll.</span></span>

### <a name="ifiltergetchunk-and-locale-code-identifiers"></a><span data-ttu-id="947d1-196">IFilter:: GetChunk y identificadores de código de configuración regional</span><span class="sxs-lookup"><span data-stu-id="947d1-196">IFilter::GetChunk and Locale Code Identifiers</span></span>

<span data-ttu-id="947d1-197">El LCID del texto puede cambiar en un único archivo.</span><span class="sxs-lookup"><span data-stu-id="947d1-197">The LCID of text can change within a single file.</span></span> <span data-ttu-id="947d1-198">Por ejemplo, el texto de un manual de instrucciones podría alternar entre inglés (en-US) y español (es), o bien el texto puede incluir una sola palabra en un idioma distinto del idioma principal.</span><span class="sxs-lookup"><span data-stu-id="947d1-198">For example, the text of an instruction manual might alternate between English (en-us) and Spanish (es) or the text may include a single word in a language other than the primary language.</span></span> <span data-ttu-id="947d1-199">En cualquier caso, el [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) debe comenzar un nuevo fragmento cada vez que cambie el LCID.</span><span class="sxs-lookup"><span data-stu-id="947d1-199">In either case, your [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) must begin a new chunk each time the LCID changes.</span></span> <span data-ttu-id="947d1-200">Dado que el LCID se utiliza para elegir un separador de palabras adecuado, es muy importante que lo identifique correctamente.</span><span class="sxs-lookup"><span data-stu-id="947d1-200">Because the LCID is used to choose an appropriate word breaker, it is very important that you correctly identify it.</span></span> <span data-ttu-id="947d1-201">Si el **IFilter** no puede determinar la configuración regional del texto, debe devolver un LCID de cero con el fragmento.</span><span class="sxs-lookup"><span data-stu-id="947d1-201">If the **IFilter** cannot determine the locale of the text, then it should return an LCID of zero with the chunk.</span></span> <span data-ttu-id="947d1-202">Al devolver un LCID de cero, la búsqueda de Windows usa la tecnología de detección automática de idioma (LAD) para determinar el ID. de configuración regional del fragmento.</span><span class="sxs-lookup"><span data-stu-id="947d1-202">Returning an LCID of zero causes Windows Search to use Language Auto-Detection (LAD) technology to determine the locale ID of the chunk.</span></span> <span data-ttu-id="947d1-203">Si Windows Search no encuentra ninguna coincidencia, toma como valor predeterminado la configuración regional predeterminada del sistema (llamando a la función de [función GetSystemDefaultLocaleName](/windows/win32/api/winnls/nf-winnls-getsystemdefaultlocalename) ).</span><span class="sxs-lookup"><span data-stu-id="947d1-203">If Windows Search cannot find a match, it defaults to the system default locale (by calling the [GetSystemDefaultLocaleName Function](/windows/win32/api/winnls/nf-winnls-getsystemdefaultlocalename) function).</span></span> <span data-ttu-id="947d1-204">Para obtener más información, vea [**IFilter:: GetChunk**](/windows/win32/api/filter/nf-filter-ifilter-getchunk), [**fragmentos \_ BREAKTYPE**](/windows/win32/api/filter/ne-filter-chunk_breaktype), [**CHUNKSTATE**](/windows/win32/api/filter/ne-filter-chunkstate)y [**\_ fragmento STAT**](/windows/win32/api/filter/ns-filter-stat_chunk).</span><span class="sxs-lookup"><span data-stu-id="947d1-204">For more information, see [**IFilter::GetChunk**](/windows/win32/api/filter/nf-filter-ifilter-getchunk), [**CHUNK\_BREAKTYPE**](/windows/win32/api/filter/ne-filter-chunk_breaktype), [**CHUNKSTATE**](/windows/win32/api/filter/ne-filter-chunkstate), and [**STAT\_CHUNK**](/windows/win32/api/filter/ns-filter-stat_chunk).</span></span>

<span data-ttu-id="947d1-205">Si controla el formato de archivo y actualmente no contiene información de configuración regional, debe agregar una característica de usuario para habilitar la identificación de configuración regional adecuada.</span><span class="sxs-lookup"><span data-stu-id="947d1-205">If you control the file format and it currently does not contain locale information, you should add a user feature to enable proper locale identification.</span></span> <span data-ttu-id="947d1-206">El uso de un separador de palabras no coincidente puede dar lugar a una mala experiencia de consulta para el usuario.</span><span class="sxs-lookup"><span data-stu-id="947d1-206">Using a mismatched word breaker can result in a poor query experience for the user.</span></span> <span data-ttu-id="947d1-207">Para obtener más información, vea [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker).</span><span class="sxs-lookup"><span data-stu-id="947d1-207">For more information, see [**IWordBreaker**](/windows/desktop/api/Indexsrv/nn-indexsrv-iwordbreaker).</span></span>

> [!NOTE]  
> <span data-ttu-id="947d1-208">Los filtros se asocian a los tipos de archivo, como se indica en extensiones de nombre de archivo, tipos MIME o CLSID.</span><span class="sxs-lookup"><span data-stu-id="947d1-208">Filters are associated with file types, as denoted by file name extensions, MIME types or CLSIDs.</span></span> <span data-ttu-id="947d1-209">Aunque un filtro puede controlar varios tipos de archivo, cada tipo funciona con un solo filtro.</span><span class="sxs-lookup"><span data-stu-id="947d1-209">While one filter can handle multiple file types, each type works with only one filter.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="947d1-210">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="947d1-210">Additional Resources</span></span>

- <span data-ttu-id="947d1-211">En el ejemplo de código [IFilterSample](-search-sample-ifiltersample.md) , disponible en [GitHub](https://github.com/Microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/winui/WindowsSearch/IFilterSample7), se muestra cómo crear una clase base de IFilter para implementar la interfaz [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) .</span><span class="sxs-lookup"><span data-stu-id="947d1-211">The [IFilterSample](-search-sample-ifiltersample.md) code sample, available on [GitHub](https://github.com/Microsoft/Windows-classic-samples/tree/master/Samples/Win7Samples/winui/WindowsSearch/IFilterSample7), demonstrates how to create an IFilter base class for implementing the [**IFilter**](/windows/win32/api/filter/nn-filter-ifilter) interface.</span></span>
- <span data-ttu-id="947d1-212">Para obtener información general sobre el proceso de indización, vea [el proceso de indización](-search-indexing-process-overview.md).</span><span class="sxs-lookup"><span data-stu-id="947d1-212">For an overview of the indexing process, see [The Indexing Process](-search-indexing-process-overview.md).</span></span>
- <span data-ttu-id="947d1-213">Para obtener información general sobre los tipos de archivo, consulte [tipos de archivo](../shell/fa-file-types.md).</span><span class="sxs-lookup"><span data-stu-id="947d1-213">For an overview of file types, see [File Types](../shell/fa-file-types.md).</span></span>
- <span data-ttu-id="947d1-214">Para consultar los atributos de Asociación de archivo para un tipo de archivo, consulte [PerceivedTypes, SystemFileAssociations y registro de aplicaciones](/previous-versions/windows/desktop/legacy/cc144150(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="947d1-214">To query file association attributes for a file type, see [PerceivedTypes, SystemFileAssociations, and Application Registration](/previous-versions/windows/desktop/legacy/cc144150(v=vs.85)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="947d1-215">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="947d1-215">Related topics</span></span>

[<span data-ttu-id="947d1-216">Desarrollar controladores de filtro</span><span class="sxs-lookup"><span data-stu-id="947d1-216">Developing Filter Handlers</span></span>](-search-ifilter-conceptual.md)

[<span data-ttu-id="947d1-217">Prácticas recomendadas para crear controladores de filtro en Windows Search</span><span class="sxs-lookup"><span data-stu-id="947d1-217">Best Practices for Creating Filter Handlers in Windows Search</span></span>](-search-3x-wds-extidx-filters.md)

[<span data-ttu-id="947d1-218">Devolver propiedades de un controlador de filtro</span><span class="sxs-lookup"><span data-stu-id="947d1-218">Returning Properties from a Filter Handler</span></span>](-search-ifilter-property-filtering.md)

[<span data-ttu-id="947d1-219">Controladores de filtro que se distribuyen con Windows</span><span class="sxs-lookup"><span data-stu-id="947d1-219">Filter Handlers that Ship with Windows</span></span>](-search-ifilter-implementations.md)

[<span data-ttu-id="947d1-220">Implementar controladores de filtro en Windows Search</span><span class="sxs-lookup"><span data-stu-id="947d1-220">Implementing Filter Handlers in Windows Search</span></span>](-search-ifilter-constructing-filters.md)

[<span data-ttu-id="947d1-221">Registrar controladores de filtro</span><span class="sxs-lookup"><span data-stu-id="947d1-221">Registering Filter Handlers</span></span>](-search-ifilter-registering-filters.md)

[<span data-ttu-id="947d1-222">Probar controladores de filtro</span><span class="sxs-lookup"><span data-stu-id="947d1-222">Testing Filter Handlers</span></span>](-search-ifilter-testing-filters.md)
