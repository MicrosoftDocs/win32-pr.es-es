---
description: Usar los controles de mezclador de vídeo
ms.assetid: 475996c6-a205-4133-8882-f55beaf9f8fd
title: Usar los controles de mezclador de vídeo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0a8a062c6f984e0eac0128bd67c72bf691c95af6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104082429"
---
# <a name="using-the-video-mixer-controls"></a><span data-ttu-id="e8396-103">Usar los controles de mezclador de vídeo</span><span class="sxs-lookup"><span data-stu-id="e8396-103">Using the Video Mixer Controls</span></span>

<span data-ttu-id="e8396-104">El mezclador EVR proporciona varias interfaces que una aplicación puede usar para controlar cómo el mezclador procesa vídeo.</span><span class="sxs-lookup"><span data-stu-id="e8396-104">The EVR mixer provides several interfaces that an application can use to control how the mixer processes video.</span></span> <span data-ttu-id="e8396-105">Estas interfaces se pueden utilizar en DirectShow o en Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="e8396-105">These interfaces can be used in either DirectShow or Media Foundation.</span></span>



| <span data-ttu-id="e8396-106">Interfaz</span><span class="sxs-lookup"><span data-stu-id="e8396-106">Interface</span></span>                                                      | <span data-ttu-id="e8396-107">Descripción</span><span class="sxs-lookup"><span data-stu-id="e8396-107">Description</span></span>                                                                                                                                                                                                                                 |
|----------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e8396-108">Interfaz [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap)</span><span class="sxs-lookup"><span data-stu-id="e8396-108">[**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) interface</span></span>   | <span data-ttu-id="e8396-109">Alfa: combina una imagen de mapa de bits estática en el vídeo.</span><span class="sxs-lookup"><span data-stu-id="e8396-109">Alpha-blends a static bitmap image onto the video.</span></span>                                                                                                                                                                                          |
| <span data-ttu-id="e8396-110">Interfaz [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol)</span><span class="sxs-lookup"><span data-stu-id="e8396-110">[**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) interface</span></span> | <span data-ttu-id="e8396-111">Controla el modo en que el EVR mezcla subsecuencias de vídeo.</span><span class="sxs-lookup"><span data-stu-id="e8396-111">Controls how the EVR mixes video substreams.</span></span>                                                                                                                                                                                                |
| <span data-ttu-id="e8396-112">Interfaz [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor)</span><span class="sxs-lookup"><span data-stu-id="e8396-112">[**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) interface</span></span>       | <span data-ttu-id="e8396-113">Controla el ajuste de color, los filtros de imagen y otras capacidades de procesamiento de vídeo.</span><span class="sxs-lookup"><span data-stu-id="e8396-113">Controls color adjustment, image filters, and other video processing capabilities.</span></span> <span data-ttu-id="e8396-114">Esta interfaz proporciona acceso a la funcionalidad implementada por el controlador de gráficos, por lo que las capacidades exactas dependerán del controlador de gráficos del usuario.</span><span class="sxs-lookup"><span data-stu-id="e8396-114">This interface provides access to functionality implemented by the graphics driver, so the exact capabilities will depend on the user's graphics driver.</span></span> |



 

<span data-ttu-id="e8396-115">La manera correcta de obtener punteros a estas interfaces depende de si se usa la versión de DirectShow de EVR o la versión de Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="e8396-115">The correct way to get pointers to these interfaces depends on whether you are using the DirectShow version of the EVR or the Media Foundation version.</span></span> <span data-ttu-id="e8396-116">En el Media Foundation EVR, también depende de si usa el EVR directamente o lo usa a través de la [sesión multimedia](media-session.md).</span><span class="sxs-lookup"><span data-stu-id="e8396-116">For the Media Foundation EVR, it also depends on whether you are using the EVR directly or using it through the [Media Session](media-session.md).</span></span> <span data-ttu-id="e8396-117">(Normalmente, una aplicación usará el EVR a través de la sesión multimedia, no directamente).</span><span class="sxs-lookup"><span data-stu-id="e8396-117">(Typically an application will use the EVR through the Media Session, not directly).</span></span>

<span data-ttu-id="e8396-118">Para obtener un puntero a cualquiera de estas interfaces, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e8396-118">To get a pointer to any of these interfaces, do the following:</span></span>

1.  <span data-ttu-id="e8396-119">Obtiene un puntero a la interfaz [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice) en EVR.</span><span class="sxs-lookup"><span data-stu-id="e8396-119">Get a pointer to the [**IMFGetService**](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice) interface on the EVR.</span></span>

    -   <span data-ttu-id="e8396-120">Si usa el filtro EVR de DirectShow, llame a **QueryInterface** en el filtro.</span><span class="sxs-lookup"><span data-stu-id="e8396-120">If you are using the DirectShow EVR filter, call **QueryInterface** on the filter.</span></span>

    -   <span data-ttu-id="e8396-121">Si usa el receptor de medios EVR directamente, llame a **QueryInterface** en el receptor de medios.</span><span class="sxs-lookup"><span data-stu-id="e8396-121">If you are using the EVR media sink directly, call **QueryInterface** on the media sink.</span></span>

    -   <span data-ttu-id="e8396-122">Si usa la sesión multimedia, llame a **QueryInterface** en la sesión multimedia.</span><span class="sxs-lookup"><span data-stu-id="e8396-122">If you are using the Media Session, call **QueryInterface** on the Media Session.</span></span>

2.  <span data-ttu-id="e8396-123">Si usa la sesión multimedia, espere a que la sesión multimedia envíe el evento [MESessionTopologyStatus](mesessiontopologystatus.md) con el valor de estado MF \_ TOPOSTATUS \_ listo.</span><span class="sxs-lookup"><span data-stu-id="e8396-123">If you are using the Media Session, wait for the Media Session to send the [MESessionTopologyStatus](mesessiontopologystatus.md) event with a status value of MF\_TOPOSTATUS\_READY.</span></span> <span data-ttu-id="e8396-124">(Omita este paso si no está usando la sesión multimedia).</span><span class="sxs-lookup"><span data-stu-id="e8396-124">(Skip this step if you are not using the Media Session.)</span></span>

3.  <span data-ttu-id="e8396-125">Llame a [**IMFGetService:: GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) para obtener la interfaz de mezclador.</span><span class="sxs-lookup"><span data-stu-id="e8396-125">Call [**IMFGetService::GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) to get the mixer interface.</span></span> <span data-ttu-id="e8396-126">Use el servicio de mezclador de vídeo del identificador de servicio MR \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="e8396-126">Use the service identifier MR\_VIDEO\_MIXER\_SERVICE.</span></span>

## <a name="alpha-blending-a-bitmap-onto-the-video"></a><span data-ttu-id="e8396-127">Alfa mezclar un mapa de bits en el vídeo</span><span class="sxs-lookup"><span data-stu-id="e8396-127">Alpha Blending a Bitmap onto the Video</span></span>

<span data-ttu-id="e8396-128">Puede usar la interfaz [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) para alfa mezclar un mapa de bits estático en el vídeo durante la reproducción.</span><span class="sxs-lookup"><span data-stu-id="e8396-128">You can use the [**IMFVideoMixerBitmap**](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap) interface to alpha blend a static bitmap onto the video during playback.</span></span> <span data-ttu-id="e8396-129">Puede almacenar el mapa de bits en una superficie de Direct3D, que se especifica como un puntero **IDirect3DSurface9** , o usar un mapa de bits GDI.</span><span class="sxs-lookup"><span data-stu-id="e8396-129">You can store the bitmap in a Direct3D surface, specified as an **IDirect3DSurface9** pointer, or use a GDI bitmap.</span></span>

<span data-ttu-id="e8396-130">Si usa una superficie de Direct3D para el mapa de bits, la superficie puede contener datos alfa por píxel, que se usarán cuando el mezclador alfa mezcle la imagen.</span><span class="sxs-lookup"><span data-stu-id="e8396-130">If you use a Direct3D surface for the bitmap, the surface can contain per-pixel alpha data, which will be used when the mixer alpha-blends the image.</span></span> <span data-ttu-id="e8396-131">Como alternativa, puede definir una clave de color, es decir, un color único que será transparente dondequiera que aparezca en el mapa de bits.</span><span class="sxs-lookup"><span data-stu-id="e8396-131">Alternatively, you can define a color key—that is, a single color that will be transparent wherever it appears in the bitmap.</span></span> <span data-ttu-id="e8396-132">Además, puede especificar un valor alfa que se aplicará a toda la imagen.</span><span class="sxs-lookup"><span data-stu-id="e8396-132">Also, you can specify an alpha value that will be applied to the entire image.</span></span> <span data-ttu-id="e8396-133">También puede establecer un rectángulo de origen para recortar el mapa de bits y un rectángulo de destino para colocar el mapa de bits dentro del fotograma de vídeo.</span><span class="sxs-lookup"><span data-stu-id="e8396-133">You can also set a source rectangle to crop the bitmap, and a destination rectangle to position the bitmap within the video frame.</span></span>

<span data-ttu-id="e8396-134">Para establecer el mapa de bits, llame a [**IMFVideoMixerBitmap:: SetAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-setalphabitmap).</span><span class="sxs-lookup"><span data-stu-id="e8396-134">To set the bitmap, call [**IMFVideoMixerBitmap::SetAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-setalphabitmap).</span></span> <span data-ttu-id="e8396-135">Este método toma un puntero a una estructura [**MFVideoAlphaBitmap**](/windows/desktop/api/evr9/ns-evr9-mfvideoalphabitmap) que especifica el mapa de bits y los parámetros de combinación alfa.</span><span class="sxs-lookup"><span data-stu-id="e8396-135">This method takes a pointer to an [**MFVideoAlphaBitmap**](/windows/desktop/api/evr9/ns-evr9-mfvideoalphabitmap) structure that specifies the bitmap and the alpha-blending parameters.</span></span> <span data-ttu-id="e8396-136">Para ver un ejemplo de código, vea el tema de referencia para el método **SetAlphaBitmap** .</span><span class="sxs-lookup"><span data-stu-id="e8396-136">For example code, see the reference topic for the **SetAlphaBitmap** method.</span></span>

<span data-ttu-id="e8396-137">Después de establecer el mapa de bits, puede actualizar los parámetros de fusión, incluidos los recangles de origen y de destino, llamando a [**IMFVideoMixerBitmap:: UpdateAlphaBitmapParameters**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-updatealphabitmapparameters).</span><span class="sxs-lookup"><span data-stu-id="e8396-137">After you set the bitmap, you can update the blending parameters, including the source and destination recangles, by calling [**IMFVideoMixerBitmap::UpdateAlphaBitmapParameters**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-updatealphabitmapparameters).</span></span> <span data-ttu-id="e8396-138">La actualización surte efecto en el siguiente fotograma de vídeo.</span><span class="sxs-lookup"><span data-stu-id="e8396-138">The update takes effect on the next video frame.</span></span> <span data-ttu-id="e8396-139">El vídeo debe reproducirse para que se produzca la actualización.</span><span class="sxs-lookup"><span data-stu-id="e8396-139">The video must be playing for the update to occur.</span></span> <span data-ttu-id="e8396-140">Puede utilizar este método para realizar animaciones simples en el mapa de bits.</span><span class="sxs-lookup"><span data-stu-id="e8396-140">You can use this method to perform simple animations on the bitmap.</span></span> <span data-ttu-id="e8396-141">(Si necesita efectos más sofisticados, considere la posibilidad de escribir un mezclador de EVR personalizado).</span><span class="sxs-lookup"><span data-stu-id="e8396-141">(If you need more sophisticated effects, consider writing a custom EVR mixer.)</span></span>

<span data-ttu-id="e8396-142">Para borrar el mapa de bits, llame a [**IMFVideoMixerBitmap:: ClearAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-clearalphabitmap).</span><span class="sxs-lookup"><span data-stu-id="e8396-142">To clear the bitmap, call [**IMFVideoMixerBitmap::ClearAlphaBitmap**](/windows/desktop/api/evr9/nf-evr9-imfvideomixerbitmap-clearalphabitmap).</span></span>

## <a name="controlling-substreams"></a><span data-ttu-id="e8396-143">Controlar subsecuencias</span><span class="sxs-lookup"><span data-stu-id="e8396-143">Controlling Substreams</span></span>

<span data-ttu-id="e8396-144">EVR puede mezclar una o más subsecuencias de vídeo en el flujo de vídeo principal.</span><span class="sxs-lookup"><span data-stu-id="e8396-144">The EVR can mix one or more video substreams onto the primary video stream.</span></span> <span data-ttu-id="e8396-145">Para controlar la combinación de subflujo, use la interfaz [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) .</span><span class="sxs-lookup"><span data-stu-id="e8396-145">To control substream mixing, use the [**IMFVideoMixerControl**](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol) interface.</span></span>

-   <span data-ttu-id="e8396-146">Llame a [**IMFVideoMixerControl:: SetStreamOutputRect**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamoutputrect) para establecer la posición de una subsecuencia en el fotograma de vídeo compuesto.</span><span class="sxs-lookup"><span data-stu-id="e8396-146">Call [**IMFVideoMixerControl::SetStreamOutputRect**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamoutputrect) to set the position of a substream within the composited video frame.</span></span>

-   <span data-ttu-id="e8396-147">Llame a [**IMFVideoMixerControl:: SetStreamZOrder**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamzorder) para establecer el orden z de las subsecuencias.</span><span class="sxs-lookup"><span data-stu-id="e8396-147">Call [**IMFVideoMixerControl::SetStreamZOrder**](/windows/desktop/api/evr/nf-evr-imfvideomixercontrol-setstreamzorder) to set the z-order for the substreams.</span></span> <span data-ttu-id="e8396-148">El EVR dibuja las secuencias de vídeo en el orden de sus valores de orden z, empezando por cero.</span><span class="sxs-lookup"><span data-stu-id="e8396-148">The EVR draws the video streams in the order of their z-order values, starting with zero.</span></span> <span data-ttu-id="e8396-149">El flujo de vídeo principal siempre es el primero en el orden z.</span><span class="sxs-lookup"><span data-stu-id="e8396-149">The primary video stream is always first in the z-order.</span></span>

## <a name="video-processor-settings"></a><span data-ttu-id="e8396-150">Configuración del procesador de vídeo</span><span class="sxs-lookup"><span data-stu-id="e8396-150">Video Processor Settings</span></span>

<span data-ttu-id="e8396-151">El mezclador de EVR usa la aceleración de vídeo de DirectX (DXVA) para realizar el procesamiento de vídeo en los flujos de entrada.</span><span class="sxs-lookup"><span data-stu-id="e8396-151">The EVR mixer uses DirectX Video Acceleration (DXVA) to perform video processing on the input streams.</span></span> <span data-ttu-id="e8396-152">Las capacidades de procesamiento exactas dependen del controlador de gráficos.</span><span class="sxs-lookup"><span data-stu-id="e8396-152">The exact processing capabilities depend on the graphics driver.</span></span> <span data-ttu-id="e8396-153">Las capacidades de procesamiento de vídeo se describen mediante el uso de la estructura [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) .</span><span class="sxs-lookup"><span data-stu-id="e8396-153">Video processing capabilities are described by using the [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure.</span></span> <span data-ttu-id="e8396-154">Un conjunto determinado de funciones se denomina *modo de procesamiento de vídeo* y cada modo se identifica mediante un GUID.</span><span class="sxs-lookup"><span data-stu-id="e8396-154">A particular set of capabilities is called a *video processing mode*, each mode being identified by a GUID.</span></span> <span data-ttu-id="e8396-155">Para obtener una lista de los GUID predefinidos, vea [**IDirectXVideoProcessorService:: GetVideoProcessorDeviceGuids**](/windows/desktop/api/dxva2api/nf-dxva2api-idirectxvideoprocessorservice-getvideoprocessordeviceguids).</span><span class="sxs-lookup"><span data-stu-id="e8396-155">For a list of predefined GUIDs, see [**IDirectXVideoProcessorService::GetVideoProcessorDeviceGuids**](/windows/desktop/api/dxva2api/nf-dxva2api-idirectxvideoprocessorservice-getvideoprocessordeviceguids).</span></span> <span data-ttu-id="e8396-156">El controlador puede definir GUID adicionales específicos del proveedor, que representan diferentes combinaciones de funcionalidades.</span><span class="sxs-lookup"><span data-stu-id="e8396-156">The driver might define additional vendor-specific GUIDs, representing different combinations of capabilities.</span></span>

<span data-ttu-id="e8396-157">Para buscar los modos admitidos y las capacidades de cada modo, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="e8396-157">To find the supported modes and the capabilities of each mode, do the following:</span></span>

1.  <span data-ttu-id="e8396-158">Llame a [**IMFGetService:: GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) para obtener un puntero a la interfaz [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) del mezclador.</span><span class="sxs-lookup"><span data-stu-id="e8396-158">Call [**IMFGetService::GetService**](/windows/desktop/api/mfidl/nf-mfidl-imfgetservice-getservice) to get a pointer to the mixer's [**IMFVideoProcessor**](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor) interface.</span></span>

2.  <span data-ttu-id="e8396-159">Llame a [**IMFVideoProcessor:: GetAvailableVideoProcessorModes**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getavailablevideoprocessormodes).</span><span class="sxs-lookup"><span data-stu-id="e8396-159">Call [**IMFVideoProcessor::GetAvailableVideoProcessorModes**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getavailablevideoprocessormodes).</span></span> <span data-ttu-id="e8396-160">Este método devuelve una matriz de GUID, que identifica los modos de procesador de vídeo disponibles.</span><span class="sxs-lookup"><span data-stu-id="e8396-160">This method returns an array of GUIDs, which identify the available video processor modes.</span></span> <span data-ttu-id="e8396-161">La lista se devuelve en orden de calidad descendente, el modo con la mayor calidad que aparece primero en la lista.</span><span class="sxs-lookup"><span data-stu-id="e8396-161">The list is returned in descending quality order, the mode with the highest quality appearing first in the list.</span></span> <span data-ttu-id="e8396-162">La lista puede cambiar en función del formato del vídeo.</span><span class="sxs-lookup"><span data-stu-id="e8396-162">The list can change depending on the format of the video.</span></span>

3.  <span data-ttu-id="e8396-163">Para cada GUID de la lista, llame a [**IMFVideoProcessor:: GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) para buscar las capacidades del modo de procesador de vídeo correspondiente.</span><span class="sxs-lookup"><span data-stu-id="e8396-163">For each GUID in the list, call [**IMFVideoProcessor::GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) to find the capabilities of the corresponding video processor mode.</span></span> <span data-ttu-id="e8396-164">El método rellena una estructura [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) con una descripción de las capacidades.</span><span class="sxs-lookup"><span data-stu-id="e8396-164">The method fills a [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure with a description of the capabilities.</span></span>

4.  <span data-ttu-id="e8396-165">Para seleccionar un modo, llame a [**IMFVideoProcessor:: SetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setvideoprocessormode).</span><span class="sxs-lookup"><span data-stu-id="e8396-165">To select a mode, call [**IMFVideoProcessor::SetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setvideoprocessormode).</span></span> <span data-ttu-id="e8396-166">De lo contrario, EVR selecciona automáticamente un modo cuando comienza el streaming.</span><span class="sxs-lookup"><span data-stu-id="e8396-166">Otherwise, the EVR automatically selects a mode when streaming begins.</span></span> <span data-ttu-id="e8396-167">En ese caso, puede llamar a [**IMFVideoProcessor:: GetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessormode) para buscar el modo seleccionado.</span><span class="sxs-lookup"><span data-stu-id="e8396-167">In that case, you can call [**IMFVideoProcessor::GetVideoProcessorMode**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessormode) to find which mode was selected.</span></span>

<span data-ttu-id="e8396-168">La mayoría de los campos de la estructura [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) describen el comportamiento del controlador de bajo nivel y no son de interés en una aplicación típica.</span><span class="sxs-lookup"><span data-stu-id="e8396-168">Most of the fields in the [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure describe low-level driver behavior and are not of interest in a typical application.</span></span> <span data-ttu-id="e8396-169">Lo más probable es que los campos siguientes sean de interés:</span><span class="sxs-lookup"><span data-stu-id="e8396-169">The following fields are most likely to be of interest:</span></span>

-   <span data-ttu-id="e8396-170">**DeviceCaps**.</span><span class="sxs-lookup"><span data-stu-id="e8396-170">**DeviceCaps**.</span></span> <span data-ttu-id="e8396-171">Este campo indica si el procesamiento de vídeo se realiza en hardware o software, y si el controlador de gráficos es un controlador de DXVA 1,0 antiguo.</span><span class="sxs-lookup"><span data-stu-id="e8396-171">This field indicates whether video processing is performed in hardware or software, and whether the graphics driver is an older DXVA 1.0 driver.</span></span>

-   <span data-ttu-id="e8396-172">**DeinterlaceTechnology**.</span><span class="sxs-lookup"><span data-stu-id="e8396-172">**DeinterlaceTechnology**.</span></span> <span data-ttu-id="e8396-173">Este campo proporciona alguna indicación del nivel de calidad de desentrelazado que puede esperar si el vídeo de origen está entrelazado.</span><span class="sxs-lookup"><span data-stu-id="e8396-173">This field provides some indication of what level of deinterlacing quality you can expect if the source video is interlaced.</span></span>

-   <span data-ttu-id="e8396-174">**ProcAmpControlCaps**.</span><span class="sxs-lookup"><span data-stu-id="e8396-174">**ProcAmpControlCaps**.</span></span> <span data-ttu-id="e8396-175">Este campo especifica qué controles de ajuste de color están disponibles.</span><span class="sxs-lookup"><span data-stu-id="e8396-175">This field specifies which color adjustment controls are available.</span></span> <span data-ttu-id="e8396-176">Para obtener una lista de posibles ajustes de color, consulte [configuración de ProcAmp](procamp-settings.md).</span><span class="sxs-lookup"><span data-stu-id="e8396-176">For a list of possible color adjustments, see [ProcAmp Settings](procamp-settings.md).</span></span> <span data-ttu-id="e8396-177">Si el controlador no puede realizar el ajuste de color, este campo es cero.</span><span class="sxs-lookup"><span data-stu-id="e8396-177">If the driver cannot perform color adjustment, this field is zero.</span></span>

-   <span data-ttu-id="e8396-178">**VideoProcessorOperations**.</span><span class="sxs-lookup"><span data-stu-id="e8396-178">**VideoProcessorOperations**.</span></span> <span data-ttu-id="e8396-179">Este campo contiene marcas que describen las diversas capacidades de procesamiento de vídeo.</span><span class="sxs-lookup"><span data-stu-id="e8396-179">This field contains flags that describe miscellaneous video processing capabilities.</span></span> <span data-ttu-id="e8396-180">Dos marcas de importancia concreta son la \_ \_ marca subsecuencias de DXVA2 videoprocess y la \_ marca subsecuencias de videoprocess de DXVA2 \_ .</span><span class="sxs-lookup"><span data-stu-id="e8396-180">Two flags of particular importance are the DXVA2\_VideoProcess\_SubStreams flag and the DXVA2\_VideoProcess\_SubStreams flag.</span></span> <span data-ttu-id="e8396-181">Debe haber al menos una de estas marcas para que EVR mezcle subflujos en el flujo de vídeo de referencia.</span><span class="sxs-lookup"><span data-stu-id="e8396-181">At least one of these flags must be present for the EVR to mix substreams onto the reference video stream.</span></span> <span data-ttu-id="e8396-182">Si no hay ninguna marca, la EVR se limita a una secuencia de vídeo.</span><span class="sxs-lookup"><span data-stu-id="e8396-182">If neither flag is present, the EVR is limited to one video stream.</span></span>

-   <span data-ttu-id="e8396-183">**NoiseFilterTechnology**.</span><span class="sxs-lookup"><span data-stu-id="e8396-183">**NoiseFilterTechnology**.</span></span> <span data-ttu-id="e8396-184">Este campo indica qué filtros de ruido admite el controlador de gráficos.</span><span class="sxs-lookup"><span data-stu-id="e8396-184">This field indicates which noise filters are supported by the graphics driver.</span></span> <span data-ttu-id="e8396-185">Si el controlador no admite el filtrado de ruido, el valor es DXVA2 \_ NoiseFilterTech no \_ compatible.</span><span class="sxs-lookup"><span data-stu-id="e8396-185">If the driver does not support noise filtering, the value is DXVA2\_NoiseFilterTech\_Unsupported.</span></span>

-   <span data-ttu-id="e8396-186">**DetailFilterTechnology**.</span><span class="sxs-lookup"><span data-stu-id="e8396-186">**DetailFilterTechnology**.</span></span> <span data-ttu-id="e8396-187">Este campo indica qué filtros de detalle son compatibles con el controlador de gráficos.</span><span class="sxs-lookup"><span data-stu-id="e8396-187">This field indicates which detail filters are supported by the graphics driver.</span></span> <span data-ttu-id="e8396-188">Si el controlador no admite el filtrado de ruido, el valor es DXVA2 \_ DetailFilterTech no \_ compatible.</span><span class="sxs-lookup"><span data-stu-id="e8396-188">If the driver does not support noise filtering, the value is DXVA2\_DetailFilterTech\_Unsupported.</span></span>

## <a name="color-adjustment-and-image-filtering"></a><span data-ttu-id="e8396-189">Ajuste de color y filtrado de imágenes</span><span class="sxs-lookup"><span data-stu-id="e8396-189">Color Adjustment and Image Filtering</span></span>

<span data-ttu-id="e8396-190">El controlador de gráficos puede admitir el ajuste de color (también denominado *amplificación de proceso* o simplemente *ProcAmp*) y el filtrado de imágenes.</span><span class="sxs-lookup"><span data-stu-id="e8396-190">The graphics driver might support color adjustment (also called *process amplification* or simply *ProcAmp*) and image filtering.</span></span> <span data-ttu-id="e8396-191">Cuando se realiza mediante la GPU, el ajuste de color y el filtrado de imágenes se pueden realizar en tiempo real sin sobrecarga de la CPU.</span><span class="sxs-lookup"><span data-stu-id="e8396-191">When performed by the GPU, color adjustment and image filtering can be done in real time with no CPU overhead.</span></span>

<span data-ttu-id="e8396-192">Para usar estas características, realice los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="e8396-192">To use these features, perform the following steps:</span></span>

1.  <span data-ttu-id="e8396-193">Seleccione un modo de procesamiento de vídeo como se describe en la sección anterior.</span><span class="sxs-lookup"><span data-stu-id="e8396-193">Select a video processing mode as described in the previous section.</span></span>

2.  <span data-ttu-id="e8396-194">Llame a [**IMFVideoProcessor:: GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) para buscar las capacidades de procesamiento de vídeo como se describe en la sección anterior.</span><span class="sxs-lookup"><span data-stu-id="e8396-194">Call [**IMFVideoProcessor::GetVideoProcessorCaps**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getvideoprocessorcaps) to find the video processing capabilities as described in the previous section.</span></span> <span data-ttu-id="e8396-195">El método rellena una estructura [**DXVA2 \_ VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) que describe las capacidades, incluido si el controlador admite el ajuste de color y el filtro de imagen.</span><span class="sxs-lookup"><span data-stu-id="e8396-195">The method fills in a [**DXVA2\_VideoProcessorCaps**](/windows/desktop/api/dxva2api/ns-dxva2api-dxva2_videoprocessorcaps) structure which describes the capabilities, including whether the driver supports color adjustment and image filter.</span></span>

3.  <span data-ttu-id="e8396-196">Para cada ajuste de color que sea compatible con el controlador, llame a [**IMFVideoProcessor:: GetProcAmpRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocamprange) para buscar el intervalo posible de valor para esa configuración.</span><span class="sxs-lookup"><span data-stu-id="e8396-196">For each color adjustment that is supported by driver, call [**IMFVideoProcessor::GetProcAmpRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocamprange) to find the possible range of value for that setting.</span></span> <span data-ttu-id="e8396-197">Este método también devuelve el valor predeterminado de la configuración.</span><span class="sxs-lookup"><span data-stu-id="e8396-197">This method also returns the default value for the setting.</span></span> <span data-ttu-id="e8396-198">Llame a [**IMFVideoProcessor:: GetProcAmpValues**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocampvalues) para buscar el valor actual de la configuración.</span><span class="sxs-lookup"><span data-stu-id="e8396-198">Call [**IMFVideoProcessor::GetProcAmpValues**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getprocampvalues) to find the current value of the settings.</span></span> <span data-ttu-id="e8396-199">Los valores no tienen unidades especificadas.</span><span class="sxs-lookup"><span data-stu-id="e8396-199">The values do not have specified units.</span></span> <span data-ttu-id="e8396-200">Depende del controlador definir el intervalo de valores.</span><span class="sxs-lookup"><span data-stu-id="e8396-200">It is up to the driver to define the range of values.</span></span>

4.  <span data-ttu-id="e8396-201">Llame a [**IMFVideoProcessor:: SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue) para establecer un valor de ajuste de color.</span><span class="sxs-lookup"><span data-stu-id="e8396-201">Call [**IMFVideoProcessor::SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue) to set a color adjustment value.</span></span>

5.  <span data-ttu-id="e8396-202">Si el controlador admite el filtrado de imágenes, cada tipo de filtro (ruido y detalle) admite tres configuraciones: nivel, radio y umbral, tanto en croma como en luminancia.</span><span class="sxs-lookup"><span data-stu-id="e8396-202">If the driver supports image filtering, then each filter type (noise and detail) supports three settings—level, radius, and threshold—in both chroma and luma.</span></span> <span data-ttu-id="e8396-203">(Consulte [configuración del filtro de imagen de DXVA](dxva-image-filter-settings.md)). Para cada configuración, llame a [**IMFVideoProcessor:: GetFilteringRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringrange) para obtener el intervalo de valores posibles y llame a [**IMFVideoProcessor:: GetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringvalue) para obtener el valor actual.</span><span class="sxs-lookup"><span data-stu-id="e8396-203">(See [DXVA Image Filter Settings](dxva-image-filter-settings.md).) For each setting, call [**IMFVideoProcessor::GetFilteringRange**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringrange) to get the range of possible values and call [**IMFVideoProcessor::GetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-getfilteringvalue) to get the current value.</span></span>

6.  <span data-ttu-id="e8396-204">Para cambiar una configuración de filtro de imagen, llame a [**IMFVideoProcessor:: SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue).</span><span class="sxs-lookup"><span data-stu-id="e8396-204">To change an image filter setting, call [**IMFVideoProcessor::SetFilteringValue**](/windows/desktop/api/evr9/nf-evr9-imfvideoprocessor-setfilteringvalue).</span></span>

## <a name="related-topics"></a><span data-ttu-id="e8396-205">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e8396-205">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e8396-206">Representador de vídeo mejorado</span><span class="sxs-lookup"><span data-stu-id="e8396-206">Enhanced Video Renderer</span></span>](enhanced-video-renderer.md)
</dt> </dl>

 

 



