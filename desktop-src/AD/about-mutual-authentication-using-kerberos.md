---
title: Acerca de la autenticación mutua con Kerberos
description: En la autenticación mutua, el cliente y el servicio deben comprobar sus identidades respectivas entre sí antes de realizar las funciones de la aplicación.
ms.assetid: 5ce923d6-bede-4acb-b297-e93f2f506ea9
ms.tgt_platform: multiple
keywords:
- Acerca de la autenticación mutua mediante Kerberos AD
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9685dad0bd20f233b8dcb0ecf12af338f318646f
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "104075027"
---
# <a name="about-mutual-authentication-using-kerberos"></a><span data-ttu-id="6e434-104">Acerca de la autenticación mutua con Kerberos</span><span class="sxs-lookup"><span data-stu-id="6e434-104">About Mutual Authentication Using Kerberos</span></span>

<span data-ttu-id="6e434-105">En la autenticación mutua, el cliente y el servicio deben comprobar sus identidades respectivas entre sí antes de realizar las funciones de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6e434-105">In mutual authentication, the client and service must verify their respective identities to each other before performing application functions.</span></span> <span data-ttu-id="6e434-106">Ninguna de las partes puede realizar operaciones con la otra hasta que se haya comprobado la identidad; es decir, el servicio debe ser capaz de comprobar el cliente sin consultar al cliente y el cliente debe ser capaz de comprobar el servicio sin consultar el servicio.</span><span class="sxs-lookup"><span data-stu-id="6e434-106">Neither party can perform operations with the other until identity has been verified; that is, the service must be able to verify the client without querying the client and the client must be able to verify the service without querying the service.</span></span>

<span data-ttu-id="6e434-107">El valor de un servicio que puede autenticar a un cliente es conocido.</span><span class="sxs-lookup"><span data-stu-id="6e434-107">The value of a service that can authenticate a client is well-known.</span></span> <span data-ttu-id="6e434-108">Por ejemplo, un servicio de archivo suplanta a un cliente para determinar a qué archivos puede tener acceso el cliente.</span><span class="sxs-lookup"><span data-stu-id="6e434-108">For example, a file service impersonates a client to determine which files the client can access.</span></span>

<span data-ttu-id="6e434-109">El valor de un cliente que puede autenticar un servicio es menos comprensible.</span><span class="sxs-lookup"><span data-stu-id="6e434-109">The value of a client that can authenticate a service is less understood.</span></span> <span data-ttu-id="6e434-110">La autenticación de un servicio permite que el cliente confíe en los datos que obtiene del servicio y que sea seguro para enviar datos confidenciales al servicio.</span><span class="sxs-lookup"><span data-stu-id="6e434-110">Authenticating a service enables the client to trust the data that it gets from the service and to be secure in sending sensitive data to the service.</span></span> <span data-ttu-id="6e434-111">La capacidad de un cliente para autenticar un servicio es especialmente importante en las aplicaciones de cliente/servicio que admiten la delegación del contexto de seguridad del cliente. es decir, el cliente autoriza el servicio para que actúe como su delegado en el acceso a servicios adicionales o recursos de red.</span><span class="sxs-lookup"><span data-stu-id="6e434-111">The ability of a client to authenticate a service is particularly important in client/service applications that support delegation of the client's security context; that is, the client authorizes the service to act as its delegate in accessing additional services or network resources.</span></span>

<span data-ttu-id="6e434-112">Un servicio autentica un cliente de la siguiente manera: el cliente establece un contexto de seguridad local mediante la ejecución en un contexto establecido previamente, por ejemplo, en la sesión de un usuario que ha iniciado sesión o mediante la presentación explícita de credenciales al proveedor de seguridad subyacente.</span><span class="sxs-lookup"><span data-stu-id="6e434-112">A service authenticates a client as follows: The client establishes a local security context either by executing in a previously established context, for example, in the session of a logged-in user, or by explicitly presenting credentials to the underlying security provider.</span></span> <span data-ttu-id="6e434-113">El servicio no puede aceptar conexiones de ningún cliente no autenticado.</span><span class="sxs-lookup"><span data-stu-id="6e434-113">The service cannot accept connections from any unauthenticated client.</span></span>

<span data-ttu-id="6e434-114">El mecanismo de Kerberos por el que un cliente autentica un servicio funciona de la siguiente manera: cuando se instala un servicio, un instalador de servicio que se ejecuta con privilegios de administrador, registra uno o más SPN únicos para cada instancia de servicio.</span><span class="sxs-lookup"><span data-stu-id="6e434-114">The Kerberos mechanism by which a client authenticates a service works as follows: When a service is installed, a service installer, running with administrator privileges, registers one or more unique SPNs for each service instance.</span></span> <span data-ttu-id="6e434-115">Los nombres se registran en el controlador de Dominio de Active Directory (DC) del objeto de cuenta de usuario o de equipo que la instancia de servicio utilizará para iniciar sesión.</span><span class="sxs-lookup"><span data-stu-id="6e434-115">The names are registered in the Active Directory Domain Controller (DC) on the user or computer account object that the service instance will use to log on.</span></span> <span data-ttu-id="6e434-116">Cuando un cliente solicita una conexión a un servicio, crea un SPN para una instancia de servicio con datos conocidos o datos proporcionados por el usuario.</span><span class="sxs-lookup"><span data-stu-id="6e434-116">When a client requests a connection to a service, it composes an SPN for a service instance, using known data or data provided by the user.</span></span> <span data-ttu-id="6e434-117">Después, el cliente utiliza el paquete de negociación de SSPI para presentar el SPN al Centro de distribución de claves (KDC) para la cuenta de dominio del cliente.</span><span class="sxs-lookup"><span data-stu-id="6e434-117">The client then uses the SSPI negotiate package to present the SPN to the Key Distribution Center (KDC) for the client domain account.</span></span> <span data-ttu-id="6e434-118">El KDC busca en el bosque una cuenta de usuario o de equipo en la que se haya registrado el SPN.</span><span class="sxs-lookup"><span data-stu-id="6e434-118">The KDC searches the forest for a user or computer account on which that SPN is registered.</span></span> <span data-ttu-id="6e434-119">Si el SPN está registrado en más de una cuenta, se produce un error en la autenticación.</span><span class="sxs-lookup"><span data-stu-id="6e434-119">If the SPN is registered on more than one account, the authentication fails.</span></span> <span data-ttu-id="6e434-120">De lo contrario, el KDC cifra un mensaje con la contraseña de la cuenta en la que se registró el SPN.</span><span class="sxs-lookup"><span data-stu-id="6e434-120">Otherwise, the KDC encrypts a message using the password of the account on which the SPN was registered.</span></span> <span data-ttu-id="6e434-121">El KDC pasa este mensaje cifrado al cliente, que a su vez lo pasa a la instancia de servicio.</span><span class="sxs-lookup"><span data-stu-id="6e434-121">The KDC passes this encrypted message to the client, which in turn passes it to the service instance.</span></span> <span data-ttu-id="6e434-122">El servicio utiliza el paquete de negociación SSPI para descifrar el mensaje, que se devuelve al cliente y al KDC del cliente.</span><span class="sxs-lookup"><span data-stu-id="6e434-122">The service uses the SSPI negotiate package to decrypt the message, which it passes back to the client and on to the client's KDC.</span></span> <span data-ttu-id="6e434-123">El KDC autentica el servicio si el mensaje descifrado coincide con su mensaje original.</span><span class="sxs-lookup"><span data-stu-id="6e434-123">The KDC authenticates the service if the decrypted message matches its original message.</span></span>

-   <span data-ttu-id="6e434-124">Para obtener más información acerca de la creación y el registro de SPN, vea. [Nombres de entidad](service-principal-names.md) de seguridad de servicio</span><span class="sxs-lookup"><span data-stu-id="6e434-124">For more information about composing and registering SPNs, see .[Service Principal Names](service-principal-names.md)</span></span>
-   <span data-ttu-id="6e434-125">Para obtener más información y un ejemplo de código que crea un SPN para un servicio de Windows Sockets que se publica con un punto de conexión de servicio, consulte [creación de SPN para un servicio con un SCP](composing-the-spns-for-a-service-with-an-scp.md).</span><span class="sxs-lookup"><span data-stu-id="6e434-125">For more information and a code example that composes an SPN for a Windows Sockets service that publishes itself with a service connection point, see [Composing the SPNs for a Service with an SCP](composing-the-spns-for-a-service-with-an-scp.md).</span></span>
-   <span data-ttu-id="6e434-126">Para obtener más información y un ejemplo de código que compone un SPN para un servicio RPC, consulte [composición de SPN para un servicio RpcNs](composing-spns-for-an-rpcns-service.md).</span><span class="sxs-lookup"><span data-stu-id="6e434-126">For more information and a code example that composes an SPN for an RPC service, see [Composing SPNs for an RpcNs Service](composing-spns-for-an-rpcns-service.md).</span></span>

 

 




