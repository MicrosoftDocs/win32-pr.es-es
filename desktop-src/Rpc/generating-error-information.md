---
title: Generando información de error
description: Si un servidor o aplicación encuentra un error irrecuperable mientras se llama a través de RPC, debe indicar al tiempo de ejecución de RPC que ha detectado un error y, idealmente, debe agregar información sobre el error para facilitar la solución de problemas.
ms.assetid: 6658c387-94df-4d85-9749-53858f9e0f5f
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b06a13e932034e6840479443e0b78f4c322c0b3
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "105676147"
---
# <a name="generating-error-information"></a><span data-ttu-id="7f2e7-103">Generando información de error</span><span class="sxs-lookup"><span data-stu-id="7f2e7-103">Generating Error Information</span></span>

<span data-ttu-id="7f2e7-104">Si un servidor o aplicación encuentra un error irrecuperable mientras se llama a través de RPC, debe indicar al tiempo de ejecución de RPC que ha detectado un error y, idealmente, debe agregar información sobre el error para facilitar la solución de problemas.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-104">If a server or application encounters a fatal error while being called through RPC, it should indicate to the RPC run time that it has encountered a failure, and ideally, should add information about the failure to facilitate troubleshooting.</span></span>

## <a name="indicating-fatal-errors-to-the-rpc-run-time"></a><span data-ttu-id="7f2e7-105">Que indica errores irrecuperables en el tiempo de ejecución de RPC</span><span class="sxs-lookup"><span data-stu-id="7f2e7-105">Indicating Fatal Errors to the RPC Run Time</span></span>

<span data-ttu-id="7f2e7-106">Para indicar un error en el tiempo de ejecución de RPC, llame a la función [**RpcRaiseException**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcraiseexception) mientras se encuentra en el SUBproceso RPC en el que se llamó a la excepción, o [**RpcAsyncAbortCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasyncabortcall) si procesa la llamada de forma asincrónica en otro subproceso.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-106">To indicate a failure to the RPC run time, call the [**RpcRaiseException**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcraiseexception) function while on the RPC thread the exception was called on, or [**RpcAsyncAbortCall**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcasyncabortcall) if processing the call asynchronously on another thread.</span></span> <span data-ttu-id="7f2e7-107">Devolver un código de error de la rutina del servidor, como la rutina Manager, no es suficiente, de acuerdo con la especificación RPC, el valor devuelto de la función no tiene ninguna semántica de error en el servidor, independientemente de la configuración del archivo IDL/ACF.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-107">Returning an error code from the server routine, such as the manager routine, is not sufficient—according to the RPC specification, the return value of the function has no error semantics on the server, regardless of the idl/acf file settings.</span></span>

<span data-ttu-id="7f2e7-108">Cuando se produce un error irrecuperable en el componente, realice cualquier limpieza que considere necesaria y, a continuación, llame a la función [**RpcRaiseException**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcraiseexception) con el código de error.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-108">When a fatal error occurs in your component, perform any cleanup deemed necessary and then call the [**RpcRaiseException**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcraiseexception) function with the error code.</span></span> <span data-ttu-id="7f2e7-109">La única diferencia entre **RpcRaiseException** y la devolución de un código de error es cuando se llama a **RpcRaiseException** , no se calculan las referencias de los parámetros out.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-109">The only difference between **RpcRaiseException** and returning an error code is when the **RpcRaiseException** is called, the out parameters are not marshaled.</span></span> <span data-ttu-id="7f2e7-110">Esto suele ser una ventaja, ya que evitar los parámetros out no inicializados deja de ser necesario.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-110">This is usually an advantage, since avoiding uninitialized out parameters becomes unnecessary.</span></span>

## <a name="generating-additional-extended-error-information"></a><span data-ttu-id="7f2e7-111">Generando información adicional de errores extendidos</span><span class="sxs-lookup"><span data-stu-id="7f2e7-111">Generating Additional Extended Error Information</span></span>

<span data-ttu-id="7f2e7-112">Del mismo modo que el tiempo de ejecución de RPC genera una cadena de registros de error, el servidor o la aplicación pueden agregar sus propios registros a la cadena.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-112">Just as the RPC run time builds a chain of error records, your server or application can add its own records to the chain.</span></span> <span data-ttu-id="7f2e7-113">Este enfoque suele ayudarle en el proceso de solución de problemas.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-113">This approach often helps in the troubleshooting process.</span></span> <span data-ttu-id="7f2e7-114">Por ejemplo, un servidor puede intentar abrir un archivo determinado y recibir un error de archivo no encontrado.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-114">For example, a server may attempt to open a given file and receive a file not found error.</span></span> <span data-ttu-id="7f2e7-115">Simplemente devolver el error 2 no sería útil para determinar qué archivo falta.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-115">Simply returning error 2 would not be helpful in determining which file is missing.</span></span>

<span data-ttu-id="7f2e7-116">En su lugar, el servidor podría llamar a la función [**RpcErrorAddRecord**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerroraddrecord) y proporcionar un parámetro de cadena, ANSI o Unicode, en el registro de errores que indica la ruta de acceso completa del archivo que estaba buscando.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-116">Instead, your server could call the [**RpcErrorAddRecord**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerroraddrecord) function and provide a string parameter, either ANSI or Unicode, in the error record indicating the full path of the file it was looking for.</span></span> <span data-ttu-id="7f2e7-117">Cuando toda esta información aparece en la pantalla de usuario de un equipo remoto, la solución de problemas es trivial. se puede realizar una comprobación simple de si existe el archivo, especialmente porque el nombre del equipo en cuestión ya lo proporciona el tiempo de ejecución de RPC.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-117">When all this information appears on the user screen on a remote computer, troubleshooting becomes trivial; a simple check of whether the file exists can be done, especially since the name of the computer in question is already provided by the RPC run time.</span></span>

<span data-ttu-id="7f2e7-118">La llamada a la función [**RpcErrorAddRecord**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerroraddrecord) puede producir un error si no hay suficiente memoria disponible, aunque solo requiere unos pocos bytes de espacio en el montón.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-118">The [**RpcErrorAddRecord**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerroraddrecord) function call may fail if enough memory is not available, even though it requires only a few bytes of heap space.</span></span> <span data-ttu-id="7f2e7-119">Además, los registros agregados por **RpcErrorAddRecord** se acumulan en un subproceso determinado.</span><span class="sxs-lookup"><span data-stu-id="7f2e7-119">Also, records added by **RpcErrorAddRecord** accumulate in a given thread.</span></span> <span data-ttu-id="7f2e7-120">Normalmente, el tiempo de ejecución limpia esos registros antes de llamar a la rutina del servidor, pero si la información de error extendida se usa fuera de RPC, se encarga de limpiar el error extendido acumulado en el subproceso llamando a [**RpcErrorClearInformation**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerrorclearinformation).</span><span class="sxs-lookup"><span data-stu-id="7f2e7-120">The runtime normally cleans those records up before it calls your server routine, but if extended error information is used outside RPC, take care of cleaning up the accumulated extended error in the thread by calling [**RpcErrorClearInformation**](/windows/desktop/api/Rpcasync/nf-rpcasync-rpcerrorclearinformation).</span></span>

 

 




