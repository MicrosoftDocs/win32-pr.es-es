---
description: Un bloqueo de actualización de ventana es una suspensión temporal del dibujo en una ventana.
ms.assetid: 92b1ba04-ff79-4a37-9633-99412cdafe95
title: Bloqueo de actualización de ventana
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4897915020134387947c7a77009c4bdbd63cfdd6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104276449"
---
# <a name="window-update-lock"></a><span data-ttu-id="7db56-103">Bloqueo de actualización de ventana</span><span class="sxs-lookup"><span data-stu-id="7db56-103">Window Update Lock</span></span>

<span data-ttu-id="7db56-104">Un *bloqueo de actualización de ventana* es una suspensión temporal del dibujo en una ventana.</span><span class="sxs-lookup"><span data-stu-id="7db56-104">A *window update lock* is a temporary suspension of drawing in a window.</span></span> <span data-ttu-id="7db56-105">El sistema utiliza el bloqueo para evitar que otras ventanas dibujen el rectángulo de seguimiento cada vez que el usuario mueve o cambia el tamaño de una ventana.</span><span class="sxs-lookup"><span data-stu-id="7db56-105">The system uses the lock to prevent other windows from drawing over the tracking rectangle whenever the user moves or sizes a window.</span></span> <span data-ttu-id="7db56-106">Las aplicaciones pueden utilizar el bloqueo para evitar el dibujo si realizan operaciones de movimiento o cambio de tamaño similares con sus propias ventanas.</span><span class="sxs-lookup"><span data-stu-id="7db56-106">Applications can use the lock to prevent drawing if they carry out similar moving or sizing operations with their own windows.</span></span>

<span data-ttu-id="7db56-107">Una aplicación utiliza la función [**LockWindowUpdate**](/windows/desktop/api/Winuser/nf-winuser-lockwindowupdate) para establecer o borrar un bloqueo de actualización de ventana, especificando la ventana que se va a bloquear.</span><span class="sxs-lookup"><span data-stu-id="7db56-107">An application uses the [**LockWindowUpdate**](/windows/desktop/api/Winuser/nf-winuser-lockwindowupdate) function to set or clear a window update lock, specifying the window to lock.</span></span> <span data-ttu-id="7db56-108">El bloqueo se aplica a la ventana especificada y a todas sus ventanas secundarias.</span><span class="sxs-lookup"><span data-stu-id="7db56-108">The lock applies to the specified window and all of its child windows.</span></span> <span data-ttu-id="7db56-109">Cuando se establece el bloqueo, las funciones [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) y [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) devuelven un contexto de dispositivo de pantalla con un área visible que está vacía.</span><span class="sxs-lookup"><span data-stu-id="7db56-109">When the lock is set, the [**GetDC**](/windows/desktop/api/Winuser/nf-winuser-getdc) and [**BeginPaint**](/windows/desktop/api/Winuser/nf-winuser-beginpaint) functions return a display device context with a visible region that is empty.</span></span> <span data-ttu-id="7db56-110">Dado esto, la aplicación puede continuar dibujando en la ventana, pero todos los resultados se recortan.</span><span class="sxs-lookup"><span data-stu-id="7db56-110">Given this, the application can continue to draw in the window, but all output is clipped.</span></span> <span data-ttu-id="7db56-111">El bloqueo se conserva hasta que la aplicación lo borra llamando a **LockWindowUpdate**, especificando **null** para la ventana.</span><span class="sxs-lookup"><span data-stu-id="7db56-111">The lock persists until the application clears it by calling **LockWindowUpdate**, specifying **NULL** for the window.</span></span> <span data-ttu-id="7db56-112">Aunque **LockWindowUpdate** fuerza que el área visible de una ventana esté vacía, la función no hace que la ventana especificada sea invisible y no borra el \_ bit de estilo visible de WS.</span><span class="sxs-lookup"><span data-stu-id="7db56-112">Although **LockWindowUpdate** forces a window's visible region to be empty, the function does not make the specified window invisible and does not clear the WS\_VISIBLE style bit.</span></span>

<span data-ttu-id="7db56-113">Una vez establecido el bloqueo, la aplicación puede usar la función [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) , con el \_ valor LOCKWINDOWUPDATE de DCX, para recuperar un contexto de dispositivo de pantalla que se va a dibujar en la ventana bloqueada.</span><span class="sxs-lookup"><span data-stu-id="7db56-113">After the lock is set, the application can use the [**GetDCEx**](/windows/desktop/api/Winuser/nf-winuser-getdcex) function, with the DCX\_LOCKWINDOWUPDATE value, to retrieve a display device context to draw over the locked window.</span></span> <span data-ttu-id="7db56-114">Esto permite que la aplicación dibuje un rectángulo de seguimiento al procesar los mensajes del teclado o del mouse.</span><span class="sxs-lookup"><span data-stu-id="7db56-114">This allows the application to draw a tracking rectangle when processing keyboard or mouse messages.</span></span> <span data-ttu-id="7db56-115">El sistema utiliza este método cuando el usuario mueve y cambia el tamaño de las ventanas.</span><span class="sxs-lookup"><span data-stu-id="7db56-115">The system uses this method when the user moves and sizes windows.</span></span> <span data-ttu-id="7db56-116">**GetDCEx** recupera el contexto de dispositivo de pantalla de la memoria caché de contexto de dispositivo de pantalla, por lo que la aplicación debe liberar el contexto de dispositivo lo antes posible después de dibujar.</span><span class="sxs-lookup"><span data-stu-id="7db56-116">**GetDCEx** retrieves the display device context from the display device context cache, so the application must release the device context as soon as possible after drawing.</span></span>

<span data-ttu-id="7db56-117">Mientras se establece un bloqueo de actualización de ventana, el sistema crea un rectángulo delimitador acumulado para cada ventana bloqueada.</span><span class="sxs-lookup"><span data-stu-id="7db56-117">While a window update lock is set, the system creates an accumulated bounding rectangle for each locked window.</span></span> <span data-ttu-id="7db56-118">Cuando se borra el bloqueo, el sistema usa este rectángulo delimitador para establecer la región de actualización de la ventana y sus ventanas secundarias, lo que fuerza un mensaje de [**\_ pintura de WM**](wm-paint.md) eventual.</span><span class="sxs-lookup"><span data-stu-id="7db56-118">When the lock is cleared, the system uses this bounding rectangle to set the update region for the window and its child windows, forcing an eventual [**WM\_PAINT**](wm-paint.md) message.</span></span> <span data-ttu-id="7db56-119">Si el rectángulo delimitador acumulado está vacío (es decir, si no se ha producido ningún dibujo mientras se estableció el bloqueo), no se establece la región de actualización.</span><span class="sxs-lookup"><span data-stu-id="7db56-119">If the accumulated bounding rectangle is empty (that is, if no drawing has occurred while the lock was set), the update region is not set.</span></span>

 

 



