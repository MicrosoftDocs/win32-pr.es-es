---
title: Información general de la API del servidor HTTP
description: En este tema se identifica una secuencia típica de operaciones que usan la API del servidor HTTP.
ms.assetid: 1245fd98-8370-4f1b-8c86-de9be5e678bd
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5c99af3e4914c5496c2adea10b3ac658f75f3018
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/19/2020
ms.locfileid: "105685696"
---
# <a name="http-server-api-overview"></a><span data-ttu-id="86cf6-103">Información general de la API del servidor HTTP</span><span class="sxs-lookup"><span data-stu-id="86cf6-103">HTTP Server API Overview</span></span>

<span data-ttu-id="86cf6-104">La lista siguiente identifica una secuencia típica de operaciones que usan la API del servidor HTTP:</span><span class="sxs-lookup"><span data-stu-id="86cf6-104">The following list identifies a typical sequence of operations that use the HTTP Server API:</span></span>

-   <span data-ttu-id="86cf6-105">Inicialice la API del servidor HTTP mediante la función [**HttpInitialize**](/windows/desktop/api/Http/nf-http-httpinitialize) .</span><span class="sxs-lookup"><span data-stu-id="86cf6-105">Initialize the HTTP Server API by using the [**HttpInitialize**](/windows/desktop/api/Http/nf-http-httpinitialize) function.</span></span>
-   <span data-ttu-id="86cf6-106">Cree una cola de solicitudes con la función [**HttpCreateHttpHandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle) .</span><span class="sxs-lookup"><span data-stu-id="86cf6-106">Create a request queue by using the [**HttpCreateHttpHandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle) function.</span></span>
-   <span data-ttu-id="86cf6-107">Registre una o más direcciones URL mediante la función [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) .</span><span class="sxs-lookup"><span data-stu-id="86cf6-107">Register one or more URLs by using the [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) function.</span></span>
-   <span data-ttu-id="86cf6-108">Recibir solicitudes entrantes dirigidas a direcciones URL registradas mediante la función [**HttpReceiveHttpRequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) y enviar respuestas http para estas solicitudes mediante la función [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) .</span><span class="sxs-lookup"><span data-stu-id="86cf6-108">Receive incoming requests directed to registered URLs by using the [**HttpReceiveHttpRequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) function, and send HTTP responses for these requests by using the [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) function.</span></span>
-   <span data-ttu-id="86cf6-109">Opta Al enviar una respuesta, envíe un cuerpo de entidad adicional mediante la función [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) .</span><span class="sxs-lookup"><span data-stu-id="86cf6-109">(Optional) When sending a response, send an additional entity body by using the [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) function.</span></span>
-   <span data-ttu-id="86cf6-110">Realice operaciones de limpieza mediante las funciones [**HttpRemoveUrl**](/windows/desktop/api/Http/nf-http-httpremoveurl), [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) y [**HttpTerminate**](/windows/desktop/api/Http/nf-http-httpterminate) .</span><span class="sxs-lookup"><span data-stu-id="86cf6-110">Perform clean-up operations by using the [**HttpRemoveUrl**](/windows/desktop/api/Http/nf-http-httpremoveurl), [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) and [**HttpTerminate**](/windows/desktop/api/Http/nf-http-httpterminate) functions.</span></span>

<span data-ttu-id="86cf6-111">En operaciones que usan direcciones URL, tenga en cuenta que se trata de la dirección URL procesada incluida en el miembro **CookedUrl** de la estructura de la [**\_ solicitud HTTP \_ v1**](/windows/desktop/api/Http/ns-http-http_request_v1) que se debe usar.</span><span class="sxs-lookup"><span data-stu-id="86cf6-111">In operations that use URLs, note that it is the processed URL contained in the **CookedUrl** member of the [**HTTP\_REQUEST\_V1**](/windows/desktop/api/Http/ns-http-http_request_v1) structure that should be used.</span></span> <span data-ttu-id="86cf6-112">No se trata de la dirección URL no procesada en el miembro **pRawUrl** , que es únicamente para fines estadísticos y de seguimiento.</span><span class="sxs-lookup"><span data-stu-id="86cf6-112">Do not the unprocessed URL in the **pRawUrl** member, which is solely for tracking and statistical purposes.</span></span>

<span data-ttu-id="86cf6-113">Cada aplicación crea su propia cola de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="86cf6-113">Each application creates its own request queue.</span></span> <span data-ttu-id="86cf6-114">Una aplicación obtiene el identificador de la cola de solicitudes de [**HttpCreateHttpHandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle).</span><span class="sxs-lookup"><span data-stu-id="86cf6-114">An application obtains its request queue handle from [**HttpCreateHttpHandle**](/windows/desktop/api/Http/nf-http-httpcreatehttphandle).</span></span> <span data-ttu-id="86cf6-115">Pasa este identificador a la función [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) para agregar una dirección URL a la cola de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="86cf6-115">It passes this handle to the [**HttpAddUrl**](/windows/desktop/api/Http/nf-http-httpaddurl) function to add a URL to the request queue.</span></span> <span data-ttu-id="86cf6-116">La aplicación recibe la notificación de una solicitud entrante y la recupera de la cola de solicitudes mediante una llamada a la función [**HttpReceiveHttpRequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) con el identificador de la cola de solicitudes.</span><span class="sxs-lookup"><span data-stu-id="86cf6-116">The application receives notification of an incoming request, and retrieves it from the request queue by calling the [**HttpReceiveHttpRequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) function with the request queue handle.</span></span> <span data-ttu-id="86cf6-117">Puede usar esta función para recibir los encabezados de solicitud o los encabezados y el cuerpo de la entidad.</span><span class="sxs-lookup"><span data-stu-id="86cf6-117">You can use this function to receive either the request headers or both the headers and entity body.</span></span> <span data-ttu-id="86cf6-118">[**HttpReceiveHttpRequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) también devuelve un identificador de solicitud (RequestId) para la solicitud recibida que es única para el identificador de solicitud.</span><span class="sxs-lookup"><span data-stu-id="86cf6-118">[**HttpReceiveHttpRequest**](/windows/desktop/api/Http/nf-http-httpreceivehttprequest) also returns a request identifier (RequestId) for the received request that is unique to the request handle.</span></span>

> [!Note]  
> <span data-ttu-id="86cf6-119">Es responsabilidad de la aplicación examinar todos los encabezados de solicitud pertinentes, incluidos los encabezados de negociación de contenido, si se usan, y las solicitudes erróneas según corresponda según el contenido del encabezado.</span><span class="sxs-lookup"><span data-stu-id="86cf6-119">It is the application's responsibility to examine all relevant request headers, including content-negotiation headers if they are being used, and fail requests as appropriate based on header content.</span></span> <span data-ttu-id="86cf6-120">La API de servidor HTTP solo garantiza que cada línea de encabezado termine correctamente y no contenga caracteres no válidos.</span><span class="sxs-lookup"><span data-stu-id="86cf6-120">The HTTP Server API ensures only that each header line is properly terminated, and does not contain illegal characters.</span></span>

 

<span data-ttu-id="86cf6-121">Utilice la función [**HttpReceiveRequestEntityBody**](/windows/desktop/api/Http/nf-http-httpreceiverequestentitybody) con el identificador de la cola de solicitudes para recuperar las partes posteriores del cuerpo de la entidad de una solicitud, si hay alguna.</span><span class="sxs-lookup"><span data-stu-id="86cf6-121">Use the [**HttpReceiveRequestEntityBody**](/windows/desktop/api/Http/nf-http-httpreceiverequestentitybody) function with the request queue handle to retrieve subsequent portions of a request's entity body, if any.</span></span>

> [!Note]  
> <span data-ttu-id="86cf6-122">La API del servidor HTTP descodifica mensajes fragmentados en el lado de recepción, pero no realiza una codificación fragmentada en el lado de envío.</span><span class="sxs-lookup"><span data-stu-id="86cf6-122">The HTTP Server API decodes chunked messages on the receive side, but does not perform chunked encoding on the send side.</span></span> <span data-ttu-id="86cf6-123">Si se requiere fragmentación en el lado de envío, la aplicación debe implementarla.</span><span class="sxs-lookup"><span data-stu-id="86cf6-123">If chunking is required on the send side, the application must implement it.</span></span> <span data-ttu-id="86cf6-124">Para obtener más información acerca de la codificación fragmentada, consulte [RFC 2616](https://www.ietf.org/rfc/rfc2616.txt).</span><span class="sxs-lookup"><span data-stu-id="86cf6-124">For more information about chunked encoding, see [RFC 2616](https://www.ietf.org/rfc/rfc2616.txt).</span></span>

 

<span data-ttu-id="86cf6-125">Utilice la función [**HttpReceiveClientCertificate**](/windows/desktop/api/Http/nf-http-httpreceiveclientcertificate) con aplicaciones que sirven direcciones URL mediante un esquema seguro ("**https**") para recuperar la información del certificado del cliente de forma opcional.</span><span class="sxs-lookup"><span data-stu-id="86cf6-125">Use the [**HttpReceiveClientCertificate**](/windows/desktop/api/Http/nf-http-httpreceiveclientcertificate) function with applications that serve URLs by using a secure scheme ("**https**") to optionally retrieve the client's certificate information.</span></span>

<span data-ttu-id="86cf6-126">Las respuestas se envían con la función [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) .</span><span class="sxs-lookup"><span data-stu-id="86cf6-126">Responses are sent with the [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) function.</span></span> <span data-ttu-id="86cf6-127">Esta función usa el RequestId de la solicitud correspondiente para enviar la respuesta.</span><span class="sxs-lookup"><span data-stu-id="86cf6-127">This function uses the RequestId from the corresponding request to send the response.</span></span> <span data-ttu-id="86cf6-128">Se puede enviar una respuesta en varias llamadas API a lo largo del tiempo mediante una llamada a la función [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) con el RequestId de la solicitud recibida originalmente.</span><span class="sxs-lookup"><span data-stu-id="86cf6-128">A response can be sent in several API calls over time by calling the [**HttpSendResponseEntityBody**](/windows/desktop/api/Http/nf-http-httpsendresponseentitybody) function with the RequestId from the originally received request.</span></span>

> [!Note]  
> <span data-ttu-id="86cf6-129">De forma predeterminada, [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) usa "Microsoft-HTTPAPI/1.0" como el encabezado "Server:".</span><span class="sxs-lookup"><span data-stu-id="86cf6-129">By default, [**HttpSendHttpResponse**](/windows/desktop/api/Http/nf-http-httpsendhttpresponse) uses "Microsoft-HTTPAPI/1.0" as the "Server:" header.</span></span> <span data-ttu-id="86cf6-130">Si una aplicación especifica un encabezado de servidor en una respuesta, ese valor se coloca como la primera parte del encabezado del servidor, seguido de un espacio y, a continuación, "Microsoft-HTTPAPI/1.0".</span><span class="sxs-lookup"><span data-stu-id="86cf6-130">If an application specifies a server header in a response, that value is placed as the first part of the server header, followed by a space and then "Microsoft-HTTPAPI/1.0".</span></span>

 

<span data-ttu-id="86cf6-131">En general, la API del servidor HTTP oculta los detalles de la administración de conexiones y su establecimiento y desmontaje de las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="86cf6-131">In general, the HTTP Server API hides details of connection management and their establishment and teardown from applications.</span></span> <span data-ttu-id="86cf6-132">Sin embargo, una aplicación puede detectar opcionalmente la finalización de una conexión mediante una llamada a [**HttpWaitForDisconnect**](/windows/desktop/api/Http/nf-http-httpwaitfordisconnect).</span><span class="sxs-lookup"><span data-stu-id="86cf6-132">However, an application can optionally detect termination of a connection by calling [**HttpWaitForDisconnect**](/windows/desktop/api/Http/nf-http-httpwaitfordisconnect).</span></span>

<span data-ttu-id="86cf6-133">Las aplicaciones deben realizar la limpieza mediante los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="86cf6-133">Applications must clean-up by using the following steps:</span></span>

-   <span data-ttu-id="86cf6-134">Cuando la aplicación no escucha o responde a una dirección URL, la dirección URL se quita mediante la función [**HttpRemoveURL**](/windows/desktop/api/Http/nf-http-httpremoveurl) .</span><span class="sxs-lookup"><span data-stu-id="86cf6-134">When the application is not listening or responding to a URL, the URL is removed by using the [**HttpRemoveURL**](/windows/desktop/api/Http/nf-http-httpremoveurl) function.</span></span>
-   <span data-ttu-id="86cf6-135">Cuando la aplicación termine de usar la cola de solicitudes, cierre el identificador de la cola de solicitudes mediante la función [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) .</span><span class="sxs-lookup"><span data-stu-id="86cf6-135">When the application is finished using the request queue, close the request queue handle by using the [**CloseHandle**](/windows/desktop/api/handleapi/nf-handleapi-closehandle) function.</span></span>
-   <span data-ttu-id="86cf6-136">Cuando la aplicación termine de usar la API del servidor HTTP, llame a la función [**HttpTerminate**](/windows/desktop/api/Http/nf-http-httpterminate) .</span><span class="sxs-lookup"><span data-stu-id="86cf6-136">When the application is finished using the HTTP Server API, call the [**HttpTerminate**](/windows/desktop/api/Http/nf-http-httpterminate) function.</span></span>

 

 