---
description: Windows Installer contiene funcionalidad para mostrar un indicador de progreso en un cuadro de diálogo de presentación de acciones.
ms.assetid: cfc2d974-4f2d-4f52-9835-eab1dc091c9b
title: Crear un control ProgressBar
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b872ed2dd36fb8ed04ee48fd69e4680fce002a18
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103909077"
---
# <a name="authoring-a-progressbar-control"></a><span data-ttu-id="813d7-103">Crear un control ProgressBar</span><span class="sxs-lookup"><span data-stu-id="813d7-103">Authoring a ProgressBar Control</span></span>

<span data-ttu-id="813d7-104">Windows Installer contiene funcionalidad para mostrar un indicador de progreso en un cuadro de diálogo de presentación de acciones.</span><span class="sxs-lookup"><span data-stu-id="813d7-104">Windows Installer contains functionality to display a progress indicator in an action display dialog.</span></span> <span data-ttu-id="813d7-105">El [control ProgressBar](progressbar-control.md) representa gráficamente la instalación de componentes individuales e informa del tiempo total transcurrido con respecto al tiempo restante o del tiempo total aproximado restante hasta que se complete la instalación.</span><span class="sxs-lookup"><span data-stu-id="813d7-105">The [ProgressBar control](progressbar-control.md) graphically represents the installation of individual components and reports either the total time elapsed relative to time remaining or the approximate total time remaining until the installation is complete.</span></span>

<span data-ttu-id="813d7-106">Para determinar el tiempo total previsto para la instalación, el instalador realiza un seguimiento de los tics de progreso totales previstos por cada acción durante la generación del script de ejecución.</span><span class="sxs-lookup"><span data-stu-id="813d7-106">To determine the total time anticipated for the installation, the installer tracks the total progress ticks anticipated by each action during generation of the execution script.</span></span> <span data-ttu-id="813d7-107">Una vez completada la generación del script, se almacena el total del paso de progreso y comienza la instalación.</span><span class="sxs-lookup"><span data-stu-id="813d7-107">When script generation is complete, the progress tick total is stored and the installation begins.</span></span>

<span data-ttu-id="813d7-108">Los mensajes de progreso que detallan el número transcurrido de TICs de progreso se envían al controlador de mensajes activo a medida que se ejecuta cada acción en el script.</span><span class="sxs-lookup"><span data-stu-id="813d7-108">Progress messages detailing the elapsed number of progress ticks are sent to the active message handler as each action in the script is executed.</span></span> <span data-ttu-id="813d7-109">En cada mensaje de progreso, el instalador difunde un [SetProgress ControlEvent,](setprogress-controlevent.md) al cuadro de diálogo actualmente activo.</span><span class="sxs-lookup"><span data-stu-id="813d7-109">On each progress message, the installer broadcasts a [SetProgress ControlEvent](setprogress-controlevent.md) to the currently active dialog box.</span></span> <span data-ttu-id="813d7-110">La secuencia de la interfaz de usuario debe crearse para crear el cuadro de diálogo de visualización de la acción durante la ejecución del script para recibir los mensajes de ControlEvent, de SetProgress desde el instalador.</span><span class="sxs-lookup"><span data-stu-id="813d7-110">The UI sequence should be authored to create the action display dialog box during script execution to receive the SetProgress ControlEvent messages from the installer.</span></span>

<span data-ttu-id="813d7-111">Cuando el cuadro de diálogo de visualización de la acción recibe un ControlEvent, SetProgress, comprueba la [tabla EventMapping](eventmapping-table.md) de los controles que se suscriben a la ControlEvent,.</span><span class="sxs-lookup"><span data-stu-id="813d7-111">When the action display dialog box receives a SetProgress ControlEvent, it checks the [EventMapping table](eventmapping-table.md) for any controls subscribing to the ControlEvent.</span></span> <span data-ttu-id="813d7-112">El control ProgressBar del cuadro de diálogo Mostrar acción se suscribe a con el atributo control de progreso especificado en la columna atributos.</span><span class="sxs-lookup"><span data-stu-id="813d7-112">The ProgressBar control on the action display dialog box is subscribed to with the Progress control attribute specified in the Attributes column.</span></span> <span data-ttu-id="813d7-113">El atributo control de progreso especifica que el control ProgressBar pasará los valores "ticksSoFar" y "totalTicks" junto con SetProgress ControlEvent,.</span><span class="sxs-lookup"><span data-stu-id="813d7-113">The Progress Control attribute specifies that the ProgressBar control will be passed "ticksSoFar" and "totalTicks" values along with the SetProgress ControlEvent.</span></span> <span data-ttu-id="813d7-114">El control de barra de progreso utiliza esta información para avanzar la barra gráfica de izquierda a derecha para una instalación y de derecha a izquierda para una operación de [reversión](rollback-installation.md) .</span><span class="sxs-lookup"><span data-stu-id="813d7-114">The progress bar control uses this information to advance the graphical bar from left to right for an installation and from right to left for a [rollback](rollback-installation.md) operation.</span></span>

<span data-ttu-id="813d7-115">Además, el instalador difunde un [ControlEvent, de TimeRemaining](timeremaining-controlevent.md) en cada mensaje de progreso.</span><span class="sxs-lookup"><span data-stu-id="813d7-115">In addition, the installer broadcasts a [TimeRemaining ControlEvent](timeremaining-controlevent.md) on each progress message.</span></span> <span data-ttu-id="813d7-116">El tiempo total restante para la instalación se determina calculando primero la velocidad de ejecución, que es el número total de TICs transcurridos dividido por el tiempo total transcurrido desde que comenzó la instalación.</span><span class="sxs-lookup"><span data-stu-id="813d7-116">The total time remaining for the installation is determined by first calculating the execution rate, which is the total number of ticks elapsed divided by the total time since the installation began.</span></span> <span data-ttu-id="813d7-117">Los tics totales que quedan divididos por la tasa de ejecución proporcionan el tiempo aproximado restante.</span><span class="sxs-lookup"><span data-stu-id="813d7-117">The total ticks remaining divided by the execution rate gives the approximate time remaining.</span></span>

<span data-ttu-id="813d7-118">Cuando el cuadro de diálogo Mostrar acción recibe el ControlEvent, TimeRemaining, vuelve a buscar en la tabla EventMapping los controles que están suscritos.</span><span class="sxs-lookup"><span data-stu-id="813d7-118">When the action display dialog box receives the TimeRemaining ControlEvent, it again looks in the EventMapping table for any controls that are subscribed.</span></span> <span data-ttu-id="813d7-119">Para mostrar el tiempo restante, se debe suscribir un [control de texto](text-control.md) a TimeRemaining ControlEvent, con el atributo de [control TimeRemaining](timeremaining-control-attribute.md) especificado en la columna Attributes.</span><span class="sxs-lookup"><span data-stu-id="813d7-119">In order to display the time remaining, a [Text control](text-control.md) must be subscribed to the TimeRemaining ControlEvent with the [TimeRemaining control attribute](timeremaining-control-attribute.md) specified in the Attributes column.</span></span>

<span data-ttu-id="813d7-120">El control de texto suscrito consulta la [tabla UIText](uitext-table.md) para obtener una cadena de plantilla con parámetros denominada "TimeRemaining".</span><span class="sxs-lookup"><span data-stu-id="813d7-120">The subscribed Text control queries the [UIText table](uitext-table.md) for a parameterized template string named "TimeRemaining".</span></span> <span data-ttu-id="813d7-121">Esta cadena tiene dos parámetros, \[ 1 \] para minutos y \[ 2 \] para segundos.</span><span class="sxs-lookup"><span data-stu-id="813d7-121">This string has two parameters, \[1\] for minutes, and \[2\] for seconds.</span></span> <span data-ttu-id="813d7-122">El control de texto convierte cada valor en minutos y segundos, evalúa la cadena de plantilla TimeRemaining y actualiza el control de texto con la nueva información.</span><span class="sxs-lookup"><span data-stu-id="813d7-122">The Text control converts each value to minutes and seconds, evaluates the TimeRemaining template string, and updates the text control with the new information.</span></span>

<span data-ttu-id="813d7-123">Si el nivel de presentación de la interfaz de usuario se establece en básico o inferior, el instalador muestra un cuadro de diálogo predeterminado que contiene una barra de progreso y un campo de texto TimeRemaining.</span><span class="sxs-lookup"><span data-stu-id="813d7-123">If the UI display level is set to basic or lower, the installer displays a default dialog box containing a progress bar and TimeRemaining text field.</span></span> <span data-ttu-id="813d7-124">Para obtener más información, consulte niveles de la [interfaz de usuario](user-interface-levels.md).</span><span class="sxs-lookup"><span data-stu-id="813d7-124">For more information, see [User Interface Levels](user-interface-levels.md).</span></span>

 

 



