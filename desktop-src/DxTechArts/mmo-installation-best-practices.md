---
title: Prácticas recomendadas de instalación para juegos en línea multijugador masivo
description: En este artículo se describe cómo crear una cadena de diseño de confianza para la instalación de cliente de juegos de varios jugadores en línea (MMOG) y los sistemas de actualización de juegos personalizados que funcionan bien con Windows y el modelo de seguridad de Windows Vista y Windows 7.
ms.assetid: b719cff7-97e8-5e0a-9c91-3bd8178da7c8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e81003a434b830f046c29d606355104fe618d1f5
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104077986"
---
# <a name="installation-best-practices-for-massively-multiplayer-online-games"></a><span data-ttu-id="c3021-103">Prácticas recomendadas de instalación para juegos en línea multijugador masivo</span><span class="sxs-lookup"><span data-stu-id="c3021-103">Installation Best Practices for Massively Multiplayer Online Games</span></span>

<span data-ttu-id="c3021-104">En este artículo se describe cómo crear una cadena de diseño de confianza para la instalación de cliente de juegos de varios jugadores en línea (MMOG) y los sistemas de actualización de juegos personalizados que funcionan bien con Windows y el modelo de seguridad de Windows Vista y Windows 7.</span><span class="sxs-lookup"><span data-stu-id="c3021-104">This article describes creating a chain of trust design for Massively Multiplayer Online Games (MMOG) client installation and custom game update systems that work well with Windows and the security model of Windows Vista and Windows 7.</span></span> <span data-ttu-id="c3021-105">El enfoque está diseñado para habilitar la revisión de los títulos de MMOG al admitir las cuentas de usuario estándar, que tienen acceso restringido a la unidad de disco duro y al registro del sistema.</span><span class="sxs-lookup"><span data-stu-id="c3021-105">The approach is designed to enable patching of MMOG titles while supporting standard user accounts, which have restricted access to the hard drive and system registry.</span></span>

-   [<span data-ttu-id="c3021-106">¿Por qué los clientes de MMOG tienen requisitos diferentes para los juegos de compra minorista tradicionales?</span><span class="sxs-lookup"><span data-stu-id="c3021-106">Why MMOG Clients Have Different Requirements to Traditional Retail Purchased Games</span></span>](#why-mmog-clients-have-different-requirements-to-traditional-retail-purchased-games)
-   [<span data-ttu-id="c3021-107">Información general de un enfoque de cadena de confianza</span><span class="sxs-lookup"><span data-stu-id="c3021-107">Overview of a Chain of Trust Approach</span></span>](#overview-of-a-chain-of-trust-approach)
-   [<span data-ttu-id="c3021-108">¿Por qué se valida todo en el servidor, ¿por qué debería preocuparse si el cliente se vuelve a atacar?</span><span class="sxs-lookup"><span data-stu-id="c3021-108">Everything is validated on the server, why should I worry if my client gets hacked?</span></span>](#everything-is-validated-on-the-server-why-should-i-worry-if-my-client-gets-hacked)
-   [<span data-ttu-id="c3021-109">Construcción de la aplicación de cargador de Trust-Worthy</span><span class="sxs-lookup"><span data-stu-id="c3021-109">Construction of the Trust-Worthy Loader Application</span></span>](#construction-of-the-trust-worthy-loader-application)
    -   [<span data-ttu-id="c3021-110">Lectura en segundo plano</span><span class="sxs-lookup"><span data-stu-id="c3021-110">Background Reading</span></span>](#background-reading)
    -   [<span data-ttu-id="c3021-111">Instalación del cargador y el aplicador de confianza</span><span class="sxs-lookup"><span data-stu-id="c3021-111">Installation of the Trusted Loader and Patcher</span></span>](#installation-of-the-trusted-loader-and-patcher)
    -   [<span data-ttu-id="c3021-112">Instalación de los archivos ejecutables del juego, los archivos dll y los datos</span><span class="sxs-lookup"><span data-stu-id="c3021-112">Installation of the Game Executables, DLLs, and Data</span></span>](#installation-of-the-game-executables-dlls-and-data)
    -   [<span data-ttu-id="c3021-113">Código de modificación de lista de Access Control</span><span class="sxs-lookup"><span data-stu-id="c3021-113">Access Control List Modification Code</span></span>](#access-control-list-modification-code)
    -   [<span data-ttu-id="c3021-114">Instalaciones para usuarios avanzados</span><span class="sxs-lookup"><span data-stu-id="c3021-114">Installations for Advanced Users</span></span>](#installations-for-advanced-users)
    -   [<span data-ttu-id="c3021-115">Comprobación del cargador de confianza</span><span class="sxs-lookup"><span data-stu-id="c3021-115">The Loader's Verification of Trust</span></span>](#the-loaders-verification-of-trust)
    -   [<span data-ttu-id="c3021-116">Validación de datos</span><span class="sxs-lookup"><span data-stu-id="c3021-116">Data Validation</span></span>](#data-validation)

## <a name="why-mmog-clients-have-different-requirements-to-traditional-retail-purchased-games"></a><span data-ttu-id="c3021-117">¿Por qué los clientes de MMOG tienen requisitos diferentes para los juegos de compra minorista tradicionales?</span><span class="sxs-lookup"><span data-stu-id="c3021-117">Why MMOG Clients Have Different Requirements to Traditional Retail Purchased Games</span></span>

<span data-ttu-id="c3021-118">La naturaleza constantemente conectada y en constante evolución de MMOGs hace que sea un requisito fundamental proporcionar actualizaciones periódicas del código de cliente y el contenido para corregir las vulnerabilidades de seguridad y ampliar la experiencia de juego.</span><span class="sxs-lookup"><span data-stu-id="c3021-118">The constantly connected and evolving nature of MMOGs makes it a fundamental requirement to provide regular updates of client code and content to fix security vulnerabilities and extend the gameplay experience.</span></span> <span data-ttu-id="c3021-119">Con la posibilidad de que se produzcan actualizaciones casi diarias, el escenario MMOG requiere una administración cuidadosa para garantizar una experiencia de usuario sencilla.</span><span class="sxs-lookup"><span data-stu-id="c3021-119">With the potential for almost daily updates, the MMOG scenario requires careful management to ensure a user friendly experience.</span></span> <span data-ttu-id="c3021-120">Esto difiere del modelo de compra minorista tradicional en el que se puede proporcionar un pequeño número de revisiones cerca de la fecha de envío comercial del producto.</span><span class="sxs-lookup"><span data-stu-id="c3021-120">This differs from the traditional retail purchase model where a small number of patches may be provided close to the retail ship date of the product.</span></span> <span data-ttu-id="c3021-121">El Windows Installer tecnología de aplicación de revisiones de usuarios limitada que se proporciona con el sistema operativo se ha diseñado para controlar un número reducido de revisiones de la aplicación, y no la gran cantidad y la frecuencia alta que necesita MMOGs.</span><span class="sxs-lookup"><span data-stu-id="c3021-121">The Windows Installer limited user patching technology provided with the operating system is designed to handle small numbers of application patches, and not the large quantity and high frequency needed by MMOGs.</span></span> <span data-ttu-id="c3021-122">Por lo tanto, a menudo es necesario que los sistemas de revisión personalizados se desarrollen para satisfacer las necesidades de MMOGs, incluidos los requisitos especiales específicos de la MMOG en particular que se está desarrollando.</span><span class="sxs-lookup"><span data-stu-id="c3021-122">It is therefore often necessary for custom patching systems to be developed to address the needs of MMOGs, including any special requirements specific to the particular MMOG being developed.</span></span>

<span data-ttu-id="c3021-123">Dado que hay muchos equipos conectados a Internet, Windows Vista y Windows 7 tienen restricciones de seguridad y medidas de seguridad más estrictas para los usuarios, lo que limita el acceso que tienen las aplicaciones a diversas áreas del disco duro.</span><span class="sxs-lookup"><span data-stu-id="c3021-123">Because so many computers are connected to the Internet, Windows Vista and Windows 7 have tougher security restrictions and safeguards for users, which limit the access that applications have to various areas of the hard drive.</span></span> <span data-ttu-id="c3021-124">A diferencia de Windows XP, estas restricciones están habilitadas para el modo predeterminado para las cuentas de usuario.</span><span class="sxs-lookup"><span data-stu-id="c3021-124">Unlike Windows XP, these restrictions are enabled for the default mode for user accounts.</span></span> <span data-ttu-id="c3021-125">Estas restricciones se deben tener en cuenta al diseñar el diseño de un juego, un ejecutable y datos, y su sistema de aplicación de revisiones asociado.</span><span class="sxs-lookup"><span data-stu-id="c3021-125">These restrictions must be taken into account when designing the layout of a game, executable and data, and its associated patching system.</span></span> <span data-ttu-id="c3021-126">Para obtener más información sobre las medidas de seguridad proporcionadas por el sistema operativo, consulte [control de cuentas de usuario para desarrolladores de juegos](/windows/desktop/DxTechArts/user-account-control-for-game-developers).</span><span class="sxs-lookup"><span data-stu-id="c3021-126">For more details about the security measures provided by the operating system, see [User Account Control for Game Developers](/windows/desktop/DxTechArts/user-account-control-for-game-developers).</span></span>

## <a name="overview-of-a-chain-of-trust-approach"></a><span data-ttu-id="c3021-127">Información general de un enfoque de cadena de confianza</span><span class="sxs-lookup"><span data-stu-id="c3021-127">Overview of a Chain of Trust Approach</span></span>

<span data-ttu-id="c3021-128">El enfoque de actualización personalizada que se presenta en esta nota del producto se basa en la instalación de una aplicación de cargador confiable en la carpeta archivos de programa protegidos, a la vez que mantiene los archivos ejecutables y los datos de los juegos en un área accesible para todo el usuario.</span><span class="sxs-lookup"><span data-stu-id="c3021-128">The custom update approach presented in this whitepaper is based upon having a trustworthy loader application installed to the protected Program Files folder while keeping the games executable files and data in a shared all-user-accessible area.</span></span> <span data-ttu-id="c3021-129">Una cadena de confianza comienza con el cargador que realiza comprobaciones de validez en los archivos binarios y datos del juego antes del inicio.</span><span class="sxs-lookup"><span data-stu-id="c3021-129">A chain of trust starts with the loader which performs validity checks on the game binaries and data before launch.</span></span>

![la cadena de confianza comienza con un cargador de confianza](images/mmo-installation-best-practices-01.gif)

<span data-ttu-id="c3021-131">El cargador de confianza debe tener suficiente lógica para poder comprobar que el ejecutable del juego y otros archivos binarios no se han manipulado antes de iniciar el juego.</span><span class="sxs-lookup"><span data-stu-id="c3021-131">The trustworthy loader needs to have enough logic to be able to verify that the game's executable and other binaries have not been tampered with before launching the game.</span></span> <span data-ttu-id="c3021-132">El cargador también puede comprobar los datos del juego tantas veces como sea necesario. sin embargo, el tamaño de los datos del juego suele ser demasiado grande para permitir que se compruebe cada vez en un solo paso.</span><span class="sxs-lookup"><span data-stu-id="c3021-132">The loader may also verify game data as often as needed, however, the size of game data is usually too large to allow it be checked every time in a single pass.</span></span> <span data-ttu-id="c3021-133">Un enfoque alternativo es usar un patrón de muestreo que garantice que la comprobación del conjunto de datos completo se produce durante un período de tiempo prolongado.</span><span class="sxs-lookup"><span data-stu-id="c3021-133">An alternative approach is to use a sampling pattern which ensures that verification of the entire data set occurs over an extended period of time.</span></span> <span data-ttu-id="c3021-134">La aplicación de cargador puede contener un motor de revisión de juegos, que proporciona un método digno de confianza por para integrar las actualizaciones con el juego instalado.</span><span class="sxs-lookup"><span data-stu-id="c3021-134">The loader application may contain a game patching engine, which provides a trust worthy method by to integrate updates with the installed game.</span></span>

## <a name="everything-is-validated-on-the-server-why-should-i-worry-if-my-client-gets-hacked"></a><span data-ttu-id="c3021-135">¿Por qué se valida todo en el servidor, ¿por qué debería preocuparse si el cliente se vuelve a atacar?</span><span class="sxs-lookup"><span data-stu-id="c3021-135">Everything is validated on the server, why should I worry if my client gets hacked?</span></span>

<span data-ttu-id="c3021-136">No es posible confiar en que el cliente no se ha puesto en peligro; por lo tanto, es común que los servidores de MMOG validen todos los datos recibidos del cliente.</span><span class="sxs-lookup"><span data-stu-id="c3021-136">It is impossible to trust that the client has not been compromised; therefore it is common for MMOG servers to validate all data received from the client.</span></span> <span data-ttu-id="c3021-137">Aunque este procesamiento puede identificar a los clientes de juegos en peligro o a través del universo del juego, el servidor no puede identificar fácilmente todos los problemas a los que se puede exponer el cliente del juego.</span><span class="sxs-lookup"><span data-stu-id="c3021-137">While this processing can identify compromised or cheating game clients within the game universe, the server cannot easily identify all issues the game client can be exposed to.</span></span> <span data-ttu-id="c3021-138">Es importante reforzar la protección frente a los hackers que desean usar su cliente como plataforma para los ataques en el servicio, otros usuarios o incluso un vector para atacar los propios equipos cliente.</span><span class="sxs-lookup"><span data-stu-id="c3021-138">It's important to strengthen protection from hackers who wish to use your client as a platform for attacks on your service, other users, or even simply as a vector for attacking the client machines themselves.</span></span> <span data-ttu-id="c3021-139">La aplicación de técnicas de firma de código y comprobación de datos puede ayudar a detectar los clientes en peligro antes de que se ejecuten.</span><span class="sxs-lookup"><span data-stu-id="c3021-139">The application of code signing and data verification techniques can help detect compromised clients before they get executed.</span></span> <span data-ttu-id="c3021-140">Puesto que el mecanismo de aplicación de revisiones requiere exponer archivos ejecutables y binarios de DLL que no están protegidos por los permisos de solo lectura estándar en los archivos de programa, la validación de estos archivos antes de iniciarlos es importante para la seguridad global del sistema.</span><span class="sxs-lookup"><span data-stu-id="c3021-140">Since the patching mechanism requires exposing executable and DLL binaries that are not protected by the standard read-only permissions on Program Files, validating these files before launching them is important for overall system security.</span></span>

<span data-ttu-id="c3021-141">Este modelo no intenta tratar con el escenario de usuario de administrador malintencionado en el que el propio cargador podría quedar en peligro, sino que se centra en la protección de los usuarios estándar para que ejecuten código alterado accidentalmente.</span><span class="sxs-lookup"><span data-stu-id="c3021-141">This model does not attempt to deal with the malicious admin user scenario where the loader itself could become compromised but focuses on protecting standard users from accidentally running tampered code.</span></span> <span data-ttu-id="c3021-142">Las técnicas tradicionales de validación de cliente de servidor son, en realidad, la única mitigación posible para los administradores de sistemas cliente malintencionados.</span><span class="sxs-lookup"><span data-stu-id="c3021-142">Traditional server-client validation techniques are really the only possible mitigation for malicious client system administrators.</span></span>

## <a name="construction-of-the-trust-worthy-loader-application"></a><span data-ttu-id="c3021-143">Construcción de la aplicación de cargador de Trust-Worthy</span><span class="sxs-lookup"><span data-stu-id="c3021-143">Construction of the Trust-Worthy Loader Application</span></span>

### <a name="background-reading"></a><span data-ttu-id="c3021-144">Lectura en segundo plano</span><span class="sxs-lookup"><span data-stu-id="c3021-144">Background Reading</span></span>

<span data-ttu-id="c3021-145">Los lectores deben familiarizarse con la siguiente documentación, que proporciona detalles de la tecnología de base para garantizar las prácticas recomendadas para la confianza basada en software.</span><span class="sxs-lookup"><span data-stu-id="c3021-145">Readers should familiarize themselves with the following documentation, which provides details of the foundation technology for ensuring best practice for software based trust.</span></span>

<dl> <dt>

<span data-ttu-id="c3021-146"><span id="Code_Signing"></span><span id="code_signing"></span><span id="CODE_SIGNING"></span>Firma de código</span><span class="sxs-lookup"><span data-stu-id="c3021-146"><span id="Code_Signing"></span><span id="code_signing"></span><span id="CODE_SIGNING"></span>Code Signing</span></span>
</dt> <dd>

[<span data-ttu-id="c3021-147">Firma de Authenticode para desarrolladores de juegos</span><span class="sxs-lookup"><span data-stu-id="c3021-147">Authenticode Signing for Game Developers</span></span>](/windows/desktop/DxTechArts/authenticode-signing-for-game-developers)

</dd> <dt>

<span data-ttu-id="c3021-148"><span id="SignTool"></span><span id="signtool"></span><span id="SIGNTOOL"></span>SignTool</span><span class="sxs-lookup"><span data-stu-id="c3021-148"><span id="SignTool"></span><span id="signtool"></span><span id="SIGNTOOL"></span>SignTool</span></span>
</dt> <dd>

<span data-ttu-id="c3021-149">[SignTool](/windows/desktop/SecCrypto/signtool) en MSDN</span><span class="sxs-lookup"><span data-stu-id="c3021-149">[SignTool](/windows/desktop/SecCrypto/signtool) on MSDN</span></span>

</dd> </dl>

<span data-ttu-id="c3021-150">En la siguiente sección se detallan las API que se deben usar para construir la aplicación del cargador, que admiten el diseño del disco para la instalación y comprobación de la comprobación de confianza.</span><span class="sxs-lookup"><span data-stu-id="c3021-150">The following section details the APIs that should be used to construct the loader application, which support disc layout for install and verification of trust checking.</span></span>

### <a name="installation-of-the-trusted-loader-and-patcher"></a><span data-ttu-id="c3021-151">Instalación del cargador y el aplicador de confianza</span><span class="sxs-lookup"><span data-stu-id="c3021-151">Installation of the Trusted Loader and Patcher</span></span>

<span data-ttu-id="c3021-152">El cargador de confianza y la versión base de la utilidad de revisión deben instalarse en la carpeta archivos de programa protegidos en la unidad de disco duro, al igual que en las instalaciones tradicionales.</span><span class="sxs-lookup"><span data-stu-id="c3021-152">The trusted loader and base version of the patcher utility should be installed under the protected Program Files folder on the HDD just as in traditional installs.</span></span> <span data-ttu-id="c3021-153">La instalación y aplicación de revisiones de la aplicación del cargador requiere derechos de administrador, por lo que es importante minimizar la frecuencia de actualización del cargador para asegurarse de que los usuarios finales no necesitan elevar con frecuencia, aunque se podría usar Windows Installer revisión de usuario limitada para evitar la elevación de las revisiones del cargador.</span><span class="sxs-lookup"><span data-stu-id="c3021-153">Installation and patching of the loader application requires Admin rights so it is important to minimize the frequency of update for the loader to ensure end users do not need to elevate often, although Windows Installer limited user patching could be used to avoid elevation for loader patches.</span></span>

<span data-ttu-id="c3021-154">Vea el artículo aplicar revisiones a software de juegos en Windows XP, Windows Vista y Windows 7.</span><span class="sxs-lookup"><span data-stu-id="c3021-154">See the article Patching Game Software in Windows XP, Windows Vista, and Windows 7.</span></span>

### <a name="installation-of-the-game-executables-dlls-and-data"></a><span data-ttu-id="c3021-155">Instalación de los archivos ejecutables del juego, los archivos dll y los datos</span><span class="sxs-lookup"><span data-stu-id="c3021-155">Installation of the Game Executables, DLLs, and Data</span></span>

<span data-ttu-id="c3021-156">Con el fin de facilitar las actualizaciones de usuario estándar del juego sin privilegios administrativos, los archivos ejecutables, dll y datos de los juegos deben instalarse en un área del disco duro que tenga acceso de escritura para todos los usuarios.</span><span class="sxs-lookup"><span data-stu-id="c3021-156">In order to facilitate Standard User updates of the game without administrative privilege, the games executable, DLLs, and data must be installed to an area of the hard disk that is write accessible for all users.</span></span> <span data-ttu-id="c3021-157">El sistema operativo proporciona un área "todos los datos de la aplicación" que se puede usar como ubicación predeterminada para la instalación.</span><span class="sxs-lookup"><span data-stu-id="c3021-157">The operating system provides an "All Users Application Data" area which can be used as the default location for installation.</span></span> <span data-ttu-id="c3021-158">Se debe usar [**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) con la \_ clave AppData común de CSIDL \_ para determinar la ruta de acceso de archivo para esta área.</span><span class="sxs-lookup"><span data-stu-id="c3021-158">[**SHGetFolderPath**](/windows/desktop/api/shlobj_core/nf-shlobj_core-shgetfolderpatha) should be used with the CSIDL\_COMMON\_APPDATA key to determine the file path for this area.</span></span> <span data-ttu-id="c3021-159">Es importante que no se realice ninguna suposición sobre la ruta de acceso en la que se devuelve esta clave, ya que puede ser configurable por el usuario.</span><span class="sxs-lookup"><span data-stu-id="c3021-159">It is important that no assumptions be made about the path to which this key returns as it may be user configurable.</span></span>

<span data-ttu-id="c3021-160">La instalación debe modificar o administrar los permisos de la carpeta para lograr el acceso de escritura todo el usuario necesario para actualizar el título.</span><span class="sxs-lookup"><span data-stu-id="c3021-160">The installation needs to alter or manage the folder permissions in order to achieve the all-user-shared-write access needed for updating the title.</span></span> <span data-ttu-id="c3021-161">Con los permisos correctos, la funcionalidad del actualizador de juegos del programa Loader puede revisar fácilmente el juego sin necesidad de tener privilegios especiales de cualquier cuenta de usuarios, incluidas las horas en las que los usuarios estándar lo inician.</span><span class="sxs-lookup"><span data-stu-id="c3021-161">With the correct permissions, the game updater functionality of the loader program can easily patch the game without the need for special privilege from any users account including times when launched by standard users.</span></span>

### <a name="access-control-list-modification-code"></a><span data-ttu-id="c3021-162">Código de modificación de lista de Access Control</span><span class="sxs-lookup"><span data-stu-id="c3021-162">Access Control List Modification Code</span></span>

<span data-ttu-id="c3021-163">En el caso de Windows XP, deberá ejecutar código para cambiar la lista de control de acceso (ACL) manualmente. esta es una función de ejemplo que muestra cómo hacerlo:</span><span class="sxs-lookup"><span data-stu-id="c3021-163">For Windows XP, you will need to execute code to change the access control list (ACL) manually, here is an example function that demonstrates how to do this:</span></span>

``` syntax
HRESULT ChangeACLtoAllowUserRW( WCHAR* strDir )
{
    EXPLICIT_ACCESS explicitaccess;
    PACL NewAcl = NULL;
    DWORD dwError;

    BuildExplicitAccessWithName( &explicitaccess, L"BUILTIN\\Users",
                                 GENERIC_ALL, GRANT_ACCESS,
                                 SUB_CONTAINERS_AND_OBJECTS_INHERIT );
                                 
    dwError = SetEntriesInAcl( 1, &explicitaccess, NULL, &NewAcl );
    if( dwError == ERROR_SUCCESS) 
    {
        dwError = SetNamedSecurityInfo( strDir, SE_FILE_OBJECT,
                                        DACL_SECURITY_INFORMATION,
                                        NULL, NULL, NewAcl, NULL );
        if( dwError == ERROR_SUCCESS)
        {
            if( NewAcl != NULL ) AccFree( NewAcl );
            return S_OK;
        }
    }

    if( NewAcl != NULL ) AccFree( NewAcl );
    return E_FAIL;
}
```

<span data-ttu-id="c3021-164">Este ejemplo de código también funcionará con Windows Vista y Windows 7; sin embargo, también proporcionan la utilidad de línea de comandos icacls para editar las ACL de archivos que puede usar en su lugar.</span><span class="sxs-lookup"><span data-stu-id="c3021-164">This code example will also work for Windows Vista and Windows 7; however, they also provide the command line utility icacls to edit file ACLS which you may choose to use instead.</span></span>

<span data-ttu-id="c3021-165">La herramienta proporciona una ayuda detallada cuando se ejecuta, pero un uso de ejemplo para la herramienta es:</span><span class="sxs-lookup"><span data-stu-id="c3021-165">The tool provides a detailed help when executed however, one example usage for the tool is:</span></span>

``` syntax
icacls "C:\Users\All Users\Game" /grant Rex:(D,WDAC)
```

<span data-ttu-id="c3021-166">Este uso concederá al usuario los permisos eliminar y escribir DAC en la carpeta Game almacenada en las áreas todos los usuarios de la unidad de disco duro.</span><span class="sxs-lookup"><span data-stu-id="c3021-166">This usage will grant the user Rex Delete and Write DAC permissions to game folder stored in the All Users areas of the hard drive.</span></span>

### <a name="installations-for-advanced-users"></a><span data-ttu-id="c3021-167">Instalaciones para usuarios avanzados</span><span class="sxs-lookup"><span data-stu-id="c3021-167">Installations for Advanced Users</span></span>

<span data-ttu-id="c3021-168">En escenarios de instalación de usuarios avanzados, es posible que un usuario desee especificar manualmente la ruta de instalación de juegos.</span><span class="sxs-lookup"><span data-stu-id="c3021-168">For advanced user installation scenarios, a user may want to specify the games installation path manually.</span></span> <span data-ttu-id="c3021-169">La selección de directorio se debe restringir a una parte externa de los archivos de programa para asegurarse de que la carpeta se encuentra en un área verdaderamente compartida del disco duro.</span><span class="sxs-lookup"><span data-stu-id="c3021-169">The directory selection should be restricted to one outside of program files to ensure the folder is in a truly sharable area of the hard drive.</span></span> <span data-ttu-id="c3021-170">La ruta de acceso seleccionada por el usuario solo se debe usar para el archivo exe de juegos y los datos, ya que el cargador de juegos y el programa de instalación de revisión siempre deben instalarse en la carpeta archivos de programa seguros para mejorar la seguridad.</span><span class="sxs-lookup"><span data-stu-id="c3021-170">The user selected path should only be used for the games exes and data as the game Loader and Patcher exes should always be installed under the secure Program Files folder for better security.</span></span>

### <a name="the-loaders-verification-of-trust"></a><span data-ttu-id="c3021-171">Comprobación del cargador de confianza</span><span class="sxs-lookup"><span data-stu-id="c3021-171">The Loader's Verification of Trust</span></span>

<span data-ttu-id="c3021-172">Windows proporciona la función [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) para comprobar la validez del código firmado y se basa en los servicios criptográficos del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="c3021-172">Windows provides the [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) function for checking the validity of signed code and is based on the cryptographic services in the operating system.</span></span> <span data-ttu-id="c3021-173">La función está totalmente documentada en MSDN: función **WinVerifyTrust** .</span><span class="sxs-lookup"><span data-stu-id="c3021-173">The function is fully documented on MSDN: **WinVerifyTrust** Function.</span></span>

<span data-ttu-id="c3021-174">En el siguiente programa de ejemplo de MSDN se detalla el uso de la función para determinar si un ejecutable del programa está firmado con un certificado válido: [ejemplo C programa: comprobar la firma de un archivo PE](/windows/desktop/SecCrypto/example-c-program--verifying-the-signature-of-a-pe-file).</span><span class="sxs-lookup"><span data-stu-id="c3021-174">The following example program on MSDN details the use of the function to determine whether a program executable is signed with a valid certificate: [Example C Program: Verifying the Signature of a PE File](/windows/desktop/SecCrypto/example-c-program--verifying-the-signature-of-a-pe-file).</span></span>

<span data-ttu-id="c3021-175">Con el fin de comprobar que el ejecutable del juego firmado es de confianza para ejecutarse desde dentro del cargador, la acción de comprobación genérica será suficiente:</span><span class="sxs-lookup"><span data-stu-id="c3021-175">For the purposes of verifying that the signed game executable is trustworthy to be executed from within the loader, the Generic Verify action will suffice:</span></span>

<dl> <dt>

<span data-ttu-id="c3021-176"><span id="Value"></span><span id="value"></span><span id="VALUE"></span>Valor</span><span class="sxs-lookup"><span data-stu-id="c3021-176"><span id="Value"></span><span id="value"></span><span id="VALUE"></span>Value</span></span>
</dt> <dd>

<span data-ttu-id="c3021-177">\_Acción wintrust \_ genérica \_ Verify \_ V2</span><span class="sxs-lookup"><span data-stu-id="c3021-177">WINTRUST\_ACTION\_GENERIC\_VERIFY\_V2</span></span>

</dd> <dt>

<span data-ttu-id="c3021-178"><span id="Meaning"></span><span id="meaning"></span><span id="MEANING"></span>Al</span><span class="sxs-lookup"><span data-stu-id="c3021-178"><span id="Meaning"></span><span id="meaning"></span><span id="MEANING"></span>Meaning</span></span>
</dt> <dd>

<span data-ttu-id="c3021-179">Compruebe un archivo o un objeto mediante el proveedor de directivas de Authenticode.</span><span class="sxs-lookup"><span data-stu-id="c3021-179">Verify a file or object using the Authenticode policy provider.</span></span>

</dd> </dl>

<span data-ttu-id="c3021-180">La función toma un argumento de la estructura de entrada que contiene información que el proveedor de confianza necesita para procesar la acción especificada.</span><span class="sxs-lookup"><span data-stu-id="c3021-180">The function takes an input structure argument which contains information that the trust provider needs to process the specified action.</span></span> <span data-ttu-id="c3021-181">Normalmente, como en el caso del ejemplo anterior, la estructura incluye información que identifica el objeto que el proveedor de confianza debe evaluar.</span><span class="sxs-lookup"><span data-stu-id="c3021-181">Typically, as in the preceding example case, the structure includes information that identifies the object that the trust provider must evaluate.</span></span>

<span data-ttu-id="c3021-182">El formato de la estructura es específico del identificador de la acción.</span><span class="sxs-lookup"><span data-stu-id="c3021-182">The format of the structure is specific to the action identifier.</span></span> <span data-ttu-id="c3021-183">En el siguiente tema de MSDN se detalla la estructura de ejemplo de la estructura de [**\_ datos**](/windows/desktop/api/wintrust/ns-wintrust-wintrust_data) del proveedor de wintrust: wintrust.</span><span class="sxs-lookup"><span data-stu-id="c3021-183">The following topic on MSDN details the example structure for the WinTrust provider: [**WINTRUST\_DATA**](/windows/desktop/api/wintrust/ns-wintrust-wintrust_data) Structure.</span></span>

<span data-ttu-id="c3021-184">Si el proveedor de confianza comprueba que el sujeto es de confianza para la acción especificada, el valor devuelto es cero.</span><span class="sxs-lookup"><span data-stu-id="c3021-184">If the trust provider verifies that the subject is trusted for the specified action, the return value is zero.</span></span> <span data-ttu-id="c3021-185">Ningún otro valor además de cero debe considerarse como una devolución correcta.</span><span class="sxs-lookup"><span data-stu-id="c3021-185">No other value besides zero should be considered a successful return.</span></span>

### <a name="data-validation"></a><span data-ttu-id="c3021-186">Validación de datos</span><span class="sxs-lookup"><span data-stu-id="c3021-186">Data Validation</span></span>

<span data-ttu-id="c3021-187">El mecanismo de codiseño solo admite la firma de algunos tipos específicos de archivos, incluidos los ejecutables, los archivos dll, los paquetes de Windows Installer (archivos. msi) y los archivos. cab.</span><span class="sxs-lookup"><span data-stu-id="c3021-187">The codesigning mechanism only supports signing a few specific types of files, including executables, DLLs, Windows Installer packages (.msi files), and cabinet (.cab) files.</span></span> <span data-ttu-id="c3021-188">La API [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) no debe usarse para comprobar que los archivos de datos de gran tamaño (por ejemplo, archivos. cab) no se han alterado, ya que hay algunos problemas con el rendimiento y la estabilidad al validar archivos de gran tamaño.</span><span class="sxs-lookup"><span data-stu-id="c3021-188">The [**WinVerifyTrust**](/windows/desktop/api/wintrust/nf-wintrust-winverifytrust) API should not be used to verify that large data files (.cab files for example) have not been tampered with, as there are some issues with performance and stability when validating very large files.</span></span> <span data-ttu-id="c3021-189">Los ejecutables de programas tienden a ser lo suficientemente pequeños como para que se produzca una comprobación de plena confianza mediante el proveedor de WinTrust, pero los archivos de datos de los juegos suelen tener un tamaño de varios gigabytes.</span><span class="sxs-lookup"><span data-stu-id="c3021-189">Program executables tend be small enough for a full trust check to occur using the WinTrust provider but data files for games are often of the realm of many gigabytes in size.</span></span> <span data-ttu-id="c3021-190">El enfoque que toma el cargador para la comprobación de los datos del juego debe ser aquél en el que se prueba una pequeña muestra del conjunto de datos durante el tiempo de ejecución del juego.</span><span class="sxs-lookup"><span data-stu-id="c3021-190">The approach taken by the loader for verification of game data should be one where a small sample of the dataset is tested over the run time of the game.</span></span> <span data-ttu-id="c3021-191">Este enfoque extiende el costo de las pruebas de comprobación a lo largo de la experiencia de juego y puede proporcionar una experiencia de usuario sin problemas.</span><span class="sxs-lookup"><span data-stu-id="c3021-191">This approach spreads the cost of verification tests over the life of the game play experience and can provide a seamless user experience without long wait times.</span></span> <span data-ttu-id="c3021-192">Para lograrlo, es posible que se requiera una organización cuidadosa de los datos.</span><span class="sxs-lookup"><span data-stu-id="c3021-192">To achieve this, careful organization of the data may be required.</span></span> <span data-ttu-id="c3021-193">Algunos MMOGs emplean un enfoque de base de datos para facilitar la administración, el mantenimiento y la comprobación de la corrección de los activos de juego a lo largo del tiempo.</span><span class="sxs-lookup"><span data-stu-id="c3021-193">Some MMOGs employ a database approach to help manage, maintain and verify correctness of game assets over time.</span></span>

<span data-ttu-id="c3021-194">Desde el punto de vista de la seguridad, el código de cliente debe diseñarse para no confiar en los archivos de datos, aunque se use algún tipo de validación de datos básica con el cargador de confianza.</span><span class="sxs-lookup"><span data-stu-id="c3021-194">From a security standpoint, the client code should be designed to not trust data files even if using some kind of basic data validation with the trusted loader.</span></span> <span data-ttu-id="c3021-195">Deben emplearse comprobaciones de encabezado, hash y otras comprobaciones de integridad tradicionales.</span><span class="sxs-lookup"><span data-stu-id="c3021-195">Header checks, hashes, and other traditional integrity checking should be employed.</span></span> <span data-ttu-id="c3021-196">El trabajo para proteger el código de e/s del cliente también debe realizarse mediante técnicas como las pruebas aproximadas, así como aprovechar las herramientas automáticas de análisis de código, como el modificador **/Analyze** en visual Studio 2005 y visual Studio 2008 (disponible en Visual Studio Team System y el compilador gratuito que se incluye con la Windows SDK).</span><span class="sxs-lookup"><span data-stu-id="c3021-196">Work to hardened the client's I/O code should also be done using techniques such as fuzz testing as well as taking advantage of automatic static code analysis tools such as the **/analyze** switch in Visual Studio 2005 and Visual Studio 2008 (available in Visual Studio Team System and the free compiler that ships with the Windows SDK).</span></span>

<span data-ttu-id="c3021-197">Para obtener más información sobre la seguridad de software, vea [procedimientos de seguridad recomendados para el desarrollo de juegos](/windows/desktop/DxTechArts/best-security-practices-in-game-development).</span><span class="sxs-lookup"><span data-stu-id="c3021-197">For more information about software security, see [Best Security Practices in Game Development](/windows/desktop/DxTechArts/best-security-practices-in-game-development).</span></span>

 

 