---
description: Es posible que un solicitante tenga que restaurar archivos en una ubicación indicada por algo distinto de la ruta de acceso predeterminada de un conjunto de archivos o su asignación de ubicación alternativa.
ms.assetid: ce11485c-da0e-4c16-962e-eeedc2da3de4
title: Trabajar con nuevos destinos durante la restauración
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 31f20a6e8c27c186648d0f662921160ab5c76988
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105696431"
---
# <a name="working-with-new-targets-during-restore"></a><span data-ttu-id="b737e-103">Trabajar con nuevos destinos durante la restauración</span><span class="sxs-lookup"><span data-stu-id="b737e-103">Working with New Targets during Restore</span></span>

<span data-ttu-id="b737e-104">Es posible que un solicitante tenga que restaurar archivos en una ubicación indicada por algo distinto de la ruta de acceso predeterminada de un conjunto de archivos o su [*asignación de ubicación alternativa*](vssgloss-a.md).</span><span class="sxs-lookup"><span data-stu-id="b737e-104">A requester may need to restore files to a location indicated by something other than a file set's default path or its [*alternate location mapping*](vssgloss-a.md).</span></span> <span data-ttu-id="b737e-105">Hay muchas razones por las que esto puede ocurrir, por ejemplo, no se puede tener acceso a ningún destino de restauración, o un usuario solicitante solicita intencionadamente que los archivos se restauren en alguna ubicación desconocida previamente.</span><span class="sxs-lookup"><span data-stu-id="b737e-105">There are many reasons why this might happen—for example, neither restore destination was accessible, or a requester user intentionally requests that files be restored to some previously unknown location.</span></span> <span data-ttu-id="b737e-106">En este caso, el solicitante usa el nuevo mecanismo de destino para indicar a los escritores que ha restaurado un archivo en un área diferente en el disco.</span><span class="sxs-lookup"><span data-stu-id="b737e-106">In this case, the requester uses the new target mechanism to indicate to writers that it has restored a file to a different area on disk.</span></span>

<span data-ttu-id="b737e-107">No todos los escritores admiten que un solicitante cambie el destino de restauración de un archivo.</span><span class="sxs-lookup"><span data-stu-id="b737e-107">Not all writers support a requester changing the restore destination of a file.</span></span> <span data-ttu-id="b737e-108">Un solicitante debe comprobar la compatibilidad del escritor comprobando la máscara del esquema de copia de seguridad del escritor (devuelta por [**IVssExamineWriterMetadata:: GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema)) y comprobando que contiene el escritor de VSS \_ BS \_ \_ es compatible con la \_ nueva \_ marca de destino.</span><span class="sxs-lookup"><span data-stu-id="b737e-108">A requester needs to verify writer support by checking the writer's backup schema mask (returned by [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema)) and verifying that it contains the VSS\_BS\_WRITER\_SUPPORTS\_NEW\_TARGET flag.</span></span>

<span data-ttu-id="b737e-109">El solicitante indica una restauración de este tipo mediante el método [**IVssBackupComponents:: AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget) .</span><span class="sxs-lookup"><span data-stu-id="b737e-109">The requester indicates such a restoration through the [**IVssBackupComponents::AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget) method.</span></span> <span data-ttu-id="b737e-110">Además de especificar una especificación de archivo y un destino de restauración nuevo y original, el solicitante especifica la información del componente, una ruta de acceso lógica y un nombre de componente.</span><span class="sxs-lookup"><span data-stu-id="b737e-110">In addition to specifying a file specification and an original and a new restore destination, the requester specifies component information—a logical path and component name.</span></span>

<span data-ttu-id="b737e-111">La información del componente que se usa depende de si el componente que administra el archivo que tiene un nuevo destino agregado se [*incluyó explícitamente*](vssgloss-e.md) o se [*incluyó implícitamente*](vssgloss-i.md) en la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b737e-111">Which component's information is used depends on whether or not the component managing the file having a new target added was [*explicitly included*](vssgloss-e.md) or [*implicitly included*](vssgloss-i.md) in the backup.</span></span>

<span data-ttu-id="b737e-112">Si el componente de administración se incluyó explícitamente, se usa su información.</span><span class="sxs-lookup"><span data-stu-id="b737e-112">If the managing component was explicitly included, then its information is used.</span></span> <span data-ttu-id="b737e-113">Si el componente de administración se incluyó implícitamente, es un subcomponente de un conjunto de componentes.</span><span class="sxs-lookup"><span data-stu-id="b737e-113">If the managing component was implicitly included, it is a subcomponent in a component set.</span></span> <span data-ttu-id="b737e-114">En este caso, se usa la información del componente de definición del conjunto de componentes.</span><span class="sxs-lookup"><span data-stu-id="b737e-114">In this case, the component set's defining component's information is used.</span></span>

<span data-ttu-id="b737e-115">Al controlar el evento [**Postrestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-postrestore) , los escritores deben comprobar si alguno de sus archivos se restauró en una nueva ubicación.</span><span class="sxs-lookup"><span data-stu-id="b737e-115">While handling the [**PostRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-postrestore) event, writers should check to see if any of its files were restored to a new location.</span></span> <span data-ttu-id="b737e-116">Esto se puede hacer mediante los métodos [**IVssComponent:: GetNewTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtargetcount) y [**IVssComponent:: GetNewTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtarget) .</span><span class="sxs-lookup"><span data-stu-id="b737e-116">This can be done by using the [**IVssComponent::GetNewTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtargetcount) and [**IVssComponent::GetNewTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getnewtarget) methods.</span></span>

<span data-ttu-id="b737e-117">La instancia de la interfaz [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) que se usa depende de si el componente de administración del archivo se ha agregado explícita o implícitamente a la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="b737e-117">The instance of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface that is used depends on whether the file's managing component was explicitly or implicitly added to the backup.</span></span>

 

 



