---
description: Toda la memoria que un proceso asigna mediante las funciones de asignación de memoria (HeapAlloc, VirtualAlloc, GlobalAlloc o LocalAlloc) solo es accesible para el proceso.
ms.assetid: b47200dc-6824-4fd8-8d9f-2aaa439a74ff
title: Ámbito de la memoria asignada
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8d2db67a04c019683e737d0f9c581ce8d16b800
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104275566"
---
# <a name="scope-of-allocated-memory"></a><span data-ttu-id="30faf-103">Ámbito de la memoria asignada</span><span class="sxs-lookup"><span data-stu-id="30faf-103">Scope of Allocated Memory</span></span>

<span data-ttu-id="30faf-104">Toda la memoria que un proceso asigna mediante las funciones de asignación de memoria ( [**HeapAlloc**](/windows/desktop/api/HeapApi/nf-heapapi-heapalloc), [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc)o [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc)) solo es accesible para el proceso.</span><span class="sxs-lookup"><span data-stu-id="30faf-104">All memory a process allocates by using the memory allocation functions ( [**HeapAlloc**](/windows/desktop/api/HeapApi/nf-heapapi-heapalloc), [**VirtualAlloc**](/windows/win32/api/memoryapi/nf-memoryapi-virtualalloc), [**GlobalAlloc**](/windows/desktop/api/WinBase/nf-winbase-globalalloc), or [**LocalAlloc**](/windows/desktop/api/WinBase/nf-winbase-localalloc)) is accessible only to the process.</span></span> <span data-ttu-id="30faf-105">Sin embargo, la memoria asignada por un archivo DLL se asigna en el espacio de direcciones del proceso que llamó a la DLL y no es accesible para otros procesos que usan el mismo archivo DLL.</span><span class="sxs-lookup"><span data-stu-id="30faf-105">However, memory allocated by a DLL is allocated in the address space of the process that called the DLL and is not accessible to other processes using the same DLL.</span></span> <span data-ttu-id="30faf-106">Para crear memoria compartida, debe usar la asignación de archivos.</span><span class="sxs-lookup"><span data-stu-id="30faf-106">To create shared memory, you must use file mapping.</span></span>

<span data-ttu-id="30faf-107">La asignación de archivos con nombre proporciona una manera sencilla de crear un bloque de memoria compartida.</span><span class="sxs-lookup"><span data-stu-id="30faf-107">Named file mapping provides an easy way to create a block of shared memory.</span></span> <span data-ttu-id="30faf-108">Un proceso puede especificar un nombre cuando usa la función [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) para crear un objeto de asignación de archivos.</span><span class="sxs-lookup"><span data-stu-id="30faf-108">A process can specify a name when it uses the [**CreateFileMapping**](/windows/desktop/api/WinBase/nf-winbase-createfilemappinga) function to create a file-mapping object.</span></span> <span data-ttu-id="30faf-109">Otros procesos pueden especificar el mismo nombre para la función **CreateFileMapping** o [**OpenFileMapping**](/windows/desktop/api/WinBase/nf-winbase-openfilemappinga) con el fin de obtener un identificador para el objeto de asignación.</span><span class="sxs-lookup"><span data-stu-id="30faf-109">Other processes can specify the same name to either the **CreateFileMapping** or [**OpenFileMapping**](/windows/desktop/api/WinBase/nf-winbase-openfilemappinga) function to obtain a handle to the mapping object.</span></span>

<span data-ttu-id="30faf-110">Cada proceso especifica su identificador para el objeto de asignación de archivos en la función [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) para asignar una vista del archivo en su propio espacio de direcciones.</span><span class="sxs-lookup"><span data-stu-id="30faf-110">Each process specifies its handle to the file-mapping object in the [**MapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffile) function to map a view of the file into its own address space.</span></span> <span data-ttu-id="30faf-111">Las vistas de todos los procesos de un solo objeto de asignación de archivos se asignan a las mismas páginas que se pueden compartir de almacenamiento físico.</span><span class="sxs-lookup"><span data-stu-id="30faf-111">The views of all processes for a single file-mapping object are mapped into the same sharable pages of physical storage.</span></span> <span data-ttu-id="30faf-112">Sin embargo, las direcciones virtuales de las vistas asignadas pueden variar de un proceso a otro, a menos que se use la función [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) para asignar la vista en una dirección especificada.</span><span class="sxs-lookup"><span data-stu-id="30faf-112">However, the virtual addresses of the mapped views can vary from one process to another, unless the [**MapViewOfFileEx**](/windows/win32/api/memoryapi/nf-memoryapi-mapviewoffileex) function is used to map the view at a specified address.</span></span> <span data-ttu-id="30faf-113">Aunque se pueda compartir, las páginas de almacenamiento físico usadas para una vista de archivo asignada no son globales; no son accesibles para los procesos que no han asignado una vista del archivo.</span><span class="sxs-lookup"><span data-stu-id="30faf-113">Although sharable, the pages of physical storage used for a mapped file view are not global; they are not accessible to processes that have not mapped a view of the file.</span></span>

<span data-ttu-id="30faf-114">Las páginas confirmadas mediante la asignación de una vista de un archivo se liberan cuando el último proceso con una vista del objeto de asignación finaliza o desasigna su vista mediante una llamada a la función [**UnmapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile) .</span><span class="sxs-lookup"><span data-stu-id="30faf-114">Any pages committed by mapping a view of a file are released when the last process with a view of the mapping object either terminates or unmaps its view by calling the [**UnmapViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-unmapviewoffile) function.</span></span> <span data-ttu-id="30faf-115">En este momento, se actualiza el archivo especificado (si existe) asociado al objeto de asignación.</span><span class="sxs-lookup"><span data-stu-id="30faf-115">At this time, the specified file (if any) associated with the mapping object is updated.</span></span> <span data-ttu-id="30faf-116">También se puede forzar la actualización de un archivo especificado mediante una llamada a la función [**FlushViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-flushviewoffile) .</span><span class="sxs-lookup"><span data-stu-id="30faf-116">A specified file can also be forced to update by calling the [**FlushViewOfFile**](/windows/win32/api/memoryapi/nf-memoryapi-flushviewoffile) function.</span></span>

<span data-ttu-id="30faf-117">Para obtener más información, vea [asignación de archivos](file-mapping.md).</span><span class="sxs-lookup"><span data-stu-id="30faf-117">For more information, see [File Mapping](file-mapping.md).</span></span> <span data-ttu-id="30faf-118">Para obtener un ejemplo de memoria compartida en un archivo DLL, consulte [uso de memoria compartida en una biblioteca de Dynamic-Link](../dlls/using-shared-memory-in-a-dynamic-link-library.md).</span><span class="sxs-lookup"><span data-stu-id="30faf-118">For an example of shared memory in a DLL, see [Using Shared Memory in a Dynamic-Link Library](../dlls/using-shared-memory-in-a-dynamic-link-library.md).</span></span>

<span data-ttu-id="30faf-119">Si hay varios procesos que tienen acceso de escritura a la memoria compartida, debe sincronizar el acceso a la memoria.</span><span class="sxs-lookup"><span data-stu-id="30faf-119">If multiple processes have write access to shared memory, you must synchronize access to the memory.</span></span> <span data-ttu-id="30faf-120">Para obtener más información, consulte [Synchronization](../sync/synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="30faf-120">For more information, see [Synchronization](../sync/synchronization.md).</span></span>

 

 
