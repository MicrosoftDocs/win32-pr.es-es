---
description: Como con todas las operaciones importantes de VSS, las copias de seguridad incrementales y diferenciales requieren una estrecha colaboración entre los solicitantes y los escritores.
ms.assetid: 00391a49-8c81-4518-88a2-741ad5ee4ac3
title: Rol de solicitante en copias de seguridad de almacenes complejos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 197351e76b6861ee9b9d1e0589ef028c911430ed
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104082480"
---
# <a name="requester-role-in-backing-up-complex-stores"></a><span data-ttu-id="7f6af-103">Rol de solicitante en copias de seguridad de almacenes complejos</span><span class="sxs-lookup"><span data-stu-id="7f6af-103">Requester Role in Backing Up Complex Stores</span></span>

<span data-ttu-id="7f6af-104">Como con todas las operaciones importantes de VSS, las copias de seguridad [*incrementales*](vssgloss-i.md) y [*diferenciales*](vssgloss-d.md) requieren una estrecha colaboración entre los solicitantes y los escritores.</span><span class="sxs-lookup"><span data-stu-id="7f6af-104">As with all important operations under VSS, [*incremental*](vssgloss-i.md) and [*differential*](vssgloss-d.md) backups require close cooperation between requesters and writers.</span></span>

## <a name="backup-type"></a><span data-ttu-id="7f6af-105">Tipo de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="7f6af-105">Backup Type</span></span>

<span data-ttu-id="7f6af-106">La infraestructura proporciona compatibilidad especial para cinco tipos de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-106">The infrastructure provides special support for five types of backup.</span></span> <span data-ttu-id="7f6af-107">A continuación se detalla la descripción de estos pasos:</span><span class="sxs-lookup"><span data-stu-id="7f6af-107">They are described as follows:</span></span>

-   <span data-ttu-id="7f6af-108">Completo (**VSS \_ BT \_ completo**).</span><span class="sxs-lookup"><span data-stu-id="7f6af-108">Full (**VSS\_BT\_FULL**).</span></span> <span data-ttu-id="7f6af-109">Se realizará una copia de seguridad de los archivos, independientemente de la fecha de la última copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-109">Files will be backed up regardless of their last backup date.</span></span> <span data-ttu-id="7f6af-110">Se actualizará el historial de copia de seguridad de cada archivo y este tipo de copia de seguridad se puede usar como base de una copia de seguridad incremental o diferencial.</span><span class="sxs-lookup"><span data-stu-id="7f6af-110">The backup history of each file will be updated, and this type of backup can be used as the basis of an incremental or differential backup.</span></span> <span data-ttu-id="7f6af-111">Si hay archivos de registro, se pueden truncar como resultado de esta copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-111">If there are log files, they may be truncated as a result of this backup.</span></span>

    <span data-ttu-id="7f6af-112">La restauración de una copia de seguridad completa requiere una sola imagen de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-112">Restoring a full backup requires only a single backup image.</span></span>

-   <span data-ttu-id="7f6af-113">Diferencial (**\_ \_ diferencial de VSS BT**).</span><span class="sxs-lookup"><span data-stu-id="7f6af-113">Differential (**VSS\_BT\_DIFFERENTIAL**).</span></span> <span data-ttu-id="7f6af-114">La API de VSS se usa para garantizar que solo los archivos que se han cambiado o agregado desde la última copia de seguridad completa se copien en un medio de almacenamiento. se omite toda la información de copia de seguridad intermedia.</span><span class="sxs-lookup"><span data-stu-id="7f6af-114">The VSS API is used to ensure that only files that have been changed or added since the last full backup are to be copied to a storage medium; all intermediate backup information is ignored.</span></span> <span data-ttu-id="7f6af-115">Esto puede incluir archivos completos o intervalos específicos dentro de los archivos.</span><span class="sxs-lookup"><span data-stu-id="7f6af-115">This may include entire files, or specific ranges within files.</span></span> <span data-ttu-id="7f6af-116">Una copia de seguridad diferencial está asociada a una copia de seguridad completa y, por lo general, no se puede restaurar hasta que se haya restaurado la copia de seguridad completa.</span><span class="sxs-lookup"><span data-stu-id="7f6af-116">A differential backup is associated with a full backup, and generally cannot be restored until the full backup has been restored.</span></span> <span data-ttu-id="7f6af-117">Si hay archivos de registro, normalmente no se truncarán como resultado de esta copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-117">If there are log files, they will usually not be truncated as a result of this backup.</span></span>

    <span data-ttu-id="7f6af-118">La restauración de una copia de seguridad diferencial requiere la imagen de copia de seguridad original y la imagen de copia de seguridad diferencial más reciente realizada desde la última copia de seguridad completa.</span><span class="sxs-lookup"><span data-stu-id="7f6af-118">Restoring a differential backup requires the original backup image and the most recent differential backup image made since the last full backup.</span></span>

-   <span data-ttu-id="7f6af-119">Incremental (**se \_ \_ incremental de VSS BT**).</span><span class="sxs-lookup"><span data-stu-id="7f6af-119">Incremental (**VSS\_BT\_INCREMENTAL**).</span></span> <span data-ttu-id="7f6af-120">La API de VSS se usa para asegurarse de que solo los archivos que se han cambiado o agregado desde la última copia de seguridad completa o incremental se copiarán en un medio de almacenamiento.</span><span class="sxs-lookup"><span data-stu-id="7f6af-120">The VSS API is used to ensure that only files that have been changed or added since the last full or incremental backup are to be copied to a storage medium.</span></span> <span data-ttu-id="7f6af-121">Esto puede incluir archivos completos o intervalos específicos dentro de los archivos.</span><span class="sxs-lookup"><span data-stu-id="7f6af-121">This may include entire files, or specific ranges within files.</span></span> <span data-ttu-id="7f6af-122">Algunos escritores no permiten mezclar copias de seguridad incrementales con copias de seguridad diferenciales.</span><span class="sxs-lookup"><span data-stu-id="7f6af-122">Some writers do not allow incremental backups to be mixed with differential backups.</span></span> <span data-ttu-id="7f6af-123">Si hay archivos de registro, se pueden truncar como resultado de esta copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-123">If there are log files, they may be truncated as a result of this backup.</span></span>

    <span data-ttu-id="7f6af-124">La restauración de una copia de seguridad incremental requiere la imagen de copia de seguridad original y todas las imágenes de copia de seguridad incremental realizadas desde la copia de seguridad inicial.</span><span class="sxs-lookup"><span data-stu-id="7f6af-124">Restoring an incremental backup requires the original backup image and all incremental backup images made since the initial backup.</span></span>

-   <span data-ttu-id="7f6af-125">Copia de seguridad de registros (**\_ \_ registro de VSS BT**).</span><span class="sxs-lookup"><span data-stu-id="7f6af-125">Log Backup (**VSS\_BT\_LOG**).</span></span> <span data-ttu-id="7f6af-126">Solo se realizará una copia de seguridad de los archivos de registro de un escritor (los archivos agregados a un componente con el método [**IVssCreateWriterMetadata:: AddDataBaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) y recuperados mediante una llamada a [**IVssWMComponent:: GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile)).</span><span class="sxs-lookup"><span data-stu-id="7f6af-126">Only a writer's log files (files added to a component with the [**IVssCreateWriterMetadata::AddDataBaseLogFiles**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-adddatabaselogfiles) method, and retrieved by a call to [**IVssWMComponent::GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile)) will be backed up.</span></span> <span data-ttu-id="7f6af-127">Este tipo de copia de seguridad es específico de VSS.</span><span class="sxs-lookup"><span data-stu-id="7f6af-127">This backup type is specific to VSS.</span></span> <span data-ttu-id="7f6af-128">Las copias de seguridad de registros tienden a realizarse con mucha frecuencia.</span><span class="sxs-lookup"><span data-stu-id="7f6af-128">Log backups tend to be taken quite frequently.</span></span> <span data-ttu-id="7f6af-129">Normalmente, el archivo de registro se truncará como resultado de esta copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-129">Typically, the log file will be truncated as a result of this backup.</span></span>
-   <span data-ttu-id="7f6af-130">Copia de seguridad (copia de **VSS \_ BT \_**).</span><span class="sxs-lookup"><span data-stu-id="7f6af-130">Copy Backup (**VSS\_BT\_COPY**).</span></span> <span data-ttu-id="7f6af-131">Al igual que el \_ tipo de copia de seguridad completa de VSS BT, se realizará \_ una copia de seguridad de los archivos, independientemente de su fecha de última copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-131">Like the VSS\_BT\_FULL backup type, files will be backed up regardless of their last backup date.</span></span> <span data-ttu-id="7f6af-132">Sin embargo, el historial de copia de seguridad de cada archivo no se actualizará y este tipo de copia de seguridad no se puede usar como base de una copia de seguridad incremental o diferencial.</span><span class="sxs-lookup"><span data-stu-id="7f6af-132">However, the backup history of each file will not be updated, and this sort of backup cannot be used as the basis of an incremental or differential backup.</span></span> <span data-ttu-id="7f6af-133">Los archivos de registro nunca se deben truncar como resultado de una copia de seguridad de copia.</span><span class="sxs-lookup"><span data-stu-id="7f6af-133">Log files should never be truncated as a result of a copy backup.</span></span>

<dl> <dt>

<span data-ttu-id="7f6af-134"><span id="Partial_File_Support"></span><span id="partial_file_support"></span><span id="PARTIAL_FILE_SUPPORT"></span>Compatibilidad con archivos parciales</span><span class="sxs-lookup"><span data-stu-id="7f6af-134"><span id="Partial_File_Support"></span><span id="partial_file_support"></span><span id="PARTIAL_FILE_SUPPORT"></span>Partial File Support</span></span>
</dt> <dd>

<span data-ttu-id="7f6af-135">Algunos escritores admiten la restauración de archivos a través de la sobrescritura de partes de los archivos que administran.</span><span class="sxs-lookup"><span data-stu-id="7f6af-135">Some writers support file restoration through the overwriting of parts of the files they manage.</span></span> <span data-ttu-id="7f6af-136">Un solicitante puede estar diseñado para aprovecharse de esto y, si es así, lo indica estableciendo la información en [**IVssBackupComponents:: SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate).</span><span class="sxs-lookup"><span data-stu-id="7f6af-136">A requester may be designed to take advantage of this, and if so it indicates this by setting the information in [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate).</span></span>

</dd> </dl>

<span data-ttu-id="7f6af-137">El solicitante especifica qué tipo de copia de seguridad se realiza mediante el parámetro *copia* de [**IVssBackupComponents:: SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate).</span><span class="sxs-lookup"><span data-stu-id="7f6af-137">The requester specifies what type of backup is being performed through the *backupType* parameter of [**IVssBackupComponents::SetBackupState**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setbackupstate).</span></span> <span data-ttu-id="7f6af-138">Los escritores diferentes admitirán diferentes tipos de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-138">Different writers will support different types of backup.</span></span> <span data-ttu-id="7f6af-139">Después de haber llamado a [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) , el solicitante puede determinar qué tipos de copia de seguridad admite un escritor determinado llamando a [**IVssExamineWriterMetadata:: GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span><span class="sxs-lookup"><span data-stu-id="7f6af-139">After [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) has been called, the requester can determine what types of backup a given writer supports by calling [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span> <span data-ttu-id="7f6af-140">El valor devuelto es una máscara de bits que indica compatibilidad con distintos tipos de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-140">The returned value is a bit mask indicating support for different backup types.</span></span> <span data-ttu-id="7f6af-141">**VSS \_ La \_ diferencia diferencial de BS** indica compatibilidad con copias de seguridad diferenciales, de **VSS \_ BS \_ incrementales** para copias de seguridad incrementales, **registro de VSS \_ BS \_** para copias de seguridad de registros y **copia de VSS \_ BS \_** para copias de seguridad de copia; todos los escritores deben admitir copias de seguridad completas.</span><span class="sxs-lookup"><span data-stu-id="7f6af-141">**VSS\_BS\_DIFFERENTIAL** indicates support for differential backups, **VSS\_BS\_INCREMENTAL** for incremental backups, **VSS\_BS\_LOG** for log backups, and **VSS\_BS\_COPY** for copy backups; all writers must support full backups.</span></span> <span data-ttu-id="7f6af-142">Si un escritor no admite la combinación de copias de seguridad incrementales con copias de seguridad diferenciales, se agregará también la marca **\_ \_ \_ \_ diferencial incremental exclusiva de VSS BS** .</span><span class="sxs-lookup"><span data-stu-id="7f6af-142">If a writer does not support mixing incremental backups with differential backups, the **VSS\_BS\_EXCLUSIVE\_INCREMENTAL\_DIFFERENTIAL** flag will be added as well.</span></span> <span data-ttu-id="7f6af-143">Si el solicitante realiza una copia de seguridad incremental o diferencial y un escritor determinado no admite ese tipo de copia de seguridad, se debe realizar una copia de seguridad completa en ese escritor.</span><span class="sxs-lookup"><span data-stu-id="7f6af-143">If the requester is performing an incremental or differential backup and a given writer does not support that backup type, a full backup should be performed on that writer.</span></span>

## <a name="backup-stamps"></a><span data-ttu-id="7f6af-144">Marcas de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="7f6af-144">Backup Stamps</span></span>

<span data-ttu-id="7f6af-145">Las copias de seguridad incrementales y diferenciales siempre están ligadas a una copia de seguridad anterior.</span><span class="sxs-lookup"><span data-stu-id="7f6af-145">Incremental and differential backups are always tied to a previous backup.</span></span> <span data-ttu-id="7f6af-146">Hay dos formas de asociar las copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-146">There are two ways to tie backups.</span></span> <span data-ttu-id="7f6af-147">En el caso de los almacenes de datos simples, el solicitante puede realizar un seguimiento de la correlación entre las copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-147">For simple data stores, the requester can keep track of the correlation between backups.</span></span> <span data-ttu-id="7f6af-148">Sin embargo, para almacenes de datos más complejos, el escritor deberá mantener su propia marca de tiempo con la copia de seguridad; esta marca de tiempo puede realizar un seguimiento de la posición del registro, la información del punto de comprobación, etc.</span><span class="sxs-lookup"><span data-stu-id="7f6af-148">However, for more complex data stores, the writer will need to maintain its own timestamp with the backup; this timestamp may keep track of log position, checkpoint information, and so on.</span></span> <span data-ttu-id="7f6af-149">El solicitante puede determinar si un escritor determinado necesita almacenar su propia marca de tiempo comprobando el bit **de \_ \_ marca** de tiempo de VSS BS en el valor devuelto por [**IVssExamineWriterMetadata:: GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span><span class="sxs-lookup"><span data-stu-id="7f6af-149">The requester can determine whether a given writer needs to store its own timestamp by checking for the **VSS\_BS\_TIMESTAMPED** bit in the value returned by [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span>

<span data-ttu-id="7f6af-150">Los escritores que almacenan una marca de tiempo en una copia de seguridad agregarán la marca de tiempo al procesar [**ivssbackupcomponents::P repareforbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) o al procesar [**Ivssbackupcomponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span><span class="sxs-lookup"><span data-stu-id="7f6af-150">Writers that store a timestamp in a backup will add the timestamp either while processing [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) or while processing [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span></span> <span data-ttu-id="7f6af-151">El solicitante puede obtener esta marca de tiempo mediante una llamada a [**IVssComponent:: GetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="7f6af-151">The requester can obtain this timestamp by calling [**IVssComponent::GetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupstamp).</span></span> <span data-ttu-id="7f6af-152">Al realizar una copia de seguridad incremental o diferencial, el solicitante debe enlazar la copia de seguridad actual a alguna copia de seguridad anterior.</span><span class="sxs-lookup"><span data-stu-id="7f6af-152">When performing an incremental or differential backup, the requester needs to tie the current backup to some previous backup.</span></span> <span data-ttu-id="7f6af-153">Esto se hace obteniendo la marca de tiempo de la copia de seguridad anterior de un componente específico y pasándola a la función [**IVssBackupComponents:: SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) . Esto se debe hacer para cada componente del que se realizó una copia de seguridad en la copia de seguridad anterior.</span><span class="sxs-lookup"><span data-stu-id="7f6af-153">This is done by obtaining the timestamp from the previous backup of a specific component and passing it into the [**IVssBackupComponents::SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) function; this needs to be done for each component that was backed up in the previous backup.</span></span>

## <a name="backing-up-files"></a><span data-ttu-id="7f6af-154">Copia de seguridad de archivos</span><span class="sxs-lookup"><span data-stu-id="7f6af-154">Backing Up Files</span></span>

### <a name="backing-up-files-reported-by-writer"></a><span data-ttu-id="7f6af-155">Copia de seguridad de archivos detectados por el escritor</span><span class="sxs-lookup"><span data-stu-id="7f6af-155">Backing Up Files Reported by Writer</span></span>

<span data-ttu-id="7f6af-156">Cada especificación de archivo que un escritor agrega a sus metadatos durante la fase GatherWriterMetadata contiene una máscara de tipo de copia de seguridad que especifica cuándo se debe realizar la copia de seguridad del archivo.</span><span class="sxs-lookup"><span data-stu-id="7f6af-156">Every file specification that a writer adds to its metadata during the GatherWriterMetadata phase contains a backup type mask that specifies when the file should be backed up.</span></span> <span data-ttu-id="7f6af-157">El solicitante determina cuál es esta máscara mediante una llamada a [**IVssWMFiledesc:: GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask).</span><span class="sxs-lookup"><span data-stu-id="7f6af-157">The requester determines what this mask is by calling [**IVssWMFiledesc::GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask).</span></span> <span data-ttu-id="7f6af-158">Los valores de esta máscara se usan para determinar para qué tipos de copia de seguridad se debe realizar una copia de seguridad de la especificación de archivo.</span><span class="sxs-lookup"><span data-stu-id="7f6af-158">The values in this mask are used to determine for which backup types the file specification needs to be backed up.</span></span> <span data-ttu-id="7f6af-159">La máscara puede contener uno o varios de los siguientes valores de bit:</span><span class="sxs-lookup"><span data-stu-id="7f6af-159">The mask can contain one or more of the following bit values:</span></span>

<dl> <dt>

<span data-ttu-id="7f6af-160"><span id="VSS_FSBT_FULL_BACKUP_REQUIRED"></span><span id="vss_fsbt_full_backup_required"></span>**se \_ \_ requiere la \_ copia de seguridad completa de FSBT de VSS \_**</span><span class="sxs-lookup"><span data-stu-id="7f6af-160"><span id="VSS_FSBT_FULL_BACKUP_REQUIRED"></span><span id="vss_fsbt_full_backup_required"></span>**VSS\_FSBT\_FULL\_BACKUP\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="7f6af-161">Necesario para copias de seguridad completas.</span><span class="sxs-lookup"><span data-stu-id="7f6af-161">Required for full backups.</span></span>

</dd> <dt>

<span data-ttu-id="7f6af-162"><span id="VSS_FSBT_DIFFERENTIAL_BACKUP_REQUIRED"></span><span id="vss_fsbt_differential_backup_required"></span>**se \_ \_ requiere la \_ copia de seguridad diferencial FSBT \_ de VSS**</span><span class="sxs-lookup"><span data-stu-id="7f6af-162"><span id="VSS_FSBT_DIFFERENTIAL_BACKUP_REQUIRED"></span><span id="vss_fsbt_differential_backup_required"></span>**VSS\_FSBT\_DIFFERENTIAL\_BACKUP\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="7f6af-163">Se requiere para las copias de seguridad diferenciales.</span><span class="sxs-lookup"><span data-stu-id="7f6af-163">Required for differential backups.</span></span>

</dd> <dt>

<span data-ttu-id="7f6af-164"><span id="VSS_FSBT_INCREMENTAL_BACKUP_REQUIRED"></span><span id="vss_fsbt_incremental_backup_required"></span>**se \_ \_ requiere la copia de seguridad incremental FSBT de VSS \_ \_**</span><span class="sxs-lookup"><span data-stu-id="7f6af-164"><span id="VSS_FSBT_INCREMENTAL_BACKUP_REQUIRED"></span><span id="vss_fsbt_incremental_backup_required"></span>**VSS\_FSBT\_INCREMENTAL\_BACKUP\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="7f6af-165">Se requiere para las copias de seguridad incrementales.</span><span class="sxs-lookup"><span data-stu-id="7f6af-165">Required for incremental backups.</span></span>

</dd> <dt>

<span data-ttu-id="7f6af-166"><span id="VSS_FSBT_LOG_BACKUP_REQUIRED"></span><span id="vss_fsbt_log_backup_required"></span>**se \_ \_ requiere la \_ copia de seguridad de registros FSBT \_ de VSS**</span><span class="sxs-lookup"><span data-stu-id="7f6af-166"><span id="VSS_FSBT_LOG_BACKUP_REQUIRED"></span><span id="vss_fsbt_log_backup_required"></span>**VSS\_FSBT\_LOG\_BACKUP\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="7f6af-167">Se requiere para las copias de seguridad de registros.</span><span class="sxs-lookup"><span data-stu-id="7f6af-167">Required for log backups.</span></span>

</dd> <dt>

<span data-ttu-id="7f6af-168"><span id="VSS_FSBT_ALL_BACKUP_REQUIRED"></span><span id="vss_fsbt_all_backup_required"></span>**VSS \_ FSBT \_ todas las \_ copias de seguridad \_ necesarias**</span><span class="sxs-lookup"><span data-stu-id="7f6af-168"><span id="VSS_FSBT_ALL_BACKUP_REQUIRED"></span><span id="vss_fsbt_all_backup_required"></span>**VSS\_FSBT\_ALL\_BACKUP\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="7f6af-169">Obligatorio para todos los tipos de copia de seguridad; Este es el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="7f6af-169">Required for all backup types; this is the default.</span></span>

</dd> </dl>

<span data-ttu-id="7f6af-170">Esta especificación invalida la especificación de selectividad del componente.</span><span class="sxs-lookup"><span data-stu-id="7f6af-170">This specification overrides the component's selectivity specification.</span></span> <span data-ttu-id="7f6af-171">Por ejemplo, considere un componente cuyos archivos están marcados con **la \_ copia \_ de \_ seguridad \_ de registros de VSS FSBT** , pero no con la **copia de \_ seguridad completa de VSS FSBT \_ \_ \_ necesaria**.</span><span class="sxs-lookup"><span data-stu-id="7f6af-171">For example, consider a component whose files are all marked with **VSS\_FSBT\_LOG\_BACKUP\_REQUIRED** but not with **VSS\_FSBT\_FULL\_BACKUP\_REQUIRED**.</span></span> <span data-ttu-id="7f6af-172">Supongamos que este componente no es seleccionable para copia de seguridad (*bSelectable* era false cuando se llamó a [**IVssCreateWriterMetadata:: AddComponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addcomponent) ).</span><span class="sxs-lookup"><span data-stu-id="7f6af-172">Suppose this component is not selectable for backup (*bSelectable* was false when [**IVssCreateWriterMetadata::AddComponent**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-addcomponent) was called).</span></span> <span data-ttu-id="7f6af-173">En el caso de una copia de seguridad de registros, esto significa que siempre se debe hacer una copia de seguridad de todos los archivos de este componente.</span><span class="sxs-lookup"><span data-stu-id="7f6af-173">In the case of a log backup, this means that all the files in this component must always be backed up.</span></span> <span data-ttu-id="7f6af-174">Sin embargo, en el caso de una copia de seguridad completa, no es necesario hacer una copia de seguridad de ninguno de los archivos, a pesar de que la selectividad del componente implica que se debe hacer una copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-174">However, in the case of a full backup, none of the files need to be backed up, despite the fact that the component's selectivity implies it should be backed up.</span></span>

### <a name="backup-by-last-modify-time"></a><span data-ttu-id="7f6af-175">Copia de seguridad por hora de última modificación</span><span class="sxs-lookup"><span data-stu-id="7f6af-175">Backup by Last Modify Time</span></span>

<span data-ttu-id="7f6af-176">La información de especificación de archivo especificada en la fase [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) no proporciona al solicitante información sobre lo que ha cambiado desde la última copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-176">The file specification information specified in the [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) phase does not give the requester information about what has changed since the last backup.</span></span> <span data-ttu-id="7f6af-177">Una manera de que un escritor indique que los cambios se han realizado en el solicitante es mediante el mecanismo de archivos diferenciados.</span><span class="sxs-lookup"><span data-stu-id="7f6af-177">One way for a writer to indicate changes to the requester is by using the differenced file mechanism.</span></span> <span data-ttu-id="7f6af-178">Un escritor puede especificar que solo se debe realizar una copia de seguridad de determinados archivos de un componente si se han modificado desde cierto momento; el escritor puede especificar estos archivos en [**ivssbackupcomponents::P repareforbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) o en [**Ivssbackupcomponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span><span class="sxs-lookup"><span data-stu-id="7f6af-178">A writer can specify that certain files in a component should be backed up only if they have been modified since a certain time; the writer may specify these files either in [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) or in [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span></span> <span data-ttu-id="7f6af-179">Un solicitante puede determinar estos archivos mediante una llamada a [**IVssComponent:: GetDifferencedFilesCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfilescount) y [**IVssComponent:: GetDifferencedFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile).</span><span class="sxs-lookup"><span data-stu-id="7f6af-179">A requester can determine these files by calling [**IVssComponent::GetDifferencedFilesCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfilescount) and [**IVssComponent::GetDifferencedFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdifferencedfile).</span></span> <span data-ttu-id="7f6af-180">Si la especificación de archivo coincide con un conjunto de **IVssBackupComponents:: GatherWriterMetadata** (que actualmente es válido en función de la máscara del tipo de copia de seguridad), la información de archivo diferenciado invalida la información anterior. es decir, ahora se realiza una copia de seguridad de los archivos que coinciden con esa especificación de archivo solo si se han modificado desde la hora especificada.</span><span class="sxs-lookup"><span data-stu-id="7f6af-180">If the file specification matches one set in **IVssBackupComponents::GatherWriterMetadata** (that is currently valid based on the backup type mask) the differenced file information overrides the previous information; that is, the files matching that file specification are now backed up only if they have been modified since the specified time.</span></span> <span data-ttu-id="7f6af-181">La hora de la última modificación se comunica mediante una estructura de [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) .</span><span class="sxs-lookup"><span data-stu-id="7f6af-181">The last-modify time is communicated using a [**FILETIME**](/windows/win32/api/minwinbase/ns-minwinbase-filetime) structure.</span></span> <span data-ttu-id="7f6af-182">Si el valor de esta estructura es cero, esto implica que la hora de la última modificación debe determinarse en función del registro del solicitante de la hora de la última copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-182">If the value of this structure is zero, this implies that the last-modify time should be determined based on the requester's record of the time of last backup.</span></span>

### <a name="partial-file-backup"></a><span data-ttu-id="7f6af-183">Copia de seguridad de archivos parcial</span><span class="sxs-lookup"><span data-stu-id="7f6af-183">Partial File Backup</span></span>

<span data-ttu-id="7f6af-184">Otra forma de que un escritor indique que los cambios se han realizado en el solicitante es mediante el mecanismo de archivos parciales.</span><span class="sxs-lookup"><span data-stu-id="7f6af-184">Another way for a writer to indicate changes to the requester is by using the partial file mechanism.</span></span> <span data-ttu-id="7f6af-185">Un escritor puede especificar intervalos de bytes dentro de archivos de componentes de los que es necesario hacer una copia de seguridad; el escritor puede especificar estos intervalos de archivos en [**ivssbackupcomponents::P repareforbackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) o en [**Ivssbackupcomponents::D osnapshotset**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span><span class="sxs-lookup"><span data-stu-id="7f6af-185">A writer can specify byte ranges within component files that need to be backed up; the writer can specify these file ranges either in [**IVssBackupComponents::PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) or in [**IVssBackupComponents::DoSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-dosnapshotset).</span></span> <span data-ttu-id="7f6af-186">Un solicitante puede determinar estos archivos mediante una llamada a [**IVssComponent:: GetPartialFileCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount) y [**IVssComponent:: GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span><span class="sxs-lookup"><span data-stu-id="7f6af-186">A requester can determine these files by calling [**IVssComponent::GetPartialFileCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfilecount) and [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span></span> <span data-ttu-id="7f6af-187">**IVssComponent:: GetPartialFile** devolverá una ruta de acceso y un nombre de archivo que señalen al archivo, y una cadena de intervalos que indique de qué debe realizarse una copia de seguridad en el archivo.</span><span class="sxs-lookup"><span data-stu-id="7f6af-187">**IVssComponent::GetPartialFile** will return a path and a file name pointing to the file, and a ranges string indicating what needs to be backed up in the file.</span></span> <span data-ttu-id="7f6af-188">Al igual que con los archivos diferenciados, si la ruta de acceso y el nombre de archivo coinciden con una especificación de archivo establecida por el escritor en [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata), la información de archivo parcial invalida la configuración anterior.</span><span class="sxs-lookup"><span data-stu-id="7f6af-188">As with differenced files, if the path and file name matches a file specification set by the writer in [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata), the partial-file information overrides the previous setting.</span></span> <span data-ttu-id="7f6af-189">La cadena de rangos puede tener dos formatos: puede especificar los intervalos directamente o puede especificar un archivo que contenga información de rangos.</span><span class="sxs-lookup"><span data-stu-id="7f6af-189">The ranges string can have two formats: it can either specify the ranges directly, or it can specify a file containing ranges information.</span></span> <span data-ttu-id="7f6af-190">Si se especifican intervalos directamente, la sintaxis es una lista separada por comas con el formato offset1: length1 (, offset2: length2 (, donde cada desplazamiento y longitud es un entero sin signo de 64 bits.</span><span class="sxs-lookup"><span data-stu-id="7f6af-190">If specifying ranges directly, the syntax is a comma-separated list of the form offset1:length1, offset2:length2, where each offset and length is a 64-bit unsigned integer.</span></span> <span data-ttu-id="7f6af-191">Si se especifica un archivo de rangos, la cadena de rangos debe establecerse en file = *filename*, donde *filename* es la ruta de acceso completa al archivo de intervalos.</span><span class="sxs-lookup"><span data-stu-id="7f6af-191">If specifying a ranges file, the ranges string should be set to File= *filename*, where *filename* is the full path to the ranges file.</span></span> <span data-ttu-id="7f6af-192">El propio archivo de intervalos es un archivo binario que se formatea como una lista de enteros de 64 bits sin signo.</span><span class="sxs-lookup"><span data-stu-id="7f6af-192">The ranges file itself is a binary file that is formatted as a list of 64-bit unsigned integers.</span></span> <span data-ttu-id="7f6af-193">El primer entero indica el número de intervalos que se representan en el archivo.</span><span class="sxs-lookup"><span data-stu-id="7f6af-193">The first integer indicates how many ranges are represented in the file.</span></span> <span data-ttu-id="7f6af-194">Cada par de enteros subsiguiente representa el desplazamiento y la longitud de un intervalo.</span><span class="sxs-lookup"><span data-stu-id="7f6af-194">Each subsequent pair of integers represents the offset and length of a range.</span></span> <span data-ttu-id="7f6af-195">El solicitante debe tener cuidado con la copia de seguridad y la restauración de este archivo de intervalos también.</span><span class="sxs-lookup"><span data-stu-id="7f6af-195">The requester must take care to back up and restore this ranges file as well.</span></span>

### <a name="file-specification-rules"></a><span data-ttu-id="7f6af-196">Reglas de especificación de archivo</span><span class="sxs-lookup"><span data-stu-id="7f6af-196">File Specification Rules</span></span>

<span data-ttu-id="7f6af-197">Las especificaciones de archivo agregadas a través de los mecanismos de archivo diferenciado y de archivo parcial modificarán las especificaciones de archivo establecidas en [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) o agregarán archivos completamente nuevos.</span><span class="sxs-lookup"><span data-stu-id="7f6af-197">File specifications added through the differenced-file and the partial-file mechanisms will either modify file specifications set in [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata) or add completely new files.</span></span> <span data-ttu-id="7f6af-198">Si se modifican las especificaciones de los archivos establecidas en **IVssBackupComponents:: GatherWriterMetadata** mediante el mecanismo de archivo parcial, un solicitante puede esperar que la especificación del archivo coincida exactamente con una de las especificaciones de archivo establecidas en el componente en **IVssBackupComponents:: GatherWriterMetadata**.</span><span class="sxs-lookup"><span data-stu-id="7f6af-198">If modifying files specifications set in **IVssBackupComponents::GatherWriterMetadata** using the partial-file mechanism, then a requester can expect the file specification to exactly match one of the file specifications set in the component in **IVssBackupComponents::GatherWriterMetadata**.</span></span> <span data-ttu-id="7f6af-199">La especificación de archivo no se superpondrá parcialmente a otra especificación de archivo y no coincidirá con ninguna especificación de archivo en ningún otro de los componentes de ese escritor.</span><span class="sxs-lookup"><span data-stu-id="7f6af-199">The file specification will not partially overlap another file specification, and it will not match any file specifications in any other of that writer's components.</span></span> <span data-ttu-id="7f6af-200">Las especificaciones de archivo agregadas mediante el mecanismo de archivo parcial pueden, sin embargo, superponerse parcialmente a otra especificación de archivo.</span><span class="sxs-lookup"><span data-stu-id="7f6af-200">File specifications added using the partial-file mechanism can, however, partially overlap another file specification.</span></span> <span data-ttu-id="7f6af-201">Cuando esto es así, la especificación de archivo diferenciado o parcial invalida la especificación establecida en **IVssBackupComponents:: GatherWriterMetadata**.</span><span class="sxs-lookup"><span data-stu-id="7f6af-201">When this is true, the differenced-file or partial-file specification overrides the specification set in **IVssBackupComponents::GatherWriterMetadata**.</span></span> <span data-ttu-id="7f6af-202">Las especificaciones de archivo generales pueden tener un valor de ubicación alternativa (devuelto por [**IVssWMFiledesc:: GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation)) que indica un lugar alternativo en el que obtener el archivo en el momento de la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-202">General file specifications can have an alternate-location value (returned by [**IVssWMFiledesc::GetAlternateLocation**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getalternatelocation)) that indicates an alternate place to obtain the file from at backup time.</span></span> <span data-ttu-id="7f6af-203">Si las especificaciones de archivo establecidas a través de los mecanismos de archivos diferenciados o parciales coinciden con una especificación de archivos existente que tiene una ubicación alternativa, los datos se deben recoger desde esta ubicación alternativa.</span><span class="sxs-lookup"><span data-stu-id="7f6af-203">If the file specifications set through the differenced-file or partial file mechanisms match an existing files specification that has an alternate location, the data should be picked up from this alternate location.</span></span> <span data-ttu-id="7f6af-204">Si las especificaciones de archivo establecidas a través de los mecanismos de archivos diferenciados o parciales no coinciden con las especificaciones existentes del componente, estos intervalos de archivos deberían agregarse ahora a la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-204">If the file specifications set through the differenced-file or partial-file mechanisms do not match any existing specifications for the component, then these file ranges should now be added to the backup.</span></span> <span data-ttu-id="7f6af-205">El solicitante puede esperar que solo se agreguen los archivos de los volúmenes que ya se han incluido en el conjunto de instantáneas mediante uno de estos mecanismos.</span><span class="sxs-lookup"><span data-stu-id="7f6af-205">The requester can expect that only files on volumes that have already been included in the shadow copy set will be added using one of these mechanisms.</span></span>

### <a name="backup-without-a-shadow-copy"></a><span data-ttu-id="7f6af-206">Copia de seguridad sin una instantánea</span><span class="sxs-lookup"><span data-stu-id="7f6af-206">Backup without a Shadow Copy</span></span>

<span data-ttu-id="7f6af-207">Es posible que no sea necesario hacer una copia de seguridad de determinados tipos de archivos en un volumen de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="7f6af-207">Certain types of files may not need to be backed up off of a shadow copy volume.</span></span> <span data-ttu-id="7f6af-208">Por ejemplo, esto suele ser cierto en los archivos de registro de base de datos.</span><span class="sxs-lookup"><span data-stu-id="7f6af-208">For example, this will often be true of database log files.</span></span> <span data-ttu-id="7f6af-209">Dado que los archivos de registro crecen de forma monotónica, y un escritor puede especificar exactamente qué partes del archivo se van a incluir en la copia de seguridad mediante archivos parciales, a menudo es posible hacer una copia de seguridad del volumen original.</span><span class="sxs-lookup"><span data-stu-id="7f6af-209">Since log files grow monotonically, and a writer can specify exactly what portions of the file to back up using partial files, it will often be possible to backup the log off the original volume.</span></span> <span data-ttu-id="7f6af-210">Como optimización, un escritor puede marcar qué archivos requieren instantáneas para diferentes tipos de copia de seguridad mediante la máscara de tipo de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="7f6af-210">As an optimization, a writer can mark which files require shadow copies for different backup types using the backup-type mask.</span></span> <span data-ttu-id="7f6af-211">El valor devuelto de [**IVssWMFiledesc:: GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask) puede contener uno o varios de los siguientes valores de bit:</span><span class="sxs-lookup"><span data-stu-id="7f6af-211">The value returned from [**IVssWMFiledesc::GetBackupTypeMask**](/windows/desktop/api/VsWriter/nf-vswriter-ivsswmfiledesc-getbackuptypemask) can contain one or more of the following bit values:</span></span>

<dl> <dt>

<span data-ttu-id="7f6af-212"><span id="VSS_FSBT_FULL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_full_snapshot_required"></span>**se \_ \_ requiere una \_ instantánea \_ completa de FSBT de VSS**</span><span class="sxs-lookup"><span data-stu-id="7f6af-212"><span id="VSS_FSBT_FULL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_full_snapshot_required"></span>**VSS\_FSBT\_FULL\_SNAPSHOT\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="7f6af-213">Instantánea necesaria para las copias de seguridad completas.</span><span class="sxs-lookup"><span data-stu-id="7f6af-213">Shadow copy required for full backups.</span></span>

</dd> <dt>

<span data-ttu-id="7f6af-214"><span id="VSS_FSBT_DIFFERENTIAL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_differential_snapshot_required"></span>**se \_ \_ requiere la \_ instantánea \_ diferencial FSBT de VSS**</span><span class="sxs-lookup"><span data-stu-id="7f6af-214"><span id="VSS_FSBT_DIFFERENTIAL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_differential_snapshot_required"></span>**VSS\_FSBT\_DIFFERENTIAL\_SNAPSHOT\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="7f6af-215">Instantánea necesaria para las copias de seguridad diferenciales.</span><span class="sxs-lookup"><span data-stu-id="7f6af-215">Shadow copy required for differential backups.</span></span>

</dd> <dt>

<span data-ttu-id="7f6af-216"><span id="VSS_FSBT_INCREMENTAL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_incremental_snapshot_required"></span>**se \_ \_ requiere la instantánea incremental FSBT de VSS \_ \_**</span><span class="sxs-lookup"><span data-stu-id="7f6af-216"><span id="VSS_FSBT_INCREMENTAL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_incremental_snapshot_required"></span>**VSS\_FSBT\_INCREMENTAL\_SNAPSHOT\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="7f6af-217">Instantánea necesaria para las copias de seguridad incrementales.</span><span class="sxs-lookup"><span data-stu-id="7f6af-217">Shadow copy required for incremental backups.</span></span>

</dd> <dt>

<span data-ttu-id="7f6af-218"><span id="VSS_FSBT_LOG_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_log_snapshot_required"></span>**se \_ \_ requiere la \_ instantánea de registro FSBT de VSS \_**</span><span class="sxs-lookup"><span data-stu-id="7f6af-218"><span id="VSS_FSBT_LOG_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_log_snapshot_required"></span>**VSS\_FSBT\_LOG\_SNAPSHOT\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="7f6af-219">Instantánea necesaria para las copias de seguridad de registros.</span><span class="sxs-lookup"><span data-stu-id="7f6af-219">Shadow copy required for log backups.</span></span>

</dd> <dt>

<span data-ttu-id="7f6af-220"><span id="VSS_FSBT_ALL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_all_snapshot_required"></span>**VSS \_ FSBT \_ todas las \_ instantáneas \_ necesarias**</span><span class="sxs-lookup"><span data-stu-id="7f6af-220"><span id="VSS_FSBT_ALL_SNAPSHOT_REQUIRED"></span><span id="vss_fsbt_all_snapshot_required"></span>**VSS\_FSBT\_ALL\_SNAPSHOT\_REQUIRED**</span></span>
</dt> <dd>

<span data-ttu-id="7f6af-221">Instantánea necesaria para todos los tipos de copia de seguridad; Este es el valor predeterminado.</span><span class="sxs-lookup"><span data-stu-id="7f6af-221">Shadow copy required for all backup types; this is the default.</span></span>

</dd> </dl>

<span data-ttu-id="7f6af-222">Si un volumen específico solo contiene componentes que no requieren una instantánea para esta copia de seguridad, el solicitante puede omitir el paso de crear una instantánea para este volumen.</span><span class="sxs-lookup"><span data-stu-id="7f6af-222">If a specific volume contains only components that do not require a shadow copy for this backup, the requester can skip the step of creating a shadow copy for this volume.</span></span> <span data-ttu-id="7f6af-223">Todos los datos de este volumen se pueden copiar directamente en el medio de copia de seguridad desde el volumen original.</span><span class="sxs-lookup"><span data-stu-id="7f6af-223">All the data on this volume can be copied to the backup media directly from the original volume.</span></span>

## <a name="restoring-files"></a><span data-ttu-id="7f6af-224">Restaurar archivos</span><span class="sxs-lookup"><span data-stu-id="7f6af-224">Restoring Files</span></span>

### <a name="sequential-restores"></a><span data-ttu-id="7f6af-225">Restauraciones secuenciales</span><span class="sxs-lookup"><span data-stu-id="7f6af-225">Sequential Restores</span></span>

<span data-ttu-id="7f6af-226">Una vez que el solicitante ha terminado de realizar una operación de restauración, envía el evento postrestore a todos los escritores.</span><span class="sxs-lookup"><span data-stu-id="7f6af-226">After the requester is done performing a restore operation, it sends the PostRestore event to all writers.</span></span> <span data-ttu-id="7f6af-227">Por lo general, los escritores controlan este evento realizando una recuperación u otras operaciones posteriores a la restauración.</span><span class="sxs-lookup"><span data-stu-id="7f6af-227">Generally, writers handle this event by performing recovery or other post-restore operations.</span></span> <span data-ttu-id="7f6af-228">La restauración de copias de seguridad incrementales, sin embargo, normalmente se produce como una secuencia de operaciones de restauración, una por copia de seguridad incremental.</span><span class="sxs-lookup"><span data-stu-id="7f6af-228">Restoration of incremental backups, however, usually happen as a sequence of restore operations, one per incremental backup.</span></span> <span data-ttu-id="7f6af-229">El solicitante debe informar al escritor de que dicha restauración está en curso con el fin de evitar que se produzca la recuperación u otras operaciones no deseadas hasta que se complete la restauración.</span><span class="sxs-lookup"><span data-stu-id="7f6af-229">The requester needs to inform the writer that such a restoration is in progress in order to prevent recovery or other undesirable operations from happening until the restore is completely done.</span></span> <span data-ttu-id="7f6af-230">Esto se hace llamando a [**IVssBackupComponents:: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span><span class="sxs-lookup"><span data-stu-id="7f6af-230">This is done by calling [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span></span> <span data-ttu-id="7f6af-231">Se llama a este método por componente e indica al escritor que hay más restauraciones para ese componente.</span><span class="sxs-lookup"><span data-stu-id="7f6af-231">This method is called per component, and indicates to the writer that more restores are coming for that component.</span></span> <span data-ttu-id="7f6af-232">Para la restauración final de la secuencia, la marca Additional-restore debe establecerse en false (su valor predeterminado), lo que indica que se trata de la última restauración de la secuencia de ese componente.</span><span class="sxs-lookup"><span data-stu-id="7f6af-232">For the final restore in the sequence, the additional-restores flag should be set to false (its default value), which indicates that this is the last restore in the sequence for that component.</span></span>

### <a name="new-targets"></a><span data-ttu-id="7f6af-233">Nuevos destinos</span><span class="sxs-lookup"><span data-stu-id="7f6af-233">New Targets</span></span>

<span data-ttu-id="7f6af-234">Si es compatible con el escritor, el solicitante puede restaurar los archivos de datos en una ubicación distinta de la ubicación de la copia de seguridad original.</span><span class="sxs-lookup"><span data-stu-id="7f6af-234">If supported by the writer, the requester can restore data files to a location other than the original backup-time location.</span></span> <span data-ttu-id="7f6af-235">El solicitante puede comprobar esta compatibilidad llamando a [**IVssExamineWriterMetadata:: GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span><span class="sxs-lookup"><span data-stu-id="7f6af-235">The requester can check for this support by calling [**IVssExamineWriterMetadata::GetBackupSchema**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getbackupschema).</span></span> <span data-ttu-id="7f6af-236">**VSS \_ BS \_ Writer \_ admite el \_ nuevo \_** bit de destino se establecerá si el escritor admite este comportamiento.</span><span class="sxs-lookup"><span data-stu-id="7f6af-236">The **VSS\_BS\_WRITER\_SUPPORTS\_NEW\_TARGET** bit will be set if the writer supports this behavior.</span></span> <span data-ttu-id="7f6af-237">El solicitante informa al escritor de la nueva ubicación mediante una llamada a [**IVssBackupComponents:: AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget) para cada especificación de archivo que se ha reubicado.</span><span class="sxs-lookup"><span data-stu-id="7f6af-237">The requester informs the writer of the new location by calling [**IVssBackupComponents::AddNewTarget**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addnewtarget) for each relocated file specification.</span></span> <span data-ttu-id="7f6af-238">El solicitante también puede decidir restaurar un archivo de intervalos específico en una ubicación diferente.</span><span class="sxs-lookup"><span data-stu-id="7f6af-238">The requester can also decide to restore a specific ranges file to a different location.</span></span> <span data-ttu-id="7f6af-239">El solicitante informa al escritor de este cambio mediante una llamada a [**IVssBackupComponents:: SetRangesFilePath**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setrangesfilepath).</span><span class="sxs-lookup"><span data-stu-id="7f6af-239">The requester informs the writer of this change by calling [**IVssBackupComponents::SetRangesFilePath**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setrangesfilepath).</span></span>

### <a name="directed-targets"></a><span data-ttu-id="7f6af-240">Destinos dirigidos</span><span class="sxs-lookup"><span data-stu-id="7f6af-240">Directed Targets</span></span>

<span data-ttu-id="7f6af-241">En escenarios de restauración complicados, es posible que un escritor desee asignar los intervalos de un archivo de copia de seguridad en distintos intervalos del mismo archivo o de otro diferente.</span><span class="sxs-lookup"><span data-stu-id="7f6af-241">For complicated restore scenarios, a writer may want to map ranges of a backed-up file onto different ranges of the same or a different file.</span></span> <span data-ttu-id="7f6af-242">Esto puede realizarse mediante el mecanismo de destino dirigido.</span><span class="sxs-lookup"><span data-stu-id="7f6af-242">This can be done by using the directed target mechanism.</span></span> <span data-ttu-id="7f6af-243">El solicitante puede determinar después de la fase de [**Rerestauración de IVssBackupComponents::P**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) que este mecanismo se usa para un componente mediante una llamada a [**IVssComponent:: GetRestoreTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoretarget) y la comprobación de la devolución de **VSS \_ RT \_ dirigida**.</span><span class="sxs-lookup"><span data-stu-id="7f6af-243">The requester can determine after the [**IVssBackupComponents::PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) phase that this mechanism is being used for a component by calling [**IVssComponent::GetRestoreTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getrestoretarget) and checking for a return of **VSS\_RT\_DIRECTED**.</span></span> <span data-ttu-id="7f6af-244">El solicitante puede obtener todas estas restauraciones redirigidas mediante una llamada a [**IVssComponent:: GetDirectedTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtargetcount) y [**IVssComponent:: GetDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtarget).</span><span class="sxs-lookup"><span data-stu-id="7f6af-244">The requester can than obtain all of these redirected restores by calling [**IVssComponent::GetDirectedTargetCount**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtargetcount) and [**IVssComponent::GetDirectedTarget**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getdirectedtarget).</span></span> <span data-ttu-id="7f6af-245">**IVssComponent:: GetDirectedTarget** devolverá una ruta de acceso completa a un archivo de origen en la copia de seguridad y una ruta de acceso completa a un archivo de destino que se restaurará en.</span><span class="sxs-lookup"><span data-stu-id="7f6af-245">**IVssComponent::GetDirectedTarget** will return a full path to a source file on the backup and a full path to a destination file that will be restored to.</span></span> <span data-ttu-id="7f6af-246">También devuelve una lista de intervalos para cada uno de estos archivos.</span><span class="sxs-lookup"><span data-stu-id="7f6af-246">It also returns a ranges list for each of these files.</span></span> <span data-ttu-id="7f6af-247">A continuación, el solicitante es responsable de restaurar los intervalos especificados en el archivo de código fuente en los intervalos asignados en el archivo de destino.</span><span class="sxs-lookup"><span data-stu-id="7f6af-247">The requester is then responsible for restoring the specified ranges in the source file to the mapped ranges in the destination file.</span></span> <span data-ttu-id="7f6af-248">El formato de la cadena de rangos es el mismo que en [**IVssComponent:: GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span><span class="sxs-lookup"><span data-stu-id="7f6af-248">The format of the ranges string is the same as in [**IVssComponent::GetPartialFile**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpartialfile).</span></span>

-   [<span data-ttu-id="7f6af-249">Rol de escritor en copias de seguridad incrementales y diferenciales de VSS</span><span class="sxs-lookup"><span data-stu-id="7f6af-249">Writer Role in VSS Incremental and Differential Backups</span></span>](writer-role-in-vss-incremental-and-differential-backups.md)
-   [<span data-ttu-id="7f6af-250">Rol de solicitante en copias de seguridad incrementales y diferenciales de VSS</span><span class="sxs-lookup"><span data-stu-id="7f6af-250">Requester Role in VSS Incremental and Differential Backups</span></span>](requestor-role-in-vss-incremental-and-differential-backups.md)

 

 
