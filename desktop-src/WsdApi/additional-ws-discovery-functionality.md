---
description: El propósito de este tema es describir la funcionalidad de detección implementada por WSDAPI, pero que no se describe en las especificaciones de DPWS o WS-Discovery.
ms.assetid: ae7eff53-c932-4cba-9e71-c60f308f0e2d
title: Funcionalidad de WS-Discovery adicional
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ce9856605273bec9c757e0b29c389991bf061309
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104278548"
---
# <a name="additional-ws-discovery-functionality"></a><span data-ttu-id="7e924-103">Funcionalidad de WS-Discovery adicional</span><span class="sxs-lookup"><span data-stu-id="7e924-103">Additional WS-Discovery Functionality</span></span>

<span data-ttu-id="7e924-104">En algunos casos, el [Perfil de dispositivos para servicios web](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) y las especificaciones relacionadas no definen explícitamente la funcionalidad de implementación.</span><span class="sxs-lookup"><span data-stu-id="7e924-104">In some cases, the [Devices Profile for Web Services](https://specs.xmlsoap.org/ws/2006/02/devprof/) (DPWS) and related specifications do not explicitly define implementation functionality.</span></span> <span data-ttu-id="7e924-105">Por ejemplo, la especificación [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) no define el comportamiento del cliente y del host en entornos de host múltiple.</span><span class="sxs-lookup"><span data-stu-id="7e924-105">For example, the [WS-Discovery](https://specs.xmlsoap.org/ws/2005/04/discovery/ws-discovery.pdf) specification does not define client and host behavior in multi-homed environments.</span></span> <span data-ttu-id="7e924-106">Cuando se implementó WSDAPI, se agregó alguna funcionalidad de detección más allá de la funcionalidad definida en la especificación.</span><span class="sxs-lookup"><span data-stu-id="7e924-106">When WSDAPI was implemented, some discovery functionality was added beyond the functionality defined in the specification.</span></span>

<span data-ttu-id="7e924-107">WSDAPI también implementa algunas partes seleccionadas del CD1 de WS-Discovery v 1.1 para comunicarse con un proxy de detección a través de HTTP.</span><span class="sxs-lookup"><span data-stu-id="7e924-107">WSDAPI also implements selected portions of WS-Discovery v1.1 CD1 for communicating with a discovery proxy over HTTP.</span></span>

<span data-ttu-id="7e924-108">El propósito de este tema es describir la funcionalidad de detección implementada por WSDAPI, pero que no se describe en las especificaciones de DPWS o WS-Discovery.</span><span class="sxs-lookup"><span data-stu-id="7e924-108">The purpose of this topic is to describe the discovery functionality implemented by WSDAPI but not otherwise described in the DPWS or WS-Discovery specifications.</span></span>

## <a name="ipv6-addresses-and-the-soapudp-uri-format"></a><span data-ttu-id="7e924-109">Direcciones IPv6 y el formato de URI de SOAP. UDP</span><span class="sxs-lookup"><span data-stu-id="7e924-109">IPv6 addresses and the soap.udp URI format</span></span>

<span data-ttu-id="7e924-110">SOAP-over-UDP y WS-Discovery no describen explícitamente cómo se representa una dirección IPv6 literal en el formato de URI de SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="7e924-110">SOAP-over-UDP and WS-Discovery do not explicitly describe how a literal IPv6 address is represented in the soap.udp URI format.</span></span> <span data-ttu-id="7e924-111">[RFC 2396](https://www.ietf.org/rfc/rfc2396.txt), titulado "identificadores uniformes de recursos (URI): Sintaxis genérica", indica que las direcciones IPv6 literales no son compatibles con el formato URI de SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="7e924-111">[RFC 2396](https://www.ietf.org/rfc/rfc2396.txt), entitled "Uniform Resource Identifiers (URI): Generic Syntax", indicates that literal IPv6 addresses are not supported by the soap.udp URI format.</span></span>

<span data-ttu-id="7e924-112">Para simplificar, WSDAPI reconoce las direcciones IPv6 entre corchetes en el esquema SOAP. UDP.</span><span class="sxs-lookup"><span data-stu-id="7e924-112">For simplicity, WSDAPI recognizes IPv6 addresses enclosed in square brackets in the soap.udp scheme.</span></span> <span data-ttu-id="7e924-113">Por ejemplo, `soap.udp://[2001:abcd:0001:0002:0003:0004:0005:0032]:3702` WSDAPI reconoce la dirección.</span><span class="sxs-lookup"><span data-stu-id="7e924-113">For example, the address `soap.udp://[2001:abcd:0001:0002:0003:0004:0005:0032]:3702` is recognized by WSDAPI.</span></span> <span data-ttu-id="7e924-114">Esto es similar al modo en que se administran las direcciones IPv6 en HTTP.</span><span class="sxs-lookup"><span data-stu-id="7e924-114">This is similar to how IPv6 addresses are handled in HTTP.</span></span>

## <a name="hello-and-xaddrs"></a><span data-ttu-id="7e924-115">Hello y XAddrs</span><span class="sxs-lookup"><span data-stu-id="7e924-115">Hello and XAddrs</span></span>

<span data-ttu-id="7e924-116">El objeto de hospedaje DPWS de WSDAPI nunca enviará un mensaje WS-Discovery [Hola](hello-message.md) con [XAddrs](xaddr-validation-rules.md) en el cuerpo del mensaje.</span><span class="sxs-lookup"><span data-stu-id="7e924-116">WSDAPI's DPWS hosting object will never send a WS-Discovery [Hello](hello-message.md) message with [XAddrs](xaddr-validation-rules.md) in the message body.</span></span> <span data-ttu-id="7e924-117">Un cliente siempre enviará un mensaje de [resolución](resolve-message.md) después de recibir un mensaje de saludo si el cliente necesita obtener el XAddrs.</span><span class="sxs-lookup"><span data-stu-id="7e924-117">A client will always send a [Resolve](resolve-message.md) message after receiving a Hello message if the client needs to get the XAddrs.</span></span>

<span data-ttu-id="7e924-118">Este enfoque tiene dos ventajas.</span><span class="sxs-lookup"><span data-stu-id="7e924-118">There are two benefits of this approach.</span></span> <span data-ttu-id="7e924-119">En primer lugar, un dispositivo generado en WSDAPI nunca expondrá XAddrs que revelen las direcciones IP de las redes privadas.</span><span class="sxs-lookup"><span data-stu-id="7e924-119">First, a device built on WSDAPI will never expose XAddrs that disclose the IP addresses of private networks.</span></span> <span data-ttu-id="7e924-120">En segundo lugar, un dispositivo generado en WSDAPI solo expone XAddrs que son accesibles para el cliente, lo que significa que las direcciones IPv6 no se envían nunca a un cliente IPv4.</span><span class="sxs-lookup"><span data-stu-id="7e924-120">Secondly, a device built on WSDAPI only exposes XAddrs that are accessible to the client, which means that IPv6 addresses are never sent to an IPv4 client.</span></span>

<span data-ttu-id="7e924-121">Cuando se recibe un [sondeo](probe-message.md) o un mensaje de resolución, solo se envía un único XAddr en respuesta.</span><span class="sxs-lookup"><span data-stu-id="7e924-121">When a [Probe](probe-message.md) or Resolve message is received, only a single XAddr is sent in response.</span></span> <span data-ttu-id="7e924-122">El XAddr enviado corresponde a la dirección local en la que se recibió la solicitud.</span><span class="sxs-lookup"><span data-stu-id="7e924-122">The sent XAddr corresponds to the local address on which the request was received.</span></span> <span data-ttu-id="7e924-123">Si la solicitud se recibió entre subredes a través de IPv6, WSDAPI proporcionará una dirección IPv6 global en la respuesta.</span><span class="sxs-lookup"><span data-stu-id="7e924-123">If the request was received across subnets over IPv6, WSDAPI will provide a global IPv6 address in the response.</span></span>

## <a name="preferred-addresses"></a><span data-ttu-id="7e924-124">Direcciones preferidas</span><span class="sxs-lookup"><span data-stu-id="7e924-124">Preferred addresses</span></span>

<span data-ttu-id="7e924-125">Un dispositivo puede proporcionar varios XAddrs en un mensaje [Hello](hello-message.md), [ProbeMatch](probematches-message.md)o [ResolveMatch](resolvematches-message.md) .</span><span class="sxs-lookup"><span data-stu-id="7e924-125">A device can provide multiple XAddrs in a [Hello](hello-message.md), [ProbeMatch](probematches-message.md), or [ResolveMatch](resolvematches-message.md) message.</span></span> <span data-ttu-id="7e924-126">Un servicio también puede estar disponible en varios puntos de conexión con diferentes direcciones de transporte.</span><span class="sxs-lookup"><span data-stu-id="7e924-126">A service can also be available at multiple endpoints with different transport addresses.</span></span> <span data-ttu-id="7e924-127">En estos casos, WSDAPI intentará comunicarse con el dispositivo en la primera dirección utilizable que encuentre.</span><span class="sxs-lookup"><span data-stu-id="7e924-127">In these cases, WSDAPI will try to communicate with the device on the first usable address it finds.</span></span> <span data-ttu-id="7e924-128">Se puede usar una dirección si procede de un protocolo disponible, como IPv4 en un equipo donde está instalado IPv4 o IPv6 en un equipo en el que está instalado IPv6.</span><span class="sxs-lookup"><span data-stu-id="7e924-128">An address is usable if it is from an available protocol, such as IPv4 on a machine where IPv4 is installed or IPv6 on a machine where IPv6 is installed.</span></span> <span data-ttu-id="7e924-129">Además, si la dirección procedía de un dispositivo o servicio que no está en la subred local, solo se puede usar si es IPv4, un sitio IPv6 local o un vínculo IPv6 local.</span><span class="sxs-lookup"><span data-stu-id="7e924-129">Additionally, if the address came from a device or service that is not on the local subnet, it is usable only if it is IPv4, IPv6 site local, or IPv6 link local.</span></span>

## <a name="wsdl-in-metadata-exchange"></a><span data-ttu-id="7e924-130">WSDL en intercambio de metadatos</span><span class="sxs-lookup"><span data-stu-id="7e924-130">WSDL in metadata exchange</span></span>

<span data-ttu-id="7e924-131">Los dispositivos y servicios compilados en WSDAPI no proporcionan su WSDL en el intercambio de metadatos a menos que la aplicación lo extienda para proporcionar esta información.</span><span class="sxs-lookup"><span data-stu-id="7e924-131">Devices and services built on WSDAPI do not provide their WSDL in metadata exchange unless extended by the application to provide this information.</span></span> <span data-ttu-id="7e924-132">De forma predeterminada, el aprovisionamiento de WSDL no forma parte del modelo de programación.</span><span class="sxs-lookup"><span data-stu-id="7e924-132">By default, WSDL provision is not part of the programming model.</span></span>

## <a name="app_max_delay"></a><span data-ttu-id="7e924-133">\_retraso máximo de la aplicación \_</span><span class="sxs-lookup"><span data-stu-id="7e924-133">APP\_MAX\_DELAY</span></span>

<span data-ttu-id="7e924-134">DPWS define \_ \_ el retraso máximo de la aplicación, el intervalo aleatorio para retrasar la recepción de un [sondeo](probe-message.md) y el envío de un [ProbeMatch](probematches-message.md), como 5.000 milisegundos.</span><span class="sxs-lookup"><span data-stu-id="7e924-134">DPWS defines APP\_MAX\_DELAY, the random interval to delay between receiving a [Probe](probe-message.md) and sending a [ProbeMatch](probematches-message.md), as 5,000 milliseconds.</span></span> <span data-ttu-id="7e924-135">El Firewall de Windows requiere que el modelo de respuesta de unidifusión/solicitud de multidifusión para UDP solo funcione dentro de la ventana del firewall de 4 segundos.</span><span class="sxs-lookup"><span data-stu-id="7e924-135">Windows Firewall requires that the multicast request/unicast response model for UDP will only work within the 4 second firewall window.</span></span> <span data-ttu-id="7e924-136">Como resultado, WSDAPI transmitirá respuestas en 2.500 ms o menos, en lugar de la ventana de 5.000 MS descrita por retraso máximo de la aplicación \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="7e924-136">As a result, WSDAPI will transmit responses in 2,500 ms or less, instead of the 5,000 ms window described by APP\_MAX\_DELAY.</span></span>

## <a name="iana-port-reservations"></a><span data-ttu-id="7e924-137">Reservas de Puerto IANA</span><span class="sxs-lookup"><span data-stu-id="7e924-137">IANA port reservations</span></span>

<span data-ttu-id="7e924-138">WSDAPI usa el puerto TCP 5357 para el tráfico HTTP y el puerto TCP 5358 para el tráfico HTTPS de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="7e924-138">WSDAPI uses TCP port 5357 for HTTP traffic and TCP port 5358 for HTTPS traffic by default.</span></span> <span data-ttu-id="7e924-139">Estos puertos se reservan para los procesos con menos privilegios a través de una reserva de direcciones URL en HTTP.sys y también se reservan con IANA.</span><span class="sxs-lookup"><span data-stu-id="7e924-139">These ports are reserved for lower privilege processes through a URL reservation in HTTP.sys, and are also reserved with IANA.</span></span>

## <a name="udp-port-sharing"></a><span data-ttu-id="7e924-140">Uso compartido de puertos UDP</span><span class="sxs-lookup"><span data-stu-id="7e924-140">UDP port sharing</span></span>

<span data-ttu-id="7e924-141">WSDAPI utiliza el uso compartido de puertos.</span><span class="sxs-lookup"><span data-stu-id="7e924-141">WSDAPI uses port sharing.</span></span> <span data-ttu-id="7e924-142">Es posible que todas las aplicaciones basadas en WSDAPI no controlen correctamente los mensajes de unidifusión enviados al puerto 3702.</span><span class="sxs-lookup"><span data-stu-id="7e924-142">Unicast messages sent to port 3702 may not be properly handled by all WSDAPI-based applications.</span></span> <span data-ttu-id="7e924-143">Si una aplicación se enlaza exclusivamente al puerto 3702, puede impedir que las aplicaciones basadas en WSDAPI utilicen correctamente ese puerto.</span><span class="sxs-lookup"><span data-stu-id="7e924-143">If an application binds exclusively to port 3702, it may prevent WSDAPI-based applications from using that port correctly.</span></span>

## <a name="ws-discovery-v11-cd1-proxy"></a><span data-ttu-id="7e924-144">Proxy CD1 de WS-Discovery v 1.1</span><span class="sxs-lookup"><span data-stu-id="7e924-144">WS-Discovery v1.1 CD1 Proxy</span></span>

<span data-ttu-id="7e924-145">WSDAPI buscará y se comunicará con un proxy de detección que implementa el protocolo de modo administrado del CD1 de WS-Discovery v 1.1.</span><span class="sxs-lookup"><span data-stu-id="7e924-145">WSDAPI will search for and communicate with a discovery proxy that implements the WS-Discovery v1.1 CD1 managed mode protocol.</span></span> <span data-ttu-id="7e924-146">WS-Discovery v 1.1 CD1 es la primera revisión de WS-Discovery para incluir una descripción explícita de un protocolo HTTP para la comunicación entre un proxy y un cliente o dispositivo.</span><span class="sxs-lookup"><span data-stu-id="7e924-146">WS-Discovery v1.1 CD1 is the first revision of WS-Discovery to include an explicit description of an HTTP protocol for communication between a proxy and a client or device.</span></span>

<span data-ttu-id="7e924-147">Para limitar el número de versiones simultáneas usadas en las solicitudes de multidifusión, WSDAPI envía una solicitud de sondeo WS-Discovery en el espacio de nombres 2005/04, pero busca el tipo DiscoveryProxy de la WS-Discovery v 1.1.</span><span class="sxs-lookup"><span data-stu-id="7e924-147">To limit the number of concurrent versions used in multicast requests, WSDAPI sends a WS-Discovery Probe request in the 2005/04 namespace, but searches for the WS-Discovery v1.1 CD1 DiscoveryProxy type.</span></span> <span data-ttu-id="7e924-148">Si un proxy responde, WSDAPI enviará un sondeo HTTP o resolverá la solicitud al extremo proxy especificado, tal como se define en el CD1 de WS-Discovery v 1.1.</span><span class="sxs-lookup"><span data-stu-id="7e924-148">If a proxy responds, WSDAPI will send an HTTP Probe or Resolve request to the specified proxy endpoint as defined in WS-Discovery v1.1 CD1.</span></span>

 

 



