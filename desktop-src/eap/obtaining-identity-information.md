---
title: Obtención de información de identidad
description: El proveedor que implementa el protocolo de autenticación también puede proporcionar una interfaz de función que obtiene la información de identificación inicial para el usuario que solicita la autenticación.
ms.assetid: 773c9fdb-c810-4cea-afed-df6484a9c9c9
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bb9519da9d66937fd25245fe78f12ef34c3c0ad8
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/19/2020
ms.locfileid: "104077593"
---
# <a name="obtaining-identity-information"></a><span data-ttu-id="5a19a-103">Obtención de información de identidad</span><span class="sxs-lookup"><span data-stu-id="5a19a-103">Obtaining Identity Information</span></span>

<span data-ttu-id="5a19a-104">El proveedor que implementa el protocolo de autenticación también puede proporcionar una interfaz de función que obtiene la información de identificación inicial para el usuario que solicita la autenticación.</span><span class="sxs-lookup"><span data-stu-id="5a19a-104">The vendor that implements the authentication protocol may also provide a function interface that obtains initial identifying information for the user requesting authentication.</span></span>

<span data-ttu-id="5a19a-105">El proveedor debe implementar las siguientes funciones.</span><span class="sxs-lookup"><span data-stu-id="5a19a-105">The vendor should implement the following functions.</span></span>

-   [<span data-ttu-id="5a19a-106">**RasEapGetIdentity**</span><span class="sxs-lookup"><span data-stu-id="5a19a-106">**RasEapGetIdentity**</span></span>](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity)
-   [<span data-ttu-id="5a19a-107">**RasEapFreeMemory**</span><span class="sxs-lookup"><span data-stu-id="5a19a-107">**RasEapFreeMemory**</span></span>](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory)

<span data-ttu-id="5a19a-108">Estas funciones se pueden implementar en el mismo archivo DLL que el protocolo de autenticación o en un archivo DLL independiente.</span><span class="sxs-lookup"><span data-stu-id="5a19a-108">These functions may be implemented in the same DLL as the authentication protocol, or in a separate DLL.</span></span> <span data-ttu-id="5a19a-109">Además, el archivo DLL que implementa las funciones de identidad puede admitir más de un protocolo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="5a19a-109">Also, the DLL that implements the identity functions may support more than one authentication protocol.</span></span> <span data-ttu-id="5a19a-110">La ruta de acceso al archivo DLL de estas funciones se almacena en el valor del registro de [ \_ \_ \_ identidad de EAP de Ras](authentication-protocol-registry-values.md) , en la clave del Protocolo de autenticación.</span><span class="sxs-lookup"><span data-stu-id="5a19a-110">The path to the DLL for these functions is stored in the [RAS\_EAP\_VALUENAME\_IDENTITY](authentication-protocol-registry-values.md) registry value, under the key for the authentication protocol.</span></span> <span data-ttu-id="5a19a-111">Para obtener más información acerca de cómo crear este valor del registro, vea [instalación de EAP](eap-installation.md).</span><span class="sxs-lookup"><span data-stu-id="5a19a-111">For more information about creating this registry value, see [EAP Installation](eap-installation.md).</span></span>

<span data-ttu-id="5a19a-112">La función [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) normalmente muestra una interfaz de usuario (UI) para obtener información de identidad para el usuario.</span><span class="sxs-lookup"><span data-stu-id="5a19a-112">The [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) function typically displays a user interface (UI) to obtain identity information for the user.</span></span> <span data-ttu-id="5a19a-113">Sin embargo, si el parámetro *dwFlags* contiene la \_ marca \_ no interactiva de marcador EAP ras \_ \_ , **RasEapGetIdentity** no debe mostrar una interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="5a19a-113">However, if the *dwFlags* parameter contains the RAS\_EAP\_FLAG\_NON\_INTERACTIVE flag, **RasEapGetIdentity** should not display a UI.</span></span>

<span data-ttu-id="5a19a-114">Si [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) muestra una interfaz de usuario, la interfaz de usuario debe admitir mensajes de [**\_ comandos de WM**](../menurc/wm-command.md) en los que el valor de [**LOWORD**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85))(*wParam*) sea igual a IDCANCEL.</span><span class="sxs-lookup"><span data-stu-id="5a19a-114">If [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) does display a UI, the UI must support [**WM\_COMMAND**](../menurc/wm-command.md) messages where the value of [**LOWORD**](/previous-versions/windows/desktop/legacy/ms632659(v=vs.85))(*wParam*) is equal to IDCANCEL.</span></span>

<span data-ttu-id="5a19a-115">El servicio de autenticación llama a [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) si el valor [ \_ \_ \_ \_ NAMEDLG del ValueName EAP de Ras](authentication-protocol-registry-values.md) que se encuentra en el registro para este EAP está establecido en cero.</span><span class="sxs-lookup"><span data-stu-id="5a19a-115">The authentication service calls [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) if the [RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG](authentication-protocol-registry-values.md) value that is in the registry for this EAP is set to zero.</span></span> <span data-ttu-id="5a19a-116">Si \_ la invocación de NAMEDLG de EAP de Ras \_ \_ \_ no está presente o está presente y está establecida en uno, el servicio de autenticación muestra el cuadro de diálogo nombre de usuario estándar del sistema.</span><span class="sxs-lookup"><span data-stu-id="5a19a-116">If RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG is not present, or is present and is set to one, the authentication service displays the standard system user name dialog box.</span></span>

<span data-ttu-id="5a19a-117">Además de \_ \_ la invocación de un ValueName EAP de Ras \_ \_ NAMEDLG, el proveedor de EAP puede crear un valor relacionado, la [ \_ \_ \_ invocación de ValueName \_ EAP de Ras PWDDLG](authentication-protocol-registry-values.md), en el registro.</span><span class="sxs-lookup"><span data-stu-id="5a19a-117">In addition to RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG, the EAP vendor may create a related value, [RAS\_EAP\_VALUENAME\_INVOKE\_PWDDLG](authentication-protocol-registry-values.md), in the registry.</span></span> <span data-ttu-id="5a19a-118">Si este valor está presente y se establece en cero, el servicio no mostrará el cuadro de diálogo contraseña del sistema estándar.</span><span class="sxs-lookup"><span data-stu-id="5a19a-118">If this value is present and is set to zero, the service will not display the standard system password dialog.</span></span> <span data-ttu-id="5a19a-119">Este valor es útil cuando se implementa un método biométrico, como un examen de huellas digitales para autenticar al usuario.</span><span class="sxs-lookup"><span data-stu-id="5a19a-119">This value is useful when implementing a biometric method such as a fingerprint scan to authenticate the user.</span></span> <span data-ttu-id="5a19a-120">Si los valores de la invocación de NAMEDLG y el valor de PWDDLG de EAP de ras de RAS \_ \_ \_ \_ \_ \_ \_ \_ son cero, se podría usar una interfaz de usuario de identidad para obtener la información de identidades y biométricas.</span><span class="sxs-lookup"><span data-stu-id="5a19a-120">If both the RAS\_EAP\_VALUENAME\_INVOKE\_NAMEDLG and RAS\_EAP\_VALUENAME\_INVOKE\_PWDDLG values are zero, an identity UI could be used to obtain both the identity and biometric information.</span></span> <span data-ttu-id="5a19a-121">Sin embargo, si solo \_ la invocación de PWDDLG de EAP de Ras \_ \_ \_ es cero, el servicio de autenticación no llamará a [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity).</span><span class="sxs-lookup"><span data-stu-id="5a19a-121">However, if only RAS\_EAP\_VALUENAME\_INVOKE\_PWDDLG is zero, the authentication service will not call [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity).</span></span> <span data-ttu-id="5a19a-122">En este caso, puede usar la [interfaz de usuario interactiva](interactive-user-interface.md) para obtener la información biométrica.</span><span class="sxs-lookup"><span data-stu-id="5a19a-122">In this case, you could use the [interactive user interface](interactive-user-interface.md) to obtain the biometric information.</span></span>

<span data-ttu-id="5a19a-123">Para obtener más información sobre estos valores del registro, consulte [valores del registro del Protocolo de autenticación](authentication-protocol-registry-values.md).</span><span class="sxs-lookup"><span data-stu-id="5a19a-123">For more information on these registry values, see [Authentication Protocol Registry Values](authentication-protocol-registry-values.md).</span></span>

<span data-ttu-id="5a19a-124">La información obtenida por [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) se pasa al Protocolo de autenticación durante la llamada a [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="5a19a-124">The information obtained by [**RasEapGetIdentity**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapgetidentity) is passed to the authentication protocol during the call to [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)).</span></span> <span data-ttu-id="5a19a-125">Los miembros **pszIdentity** y **pUserData** de la estructura de [**\_ \_ entrada EAP de PPP**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) apuntan a la información.</span><span class="sxs-lookup"><span data-stu-id="5a19a-125">The information is pointed to by the **pszIdentity** and **pUserData** members of the [**PPP\_EAP\_INPUT**](/windows/desktop/api/Raseapif/ns-raseapif-ppp_eap_input) structure.</span></span> <span data-ttu-id="5a19a-126">Para guardar esta información en el registro del equipo cliente, el protocolo de autenticación debe devolver la información en el parámetro *pEapOutput* de [**RasEapMakeMessage**](/previous-versions/windows/desktop/legacy/aa363532(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="5a19a-126">To save this information in the registry on the client computer, the authentication protocol should return the information in the *pEapOutput* parameter of [**RasEapMakeMessage**](/previous-versions/windows/desktop/legacy/aa363532(v=vs.85)).</span></span>

<span data-ttu-id="5a19a-127">Después de la llamada a [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)), el servicio de autenticación llama a [**RasEapFreeMemory**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory) para liberar la memoria ocupada por estos datos.</span><span class="sxs-lookup"><span data-stu-id="5a19a-127">After the call to [**RasEapBegin**](/previous-versions/windows/desktop/legacy/aa363520(v=vs.85)), the authentication service calls [**RasEapFreeMemory**](/previous-versions/windows/desktop/api/Raseapif/nf-raseapif-raseapfreememory) to free the memory occupied by this data.</span></span> <span data-ttu-id="5a19a-128">Por lo tanto, el protocolo de autenticación debe copiar la información en un búfer de memoria privado durante la llamada a **RasEapBegin**.</span><span class="sxs-lookup"><span data-stu-id="5a19a-128">Therefore, the authentication protocol should copy the information into a private memory buffer during the call to **RasEapBegin**.</span></span>

 

 