---
title: Información general del modo UILess
description: Información general del modo UILess
ms.assetid: cc0e4936-eab1-452d-9ba1-188401918e99
keywords:
- Text Services Framework (TSF), UILessMode
- TSF (marco de trabajo de servicios de texto), UILessMode
- Aplicaciones habilitadas para TSF, UILessMode
- UILessMode
- Marco de trabajo de servicios de texto (TSF), UIElement de la lista de candidatos
- TSF (marco de trabajo de servicios de texto), UIElement List de Candidate
- Aplicaciones habilitadas para TSF, UIElement de la lista de candidatos
- UIElement de la lista de candidatos
- Marco de trabajo de servicios de texto (TSF), sugerencia de UIElement
- TSF (marco de trabajo de servicios de texto), sugerencia de UIElement
- Aplicaciones habilitadas para TSF, sugerencia de UIElement
- SUGERENCIA de UIElement
- Text Services Framework (TSF), elementos de interfaz de usuario predefinidos
- TSF (marco de trabajo de servicios de texto), elementos de interfaz de usuario predefinidos
- Aplicaciones habilitadas para TSF, elementos de interfaz de usuario predefinidos
- elementos de interfaz de usuario predefinidos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b7354a88fb28fd0d6bf5f4180ac23359a2117fe7
ms.sourcegitcommit: ee06501cc29132927ade9813e0888aaa4decc487
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/28/2021
ms.locfileid: "104558184"
---
# <a name="uiless-mode-overview"></a><span data-ttu-id="abb85-119">Información general del modo UILess</span><span class="sxs-lookup"><span data-stu-id="abb85-119">UILess Mode Overview</span></span>

## <a name="how-to-create-uilessmode"></a><span data-ttu-id="abb85-120">Cómo crear UILessMode</span><span class="sxs-lookup"><span data-stu-id="abb85-120">How to create UILessMode</span></span>

<span data-ttu-id="abb85-121">**Crear subproceso sin interfaz de usuario:** La aplicación puede hacer que una interfaz de usuario sea menos subproceso por [**ITfThreadMgrEx:: ActivateEx**](/windows/desktop/api/Msctf/nf-msctf-itfthreadmgrex-activateex) con ITF \_ AE \_ UIELEMENTENABLEDONLY.</span><span class="sxs-lookup"><span data-stu-id="abb85-121">**Making UI-less Thread:** The application can make a UI Less Thread by [**ITfThreadMgrEx::ActivateEx**](/windows/desktop/api/Msctf/nf-msctf-itfthreadmgrex-activateex) with ITF\_AE\_UIELEMENTENABLEDONLY.</span></span> <span data-ttu-id="abb85-122">Cuando ThreadMgr se activa con esta marca, solo se activan en el subproceso las sugerencias que pueden controlar su elemento de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="abb85-122">When ThreadMgr is activated with this flag, only TIPs that can control its UI element are activated on the thread.</span></span> <span data-ttu-id="abb85-123">La aplicación debe implementar la interfaz [**ITfUIElementSink**](/windows/desktop/api/Msctf/nn-msctf-itfuielementsink) y aconsejar la interfaz en el administrador de subprocesos.</span><span class="sxs-lookup"><span data-stu-id="abb85-123">The application needs to implement [**ITfUIElementSink**](/windows/desktop/api/Msctf/nn-msctf-itfuielementsink) interface and advise the interface into thread manager.</span></span> <span data-ttu-id="abb85-124">Se llama a [**ITfUIElementSink:: BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementsink-beginuielement) cuando la sugerencia muestra su interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="abb85-124">[**ITfUIElementSink::BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementsink-beginuielement) is called when TIP shows its UI.</span></span> <span data-ttu-id="abb85-125">La aplicación puede devolver **true** en el parámetro pbShow para permitir que TIP muestre la interfaz de usuario original de tip cuando la aplicación no desea dibujar.</span><span class="sxs-lookup"><span data-stu-id="abb85-125">The application can return **TRUE** in pbShow param to allow TIP to show TIP's original UI when the application does not want to draw.</span></span> <span data-ttu-id="abb85-126">Si la aplicación no permite la interfaz de usuario de la sugerencia, puede devolver **false** en pbShow (vea los diagramas siguientes).</span><span class="sxs-lookup"><span data-stu-id="abb85-126">If the application does not allow TIP's UI, it can return **FALSE** in pbShow (see diagrams below).</span></span> <span data-ttu-id="abb85-127">La aplicación puede dibujar la interfaz de usuario por sí misma obteniendo cierta información *del parámetro de* el parámetro de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="abb85-127">The application can draw the UI by itself by getting some information from the *pElement* param.</span></span> <span data-ttu-id="abb85-128">Podría ser la lista de candidatos, el elemento de la barra de idioma o la interfaz de usuario personalizada de TIP.</span><span class="sxs-lookup"><span data-stu-id="abb85-128">It could be the candidate list, the language bar item, or the custom UI of TIP.</span></span> <span data-ttu-id="abb85-129">La aplicación puede conocer el tipo de interfaz de usuario de QIing [**ITfUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfuielement) .</span><span class="sxs-lookup"><span data-stu-id="abb85-129">The application can know the kind of UI by QIing [**ITfUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfuielement) interface.</span></span> <span data-ttu-id="abb85-130">Cuando se cambia la interfaz de usuario, se llama a [**ITfUIElementSink:: UpdateUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementsink-updateuielement) .</span><span class="sxs-lookup"><span data-stu-id="abb85-130">When the UI is changed, [**ITfUIElementSink::UpdateUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementsink-updateuielement) is called.</span></span> <span data-ttu-id="abb85-131">La aplicación puede comparar el GUID de la >GetGUID () para saber si el elemento está dibujado actualmente por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="abb85-131">The application can compare the GUID from pElement->GetGUID() to know if the element is currently drawn by the application.</span></span>

<span data-ttu-id="abb85-132">**Sugerencias para la interfaz de usuario sin tener en cuenta:** SUGERENCIA debe admitir el modo menos de la interfaz de usuario si desea ejecutarse en la aplicación que no desea permitir la interfaz de usuario de la sugerencia, como aplicación de juego o aplicaciones de pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="abb85-132">**Making UI-less Aware TIP:** TIP should support UI less mode if it wants to run under the application that does not want to allow TIP's UI such as game application or full screen applications.</span></span> <span data-ttu-id="abb85-133">Para que la interfaz de usuario sea menos consciente, la sugerencia debe implementar la interfaz [**ITfTextInputProcessorEx**](/windows/desktop/api/Msctf/nn-msctf-itftextinputprocessorex) .</span><span class="sxs-lookup"><span data-stu-id="abb85-133">To be UI less aware, TIP needs to implement [**ITfTextInputProcessorEx**](/windows/desktop/api/Msctf/nn-msctf-itftextinputprocessorex) interface.</span></span> <span data-ttu-id="abb85-134">Si no se implementa esta interfaz, la sugerencia no se activará en el subproceso de la interfaz de usuario menos el modo.</span><span class="sxs-lookup"><span data-stu-id="abb85-134">If this interface is not implemented, TIP will not be activated under the UI less mode thread.</span></span> <span data-ttu-id="abb85-135">Además, la sugerencia debe llamar a [**ITFUIElementMgr:: BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementmgr-beginuielement) antes de mostrar una interfaz de usuario visible en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="abb85-135">In addition, TIP must call [**ITFUIElementMgr::BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementmgr-beginuielement) before it shows a visible UI to the screen.</span></span> <span data-ttu-id="abb85-136">Este método realiza una llamada a [**ITfUIElementSink**](/windows/desktop/api/Msctf/nn-msctf-itfuielementsink) para notificar a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="abb85-136">This method makes a call to [**ITfUIElementSink**](/windows/desktop/api/Msctf/nn-msctf-itfuielementsink) to notify the application.</span></span> <span data-ttu-id="abb85-137">Y la aplicación decidirá si puede mostrarse o no.</span><span class="sxs-lookup"><span data-stu-id="abb85-137">And the application will decide if it can be shown or not.</span></span> <span data-ttu-id="abb85-138">Cuando TIP llama a BeginUIElement (), la sugerencia debe tener la interfaz [**ITfUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfuielement) para la interfaz de usuario correspondiente.</span><span class="sxs-lookup"><span data-stu-id="abb85-138">When TIP calls BeginUIElement(), TIP needs to have the [**ITfUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfuielement) interface for the corresponding UI.</span></span> <span data-ttu-id="abb85-139">La aplicación QI la interfaz para obtener otra interfaz específica de la interfaz de usuario para recuperar más información para dibujar la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="abb85-139">The application will QI the interface to get another UI specific interface to retrieve more information to draw the UI.</span></span> <span data-ttu-id="abb85-140">System predefine [**ITfCandidateListUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfcandidatelistuielement) y [**ITfReadingInformationUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfreadinginformationuielement) para tip.</span><span class="sxs-lookup"><span data-stu-id="abb85-140">System predefines [**ITfCandidateListUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfcandidatelistuielement) and [**ITfReadingInformationUIElement**](/windows/desktop/api/Msctf/nn-msctf-itfreadinginformationuielement) for TIP.</span></span> <span data-ttu-id="abb85-141">Cuando la sugerencia desea mostrar la lista de candidatos en el subproceso de la interfaz de usuario menos el modo, TIP debe crear una instancia de la interfaz **ITfCandidateListUIElement** y llamar a **ITFUIElementMgr:: BeginUIElement**.</span><span class="sxs-lookup"><span data-stu-id="abb85-141">When TIP wants to show the candidate list under UI less mode thread, TIP must create an instance of the **ITfCandidateListUIElement** interface and call **ITFUIElementMgr::BeginUIElement**.</span></span> <span data-ttu-id="abb85-142">Cuando se llama a [**ITfTextInputProcessorEx:: ActivateEx**](/windows/desktop/api/Msctf/nf-msctf-itftextinputprocessorex-activateex) , TIP ya sabe que el subproceso es una interfaz de usuario menos que puede eliminar la interfaz de usuario personalizada adicional.</span><span class="sxs-lookup"><span data-stu-id="abb85-142">When [**ITfTextInputProcessorEx::ActivateEx**](/windows/desktop/api/Msctf/nf-msctf-itftextinputprocessorex-activateex) is called, TIP already know the thread is UI less more so it can eliminate the extra custom UI.</span></span> <span data-ttu-id="abb85-143">Sin embargo, por supuesto, puede implementar su propia interfaz que se puede QIed desde e intentar realizar una notificación.</span><span class="sxs-lookup"><span data-stu-id="abb85-143">However, of course, it can implement its own interface that can be QIed from and try to make a notification.</span></span> <span data-ttu-id="abb85-144">Por lo tanto, la sugerencia y las **ITfUIElement** de la variable pueden tener una negociación para la interfaz de usuario personalizada de la sugerencia.</span><span class="sxs-lookup"><span data-stu-id="abb85-144">Thus TIP and the appli **ITfUIElement** cation can have a negotiation for the TIP custom UI.</span></span>

## <a name="uielement-supporting-tip"></a><span data-ttu-id="abb85-145">SUGERENCIA compatible con UIElement</span><span class="sxs-lookup"><span data-stu-id="abb85-145">UIElement Supporting TIP</span></span>

<span data-ttu-id="abb85-146">La sugerencia que admite el UIElement debe estar clasificada por el GUID \_ TFCAT \_ TIPCAP \_ UIELEMENTENABLED.</span><span class="sxs-lookup"><span data-stu-id="abb85-146">The TIP that supports the UIElement must be categorized by GUID\_TFCAT\_TIPCAP\_UIELEMENTENABLED.</span></span> <span data-ttu-id="abb85-147">La sugerencia en GUID \_ TFCAT \_ TIPCAP \_ UIELEMENTENABLED debe usar [**ITfUIElementMgr**](/windows/desktop/api/Msctf/nn-msctf-itfuielementmgr) para mostrar cualquier interfaz de usuario para que la aplicación pueda controlar la visibilidad de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="abb85-147">The TIP in GUID\_TFCAT\_TIPCAP\_UIELEMENTENABLED must use [**ITfUIElementMgr**](/windows/desktop/api/Msctf/nn-msctf-itfuielementmgr) to show any UI so the application can control the visibility of the UI.</span></span>

<span data-ttu-id="abb85-148">**Mostrar u ocultar estado de UIElement:** Mostrar u ocultar el estado que indica el método [**ITfUIElement:: show**](/windows/desktop/api/Msctf/nf-msctf-itfuielement-show) o [**ITfUIElement:: IsShown**](/windows/desktop/api/Msctf/nf-msctf-itfuielement-isshown) es el estado visible real.</span><span class="sxs-lookup"><span data-stu-id="abb85-148">**Show/Hide status of UIElement:** Show/Hide status that is indicated by [**ITfUIElement::Show**](/windows/desktop/api/Msctf/nf-msctf-itfuielement-show) or [**ITfUIElement::IsShown**](/windows/desktop/api/Msctf/nf-msctf-itfuielement-isshown) method is the actual visible status.</span></span> <span data-ttu-id="abb85-149">No está relacionado con la disponibilidad de UIElement.</span><span class="sxs-lookup"><span data-stu-id="abb85-149">It is not related to the availability of UIElement.</span></span> <span data-ttu-id="abb85-150">UIElement siempre debe estar disponible cuando el estado de la presentación existe.</span><span class="sxs-lookup"><span data-stu-id="abb85-150">UIElement should be always available when the show status exists.</span></span> <span data-ttu-id="abb85-151">El estado de la presentación es controlable desde la aplicación.</span><span class="sxs-lookup"><span data-stu-id="abb85-151">The show status is controllable from the application.</span></span> <span data-ttu-id="abb85-152">La aplicación puede pasar repentinamente al modo UILess y empezar a dibujar una interfaz de usuario por sí misma, llamando a **ITfUIElement:: show** con **false** para ocultar toda la interfaz de usuario de la sugerencia.</span><span class="sxs-lookup"><span data-stu-id="abb85-152">The application may suddenly move into UILess mode and start drawing some UI by itself, by calling **ITfUIElement::Show** with **FALSE** to hide all the UI of TIP.</span></span> <span data-ttu-id="abb85-153">A continuación, la sugerencia puede tomar una de algunas opciones.</span><span class="sxs-lookup"><span data-stu-id="abb85-153">Then TIP can take one of some options.</span></span> <span data-ttu-id="abb85-154">1) la sugerencia puede trasladar el UIElement al estado de ocultación y comenzar a generar UpdateUIElement.</span><span class="sxs-lookup"><span data-stu-id="abb85-154">1) TIP can move the UIElement to the Hide status and start generating UpdateUIElement.</span></span> <span data-ttu-id="abb85-155">2) la sugerencia puede finalizar UIElement ya que el elemento de la interfaz de usuario no admite el estado de ocultación y la sugerencia llama a EndUIElement () para finalizarlo.</span><span class="sxs-lookup"><span data-stu-id="abb85-155">2) TIP can finish UIElement since the UI element does not support Hide status and Tip calls EndUIElement() to finish it.</span></span>

## <a name="predefined-ui-elements"></a><span data-ttu-id="abb85-156">Elementos de interfaz de usuario predefinidos</span><span class="sxs-lookup"><span data-stu-id="abb85-156">Predefined UI Elements</span></span>

<span data-ttu-id="abb85-157">**La lista de candidatos:** La lista de candidatos es uno de los principales elementos de la interfaz de usuario para la entrada EA.</span><span class="sxs-lookup"><span data-stu-id="abb85-157">**The candidate list:** The candidate list is one of the major UI elements for EA input.</span></span> <span data-ttu-id="abb85-158">Este elemento de la interfaz de usuario proporciona la lista de candidatos y el número correspondiente de las cadenas candidatas para el dibujo.</span><span class="sxs-lookup"><span data-stu-id="abb85-158">This UI Element provides the candidate list and corresponding number of the candidate strings for drawing.</span></span>

<span data-ttu-id="abb85-159">**Ventana de información de lectura** La ventana de información de lectura es común para la entrada de teclado en chino.</span><span class="sxs-lookup"><span data-stu-id="abb85-159">**The reading information window** The reading information window is common for Chinese Keyboard Input.</span></span> <span data-ttu-id="abb85-160">Tiene la fase que no se puede insertar en el documento como la cadena de composición.</span><span class="sxs-lookup"><span data-stu-id="abb85-160">It has the stage that cannot be inserted into the document as the composition string.</span></span> <span data-ttu-id="abb85-161">Algunos procesadores de entrada en chino abren una pequeña ventana de información de lectura que muestra la información de lectura, fonética o de escritura.</span><span class="sxs-lookup"><span data-stu-id="abb85-161">Some Chinese Input Processor opens a small reading information window that shows the reading, phonetic or typing information.</span></span>

## <a name="the-flow-chart-of-uilessmode"></a><span data-ttu-id="abb85-162">El gráfico de flujo de UILessMode</span><span class="sxs-lookup"><span data-stu-id="abb85-162">The flow chart of UILessMode</span></span>

![Diagrama que muestra el gráfico de flujo U I LessMode.](images/tsf-uilessmode-ovw1.gif)

<span data-ttu-id="abb85-164">Una vez que la sugerencia recibe **true** en \* pbShown por [**ITfUIElementMgr:: BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementmgr-beginuielement), la sugerencia no tiene que llamar a UpdateUIElement para el UIElement.</span><span class="sxs-lookup"><span data-stu-id="abb85-164">After the TIP receives **TRUE** in \*pbShown by [**ITfUIElementMgr::BeginUIElement**](/windows/desktop/api/Msctf/nf-msctf-itfuielementmgr-beginuielement), the TIP does not have to call UpdateUIElement for the UIElement.</span></span> <span data-ttu-id="abb85-165">Pero TIP debe llamar a EndUIElement () para que [**ITfUIElementMgr**](/windows/desktop/api/Msctf/nn-msctf-itfuielementmgr) y la aplicación puedan realizar el seguimiento del estado de UIElement.</span><span class="sxs-lookup"><span data-stu-id="abb85-165">But TIP needs to call EndUIElement() so the [**ITfUIElementMgr**](/windows/desktop/api/Msctf/nn-msctf-itfuielementmgr) and the application can track the status of UIElement.</span></span> <span data-ttu-id="abb85-166">TIP debe llamar a UpdateUIElement () después de que BeginUIElement () devuelva **false** en \* pbShow.</span><span class="sxs-lookup"><span data-stu-id="abb85-166">TIP must calls UpdateUIElement() after BeginUIElement() returns **FALSE** in \*pbShow.</span></span> <span data-ttu-id="abb85-167">La aplicación que desea dibujar la interfaz de usuario no comprueba el contenido de BeginUIElement (), simplemente devuelve el estado de la presentación en BeginUIElement () y comienza a comprobar el contenido en UpdateUIElement ().</span><span class="sxs-lookup"><span data-stu-id="abb85-167">The application that wants to draw the UI does not check the contents in BeginUIElement(), it just returns the show status at BeginUIElement() and starts checking the contents at UpdateUIElement().</span></span> <span data-ttu-id="abb85-168">Por ejemplo, la marca de actualización del UIElement de la lista de candidatos tiene todos los bits en la primera UpdateUIElement ().</span><span class="sxs-lookup"><span data-stu-id="abb85-168">For example, the update flag of the candidate list UIElement has all bits at the first UpdateUIElement().</span></span> <span data-ttu-id="abb85-169">Esto significa que el contenido de UIElement no tiene que estar listo en BeginUIElement ().</span><span class="sxs-lookup"><span data-stu-id="abb85-169">This means that the contents of UIElement does not have to be ready at BeginUIElement().</span></span>

![Diagrama que muestra cuando se llama a ' ITUIElementMgr:: BeginUIElement () ' y ' BeginUIElement of UIElementSink ' de la aplicación.](images/tsf-uilessmode-ovw2.gif)![Diagrama que muestra la aplicación devuelve FALSE en \* pbShow.](images/tsf-uilessmode-ovw3.gif)![diagrama de flujo de uilessmode](images/tsf-uilessmode-ovw4.gif)

## <a name="the-candidate-list-uielement"></a><span data-ttu-id="abb85-173">UIElement de la lista de candidatos</span><span class="sxs-lookup"><span data-stu-id="abb85-173">The candidate list UIElement</span></span>

<span data-ttu-id="abb85-174">**Acerca de PageIndex:** La aplicación que dibuja la lista de candidatos calculará el número de cadenas por página cuando se cambie el contenido de la lista ( \_ \_ se establece TF CLUIE String).</span><span class="sxs-lookup"><span data-stu-id="abb85-174">**About PageIndex:** The application that draws the candidate list will calculate the number of strings per page when the contents of the list is changed (TF\_CLUIE\_STRING is set).</span></span> <span data-ttu-id="abb85-175">No es conveniente cambiar el índice de la página mientras que la lista de candidatos está disponible para el modo UILess.</span><span class="sxs-lookup"><span data-stu-id="abb85-175">It is not good to change the page index while the candidate list is available for UILess mode.</span></span> <span data-ttu-id="abb85-176">Esto significa que la lista de candidatos de la sugerencia debe comportarse en lugar de desplazarse cuando la selección se mueve a la página siguiente.</span><span class="sxs-lookup"><span data-stu-id="abb85-176">This means that TIP's candidate list should behave the paging rather than scrolling when the selection is moved to the next page.</span></span> <span data-ttu-id="abb85-177">Si el desplazamiento se produce cuando se mueve la selección, se cambia el índice de la página y la aplicación necesita volver a calcular el índice de la página.</span><span class="sxs-lookup"><span data-stu-id="abb85-177">If the scroll happens at the selection moves, the page index is changed and the application needs to recalculate the page index.</span></span> <span data-ttu-id="abb85-178">Es posible que el resultado no sea el esperado por la sugerencia.</span><span class="sxs-lookup"><span data-stu-id="abb85-178">The result may not be expected by TIP.</span></span>

<span data-ttu-id="abb85-179">**Ninguna selección:** [**ITfCandidateListUIElement:: getSelection**](/windows/desktop/api/Msctf/nf-msctf-itfcandidatelistuielement-getselection) devuelve S \_ false, si la lista de candidatos no tiene una selección.</span><span class="sxs-lookup"><span data-stu-id="abb85-179">**No Selection:** [**ITfCandidateListUIElement::GetSelection**](/windows/desktop/api/Msctf/nf-msctf-itfcandidatelistuielement-getselection) returns S\_FALSE, if the candidate list does not have a selection.</span></span> <span data-ttu-id="abb85-180">El valor devuelto del primer parámetro no es válido.</span><span class="sxs-lookup"><span data-stu-id="abb85-180">The return value of the first param is invalid.</span></span>

 

 




