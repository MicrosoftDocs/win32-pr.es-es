---
description: Conexión inteligente
ms.assetid: 938ba1b0-822e-4871-8786-b7eeee243867
title: Conexión inteligente
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 12aead305867ccec1f1f1f0cbd76c652ba3ec412
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104495479"
---
# <a name="intelligent-connect"></a><span data-ttu-id="bfad8-103">Conexión inteligente</span><span class="sxs-lookup"><span data-stu-id="bfad8-103">Intelligent Connect</span></span>

<span data-ttu-id="bfad8-104">Conexión inteligente es el mecanismo que utiliza el administrador de gráficos de filtro para generar gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="bfad8-104">Intelligent Connect is the mechanism the Filter Graph Manager uses to build filter graphs.</span></span> <span data-ttu-id="bfad8-105">Consta de varios algoritmos relacionados que seleccionan filtros y los agregan al gráfico de filtros.</span><span class="sxs-lookup"><span data-stu-id="bfad8-105">It consists of several related algorithms that select filters and add them to the filter graph.</span></span>

<span data-ttu-id="bfad8-106">Lea este tema si tiene problemas para crear un gráfico de filtros determinado y desea solucionar el problema, o si está escribiendo su propio filtro y desea que esté disponible para la creación automática de gráficos.</span><span class="sxs-lookup"><span data-stu-id="bfad8-106">Read this topic if you are having trouble building a certain filter graph and want to troubleshoot the problem, or if you are writing your own filter and want to make it available for automatic graph building.</span></span>

<span data-ttu-id="bfad8-107">La conexión inteligente implica los siguientes métodos [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) :</span><span class="sxs-lookup"><span data-stu-id="bfad8-107">Intelligent Connect involves the following [**IGraphBuilder**](/windows/desktop/api/Strmif/nn-strmif-igraphbuilder) methods:</span></span>

-   [<span data-ttu-id="bfad8-108">**IGraphBuilder::AddSourceFilter**</span><span class="sxs-lookup"><span data-stu-id="bfad8-108">**IGraphBuilder::AddSourceFilter**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter)
-   [<span data-ttu-id="bfad8-109">**IGraphBuilder:: Render**</span><span class="sxs-lookup"><span data-stu-id="bfad8-109">**IGraphBuilder::Render**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render)
-   [<span data-ttu-id="bfad8-110">**IGraphBuilder:: RenderFile**</span><span class="sxs-lookup"><span data-stu-id="bfad8-110">**IGraphBuilder::RenderFile**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile)
-   [<span data-ttu-id="bfad8-111">**IGraphBuilder:: Connect**</span><span class="sxs-lookup"><span data-stu-id="bfad8-111">**IGraphBuilder::Connect**</span></span>](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect)

### <a name="igraphbuilderaddsourcefilter"></a><span data-ttu-id="bfad8-112">IGraphBuilder::AddSourceFilter</span><span class="sxs-lookup"><span data-stu-id="bfad8-112">IGraphBuilder::AddSourceFilter</span></span>

<span data-ttu-id="bfad8-113">El método [**IGraphBuilder:: AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) agrega un filtro de origen que puede representar un archivo especificado.</span><span class="sxs-lookup"><span data-stu-id="bfad8-113">The [**IGraphBuilder::AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) method adds a source filter that can render a specified file.</span></span> <span data-ttu-id="bfad8-114">Primero busca en el registro y coincide con el protocolo (como `https://` ), la extensión de nombre de archivo o un conjunto de *bytes de comprobación* predeterminados, que son bytes en determinados desplazamientos en el archivo que coinciden con determinados patrones.</span><span class="sxs-lookup"><span data-stu-id="bfad8-114">First it looks in the registry and matches against the protocol (such as `https://`), the file name extension, or a set of predetermined *check bytes*, which are bytes at particular offsets in the file that match certain patterns.</span></span> <span data-ttu-id="bfad8-115">Para obtener más información, consulte [registrar un tipo de archivo personalizado](registering-a-custom-file-type.md).</span><span class="sxs-lookup"><span data-stu-id="bfad8-115">For details, see [Registering a Custom File Type](registering-a-custom-file-type.md).</span></span> <span data-ttu-id="bfad8-116">Suponiendo que el método busca un filtro de origen adecuado, crea una instancia de ese filtro, lo agrega al gráfico y llama al método [**IFileSourceFilter:: Load**](/windows/desktop/api/Strmif/nf-strmif-ifilesourcefilter-load) del filtro con el nombre de archivo.</span><span class="sxs-lookup"><span data-stu-id="bfad8-116">Assuming that the method locates an appropriate source filter, it then creates an instance of that filter, adds it to the graph, and calls the filter's [**IFileSourceFilter::Load**](/windows/desktop/api/Strmif/nf-strmif-ifilesourcefilter-load) method with the file name.</span></span>

### <a name="igraphbuilderrender"></a><span data-ttu-id="bfad8-117">IGraphBuilder:: Render</span><span class="sxs-lookup"><span data-stu-id="bfad8-117">IGraphBuilder::Render</span></span>

<span data-ttu-id="bfad8-118">El método [**IGraphBuilder:: Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) crea una subsección de un gráfico.</span><span class="sxs-lookup"><span data-stu-id="bfad8-118">The [**IGraphBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method builds a subsection of a graph.</span></span> <span data-ttu-id="bfad8-119">Se inicia a partir de un PIN de salida no conectado y funciona de forma descendente, agregando nuevos filtros según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="bfad8-119">It starts from an unconnected output pin and works downstream, adding new filters as needed.</span></span> <span data-ttu-id="bfad8-120">El filtro inicial debe estar ya en el gráfico.</span><span class="sxs-lookup"><span data-stu-id="bfad8-120">The starting filter must already be in the graph.</span></span> <span data-ttu-id="bfad8-121">En cada paso, el método **Render** busca un filtro que pueda conectarse al filtro anterior.</span><span class="sxs-lookup"><span data-stu-id="bfad8-121">At each step, the **Render** method searches for a filter that can connect to the previous filter.</span></span> <span data-ttu-id="bfad8-122">La secuencia se puede bifurcar si un filtro de conexión tiene varios terminales de salida.</span><span class="sxs-lookup"><span data-stu-id="bfad8-122">The stream can branch if a connecting filter has multiple output pins.</span></span> <span data-ttu-id="bfad8-123">La búsqueda se detiene cuando cada flujo tiene un representador.</span><span class="sxs-lookup"><span data-stu-id="bfad8-123">The search stops when every stream has a renderer.</span></span> <span data-ttu-id="bfad8-124">Si el método **Render** se bloquea, podría hacer una copia de seguridad e intentarlo de nuevo, con un conjunto diferente de filtros.</span><span class="sxs-lookup"><span data-stu-id="bfad8-124">If the **Render** method gets stuck, it might back up and try again, using a different set of filters.</span></span>

<span data-ttu-id="bfad8-125">Para conectar cada pin de salida, el método [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) hace lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="bfad8-125">To connect each output pin, the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method does the following:</span></span>

1.  <span data-ttu-id="bfad8-126">Si el PIN es compatible con la interfaz [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder) , el administrador de gráficos de filtro delega el proceso completo en el método [**IStreamBuilder:: Render**](/windows/desktop/api/Strmif/nf-strmif-istreambuilder-render) del PIN.</span><span class="sxs-lookup"><span data-stu-id="bfad8-126">If the pin supports the [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder) interface, the Filter Graph Manager delegates the entire process to the pin's [**IStreamBuilder::Render**](/windows/desktop/api/Strmif/nf-strmif-istreambuilder-render) method.</span></span> <span data-ttu-id="bfad8-127">Al exponer esta interfaz, el PIN asume la responsabilidad de crear el resto del gráfico, hasta el representador.</span><span class="sxs-lookup"><span data-stu-id="bfad8-127">By exposing this interface, the pin assumes responsibility for building the remainder of the graph, down to the renderer.</span></span> <span data-ttu-id="bfad8-128">Sin embargo, muy pocos PIN admiten esta interfaz.</span><span class="sxs-lookup"><span data-stu-id="bfad8-128">However, very few pins support this interface.</span></span>
2.  <span data-ttu-id="bfad8-129">El administrador de gráficos de filtro intenta utilizar los filtros que se almacenan en la memoria caché, si los hay.</span><span class="sxs-lookup"><span data-stu-id="bfad8-129">The Filter Graph Manager tries to use filters that are cached in memory, if any.</span></span> <span data-ttu-id="bfad8-130">A lo largo del proceso de conexión inteligente, el administrador de gráficos de filtro puede almacenar en caché filtros de pasos anteriores en el proceso.</span><span class="sxs-lookup"><span data-stu-id="bfad8-130">Throughout the Intelligent Connect process, the Filter Graph Manager may cache filters from earlier steps in the process.</span></span> <span data-ttu-id="bfad8-131">(Consulte también [creación de gráficos dinámicos](dynamic-graph-building.md)).</span><span class="sxs-lookup"><span data-stu-id="bfad8-131">(Also, see [Dynamic Graph Building](dynamic-graph-building.md).)</span></span>
3.  <span data-ttu-id="bfad8-132">Si el gráfico de filtros contiene algún filtro con clavijas de entrada sin conexión, el administrador de gráficos de filtro los probará.</span><span class="sxs-lookup"><span data-stu-id="bfad8-132">If the filter graph contains any filters with unconnected input pins, the Filter Graph Manager tries them next.</span></span> <span data-ttu-id="bfad8-133">Puede forzar que el método [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) intente un filtro determinado agregando ese filtro al gráfico antes de llamar a **Render**.</span><span class="sxs-lookup"><span data-stu-id="bfad8-133">You can force the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method to try a particular filter by adding that filter to the graph before calling **Render**.</span></span>
4.  <span data-ttu-id="bfad8-134">A partir de Windows 7, DirectShow tiene una lista de filtros preferidos para determinados subtipos de medios.</span><span class="sxs-lookup"><span data-stu-id="bfad8-134">Starting in Windows 7, DirectShow has a list of preferred filters for certain media subtypes.</span></span> <span data-ttu-id="bfad8-135">Si hay un filtro preferido para el tipo de medio que se está representando, el administrador de gráficos de filtro intentará el filtro siguiente.</span><span class="sxs-lookup"><span data-stu-id="bfad8-135">If there is a preferred filter for the media type that is being rendered, the Filter Graph Manager tries that filter next.</span></span> <span data-ttu-id="bfad8-136">Una aplicación puede modificar la lista de filtros preferidos mediante la interfaz [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) .</span><span class="sxs-lookup"><span data-stu-id="bfad8-136">An application can modify the list of preferred filters by using the [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) interface.</span></span> <span data-ttu-id="bfad8-137">Los cambios en la lista afectan al proceso actual de la aplicación y se descartan una vez finalizado el proceso.</span><span class="sxs-lookup"><span data-stu-id="bfad8-137">Changes to the list affect the application's current process, and are discarded after the process ends.</span></span>
5.  <span data-ttu-id="bfad8-138">Por último, si no se encuentra ningún filtro adecuado, el administrador de gráficos de filtros busca en el registro mediante el método [**IFilterMapper2:: EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) .</span><span class="sxs-lookup"><span data-stu-id="bfad8-138">Finally, if no suitable filter has been found, the Filter Graph Manager searches the registry, using the [**IFilterMapper2::EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) method.</span></span> <span data-ttu-id="bfad8-139">Intenta hacer coincidir los tipos de medios preferidos del terminal de salida con los tipos de medios que se enumeran en el registro.</span><span class="sxs-lookup"><span data-stu-id="bfad8-139">It tries to match the output pin's preferred media types against media types listed in the registry.</span></span>

    <span data-ttu-id="bfad8-140">Cada filtro se registra con un *mérito*, un valor numérico que indica la preferencia del filtro, con respecto a otros filtros.</span><span class="sxs-lookup"><span data-stu-id="bfad8-140">Each filter is registered with a *merit*, a numerical value that indicates how preferable the filter is, relative to other filters.</span></span> <span data-ttu-id="bfad8-141">El método [**EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) devuelve los filtros en orden de mérito, con una cantidad mínima de **méritos que \_ \_ no \_ usa** + 1.</span><span class="sxs-lookup"><span data-stu-id="bfad8-141">The [**EnumMatchingFilters**](/windows/desktop/api/Strmif/nf-strmif-ifiltermapper2-enummatchingfilters) method returns filters in order of merit, with a minimum merit of **MERIT\_DO\_NOT\_USE** + 1.</span></span> <span data-ttu-id="bfad8-142">Omite los filtros con un mérito de **mérito \_ \_ no \_ usar** o menos.</span><span class="sxs-lookup"><span data-stu-id="bfad8-142">It ignores filters with a merit of **MERIT\_DO\_NOT\_USE** or less.</span></span> <span data-ttu-id="bfad8-143">Los filtros también se agrupan en categorías, definidas por GUID.</span><span class="sxs-lookup"><span data-stu-id="bfad8-143">Filters are also grouped into categories, defined by GUID.</span></span> <span data-ttu-id="bfad8-144">Las propias categorías tienen méritos, y el método **EnumMatchingFilters** omite cualquier categoría con un mérito **de \_ mérito \_ no \_ utiliza** o menos, incluso si los filtros de esa categoría tienen valores de méritos más altos.</span><span class="sxs-lookup"><span data-stu-id="bfad8-144">Categories themselves have merit, and the **EnumMatchingFilters** method ignores any category with a merit of **MERIT\_DO\_NOT\_USE** or less, even if the filters in that category have higher merit values.</span></span>

    <span data-ttu-id="bfad8-145">A partir de Windows 7, DirectShow tiene una lista de filtros bloqueados para determinados subtipos de medios.</span><span class="sxs-lookup"><span data-stu-id="bfad8-145">Starting in Windows 7, DirectShow has a list of blocked filters for certain media subtypes.</span></span> <span data-ttu-id="bfad8-146">El administrador de gráficos de filtro omite los filtros de esta lista.</span><span class="sxs-lookup"><span data-stu-id="bfad8-146">The Filter Graph Manager skips filters on this list.</span></span> <span data-ttu-id="bfad8-147">Una aplicación puede modificar la lista de filtros bloqueados mediante la interfaz [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) .</span><span class="sxs-lookup"><span data-stu-id="bfad8-147">An application can modify the list of blocked filters by using the [**IAMPluginControl**](/windows/desktop/api/Strmif/nn-strmif-iamplugincontrol) interface.</span></span> <span data-ttu-id="bfad8-148">Los cambios en esta lista afectan al proceso actual de la aplicación y se descartan una vez finalizado el proceso.</span><span class="sxs-lookup"><span data-stu-id="bfad8-148">Changes to this list affect the application's current process, and are discarded after the process ends.</span></span>

<span data-ttu-id="bfad8-149">En Resumen, el método [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) intenta filtrar en el orden siguiente:</span><span class="sxs-lookup"><span data-stu-id="bfad8-149">To summarize, the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method tries filters in the following order:</span></span>

1.  <span data-ttu-id="bfad8-150">Use [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder).</span><span class="sxs-lookup"><span data-stu-id="bfad8-150">Use [**IStreamBuilder**](/windows/desktop/api/Strmif/nn-strmif-istreambuilder).</span></span>
2.  <span data-ttu-id="bfad8-151">Pruebe los filtros en caché.</span><span class="sxs-lookup"><span data-stu-id="bfad8-151">Try cached filters.</span></span>
3.  <span data-ttu-id="bfad8-152">Pruebe los filtros del gráfico.</span><span class="sxs-lookup"><span data-stu-id="bfad8-152">Try filters in the graph.</span></span>
4.  <span data-ttu-id="bfad8-153">Windows 7 o posterior: Pruebe el filtro preferido para el tipo de medio, si existe.</span><span class="sxs-lookup"><span data-stu-id="bfad8-153">Windows 7 or later: Try the preferred filter for the media type, if any.</span></span>
5.  <span data-ttu-id="bfad8-154">Buscar filtros en el registro.</span><span class="sxs-lookup"><span data-stu-id="bfad8-154">Look up filters in the registry.</span></span>

### <a name="igraphbuilderrenderfile"></a><span data-ttu-id="bfad8-155">IGraphBuilder:: RenderFile</span><span class="sxs-lookup"><span data-stu-id="bfad8-155">IGraphBuilder::RenderFile</span></span>

<span data-ttu-id="bfad8-156">El método [**IGraphBuilder:: RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) crea un gráfico de reproducción predeterminado a partir de un nombre de archivo.</span><span class="sxs-lookup"><span data-stu-id="bfad8-156">The [**IGraphBuilder::RenderFile**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-renderfile) method builds a default playback graph from a file name.</span></span> <span data-ttu-id="bfad8-157">Internamente, este método usa [**AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) para buscar el filtro de origen correcto y [**representar**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) para compilar el resto del gráfico.</span><span class="sxs-lookup"><span data-stu-id="bfad8-157">Internally, this method uses [**AddSourceFilter**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-addsourcefilter) to locate the correct source filter, and [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) to build the rest of the graph.</span></span>

### <a name="igraphbuilderconnect"></a><span data-ttu-id="bfad8-158">IGraphBuilder:: Connect</span><span class="sxs-lookup"><span data-stu-id="bfad8-158">IGraphBuilder::Connect</span></span>

<span data-ttu-id="bfad8-159">El método [**IGraphBuilder:: Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect) conecta un PIN de salida a un PIN de entrada.</span><span class="sxs-lookup"><span data-stu-id="bfad8-159">The [**IGraphBuilder::Connect**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-connect) method connects an output pin to an input pin.</span></span> <span data-ttu-id="bfad8-160">Este método agrega filtros intermedios si es necesario, utilizando una variación del algoritmo descrito para el método [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) :</span><span class="sxs-lookup"><span data-stu-id="bfad8-160">This method adds intermediate filters if needed, using a variation of the algorithm described for the [**Render**](/windows/desktop/api/Strmif/nf-strmif-igraphbuilder-render) method:</span></span>

1.  <span data-ttu-id="bfad8-161">Pruebe una conexión directa entre los filtros, sin filtros intermedios.</span><span class="sxs-lookup"><span data-stu-id="bfad8-161">Try a direct connection between the filters, with no intermediate filters.</span></span>
2.  <span data-ttu-id="bfad8-162">Pruebe los filtros en caché.</span><span class="sxs-lookup"><span data-stu-id="bfad8-162">Try cached filters.</span></span>
3.  <span data-ttu-id="bfad8-163">Pruebe los filtros del gráfico.</span><span class="sxs-lookup"><span data-stu-id="bfad8-163">Try filters in the graph.</span></span>
4.  <span data-ttu-id="bfad8-164">Windows 7 o posterior: Pruebe el filtro preferido para el tipo de medio, si existe.</span><span class="sxs-lookup"><span data-stu-id="bfad8-164">Windows 7 or later: Try the preferred filter for the media type, if any.</span></span>
5.  <span data-ttu-id="bfad8-165">Buscar filtros en el registro.</span><span class="sxs-lookup"><span data-stu-id="bfad8-165">Look up filters in the registry.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bfad8-166">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="bfad8-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bfad8-167">Categorías de filtro</span><span class="sxs-lookup"><span data-stu-id="bfad8-167">Filter Categories</span></span>](filter-categories.md)
</dt> <dt>

[<span data-ttu-id="bfad8-168">Fundament</span><span class="sxs-lookup"><span data-stu-id="bfad8-168">Merit</span></span>](merit.md)
</dt> <dt>

[<span data-ttu-id="bfad8-169">Simular la compilación de gráficos con GraphEdit</span><span class="sxs-lookup"><span data-stu-id="bfad8-169">Simulating Graph Building with GraphEdit</span></span>](simulating-graph-building-with-graphedit.md)
</dt> <dt>

[<span data-ttu-id="bfad8-170">Compilar el gráfico de filtro</span><span class="sxs-lookup"><span data-stu-id="bfad8-170">Building the Filter Graph</span></span>](building-the-filter-graph.md)
</dt> </dl>

 

 



