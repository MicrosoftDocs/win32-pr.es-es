---
title: Instalación a petición de juegos
description: En este artículo técnico se describen dos técnicas, instalación a petición y en segundo plano, con Windows Installer.
ms.assetid: abaaa7bf-8ed8-0425-6845-3671a56fe7fc
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 064dc58c563c372d1320a21040920e492e4e65e4
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "105676433"
---
# <a name="install-on-demand-for-games"></a>Instalación a petición de juegos

En este artículo técnico se describen dos técnicas, instalación a petición y en segundo plano, con [Windows Installer](/windows/desktop/Msi/windows-installer-portal). Los juegos pueden utilizar estas técnicas de instalación para proporcionar una experiencia de juego mejor y más agradable para los jugadores reduciendo el tiempo de instalación.

-   [Información general](#overview)
-   [Compatibilidad con la revisión](#patching-support)
-   [El ejemplo de SDK de InstallOnDemand](#the-installondemand-sdk-sample)
-   [Características y componentes del ejemplo](#the-samples-features-and-components)
-   [Instalación](#installation)
-   [Limitación](#limitation)

## <a name="overview"></a>Información general

La instalación ha sido un elemento de aplicaciones basadas en equipo durante mucho tiempo. Hoy en día, la mayoría de las aplicaciones requieren que se instalen primero en el disco duro local del usuario antes de poder usarlas. Los juegos de equipos no son excepciones; Cuando un consumidor compra un juego de Microsoft Windows e intenta ejecutarlo, primero debe pasar por un proceso de instalación que copie los archivos necesarios desde el disco de juego en la unidad de disco duro. Este proceso de instalación suele durar mucho tiempo y puede tardar hasta una hora en completarse. El tiempo de instalación es un factor que hace que los juegos de consola sean más deseables que los juegos basados en equipos para algunos jugadores, ya que pueden reproducir inmediatamente un juego de consola después de insertar el disco del juego. La tecnología que se describe en este artículo intentará solucionar este error reduciendo drásticamente el tiempo de instalación.

Tradicionalmente, los juegos requieren que todos o la mayoría de los archivos se instalen antes de iniciarse. Para lograr la instalación a petición, los recursos del juego deben ser modulares; es decir, el desarrollador debe dividir los recursos de la aplicación (gráficos, audio, etc.) en componentes. Cada componente es un conjunto de recursos que se pueden instalar o quitar como una unidad. Una vez hecho esto, el desarrollador de juegos define una o varias características, normalmente una o más por nivel o zona. Cada característica de una aplicación especifica un conjunto de componentes necesarios para ejecutar esa característica en particular. Cuando se instala una aplicación, sus características se pueden marcar como "instalar" (los componentes se copian en el disco duro local en el momento de la instalación) o "anunciado" (los componentes copiados en el disco duro local después de la instalación inicial cuando la aplicación usa esa característica). Un desarrollador de juegos puede reducir el tiempo de instalación diseñando el juego para que se inicie y ejecute con un conjunto mínimo de características instaladas. El resto de sus características se puede marcar como anunciado e instalar a petición cuando la aplicación realmente necesita usar funcionalidades que proporcionan esas características.

Los juegos pueden llamar a [Windows Installer](/windows/desktop/Msi/windows-installer-portal) para instalar una característica determinada que puede que no se haya instalado. Para que la instalación aparezca en segundo plano, se puede usar un subproceso de trabajo para realizar las llamadas al instalador mientras el subproceso principal sigue controlando la lógica del juego y presenta la pantalla. Esto minimiza la interrupción del juego causado por la instalación. El juego puede iniciar la instalación en cualquier momento. Sin embargo, dado que la instalación consume ciclos de procesador, por lo general no es una buena idea realizar la instalación cuando el subproceso principal se encuentra en una necesidad crítica de capacidad de procesamiento, como cuando el usuario está en el medio de la acción. Por ejemplo, un buen momento para realizar la instalación puede ser durante el tiempo en el que el usuario está en el menú de juego, cuando el juego está en pausa o minimizado, o cuando el usuario está viendo la película de introducción o cutscenes.

## <a name="patching-support"></a>Compatibilidad con la revisión

Hoy en día, la mayoría de los juegos deben actualizarse incluso después de que se envíen como errores y se agreguen nuevas características. La actualización a menudo requiere la revisión, que tradicionalmente es un procedimiento sencillo para los juegos. Dado que todos los archivos necesarios se instalan en el disco duro del usuario, la revisión de un juego implica copiar los archivos revisados en el disco duro, sobrescribiendo los archivos existentes. Cuando se emplea la instalación a petición, no todos los archivos se instalan y se copian en el momento de la revisión. Por lo tanto, el parche no puede simplemente escribir archivos actualizados en la carpeta Game.

[Windows Installer](/windows/desktop/Msi/windows-installer-portal) tiene características para aplicar revisiones a aplicaciones que usan la instalación a petición. Al aplicar una revisión, el instalador almacena en caché la revisión en el sistema. Esta característica funciona bien para las revisiones con diferencias pequeñas. Los archivos liberados originalmente ya no tienen que estar en el disco en el momento de la revisión, por lo que se pueden anunciar esos archivos. Más adelante, cuando se ejecute la aplicación y necesite tener acceso a los archivos, el instalador instalará la versión más reciente de esos archivos copiando la versión original del medio (por ejemplo, CDs) y aplicando la revisión después de leer los datos de revisión guardados.

## <a name="the-installondemand-sdk-sample"></a>El ejemplo de SDK de InstallOnDemand

En el ejemplo de instalación a petición de juegos se muestran las técnicas de instalación a petición que se describen en este artículo. A diferencia de otros ejemplos, la instalación a petición de juegos no se puede ejecutar directamente desde el explorador de ejemplo. Dado que el ejemplo utiliza el [Windows Installer](/windows/desktop/Msi/windows-installer-portal) para administrar su instalación, debe incluirse en la base de datos del instalador de las aplicaciones instaladas.

**Para iniciar el ejemplo**

1.  Use el vínculo instalar proyecto en el explorador de ejemplo para copiar los archivos del ejemplo en una carpeta.
2.  Haga doble clic en InstallOnDemand.msi para instalar el ejemplo.
3.  Seleccione instalación típica.
4.  Inicie el ejemplo iniciando el InstallOnDemand.exe en la carpeta instalada (normalmente archivos \\ de programa InstallOnDemand) o iniciando desde programas del menú Inicio \\ .

InstallOnDemand.msi es una base de datos reconocida por el instalador. Define todo el proceso de instalación: la estructura de directorios, lo que se va a copiar, qué recursos se copiarán juntos, qué valores del registro se van a escribir, qué métodos abreviados se deben crear, etc.

Cuando se inicia, el ejemplo reproduce una secuencia de introducción. El reproductor puede finalizarlo y escribir el menú principal presionando la tecla ESC. Después de la introducción, el reproductor puede iniciar un nuevo juego escribiendo un nombre de carácter y desplazándose por las estadísticas. Antes de que el ejemplo empiece a reproducir la secuencia de introducción, el ejemplo llama a una función de instalador para comprobar si está instalada la característica para el nivel 1. Si no se ha instalado la característica de nivel 1, el ejemplo utiliza un subproceso en segundo plano para pedir al instalador que instale el juego, mientras que el subproceso principal está haciendo algo más (como reproducir la secuencia de introducción, representar el menú o interactuar con el reproductor en la creación de caracteres). La experiencia es diferente de la instalación tradicional del juego en que el usuario está ocupado en el juego (viendo la introducción o creando un nuevo carácter) mientras la instalación está en curso. Una vez que el reproductor ha terminado de crear un carácter, el ejemplo carga los recursos para el nivel 1.

En el lado derecho de la pantalla de ejemplo hay cinco botones marcados como "Play Level 1" a "Play LEVEL 5". Estos botones simulan la finalización del reproductor del nivel actual y avancen hasta el siguiente. Cuando se hace clic en uno de estos botones, aparece una pantalla estadísticas que muestra información sobre el nivel que acaba de finalizar. El ejemplo también tarda este tiempo en solicitar al instalador que compruebe e instale el siguiente nivel, si aún no está instalado. La instalación se produce mientras el Reproductor lee la pantalla estadísticas, de modo que cuando el usuario haga clic en Aceptar para entrar en el nivel siguiente, los recursos del nivel estén todos instalados y listos para cargarse.

## <a name="the-samples-features-and-components"></a>Características y componentes del ejemplo

Tradicionalmente, los juegos requieren que todos o la mayoría de los archivos se instalen antes de iniciarse. Para lograr la instalación a petición, los recursos del juego deben ser modulares; es decir, el desarrollador debe dividir los recursos de la aplicación (gráficos, audio, etc.) en componentes. Cada componente es un conjunto de recursos que se pueden instalar o quitar como una unidad. Una vez hecho esto, el desarrollador de juegos define una o varias características, normalmente una o más por nivel o zona. Cada característica de una aplicación especifica un conjunto de componentes necesarios para ejecutar esa característica en particular. Cuando se instala una aplicación, sus características se pueden marcar como "instalar" (los componentes se copian en el disco duro local en el momento de la instalación) o "anunciados" (los componentes copiados en el disco duro local cuando la aplicación usa posteriormente esa característica). Un desarrollador de juegos puede reducir el tiempo de instalación diseñando el juego para iniciar y comenzar a ejecutarse con un conjunto mínimo de características instaladas. El resto de sus características se puede marcar como anunciado e instalar a petición cuando la aplicación realmente necesita usar funcionalidades que proporcionan esas características.

En la tabla siguiente se enumeran las seis características de nivel superior que define el ejemplo.



| Nombre de la característica | Funcionalidad                                                                                                                                                                                                             | Componentes  | Archivos                                                                     |
|--------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------|---------------------------------------------------------------------------|
| Core         | Incluye los recursos necesarios en todo momento, independientemente del nivel. Estos recursos son: ejecutable de ejemplo, medios requeridos por la secuencia de introducción y la pantalla de carga, y el archivo. FX que controla toda la representación en el ejemplo. | Core        | InstallOnDemand.exe, InstallOnDemand. FX, Loading.bmp, Level. x             |
| Core         | (igual que arriba)                                                                                                                                                                                                           | CoreUI      | \\UI \\ de medios dxutcontrols. DDS, \\ interfaz de usuario de media \\ DXUTShared. FX, flecha de UI de medios \\ \\ . x |
| Core         | (igual que arriba)                                                                                                                                                                                                           | CoreMisc    | Media \\ \\ Seafloor. x, varios medios \\ \\seafloor.bmp                        |
| Core         | (igual que arriba)                                                                                                                                                                                                           | CoreSpeeder | \\Demostración de media PRT \\ LandShark. x, \\ acelerador de demostración de media PRT \\ \_diff.jpg          |
| Core         | (igual que arriba)                                                                                                                                                                                                           | CoreReg     | N/A (valor del registro)                                                      |
| Level1       | Proporciona recursos utilizados por el nivel 1.                                                                                                                                                                                       | Level1      | Level1.jpg                                                                |
| Level1       | (igual que el anterior)                                                                                                                                                                                                        | L1Skybox    | \\Sondas de media Light de \\ Galileo \_ Cross. DDS                                   |
| Level2       | Proporciona recursos utilizados por el nivel 2.                                                                                                                                                                                       | Level2      | Level2.jpg                                                                |
| Level2       | (igual que el anterior)                                                                                                                                                                                                        | L2Skybox    | Detección de medios \\ ligeros de \\ gracia \_ Cross. DDS                                     |
| Level3       | Proporciona recursos utilizados por el nivel 3.                                                                                                                                                                                       | Level3      | Level3.jpg                                                                |
| Level3       | (igual que el anterior)                                                                                                                                                                                                        | L3Skybox    | \\Sondeos de media Light \\ RNL \_ Cross. DDS                                       |
| Level4       | Proporciona recursos utilizados por el nivel 4.                                                                                                                                                                                       | Level4      | Level4.jpg                                                                |
| Level4       | (igual que el anterior)                                                                                                                                                                                                        | L4Skybox    | \\Sondeos de media Light \\ stpeters \_ Cross. DDS                                  |
| Level5       | Proporciona recursos utilizados por el nivel 5.                                                                                                                                                                                       | Level5      | Level5.jpg                                                                |
| Level5       | (igual que el anterior)                                                                                                                                                                                                        | L5Skybox    | \\Sondeos de media Light \\ Uffizi \_ Cross. DDS                                    |



 

Las características de Level1 a Level5 tienen subcaracterísticas adicionales que contienen archivos no utilizados directamente por el ejemplo. Estos archivos de subcaracterísticas se han agregado para que la instalación tarde más tiempo. Esto se hace para ilustrar la operación de instalación en curso que se ejecuta en segundo plano mientras se ejecuta el ejemplo.

En la tabla siguiente se enumeran las subcaracterísticas de.



| Característica | Características secundarias                      | Archivos                                                                                                                                                                          |
|---------|-----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Level1  | L1PH1, L1PH2, L1PH3, L1PH4, L1PH5 | Level1 de los datos de marcador de posición \\ L1PH1. dat Level1 placeholder Data \\ L1PH2. dat Level1 placeholder Data \\ L1PH3. dat Level1 placeholders Data \\ L1PH4. dat Level1 placeholder Data \\ L1PH5. dat |
| Level2  | L2PH1, L2PH2, L2PH3, L2PH4, L2PH5 | Level2 de los datos de marcador de posición \\ L2PH1. dat level2 placeholder Data \\ L2PH2. dat level2 placeholder Data \\ L2PH3. dat level2 placeholders Data \\ L2PH4. dat level2 placeholder Data \\ L2PH5. dat |
| Level3  | L3PH1, L3PH2, L3PH3, L3PH4, L3PH5 | Level3 de los datos de marcador de posición \\ L3PH1. dat Level3 placeholder Data \\ L3PH2. dat Level3 placeholder Data \\ L3PH3. dat Level3 placeholders Data \\ L3PH4. dat Level3 placeholder Data \\ L3PH5. dat |
| Level4  | L4PH1, L4PH2, L4PH3, L4PH4, L4PH5 | Level4 de los datos de marcador de posición \\ L4PH1. dat level4 placeholder Data \\ L4PH2. dat level4 placeholder Data \\ L4PH3. dat level4 placeholders Data \\ L4PH4. dat level4 placeholder Data \\ L4PH5. dat |
| Level5  | L5PH1, L5PH2, L5PH3, L5PH4, L5PH5 | Level5 de los datos de marcador de posición \\ L5PH1. dat Level5 placeholder Data \\ L5PH2. dat Level5 placeholder Data \\ L5PH3. dat Level5 placeholders Data \\ L5PH4. dat Level5 placeholder Data \\ L5PH5. dat |



 

Durante la instalación, la característica principal debe marcarse como "instalar" y todas las demás características deben marcarse como "anunciado". Al instalar solo una característica en lugar de seis, el tiempo que el reproductor debe esperar hasta que se reduce considerablemente el lanzamiento del juego.

## <a name="installation"></a>Instalación

El [Windows Installer](/windows/desktop/Msi/windows-installer-portal) proporciona un mecanismo para que una aplicación solicite que se instale una característica anunciada. Sin embargo, el mecanismo es una llamada de interfaz de programación de aplicaciones (API) sincrónica, lo que significa que la aplicación tiene que esperar dentro de la llamada hasta que se complete la instalación. Para lograr una instalación en segundo plano, es necesario un subproceso de trabajo para que el subproceso de la aplicación principal pueda realizar otras tareas importantes, como la representación en pantalla, para seguir facilitando los comentarios visuales del reproductor.

En el ejemplo, hay tres Estados de instalación que se producen durante la ejecución del ejemplo: instalación activa, instalación pasiva y sin instalación.

-   La instalación activa es una solicitud iniciada por el ejemplo cuando necesita obtener acceso o cargar recursos proporcionados por una o varias características. El ejemplo hace esto cuando no puede continuar hasta que se instale el recurso.
-   La instalación pasiva se inicia cuando el ejemplo no realiza una tarea crítica, como cuando el reproductor está en un menú o ve una escena corta. En este caso, el subproceso de trabajo comprueba si se sigue anunciando alguna característica de la muestra. Si puede encontrar uno, llama al instalador para instalar esa característica. Este proceso se repite hasta que se instalan todas las características de la muestra. En esencia, la instalación pasiva emplea ciclos de procesador adicionales para realizar la instalación en segundo plano cuando es menos intrusivo en el ejemplo principal.
-   No se produce ninguna instalación cuando el jugador está ocupado activamente en el juego. Esto evita una caída de velocidad de fotogramas que interrumpiría la experiencia del usuario.

En el ejemplo, se define una clase CMsiUtil para administrar todas las tareas relacionadas con la instalación. Esencialmente, CMsiUtil usa un subproceso de trabajo que invoca al instalador para instalar las características del ejemplo en un bucle. La clase tiene dos colas que almacenan solicitudes de instalación: una cola de prioridad alta para la instalación activa y una cola de prioridad baja para la instalación pasiva. Durante la inicialización, la clase enumera todas las características del producto y las agrega a la cola de instalación pasiva. Dado que todo el producto se pone en cola de esta manera, el producto completo se instalará finalmente si el ejemplo tiene suficientes ciclos de procesador libres.

Cuando el ejemplo necesita solicitar una instalación activa, el ejemplo puede llamar a CMsiUtil:: UseFeatureSet () y pasar el nombre de la característica de nivel superior. UseFeatureSet () pondrá en cola la característica solicitada y todas sus subcaracterísticas en la cola de instalación activa para que el subproceso de trabajo pueda instalarlas.

Al ejecutar una solicitud de instalación, el subproceso de trabajo comprobará la cola de instalación activa y la cola de instalación pasiva para ver si alguna de las colas tiene solicitudes adicionales. Cada vez que el subproceso encuentra una solicitud, llamará a la API del instalador para realizar la instalación real. Una vez que las dos colas están vacías, el subproceso de trabajo pasará a la suspensión con una llamada a [**WaitForSingleObject**](/windows/desktop/api/synchapi/nf-synchapi-waitforsingleobject). Dado que todo el producto se coloca en la cola de instalación pasiva durante la inicialización, una cola vacía implica que se ha instalado todo el producto.

En el ejemplo se llama a CMsiUtil:: EnablePassiveInstall () para habilitar o deshabilitar la instalación pasiva. EnablePassiveInstall (true) incrementa el recuento de habilitaciones para la instalación pasiva y EnablePassiveInstall (false) lo reduce. Si el recuento de habilitaciones es mayor que 0, la clase procesará la cola de instalación pasiva. El ejemplo permite la instalación pasiva cuando se cumple cualquiera de las siguientes condiciones:

-   El usuario está viendo la secuencia de introducción inicial.
-   El usuario navega en el menú de ejemplo.
-   El usuario está viendo las estadísticas al final de un nivel.
-   La aplicación de ejemplo pierde su foco y va al fondo.

Los métodos de CMsiUtil se enumeran a continuación:



| Método                | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| AbortAllRequests      | Hace que la instalación actual anule y vacíe la cola de solicitudes de instalación activa.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| AbortCurrentRequest   | Hace que la instalación en curso se anule. A continuación, el subproceso de trabajo procesa la siguiente solicitud en la cola, si existe una.                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| EnablePassiveInstall  | Incrementa o disminuye el recuento de habilitación de la instalación pasiva. En el ejemplo se utiliza esta llamada para controlar cuándo puede y no puede producirse la instalación pasiva.                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| GetCurrentFeatureName | Devuelve el nombre de la característica que se está instalando activamente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| GetFeatureProgress    | Devuelve la posición de paso actual para la característica que se está instalando.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| GetFeatureProgressMax | Devuelve el número máximo de ciclos de progreso de la característica que se va a instalar.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Obtener último error          | Utilice este método para recuperar el código de retorno de la solicitud de instalación anterior.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| GetPassiveProgress    | Devuelve la posición de paso de la barra de progreso para la instalación pasiva.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| GetPassiveProgressMax | Devuelve la posición de paso actual y el número máximo de pasos para la instalación pasiva. Juntos, el ejemplo puede usarlos para mostrar el progreso general de la instalación pasiva.                                                                                                                                                                                                                                                                                                                                                                                               |
| GetProgress           | Devuelve la posición de paso de la barra de progreso para la instalación del conjunto de características activo. Se utiliza cuando el ejemplo representa la barra de progreso de la instalación. Dado que el Windows Installer solo proporciona información de progreso para la característica que se va a instalar, el método divide la barra de progreso entre las características solicitadas para que el usuario siga viendo toda la instalación como una tarea.                                                                                                                                                                                           |
| GetProgressMax        | Devuelve el número máximo de pasos de la barra de progreso para la instalación del conjunto de características activo. Se utiliza cuando el ejemplo representa la barra de progreso de la instalación.                                                                                                                                                                                                                                                                                                                                                                                                                              |
| Inicialización            | Inicializa la clase con el identificador único global (GUID) del producto. Este método también enumera todas las características de la aplicación que se han anunciado pero que todavía no se han instalado y las coloca en la cola de instalación pasiva para configurar la instalación pasiva.                                                                                                                                                                                                                                                                                                           |
| IsInstallInProgress   | Use este método para averiguar si se está procesando una instalación activa.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| UseFeature            | Método privado llamado por UseFeatureSet. Comprueba si una característica está instalada. Si se instala la característica solicitada, el método devuelve. Si la característica aún no está instalada (anunciada), el método pone en cola una nueva solicitud de instalación activa para el subproceso de trabajo y, a continuación, devuelve. El identificador de evento opcional que se señalará cuando se complete la instalación solicitada.                                                                                                                                                                                                        |
| UseFeatureSet         | Lo llama el ejemplo cuando necesita acceder a las funcionalidades proporcionadas por una característica determinada o a cualquiera de sus subcaracterísticas. El método enumera todas las características del ejemplo y llama a UseFeature () para las subcaracterísticas de la característica raíz especificada. El ejemplo puede pasar un identificador de evento que se señalará cuando se instale todo el conjunto de características. Dado que todas las características se instalan como un conjunto, el identificador se especifica para la última característica puesta en cola por UseFeature () en lugar de cada característica, de modo que el ejemplo recibe una notificación una vez que se han instalado todas las características solicitadas. |
| UseProduct            | Pone en cola una solicitud de instalación activa para que el subproceso de trabajo llame al instalador para realizar una instalación completa del producto. El identificador de evento opcional que se señalará cuando se complete la instalación solicitada.                                                                                                                                                                                                                                                                                                                                                                |



 

## <a name="limitation"></a>Limitación

La versión actual del instalador no está diseñada para el acceso simultáneo de varios subprocesos. Por lo tanto, cuando el subproceso de trabajo llama al instalador, el subproceso principal no debe llamar al instalador. Un ejemplo de esta limitación se produce en el ejemplo cuando el subproceso principal solicita una característica y, a continuación, solicita la misma característica de nuevo antes de que el subproceso de trabajo complete la instalación. La segunda solicitud llama a MsiQueryFeatureState () para averiguar si la característica solicitada ya está instalada, ya que el instalador puede indicar a veces que la característica está completamente instalada cuando el subproceso de trabajo todavía está copiando los archivos.

Afortunadamente, hay una solución alternativa para esto. CMsiUtil comprobará si una característica se instala mediante el subproceso de trabajo antes de llamar a funciones como MsiQueryFeatureState () o MsiUseFeature () para solicitar el estado de instalación de la característica en cuestión. Tenga en cuenta que esta limitación también puede convertirse en un problema en otro lugar.

La revisión puede afectar al funcionamiento de la instalación a petición en el equipo de un usuario final. La aplicación de una revisión que solo contenga los datos que han cambiado respecto a la versión anterior puede requerir que se instale la versión anterior del archivo actualizado para aplicar la diferencia. En esta situación, la revisión debe solicitar que el instalador Instale las características anunciadas afectadas antes de aplicar la revisión al juego.

El ejemplo se instala iniciando InstallOnDemand.msi porque supone que el [Windows Installer](/windows/desktop/Msi/windows-installer-portal) está presente en el equipo. Si el instalador no está presente, los archivos. msi no se reconocen y el inicio no funcionará. Para solucionar este problema, una aplicación debe utilizar un programa de instalación para realizar la tarea. Este programa debe comprobar primero si el instalador está presente y, en ese caso, su versión. Si la versión no cumple los requisitos de la aplicación, el programa de instalación debe instalar el Windows Installer y, a continuación, iniciar el archivo. msi. Este proceso se conoce como arranque. Normalmente, las aplicaciones denominan el programa de instalación de arranque Setup.exe. El ejemplo no controla el arranque. Sin embargo, puede encontrar detalles completos sobre el arranque en el Windows Installer.

Los desarrolladores también deben prestar atención al tamaño de cada característica en sus juegos. Al cancelar una instalación en curso, el instalador restaura el equipo al estado anterior a la instalación. Esto significa que la instalación de la característica se deshace completamente y no hay ninguna instalación parcial. Una característica grande requiere más tiempo de instalación, lo que aumenta la probabilidad de que la instalación se interrumpa y se cancele, o la instalación interfiere con la aplicación principal. Un ejemplo sería habilitar la instalación pasiva cuando el usuario abre el menú juego en la mitad del juego. Si una característica se está instalando y el usuario vuelve a jugar, el juego puede realizar una de estas dos acciones: puede permitir que se complete la instalación pasiva o cancelar la instalación pasiva. Una característica grande se encontraría mal con cualquiera de los dos modelos. Si el juego permite completar la instalación grande, es posible que la instalación dificulte el rendimiento de la representación del juego durante mucho tiempo. Por el contrario, si el juego cancela la instalación, el usuario debe permanecer en el menú durante mucho tiempo antes de volver al juego. Los desarrolladores deben encontrar un tamaño de característica equilibrado que funcione mejor para sus juegos individuales.

 

 