---
description: Microsoft Windows le permite controlar el acceso a los objetos de subproceso. Para obtener más información sobre la seguridad, vea modelo de Access-Control.
ms.assetid: 72709446-5c59-4fac-8dc8-7912906ecc85
title: Seguridad para subprocesos y derechos de acceso
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e16b0ac5b4142f819d59775014a82a79a188bdd3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105677821"
---
# <a name="thread-security-and-access-rights"></a>Seguridad para subprocesos y derechos de acceso

Microsoft Windows le permite controlar el acceso a los objetos de subproceso. Para obtener más información sobre la seguridad, vea [modelo de control de acceso](../secauthz/access-control-model.md).

Puede especificar un [descriptor de seguridad](../secauthz/security-descriptors.md) para un subproceso cuando llame a la función [**CreateProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessa), [**CreateProcessAsUser**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createprocessasusera), [**CreateProcessWithLogonW**](/windows/desktop/api/WinBase/nf-winbase-createprocesswithlogonw), [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread)o [**CreateRemoteThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createremotethread) . Si especifica **null**, el subproceso obtiene un descriptor de seguridad predeterminado. Las ACL del descriptor de seguridad predeterminado de un subproceso proceden del token principal o de suplantación del creador.

Para recuperar el descriptor de seguridad de un subproceso, llame a la función [**GetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-getsecurityinfo) . Para cambiar el descriptor de seguridad de un subproceso, llame a la función [**SetSecurityInfo**](/windows/win32/api/aclapi/nf-aclapi-setsecurityinfo) .

El identificador devuelto por la función [**CreateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-createthread) tiene acceso de **subproceso \_ \_** al objeto de subproceso. Cuando se llama a la función [**GetCurrentThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getcurrentthread) , el sistema devuelve un pseudohandle con el acceso máximo que el descriptor de seguridad del subproceso permite al autor de la llamada.

Los derechos de acceso válidos para los objetos de subproceso incluyen los [derechos de acceso estándar](../secauthz/standard-access-rights.md) y algunos derechos de acceso específicos del subproceso. En la tabla siguiente se enumeran los derechos de acceso estándar utilizados por todos los objetos.

| Value                           | Significado                                                                                                                                                                                                                                                                                  |
|---------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Eliminar** (0x00010000L)        | Necesario para eliminar el objeto.                                                                                                                                                                                                                                                           |
| **Leer \_ CONTROL** (0x00020000L) | Necesario para leer la información del descriptor de seguridad del objeto, sin incluir la información en la SACL. Para leer o escribir la SACL, debe solicitar el derecho de acceso de **\_ \_ seguridad del sistema de acceso** . Para obtener más información, consulte [derechos de acceso de SACL](../secauthz/sacl-access-right.md). |
| **Sincronizar** (0x00100000L)   | Derecho a utilizar el objeto para la sincronización. Esto permite a un subproceso esperar hasta que el objeto se encuentra en el estado señalado.                                                                                                                                                                |
| **Escribir \_ DAC** (0x00040000L)    | Necesario para modificar la DACL en el descriptor de seguridad para el objeto.                                                                                                                                                                                                                   |
| **Escribir \_ PROPIETARIO** (0x00080000L)  | Necesario para cambiar el propietario del descriptor de seguridad para el objeto.                                                                                                                                                                                                                  |



 

En la tabla siguiente se enumeran los derechos de acceso específicos del subproceso.



| Value                                            | Significado                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
|--------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Sincronizar** (0x00100000L)                    | Habilita el uso del identificador de subproceso en cualquiera de las [funciones de espera](../sync/wait-functions.md).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **acceso de subprocesos \_ \_**                          | Todos los derechos de acceso posibles para un objeto de subproceso. **Windows Server 2003 y Windows XP:** El valor de la marca **Thread \_ All \_ Access** se ha aumentado en Windows Server 2008 y Windows Vista. Si una aplicación compilada para Windows Server 2008 y Windows Vista se ejecuta en Windows Server 2003 o Windows XP, la marca **Thread \_ All \_ Access** contiene los bits de acceso que no se admiten y la función que especifica esta marca produce un **error con \_ acceso \_ denegado**. Para evitar este problema, especifique el conjunto mínimo de derechos de acceso necesarios para la operación. Si se debe usar **Thread \_ All \_ Access** , establezca **\_ Win32 \_ WinNT** en el sistema operativo mínimo de destino de la aplicación (por ejemplo, `#define _WIN32_WINNT _WIN32_WINNT_WINXP` ). Para obtener más información, consulte [uso de los encabezados de Windows](../winprog/using-the-windows-headers.md). <br/> |
| **Subproceso \_ \_SUplantación directa** (0x0200)       | Se requiere para un subproceso de servidor que suplanta a un cliente.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Subproceso \_ OBTENER \_ contexto** (0x0008)                | Necesario para leer el contexto de un subproceso mediante [**GetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getthreadcontext).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **Subproceso \_ Impersonate** (0x0100)                 | Es necesario usar directamente la información de seguridad de un subproceso sin llamarlo mediante un mecanismo de comunicación que proporciona servicios de suplantación.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Subproceso \_ \_Información de consulta** (0x0040)          | Necesario para leer cierta información del objeto de subproceso, como el código de salida (vea [**GetExitCodeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getexitcodethread)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Subproceso \_ \_ \_ Información limitada de consulta** (0x0800) | Necesario para leer cierta información de los objetos de subproceso (vea [**GetProcessIdOfThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-getprocessidofthread)). A un identificador que tiene el derecho de acceso a la **\_ \_ información de consulta de subproceso** se le concede automáticamente **\_ \_ \_ información limitada de consulta de subprocesos**.**Windows Server 2003 y Windows XP:** este derecho de acceso no se admite.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **Subproceso \_ ESTABLECER \_ contexto** (0x0010)                | Necesario para escribir el contexto de un subproceso mediante [**SetThreadContext**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadcontext).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **Subproceso \_ ESTABLECER \_ información** (0x0020)            | Necesario para establecer determinada información en el objeto de subproceso.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **Subproceso \_ ESTABLECER \_ \_ información limitada** (0x0400)   | Necesario para establecer determinada información en el objeto de subproceso. Un controlador que tiene el derecho de acceso a la **\_ \_ información de conjunto de subprocesos** recibe automáticamente **\_ \_ \_ información limitada del conjunto de subprocesos**.**Windows Server 2003 y Windows XP:** este derecho de acceso no se admite.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Subproceso \_ ESTABLECER \_ \_ token de subproceso** (0x0080)          | Necesario para establecer el token de suplantación para un subproceso mediante [**SetThreadToken**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadtoken).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **Subproceso \_ SUSPENDEr \_ reanudar** (0x0002)             | Necesario para suspender o reanudar un subproceso (vea [**SuspendThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-suspendthread) y [**ResumeThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-resumethread)).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| **Subproceso \_ FINALIZAR** (0x0001)                   | Necesario para terminar un subproceso mediante [**TerminateThread**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-terminatethread).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |



 

Puede solicitar el derecho de acceso de **\_ \_ seguridad del sistema de acceso** a un objeto de subproceso si desea leer o escribir la SACL del objeto. Para obtener más información, consulte derechos [de acceso de las listas de control de acceso (ACL)](../secauthz/access-control-lists.md) y [SACL](../secauthz/sacl-access-right.md).

## <a name="protected-processes"></a>Procesos protegidos

*Los procesos protegidos* mejoran la compatibilidad con Rights Management digitales. El sistema restringe el acceso a los procesos protegidos y a los subprocesos de los procesos protegidos.

**Windows Server 2003 y Windows XP:** Los procesos protegidos se agregaron a partir de Windows Vista.

No se permiten los siguientes derechos de acceso específicos desde un proceso a los subprocesos de un proceso protegido:

**acceso de subprocesos \_ \_**  
**suplantación directa de subprocesos \_ \_**  
**\_contexto de obtención de SUBproceso \_**  
**suplantar subproceso \_**  
**\_información de consulta de SUBprocesos \_**  
**\_contexto de conjunto de SUBprocesos \_**  
**\_información del conjunto de SUBprocesos \_**  
**\_token de conjunto de SUBprocesos \_**  
**terminación de subproceso \_**  


Se presentó el derecho de **\_ \_ \_ información limitada de consulta de subprocesos** para proporcionar acceso a un subconjunto de la información disponible a través de la **información de \_ consulta \_ de subproceso**.

 

 
