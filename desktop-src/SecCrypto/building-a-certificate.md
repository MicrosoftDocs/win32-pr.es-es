---
description: Explica las llamadas necesarias para compilar un certificado.
ms.assetid: 74154b3b-75fc-412f-835c-1a6f54e688c6
title: Creación de un certificado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b8f237fd729499aa5153f12f68657e2ce227da7b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "103913417"
---
# <a name="building-a-certificate"></a><span data-ttu-id="c3726-103">Creación de un certificado</span><span class="sxs-lookup"><span data-stu-id="c3726-103">Building a Certificate</span></span>

<span data-ttu-id="c3726-104">El orden de las llamadas en la creación de un certificado es el siguiente:</span><span class="sxs-lookup"><span data-stu-id="c3726-104">The order of calls in building a certificate is as follows:</span></span>

1.  <span data-ttu-id="c3726-105">La [*entidad de certificación*](../secgloss/c-gly.md) (CA) inicializa los módulos a través de llamadas a [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) y [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) (se produce una vez en la inicialización del servidor).</span><span class="sxs-lookup"><span data-stu-id="c3726-105">[*Certification authority*](../secgloss/c-gly.md) (CA) initializes modules through calls to [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) and [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) (happens once on server initialization).</span></span> <span data-ttu-id="c3726-106">La CA inicializará los módulos de directivas y de salida mediante una llamada a [**ICertPolicy2:: Initialize**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-initialize) y [**ICertExit:: Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize).</span><span class="sxs-lookup"><span data-stu-id="c3726-106">The CA will initialize the policy and exit modules by calling [**ICertPolicy2::Initialize**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-initialize) and [**ICertExit::Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize).</span></span>
2.  <span data-ttu-id="c3726-107">El intermediario llama a la CA a través de [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) (se produce una vez por inicialización intermediaria).</span><span class="sxs-lookup"><span data-stu-id="c3726-107">Intermediary calls the CA through [**ICertConfig**](/windows/desktop/api/Certcli/nn-certcli-icertconfig) (happens once per intermediary initialization).</span></span> <span data-ttu-id="c3726-108">El intermediario encuentra la cadena de configuración necesaria mediante una llamada a [**ICertConfig:: GetConfig**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig).</span><span class="sxs-lookup"><span data-stu-id="c3726-108">The intermediary finds the needed configuration string by calling [**ICertConfig::GetConfig**](/windows/desktop/api/Certcli/nf-certcli-icertconfig-getconfig).</span></span>
3.  <span data-ttu-id="c3726-109">El cliente llama al intermediario a través de una interfaz específica del intermediario (se produce una vez por solicitud).</span><span class="sxs-lookup"><span data-stu-id="c3726-109">Client calls the intermediary through an interface specific to the intermediary (happens once per request).</span></span> <span data-ttu-id="c3726-110">El cliente envía una [*solicitud de certificado*](../secgloss/c-gly.md) al intermediario.</span><span class="sxs-lookup"><span data-stu-id="c3726-110">The client sends a [*certificate request*](../secgloss/c-gly.md) to the intermediary.</span></span> <span data-ttu-id="c3726-111">Esto puede ser, por ejemplo, que Microsoft Internet Explorer envíe una solicitud a través del [control de inscripción de certificados](certificate-enrollment-control.md) a Microsoft Internet Information Services.</span><span class="sxs-lookup"><span data-stu-id="c3726-111">This can be, for example, Microsoft Internet Explorer sending a request through [Certificate Enrollment Control](certificate-enrollment-control.md) to Microsoft Internet Information Services.</span></span>
4.  <span data-ttu-id="c3726-112">Intermediario a CA a través de [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) (se produce una vez por solicitud).</span><span class="sxs-lookup"><span data-stu-id="c3726-112">Intermediary to CA through [**ICertRequest**](/windows/desktop/api/Certcli/nn-certcli-icertrequest) (happens once per request).</span></span> <span data-ttu-id="c3726-113">El intermediario envía la solicitud de certificado a la CA a través de [**ICertRequest:: submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit).</span><span class="sxs-lookup"><span data-stu-id="c3726-113">The intermediary sends the certificate request to the CA through [**ICertRequest::Submit**](/windows/desktop/api/Certcli/nf-certcli-icertrequest-submit).</span></span> <span data-ttu-id="c3726-114">En el caso de Internet Information Services, esto puede realizarse a través de scripts de Active Server páginas.</span><span class="sxs-lookup"><span data-stu-id="c3726-114">In the case of Internet Information Services, this could be done through Active Server Pages scripts.</span></span>
5.  <span data-ttu-id="c3726-115">La CA llama al módulo de directivas a través de la interfaz [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) (se produce una vez por solicitud).</span><span class="sxs-lookup"><span data-stu-id="c3726-115">The CA calls the Policy Module through the [**ICertPolicy**](/windows/desktop/api/Certpol/nn-certpol-icertpolicy) interface (happens once per request).</span></span> <span data-ttu-id="c3726-116">La entidad de certificación notifica al módulo de directivas que ha llegado una solicitud llamando a [**ICertPolicy:: VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest).</span><span class="sxs-lookup"><span data-stu-id="c3726-116">The CA notifies the policy module that a request has arrived by calling [**ICertPolicy::VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest).</span></span> <span data-ttu-id="c3726-117">El módulo de directivas puede examinar la solicitud y cambiar el certificado llamando a los métodos de la interfaz [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) .</span><span class="sxs-lookup"><span data-stu-id="c3726-117">The policy module can examine the request and change the certificate by calling methods of the [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy) interface.</span></span> <span data-ttu-id="c3726-118">Después, el módulo de directivas puede indicar que la solicitud es correcta (si es así, el certificado se compila en este momento), se denegará la solicitud o se suspenderá la solicitud.</span><span class="sxs-lookup"><span data-stu-id="c3726-118">The policy module can then indicate that the request is OK (if so, the certificate is built at this point), the request is to be denied, or the request should be suspended.</span></span>
6.  <span data-ttu-id="c3726-119">Opta El administrador llama a la CA a través de la interfaz [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) .</span><span class="sxs-lookup"><span data-stu-id="c3726-119">(Optional) Administrator calls the CA through the [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) interface.</span></span> <span data-ttu-id="c3726-120">Si se suspende la solicitud, el administrador puede volver a enviar o denegar la solicitud, o modificar los atributos y las extensiones de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="c3726-120">If the request is suspended, the administrator can resubmit or deny the request, or modify request attributes and extensions.</span></span> <span data-ttu-id="c3726-121">Tenga en cuenta que si se vuelve a enviar la solicitud, el módulo de directivas tendrá otra oportunidad para procesar la solicitud (como resultado de una llamada a [**ICertPolicy:: VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest)).</span><span class="sxs-lookup"><span data-stu-id="c3726-121">Note that if the request is resubmitted, the Policy Module will have another opportunity to process the request (as a result of a call to [**ICertPolicy::VerifyRequest**](/windows/desktop/api/Certpol/nf-certpol-icertpolicy-verifyrequest)).</span></span> <span data-ttu-id="c3726-122">La tarea de reenviar o denegar la solicitud puede realizarse por medio del complemento MMC de la entidad de certificación u otra aplicación que use **ICertAdmin**.</span><span class="sxs-lookup"><span data-stu-id="c3726-122">The task of resubmitting or denying the request can be performed by means of the Certification Authority MMC snap-in, or another application that uses **ICertAdmin**.</span></span>
7.  <span data-ttu-id="c3726-123">La CA llama al módulo de salida a través de la interfaz [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) .</span><span class="sxs-lookup"><span data-stu-id="c3726-123">The CA calls the exit module through the [**ICertExit**](/windows/desktop/api/Certexit/nn-certexit-icertexit) interface.</span></span> <span data-ttu-id="c3726-124">Si el módulo de salida ha indicado (cuando se llamó a [**ICertExit:: Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize) , en el paso 1) que está interesado en ver los certificados emitidos o las solicitudes que se mantienen pendientes, la CA llamará a [**ICertExit:: Notify**](/windows/desktop/api/Certexit/nf-certexit-icertexit-notify).</span><span class="sxs-lookup"><span data-stu-id="c3726-124">If the exit module has indicated (when [**ICertExit::Initialize**](/windows/desktop/api/Certexit/nf-certexit-icertexit-initialize) was called, in step 1) that it is interested in seeing certificates issued or requests held pending, the CA will call [**ICertExit::Notify**](/windows/desktop/api/Certexit/nf-certexit-icertexit-notify).</span></span>
8.  <span data-ttu-id="c3726-125">El módulo de salida llama a la CA a través de la interfaz [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) .</span><span class="sxs-lookup"><span data-stu-id="c3726-125">The exit module calls the CA through the [**ICertServerExit**](/windows/desktop/api/Certif/nn-certif-icertserverexit) interface.</span></span> <span data-ttu-id="c3726-126">El módulo de salida puede examinar la solicitud y el nuevo certificado llamando a los métodos de **ICertServerExit**.</span><span class="sxs-lookup"><span data-stu-id="c3726-126">The exit module can examine the request and the new certificate by calling methods of **ICertServerExit**.</span></span>

 

 
