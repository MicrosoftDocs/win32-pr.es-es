---
description: Solución de problemas de COM+ CRM
ms.assetid: 4d2d9372-b540-4e08-9b57-8687802610b6
title: Solución de problemas de COM+ CRM
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1b04e37d183dbf3df8d017e780917f955e14a033
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104539051"
---
# <a name="troubleshooting-the-com-crm"></a><span data-ttu-id="9cc41-103">Solución de problemas de COM+ CRM</span><span class="sxs-lookup"><span data-stu-id="9cc41-103">Troubleshooting the COM+ CRM</span></span>

<span data-ttu-id="9cc41-104">A continuación se muestran los problemas más comunes que se producen al desarrollar y usar el CRM de COM+:</span><span class="sxs-lookup"><span data-stu-id="9cc41-104">Following are the most common problems encountered when developing and using the COM+ CRM:</span></span>

-   <span data-ttu-id="9cc41-105">**Mensajes del registro de eventos.**</span><span class="sxs-lookup"><span data-stu-id="9cc41-105">**Event log messages.**</span></span> <span data-ttu-id="9cc41-106">Si la aplicación de servidor CRM detecta un error interno grave, se mostrará FailFast (finalizará el proceso de aplicación de servidor CRM) y escribirá un mensaje en el registro de eventos de Windows.</span><span class="sxs-lookup"><span data-stu-id="9cc41-106">If the CRM server application encounters a serious internal error, it will failfast (terminate the CRM server application process) and write a message to the Windows event log.</span></span> <span data-ttu-id="9cc41-107">Si encuentra algún problema, consulte el registro de eventos.</span><span class="sxs-lookup"><span data-stu-id="9cc41-107">Please refer to the event log if any problems are encountered.</span></span>

-   <span data-ttu-id="9cc41-108">**Excepciones del compensador de CRM.**</span><span class="sxs-lookup"><span data-stu-id="9cc41-108">**Exceptions from the CRM Compensator.**</span></span> <span data-ttu-id="9cc41-109">La infraestructura de CRM crea el compensador de CRM y lo pasa a las notificaciones de resultados de la transacción y a las entradas de registro escritas por el trabajador de CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-109">The CRM infrastructure creates the CRM Compensator and passes it the transaction outcome notifications and the log records written by the CRM Worker.</span></span> <span data-ttu-id="9cc41-110">Si el compensador de CRM devuelve un error o inicia una excepción, la infraestructura de CRM lo detecta y genera FailFast.</span><span class="sxs-lookup"><span data-stu-id="9cc41-110">If the CRM Compensator returns an error or throws an exception, it is caught by the CRM infrastructure and causes a failfast.</span></span> <span data-ttu-id="9cc41-111">Un mensaje en el registro de eventos indica que se ha recibido una excepción del compensador de CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-111">A message in the event log indicates that an exception was received from the CRM Compensator.</span></span> <span data-ttu-id="9cc41-112">Es posible forzar la omisión de estas excepciones.</span><span class="sxs-lookup"><span data-stu-id="9cc41-112">It is possible to force these exceptions to be ignored.</span></span> <span data-ttu-id="9cc41-113">(Consulte [configuración del registro de com+ CRM](com--crm-registry-settings.md)). Lo más probable es que las excepciones del compensador de CRM signifiquen un problema en el componente de compensador de CRM específico y no en la propia infraestructura de CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-113">(See [COM+ CRM Registry Settings](com--crm-registry-settings.md).) Exceptions from the CRM Compensator most likely mean a problem in the specific CRM Compensator component and not in the CRM infrastructure itself.</span></span>

-   <span data-ttu-id="9cc41-114">**Seguimiento de recuperación.**</span><span class="sxs-lookup"><span data-stu-id="9cc41-114">**Recovery trace.**</span></span> <span data-ttu-id="9cc41-115">El seguimiento de recuperación puede ser muy útil para determinar los problemas durante la recuperación.</span><span class="sxs-lookup"><span data-stu-id="9cc41-115">The recovery trace can be very useful to determine problems during recovery.</span></span> <span data-ttu-id="9cc41-116">Para obtener información acerca de cómo habilitar el seguimiento de recuperación, consulte [configuración del registro de com+ CRM](com--crm-registry-settings.md).</span><span class="sxs-lookup"><span data-stu-id="9cc41-116">For information about enabling recovery trace, see [COM+ CRM Registry Settings](com--crm-registry-settings.md).</span></span>

-   <span data-ttu-id="9cc41-117">**Intentando ejecutar con el CRM no habilitado.**</span><span class="sxs-lookup"><span data-stu-id="9cc41-117">**Trying to run with the CRM not enabled.**</span></span> <span data-ttu-id="9cc41-118">No basta con colocar los componentes de trabajo de CRM y compensador de CRM en la aplicación de servidor COM+.</span><span class="sxs-lookup"><span data-stu-id="9cc41-118">It is not sufficient simply to place the CRM Worker and CRM Compensator components into the COM+ server application.</span></span> <span data-ttu-id="9cc41-119">La compatibilidad con CRMs debe estar habilitada específicamente para la aplicación de servidor COM+ específica mediante la opción **Habilitar administradores de compensación de recursos** en la pestaña **Opciones avanzadas** de las páginas de propiedades de la aplicación com+.</span><span class="sxs-lookup"><span data-stu-id="9cc41-119">Support for CRMs must be specifically enabled for the specific COM+ server application using the **Enable compensating resource managers** option on the **Advanced** tab of the COM+ application's property pages.</span></span> <span data-ttu-id="9cc41-120">(Consulte [configuración de componentes com+ CRM](configuring-com--crm-components.md) para obtener más información). Si se realiza un intento de usar un CRM dentro de una aplicación de servidor que no tiene el CRM habilitado, se devuelve un código de error al trabajo de CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-120">(See [Configuring COM+ CRM Components](configuring-com--crm-components.md) for more information.) If an attempt is made to use a CRM inside a server application that does not have the CRM enabled, an error code is returned to the CRM Worker.</span></span>

-   <span data-ttu-id="9cc41-121">**Intentando ejecutar CRMs en procesos de cliente.**</span><span class="sxs-lookup"><span data-stu-id="9cc41-121">**Trying to run CRMs in client processes.**</span></span> <span data-ttu-id="9cc41-122">CRMs no se ejecutan en procesos de cliente; deben ejecutarse en un proceso de aplicación de servidor COM+.</span><span class="sxs-lookup"><span data-stu-id="9cc41-122">CRMs do not run in client processes; they must run in a COM+ server application process.</span></span> <span data-ttu-id="9cc41-123">Los componentes de CRM se pueden colocar en un paquete de biblioteca para que puedan usarse en varias aplicaciones de servidor COM+, pero no están disponibles para su uso en procesos de cliente.</span><span class="sxs-lookup"><span data-stu-id="9cc41-123">CRM components can be placed in a library package for use by multiple COM+ server applications, but they are not available for use within client processes.</span></span> <span data-ttu-id="9cc41-124">Al intentar usar las interfaces de CRM dentro de un proceso de cliente, se devuelve un código de error al trabajo de CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-124">Attempting to use the CRM interfaces inside a client process returns an error code to the CRM Worker.</span></span>

-   <span data-ttu-id="9cc41-125">**Recuperación en curso.**</span><span class="sxs-lookup"><span data-stu-id="9cc41-125">**Recovery in progress.**</span></span> <span data-ttu-id="9cc41-126">La recuperación se inicia cuando se inicia una aplicación de servidor CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-126">Recovery starts when a CRM server application starts.</span></span> <span data-ttu-id="9cc41-127">Sin embargo, la recuperación se produce en segundo plano durante el procesamiento normal de la aplicación de servidor CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-127">However, recovery occurs in the background during the normal processing of the CRM server application.</span></span> <span data-ttu-id="9cc41-128">El trabajo de CRM se puede crear antes de que se complete la recuperación.</span><span class="sxs-lookup"><span data-stu-id="9cc41-128">The CRM Worker can be created prior to recovery being completed.</span></span> <span data-ttu-id="9cc41-129">CRMs no se puede usar en un proceso de aplicación de servidor CRM hasta que la recuperación se haya completado correctamente.</span><span class="sxs-lookup"><span data-stu-id="9cc41-129">CRMs cannot be used in a CRM server application process until recovery has been successfully completed.</span></span> <span data-ttu-id="9cc41-130">En este caso, el trabajo de CRM recibe un código de error "recuperación en curso" mientras intenta registrar el compensador de CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-130">In this case, the CRM Worker receives a "recovery in progress" error code as it tries to register the CRM Compensator.</span></span> <span data-ttu-id="9cc41-131">El trabajo de CRM debe sondear o retrasar de otro modo hasta que se haya completado la recuperación.</span><span class="sxs-lookup"><span data-stu-id="9cc41-131">The CRM Worker should poll or otherwise delay until recovery has been completed.</span></span> <span data-ttu-id="9cc41-132">El tiempo de recuperación es específico de un tipo determinado de CRM y debe tenerse en cuenta al diseñar el CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-132">The recovery time is specific to a particular type of CRM, and this should be considered when designing the CRM.</span></span> <span data-ttu-id="9cc41-133">No se recomiendan las recuperaciones de larga duración.</span><span class="sxs-lookup"><span data-stu-id="9cc41-133">Long duration recoveries are not desirable.</span></span>

-   <span data-ttu-id="9cc41-134">**Seguridad en el archivo de registro de CRM.**</span><span class="sxs-lookup"><span data-stu-id="9cc41-134">**Security on the CRM log file.**</span></span> <span data-ttu-id="9cc41-135">Si se deniega el acceso al archivo de registro de CRM, consulte [consideraciones de seguridad de com+ CRM](com--crm-security-considerations.md) para obtener una descripción de cómo se establece la seguridad en el archivo de registro de CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-135">If access to the CRM log file is denied, please see [COM+ CRM Security Considerations](com--crm-security-considerations.md) for a description of how security is set on the CRM log file.</span></span>

-   <span data-ttu-id="9cc41-136">**Transacciones dudosas.**</span><span class="sxs-lookup"><span data-stu-id="9cc41-136">**In-doubt transactions.**</span></span> <span data-ttu-id="9cc41-137">En raras ocasiones, una transacción DTC podría entrar en el estado dudoso; es decir, el DTC no puede determinar el resultado de la transacción.</span><span class="sxs-lookup"><span data-stu-id="9cc41-137">In rare cases, a DTC transaction might go into the in-doubt state; that is, the DTC cannot determine the transaction outcome.</span></span> <span data-ttu-id="9cc41-138">En estos casos, durante la recuperación, el CRM mantiene las entradas de registro para esa transacción en el archivo de registro de CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-138">For these cases, during recovery, the CRM maintains the log records for that transaction in the CRM log file.</span></span> <span data-ttu-id="9cc41-139">Cuando el DTC ha resuelto la transacción dudosa, al realizar otra recuperación de CRM se completa la transacción.</span><span class="sxs-lookup"><span data-stu-id="9cc41-139">When the in-doubt transaction has been resolved by the DTC, performing another CRM recovery completes the transaction.</span></span>

-   <span data-ttu-id="9cc41-140">**Creación y liberación del compensador de CRM.**</span><span class="sxs-lookup"><span data-stu-id="9cc41-140">**Creation and release of CRM Compensator.**</span></span> <span data-ttu-id="9cc41-141">La primera vez que un compensador de CRM está registrado por un trabajador de CRM, se crea mediante la infraestructura de CRM y se consulta para determinar cuál de las interfaces compensadoras de CRM admite.</span><span class="sxs-lookup"><span data-stu-id="9cc41-141">The first time a CRM Compensator is registered by a CRM Worker, it is created by the CRM infrastructure and queried to determine which of the CRM Compensator interfaces it supports.</span></span> <span data-ttu-id="9cc41-142">Después se libera inmediatamente.</span><span class="sxs-lookup"><span data-stu-id="9cc41-142">It is then immediately released.</span></span> <span data-ttu-id="9cc41-143">Los compensadores de CRM necesitan admitir la capacidad de crear y liberar sin que haya ninguna llamada de método intermedia.</span><span class="sxs-lookup"><span data-stu-id="9cc41-143">CRM Compensators need to support the ability to be created and released without having had any intervening method calls.</span></span> <span data-ttu-id="9cc41-144">Si el compensador CRM no se puede crear correctamente, quizás debido a un registro COM incorrecto, o si no admite al menos una de las interfaces compensadas de CRM correctas, se devuelve un código de error al trabajo CRM.</span><span class="sxs-lookup"><span data-stu-id="9cc41-144">If the CRM Compensator cannot be created correctly, perhaps due to incorrect COM registration, or if it does not support at least one of the correct CRM Compensator interfaces, an error code is returned to the CRM Worker.</span></span>

## <a name="related-topics"></a><span data-ttu-id="9cc41-145">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="9cc41-145">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9cc41-146">Conceptos de Administrador de recursos de compensación de COM+</span><span class="sxs-lookup"><span data-stu-id="9cc41-146">COM+ Compensating Resource Manager Concepts</span></span>](com--compensating-resource-manager-concepts.md)
</dt> </dl>

 

 



