---
description: El cuadro de diálogo común de fuentes simplifica el proceso de creación y selección de fuentes.
ms.assetid: 7183be25-a8e4-47a0-a34a-63eadf6ca10d
title: Creación y selección de fuentes
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 37b4a70a1a49fc318ca69998d97e15fca838668d
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104997392"
---
# <a name="font-creation-and-selection"></a>Creación y selección de fuentes

El cuadro de diálogo común de **fuentes** simplifica el proceso de creación y selección de fuentes. Al inicializar la estructura [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) y llamar a la función [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) , una aplicación puede admitir la misma interfaz de selección de fuente que anteriormente requería muchas líneas de código personalizado. (Para obtener más información sobre el cuadro de diálogo común de **fuentes** , vea [biblioteca de cuadros de diálogo comunes](../dlgbox/common-dialog-box-library.md).)

## <a name="selection-by-the-user"></a>Selección por parte del usuario

La mayoría de las operaciones de creación y selección de fuentes implican al usuario. Por ejemplo, las aplicaciones de procesamiento de texto permiten al usuario seleccionar fuentes únicas para los encabezados, las notas a pie y el texto del cuerpo. Una vez que el usuario selecciona una fuente mediante el cuadro de diálogo **fuente** y presiona el botón **Aceptar** , la función [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta) inicializa los miembros de una estructura [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) con los atributos de la fuente solicitada. Para usar esta fuente para operaciones de salida de texto, una aplicación debe crear primero una fuente lógica y, a continuación, seleccionar esa fuente en su contexto de dispositivo. Una *fuente lógica* es una descripción proporcionada por la aplicación de una fuente ideal. Un desarrollador puede crear una fuente lógica llamando a las funciones [**CreateFont**](/windows/desktop/api/Wingdi/nf-wingdi-createfonta) o [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta) . En este caso, la aplicación llamaría a [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta) y proporcionara un puntero a la estructura [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) inicializada por [**CHOOSEFONT**](/windows/win32/api/commdlg/ns-commdlg-choosefonta). En general, resulta más eficaz llamar a **CreateFontIndirect** porque [**CreateFont**](/windows/win32/api/wingdi/nf-wingdi-createfonta) requiere varios parámetros, mientras que **CreateFontIndirect** solo requiere un puntero a **LOGFONT**.

Antes de que una aplicación pueda comenzar a dibujar texto con una fuente lógica, debe encontrar la coincidencia más cercana de las fuentes almacenadas internamente en el dispositivo y las fuentes cuyos recursos se han cargado en el sistema operativo. Las fuentes almacenadas en el dispositivo o en el sistema operativo se denominan *fuentes físicas*. El proceso de búsqueda de la fuente física que más se aproxime a una fuente lógica especificada se denomina asignación de fuentes. Este proceso se produce cuando una aplicación llama a la función [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) y proporciona un identificador que identifica una fuente lógica. La asignación de fuentes se realiza mediante un algoritmo interno que compara los atributos de la fuente lógica solicitada con los atributos de las fuentes físicas disponibles. Cuando el algoritmo del asignador de fuentes completa su búsqueda y determina la coincidencia más cercana posible, la función [**SelectObject**](/windows/win32/api/wingdi/nf-wingdi-selectobject) devuelve y la aplicación puede empezar a dibujar texto con la nueva fuente.

La función [**SetMapperFlags**](/windows/desktop/api/Wingdi/nf-wingdi-setmapperflags) especifica si el algoritmo del asignador de fuentes busca solo las fuentes físicas con relaciones de aspecto que coinciden con el dispositivo físico. La relación de aspecto de un dispositivo es la proporción formada por el ancho y el alto de un píxel en ese dispositivo.

La fuente del sistema (también conocida como el shell o la fuente predeterminada) es la fuente usada para el texto de las barras de título, los menús y los cuadros de diálogo.

## <a name="special-font-selection-considerations"></a>Consideraciones sobre la selección de fuentes especiales

Aunque la mayoría de las operaciones de selección de fuentes implican al usuario, hay algunos casos en los que esto no es cierto. Por ejemplo, es posible que un desarrollador desee usar una fuente única en una aplicación para dibujar texto en una ventana de control. Para seleccionar una fuente adecuada, la aplicación debe poder determinar qué fuentes están disponibles, crear una fuente lógica que describa una de estas fuentes disponibles y, a continuación, seleccionar esa fuente en el contexto de dispositivo adecuado.

Una aplicación puede enumerar las fuentes disponibles mediante las funciones [**EnumFonts**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontsa) o [**EnumFontFamilies**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontfamiliesa) . Se recomienda [**EnumFontFamilies**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesa) porque enumera todos los estilos asociados a un nombre de familia. Esto puede ser útil para fuentes con muchos o estilos inusuales y para fuentes que atraviesan bordes internacionales.

Una vez que una aplicación ha enumerado las fuentes disponibles y encontrado una coincidencia adecuada, debe utilizar los valores devueltos por la función de enumeración Font para inicializar los miembros de una estructura [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) . Después, puede llamar a la función [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta) , pasándole un puntero a la estructura [**LOGFONT**](/windows/win32/api/wingdi/ns-wingdi-logfonta) inicializada. Si la función [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta) se ejecuta correctamente, la aplicación puede seleccionar la fuente lógica mediante una llamada a la función [**SelectObject**](/windows/desktop/api/Wingdi/nf-wingdi-selectobject) . Al inicializar los miembros de la estructura **LOGFONT** , asegúrese de especificar un juego de caracteres específico en el miembro **lfCharSet** . Este miembro es importante en el proceso de asignación de fuentes y los resultados serán incoherentes si este miembro no se ha inicializado correctamente. Si especifica un nombre de tipo de letra en el miembro **lfFaceName** de la estructura **LOGFONT** , asegúrese de que el valor **lfCharSet** coincide con el juego de caracteres del tipo de letra especificado en **lfFaceName**. Por ejemplo, si desea seleccionar una fuente como MS Mincho, **lfCharSet** debe establecerse en el valor predefinido SHIFTJIS \_ CharSet.

Las fuentes de muchos idiomas de Asia oriental tienen dos nombres de tipo de letra: un nombre en inglés y un nombre localizado. [**CreateFont**](/windows/desktop/api/Wingdi/nf-wingdi-createfonta), [**CreateFontIndirect**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirecta)y [**CreateFontIndirectEx**](/windows/desktop/api/Wingdi/nf-wingdi-createfontindirectexa) toman el nombre de tipo de letra localizado para una configuración regional del sistema que coincida con el idioma, pero toman el nombre del tipo de letra inglés para todas las demás configuraciones regionales del sistema. El mejor método es probar un nombre y, en caso de error, probar el otro. Tenga en cuenta que [**EnumFonts**](/windows/win32/api/wingdi/nf-wingdi-enumfontsa), [**EnumFontFamilies**](/windows/win32/api/wingdi/nf-wingdi-enumfontfamiliesa)y [**EnumFontFamiliesEx**](/windows/desktop/api/Wingdi/nf-wingdi-enumfontfamiliesexa) devuelven el nombre del tipo de letra inglés si la configuración regional del sistema no coincide con el idioma de la fuente. A partir de Windows 2000, esto ya no es un problema porque el asignador de fuentes para [**CreateFont**](/windows/win32/api/wingdi/nf-wingdi-createfonta), [**CreateFontIndirect**](/windows/win32/api/wingdi/nf-wingdi-createfontindirecta)y [**CreateFontIndirectEx**](/windows/win32/api/wingdi/nf-wingdi-createfontindirectexa) reconoce cualquier nombre de tipo de letra, independientemente de la configuración regional.

 

 
