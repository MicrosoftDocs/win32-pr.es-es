---
title: Crear y eliminar objetos en Active Directory Domain Services
description: El procedimiento utilizado para crear y eliminar objetos mediante programación en Active Directory Domain Services depende de la tecnología de programación utilizada.
ms.assetid: 13f83aea-ad39-4737-af3c-24316a31046d
ms.tgt_platform: multiple
keywords:
- Crear y eliminar objetos Active Directory Active Directory
- Active Directory Domain Services Active Directory, usar la creación y eliminación de objetos
- objetos Active Directory, crear y eliminar objetos de Active Directory Domain Services
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 11d3e85ef3c356978faeab059e3969bb657185bd
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/17/2020
ms.locfileid: "104487471"
---
# <a name="creating-and-deleting-objects-in-active-directory-domain-services"></a><span data-ttu-id="9b712-106">Crear y eliminar objetos en Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="9b712-106">Creating and Deleting Objects in Active Directory Domain Services</span></span>

<span data-ttu-id="9b712-107">El procedimiento utilizado para crear y eliminar objetos mediante programación en Active Directory Domain Services depende de la tecnología de programación utilizada.</span><span class="sxs-lookup"><span data-stu-id="9b712-107">The procedure used to programmatically create and delete objects in Active Directory Domain Services is dependent upon the programming technology used.</span></span> <span data-ttu-id="9b712-108">Para obtener más información acerca de la creación y eliminación de objetos en Active Directory Domain Services con una tecnología de programación específica, vea los temas que se muestran en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="9b712-108">For more information about creating and deleting objects in Active Directory Domain Services with a specific programming technology, see the topics listed in the following table.</span></span>



| <span data-ttu-id="9b712-109">Tecnología de programación</span><span class="sxs-lookup"><span data-stu-id="9b712-109">Programming technology</span></span>                                                                       | <span data-ttu-id="9b712-110">Para obtener más información</span><span class="sxs-lookup"><span data-stu-id="9b712-110">For more information</span></span>                                                            |
|----------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
| [<span data-ttu-id="9b712-111">Interfaces de servicio de Active Directory</span><span class="sxs-lookup"><span data-stu-id="9b712-111">Active Directory Service Interfaces</span></span>](/windows/desktop/ADSI/active-directory-service-interfaces-adsi)         | [<span data-ttu-id="9b712-112">Crear y eliminar objetos</span><span class="sxs-lookup"><span data-stu-id="9b712-112">Creating and Deleting Objects</span></span>](/windows/desktop/ADSI/creating-and-deleting-objects)             |
| [<span data-ttu-id="9b712-113">Protocolo ligero de acceso a directorio</span><span class="sxs-lookup"><span data-stu-id="9b712-113">Lightweight Directory Access Protocol</span></span>](/previous-versions/windows/desktop/ldap/lightweight-directory-access-protocol-ldap-api) | [<span data-ttu-id="9b712-114">Modificar una entrada de directorio</span><span class="sxs-lookup"><span data-stu-id="9b712-114">Modifying a Directory Entry</span></span>](/previous-versions/windows/desktop/ldap/modifying-a-directory-entry)                 |
| [<span data-ttu-id="9b712-115">System.DirectoryServices</span><span class="sxs-lookup"><span data-stu-id="9b712-115">System.DirectoryServices</span></span>](/dotnet/api/system.directoryservices) | <span data-ttu-id="9b712-116">[Crear, eliminar, cambiar el nombre y trasladar objetos](https://msdn.microsoft.com/library/ms180850(v=VS.80).aspx)</span><span class="sxs-lookup"><span data-stu-id="9b712-116">[Create, Delete, Rename and Move Objects](https://msdn.microsoft.com/library/ms180850(v=VS.80).aspx)</span></span> |



 

## <a name="creating-an-object"></a><span data-ttu-id="9b712-117">Creación de un objeto</span><span class="sxs-lookup"><span data-stu-id="9b712-117">Creating an Object</span></span>

<span data-ttu-id="9b712-118">En general, los únicos atributos necesarios para crear un objeto son los atributos **CN** y **objectClass** .</span><span class="sxs-lookup"><span data-stu-id="9b712-118">In general, the only attributes required for an object to be created are the **cn** and **objectClass** attributes.</span></span> <span data-ttu-id="9b712-119">Sin embargo, la creación de un objeto no tiene por qué convertirlo en un objeto funcional.</span><span class="sxs-lookup"><span data-stu-id="9b712-119">Just creating an object does not necessarily make it a functional object however.</span></span> <span data-ttu-id="9b712-120">Ciertos tipos de objetos, como usuarios y grupos, tienen atributos adicionales necesarios para que funcionen.</span><span class="sxs-lookup"><span data-stu-id="9b712-120">Certain types of objects, such as users and groups, have additional required attributes to make them functional.</span></span> <span data-ttu-id="9b712-121">Para obtener más información sobre la creación de tipos de objetos específicos, vea [crear un usuario](creating-a-user.md) y [crear grupos en un dominio](creating-groups-in-a-domain.md).</span><span class="sxs-lookup"><span data-stu-id="9b712-121">For more information about creating specific types of objects, see [Creating a User](creating-a-user.md) and [Creating Groups in a Domain](creating-groups-in-a-domain.md).</span></span>

<span data-ttu-id="9b712-122">**Windows Server 2003:** Cuando se crea un objeto de la clase de [**usuario**](/windows/desktop/ADSchema/c-user), [**Grupo**](/windows/desktop/ADSchema/c-group)o [**equipo**](/windows/desktop/ADSchema/c-computer) en un controlador de dominio que se ejecuta en WWindows Server 2003 o posterior, el controlador de dominio establece automáticamente el atributo [**samAccountName**](/windows/desktop/ADSchema/a-samaccountname) para el objeto en una cadena única, si no se especifica ninguno.</span><span class="sxs-lookup"><span data-stu-id="9b712-122">**Windows Server 2003:** When an object of the [**user**](/windows/desktop/ADSchema/c-user), [**group**](/windows/desktop/ADSchema/c-group), or [**computer**](/windows/desktop/ADSchema/c-computer) class is created on a domain controller that is running on WWindows Server 2003 or later, the domain controller automatically sets the [**sAMAccountName**](/windows/desktop/ADSchema/a-samaccountname) attribute for the object to a unique string, if one is not specified.</span></span>

## <a name="deleting-an-object"></a><span data-ttu-id="9b712-123">Eliminar un objeto</span><span class="sxs-lookup"><span data-stu-id="9b712-123">Deleting an Object</span></span>

<span data-ttu-id="9b712-124">El servidor de Active Directory realiza las siguientes acciones cuando se elimina un objeto:</span><span class="sxs-lookup"><span data-stu-id="9b712-124">The Active Directory server performs the following actions when an object is deleted:</span></span>

-   <span data-ttu-id="9b712-125">El atributo **IsDeleted** del objeto eliminado se establece en **true**.</span><span class="sxs-lookup"><span data-stu-id="9b712-125">The **isDeleted** attribute of the deleted object is set to **TRUE**.</span></span> <span data-ttu-id="9b712-126">Los objetos con un valor de atributo **IsDeleted** establecido en **true** se denominan [*marcadores de exclusión*](/previous-versions/windows/desktop/legacy/ms681941(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="9b712-126">Objects with an **isDeleted** attribute value set to **TRUE** are called [*tombstones*](/previous-versions/windows/desktop/legacy/ms681941(v=vs.85)).</span></span>
-   <span data-ttu-id="9b712-127">El objeto eliminado se mueve al contenedor objetos eliminados para su contexto de nomenclatura.</span><span class="sxs-lookup"><span data-stu-id="9b712-127">The deleted object is moved to the Deleted Objects container for its naming context.</span></span> <span data-ttu-id="9b712-128">Si la propiedad **systemFlags** del objeto contiene la marca 0x02000000, el objeto no se mueve al contenedor de objetos eliminados.</span><span class="sxs-lookup"><span data-stu-id="9b712-128">If the object **systemFlags** property contains the 0x02000000 flag, the object is not moved to the Deleted Objects container.</span></span> <span data-ttu-id="9b712-129">Para obtener más información sobre cómo enlazar y enumerar el contenido del contenedor de objetos eliminados, vea [recuperar objetos eliminados](retrieving-deleted-objects.md).</span><span class="sxs-lookup"><span data-stu-id="9b712-129">For more information about binding to and enumerating the contents of the Deleted Objects container, see [Retrieving Deleted Objects](retrieving-deleted-objects.md).</span></span>
-   <span data-ttu-id="9b712-130">El contenedor de objetos eliminados es plano, por lo que todos los objetos se encuentran en el mismo nivel dentro del contenedor de objetos eliminados.</span><span class="sxs-lookup"><span data-stu-id="9b712-130">The Deleted Objects container is flat, so all objects reside at the same level within the Deleted Objects container.</span></span> <span data-ttu-id="9b712-131">Por lo tanto, se cambia el nombre distintivo relativo del objeto eliminado para asegurarse de que el nombre es único en el contenedor de objetos eliminados.</span><span class="sxs-lookup"><span data-stu-id="9b712-131">Thus, the relative distinguished name of the deleted object is changed to ensure that the name is unique within the Deleted Objects container.</span></span> <span data-ttu-id="9b712-132">Si el nombre original tiene más de 75 caracteres, se trunca a 75 caracteres.</span><span class="sxs-lookup"><span data-stu-id="9b712-132">If the original name is longer than 75 characters, it is truncated to 75 characters.</span></span> <span data-ttu-id="9b712-133">A continuación, se agregan los siguientes nombres al nuevo nombre:</span><span class="sxs-lookup"><span data-stu-id="9b712-133">The following are then appended to the new name:</span></span>
    1.  <span data-ttu-id="9b712-134">Un carácter 0x0A</span><span class="sxs-lookup"><span data-stu-id="9b712-134">A 0x0A character</span></span>
    2.  <span data-ttu-id="9b712-135">La cadena "DEL:"</span><span class="sxs-lookup"><span data-stu-id="9b712-135">The string "DEL:"</span></span>
    3.  <span data-ttu-id="9b712-136">La forma de cadena de un GUID único, como "947e3228-70c9-4311-8b7a-e5c9b5bd4432"</span><span class="sxs-lookup"><span data-stu-id="9b712-136">The string form of a unique GUID, such as "947e3228-70c9-4311-8b7a-e5c9b5bd4432"</span></span>

    <span data-ttu-id="9b712-137">Un ejemplo de un nombre de objeto eliminado es:</span><span class="sxs-lookup"><span data-stu-id="9b712-137">An example of a deleted object name is:</span></span>
    ```C++
    Jeff Smith\0ADEL:947e3228-70c9-4311-8b7a-e5c9b5bd4432
    ```

    

-   <span data-ttu-id="9b712-138">La mayoría de los valores de atributo del objeto eliminado se quitan.</span><span class="sxs-lookup"><span data-stu-id="9b712-138">Most attribute values for the deleted object are removed.</span></span> <span data-ttu-id="9b712-139">Los siguientes atributos se conservan automáticamente:</span><span class="sxs-lookup"><span data-stu-id="9b712-139">The following attributes are automatically retained:</span></span>

    -   <span data-ttu-id="9b712-140">**attributeID**</span><span class="sxs-lookup"><span data-stu-id="9b712-140">**attributeID**</span></span>
    -   <span data-ttu-id="9b712-141">**attributeSyntax**</span><span class="sxs-lookup"><span data-stu-id="9b712-141">**attributeSyntax**</span></span>
    -   <span data-ttu-id="9b712-142">**Distintivo**</span><span class="sxs-lookup"><span data-stu-id="9b712-142">**distinguishedName**</span></span>
    -   <span data-ttu-id="9b712-143">**dNReferenceUpdate**</span><span class="sxs-lookup"><span data-stu-id="9b712-143">**dNReferenceUpdate**</span></span>
    -   <span data-ttu-id="9b712-144">**flatName**</span><span class="sxs-lookup"><span data-stu-id="9b712-144">**flatName**</span></span>
    -   <span data-ttu-id="9b712-145">**governsID**</span><span class="sxs-lookup"><span data-stu-id="9b712-145">**governsID**</span></span>
    -   <span data-ttu-id="9b712-146">**groupType**</span><span class="sxs-lookup"><span data-stu-id="9b712-146">**groupType**</span></span>
    -   <span data-ttu-id="9b712-147">**instanceType**</span><span class="sxs-lookup"><span data-stu-id="9b712-147">**instanceType**</span></span>
    -   <span data-ttu-id="9b712-148">**lDAPDisplayName**</span><span class="sxs-lookup"><span data-stu-id="9b712-148">**lDAPDisplayName**</span></span>
    -   <span data-ttu-id="9b712-149">**legacyExchangeDN**</span><span class="sxs-lookup"><span data-stu-id="9b712-149">**legacyExchangeDN**</span></span>
    -   <span data-ttu-id="9b712-150">**mS-DS-CreatorSID**</span><span class="sxs-lookup"><span data-stu-id="9b712-150">**mS-DS-CreatorSID**</span></span>
    -   <span data-ttu-id="9b712-151">**mSMQOwnerID**</span><span class="sxs-lookup"><span data-stu-id="9b712-151">**mSMQOwnerID**</span></span>
    -   <span data-ttu-id="9b712-152">**name**</span><span class="sxs-lookup"><span data-stu-id="9b712-152">**name**</span></span>
    -   <span data-ttu-id="9b712-153">**nCName**</span><span class="sxs-lookup"><span data-stu-id="9b712-153">**nCName**</span></span>
    -   <span data-ttu-id="9b712-154">**objectClass**</span><span class="sxs-lookup"><span data-stu-id="9b712-154">**objectClass**</span></span>
    -   <span data-ttu-id="9b712-155">**GUID**</span><span class="sxs-lookup"><span data-stu-id="9b712-155">**objectGUID**</span></span>
    -   <span data-ttu-id="9b712-156">**objectSid**</span><span class="sxs-lookup"><span data-stu-id="9b712-156">**objectSid**</span></span>
    -   <span data-ttu-id="9b712-157">**oMSyntax**</span><span class="sxs-lookup"><span data-stu-id="9b712-157">**oMSyntax**</span></span>
    -   <span data-ttu-id="9b712-158">**proxiedObjectName**</span><span class="sxs-lookup"><span data-stu-id="9b712-158">**proxiedObjectName**</span></span>
    -   <span data-ttu-id="9b712-159">**replPropertyMetaData**</span><span class="sxs-lookup"><span data-stu-id="9b712-159">**replPropertyMetaData**</span></span>
    -   <span data-ttu-id="9b712-160">**Atributo**</span><span class="sxs-lookup"><span data-stu-id="9b712-160">**sAMAccountName**</span></span>
    -   <span data-ttu-id="9b712-161">**securityIdentifier**</span><span class="sxs-lookup"><span data-stu-id="9b712-161">**securityIdentifier**</span></span>
    -   <span data-ttu-id="9b712-162">**subClassOf**</span><span class="sxs-lookup"><span data-stu-id="9b712-162">**subClassOf**</span></span>
    -   <span data-ttu-id="9b712-163">**systemFlags**</span><span class="sxs-lookup"><span data-stu-id="9b712-163">**systemFlags**</span></span>
    -   <span data-ttu-id="9b712-164">**trustAttributes**</span><span class="sxs-lookup"><span data-stu-id="9b712-164">**trustAttributes**</span></span>
    -   <span data-ttu-id="9b712-165">**trustDirection**</span><span class="sxs-lookup"><span data-stu-id="9b712-165">**trustDirection**</span></span>
    -   <span data-ttu-id="9b712-166">**trustPartner**</span><span class="sxs-lookup"><span data-stu-id="9b712-166">**trustPartner**</span></span>
    -   <span data-ttu-id="9b712-167">**trustType**</span><span class="sxs-lookup"><span data-stu-id="9b712-167">**trustType**</span></span>
    -   <span data-ttu-id="9b712-168">**userAccountControl**</span><span class="sxs-lookup"><span data-stu-id="9b712-168">**userAccountControl**</span></span>
    -   <span data-ttu-id="9b712-169">**uSNChanged**</span><span class="sxs-lookup"><span data-stu-id="9b712-169">**uSNChanged**</span></span>
    -   <span data-ttu-id="9b712-170">**uSNCreated**</span><span class="sxs-lookup"><span data-stu-id="9b712-170">**uSNCreated**</span></span>
    -   <span data-ttu-id="9b712-171">**whenCreated**</span><span class="sxs-lookup"><span data-stu-id="9b712-171">**whenCreated**</span></span>

    <span data-ttu-id="9b712-172">También se conservan otros atributos que tienen un valor de atributo **searchFlags** que contiene 0x00000008.</span><span class="sxs-lookup"><span data-stu-id="9b712-172">Other attributes that have a **searchFlags** attribute value that contains 0x00000008 are also retained.</span></span>

    <span data-ttu-id="9b712-173">Los siguientes valores de atributo siempre se quitan de un objeto eliminado:</span><span class="sxs-lookup"><span data-stu-id="9b712-173">The following attribute values are always removed from a deleted object:</span></span>

    -   <span data-ttu-id="9b712-174">**objectCategory**</span><span class="sxs-lookup"><span data-stu-id="9b712-174">**objectCategory**</span></span>
    -   <span data-ttu-id="9b712-175">**samAccountType**</span><span class="sxs-lookup"><span data-stu-id="9b712-175">**samAccountType**</span></span>

-   <span data-ttu-id="9b712-176">El descriptor de seguridad del objeto eliminado se conserva y las entradas de control de acceso heredables no se propagan.</span><span class="sxs-lookup"><span data-stu-id="9b712-176">The security descriptor of the deleted object is retained and inheritable access control entries are not propagated.</span></span> <span data-ttu-id="9b712-177">El descriptor de seguridad se conserva tal cual en el momento en que se elimina el objeto.</span><span class="sxs-lookup"><span data-stu-id="9b712-177">The security descriptor is retained as-is at the time the object is deleted.</span></span>
-   <span data-ttu-id="9b712-178">Los vínculos a y desde el objeto eliminado se borran.</span><span class="sxs-lookup"><span data-stu-id="9b712-178">Links to and from the deleted object are cleared.</span></span> <span data-ttu-id="9b712-179">Esto se realiza en segundo plano después de que se elimine el objeto.</span><span class="sxs-lookup"><span data-stu-id="9b712-179">This is performed in the background after the object is deleted.</span></span> <span data-ttu-id="9b712-180">Si el objeto eliminado se restaura antes de que se borren todos los vínculos, se recibirá un error.</span><span class="sxs-lookup"><span data-stu-id="9b712-180">If the deleted object is restored before all of the links are cleared, an error will be received.</span></span>
-   <span data-ttu-id="9b712-181">Si el objeto se elimina en un controlador de dominio de Windows Server 2003, el atributo **lastKnownParent** del objeto eliminado se establece en el nombre distintivo del contenedor donde estaba incluido el objeto cuando se eliminó.</span><span class="sxs-lookup"><span data-stu-id="9b712-181">If the object is deleted on a Windows Server 2003 domain controller, the **lastKnownParent** attribute of the deleted object is set to the distinguished name of the container where the object was contained when it was deleted.</span></span>

<span data-ttu-id="9b712-182">El objeto eliminado permanece en el contenedor de objetos eliminados durante un período de tiempo conocido como duración del objeto de *desecho*.</span><span class="sxs-lookup"><span data-stu-id="9b712-182">The deleted object remains in the Deleted Objects container for a period of time known as the *tombstone lifetime*.</span></span> <span data-ttu-id="9b712-183">De forma predeterminada, la duración del desecho es de 60 días, pero el administrador del sistema puede cambiar este valor.</span><span class="sxs-lookup"><span data-stu-id="9b712-183">By default, the tombstone lifetime is 60 days, but this value can be changed by the system administrator.</span></span> <span data-ttu-id="9b712-184">Cuando expira la duración del objeto de desecho, el objeto se quita de forma permanente del servicio de directorio.</span><span class="sxs-lookup"><span data-stu-id="9b712-184">After the tombstone lifetime expires, the object is permanently removed from the Directory Service.</span></span> <span data-ttu-id="9b712-185">Para evitar que se produzca una operación de eliminación, una aplicación debe realizar sincronizaciones incrementales con más frecuencia que la duración del desecho.</span><span class="sxs-lookup"><span data-stu-id="9b712-185">To avoid missing a delete operation, an application must perform incremental synchronizations more frequently than the tombstone lifetime.</span></span>

<span data-ttu-id="9b712-186">Windows Server 2003 agrega la capacidad de restaurar objetos eliminados.</span><span class="sxs-lookup"><span data-stu-id="9b712-186">Windows Server 2003 adds the ability to restore deleted objects.</span></span> <span data-ttu-id="9b712-187">Para obtener más información acerca de la restauración de objetos eliminados, consulte restauración de [objetos eliminados](restoring-deleted-objects.md).</span><span class="sxs-lookup"><span data-stu-id="9b712-187">For more information about deleted object restoration, see [Restoring Deleted Objects](restoring-deleted-objects.md).</span></span>

<span data-ttu-id="9b712-188">Cuando se elimina un elemento, no se puede modificar ninguno de los atributos del objeto.</span><span class="sxs-lookup"><span data-stu-id="9b712-188">When an item is deleted, none of the attributes of the object can be modified.</span></span> <span data-ttu-id="9b712-189">En Windows Server 2003, es posible modificar el descriptor de seguridad (el atributo **ntSecurityDescriptor** ) de un objeto eliminado.</span><span class="sxs-lookup"><span data-stu-id="9b712-189">In Windows Server 2003, it is possible to modify the security descriptor (the **ntSecurityDescriptor** attribute) on a deleted object.</span></span> <span data-ttu-id="9b712-190">Esto se hace para permitir la restauración de objetos cuando la persona que restaura el objeto no tiene permisos de escritura en los atributos obligatorios.</span><span class="sxs-lookup"><span data-stu-id="9b712-190">This is to allow restoration of objects when the person restoring the object does not have write permissions to mandatory attributes.</span></span> <span data-ttu-id="9b712-191">Para actualizar el descriptor de seguridad en un objeto eliminado, el autor de la llamada debe tener el derecho de acceso de control "reanimar desecho" en el contexto de nomenclatura, además de la **\_ DAC de escritura** normal y el acceso de **\_ propietario de escritura** .</span><span class="sxs-lookup"><span data-stu-id="9b712-191">To update the security descriptor on a deleted object, the caller must have the "Reanimate Tombstone" control access right on the naming context, in addition to regular **WRITE\_DAC** and **WRITE\_OWNER** access.</span></span> <span data-ttu-id="9b712-192">Incluso si el descriptor de seguridad es restrictivo, el administrador puede asumir primero la propiedad del objeto, suponiendo que el Administrador tenga el privilegio de **\_ nombre de \_ propiedad \_ se toma** y, a continuación, modificar el descriptor de seguridad.</span><span class="sxs-lookup"><span data-stu-id="9b712-192">Even if the security descriptor is restrictive, the administrator can first take ownership of the object, assuming the administrator has the **SE\_TAKE\_OWNERSHIP\_NAME** privilege, and then modify the security descriptor.</span></span> <span data-ttu-id="9b712-193">Para ello, use la función [**LDAP \_ Modify \_ ext \_ s**](/previous-versions/windows/desktop/api/winldap/nf-winldap-ldap_modify_ext_s) con el [**servidor LDAP \_ Mostrar control de \_ \_ \_ OID eliminado**](/previous-versions/windows/desktop/ldap/ldap-server-show-deleted-oid) .</span><span class="sxs-lookup"><span data-stu-id="9b712-193">To do this, use the [**ldap\_modify\_ext\_s**](/previous-versions/windows/desktop/api/winldap/nf-winldap-ldap_modify_ext_s) function with the [**LDAP\_SERVER\_SHOW\_DELETED\_OID**](/previous-versions/windows/desktop/ldap/ldap-server-show-deleted-oid) control.</span></span> <span data-ttu-id="9b712-194">La lista de modificación debe contener un solo reemplazo de atributo para el atributo **ntSecurityDescriptor** .</span><span class="sxs-lookup"><span data-stu-id="9b712-194">The modification list must contain a single attribute replacement for the **ntSecurityDescriptor** attribute.</span></span>

 

 