---
title: Restricciones de Shell gráfico de servidor
description: Las aplicaciones de servidor deben poder ejecutarse sin el shell gráfico de servidor
ms.assetid: 8F531497-B64D-4E79-AD7A-790EFDC6ADFE
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 7666ae07a28d798a36d249bf37ab2d7719b9fba0
ms.sourcegitcommit: 46376be61d3fa308f9b1a06d7e2fa122a39755af
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/10/2020
ms.locfileid: "104421555"
---
# <a name="server-apps-must-be-able-to-run-without-the-server-graphical-shell"></a><span data-ttu-id="c79c4-103">Las aplicaciones de servidor deben poder ejecutarse sin el shell gráfico de servidor</span><span class="sxs-lookup"><span data-stu-id="c79c4-103">Server apps must be able to run without the Server Graphical Shell</span></span>

## <a name="platform"></a><span data-ttu-id="c79c4-104">Plataforma</span><span class="sxs-lookup"><span data-stu-id="c79c4-104">Platform</span></span>

<span data-ttu-id="c79c4-105">**Servidores** : Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="c79c4-105">**Servers** – Windows Server 2012</span></span> 

## <a name="description"></a><span data-ttu-id="c79c4-106">Descripción</span><span class="sxs-lookup"><span data-stu-id="c79c4-106">Description</span></span>

<span data-ttu-id="c79c4-107">Shell gráfico de servidor, la característica que incluye el explorador de Windows e Internet Explorer, se instala de forma predeterminada en las instalaciones "servidor con una GUI" de Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="c79c4-107">Server Graphical Shell, the feature that includes Windows Explorer and Internet Explorer, is installed by default on “Server with a GUI” installations of Windows Server 2012.</span></span> <span data-ttu-id="c79c4-108">La característica Shell gráfico de servidor se puede desinstalar con el fin de reducir el potencial de mantenimiento y de rendimiento, lo que limita el número de reinicios que puede tener el servidor y, al mismo tiempo, permite que las herramientas de administración se ejecuten localmente en el servidor.</span><span class="sxs-lookup"><span data-stu-id="c79c4-108">The Server Graphical Shell feature can be uninstalled in order to reduce the potential servicing and performance footprint, thereby limiting the number of reboots that the server may incur, while still allowing management tools to be run locally on the server.</span></span>

<span data-ttu-id="c79c4-109">Después de que un administrador desinstale el shell gráfico de servidor, el servidor se encuentra en la configuración de interfaz de servidor básica:</span><span class="sxs-lookup"><span data-stu-id="c79c4-109">After an administrator uninstalls the Server Graphical Shell, the server is in the Minimal Server Interface configuration:</span></span>

![configuración de la interfaz de Shell gráfico de servidor](images/minimalserverinterface.png)

<span data-ttu-id="c79c4-111">Los administradores pueden optar por ejecutarse en la configuración de interfaz de servidor básica (que incluye un conjunto de herramientas de administración locales), como valor predeterminado, en lugar de en el servidor con una configuración de GUI.</span><span class="sxs-lookup"><span data-stu-id="c79c4-111">Administrators can then opt to run in the Minimal Server Interface configuration (which includes a set of local management tools), as the default, rather than in the Server with a GUI configuration.</span></span> <span data-ttu-id="c79c4-112">Esto permite la supervisión y administración locales, a la vez que reduce tanto el uso de recursos como la frecuencia de mantenimiento.</span><span class="sxs-lookup"><span data-stu-id="c79c4-112">This allows local monitoring and management, while reducing both resource usage and frequency of servicing.</span></span>

<span data-ttu-id="c79c4-113">Los administradores pueden volver a instalar el shell gráfico de servidor más adelante si necesitan la funcionalidad incluida en él.</span><span class="sxs-lookup"><span data-stu-id="c79c4-113">Administrators can reinstall Server Graphical Shell later if they need the functionality within it.</span></span> <span data-ttu-id="c79c4-114">(Los administradores también pueden iniciar desde una instalación Server Core y "compilar" en la configuración de interfaz de servidor básica mediante la funcionalidad de características a petición).</span><span class="sxs-lookup"><span data-stu-id="c79c4-114">(Administrators can also start from a Server Core install, and “build up” to the Minimal Server Interface configuration using the Features On Demand functionality.)</span></span>

<span data-ttu-id="c79c4-115">Las aplicaciones de servidor deben ser capaces de ejecutarse en la configuración de interfaz de servidor básica para aprovechar el uso de recursos reducido y la superficie de servicio.</span><span class="sxs-lookup"><span data-stu-id="c79c4-115">Server apps must be capable of running in the Minimal Server Interface configuration to take advantage of the reduced resource utilization and servicing footprint.</span></span> <span data-ttu-id="c79c4-116">Esta capacidad se puede lograr permitiendo al administrador elegir no instalar partes de la aplicación que necesita el shell gráfico de servidor, o detectando la presencia del shell gráfico de servidor y deshabilitando algunos aspectos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c79c4-116">This capability can be achieved by allowing the administrator to choose not to install parts of the app that needs the Server Graphical Shell, or by detecting the presence of Server Graphical Shell and disabling some aspects of the app.</span></span>

<span data-ttu-id="c79c4-117">La interfaz de servidor básica tiene una superficie de mantenimiento y recursos reducida porque muchas API y archivos binarios que se incluyen en el shell gráfico de servidor no están disponibles en esta configuración.</span><span class="sxs-lookup"><span data-stu-id="c79c4-117">The Minimal Server Interface has a reduced resource and servicing footprint because many APIs and binaries that are included in the Server Graphical Shell are not available in this configuration.</span></span> <span data-ttu-id="c79c4-118">Cuando corresponda, las aplicaciones de servidor también deben permitir la administración remota (preferiblemente a través de la comunicación remota de Windows PowerShell) desde otra instalación de cliente de Windows o Windows Server.</span><span class="sxs-lookup"><span data-stu-id="c79c4-118">Where appropriate, server apps should also allow remote administration (preferably via Windows PowerShell Remoting) from another Windows Server or Windows Client installation.</span></span> <span data-ttu-id="c79c4-119">Esto permite una mejor administración centralizada de uno o más equipos en la configuración de interfaz de servidor básica, o de máquinas en una configuración de superficie incluso inferior como Server Core.</span><span class="sxs-lookup"><span data-stu-id="c79c4-119">This enables better centralized administration of one or more machines in the Minimal Server Interface configuration, or of machines in an even lower footprint configuration such as Server Core.</span></span>

## <a name="manifestation"></a><span data-ttu-id="c79c4-120">Manifestación</span><span class="sxs-lookup"><span data-stu-id="c79c4-120">Manifestation</span></span>

<span data-ttu-id="c79c4-121">Si una aplicación requiere alguna de las API o archivos binarios que no están disponibles en la configuración de la interfaz de servidor básica, es posible que no se muestre correctamente en la pantalla o que no se pueda usar.</span><span class="sxs-lookup"><span data-stu-id="c79c4-121">If an app requires any of the APIs or binaries that are not available in the Minimal Server Interface configuration, it may not display properly on the screen and/or be unusable.</span></span>

## <a name="mitigation"></a><span data-ttu-id="c79c4-122">Mitigación</span><span class="sxs-lookup"><span data-stu-id="c79c4-122">Mitigation</span></span>

<span data-ttu-id="c79c4-123">Los desarrolladores de aplicaciones de servidor deben identificar las partes de sus aplicaciones que requieran cualquiera de las API o archivos binarios quitados e incluir información para el administrador del servidor que identifique las partes de la aplicación que no se ejecutarán correctamente cuando se use la interfaz de servidor básica.</span><span class="sxs-lookup"><span data-stu-id="c79c4-123">Server app developers should identify those parts of their apps that require any of the removed APIs or binaries and include info for the server administrator identifying the parts of the app that won’t run properly when using the Minimal Server Interface.</span></span> <span data-ttu-id="c79c4-124">Si las partes de la aplicación se pueden instalar opcionalmente o no son absolutamente necesarias para la funcionalidad del producto, la aplicación se puede instalar y ejecutar con la configuración de la interfaz de servidor mínima.</span><span class="sxs-lookup"><span data-stu-id="c79c4-124">If those parts of the app can be optionally installed or are not absolutely required for product functionality, the app can still be installed and run under the Minimal Server Interface configuration.</span></span>

<span data-ttu-id="c79c4-125">Si no se puede usar la aplicación sin el shell gráfico de servidor, esta limitación debe estar documentada y se debe indicar al administrador del servidor que instale el shell gráfico de servidor.</span><span class="sxs-lookup"><span data-stu-id="c79c4-125">If the app cannot be used at all without the Server Graphical Shell, this limitation should be documented and the server administrator should be instructed to install the Server Graphical Shell.</span></span> <span data-ttu-id="c79c4-126">(Si se agrega a una instalación Server Core, esto podría requerir agregar características mediante características a petición). Además, la aplicación debe comprobar en el inicio que todos los archivos necesarios están disponibles, ya que el shell gráfico de servidor se puede desinstalar en cualquier momento antes o después de la instalación de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c79c4-126">(If adding to a Server Core installation, this might require adding features using Features On Demand.) In addition, the app should check on startup that all required files are available, as the Server Graphical Shell can be uninstalled at any time before or after the installation of the app.</span></span>

## <a name="solution"></a><span data-ttu-id="c79c4-127">Solución</span><span class="sxs-lookup"><span data-stu-id="c79c4-127">Solution</span></span>

<span data-ttu-id="c79c4-128">Confíe en el conjunto de dependencias más pequeño posible y modular las aplicaciones para que la funcionalidad de la aplicación principal pueda funcionar sin necesidad de instalar componentes de interfaz de usuario más pesados.</span><span class="sxs-lookup"><span data-stu-id="c79c4-128">Rely on the smallest possible set of dependencies, and modularize apps so that the core app functionality can work without requiring more heavyweight user interface components installed.</span></span> <span data-ttu-id="c79c4-129">Desarrolle aplicaciones que no requieran ninguna de las API o archivos binarios quitados y confíe en la funcionalidad contenida en la interfaz de servidor básica o Server Core.</span><span class="sxs-lookup"><span data-stu-id="c79c4-129">Develop apps that do not require any of the removed APIs or binaries, and rely instead on the functionality contained within the Minimal Server Interface or Server Core.</span></span> <span data-ttu-id="c79c4-130">Esto reducirá los requisitos de mantenimiento a la vez que mejora el rendimiento y la satisfacción del usuario.</span><span class="sxs-lookup"><span data-stu-id="c79c4-130">This will reduce maintenance requirements while improving performance and user satisfaction.</span></span>

<span data-ttu-id="c79c4-131">Cuando hay partes de una aplicación que pueden agregar una funcionalidad importante cuando el shell gráfico de servidor está disponible, los desarrolladores de aplicaciones pueden:</span><span class="sxs-lookup"><span data-stu-id="c79c4-131">Where there are parts of an app that might add significant functionality when the Server Graphical Shell is available, app developers can:</span></span>

-   <span data-ttu-id="c79c4-132">Permite que se instalen de forma opcional estas características adicionales, por lo que se pueden omitir las instalaciones en una configuración de interfaz de servidor básica.</span><span class="sxs-lookup"><span data-stu-id="c79c4-132">Allow these additional features making use of Server Graphical Shell to be optionally installed, so they can be omitted from installations on a Minimal Server Interface configuration</span></span>
-   <span data-ttu-id="c79c4-133">Detección de la presencia del shell gráfico de servidor y adaptación del comportamiento de la aplicación</span><span class="sxs-lookup"><span data-stu-id="c79c4-133">Detect the presence of Server Graphical Shell and adapt the app behavior</span></span>

<span data-ttu-id="c79c4-134">Los desarrolladores de aplicaciones también deben asegurarse de que las aplicaciones de servidor se puedan administrar de forma remota siempre que sea posible y adecuadas.</span><span class="sxs-lookup"><span data-stu-id="c79c4-134">App developers should also ensure that server apps are remotely manageable where possible and appropriate.</span></span>

## <a name="detecting-minimal-server-interface-and-server-core"></a><span data-ttu-id="c79c4-135">Detección de la interfaz de servidor mínima y Server Core</span><span class="sxs-lookup"><span data-stu-id="c79c4-135">Detecting Minimal Server Interface and Server Core</span></span>

<span data-ttu-id="c79c4-136">Windows Server instalará un valor de registro correspondiente para cada nivel de servidor instalado.</span><span class="sxs-lookup"><span data-stu-id="c79c4-136">Windows Server will install a corresponding registry value for each server level installed.</span></span> <span data-ttu-id="c79c4-137">Puede consultar la existencia de estas claves para determinar si las características Shell gráfico de servidor o interfaz de servidor mínima están instaladas y habilitadas.</span><span class="sxs-lookup"><span data-stu-id="c79c4-137">You can query for the existence of these keys to determine if the Server Graphical Shell or Minimal Server Interface features are installed and enabled.</span></span>

<span data-ttu-id="c79c4-138">HKEY \_ local \_ Machine \\ software \\ Microsoft \\ Windows NT \\ CurrentVersion \\ Server \\ ServerLevels:</span><span class="sxs-lookup"><span data-stu-id="c79c4-138">HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Server\\ServerLevels:</span></span>



|                  | <span data-ttu-id="c79c4-139">Server Core</span><span class="sxs-lookup"><span data-stu-id="c79c4-139">Server Core</span></span> | <span data-ttu-id="c79c4-140">Interfaz de servidor básica</span><span class="sxs-lookup"><span data-stu-id="c79c4-140">Minimal Server Interface</span></span> | <span data-ttu-id="c79c4-141">Shell gráfico de servidor</span><span class="sxs-lookup"><span data-stu-id="c79c4-141">Server Graphical Shell</span></span> |
|------------------|-------------|--------------------------|------------------------|
| <span data-ttu-id="c79c4-142">ServerCore = 1</span><span class="sxs-lookup"><span data-stu-id="c79c4-142">ServerCore=1</span></span>     | <span data-ttu-id="c79c4-143">X</span><span class="sxs-lookup"><span data-stu-id="c79c4-143">X</span></span>           | <span data-ttu-id="c79c4-144">X</span><span class="sxs-lookup"><span data-stu-id="c79c4-144">X</span></span>                        | <span data-ttu-id="c79c4-145">X</span><span class="sxs-lookup"><span data-stu-id="c79c4-145">X</span></span>                      |
| <span data-ttu-id="c79c4-146">Server-GuiMgmt = 1</span><span class="sxs-lookup"><span data-stu-id="c79c4-146">Server-GuiMgmt=1</span></span> |             | <span data-ttu-id="c79c4-147">X</span><span class="sxs-lookup"><span data-stu-id="c79c4-147">X</span></span>                        | <span data-ttu-id="c79c4-148">X</span><span class="sxs-lookup"><span data-stu-id="c79c4-148">X</span></span>                      |
| <span data-ttu-id="c79c4-149">ServerGuiShell = 1</span><span class="sxs-lookup"><span data-stu-id="c79c4-149">ServerGuiShell=1</span></span> |             |                          | <span data-ttu-id="c79c4-150">X</span><span class="sxs-lookup"><span data-stu-id="c79c4-150">X</span></span>                      |



 

<span data-ttu-id="c79c4-151">Una "X" en la tabla anterior significa que la clave del registro estará presente cuando se instale la característica correspondiente.</span><span class="sxs-lookup"><span data-stu-id="c79c4-151">An “X” in the table above means that registry key will be present when the corresponding feature is installed.</span></span>

<span data-ttu-id="c79c4-152">Tenga en cuenta que estos niveles de servidor son aditivos; Si el shell gráfico de servidor está instalado, se trata de la interfaz de servidor básica y Server Core.</span><span class="sxs-lookup"><span data-stu-id="c79c4-152">Note that these server levels are additive; if the Server Graphical Shell is installed, so is the Minimal Server Interface and Server Core.</span></span> <span data-ttu-id="c79c4-153">En ese caso, las dos claves del registro estarán presentes.</span><span class="sxs-lookup"><span data-stu-id="c79c4-153">In that case, both registry keys will be present.</span></span>

## <a name="tests"></a><span data-ttu-id="c79c4-154">Pruebas</span><span class="sxs-lookup"><span data-stu-id="c79c4-154">Tests</span></span>

<span data-ttu-id="c79c4-155">Inspeccione el código de la aplicación para conocer los requisitos que usan cualquiera de las API y los archivos binarios quitados.</span><span class="sxs-lookup"><span data-stu-id="c79c4-155">Inspect your app code for requirements that use any of the removed APIs and binaries.</span></span> <span data-ttu-id="c79c4-156">Una vez que haya quitado todas las instancias de de los archivos binarios de "aplicación principal", pruebe la aplicación en un entorno que no incluya el shell gráfico de servidor.</span><span class="sxs-lookup"><span data-stu-id="c79c4-156">After you have removed any instances of these from “core application” binaries, test your app in an environment that does not include the Server Graphical Shell.</span></span> <span data-ttu-id="c79c4-157">Las herramientas como el monitor de procesos pueden ayudarle con esto.</span><span class="sxs-lookup"><span data-stu-id="c79c4-157">Tools such as the Process Monitor might help with this.</span></span>

<span data-ttu-id="c79c4-158">Si no puede interrumpir por completo el uso de estas API y binarios, asegúrese de que la aplicación no funciona correctamente cuando se ejecuta en la interfaz de servidor básica o Server Core.</span><span class="sxs-lookup"><span data-stu-id="c79c4-158">If you cannot completely discontinue use of these APIs and binaries, ensure that your app fails gracefully when run on Minimal Server Interface or Server Core.</span></span>

## <a name="resources"></a><span data-ttu-id="c79c4-159">Recursos</span><span class="sxs-lookup"><span data-stu-id="c79c4-159">Resources</span></span>

-   <span data-ttu-id="c79c4-160">[Documentos existentes de Server Core en MSDN](/previous-versions/windows/desktop/legacy/ms723891(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="c79c4-160">[Existing Server Core docs on MSDN](/previous-versions/windows/desktop/legacy/ms723891(v=vs.85))</span></span>

 

 