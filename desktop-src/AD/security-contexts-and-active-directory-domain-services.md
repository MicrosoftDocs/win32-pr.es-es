---
title: Contextos de seguridad y Active Directory Domain Services
description: Cuando una aplicación se enlaza a un controlador de Dominio de Active Directory (DC), lo hace en el contexto de seguridad de una entidad de seguridad, que puede ser un usuario o una entidad como, por ejemplo, un equipo o un servicio de sistema.
ms.assetid: 7ad0acbe-f81b-46d6-be87-3526b0bfbd1b
ms.tgt_platform: multiple
keywords:
- Active Directory de Active Directory, contextos de seguridad
- contextos de seguridad Active Directory
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c337cb05f8158dbb90f231652c42fb10a486aef4
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/17/2020
ms.locfileid: "104077494"
---
# <a name="security-contexts-and-active-directory-domain-services"></a><span data-ttu-id="ad320-105">Contextos de seguridad y Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="ad320-105">Security Contexts and Active Directory Domain Services</span></span>

<span data-ttu-id="ad320-106">Cuando una aplicación se enlaza a un controlador de Dominio de Active Directory (DC), lo hace en el contexto de seguridad de una entidad de seguridad, que puede ser un usuario o una entidad como, por ejemplo, un equipo o un servicio de sistema.</span><span class="sxs-lookup"><span data-stu-id="ad320-106">When an application binds to an Active Directory Domain Controller (DC), it does so in the security context of a security principal, which can be a user or an entity such as a computer or a system service.</span></span> <span data-ttu-id="ad320-107">El contexto de seguridad es la cuenta de usuario que el sistema utiliza para exigir la seguridad cuando un subproceso intenta tener acceso a un objeto protegible.</span><span class="sxs-lookup"><span data-stu-id="ad320-107">The security context is the user account that the system uses to enforce security when a thread attempts to access a securable object.</span></span> <span data-ttu-id="ad320-108">Estos datos incluyen el identificador de seguridad (SID) del usuario, las pertenencias a grupos y los privilegios.</span><span class="sxs-lookup"><span data-stu-id="ad320-108">This data includes the user security identifier (SID), group memberships, and privileges.</span></span>

<span data-ttu-id="ad320-109">Un usuario establece un contexto de seguridad mediante la presentación de credenciales para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="ad320-109">A user establishes a security context by presenting credentials for authentication.</span></span> <span data-ttu-id="ad320-110">Si se autentican las credenciales, el sistema genera un token de acceso que identifica las pertenencias a grupos y los privilegios asociados a la cuenta de usuario.</span><span class="sxs-lookup"><span data-stu-id="ad320-110">If the credentials are authenticated, the system produces an access token that identifies the group memberships and privileges associated with the user account.</span></span> <span data-ttu-id="ad320-111">El sistema comprueba el token de acceso al intentar tener acceso a un objeto de directorio.</span><span class="sxs-lookup"><span data-stu-id="ad320-111">The system verifies your access token when you attempt to access a directory object.</span></span> <span data-ttu-id="ad320-112">Compara los datos del token de acceso con las cuentas y grupos a los que el descriptor de seguridad de objeto ha concedido o denegado.</span><span class="sxs-lookup"><span data-stu-id="ad320-112">It compares the data in your access token to the accounts and groups granted or denied access by the object security descriptor.</span></span>

<span data-ttu-id="ad320-113">Use los métodos siguientes para controlar el contexto de seguridad con el que se enlaza a un Active Directory DC:</span><span class="sxs-lookup"><span data-stu-id="ad320-113">Use the following methods to control the security context with which you bind to an Active Directory DC:</span></span>

-   <span data-ttu-id="ad320-114">Enlace mediante la opción de **\_ \_ autenticación segura de ADS** con la función [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) o el método [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/iads/nf-iads-iadsopendsobject-opendsobject) y especifique explícitamente un nombre de usuario y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="ad320-114">Bind using the **ADS\_SECURE\_AUTHENTICATION** option with the [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) function or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/iads/nf-iads-iadsopendsobject-opendsobject) method and explicitly specify a user name and password.</span></span> <span data-ttu-id="ad320-115">El sistema autentica estas credenciales y genera un token de acceso que utiliza para la comprobación de acceso mientras dure dicho enlace.</span><span class="sxs-lookup"><span data-stu-id="ad320-115">The system authenticates these credentials and generates an access token that it uses for access verification for the duration of that binding.</span></span> <span data-ttu-id="ad320-116">Para más información, consulte [Autenticación](authentication.md).</span><span class="sxs-lookup"><span data-stu-id="ad320-116">For more information, see [Authentication](authentication.md).</span></span>
-   <span data-ttu-id="ad320-117">Enlazar mediante la opción de **\_ \_ autenticación segura de ADS** , pero sin especificar credenciales.</span><span class="sxs-lookup"><span data-stu-id="ad320-117">Bind using the **ADS\_SECURE\_AUTHENTICATION** option, but without specifying credentials.</span></span> <span data-ttu-id="ad320-118">Si no va a suplantar a un usuario, el sistema utiliza el contexto de seguridad principal de la aplicación, es decir, el contexto de seguridad del usuario que inició la aplicación.</span><span class="sxs-lookup"><span data-stu-id="ad320-118">If you are not impersonating a user, the system uses the primary security context of your application, that is, the security context of the user who started your application.</span></span> <span data-ttu-id="ad320-119">En el caso de un servicio del sistema, este es el contexto de seguridad de la cuenta de servicio o la cuenta LocalSystem.</span><span class="sxs-lookup"><span data-stu-id="ad320-119">In the case of a system service, this is the security context of the service account or the LocalSystem account.</span></span>
-   <span data-ttu-id="ad320-120">Suplantar a un usuario y, a continuación, enlazar con la **\_ \_ autenticación segura de ADS**, pero sin especificar credenciales.</span><span class="sxs-lookup"><span data-stu-id="ad320-120">Impersonate a user and then bind with **ADS\_SECURE\_AUTHENTICATION**, but without specifying credentials.</span></span> <span data-ttu-id="ad320-121">En este caso, el sistema utiliza el contexto de seguridad del cliente que se suplanta.</span><span class="sxs-lookup"><span data-stu-id="ad320-121">In this case, the system uses the security context of the client that is impersonated.</span></span> <span data-ttu-id="ad320-122">Para obtener más información, vea [suplantación de cliente](/windows/desktop/SecAuthZ/client-impersonation).</span><span class="sxs-lookup"><span data-stu-id="ad320-122">For more information, see [Client Impersonation](/windows/desktop/SecAuthZ/client-impersonation).</span></span>
-   <span data-ttu-id="ad320-123">Enlace con [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) o [**IADsOpenDSObject:: OpenDSObject**](/windows/desktop/api/iads/nf-iads-iadsopendsobject-opendsobject) con la opción **ADS \_ no \_ Authentication** .</span><span class="sxs-lookup"><span data-stu-id="ad320-123">Bind using [**ADsOpenObject**](/windows/desktop/api/adshlp/nf-adshlp-adsopenobject) or [**IADsOpenDSObject::OpenDSObject**](/windows/desktop/api/iads/nf-iads-iadsopendsobject-opendsobject) with the **ADS\_NO\_AUTHENTICATION** option.</span></span> <span data-ttu-id="ad320-124">Este método enlaza sin autenticación y da como resultado "todos" como el contexto de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ad320-124">This method binds without authentication and results in "Everyone" as the security context.</span></span> <span data-ttu-id="ad320-125">Solo el proveedor LDAP es compatible con esta opción.</span><span class="sxs-lookup"><span data-stu-id="ad320-125">Only the LDAP provider supports this option.</span></span>

<span data-ttu-id="ad320-126">Si es posible, enlace sin especificar credenciales.</span><span class="sxs-lookup"><span data-stu-id="ad320-126">If possible, bind without specifying credentials.</span></span> <span data-ttu-id="ad320-127">Es decir, use el contexto de seguridad del usuario que ha iniciado sesión o del cliente suplantado.</span><span class="sxs-lookup"><span data-stu-id="ad320-127">That is, use the security context of the logged-on user or the impersonated client.</span></span> <span data-ttu-id="ad320-128">Esto le permite evitar el almacenamiento en caché de las credenciales.</span><span class="sxs-lookup"><span data-stu-id="ad320-128">This enables you to avoid caching credentials.</span></span> <span data-ttu-id="ad320-129">Si debe usar credenciales de usuario alternativas, pida las credenciales y enlácelo, pero no las almacene en caché.</span><span class="sxs-lookup"><span data-stu-id="ad320-129">If you must use alternate user credentials, prompt for the credentials, bind with them, but do not cache them.</span></span> <span data-ttu-id="ad320-130">Para usar el mismo contexto de seguridad en varias operaciones de enlace, puede especificar el nombre de usuario y la contraseña para la primera operación de enlace y, a continuación, especificar solo el nombre de usuario para realizar los siguientes enlaces.</span><span class="sxs-lookup"><span data-stu-id="ad320-130">To use the same security context in multiple bind operations, you can specify the user name and password for the first bind operation and then specify only the user name to make subsequent binds.</span></span> <span data-ttu-id="ad320-131">Para obtener más información sobre el uso de esta técnica, vea [autenticación](authentication.md).</span><span class="sxs-lookup"><span data-stu-id="ad320-131">For more information about using this technique, see [Authentication](authentication.md).</span></span>

<span data-ttu-id="ad320-132">Algunos contextos de seguridad son más eficaces que otros.</span><span class="sxs-lookup"><span data-stu-id="ad320-132">Some security contexts are more powerful than others.</span></span> <span data-ttu-id="ad320-133">Por ejemplo, la cuenta LocalSystem en un controlador de dominio tiene acceso completo a Active Directory Domain Services, mientras que un usuario típico solo tiene acceso limitado a algunos de los objetos del directorio.</span><span class="sxs-lookup"><span data-stu-id="ad320-133">For example, the LocalSystem account on a domain controller has complete access to Active Directory Domain Services, whereas a typical user has only limited access to a some of the objects in the directory.</span></span> <span data-ttu-id="ad320-134">En general, la aplicación no debe ejecutarse en un contexto de seguridad eficaz, como LocalSystem, cuando un contexto de seguridad menos eficaz es suficiente para realizar las operaciones.</span><span class="sxs-lookup"><span data-stu-id="ad320-134">In general, your application should not run in a powerful security context, such as LocalSystem, when a less powerful security context is sufficient to perform the operations.</span></span> <span data-ttu-id="ad320-135">Esto significa que es posible que desee dividir la aplicación en componentes independientes, cada uno de los cuales se ejecuta en un contexto de seguridad adecuado para las operaciones que se deben realizar.</span><span class="sxs-lookup"><span data-stu-id="ad320-135">This means that you may want to divide your application into separate components, each of which runs in a security context appropriate to the operations to perform.</span></span> <span data-ttu-id="ad320-136">Por ejemplo, la configuración de la aplicación puede dividirse de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="ad320-136">For example, your application setup can be divided as follows:</span></span>

-   <span data-ttu-id="ad320-137">Realizar cambios de esquema y extensiones en el contexto de un usuario que sea miembro del grupo administradores de esquema.</span><span class="sxs-lookup"><span data-stu-id="ad320-137">Perform schema changes and extensions in the context of a user who is a member of the Schema Administrators group.</span></span>
-   <span data-ttu-id="ad320-138">Realizar cambios en el contenedor de configuración en el contexto de un usuario que sea miembro del grupo administradores de empresas.</span><span class="sxs-lookup"><span data-stu-id="ad320-138">Perform configuration container changes in the context of a user who is a member of the Enterprise Administrators group.</span></span>
-   <span data-ttu-id="ad320-139">Realizar cambios en el contenedor de dominio en el contexto de un usuario que sea miembro del grupo administradores de dominio.</span><span class="sxs-lookup"><span data-stu-id="ad320-139">Perform domain container changes in the context of a user who is a member of the Domain Administrators group.</span></span>

 

 