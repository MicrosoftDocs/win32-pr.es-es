---
description: El representador de vídeo mejorado (EVR) es un componente que muestra vídeo en el monitor de usuarios.
ms.assetid: 1c985558-d25d-4f51-978a-58c05943dab9
title: Representador de vídeo mejorado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1ab0881da0827e6cc757a0ea855bcb51864dd98e
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104360097"
---
# <a name="enhanced-video-renderer"></a><span data-ttu-id="939bd-103">Representador de vídeo mejorado</span><span class="sxs-lookup"><span data-stu-id="939bd-103">Enhanced Video Renderer</span></span>

<span data-ttu-id="939bd-104">El representador de vídeo mejorado (EVR) es un componente que muestra vídeo en el monitor del usuario.</span><span class="sxs-lookup"><span data-stu-id="939bd-104">The enhanced video renderer (EVR) is a component that displays video on the user's monitor.</span></span> <span data-ttu-id="939bd-105">Existen dos versiones de EVR:</span><span class="sxs-lookup"><span data-stu-id="939bd-105">Two versions of the EVR exist:</span></span>

-   <span data-ttu-id="939bd-106">El receptor de medios EVR, para aplicaciones Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="939bd-106">The EVR media sink, for Media Foundation applications.</span></span>
-   <span data-ttu-id="939bd-107">El filtro EVR para las aplicaciones de DirectShow.</span><span class="sxs-lookup"><span data-stu-id="939bd-107">The EVR filter, for DirectShow applications.</span></span>

<span data-ttu-id="939bd-108">Ambas versiones usan los mismos objetos internos para representar vídeo y comparten muchas de las mismas interfaces.</span><span class="sxs-lookup"><span data-stu-id="939bd-108">Both versions use the same internal objects to render video, and they share many of the same interfaces.</span></span>

<span data-ttu-id="939bd-109">EVR puede mezclar hasta 16 secuencias de vídeo.</span><span class="sxs-lookup"><span data-stu-id="939bd-109">The EVR can mix up to 16 video streams.</span></span> <span data-ttu-id="939bd-110">El primer flujo de entrada se denomina *flujo de referencia*.</span><span class="sxs-lookup"><span data-stu-id="939bd-110">The first input stream is called the *reference stream*.</span></span> <span data-ttu-id="939bd-111">El flujo de referencia siempre aparece primero en el orden z.</span><span class="sxs-lookup"><span data-stu-id="939bd-111">The reference stream always appears first in the z-order.</span></span> <span data-ttu-id="939bd-112">Los flujos adicionales se denominan *subsecuencias* y se mezclan en la parte superior de la secuencia de referencia.</span><span class="sxs-lookup"><span data-stu-id="939bd-112">Any additional streams are called *substreams*, and are mixed on top of the reference stream.</span></span> <span data-ttu-id="939bd-113">La aplicación puede cambiar el orden z de las subsecuencias, pero no puede haber ningún subflujo en primer lugar en el orden z.</span><span class="sxs-lookup"><span data-stu-id="939bd-113">The application can change the z-order of the substreams, but no substream can be first in the z-order.</span></span>

<span data-ttu-id="939bd-114">El controlador de gráficos determina qué formatos de vídeo se admiten, pero normalmente se limitan a lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="939bd-114">The graphics driver determines which video formats are supported, but typically they are limited to the following:</span></span>

-   <span data-ttu-id="939bd-115">Secuencia de referencia: YUV progresivo o entrelazado sin alfa por píxel (como NV12 o YUY2); o RGB progresivo.</span><span class="sxs-lookup"><span data-stu-id="939bd-115">Reference stream: Progressive or interlaced YUV with no per-pixel alpha (such as NV12 or YUY2); or progressive RGB.</span></span>
-   <span data-ttu-id="939bd-116">Subsecuencias: YUV progresivo con alfa por píxel, como AYUV o AI44.</span><span class="sxs-lookup"><span data-stu-id="939bd-116">Substreams: Progressive YUV with per-pixel-alpha, such as AYUV or AI44.</span></span>

<span data-ttu-id="939bd-117">Los formatos de subflujo disponibles pueden depender del formato del flujo de referencia.</span><span class="sxs-lookup"><span data-stu-id="939bd-117">The available substream formats might depend on the format of the reference stream.</span></span> <span data-ttu-id="939bd-118">Para obtener más información, vea [EVR Media Type negociación](evr-media-type-negotiation.md).</span><span class="sxs-lookup"><span data-stu-id="939bd-118">For more information, see [EVR Media Type Negotiation](evr-media-type-negotiation.md).</span></span>

<span data-ttu-id="939bd-119">Internamente, el EVR usa un objeto denominado *mezclador* para componer los fotogramas de los flujos de entrada en una superficie para su representación.</span><span class="sxs-lookup"><span data-stu-id="939bd-119">Internally, the EVR uses an object called the *mixer* to composite the frames from the input streams onto one surface for rendering.</span></span> <span data-ttu-id="939bd-120">El mezclador también realiza el desentrelazado y la corrección del color.</span><span class="sxs-lookup"><span data-stu-id="939bd-120">The mixer also performs deinterlacing and color correction.</span></span> <span data-ttu-id="939bd-121">La salida del mezclador es el marco de vídeo compuesto final.</span><span class="sxs-lookup"><span data-stu-id="939bd-121">The output from the mixer is the final composited video frame.</span></span> <span data-ttu-id="939bd-122">Un segundo objeto denominado *Presenter* representa el fotograma de vídeo en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="939bd-122">A second object called the *presenter* renders the video frame to the display.</span></span> <span data-ttu-id="939bd-123">El presentador programa Cuándo se representan los fotogramas y administra el dispositivo Direct3D.</span><span class="sxs-lookup"><span data-stu-id="939bd-123">The presenter schedules when the frames are rendered and manages the Direct3D device.</span></span> <span data-ttu-id="939bd-124">Una aplicación puede proporcionar una implementación personalizada del mezclador o del presentador.</span><span class="sxs-lookup"><span data-stu-id="939bd-124">An application can provide a custom implementation of either the mixer or the presenter.</span></span>

<span data-ttu-id="939bd-125">La velocidad de fotogramas de salida está bloqueada en la secuencia de referencia.</span><span class="sxs-lookup"><span data-stu-id="939bd-125">The output frame rate is locked to the reference stream.</span></span> <span data-ttu-id="939bd-126">Cada vez que los subflujos reciben nuevos marcos, el mezclador los contiene.</span><span class="sxs-lookup"><span data-stu-id="939bd-126">Whenever the substreams receive new frames, the mixer holds onto them.</span></span> <span data-ttu-id="939bd-127">Cuando el flujo de referencia recibe un nuevo fotograma, el mezclador lo compone con los fotogramas de subsecuencia.</span><span class="sxs-lookup"><span data-stu-id="939bd-127">When the reference stream receives a new frame, the mixer composites that frame with the substream frames.</span></span> <span data-ttu-id="939bd-128">(Si la secuencia de referencia está entrelazada, un marco de referencia completo puede requerir más de un ejemplo multimedia). Es posible que un subflujo reciba más de un fotograma mientras el mezclador está esperando un fotograma de referencia.</span><span class="sxs-lookup"><span data-stu-id="939bd-128">(If the reference stream is interlaced, a complete reference frame may require more than one media sample.) It is possible for a substream to receive more than one frame while the mixer is waiting for a reference frame.</span></span> <span data-ttu-id="939bd-129">En ese caso, el mezclador simplemente descarta el marco de subsecuencia anterior.</span><span class="sxs-lookup"><span data-stu-id="939bd-129">In that case, the mixer simply discards the previous substream frame.</span></span>

<span data-ttu-id="939bd-130">Dado que el presentador crea el dispositivo Direct3D, también es responsable de compartir el dispositivo con otros objetos de canalización que necesiten tener acceso a los servicios de aceleración de vídeo de DirectX (DXVA).</span><span class="sxs-lookup"><span data-stu-id="939bd-130">Because the presenter creates the Direct3D device, it is also responsible for sharing the device with other pipeline objects that need to access DirectX Video Acceleration (DXVA) services.</span></span> <span data-ttu-id="939bd-131">En concreto, el mezclador de EVR usa los servicios de procesamiento de vídeo de DXVA para Desentrelazar y mezclar el vídeo.</span><span class="sxs-lookup"><span data-stu-id="939bd-131">In particular, the EVR mixer uses the DXVA video processing services to deinterlace and mix the video.</span></span> <span data-ttu-id="939bd-132">Externos a EVR, los descodificadores de software pueden usar DXVA para la descodificación de vídeo acelerada.</span><span class="sxs-lookup"><span data-stu-id="939bd-132">External to the EVR, software decoders may use DXVA for accelerated video decoding.</span></span> <span data-ttu-id="939bd-133">El presentador comparte el dispositivo Direct3D mediante el Administrador de dispositivos de [Direct3D](direct3d-device-manager.md).</span><span class="sxs-lookup"><span data-stu-id="939bd-133">The presenter shares the Direct3D device by means of the [Direct3D Device Manager](direct3d-device-manager.md).</span></span> <span data-ttu-id="939bd-134">En el diagrama siguiente se muestra la arquitectura interna de EVR.</span><span class="sxs-lookup"><span data-stu-id="939bd-134">The following diagram shows the internal architecture of the EVR.</span></span> <span data-ttu-id="939bd-135">(El descodificador de software, sombreado en gris, no forma parte de la EVR).</span><span class="sxs-lookup"><span data-stu-id="939bd-135">(The software decoder, shaded in gray, is not part of the EVR.)</span></span>

![diagrama arquitectónico en el que se muestra el EVR.](images/5d4a1fd9-25ff-4cc5-a486-0d22f34bbfd7.gif)

## <a name="evr-interfaces"></a><span data-ttu-id="939bd-137">Interfaces EVR</span><span class="sxs-lookup"><span data-stu-id="939bd-137">EVR Interfaces</span></span>

<span data-ttu-id="939bd-138">EVR admite las siguientes interfaces.</span><span class="sxs-lookup"><span data-stu-id="939bd-138">The EVR supports the following interfaces.</span></span> <span data-ttu-id="939bd-139">El mezclador o el presentador implementa algunas de estas interfaces.</span><span class="sxs-lookup"><span data-stu-id="939bd-139">Some of these interfaces are implemented by the mixer or presenter.</span></span> <span data-ttu-id="939bd-140">Para cada interfaz, en el tema de referencia se describe cómo obtener un puntero a la interfaz.</span><span class="sxs-lookup"><span data-stu-id="939bd-140">For each interface, the reference topic describes how to get a pointer to the interface.</span></span>

| <span data-ttu-id="939bd-141">Interfaz</span><span class="sxs-lookup"><span data-stu-id="939bd-141">Interface</span></span>                                                    | <span data-ttu-id="939bd-142">Descripción</span><span class="sxs-lookup"><span data-stu-id="939bd-142">Description</span></span>                                                                                       |
|--------------------------------------------------------------|---------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="939bd-143">**IEVRFilterConfig**</span><span class="sxs-lookup"><span data-stu-id="939bd-143">**IEVRFilterConfig**</span></span>](/windows/desktop/api/evr/nn-evr-ievrfilterconfig)                 | <span data-ttu-id="939bd-144">Establece el número de clavijas de entrada en el filtro de EVR (solo DirectShow).</span><span class="sxs-lookup"><span data-stu-id="939bd-144">Sets the number of input pins on the EVR filter (DirectShow only).</span></span>                                |
| [<span data-ttu-id="939bd-145">**IEVRFilterConfigEx**</span><span class="sxs-lookup"><span data-stu-id="939bd-145">**IEVRFilterConfigEx**</span></span>](/windows/desktop/api/evr/nn-evr-ievrfilterconfigex)             | <span data-ttu-id="939bd-146">Configura el filtro de EVR (solo DirectShow).</span><span class="sxs-lookup"><span data-stu-id="939bd-146">Configures the EVR filter (DirectShow only).</span></span>                                                      |
| [<span data-ttu-id="939bd-147">**IEVRTrustedVideoPlugin**</span><span class="sxs-lookup"><span data-stu-id="939bd-147">**IEVRTrustedVideoPlugin**</span></span>](/windows/desktop/api/evr/nn-evr-ievrtrustedvideoplugin)     | <span data-ttu-id="939bd-148">Habilita un complemento de EVR para representar vídeo protegido.</span><span class="sxs-lookup"><span data-stu-id="939bd-148">Enables an EVR plug-in to render protected video.</span></span>                                                 |
| [<span data-ttu-id="939bd-149">**IMFDesiredSample**</span><span class="sxs-lookup"><span data-stu-id="939bd-149">**IMFDesiredSample**</span></span>](/windows/desktop/api/evr/nn-evr-imfdesiredsample)                 | <span data-ttu-id="939bd-150">Permite que el presentador de EVR solicite un fotograma específico del mezclador.</span><span class="sxs-lookup"><span data-stu-id="939bd-150">Enables the EVR presenter to request a specific frame from the mixer.</span></span>                             |
| [<span data-ttu-id="939bd-151">**IMFQualityAdvise**</span><span class="sxs-lookup"><span data-stu-id="939bd-151">**IMFQualityAdvise**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfqualityadvise)                 | <span data-ttu-id="939bd-152">Permite que el administrador de calidad ajuste la calidad del vídeo EVR.</span><span class="sxs-lookup"><span data-stu-id="939bd-152">Enables the quality manager to adjust the EVR video quality.</span></span>                                      |
| [<span data-ttu-id="939bd-153">**IMFTopologyServiceLookup**</span><span class="sxs-lookup"><span data-stu-id="939bd-153">**IMFTopologyServiceLookup**</span></span>](/windows/desktop/api/evr/nn-evr-imftopologyservicelookup) | <span data-ttu-id="939bd-154">Permite a un ponente o presentador personalizado obtener punteros de interfaz de EVR.</span><span class="sxs-lookup"><span data-stu-id="939bd-154">Enables a custom mixer or presenter to get interface pointers from the EVR.</span></span>                       |
| [<span data-ttu-id="939bd-155">**IMFVideoDeviceID**</span><span class="sxs-lookup"><span data-stu-id="939bd-155">**IMFVideoDeviceID**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideodeviceid)                 | <span data-ttu-id="939bd-156">Devuelve el identificador del dispositivo de un mezclador o un presentador de EVR.</span><span class="sxs-lookup"><span data-stu-id="939bd-156">Returns the device identifier of an EVR mixer or presenter.</span></span>                                       |
| [<span data-ttu-id="939bd-157">**IMFVideoDisplayControl**</span><span class="sxs-lookup"><span data-stu-id="939bd-157">**IMFVideoDisplayControl**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideodisplaycontrol)     | <span data-ttu-id="939bd-158">Controla cómo el EVR muestra el vídeo.</span><span class="sxs-lookup"><span data-stu-id="939bd-158">Controls how the EVR displays video.</span></span>                                                              |
| [<span data-ttu-id="939bd-159">**IMFVideoMixerBitmap**</span><span class="sxs-lookup"><span data-stu-id="939bd-159">**IMFVideoMixerBitmap**</span></span>](/windows/desktop/api/evr9/nn-evr9-imfvideomixerbitmap)           | <span data-ttu-id="939bd-160">Alpha: combina una imagen de mapa de bits estática con el vídeo.</span><span class="sxs-lookup"><span data-stu-id="939bd-160">Alpha-blends a static bitmap image with the video.</span></span>                                                |
| [<span data-ttu-id="939bd-161">**IMFVideoMixerControl**</span><span class="sxs-lookup"><span data-stu-id="939bd-161">**IMFVideoMixerControl**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol)         | <span data-ttu-id="939bd-162">Controla la forma en que el representador de vídeo mejorado (EVR) combina subsecuencias de vídeo.</span><span class="sxs-lookup"><span data-stu-id="939bd-162">Controls how the Enhanced Video Renderer (EVR) mixes video substreams.</span></span>                            |
| [<span data-ttu-id="939bd-163">**IMFVideoMixerControl2**</span><span class="sxs-lookup"><span data-stu-id="939bd-163">**IMFVideoMixerControl2**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideomixercontrol2)       | <span data-ttu-id="939bd-164">Controla las preferencias del desentrelazado de vídeo.</span><span class="sxs-lookup"><span data-stu-id="939bd-164">Controls preferences for video deinterlacing.</span></span>                                                     |
| [<span data-ttu-id="939bd-165">**IMFVideoPositionMapper**</span><span class="sxs-lookup"><span data-stu-id="939bd-165">**IMFVideoPositionMapper**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideopositionmapper)     | <span data-ttu-id="939bd-166">Asigna una posición en una secuencia de vídeo de entrada a la posición correspondiente en una secuencia de vídeo de salida.</span><span class="sxs-lookup"><span data-stu-id="939bd-166">Maps a position on an input video stream to the corresponding position on an output video stream.</span></span> |
| [<span data-ttu-id="939bd-167">**IMFVideoPresenter**</span><span class="sxs-lookup"><span data-stu-id="939bd-167">**IMFVideoPresenter**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideopresenter)               | <span data-ttu-id="939bd-168">Expuesto por el presentador de EVR.</span><span class="sxs-lookup"><span data-stu-id="939bd-168">Exposed by the EVR presenter.</span></span>                                                                     |
| [<span data-ttu-id="939bd-169">**IMFVideoProcessor**</span><span class="sxs-lookup"><span data-stu-id="939bd-169">**IMFVideoProcessor**</span></span>](/windows/desktop/api/evr9/nn-evr9-imfvideoprocessor)               | <span data-ttu-id="939bd-170">Controla el procesamiento de vídeo, incluidos el ajuste, los filtros de ruido y los filtros de detalle.</span><span class="sxs-lookup"><span data-stu-id="939bd-170">Controls video processing, including adjustment, noise filters, and detail filters.</span></span>               |
| [<span data-ttu-id="939bd-171">**IMFVideoRenderer**</span><span class="sxs-lookup"><span data-stu-id="939bd-171">**IMFVideoRenderer**</span></span>](/windows/desktop/api/evr/nn-evr-imfvideorenderer)                 | <span data-ttu-id="939bd-172">Establece un mezclador o presentador en el EVR.</span><span class="sxs-lookup"><span data-stu-id="939bd-172">Sets a mixer or presenter on the EVR.</span></span>                                                             |
| [<span data-ttu-id="939bd-173">**IMFVideoSampleAllocator**</span><span class="sxs-lookup"><span data-stu-id="939bd-173">**IMFVideoSampleAllocator**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfvideosampleallocator)   | <span data-ttu-id="939bd-174">Asigna ejemplos de vídeo.</span><span class="sxs-lookup"><span data-stu-id="939bd-174">Allocates video samples.</span></span>                                                                          |



 

## <a name="in-this-section"></a><span data-ttu-id="939bd-175">En esta sección</span><span class="sxs-lookup"><span data-stu-id="939bd-175">In This Section</span></span>



| <span data-ttu-id="939bd-176">Tema</span><span class="sxs-lookup"><span data-stu-id="939bd-176">Topic</span></span>                                                                    | <span data-ttu-id="939bd-177">Descripción</span><span class="sxs-lookup"><span data-stu-id="939bd-177">Description</span></span>                                                                           |
|--------------------------------------------------------------------------|---------------------------------------------------------------------------------------|
| [<span data-ttu-id="939bd-178">Usar el filtro EVR de DirectShow</span><span class="sxs-lookup"><span data-stu-id="939bd-178">Using the DirectShow EVR Filter</span></span>](using-the-directshow-evr-filter.md)   | <span data-ttu-id="939bd-179">Cómo usar EVR en una aplicación de DirectShow.</span><span class="sxs-lookup"><span data-stu-id="939bd-179">How to use the EVR in a DirectShow application.</span></span>                                       |
| [<span data-ttu-id="939bd-180">Uso del receptor de medios de EVR</span><span class="sxs-lookup"><span data-stu-id="939bd-180">Using the EVR Media Sink</span></span>](using-the-evr-media-sink.md)                 | <span data-ttu-id="939bd-181">Cómo usar EVR en una aplicación Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="939bd-181">How to use the EVR in a Media Foundation application.</span></span>                                 |
| [<span data-ttu-id="939bd-182">Usar los controles de presentación de vídeo</span><span class="sxs-lookup"><span data-stu-id="939bd-182">Using the Video Display Controls</span></span>](using-the-video-display-controls.md) | <span data-ttu-id="939bd-183">Cómo controlar el modo en que el EVR muestra el vídeo dentro de la ventana de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="939bd-183">How to control the way in which the EVR displays video inside the application window.</span></span> |
| [<span data-ttu-id="939bd-184">Usar los controles de mezclador de vídeo</span><span class="sxs-lookup"><span data-stu-id="939bd-184">Using the Video Mixer Controls</span></span>](using-the-video-mixer-controls.md)     | <span data-ttu-id="939bd-185">Cómo controlar el modo en que funciona el mezclador de EVR.</span><span class="sxs-lookup"><span data-stu-id="939bd-185">How to control the way in which the EVR mixer operates.</span></span>                               |
| [<span data-ttu-id="939bd-186">EVR negociación de tipo de medio</span><span class="sxs-lookup"><span data-stu-id="939bd-186">EVR Media Type Negotiation</span></span>](evr-media-type-negotiation.md)             | <span data-ttu-id="939bd-187">Describe cómo el EVR determina qué formatos de vídeo puede aceptar como entrada.</span><span class="sxs-lookup"><span data-stu-id="939bd-187">Describes how the EVR determines which video formats it can accept as input.</span></span>          |
| [<span data-ttu-id="939bd-188">Mezcladores personalizados</span><span class="sxs-lookup"><span data-stu-id="939bd-188">Custom Mixers</span></span>](custom-mixers.md)                                       | <span data-ttu-id="939bd-189">Cómo escribir un mezclador personalizado para el EVR.</span><span class="sxs-lookup"><span data-stu-id="939bd-189">How to write a custom mixer for the EVR.</span></span>                                              |
| [<span data-ttu-id="939bd-190">Cómo escribir un presentador de EVR</span><span class="sxs-lookup"><span data-stu-id="939bd-190">How to Write an EVR Presenter</span></span>](how-to-write-an-evr-presenter.md)       | <span data-ttu-id="939bd-191">Cómo escribir un presentador personalizado para el EVR.</span><span class="sxs-lookup"><span data-stu-id="939bd-191">How to write a custom presenter for the EVR.</span></span>                                          |



 

## <a name="related-topics"></a><span data-ttu-id="939bd-192">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="939bd-192">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="939bd-193">Reproducción de audio y vídeo</span><span class="sxs-lookup"><span data-stu-id="939bd-193">Audio/Video Playback</span></span>](audio-video-playback.md)
</dt> </dl>

 

 



