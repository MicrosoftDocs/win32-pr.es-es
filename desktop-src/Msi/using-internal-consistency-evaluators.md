---
description: Para validar una base de datos, use una herramienta de validación especial para combinar un archivo. Cub que contenga los evaluadores de coherencia internos (CIEM) en la base de datos, ejecute el ICEs y informe de los resultados.
ms.assetid: bdf38673-ee3d-47d8-ad6e-562cd5626918
title: Usar evaluadores de coherencia interna
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 423e6dab453ae495dc6029b54eb039c8acc60f33
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105677397"
---
# <a name="using-internal-consistency-evaluators"></a><span data-ttu-id="3977b-103">Usar evaluadores de coherencia interna</span><span class="sxs-lookup"><span data-stu-id="3977b-103">Using Internal Consistency Evaluators</span></span>

<span data-ttu-id="3977b-104">Para validar una base de datos, use una herramienta de validación especial para combinar un archivo. Cub que contenga los [evaluadores de coherencia internos](internal-consistency-evaluators-ices.md) (CIEM) en la base de datos, ejecute el ICEs y informe de los resultados.</span><span class="sxs-lookup"><span data-stu-id="3977b-104">To validate a database, use a special validation tool to merge a .cub file containing the [Internal Consistency Evaluators](internal-consistency-evaluators-ices.md) (ICEs) into your database, execute the ICEs, and report the results.</span></span> <span data-ttu-id="3977b-105">En el kit de desarrollo de software (SDK) de Microsoft Windows se proporcionan varias herramientas de este tipo.</span><span class="sxs-lookup"><span data-stu-id="3977b-105">Several such tools are provided in the Microsoft Windows Software Development Kit (SDK).</span></span> <span data-ttu-id="3977b-106">Los entornos de creación de otros fabricantes también pueden incorporar el sistema de validación de ICE a su entorno de creación.</span><span class="sxs-lookup"><span data-stu-id="3977b-106">Authoring environments from third-party vendors also may incorporate the ICE validation system into their authoring environment.</span></span> <span data-ttu-id="3977b-107">También es posible escribir su propia herramienta para realizar la validación de ICE.</span><span class="sxs-lookup"><span data-stu-id="3977b-107">It is also possible to write your own tool to perform ICE validation.</span></span> <span data-ttu-id="3977b-108">La mayoría de las herramientas de validación de ICE combinan el archivo. Cub y la base de datos en una tercera base de datos temporal.</span><span class="sxs-lookup"><span data-stu-id="3977b-108">Most ICE validation tools merge the .cub file and your database into a third, temporary database.</span></span> <span data-ttu-id="3977b-109">En Windows Installer se muestran las advertencias, los errores, la información de depuración y los errores de API cuando se ejecuta cada ICE en el archivo. Cub.</span><span class="sxs-lookup"><span data-stu-id="3977b-109">Windows Installer displays warnings, errors, debugging information, and API errors as it executes each ICE in the .cub file.</span></span> <span data-ttu-id="3977b-110">Cuando el instalador termina de ejecutar el ICEs, cierra el archivo. msi, el archivo. Cub y la base de datos temporal sin guardar los cambios.</span><span class="sxs-lookup"><span data-stu-id="3977b-110">When the installer finishes executing the ICEs it closes the .msi file, .cub file, and temporary database without saving any changes.</span></span> <span data-ttu-id="3977b-111">El archivo. msi y el archivo. Cub permanecen inalterados por la prueba de validación.</span><span class="sxs-lookup"><span data-stu-id="3977b-111">The .msi file and .cub file remain unchanged by the validation test.</span></span>

<span data-ttu-id="3977b-112">Las acciones personalizadas de ICE se comunican con el usuario mediante una llamada a [**MsiProcessMessage**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) y el envío de un mensaje de usuario de INSTALLMESSAGE \_ .</span><span class="sxs-lookup"><span data-stu-id="3977b-112">ICE custom actions communicate to the user by calling [**MsiProcessMessage**](/windows/desktop/api/Msiquery/nf-msiquery-msiprocessmessage) and posting an INSTALLMESSAGE\_USER message.</span></span> <span data-ttu-id="3977b-113">Un mensaje de ICE suele devolver información como la siguiente:</span><span class="sxs-lookup"><span data-stu-id="3977b-113">An ICE message commonly returns information such as the following:</span></span>

-   <span data-ttu-id="3977b-114">Nombre del ICE que ha encontrado un error</span><span class="sxs-lookup"><span data-stu-id="3977b-114">Name of the ICE that has found an error</span></span>
-   <span data-ttu-id="3977b-115">Fecha en que se creó el ICE</span><span class="sxs-lookup"><span data-stu-id="3977b-115">Date the ICE was created</span></span>
-   <span data-ttu-id="3977b-116">Autor del ICE</span><span class="sxs-lookup"><span data-stu-id="3977b-116">Author of the ICE</span></span>
-   <span data-ttu-id="3977b-117">Fecha en que se modificó por última vez el ICE.</span><span class="sxs-lookup"><span data-stu-id="3977b-117">Date the ICE was last modified.</span></span>
-   <span data-ttu-id="3977b-118">Descripción del error de API que produce un error en ICE</span><span class="sxs-lookup"><span data-stu-id="3977b-118">Description of the API error causing the ICE to fail</span></span>
-   <span data-ttu-id="3977b-119">Descripción del error</span><span class="sxs-lookup"><span data-stu-id="3977b-119">Description of the error</span></span>
-   <span data-ttu-id="3977b-120">ADVERTENCIA al usuario</span><span class="sxs-lookup"><span data-stu-id="3977b-120">A warning to the user</span></span>
-   <span data-ttu-id="3977b-121">Nombre de la tabla de la base de datos que contiene el error o la advertencia</span><span class="sxs-lookup"><span data-stu-id="3977b-121">Name of the database table containing the error or warning</span></span>
-   <span data-ttu-id="3977b-122">Nombre de la columna de la tabla que contiene el error o la advertencia</span><span class="sxs-lookup"><span data-stu-id="3977b-122">Name of the table column containing the error or warning</span></span>
-   <span data-ttu-id="3977b-123">Claves principales de la tabla que contiene el error o la advertencia</span><span class="sxs-lookup"><span data-stu-id="3977b-123">Primary keys of the table containing the error or warning</span></span>
-   <span data-ttu-id="3977b-124">Una dirección URL a un archivo HTML que ofrece sugerencias de depuración</span><span class="sxs-lookup"><span data-stu-id="3977b-124">A URL to a HTML file giving debugging suggestions</span></span>
-   <span data-ttu-id="3977b-125">Una cadena que puede contener otra información.</span><span class="sxs-lookup"><span data-stu-id="3977b-125">A string that can contain other information</span></span>

<span data-ttu-id="3977b-126">Los autores de paquetes de instalación pueden escribir acciones personalizadas de ICE o utilizar el conjunto estándar de CIEM incluido en los archivos. Cub que se proporcionan con el SDK.</span><span class="sxs-lookup"><span data-stu-id="3977b-126">Authors of installation packages can write ICE custom actions or use the standard set of ICEs included in the .cub files provided with the SDK.</span></span> <span data-ttu-id="3977b-127">Para obtener más información sobre cómo escribir un ICE, consulte [creación de un ICE](building-an-ice.md).</span><span class="sxs-lookup"><span data-stu-id="3977b-127">For more information on how to write an ICE, see [Building an ICE](building-an-ice.md).</span></span>

<span data-ttu-id="3977b-128">Después de escribir el ICEs apropiado para la validación, el desarrollador debe recopilar las acciones personalizadas en una base de datos. msi, denominada archivo. Cub, que solo contiene el ICEs y las tablas necesarias.</span><span class="sxs-lookup"><span data-stu-id="3977b-128">After writing the appropriate ICEs for validation, a developer must collect the custom actions together into an .msi database, called a .cub file, that contains only the ICEs and their required tables.</span></span> <span data-ttu-id="3977b-129">No se puede instalar un archivo. Cub y solo se usa para almacenar y proporcionar acceso a las acciones personalizadas de ICE.</span><span class="sxs-lookup"><span data-stu-id="3977b-129">A .cub file cannot be installed and is used only to store and provide access to ICE custom actions.</span></span> <span data-ttu-id="3977b-130">Para obtener más información sobre cómo crear archivos. Cub, vea [crear una base de datos de ICE](building-an-ice-database.md).</span><span class="sxs-lookup"><span data-stu-id="3977b-130">For more information on making .cub files, see [Building an ICE Database](building-an-ice-database.md).</span></span> <span data-ttu-id="3977b-131">Como alternativa, los desarrolladores pueden validar su paquete de instalación mediante el ICEs existente descrito en [referencia de ICE](ice-reference.md).</span><span class="sxs-lookup"><span data-stu-id="3977b-131">Alternatively, developers can validate their installation package using the existing ICEs described in [ICE Reference](ice-reference.md).</span></span> <span data-ttu-id="3977b-132">Estos se pueden obtener a partir de archivos. Cub estándar que se proporcionan con el SDK.</span><span class="sxs-lookup"><span data-stu-id="3977b-132">These ICEs can be obtained from standard .cub files provided with the SDK.</span></span>

<span data-ttu-id="3977b-133">La instalación del editor de tablas de base de datos Orca o la herramienta de validación msival2 proporciona los archivos logo. Cub, Darice. Cub y Mergemod. Cub.</span><span class="sxs-lookup"><span data-stu-id="3977b-133">The installation of the database table editor Orca or the validation tool msival2 provides the Logo.cub, Darice.cub, and Mergemod.cub files.</span></span> <span data-ttu-id="3977b-134">El conjunto de ICEs en el archivo logo. Cub es un subconjunto de los del archivo Darice. Cub.</span><span class="sxs-lookup"><span data-stu-id="3977b-134">The set of ICEs in the Logo.cub file is a subset of those in the Darice.cub file.</span></span> <span data-ttu-id="3977b-135">Si el paquete pasa la validación mediante Darice. Cub, se pasará con logo. Cub.</span><span class="sxs-lookup"><span data-stu-id="3977b-135">If your package passes validation using Darice.cub, it will pass with Logo.cub.</span></span> <span data-ttu-id="3977b-136">Mergemod. Cub contiene un conjunto de ICEs que se usa para validar los módulos de combinación.</span><span class="sxs-lookup"><span data-stu-id="3977b-136">Mergemod.cub contains a set of ICEs used to validate merge modules.</span></span> <span data-ttu-id="3977b-137">Para obtener más información, consulte [Merge Module Ice Reference](merge-module-ice-reference.md).</span><span class="sxs-lookup"><span data-stu-id="3977b-137">For more information, see [Merge Module ICE Reference](merge-module-ice-reference.md).</span></span>

<span data-ttu-id="3977b-138">**Para validar un paquete de instalación**</span><span class="sxs-lookup"><span data-stu-id="3977b-138">**To validate an installation package**</span></span>

1.  <span data-ttu-id="3977b-139">Obtenga o cree las acciones personalizadas de ICE adecuadas.</span><span class="sxs-lookup"><span data-stu-id="3977b-139">Obtain or author the appropriate ICE custom actions.</span></span> <span data-ttu-id="3977b-140">Es posible que pueda usar uno o más de los CIEM existentes descritos en la [referencia de ICE](ice-reference.md).</span><span class="sxs-lookup"><span data-stu-id="3977b-140">You may be able to use one or more of the existing ICEs described in the [ICE Reference](ice-reference.md).</span></span> <span data-ttu-id="3977b-141">Si la validación requiere un ICE que todavía no se encuentra en esta lista, puede crear un nuevo ICE como se describe en [creación de un ICE](building-an-ice.md).</span><span class="sxs-lookup"><span data-stu-id="3977b-141">If your validation requires an ICE not yet in this list, you can create a new ICE as described in [Building an ICE](building-an-ice.md).</span></span>
2.  <span data-ttu-id="3977b-142">Preparar una base de datos de ICE que contenga todas las acciones personalizadas de ICE.</span><span class="sxs-lookup"><span data-stu-id="3977b-142">Prepare an ICE Database containing all the ICE custom actions.</span></span> <span data-ttu-id="3977b-143">Vea la sección [Building a Ice Database](building-an-ice-database.md) para obtener información sobre cómo preparar un archivo. Cub.</span><span class="sxs-lookup"><span data-stu-id="3977b-143">See the section [Building An ICE Database](building-an-ice-database.md) for information about preparing a .cub file.</span></span>
3.  <span data-ttu-id="3977b-144">Proporcione el archivo. Cub y el archivo. msi a una herramienta de validación de paquetes como [Orca.exe](orca-exe.md) o [Msival2.exe](msival2-exe.md).</span><span class="sxs-lookup"><span data-stu-id="3977b-144">Provide the .cub file and the .msi file to a package validation tool such as [Orca.exe](orca-exe.md) or [Msival2.exe](msival2-exe.md).</span></span>

<span data-ttu-id="3977b-145">Tenga en cuenta que los módulos de combinación deben validarse tal y como se describe en [validación de módulos de combinación](validating-merge-modules.md).</span><span class="sxs-lookup"><span data-stu-id="3977b-145">Note that merge modules should be validated as described in [Validating Merge Modules](validating-merge-modules.md).</span></span>

 

 



