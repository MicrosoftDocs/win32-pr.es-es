---
description: No es necesario que las aplicaciones usen el filtrado de textura.
ms.assetid: bba0e485-ac5a-4e43-9eb7-25cd0c90d316
title: Muestreo de Nearest-Point (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b11cf98ee917b124b35f3c30ff263365ec3c46e1
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104422882"
---
# <a name="nearest-point-sampling-direct3d-9"></a><span data-ttu-id="5e141-103">Muestreo de Nearest-Point (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="5e141-103">Nearest-Point Sampling (Direct3D 9)</span></span>

<span data-ttu-id="5e141-104">No es necesario que las aplicaciones usen el filtrado de textura.</span><span class="sxs-lookup"><span data-stu-id="5e141-104">Applications are not required to use texture filtering.</span></span> <span data-ttu-id="5e141-105">Direct3D se puede establecer para que calcule la dirección textura, que a menudo no se evalúa como enteros, y copia el color de textura con la dirección de entero más cercana.</span><span class="sxs-lookup"><span data-stu-id="5e141-105">Direct3D can be set so that it computes the texel address, which often does not evaluate to integers, and copies the color of the texel with the closest integer address.</span></span> <span data-ttu-id="5e141-106">Este proceso se denomina muestreo de punto más cercano.</span><span class="sxs-lookup"><span data-stu-id="5e141-106">This process is called nearest-point sampling.</span></span> <span data-ttu-id="5e141-107">Puede ser una forma rápida y eficaz de procesar las texturas si el tamaño de la textura es similar al tamaño de la imagen del primitivo en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="5e141-107">This can be a fast and efficient way to process textures if the size of the texture is similar to the size of the primitive's image on the screen.</span></span> <span data-ttu-id="5e141-108">Si no es así, la textura debe ser ampliada o reducida.</span><span class="sxs-lookup"><span data-stu-id="5e141-108">If not, the texture must be magnified or minified.</span></span> <span data-ttu-id="5e141-109">El resultado puede ser una imagen fragmentada, con alias o borrosa.</span><span class="sxs-lookup"><span data-stu-id="5e141-109">The result can be a chunky, aliased, or blurred image.</span></span>

<span data-ttu-id="5e141-110">La aplicación de C++ puede seleccionar el muestreo de punto más cercano llamando al método [**IDirect3DDevice9:: SetSamplerState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate) .</span><span class="sxs-lookup"><span data-stu-id="5e141-110">Your C++ application can select nearest-point sampling by calling the [**IDirect3DDevice9::SetSamplerState**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setsamplerstate) method.</span></span> <span data-ttu-id="5e141-111">Establezca el valor del primer parámetro en el número de índice entero (0-7) de la textura para la que está seleccionando un método de filtrado de textura.</span><span class="sxs-lookup"><span data-stu-id="5e141-111">Set the value of the first parameter to the integer index number (0-7) of the texture for which you are selecting a texture filtering method.</span></span> <span data-ttu-id="5e141-112">Pase D3DSAMP \_ MAGFILTER, D3DSAMP \_ MINFILTER o D3DSAMP \_ MIPFILTER para el segundo parámetro con el fin de establecer el filtro de ampliación, minificación o mipmapping.</span><span class="sxs-lookup"><span data-stu-id="5e141-112">Pass D3DSAMP\_MAGFILTER, D3DSAMP\_MINFILTER, or D3DSAMP\_MIPFILTER for the second parameter to set the magnification, minification, or mipmapping filter.</span></span> <span data-ttu-id="5e141-113">Pase \_ el punto D3DTEXF en el tercer parámetro.</span><span class="sxs-lookup"><span data-stu-id="5e141-113">Pass D3DTEXF\_POINT in the third parameter.</span></span>

<span data-ttu-id="5e141-114">Debe utilizar cuidadosamente el muestreo de punto más cercano, ya que a veces puede producir artefactos gráficos cuando se muestrea la textura en el límite entre dos textura.</span><span class="sxs-lookup"><span data-stu-id="5e141-114">You should use nearest-point sampling carefully, because it can sometimes cause graphic artifacts when the texture is sampled at the boundary between two texels.</span></span> <span data-ttu-id="5e141-115">Este límite es la posición a lo largo de la textura (u o v) en la que el textura muestreado realiza la transición de un textura al siguiente.</span><span class="sxs-lookup"><span data-stu-id="5e141-115">This boundary is the position along the texture (u or v) at which the sampled texel transitions from one texel to the next.</span></span> <span data-ttu-id="5e141-116">Cuando se usa el muestreo de puntos, el sistema elige un textura de ejemplo u otro, y el resultado puede cambiar repentinamente de un textura al siguiente textura a medida que se cruza el límite.</span><span class="sxs-lookup"><span data-stu-id="5e141-116">When point sampling is used, the system chooses one sample texel or the other, and the result can change abruptly from one texel to the next texel as the boundary is crossed.</span></span> <span data-ttu-id="5e141-117">Este efecto puede aparecer como artefactos gráficos no deseados en la textura mostrada.</span><span class="sxs-lookup"><span data-stu-id="5e141-117">This effect can appear as undesired graphic artifacts in the displayed texture.</span></span> <span data-ttu-id="5e141-118">Cuando se usa el filtrado lineal, el textura resultante se calcula a partir de los textura adyacentes y de mezcla fluida entre ellos a medida que el índice de textura se desplaza por el límite.</span><span class="sxs-lookup"><span data-stu-id="5e141-118">When linear filtering is used, the resulting texel is computed from both adjacent texels and smoothly blends between them as the texture index moves through the boundary.</span></span>

<span data-ttu-id="5e141-119">Este efecto puede verse cuando se asigna una textura muy pequeña a un polígono muy grande: una operación a menudo denominada ampliación.</span><span class="sxs-lookup"><span data-stu-id="5e141-119">This effect can be seen when mapping a very small texture onto a very large polygon: an operation often called magnification.</span></span> <span data-ttu-id="5e141-120">Por ejemplo, cuando se usa una textura que se parece a un tablero de ajedrez, el muestreo de punto más cercano produce un tablero de ajedrez mayor que muestra bordes distintos.</span><span class="sxs-lookup"><span data-stu-id="5e141-120">For example, when using a texture that looks like a checkerboard, nearest-point sampling results in a larger checkerboard that shows distinct edges.</span></span> <span data-ttu-id="5e141-121">Por el contrario, el filtrado de textura lineal da como resultado una imagen en la que los colores del tablero de ajedrez varían suavemente en el polígono.</span><span class="sxs-lookup"><span data-stu-id="5e141-121">By contrast, linear texture filtering results in an image where the checkerboard colors vary smoothly across the polygon.</span></span>

<span data-ttu-id="5e141-122">En la mayoría de los casos, las aplicaciones reciben los mejores resultados evitando el ejemplo de punto más cercano siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="5e141-122">In most cases, applications receive the best results by avoiding nearest-point sample wherever possible.</span></span> <span data-ttu-id="5e141-123">La mayoría del hardware de hoy en día está optimizado para el filtrado lineal, por lo que la aplicación no debe sufrir un rendimiento degradado.</span><span class="sxs-lookup"><span data-stu-id="5e141-123">The majority of hardware today is optimized for linear filtering, so your application should not suffer degraded performance.</span></span> <span data-ttu-id="5e141-124">Si el efecto que desea realmente requiere el uso del muestreo de punto más cercano (por ejemplo, al usar texturas para mostrar caracteres de texto legibles), la aplicación debe ser extremadamente cuidadosa para evitar el muestreo en los límites de textura, lo que podría dar lugar a efectos no deseados.</span><span class="sxs-lookup"><span data-stu-id="5e141-124">If the effect you desire absolutely requires the use of the nearest-point sampling - such as when using textures to display readable text characters - then your application should be extremely careful to avoid sampling at the texel boundaries, which might result in undesired effects.</span></span> <span data-ttu-id="5e141-125">En la ilustración siguiente se muestra el aspecto de estos artefactos.</span><span class="sxs-lookup"><span data-stu-id="5e141-125">The following illustration shows what these artifacts can look like.</span></span>

![Ilustración de un cuadro de seis secciones con líneas horizontales no continuas en los dos cuadrados de la esquina superior derecha](images/ptrtfct.png)

<span data-ttu-id="5e141-127">Observe que los dos cuadrados situados en la esquina superior derecha del grupo aparecen distintos de sus vecinos, con desplazamientos diagonales que se ejecutan a través de ellos.</span><span class="sxs-lookup"><span data-stu-id="5e141-127">Notice that the two squares in the upper right of the group appear different than their neighbors, with diagonal offsets running through them.</span></span> <span data-ttu-id="5e141-128">Para evitar artefactos gráficos como estos, debe estar familiarizado con las reglas de muestreo de texturas de Direct3D para el filtrado de punto más cercano.</span><span class="sxs-lookup"><span data-stu-id="5e141-128">To avoid graphic artifacts like these, you must be familiar with Direct3D texture sampling rules for nearest-point filtering.</span></span> <span data-ttu-id="5e141-129">Direct3D asigna una coordenada de textura de punto flotante que va de \[ 0,0, 1,0 \] (0,0 a 1,0, inclusive) a un valor de espacio textura entero que va de \[ -0,5, n-0,5 \] , donde n es el número de textura de una dimensión determinada en la textura.</span><span class="sxs-lookup"><span data-stu-id="5e141-129">Direct3D maps a floating-point texture coordinate ranging from \[0.0, 1.0\] (0.0 to 1.0, inclusive) to an integer texel space value ranging from \[ - 0.5, n - 0.5\], where n is the number of texels in a given dimension on the texture.</span></span> <span data-ttu-id="5e141-130">El índice de textura resultante se redondea al entero más próximo.</span><span class="sxs-lookup"><span data-stu-id="5e141-130">The resulting texture index is rounded to the nearest integer.</span></span> <span data-ttu-id="5e141-131">Esta asignación puede introducir imprecisiones de muestreo en los límites de textura.</span><span class="sxs-lookup"><span data-stu-id="5e141-131">This mapping can introduce sampling inaccuracies at texel boundaries.</span></span>

<span data-ttu-id="5e141-132">Para un ejemplo sencillo, imagine una aplicación que representa polígonos con el modo de \_ direccionamiento de textura D3DTADDRESS Wrap.</span><span class="sxs-lookup"><span data-stu-id="5e141-132">For a simple example, imagine an application that renders polygons with the D3DTADDRESS\_WRAP texture addressing mode.</span></span> <span data-ttu-id="5e141-133">Con la asignación empleada por Direct3D, el índice de textura u se asigna como se muestra en el diagrama siguiente para una textura con un ancho de 4 textura.</span><span class="sxs-lookup"><span data-stu-id="5e141-133">Using the mapping employed by Direct3D, the u texture index maps as show in the following diagram for a texture with a width of 4 texels.</span></span>

![diagrama de coordenadas de textura 0,0 y 1,0 en el límite entre textura](images/ptsmpprb.png)

<span data-ttu-id="5e141-135">Observe que las coordenadas de textura, 0,0 y 1,0 para esta ilustración, están exactamente en el límite entre textura.</span><span class="sxs-lookup"><span data-stu-id="5e141-135">Notice that the texture coordinates, 0.0 and 1.0 for this illustration, are exactly at the boundary between texels.</span></span> <span data-ttu-id="5e141-136">Mediante el método por el que Direct3D asigna valores, las coordenadas de textura van de \[ -0,5, 4-0,5 \] , donde 4 es el ancho de la textura.</span><span class="sxs-lookup"><span data-stu-id="5e141-136">Using the method by which Direct3D maps values, the texture coordinates range from \[ - 0.5, 4 - 0.5\], where 4 is the width of the texture.</span></span> <span data-ttu-id="5e141-137">En este caso, el valor de textura muestreado es 0 textura para un índice de textura de 1,0.</span><span class="sxs-lookup"><span data-stu-id="5e141-137">For this case, the sampled texel is the 0 texel for a texture index of 1.0.</span></span> <span data-ttu-id="5e141-138">Sin embargo, si la coordenada de textura solo era ligeramente inferior a 1,0, el textura muestreado sería el n textura en lugar de 0 textura.</span><span class="sxs-lookup"><span data-stu-id="5e141-138">However, if the texture coordinate was only slightly less than 1.0, the sampled texel would be the n texel instead of the 0 texel.</span></span>

<span data-ttu-id="5e141-139">La implicación de esto es que la ampliación de una pequeña textura con coordenadas de textura de exactamente 0,0 y 1,0 con filtrado de punto más cercano en un triángulo alineado con el espacio de pantalla da como resultado píxeles en los que se muestrea el mapa de textura en el límite entre textura.</span><span class="sxs-lookup"><span data-stu-id="5e141-139">The implication of this is that magnifying a small texture using texture coordinates of exactly 0.0 and 1.0 with nearest-point filtering on a screen-space aligned triangle results in pixels for which the texture map is sampled at the boundary between texels.</span></span> <span data-ttu-id="5e141-140">Las imprecisiones en el cálculo de coordenadas de textura, sin embargo pequeñas, producen artefactos a lo largo de las áreas de la imagen representada que corresponden a los bordes textura del mapa de textura.</span><span class="sxs-lookup"><span data-stu-id="5e141-140">Any inaccuracies in the computation of texture coordinates, however small, results in artifacts along the areas in the rendered image which correspond to the texel edges of the texture map.</span></span>

<span data-ttu-id="5e141-141">La realización de esta asignación de coordenadas de textura de punto flotante al número entero textura con una precisión perfecta es difícil, computacionalmente lenta y, por lo general, no es necesario.</span><span class="sxs-lookup"><span data-stu-id="5e141-141">Performing this mapping of floating point texture coordinates to integer texels with perfect accuracy is difficult, computationally time-consuming, and generally not necessary.</span></span> <span data-ttu-id="5e141-142">La mayoría de las implementaciones de hardware usan un enfoque iterativo para calcular las coordenadas de textura en cada ubicación de píxel dentro de un triángulo.</span><span class="sxs-lookup"><span data-stu-id="5e141-142">Most hardware implementations use an iterative approach for computing texture coordinates at each pixel location within a triangle.</span></span> <span data-ttu-id="5e141-143">Los enfoques iterativos suelen ocultar estas imprecisiones, ya que los errores se acumulan uniformemente durante la iteración.</span><span class="sxs-lookup"><span data-stu-id="5e141-143">Iterative approaches tend to hide these inaccuracies because the errors are accumulated evenly during iteration.</span></span>

<span data-ttu-id="5e141-144">El rasterizador de referencia de Direct3D usa un enfoque de evaluación directa para calcular los índices de textura en cada ubicación de píxel.</span><span class="sxs-lookup"><span data-stu-id="5e141-144">The Direct3D reference rasterizer uses a direct-evaluation approach for computing texture indexes at each pixel location.</span></span> <span data-ttu-id="5e141-145">La evaluación directa difiere del enfoque iterativo en que cualquier inexactitud en la operación exhibe una distribución de errores más aleatoria.</span><span class="sxs-lookup"><span data-stu-id="5e141-145">Direct evaluation differs from the iterative approach in that any inaccuracy in the operation exhibits a more random error distribution.</span></span> <span data-ttu-id="5e141-146">El resultado de esto es que los errores de muestreo que se producen en los límites pueden ser más evidentes, ya que el rasterizador de referencia no realiza esta operación con una precisión perfecta.</span><span class="sxs-lookup"><span data-stu-id="5e141-146">The result of this is that the sampling errors that occur at the boundaries can be more noticeable because the reference rasterizer does not perform this operation with perfect accuracy.</span></span>

<span data-ttu-id="5e141-147">El mejor enfoque es usar el filtrado de punto más cercano solo cuando sea necesario.</span><span class="sxs-lookup"><span data-stu-id="5e141-147">The best approach is to use nearest-point filtering only when necessary.</span></span> <span data-ttu-id="5e141-148">Cuando se debe utilizar, se recomienda desplazar ligeramente las coordenadas de textura de las posiciones de límite para evitar los artefactos.</span><span class="sxs-lookup"><span data-stu-id="5e141-148">When you must use it, it is recommended that you offset texture coordinates slightly from the boundary positions to avoid artifacts.</span></span>

## <a name="related-topics"></a><span data-ttu-id="5e141-149">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="5e141-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5e141-150">Filtrado de textura</span><span class="sxs-lookup"><span data-stu-id="5e141-150">Texture Filtering</span></span>](texture-filtering.md)
</dt> </dl>

 

 
