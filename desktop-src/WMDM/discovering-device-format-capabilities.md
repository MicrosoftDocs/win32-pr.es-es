---
title: Detección de capacidades de formato de dispositivo
description: Detección de capacidades de formato de dispositivo
ms.assetid: dd139816-dc8c-4e73-9a21-67287bfe6405
keywords:
- Windows Media Administrador de dispositivos, funcionalidades de dispositivo
- Administrador de dispositivos, funcionalidades del dispositivo
- Guía de programación, funcionalidades del dispositivo
- aplicaciones de escritorio, funcionalidades de dispositivo
- creación de aplicaciones de Windows Media Administrador de dispositivos, funcionalidades de dispositivo
- escribir archivos en dispositivos, funcionalidades del dispositivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c0ee05476f6b84bc85bb81cc7cff5815649f5842
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "105695275"
---
# <a name="discovering-device-format-capabilities"></a><span data-ttu-id="c9f91-109">Detección de capacidades de formato de dispositivo</span><span class="sxs-lookup"><span data-stu-id="c9f91-109">Discovering Device Format Capabilities</span></span>

<span data-ttu-id="c9f91-110">Es posible que la aplicación intente determinar las capacidades de reproducción de un dispositivo antes de enviarle un archivo.</span><span class="sxs-lookup"><span data-stu-id="c9f91-110">Your application might try to determine a device's playback capabilities before sending a file to it.</span></span> <span data-ttu-id="c9f91-111">Si un dispositivo no puede controlar el formato de un archivo que desea enviar, es posible que la aplicación intente transcodificar el archivo en un formato que pueda usar el dispositivo o notificar al usuario que el dispositivo no admite el archivo solicitado.</span><span class="sxs-lookup"><span data-stu-id="c9f91-111">If a device cannot handle the format of a file you want to send, your application might attempt to transcode the file into a format that the device can use, or notify the user that the device cannot support the requested file.</span></span>

<span data-ttu-id="c9f91-112">Tenga en cuenta que algunos dispositivos, como los dispositivos de clase de almacenamiento masivo, pueden servir únicamente como medios de almacenamiento extraíbles sin capacidad de reproducción.</span><span class="sxs-lookup"><span data-stu-id="c9f91-112">Note that some devices, such as mass storage class devices, might serve only as removable storage media without playback capabilities.</span></span> <span data-ttu-id="c9f91-113">En este caso, sería inadecuado para la aplicación transcodificar un archivo antes de enviarlo al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="c9f91-113">In this case, it would be inappropriate for your application to transcode a file before sending it to the device.</span></span>

<span data-ttu-id="c9f91-114">Aunque el método [**IWMDMDevice:: GetType**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-gettype) permite a un dispositivo informar de sus capacidades, algunos dispositivos devuelven valores incorrectos para este método.</span><span class="sxs-lookup"><span data-stu-id="c9f91-114">Although the [**IWMDMDevice::GetType**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-gettype) method enables a device to report its capabilities, some devices return incorrect values for this method.</span></span> <span data-ttu-id="c9f91-115">Antes de copiar un archivo en un dispositivo, es posible que desee preguntar al usuario si la reproducción está pensada y, en caso afirmativo, intentar transcodificar el archivo a uno de los formatos notificados del dispositivo (o un formato razonable, si el dispositivo es compatible con cualquier formato).</span><span class="sxs-lookup"><span data-stu-id="c9f91-115">Before copying a file to a device, you might want to ask the user whether playback is intended, and if so, attempt to transcode the file to one of the device's reported formats (or a reasonable format, if the device claims support for any format).</span></span> <span data-ttu-id="c9f91-116">Otro enfoque consiste en suponer que los formatos que se enumeran específicamente como admitidos por el dispositivo están diseñados para la reproducción y que todos los demás archivos se deben transferir sin modificar.</span><span class="sxs-lookup"><span data-stu-id="c9f91-116">Another approach is to assume that any formats specifically listed as supported by the device are intended for playback, and all other files should be transferred unmodified.</span></span>

<span data-ttu-id="c9f91-117">Después de detectar el formato del archivo que se va a transferir y los formatos admitidos por un dispositivo, puede decidir cuál es el mejor formato de destino para la transcodificación.</span><span class="sxs-lookup"><span data-stu-id="c9f91-117">After discovering the format of the file to be transferred, and the formats supported by a device, you can decide which is the best target format for transcoding.</span></span>

<span data-ttu-id="c9f91-118">En el pasado, era habitual que una aplicación devolvera cero para una propiedad para indicar la compatibilidad con los valores de esa propiedad.</span><span class="sxs-lookup"><span data-stu-id="c9f91-118">In the past, it was common for an application to return zero for a property to indicate support for any values of that property.</span></span> <span data-ttu-id="c9f91-119">Por ejemplo, un valor de cero para [**\_ WAVEFORMATEX**](-waveformatex.md). nSamplesPerSec indicaría compatibilidad con cualquier velocidad de bits.</span><span class="sxs-lookup"><span data-stu-id="c9f91-119">For example, a value of zero for [**\_WAVEFORMATEX**](-waveformatex.md).nSamplesPerSec would indicate support for any bit rate.</span></span> <span data-ttu-id="c9f91-120">Ahora, el método recomendado para indicar que la compatibilidad con cualquier valor es especificar \_ valores válidos de la enumeración de WMDM \_ \_ en la \_ \_ [**\_ \_ Descripción de propiedades de WMDM**](wmdm-prop-desc.md). ValidValuesForm.</span><span class="sxs-lookup"><span data-stu-id="c9f91-120">Now, the recommended way to indicate support for any value is to specify WMDM\_ENUM\_PROP\_VALID\_VALUES\_ANY in [**WMDM\_PROP\_DESC**](wmdm-prop-desc.md).ValidValuesForm.</span></span> <span data-ttu-id="c9f91-121">Sin embargo, algunas propiedades pueden devolver cero legítimamente para indicar una compatibilidad específica.</span><span class="sxs-lookup"><span data-stu-id="c9f91-121">Some properties, though, can legitimately return zero to indicate specific support.</span></span> <span data-ttu-id="c9f91-122">Por ejemplo, si [**\_ BITMAPINFOHEADER**](-bitmapinfoheader.md). biSizeImage se establece en cero, significa que se trata de un \_ mapa de bits RGB de BI.</span><span class="sxs-lookup"><span data-stu-id="c9f91-122">For example, if [**\_BITMAPINFOHEADER**](-bitmapinfoheader.md).biSizeImage is set to zero, this indicates a BI\_RGB bitmap.</span></span> <span data-ttu-id="c9f91-123">Las excepciones para los valores cero se indican en la documentación de las estructuras pertinentes.</span><span class="sxs-lookup"><span data-stu-id="c9f91-123">Exceptions for zero values are noted in the documentation for the relevant structures.</span></span>

<span data-ttu-id="c9f91-124">Sin embargo, es importante tener en cuenta que, a menudo, los dispositivos no informan correctamente de sus capacidades de formato o de forma estándar.</span><span class="sxs-lookup"><span data-stu-id="c9f91-124">However, it is important to note that devices often do not report their format capabilities properly, or in a standard way.</span></span> <span data-ttu-id="c9f91-125">Por ejemplo, los dispositivos suelen informar de que admiten cualquier formato, cuando en realidad solo pueden controlar formatos específicos o velocidades de bits específicas dentro de un tipo de formato.</span><span class="sxs-lookup"><span data-stu-id="c9f91-125">For example, devices often report that they support any format, when in fact they can only handle specific formats, or specific bit rates within a format type.</span></span> <span data-ttu-id="c9f91-126">Depende de usted decidir si su aplicación debe aceptar dichos informes o si debe asumir algún tipo de límite superior para las capacidades de reproducción de un dispositivo (por ejemplo, 192 kbps).</span><span class="sxs-lookup"><span data-stu-id="c9f91-126">It is up to you to decide whether your application should accept such reports, or whether it should assume some kind of upper limit to a device's playback abilities (for example, 192 kbps).</span></span>

<span data-ttu-id="c9f91-127">El método recomendado para solicitar la compatibilidad con el formato de un dispositivo es [**IWMDMDevice3:: GetFormatCapability**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice3-getformatcapability).</span><span class="sxs-lookup"><span data-stu-id="c9f91-127">The recommended method for requesting a device's format support is [**IWMDMDevice3::GetFormatCapability**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice3-getformatcapability).</span></span> <span data-ttu-id="c9f91-128">Si no se admite este método, la aplicación debería revertir a [**IWMDMDevice:: GetFormatSupport**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-getformatsupport).</span><span class="sxs-lookup"><span data-stu-id="c9f91-128">If this method is not supported, your application should fall back on [**IWMDMDevice::GetFormatSupport**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmdevice-getformatsupport).</span></span> <span data-ttu-id="c9f91-129">**GetFormatSupport**, a diferencia de **GetFormatSupport2**, no devuelve información de vídeo.</span><span class="sxs-lookup"><span data-stu-id="c9f91-129">**GetFormatSupport**, unlike **GetFormatSupport2**, does not return video information.</span></span>

<span data-ttu-id="c9f91-130">La forma en que una aplicación solicita las funciones de formato de un dispositivo depende de la interfaz que admita la aplicación.</span><span class="sxs-lookup"><span data-stu-id="c9f91-130">How an application requests a device's format capabilities depends on which interface the application supports.</span></span> <span data-ttu-id="c9f91-131">Para obtener más información, consulte los siguientes temas:</span><span class="sxs-lookup"><span data-stu-id="c9f91-131">For more details, see the following topics:</span></span>

-   [<span data-ttu-id="c9f91-132">Obtener capacidades de formato en los dispositivos que admiten IWMDMDevice3</span><span class="sxs-lookup"><span data-stu-id="c9f91-132">Getting Format Capabilities on Devices That Support IWMDMDevice3</span></span>](getting-format-capabilities-on-devices-that-support-iwmdmdevice3.md)
-   [<span data-ttu-id="c9f91-133">Obtener capacidades de formato en dispositivos que solo admiten IWMDMDevice</span><span class="sxs-lookup"><span data-stu-id="c9f91-133">Getting Format Capabilities on Devices That Support Only IWMDMDevice</span></span>](getting-format-capabilities-on-devices-that-support-only-iwmdmdevice.md)

## <a name="related-topics"></a><span data-ttu-id="c9f91-134">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="c9f91-134">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c9f91-135">**Escribir archivos en el dispositivo**</span><span class="sxs-lookup"><span data-stu-id="c9f91-135">**Writing Files to the Device**</span></span>](writing-files-to-the-device.md)
</dt> </dl>

 

 




