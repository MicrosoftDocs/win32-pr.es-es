---
description: Las instrucciones siguientes explican cómo crear sus propios ensamblados en paralelo COM o Win32.
ms.assetid: e10fe92c-bce8-420e-a84c-2748e929eb1b
title: Instrucciones para crear ensamblados en paralelo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: af8e8fd2bd31a65477b44d3afcf2156d5160a72a
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104154102"
---
# <a name="guidelines-for-creating-side-by-side-assemblies"></a><span data-ttu-id="9cda8-103">Instrucciones para crear ensamblados en paralelo</span><span class="sxs-lookup"><span data-stu-id="9cda8-103">Guidelines for Creating Side-by-side Assemblies</span></span>

<span data-ttu-id="9cda8-104">Las instrucciones siguientes explican cómo crear sus propios ensamblados en paralelo COM o Win32.</span><span class="sxs-lookup"><span data-stu-id="9cda8-104">The following guidelines discuss how to author your own COM or Win32 side-by-side assemblies.</span></span> <span data-ttu-id="9cda8-105">Es posible que no tenga que crear sus propios ensamblados en paralelo si la funcionalidad necesaria la proporciona uno de los [ensamblados en paralelo de Microsoft admitidos](supported-microsoft-side-by-side-assemblies.md).</span><span class="sxs-lookup"><span data-stu-id="9cda8-105">You may not need to create your own side-by-side assemblies if the functionality needed is provided by one of the [supported Microsoft side-by-side assemblies](supported-microsoft-side-by-side-assemblies.md).</span></span> <span data-ttu-id="9cda8-106">En este caso, use los ensamblados proporcionados por Microsoft y siga los procedimientos para usar ensamblados en paralelo en el [uso de aplicaciones aisladas y ensamblados en paralelo](using-isolated-applications-and-side-by-side-assemblies.md).</span><span class="sxs-lookup"><span data-stu-id="9cda8-106">In this case, use the assemblies provided by Microsoft and follow the procedures for using side-by-side assemblies in [Using Isolated Applications and Side-by-side Assemblies](using-isolated-applications-and-side-by-side-assemblies.md).</span></span>

<span data-ttu-id="9cda8-107">En primer lugar, considere si el componente hace que un candidato adecuado para un ensamblado en paralelo.</span><span class="sxs-lookup"><span data-stu-id="9cda8-107">First, consider whether your component makes a suitable candidate for a side-by-side assembly.</span></span> <span data-ttu-id="9cda8-108">Para obtener más información, vea [¿debe proporcionar un componente compartido como ensamblado simultáneo?](should-you-provide-a-shared-component-as-a-side-by-side-assembly.md)</span><span class="sxs-lookup"><span data-stu-id="9cda8-108">For more information, see [Should you provide a shared component as a side-by-side assembly?](should-you-provide-a-shared-component-as-a-side-by-side-assembly.md)</span></span>

<span data-ttu-id="9cda8-109">Para crear un ensamblado en paralelo, siga estas instrucciones:</span><span class="sxs-lookup"><span data-stu-id="9cda8-109">To create a side-by-side assembly, follow these guidelines:</span></span>

-   <span data-ttu-id="9cda8-110">Decida qué recursos incluir en el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9cda8-110">Decide which resources to include in the assembly.</span></span> <span data-ttu-id="9cda8-111">Tenga en cuenta que un ensamblado está compuesto de uno o varios archivos que siempre se proporcionan a las aplicaciones y a los clientes juntos.</span><span class="sxs-lookup"><span data-stu-id="9cda8-111">Keep in mind that an assembly consists of one or more files that are always provided to applications and customers together.</span></span> <span data-ttu-id="9cda8-112">El ensamblado actúa como la unidad fundamental utilizada para la nomenclatura, el enlace, el control de versiones, la implementación y la [configuración predeterminada](default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="9cda8-112">The assembly serves as the fundamental unit used for naming, binding, versioning, deployment, and [default configuration](default-configuration.md).</span></span> <span data-ttu-id="9cda8-113">Como norma general, si no está seguro de si dos recursos pertenecen al mismo ensamblado, se recomienda que se cree para entrar en ensamblados independientes.</span><span class="sxs-lookup"><span data-stu-id="9cda8-113">As a general rule, when uncertain about whether two resources belong in the same assembly, it is recommended that they be authored to go into separate assemblies.</span></span> <span data-ttu-id="9cda8-114">Normalmente, un ensamblado simultáneo consta de un solo archivo DLL.</span><span class="sxs-lookup"><span data-stu-id="9cda8-114">Typically, a side-by-side assembly consists of a single DLL.</span></span>
-   <span data-ttu-id="9cda8-115">Cree un [manifiesto](manifests.md) del ensamblado para el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9cda8-115">Create an assembly [manifest](manifests.md) for the assembly.</span></span> <span data-ttu-id="9cda8-116">El manifiesto debe describir el objeto COM o las bibliotecas de tipos en el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9cda8-116">The manifest should describe the COM object or type libraries in the assembly.</span></span> <span data-ttu-id="9cda8-117">Para obtener más información sobre lo que se debe crear en un manifiesto del ensamblado, vea [manifiestos de ensamblado](assembly-manifests.md).</span><span class="sxs-lookup"><span data-stu-id="9cda8-117">For more information about what should be authored into an assembly manifest, see [assembly manifests](assembly-manifests.md).</span></span>
-   <span data-ttu-id="9cda8-118">Evalúe el uso de objetos cuando se ejecute más de una versión del ensamblado en el sistema.</span><span class="sxs-lookup"><span data-stu-id="9cda8-118">Evaluate the usage of objects when more than one version of your assembly is run on the system.</span></span> <span data-ttu-id="9cda8-119">Determine si las distintas versiones del ensamblado requieren estructuras de datos independientes, como archivos asignados a memoria, canalizaciones con nombre, mensajes y clases de Windows registrados, memoria compartida, semáforos, exclusiones mutuas y controladores de hardware.</span><span class="sxs-lookup"><span data-stu-id="9cda8-119">Determine whether different versions of the assembly require separate data structures, such as memory-mapped files, named pipes, registered Windows messages and classes, shared memory, semaphores, mutexes, and hardware drivers.</span></span> <span data-ttu-id="9cda8-120">Todas las estructuras de datos utilizadas en las versiones de ensamblado deben ser versiones compatibles con versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="9cda8-120">Any data structures used across assembly versions must be backward-compatible versions.</span></span> <span data-ttu-id="9cda8-121">Decida qué estructuras de datos se pueden usar en las versiones y qué estructuras de datos deben ser privadas para una versión.</span><span class="sxs-lookup"><span data-stu-id="9cda8-121">Decide which data structures can be used across versions and which data structures must be private to a version.</span></span> <span data-ttu-id="9cda8-122">Determine si las estructuras de datos compartidas requieren objetos de sincronización independientes como semáforos y exclusiones mutuas.</span><span class="sxs-lookup"><span data-stu-id="9cda8-122">Determine whether shared data structures require separate synchronization objects such as semaphores and mutexes.</span></span>
-   <span data-ttu-id="9cda8-123">Cree el archivo DLL para que funcione bien como un ensamblado en paralelo; para ello, siga las instrucciones de [creación de un archivo DLL para un ensamblado en paralelo](authoring-a-dll-for-a-side-by-side-assembly.md).</span><span class="sxs-lookup"><span data-stu-id="9cda8-123">Author your DLL to work well as a side-by-side assembly by adhering to the guidelines in [Authoring a DLL for a Side-by-Side Assembly](authoring-a-dll-for-a-side-by-side-assembly.md).</span></span>
-   <span data-ttu-id="9cda8-124">Cree un conjunto de archivos de encabezado y funciones auxiliares para proporcionar una manera sencilla de crear una versión de las claves del registro que contenga el estado del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9cda8-124">Author a set of header files and helper functions to provide an easy way to version registry keys containing the assembly state.</span></span> <span data-ttu-id="9cda8-125">Los ensamblados normalmente guardan su configuración de estado en las claves del registro.</span><span class="sxs-lookup"><span data-stu-id="9cda8-125">Assemblies commonly save their state settings in registry keys.</span></span> <span data-ttu-id="9cda8-126">La configuración del registro se debe escribir en cada versión para aislar varias versiones de ensamblado que se pueden ejecutar al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="9cda8-126">Registry settings must be written on an individual version basis to isolate multiple assembly versions that may be run at the same time.</span></span> <span data-ttu-id="9cda8-127">Diseñe el ensamblado y el archivo DLL en paralelo para almacenar y controlar correctamente el estado del ensamblado durante los escenarios de uso compartido en paralelo.</span><span class="sxs-lookup"><span data-stu-id="9cda8-127">Design your side-by-side assembly and DLL to correctly store and handle the state of the assembly during side-by-side sharing scenarios.</span></span> <span data-ttu-id="9cda8-128">Siga las instrucciones de [creación de almacenamiento de estado para ensamblados en paralelo](authoring-state-storage-for-side-by-side-assemblies.md).</span><span class="sxs-lookup"><span data-stu-id="9cda8-128">Follow the guidelines in [Authoring State Storage for Side-by-Side Assemblies](authoring-state-storage-for-side-by-side-assemblies.md).</span></span>
-   <span data-ttu-id="9cda8-129">Los desarrolladores de aplicaciones que usan [ensamblados privados](/windows/desktop/Msi/private-assemblies) deben proteger el directorio de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9cda8-129">Developers of applications that use [private assemblies](/windows/desktop/Msi/private-assemblies) should secure the application directory.</span></span> <span data-ttu-id="9cda8-130">Si la aplicación se instala mediante el [Windows Installer](../msi/windows-installer-portal.md), el directorio de la aplicación se puede proteger mediante la tabla LockPermissions.</span><span class="sxs-lookup"><span data-stu-id="9cda8-130">If the application is installed using the [Windows Installer](../msi/windows-installer-portal.md), then the application directory can be secured by using the LockPermissions table.</span></span> <span data-ttu-id="9cda8-131">Normalmente, el sistema recibe acceso de lectura, escritura y ejecución a los ensamblados privados. a todos los demás procesos solo se les proporciona acceso de ejecución y de lectura.</span><span class="sxs-lookup"><span data-stu-id="9cda8-131">Typically, the system is given read, write, and execute access to private assemblies; all other processes are given only execute and read access.</span></span>
-   <span data-ttu-id="9cda8-132">Pruebe el ensamblado mediante escenarios con el uso compartido en paralelo para asegurarse de que es un ensamblado en paralelo válido.</span><span class="sxs-lookup"><span data-stu-id="9cda8-132">Test the assembly using scenarios with side-by-side sharing to ensure that it is a valid side-by-side assembly.</span></span> <span data-ttu-id="9cda8-133">La instalación correcta del ensamblado no es suficiente para garantizar que funcionará según lo previsto.</span><span class="sxs-lookup"><span data-stu-id="9cda8-133">Successful installation of the assembly is not sufficient to guarantee that it will work as expected.</span></span>
-   <span data-ttu-id="9cda8-134">Adopte un método para numerar las actualizaciones del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9cda8-134">Adopt a method for numbering updates for your assembly.</span></span> <span data-ttu-id="9cda8-135">Cada ensamblado está asociado a un número de versión de cuatro partes.</span><span class="sxs-lookup"><span data-stu-id="9cda8-135">Each assembly is associated with a four-part version number.</span></span> <span data-ttu-id="9cda8-136">De izquierda a derecha, los elementos principal, secundario, de compilación y de revisión se separan por puntos.</span><span class="sxs-lookup"><span data-stu-id="9cda8-136">Left-to-right, the major, minor, build, and revision parts are separated by periods.</span></span> <span data-ttu-id="9cda8-137">Cambiar el número principal o secundario de un ensamblado para una versión que no es compatible con versiones anteriores.</span><span class="sxs-lookup"><span data-stu-id="9cda8-137">Change the major or minor number of an assembly for a version that is incompatible with earlier versions.</span></span> <span data-ttu-id="9cda8-138">Cambie solo los elementos de compilación y revisión para los cambios compatibles con versiones anteriores en el ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9cda8-138">Change only the build and revision parts for backward-compatible changes to the assembly.</span></span> <span data-ttu-id="9cda8-139">Por ejemplo, un desarrollador puede adoptar un método de numeración en el que todos los 1.0.0. \* los números de versión hacen referencia a las versiones de actualización de la versión 1.0.0.0 del ensamblado.</span><span class="sxs-lookup"><span data-stu-id="9cda8-139">For example, a developer might adopt a numbering method in which all 1.0.0.\* version numbers refer to update versions to assembly version 1.0.0.0.</span></span>

 

 
