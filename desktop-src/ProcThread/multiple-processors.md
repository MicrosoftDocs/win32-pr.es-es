---
description: 'Los equipos con varios procesadores suelen estar diseñados para una de estas dos arquitecturas: acceso a memoria no uniforme (NUMA) o multiproceso simétrico (SMP).'
ms.assetid: 3c9186c8-a54d-4536-8237-bfff78cc7d11
title: Varios procesadores
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0093404a0df653a153823915f1ac72b5e41d50c0
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105677857"
---
# <a name="multiple-processors"></a><span data-ttu-id="9246f-103">Varios procesadores</span><span class="sxs-lookup"><span data-stu-id="9246f-103">Multiple Processors</span></span>

<span data-ttu-id="9246f-104">Los equipos con varios procesadores suelen estar diseñados para una de estas dos arquitecturas: acceso a memoria no uniforme (NUMA) o multiproceso simétrico (SMP).</span><span class="sxs-lookup"><span data-stu-id="9246f-104">Computers with multiple processors are typically designed for one of two architectures: non-uniform memory access (NUMA) or symmetric multiprocessing (SMP).</span></span>

<span data-ttu-id="9246f-105">En un equipo NUMA, cada procesador está más cerca de algunas partes de la memoria que otros, lo que facilita el acceso a la memoria para algunas partes de la memoria que otras partes.</span><span class="sxs-lookup"><span data-stu-id="9246f-105">In a NUMA computer, each processor is closer to some parts of memory than others, making memory access faster for some parts of memory than other parts.</span></span> <span data-ttu-id="9246f-106">En el modelo NUMA, el sistema intenta programar subprocesos en procesadores que están cerca de la memoria que se está usando.</span><span class="sxs-lookup"><span data-stu-id="9246f-106">Under the NUMA model, the system attempts to schedule threads on processors that are close to the memory being used.</span></span> <span data-ttu-id="9246f-107">Para obtener más información sobre NUMA, consulte [compatibilidad con Numa](numa-support.md).</span><span class="sxs-lookup"><span data-stu-id="9246f-107">For more information about NUMA, see [NUMA Support](numa-support.md).</span></span>

<span data-ttu-id="9246f-108">En un equipo SMP, dos o más procesadores o núcleos idénticos se conectan a una sola memoria principal compartida.</span><span class="sxs-lookup"><span data-stu-id="9246f-108">In an SMP computer, two or more identical processors or cores connect to a single shared main memory.</span></span> <span data-ttu-id="9246f-109">En el modelo SMP, cualquier subproceso se puede asignar a cualquier procesador.</span><span class="sxs-lookup"><span data-stu-id="9246f-109">Under the SMP model, any thread can be assigned to any processor.</span></span> <span data-ttu-id="9246f-110">Por lo tanto, la programación de subprocesos en un equipo SMP es similar a la programación de subprocesos en un equipo con un solo procesador.</span><span class="sxs-lookup"><span data-stu-id="9246f-110">Therefore, scheduling threads on an SMP computer is similar to scheduling threads on a computer with a single processor.</span></span> <span data-ttu-id="9246f-111">Sin embargo, Scheduler tiene un grupo de procesadores, por lo que puede programar subprocesos para que se ejecuten simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="9246f-111">However, the scheduler has a pool of processors, so that it can schedule threads to run concurrently.</span></span> <span data-ttu-id="9246f-112">La programación sigue siendo determinada por la prioridad de los subprocesos, pero se puede influir en la configuración de la afinidad de subprocesos y el procesador ideal de subprocesos, como se describe en este tema.</span><span class="sxs-lookup"><span data-stu-id="9246f-112">Scheduling is still determined by thread priority, but it can be influenced by setting thread affinity and thread ideal processor, as discussed in this topic.</span></span>

## <a name="thread-affinity"></a><span data-ttu-id="9246f-113">Afinidad de subprocesos</span><span class="sxs-lookup"><span data-stu-id="9246f-113">Thread Affinity</span></span>

<span data-ttu-id="9246f-114">La *afinidad de subprocesos* obliga a que un subproceso se ejecute en un subconjunto específico de procesadores.</span><span class="sxs-lookup"><span data-stu-id="9246f-114">*Thread affinity* forces a thread to run on a specific subset of processors.</span></span> <span data-ttu-id="9246f-115">Por lo general, se debe evitar establecer la afinidad de subprocesos, ya que puede interferir con la capacidad del programador de programar subprocesos de forma eficaz entre los procesadores.</span><span class="sxs-lookup"><span data-stu-id="9246f-115">Setting thread affinity should generally be avoided, because it can interfere with the scheduler's ability to schedule threads effectively across processors.</span></span> <span data-ttu-id="9246f-116">Esto puede reducir las mejoras de rendimiento generadas por el procesamiento en paralelo.</span><span class="sxs-lookup"><span data-stu-id="9246f-116">This can decrease the performance gains produced by parallel processing.</span></span> <span data-ttu-id="9246f-117">Un uso adecuado de la afinidad de subprocesos es probar cada procesador.</span><span class="sxs-lookup"><span data-stu-id="9246f-117">An appropriate use of thread affinity is testing each processor.</span></span>

<span data-ttu-id="9246f-118">El sistema representa la afinidad con una máscara de subred denominada máscara de afinidad de procesador.</span><span class="sxs-lookup"><span data-stu-id="9246f-118">The system represents affinity with a bitmask called a processor affinity mask.</span></span> <span data-ttu-id="9246f-119">Affinity mask es el tamaño del número máximo de procesadores del sistema, con bits establecido para identificar un subconjunto de procesadores.</span><span class="sxs-lookup"><span data-stu-id="9246f-119">The affinity mask is the size of the maximum number of processors in the system, with bits set to identify a subset of processors.</span></span> <span data-ttu-id="9246f-120">Inicialmente, el sistema determina el subconjunto de procesadores de la máscara.</span><span class="sxs-lookup"><span data-stu-id="9246f-120">Initially, the system determines the subset of processors in the mask.</span></span>

<span data-ttu-id="9246f-121">Puede obtener la afinidad del subproceso actual para todos los subprocesos del proceso mediante una llamada a la función [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) .</span><span class="sxs-lookup"><span data-stu-id="9246f-121">You can obtain the current thread affinity for all threads of the process by calling the [**GetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-getprocessaffinitymask) function.</span></span> <span data-ttu-id="9246f-122">Utilice la función [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) para especificar la afinidad de subprocesos para todos los subprocesos del proceso.</span><span class="sxs-lookup"><span data-stu-id="9246f-122">Use the [**SetProcessAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setprocessaffinitymask) function to specify thread affinity for all threads of the process.</span></span> <span data-ttu-id="9246f-123">Para establecer la afinidad de subprocesos para un único subproceso, utilice la función [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) .</span><span class="sxs-lookup"><span data-stu-id="9246f-123">To set the thread affinity for a single thread, use the [**SetThreadAffinityMask**](/windows/desktop/api/WinBase/nf-winbase-setthreadaffinitymask) function.</span></span> <span data-ttu-id="9246f-124">La afinidad de subprocesos debe ser un subconjunto de la afinidad de proceso.</span><span class="sxs-lookup"><span data-stu-id="9246f-124">The thread affinity must be a subset of the process affinity.</span></span>

<span data-ttu-id="9246f-125">En sistemas con más de 64 procesadores, la máscara de afinidad representa inicialmente los procesadores de un solo grupo de procesadores.</span><span class="sxs-lookup"><span data-stu-id="9246f-125">On systems with more than 64 processors, the affinity mask initially represents processors in a single processor group.</span></span> <span data-ttu-id="9246f-126">Sin embargo, la afinidad de subprocesos se puede establecer en un procesador de un grupo diferente, lo que altera la máscara de afinidad para el proceso.</span><span class="sxs-lookup"><span data-stu-id="9246f-126">However, thread affinity can be set to a processor in a different group, which alters the affinity mask for the process.</span></span> <span data-ttu-id="9246f-127">Para obtener más información, consulte [grupos de procesadores](processor-groups.md).</span><span class="sxs-lookup"><span data-stu-id="9246f-127">For more information, see [Processor Groups](processor-groups.md).</span></span>

## <a name="thread-ideal-processor"></a><span data-ttu-id="9246f-128">Procesador ideal para subprocesos</span><span class="sxs-lookup"><span data-stu-id="9246f-128">Thread Ideal Processor</span></span>

<span data-ttu-id="9246f-129">Cuando se especifica un *procesador ideal para un subproceso*, el programador ejecuta el subproceso en el procesador especificado siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="9246f-129">When you specify a *thread ideal processor*, the scheduler runs the thread on the specified processor when possible.</span></span> <span data-ttu-id="9246f-130">Utilice la función [**SetThreadIdealProcessor**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessor) para especificar un procesador preferido para un subproceso.</span><span class="sxs-lookup"><span data-stu-id="9246f-130">Use the [**SetThreadIdealProcessor**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessor) function to specify a preferred processor for a thread.</span></span> <span data-ttu-id="9246f-131">Esto no garantiza que se elija el procesador ideal, sino que proporciona una sugerencia útil al programador.</span><span class="sxs-lookup"><span data-stu-id="9246f-131">This does not guarantee that the ideal processor will be chosen but provides a useful hint to the scheduler.</span></span> <span data-ttu-id="9246f-132">En sistemas con más de 64 procesadores, puede usar la función [**SetThreadIdealProcessorEx**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessorex) para especificar un procesador preferido en un grupo de procesadores específico.</span><span class="sxs-lookup"><span data-stu-id="9246f-132">On systems with more than 64 processors, you can use the [**SetThreadIdealProcessorEx**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-setthreadidealprocessorex) function to specify a preferred processor in a specific processor group.</span></span>

## <a name="related-topics"></a><span data-ttu-id="9246f-133">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="9246f-133">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9246f-134">Compatibilidad con NUMA</span><span class="sxs-lookup"><span data-stu-id="9246f-134">NUMA Support</span></span>](numa-support.md)
</dt> <dt>

[<span data-ttu-id="9246f-135">Grupos de procesadores</span><span class="sxs-lookup"><span data-stu-id="9246f-135">Processor Groups</span></span>](processor-groups.md)
</dt> </dl>

 

 
