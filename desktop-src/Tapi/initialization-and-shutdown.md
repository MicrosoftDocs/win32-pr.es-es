---
description: Para que una aplicación use cualquiera de las funciones de teléfono complementarias de TAPI 30, necesita una conexión a TAPI, a través de la cual puede recibir mensajes.
ms.assetid: c0211f64-4f73-4348-ae49-9a898d3aa093
title: Inicialización y apagado
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 6831b8cfda84ac564450caec554191198fd4c21f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105677507"
---
# <a name="initialization-and-shutdown"></a><span data-ttu-id="a3c03-103">Inicialización y apagado</span><span class="sxs-lookup"><span data-stu-id="a3c03-103">Initialization and Shutdown</span></span>

<span data-ttu-id="a3c03-104">Para que una aplicación use cualquiera de las 30 funciones de teléfono complementarias de TAPI, necesita una conexión a TAPI, a través de la cual puede recibir mensajes.</span><span class="sxs-lookup"><span data-stu-id="a3c03-104">For an application to use any of TAPI's 30 supplementary phone functions, it needs a connection to TAPI, through which it can receive messages.</span></span> <span data-ttu-id="a3c03-105">La aplicación establece esta conexión mediante la función [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) .</span><span class="sxs-lookup"><span data-stu-id="a3c03-105">The application establishes this connection using the [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) function.</span></span> <span data-ttu-id="a3c03-106">En esta función, la aplicación especifica el mecanismo de notificación mediante el cual TAPI informa a la aplicación de los cambios en el estado del teléfono y de la finalización asincrónica de las funciones de teléfono.</span><span class="sxs-lookup"><span data-stu-id="a3c03-106">In this function, the application specifies the notification mechanism by which TAPI informs the application of changes in the state of the phone and of asynchronous completion of phone functions.</span></span>

<span data-ttu-id="a3c03-107">La función [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) devuelve dos fragmentos de información a la aplicación: un *identificador* de la aplicación y el número de dispositivos telefónicos.</span><span class="sxs-lookup"><span data-stu-id="a3c03-107">The [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) function returns two pieces of information to the application: an *application handle*, and the number of phone devices.</span></span> <span data-ttu-id="a3c03-108">El identificador de la aplicación representa el uso de TAPI de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3c03-108">The application handle represents the application's usage of TAPI.</span></span> <span data-ttu-id="a3c03-109">Las funciones TAPI que usan identificadores de teléfono no requieren el identificador de la aplicación, ya que este identificador se deriva del identificador de teléfono especificado.</span><span class="sxs-lookup"><span data-stu-id="a3c03-109">The TAPI functions that use phone handles do not require the application handle, as this handle is derived from the specified phone handle.</span></span>

<span data-ttu-id="a3c03-110">La segunda parte de la información devuelta por [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) es el número de dispositivos telefónicos disponibles para TAPI.</span><span class="sxs-lookup"><span data-stu-id="a3c03-110">The second piece of information returned by [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) is the number of phone devices available to TAPI.</span></span> <span data-ttu-id="a3c03-111">Los dispositivos telefónicos se identifican por su identificador de dispositivo (ID. de *dispositivo*).</span><span class="sxs-lookup"><span data-stu-id="a3c03-111">Phone devices are identified by their device identifier (*device ID*).</span></span> <span data-ttu-id="a3c03-112">Los identificadores de dispositivo válidos van desde cero hasta el número de dispositivos de teléfono menos uno.</span><span class="sxs-lookup"><span data-stu-id="a3c03-112">Valid device identifiers range from zero to the number of phone devices minus one.</span></span> <span data-ttu-id="a3c03-113">Por ejemplo, si **phoneInitializeEx** informa de que hay dos dispositivos telefónicos en un sistema, los identificadores de dispositivos telefónicos válidos son 0 y 1.</span><span class="sxs-lookup"><span data-stu-id="a3c03-113">For example, if **phoneInitializeEx** reports that there are two phone devices in a system, then valid phone device identifiers are 0 and 1.</span></span> <span data-ttu-id="a3c03-114">Una vez que una aplicación ha terminado de usar las funciones de teléfono de TAPI, invoca a [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown), pasando su identificador de aplicación para cerrar el uso de TAPI.</span><span class="sxs-lookup"><span data-stu-id="a3c03-114">After an application is finished using the phone functions of TAPI, it invokes [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown), passing its application handle to shut down its usage of TAPI.</span></span> <span data-ttu-id="a3c03-115">Esto permite a TAPI liberar los recursos asignados a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a3c03-115">This allows TAPI to free any resources assigned to the application.</span></span>

<span data-ttu-id="a3c03-116">Las aplicaciones no deben invocar [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) sin abrir posteriormente un teléfono (al menos para la supervisión).</span><span class="sxs-lookup"><span data-stu-id="a3c03-116">Applications should not invoke [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) without subsequently opening a phone (at least for monitoring).</span></span> <span data-ttu-id="a3c03-117">Si la aplicación no supervisa y no usa ningún dispositivo, debe llamar a [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) para que los recursos de memoria asignados por la biblioteca de vínculos dinámicos de TAPI se puedan liberar si no se necesitan y la propia biblioteca se puede descargar de la memoria mientras no se necesite.</span><span class="sxs-lookup"><span data-stu-id="a3c03-117">If the application is not monitoring and not using any devices, it should call [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) so that memory resources allocated by the TAPI dynamic-link library can be released if unneeded, and the library itself can be unloaded from memory while not needed.</span></span>

<span data-ttu-id="a3c03-118">Tanto [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) como [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) funcionan sincrónicamente.</span><span class="sxs-lookup"><span data-stu-id="a3c03-118">Both [**phoneInitializeEx**](/windows/desktop/api/Tapi/nf-tapi-phoneinitializeexa) and [**phoneShutdown**](/windows/desktop/api/Tapi/nf-tapi-phoneshutdown) operate synchronously.</span></span> <span data-ttu-id="a3c03-119">Es decir, estas funciones devuelven una indicación de éxito o error y nunca devuelven un identificador de solicitud asincrónica.</span><span class="sxs-lookup"><span data-stu-id="a3c03-119">That is, these functions either return a success or failure indication, and never return an asynchronous request identifier.</span></span>

 

 



