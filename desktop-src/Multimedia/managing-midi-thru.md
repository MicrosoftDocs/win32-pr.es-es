---
title: Administración de MIDI a través de
description: Administración de MIDI a través de
ms.assetid: ba03a2a1-d998-498d-ad53-027ba2b6e276
keywords:
- Interfaz digital de instrumentos musicales (MIDI), a través del controlador
- MIDI (interfaz digital de instrumentos musicales), a través del controlador
- grabación de audio MIDI, a través de un controlador
- Controlador de MIDI a
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 24214dd3f6cd13ca034b2555398f6055e4ce2da1
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/19/2020
ms.locfileid: "103995147"
---
# <a name="managing-midi-thru"></a><span data-ttu-id="5c2e0-107">Administración de MIDI a través de</span><span class="sxs-lookup"><span data-stu-id="5c2e0-107">Managing MIDI Thru</span></span>

<span data-ttu-id="5c2e0-108">Puede conectar un dispositivo de entrada MIDI directamente a un dispositivo de salida MIDI para que cuando el dispositivo de entrada reciba un mensaje de [**\_ datos de MIM**](mim-data.md) , el sistema envíe un mensaje con los mismos datos de eventos MIDI al controlador de dispositivo de salida.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-108">You can connect a MIDI input device directly to a MIDI output device so that when the input device receives an [**MIM\_DATA**](mim-data.md) message, the system sends a message with the same MIDI event data to the output device driver.</span></span> <span data-ttu-id="5c2e0-109">Para conectar un dispositivo de salida MIDI a un dispositivo de entrada MIDI, utilice la función [**midiConnect**](/windows/win32/api/mmeapi/nf-mmeapi-midiconnect) .</span><span class="sxs-lookup"><span data-stu-id="5c2e0-109">To connect a MIDI output device to a MIDI input device, use the [**midiConnect**](/windows/win32/api/mmeapi/nf-mmeapi-midiconnect) function.</span></span>

<span data-ttu-id="5c2e0-110">Para lograr el mejor rendimiento posible con varias salidas, una aplicación puede elegir proporcionar una forma especial de controlador de salida MIDI, denominada *controlador a través* de.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-110">To achieve the best possible performance with multiple outputs, an application can choose to supply a special form of MIDI output driver, called a *thru driver*.</span></span> <span data-ttu-id="5c2e0-111">Aunque el sistema solo permite que un dispositivo de salida MIDI se conecte a un dispositivo de entrada MIDI, se pueden conectar varios dispositivos de salida MIDI a un controlador a través de.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-111">Although the system allows only one MIDI output device to be connected to a MIDI input device, multiple MIDI output devices can be connected to a thru driver.</span></span> <span data-ttu-id="5c2e0-112">Una aplicación de este tipo de sistema podría conectar el dispositivo de entrada MIDI a este dispositivo a través del dispositivo y conectar el dispositivo MIDI a tantos dispositivos de salida MIDI como sea necesario.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-112">An application on such a system could connect the MIDI input device to this thru device and connect the MIDI thru device to as many MIDI output devices as needed.</span></span> <span data-ttu-id="5c2e0-113">Para obtener más información acerca de los controladores, consulte la documentación del controlador de dispositivos Windows.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-113">For more information about thru drivers, see the Windows device-driver documentation.</span></span>

## <a name="using-messages-to-manage-midi-recording"></a><span data-ttu-id="5c2e0-114">Uso de mensajes para administrar grabaciones MIDI</span><span class="sxs-lookup"><span data-stu-id="5c2e0-114">Using Messages to Manage MIDI Recording</span></span>

<span data-ttu-id="5c2e0-115">Los siguientes mensajes se pueden enviar a un procedimiento de devolución de llamada de ventana o de subproceso para administrar la grabación de MIDI.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-115">The following messages can be sent to a window or thread callback procedure for managing MIDI recording.</span></span>



| <span data-ttu-id="5c2e0-116">Value</span><span class="sxs-lookup"><span data-stu-id="5c2e0-116">Value</span></span>                                          | <span data-ttu-id="5c2e0-117">Significado</span><span class="sxs-lookup"><span data-stu-id="5c2e0-117">Meaning</span></span>                                                                                                                                |
|------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5c2e0-118">**MM \_ cierre de MIM \_**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-118">**MM\_MIM\_CLOSE**</span></span>](mm-mim-close.md)         | <span data-ttu-id="5c2e0-119">Se envía cuando se cierra un dispositivo de entrada MIDI mediante la función [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) .</span><span class="sxs-lookup"><span data-stu-id="5c2e0-119">Sent when a MIDI input device is closed by using the [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) function.</span></span>                                      |
| [<span data-ttu-id="5c2e0-120">**\_datos de MIM mm \_**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-120">**MM\_MIM\_DATA**</span></span>](mm-mim-data.md)           | <span data-ttu-id="5c2e0-121">Se envía cuando se recibe un mensaje MIDI completo.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-121">Sent when a complete MIDI message is received.</span></span> <span data-ttu-id="5c2e0-122">(Este mensaje se utiliza para todos los mensajes MIDI excepto los mensajes exclusivos del sistema).</span><span class="sxs-lookup"><span data-stu-id="5c2e0-122">(This message is used for all MIDI messages except system-exclusive messages.)</span></span>          |
| [<span data-ttu-id="5c2e0-123">**\_error de MIM de mm \_**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-123">**MM\_MIM\_ERROR**</span></span>](mm-mim-error.md)         | <span data-ttu-id="5c2e0-124">Se envía cuando se recibe un mensaje MIDI no válido.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-124">Sent when an invalid MIDI message is received.</span></span> <span data-ttu-id="5c2e0-125">(Este mensaje se utiliza para todos los mensajes MIDI excepto los mensajes exclusivos del sistema).</span><span class="sxs-lookup"><span data-stu-id="5c2e0-125">(This message is used for all MIDI messages except system-exclusive messages.)</span></span>          |
| [<span data-ttu-id="5c2e0-126">**MM \_ MIM \_ LONGDATA**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-126">**MM\_MIM\_LONGDATA**</span></span>](mm-mim-longdata.md)   | <span data-ttu-id="5c2e0-127">Se envía cuando se recibe un mensaje exclusivo del sistema de MIDI completo o cuando un búfer se ha rellenado con datos exclusivos del sistema.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-127">Sent when either a complete MIDI system-exclusive message is received or when a buffer has been filled with system-exclusive data.</span></span>     |
| [<span data-ttu-id="5c2e0-128">**MM \_ MIM \_ LONGERROR**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-128">**MM\_MIM\_LONGERROR**</span></span>](mm-mim-longerror.md) | <span data-ttu-id="5c2e0-129">Se envía cuando se recibe un mensaje no exclusivo del sistema MIDI no válido.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-129">Sent when an invalid MIDI system-exclusive message is received.</span></span>                                                                        |
| [<span data-ttu-id="5c2e0-130">**MM \_ MIM \_ MOREDATA**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-130">**MM\_MIM\_MOREDATA**</span></span>](mm-mim-moredata.md)   | <span data-ttu-id="5c2e0-131">Se envía cuando una aplicación no procesa los mensajes de [**\_ datos de MIM**](mim-data.md) lo suficientemente rápido para mantenerse al día con el controlador de dispositivo de entrada.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-131">Sent when an application is not processing [**MIM\_DATA**](mim-data.md) messages fast enough to keep up with the input device driver.</span></span> |
| [<span data-ttu-id="5c2e0-132">**MM \_ MIM \_ abierto**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-132">**MM\_MIM\_OPEN**</span></span>](mm-mim-open.md)           | <span data-ttu-id="5c2e0-133">Se envía cuando se abre un dispositivo de entrada MIDI mediante la función [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) .</span><span class="sxs-lookup"><span data-stu-id="5c2e0-133">Sent when a MIDI input device is opened by using the [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) function.</span></span>                                        |



 

<span data-ttu-id="5c2e0-134">Un parámetro *wParam* y un parámetro *lParam* están asociados a cada uno de estos mensajes.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-134">A *wParam* parameter and an *lParam* parameter are associated with each of these messages.</span></span> <span data-ttu-id="5c2e0-135">El parámetro *wParam* siempre especifica el identificador de un dispositivo MIDI abierto.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-135">The *wParam* parameter always specifies the handle of an open MIDI device.</span></span> <span data-ttu-id="5c2e0-136">El parámetro *lParam* no se utiliza para los mensajes [**\_ \_ abiertos**](mm-mim-open.md) de MIM y mm de MIM de [**mm \_ \_**](mm-mim-close.md) .</span><span class="sxs-lookup"><span data-stu-id="5c2e0-136">The *lParam* parameter is unused for the [**MM\_MIM\_CLOSE**](mm-mim-close.md) and [**MM\_MIM\_OPEN**](mm-mim-open.md) messages.</span></span>

<span data-ttu-id="5c2e0-137">En el caso del mensaje de [**\_ \_ LONGDATA**](mm-mim-longdata.md) de las mm de MIM, *lpMidiHdr* especifica una dirección de una estructura [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) que identifica el búfer para los mensajes exclusivos del sistema.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-137">For the [**MM\_MIM\_LONGDATA**](mm-mim-longdata.md) message, *lpMidiHdr* specifies an address of a [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) structure that identifies the buffer for system-exclusive messages.</span></span> <span data-ttu-id="5c2e0-138">El búfer no se puede rellenar por completo, porque el tamaño de los mensajes exclusivos del sistema no suele conocerse antes de registrarse y porque se deben asignar los búferes cuyo tamaño total pueda contener el mensaje más grande esperado.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-138">The buffer may not be completely filled, because the size of the system-exclusive messages is usually not known before being recorded and because buffers whose total size can contain the largest expected message must be allocated.</span></span> <span data-ttu-id="5c2e0-139">Para determinar la cantidad de datos válidos presentes en el búfer, use el miembro **dwBytesRecorded** de la estructura **MIDIHDR** .</span><span class="sxs-lookup"><span data-stu-id="5c2e0-139">To determine the amount of valid data present in the buffer, use the **dwBytesRecorded** member of the **MIDIHDR** structure.</span></span>

## <a name="using-a-callback-function-to-manage-midi-recording"></a><span data-ttu-id="5c2e0-140">Usar una función de devolución de llamada para administrar la grabación MIDI</span><span class="sxs-lookup"><span data-stu-id="5c2e0-140">Using a Callback Function to Manage MIDI Recording</span></span>

<span data-ttu-id="5c2e0-141">Puede definir su propia función de devolución de llamada para administrar la grabación de dispositivos de entrada MIDI.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-141">You can define your own callback function to manage recording for MIDI input devices.</span></span> <span data-ttu-id="5c2e0-142">La función de devolución de llamada se documenta como [**MidiInProc**](/previous-versions//dd798460(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="5c2e0-142">The callback function is documented as [**MidiInProc**](/previous-versions//dd798460(v=vs.85)).</span></span>

<span data-ttu-id="5c2e0-143">Los siguientes mensajes se pueden enviar al parámetro *wMsg* de la función de devolución de llamada **MidiInProc** .</span><span class="sxs-lookup"><span data-stu-id="5c2e0-143">The following messages can be sent to the *wMsg* parameter of the **MidiInProc** callback function.</span></span>



| <span data-ttu-id="5c2e0-144">Value</span><span class="sxs-lookup"><span data-stu-id="5c2e0-144">Value</span></span>                                   | <span data-ttu-id="5c2e0-145">Significado</span><span class="sxs-lookup"><span data-stu-id="5c2e0-145">Meaning</span></span>                                                                                                                                |
|-----------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="5c2e0-146">**cierre de MIM \_**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-146">**MIM\_CLOSE**</span></span>](mim-close.md)         | <span data-ttu-id="5c2e0-147">Se envía cuando el dispositivo se cierra con la función [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) .</span><span class="sxs-lookup"><span data-stu-id="5c2e0-147">Sent when the device is closed by using the [**midiInClose**](/windows/win32/api/mmeapi/nf-mmeapi-midiinclose) function.</span></span>                                               |
| [<span data-ttu-id="5c2e0-148">**datos de MIM \_**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-148">**MIM\_DATA**</span></span>](mim-data.md)           | <span data-ttu-id="5c2e0-149">Se envía cuando se recibe un mensaje MIDI completo (este mensaje se utiliza para todos los mensajes MIDI excepto los mensajes exclusivos del sistema).</span><span class="sxs-lookup"><span data-stu-id="5c2e0-149">Sent when a complete MIDI message is received (this message is used for all MIDI messages except system-exclusive messages).</span></span>           |
| [<span data-ttu-id="5c2e0-150">**ERROR de MIM \_**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-150">**MIM\_ERROR**</span></span>](mim-error.md)         | <span data-ttu-id="5c2e0-151">Se envía cuando se recibe un mensaje MIDI no válido (este mensaje se utiliza para todos los mensajes MIDI excepto los mensajes exclusivos del sistema).</span><span class="sxs-lookup"><span data-stu-id="5c2e0-151">Sent when an invalid MIDI message is received (this message is used for all MIDI messages except system-exclusive messages).</span></span>           |
| [<span data-ttu-id="5c2e0-152">**LONGDATA de MIM \_**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-152">**MIM\_LONGDATA**</span></span>](mim-longdata.md)   | <span data-ttu-id="5c2e0-153">Se envía cuando se recibe un mensaje exclusivo del sistema de MIDI completo o cuando un búfer se ha rellenado con datos exclusivos del sistema.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-153">Sent when either a complete MIDI system-exclusive message is received or when a buffer has been filled with system-exclusive data.</span></span>     |
| [<span data-ttu-id="5c2e0-154">**LONGERROR de MIM \_**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-154">**MIM\_LONGERROR**</span></span>](mim-longerror.md) | <span data-ttu-id="5c2e0-155">Se envía cuando se recibe un mensaje no exclusivo del sistema MIDI no válido.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-155">Sent when an invalid MIDI system-exclusive message is received.</span></span>                                                                        |
| [<span data-ttu-id="5c2e0-156">**MOREDATA de MIM \_**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-156">**MIM\_MOREDATA**</span></span>](mim-moredata.md)   | <span data-ttu-id="5c2e0-157">Se envía cuando una aplicación no procesa los mensajes de [**\_ datos de MIM**](mim-data.md) lo suficientemente rápido para mantenerse al día con el controlador de dispositivo de entrada.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-157">Sent when an application is not processing [**MIM\_DATA**](mim-data.md) messages fast enough to keep up with the input device driver.</span></span> |
| [<span data-ttu-id="5c2e0-158">**MIM \_ abierto**</span><span class="sxs-lookup"><span data-stu-id="5c2e0-158">**MIM\_OPEN**</span></span>](mim-open.md)           | <span data-ttu-id="5c2e0-159">Se envía cuando el dispositivo de entrada MIDI se abre mediante la función [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) .</span><span class="sxs-lookup"><span data-stu-id="5c2e0-159">Sent when the MIDI input device is opened by using the [**midiInOpen**](/windows/win32/api/mmeapi/nf-mmeapi-midiinopen) function.</span></span>                                      |



 

<span data-ttu-id="5c2e0-160">Estos mensajes son similares a los enviados a las funciones de procedimiento de ventana, pero los parámetros son diferentes.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-160">These messages are similar to those sent to window procedure functions, but the parameters are different.</span></span> <span data-ttu-id="5c2e0-161">Un identificador del dispositivo MIDI abierto se pasa como un parámetro a la función de devolución de llamada, junto con la palabra de datos de instancia que se pasó mediante **midiInOpen**.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-161">A handle of the open MIDI device is passed as a parameter to the callback function, along with the doubleword of instance data that was passed by using **midiInOpen**.</span></span>

<span data-ttu-id="5c2e0-162">Para el mensaje de [**\_ LONGDATA de MIM**](mim-longdata.md) , *lpMidiHdr* especifica una dirección de una estructura [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) que identifica el búfer para los mensajes exclusivos del sistema.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-162">For the [**MIM\_LONGDATA**](mim-longdata.md) message, *lpMidiHdr* specifies an address of a [**MIDIHDR**](/windows/win32/api/mmeapi/ns-mmeapi-midihdr) structure that identifies the buffer for system-exclusive messages.</span></span> <span data-ttu-id="5c2e0-163">Es posible que el búfer no se llene completamente.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-163">The buffer might not be completely filled.</span></span> <span data-ttu-id="5c2e0-164">Para determinar la cantidad de datos válidos presentes en el búfer, use el miembro **dwBytesRecorded** de la estructura **MIDIHDR** .</span><span class="sxs-lookup"><span data-stu-id="5c2e0-164">To determine the amount of valid data present in the buffer, use the **dwBytesRecorded** member of the **MIDIHDR** structure.</span></span>

<span data-ttu-id="5c2e0-165">Una vez que el controlador de dispositivo finaliza con un bloque de datos, puede limpiar y liberar el bloque de datos.</span><span class="sxs-lookup"><span data-stu-id="5c2e0-165">After the device driver is finished with a data block, you can clean up and free the data block.</span></span>

## <a name="related-topics"></a><span data-ttu-id="5c2e0-166">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="5c2e0-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="5c2e0-167">Grabación de audio MIDI</span><span class="sxs-lookup"><span data-stu-id="5c2e0-167">Recording MIDI Audio</span></span>](recording-midi-audio.md)
</dt> </dl>

 

 