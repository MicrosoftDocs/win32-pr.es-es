---
description: En este tema se describe cómo el origen del secuenciador controla los tiempos de presentación durante la reproducción.
ms.assetid: 0d095e25-5ccf-4319-8767-07b417ed7ee8
title: Tiempos de presentación de secuencia
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d17f5b0ff4bd6f0cfee2b1b461d6fbd11bdbf0fb
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104543806"
---
# <a name="sequence-presentation-times"></a><span data-ttu-id="bb9d1-103">Tiempos de presentación de secuencia</span><span class="sxs-lookup"><span data-stu-id="bb9d1-103">Sequence Presentation Times</span></span>

<span data-ttu-id="bb9d1-104">En este tema se describe cómo el [origen del secuenciador](sequencer-source.md) controla los tiempos de presentación durante la reproducción.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-104">This topic describes how the [Sequencer Source](sequencer-source.md) handles presentation times during playback.</span></span>

## <a name="overview"></a><span data-ttu-id="bb9d1-105">Información general</span><span class="sxs-lookup"><span data-stu-id="bb9d1-105">Overview</span></span>

<span data-ttu-id="bb9d1-106">El origen del secuenciador admite dos modos diferentes: secuencias de lista de reproducción y secuencias de edición.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-106">The sequencer source supports two different modes: playlist sequences and editing sequences.</span></span>

<span data-ttu-id="bb9d1-107">En una secuencia de edición, la aplicación especifica la duración de cada segmento de antemano antes de comenzar la reproducción.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-107">In an editing sequence, the application specifies the duration of each segment in advance, before starting playback.</span></span> <span data-ttu-id="bb9d1-108">En una secuencia de lista de reproducción, la aplicación no especifica la duración de antemano.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-108">In a playlist sequence, the application does not specify the duration in advance.</span></span> <span data-ttu-id="bb9d1-109">(De hecho, es posible que no se conozca la duración).</span><span class="sxs-lookup"><span data-stu-id="bb9d1-109">(In fact, the duration might not be known.)</span></span>

<span data-ttu-id="bb9d1-110">En ambos casos, puede especificar el tiempo de inicio y detención del medio de un segmento.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-110">In both cases, you can specify a segment's media start and media stop time.</span></span> <span data-ttu-id="bb9d1-111">Estas horas especifican la posición en el archivo de código fuente donde comienza y finaliza el segmento.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-111">These times specify the position in the source file where the segment begins and ends.</span></span> <span data-ttu-id="bb9d1-112">Por ejemplo, supongamos que el archivo de código fuente tiene una longitud de 90 segundos.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-112">For example, suppose that the source file is 90 seconds long.</span></span> <span data-ttu-id="bb9d1-113">Si desea recortar los primeros 10 segundos y los últimos 10 segundos, debe especificar los valores siguientes:</span><span class="sxs-lookup"><span data-stu-id="bb9d1-113">If you wanted to trim the first 10 seconds and the last 10 seconds, you would specify the following values:</span></span>

-   <span data-ttu-id="bb9d1-114">Inicio de medio: 10 segundos</span><span class="sxs-lookup"><span data-stu-id="bb9d1-114">Media start: 10 seconds</span></span>
-   <span data-ttu-id="bb9d1-115">Detención de medios: 80 segundos</span><span class="sxs-lookup"><span data-stu-id="bb9d1-115">Media stop: 80 seconds</span></span>

<span data-ttu-id="bb9d1-116">Para especificar la hora de inicio del medio, establezca el atributo [MF \_ TOPONODE \_ MEDIASTART](mf-toponode-mediastart-attribute.md) en el nodo de origen.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-116">To specify the media start time, set the [MF\_TOPONODE\_MEDIASTART](mf-toponode-mediastart-attribute.md) attribute on the source node.</span></span> <span data-ttu-id="bb9d1-117">Para especificar la hora de detención del medio, establezca el atributo [MF \_ TOPONODE \_ MEDIASTOP](mf-toponode-mediastop-attribute.md) en el nodo de origen.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-117">To specify the media stop time, set the [MF\_TOPONODE\_MEDIASTOP](mf-toponode-mediastop-attribute.md) attribute on the source node.</span></span>

<span data-ttu-id="bb9d1-118">Para crear una secuencia de edición, establezca el atributo [ \_ \_ \_ hora global de sesión MF](mf-session-global-time-attribute.md) al crear la sesión multimedia.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-118">To create an editing sequence, set the [MF\_SESSION\_GLOBAL\_TIME](mf-session-global-time-attribute.md) attribute when you create the Media Session.</span></span> <span data-ttu-id="bb9d1-119">De lo contrario, la sesión multimedia espera secuencias de lista de reproducción.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-119">Otherwise, the Media Session expects playlist sequences.</span></span> <span data-ttu-id="bb9d1-120">En una secuencia de edición, cada topología de segmento debe tener el atributo [MF \_ Topology \_ PROJECTSTART](mf-topology-projectstart-attribute.md) y el atributo [MF \_ Topology \_ PROJECTSTOP](mf-topology-projectstop-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="bb9d1-120">In an editing sequence, every segment topology must have the [MF\_TOPOLOGY\_PROJECTSTART](mf-topology-projectstart-attribute.md) attribute and the [MF\_TOPOLOGY\_PROJECTSTOP](mf-topology-projectstop-attribute.md) attribute.</span></span>

## <a name="playlist-sequences"></a><span data-ttu-id="bb9d1-121">Secuencias de lista de reproducción</span><span class="sxs-lookup"><span data-stu-id="bb9d1-121">Playlist Sequences</span></span>

<span data-ttu-id="bb9d1-122">En una secuencia de lista de reproducción, el reloj de la presentación comienza en cero y continúa a lo largo de los límites del segmento.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-122">In a playlist sequence, the presentation clock starts at zero and continues across segment boundaries.</span></span> <span data-ttu-id="bb9d1-123">Los orígenes nativos proporcionan ejemplos con marcas de tiempo iguales a la hora del medio.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-123">The native sources deliver samples with time stamps equal to the media time.</span></span> <span data-ttu-id="bb9d1-124">La canalización convierte las marcas de tiempo en el tiempo de presentación correcto de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="bb9d1-124">The pipeline converts the time stamps to the correct presentation time as follows:</span></span>

-   <span data-ttu-id="bb9d1-125">Nueva marca de tiempo = tiempo medio + desplazamiento − inicio de medios</span><span class="sxs-lookup"><span data-stu-id="bb9d1-125">New time stamp = media time + offset − media start</span></span>

<span data-ttu-id="bb9d1-126">El valor de *offset* es la hora de presentación en la que finalizó el segmento anterior.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-126">The value of *offset* is the presentation time at which the previous segment ended.</span></span> <span data-ttu-id="bb9d1-127">En el primer segmento, el desplazamiento es cero.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-127">For the first segment, the offset is zero.</span></span> <span data-ttu-id="bb9d1-128">A continuación se muestran dos ejemplos de cómo se calculan estas conversiones de marca de tiempo:</span><span class="sxs-lookup"><span data-stu-id="bb9d1-128">Here are two examples of how these time-stamp conversions are calculated:</span></span>

-   <span data-ttu-id="bb9d1-129">Ejemplo 1: Supongamos que el primer segmento (S1) tiene una longitud de 10 segundos y el segundo segmento (S2) tiene una hora de inicio del medio de cero.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-129">Example 1: Suppose the first segment (S1) is 10 seconds long, and the second segment (S2) has a media start time of zero.</span></span> <span data-ttu-id="bb9d1-130">El origen nativo utiliza la hora del medio para sus marcas de tiempo, por lo que el primer ejemplo de S2 tiene una marca de tiempo de cero.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-130">The native source uses the media time for its time stamps, so the first sample from S2 has a time stamp of zero.</span></span> <span data-ttu-id="bb9d1-131">El desplazamiento es de 10 segundos (la duración de S1), por lo que la marca de tiempo ajustada es: 0 + 10 − 0 = 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-131">The offset is 10 seconds (the duration of S1), so the adjusted time stamp is:0 + 10 − 0 = 10 seconds.</span></span>
-   <span data-ttu-id="bb9d1-132">Ejemplo 2: Supongamos que el segmento S1 tiene una longitud de 10 segundos y S2 tiene una hora de inicio del medio de 5 segundos.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-132">Example 2: Suppose segment S1 is 10 seconds long, and S2 has a media start time of 5 seconds.</span></span> <span data-ttu-id="bb9d1-133">La primera muestra de S2 tiene una marca de tiempo de 5 segundos (tiempo medio).</span><span class="sxs-lookup"><span data-stu-id="bb9d1-133">The first sample from S2 has a time stamp of 5 seconds (media time).</span></span> <span data-ttu-id="bb9d1-134">El desplazamiento es de 10 segundos, por lo que la marca de tiempo ajustada es: 5 + 10 − 5 = 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-134">The offset is 10 seconds, so the adjusted time stamp is:5 + 10 − 5 = 10 seconds.</span></span>

<span data-ttu-id="bb9d1-135">Todos los componentes de canalización de nivel inferior de los nodos de origen reciben muestras con las marcas de tiempo ajustadas.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-135">All pipeline components downstream from the source nodes receive samples with the adjusted time stamps.</span></span> <span data-ttu-id="bb9d1-136">Los nodos de origen de una topología pueden tener distintas horas de inicio de medios, por lo que los ajustes se calculan por separado para cada rama de la topología.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-136">The source nodes in a topology can have different media start times, so the adjustments are calculated separately for each branch of the topology.</span></span>

<span data-ttu-id="bb9d1-137">Cuando la presentación cambia al siguiente segmento, el reloj de la presentación no se detiene ni se restablece, y el tiempo de presentación aumenta de una vez más.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-137">When the presentation switches to the next segment, the presentation clock does not stop or reset, and the presentation time increases monotonically.</span></span> <span data-ttu-id="bb9d1-138">Antes de que se inicie un nuevo segmento, la sesión multimedia envía a la aplicación un evento [MESessionNotifyPresentationTime](mesessionnotifypresentationtime.md) .</span><span class="sxs-lookup"><span data-stu-id="bb9d1-138">Before a new segment starts, the Media Session sends the application an [MESessionNotifyPresentationTime](mesessionnotifypresentationtime.md) event.</span></span> <span data-ttu-id="bb9d1-139">El evento especifica la hora de inicio del segmento, relativa al reloj de la presentación y el valor del desplazamiento.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-139">The event specifies the starting time of the segment, relative to the presentation clock, and the value of the offset.</span></span> <span data-ttu-id="bb9d1-140">Cuando se inicia un nuevo segmento, las llamadas de canalización se [**inician**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-start) en el origen del secuenciador con el valor VT \_ vacío.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-140">When a new segment starts, the pipeline calls [**Start**](/windows/desktop/api/mfidl/nf-mfidl-imfmediasource-start) on the sequencer source with the value VT\_EMPTY.</span></span> <span data-ttu-id="bb9d1-141">El origen del secuenciador envía un evento [MESourceStarted](mesourcestarted.md) sin hora de inicio.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-141">The sequencer source sends an [MESourceStarted](mesourcestarted.md) event with no start time.</span></span>

<span data-ttu-id="bb9d1-142">Para buscar, la aplicación especifica un identificador de segmento más un desplazamiento de tiempo dentro del segmento.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-142">To seek, the application specifies a segment identifier plus a time offset within the segment.</span></span> <span data-ttu-id="bb9d1-143">Después de la búsqueda, el reloj de la presentación comienza en el desplazamiento del *segmento* .</span><span class="sxs-lookup"><span data-stu-id="bb9d1-143">After the seek, the presentation clock starts at the *segment* offset.</span></span> <span data-ttu-id="bb9d1-144">Este es un ejemplo de cómo funciona este proceso:</span><span class="sxs-lookup"><span data-stu-id="bb9d1-144">Here is an example of how that process works:</span></span>

-   <span data-ttu-id="bb9d1-145">Ejemplo 3: la aplicación busca el segmento S3, con un desplazamiento de segmento de 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-145">Example 3: The application seeks to segment S3, with a segment offset of 10 seconds.</span></span> <span data-ttu-id="bb9d1-146">El reloj de la presentación comienza en 10 segundos (el desplazamiento del segmento).</span><span class="sxs-lookup"><span data-stu-id="bb9d1-146">The presentation clock starts at 10 seconds (the segment offset).</span></span> <span data-ttu-id="bb9d1-147">El desplazamiento no incluye la duración de los segmentos S1 y S2.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-147">The offset does not include the duration of segments S1 and S2.</span></span> <span data-ttu-id="bb9d1-148">El origen del secuenciador envía un evento [MESourceStarted](mesourcestarted.md) con una hora de inicio igual al desplazamiento del segmento, 10 segundos.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-148">The sequencer source sends an [MESourceStarted](mesourcestarted.md) event with a start time equal to the segment offset, 10 seconds.</span></span>

<span data-ttu-id="bb9d1-149">Después de una búsqueda, si la reproducción continúa en el segmento siguiente, la transición funciona igual que los ejemplos anteriores, salvo que el desplazamiento no incluye los segmentos omitidos.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-149">After a seek, if playback continues to the next segment, the transition works just like the previous examples, except that the offset does not include the skipped segments.</span></span>

<span data-ttu-id="bb9d1-150">A continuación se muestran algunos detalles adicionales que afectan al modo en que los ejemplos tienen marca de tiempo:</span><span class="sxs-lookup"><span data-stu-id="bb9d1-150">Here are some further details that affect how samples are time stamped:</span></span>

-   <span data-ttu-id="bb9d1-151">Los descodificadores pueden necesitar datos más allá del tiempo de detención del medio.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-151">Decoders may need data beyond the media stop time.</span></span> <span data-ttu-id="bb9d1-152">La canalización extrae todos los datos del origen que el descodificador requiere y, a continuación, recorta los ejemplos de salida del descodificador.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-152">The pipeline pulls as much data from the source as the decoder requires, and then trims the decoder's output samples.</span></span>
-   <span data-ttu-id="bb9d1-153">Las transformaciones pueden almacenar en búfer los datos.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-153">Transforms might buffer data.</span></span> <span data-ttu-id="bb9d1-154">Por ejemplo, un efecto de audio podría necesitar hacerlo.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-154">For example, an audio effect might need to do this.</span></span> <span data-ttu-id="bb9d1-155">Cuando un segmento finaliza, la marca de tiempo del último ejemplo de la transformación es anterior al final del segmento, porque la transformación retiene algunos datos.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-155">When a segment ends, the time stamp on the last sample from the transform is earlier than the end of the segment, because the transform is holding back some data.</span></span> <span data-ttu-id="bb9d1-156">Cuando se inicia el siguiente segmento, la marca de tiempo de la primera muestra es ligeramente anterior al inicio del segmento.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-156">When the next segment starts, the time stamp on the first sample is slightly earlier than the start of the segment.</span></span> <span data-ttu-id="bb9d1-157">No hay ninguna brecha en las marcas de tiempo, por lo que los datos que llegan al receptor de medios son continuos.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-157">There is no gap in the time stamps, so the data that reaches the media sink is continuous.</span></span> <span data-ttu-id="bb9d1-158">Cuando finaliza el segmento final, la canalización purga la transformación, por lo que no se pierde ningún dato.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-158">When the final segment ends, the pipeline drains the transform, so no data is lost.</span></span>
-   <span data-ttu-id="bb9d1-159">Es posible que el origen tenga que iniciarse ligeramente anterior a la hora de inicio del medio, para recoger el fotograma clave anterior.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-159">The source may need to start slightly earlier than the media start time, to pick up the previous key frame.</span></span> <span data-ttu-id="bb9d1-160">Por lo tanto, después del ajuste, el primer ejemplo podría tener un tiempo de presentación negativo.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-160">Therefore, after the adjustment, the first sample might have a negative presentation time.</span></span>

## <a name="editing-sequences"></a><span data-ttu-id="bb9d1-161">Editar secuencias</span><span class="sxs-lookup"><span data-stu-id="bb9d1-161">Editing Sequences</span></span>

<span data-ttu-id="bb9d1-162">En una secuencia de edición, la aplicación especifica los límites del segmento de antemano mediante el establecimiento de los atributos de la topología [**MF \_ \_ PROJECTSTART**](mf-topology-projectstart-attribute.md) y [**MF \_ \_ PROJECTSTOP**](mf-topology-projectstop-attribute.md) .</span><span class="sxs-lookup"><span data-stu-id="bb9d1-162">In an editing sequence, the application specifies the segment boundaries in advance, by setting the [**MF\_TOPOLOGY\_PROJECTSTART**](mf-topology-projectstart-attribute.md) and [**MF\_TOPOLOGY\_PROJECTSTOP**](mf-topology-projectstop-attribute.md) attributes.</span></span> <span data-ttu-id="bb9d1-163">La canalización calcula los ajustes de las marcas de tiempo prácticamente de la misma manera que para una secuencia de lista de reproducción:</span><span class="sxs-lookup"><span data-stu-id="bb9d1-163">The pipeline calculates adjustments for the time stamps in almost the same way as for a playlist sequence:</span></span>

-   <span data-ttu-id="bb9d1-164">Para el desplazamiento, usa el valor de [**MF \_ Topology \_ PROJECTSTART**](mf-topology-projectstart-attribute.md), en lugar de usar el extremo observado del segmento.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-164">For the offset, it uses the value of [**MF\_TOPOLOGY\_PROJECTSTART**](mf-topology-projectstart-attribute.md), instead of using the observed end of the segment.</span></span>

-   <span data-ttu-id="bb9d1-165">En la búsqueda, el desplazamiento usa un valor igual al valor de [**\_ \_ PROJECTSTART de la topología MF**](mf-topology-projectstart-attribute.md) del segmento más el desplazamiento del segmento.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-165">For seeking, the offset uses a value equal to the segment's [**MF\_TOPOLOGY\_PROJECTSTART**](mf-topology-projectstart-attribute.md) value plus the segment offset.</span></span>

<span data-ttu-id="bb9d1-166">Por lo tanto, el tiempo de presentación en una secuencia de edición siempre es relativo al inicio de la presentación, incluso si la aplicación busca en otro segmento.</span><span class="sxs-lookup"><span data-stu-id="bb9d1-166">Therefore, the presentation time in an editing sequence is always relative to the start of the presentation, even if the application seeks to another segment.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bb9d1-167">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="bb9d1-167">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bb9d1-168">Sesión de medios</span><span class="sxs-lookup"><span data-stu-id="bb9d1-168">Media Session</span></span>](media-session.md)
</dt> <dt>

[<span data-ttu-id="bb9d1-169">Origen del secuenciador</span><span class="sxs-lookup"><span data-stu-id="bb9d1-169">Sequencer Source</span></span>](sequencer-source.md)
</dt> </dl>

 

 



