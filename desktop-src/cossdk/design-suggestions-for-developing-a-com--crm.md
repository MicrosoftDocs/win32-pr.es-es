---
description: Sugerencias de diseño para desarrollar un CRM de COM+
ms.assetid: dde1b978-6d35-4a75-91fd-69dfcc6c43d2
title: Sugerencias de diseño para desarrollar un CRM de COM+
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8dcdb59f0ea23fb6879300d0bacec7df12970d81
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104274950"
---
# <a name="design-suggestions-for-developing-a-com-crm"></a><span data-ttu-id="f5457-103">Sugerencias de diseño para desarrollar un CRM de COM+</span><span class="sxs-lookup"><span data-stu-id="f5457-103">Design Suggestions for Developing a COM+ CRM</span></span>

<span data-ttu-id="f5457-104">A continuación se indican los pasos sugeridos para desarrollar un CRM de COM+:</span><span class="sxs-lookup"><span data-stu-id="f5457-104">Following are suggested steps for developing a COM+ CRM:</span></span>

1.  <span data-ttu-id="f5457-105">Antes de comenzar el desarrollo, establezca el tiempo de espera de la transacción en cero (mediante la herramienta administrativa Servicios de componentes).</span><span class="sxs-lookup"><span data-stu-id="f5457-105">Before starting development, set the transaction time-out to zero (using the Component Services administrative tool).</span></span> <span data-ttu-id="f5457-106">Establezca la marca del registro VTRACE1 (consulte [configuración del registro de com+ CRM](com--crm-registry-settings.md)) para ver los mensajes de error y de advertencia de CRM en el seguimiento de depuración.</span><span class="sxs-lookup"><span data-stu-id="f5457-106">Set the VTRACE1 registry flag (see [COM+ CRM Registry Settings](com--crm-registry-settings.md)) to see CRM warning and error messages on the debug trace.</span></span>
2.  <span data-ttu-id="f5457-107">Determine el conjunto de interfaces que necesita usar, estructurado (Variant) o no estructurado.</span><span class="sxs-lookup"><span data-stu-id="f5457-107">Determine which set of interfaces you need to use, structured (Variants) or non-structured.</span></span> <span data-ttu-id="f5457-108">(Consulte [interfaces de com+ CRM](com--crm-interfaces.md)). Esto dependerá del idioma que use para desarrollar su CRM, por ejemplo, Microsoft Visual C++ o Microsoft Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="f5457-108">(See [COM+ CRM Interfaces](com--crm-interfaces.md).) This will depend on the language that you use to develop your CRM—for example, Microsoft Visual C++ or Microsoft Visual Basic.</span></span>
3.  <span data-ttu-id="f5457-109">Desarrolle primero el trabajador de CRM.</span><span class="sxs-lookup"><span data-stu-id="f5457-109">Develop the CRM worker first.</span></span> <span data-ttu-id="f5457-110">Determine la información necesaria en las entradas de registro.</span><span class="sxs-lookup"><span data-stu-id="f5457-110">Determine the information that is required in the log records.</span></span> <span data-ttu-id="f5457-111">Defina los tipos de entradas de registro necesarias y su formato.</span><span class="sxs-lookup"><span data-stu-id="f5457-111">Define the types of log records required and their format.</span></span>
4.  <span data-ttu-id="f5457-112">Un compensador de CRM de depuración se proporciona como parte de los ejemplos de CRM (en el Windows SDK).</span><span class="sxs-lookup"><span data-stu-id="f5457-112">A debug CRM compensator is provided as part of the CRM samples (in the Windows SDK).</span></span> <span data-ttu-id="f5457-113">Se puede usar temporalmente al depurar el trabajo de CRM en lugar del compensador real de CRM.</span><span class="sxs-lookup"><span data-stu-id="f5457-113">This can be used temporarily when debugging the CRM worker in place of the real CRM compensator.</span></span>
5.  <span data-ttu-id="f5457-114">Cuando el trabajo de CRM funcione correctamente, desarrolle el compensador de CRM real y reemplace el compensador de depuración de CRM por el compensador real de CRM.</span><span class="sxs-lookup"><span data-stu-id="f5457-114">When the CRM worker is working correctly, develop the real CRM compensator and replace the debug CRM compensator with the real CRM compensator.</span></span>
6.  <span data-ttu-id="f5457-115">Puede ser conveniente no probar inicialmente el caso de recuperación.</span><span class="sxs-lookup"><span data-stu-id="f5457-115">It may be desirable to initially not test the recovery case.</span></span> <span data-ttu-id="f5457-116">En ese caso, elimine el archivo de registro de CRM de la aplicación de servidor CRM cada vez antes de iniciar la aplicación de servidor CRM.</span><span class="sxs-lookup"><span data-stu-id="f5457-116">If so, delete the CRM log file for the CRM server application each time before starting that CRM server application.</span></span>

## <a name="considerations"></a><span data-ttu-id="f5457-117">Consideraciones</span><span class="sxs-lookup"><span data-stu-id="f5457-117">Considerations</span></span>

1.  <span data-ttu-id="f5457-118">**Escritura previa.**</span><span class="sxs-lookup"><span data-stu-id="f5457-118">**Write ahead.**</span></span> <span data-ttu-id="f5457-119">El componente de trabajo de CRM debe escribir de antemano; es decir, debe escribir una entrada de registro que indique que va a realizar una acción antes de realizar esa acción.</span><span class="sxs-lookup"><span data-stu-id="f5457-119">The CRM worker component must write ahead; that is, it must write a log record indicating it is going to perform an action before actually performing that action.</span></span> <span data-ttu-id="f5457-120">Además, esta entrada de registro se debe forzar al disco después de la escritura y antes de que se realice la acción.</span><span class="sxs-lookup"><span data-stu-id="f5457-120">In addition, this log record must be forced to disk after the write and before the action is performed.</span></span>
2.  <span data-ttu-id="f5457-121">**Aislamiento.**</span><span class="sxs-lookup"><span data-stu-id="f5457-121">**Isolation.**</span></span> <span data-ttu-id="f5457-122">CRM no aplica el aislamiento.</span><span class="sxs-lookup"><span data-stu-id="f5457-122">The CRM does not enforce isolation.</span></span> <span data-ttu-id="f5457-123">El diseño de CRM debe proporcionar aislamiento entre varios clientes en transacciones independientes y también debe tener en cuenta las mayúsculas y minúsculas antes de la recuperación.</span><span class="sxs-lookup"><span data-stu-id="f5457-123">The CRM design must provide isolation between multiple clients on separate transactions and must also consider the case prior to recovery.</span></span>
3.  <span data-ttu-id="f5457-124">**Recuperación en curso.**</span><span class="sxs-lookup"><span data-stu-id="f5457-124">**Recovery in progress.**</span></span> <span data-ttu-id="f5457-125">El trabajador de CRM debe controlar el código de error "recuperación en curso".</span><span class="sxs-lookup"><span data-stu-id="f5457-125">The CRM worker must handle the "recovery in progress" error code.</span></span> <span data-ttu-id="f5457-126">Consulte [solución de problemas de com+ CRM](troubleshooting-the-com--crm.md) para obtener más información sobre este código de error.</span><span class="sxs-lookup"><span data-stu-id="f5457-126">See [Troubleshooting the COM+ CRM](troubleshooting-the-com--crm.md) for more information about this error code.</span></span>
4.  <span data-ttu-id="f5457-127">**Control de errores.**</span><span class="sxs-lookup"><span data-stu-id="f5457-127">**Error handling.**</span></span> <span data-ttu-id="f5457-128">El trabajo de CRM debe hacer frente al caso en el que la transacción se anula antes de lo esperado.</span><span class="sxs-lookup"><span data-stu-id="f5457-128">The CRM worker must cope with the case where the transaction is aborted earlier than expected.</span></span> <span data-ttu-id="f5457-129">Vea la sección [control de errores en el CRM de com+](error-handling-in-the-com--crm.md).</span><span class="sxs-lookup"><span data-stu-id="f5457-129">See the section [Error Handling in the COM+ CRM](error-handling-in-the-com--crm.md).</span></span>
5.  <span data-ttu-id="f5457-130">**Tiempo de recuperación.**</span><span class="sxs-lookup"><span data-stu-id="f5457-130">**Recovery time.**</span></span> <span data-ttu-id="f5457-131">El compensador de CRM debe estar diseñado para realizar la recuperación rápidamente, de modo que el nuevo trabajo para esa aplicación de CRM Server no tenga que esperar.</span><span class="sxs-lookup"><span data-stu-id="f5457-131">The CRM compensator should be designed to perform recovery quickly so that new work for that CRM server application does not have to wait.</span></span>
6.  <span data-ttu-id="f5457-132">**Idempotencia.**</span><span class="sxs-lookup"><span data-stu-id="f5457-132">**Idempotence.**</span></span> <span data-ttu-id="f5457-133">Es posible que un compensador de CRM vuelva a recibir el mismo registro de registro para deshacer o rehacer una acción que ya se ha deshecho o rehecho.</span><span class="sxs-lookup"><span data-stu-id="f5457-133">It is possible that a CRM compensator might receive the same log record again, to undo or redo an action that has already been undone or redone.</span></span> <span data-ttu-id="f5457-134">Las acciones que el compensador de CRM podría realizar deben ser idempotente, lo que a menudo significa que se deben omitir los códigos de error devueltos por estas acciones.</span><span class="sxs-lookup"><span data-stu-id="f5457-134">Actions that the CRM compensator might perform must be idempotent, which often means that the error codes returned from these actions should be ignored.</span></span>
7.  <span data-ttu-id="f5457-135">**Inicio de la recuperación.**</span><span class="sxs-lookup"><span data-stu-id="f5457-135">**Initiation of recovery.**</span></span> <span data-ttu-id="f5457-136">La recuperación de una aplicación de servidor CRM se realiza cuando se inicia la aplicación de servidor CRM.</span><span class="sxs-lookup"><span data-stu-id="f5457-136">Recovery of a CRM server application is performed when that CRM server application starts up.</span></span> <span data-ttu-id="f5457-137">Sin embargo, no hay ningún Inicio automático de una aplicación de servidor CRM.</span><span class="sxs-lookup"><span data-stu-id="f5457-137">However, there is no automatic startup of a CRM server application.</span></span> <span data-ttu-id="f5457-138">El desarrollador de la aplicación debe considerar cómo debe iniciarse el inicio y la recuperación.</span><span class="sxs-lookup"><span data-stu-id="f5457-138">The application developer should consider how both startup and recovery should be initiated.</span></span>

## <a name="related-topics"></a><span data-ttu-id="f5457-139">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="f5457-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f5457-140">Conceptos de Administrador de recursos de compensación de COM+</span><span class="sxs-lookup"><span data-stu-id="f5457-140">COM+ Compensating Resource Manager Concepts</span></span>](com--compensating-resource-manager-concepts.md)
</dt> </dl>

 

 



