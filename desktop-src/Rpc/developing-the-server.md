---
title: Desarrollo del servidor
description: Al crear un programa de servidor para una aplicación distribuida, debe utilizar el archivo de encabezado y el código auxiliar de servidor que genera el compilador MIDL.
ms.assetid: 2b7b14f5-5692-41b8-bb98-7edd36309d21
keywords:
- RPC llamada a procedimiento remoto, tareas, desarrollar el servidor
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 0fc3405c52c48f531572ab159ad083bad93f95e0
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104359287"
---
# <a name="developing-the-server"></a><span data-ttu-id="69e4a-104">Desarrollo del servidor</span><span class="sxs-lookup"><span data-stu-id="69e4a-104">Developing the Server</span></span>

<span data-ttu-id="69e4a-105">Al crear un programa de servidor para una aplicación distribuida, debe utilizar el archivo de encabezado y el código auxiliar de servidor que genera el compilador MIDL.</span><span class="sxs-lookup"><span data-stu-id="69e4a-105">When you create a server program for a distributed application, you must use the header file and server stub that the MIDL compiler generates.</span></span> <span data-ttu-id="69e4a-106">Para obtener más información, vea [desarrollar la interfaz](developing-the-interface.md).</span><span class="sxs-lookup"><span data-stu-id="69e4a-106">For details, see [Developing the Interface](developing-the-interface.md).</span></span> <span data-ttu-id="69e4a-107">Incluya el archivo de encabezado en el archivo de programa del servidor C.</span><span class="sxs-lookup"><span data-stu-id="69e4a-107">Include the header file in your server C program file.</span></span> <span data-ttu-id="69e4a-108">Compile el código auxiliar del servidor con los archivos de código fuente de C que componen la aplicación.</span><span class="sxs-lookup"><span data-stu-id="69e4a-108">Compile the server stub with the C source files that compose your application.</span></span> <span data-ttu-id="69e4a-109">Vincule los archivos objeto resultantes junto con la biblioteca de importación.</span><span class="sxs-lookup"><span data-stu-id="69e4a-109">Link the resulting object files together with the import library.</span></span> <span data-ttu-id="69e4a-110">Este proceso se ilustra en el diagrama siguiente.</span><span class="sxs-lookup"><span data-stu-id="69e4a-110">This process is illustrated in the following diagram.</span></span>

![proceso de creación de un programa de servidor para una aplicación distribuida](images/srvrdev.png)

<span data-ttu-id="69e4a-112">Como puede ver en el ejemplo de la ilustración, se utilizó un archivo MIDL denominado MyApp. idl para definir la interfaz.</span><span class="sxs-lookup"><span data-stu-id="69e4a-112">As you can see from the example in the illustration, a MIDL file called MyApp.idl was used to define the interface.</span></span> <span data-ttu-id="69e4a-113">El compilador MIDL usó MyApp. idl para generar MyApp \_ s. c y MyApp. h.</span><span class="sxs-lookup"><span data-stu-id="69e4a-113">The MIDL compiler used MyApp.idl to produce MyApp\_s.c and MyApp.h.</span></span> <span data-ttu-id="69e4a-114">También genera un archivo de código fuente de C para el código auxiliar del cliente, pero no es relevante para esta discusión concreta.</span><span class="sxs-lookup"><span data-stu-id="69e4a-114">It also produces a C source file for the client stub, but that is not relevant to this particular discussion.</span></span> <span data-ttu-id="69e4a-115">El archivo de código fuente de C para el programa de servidor (en este caso, Mysrvr. C) debe incluir el archivo myapp. h.</span><span class="sxs-lookup"><span data-stu-id="69e4a-115">The C source file for the server program (in this case, Mysrvr.c) must include the file Myapp.h.</span></span> <span data-ttu-id="69e4a-116">También tendrá que incluir los archivos RPC. h y Rpcndr. h.</span><span class="sxs-lookup"><span data-stu-id="69e4a-116">It will also need to include the files Rpc.h and Rpcndr.h.</span></span>

<span data-ttu-id="69e4a-117">La aplicación de servidor se desarrolló en dos archivos, Mysrvr. c y Rprocs. c.</span><span class="sxs-lookup"><span data-stu-id="69e4a-117">The server application was developed in two files, Mysrvr.c and Rprocs.c.</span></span> <span data-ttu-id="69e4a-118">El archivo Mysrvr. c contiene las funciones necesarias para poner en marcha el programa de servidor.</span><span class="sxs-lookup"><span data-stu-id="69e4a-118">The file Mysrvr.c contains the functions necessary for getting the server program up and running.</span></span> <span data-ttu-id="69e4a-119">Los procedimientos remotos que ofrece el programa de servidor se encuentran en el archivo Rprocs. c.</span><span class="sxs-lookup"><span data-stu-id="69e4a-119">The remote procedures that the server program offers are contained in the file Rprocs.c.</span></span>

<span data-ttu-id="69e4a-120">Los archivos Mysrvr. c y Rprocs. c se compilaron junto con MyApp \_ s. c para generar archivos de objeto.</span><span class="sxs-lookup"><span data-stu-id="69e4a-120">The files Mysrvr.c and Rprocs.c were compiled together with Myapp\_s.c to produce object files.</span></span> <span data-ttu-id="69e4a-121">Después, los archivos objeto se vincularon a la biblioteca en tiempo de ejecución de RPC y a cualquier otra biblioteca que puedan necesitar.</span><span class="sxs-lookup"><span data-stu-id="69e4a-121">The object files were then linked with the RPC run-time library, and any other libraries that they might need.</span></span> <span data-ttu-id="69e4a-122">El resultado es un programa de servidor ejecutable denominado Mysrvr.exe.</span><span class="sxs-lookup"><span data-stu-id="69e4a-122">The result is an executable server program named Mysrvr.exe.</span></span>

<span data-ttu-id="69e4a-123">Si no compila el archivo IDL en el modo de compatibilidad Open Software Foundation (OSF) ([**/OSF**](/windows/desktop/Midl/-osf)), el programa de servidor debe proporcionar una función para asignar memoria y una función para desasignarla.</span><span class="sxs-lookup"><span data-stu-id="69e4a-123">If you do not compile your IDL file in Open Software Foundation (OSF) compatibility mode ([**/osf**](/windows/desktop/Midl/-osf)), your server program must provide a function for allocating memory and a function for deallocating it.</span></span> <span data-ttu-id="69e4a-124">En Windows 2000 y versiones posteriores de Windows, el modo recomendado es [**/Oicf**](/windows/desktop/Midl/-oi).</span><span class="sxs-lookup"><span data-stu-id="69e4a-124">For Windows 2000 and later versions of Windows, the recommended mode is [**/Oicf**](/windows/desktop/Midl/-oi).</span></span> <span data-ttu-id="69e4a-125">Para obtener más información, consulte [cómo se asigna y desasigna la memoria](how-memory-is-allocated-and-deallocated.md), y los [punteros y la asignación de memoria](pointers-and-memory-allocation.md).</span><span class="sxs-lookup"><span data-stu-id="69e4a-125">For details, see [How Memory Is Allocated and Deallocated](how-memory-is-allocated-and-deallocated.md), and [Pointers and Memory Allocation](pointers-and-memory-allocation.md).</span></span>

 

 