---
description: La restauración de una copia de seguridad incremental o diferencial en VSS no es significativamente diferente de cualquier otra operación de restauración de VSS.
ms.assetid: 67143f6f-0bb8-4740-9289-8bbfeb7caadf
title: Restaurar copias de seguridad incrementales y diferenciales
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 639919ea24f12fbc036116bd89b1630321cbae54
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104544963"
---
# <a name="restoring-incremental-and-differential-backups"></a><span data-ttu-id="ba325-103">Restaurar copias de seguridad incrementales y diferenciales</span><span class="sxs-lookup"><span data-stu-id="ba325-103">Restoring Incremental and Differential Backups</span></span>

<span data-ttu-id="ba325-104">La restauración de una copia de seguridad incremental o diferencial en VSS no es significativamente diferente de cualquier otra operación de restauración de VSS.</span><span class="sxs-lookup"><span data-stu-id="ba325-104">Restoring an incremental or differential backup under VSS is not significantly different from any other VSS restore operation.</span></span>

<span data-ttu-id="ba325-105">Un escritor puede modificar destinos de restauración o solicitar destinatarios dirigidos, y un solicitante debe administrar asignaciones de ubicaciones alternativas y nuevos destinos, al igual que con cualquier otra restauración.</span><span class="sxs-lookup"><span data-stu-id="ba325-105">A writer can modify restore targets or request directed targeting, and a requester must handle alternate location mappings and new targets, just as with any other restore.</span></span> <span data-ttu-id="ba325-106">Sin embargo, hay dos aspectos importantes que se deben tener en cuenta en el control de la restauración de una copia de seguridad incremental o diferencial: restauraciones adicionales y marcas de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ba325-106">There are, however, two significant issues to be aware of in handling the restore of an incremental or differential backup: additional restores and backup stamps.</span></span>

## <a name="additional-restores"></a><span data-ttu-id="ba325-107">Restauraciones adicionales</span><span class="sxs-lookup"><span data-stu-id="ba325-107">Additional Restores</span></span>

<span data-ttu-id="ba325-108">El primer problema es el de las restauraciones adicionales.</span><span class="sxs-lookup"><span data-stu-id="ba325-108">The first issue is that of additional restores.</span></span> <span data-ttu-id="ba325-109">Es posible que un operador de copia de seguridad tenga que ejecutar varias operaciones de restauración mediante un medio de copia de seguridad incremental inicial y posterior o diferencial como origen.</span><span class="sxs-lookup"><span data-stu-id="ba325-109">A backup operator may need to run several restore operations using an initial full and subsequent incremental or differential backup media as a source.</span></span>

<span data-ttu-id="ba325-110">Algunos escritores, normalmente como parte de su control de un evento [*Postrestore*](vssgloss-p.md) mediante [**CVssWriter:: OnPostRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostrestore), usan archivos restaurados para realizar actualizaciones de los datos que se encuentran actualmente en el disco.</span><span class="sxs-lookup"><span data-stu-id="ba325-110">Some writers, typically as part of their handling of a [*PostRestore*](vssgloss-p.md) event using [**CVssWriter::OnPostRestore**](/windows/desktop/api/VsWriter/nf-vswriter-cvsswriter-onpostrestore), use restored files to perform updates of data currently on disk.</span></span> <span data-ttu-id="ba325-111">En el caso de algunos de estos escritores, es ineficaz (o peligroso) actualizar repetidamente los datos en disco de los archivos restaurados.</span><span class="sxs-lookup"><span data-stu-id="ba325-111">For some of these writers it is inefficient—or dangerous—to repeatedly update on-disk data from restored files.</span></span>

<span data-ttu-id="ba325-112">Por lo tanto, es importante que las aplicaciones de copia de seguridad indiquen Cuándo un componente o un conjunto de componentes pueden requerir restauraciones posteriores llamando a [**IVssBackupComponents:: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span><span class="sxs-lookup"><span data-stu-id="ba325-112">Therefore, it is important that backup applications indicate when a component or component set may require subsequent restores by calling [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores).</span></span>

<span data-ttu-id="ba325-113">Un escritor llamaría a [**IVssComponent:: GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) para determinar si el operador de copia de seguridad planeó más restauraciones del componente o del conjunto de componentes.</span><span class="sxs-lookup"><span data-stu-id="ba325-113">A writer would call [**IVssComponent::GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) to determine whether the backup operator planned more restores of the component or component set.</span></span>

<span data-ttu-id="ba325-114">Si el solicitante no hubiera llamado a [**IVssBackupComponents:: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores), [**IVssComponent:: GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) devuelve false y el escritor puede realizar cualquier procesamiento posterior a la restauración que necesite.</span><span class="sxs-lookup"><span data-stu-id="ba325-114">If the requester had not called [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores), then [**IVssComponent::GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) returns false, and the writer can perform any post-restore processing it needs to.</span></span>

<span data-ttu-id="ba325-115">Si se ha llamado a [**IVssBackupComponents:: SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) , [**IVssComponent:: GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) devuelve **true** y un escritor debe decidir cómo controlar las operaciones posteriores a la restauración; por ejemplo, el escritor puede optar por no actualizar sus datos en el disco.</span><span class="sxs-lookup"><span data-stu-id="ba325-115">If [**IVssBackupComponents::SetAdditionalRestores**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setadditionalrestores) had been called, then [**IVssComponent::GetAdditionalRestores**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getadditionalrestores) returns **true**, and a writer should decide how to handle post-restore operations—for instance, the writer may choose not to update its on-disk data.</span></span>

## <a name="backup-stamps"></a><span data-ttu-id="ba325-116">Marcas de copia de seguridad</span><span class="sxs-lookup"><span data-stu-id="ba325-116">Backup Stamps</span></span>

<span data-ttu-id="ba325-117">Como parte de la operación de copia de seguridad completa anterior, un escritor puede haber almacenado un sello de copia de seguridad en el documento componentes de copia de seguridad del solicitante.</span><span class="sxs-lookup"><span data-stu-id="ba325-117">As part of the previous full backup operation, a writer may have stored a backup stamp in the requester's Backup Components Document.</span></span>

<span data-ttu-id="ba325-118">El sello de copia de seguridad se almacena como una cadena, y su formato y la información no son ininteligibles para el solicitante.</span><span class="sxs-lookup"><span data-stu-id="ba325-118">The backup stamp is stored as a string, and its format and information are not intelligible to the requester.</span></span> <span data-ttu-id="ba325-119">Por lo tanto, el solicitante no puede hacer uso directo de la información de marca de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="ba325-119">Therefore, the requester cannot make direct use of the backup stamp information.</span></span>

<span data-ttu-id="ba325-120">En su lugar, su tarea consiste en que esa información esté disponible para el escritor, llamando al método [**IVssBackupComponents:: SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) antes de la generación de un evento [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) para una copia de seguridad incremental.</span><span class="sxs-lookup"><span data-stu-id="ba325-120">Instead, its task is to make that information available to the writer, by calling the [**IVssBackupComponents::SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) method prior to the generation of a [**PrepareForBackup**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prepareforbackup) event for an incremental backup.</span></span>

<span data-ttu-id="ba325-121">El solicitante realiza esta función componente por componente.</span><span class="sxs-lookup"><span data-stu-id="ba325-121">The requester does this on a component-by-component basis.</span></span> <span data-ttu-id="ba325-122">Un solicitante examina la información de marca de copia de seguridad del conjunto de componentes o componentes almacenados mediante [**IVssComponent:: GetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="ba325-122">A requester examines stored component or component set backup stamp information using [**IVssComponent::GetBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getbackupstamp).</span></span>

<span data-ttu-id="ba325-123">Si la información de marca de copia de seguridad es adecuada para el tipo de restauración que está llevando a cabo el solicitante, la pone a disposición de la marca de tiempo de la última copia de seguridad de un componente con el método [**IVssBackupComponents:: SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) .</span><span class="sxs-lookup"><span data-stu-id="ba325-123">If backup stamp information is appropriate to the type of restore the requester is undertaking, it makes it available as the time stamp of the last backup of a component with the [**IVssBackupComponents::SetPreviousBackupStamp**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-setpreviousbackupstamp) method.</span></span>

<span data-ttu-id="ba325-124">Un escritor recupera la información de marca de la copia de seguridad mediante [**IVssComponent:: GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span><span class="sxs-lookup"><span data-stu-id="ba325-124">A writer recovers the backup stamp information using [**IVssComponent::GetPreviousBackupStamp**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscomponent-getpreviousbackupstamp).</span></span> <span data-ttu-id="ba325-125">Un escritor de esta clase generó el sello de copia de seguridad inicial, por lo que el escritor puede descodificar esta marca y usar la información.</span><span class="sxs-lookup"><span data-stu-id="ba325-125">A writer of this class generated the initial backup stamp, so the writer is able to decode this stamp and use the information.</span></span> <span data-ttu-id="ba325-126">En función de esto, mientras se controla un evento de [**prerestauración**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) , un escritor puede optar por realizar acciones como cambiar destinos de restauración o solicitar destinatarios dirigidos.</span><span class="sxs-lookup"><span data-stu-id="ba325-126">Based on this, while handling a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event, a writer may choose to take actions such as changing restore targets or requesting directed targeting.</span></span>

 

 



