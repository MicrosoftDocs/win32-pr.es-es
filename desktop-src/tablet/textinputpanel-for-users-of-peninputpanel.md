---
description: La versión de Windows Vista incluye un nuevo objeto de programación para el panel de entrada de Tablet PC que proporciona una nueva gama de posibilidades de cómo una aplicación puede usar e interactuar con el panel de entrada.
ms.assetid: 539f41d3-5fb8-4e20-99ba-0d5af1f0cc54
title: TextInputPanel para los usuarios de PenInputPanel
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 14ed213db49427d997f0ea1dda414cf1a6a0c2d4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104361414"
---
# <a name="textinputpanel-for-users-of-peninputpanel"></a>TextInputPanel para los usuarios de PenInputPanel

La versión de Windows Vista incluye un nuevo objeto de programación para el panel de entrada de Tablet PC que proporciona una nueva gama de posibilidades de cómo una aplicación puede usar e interactuar con el panel de entrada. Por primera vez, los desarrolladores de aplicaciones pueden colocar el In-Place icono del panel de entrada para alinearlo con un cuadro de texto o colocarlo en la esquina de una superficie de entrada de lápiz de cliente para ofrecer acceso a un modo de entrada alternativo. Los desarrolladores tienen el mismo control sobre la posición cuando el icono del panel de entrada se expande en el In-Place panel de entrada. Esto hace posible garantizar que el panel de entrada de In-Place nunca se superponga a los elementos clave de la interfaz de usuario en el diseño de una aplicación ni siquiera a redistribuir la interfaz de usuario de una aplicación para crear espacio para el In-Place panel de entrada y, a continuación, colocarlo en el espacio reservado. El nuevo modelo de programación incluye compatibilidad para algo más que el posicionamiento, aunque los desarrolladores también pueden personalizar el área de entrada, el modo de corrección y muchas otras propiedades del panel de entrada para adaptar la experiencia de entrada de texto en una aplicación. Por último, por primera vez, es posible que una aplicación reciba la tinta de usuario, además del texto reconocido, asociada a las inserciones de texto del panel de entrada. Esto permite nuevos escenarios de aplicación, como la entrada manuscrita en los registros de seguimiento de cambios y la posibilidad de que los usuarios puedan editar o ver la entrada de lápiz en la aplicación. Estas nuevas características de programación son el resultado directo de los comentarios que Microsoft ha recibido sobre el caso del desarrollador del panel de entrada y representa el primer paso hacia la integración más estrecha de las aplicaciones y el panel de entrada.

Con el fin de proporcionar este modelo de programación de panel de entrada enriquecido, el mecanismo existente para interactuar mediante programación con el panel de entrada, el objeto [**PenInputPanel**](peninputpanel-class.md) , está en desuso y se reemplaza por el nuevo objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) . Además de proporcionar nuevas características de programación, el objeto **TextInputPanel** también proporciona cerca de todas las capacidades de programación del objeto **PenInputPanel** . El objeto **TextInputPanel** se incluye en Windows Vista y en el kit para desarrolladores de software de Windows Vista. El objeto **TextInputPanel** solo es compatible con el panel de entrada de Windows Vista y no se puede usar con el panel de entrada de Windows XP Service Pack 2 o posterior. La aplicación que se escribió previamente para usar el objeto **PenInputPanel** continuará funcionando con el panel de entrada de Windows Vista; sin embargo, al escribir nuevos programadores de Tablet aplicaciones, se recomienda encarecidamente usar el nuevo objeto **TextInputPanel** en lugar del objeto **PenInputPanel** en desuso.

Cada una de las opciones de programación del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) se puede aplicar en cada campo de texto. Esto se logra asociando una instancia del objeto **TextInputPanel** mediante la propiedad [**AttachedEditWindow**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_attachededitwindow) . La propiedad se debe establecer en el identificador de ventana para el campo de texto.

> [!Note]  
> : Algunas de las propiedades y métodos que se describen a continuación se aplican cuando el panel de entrada está en el modo de interacción en contexto y no cuando el panel de entrada está en el modo de interacción flotante o acoplada. El modo de interacción en contexto es el comportamiento del panel de entrada, donde colocar el foco en un campo editable hace que el icono del panel de entrada aparezca junto al campo y al puntear en el icono del panel de entrada, se expanda el panel de entrada. Los métodos y propiedades que solo se aplican cuando el panel de entrada está en el modo de interacción en contexto contienen ' InPlace ' en el nombre de método o propiedad.

 

## <a name="control-of-input-panel-icon-and-input-panel-visibility"></a>Control del icono del panel de entrada y visibilidad del panel de entrada

El primer aspecto del panel de entrada para el que los desarrolladores de aplicaciones tienen más control en Windows Vista es su visibilidad. Con el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) es posible controlar la visibilidad del panel de entrada In-Place de tres maneras. Con una combinación de propiedades y métodos, una aplicación puede determinar si el In-Place panel de entrada muestra, cuando se muestra el panel de entrada In-Place, y si aparece primero como el icono del panel de entrada o se muestra inmediatamente expandido. Mediante la combinación de estas técnicas para controlar la visibilidad con las técnicas para controlar el posicionamiento descrito en la sección siguiente, es posible que los desarrolladores de aplicaciones creen puntos de inicio personalizados y flujos de trabajo personalizados mediante el panel de entrada de In-Place en una aplicación.

> [!Note]  
> Las propiedades y los métodos que se describen en esta sección solo se aplican cuando el panel de entrada está en el modo de interacción de In-Place.

 

En primer lugar, es posible evitar que los In-Place panel de entrada y el icono del panel de entrada aparezcan al establecer la propiedad [**InPlaceVisibleOnFocus**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplacevisibleonfocus) en **false**. Si se establece en **true** , se revierte al sistema predeterminado que aparece cuando sea posible, siempre y cuando el usuario o el Directiva de grupo no haya deshabilitado. Esta opción es útil para las aplicaciones que incluyen soluciones de entrada de texto personalizadas como alternativa al panel de entrada.

En segundo lugar, al establecer la propiedad [**DefaultInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) , un desarrollador puede especificar qué estado en contexto, tal y como se especifica en la enumeración [**InPlaceState**](/windows/win32/api/peninputpanel/ne-peninputpanel-inplacestate) , el In-Place panel de entrada aparece en cuando el foco se coloca en un campo de texto. El valor predeterminado del sistema es que el panel de entrada de In-Place aparezca en el estado de desplazamiento a menos que el panel de entrada ya esté visible en el estado expandido, en cuyo caso el panel de entrada permanece expandido. Al establecer la propiedad **DefaultInPlaceState** en **InPlaceState \_ expanded** , el In-Place panel de entrada siempre aparece expandido, en lugar de que el icono del panel de entrada aparezca primero y, a continuación, requiriendo que el usuario puntee en el icono del panel de entrada antes de que se expanda el panel de entrada. Las otras dos opciones son **InPlaceState \_ auto**, que es el comportamiento predeterminado del sistema y **InPlaceState \_ HoverTarget** , que siempre hace que aparezca el icono del panel de entrada. La capacidad de especificar que el panel de entrada de In-Place siempre aparece expandido es nuevo con el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) y no es posible mediante el objeto [**PenInputPanel**](peninputpanel-class.md) . En la ilustración siguiente se muestra el In-Place icono del panel de entrada y los Estados expandidos del panel.

![icono del panel de entrada en contexto y Estados expandidos](images/8ce866b6-9a45-499f-a3d1-95a1d34d6402.jpg)

Además de poder controlar el estado en contexto, también es posible que un desarrollador determine el estado en contexto en un momento dado mediante la obtención de la propiedad [**CurrentInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinplacestate) . El valor de **CurrentInPlaceState** es igual a [**DefaultInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) cuando el panel de entrada no está visible, excepto cuando **DefaultInPlaceState** es **InPlaceState \_ auto** en cuyo caso el **CurrentInPlaceState** se convierte en **InPlaceState \_ HoverTarget**. Los eventos de [**InPlaceVisibilityChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanging)  /  [**InPlaceVisibilityChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanged) se pueden usar para realizar un seguimiento del estado de visibilidad del panel de entrada In-Place.

Por último, un desarrollador puede hacer que el In-Place panel de entrada se oculte o se muestre con el método [**SetInPlaceVisibility**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacevisibility) . Si el desarrollador ha establecido previamente la propiedad [**DefaultInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinplacestate) , el panel de entrada aparece en el estado especificado cuando se fuerza a mostrar. Una aplicación solo se permite ocultar o mostrar el panel de entrada In-Place cuando el foco está actualmente en la ventana a la que está asociado el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) y cuando el usuario no tiene abierto el panel de entrada en otro modo de interacción, como acoplado o flotante. La capacidad de forzar el In-Place panel de entrada para ocultar o mostrar también es nueva con el objeto **TextInputPanel** y no es posible mediante el objeto [**PenInputPanel**](peninputpanel-class.md) .

Estas opciones proporcionan a los desarrolladores de aplicaciones un mayor control sobre cuándo aparece el In-Place panel de entrada y en qué estado. Al personalizar el estado local predeterminado y controlar la visibilidad local de forma independiente de los cambios de foco, un desarrollador de aplicaciones puede crear un flujo de trabajo personalizado cuando el panel de entrada responde a la configuración de la aplicación o a la entrada del usuario en una aplicación.

## <a name="absolute-positioning-of-input-panel-icon-and-input-panel"></a>Posición absoluta del icono del panel de entrada y del panel de entrada

Posiblemente, la nueva característica más atractiva que se encuentra en el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) es el posicionamiento absoluto del panel de entrada In-Place. Con esta nueva funcionalidad, un desarrollador de aplicaciones puede garantizar que el In-Place panel de entrada no se superponga a uno o varios elementos visuales clave en un diseño de aplicación. Con el objeto [**PenInputPanel**](peninputpanel-class.md) , era posible colocar el In-Place panel de entrada en relación con un campo de texto basado en un desplazamiento; sin embargo, el panel de entrada se ajustaría a sí mismo para mantener en la pantalla. Por primera vez en vista, una aplicación puede colocar el In-Place panel de entrada en una posición absoluta mediante las coordenadas de la pantalla. Además, la responsabilidad de mantener el panel de entrada en la pantalla se deja al desarrollador de la aplicación, por lo que se elimina la posibilidad de que el panel de entrada se coloque automáticamente y parezca que se cambie de posición aleatoriamente.

> [!Note]  
> Las propiedades y los métodos que se describen en esta sección solo se aplican cuando el panel de entrada está en el modo de interacción de In-Place.

 

Los dos métodos principales necesarios para colocar de forma absoluta el In-Place panel de entrada son [**SetInPlacePosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplaceposition) y [**SetInPlaceHoverTargetPosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacehovertargetposition). El primero se usa para especificar la ubicación del In-Place panel de entrada y el segundo se usa para especificar la ubicación del icono del panel de entrada para el panel de entrada In-Place. Si una aplicación decide solo establecer la ubicación del icono del panel de entrada y no la ubicación del In-Place panel de entrada, el panel de entrada In-Place aparece en la ubicación predeterminada determinada por el sistema. Del mismo modo, si una aplicación cambia la posición del panel de entrada In-Place pero no el icono del panel de entrada, el icono del panel de entrada aparece en la ubicación predeterminada. La ubicación se especifica en coordenadas de pantalla. El punto real que se está colocando es la esquina superior izquierda del icono del panel de entrada o del panel de entrada sin la combinación de corrección expandida. Cuando se expande la combinación de correcciones, el punto que se está colocando no cambia. (Consulte la figura 2 a continuación) No hay ninguna restricción en la que el panel de entrada de In-Place y el icono del panel de entrada In-Place pueden ser lugares y es responsabilidad de las aplicaciones que llaman a estos métodos para mantenerlos en la pantalla. Ambos métodos son sincrónicos, lo que significa que la posición se produce antes de que se devuelva el método. En el caso de que el panel de entrada ya esté abierto en el modo de interacción flotante o acoplada, se producirá un error al intentar colocar el In-Place panel de entrada o el icono del panel de entrada In-Place. Además, los métodos producen un error si la ventana asociada al objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) no tiene actualmente el foco.

Una llamada a [**SetInPlacePosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplaceposition) o [**SetInPlaceHoverTargetPosition**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacehovertargetposition) no hace que se muestre automáticamente el In-Place panel de entrada o el icono del panel de entrada, simplemente establece la posición de la próxima vez que se muestran. La llamada a [**SetInPlaceVisibility**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-setinplacevisibility) se puede usar para forzar que se muestren inmediatamente.

![medidas del panel de entrada en contexto](images/0c67a77a-5d2f-489f-9357-b8a168d024d3.jpg)

Al colocar el In-Place el panel de entrada que calcula si va a salir de la pantalla puede ser un poco complicado. Para facilitar este proceso, hay varias propiedades del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) que se pueden usar para simplificar este proceso. Juntas, estas propiedades y eventos se pueden usar para determinar el tamaño exacto del In-Place panel de entrada en todos sus Estados:

-   [**InPlaceBoundingRectangle**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle): esta propiedad proporciona el rectángulo delimitador del In-Place panel de entrada cuando se muestra el área de entrada más grande para el idioma de entrada actual. Si el panel de escritura o el panel de caracteres se determinan en el área de entrada más grande, se incluye el alto del botón Insertar. No incluye el alto de la combinación de correcciones. Cuando el In-Place panel de entrada crece automáticamente [](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanging),  /  se activa el par de eventos InPlaceSizeChanging [**InPlaceSizeChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanged) y el valor de esta propiedad se actualiza para incluir el área de escritura adicional o la línea de escritura.
-   [**PopUpCorrectionHeight**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_popupcorrectionheight): esta propiedad especifica el alto de la combinación de correcciones posterior a la inserción cuando se coloca sobre el panel de entrada. Para obtener el alto completo del panel de entrada de In-Place con el peine de corrección posterior a la inserción extraído, agregue el alto de [**InPlaceBoundingRectangle**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle) a **PopUpCorrectionHeight**.

Como alternativa más sencilla a establecer la posición absoluta de la In-Place el panel de entrada y el icono del panel de entrada, una aplicación solo puede especificar si el In-Place panel de entrada tiene como valor predeterminado el que aparece por encima o por debajo de un campo de entrada de texto. De este modo, es posible evitar la superposición de elementos en el diseño de la aplicación de una manera más controlada. Para ello, la aplicación establece [**PreferredInPlaceDirection**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_preferredinplacedirection) en **InPlaceDirection \_ Bottom** o **InPlaceDirection \_ Top**. La propiedad es una preferencia porque el In-Place panel de entrada invalida la preferencia establecida por la aplicación cuando sea necesario para mantener el panel de entrada en la pantalla. El valor predeterminado del sistema es colocar el In-Place panel de entrada debajo de un campo de texto cuando sea posible y, de lo contrario, colocarlo encima. Al establecer **PreferredInPlaceDirection** en **InPlaceDirection \_** , se restaura automáticamente el valor predeterminado del sistema.

Juntos, las propiedades, los métodos y los eventos del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) proporcionan a los desarrolladores el control necesario sobre el In-Place panel de entrada para poder colocar de forma inteligente el In-Place panel de entrada y el icono del panel de entrada en un diseño de aplicación, de modo que no interrumpan el flujo de diseño y, en algunos casos, pueden aparecer integrados. Este nuevo nivel de control es una gran victoria para el diseño de aplicaciones de Tablet PC.

## <a name="access-to-the-three-input-panel-areas-writing-pad-character-pad-and-keyboard"></a>Acceso a las tres áreas del panel de entrada: panel de escritura, panel de caracteres y teclado

El panel de entrada tiene tres áreas de entrada, el panel de escritura, el panel de caracteres y el teclado. Con el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) , una aplicación puede especificar el área de entrada predeterminada que se muestra al usuario cuando se abre el panel de entrada. La razón principal para que una aplicación lo haga es emparejar el área de entrada con el tipo de entrada de un campo específico. Por ejemplo, el panel de escritura es probablemente el más adecuado para rellenar un campo de comentarios, pero el teclado puede ser más conveniente para escribir un número de serie de producto que contenga números y letras. Para especificar el área de entrada predeterminada, las aplicaciones establecen la propiedad [**DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) en una de las tres áreas de entrada, tal y como se define en la enumeración [**PanelInputArea**](/windows/win32/api/peninputpanel/ne-peninputpanel-panelinputarea) . En la ilustración siguiente se muestran las tres áreas de entrada.

![escritura, carácter y panel de entrada de teclado](images/3f1e3d03-88b9-478c-b12d-00d341bc8d5c.jpg)

El área de entrada predeterminada del sistema es el panel de escritura para inglés, Francés, alemán, español, Italiano, Portugués, holandés y todos los demás idiomas de entrada latinos. En el caso de los idiomas de entrada de Asia oriental, incluidos japonés, Chino y coreano, el área de entrada predeterminada es el panel de caracteres. Sin embargo, cuando el usuario cambia el área de entrada, invalida el área de entrada predeterminada para el idioma de entrada actual y se almacena como el nuevo valor predeterminado para ese idioma de entrada. El teclado es el área de entrada predeterminada para los campos de contraseña, independientemente del idioma de entrada a menos que el usuario o la Directiva de grupo haya deshabilitado la seguridad de contraseña. En todos los casos, si se establece el área del panel de entrada predeterminado mediante programación, se invalida el valor predeterminado del sistema, a menos que el campo actual sea un campo de contraseña o el reconocedor de escritura a mano para el idioma de entrada actual no admita el área de entrada seleccionada mediante programación. Al establecer la propiedad [**DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) en InPlaceDirection se restaura **\_ automáticamente** la configuración predeterminada del sistema.

Independientemente de si el área del panel de entrada predeterminada se ha establecido mediante programación o no, el usuario tiene la opción de cambiar el área del panel de entrada actual una vez abierto el panel de entrada. Una vez que el usuario ha cambiado el área de entrada actual, la selección del usuario se conserva hasta que se cierra el panel de entrada o el usuario vuelve a cambiar la selección. Después de cerrar y volver a abrir el panel de entrada, se vuelve a mostrar el área de entrada predeterminada mediante programación.

Dado que el área del panel de entrada actual puede ser diferente que el área del panel de entrada predeterminado, una aplicación puede consultar la propiedad [**CurrentInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinputarea) para determinar qué área de entrada está visible actualmente. Si el panel de entrada no está visible actualmente, el área de entrada actual es igual al área de entrada predeterminada. La propiedad **CurrentInputArea** nunca es igual a **PanelInputArea \_ auto**. Si [**DefaultInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_defaultinputarea) es igual a **PanelInputArea \_ auto**, el **CurrentInputArea** es igual al último área de entrada que se muestra o el valor predeterminado del sistema para el idioma de entrada actual si nunca se ha mostrado el panel de entrada.

La principal diferencia entre la compatibilidad con el área de entrada que se encuentra en el objeto [**PenInputPanel**](peninputpanel-class.md) y la del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) es el hecho de que la aplicación tiene ahora la opción de establecer el área de entrada predeterminada en el panel de caracteres, además del teclado y el panel de escritura.

Con las propiedades anteriores, una aplicación puede controlar el área de entrada del panel de entrada que se muestra en distintos campos y optimizar la experiencia de entrada de texto del usuario. Además, la aplicación puede mantener el conocimiento del área de entrada actual y tomar decisiones condicionales en función del área de entrada más adecuada para la tarea del usuario actual.

## <a name="detailed-information-about-input-panels-interaction-mode"></a>Información detallada sobre el modo de interacción del panel de entrada

Además de poder detectar el área de entrada actual del panel de entrada, también es posible detectar el modo de interacción actual: en contexto, acoplado o flotante. Puede ser importante que la aplicación conozca el modo de interacción actual para entender cómo interactúa el usuario con la aplicación o porque algunos métodos y propiedades del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) solo se aplican al modo de interacción In-Place. Por ejemplo, en la aplicación, retransmite los elementos de la interfaz de usuario existentes y coloca el In-Place panel de entrada sobre un área en blanco en sus interfaces de usuario debe comprobar para asegurarse de que el modo de interacción actual está en contexto antes de realizar los ajustes.

![modos de panel de entrada acoplado, flotante y en curso](images/98c8e96b-99b2-477a-9843-33b1fae7e75b.jpg)

La propiedad [**CurrentInteractionMode**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinteractionmode) del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) almacena el modo de interacción actual elegido por el usuario. Los modos posibles se definen mediante la enumeración [**InteractionMode**](/windows/win32/api/peninputpanel/ne-peninputpanel-interactionmode) como:

**InteractionMode \_ InPlace**: en el panel de entrada In-Place modo de interacción aparece al lado del campo de entrada de texto que tiene actualmente el foco. De forma predeterminada, el icono del panel de entrada In-Place aparece cuando se coloca un punto de inserción en un campo de entrada de texto. Al puntear en el icono del panel de entrada, se expande el panel de entrada. El panel de entrada de In-Place solo está visible cuando un punto de inserción se encuentra en un campo editable.

InteractionMode \_ float: el modo de interacción flotante es similar al modo de interacción de InPlace, salvo que no está asociado a un punto de inserción. Para abrir el panel de entrada flotante, puntee en la ficha panel de entrada, que aparece de forma predeterminada en el borde izquierdo de la pantalla. El panel de entrada flotante y la ficha panel de entrada se pueden arrastrar y colocar por el usuario. En la posición del modo flotante, el control del panel de entrada se deja por completo en el usuario.

InteractionMode \_ DockedTop: en el panel de entrada Docked-Top modo de interacción aparece en la parte superior de la pantalla y se cambia el tamaño del escritorio activo, por lo que el panel de entrada no se superpone con ninguna otra ventana o elemento de la interfaz de usuario. En el panel de entrada en modo acoplado no se pueden arrastrar ni mover.

InteractionMode \_ DockedBottom: el modo de interacción Docked-Bottom es el mismo que el modo Docked-Top, excepto el panel de entrada aparece en la parte inferior de la pantalla.

Cuando el panel de entrada no está visible, el modo de interacción actual está en contexto.

La publicación del modelo de interacción actual es otra forma en que el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) proporciona más información sobre el estado del panel de entrada de que está disponible en cualquier versión anterior.

## <a name="detailed-information-about-input-panels-correction-mode"></a>Información detallada sobre el modo de corrección del panel de entrada

El aspecto final del panel de entrada que contiene el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) proporciona información detallada sobre el modo de corrección y su control. Conocer el modo de corrección ayuda a las aplicaciones a determinar el tamaño actual del panel de entrada. Controlar cómo la corrección posterior a la inserción se expande en una aplicación es una manera de personalizar la experiencia de corrección en una aplicación.

Hay dos modos básicos en los que puede aparecer la combinación de correcciones: la inserción previa y la posterior a la inserción. La combinación de correcciones previas a la inserción se usa para corregir el texto antes de insertarlo en una aplicación. Para activarla, puntee en el texto pendiente que aparece debajo de la línea base en el panel de escritura como las tintas del usuario. La combinación de correcciones posterior a la inserción se usa para corregir texto después de que se haya insertado en una aplicación. Se activa colocando el punto de inserción en o seleccionando texto que se insertó previamente. Además de los dos modos básicos, hay varias variaciones sobre cómo puede aparecer la combinación de correcciones posteriores a la inserción. En primer lugar, puede aparecer por encima o por debajo del panel de entrada y el segundo puede aparecer contraído o expandido. En el estado contraído, la combinación de corrección posterior a la inserción solo muestra una lista de alternativas. En el estado expandido, incluye tanto las alternativas como un área para volver a escribir la palabra.

![corrección del panel de entrada COMB, pre y post Insert](images/6cc627de-fc15-4721-9f6a-7e1517d9e650.jpg)

La propiedad [**CurrentCorrectionMode**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentcorrectionmode) permite que una aplicación determine la configuración actual de la combinación de correcciones. Los valores posibles de esta propiedad, tal y como se definen en las enumeraciones de [**CorrectionMode**](/windows/win32/api/peninputpanel/ne-peninputpanel-correctionmode) son: **NotVisible**, **preinsert**, **PostInsertionCollapsed** y **PostInsertionExpanded**. Cuando no hay ningún panel de entrada o peine de corrección visible, **CurrentCorrectionMode** es **NotVisible**.

De forma predeterminada, el sistema muestra el barrido de corrección posterior a la inserción expandido cuando el selecciona texto corregible y lo muestra contraído cuando el punto de inserción se coloca en texto corregible. Una aplicación puede especificar dónde se debe mostrar siempre el peine de corrección posterior a la inserción si se establece la propiedad [**ExpandPostInsertionCorrection**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_expandpostinsertioncorrection) en **true**. El valor predeterminado del sistema es **false**. Cuando la propiedad **ExpandPostInsertionCorrection** se usa junto con la interfaz [**IHandWrittenTextInsertion**](/windows/desktop/api/peninputpanel/nn-peninputpanel-ihandwrittentextinsertion) , un desarrollador de aplicaciones puede Agregar de forma económica compatibilidad de corrección a las aplicaciones que no la recibirán automáticamente.

El seguimiento y el control del estado de corrección del panel de entrada es una de las numerosas características nuevas del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) que hacen posible una mayor integración con el panel de entrada y la aplicación.

## <a name="event-notification-before-and-after-the-event-occurs"></a>Notificación de eventos antes y después de que se produzca el evento

Otro aspecto de la programación del panel de entrada que se ha mejorado considerablemente en el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) es el modelo de evento. Ahora, en lugar de generar solo eventos que señalan un cambio en el estado del panel de entrada después de que se haya producido el cambio, se envían eventos independientes antes y después de que se produzca el cambio. Los eventos que señalan el inicio de un evento contienen verbos del tiempo en el pasado, como ' cambiar ' o ' insertar ', mientras que los eventos que señalan la finalización de un evento contienen verbos pasados en el pasado, como ' Changed ' o ' inserted '.

Este modelo de eventos permite que una aplicación reaccione ante un cambio antes o cuando se produce. El panel de entrada no podrá continuar con un cambio o reanudarse después del cambio hasta que se hayan completado los controladores de eventos para todos los eventos. Estos eventos son sincrónicos y, de este modo, una aplicación puede retrasar un cambio hasta que ha terminado de reaccionar. Sin embargo, el tiempo en que un controlador de eventos se ejecuta en el panel de entrada deja de estar accesible para el usuario y puede aparecer bloqueado, por lo que es importante que el controlador de eventos funcione correctamente. Sin embargo, no es posible que una aplicación impida o cancele un evento. Todos los parámetros de evento son de solo lectura. A continuación se muestra una descripción de los seis pares de eventos del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) :

-   [**InPlaceStateChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacestatechanging)  /  [**InPlaceStateChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacestatechanged): notificación de que el estado en contexto está a punto de o ha cambiado de Hover a expandido o viceversa. Los parámetros son el estado en contexto nuevo y antiguo. Coincidencias con un cambio en el valor de la propiedad [**CurrentInPlaceState**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinplacestate) .
-   [**InPlaceSizeChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanging)  /  [**InPlaceSizeChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacesizechanged): se indica cuando el tamaño del panel de entrada In-Place está a punto de cambiar o ha cambiado debido a un cambio de tamaño del usuario, el crecimiento automático o un cambio de área de entrada. Los parámetros son el rectángulo delimitador nuevo y antiguo. Coincidencias con un cambio en el valor de la propiedad [**InPlaceBoundingRectangle**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_inplaceboundingrectangle) .
-   [**InputAreaChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inputareachanging)  /  [**InputAreaChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inputareachanged): informa cuando el área de entrada del panel de entrada está a punto de cambiar o ha cambiado de a la otra de las tres áreas de entrada posibles: panel de escritura, panel de caracteres o teclado. Los parámetros son el área de entrada nueva y la antigua. Coincide con un cambio en el valor de la propiedad [**CurrentInputArea**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentinputarea)
-   [**CorrectionModeChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-correctionmodechanging)  /  [**CorrectionModeChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-correctionmodechanged): notificación de que el modo de corrección está a punto de cambiar o ha cambiado. Los posibles modos de corrección son: no visible, inserción previa, contraído posterior a la inserción y expandido. Los parámetros son el modo de corrección nuevo y el antiguo. Coincide con un cambio en el valor de la propiedad [**CurrentCorrectionMode**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpanel-get_currentcorrectionmode) .
-   [**InPlaceVisibilityChanging**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanging)  /  [**InPlaceVisibilityChanged**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-inplacevisibilitychanged): indica si la visibilidad del panel de entrada In-Place está a punto de cambiar o ha cambiado. Los parámetros son la visibilidad nueva y la antigua. Una nueva visibilidad de **false** significa que el In-Place panel de entrada no está abierto, pero no impide que el panel de entrada esté visible en el modo de interacción flotante o acoplada.
-   [**TextInserting**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserting)  /  [**TextInserted**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserted): indica cuándo se va a insertar o insertar texto del panel de entrada. El parámetro es una matriz de objetos [**InkDisp**](inkdisp-class.md) , cada uno de los cuales contiene una línea de la tinta y el texto que componen la inserción. Más información sobre este evento en la sección siguiente.

Estos eventos proporcionan a las aplicaciones información esencial sobre los cambios en el panel de entrada y les permiten reaccionar en consecuencia. De nuevo, el cambio en el modelo de eventos del panel de entrada representa un paso para una mejor interacción entre las aplicaciones y el panel de entrada.

## <a name="support-for-collecting-the-ink-and-text-entered-in-input-panel"></a>Compatibilidad para recopilar la tinta y el texto especificados en el panel de entrada

Por último, pero no menos importante, una nueva característica muy eficaz del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) es la capacidad de obtener el objeto de entrada manuscrita para el texto escrito a través del panel de entrada fuera del panel de entrada en el momento en que se inserta el texto en una aplicación. Se trata de una característica solicitada a menudo para el seguimiento de cambios y el mantenimiento de los registros. También permite que las aplicaciones usen la entrada manuscrita en su interfaz de usuario como un elemento estático o con una superficie de entrada manuscrita personalizada.

Para recibir el objeto [**InkDisp**](inkdisp-class.md) para el texto escrito a través del panel de entrada, una aplicación debe registrarse para recibir los eventos [**TextInserting**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserting) o [**TextInserted**](/windows/desktop/api/peninputpanel/nf-peninputpanel-itextinputpaneleventsink-textinserted) generados por el objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) . El evento **TextInserting** se activa inmediatamente antes de que se inserte texto del panel de entrada en una aplicación y el texto no se inserta hasta que se completan todos los controladores de eventos. El evento **TextInserted** se activa inmediatamente después de que se inserte la prueba. El único parámetro para el evento **TextInserting** y **TextInserted** es una matriz de objetos **InkDisp** que incluye un objeto **InkDisp** para cada línea de texto insertada en el panel de entrada. Nota: el panel de entrada está inactivo mientras los controladores de eventos se están ejecutando y puede parecer que no responde al usuario, por lo que es importante hacer que estos controladores de eventos sean ligeros y asegurarse de que se ejecutan rápidamente. Además, una aplicación no debe crear un controlador para este evento a menos que tenga un uso específico de la información, ya que hay un costo de rendimiento asociado al hacerlo. El panel de entrada solo calcula las referencias de los datos de tinta si hay una aplicación que solicita los datos; de lo contrario, el panel de entrada puede omitir esta operación costosa. Los parámetros de los eventos **TextInserting** y **TextInserted** son de solo lectura, lo que significa que no es posible que las aplicaciones cambien el texto insertado antes de que se inserten en la aplicación.

Las posibilidades de que las aplicaciones puedan hacer con esta nueva funcionalidad son generales y no es más fácil de usar. Permitir que las aplicaciones recopilen texto y entrada de lápiz reconocidos a través del panel de entrada es simplemente otra manera en que se mejora la historia del desarrollador del panel de entrada en Windows Vista.

## <a name="conclusion"></a>Conclusión

En general, el caso de programación del panel de entrada de Tablet PC se ha mejorado enormemente con la introducción del objeto [**TextInputPanel**](/windows/desktop/api/peninputpanel/nn-peninputpanel-itextinputpanel) en Windows Vista. Con el objeto **TextInputPanel** , los desarrolladores de aplicaciones tienen un mayor control y más información sobre el panel de entrada de estado en la versión anterior. Como resultado, se recomienda encarecidamente que los desarrolladores de aplicaciones que creen nuevas aplicaciones de Tablet PC o actualicen aplicaciones existentes utilicen el objeto **TextInputPanel** en lugar del objeto [**PenInputPanel**](peninputpanel-class.md) en desuso. Además, la compatibilidad con nuevas características, como el posicionamiento absoluto del panel de entrada y el icono del panel de entrada, y la capacidad de la aplicación para recibir el texto del reconocedor y la entrada manuscrita introducida a través del panel de entrada permiten la nueva funcionalidad y los escenarios de la aplicación. La inclusión de estas características y otras están en respuesta directa a los comentarios de los desarrolladores y marca los primeros pasos para la integración completa del panel de entrada con las aplicaciones de Tablet PC. En última instancia, la expansión de la funcionalidad de la aplicación de Tablet PC es una gran victoria tanto para los desarrolladores de aplicaciones como para la plataforma de Tablet PC.

 

 



