---
description: Trabajar con roles de dispositivo
ms.assetid: 3b2cb1fe-0f11-4509-a6f3-513d2755cd29
title: Trabajar con roles de dispositivo
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c21ea667a6974634c1f9f0657dd02c13a621641c
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103998067"
---
# <a name="working-with-device-roles"></a><span data-ttu-id="3b2f2-103">Trabajar con roles de dispositivo</span><span class="sxs-lookup"><span data-stu-id="3b2f2-103">Working with Device Roles</span></span>

<span data-ttu-id="3b2f2-104">La [API de MMDevice](mmdevice-api.md) admite roles de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-104">The [MMDevice API](mmdevice-api.md) supports device roles.</span></span> <span data-ttu-id="3b2f2-105">La enumeración [**ERole**](/windows/win32/api/mmdeviceapi/ne-mmdeviceapi-erole) define los roles de dispositivo admitidos por la API de MMDevice.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-105">The [**ERole**](/windows/win32/api/mmdeviceapi/ne-mmdeviceapi-erole) enumeration defines the device roles that are supported by the MMDevice API.</span></span>

> [!Note]  
> <span data-ttu-id="3b2f2-106">Aunque la [API de MMDevice](mmdevice-api.md) admite roles de dispositivo, la interfaz de usuario de Windows Vista no implementa la compatibilidad con esta característica.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-106">Although the [MMDevice API](mmdevice-api.md) supports device roles, the user interface in Windows Vista does not implement support for this feature.</span></span>

 

<span data-ttu-id="3b2f2-107">Una aplicación puede usar la API de MMDevice para admitir [roles de dispositivo](device-roles.md) a través de los métodos [**IMMDeviceEnumerator:: GetDefaultAudioEndpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint) y [**IMMNotificationClient:: OnDefaultDeviceChanged**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immnotificationclient-ondefaultdevicechanged) .</span><span class="sxs-lookup"><span data-stu-id="3b2f2-107">An application can use MMDevice API to support [device roles](device-roles.md) through the [**IMMDeviceEnumerator::GetDefaultAudioEndpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint) and [**IMMNotificationClient::OnDefaultDeviceChanged**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immnotificationclient-ondefaultdevicechanged) methods.</span></span> <span data-ttu-id="3b2f2-108">Sin embargo, la interfaz de usuario de Windows Vista no admite la asignación de roles individuales a distintos dispositivos.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-108">However, the user interface in Windows Vista does not support assignment of individual roles to different devices.</span></span> <span data-ttu-id="3b2f2-109">En Windows Vista, la interfaz de usuario permite al usuario seleccionar un dispositivo de audio predeterminado para su representación y un dispositivo de audio predeterminado para la captura.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-109">In Windows Vista, the user interface enables the user to select a default audio device for rendering and a default audio device for capture.</span></span> <span data-ttu-id="3b2f2-110">Cuando el usuario selecciona un dispositivo de representación o captura predeterminado, el sistema asigna los tres roles de dispositivo (eConsole, eMultimedia y eCommunications) a ese dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-110">When the user selects a default rendering or capture device, the system assigns all three device roles (eConsole, eMultimedia, and eCommunications) to that device.</span></span> <span data-ttu-id="3b2f2-111">Las aplicaciones no pueden cambiar los roles asignados a los dispositivos de punto de conexión de audio.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-111">Applications cannot change the roles that are assigned to audio endpoint devices.</span></span> <span data-ttu-id="3b2f2-112">El sistema operativo solo permite al usuario asignar roles de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-112">The operating system allows only the user to assign device roles.</span></span>

<span data-ttu-id="3b2f2-113">Un cliente puede registrarse para recibir una notificación de la API de MMDevice cada vez que se produce un cambio en la asignación de roles a los dispositivos de punto de conexión de audio.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-113">A client can register itself to receive a notification from the MMDevice API each time a change occurs in the assignment of roles to audio endpoint devices.</span></span> <span data-ttu-id="3b2f2-114">Cuando un rol se desplaza de un dispositivo a otro, el cliente puede elegir si desea continuar jugando (o grabando) sus flujos a través del mismo dispositivo o cambiar los flujos a otro dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-114">When a role shifts from one device to another, the client can choose whether to continue playing (or recording) its streams through the same device or to switch the streams to another device.</span></span> <span data-ttu-id="3b2f2-115">De forma predeterminada, las secuencias continúan reproduciéndose (o grabadas) a través del dispositivo original.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-115">By default, the streams continue to play (or be recorded) through the original device.</span></span> <span data-ttu-id="3b2f2-116">En Windows Vista, para cambiar los flujos a otro dispositivo, el cliente debe eliminar las secuencias en el dispositivo original y crear secuencias de reemplazo en el nuevo dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-116">In Windows Vista, to switch the streams to another device, the client must delete the streams on the original device and create replacement streams on the new device.</span></span> <span data-ttu-id="3b2f2-117">En Windows 7, el cliente puede escuchar nuevas notificaciones para implementar un modificador sin problemas sin interrumpir la reproducción o la sesión de captura.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-117">In Windows 7, the client can listen for new notifications to implement a seamless switch without interrupting the playback or the capture session.</span></span> <span data-ttu-id="3b2f2-118">Para obtener más información, vea [enrutamiento de flujo](stream-routing.md).</span><span class="sxs-lookup"><span data-stu-id="3b2f2-118">For more information, see [Stream Routing](stream-routing.md).</span></span>

<span data-ttu-id="3b2f2-119">Si tiene previsto usar Windows Vista para probar la aplicación, puede configurar un entorno de prueba para comprobar que la aplicación se comporta según lo esperado cuando el usuario puede asignar roles de dispositivo individuales a distintos dispositivos.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-119">If you plan to use Windows Vista to test your application, you can set up a test environment to verify that the application behaves as expected when the user can assign individual device roles to different devices.</span></span> <span data-ttu-id="3b2f2-120">Para más información, envíe un correo electrónico a uaa@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-120">For more information, send email to uaa@microsoft.com.</span></span>

## <a name="communication-devices"></a><span data-ttu-id="3b2f2-121">Dispositivos de comunicación</span><span class="sxs-lookup"><span data-stu-id="3b2f2-121">Communication Devices</span></span>

<span data-ttu-id="3b2f2-122">La interfaz de usuario de Windows 7 tiene la capacidad de agregar *dispositivos de comunicaciones*.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-122">The Windows 7 user interface has the capability of adding *communications devices*.</span></span> <span data-ttu-id="3b2f2-123">El panel de control de **sonido** permite al usuario seleccionar un dispositivo de comunicación predeterminado para representar y capturar el flujo de audio.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-123">The **Sound** control panel enables the user to select a default communication device each for rendering and capturing audio stream.</span></span> <span data-ttu-id="3b2f2-124">De forma predeterminada, cuando se conecta un nuevo dispositivo al equipo, el sistema operativo realiza la detección automática de roles y determina si el dispositivo es adecuado para el rol eCommunication.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-124">By default, when a new device is connected to the computer, the operating system performs automatic role detecting and determines whether the device is suitable for the eCommunication role.</span></span> <span data-ttu-id="3b2f2-125">Al dirigirse a los dispositivos de comunicación, puede desarrollar aplicaciones que usen las API de audio básicas para implementar soluciones de comunicación de teléfono móvil.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-125">By targeting communication devices, you can develop applications that use Core Audio APIs to implement PC-phone communication solutions.</span></span> <span data-ttu-id="3b2f2-126">Por ejemplo, una aplicación de VoIP podría asignar sus flujos de entrada y salida de voz a los dispositivos de punto de conexión de captura y representación predeterminados con el rol eCommunications.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-126">For example, a VoIP application might assign its voice input and output streams to the default capture and rendering endpoint devices with the eCommunications role.</span></span> <span data-ttu-id="3b2f2-127">Al igual que cualquier otro flujo, una aplicación de comunicación debe obtener una referencia al punto de conexión del dispositivo de comunicación llamando a [**IMMDeviceEnumerator:: GetDefaultAudioEndpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint).</span><span class="sxs-lookup"><span data-stu-id="3b2f2-127">Like any other stream, a communication application must get a reference to the communication device's endpoint by calling [**IMMDeviceEnumerator::GetDefaultAudioEndpoint**](/windows/desktop/api/Mmdeviceapi/nf-mmdeviceapi-immdeviceenumerator-getdefaultaudioendpoint).</span></span> <span data-ttu-id="3b2f2-128">En esta llamada, la aplicación debe especificar **eCommunications** en el parámetro *role* .</span><span class="sxs-lookup"><span data-stu-id="3b2f2-128">In this call, the application must specify **eCommunications** in the *Role* parameter.</span></span> <span data-ttu-id="3b2f2-129">Las operaciones de Stream WASAPI en una secuencia, abierta en un dispositivo de comunicación, son similares a cualquier otra secuencia de audio.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-129">The WASAPI stream operations on a stream, opened on a communication device, are similar to any other audio stream.</span></span> <span data-ttu-id="3b2f2-130">La aplicación de comunicación puede mejorar la experiencia del usuario mediante la implementación de comportamientos como la perdedoncia mediante el control de notificaciones desde el punto de conexión del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-130">The communication application can enhance user experience by implementing behaviors such as ducking by handling notifications from the device endpoint.</span></span> <span data-ttu-id="3b2f2-131">Para obtener más información, vea [uso de un dispositivo de comunicación](using-the-communication-device.md).</span><span class="sxs-lookup"><span data-stu-id="3b2f2-131">For more information, see [Using a Communication Device](using-the-communication-device.md).</span></span>

## <a name="automatic-device-role-detection"></a><span data-ttu-id="3b2f2-132">Detección automática de roles de dispositivo</span><span class="sxs-lookup"><span data-stu-id="3b2f2-132">Automatic Device Role Detection</span></span>

<span data-ttu-id="3b2f2-133">Considere un escenario en el que un equipo tiene un dispositivo de representación predeterminado, los altavoces y un dispositivo de captura predeterminado, un micrófono.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-133">Consider a scenario in which a computer has a default rendering device, the speakers, and a default capture device, a microphone.</span></span> <span data-ttu-id="3b2f2-134">El usuario conecta un auricular USB al equipo.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-134">The user connects a USB headset to the computer.</span></span> <span data-ttu-id="3b2f2-135">Una vez instalados los controladores adecuados, el sistema operativo intenta detectar un rol para asignarlo al nuevo dispositivo de audio.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-135">After the appropriate drivers are installed, the operating system attempts to detect a role to assign for the new audio device.</span></span>

<span data-ttu-id="3b2f2-136">En Windows 7, la característica de detección de roles de dispositivo se ha mejorado significativamente para determinar los roles adecuados para los dispositivos de audio.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-136">In Windows 7, the device role detection feature has been improved significantly to determine the appropriate roles suited for audio devices.</span></span> <span data-ttu-id="3b2f2-137">Todos los dispositivos de audio contienen un conjunto de opciones de configuración que se rellenan con el OEM del dispositivo, que ayudan al sistema a decidir cómo usar el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-137">All audio devices contain a set of configuration settings populated by the device OEM, which help the system decide how to use the device.</span></span> <span data-ttu-id="3b2f2-138">Esta configuración incluye información como la ubicación física del conector de audio, el tipo de dispositivo, el subtipo de conector y las capacidades de detección para que el sistema pueda determinar si el dispositivo está conectado.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-138">These settings include information such as the physical location of the audio jack the device type, the jack subtype, and detection capabilities so that the system can determine whether the device is plugged in.</span></span> <span data-ttu-id="3b2f2-139">Al recuperar estos valores del dispositivo, el sistema operativo determina el rol que se va a asignar al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-139">By retrieving these values from the device, the operating system determines the role to assign to the device.</span></span> <span data-ttu-id="3b2f2-140">En este escenario, el sistema ha consultado el dispositivo USB con auriculares, ha realizado la detección automática de roles y ha decidido que el dispositivo es más adecuado para ser un dispositivo de comunicación.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-140">In this scenario, the system has queried the USB headset device, performed automatic role detection, and decided that the device is best suited to be a communication device.</span></span>

<span data-ttu-id="3b2f2-141">Una aplicación también puede obtener información de los conectores mediante las API de audio principales.</span><span class="sxs-lookup"><span data-stu-id="3b2f2-141">An application can also get jack information by using the Core Audio APIs.</span></span> <span data-ttu-id="3b2f2-142">Para obtener más información, vea [**IKsJackDescription**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription) y [**IKsJackDescription2**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription2).</span><span class="sxs-lookup"><span data-stu-id="3b2f2-142">For more information, see [**IKsJackDescription**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription) and [**IKsJackDescription2**](/windows/desktop/api/Devicetopology/nn-devicetopology-iksjackdescription2).</span></span>

## <a name="related-topics"></a><span data-ttu-id="3b2f2-143">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="3b2f2-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="3b2f2-144">Roles de dispositivo</span><span class="sxs-lookup"><span data-stu-id="3b2f2-144">Device Roles</span></span>](device-roles.md)
</dt> </dl>

 

 



