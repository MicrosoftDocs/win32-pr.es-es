---
title: API de recursos en mosaico
description: Las API descritas en esta sección funcionan con los recursos en mosaico y el grupo de mosaicos.
ms.assetid: 02DCF9BA-F9EA-4176-AD6F-AA620CE968BA
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8a0d97f5272f4f96db56e6e89b871951de035105
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "104418424"
---
# <a name="tiled-resource-apis"></a><span data-ttu-id="2fcd8-103">API de recursos en mosaico</span><span class="sxs-lookup"><span data-stu-id="2fcd8-103">Tiled Resource APIs</span></span>

<span data-ttu-id="2fcd8-104">Las API descritas en esta sección funcionan con los recursos en mosaico y el grupo de mosaicos.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-104">The APIs described in this section work with tiled resources and tile pool.</span></span>

-   [<span data-ttu-id="2fcd8-105">Asignar iconos de un grupo de mosaicos a un recurso</span><span class="sxs-lookup"><span data-stu-id="2fcd8-105">Assigning tiles from a tile pool to a resource</span></span>](#assigning-tiles-from-a-tile-pool-to-a-resource)
-   [<span data-ttu-id="2fcd8-106">Consultar el mosaico de recursos y el soporte técnico</span><span class="sxs-lookup"><span data-stu-id="2fcd8-106">Querying resource tiling and support</span></span>](#querying-resource-tiling-and-support)
-   [<span data-ttu-id="2fcd8-107">Copiar datos en mosaico</span><span class="sxs-lookup"><span data-stu-id="2fcd8-107">Copying tiled data</span></span>](#copying-tiled-data)
-   [<span data-ttu-id="2fcd8-108">Cambiar el tamaño del grupo de mosaicos</span><span class="sxs-lookup"><span data-stu-id="2fcd8-108">Resizing tile pool</span></span>](#resizing-tile-pool)
-   [<span data-ttu-id="2fcd8-109">Barrera de recursos en mosaico</span><span class="sxs-lookup"><span data-stu-id="2fcd8-109">Tiled resource barrier</span></span>](#tiled-resource-barrier)
-   [<span data-ttu-id="2fcd8-110">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="2fcd8-110">Related topics</span></span>](#related-topics)

## <a name="assigning-tiles-from-a-tile-pool-to-a-resource"></a><span data-ttu-id="2fcd8-111">Asignar iconos de un grupo de mosaicos a un recurso</span><span class="sxs-lookup"><span data-stu-id="2fcd8-111">Assigning tiles from a tile pool to a resource</span></span>

<span data-ttu-id="2fcd8-112">Las API [**ID3D11DeviceContext2:: UpdateTileMappings**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetilemappings) y [**ID3D11DeviceContext2:: CopyTileMappings**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytilemappings) manipulan y consultan asignaciones de iconos.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-112">The [**ID3D11DeviceContext2::UpdateTileMappings**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetilemappings) and [**ID3D11DeviceContext2::CopyTileMappings**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytilemappings) APIs manipulate and query tile mappings.</span></span> <span data-ttu-id="2fcd8-113">Las llamadas de actualización solo afectan a los iconos identificados en la llamada y otros se quedan como se definieron anteriormente.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-113">Update calls only affect the tiles identified in the call, and others are left as defined previously.</span></span>

<span data-ttu-id="2fcd8-114">Cualquier mosaico determinado de un grupo de mosaicos se puede asignar a varias ubicaciones de un recurso e incluso a varios recursos.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-114">Any given tile from a tile pool can be mapped to multiple locations in a resource and even multiple resources.</span></span> <span data-ttu-id="2fcd8-115">Esta asignación incluye mosaicos en un recurso que tienen un diseño elegido por la implementación ([empaquetado de mipmap](mipmap-packing.md)) en el que varios mapas de bits se empaquetan juntos en un solo mosaico.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-115">This mapping includes tiles in a resource that have an implementation-chosen layout ([Mipmap packing](mipmap-packing.md)) where multiple mipmaps are packed together into a single tile.</span></span> <span data-ttu-id="2fcd8-116">La captura es que, si los datos se escriben en el icono mediante una asignación, pero se leen a través de una asignación configurada de forma diferente, los resultados son indefinidos.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-116">The catch is that if data is written to the tile via one mapping, but read via a differently configured mapping, the results are undefined.</span></span> <span data-ttu-id="2fcd8-117">Sin embargo, el uso meticuloso de esta flexibilidad puede seguir siendo útil para una aplicación, como el uso compartido de un icono entre recursos que no se usarán simultáneamente, donde el contenido del icono siempre se inicializa a través de la misma asignación de recursos, ya que se leerán posteriormente.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-117">Careful use of this flexibility can still be useful for an application though, like sharing a tile between resources that will not be used simultaneously, where the contents of the tile are always initialized through the same resource mapping as they will be subsequently read from.</span></span> <span data-ttu-id="2fcd8-118">Del mismo modo, un icono asignado para contener los mapas de bits empaquetados de varios recursos diferentes con las mismas dimensiones de superficie funcionará correctamente: los datos aparecerán de la misma forma en ambas asignaciones.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-118">Similarly, a tile mapped to hold the packed mipmaps of multiple different resources with the same surface dimensions will work fine - the data will appear the same in both mappings.</span></span>

<span data-ttu-id="2fcd8-119">Los cambios en las asignaciones de mosaicos de un recurso se pueden realizar en cualquier momento en un contexto inmediato o diferido.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-119">Changes to tile assignments for a resource can be made at any time in an immediate or deferred context.</span></span>

## <a name="querying-resource-tiling-and-support"></a><span data-ttu-id="2fcd8-120">Consultar el mosaico de recursos y el soporte técnico</span><span class="sxs-lookup"><span data-stu-id="2fcd8-120">Querying resource tiling and support</span></span>

<span data-ttu-id="2fcd8-121">Para consultar el mosaico de recursos, use [**ID3D11Device2:: GetResourceTiling**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11device2-getresourcetiling).</span><span class="sxs-lookup"><span data-stu-id="2fcd8-121">To query resource tiling, use [**ID3D11Device2::GetResourceTiling**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11device2-getresourcetiling).</span></span>

<span data-ttu-id="2fcd8-122">Para la compatibilidad con otros mosaicos de recursos, use [**ID3D11Device2:: CheckMultisampleQualityLevels1**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11device2-checkmultisamplequalitylevels1).</span><span class="sxs-lookup"><span data-stu-id="2fcd8-122">For other resource tiling support, use [**ID3D11Device2::CheckMultisampleQualityLevels1**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11device2-checkmultisamplequalitylevels1).</span></span>

## <a name="copying-tiled-data"></a><span data-ttu-id="2fcd8-123">Copiar datos en mosaico</span><span class="sxs-lookup"><span data-stu-id="2fcd8-123">Copying tiled data</span></span>

<span data-ttu-id="2fcd8-124">Cualquier método de Direct3D para mover los datos en torno al trabajo con recursos en mosaico es como si no estuvieran en mosaico, con la excepción de que las escrituras en áreas sin asignar se quitan y las lecturas de áreas sin asignar producen 0.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-124">Any methods in Direct3D for moving data around work with tiled resources just as if they are not tiled, except that writes to unmapped areas are dropped and reads from unmapped areas produce 0.</span></span> <span data-ttu-id="2fcd8-125">Si una operación de copia implica la escritura en la misma ubicación de memoria varias veces, ya que se asignan varias ubicaciones en el recurso de destino a la misma memoria de mosaico, las escrituras resultantes en mosaicos multiasignados son no deterministas y no repetibles.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-125">If a copy operation involves writing to the same memory location multiple times because multiple locations in the destination resource are mapped to the same tile memory, the resulting writes to multi-mapped tiles are non-deterministic and non-repeatable.</span></span> <span data-ttu-id="2fcd8-126">Es decir, los accesos se producen en cualquier orden en el que se produzca el hardware para ejecutar la copia.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-126">That is, accesses happen in whatever order the hardware happens to execute the copy.</span></span>

<span data-ttu-id="2fcd8-127">Direct3D 11,2 presenta métodos para estas otras maneras de copiar:</span><span class="sxs-lookup"><span data-stu-id="2fcd8-127">Direct3D 11.2 introduces methods for these additional ways to copy:</span></span>

-   <span data-ttu-id="2fcd8-128">Copiar entre mosaicos en un recurso en mosaico (con granularidad de mosaico de 64 KB) y (hacia/desde) un búfer en memoria de la unidad de procesamiento de gráficos (GPU) (o recurso de almacenamiento provisional)- [ **ID3D11DeviceContext2:: CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles)</span><span class="sxs-lookup"><span data-stu-id="2fcd8-128">Copy between tiles in a tiled resource (at 64KB tile granularity) and (to/from) a buffer in graphics processing unit (GPU) memory (or staging resource) - [**ID3D11DeviceContext2::CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles)</span></span>
-   <span data-ttu-id="2fcd8-129">Copia de la memoria proporcionada por la aplicación en mosaicos en un recurso en mosaico: [ **ID3D11DeviceContext2:: UpdateTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetiles)</span><span class="sxs-lookup"><span data-stu-id="2fcd8-129">Copy from application-provided memory to tiles in a tiled resource - [**ID3D11DeviceContext2::UpdateTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetiles)</span></span>

<span data-ttu-id="2fcd8-130">Estos métodos swizzle/deswizzle según sea necesario y permiten que una \_ \_ copia \_ en mosaico de D3D11 no \_ sobrescriba la marca cuando el autor de la llamada promete que el trabajo de GPU no hace referencia a la memoria de destino en el vuelo.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-130">These methods swizzle/deswizzle as needed, and allow a D3D11\_TILE\_COPY\_NO\_OVERWRITE flag when the caller promises the destination memory is not referenced by GPU work that is in flight.</span></span>

<span data-ttu-id="2fcd8-131">Los mosaicos implicados en la copia no pueden incluir mosaicos que contengan mapas MIP empaquetados o que tengan resultados sin definir.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-131">The tiles involved in the copy can't include tiles that contain packed mipmaps or that have results that are undefined.</span></span> <span data-ttu-id="2fcd8-132">Para transferir datos hacia y desde los mapas de hardware a un mosaico, debe usar las API de copia/actualización estándar (no específicas del mosaico) o [**ID3D11DeviceContext:: GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips) para toda la cadena de MIP.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-132">To transfer data to/from mipmaps that the hardware packs into one tile, you must use the standard (non-tile specific) Copy/Update APIs or [**ID3D11DeviceContext::GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips) for the whole mip chain.</span></span>

<span data-ttu-id="2fcd8-133">**Nota en [**GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips):** el uso de [**ID3D11DeviceContext:: GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips) en un recurso con mosaicos parcialmente asignados producirá resultados que simplemente siguen las reglas de lectura y escritura de **valores NULL** aplicados a cualquier algoritmo que el hardware y el controlador de pantalla tengan que usar para **GenerateMips**.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-133">**Note on [**GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips):** Using [**ID3D11DeviceContext::GenerateMips**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-generatemips) on a resource with partially mapped tiles will produce results that simply follow the rules for reading and writing **NULL** applied to whatever algorithm the hardware and display driver happen to use to **GenerateMips**.</span></span> <span data-ttu-id="2fcd8-134">Por lo tanto, no es especialmente útil para que una aplicación se moleste en hacer esto, a menos que las áreas con asignaciones **null** (y su efecto en otro MIPS durante la fase de generación) no tengan ninguna consecuencia en las partes de la superficie sobre las que la aplicación se preocupa.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-134">So, it is not particularly useful for an application to bother doing this unless somehow the areas with **NULL** mappings (and their effect on other mips during the generation phase) will have no consequence on the parts of the surface the application does care about.</span></span>

<span data-ttu-id="2fcd8-135">La copia de los datos del icono desde una superficie de ensayo o desde la memoria de la aplicación sería la manera de cargar los mosaicos que se pueden haber transmitido fuera del disco, por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-135">Copying tile data from a staging surface or from application memory would be the way to upload tiles that may have been streamed off disk, for example.</span></span> <span data-ttu-id="2fcd8-136">Una variación cuando la transmisión fuera del disco es la carga de algún tipo de datos comprimidos en la memoria de GPU y, después, la descodificación en la GPU.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-136">A variation when streaming off disk is uploading some sort of compressed data to GPU memory and then decoding on the GPU.</span></span> <span data-ttu-id="2fcd8-137">El destino de descodificación podría ser un recurso de búfer en la memoria de GPU, desde el que [**CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles) copia en el recurso en mosaico real.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-137">The decode target could be a buffer resource in GPU memory, from which [**CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles) then copies to the actual tiled resource.</span></span> <span data-ttu-id="2fcd8-138">Este paso de copia permite que la GPU se swizzle cuando no se conoce el patrón swizzle.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-138">This copy step allows the GPU to swizzle when the swizzle pattern is not known.</span></span> <span data-ttu-id="2fcd8-139">Permutación no es necesario si el propio recurso en mosaico es un recurso de búfer (por ejemplo, en lugar de una textura).</span><span class="sxs-lookup"><span data-stu-id="2fcd8-139">Swizzling is not needed if the tiled resource itself is a buffer resource (for example, as opposed to a Texture).</span></span>

<span data-ttu-id="2fcd8-140">El diseño de memoria de los mosaicos en el lado del recurso de búfer no en mosaico de la copia es simplemente lineal en la memoria en los mosaicos de 64 KB, que el hardware y el controlador de pantalla swizzlen/deswizzle por cada mosaico según corresponda al transferirlos a un recurso en mosaico o desde este.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-140">The memory layout of the tiles in the non-tiled buffer resource side of the copy is simply linear in memory within 64KB tiles, which the hardware and display driver would swizzle/deswizzle per tile as appropriate when transferring to/from a tiled resource.</span></span> <span data-ttu-id="2fcd8-141">En el caso de las superficies de suavizado de contorno de muestreo múltiple (MSAA), los ejemplos de cada píxel se recorren en orden de índice de muestra antes de pasar al siguiente píxel.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-141">For multisample antialiasing (MSAA) surfaces, each pixel's samples are traversed in sample-index order before moving to the next pixel.</span></span> <span data-ttu-id="2fcd8-142">En el caso de los mosaicos que se rellenan parcialmente en el lado derecho (para una superficie que tenga un ancho que no sea un múltiplo del ancho del mosaico en píxeles), el paso o el paso para bajar una fila es el tamaño total en bytes del número de píxeles que cabrían en el mosaico si el icono estaba lleno.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-142">For tiles that are partially filled on the right side (for a surface that has a width not a multiple of tile width in pixels), the pitch/stride to move down a row is the full size in bytes of the number pixels that would fit across the tile if the tile was full.</span></span> <span data-ttu-id="2fcd8-143">Por lo tanto, puede haber un intervalo entre cada fila de píxeles en la memoria.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-143">So, there can be a gap between each row of pixels in memory.</span></span> <span data-ttu-id="2fcd8-144">Para simplificar la especificación, los mapas de tiempo menores que un mosaico no se empaquetan en el diseño lineal.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-144">For specification simplicity, mipmaps smaller than a tile are not packed together in the linear layout.</span></span> <span data-ttu-id="2fcd8-145">Esto parece ser un desperdicio de espacio en memoria, pero como se mencionó en la copia a MIPS que los paquetes de hardware juntos no se permiten a través de [**CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles) o [**UpdateTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetiles).</span><span class="sxs-lookup"><span data-stu-id="2fcd8-145">This seems to be a waste of memory space, but as mentioned copying to mips that the hardware packs together is not allowed via [**CopyTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-copytiles) or [**UpdateTiles**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-updatetiles).</span></span> <span data-ttu-id="2fcd8-146">La aplicación puede usar simplemente las \* API UpdateSubresource () o CopySubresource \* () genéricas para copiar Small MIPS de forma individual, aunque en el caso de CopySubresource \* (), lo que significa que la memoria lineal debe ser la misma dimensión que el recurso en mosaico-CopySubresource \* () no puede copiar desde un recurso de búfer a una Texture2D por ejemplo.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-146">The application can just use generic UpdateSubresource\*() or CopySubresource\*() APIs to copy small mips individually, though in the case of CopySubresource\*() that means the linear memory has to be the same dimension as the tiled resource - CopySubresource\*() can't copy from a buffer resource to a Texture2D for instance.</span></span>

<span data-ttu-id="2fcd8-147">Si se define un swizzle estándar de hardware, se pueden agregar marcas para indicar que los datos del búfer deben interpretarse en ese formato (no swizzle necesario en la transferencia), aunque los enfoques alternativos para cargar datos también pueden tener sentido en ese caso, como permitir que las aplicaciones tengan acceso directo a la memoria del grupo de mosaicos.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-147">If a hardware standard swizzle is defined, flags could be added to indicate that the data in the buffer is to be interpreted in that format (no swizzle necessary on transfer), though alternative approaches to uploading data may also make sense in that case such as allowing applications direct access to tile pool memory.</span></span>

<span data-ttu-id="2fcd8-148">Las operaciones de copia se pueden realizar en un contexto inmediato o diferido.</span><span class="sxs-lookup"><span data-stu-id="2fcd8-148">Copying operations can be done on an immediate or deferred context.</span></span>

## <a name="resizing-tile-pool"></a><span data-ttu-id="2fcd8-149">Cambiar el tamaño del grupo de mosaicos</span><span class="sxs-lookup"><span data-stu-id="2fcd8-149">Resizing tile pool</span></span>

<span data-ttu-id="2fcd8-150">Para cambiar el tamaño de un grupo de mosaicos, use [**ID3D11DeviceContext2:: ResizeTilePool**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool).</span><span class="sxs-lookup"><span data-stu-id="2fcd8-150">To resize a tile pool, use [**ID3D11DeviceContext2::ResizeTilePool**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-resizetilepool).</span></span>

## <a name="tiled-resource-barrier"></a><span data-ttu-id="2fcd8-151">Barrera de recursos en mosaico</span><span class="sxs-lookup"><span data-stu-id="2fcd8-151">Tiled resource barrier</span></span>

<span data-ttu-id="2fcd8-152">Para especificar una restricción de ordenación de acceso a datos entre varios recursos en mosaico, use [**ID3D11DeviceContext2:: TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier).</span><span class="sxs-lookup"><span data-stu-id="2fcd8-152">To specify a data access ordering constraint between multiple tiled resources, use [**ID3D11DeviceContext2::TiledResourceBarrier**](/windows/desktop/api/D3D11_2/nf-d3d11_2-id3d11devicecontext2-tiledresourcebarrier).</span></span>

## <a name="related-topics"></a><span data-ttu-id="2fcd8-153">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="2fcd8-153">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="2fcd8-154">Recursos en mosaico</span><span class="sxs-lookup"><span data-stu-id="2fcd8-154">Tiled resources</span></span>](tiled-resources.md)
</dt> </dl>

 

 




