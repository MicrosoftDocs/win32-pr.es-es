---
description: Las funciones de cifrado sin procesar permiten realizar copias de seguridad de archivos cifrados.
ms.assetid: 00f9b00e-305d-4554-8b43-7061228c92c3
title: Copia de seguridad y restauración de archivos cifrados
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4fbc5d1babbbbb92cef9e78f9a0dade702fd63d2
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104082285"
---
# <a name="backup-and-restore-of-encrypted-files"></a><span data-ttu-id="87b89-103">Copia de seguridad y restauración de archivos cifrados</span><span class="sxs-lookup"><span data-stu-id="87b89-103">Backup and Restore of Encrypted Files</span></span>

<span data-ttu-id="87b89-104">El Sistema de cifrado de archivos (EFS) filtra la apertura de un archivo cifrado de forma que la aplicación que abre el archivo obtiene acceso a la información sin cifrar, siempre que tenga las credenciales adecuadas para tener acceso al archivo y obtener la clave necesaria para descifrar el archivo.</span><span class="sxs-lookup"><span data-stu-id="87b89-104">The Encrypting File System (EFS) filters the opening of an encrypted file in such a way that the application that opened the file gets access to the unencrypted information, provided of course it has the proper credentials to access the file and get the key necessary to decrypt the file.</span></span> <span data-ttu-id="87b89-105">Las operaciones de lectura posteriores en este archivo producirán texto sin cifrar.</span><span class="sxs-lookup"><span data-stu-id="87b89-105">Subsequent read operations on this file will yield unencrypted text.</span></span> <span data-ttu-id="87b89-106">Esto es muy conveniente para el acceso típico a los archivos cifrados y mantiene el cifrado y descifrado de los archivos de forma transparente.</span><span class="sxs-lookup"><span data-stu-id="87b89-106">This is very desirable for typical access to encrypted files, and keeps the encryption and decryption of the files transparent.</span></span> <span data-ttu-id="87b89-107">Sin embargo, impide la copia de seguridad de archivos cifrados, ya que si se intenta realizar una copia de seguridad con las llamadas de e/s de archivos estándar como [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea), [**readfile**](/windows/desktop/api/FileAPI/nf-fileapi-readfile)y [**WriteFile**](/windows/desktop/api/FileAPI/nf-fileapi-writefile), los archivos de los que se ha realizado una copia de seguridad serán la versión de texto sin formato.</span><span class="sxs-lookup"><span data-stu-id="87b89-107">However, it hinders backup of encrypted files, because if backup is attempted with the standard file I/O calls like [**CreateFile**](/windows/desktop/api/FileAPI/nf-fileapi-createfilea), [**ReadFile**](/windows/desktop/api/FileAPI/nf-fileapi-readfile), and [**WriteFile**](/windows/desktop/api/FileAPI/nf-fileapi-writefile), the files backed up will be the plain text version.</span></span>

<span data-ttu-id="87b89-108">Las funciones de cifrado sin formato se proporcionan para solucionar este problema.</span><span class="sxs-lookup"><span data-stu-id="87b89-108">The raw encryption functions are provided to solve this problem.</span></span> <span data-ttu-id="87b89-109">Las aplicaciones de copia de seguridad son un usuario principal previsto para estas funciones.</span><span class="sxs-lookup"><span data-stu-id="87b89-109">Backup applications are a primary intended user for these functions.</span></span> <span data-ttu-id="87b89-110">Las funciones de cifrado sin formato se diferencian de otras funciones del sistema de archivos en que las funciones Open, Read y Write permiten el acceso a los flujos de datos cifrados sin procesar y también permiten la lectura y escritura de la secuencia de $EFS.</span><span class="sxs-lookup"><span data-stu-id="87b89-110">Raw encryption functions differ from other file system functions in that open, read, and write functions allow access to the raw encrypted data streams and also allow reading/writing of the $EFS stream.</span></span> <span data-ttu-id="87b89-111">Por lo tanto, el autor de la llamada de las funciones de cifrado sin formato no necesita tener acceso a las claves criptográficas que descifran el archivo.</span><span class="sxs-lookup"><span data-stu-id="87b89-111">Therefore, the caller of the raw encryption functions does not need access to the cryptographic keys that decrypt the file.</span></span> <span data-ttu-id="87b89-112">Las siguientes API de cifrado sin procesar están disponibles para su uso con aplicaciones de copia de seguridad y restauración:</span><span class="sxs-lookup"><span data-stu-id="87b89-112">The following raw encryption APIs are available for use with backup and restore applications:</span></span> 

| <span data-ttu-id="87b89-113">API de cifrado sin formato</span><span class="sxs-lookup"><span data-stu-id="87b89-113">Raw Encryption API</span></span>                                     | <span data-ttu-id="87b89-114">Descripción</span><span class="sxs-lookup"><span data-stu-id="87b89-114">Description</span></span>                                                                                                                                                                                                                                                                   |
|--------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="87b89-115">**OpenEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="87b89-115">**OpenEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)   | <span data-ttu-id="87b89-116">Abra un archivo cifrado con acceso a los datos en formato cifrado.</span><span class="sxs-lookup"><span data-stu-id="87b89-116">Open an encrypted file with access to data in encrypted format.</span></span> <span data-ttu-id="87b89-117">Si el autor de la llamada no tiene acceso a la clave del archivo, el autor de la llamada necesita [SeBackupPrivilege](/windows/desktop/SecAuthZ/authorization-constants) para exportar los archivos cifrados o SeRestorePrivilege para importar los archivos cifrados.</span><span class="sxs-lookup"><span data-stu-id="87b89-117">If the caller does not have access to the key for the file, the caller needs [SeBackupPrivilege](/windows/desktop/SecAuthZ/authorization-constants) to export encrypted files or SeRestorePrivilege to import encrypted files.</span></span> |
| [<span data-ttu-id="87b89-118">**CloseEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="87b89-118">**CloseEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-closeencryptedfileraw) | <span data-ttu-id="87b89-119">Cerrar un archivo cifrado abierto con [ **OpenEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)</span><span class="sxs-lookup"><span data-stu-id="87b89-119">Close an encrypted file opened with [**OpenEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-openencryptedfilerawa)</span></span>                                                                                                                                                                                      |
| [<span data-ttu-id="87b89-120">**ReadEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="87b89-120">**ReadEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)   | <span data-ttu-id="87b89-121">Leer un archivo cifrado y mantener sus datos en formato cifrado</span><span class="sxs-lookup"><span data-stu-id="87b89-121">Read an encrypted file leaving its data in encrypted format</span></span>                                                                                                                                                                                                                   |
| [<span data-ttu-id="87b89-122">**WriteEncryptedFileRaw**</span><span class="sxs-lookup"><span data-stu-id="87b89-122">**WriteEncryptedFileRaw**</span></span>](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw) | <span data-ttu-id="87b89-123">Escribir un archivo cifrado y mantener sus datos en formato cifrado</span><span class="sxs-lookup"><span data-stu-id="87b89-123">Write an encrypted file leaving its data in encrypted format</span></span>                                                                                                                                                                                                                  |
| [<span data-ttu-id="87b89-124">**ImportCallback**</span><span class="sxs-lookup"><span data-stu-id="87b89-124">**ImportCallback**</span></span>](/windows/desktop/api/WinBase/nc-winbase-pfe_import_func)               | <span data-ttu-id="87b89-125">Devolución de llamada definida por la aplicación para su uso con [ **WriteEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw)</span><span class="sxs-lookup"><span data-stu-id="87b89-125">Application-defined callback for use with [**WriteEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-writeencryptedfileraw)</span></span>                                                                                                                                                                              |
| [<span data-ttu-id="87b89-126">**ExportCallback**</span><span class="sxs-lookup"><span data-stu-id="87b89-126">**ExportCallback**</span></span>](/windows/desktop/api/WinBase/nc-winbase-pfe_export_func)               | <span data-ttu-id="87b89-127">Devolución de llamada definida por la aplicación para su uso con [ **ReadEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)</span><span class="sxs-lookup"><span data-stu-id="87b89-127">Application-defined callback for use with [**ReadEncryptedFileRaw**](/windows/desktop/api/WinBase/nf-winbase-readencryptedfileraw)</span></span>                                                                                                                                                                                |



 

 

 
