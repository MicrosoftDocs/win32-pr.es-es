---
title: Caché de credenciales
description: Caché de credenciales
ms.assetid: 6e411333-56fa-455b-a90a-f2b54f3c9545
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 34a139d0cd90495de87f42de08687fd3157acaf6
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "103994417"
---
# <a name="credential-caching"></a><span data-ttu-id="f18c0-103">Caché de credenciales</span><span class="sxs-lookup"><span data-stu-id="f18c0-103">Credential Caching</span></span>

## <a name="credential-caching-on-ntlm-ka-connections"></a><span data-ttu-id="f18c0-104">Almacenamiento en caché de credenciales en conexiones de NTLM KA</span><span class="sxs-lookup"><span data-stu-id="f18c0-104">Credential Caching on NTLM KA Connections</span></span>

<span data-ttu-id="f18c0-105">La API del servidor HTTP almacena en caché las credenciales solo en conexiones Keep-Alive (KA) para la autenticación NTLM.</span><span class="sxs-lookup"><span data-stu-id="f18c0-105">The HTTP Server API caches credentials only on Keep-Alive (KA) connections for NTLM authentication.</span></span> <span data-ttu-id="f18c0-106">De forma predeterminada, la API del servidor HTTP almacena en caché las credenciales obtenidas en la primera solicitud enviada en una conexión KA.</span><span class="sxs-lookup"><span data-stu-id="f18c0-106">By default, the HTTP Server API caches the credentials obtained on the first request sent on a KA connection.</span></span> <span data-ttu-id="f18c0-107">El cliente puede enviar solicitudes posteriores en conexiones KA sin un encabezado de autorización y obtener autenticación basada en el contexto establecido previamente.</span><span class="sxs-lookup"><span data-stu-id="f18c0-107">The client can send subsequent requests on KA connections without an authorization header and obtain authentication based on the previously established context.</span></span> <span data-ttu-id="f18c0-108">En este caso, la API del servidor HTTP envía el token basado en la credencial almacenada en caché a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="f18c0-108">In this case, the HTTP Server API sends the token based on the cached credential to the application.</span></span> <span data-ttu-id="f18c0-109">Las credenciales de una solicitud enviada por un proxy no se almacenan en caché.</span><span class="sxs-lookup"><span data-stu-id="f18c0-109">Credentials for a request sent by a proxy are not cached.</span></span> <span data-ttu-id="f18c0-110">La aplicación deshabilita el almacenamiento en caché de credenciales NTLM al establecer la marca **DisableNTLMCredentialCaching** en la estructura de [**\_ información de \_ autenticación \_ del servidor http**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) que se proporciona en las llamadas a HttpSetServerSessionProperty o HttpSetUrlGroupProperty.</span><span class="sxs-lookup"><span data-stu-id="f18c0-110">The application disables NTLM credential caching by setting the **DisableNTLMCredentialCaching** flag in the [**HTTP\_SERVER\_AUTHENTICATION\_INFO**](/windows/desktop/api/Http/ns-http-http_server_authentication_info) structure that is supplied in calls to HttpSetServerSessionProperty or HttpSetUrlGroupProperty.</span></span> <span data-ttu-id="f18c0-111">Cuando se deshabilita el almacenamiento en caché de credenciales, la API del servidor HTTP descarta las credenciales almacenadas en caché y realiza la autenticación para cada solicitud.</span><span class="sxs-lookup"><span data-stu-id="f18c0-111">When credential caching is disabled, the HTTP Server API discards the cached credentials and performs authentication for each request</span></span>

## <a name="ntlm-credential-caching-for-specific-urls"></a><span data-ttu-id="f18c0-112">Almacenamiento en caché de credenciales NTLM para direcciones URL específicas</span><span class="sxs-lookup"><span data-stu-id="f18c0-112">NTLM Credential Caching for Specific URLs</span></span>

<span data-ttu-id="f18c0-113">La aplicación determina si las credenciales de solicitud devueltas por la API del servidor HTTP se almacenan en caché mediante la inspección del parámetro flags de la estructura de información de autenticación de la \_ solicitud HTTP \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="f18c0-113">The application determines if the request credentials returned by the HTTP Server API are cached by inspecting the Flags parameter of the HTTP\_REQUEST\_AUTH\_INFO structure.</span></span> <span data-ttu-id="f18c0-114">Este parámetro indica \_ \_ \_ el token de la marca de autenticación de la solicitud HTTP \_ \_ para \_ CRED almacenada \_ cuando el token NTLM devuelto se recuperó de la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="f18c0-114">This parameter indicates HTTP\_REQUEST\_AUTH\_FLAG\_TOKEN\_FOR\_CACHED\_CRED when the returned NTLM token was retrieved from the cache.</span></span> <span data-ttu-id="f18c0-115">El almacenamiento en caché de credenciales se especifica en un grupo de direcciones URL para todas las direcciones URL del grupo.</span><span class="sxs-lookup"><span data-stu-id="f18c0-115">Credential caching is specified on a URL group for all the URLs in the group.</span></span> <span data-ttu-id="f18c0-116">No se admite el almacenamiento en caché de credenciales por dirección URL; sin embargo, las aplicaciones pueden determinar si se aceptan o rechazan las credenciales almacenadas en caché por dirección URL comprobando el \_ \_ \_ token de marca de autenticación de la solicitud HTTP \_ \_ para \_ \_ la marca CRED almacenada en caché en la estructura de información de autenticación de la \_ solicitud HTTP \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="f18c0-116">Credential caching on a per URL basis is not supported, however, applications can determine whether to accept or reject cached credentials on a per URL basis by checking the HTTP\_REQUEST\_AUTH\_FLAG\_TOKEN\_FOR\_CACHED\_CRED flag in the HTTP\_REQUEST\_AUTH\_INFO structure.</span></span> <span data-ttu-id="f18c0-117">La aplicación rechaza las credenciales almacenadas en caché enviando un desafío de autenticación 401 al cliente.</span><span class="sxs-lookup"><span data-stu-id="f18c0-117">The application rejects the cached credentials by sending a 401 authentication challenge to the client.</span></span> <span data-ttu-id="f18c0-118">Después, el cliente vuelve a enviar la solicitud con los encabezados de autorización, lo que desencadena un nuevo protocolo de enlace de autenticación con la API del servidor HTTP.</span><span class="sxs-lookup"><span data-stu-id="f18c0-118">The client then resends the request with the authorization headers, triggering a new authentication handshake with the HTTP Server API.</span></span>

## <a name="basic-authentication"></a><span data-ttu-id="f18c0-119">Autenticación básica</span><span class="sxs-lookup"><span data-stu-id="f18c0-119">Basic Authentication</span></span>

<span data-ttu-id="f18c0-120">Cuando se incluye un encabezado de autenticación básica en la solicitud, la API del servidor HTTP analiza el encabezado para obtener el nombre de usuario y la contraseña.</span><span class="sxs-lookup"><span data-stu-id="f18c0-120">When a Basic authentication header is included in the request, the HTTP Server API parses the header to obtain the user name and password.</span></span> <span data-ttu-id="f18c0-121">A continuación, el nombre de usuario se analiza en las partes de usuario y dominio.</span><span class="sxs-lookup"><span data-stu-id="f18c0-121">The user name is then parsed into the user and domain portions.</span></span> <span data-ttu-id="f18c0-122">La API del servidor HTTP almacena en caché el token de acceso, obtenido para la autenticación básica, según el nombre de usuario y la clave de dominio.</span><span class="sxs-lookup"><span data-stu-id="f18c0-122">The HTTP Server API caches the access token, obtained for Basic authentication, based on the user name and domain key.</span></span> <span data-ttu-id="f18c0-123">Cuando se recibe una nueva solicitud, la API del servidor HTTP recupera el token de acceso en función del nombre de usuario y el dominio.</span><span class="sxs-lookup"><span data-stu-id="f18c0-123">When a new request is received, the HTTP Server API retrieves the access token based on the user name and domain.</span></span> <span data-ttu-id="f18c0-124">A continuación, la contraseña de la solicitud se comprueba con la contraseña almacenada en caché.</span><span class="sxs-lookup"><span data-stu-id="f18c0-124">The password in the request is then checked against the cached password.</span></span> <span data-ttu-id="f18c0-125">El token de acceso almacenado en caché se elimina cuando se alcanza el límite de tiempo de vida (TTL).</span><span class="sxs-lookup"><span data-stu-id="f18c0-125">The cached access token is deleted when the time-to-live (TTL) limit is reached.</span></span>

 

 




