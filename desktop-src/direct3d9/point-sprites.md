---
description: La compatibilidad con los sprites de punto en Direct3D 9 permite la representación de puntos (sistemas de partículas) de alto rendimiento. Los sprites de punto son generalizaciones de puntos genéricos que permiten representar formas arbitrarias tal y como se definen en las texturas.
ms.assetid: a9046c7e-779c-4f33-b8ff-f189da3dcfc5
title: Sprites de punto (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c988a104eb65b5e2d7e56ff2444e8d422c422df2
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104537432"
---
# <a name="point-sprites-direct3d-9"></a><span data-ttu-id="a11c9-104">Sprites de punto (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="a11c9-104">Point Sprites (Direct3D 9)</span></span>

<span data-ttu-id="a11c9-105">La compatibilidad con los sprites de punto en Direct3D 9 permite la representación de puntos (sistemas de partículas) de alto rendimiento.</span><span class="sxs-lookup"><span data-stu-id="a11c9-105">Support for point sprites in Direct3D 9 enables the high-performance rendering of points (particle systems).</span></span> <span data-ttu-id="a11c9-106">Los sprites de punto son generalizaciones de puntos genéricos que permiten representar formas arbitrarias tal y como se definen en las texturas.</span><span class="sxs-lookup"><span data-stu-id="a11c9-106">Point sprites are generalizations of generic points that enable arbitrary shapes to be rendered as defined by textures.</span></span>

-   [<span data-ttu-id="a11c9-107">Controles de representación de punto primitivo</span><span class="sxs-lookup"><span data-stu-id="a11c9-107">Point Primitive Rendering Controls</span></span>](#point-primitive-rendering-controls)
-   [<span data-ttu-id="a11c9-108">Cálculos de tamaño de punto</span><span class="sxs-lookup"><span data-stu-id="a11c9-108">Point Size Computations</span></span>](#point-size-computations)
-   [<span data-ttu-id="a11c9-109">Representación de puntos</span><span class="sxs-lookup"><span data-stu-id="a11c9-109">Point Rendering</span></span>](#point-rendering)

## <a name="point-primitive-rendering-controls"></a><span data-ttu-id="a11c9-110">Controles de representación de punto primitivo</span><span class="sxs-lookup"><span data-stu-id="a11c9-110">Point Primitive Rendering Controls</span></span>

<span data-ttu-id="a11c9-111">Direct3D 9 admite parámetros adicionales para controlar la representación de los sprites de punto (primitivos de punto).</span><span class="sxs-lookup"><span data-stu-id="a11c9-111">Direct3D 9 supports additional parameters to control the rendering of point sprites (point primitives).</span></span> <span data-ttu-id="a11c9-112">Estos parámetros permiten que los puntos sean de tamaño variable y tengan aplicado un mapa de textura completo.</span><span class="sxs-lookup"><span data-stu-id="a11c9-112">These parameters enable points to be of variable size and have a full texture map applied.</span></span> <span data-ttu-id="a11c9-113">El tamaño de cada punto viene determinado por un tamaño especificado por la aplicación combinado con una función basada en distancia calculada por Direct3D.</span><span class="sxs-lookup"><span data-stu-id="a11c9-113">The size of each point is determined by an application-specified size combined with a distance-based function computed by Direct3D.</span></span> <span data-ttu-id="a11c9-114">La aplicación puede especificar el tamaño del punto como por vértice o mediante el establecimiento de D3DRS \_ , que se aplica a los puntos sin un tamaño por vértice.</span><span class="sxs-lookup"><span data-stu-id="a11c9-114">The application can specify point size either as per-vertex or by setting D3DRS\_POINTSIZE, which applies to points without a per-vertex size.</span></span> <span data-ttu-id="a11c9-115">El tamaño de los puntos se expresa en unidades de espacio de la cámara, con la excepción de cuando la aplicación pasa los vértices del formato de vértice flexible (FVF) transformados.</span><span class="sxs-lookup"><span data-stu-id="a11c9-115">The point size is expressed in camera space units, with the exception of when the application is passing post-transformed flexible vertex format (FVF) vertices.</span></span> <span data-ttu-id="a11c9-116">En este caso, no se aplica la función basada en distancia y el tamaño del punto se expresa en unidades de píxeles en el destino de representación.</span><span class="sxs-lookup"><span data-stu-id="a11c9-116">In this case, the distance-based function is not applied and the point size is expressed in units of pixels on the render target.</span></span>

<span data-ttu-id="a11c9-117">Las coordenadas de textura calculadas y utilizadas cuando los puntos de representación dependen de la configuración de D3DRS \_ POINTSPRITEENABLE.</span><span class="sxs-lookup"><span data-stu-id="a11c9-117">The texture coordinates computed and used when rendering points depends on the setting of D3DRS\_POINTSPRITEENABLE.</span></span> <span data-ttu-id="a11c9-118">Cuando este valor se establece en **true**, las coordenadas de textura se establecen para que cada punto muestre la textura completa.</span><span class="sxs-lookup"><span data-stu-id="a11c9-118">When this value is set to **TRUE**, the texture coordinates are set so that each point displays the full texture.</span></span> <span data-ttu-id="a11c9-119">En general, esto solo es útil cuando los puntos son significativamente mayores de un píxel.</span><span class="sxs-lookup"><span data-stu-id="a11c9-119">In general, this is only useful when points are significantly larger than one pixel.</span></span> <span data-ttu-id="a11c9-120">Cuando D3DRS \_ POINTSPRITEENABLE se establece en **false**, se usa la coordenada de textura del vértice de cada punto para todo el punto.</span><span class="sxs-lookup"><span data-stu-id="a11c9-120">When D3DRS\_POINTSPRITEENABLE is set to **FALSE**, each point's vertex texture coordinate is used for the entire point.</span></span>

## <a name="point-size-computations"></a><span data-ttu-id="a11c9-121">Cálculos de tamaño de punto</span><span class="sxs-lookup"><span data-stu-id="a11c9-121">Point Size Computations</span></span>

<span data-ttu-id="a11c9-122">D3DRS POINTSCALEENABLE determina el tamaño de los puntos \_ .</span><span class="sxs-lookup"><span data-stu-id="a11c9-122">Point size is determined by D3DRS\_POINTSCALEENABLE.</span></span> <span data-ttu-id="a11c9-123">Si este valor se establece en **false**, el tamaño de punto especificado por la aplicación se usa como el tamaño del espacio de pantalla (posterior a la transformación).</span><span class="sxs-lookup"><span data-stu-id="a11c9-123">If this value is set to **FALSE**, the application-specified point size is used as the screen-space (post-transformed) size.</span></span> <span data-ttu-id="a11c9-124">Los vértices que se pasan a Direct3D en el espacio de pantalla no tienen tamaños de punto calculados; el tamaño de punto especificado se interpreta como el tamaño del espacio de pantalla.</span><span class="sxs-lookup"><span data-stu-id="a11c9-124">Vertices that are passed to Direct3D in screen space do not have point sizes computed; the specified point size is interpreted as screen-space size.</span></span>

<span data-ttu-id="a11c9-125">Si D3DRS \_ POINTSCALEENABLE es **true**, Direct3D calcula el tamaño del punto de espacio de pantalla según la fórmula siguiente.</span><span class="sxs-lookup"><span data-stu-id="a11c9-125">If D3DRS\_POINTSCALEENABLE is **TRUE**, Direct3D computes the screen-space point size according to the following formula.</span></span> <span data-ttu-id="a11c9-126">El tamaño de punto especificado por la aplicación se expresa en unidades de espacio de la cámara.</span><span class="sxs-lookup"><span data-stu-id="a11c9-126">The application-specified point size is expressed in camera space units.</span></span>

<span data-ttu-id="a11c9-127">S s = VH \* s <sub>i</sub> \* sqrt (1/(A + B \* D ₑ + C \* (D ₑ ²)))</span><span class="sxs-lookup"><span data-stu-id="a11c9-127">S ₛ = Vₕ \* S <sub>i</sub> \* sqrt(1/(A + B \* D ₑ + C \*( D ₑ² )))</span></span>

<span data-ttu-id="a11c9-128">En esta fórmula, el tamaño del punto de entrada, S <sub>i</sub>, es por vértice o el valor del estado de representación de los puntos de D3DRS \_ .</span><span class="sxs-lookup"><span data-stu-id="a11c9-128">In this formula, the input point size, S <sub>i</sub>, is either per-vertex or the value of the D3DRS\_POINTSIZE render state.</span></span> <span data-ttu-id="a11c9-129">Los factores de escala de puntos, D3DRS \_ POINTSCALE \_ A, D3DRS \_ POINTSCALE \_ B y D3DRS \_ POINTSCALE \_ C, se representan mediante los puntos a, B y c. El alto de la ventanilla, V h, es el miembro de alto de la estructura [**D3DVIEWPORT9**](d3dviewport9.md) que representa la ventanilla.</span><span class="sxs-lookup"><span data-stu-id="a11c9-129">The point scale factors, D3DRS\_POINTSCALE\_A, D3DRS\_POINTSCALE\_B, and D3DRS\_POINTSCALE\_C, are represented by the points A, B, and C. The height of the viewport, V ₕ, is the [**D3DVIEWPORT9**](d3dviewport9.md) structure's Height member representing the viewport.</span></span> <span data-ttu-id="a11c9-130">D ₑ, la distancia desde el ojo hasta la posición (el ojo en el origen), se calcula tomando la posición del espacio ocular del punto (X ₑ, Y ₑ, Z ₑ) y realizando la operación siguiente.</span><span class="sxs-lookup"><span data-stu-id="a11c9-130">D ₑ, the distance from the eye to the position (the eye at the origin), is computed by taking the eye space position of the point (Xₑ, Yₑ, Zₑ) and performing the following operation.</span></span>

<span data-ttu-id="a11c9-131">D ₑ = sqrt (X ₑ ² + Y ₑ ² + Z ₑ ²)</span><span class="sxs-lookup"><span data-stu-id="a11c9-131">D ₑ = sqrt (Xₑ² + Y ₑ² + Z ₑ²)</span></span>

<span data-ttu-id="a11c9-132">El tamaño de punto máximo, PM ₐ ₓ, se determina tomando el menor del miembro MaxPointSize de la estructura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) o el estado de representación de D3DRS en el límite \_ \_ máximo.</span><span class="sxs-lookup"><span data-stu-id="a11c9-132">The maximum point size, Pₘₐₓ, is determined by taking the smaller of either the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's MaxPointSize member or the D3DRS\_POINTSIZE\_MAX render state.</span></span> <span data-ttu-id="a11c9-133">El tamaño mínimo de los puntos, P<sub>min</sub>, se determina consultando el valor de D3DRS de \_ puntuación \_ mín.</span><span class="sxs-lookup"><span data-stu-id="a11c9-133">The minimum point size, P<sub>min</sub>, is determined by querying the value of D3DRS\_POINTSIZE\_MIN.</span></span> <span data-ttu-id="a11c9-134">Por lo tanto, el tamaño final del punto de espacio de la pantalla, S, se determina de la siguiente manera.</span><span class="sxs-lookup"><span data-stu-id="a11c9-134">Thus the final screen-space point size, S, is determined in the following manner.</span></span>

-   <span data-ttu-id="a11c9-135">Si SS > PM ₐ ₓ, entonces S = P m ₐ ₓ</span><span class="sxs-lookup"><span data-stu-id="a11c9-135">If Sₛ > Pₘₐₓ, then S = P ₘₐₓ</span></span>
-   <span data-ttu-id="a11c9-136">Si S < P<sub>min</sub>, entonces s = P <sub>min</sub></span><span class="sxs-lookup"><span data-stu-id="a11c9-136">if S < P<sub>min</sub>, then S = P <sub>min</sub></span></span>
-   <span data-ttu-id="a11c9-137">De lo contrario, S = S</span><span class="sxs-lookup"><span data-stu-id="a11c9-137">Otherwise, S = S ₛ</span></span>

## <a name="point-rendering"></a><span data-ttu-id="a11c9-138">Representación de puntos</span><span class="sxs-lookup"><span data-stu-id="a11c9-138">Point Rendering</span></span>

<span data-ttu-id="a11c9-139">Un punto de espacio de pantalla, P = (X, Y, Z, W), de tamaño de espacio de pantalla S se rasteriza como cuadrangular de los cuatro vértices siguientes.</span><span class="sxs-lookup"><span data-stu-id="a11c9-139">A screen-space point, P = ( X, Y, Z, W), of screen-space size S is rasterized as a quadrilateral of the following four vertices.</span></span>

<span data-ttu-id="a11c9-140">((X + S/2, Y + S/2, Z, W), (X + S/2, Y-S/2, Z, W), (X-S/2, Y-S/2, Z, W), (X-S/2, Y + S/2, Z, W))</span><span class="sxs-lookup"><span data-stu-id="a11c9-140">(( X + S/2, Y + S/2, Z, W), ( X + S/2, Y - S/2, Z, W), ( X - S/2, Y- S/2, Z, W), ( X - S/2, Y + S/2, Z, W))</span></span>

<span data-ttu-id="a11c9-141">Los atributos de color de vértice se duplican en cada vértice; por lo tanto, cada punto siempre se representa con colores constantes.</span><span class="sxs-lookup"><span data-stu-id="a11c9-141">The vertex color attributes are duplicated at each vertex; thus each point is always rendered with constant colors.</span></span>

<span data-ttu-id="a11c9-142">La asignación de índices de textura se controla mediante la configuración de \_ Estado de representación de D3DRS POINTSPRITEENABLE.</span><span class="sxs-lookup"><span data-stu-id="a11c9-142">The assignment of texture indices is controlled by the D3DRS\_POINTSPRITEENABLE render state setting.</span></span> <span data-ttu-id="a11c9-143">Si D3DRS \_ POINTSPRITEENABLE se establece en **false**, las coordenadas de textura de los vértices se duplican en cada vértice.</span><span class="sxs-lookup"><span data-stu-id="a11c9-143">If D3DRS\_POINTSPRITEENABLE is set to **FALSE**, then the vertex texture coordinates are duplicated at each vertex.</span></span> <span data-ttu-id="a11c9-144">Si D3DRS \_ POINTSPRITEENABLE se establece en **true**, las coordenadas de textura de los cuatro vértices se establecen en los valores siguientes.</span><span class="sxs-lookup"><span data-stu-id="a11c9-144">If D3DRS\_POINTSPRITEENABLE is set to **TRUE**, then the texture coordinates at the four vertices are set to the following values.</span></span>

<span data-ttu-id="a11c9-145">(0. F, 0. F), (0. F, 1. F), (1. F, 0. F), (1. F, 1. F)</span><span class="sxs-lookup"><span data-stu-id="a11c9-145">(0.F, 0.F), (0.F, 1.F), (1.F, 0.F), (1.F, 1.F)</span></span>

<span data-ttu-id="a11c9-146">Esto se muestra en el diagrama siguiente.</span><span class="sxs-lookup"><span data-stu-id="a11c9-146">This is shown in the following diagram.</span></span>

![diagrama de un cuadrado con vértices etiquetados para los valores de coordenadas (u, v) y (x, y)](images/spritepoint.png)

<span data-ttu-id="a11c9-148">Cuando está habilitado el recorte, los puntos se recortan de la siguiente manera.</span><span class="sxs-lookup"><span data-stu-id="a11c9-148">When clipping is enabled, points are clipped in the following manner.</span></span> <span data-ttu-id="a11c9-149">Si el vértice supera el intervalo de valores de profundidad-MinZ y MaxZ de la estructura [**D3DVIEWPORT9**](d3dviewport9.md) -en la que se va a representar una escena, el punto existe fuera del frustum de la vista y no se representa.</span><span class="sxs-lookup"><span data-stu-id="a11c9-149">If the vertex exceeds the range of depth values - MinZ and MaxZ of the [**D3DVIEWPORT9**](d3dviewport9.md) structure - into which a scene is to be rendered, the point exists outside of the view frustum and is not rendered.</span></span> <span data-ttu-id="a11c9-150">Si el punto que tiene en cuenta el tamaño del punto está completamente fuera de la ventanilla en X e y, no se representa el punto; se representan los puntos restantes.</span><span class="sxs-lookup"><span data-stu-id="a11c9-150">If the point, taking into account the point size, is completely outside the viewport in X and Y, then the point is not rendered; the remaining points are rendered.</span></span> <span data-ttu-id="a11c9-151">Es posible que la posición del punto esté fuera de la ventanilla en X o Y y siga siendo parcialmente visible.</span><span class="sxs-lookup"><span data-stu-id="a11c9-151">It is possible for the point position to be outside the viewport in X or Y and still be partially visible.</span></span>

<span data-ttu-id="a11c9-152">Los puntos se pueden recortar correctamente en los planos de clip definidos por el usuario.</span><span class="sxs-lookup"><span data-stu-id="a11c9-152">Points may or may not be correctly clipped to user-defined clip planes.</span></span> <span data-ttu-id="a11c9-153">Si \_ no se establece D3DPMISCCAPS CLIPPLANESCALEDPOINTS en el miembro PrimitiveMiscCaps de la estructura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) , los puntos se recortan a los planos de clip definidos por el usuario basados solo en la posición del vértice, omitiendo el tamaño del punto.</span><span class="sxs-lookup"><span data-stu-id="a11c9-153">If D3DPMISCCAPS\_CLIPPLANESCALEDPOINTS is not set in the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's PrimitiveMiscCaps member, points are clipped to user-defined clip planes based only on the vertex position, ignoring the point size.</span></span> <span data-ttu-id="a11c9-154">En este caso, los puntos de escala se representan completamente cuando la posición del vértice está dentro de los planos de recorte y se descartan cuando la posición del vértice está fuera de un plano de recorte.</span><span class="sxs-lookup"><span data-stu-id="a11c9-154">In this case, scaled points are fully rendered when the vertex position is inside the clip planes, and discarded when the vertex position is outside a clip plane.</span></span> <span data-ttu-id="a11c9-155">Las aplicaciones pueden impedir posibles artefactos si agregan una geometría de borde a los planos de recorte que sea tan grande como el tamaño máximo de los puntos.</span><span class="sxs-lookup"><span data-stu-id="a11c9-155">Applications can prevent potential artifacts by adding a border geometry to clip planes that is as large as the maximum point size.</span></span>

<span data-ttu-id="a11c9-156">Si \_ se establece el bit CLIPPLANESCALEDPOINTS de D3DPMISCCAPS, los puntos con escala se recortan correctamente en los planos de clips definidos por el usuario.</span><span class="sxs-lookup"><span data-stu-id="a11c9-156">If the D3DPMISCCAPS\_CLIPPLANESCALEDPOINTS bit is set, then the scaled points are correctly clipped to user-defined clip planes.</span></span>

<span data-ttu-id="a11c9-157">El procesamiento de vértices de hardware puede admitir o no el tamaño de los puntos.</span><span class="sxs-lookup"><span data-stu-id="a11c9-157">Hardware vertex processing may or may not support point size.</span></span> <span data-ttu-id="a11c9-158">Por ejemplo, si se crea un dispositivo con D3DCREATE \_ hardware \_ VERTEXPROCESSING en un dispositivo de capa de abstracción de hardware (HAL) (D3DDEVTYPE \_ HAL) que tenga el miembro MaxPointSize de la estructura [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) establecido en 1,0 o 0,0, todos los puntos serán de un solo píxel.</span><span class="sxs-lookup"><span data-stu-id="a11c9-158">For example, if a device is created with D3DCREATE\_HARDWARE\_VERTEXPROCESSING on a hardware abstraction layer (HAL) device (D3DDEVTYPE\_HAL) that has the [**D3DCAPS9**](/windows/desktop/api/D3D9Caps/ns-d3d9caps-d3dcaps9) structure's MaxPointSize member set to 1.0 or 0.0, then all points are a single pixel.</span></span> <span data-ttu-id="a11c9-159">Para representar los sprites de punto de píxel en menos de 1,0, debe usar vértices FVF TL (transformados y iluminados) o el procesamiento de vértices de software (D3DCREATE \_ software \_ VERTEXPROCESSING), en cuyo caso el tiempo de ejecución de Direct3D emula la representación de Sprite de punto.</span><span class="sxs-lookup"><span data-stu-id="a11c9-159">To render pixel point sprites less than 1.0, you must use either FVF TL (transformed and lit) vertices or software vertex processing (D3DCREATE\_SOFTWARE\_VERTEXPROCESSING), in which case the Direct3D run time emulates the point sprite rendering.</span></span>

<span data-ttu-id="a11c9-160">Un dispositivo de hardware que realiza el procesamiento de vértices y admite sprites de punto: MaxPointSize establecido en un valor mayor que 1,0 f es necesario para realizar el cálculo de tamaño para los sprites no transformados y es necesario para establecer correctamente los puntos de POINTSIZED3DRS por vértice o D3DRS \_ \_ para los vértices TL.</span><span class="sxs-lookup"><span data-stu-id="a11c9-160">A hardware device that does vertex processing and supports point sprites - MaxPointSize set to greater than 1.0f - is required to perform the size computation for nontransformed sprites and is required to properly set the per-vertex or D3DRS\_POINTSIZED3DRS\_POINTSIZE for TL vertices.</span></span>

<span data-ttu-id="a11c9-161">Para obtener información sobre las reglas de representación de puntos, líneas y triángulos, vea [reglas de rasterización (Direct3D 9)](rasterization-rules.md).</span><span class="sxs-lookup"><span data-stu-id="a11c9-161">For information about rendering rules for points, lines, and triangles, see [Rasterization Rules (Direct3D 9)](rasterization-rules.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="a11c9-162">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="a11c9-162">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a11c9-163">Canalización de vértices</span><span class="sxs-lookup"><span data-stu-id="a11c9-163">Vertex Pipeline</span></span>](vertex-pipeline.md)
</dt> </dl>

 

 



