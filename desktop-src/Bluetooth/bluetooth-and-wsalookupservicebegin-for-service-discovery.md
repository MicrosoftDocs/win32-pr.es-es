---
title: Bluetooth y WSALookupServiceBegin para la detección de servicios
description: Para detectar la existencia de un servicio determinado en un servidor Bluetooth, los clientes usan las funciones WSALookupServiceBegin, WSALookupServiceNext y WSALookupServiceEnd.
ms.assetid: d9961600-cdca-42ec-92eb-118b8186ed2e
keywords:
- Bluetooth y WSALookupServiceBegin para detección de servicios Bluetooth
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 274b3beb3de7683bd43a0f99350db6e1a347f51e
ms.sourcegitcommit: ae73f4dd3cf5a3c6a1ea7d191ca32a5b01f6686b
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/08/2020
ms.locfileid: "103904875"
---
# <a name="bluetooth-and-wsalookupservicebegin-for-service-discovery"></a><span data-ttu-id="4d855-104">Bluetooth y WSALookupServiceBegin para la detección de servicios</span><span class="sxs-lookup"><span data-stu-id="4d855-104">Bluetooth and WSALookupServiceBegin for Service Discovery</span></span>

<span data-ttu-id="4d855-105">Para detectar la existencia de un servicio determinado en un servidor Bluetooth, los clientes usan las funciones [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta)y [**WSALookupServiceEnd**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend) .</span><span class="sxs-lookup"><span data-stu-id="4d855-105">To discover the existence of a particular service on a Bluetooth server, clients use the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina), [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta), and [**WSALookupServiceEnd**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend) functions.</span></span> <span data-ttu-id="4d855-106">Las consultas se pueden realizar para las direcciones locales y remotas, pero las conexiones solo se pueden establecer con direcciones remotas.</span><span class="sxs-lookup"><span data-stu-id="4d855-106">Queries can be performed for local and remote addresses, but connections can only be established with remote addresses.</span></span> <span data-ttu-id="4d855-107">Los identificadores de servicio detectados durante esta operación no se pueden usar para eliminar el servicio a través de [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea).</span><span class="sxs-lookup"><span data-stu-id="4d855-107">Service handles discovered during this operation cannot be used to delete the service via [**WSASetService**](/windows/desktop/api/winsock2/nf-winsock2-wsasetservicea).</span></span> <span data-ttu-id="4d855-108">El bucle invertido no es compatible con RFCOMM.</span><span class="sxs-lookup"><span data-stu-id="4d855-108">Loopback is not supported by RFCOMM.</span></span>

<span data-ttu-id="4d855-109">Se pueden realizar dos tipos básicos de consultas de detección de servicios:</span><span class="sxs-lookup"><span data-stu-id="4d855-109">Two basic types of service discovery queries can be performed:</span></span>

-   <span data-ttu-id="4d855-110">Consultas de uno o más servicios en el dispositivo local</span><span class="sxs-lookup"><span data-stu-id="4d855-110">Queries for one or more services on the local device</span></span>
-   <span data-ttu-id="4d855-111">Consultas de uno o más servicios en un dispositivo del mismo nivel especificado</span><span class="sxs-lookup"><span data-stu-id="4d855-111">Queries for one or more services on a specified peer device</span></span>

<span data-ttu-id="4d855-112">La función [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) recibe una estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) en su parámetro *lpqsRestrictions* .</span><span class="sxs-lookup"><span data-stu-id="4d855-112">The [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) function receives a [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure in its *lpqsRestrictions* parameter.</span></span> <span data-ttu-id="4d855-113">**WSALookupServiceBegin** realiza una consulta de cliente basada en el conjunto de restricciones de búsqueda que contiene **WSAQUERYSET** .</span><span class="sxs-lookup"><span data-stu-id="4d855-113">**WSALookupServiceBegin** performs a client query based on the set of search restrictions that the **WSAQUERYSET** contains.</span></span> <span data-ttu-id="4d855-114">Los clientes Bluetooth deben especificar las restricciones que se indican en la siguiente tabla, en la estructura **WSAQUERYSET** al usar la función **WSALookupServiceBegin** para consultar los servicios.</span><span class="sxs-lookup"><span data-stu-id="4d855-114">Bluetooth clients must specify the restrictions, listed in the following table, in the **WSAQUERYSET** structure when using the **WSALookupServiceBegin** function to query for services.</span></span>



| <span data-ttu-id="4d855-115">Miembro WSAQUERYSET</span><span class="sxs-lookup"><span data-stu-id="4d855-115">WSAQUERYSET member</span></span>    | <span data-ttu-id="4d855-116">Restricción</span><span class="sxs-lookup"><span data-stu-id="4d855-116">Restriction</span></span>                                                                                                                                                                                                                                                                                                                                                                     |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="4d855-117">**dwSize**</span><span class="sxs-lookup"><span data-stu-id="4d855-117">**dwSize**</span></span>            | <span data-ttu-id="4d855-118">Establezca en **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span><span class="sxs-lookup"><span data-stu-id="4d855-118">Set to **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span></span>                                                                                                                                                                                                                                                                                                                    |
| <span data-ttu-id="4d855-119">**lpServiceClassId**</span><span class="sxs-lookup"><span data-stu-id="4d855-119">**lpServiceClassId**</span></span>  | <span data-ttu-id="4d855-120">Se establece en el UUID de Bluetooth más específico que se puede usar para determinar el ámbito de la consulta.</span><span class="sxs-lookup"><span data-stu-id="4d855-120">Set to the most specific Bluetooth UUID that can be used to determine the scope of the query.</span></span> <span data-ttu-id="4d855-121">Por ejemplo, si se establece **lpServiceClassId** en el UUID del protocolo L2CAP, se devuelven todos los servicios de L2CAP, lo que básicamente enumera todos los registros SD en el destino.</span><span class="sxs-lookup"><span data-stu-id="4d855-121">For example, setting **lpServiceClassId** to the UUID of the L2CAP protocol results in all L2CAP services returned, essentially enumerating all SD records on the target.</span></span> <span data-ttu-id="4d855-122">Sin embargo, al establecer el UUID en un servicio específico, solo se devuelven las instancias de ese servicio.</span><span class="sxs-lookup"><span data-stu-id="4d855-122">Setting the UUID to a specific service, however, returns only the instances of that service.</span></span><br/> |
| <span data-ttu-id="4d855-123">**dwNameSpace**</span><span class="sxs-lookup"><span data-stu-id="4d855-123">**dwNameSpace**</span></span>       | <span data-ttu-id="4d855-124">Establezca en **NS \_ BTH**.</span><span class="sxs-lookup"><span data-stu-id="4d855-124">Set to **NS\_BTH**.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="4d855-125">**dwNumberOfCsAddrs**</span><span class="sxs-lookup"><span data-stu-id="4d855-125">**dwNumberOfCsAddrs**</span></span> | <span data-ttu-id="4d855-126">Establecer en 0.</span><span class="sxs-lookup"><span data-stu-id="4d855-126">Set to 0.</span></span>                                                                                                                                                                                                                                                                                                                                                                       |
| <span data-ttu-id="4d855-127">**lpszContext**</span><span class="sxs-lookup"><span data-stu-id="4d855-127">**lpszContext**</span></span>       | <span data-ttu-id="4d855-128">Establezca en la dirección del dispositivo Bluetooth con la que desea establecer una conexión SDP para realizar la consulta de servicios.</span><span class="sxs-lookup"><span data-stu-id="4d855-128">Set to the Bluetooth Device Address with which to establish an SDP connection to perform the query of services.</span></span> <span data-ttu-id="4d855-129">Este miembro debe ser una cadena que se convierte mediante la función [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) .</span><span class="sxs-lookup"><span data-stu-id="4d855-129">This member must be a string that is converted by using the [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) function.</span></span> <span data-ttu-id="4d855-130">Si se proporciona la dirección de radio local, se busca en los registros SDP locales.</span><span class="sxs-lookup"><span data-stu-id="4d855-130">If the local radio address is supplied, the local SDP records are searched.</span></span><br/>                                             |
| <span data-ttu-id="4d855-131">Otros miembros</span><span class="sxs-lookup"><span data-stu-id="4d855-131">Other members</span></span>         | <span data-ttu-id="4d855-132">Se omiten todos los demás miembros de la estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) .</span><span class="sxs-lookup"><span data-stu-id="4d855-132">All other members of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure are ignored.</span></span>                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="4d855-133">La conexión SDP al dispositivo remoto no permanece activa después de que la función [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) complete una consulta de servicio; la conexión se termina antes de que **WSALookupServiceBegin** devuelva.</span><span class="sxs-lookup"><span data-stu-id="4d855-133">The SDP connection to the remote device does not remain active after the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) function completes a service query; the connection is terminated before **WSALookupServiceBegin** returns.</span></span> <span data-ttu-id="4d855-134">Las aplicaciones que requieren que la conexión SDP permanezca activa después de completarse una consulta de servicio deben especificar el UUID de clase de servicio al que conectarse mediante el miembro **serviceClassId** de la estructura [**\_ BTH de SOCKADDR**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) al emitir la llamada de función de Windows Sockets [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="4d855-134">Applications that require the SDP connection to remain active after a service query completes should specify the service class UUID to which to connect by using the **serviceClassId** member of the [**SOCKADDR\_BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth) structure when issuing the Windows Sockets [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function call.</span></span>

<span data-ttu-id="4d855-135">Las marcas que se enumeran en la tabla siguiente se usan en el parámetro *dwControlFlags* de las funciones [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) y [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) para controlar los resultados de la consulta.</span><span class="sxs-lookup"><span data-stu-id="4d855-135">The flags, listed in the following table, are used in the *dwControlFlags* parameter of the [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) and [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) functions to control the query results.</span></span> <span data-ttu-id="4d855-136">Los **\_ contenedores LUP** y las marcas **\_ FLUSHCACHE LUP** se usan en la función **WSALookupServiceBegin** ; el resto de las marcas se usan en las llamadas a la función **WSALookupServiceNext** .</span><span class="sxs-lookup"><span data-stu-id="4d855-136">The **LUP\_CONTAINERS** and **LUP\_FLUSHCACHE** flags are used by the **WSALookupServiceBegin** function; the rest of the flags are used in calls to the **WSALookupServiceNext** function.</span></span>

<table>
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="4d855-137">Marca</span><span class="sxs-lookup"><span data-stu-id="4d855-137">Flag</span></span></th>
<th><span data-ttu-id="4d855-138">Resultado</span><span class="sxs-lookup"><span data-stu-id="4d855-138">Result</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="4d855-139"><strong>LUP_CONTAINERS</strong></span><span class="sxs-lookup"><span data-stu-id="4d855-139"><strong>LUP_CONTAINERS</strong></span></span></td>
<td><span data-ttu-id="4d855-140">No se debe establecer.</span><span class="sxs-lookup"><span data-stu-id="4d855-140">Must not be set.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="4d855-141"><strong>LUP_FLUSHCACHE</strong></span><span class="sxs-lookup"><span data-stu-id="4d855-141"><strong>LUP_FLUSHCACHE</strong></span></span></td>
<td><span data-ttu-id="4d855-142">Por lo general, las aplicaciones deben especificar <strong>LUP_FLUSHCACHE</strong>.</span><span class="sxs-lookup"><span data-stu-id="4d855-142">Applications should generally specify <strong>LUP_FLUSHCACHE</strong>.</span></span> <span data-ttu-id="4d855-143">Esta marca indica al sistema que ignore cualquier información almacenada en memoria caché y establezca una conexión de SDP a través del aire en el dispositivo especificado para realizar la búsqueda de SDP.</span><span class="sxs-lookup"><span data-stu-id="4d855-143">This flag instructs the system to ignore any cached information and establish an over-the-air SDP connection to the specified device to perform the SDP search.</span></span> <span data-ttu-id="4d855-144">Esta operación sin almacenamiento en caché puede tardar varios segundos (mientras que una búsqueda almacenada en caché se devuelve rápidamente).</span><span class="sxs-lookup"><span data-stu-id="4d855-144">This non-cached operation may take several seconds (whereas a cached search returns quickly).</span></span> <span data-ttu-id="4d855-145">En la actualidad, Bluetooth no almacena en caché de forma proactiva los registros SDP de dispositivos cercanos ni almacena actualmente en caché las consultas anteriores.</span><span class="sxs-lookup"><span data-stu-id="4d855-145">Bluetooth currently does not proactively cache SDP records from nearby devices, nor does it currently aggressively cache previous queries.</span></span> <span data-ttu-id="4d855-146">Por lo tanto, las aplicaciones deben prever que las consultas no devuelvan resultados (con un código de error de <strong>WSASERVICE_NOT_FOUND</strong>) si no se especifica <strong>LUP_FLUSHCACHE</strong> .</span><span class="sxs-lookup"><span data-stu-id="4d855-146">Therefore, applications should anticipate that queries may return no results (with an error code of <strong>WSASERVICE_NOT_FOUND</strong>) if <strong>LUP_FLUSHCACHE</strong> is not specified.</span></span> <span data-ttu-id="4d855-147">Los datos almacenados en caché que están disponibles mediante la interfaz de Windows Sockets se pueden mejorar en el futuro.</span><span class="sxs-lookup"><span data-stu-id="4d855-147">The cached data that is available by using the Windows Sockets interface may be enhanced in the future.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="4d855-148"><strong>LUP_RES_SERVICE</strong></span><span class="sxs-lookup"><span data-stu-id="4d855-148"><strong>LUP_RES_SERVICE</strong></span></span></td>
<td><span data-ttu-id="4d855-149">Devuelve información sobre la dirección Bluetooth local.</span><span class="sxs-lookup"><span data-stu-id="4d855-149">Return information about the local Bluetooth address.</span></span> <span data-ttu-id="4d855-150">Esta marca solo tiene efecto si también se especifica <strong>LUP_RETURN_ADDR</strong> .</span><span class="sxs-lookup"><span data-stu-id="4d855-150">This flag has an effect only if <strong>LUP_RETURN_ADDR</strong> is also specified.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="4d855-151"><strong>LUP_RETURN_NAME</strong></span><span class="sxs-lookup"><span data-stu-id="4d855-151"><strong>LUP_RETURN_NAME</strong></span></span></td>
<td><span data-ttu-id="4d855-152">Devuelve el nombre para mostrar del servicio en el miembro <strong>lpszServiceInstanceName</strong> de la estructura <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> para cada llamada a la función <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="4d855-152">Return the display name of the service in the <strong>lpszServiceInstanceName</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure for each call to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> function.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="4d855-153"><strong>LUP_RETURN_TYPE</strong></span><span class="sxs-lookup"><span data-stu-id="4d855-153"><strong>LUP_RETURN_TYPE</strong></span></span></td>
<td><span data-ttu-id="4d855-154">Devuelve el identificador de la clase de servicio en el miembro <strong>lpServiceClassId</strong> de la estructura <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="4d855-154">Return the service class ID in the <strong>lpServiceClassId</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure.</span></span>
<blockquote>
[!Note]<br />
<span data-ttu-id="4d855-155">El uso de esta marca solo es aplicable a la función <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina"><strong>WSALookupServiceBegin</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="4d855-155">Use of this flag is only applicable to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina"><strong>WSALookupServiceBegin</strong></a> function.</span></span> <span data-ttu-id="4d855-156">Este valor siempre es cero para <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="4d855-156">This value is always zero for <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a>.</span></span>
</blockquote>
<br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="4d855-157"><strong>LUP_RETURN_ADDR</strong></span><span class="sxs-lookup"><span data-stu-id="4d855-157"><strong>LUP_RETURN_ADDR</strong></span></span></td>
<td><span data-ttu-id="4d855-158">Devuelve una dirección en el miembro <strong>lpcsaBuffer</strong> que se va a usar con llamadas a la función <a href="/windows/desktop/api/winsock2/nf-winsock2-connect"><strong>Connect</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="4d855-158">Return an address in the <strong>lpcsaBuffer</strong> member to be used with <a href="/windows/desktop/api/winsock2/nf-winsock2-connect"><strong>connect</strong></a> function calls.</span></span> <span data-ttu-id="4d855-159">La dirección devuelta contiene el número de puerto.</span><span class="sxs-lookup"><span data-stu-id="4d855-159">The returned address contains the port number.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="4d855-160"><strong>LUP_RETURN_BLOB</strong></span><span class="sxs-lookup"><span data-stu-id="4d855-160"><strong>LUP_RETURN_BLOB</strong></span></span></td>
<td><span data-ttu-id="4d855-161">Devuelva los registros SD coincidentes en el miembro <strong>lpBlob</strong> , con el formato de acuerdo con la especificación de registro SDP Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="4d855-161">Return the matching SD records in the <strong>lpBlob</strong> member, formatted according to the Bluetooth SDP record specification.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="4d855-162"><strong>LUP_RETURN_ALL</strong></span><span class="sxs-lookup"><span data-stu-id="4d855-162"><strong>LUP_RETURN_ALL</strong></span></span></td>
<td><span data-ttu-id="4d855-163">Devolver toda la información de marcas anterior.</span><span class="sxs-lookup"><span data-stu-id="4d855-163">Return all of the above flags' information.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="4d855-164"><strong>LUP_RETURN_COMMENT</strong></span><span class="sxs-lookup"><span data-stu-id="4d855-164"><strong>LUP_RETURN_COMMENT</strong></span></span></td>
<td><span data-ttu-id="4d855-165">Devuelve la descripción del servicio en el miembro <strong>lpszComment</strong> de la estructura <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> para cada llamada a la función <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="4d855-165">Return the service description in the <strong>lpszComment</strong> member of the <a href="/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw"><strong>WSAQUERYSET</strong></a> structure for each call to the <a href="/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta"><strong>WSALookupServiceNext</strong></a> function.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="4d855-166"><strong>LUP_FLUSHPREVIOUS</strong></span><span class="sxs-lookup"><span data-stu-id="4d855-166"><strong>LUP_FLUSHPREVIOUS</strong></span></span></td>
<td><span data-ttu-id="4d855-167">Omitir el siguiente registro disponible y devolver el registro que le sigue.</span><span class="sxs-lookup"><span data-stu-id="4d855-167">Skip the next available record, and return the record that follows it.</span></span></td>
</tr>
</tbody>
</table>



 

## <a name="advanced-service-queries"></a><span data-ttu-id="4d855-168">Consultas de servicio avanzadas</span><span class="sxs-lookup"><span data-stu-id="4d855-168">Advanced Service Queries</span></span>

<span data-ttu-id="4d855-169">Las operaciones de consulta que se describen en la sección anterior se pueden usar para devolver todos los resultados de un único GUID, que debe ser suficiente para la mayoría de las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="4d855-169">The query operations that are described in the previous section can be used to return all results from a single GUID, which should be sufficient for most applications.</span></span> <span data-ttu-id="4d855-170">Una consulta avanzada permite a una aplicación crear una consulta más específica; proporciona la capacidad de hacer coincidir los UUID y los atributos de la información devuelta.</span><span class="sxs-lookup"><span data-stu-id="4d855-170">An advanced query enables an application to create a more specific query; it provides the capability to match UUIDs and attributes in returned information.</span></span>

<span data-ttu-id="4d855-171">Para realizar una consulta avanzada de los servicios, los clientes Bluetooth deben especificar las siguientes restricciones en la estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) que se pasa al parámetro *lpqsRestrictions* .</span><span class="sxs-lookup"><span data-stu-id="4d855-171">To perform an advanced query for services, Bluetooth clients must specify the following restrictions in the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure that is passed into the *lpqsRestrictions* parameter.</span></span>



| <span data-ttu-id="4d855-172">Miembro WSAQUERYSET</span><span class="sxs-lookup"><span data-stu-id="4d855-172">WSAQUERYSET member</span></span>   | <span data-ttu-id="4d855-173">Restricción</span><span class="sxs-lookup"><span data-stu-id="4d855-173">Restriction</span></span>                                                                                                                                                                                                                                                                                                                         |
|----------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="4d855-174">**dwSize**</span><span class="sxs-lookup"><span data-stu-id="4d855-174">**dwSize**</span></span>           | <span data-ttu-id="4d855-175">Establezca en **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span><span class="sxs-lookup"><span data-stu-id="4d855-175">Set to **sizeof**([**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)).</span></span>                                                                                                                                                                                                                                                                        |
| <span data-ttu-id="4d855-176">**lpszContext**</span><span class="sxs-lookup"><span data-stu-id="4d855-176">**lpszContext**</span></span>      | <span data-ttu-id="4d855-177">Establezca en la dirección del dispositivo Bluetooth con la que desea establecer una conexión SDP para realizar la consulta de servicios.</span><span class="sxs-lookup"><span data-stu-id="4d855-177">Set to the Bluetooth Device Address with which to establish an SDP connection to perform the query of services.</span></span> <span data-ttu-id="4d855-178">Este miembro debe ser una cadena que se convierte mediante la función [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) .</span><span class="sxs-lookup"><span data-stu-id="4d855-178">This member must be a string that is converted by using the [**WSAAddressToString**](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa) function.</span></span> <span data-ttu-id="4d855-179">Si se proporciona la dirección de radio local, se busca en los registros SDP locales.</span><span class="sxs-lookup"><span data-stu-id="4d855-179">If the local radio address is supplied, the local SDP records are searched.</span></span><br/> |
| <span data-ttu-id="4d855-180">**lpBlob.pBlobData**</span><span class="sxs-lookup"><span data-stu-id="4d855-180">**lpBlob.pBlobData**</span></span> | <span data-ttu-id="4d855-181">Puntero a una estructura de [**\_ \_ servicio de consulta BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) que contiene todos los parámetros que limitan los resultados de la consulta.</span><span class="sxs-lookup"><span data-stu-id="4d855-181">Pointer to a [**BTH\_QUERY\_SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) structure that contains all parameters that limit the results of the query.</span></span>                                                                                                                                                                                           |
| <span data-ttu-id="4d855-182">**dwNameSpace**</span><span class="sxs-lookup"><span data-stu-id="4d855-182">**dwNameSpace**</span></span>      | <span data-ttu-id="4d855-183">Establezca en **NS \_ BTH**.</span><span class="sxs-lookup"><span data-stu-id="4d855-183">Set to **NS\_BTH**.</span></span>                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="4d855-184">Otros miembros</span><span class="sxs-lookup"><span data-stu-id="4d855-184">Other members</span></span>        | <span data-ttu-id="4d855-185">Se omiten todos los demás miembros de la estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) .</span><span class="sxs-lookup"><span data-stu-id="4d855-185">All other members of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure are ignored.</span></span>                                                                                                                                                                                                                                            |



 

<span data-ttu-id="4d855-186">Las marcas siguientes se pasan en el parámetro *dwControlFlags* de [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) para controlar los resultados de una consulta avanzada.</span><span class="sxs-lookup"><span data-stu-id="4d855-186">The following flags are passed in the *dwControlFlags* parameter of [**WSALookupServiceBegin**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina) to control the results of an advanced query.</span></span>

| <span data-ttu-id="4d855-187">Marca</span><span class="sxs-lookup"><span data-stu-id="4d855-187">Flag</span></span>                     | <span data-ttu-id="4d855-188">Resultado</span><span class="sxs-lookup"><span data-stu-id="4d855-188">Result</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|--------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="4d855-189">**contenedores de LUP \_**</span><span class="sxs-lookup"><span data-stu-id="4d855-189">**LUP\_CONTAINERS**</span></span>      | <span data-ttu-id="4d855-190">No se debe establecer.</span><span class="sxs-lookup"><span data-stu-id="4d855-190">Must not be set.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="4d855-191">**LUP \_ FLUSHCACHE**</span><span class="sxs-lookup"><span data-stu-id="4d855-191">**LUP\_FLUSHCACHE**</span></span>      | <span data-ttu-id="4d855-192">Por lo general, las aplicaciones deben especificar **LUP \_ FLUSHCACHE**.</span><span class="sxs-lookup"><span data-stu-id="4d855-192">Applications should generally specify **LUP\_FLUSHCACHE**.</span></span> <span data-ttu-id="4d855-193">Esta marca indica al sistema que ignore cualquier información almacenada en memoria caché y establezca una conexión de SDP a través del aire en el dispositivo especificado para realizar la búsqueda de SDP.</span><span class="sxs-lookup"><span data-stu-id="4d855-193">This flag instructs the system to ignore any cached information and establish an over-the-air SDP connection to the specified device to perform the SDP search.</span></span> <span data-ttu-id="4d855-194">Esta operación sin almacenamiento en caché puede tardar varios segundos (mientras que una búsqueda almacenada en caché se devuelve rápidamente).</span><span class="sxs-lookup"><span data-stu-id="4d855-194">This non-cached operation may take several seconds (whereas a cached search returns quickly).</span></span> <span data-ttu-id="4d855-195">Bluetooth no almacena en caché de forma proactiva los registros SDP de dispositivos cercanos ni almacena en caché de forma agresiva las consultas anteriores.</span><span class="sxs-lookup"><span data-stu-id="4d855-195">Bluetooth does not proactively cache SDP records from nearby devices, nor does it aggressively cache previous queries.</span></span> <span data-ttu-id="4d855-196">Por lo tanto, las aplicaciones deberían esperar que las consultas no devuelvan resultados con frecuencia (**\_ no \_ se encontró WSASERVICE**) si no se especifica **LUP \_ FLUSHCACHE** .</span><span class="sxs-lookup"><span data-stu-id="4d855-196">Therefore applications should expect that queries may frequently return no results (**WSASERVICE\_NOT\_FOUND**) if **LUP\_FLUSHCACHE** is not specified.</span></span> <span data-ttu-id="4d855-197">Los datos almacenados en caché que están disponibles mediante la interfaz de Windows Sockets se pueden mejorar en el futuro.</span><span class="sxs-lookup"><span data-stu-id="4d855-197">The cached data that is available by using the Windows Sockets interface may be enhanced in the future.</span></span> |
| <span data-ttu-id="4d855-198">**\_servicio res de LUP \_**</span><span class="sxs-lookup"><span data-stu-id="4d855-198">**LUP\_RES\_SERVICE**</span></span>    | <span data-ttu-id="4d855-199">Devuelve información de la dirección Bluetooth local.</span><span class="sxs-lookup"><span data-stu-id="4d855-199">Return information for the local Bluetooth Address.</span></span> <span data-ttu-id="4d855-200">El establecimiento de esta marca solo tiene efecto si también se especifica **LUP \_ Return \_** .</span><span class="sxs-lookup"><span data-stu-id="4d855-200">Setting this flag has an effect only if **LUP\_RETURN\_ADDRR** is also specified.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="4d855-201">**\_nombre devuelto de LUP \_**</span><span class="sxs-lookup"><span data-stu-id="4d855-201">**LUP\_RETURN\_NAME**</span></span>    | <span data-ttu-id="4d855-202">Devuelve el nombre para mostrar del servicio.</span><span class="sxs-lookup"><span data-stu-id="4d855-202">Return the display name of the service.</span></span> <span data-ttu-id="4d855-203">Esta marca se omite para **la \_ \_ \_ solicitud de búsqueda de Servicio SDP**.</span><span class="sxs-lookup"><span data-stu-id="4d855-203">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <span data-ttu-id="4d855-204">**\_tipo de valor devuelto LUP \_**</span><span class="sxs-lookup"><span data-stu-id="4d855-204">**LUP\_RETURN\_TYPE**</span></span>    | <span data-ttu-id="4d855-205">Devuelve el identificador de la clase de servicio.</span><span class="sxs-lookup"><span data-stu-id="4d855-205">Return the service class ID.</span></span> <span data-ttu-id="4d855-206">Esta marca se omite para **la \_ \_ \_ solicitud de búsqueda de Servicio SDP**.</span><span class="sxs-lookup"><span data-stu-id="4d855-206">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| <span data-ttu-id="4d855-207">**LUP \_ devolver \_ dirección**</span><span class="sxs-lookup"><span data-stu-id="4d855-207">**LUP\_RETURN\_ADDR**</span></span>    | <span data-ttu-id="4d855-208">Devuelve una dirección en el miembro **lpcsaBuffer** que se va a usar con llamadas a la función [**Connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) .</span><span class="sxs-lookup"><span data-stu-id="4d855-208">Return an address in the **lpcsaBuffer** member to be used with [**connect**](/windows/desktop/api/winsock2/nf-winsock2-connect) function calls.</span></span> <span data-ttu-id="4d855-209">La dirección devuelta contiene el número de puerto.</span><span class="sxs-lookup"><span data-stu-id="4d855-209">The returned address contains the port number.</span></span> <span data-ttu-id="4d855-210">Esta marca se omite para **la \_ \_ \_ solicitud de búsqueda de Servicio SDP**.</span><span class="sxs-lookup"><span data-stu-id="4d855-210">This flag is ignored for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| <span data-ttu-id="4d855-211">**LUP \_ devolver \_ BLOB**</span><span class="sxs-lookup"><span data-stu-id="4d855-211">**LUP\_RETURN\_BLOB**</span></span>    | <span data-ttu-id="4d855-212">Devuelva los registros SD coincidentes en un formato que se ajuste a la especificación de registro SDP Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="4d855-212">Return the matching SD records in a format that conforms to the Bluetooth SDP record specification.</span></span> <span data-ttu-id="4d855-213">Para **la \_ \_ \_ solicitud de búsqueda de Servicio SDP**, el resultado de **LpBlob** para la llamada subsiguiente a [**WSALOOKUPSERVICENEXT**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) es una matriz de identificadores de SDP Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="4d855-213">For **SDP\_SERVICE\_SEARCH\_REQUEST**, the result in **lpBlob** for the subsequent call to [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) is an array of Bluetooth SDP handles.</span></span> <span data-ttu-id="4d855-214">Para la solicitud de **atributo de \_ servicio \_ \_ SDP** y la **solicitud de atributo de \_ búsqueda de servicio \_ \_ \_ SDP**, el resultado de cada llamada subsiguiente a **WSALookupServiceNext** es un registro SDP de Bluetooth binario cuyos atributos están restringidos a los especificados por el miembro **pRange** de la consulta.</span><span class="sxs-lookup"><span data-stu-id="4d855-214">For **SDP\_SERVICE\_ATTRIBUTE\_REQUEST** and **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**, the result for each subsequent call to **WSALookupServiceNext** is a binary Bluetooth SDP record whose attributes are restricted to those specified by the **pRange** member of the query.</span></span> <span data-ttu-id="4d855-215">Esta marca es necesaria para **la \_ \_ \_ solicitud de búsqueda de Servicio SDP**.</span><span class="sxs-lookup"><span data-stu-id="4d855-215">This flag is required for **SDP\_SERVICE\_SEARCH\_REQUEST**.</span></span>                                                               |
| <span data-ttu-id="4d855-216">**LUP \_ Comentario devuelto \_**</span><span class="sxs-lookup"><span data-stu-id="4d855-216">**LUP\_RETURN\_COMMENT**</span></span> | <span data-ttu-id="4d855-217">Devuelve la descripción del servicio en el miembro **lpszComment** de la estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) para cada llamada a la función [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="4d855-217">Return the service description in the **lpszComment** member of the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure for each call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <span data-ttu-id="4d855-218">**LUP \_ FLUSHPREVIOUS**</span><span class="sxs-lookup"><span data-stu-id="4d855-218">**LUP\_FLUSHPREVIOUS**</span></span>   | <span data-ttu-id="4d855-219">Omitir el siguiente registro disponible y devolver el registro que le sigue.</span><span class="sxs-lookup"><span data-stu-id="4d855-219">Skip the next available record, and return the record that follows it.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |



 

<span data-ttu-id="4d855-220">En la entrada, **lpBlob** -> **pBlobData** apunta a una estructura de [**\_ \_ servicio de consulta BTH**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) que contiene los valores que se muestran en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="4d855-220">On input, **lpBlob**->**pBlobData** points to a [**BTH\_QUERY\_SERVICE**](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service) structure that contains the values listed in the following table.</span></span>

> [!Note]  
> <span data-ttu-id="4d855-221">La solicitud de búsqueda inicial debe ser capaz de encajar en un paquete L2CAP.</span><span class="sxs-lookup"><span data-stu-id="4d855-221">The initial search request must be able to fit into one L2CAP packet.</span></span> <span data-ttu-id="4d855-222">La respuesta, sin embargo, puede dividirse en muchos paquetes L2CAP.</span><span class="sxs-lookup"><span data-stu-id="4d855-222">The response, however, may be broken into many L2CAP packets.</span></span>

 



| <span data-ttu-id="4d855-223">Miembro</span><span class="sxs-lookup"><span data-stu-id="4d855-223">Member</span></span>            | <span data-ttu-id="4d855-224">Valor</span><span class="sxs-lookup"><span data-stu-id="4d855-224">Value</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|-------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="4d855-225">**type**</span><span class="sxs-lookup"><span data-stu-id="4d855-225">**type**</span></span>          | <span data-ttu-id="4d855-226">Tipo de búsqueda que se va a realizar.</span><span class="sxs-lookup"><span data-stu-id="4d855-226">Type of search to perform.</span></span> <span data-ttu-id="4d855-227">Este valor puede ser una solicitud **de \_ \_ búsqueda de \_ Servicio SDP**, una **\_ solicitud de \_ atributo \_ de Servicio SDP** o una **solicitud de atributo de \_ búsqueda de servicio \_ \_ \_ SDP**.</span><span class="sxs-lookup"><span data-stu-id="4d855-227">This value can be one of **SDP\_SERVICE\_SEARCH\_REQUEST**, **SDP\_SERVICE\_ATTRIBUTE\_REQUEST**, or **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**.</span></span> <span data-ttu-id="4d855-228">Cada tipo de búsqueda está asociado a un mecanismo de búsqueda subyacente definido por la especificación SDP de Bluetooth.</span><span class="sxs-lookup"><span data-stu-id="4d855-228">Each search type is associated with an underlying search mechanism that is defined by the Bluetooth SDP specification.</span></span> <span data-ttu-id="4d855-229">Cada valor devuelto produce el formato descrito por la estructura [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) que se define anteriormente en esta sección (consultas de servicio avanzadas).</span><span class="sxs-lookup"><span data-stu-id="4d855-229">Each return results in the form described by the [**WSAQUERYSET**](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw) structure that is defined earlier in this (Advanced Service Queries) section.</span></span> |
| <span data-ttu-id="4d855-230">**serviceHandle**</span><span class="sxs-lookup"><span data-stu-id="4d855-230">**serviceHandle**</span></span> | <span data-ttu-id="4d855-231">Se utiliza para las búsquedas de atributos.</span><span class="sxs-lookup"><span data-stu-id="4d855-231">Used for attribute searches.</span></span> <span data-ttu-id="4d855-232">Este valor especifica el identificador de servicio con el que se van a consultar los atributos del miembro **pRange** .</span><span class="sxs-lookup"><span data-stu-id="4d855-232">This value specifies the service handle with which to query the attributes in the **pRange** member.</span></span>                                                                                                                                                                                                                                                                                                                                            |
| <span data-ttu-id="4d855-233">**UUID**</span><span class="sxs-lookup"><span data-stu-id="4d855-233">**uuids**</span></span>         | <span data-ttu-id="4d855-234">Se usa para las búsquedas de servicio y **serviceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="4d855-234">Used for service and **serviceAttribute** searches.</span></span> <span data-ttu-id="4d855-235">Este valor especifica el UUID que debe contener un registro para que coincida con la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="4d855-235">This value specifies the UUIDs that a record must contain to match the search.</span></span> <span data-ttu-id="4d855-236">Si se van a consultar menos de los **UUID máximos en el UUID \_ \_ de \_ consulta** , este valor establece el elemento SdpQueryUuid que sigue inmediatamente al último UUID válido en todos los ceros.</span><span class="sxs-lookup"><span data-stu-id="4d855-236">If less than **MAX\_UUIDS\_IN\_QUERY** UUIDs are to be queried, this value sets the SdpQueryUuid element that immediately follows the last valid UUID to all zeros.</span></span>                                                                                                                                                                       |
| <span data-ttu-id="4d855-237">**numRange**</span><span class="sxs-lookup"><span data-stu-id="4d855-237">**numRange**</span></span>      | <span data-ttu-id="4d855-238">Se usa para las búsquedas de atributos y **serviceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="4d855-238">Used for attribute and **serviceAttribute** searches.</span></span> <span data-ttu-id="4d855-239">Este valor especifica el número de elementos de **pRange**.</span><span class="sxs-lookup"><span data-stu-id="4d855-239">This value specifies the number of elements in **pRange**.</span></span>                                                                                                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="4d855-240">**pRange**</span><span class="sxs-lookup"><span data-stu-id="4d855-240">**pRange**</span></span>        | <span data-ttu-id="4d855-241">Se usa para las búsquedas de atributos y **serviceAttribute** .</span><span class="sxs-lookup"><span data-stu-id="4d855-241">Used for attribute and **serviceAttribute** searches.</span></span> <span data-ttu-id="4d855-242">Este valor especifica los valores de atributo que se van a recuperar para los registros coincidentes.</span><span class="sxs-lookup"><span data-stu-id="4d855-242">This value specifies the attribute values to retrieve for any matching records.</span></span>                                                                                                                                                                                                                                                                                                                                        |



 

<span data-ttu-id="4d855-243">Después de cada llamada correcta a la función [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) , **lpBlob** -> **pBlobData** apunta a un bloque de datos que contiene los valores que se muestran en la tabla siguiente.</span><span class="sxs-lookup"><span data-stu-id="4d855-243">After each successful call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function, **lpBlob**->**pBlobData** points to a block of data that contains the values listed in the following table.</span></span>

| <span data-ttu-id="4d855-244">Value</span><span class="sxs-lookup"><span data-stu-id="4d855-244">Value</span></span>                                                                                | <span data-ttu-id="4d855-245">Descripción</span><span class="sxs-lookup"><span data-stu-id="4d855-245">Description</span></span>                                                                                                                                                                                                                                                                                                                                          |
|--------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="4d855-246">**\_solicitud de \_ búsqueda de Servicio SDP \_**</span><span class="sxs-lookup"><span data-stu-id="4d855-246">**SDP\_SERVICE\_SEARCH\_REQUEST**</span></span>                                                    | <span data-ttu-id="4d855-247">Una matriz de identificadores de registro SDP que es idéntico a la **ServiceRecordHandleList** definida por Bluetooth 1,1 SDP 4.5.2.</span><span class="sxs-lookup"><span data-stu-id="4d855-247">An array of SDP record handles that is identical to the **ServiceRecordHandleList** defined by Bluetooth 1.1 SDP 4.5.2.</span></span> <span data-ttu-id="4d855-248">El número de identificadores de SDP devueltos se calcula mediante (**lpBlob**->cbSize)/**sizeof**(ulong).</span><span class="sxs-lookup"><span data-stu-id="4d855-248">The number of SDP handles that is returned is calculated by (**lpBlob**->cbSize)/**sizeof**(ULONG).</span></span> <span data-ttu-id="4d855-249">Todos los resultados se devuelven en una sola llamada a la función [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="4d855-249">All results are returned in a single call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span> |
| <span data-ttu-id="4d855-250">**SDP \_ Solicitud \_ de \_ atributo de servicio** o **solicitud de atributo de \_ búsqueda de servicio \_ \_ \_ SDP**</span><span class="sxs-lookup"><span data-stu-id="4d855-250">**SDP\_SERVICE\_ATTRIBUTE\_REQUEST** or **SDP\_SERVICE\_SEARCH\_ATTRIBUTE\_REQUEST**</span></span> | <span data-ttu-id="4d855-251">Un registro SDP de Bluetooth binario.</span><span class="sxs-lookup"><span data-stu-id="4d855-251">A binary Bluetooth SDP record.</span></span> <span data-ttu-id="4d855-252">Para **la \_ \_ \_ solicitud de atributo de Servicio SDP**, todos los resultados se devuelven en una sola llamada a la función [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) .</span><span class="sxs-lookup"><span data-stu-id="4d855-252">For **SDP\_SERVICE\_ATTRIBUTE\_REQUEST**, all results are returned in a single call to the [**WSALookupServiceNext**](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta) function.</span></span>                                                                                                                                                       |



 

> [!Note]  
> <span data-ttu-id="4d855-253">Si el miembro **lpBlob** no se especifica durante la entrada de una consulta de servicio, se realiza una búsqueda de servicio y atributo para el servicio especificado en el miembro **lpServiceClassId** en atributos de 0 a 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="4d855-253">If the **lpBlob** member is not specified during input for a service query, a service and attribute search is performed for the service specified in the **lpServiceClassId** member on attributes from 0 through 0xFFFF.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="4d855-254">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="4d855-254">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="4d855-255">Bluetooth y WSAQUERYSET para la consulta de servicio</span><span class="sxs-lookup"><span data-stu-id="4d855-255">Bluetooth and WSAQUERYSET for Service Inquiry</span></span>](bluetooth-and-wsaqueryset-for-service-inquiry.md)
</dt> <dt>

[<span data-ttu-id="4d855-256">Detección de dispositivos y servicios Bluetooth</span><span class="sxs-lookup"><span data-stu-id="4d855-256">Discovering Bluetooth Devices and Services</span></span>](discovering-bluetooth-devices-and-services.md)
</dt> <dt>

[<span data-ttu-id="4d855-257">Bluetooth y WSALookupServiceNext</span><span class="sxs-lookup"><span data-stu-id="4d855-257">Bluetooth and WSALookupServiceNext</span></span>](bluetooth-and-wsalookupservicenext.md)
</dt> <dt>

[<span data-ttu-id="4d855-258">Bluetooth y WSALookupServiceBegin para la consulta de dispositivo</span><span class="sxs-lookup"><span data-stu-id="4d855-258">Bluetooth and WSALookupServiceBegin for Device Inquiry</span></span>](bluetooth-and-wsalookupservicebegin-for-device-inquiry.md)
</dt> <dt>

[<span data-ttu-id="4d855-259">**\_servicio de consulta de BTH \_**</span><span class="sxs-lookup"><span data-stu-id="4d855-259">**BTH\_QUERY\_SERVICE**</span></span>](/windows/desktop/api/Ws2bth/ns-ws2bth-bth_query_service)
</dt> <dt>

[<span data-ttu-id="4d855-260">**conéctelo**</span><span class="sxs-lookup"><span data-stu-id="4d855-260">**connect**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-connect)
</dt> <dt>

[<span data-ttu-id="4d855-261">**SOCKADDR \_ BTH**</span><span class="sxs-lookup"><span data-stu-id="4d855-261">**SOCKADDR\_BTH**</span></span>](/windows/desktop/api/Ws2bth/ns-ws2bth-sockaddr_bth)
</dt> <dt>

[<span data-ttu-id="4d855-262">**WSAAddressToString**</span><span class="sxs-lookup"><span data-stu-id="4d855-262">**WSAAddressToString**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsaaddresstostringa)
</dt> <dt>

[<span data-ttu-id="4d855-263">**WSALookupServiceBegin**</span><span class="sxs-lookup"><span data-stu-id="4d855-263">**WSALookupServiceBegin**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicebegina)
</dt> <dt>

[<span data-ttu-id="4d855-264">**WSALookupServiceEnd**</span><span class="sxs-lookup"><span data-stu-id="4d855-264">**WSALookupServiceEnd**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupserviceend)
</dt> <dt>

[<span data-ttu-id="4d855-265">**WSALookupServiceNext**</span><span class="sxs-lookup"><span data-stu-id="4d855-265">**WSALookupServiceNext**</span></span>](/windows/desktop/api/winsock2/nf-winsock2-wsalookupservicenexta)
</dt> <dt>

[<span data-ttu-id="4d855-266">**WSAQUERYSET**</span><span class="sxs-lookup"><span data-stu-id="4d855-266">**WSAQUERYSET**</span></span>](/windows/desktop/api/winsock2/ns-winsock2-wsaquerysetw)
</dt> <dt>

[<span data-ttu-id="4d855-267">Windows Sockets</span><span class="sxs-lookup"><span data-stu-id="4d855-267">Windows Sockets</span></span>](/windows/desktop/WinSock/windows-sockets-start-page-2)
</dt> </dl>

