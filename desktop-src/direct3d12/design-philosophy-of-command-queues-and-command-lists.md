---
title: Diseño de la filosofía de las colas de comandos y listas de comandos
description: Los objetivos de habilitar la reutilización del trabajo de representación y del escalado multiproceso requieren cambios fundamentales en el modo en que las aplicaciones de Direct3D envían el trabajo de representación a la GPU.
ms.assetid: C85C8C41-2306-4568-8FAE-F57EDA624298
keywords:
- lista de comandos
- bundle
ms.localizationpriority: high
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 812275a630464dbe9137d587a672803f4d0c72f9
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "74104583"
---
# <a name="design-philosophy-of-command-queues-and-command-lists"></a><span data-ttu-id="8c96f-105">Diseño de la filosofía de las colas de comandos y listas de comandos</span><span class="sxs-lookup"><span data-stu-id="8c96f-105">Design Philosophy of Command Queues and Command Lists</span></span>

<span data-ttu-id="8c96f-106">Los objetivos de habilitar la reutilización del trabajo de representación y del escalado multiproceso requieren cambios fundamentales en el modo en que las aplicaciones de Direct3D envían el trabajo de representación a la GPU.</span><span class="sxs-lookup"><span data-stu-id="8c96f-106">The goals of enabling reuse of rendering work and of multi-threaded scaling, required fundamental changes to how Direct3D apps submit rendering work to the GPU.</span></span> <span data-ttu-id="8c96f-107">En Direct3D 12, el proceso de envío del trabajo de representación es diferente de las versiones anteriores de tres maneras importantes:</span><span class="sxs-lookup"><span data-stu-id="8c96f-107">In Direct3D 12, the process of submitting rendering work differs from earlier versions in three important ways:</span></span>

<dl> 1. <span data-ttu-id="8c96f-108">Eliminación del contexto inmediato.</span><span class="sxs-lookup"><span data-stu-id="8c96f-108">Elimination of the immediate context.</span></span> <span data-ttu-id="8c96f-109">Esto habilita el multithreading.</span><span class="sxs-lookup"><span data-stu-id="8c96f-109">This enables multi-threading.</span></span>  
2. <span data-ttu-id="8c96f-110">Las aplicaciones ahora poseen el modo en que las llamadas de representación se agrupan en elementos de trabajo de la unidad de procesamiento de gráficos (GPU).</span><span class="sxs-lookup"><span data-stu-id="8c96f-110">Apps now own how rendering calls are grouped into graphics processing unit (GPU) work items.</span></span> <span data-ttu-id="8c96f-111">Esto permite volver a usar.</span><span class="sxs-lookup"><span data-stu-id="8c96f-111">This enables re-use.</span></span>  
3. <span data-ttu-id="8c96f-112">Ahora, las aplicaciones controlan explícitamente Cuándo se envía el trabajo a la GPU.</span><span class="sxs-lookup"><span data-stu-id="8c96f-112">Apps now explicitly control when work is submitted to the GPU .</span></span> <span data-ttu-id="8c96f-113">Esto habilita los elementos 1 y 2.</span><span class="sxs-lookup"><span data-stu-id="8c96f-113">This enables items 1 and 2.</span></span>  
</dl>

-   [<span data-ttu-id="8c96f-114">Eliminación del contexto inmediato</span><span class="sxs-lookup"><span data-stu-id="8c96f-114">Removal of the immediate context</span></span>](#removal-of-the-immediate-context)
-   [<span data-ttu-id="8c96f-115">Agrupación de elementos de trabajo de GPU</span><span class="sxs-lookup"><span data-stu-id="8c96f-115">Grouping of GPU work items</span></span>](#grouping-of-gpu-work-items)
-   [<span data-ttu-id="8c96f-116">Envío de trabajo de GPU</span><span class="sxs-lookup"><span data-stu-id="8c96f-116">GPU work submission</span></span>](#gpu-work-submission)
-   [<span data-ttu-id="8c96f-117">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="8c96f-117">Related topics</span></span>](#related-topics)

## <a name="removal-of-the-immediate-context"></a><span data-ttu-id="8c96f-118">Eliminación del contexto inmediato</span><span class="sxs-lookup"><span data-stu-id="8c96f-118">Removal of the immediate context</span></span>

<span data-ttu-id="8c96f-119">El cambio más grande de Microsoft Direct3D 11 a Microsoft Direct3D 12 es que ya no hay un contexto único y inmediato asociado a un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="8c96f-119">The largest change from Microsoft Direct3D 11 to Microsoft Direct3D 12 is that there is no longer a single, immediate context associated with a device.</span></span> <span data-ttu-id="8c96f-120">En su lugar, para representar, las aplicaciones crean listas de comandos en las que se puede llamar a las API de representación tradicionales.</span><span class="sxs-lookup"><span data-stu-id="8c96f-120">Instead, to render, apps create command lists in which traditional rendering APIs can be called.</span></span> <span data-ttu-id="8c96f-121">Una lista de comandos es similar al método Render de una aplicación Direct3D 11 que usaba el contexto inmediato en que contiene llamadas que dibujan primitivas o cambian el estado de representación.</span><span class="sxs-lookup"><span data-stu-id="8c96f-121">A command list looks similar to the render method of a Direct3D 11 app that used the immediate context in that it contains calls that draw primitives or change the rendering state.</span></span> <span data-ttu-id="8c96f-122">Al igual que los contextos inmediatos, cada lista de comandos no es de subproceso libre; sin embargo, se pueden grabar varias listas de comandos simultáneamente, lo que aprovecha los procesadores modernos de varios núcleos.</span><span class="sxs-lookup"><span data-stu-id="8c96f-122">Like immediate contexts, each command list is not free-threaded; however, multiple command lists can be recorded concurrently, which takes advantage of modern, multi-core processors.</span></span>

<span data-ttu-id="8c96f-123">Normalmente, las listas de comandos se ejecutan una vez.</span><span class="sxs-lookup"><span data-stu-id="8c96f-123">Command lists are typically executed once.</span></span> <span data-ttu-id="8c96f-124">Sin embargo, se puede ejecutar varias veces una lista de comandos si la aplicación garantiza que las ejecuciones anteriores se hayan completado antes de enviar nuevas ejecuciones.</span><span class="sxs-lookup"><span data-stu-id="8c96f-124">However, a command list can be executed multiple times if the application ensures that the previous executions are complete before submitting new executions.</span></span> <span data-ttu-id="8c96f-125">Para obtener más información acerca de la sincronización de la lista de comandos, vea [Ejecutar y sincronizar listas de comandos](executing-and-synchronizing-command-lists.md).</span><span class="sxs-lookup"><span data-stu-id="8c96f-125">For more information about command list synchronization, see [Executing and synchronizing command lists](executing-and-synchronizing-command-lists.md).</span></span>

## <a name="grouping-of-gpu-work-items"></a><span data-ttu-id="8c96f-126">Agrupación de elementos de trabajo de GPU</span><span class="sxs-lookup"><span data-stu-id="8c96f-126">Grouping of GPU work items</span></span>

<span data-ttu-id="8c96f-127">Además de las listas de comandos, Direct3D 12 aprovecha la funcionalidad presente en todo el hardware en la actualidad agregando un segundo nivel de listas de comandos, que se denominan *agrupaciones*.</span><span class="sxs-lookup"><span data-stu-id="8c96f-127">In addition to command lists, Direct3D 12 takes advantage of functionality present in all hardware today by adding a second level of command lists, which are called *bundles*.</span></span> <span data-ttu-id="8c96f-128">Para ayudar a distinguir estos dos tipos, se puede hacer referencia a las listas de comandos de primer nivel como *listas de comandos directas*.</span><span class="sxs-lookup"><span data-stu-id="8c96f-128">To help to distinguish these two types, the first-level command lists can be referred to as *direct command lists*.</span></span> <span data-ttu-id="8c96f-129">El propósito de las agrupaciones es permitir que las aplicaciones agrupen un pequeño número de comandos de la API juntos para una ejecución posterior, repetidas desde las listas de comandos directas.</span><span class="sxs-lookup"><span data-stu-id="8c96f-129">The purpose of bundles is to allow apps to group a small number of API commands together for later, repeated execution from within direct command lists.</span></span> <span data-ttu-id="8c96f-130">En el momento de crear un paquete, el controlador realizará el preprocesamiento que sea posible para que la ejecución posterior sea eficaz.</span><span class="sxs-lookup"><span data-stu-id="8c96f-130">At the time of creating a bundle, the driver will perform as much pre-processing as possible to make later execution efficient.</span></span> <span data-ttu-id="8c96f-131">Después, los paquetes se pueden ejecutar desde varias listas de comandos y varias veces dentro de la misma lista de comandos.</span><span class="sxs-lookup"><span data-stu-id="8c96f-131">Bundles can then be executed from within multiple command lists and multiple times within the same command list.</span></span>

<span data-ttu-id="8c96f-132">La reutilización de los paquetes es un gran controlador de eficacia mejorada con subprocesos de CPU únicos.</span><span class="sxs-lookup"><span data-stu-id="8c96f-132">The re-use of bundles is a large driver of improved efficiency with single CPU threads.</span></span> <span data-ttu-id="8c96f-133">Dado que las agrupaciones se procesan previamente y se pueden enviar varias veces, existen algunas restricciones sobre las operaciones que se pueden realizar en una agrupación.</span><span class="sxs-lookup"><span data-stu-id="8c96f-133">Because bundles are pre-processed and can be submitted multiple times, there are certain restrictions on what operations can be performed within a bundle.</span></span> <span data-ttu-id="8c96f-134">Para obtener más información, vea [crear y grabar listas de comandos y agrupaciones](recording-command-lists-and-bundles.md).</span><span class="sxs-lookup"><span data-stu-id="8c96f-134">For more information, see [Creating and recording command lists and bundles](recording-command-lists-and-bundles.md).</span></span>

## <a name="gpu-work-submission"></a><span data-ttu-id="8c96f-135">Envío de trabajo de GPU</span><span class="sxs-lookup"><span data-stu-id="8c96f-135">GPU work submission</span></span>

<span data-ttu-id="8c96f-136">Para ejecutar el trabajo en la GPU, una aplicación debe enviar explícitamente una lista de comandos a una cola de comandos asociada con el dispositivo Direct3D.</span><span class="sxs-lookup"><span data-stu-id="8c96f-136">To execute work on the GPU, an app must explicitly submit a command list to a command queue associated with the Direct3D device.</span></span> <span data-ttu-id="8c96f-137">Una lista de comandos directa se puede enviar para su ejecución varias veces, pero la aplicación es responsable de garantizar que la lista de comandos directos ha terminado de ejecutarse en la GPU antes de volver a enviarla.</span><span class="sxs-lookup"><span data-stu-id="8c96f-137">A direct command list can be submitted for execution multiple times, but the app is responsible for ensuring that the direct command list has finished executing on the GPU before submitting it again.</span></span> <span data-ttu-id="8c96f-138">Las agrupaciones no tienen restricciones de uso simultáneo y se pueden ejecutar varias veces en varias listas de comandos, pero las agrupaciones no se pueden enviar directamente a una cola de comandos para su ejecución.</span><span class="sxs-lookup"><span data-stu-id="8c96f-138">Bundles have no concurrent-use restrictions and can be executed multiple times in multiple command lists, but bundles cannot be directly submitted to a command queue for execution.</span></span>

<span data-ttu-id="8c96f-139">Cualquier subproceso puede enviar una lista de comandos a cualquier cola de comandos en cualquier momento, y el tiempo de ejecución serializará automáticamente el envío de la lista de comandos en la cola de comandos mientras se conserva el orden de envío.</span><span class="sxs-lookup"><span data-stu-id="8c96f-139">Any thread may submit a command list to any command queue at any time, and the runtime will automatically serialize submission of the command list in the command queue while preserving the submission order.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8c96f-140">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="8c96f-140">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="8c96f-141">Envío de trabajo en Direct3D 12</span><span class="sxs-lookup"><span data-stu-id="8c96f-141">Work Submission in Direct3D 12</span></span>](command-queues-and-command-lists.md)
</dt> </dl>

 

 




