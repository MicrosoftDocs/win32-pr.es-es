---
description: Cuando una llamada está en el estado connected, los datos se pueden transportar a través de la llamada. El tipo de medio de llamada proporciona una indicación del tipo de datos (por ejemplo, su tipo de datos o protocolo de nivel superior) de este flujo multimedia.
ms.assetid: 3281387e-3f72-4fda-8199-b3ce6e45e910
title: Supervisión de medios
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: fb54989306fd80c48c0b99c9f8285a83b40bed25
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/03/2021
ms.locfileid: "105678638"
---
# <a name="media-monitoring"></a><span data-ttu-id="0ee51-104">Supervisión de medios</span><span class="sxs-lookup"><span data-stu-id="0ee51-104">Media Monitoring</span></span>

<span data-ttu-id="0ee51-105">Cuando una llamada está en el estado *Connected* , los datos se pueden transportar a través de la llamada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-105">When a call is in the *connected* state, data can be transported over the call.</span></span> <span data-ttu-id="0ee51-106">El tipo de medio de llamada proporciona una indicación del tipo de datos (por ejemplo, su tipo de datos o protocolo de nivel superior) de este flujo multimedia.</span><span class="sxs-lookup"><span data-stu-id="0ee51-106">The call media type provides an indication of the type of data (for example, its datatype, or higher-level protocol) of this media stream.</span></span>

<span data-ttu-id="0ee51-107">TAPI permite que se proporcionen aplicaciones con una notificación sobre los cambios en el tipo de archivo multimedia de una llamada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-107">TAPI allows applications to be provided with a notification about changes in a call's media type.</span></span> <span data-ttu-id="0ee51-108">La notificación proporciona una indicación del nuevo tipo de medio de la llamada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-108">The notification provides an indication of the call's new media type.</span></span> <span data-ttu-id="0ee51-109">El proveedor de servicios decide cómo desea tomar esta decisión.</span><span class="sxs-lookup"><span data-stu-id="0ee51-109">The service provider decides how it wants to make this determination.</span></span> <span data-ttu-id="0ee51-110">Por ejemplo, el proveedor de servicios podría usar el procesamiento de señales de la secuencia de medios para determinar el tipo de medio o podría basarse en patrones de timbre distintivos asignados a diferentes transmisiones multimedia o en elementos de información pasados en un protocolo de señal fuera de banda.</span><span class="sxs-lookup"><span data-stu-id="0ee51-110">For example, the service provider could use signal processing of the media stream to determine the media type, or it could rely on distinctive ringing patterns assigned to different media streams, or on information elements passed in an out-of-band signaling protocol.</span></span> <span data-ttu-id="0ee51-111">Independientemente de cómo se alcance la determinación del tipo de medio, la aplicación simplemente está informada sobre los cambios de tipo de medio en una llamada existente.</span><span class="sxs-lookup"><span data-stu-id="0ee51-111">Independent of how the media type determination is achieved, the application is simply informed about media type changes on an existing call.</span></span>

<span data-ttu-id="0ee51-112">Para obtener más información y una lista de los modos o tipos de medios TAPI definidos actualmente, vea [ \_ constantes LINEMEDIAMODE](linemediamode--constants.md).</span><span class="sxs-lookup"><span data-stu-id="0ee51-112">For more information and a list of currently defined TAPI media types or modes, see [LINEMEDIAMODE\_ Constants](linemediamode--constants.md).</span></span> <span data-ttu-id="0ee51-113">Los proveedores de servicios pueden implementar tipos de medios específicos del proveedor para dispositivos muy especializados.</span><span class="sxs-lookup"><span data-stu-id="0ee51-113">Service providers may implement provider-specific media types for highly specialized devices.</span></span> <span data-ttu-id="0ee51-114">Encontrará información en la documentación del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0ee51-114">Information on these will be found in device documentation.</span></span>

<span data-ttu-id="0ee51-115">Los tipos de medios definidos por TAPI incluyen:</span><span class="sxs-lookup"><span data-stu-id="0ee51-115">The media types defined by TAPI include:</span></span>

-   <span data-ttu-id="0ee51-116">Desconocido.</span><span class="sxs-lookup"><span data-stu-id="0ee51-116">Unknown.</span></span> <span data-ttu-id="0ee51-117">El tipo de medio de la llamada no se conoce actualmente; la llamada no está clasificada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-117">The media type of the call is not currently known—the call is unclassified.</span></span>
-   <span data-ttu-id="0ee51-118">Voz interactiva.</span><span class="sxs-lookup"><span data-stu-id="0ee51-118">Interactive voice.</span></span> <span data-ttu-id="0ee51-119">Se ha detectado energía de voz en la llamada y la llamada se trata como una llamada de voz interactiva con una persona en el extremo de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0ee51-119">Voice energy was detected on the call, and the call is handled as an interactive voice call with a person at the application's end.</span></span>
-   <span data-ttu-id="0ee51-120">Voz automatizada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-120">Automated voice.</span></span> <span data-ttu-id="0ee51-121">Se ha detectado energía de voz en la llamada, y se trata de una llamada de voz, pero sin ninguna persona en el extremo de la aplicación, como con una aplicación de equipo que responde.</span><span class="sxs-lookup"><span data-stu-id="0ee51-121">Voice energy was detected on the call, and the call is handled as a voice call but with no person at the application's end, such as with an answering machine application.</span></span>
-   <span data-ttu-id="0ee51-122">Módem de datos.</span><span class="sxs-lookup"><span data-stu-id="0ee51-122">Data modem.</span></span> <span data-ttu-id="0ee51-123">Una sesión de módem en la llamada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-123">A modem session on the call.</span></span> <span data-ttu-id="0ee51-124">Los protocolos de módem actuales requieren que la estación llamada inicie el protocolo de enlace.</span><span class="sxs-lookup"><span data-stu-id="0ee51-124">Current modem protocols require the called station to initiate the handshake.</span></span> <span data-ttu-id="0ee51-125">En el caso de una llamada de módem de datos de entrada, la aplicación normalmente no puede hacer ninguna detección positiva.</span><span class="sxs-lookup"><span data-stu-id="0ee51-125">For an incoming data modem call, the application can typically make no positive detection.</span></span> <span data-ttu-id="0ee51-126">La forma en que el proveedor de servicios toma esta decisión es su elección.</span><span class="sxs-lookup"><span data-stu-id="0ee51-126">How the service provider makes this determination is its choice.</span></span> <span data-ttu-id="0ee51-127">Por ejemplo, se puede usar un período de silencio justo después de responder a una llamada entrante como heurística para decidir que esto podría ser una llamada de módem de datos.</span><span class="sxs-lookup"><span data-stu-id="0ee51-127">For example, a period of silence just after answering an incoming call can be used as a heuristic to decide that this might be a data modem call.</span></span>
-   <span data-ttu-id="0ee51-128">Fax G3.</span><span class="sxs-lookup"><span data-stu-id="0ee51-128">G3 fax.</span></span> <span data-ttu-id="0ee51-129">Una sesión de fax del grupo 3 en la llamada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-129">A group 3 fax session on the call.</span></span>
-   <span data-ttu-id="0ee51-130">Fax G4.</span><span class="sxs-lookup"><span data-stu-id="0ee51-130">G4 fax.</span></span> <span data-ttu-id="0ee51-131">Una sesión de fax de grupo 4 en la llamada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-131">A group 4 fax session on the call.</span></span>
-   <span data-ttu-id="0ee51-132">TDD.</span><span class="sxs-lookup"><span data-stu-id="0ee51-132">TDD.</span></span> <span data-ttu-id="0ee51-133">El flujo multimedia de la llamada usa los dispositivos de telefonía para el protocolo sordos.</span><span class="sxs-lookup"><span data-stu-id="0ee51-133">The call's media stream uses the Telephony Devices for the Deaf protocol.</span></span>
-   <span data-ttu-id="0ee51-134">Datos digitales.</span><span class="sxs-lookup"><span data-stu-id="0ee51-134">Digital data.</span></span> <span data-ttu-id="0ee51-135">Flujo de datos digitales del formato no especificado.</span><span class="sxs-lookup"><span data-stu-id="0ee51-135">A digital data stream of unspecified format.</span></span>
-   <span data-ttu-id="0ee51-136">Teletexto, Videotex, télex, mixto.</span><span class="sxs-lookup"><span data-stu-id="0ee51-136">Teletex, Videotex, Telex, Mixed.</span></span> <span data-ttu-id="0ee51-137">Estos se corresponden con los servicios telemáticos del mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="0ee51-137">These correspond to the telematic services of the same names.</span></span>
-   <span data-ttu-id="0ee51-138">Editor ADSI.</span><span class="sxs-lookup"><span data-stu-id="0ee51-138">ADSI.</span></span> <span data-ttu-id="0ee51-139">Una sesión de interfaz de servicios de pantalla analógica en la llamada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-139">An Analog Display Services Interface session on the call.</span></span> <span data-ttu-id="0ee51-140">ADSI mejora las llamadas de voz con información alfanumérica descargada en el teléfono y el uso de botones flexibles en el teléfono.</span><span class="sxs-lookup"><span data-stu-id="0ee51-140">ADSI enhances voice calls with alphanumeric information downloaded to the phone and the use of soft buttons on the phone.</span></span>

<span data-ttu-id="0ee51-141">Una aplicación puede habilitar o deshabilitar la supervisión de medios en una llamada especificada con [**lineMonitorMedia**](/windows/desktop/api/Tapi/nf-tapi-linemonitormedia).</span><span class="sxs-lookup"><span data-stu-id="0ee51-141">An application can enable or disable media monitoring on a specified call with [**lineMonitorMedia**](/windows/desktop/api/Tapi/nf-tapi-linemonitormedia).</span></span> <span data-ttu-id="0ee51-142">La aplicación especifica qué tipos de medios está interesado en la supervisión y, cuando se habilita la supervisión multimedia, la detección de un cambio de tipo de medio hace que la aplicación reciba una notificación con el mensaje [**line \_ MONITORMEDIA**](line-monitormedia.md) .</span><span class="sxs-lookup"><span data-stu-id="0ee51-142">The application specifies which media types it is interested in monitoring, and when media monitoring is enabled, the detection of a media type change causes the application to be notified with the [**LINE\_MONITORMEDIA**](line-monitormedia.md) message.</span></span> <span data-ttu-id="0ee51-143">Este mensaje proporciona el identificador de llamada en el que se detectó el cambio de tipo de medio, así como el nuevo tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="0ee51-143">This message provides the call handle on which the media type change was detected as well as the new media type.</span></span>

<span data-ttu-id="0ee51-144">Existe una diferencia entre el tipo de medio de una llamada notificado por [**lineGetCallInfo**](/windows/desktop/api/Tapi/nf-tapi-linegetcallinfo) y los informes de eventos de tipo de medio por \_ mensajes MONITORMEDIA de línea.</span><span class="sxs-lookup"><span data-stu-id="0ee51-144">There is a distinction between the media type of a call as reported by [**lineGetCallInfo**](/windows/desktop/api/Tapi/nf-tapi-linegetcallinfo) and the media type event reports by LINE\_MONITORMEDIA messages.</span></span> <span data-ttu-id="0ee51-145">El tipo de medio de una llamada lo determinan exclusivamente las aplicaciones propietarias de la llamada y los eventos de supervisión de medios no cambian automáticamente.</span><span class="sxs-lookup"><span data-stu-id="0ee51-145">A call's media type is determined exclusively by owner applications of the call and is not automatically changed by media monitoring events.</span></span> <span data-ttu-id="0ee51-146">La única excepción es la determinación del tipo de medio inicial que puede realizar la biblioteca de vínculos dinámicos TAPI para seleccionar el primer propietario de una llamada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-146">The one exception is the initial media type determination that can be performed by the TAPI dynamic-link library to select the first owner of a call.</span></span> <span data-ttu-id="0ee51-147">En este caso, se puede argumentar que la biblioteca es el propietario de la llamada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-147">One could argue that in this case, the library is the owner of the call.</span></span>

<span data-ttu-id="0ee51-148">La supervisión del tipo de medio predeterminado se realiza para los tipos de medios para los que se ha abierto el dispositivo de línea.</span><span class="sxs-lookup"><span data-stu-id="0ee51-148">Default media type monitoring is performed for the media types for which the line device has been opened.</span></span> <span data-ttu-id="0ee51-149">Esto permite determinar el tipo de archivo multimedia de una llamada entrante antes de que la llamada se entregue a una aplicación en función de lo que la aplicación requiera.</span><span class="sxs-lookup"><span data-stu-id="0ee51-149">This allows an incoming call's media type to be determined before the call is handed to an application based on what the application demands.</span></span> <span data-ttu-id="0ee51-150">El ámbito de la supervisión multimedia de una llamada está limitado por la duración de la llamada.</span><span class="sxs-lookup"><span data-stu-id="0ee51-150">The scope of the media monitoring of a call is bound by the lifetime of the call.</span></span> <span data-ttu-id="0ee51-151">La supervisión multimedia en una llamada finaliza en cuanto la llamada se *desconecta* o se queda *inactiva*.</span><span class="sxs-lookup"><span data-stu-id="0ee51-151">Media monitoring on a call ends as soon as the call *disconnects* or goes *idle*.</span></span>

<span data-ttu-id="0ee51-152">Una aplicación puede obtener los identificadores de dispositivo para varias clases de dispositivo asociadas a una línea abierta llamando a [**lineGetID**](/windows/desktop/api/Tapi/nf-tapi-linegetid).</span><span class="sxs-lookup"><span data-stu-id="0ee51-152">An application can obtain device identifiers for various device classes associated with an opened line by calling [**lineGetID**](/windows/desktop/api/Tapi/nf-tapi-linegetid).</span></span> <span data-ttu-id="0ee51-153">Esta función toma un identificador de línea, una dirección o un identificador de llamada y una descripción de clase de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0ee51-153">This function takes a line handle, address, or call handle and a device class description.</span></span> <span data-ttu-id="0ee51-154">Devuelve el identificador de dispositivo para el dispositivo de la clase de dispositivo determinada que está asociada con el dispositivo, la dirección o la llamada de línea abierta.</span><span class="sxs-lookup"><span data-stu-id="0ee51-154">It returns the device identifier for the device of the given device class that is associated with the open line device, address, or call.</span></span> <span data-ttu-id="0ee51-155">Si la clase de dispositivo es "TAPI/línea", se devuelve el identificador de dispositivo del dispositivo de línea.</span><span class="sxs-lookup"><span data-stu-id="0ee51-155">If the device class is "tapi/line," then the device identifier of the line device is returned.</span></span> <span data-ttu-id="0ee51-156">Si la clase de dispositivo es "MCI/Wave", se devuelve el identificador de dispositivo de un dispositivo MCI WaveAudio (si se admite), lo que permite actividades como la grabación o reproducción de audio sobre la llamada en la línea.</span><span class="sxs-lookup"><span data-stu-id="0ee51-156">If the device class is "mci/wave," then the device identifier of an mci waveaudio device is returned (if supported), which allows activities such as the recording or playback of audio over the call on the line.</span></span>

<span data-ttu-id="0ee51-157">La aplicación puede usar el identificador de dispositivo devuelto con la API multimedia correspondiente para consultar las capacidades del dispositivo y, posteriormente, abrir el dispositivo multimedia.</span><span class="sxs-lookup"><span data-stu-id="0ee51-157">The application can use the returned device identifier with the corresponding media API to query the device's capabilities and subsequently open the media device.</span></span> <span data-ttu-id="0ee51-158">Por ejemplo, si la aplicación necesita usar la línea como un dispositivo de forma de onda, primero debe llamar a [**waveInGetDevCaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps) y/o [**waveOutGetDevCaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) para determinar las capacidades de la forma de onda del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0ee51-158">For example, if your application needs to use the line as a waveform device, it must first call [**waveInGetDevCaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveingetdevcaps) and/or [**waveOutGetDevCaps**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutgetdevcaps) to determine the waveform capabilities of the device.</span></span> <span data-ttu-id="0ee51-159">El formato de datos de forma de onda típico que admite telefonía en Norteamérica es la ley de 8 bits m-Law en 8000 muestras por segundo, aunque el controlador de dispositivo de onda puede convertir esta velocidad de ejemplo y companding a otros formatos de audio multimedia más comunes.</span><span class="sxs-lookup"><span data-stu-id="0ee51-159">The typical waveform data format supported by telephony in North America is 8-bit m-law at 8000 samples per second, although the wave device driver can convert this sample rate and companding to other more common multimedia audio formats.</span></span>

<span data-ttu-id="0ee51-160">Para abrir posteriormente un dispositivo de línea para la reproducción de audio mediante la API de onda, una aplicación llama a [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen).</span><span class="sxs-lookup"><span data-stu-id="0ee51-160">To subsequently open a line device for audio playback using the waveform API, an application calls [**waveOutOpen**](/windows/win32/api/mmeapi/nf-mmeapi-waveoutopen).</span></span> <span data-ttu-id="0ee51-161">La implementación de **waveOutOpen** es específica del dispositivo y hay una variedad de opciones para implementar esta función.</span><span class="sxs-lookup"><span data-stu-id="0ee51-161">The implementation of **waveOutOpen** is device specific, and there are a variety of options for implementing this function.</span></span>

 

 
