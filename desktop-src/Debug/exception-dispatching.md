---
description: Cuando se produce una excepción de hardware o software, el procesador detiene la ejecución en el punto en el que se produjo la excepción y transfiere el control al sistema.
ms.assetid: 35a1b9bd-8da9-47e6-beda-e0b159bd840d
title: Envío de excepciones
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: e02b40aa132541fe88d692cbbf1881a8b620a209
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104152733"
---
# <a name="exception-dispatching"></a><span data-ttu-id="62ec0-103">Envío de excepciones</span><span class="sxs-lookup"><span data-stu-id="62ec0-103">Exception Dispatching</span></span>

<span data-ttu-id="62ec0-104">Cuando se produce una excepción de hardware o software, el procesador detiene la ejecución en el punto en el que se produjo la excepción y transfiere el control al sistema.</span><span class="sxs-lookup"><span data-stu-id="62ec0-104">When a hardware or software exception occurs, the processor stops execution at the point at which the exception occurred and transfers control to the system.</span></span> <span data-ttu-id="62ec0-105">En primer lugar, el sistema guarda el estado de la máquina del subproceso actual y la información que describe la excepción.</span><span class="sxs-lookup"><span data-stu-id="62ec0-105">First, the system saves both the machine state of the current thread and information that describes the exception.</span></span> <span data-ttu-id="62ec0-106">Después, el sistema intenta encontrar un controlador de excepciones para controlar la excepción.</span><span class="sxs-lookup"><span data-stu-id="62ec0-106">The system then attempts to find an exception handler to handle the exception.</span></span>

<span data-ttu-id="62ec0-107">El estado de la máquina del subproceso en el que se produjo la excepción se guarda en una estructura de [**contexto**](/windows/desktop/api/WinNT/ns-winnt-arm64_nt_context) .</span><span class="sxs-lookup"><span data-stu-id="62ec0-107">The machine state of the thread in which the exception occurred is saved in a [**CONTEXT**](/windows/desktop/api/WinNT/ns-winnt-arm64_nt_context) structure.</span></span> <span data-ttu-id="62ec0-108">Esta información (denominada *registro de contexto*) permite al sistema continuar la ejecución en el punto de la excepción si la excepción se controla correctamente.</span><span class="sxs-lookup"><span data-stu-id="62ec0-108">This information (called the *context record*) enables the system to continue execution at the point of the exception if the exception is successfully handled.</span></span> <span data-ttu-id="62ec0-109">La descripción de la excepción (denominada **registro de excepción**) se guarda en una estructura de [**\_ registro de excepciones**](/windows/desktop/api/WinNT/ns-winnt-exception_record) .</span><span class="sxs-lookup"><span data-stu-id="62ec0-109">The description of the exception (called the **exception record**) is saved in an [**EXCEPTION\_RECORD**](/windows/desktop/api/WinNT/ns-winnt-exception_record) structure.</span></span> <span data-ttu-id="62ec0-110">Dado que almacena la información dependiente del equipo del registro de contexto por separado de la información independiente del equipo del registro de excepción, el mecanismo de control de excepciones es portable a distintas plataformas.</span><span class="sxs-lookup"><span data-stu-id="62ec0-110">Because it stores the machine-dependent information of the context record separately from the machine-independent information of the exception record, the exception-handling mechanism is portable to different platforms.</span></span>

<span data-ttu-id="62ec0-111">La información en los registros de contexto y de excepción está disponible por medio de la función [**GetExceptionInformation**](getexceptioninformation.md) y puede ponerse a disposición de los controladores de excepciones que se ejecuten como resultado de la excepción.</span><span class="sxs-lookup"><span data-stu-id="62ec0-111">The information in both the context and exception records is available by means of the [**GetExceptionInformation**](getexceptioninformation.md) function, and can be made available to any exception handlers that are executed as a result of the exception.</span></span> <span data-ttu-id="62ec0-112">El registro de excepciones incluye la siguiente información.</span><span class="sxs-lookup"><span data-stu-id="62ec0-112">The exception record includes the following information.</span></span>

-   <span data-ttu-id="62ec0-113">Código de excepción que identifica el tipo de excepción.</span><span class="sxs-lookup"><span data-stu-id="62ec0-113">An exception code that identifies the type of exception.</span></span>
-   <span data-ttu-id="62ec0-114">Marcas que indican si la excepción es continuable.</span><span class="sxs-lookup"><span data-stu-id="62ec0-114">Flags indicating whether the exception is continuable.</span></span> <span data-ttu-id="62ec0-115">Cualquier intento de continuar la ejecución después de una excepción no continuada genera otra excepción.</span><span class="sxs-lookup"><span data-stu-id="62ec0-115">Any attempt to continue execution after a noncontinuable exception generates another exception.</span></span>
-   <span data-ttu-id="62ec0-116">Puntero a otro registro de excepción.</span><span class="sxs-lookup"><span data-stu-id="62ec0-116">A pointer to another exception record.</span></span> <span data-ttu-id="62ec0-117">Esto facilita la creación de una lista vinculada de excepciones si se producen excepciones anidadas.</span><span class="sxs-lookup"><span data-stu-id="62ec0-117">This facilitates creation of a linked list of exceptions if nested exceptions occur.</span></span>
-   <span data-ttu-id="62ec0-118">Dirección en la que se produjo la excepción.</span><span class="sxs-lookup"><span data-stu-id="62ec0-118">The address at which the exception occurred.</span></span>
-   <span data-ttu-id="62ec0-119">Matriz de argumentos que proporcionan información adicional sobre la excepción.</span><span class="sxs-lookup"><span data-stu-id="62ec0-119">An array of arguments that provide additional information about the exception.</span></span>

<span data-ttu-id="62ec0-120">Cuando se produce una excepción en el código de modo de usuario, el sistema utiliza el siguiente orden de búsqueda para encontrar un controlador de excepciones:</span><span class="sxs-lookup"><span data-stu-id="62ec0-120">When an exception occurs in user-mode code, the system uses the following search order to find an exception handler:</span></span>

1.  <span data-ttu-id="62ec0-121">Si se está depurando el proceso, el sistema lo notifica al depurador.</span><span class="sxs-lookup"><span data-stu-id="62ec0-121">If the process is being debugged, the system notifies the debugger.</span></span> <span data-ttu-id="62ec0-122">Para obtener más información, vea [control de excepciones del depurador](debugger-exception-handling.md).</span><span class="sxs-lookup"><span data-stu-id="62ec0-122">For more information, see [Debugger Exception Handling](debugger-exception-handling.md).</span></span>
2.  <span data-ttu-id="62ec0-123">Si no se está depurando el proceso, o si el depurador asociado no controla la excepción, el sistema intenta encontrar un controlador de excepciones basado en marco buscando en los marcos de pila del subproceso en el que se produjo la excepción.</span><span class="sxs-lookup"><span data-stu-id="62ec0-123">If the process is not being debugged, or if the associated debugger does not handle the exception, the system attempts to locate a frame-based exception handler by searching the stack frames of the thread in which the exception occurred.</span></span> <span data-ttu-id="62ec0-124">El sistema busca primero en el marco de pila actual y, a continuación, busca en los marcos de pila anteriores en orden inverso.</span><span class="sxs-lookup"><span data-stu-id="62ec0-124">The system searches the current stack frame first, then searches through preceding stack frames in reverse order.</span></span>
3.  <span data-ttu-id="62ec0-125">Si no se puede encontrar ningún controlador basado en fotogramas, o si ningún controlador basado en marco controla la excepción, pero el proceso se está depurando, el sistema notifica al depurador por segunda vez.</span><span class="sxs-lookup"><span data-stu-id="62ec0-125">If no frame-based handler can be found, or no frame-based handler handles the exception, but the process is being debugged, the system notifies the debugger a second time.</span></span>
4.  <span data-ttu-id="62ec0-126">Si no se está depurando el proceso, o si el depurador asociado no controla la excepción, el sistema proporciona el control predeterminado basado en el tipo de excepción.</span><span class="sxs-lookup"><span data-stu-id="62ec0-126">If the process is not being debugged, or if the associated debugger does not handle the exception, the system provides default handling based on the exception type.</span></span> <span data-ttu-id="62ec0-127">Para la mayoría de las excepciones, la acción predeterminada es llamar a la función [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) .</span><span class="sxs-lookup"><span data-stu-id="62ec0-127">For most exceptions, the default action is to call the [**ExitProcess**](/windows/win32/api/processthreadsapi/nf-processthreadsapi-exitprocess) function.</span></span>

<span data-ttu-id="62ec0-128">Cuando se produce una excepción en el código en modo kernel, el sistema busca en los marcos de pila de la pila de kernel en un intento de buscar un controlador de excepciones.</span><span class="sxs-lookup"><span data-stu-id="62ec0-128">When an exception occurs in kernel-mode code, the system searches the stack frames of the kernel stack in an attempt to locate an exception handler.</span></span> <span data-ttu-id="62ec0-129">Si no se encuentra un controlador o ningún controlador controla la excepción, el sistema se apaga como si se hubiera llamado a la función [**ExitWindows**](/windows/win32/api/winuser/nf-winuser-exitwindows) .</span><span class="sxs-lookup"><span data-stu-id="62ec0-129">If a handler cannot be located or no handler handles the exception, the system is shut down as if the [**ExitWindows**](/windows/win32/api/winuser/nf-winuser-exitwindows) function had been called.</span></span>

 

 
