---
description: Las instalaciones simultáneas, también denominadas instalaciones anidadas, son una característica desusada de la Windows Installer.
ms.assetid: 579ae4ee-47a0-440e-81ca-ea8bf60c5349
title: Instalaciones simultáneas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d89f2ef4af062c8151935fefab471603f79d7633
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "103910986"
---
# <a name="concurrent-installations"></a><span data-ttu-id="fba33-103">Instalaciones simultáneas</span><span class="sxs-lookup"><span data-stu-id="fba33-103">Concurrent Installations</span></span>

<span data-ttu-id="fba33-104">Las instalaciones simultáneas, también denominadas instalaciones anidadas, son una característica desusada de la Windows Installer.</span><span class="sxs-lookup"><span data-stu-id="fba33-104">Concurrent Installations, also called Nested Installations, is a deprecated feature of the Windows Installer.</span></span> <span data-ttu-id="fba33-105">Es posible que se produzca un error en las aplicaciones instaladas con instalaciones simultáneas porque son difíciles de atender correctamente a los clientes.</span><span class="sxs-lookup"><span data-stu-id="fba33-105">Applications installed with concurrent installations can eventually fail because they are difficult for customers to service correctly.</span></span> <span data-ttu-id="fba33-106">No use instalaciones simultáneas para instalar productos que están diseñados para publicarse en el público.</span><span class="sxs-lookup"><span data-stu-id="fba33-106">Do not use concurrent installations to install products that are intended to be released to the public.</span></span> <span data-ttu-id="fba33-107">Las instalaciones simultáneas pueden tener una aplicabilidad limitada en entornos corporativos controlados cuando se usan para instalar aplicaciones que no están destinadas a la versión pública.</span><span class="sxs-lookup"><span data-stu-id="fba33-107">Concurrent installations can have limited applicability in controlled corporate environments when used to install applications that are not intended for public release.</span></span> <span data-ttu-id="fba33-108">La documentación de instalaciones simultáneas se proporciona para los autores de paquetes que desean usar instalaciones simultáneas con aplicaciones que no son para la distribución pública.</span><span class="sxs-lookup"><span data-stu-id="fba33-108">The concurrent installations documentation is provided for package authors that wish to use concurrent installations with applications that are not for public distribution.</span></span>

<span data-ttu-id="fba33-109">Una acción de instalación simultánea instala otro paquete de Windows Installer durante una instalación en ejecución.</span><span class="sxs-lookup"><span data-stu-id="fba33-109">A concurrent installation action installs another Windows Installer package during a currently running installation.</span></span> <span data-ttu-id="fba33-110">Una instalación simultánea se agrega a un paquete mediante la creación de una acción de instalación simultánea en la [tabla CustomAction](customaction-table.md) y la programación de esta acción personalizada en las tablas de secuencia.</span><span class="sxs-lookup"><span data-stu-id="fba33-110">A concurrent installation is added to a package by authoring a concurrent installation action into the [CustomAction table](customaction-table.md) and scheduling this custom action into the sequence tables.</span></span> <span data-ttu-id="fba33-111">El campo de destino de la tabla CustomAction contiene una cadena de valores de propiedad pública utilizada por la instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="fba33-111">The Target field of the CustomAction table contains a string of public property settings used by the concurrent installation.</span></span> <span data-ttu-id="fba33-112">El campo de origen de la tabla CustomAction identifica el paquete simultáneo.</span><span class="sxs-lookup"><span data-stu-id="fba33-112">The Source field of the CustomAction table identifies the concurrent package.</span></span> <span data-ttu-id="fba33-113">Una acción de instalación simultánea solo puede reinstalar o quitar una aplicación que haya instalado el paquete de instalación de la aplicación actual.</span><span class="sxs-lookup"><span data-stu-id="fba33-113">A concurrent installation action can only reinstall or remove an application that has been installed by the current application's installation package.</span></span>

<span data-ttu-id="fba33-114">El tipo de acción de instalación simultánea se especifica en el campo tipo de la tabla CustomAction.</span><span class="sxs-lookup"><span data-stu-id="fba33-114">The type of concurrent installation action is specified in the Type field of the CustomAction table.</span></span> <span data-ttu-id="fba33-115">Dependiendo del tipo de acción personalizada, el paquete de la aplicación simultánea puede residir en un subalmacenamiento del paquete principal, como un archivo en una ubicación especificada por una propiedad o como una aplicación anunciada en el equipo del usuario.</span><span class="sxs-lookup"><span data-stu-id="fba33-115">Depending upon the custom action type, the package for the concurrent application can reside in a substorage of the main package, as a file at a location specified by a property, or as an advertised application on the user's machine.</span></span> <span data-ttu-id="fba33-116">Los siguientes tipos de acciones personalizadas realizan una instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="fba33-116">The following types of custom actions perform a concurrent installation.</span></span>



| <span data-ttu-id="fba33-117">Tipo de acción personalizada</span><span class="sxs-lookup"><span data-stu-id="fba33-117">Custom action type</span></span>                                 | <span data-ttu-id="fba33-118">Descripción</span><span class="sxs-lookup"><span data-stu-id="fba33-118">Description</span></span>                                                                     |
|----------------------------------------------------|---------------------------------------------------------------------------------|
| [<span data-ttu-id="fba33-119">Tipo de acción personalizada 7</span><span class="sxs-lookup"><span data-stu-id="fba33-119">Custom Action Type 7</span></span>](custom-action-type-7.md)   | <span data-ttu-id="fba33-120">Instalación simultánea de un producto que reside en el paquete de instalación.</span><span class="sxs-lookup"><span data-stu-id="fba33-120">Concurrent installation of a product residing in the installation package.</span></span>      |
| [<span data-ttu-id="fba33-121">Tipo de acción personalizada 23</span><span class="sxs-lookup"><span data-stu-id="fba33-121">Custom Action Type 23</span></span>](custom-action-type-23.md) | <span data-ttu-id="fba33-122">Instalación simultánea de un paquete del instalador en el árbol de origen actual.</span><span class="sxs-lookup"><span data-stu-id="fba33-122">Concurrent installation of an installer package within the current source tree.</span></span> |
| [<span data-ttu-id="fba33-123">Tipo de acción personalizada 39</span><span class="sxs-lookup"><span data-stu-id="fba33-123">Custom Action Type 39</span></span>](custom-action-type-39.md) | <span data-ttu-id="fba33-124">Instalación simultánea de un paquete de instalador anunciado.</span><span class="sxs-lookup"><span data-stu-id="fba33-124">Concurrent installation of an advertised installer package.</span></span>                     |



 

<span data-ttu-id="fba33-125">Una instalación simultánea comparte la misma interfaz de usuario y la misma configuración de registro que la instalación principal.</span><span class="sxs-lookup"><span data-stu-id="fba33-125">A concurrent installation shares the same user interface and logging settings as the main installation.</span></span>

<span data-ttu-id="fba33-126">Las acciones de instalación simultáneas se deben colocar entre la [acción InstallInitialize](installinitialize-action.md) y la [acción InstallFinalize](installfinalize-action.md) de la secuencia de acciones de la instalación principal.</span><span class="sxs-lookup"><span data-stu-id="fba33-126">Concurrent installation actions should be placed between the [InstallInitialize action](installinitialize-action.md) and [InstallFinalize action](installfinalize-action.md) of the main installation's action sequence.</span></span> <span data-ttu-id="fba33-127">Tras la reversión de la instalación principal, el instalador revierte también la instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="fba33-127">Upon rollback of the main installation, the installer will then rollback the concurrent installation as well.</span></span> <span data-ttu-id="fba33-128">El uso de la [ejecución aplazada](deferred-execution-custom-actions.md) con acciones de instalación simultáneas no es necesario porque el instalador combina la información de reversión de las instalaciones simultáneas y principales.</span><span class="sxs-lookup"><span data-stu-id="fba33-128">The use of [deferred execution](deferred-execution-custom-actions.md) with concurrent installation actions is unnecessary because the installer combines rollback information from the concurrent and main installations.</span></span> <span data-ttu-id="fba33-129">Todos los cambios se invierten en una instalación de reversión.</span><span class="sxs-lookup"><span data-stu-id="fba33-129">All changes are reversed upon a rollback installation.</span></span>

<span data-ttu-id="fba33-130">Los valores devueltos para las acciones de instalación simultáneas son los mismos que para otras acciones personalizadas.</span><span class="sxs-lookup"><span data-stu-id="fba33-130">The return values for concurrent installation actions are the same as for other custom actions.</span></span> <span data-ttu-id="fba33-131">Vea [valores devueltos de la acción personalizada](custom-action-return-values.md).</span><span class="sxs-lookup"><span data-stu-id="fba33-131">See [Custom Action Return Values](custom-action-return-values.md).</span></span>

<span data-ttu-id="fba33-132">Acciones estándar o personalizadas que especifican un reinicio automático del sistema o solicitan al usuario que se reinicie, también pueden realizar el reinicio o la solicitud desde una instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="fba33-132">Standard or custom actions that specify an automatic restart of the system, or request the user to restart, can also perform restart or request from within a concurrent installation.</span></span>

<span data-ttu-id="fba33-133">Una vez que el instalador inicia una instalación simultánea, bloquea todas las demás instalaciones hasta que se completa la instalación simultánea y antes de continuar con la instalación principal.</span><span class="sxs-lookup"><span data-stu-id="fba33-133">Once the installer begins a concurrent installation, it locks out all other installations until the concurrent installation is complete and before continuing the main installation.</span></span> <span data-ttu-id="fba33-134">El instalador solo puede ejecutar instalaciones simultáneas como acciones personalizadas sincrónicas.</span><span class="sxs-lookup"><span data-stu-id="fba33-134">The installer can only execute concurrent installations as synchronous custom actions.</span></span> <span data-ttu-id="fba33-135">Vea [acciones personalizadas sincrónicas y asincrónicas](synchronous-and-asynchronous-custom-actions.md).</span><span class="sxs-lookup"><span data-stu-id="fba33-135">See [Synchronous and Asynchronous Custom Actions](synchronous-and-asynchronous-custom-actions.md).</span></span> <span data-ttu-id="fba33-136">Las marcas de opciones descritas en [Opciones de procesamiento de devolución de acción personalizadas](custom-action-return-processing-options.md) se deben establecer en ninguno (+ 0) o **msidbCustomActionTypeContinue** (+ 64).</span><span class="sxs-lookup"><span data-stu-id="fba33-136">The option flags described in [Custom Action Return Processing Options](custom-action-return-processing-options.md) must be set to none (+0) or **msidbCustomActionTypeContinue** (+64).</span></span>

<span data-ttu-id="fba33-137">Una acción de instalación simultánea puede instalar una aplicación para que se ejecute de forma local, ejecutar desde el origen, volver a instalar o quitar de la misma manera que cuando se usa [**MsiInstallProduct**](/windows/desktop/api/Msi/nf-msi-msiinstallproducta) para una instalación normal.</span><span class="sxs-lookup"><span data-stu-id="fba33-137">A concurrent installation action can install an application to be run locally, to run from source, to be reinstalled, or to be removed in the same manner as when using [**MsiInstallProduct**](/windows/desktop/api/Msi/nf-msi-msiinstallproducta) for a regular installation.</span></span> <span data-ttu-id="fba33-138">Para especificar el tipo de instalación, pase la propiedad [**AddLocal**](addlocal.md), [**ADDSOURCE**](addsource.md), [**REINSTALL**](reinstall.md)o [**Remove**](remove.md) a la acción de instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="fba33-138">To specify the type of installation, pass either the [**ADDLOCAL**](addlocal.md), [**ADDSOURCE**](addsource.md), [**REINSTALL**](reinstall.md), or [**REMOVE**](remove.md) property to the concurrent installation action.</span></span>

<span data-ttu-id="fba33-139">Las acciones de instalación simultáneas se pueden crear en pares, una acción que se usa para instalar y la otra acción que se usa para quitar la instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="fba33-139">Concurrent installation actions can be authored in pairs, one action used for installing and the other action used for removing the concurrent installation.</span></span> <span data-ttu-id="fba33-140">Normalmente, se usa una [acción personalizada tipo 7](custom-action-type-7.md) o [acción personalizada tipo 23](custom-action-type-23.md) para instalar.</span><span class="sxs-lookup"><span data-stu-id="fba33-140">A [Custom Action Type 7](custom-action-type-7.md) or [Custom Action Type 23](custom-action-type-23.md) is typically used to install.</span></span> <span data-ttu-id="fba33-141">Un [tipo de acción personalizada 39](custom-action-type-39.md) se usa normalmente para quitar la instalación simultánea cuando se desinstala el producto primario.</span><span class="sxs-lookup"><span data-stu-id="fba33-141">A [Custom Action Type 39](custom-action-type-39.md) is typically used to remove the concurrent installation when the parent product is uninstalled.</span></span> <span data-ttu-id="fba33-142">El registro de la acción personalizada de eliminación en la [tabla CustomAction](customaction-table.md) puede tener el GUID del código de producto en el campo de origen y "quitar = todos" en el campo de destino.</span><span class="sxs-lookup"><span data-stu-id="fba33-142">The record for the removal custom action in the [CustomAction table](customaction-table.md) can have the product code GUID in the Source field and "REMOVE=ALL" in the Target field.</span></span> <span data-ttu-id="fba33-143">Las dos acciones personalizadas deben crearse en la tabla de secuencia de acción con condiciones mutuamente excluyentes.</span><span class="sxs-lookup"><span data-stu-id="fba33-143">The two custom actions need to be authored in the action sequence table with mutually exclusive conditions.</span></span> <span data-ttu-id="fba33-144">Por ejemplo, la acción personalizada que instala el producto puede tener "no instalado" en su campo condición y la acción personalizada quita la instalación simultánea puede tener el campo quitar = "todo" en su condición.</span><span class="sxs-lookup"><span data-stu-id="fba33-144">For example, the custom action that installs the product can have "NOT Installed" in its Condition field and the custom action removes the concurrent installation can have REMOVE="ALL" in its Condition field.</span></span>

<span data-ttu-id="fba33-145">No hay ningún método para consultar el costo de un paquete.</span><span class="sxs-lookup"><span data-stu-id="fba33-145">There is no method for querying a package for its cost.</span></span> <span data-ttu-id="fba33-146">Esto hace que el costo de una instalación simultánea sea difícil.</span><span class="sxs-lookup"><span data-stu-id="fba33-146">This makes the costing of a concurrent installations difficult.</span></span> <span data-ttu-id="fba33-147">Se deben agregar filas a la [tabla ReserveCost](reservecost-table.md) para indicar las carpetas y los costos peores del componente asociados a la instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="fba33-147">Rows must be added to the [ReserveCost table](reservecost-table.md) to indicate the folders and worst-case costs of the component associated with the concurrent install.</span></span>

<span data-ttu-id="fba33-148">Las únicas [Opciones de procesamiento que devuelven la acción personalizada](custom-action-return-processing-options.md) disponibles con las acciones de instalación simultáneas son ninguno (+ 0) o **msidbCustomActionTypeContinue** (+ 64).</span><span class="sxs-lookup"><span data-stu-id="fba33-148">The only [Custom Action Return Processing Options](custom-action-return-processing-options.md) available with concurrent installation actions are none (+0) or **msidbCustomActionTypeContinue** (+64).</span></span>

<span data-ttu-id="fba33-149">Tenga en cuenta que una instalación primaria no puede llamar a su propio paquete como una acción de instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="fba33-149">Note that a parent installation cannot call its own package as a concurrent installation action.</span></span>

<span data-ttu-id="fba33-150">Tenga en cuenta que si una instalación por equipo intenta ejecutar una instalación simultánea por usuario, el instalador registra la instalación primaria como por usuario de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="fba33-150">Note that if a per-machine installation attempts to run a per-user concurrent installation, the installer registers the parent installation as per-user by default.</span></span> <span data-ttu-id="fba33-151">Esto puede hacer que el instalador Quite incorrectamente la aplicación porque el instalador intenta desinstalar la aplicación por equipo cuando realmente se registra como por usuario.</span><span class="sxs-lookup"><span data-stu-id="fba33-151">This can cause the installer to incorrectly remove the application because the installer attempts to uninstall the application per-machine when it is actually registered as per-user.</span></span> <span data-ttu-id="fba33-152">Para forzar el estado de una instalación simultánea a fin de realizar un seguimiento del estado de su instalación primaria, escriba ALLUSERS = " \[ AllUsers \] " en la columna target de la [tabla CustomAction](customaction-table.md).</span><span class="sxs-lookup"><span data-stu-id="fba33-152">To force the state of a concurrent installation to track the state of its parent installation, enter ALLUSERS="\[ALLUSERS\]" in the Target column of the [CustomAction table](customaction-table.md).</span></span> <span data-ttu-id="fba33-153">En este caso, la instalación simultánea es por equipo si el elemento primario es por equipo y la instalación simultánea es por usuario si el elemento primario es por usuario.</span><span class="sxs-lookup"><span data-stu-id="fba33-153">In this case, the concurrent installation is per-machine if the parent is per-machine, and the concurrent installation is per-user if the parent is per-user.</span></span>

<span data-ttu-id="fba33-154">Los desarrolladores deben tener en cuenta las siguientes advertencias al crear instalaciones simultáneas.</span><span class="sxs-lookup"><span data-stu-id="fba33-154">Developers should note the following warnings when authoring concurrent installations.</span></span>

-   <span data-ttu-id="fba33-155">Las instalaciones simultáneas no pueden compartir componentes.</span><span class="sxs-lookup"><span data-stu-id="fba33-155">Concurrent installations cannot share components.</span></span>
-   <span data-ttu-id="fba33-156">Una instalación administrativa no puede contener también una instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="fba33-156">An administrative installation cannot also contain a concurrent installation.</span></span>
-   <span data-ttu-id="fba33-157">Es posible que la revisión y la actualización no funcionen con instalaciones simultáneas.</span><span class="sxs-lookup"><span data-stu-id="fba33-157">Patching and upgrading may not work with concurrent installations.</span></span>
-   <span data-ttu-id="fba33-158">Es posible que el instalador no cueste correctamente una instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="fba33-158">The installer may not properly cost a concurrent installation.</span></span>
-   <span data-ttu-id="fba33-159">Los ProgressBar integrados no se pueden usar con instalaciones simultáneas.</span><span class="sxs-lookup"><span data-stu-id="fba33-159">Integrated ProgressBars cannot be used with concurrent installations.</span></span>
-   <span data-ttu-id="fba33-160">Los recursos que se van a anunciar no se pueden instalar mediante la instalación simultánea.</span><span class="sxs-lookup"><span data-stu-id="fba33-160">Resources that are to be advertised cannot be installed by the concurrent installation.</span></span>
-   <span data-ttu-id="fba33-161">Un paquete que realiza una instalación simultánea de una aplicación también debe desinstalar la aplicación simultánea cuando se desinstale el producto primario.</span><span class="sxs-lookup"><span data-stu-id="fba33-161">A package that performs a concurrent installation of an application should also uninstall the concurrent application when the parent product is uninstalled.</span></span>

<span data-ttu-id="fba33-162">Para evitar que un paquete se instale una vez como una instalación simultánea, agregue cualquiera de las siguientes instrucciones condicionales a la tabla [LaunchCondition](launchcondition-table.md) .</span><span class="sxs-lookup"><span data-stu-id="fba33-162">To prevent a package from ever being installed as a concurrent installation, add either of the following conditional statements to the [LaunchCondition](launchcondition-table.md) table.</span></span> <span data-ttu-id="fba33-163">Esto evita que el paquete se instale una acción de instalación simultánea ejecutada por otra instalación.</span><span class="sxs-lookup"><span data-stu-id="fba33-163">This prevents the package from ever being installed by a concurrent installation action run by another installation.</span></span> <span data-ttu-id="fba33-164">Esto no impide que la acción [RemoveExistingProducts](removeexistingproducts-action.md) Quite el paquete.</span><span class="sxs-lookup"><span data-stu-id="fba33-164">This does not prevent the package from being removed by the [RemoveExistingProducts](removeexistingproducts-action.md) action.</span></span> <span data-ttu-id="fba33-165">Vea también la propiedad [**ParentOriginalDatabase**](parentoriginaldatabase.md) y la propiedad [**ParentProductCode**](parentproductcode.md) .</span><span class="sxs-lookup"><span data-stu-id="fba33-165">See also the [**ParentOriginalDatabase**](parentoriginaldatabase.md) property and [**ParentProductCode**](parentproductcode.md) property.</span></span>

``` syntax
"Not ParentProductCode"
```

``` syntax
"Not ParentOriginalDatabase"
```

 

 



