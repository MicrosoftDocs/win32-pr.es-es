---
description: Las aplicaciones pueden usar las funciones de la API de Uniscribe para admitir la tipografía y la visualización y edición de texto internacional. Uniscribe utiliza el párrafo como unidad para la presentación de texto, y la funcionalidad de la función de debe usarse para todo el párrafo.
ms.assetid: e1adc567-0445-4deb-8634-25653f82127c
title: Mostrar texto con Uniscribe
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: baeb9a2be4d00efaa2681097ddefe3a6de4c576b
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104361231"
---
# <a name="displaying-text-with-uniscribe"></a><span data-ttu-id="b7968-104">Mostrar texto con Uniscribe</span><span class="sxs-lookup"><span data-stu-id="b7968-104">Displaying Text with Uniscribe</span></span>

<span data-ttu-id="b7968-105">Las aplicaciones pueden usar las funciones de la API de Uniscribe para admitir la tipografía y la visualización y edición de texto internacional.</span><span class="sxs-lookup"><span data-stu-id="b7968-105">Your applications can use Uniscribe API functions to support typography and the display and editing of international text.</span></span> <span data-ttu-id="b7968-106">Uniscribe utiliza el párrafo como unidad para la presentación de texto, y la funcionalidad de la función de debe usarse para todo el párrafo.</span><span class="sxs-lookup"><span data-stu-id="b7968-106">Uniscribe uses the paragraph as the unit for text display, and the Uniscribe functionality must be used for the entire paragraph.</span></span>

<span data-ttu-id="b7968-107">Cuando se usa para la presentación de texto, una aplicación debe pasar por un proceso de formato ("diseño"), que normalmente usa Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="b7968-107">When using Uniscribe for display of text, an application must go through a formatting ("layout") process, typically using Uniscribe.</span></span> <span data-ttu-id="b7968-108">La aplicación divide un párrafo de texto en cadenas de caracteres con el mismo estilo, denominado "ejecuciones".</span><span class="sxs-lookup"><span data-stu-id="b7968-108">The application divides a text paragraph into strings of characters with the same style, called "runs".</span></span> <span data-ttu-id="b7968-109">El estilo está determinado por la implementación concreta, pero normalmente incluye tales atributos como fuente, tamaño y color.</span><span class="sxs-lookup"><span data-stu-id="b7968-109">The style is determined by the particular implementation, but typically includes such attributes as font, size, and color.</span></span> <span data-ttu-id="b7968-110">En la definición de ejecuciones, la aplicación también puede aplicar otra información, como los datos de idioma y de configuración regional que se mantienen para su uso con las herramientas léxicas.</span><span class="sxs-lookup"><span data-stu-id="b7968-110">In defining runs, the application can also apply other information, such as language and locale data maintained for use with lexical tools.</span></span> <span data-ttu-id="b7968-111">Por ejemplo, una aplicación puede tratar como una ejecución independiente en un texto en inglés que se representa en francés.</span><span class="sxs-lookup"><span data-stu-id="b7968-111">For example, an application might treat as a separate run a passage in a primarily English text that is rendered in French.</span></span>

<span data-ttu-id="b7968-112">Una vez que ha determinado las ejecuciones de todos los párrafos, la aplicación divide cada párrafo en cadenas que tienen el mismo script y dirección ("elementos").</span><span class="sxs-lookup"><span data-stu-id="b7968-112">Once it has determined the runs for all paragraphs, the application divides each paragraph into strings that have the same script and direction ("items").</span></span> <span data-ttu-id="b7968-113">La aplicación aplica la información de los elementos para generar ejecuciones que son únicas en el script y en la dirección y que están completamente dentro de un solo elemento ("intervalos").</span><span class="sxs-lookup"><span data-stu-id="b7968-113">The application applies the item information to produce runs that are unique in script and direction and fall entirely within a single item ("ranges").</span></span>

<span data-ttu-id="b7968-114">El desglose de un elemento en rangos es algo arbitrario, aunque un intervalo debe constar de una o varias agrupaciones de caracteres indivisibles, definidas por el script consecutivas, denominadas "clústeres".</span><span class="sxs-lookup"><span data-stu-id="b7968-114">The breakdown of an item into ranges is somewhat arbitrary, although a range should consist of one or more consecutive script-defined, indivisible character groupings, called "clusters."</span></span> <span data-ttu-id="b7968-115">En el caso de los idiomas europeos, un clúster normalmente corresponde a un solo carácter de página de códigos o punto de código Unicode, y consta de un único [glifo](uniscribe-glossary.md).</span><span class="sxs-lookup"><span data-stu-id="b7968-115">For European languages, a cluster typically corresponds to a single code page character or Unicode code point, and consists of a single [glyph](uniscribe-glossary.md).</span></span> <span data-ttu-id="b7968-116">Sin embargo, en idiomas como el tailandés, un clúster es una agrupación de glifos y corresponde a varios caracteres consecutivos o puntos de código.</span><span class="sxs-lookup"><span data-stu-id="b7968-116">However, in languages such as Thai, a cluster is a grouping of glyphs and corresponds to multiple consecutive characters or code points.</span></span> <span data-ttu-id="b7968-117">Por ejemplo, un clúster tailandés podría contener una consonante, una vocal y una marca de tono.</span><span class="sxs-lookup"><span data-stu-id="b7968-117">For example, a Thai cluster might contain a consonant, a vowel, and a tone mark.</span></span> <span data-ttu-id="b7968-118">Para que no interrumpa los clústeres, la aplicación normalmente debería usar los intervalos más largos, o bien usar su propia información léxica para dividir entre intervalos en lugares que no están en el medio de un clúster.</span><span class="sxs-lookup"><span data-stu-id="b7968-118">So that it does not break clusters, the application typically should either use the longest ranges it can or use its own lexical information to break between ranges in places that are not in the middle of a cluster.</span></span>

<span data-ttu-id="b7968-119">Cuando haya identificado los clústeres en cada intervalo, la aplicación debe determinar el tamaño de cada clúster.</span><span class="sxs-lookup"><span data-stu-id="b7968-119">When it has identified the clusters in each range, the application must determine the size of each cluster.</span></span> <span data-ttu-id="b7968-120">Utiliza Uniscribe para sumar los clústeres con el fin de determinar el tamaño de cada intervalo.</span><span class="sxs-lookup"><span data-stu-id="b7968-120">It uses Uniscribe to sum the clusters to determine the size of each range.</span></span> <span data-ttu-id="b7968-121">A continuación, la aplicación suma los tamaños de los intervalos hasta que desbordan una línea, es decir, alcanzan el margen.</span><span class="sxs-lookup"><span data-stu-id="b7968-121">Then the application sums the sizes of the ranges until they overflow a line, that is, reach the margin.</span></span> <span data-ttu-id="b7968-122">El intervalo que desborda la línea se divide entre la línea actual y la línea siguiente.</span><span class="sxs-lookup"><span data-stu-id="b7968-122">The range that overflows the line is divided between the current line and the next line.</span></span> <span data-ttu-id="b7968-123">Para cada línea, la aplicación crea un mapa desde la posición visual hasta la posición lógica para cada intervalo.</span><span class="sxs-lookup"><span data-stu-id="b7968-123">For each line, the application builds a map from visual position to logical position for each range.</span></span> <span data-ttu-id="b7968-124">A continuación, la aplicación forma las formas de los puntos de código de cada intervalo en glifos, que se pueden colocar y representar posteriormente.</span><span class="sxs-lookup"><span data-stu-id="b7968-124">Then the application shapes the code points for each range into glyphs, which it can subsequently position and render.</span></span>

<span data-ttu-id="b7968-125">Una aplicación solo realiza el diseño de texto una vez.</span><span class="sxs-lookup"><span data-stu-id="b7968-125">An application does text layout only one time.</span></span> <span data-ttu-id="b7968-126">Después, guarda los glifos y las posiciones para mostrarlos o los genera cada vez que muestra el texto, con la máxima velocidad frente a la memoria.</span><span class="sxs-lookup"><span data-stu-id="b7968-126">Afterwards, it either saves the glyphs and positions for display purposes or it generates them each time it displays the text, with the tradeoff being speed versus memory.</span></span> <span data-ttu-id="b7968-127">Una aplicación típica implementa el proceso de diseño una vez y, después, genera los glifos y posiciones cada vez que se muestra el texto.</span><span class="sxs-lookup"><span data-stu-id="b7968-127">A typical application implements the layout process once, then generates the glyphs and positions each time it displays the text.</span></span>

<span data-ttu-id="b7968-128">Una aplicación que usa [scripts complejos](uniscribe-glossary.md) tiene los siguientes problemas con un enfoque sencillo para el diseño y la presentación.</span><span class="sxs-lookup"><span data-stu-id="b7968-128">An application that uses [complex scripts](uniscribe-glossary.md) has the following problems with a simple approach to layout and display.</span></span>

-   <span data-ttu-id="b7968-129">El ancho de un carácter de script complejo depende de su contexto.</span><span class="sxs-lookup"><span data-stu-id="b7968-129">The width of a complex script character depends on its context.</span></span> <span data-ttu-id="b7968-130">No es posible guardar los anchos en tablas simples.</span><span class="sxs-lookup"><span data-stu-id="b7968-130">It is not possible to save the widths in simple tables.</span></span>
-   <span data-ttu-id="b7968-131">La división entre palabras en scripts como tailandés requiere compatibilidad con diccionarios.</span><span class="sxs-lookup"><span data-stu-id="b7968-131">Breaking between words in scripts such as Thai requires dictionary support.</span></span> <span data-ttu-id="b7968-132">Por ejemplo, no se usa ningún carácter separador entre las palabras tailandesas.</span><span class="sxs-lookup"><span data-stu-id="b7968-132">For example, no separator character is used between Thai words.</span></span>
-   <span data-ttu-id="b7968-133">Árabe, hebreo, persa, urdu y otros idiomas de [texto bidireccionales](uniscribe-glossary.md) requieren reordenación antes de la presentación.</span><span class="sxs-lookup"><span data-stu-id="b7968-133">Arabic, Hebrew, Persian, Urdu, and other [bidirectional text](uniscribe-glossary.md) languages require reordering before display.</span></span>
-   <span data-ttu-id="b7968-134">A menudo se requiere algún tipo de Asociación de fuentes para usar fácilmente scripts complejos.</span><span class="sxs-lookup"><span data-stu-id="b7968-134">Some form of font association is often required to easily use complex scripts.</span></span>

<span data-ttu-id="b7968-135">El hecho de que Uniscribe use el párrafo como unidad de pantalla ayuda a la aplicación a tratar adecuadamente con estos problemas complejos de scripts.</span><span class="sxs-lookup"><span data-stu-id="b7968-135">The fact that Uniscribe uses the paragraph as the display unit helps the application deal adequately with these complex script issues.</span></span>

> [!Note]  
> <span data-ttu-id="b7968-136">Se debe usar Uniscribe para un párrafo completo, incluso si las secciones del párrafo no son scripts complejos.</span><span class="sxs-lookup"><span data-stu-id="b7968-136">Uniscribe must be used for an entire paragraph, even if sections of the paragraph are not complex scripts.</span></span>

 

<span data-ttu-id="b7968-137">Tal y como se muestra en la tabla siguiente, la versión 1,6 o superior de Uniscribe admite varias funciones que aprovechan las ventajas de las etiquetas OpenType.</span><span class="sxs-lookup"><span data-stu-id="b7968-137">As shown in the following table, Uniscribe version 1.6 or greater supports several functions that take advantage of OpenType tags.</span></span> <span data-ttu-id="b7968-138">Se pueden sustituir por las funciones de normales correspondientes.</span><span class="sxs-lookup"><span data-stu-id="b7968-138">They can be substituted for the corresponding regular Uniscribe functions.</span></span> <span data-ttu-id="b7968-139">Por lo general, las aplicaciones deben trabajar completamente con funciones de un conjunto o el otro, y no deben intentar "mezclar y coincidir" funciones.</span><span class="sxs-lookup"><span data-stu-id="b7968-139">Generally your applications should work entirely with functions from one set or the other and should not attempt to "mix and match" functions.</span></span>



| <span data-ttu-id="b7968-140">Uniscribe (función) normal</span><span class="sxs-lookup"><span data-stu-id="b7968-140">Regular Uniscribe function</span></span>             | <span data-ttu-id="b7968-141">Función OpenType equivalente</span><span class="sxs-lookup"><span data-stu-id="b7968-141">Equivalent OpenType function</span></span>                           |
|----------------------------------------|--------------------------------------------------------|
| [<span data-ttu-id="b7968-142">**ScriptItemize**</span><span class="sxs-lookup"><span data-stu-id="b7968-142">**ScriptItemize**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) | [<span data-ttu-id="b7968-143">**ScriptItemizeOpenType**</span><span class="sxs-lookup"><span data-stu-id="b7968-143">**ScriptItemizeOpenType**</span></span>](/windows/desktop/api/usp10/nf-usp10-scriptitemizeopentype) |
| [<span data-ttu-id="b7968-144">**ScriptShape**</span><span class="sxs-lookup"><span data-stu-id="b7968-144">**ScriptShape**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptshape)     | [<span data-ttu-id="b7968-145">**ScriptShapeOpenType**</span><span class="sxs-lookup"><span data-stu-id="b7968-145">**ScriptShapeOpenType**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptshapeopentype)     |
| [<span data-ttu-id="b7968-146">**ScriptPlace**</span><span class="sxs-lookup"><span data-stu-id="b7968-146">**ScriptPlace**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptplace)     | [<span data-ttu-id="b7968-147">**ScriptPlaceOpenType**</span><span class="sxs-lookup"><span data-stu-id="b7968-147">**ScriptPlaceOpenType**</span></span>](/windows/desktop/api/Usp10/nf-usp10-scriptplaceopentype)     |



 

## <a name="lay-out-text-using-uniscribe"></a><span data-ttu-id="b7968-148">Disposición de texto mediante Uniscribe</span><span class="sxs-lookup"><span data-stu-id="b7968-148">Lay Out Text Using Uniscribe</span></span>

<span data-ttu-id="b7968-149">La aplicación puede usar los pasos siguientes para diseñar un párrafo de texto con Uniscribe.</span><span class="sxs-lookup"><span data-stu-id="b7968-149">Your application can use the following steps to lay out out a text paragraph with Uniscribe.</span></span> <span data-ttu-id="b7968-150">En este procedimiento se supone que la aplicación ya ha dividido el párrafo en ejecuciones.</span><span class="sxs-lookup"><span data-stu-id="b7968-150">This procedure assumes that the application has already divided the paragraph into runs.</span></span>

1.  <span data-ttu-id="b7968-151">Llame a [**ScriptRecordDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptrecorddigitsubstitution) solo cuando se inicie o cuando reciba un mensaje de [**\_ SETTINGCHANGE de WM**](../winmsg/wm-settingchange.md) .</span><span class="sxs-lookup"><span data-stu-id="b7968-151">Call [**ScriptRecordDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptrecorddigitsubstitution) only when starting or when receiving a [**WM\_SETTINGCHANGE**](../winmsg/wm-settingchange.md) message.</span></span>
2.  <span data-ttu-id="b7968-152">Opta Llame a [**ScriptIsComplex**](/windows/desktop/api/Usp10/nf-usp10-scriptiscomplex) para determinar si el párrafo requiere procesamiento complejo.</span><span class="sxs-lookup"><span data-stu-id="b7968-152">(Optional) Call [**ScriptIsComplex**](/windows/desktop/api/Usp10/nf-usp10-scriptiscomplex) to determine if the paragraph requires complex processing.</span></span>
3.  <span data-ttu-id="b7968-153">Opta Si utiliza Uniscribe para controlar la sustitución de texto bidireccional o de dígitos, llame a [**ScriptApplyDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptapplydigitsubstitution) para preparar las estructuras de [**\_ control de script**](/windows/win32/api/usp10/ns-usp10-script_control) y de [**\_ Estado de script**](/windows/win32/api/usp10/ns-usp10-script_state) como entradas en [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize).</span><span class="sxs-lookup"><span data-stu-id="b7968-153">(Optional) If using Uniscribe to handle bidirectional text and/or digit substitution, call [**ScriptApplyDigitSubstitution**](/windows/desktop/api/Usp10/nf-usp10-scriptapplydigitsubstitution) to prepare the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures as inputs to [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize).</span></span> <span data-ttu-id="b7968-154">Si se omite este paso pero todavía se requiere la sustitución de dígitos, sustituya los dígitos nacionales para Unicode U + 0030 a U + 0039 (dígitos europeos).</span><span class="sxs-lookup"><span data-stu-id="b7968-154">If skipping this step, but still requiring digit substitution, substitute national digits for Unicode U+0030 through U+0039 (European digits).</span></span> <span data-ttu-id="b7968-155">Para obtener información sobre la sustitución de dígitos, consulte [formas de dígitos](digit-shapes.md).</span><span class="sxs-lookup"><span data-stu-id="b7968-155">For information about digit substitution, see [Digit Shapes](digit-shapes.md).</span></span>
4.  <span data-ttu-id="b7968-156">Llame a [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) para dividir el párrafo en elementos.</span><span class="sxs-lookup"><span data-stu-id="b7968-156">Call [**ScriptItemize**](/windows/desktop/api/Usp10/nf-usp10-scriptitemize) to divide the paragraph into items.</span></span> <span data-ttu-id="b7968-157">Si no se usa la función Uniscribe para la sustitución de dígitos y se conoce el orden bidireccional, por ejemplo, debido a la distribución del teclado usada para escribir el carácter, llame a **ScriptItemize**.</span><span class="sxs-lookup"><span data-stu-id="b7968-157">If not using Uniscribe for digit substitution and the bidirectional order is known, for example, because of the keyboard layout used to enter the character, call **ScriptItemize**.</span></span> <span data-ttu-id="b7968-158">En la llamada, proporcione punteros NULL para las estructuras de [**\_ control de script**](/windows/win32/api/usp10/ns-usp10-script_control) y de [**\_ Estado de script**](/windows/win32/api/usp10/ns-usp10-script_state) .</span><span class="sxs-lookup"><span data-stu-id="b7968-158">In the call, provide null pointers for the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures.</span></span> <span data-ttu-id="b7968-159">Esta técnica genera elementos solo mediante el uso del motor de modelado y los elementos se pueden reordenar con la información del motor.</span><span class="sxs-lookup"><span data-stu-id="b7968-159">This technique generates items by use of the shaping engine only, and the items can be reordered using the engine information.</span></span>
    > [!Note]  
    > <span data-ttu-id="b7968-160">Normalmente, las aplicaciones que funcionan solo con scripts de izquierda a derecha y sin ninguna sustitución de dígitos deben pasar punteros NULL para las estructuras de [**\_ control de script**](/windows/win32/api/usp10/ns-usp10-script_control) y de [**\_ Estado de script**](/windows/win32/api/usp10/ns-usp10-script_state) .</span><span class="sxs-lookup"><span data-stu-id="b7968-160">Typically, applications that work only with left-to-right scripts and without any digit substitution should pass null pointers for the [**SCRIPT\_CONTROL**](/windows/win32/api/usp10/ns-usp10-script_control) and [**SCRIPT\_STATE**](/windows/win32/api/usp10/ns-usp10-script_state) structures.</span></span>

     

5.  <span data-ttu-id="b7968-161">Combine la información del elemento con la información de ejecución para generar intervalos.</span><span class="sxs-lookup"><span data-stu-id="b7968-161">Merge the item information with the run information to produce ranges.</span></span>
6.  <span data-ttu-id="b7968-162">Llame a [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) para identificar los clústeres y generar glifos.</span><span class="sxs-lookup"><span data-stu-id="b7968-162">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to identify clusters and generate glyphs.</span></span>
7.  <span data-ttu-id="b7968-163">Si [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) devuelve el script de código USP \_ E \_ no está \_ \_ en \_ la fuente o es \_ correcto con la salida que contiene los glifos que faltan, seleccione caracteres de una fuente diferente.</span><span class="sxs-lookup"><span data-stu-id="b7968-163">If [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) returns the code USP\_E\_SCRIPT\_NOT\_IN\_FONT or S\_OK with the output containing missing glyphs, select characters from a different font.</span></span> <span data-ttu-id="b7968-164">Puede sustituir otra fuente o deshabilitar la forma estableciendo el miembro **eScript** de la estructura de [**\_ análisis de scripts**](/windows/win32/api/usp10/ns-usp10-script_analysis) pasada a **ScriptShape** en un script \_ sin definir.</span><span class="sxs-lookup"><span data-stu-id="b7968-164">Either substitute another font or disable shaping by setting the **eScript** member of the [**SCRIPT\_ANALYSIS**](/windows/win32/api/usp10/ns-usp10-script_analysis) structure passed to **ScriptShape** to SCRIPT\_UNDEFINED.</span></span> <span data-ttu-id="b7968-165">Para obtener más información, vea [usar la reserva de fuentes](using-font-fallback.md).</span><span class="sxs-lookup"><span data-stu-id="b7968-165">For more information, see [Using Font Fallback](using-font-fallback.md).</span></span>
8.  <span data-ttu-id="b7968-166">Llame a [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) para generar [anchos de avance](uniscribe-glossary.md) y posiciones x e y para los glifos en cada intervalo sucesivo.</span><span class="sxs-lookup"><span data-stu-id="b7968-166">Call [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate [advance widths](uniscribe-glossary.md) and x and y positions for the glyphs in each successive range.</span></span> <span data-ttu-id="b7968-167">Este es el primer paso para el que el tamaño del texto se considera una consideración.</span><span class="sxs-lookup"><span data-stu-id="b7968-167">This is the first step for which text size becomes a consideration.</span></span>
9.  <span data-ttu-id="b7968-168">Sumar los tamaños de intervalo hasta que la línea se desborda.</span><span class="sxs-lookup"><span data-stu-id="b7968-168">Sum the range sizes until the line overflows.</span></span>
10. <span data-ttu-id="b7968-169">Divida el intervalo en un límite de palabras usando los miembros **fSoftBreak** y **fWhiteSpace** en los atributos lógicos.</span><span class="sxs-lookup"><span data-stu-id="b7968-169">Break the range on a word boundary by using the **fSoftBreak** and **fWhiteSpace** members in the logical attributes.</span></span> <span data-ttu-id="b7968-170">Para interrumpir un clúster de un solo carácter de la ejecución, use la información que se devuelve mediante una llamada a [**ScriptBreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak).</span><span class="sxs-lookup"><span data-stu-id="b7968-170">To break a single character cluster off the run, use the information returned by calling [**ScriptBreak**](/windows/desktop/api/Usp10/nf-usp10-scriptbreak).</span></span>
    > [!Note]  
    > <span data-ttu-id="b7968-171">Decida si el primer punto de código de un intervalo debe ser un punto de separación de palabras porque el último carácter del intervalo anterior lo requiere.</span><span class="sxs-lookup"><span data-stu-id="b7968-171">Decide if the first code point of a range should be a word break point because the last character of the previous range requires it.</span></span> <span data-ttu-id="b7968-172">Por ejemplo, si un intervalo finaliza en una coma, considere el primer carácter del siguiente intervalo para que sea un punto de separación de palabras.</span><span class="sxs-lookup"><span data-stu-id="b7968-172">For example, if one range ends in a comma, consider the first character of the next range to be a word break point.</span></span>

     

11. <span data-ttu-id="b7968-173">Repita los pasos 6 a 10 para cada línea del párrafo.</span><span class="sxs-lookup"><span data-stu-id="b7968-173">Repeat steps 6 through 10 for each line in the paragraph.</span></span> <span data-ttu-id="b7968-174">Sin embargo, si se interrumpe la última ejecución en la línea, llame a [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) para cambiar la forma de la parte restante de la ejecución como la primera ejecución en la línea siguiente.</span><span class="sxs-lookup"><span data-stu-id="b7968-174">However, if breaking the last run on the line, call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to reshape the remaining part of the run as the first run on the next line.</span></span>

## <a name="display-text-using-uniscribe"></a><span data-ttu-id="b7968-175">Mostrar texto mediante Uniscribe</span><span class="sxs-lookup"><span data-stu-id="b7968-175">Display Text Using Uniscribe</span></span>

<span data-ttu-id="b7968-176">La aplicación puede usar los pasos siguientes para mostrar un párrafo de texto.</span><span class="sxs-lookup"><span data-stu-id="b7968-176">Your application can use the following steps to display a text paragraph.</span></span> <span data-ttu-id="b7968-177">En este procedimiento se supone que la aplicación ya ha diseñado el texto y no ha guardado los glifos y posiciones del proceso de diseño.</span><span class="sxs-lookup"><span data-stu-id="b7968-177">This procedure assumes that the application has already laid out the text and has not saved the glyphs and positions from the layout process.</span></span> <span data-ttu-id="b7968-178">Si la velocidad es un problema, la aplicación puede guardar los glifos y posiciones del procedimiento de diseño y comenzar en el paso 2 del procedimiento de visualización.</span><span class="sxs-lookup"><span data-stu-id="b7968-178">If speed is a concern, the application can save the glyphs and positions from the layout procedure and start at step 2 in the display procedure.</span></span>

> [!Note]  
> <span data-ttu-id="b7968-179">La aplicación puede omitir el paso 2 Si el texto no contiene caracteres de scripts de derecha a izquierda, no contiene caracteres de control bidireccionales y usa un nivel de incrustación de base de izquierda a derecha.</span><span class="sxs-lookup"><span data-stu-id="b7968-179">The application can omit step 2 if the text contains no characters from right-to-left scripts, contains no bidirectional control characters, and uses a left-to-right base embedding level.</span></span>

 

1.  <span data-ttu-id="b7968-180">Para cada ejecución, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="b7968-180">For each run, do the following:</span></span>
    1.  <span data-ttu-id="b7968-181">Si el estilo ha cambiado desde la última vez que se ejecutó, actualice el identificador al contexto del dispositivo mediante la liberación y la obtención de este.</span><span class="sxs-lookup"><span data-stu-id="b7968-181">If the style has changed since the last run, update the handle to the device context by releasing and getting it again.</span></span>
    2.  <span data-ttu-id="b7968-182">Llame a [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) para generar glifos para la ejecución.</span><span class="sxs-lookup"><span data-stu-id="b7968-182">Call [**ScriptShape**](/windows/desktop/api/Usp10/nf-usp10-scriptshape) to generate glyphs for the run.</span></span>
    3.  <span data-ttu-id="b7968-183">Llame a [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) para generar un ancho de avance y un desplazamiento x, y para cada glifo.</span><span class="sxs-lookup"><span data-stu-id="b7968-183">Call [**ScriptPlace**](/windows/desktop/api/Usp10/nf-usp10-scriptplace) to generate an advance width and an x,y offset for each glyph.</span></span>
2.  <span data-ttu-id="b7968-184">Haga lo siguiente para establecer el orden visual correcto para las ejecuciones en la línea:</span><span class="sxs-lookup"><span data-stu-id="b7968-184">Do the following to establish the correct visual order for the runs in the line:</span></span>
    1.  <span data-ttu-id="b7968-185">Extraiga una matriz de [niveles de incrustación](uniscribe-glossary.md)bidireccional, uno por intervalo.</span><span class="sxs-lookup"><span data-stu-id="b7968-185">Extract an array of bidirectional [embedding levels](uniscribe-glossary.md), one per range.</span></span> <span data-ttu-id="b7968-186">El nivel de incrustación se proporciona mediante (elemento de SCRIPT \_ ) si. ( \_Análisis de script).</span><span class="sxs-lookup"><span data-stu-id="b7968-186">The embedding level is given by (SCRIPT\_ITEM) si.(SCRIPT\_ANALYSIS) a.</span></span> <span data-ttu-id="b7968-187">(SCRIPT \_ STATE) s. uBidiLevel.</span><span class="sxs-lookup"><span data-stu-id="b7968-187">(SCRIPT\_STATE) s.uBidiLevel.</span></span>
    2.  <span data-ttu-id="b7968-188">Pase esta matriz a [**ScriptLayout**](/windows/desktop/api/Usp10/nf-usp10-scriptlayout) para generar un mapa de posiciones visuales para las posiciones lógicas.</span><span class="sxs-lookup"><span data-stu-id="b7968-188">Pass this array to [**ScriptLayout**](/windows/desktop/api/Usp10/nf-usp10-scriptlayout) to generate a map of visual positions to logical positions.</span></span>
3.  <span data-ttu-id="b7968-189">Opta Para justificar el texto, llame a [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify) o use un conocimiento especializado del texto.</span><span class="sxs-lookup"><span data-stu-id="b7968-189">(Optional) To justify the text, either call [**ScriptJustify**](/windows/desktop/api/Usp10/nf-usp10-scriptjustify) or use specialized knowledge of the text.</span></span>
4.  <span data-ttu-id="b7968-190">Use el mapa visual-to-Logical para mostrar las ejecuciones en orden visual.</span><span class="sxs-lookup"><span data-stu-id="b7968-190">Use the visual-to-logical map to display the runs in visual order.</span></span> <span data-ttu-id="b7968-191">A partir del extremo izquierdo de la línea, llame a [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) para mostrar la ejecución proporcionada por la primera entrada en el mapa.</span><span class="sxs-lookup"><span data-stu-id="b7968-191">Starting at the left end of the line, call [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) to display the run given by the first entry in the map.</span></span> <span data-ttu-id="b7968-192">Para cada entrada subsiguiente del mapa, llame a **ScriptTextOut** para mostrar la ejecución indicada a la derecha de la ejecución mostrada anteriormente.</span><span class="sxs-lookup"><span data-stu-id="b7968-192">For each subsequent entry in the map, call **ScriptTextOut** to display the indicated run to the right of the previously displayed run.</span></span>

    <span data-ttu-id="b7968-193">Si se omite el paso 2, empiece en el extremo izquierdo de la línea y llame a [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) para mostrar la primera ejecución lógica y, a continuación, muestre cada ejecución lógica a la derecha de la ejecución anterior.</span><span class="sxs-lookup"><span data-stu-id="b7968-193">If omitting step 2, start at the left end of the line and call [**ScriptTextOut**](/windows/desktop/api/Usp10/nf-usp10-scripttextout) to display the first logical run, and then to display each logical run to the right of the previous run.</span></span>

5.  <span data-ttu-id="b7968-194">Repita los pasos anteriores para todas las líneas del párrafo.</span><span class="sxs-lookup"><span data-stu-id="b7968-194">Repeat the steps above for all lines in the paragraph.</span></span>

## <a name="related-topics"></a><span data-ttu-id="b7968-195">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="b7968-195">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="b7968-196">Usar Uniscribe</span><span class="sxs-lookup"><span data-stu-id="b7968-196">Using Uniscribe</span></span>](using-uniscribe.md)
</dt> </dl>

 

 
