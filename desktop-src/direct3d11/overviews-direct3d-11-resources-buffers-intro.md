---
title: Introducción a los búferes en Direct3D 11
description: Un recurso de búfer es una colección de datos totalmente tipados agrupados en elementos.
ms.assetid: e33ca01e-f13c-4f91-b0db-2b2bc6b4fd8f
keywords:
- búfer de constantes, qué es
- búfer de vértices, qué es
- búfer de índice, qué es
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 241ade0721ae87b1371586bc901ee18f8975b53f
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104359079"
---
# <a name="introduction-to-buffers-in-direct3d-11"></a><span data-ttu-id="85952-106">Introducción a los búferes en Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="85952-106">Introduction to Buffers in Direct3D 11</span></span>

<span data-ttu-id="85952-107">Un recurso de búfer es una colección de datos totalmente tipados agrupados en elementos.</span><span class="sxs-lookup"><span data-stu-id="85952-107">A buffer resource is a collection of fully typed data grouped into elements.</span></span> <span data-ttu-id="85952-108">Puede usar los búferes para almacenar una gran variedad de datos, incluidos los vectores de posición, los vectores normales, las coordenadas de textura en un búfer de vértices, los índices en un búfer de índice o el estado del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="85952-108">You can use buffers to store a wide variety of data, including position vectors, normal vectors, texture coordinates in a vertex buffer, indexes in an index buffer, or device state.</span></span> <span data-ttu-id="85952-109">Un elemento de búfer se compone de 1 a 4 componentes.</span><span class="sxs-lookup"><span data-stu-id="85952-109">A buffer element is made up of 1 to 4 components.</span></span> <span data-ttu-id="85952-110">Los elementos de búfer pueden incluir valores de datos empaquetados (como valores de la superficie R8G8B8A8), enteros de 8 bits únicos o valores de punto flotante de 4 32 bits.</span><span class="sxs-lookup"><span data-stu-id="85952-110">Buffer elements can include packed data values (like R8G8B8A8 surface values), single 8-bit integers, or four 32-bit floating point values.</span></span>

<span data-ttu-id="85952-111">Un búfer se crea como un recurso no estructurado.</span><span class="sxs-lookup"><span data-stu-id="85952-111">A buffer is created as an unstructured resource.</span></span> <span data-ttu-id="85952-112">Dado que no está estructurado, un búfer no puede contener ningún nivel de mipmap, no se puede filtrar cuando se lee y no puede ser de muestreo multimuestreado.</span><span class="sxs-lookup"><span data-stu-id="85952-112">Because it is unstructured, a buffer cannot contain any mipmap levels, it cannot get filtered when read, and it cannot be multisampled.</span></span>

## <a name="buffer-types"></a><span data-ttu-id="85952-113">Tipos de búfer</span><span class="sxs-lookup"><span data-stu-id="85952-113">Buffer Types</span></span>

<span data-ttu-id="85952-114">A continuación se muestran los tipos de recursos de búfer que admite Direct3D 11.</span><span class="sxs-lookup"><span data-stu-id="85952-114">The following are the buffer resource types supported by Direct3D 11.</span></span> <span data-ttu-id="85952-115">Todos los tipos de búfer están encapsulados por la interfaz [**ID3D11Buffer**](/windows/desktop/api/D3D11/nn-d3d11-id3d11buffer) .</span><span class="sxs-lookup"><span data-stu-id="85952-115">All buffer types are encapsulated by the [**ID3D11Buffer**](/windows/desktop/api/D3D11/nn-d3d11-id3d11buffer) interface.</span></span>

-   [<span data-ttu-id="85952-116">Búfer de vértices</span><span class="sxs-lookup"><span data-stu-id="85952-116">Vertex Buffer</span></span>](#vertex-buffer)
-   [<span data-ttu-id="85952-117">Búfer de índice</span><span class="sxs-lookup"><span data-stu-id="85952-117">Index Buffer</span></span>](#index-buffer)
-   [<span data-ttu-id="85952-118">Búfer de constantes</span><span class="sxs-lookup"><span data-stu-id="85952-118">Constant Buffer</span></span>](#constant-buffer)

### <a name="vertex-buffer"></a><span data-ttu-id="85952-119">Búfer de vértices</span><span class="sxs-lookup"><span data-stu-id="85952-119">Vertex Buffer</span></span>

<span data-ttu-id="85952-120">Un búfer de vértice contiene los datos de vértices que se usan para definir la geometría.</span><span class="sxs-lookup"><span data-stu-id="85952-120">A vertex buffer contains the vertex data used to define your geometry.</span></span> <span data-ttu-id="85952-121">Los datos de vértice incluyen coordenadas de posición, datos de color, datos de coordenadas de textura, datos normales, etc.</span><span class="sxs-lookup"><span data-stu-id="85952-121">Vertex data includes position coordinates, color data, texture coordinate data, normal data, and so on.</span></span>

<span data-ttu-id="85952-122">El ejemplo más simple de un búfer de vértice es aquél que solo contiene datos de posición.</span><span class="sxs-lookup"><span data-stu-id="85952-122">The simplest example of a vertex buffer is one that only contains position data.</span></span> <span data-ttu-id="85952-123">Se puede visualizar como la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="85952-123">It can be visualized like the following illustration.</span></span>

![Ilustración de un búfer de vértices que contiene datos de posición](images/d3d10-resources-single-element-vb2.png)

<span data-ttu-id="85952-125">Con mayor frecuencia, un búfer de vértice contiene todos los datos necesarios para especificar por completo los vértices 3D.</span><span class="sxs-lookup"><span data-stu-id="85952-125">More often, a vertex buffer contains all the data needed to fully specify 3D vertices.</span></span> <span data-ttu-id="85952-126">Un ejemplo de esto podría ser un búfer de vértices que contenga la posición por vértice, las coordenadas normales y de textura.</span><span class="sxs-lookup"><span data-stu-id="85952-126">An example of this could be a vertex buffer that contains per-vertex position, normal and texture coordinates.</span></span> <span data-ttu-id="85952-127">Normalmente, estos datos se organizan como conjuntos de elementos por vértice, tal como se muestra en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="85952-127">This data is usually organized as sets of per-vertex elements, as shown in the following illustration.</span></span>

![Ilustración de un búfer de vértices que contiene datos de posición, normal y de textura](images/d3d10-vertex-buffer-element.png)

<span data-ttu-id="85952-129">Este búfer de vértice contiene datos por vértices; cada vértice almacena tres elementos (coordenadas de posición, normal y de textura).</span><span class="sxs-lookup"><span data-stu-id="85952-129">This vertex buffer contains per-vertex data; each vertex stores three elements (position, normal, and texture coordinates).</span></span> <span data-ttu-id="85952-130">La posición y la normal se especifican normalmente con los flotantes de 3 32 bits (formato de DXGI \_ \_ R32G32B32 \_ float) y las coordenadas de textura con los flotantes de 2 32 bits (dxgi \_ format \_ R32G32 \_ float).</span><span class="sxs-lookup"><span data-stu-id="85952-130">The position and normal are each typically specified using three 32-bit floats (DXGI\_FORMAT\_R32G32B32\_FLOAT) and the texture coordinates using two 32-bit floats (DXGI\_FORMAT\_R32G32\_FLOAT).</span></span>

<span data-ttu-id="85952-131">Para tener acceso a los datos de un búfer de vértice, debe saber a qué vértice acceder, además de los siguientes parámetros adicionales de búfer:</span><span class="sxs-lookup"><span data-stu-id="85952-131">To access data from a vertex buffer you need to know which vertex to access, plus the following additional buffer parameters:</span></span>

-   <span data-ttu-id="85952-132">Offset: el número de bytes desde el inicio del búfer hasta los datos del primer vértice.</span><span class="sxs-lookup"><span data-stu-id="85952-132">Offset - the number of bytes from the start of the buffer to the data for the first vertex.</span></span> <span data-ttu-id="85952-133">Puede especificar el desplazamiento mediante el método [**ID3D11DeviceContext:: IASetVertexBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetvertexbuffers) .</span><span class="sxs-lookup"><span data-stu-id="85952-133">You can specify the offset using the [**ID3D11DeviceContext::IASetVertexBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetvertexbuffers) method.</span></span>
-   <span data-ttu-id="85952-134">BaseVertexLocation: el número de bytes desde el desplazamiento hasta el primer vértice usado por la llamada a Draw adecuada.</span><span class="sxs-lookup"><span data-stu-id="85952-134">BaseVertexLocation - the number of bytes from the offset to the first vertex used by the appropriate draw call.</span></span>

<span data-ttu-id="85952-135">Antes de crear un búfer de vértices, debe definir su diseño mediante la creación de una interfaz [**ID3D11InputLayout**](/windows/win32/api/d3d11/nn-d3d11-id3d11inputlayout) . Esto se hace llamando al método [**ID3D11Device:: CreateInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createinputlayout) .</span><span class="sxs-lookup"><span data-stu-id="85952-135">Before you create a vertex buffer, you need to define its layout by creating an [**ID3D11InputLayout**](/windows/win32/api/d3d11/nn-d3d11-id3d11inputlayout) interface; this is done by calling the [**ID3D11Device::CreateInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createinputlayout) method.</span></span> <span data-ttu-id="85952-136">Una vez creado el objeto de diseño de entrada, puede enlazarlo a la fase del ensamblador de entrada llamando a [**ID3D11DeviceContext:: IASetInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetinputlayout).</span><span class="sxs-lookup"><span data-stu-id="85952-136">After the input-layout object is created, you can bind it to the input-assembler stage by calling the [**ID3D11DeviceContext::IASetInputLayout**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetinputlayout).</span></span>

<span data-ttu-id="85952-137">Para crear un búfer de vértices, llame a [**ID3D11Device:: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span><span class="sxs-lookup"><span data-stu-id="85952-137">To create a vertex buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span></span>

### <a name="index-buffer"></a><span data-ttu-id="85952-138">Búfer de índice</span><span class="sxs-lookup"><span data-stu-id="85952-138">Index Buffer</span></span>

<span data-ttu-id="85952-139">Los búferes de índice contienen desplazamientos enteros en búferes de vértices y se usan para representar primitivas de forma más eficaz.</span><span class="sxs-lookup"><span data-stu-id="85952-139">Index buffers contain integer offsets into vertex buffers and are used to render primitives more efficiently.</span></span> <span data-ttu-id="85952-140">Un búfer de índice contiene un conjunto secuencial de índices de 16 o 32 bits; cada índice se usa para identificar un vértice en un búfer de vértice.</span><span class="sxs-lookup"><span data-stu-id="85952-140">An index buffer contains a sequential set of 16-bit or 32-bit indices; each index is used to identify a vertex in a vertex buffer.</span></span> <span data-ttu-id="85952-141">Un búfer de índice se puede visualizar como la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="85952-141">An index buffer can be visualized like the following illustration.</span></span>

![Ilustración de un búfer de índice](images/d3d10-index-buffer.png)

<span data-ttu-id="85952-143">Los índices secuenciales almacenados en un búfer de índice se encuentran con los parámetros siguientes:</span><span class="sxs-lookup"><span data-stu-id="85952-143">The sequential indices stored in an index buffer are located with the following parameters:</span></span>

-   <span data-ttu-id="85952-144">Offset: el número de bytes de la dirección base del búfer de índice.</span><span class="sxs-lookup"><span data-stu-id="85952-144">Offset - the number of bytes from the base address of the index buffer.</span></span> <span data-ttu-id="85952-145">El desplazamiento se proporciona al método [**ID3D11DeviceContext:: IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer) .</span><span class="sxs-lookup"><span data-stu-id="85952-145">The offset is supplied to the [**ID3D11DeviceContext::IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer) method.</span></span>
-   <span data-ttu-id="85952-146">StartIndexLocation: especifica el primer elemento de búfer de índice de la dirección base y el desplazamiento proporcionado en [**IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer).</span><span class="sxs-lookup"><span data-stu-id="85952-146">StartIndexLocation - specifies the first index buffer element from the base address and the offset provided in [**IASetIndexBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-iasetindexbuffer).</span></span> <span data-ttu-id="85952-147">La ubicación de inicio se proporciona al método [**ID3D11DeviceContext::D rawindexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) o [**ID3D11DeviceContext::D rawindexedinstanced**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexedinstanced) y representa el primer índice que se va a representar.</span><span class="sxs-lookup"><span data-stu-id="85952-147">The start location is supplied to the [**ID3D11DeviceContext::DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) or [**ID3D11DeviceContext::DrawIndexedInstanced**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexedinstanced) method and represents the first index to render.</span></span>
-   <span data-ttu-id="85952-148">IndexCount: número de índices que se van a representar.</span><span class="sxs-lookup"><span data-stu-id="85952-148">IndexCount - the number of indices to render.</span></span> <span data-ttu-id="85952-149">El número se proporciona al método [**DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed)</span><span class="sxs-lookup"><span data-stu-id="85952-149">The number is supplied to the [**DrawIndexed**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-drawindexed) method</span></span>

<span data-ttu-id="85952-150">Inicio del búfer de índice = dirección base del búfer de índice + desplazamiento (bytes) + StartIndexLocation \* (bytes);</span><span class="sxs-lookup"><span data-stu-id="85952-150">Start of Index Buffer = Index Buffer Base Address + Offset (bytes) + StartIndexLocation \* ElementSize (bytes);</span></span>

<span data-ttu-id="85952-151">En este cálculo, el tamaño de los elementos es el tamaño de cada elemento de búfer de índice, que es de dos o cuatro bytes.</span><span class="sxs-lookup"><span data-stu-id="85952-151">In this calculation, ElementSize is the size of each index buffer element, which is either two or four bytes.</span></span>

<span data-ttu-id="85952-152">Para crear un búfer de índice, llame a [**ID3D11Device:: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span><span class="sxs-lookup"><span data-stu-id="85952-152">To create an index buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer).</span></span>

### <a name="constant-buffer"></a><span data-ttu-id="85952-153">Búfer de constantes</span><span class="sxs-lookup"><span data-stu-id="85952-153">Constant Buffer</span></span>

<span data-ttu-id="85952-154">Un búfer de constantes permite proporcionar eficazmente datos de constantes de sombreador a la canalización.</span><span class="sxs-lookup"><span data-stu-id="85952-154">A constant buffer allows you to efficiently supply shader constants data to the pipeline.</span></span> <span data-ttu-id="85952-155">Puede usar un búfer de constantes para almacenar los resultados de la fase de flujo de salida.</span><span class="sxs-lookup"><span data-stu-id="85952-155">You can use a constant buffer to store the results of the stream-output stage.</span></span> <span data-ttu-id="85952-156">Conceptualmente, un búfer de constantes se parece a un búfer de vértice de un solo elemento, tal como se muestra en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="85952-156">Conceptually, a constant buffer looks just like a single-element vertex buffer, as shown in the following illustration.</span></span>

![Ilustración de un búfer de constantes de sombreador](images/d3d10-shader-resource-buffer.png)

<span data-ttu-id="85952-158">Cada elemento almacena una constante de componente de 1 a 4, determinada por el formato de los datos almacenados.</span><span class="sxs-lookup"><span data-stu-id="85952-158">Each element stores a 1-to-4 component constant, determined by the format of the data stored.</span></span> <span data-ttu-id="85952-159">Para crear un búfer de constantes de sombreador, llame a [**ID3D11Device:: CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) y especifique el miembro de **\_ búfer de \_ constantes \_ de enlace D3D11** del tipo enumerado del [**\_ \_ marcador de enlace D3D11**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_bind_flag) .</span><span class="sxs-lookup"><span data-stu-id="85952-159">To create a shader-constant buffer, call [**ID3D11Device::CreateBuffer**](/windows/desktop/api/D3D11/nf-d3d11-id3d11device-createbuffer) and specify the **D3D11\_BIND\_CONSTANT\_BUFFER** member of the [**D3D11\_BIND\_FLAG**](/windows/desktop/api/D3D11/ne-d3d11-d3d11_bind_flag) enumerated type.</span></span>

<span data-ttu-id="85952-160">Un búfer de constantes solo puede utilizar una única marca de enlace (**D3D11 de búfer de \_ \_ constantes \_ de enlace**), que no se puede combinar con ningún otro marcador de enlace.</span><span class="sxs-lookup"><span data-stu-id="85952-160">A constant buffer can only use a single bind flag (**D3D11\_BIND\_CONSTANT\_BUFFER**), which cannot be combined with any other bind flag.</span></span> <span data-ttu-id="85952-161">Para enlazar un búfer de constantes de sombreador a la canalización, llame a uno de los métodos siguientes: [**ID3D11DeviceContext:: GSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gssetconstantbuffers), [**ID3D11DeviceContext::P ssetconstantbuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-pssetconstantbuffers)o [**ID3D11DeviceContext:: VSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-vssetconstantbuffers).</span><span class="sxs-lookup"><span data-stu-id="85952-161">To bind a shader-constant buffer to the pipeline, call one of the following methods: [**ID3D11DeviceContext::GSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-gssetconstantbuffers), [**ID3D11DeviceContext::PSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-pssetconstantbuffers), or [**ID3D11DeviceContext::VSSetConstantBuffers**](/windows/desktop/api/D3D11/nf-d3d11-id3d11devicecontext-vssetconstantbuffers).</span></span>

<span data-ttu-id="85952-162">Para leer un búfer de constantes de sombreador de un sombreador, use una función de carga de HLSL (por ejemplo, [**Load**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-to-load)).</span><span class="sxs-lookup"><span data-stu-id="85952-162">To read a shader-constant buffer from a shader, use a HLSL load function (for example, [**Load**](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-to-load)).</span></span> <span data-ttu-id="85952-163">Cada fase del sombreador permite hasta 15 búferes de constantes de sombreador; cada búfer puede contener hasta 4096 constantes.</span><span class="sxs-lookup"><span data-stu-id="85952-163">Each shader stage allows up to 15 shader-constant buffers; each buffer can hold up to 4096 constants.</span></span>

## <a name="related-topics"></a><span data-ttu-id="85952-164">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="85952-164">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="85952-165">Búferes</span><span class="sxs-lookup"><span data-stu-id="85952-165">Buffers</span></span>](overviews-direct3d-11-resources-buffers.md)
</dt> </dl>

 

 