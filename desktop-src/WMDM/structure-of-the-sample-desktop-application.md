---
title: Estructura de la aplicación de escritorio de ejemplo
description: Estructura de la aplicación de escritorio de ejemplo
ms.assetid: e042470d-dc78-488c-bcad-2e8d34714d5d
keywords:
- Administrador de dispositivos de Windows Media, ejemplos
- Administrador de dispositivos, ejemplos
- aplicaciones de escritorio, ejemplos
- Windows Media Administrador de dispositivos, ejemplo de aplicación de escritorio
- Administrador de dispositivos, ejemplo de aplicación de escritorio
- ejemplos, aplicaciones de escritorio
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 34fb377c1bb6ebf943721b55ec6175e65f70ddde
ms.sourcegitcommit: 2d531328b6ed82d4ad971a45a5131b430c5866f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/16/2019
ms.locfileid: "103776656"
---
# <a name="structure-of-the-sample-desktop-application"></a><span data-ttu-id="e90ad-109">Estructura de la aplicación de escritorio de ejemplo</span><span class="sxs-lookup"><span data-stu-id="e90ad-109">Structure of the Sample Desktop Application</span></span>

<span data-ttu-id="e90ad-110">La aplicación de escritorio de ejemplo consta de dos partes principales:</span><span class="sxs-lookup"><span data-stu-id="e90ad-110">The sample desktop application consists of two main pieces:</span></span>

-   <span data-ttu-id="e90ad-111">El proyecto wmdapp contiene la mayoría de las clases que muestran la interfaz de usuario, controlan el arrastre y la colocación, y llevan a cabo todas las funciones necesarias del programa.</span><span class="sxs-lookup"><span data-stu-id="e90ad-111">The wmdapp project contains most of the classes that display the user interface, handle dragging and dropping, and perform all the required functionality of the program.</span></span>
-   <span data-ttu-id="e90ad-112">El proyecto proghelp es una aplicación auxiliar que contiene clases no esenciales para controlar las notificaciones de estado y las transferencias de archivos manuales desde el escritorio a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e90ad-112">The proghelp project is a helper application that contains nonessential classes to handle status notifications and manual file transfers from the desktop to the application.</span></span>

<span data-ttu-id="e90ad-113">El ejecutable solo usa el proyecto auxiliar cuando el usuario selecciona **usar interfaz de operación** en el menú **Opciones** para controlar la transferencia manual de archivos al dispositivo y para incrementar la barra de estado en el formulario progreso de la descarga.</span><span class="sxs-lookup"><span data-stu-id="e90ad-113">The executable uses the helper project only when the user selects **Use Operation Interface** on the **Options** menu to handle manual file transfer to the device, and to increment the status bar in the download progress form.</span></span> <span data-ttu-id="e90ad-114">Todo el resto de la aplicación se administra en el proyecto wmdapp.</span><span class="sxs-lookup"><span data-stu-id="e90ad-114">All the rest of the application is handled in the wmdapp project.</span></span>



| <span data-ttu-id="e90ad-115">Clase</span><span class="sxs-lookup"><span data-stu-id="e90ad-115">Class</span></span>                | <span data-ttu-id="e90ad-116">Archivo</span><span class="sxs-lookup"><span data-stu-id="e90ad-116">File</span></span>                    | <span data-ttu-id="e90ad-117">Descripción</span><span class="sxs-lookup"><span data-stu-id="e90ad-117">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                     |
|----------------------|-------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e90ad-118">—</span><span class="sxs-lookup"><span data-stu-id="e90ad-118">—</span></span>                    | <span data-ttu-id="e90ad-119">wmdmapp. cpp</span><span class="sxs-lookup"><span data-stu-id="e90ad-119">wmdmapp.cpp</span></span>             | <span data-ttu-id="e90ad-120">La clase que controla la ventana primaria de la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="e90ad-120">The class that handles the parent window of the user interface.</span></span> <span data-ttu-id="e90ad-121">El código de este archivo también controla algunos datos proporcionados por el usuario no controlados por CDevFiles, como la creación de una lista de reproducción o un álbum en un dispositivo, la eliminación de archivos y el registro de opciones del menú.</span><span class="sxs-lookup"><span data-stu-id="e90ad-121">The code in this file also handles some user input not handled by CDevFiles, such as creating a playlist or album on a device, deleting files, and registering menu choices.</span></span>                                                                                                                                                    |
| <span data-ttu-id="e90ad-122">CDevices</span><span class="sxs-lookup"><span data-stu-id="e90ad-122">CDevices</span></span>             | <span data-ttu-id="e90ad-123">Dispositivos. cpp</span><span class="sxs-lookup"><span data-stu-id="e90ad-123">Devices.cpp</span></span>             | <span data-ttu-id="e90ad-124">La clase que controla el panel izquierdo de la ventana de la aplicación principal, donde se enumeran los dispositivos disponibles.</span><span class="sxs-lookup"><span data-stu-id="e90ad-124">The class that handles the left-hand pane of the main application window, where the available devices are listed.</span></span> <span data-ttu-id="e90ad-125">Esta clase administra el bucle de mensajería, que controla los datos proporcionados por el usuario, como la selección de un dispositivo y la notificación al panel de CDevFiles para cargar los archivos adecuados cuando ha cambiado la selección del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e90ad-125">This class manages the messaging loop, which handles user input such as selecting a device and notifying the CDevFiles pane to load the appropriate files when the device selection has changed.</span></span>                                                                              |
| <span data-ttu-id="e90ad-126">CDevFiles</span><span class="sxs-lookup"><span data-stu-id="e90ad-126">CDevFiles</span></span>            | <span data-ttu-id="e90ad-127">Devfiles. cpp</span><span class="sxs-lookup"><span data-stu-id="e90ad-127">Devfiles.cpp</span></span>            | <span data-ttu-id="e90ad-128">La clase que controla el panel derecho de la ventana principal de la aplicación, donde se enumeran los archivos del dispositivo seleccionado.</span><span class="sxs-lookup"><span data-stu-id="e90ad-128">The class that handles the right-hand pane of the main application window, where the files on the selected device are listed.</span></span> <span data-ttu-id="e90ad-129">Esta clase administra el bucle de mensajería y controla la entrada del usuario, como arrastrar archivos al dispositivo y eliminar archivos del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e90ad-129">This class manages the messaging loop, and handles user input such as dragging files onto the device and deleting files from the device.</span></span>                                                                                                                          |
| <span data-ttu-id="e90ad-130">CStatus</span><span class="sxs-lookup"><span data-stu-id="e90ad-130">CStatus</span></span>              | <span data-ttu-id="e90ad-131">Status. cpp</span><span class="sxs-lookup"><span data-stu-id="e90ad-131">Status.cpp</span></span>              | <span data-ttu-id="e90ad-132">La clase que controla la barra de estado inferior en la ventana principal, donde se muestra el número de dispositivos y archivos, junto con la cantidad de memoria libre y utilizada en el dispositivo seleccionado.</span><span class="sxs-lookup"><span data-stu-id="e90ad-132">The class that handles the bottom status bar in the main window, where the number of devices and files is listed, along with the amount of free and used memory on the selected device.</span></span>                                                                                                                                                                                                         |
| <span data-ttu-id="e90ad-133">CWMDM</span><span class="sxs-lookup"><span data-stu-id="e90ad-133">CWMDM</span></span>                | <span data-ttu-id="e90ad-134">Wmdevmgr. cpp</span><span class="sxs-lookup"><span data-stu-id="e90ad-134">Wmdevmgr.cpp</span></span>            | <span data-ttu-id="e90ad-135">La interfaz de nivel superior para Windows Media Administrador de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="e90ad-135">The top-level interface for Windows Media Device Manager.</span></span> <span data-ttu-id="e90ad-136">Esta clase controla la autenticación, recupera la interfaz **IWMDeviceManager** de nivel superior y se registra para las notificaciones con la interfaz **IWMDMNotification** .</span><span class="sxs-lookup"><span data-stu-id="e90ad-136">This class handles authentication, retrieves the top-level **IWMDeviceManager** interface, and registers for notifications with the **IWMDMNotification** interface.</span></span>                                                                                                                                                                  |
| <span data-ttu-id="e90ad-137">CProgress</span><span class="sxs-lookup"><span data-stu-id="e90ad-137">CProgress</span></span>            | <span data-ttu-id="e90ad-138">Curso. cpp</span><span class="sxs-lookup"><span data-stu-id="e90ad-138">Progress.cpp</span></span>            | <span data-ttu-id="e90ad-139">La clase del proyecto de aplicación principal que crea y administra el cuadro de diálogo que muestra el progreso de un evento.</span><span class="sxs-lookup"><span data-stu-id="e90ad-139">The class in the main application project that creates and manages the dialog box showing the progress of an event.</span></span>                                                                                                                                                                                                                                                                             |
| <span data-ttu-id="e90ad-140">CItemData</span><span class="sxs-lookup"><span data-stu-id="e90ad-140">CItemData</span></span>            | <span data-ttu-id="e90ad-141">ItemData. cpp</span><span class="sxs-lookup"><span data-stu-id="e90ad-141">ItemData.cpp</span></span>            | <span data-ttu-id="e90ad-142">Una clase contenedora que contiene un puntero a un almacenamiento (si representa un archivo o carpeta en el dispositivo) o un dispositivo (si representa un dispositivo), así como una gran variedad de información sobre el objeto, incluidos el tamaño y los atributos.</span><span class="sxs-lookup"><span data-stu-id="e90ad-142">A wrapper class that holds a pointer to a storage (if representing a file or folder on the device) or a device (if representing a device), as well as a variety of information about the object including size and attributes.</span></span>                                                                                                                                                                  |
| <span data-ttu-id="e90ad-143">CNotificationHandler</span><span class="sxs-lookup"><span data-stu-id="e90ad-143">CNotificationHandler</span></span> | <span data-ttu-id="e90ad-144">Notificationhandler. cpp</span><span class="sxs-lookup"><span data-stu-id="e90ad-144">Notificationhandler.cpp</span></span> | <span data-ttu-id="e90ad-145">Controla las notificaciones de llegada y eliminación de dispositivos mediante la alerta de la ventana de CDevices.</span><span class="sxs-lookup"><span data-stu-id="e90ad-145">Handles device arrival and removal notifications by alerting the CDevices window.</span></span>                                                                                                                                                                                                                                                                                                               |
| <span data-ttu-id="e90ad-146">CProgressHelper</span><span class="sxs-lookup"><span data-stu-id="e90ad-146">CProgressHelper</span></span>      | <span data-ttu-id="e90ad-147">ProgressHelper. cpp</span><span class="sxs-lookup"><span data-stu-id="e90ad-147">ProgressHelper.cpp</span></span>      | <span data-ttu-id="e90ad-148">Creado por CDevFiles en funciones locales para recibir notificaciones de Windows Media Administrador de dispositivos mediante la implementación de **IWMDMProgress**.</span><span class="sxs-lookup"><span data-stu-id="e90ad-148">Created by CDevFiles in local functions to receive notifications from Windows Media Device Manager by implementing **IWMDMProgress**.</span></span> <span data-ttu-id="e90ad-149">La clase CProgress la usa para determinar la cantidad de barras en la barra de progreso y cuando una acción ha finalizado.</span><span class="sxs-lookup"><span data-stu-id="e90ad-149">It is used by the CProgress class to determine the amount of bars in the progress bar, and when an action is finished.</span></span> <span data-ttu-id="e90ad-150">Esta clase se define como un objeto COM que expone la interfaz de SDK **IWMDMProgress** y una interfaz personalizada IWMDMProgressHelper.</span><span class="sxs-lookup"><span data-stu-id="e90ad-150">This class is defined as a COM object that exposes the SDK interface **IWMDMProgress** and a custom interface IWMDMProgressHelper.</span></span> |
| <span data-ttu-id="e90ad-151">COperationHelper</span><span class="sxs-lookup"><span data-stu-id="e90ad-151">COperationHelper</span></span>     | <span data-ttu-id="e90ad-152">Operationhelper. cpp</span><span class="sxs-lookup"><span data-stu-id="e90ad-152">Operationhelper.cpp</span></span>     | <span data-ttu-id="e90ad-153">Esta clase implementa **IWMDMOperation** para controlar la transferencia manual de archivos.</span><span class="sxs-lookup"><span data-stu-id="e90ad-153">This class implements **IWMDMOperation** to handle manual transfer of files.</span></span> <span data-ttu-id="e90ad-154">Es multiproceso para permitir que se produzca de forma asincrónica y se define como un objeto COM que expone una interfaz personalizada, IWMDMOperationHelper, para crear instancias e inicializar la clase.</span><span class="sxs-lookup"><span data-stu-id="e90ad-154">It is multi-threaded to allow it to occur asynchronously, and is defined as a COM object that exposes a custom interface, IWMDMOperationHelper, to instantiate and initialize the class.</span></span> <span data-ttu-id="e90ad-155">Esta clase solo se utiliza si el usuario selecciona "usar interfaz de operación" en el menú de **Opciones** .</span><span class="sxs-lookup"><span data-stu-id="e90ad-155">This class is only used if the user selects "Use Operation Interface" in the **Options** menu.</span></span>                            |



 

<span data-ttu-id="e90ad-156">En las listas siguientes se describen los pasos básicos que se producen para varias acciones del usuario:</span><span class="sxs-lookup"><span data-stu-id="e90ad-156">The following lists outline the basic steps that occur for various user actions:</span></span>

<span data-ttu-id="e90ad-157">**Al iniciar**</span><span class="sxs-lookup"><span data-stu-id="e90ad-157">**On startup**</span></span>

<span data-ttu-id="e90ad-158">Los siguientes pasos principales se producen cuando se inicia la aplicación de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="e90ad-158">The following main steps occur when the sample application is started.</span></span>

1.  <span data-ttu-id="e90ad-159">Se crea una instancia de la variable CWMDM global y se autentica, y se registra para recibir notificaciones</span><span class="sxs-lookup"><span data-stu-id="e90ad-159">The global CWMDM variable is instantiated and authenticated, and registers to receive notifications</span></span>
2.  <span data-ttu-id="e90ad-160">Se crea una instancia de un CDevices global y se llama a CDevices:: Create para crear y rellenar el panel dispositivos.</span><span class="sxs-lookup"><span data-stu-id="e90ad-160">A global CDevices is instantiated, and CDevices::Create is called to create and fill the devices pane.</span></span>
3.  <span data-ttu-id="e90ad-161">Se crea una instancia de un CDevFiles global y se llama a CDevFiles:: Create para crear el panel archivos (que no se rellena hasta que el usuario selecciona un dispositivo).</span><span class="sxs-lookup"><span data-stu-id="e90ad-161">A global CDevFiles is instantiated, and CDevFiles::Create is called to create the files pane (which is not filled until the user selects a device).</span></span>
4.  <span data-ttu-id="e90ad-162">Se crea una instancia de un CStatus global y se llama a CStatus:: Create para crear una instancia de la barra de estado.</span><span class="sxs-lookup"><span data-stu-id="e90ad-162">A global CStatus is instantiated, and CStatus::Create is called to instantiate the status bar.</span></span>
5.  <span data-ttu-id="e90ad-163">\_OnViewRefresh enumera todos los dispositivos e inicializa y agrega todos los dispositivos (CItemData) a CDevices y actualiza la barra de estado para mostrar el número de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="e90ad-163">\_OnViewRefresh enumerates through all devices and initializes and adds all devices (CItemData) to CDevices and updates the status bar to show the number of devices.</span></span>
6.  <span data-ttu-id="e90ad-164">CDevices:: AddItem agrega el elemento a la vista de árbol que representa los dispositivos, con un puntero a sí mismo como TVITEM. lParam.</span><span class="sxs-lookup"><span data-stu-id="e90ad-164">CDevices::AddItem adds the item to the treeview representing the devices, with a pointer to itself as the TVITEM.lparam.</span></span> <span data-ttu-id="e90ad-165">Todos los objetos CDevice (Devices) y CDevFiles (File) se almacenan en este miembro del nodo TreeView en la ventana correspondiente.</span><span class="sxs-lookup"><span data-stu-id="e90ad-165">All CDevice (devices) and CDevFiles (file) objects are stored in this member of the treeview node in the appropriate window.</span></span>

<span data-ttu-id="e90ad-166">**Al seleccionar un dispositivo**</span><span class="sxs-lookup"><span data-stu-id="e90ad-166">**On selecting a device**</span></span>

<span data-ttu-id="e90ad-167">Los siguientes pasos principales se producen cuando el usuario selecciona un dispositivo en el panel izquierdo de la ventana de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e90ad-167">The following main steps occur when the user selects a device in the left-hand pane of the application window.</span></span>

1.  <span data-ttu-id="e90ad-168">La ventana de CDevices captura un clic y envía un \_ mensaje UPDATEDEVICE de DRM de WM \_ a sí mismo.</span><span class="sxs-lookup"><span data-stu-id="e90ad-168">The CDevices window traps a click and posts a WM\_DRM\_UPDATEDEVICE message, to itself.</span></span>
2.  <span data-ttu-id="e90ad-169">CDevices recibe su propio mensaje y llama a UpdateSelection, que indica al objeto CDevFiles global que borre todo, enumera todos los elementos de nivel superior del dispositivo y llama a CDevFiles:: AddItem para agregar cada uno al panel archivos.</span><span class="sxs-lookup"><span data-stu-id="e90ad-169">CDevices receives its own message and calls UpdateSelection, which tells the global CDevFiles object to clear everything, enumerate all the top-level items in the device, and calls CDevFiles::AddItem to add each to the files pane.</span></span>
3.  <span data-ttu-id="e90ad-170">Por último, CDevices llama a CDevFiles:: UpdateStatusBar para actualizar la barra de estado con el dispositivo y la información de archivo correctos.</span><span class="sxs-lookup"><span data-stu-id="e90ad-170">Finally, CDevices calls CDevFiles::UpdateStatusBar to update the status bar with the correct device and file information.</span></span>

<span data-ttu-id="e90ad-171">**Al crear una lista de reproducción**</span><span class="sxs-lookup"><span data-stu-id="e90ad-171">**On creating a playlist**</span></span>

<span data-ttu-id="e90ad-172">Después de hacer clic en "crear lista de reproducción" en el menú **contenedores** , la aplicación llama a la función local \_ OnCreatePlaylist, que realiza las acciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="e90ad-172">After clicking "Create Playlist" on the **Containers** menu, the application calls the local function \_OnCreatePlaylist, which performs the following actions:</span></span>

1.  <span data-ttu-id="e90ad-173">Obtiene el número de elementos seleccionados de la variable global CDevFiles.</span><span class="sxs-lookup"><span data-stu-id="e90ad-173">Get the number of selected items from the global CDevFiles variable.</span></span>
2.  <span data-ttu-id="e90ad-174">Llame a la función local DlgNamePlaylist para abrir un cuadro de diálogo con el fin de obtener un nombre para la lista de reproducción.</span><span class="sxs-lookup"><span data-stu-id="e90ad-174">Call the local function DlgNamePlaylist to open a dialog box to get a name for the playlist.</span></span>
3.  <span data-ttu-id="e90ad-175">Llame a CProgress:: Create para crear una ventana de diálogo que muestre el progreso de la acción y establezca los parámetros en la clase CProgress, como el texto del título, el intervalo, el valor actual, etc.</span><span class="sxs-lookup"><span data-stu-id="e90ad-175">Call the CProgress::Create to create a dialog window showing the progress of the action, and set parameters on the CProgress class, such as the title text, range, current value, and so on.</span></span>
4.  <span data-ttu-id="e90ad-176">Recorra en bucle todos los elementos seleccionados en el objeto de vista de árbol CDevFiles y solicite el objeto CItemData asociado a cada archivo seleccionado en la vista de árbol, incrementando la barra de diálogo de progreso con cada archivo.</span><span class="sxs-lookup"><span data-stu-id="e90ad-176">Loop through all the selected items in the CDevFiles tree view object, and request the CItemData object associated with each selected file in the tree view, incrementing the progress dialog bar with each file.</span></span> <span data-ttu-id="e90ad-177">Los archivos se agregan a una matriz de interfaces [**IWMDMStorage**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage) .</span><span class="sxs-lookup"><span data-stu-id="e90ad-177">The files are added to an array of [**IWMDMStorage**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage) interfaces.</span></span>
5.  <span data-ttu-id="e90ad-178">Obtiene un identificador para el elemento seleccionado actualmente y lo consulta en una interfaz [**IWMDMStorageControl3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstoragecontrol3) , que se usará más adelante para crear la nueva lista de reproducción en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e90ad-178">Get a handle to the currently selected item and query it for an [**IWMDMStorageControl3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstoragecontrol3) interface, which will be used later to create the new playlist on the device.</span></span>
6.  <span data-ttu-id="e90ad-179">Consulta el objeto seleccionado para [**IWMDMStorage3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage3)y llama a [**CreateEmptyMetadataObject**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage3-createemptymetadataobject) para crear una nueva interfaz [**IWMDMMetaData**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmmetadata).</span><span class="sxs-lookup"><span data-stu-id="e90ad-179">Query the selected object for [**IWMDMStorage3**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage3), and call [**CreateEmptyMetadataObject**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage3-createemptymetadataobject) to create a new [**IWMDMMetaData**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmmetadata)interface.</span></span>
7.  <span data-ttu-id="e90ad-180">Agregue el \_ código de \_ formato FORMATCODE ABSTRACTAUDIOVIDEOPLAYLIST de WMDM a la nueva interfaz **IWMDMMetadata** y cree una lista de reproducción en el dispositivo mediante una llamada a [**IWMDMStorageControl3:: Insert3**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol3-insert3), pasando la interfaz de metadatos.</span><span class="sxs-lookup"><span data-stu-id="e90ad-180">Add the WMDM\_FORMATCODE\_ABSTRACTAUDIOVIDEOPLAYLIST format code to the new **IWMDMMetadata** interface and create a playlist on the device by calling [**IWMDMStorageControl3::Insert3**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstoragecontrol3-insert3), passing in the metadata interface.</span></span> <span data-ttu-id="e90ad-181">El método recupera un puntero al nuevo **IWMDMStorage** en el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e90ad-181">The method retrieves a pointer to the new **IWMDMStorage** on the device.</span></span>
8.  <span data-ttu-id="e90ad-182">Rellene la lista de reproducción consultando el nuevo almacenamiento para [**IWMDMStorage4**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage4)y llamando a [**IWMDMStorage4:: SetReferences**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage4-setreferences), pasando la matriz de punteros de **IWMDMStorage** recopilados en el paso 4.</span><span class="sxs-lookup"><span data-stu-id="e90ad-182">Fill the playlist by querying the new storage for [**IWMDMStorage4**](/windows/desktop/api/mswmdm/nn-mswmdm-iwmdmstorage4), and calling [**IWMDMStorage4::SetReferences**](/windows/desktop/api/mswmdm/nf-mswmdm-iwmdmstorage4-setreferences), passing in the array of **IWMDMStorage** pointers collected in step 4.</span></span>
9.  <span data-ttu-id="e90ad-183">Por último, cree un nuevo objeto CItemData para que contenga la nueva lista de reproducción en el dispositivo, Inicialícelo con el nuevo almacenamiento y llame a CDevFiles:: AddItem para agregarlo al panel CDevFiles.</span><span class="sxs-lookup"><span data-stu-id="e90ad-183">Finally, create a new CItemData object to hold the new playlist on the device, initialize it with the new storage, and call CDevFiles::AddItem to add it to the CDevFiles pane.</span></span>

## <a name="related-topics"></a><span data-ttu-id="e90ad-184">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e90ad-184">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e90ad-185">**Aplicación de escritorio de ejemplo**</span><span class="sxs-lookup"><span data-stu-id="e90ad-185">**Sample Desktop Application**</span></span>](sample-desktop-application.md)
</dt> </dl>

 

 




