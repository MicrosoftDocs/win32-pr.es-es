---
title: Modelo de esquema ADSI
description: Un esquema es similar a un diccionario en que contiene la definición de cada tipo de objeto conocido para un servicio de directorio.
ms.assetid: 70561a11-1560-4b1c-a999-e2a7b2002ab0
ms.tgt_platform: multiple
keywords:
- ADSI del modelo de esquema ADSI
- ADSI ADSI, acerca de, esquema
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 23eec9264ae2692952106802cc06cbad937a42a9
ms.sourcegitcommit: b0ebdefc3dcd5c04bede94091833aa1015a2f95c
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/21/2020
ms.locfileid: "103995623"
---
# <a name="adsi-schema-model"></a><span data-ttu-id="bb0d7-105">Modelo de esquema ADSI</span><span class="sxs-lookup"><span data-stu-id="bb0d7-105">ADSI Schema Model</span></span>

<span data-ttu-id="bb0d7-106">Un esquema es similar a un diccionario en que contiene la definición de cada tipo de objeto conocido para un servicio de directorio.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-106">A schema is similar to a dictionary in that it holds the definition of every type of object known to a directory service.</span></span> <span data-ttu-id="bb0d7-107">Las aplicaciones cliente ADSI pueden examinar un esquema para detectar las características de cualquier implementación de ADSI determinada.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-107">ADSI client applications can browse through a schema to discover the features of any given ADSI implementation.</span></span> <span data-ttu-id="bb0d7-108">Además, ADSI proporciona interfaces de administración de esquemas que se pueden utilizar para comunicarse con el esquema subyacente de un servicio de directorio.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-108">In addition, ADSI supplies schema management interfaces that can be used to communicate with a directory service's underlying schema.</span></span>

<span data-ttu-id="bb0d7-109">Algunos esquemas son extensibles y los proveedores ADSI o proveedores de terceros pueden optar por publicar nuevas interfaces o propiedades adicionales para las interfaces existentes.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-109">Some schemas are extensible and ADSI providers or third-party suppliers may choose to publish new interfaces or additional properties for existing interfaces there.</span></span> <span data-ttu-id="bb0d7-110">Los clientes ADSI usan estos datos para determinar qué características se admiten para cada servicio de directorio.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-110">ADSI clients use this data to determine what features are supported for each directory service.</span></span>

<span data-ttu-id="bb0d7-111">Hay tres tipos de objetos de esquema: clases, propiedades y sintaxis, cada una de las cuales admite respectivamente las interfaces de administración de esquema [**IADsClass**](/windows/desktop/api/Iads/nn-iads-iadsclass), [**IADsProperty**](/windows/desktop/api/Iads/nn-iads-iadsproperty)y [**IADsSyntax**](/windows/desktop/api/Iads/nn-iads-iadssyntax).</span><span class="sxs-lookup"><span data-stu-id="bb0d7-111">There are three kinds of schema objects: classes, properties, and syntaxes, each respectively supporting the schema management interfaces [**IADsClass**](/windows/desktop/api/Iads/nn-iads-iadsclass), [**IADsProperty**](/windows/desktop/api/Iads/nn-iads-iadsproperty), and [**IADsSyntax**](/windows/desktop/api/Iads/nn-iads-iadssyntax).</span></span>

> [!Note]  
> <span data-ttu-id="bb0d7-112">La clase es un término sobrecargado.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-112">Class is an overloaded term.</span></span> <span data-ttu-id="bb0d7-113">Hay clases de C++, clases de Java, clases COM y clases ADSI.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-113">There are C++ classes, Java classes, COM classes, and ADSI classes.</span></span> <span data-ttu-id="bb0d7-114">En este documento, la palabra clase, a menos que se califique de otra manera, hace referencia a una categoría o tipo de objeto de esquema.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-114">In this document, the word class, unless otherwise qualified, refers to a category or type of schema object.</span></span>

 

<span data-ttu-id="bb0d7-115">ADSI abstrae el esquema de cada servicio de directorio y lo coloca en todos los nodos raíz de nivel superior del objeto de **espacio de nombres** .</span><span class="sxs-lookup"><span data-stu-id="bb0d7-115">ADSI abstracts the schema of every directory service and places it in every top-level root node in the **Namespace** object.</span></span> <span data-ttu-id="bb0d7-116">Para identificar las clases que admite un servicio de directorio en un nodo raíz determinado, se enumera el objeto de esquema y se obtiene una lista de objetos de clase, objetos de propiedad y objetos de sintaxis.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-116">To identify what classes a directory service supports on a given root-node, you enumerate the schema object and get a list of class objects, property objects, and syntax objects.</span></span> <span data-ttu-id="bb0d7-117">Para obtener más información, vea [usar el esquema ADSI](using-the-adsi-schema.md).</span><span class="sxs-lookup"><span data-stu-id="bb0d7-117">For more information, see [Using the ADSI Schema](using-the-adsi-schema.md).</span></span>

## <a name="adsi-ldap-provider-schema-cache"></a><span data-ttu-id="bb0d7-118">Caché de esquema del proveedor LDAP de ADSI</span><span class="sxs-lookup"><span data-stu-id="bb0d7-118">ADSI LDAP Provider Schema Cache</span></span>

<span data-ttu-id="bb0d7-119">El proveedor LDAP para ADSI intenta almacenar en caché los datos de esquema en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-119">The LDAP provider for ADSI attempts to cache schema data to the local computer.</span></span> <span data-ttu-id="bb0d7-120">Un subesquema se identifica mediante un nombre distintivo almacenado en el atributo [**subSchemaSubEntry**](/windows/desktop/ADSchema/a-subschemasubentry) situado en la raíz del servicio de directorio Enterprise (RootDSE).</span><span class="sxs-lookup"><span data-stu-id="bb0d7-120">A subschema is identified by a distinguished name stored in the [**subSchemaSubEntry**](/windows/desktop/ADSchema/a-subschemasubentry) attribute located in the root of the directory service enterprise (rootDSE).</span></span> <span data-ttu-id="bb0d7-121">Además de proporcionar los datos del subesquema, los servidores LDAP v3 deben exponer un atributo [**modifyTimeStamp**](/windows/desktop/ADSchema/a-modifytimestamp) que se usa para determinar la última vez que se modificó el esquema.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-121">In addition to providing the subschema data, LDAP v3 servers should expose a [**modifyTimeStamp**](/windows/desktop/ADSchema/a-modifytimestamp) attribute that is used to determine the last time the schema was modified.</span></span>

<span data-ttu-id="bb0d7-122">Cuando ADSI se enlaza primero al servidor LDAP, recupera los datos del subesquema mediante el atributo [**subSchemaSubEntry**](/windows/desktop/ADSchema/a-subschemasubentry) .</span><span class="sxs-lookup"><span data-stu-id="bb0d7-122">When ADSI first binds to the LDAP server, it retrieves the subschema data using the [**subSchemaSubEntry**](/windows/desktop/ADSchema/a-subschemasubentry) attribute.</span></span> <span data-ttu-id="bb0d7-123">Si ADSI consigue encontrar el objeto de subesquema, almacena un puntero a los datos del registro en el equipo que se está conectando al servidor LDAP.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-123">If ADSI succeeds in finding the subschema object, it stores a pointer to the data in the registry on the computer that is connecting to the LDAP server.</span></span> <span data-ttu-id="bb0d7-124">Para obtener información sobre exactamente dónde se almacenan estos valores en el registro, consulte [ADSI y control de cuentas de usuario](adsi-and-uac.md).</span><span class="sxs-lookup"><span data-stu-id="bb0d7-124">For information on exactly where these values are stored in the registry, see [ADSI and User Account Control](adsi-and-uac.md).</span></span>

<span data-ttu-id="bb0d7-125">ADSI intenta procesar los datos de esquema y lee el atributo [**modifyTimeStamp**](/windows/desktop/ADSchema/a-modifytimestamp) .</span><span class="sxs-lookup"><span data-stu-id="bb0d7-125">ADSI then attempts to process the schema data and reads the [**modifyTimeStamp**](/windows/desktop/ADSchema/a-modifytimestamp) attribute.</span></span> <span data-ttu-id="bb0d7-126">Si el atributo **modifyTimeStamp** existe y ADSI procesa correctamente el esquema, ADSI escribe el subesquema en el disco y crea los dos valores del registro siguientes bajo la clave.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-126">If the **modifyTimeStamp** attribute exists and ADSI successfully processes the schema, ADSI writes the subschema to disk and creates the two following registry values under the key.</span></span> <span data-ttu-id="bb0d7-127">Si los datos del subesquema existen, pero no se pueden procesar, no se crea ninguno de estos valores del registro:</span><span class="sxs-lookup"><span data-stu-id="bb0d7-127">If the subschema data exists, but cannot be processed, neither of these registry values is created:</span></span>

-   <span data-ttu-id="bb0d7-128">Un valor de **hora** , que contiene el atributo [**modifyTimeStamp**](/windows/desktop/ADSchema/a-modifytimestamp) .</span><span class="sxs-lookup"><span data-stu-id="bb0d7-128">A **Time** value, which contains the [**modifyTimeStamp**](/windows/desktop/ADSchema/a-modifytimestamp) attribute.</span></span> <span data-ttu-id="bb0d7-129">Este valor se utiliza para asegurarse de que los datos del esquema están actualizados y evita la recarga constante de los datos del esquema.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-129">This value is used to ensure that the schema data is current and prevents the constant reloading of the schema data.</span></span>
-   <span data-ttu-id="bb0d7-130">Un valor de **archivo** , que contiene la ruta de acceso donde ADSI almacena los datos de esquema en el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-130">A **File** value, which contains the path to where ADSI stores the schema data in the file system.</span></span> <span data-ttu-id="bb0d7-131">De forma predeterminada, ADSI almacena en caché el subesquema del <systemroot> \\ directorio SchCache con un nombre de archivo que corresponde al nombre del servidor LDAP.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-131">By default, ADSI caches the subschema in the <systemroot>\\SchCache directory with a file name corresponding to the name of the LDAP server.</span></span>

<span data-ttu-id="bb0d7-132">Si se pueden procesar los datos del subesquema, pero no se expone ningún atributo [**modifyTimeStamp**](/windows/desktop/ADSchema/a-modifytimestamp) , los datos del esquema se almacenan en la memoria caché, pero no se escriben en el disco.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-132">If the subschema data can be processed, but no [**modifyTimeStamp**](/windows/desktop/ADSchema/a-modifytimestamp) attribute is exposed, the schema data is cached in memory, but not written to disk.</span></span> <span data-ttu-id="bb0d7-133">Si se ha contactado con un servidor LDAP v3 a través de ADSI en el equipo local y no hay un subesquema almacenado en caché, lo más probable es que se deba a uno de los siguientes motivos:</span><span class="sxs-lookup"><span data-stu-id="bb0d7-133">If an LDAP v3 server has been contacted through ADSI on the local computer and a cached subschema is not present, it is most likely for one of the following reasons:</span></span>

-   <span data-ttu-id="bb0d7-134">El servidor no expondría las propiedades correctas.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-134">The server did not expose the correct properties.</span></span>
-   <span data-ttu-id="bb0d7-135">ADSI no pudo procesar el esquema.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-135">ADSI was unable to process the schema.</span></span>
-   <span data-ttu-id="bb0d7-136">ADSI no pudo escribir el archivo en el sistema de archivos.</span><span class="sxs-lookup"><span data-stu-id="bb0d7-136">ADSI was unable to write the file to the file system.</span></span>

 

 