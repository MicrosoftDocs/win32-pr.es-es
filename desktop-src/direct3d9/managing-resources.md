---
description: La administración de recursos es el proceso en el que los recursos se promueven del almacenamiento de memoria del sistema al almacenamiento accesible para dispositivos y se descartan del almacenamiento accesible desde el dispositivo.
ms.assetid: 4aa55313-b86c-48e7-829a-a0917c2ebae7
title: Administrar recursos (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30ef7a8be0e71c652b6e3f2ed467e866fd922791
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104274686"
---
# <a name="managing-resources-direct3d-9"></a><span data-ttu-id="def58-103">Administrar recursos (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="def58-103">Managing Resources (Direct3D 9)</span></span>

<span data-ttu-id="def58-104">La administración de recursos es el proceso en el que los recursos se promueven del almacenamiento de memoria del sistema al almacenamiento accesible para dispositivos y se descartan del almacenamiento accesible desde el dispositivo.</span><span class="sxs-lookup"><span data-stu-id="def58-104">Resource management is the process where resources are promoted from system-memory storage to device-accessible storage and discarded from device-accessible storage.</span></span> <span data-ttu-id="def58-105">El tiempo de ejecución de Direct3D tiene su propio algoritmo de administración basado en una técnica de prioridad usada menos recientemente.</span><span class="sxs-lookup"><span data-stu-id="def58-105">The Direct3D run time has its own management algorithm based on a least-recently-used priority technique.</span></span> <span data-ttu-id="def58-106">Direct3D cambia a una técnica de prioridad usada más recientemente cuando detecta que se usan más recursos de los que pueden coexistir en la memoria accesible para dispositivos en un solo fotograma: entre las llamadas a [**IDirect3DDevice9:: BeginScene**](/windows/desktop/api) y [**IDirect3DDevice9:: EndScene**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-endscene) .</span><span class="sxs-lookup"><span data-stu-id="def58-106">Direct3D switches to a most-recently-used priority technique when it detects that more resources than can coexist in device-accessible memory are used in a single frame - between [**IDirect3DDevice9::BeginScene**](/windows/desktop/api) and [**IDirect3DDevice9::EndScene**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-endscene) calls.</span></span>

<span data-ttu-id="def58-107">Use la [**marca \_ predeterminada de D3DPOOL**](./d3dpool.md) en el momento de la creación para especificar que un recurso se coloca en el bloque de memoria más adecuado para el conjunto de usos solicitado para el recurso especificado.</span><span class="sxs-lookup"><span data-stu-id="def58-107">Use the [**D3DPOOL\_DEFAULT**](./d3dpool.md) flag at creation time to specify that a resource are placed in the memory pool most appropriate for the set of usages requested for the given resource.</span></span> <span data-ttu-id="def58-108">Suele ser la memoria de vídeo, incluida la memoria de vídeo local y la memoria de puerto de gráficos acelerado (AGP).</span><span class="sxs-lookup"><span data-stu-id="def58-108">This is usually video memory, including both local video memory and accelerated graphics port (AGP) memory.</span></span> <span data-ttu-id="def58-109">Los recursos del grupo predeterminado no se conservan a través de las transiciones entre los Estados de pérdida y de funcionamiento del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="def58-109">Resources in the default pool do not persist through transitions between the lost and operational states of the device.</span></span> <span data-ttu-id="def58-110">Estos recursos deben liberarse antes de llamar a RESET y se deben volver a crear.</span><span class="sxs-lookup"><span data-stu-id="def58-110">These resources must be released before calling reset and must then be re-created.</span></span>

<span data-ttu-id="def58-111">Use la [**marca \_ administrada D3DPOOL**](./d3dpool.md) en el momento de la creación para especificar un recurso administrado.</span><span class="sxs-lookup"><span data-stu-id="def58-111">Use the [**D3DPOOL\_MANAGED**](./d3dpool.md) flag at creation time to specify a managed resource.</span></span> <span data-ttu-id="def58-112">Los recursos administrados se conservan a través de las transiciones entre los Estados de pérdida y de funcionamiento del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="def58-112">Managed resources persist through transitions between the lost and operational states of the device.</span></span> <span data-ttu-id="def58-113">Estos recursos existen tanto en el vídeo como en la memoria del sistema.</span><span class="sxs-lookup"><span data-stu-id="def58-113">These resources exist both in video and system memory.</span></span> <span data-ttu-id="def58-114">Un recurso administrado se copiará en la memoria de vídeo cuando sea necesario durante la representación.</span><span class="sxs-lookup"><span data-stu-id="def58-114">A managed resource will be copied into video memory when it is needed during rendering.</span></span> <span data-ttu-id="def58-115">El dispositivo se puede restaurar con una llamada a [**IDirect3DDevice9:: RESET**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset)y estos recursos continúan funcionando normalmente sin tener que volver a cargarlos con los datos.</span><span class="sxs-lookup"><span data-stu-id="def58-115">The device can be restored with a call to [**IDirect3DDevice9::Reset**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-reset), and such resources continue to function normally without being reloaded with data.</span></span> <span data-ttu-id="def58-116">Sin embargo, si el dispositivo se debe destruir y volver a crear, se deben volver a crear todos los recursos.</span><span class="sxs-lookup"><span data-stu-id="def58-116">However, if the device must be destroyed and re-created, all resources must be re-created.</span></span>

<span data-ttu-id="def58-117">No se recomienda la administración de recursos para los recursos que cambian con una frecuencia alta.</span><span class="sxs-lookup"><span data-stu-id="def58-117">Resource management is not recommended for resources which change with high frequency.</span></span> <span data-ttu-id="def58-118">Por ejemplo, los búferes de vértices y de índices que se usan para recorrer un gráfico de escena cada fotograma que representa solo la geometría visible para el usuario cambia cada fotograma.</span><span class="sxs-lookup"><span data-stu-id="def58-118">For example, vertex and index buffers which are used to traverse a scene graph every frame rendering only geometry visible to the user changes every frame.</span></span> <span data-ttu-id="def58-119">Dado que los recursos administrados están respaldados por la memoria del sistema, los cambios constantes deben actualizarse en la memoria del sistema, lo que puede provocar una degradación grave del rendimiento.</span><span class="sxs-lookup"><span data-stu-id="def58-119">Since managed resources are backed by system memory, the constant changes must be updated in system memory, which can cause a severe degradation in performance.</span></span> <span data-ttu-id="def58-120">En este escenario concreto, se debe usar [**D3DPOOL \_ default**](./d3dpool.md) junto con [**D3DUSAGE \_ Dynamic**](d3dusage.md) .</span><span class="sxs-lookup"><span data-stu-id="def58-120">For this particular scenario, [**D3DPOOL\_DEFAULT**](./d3dpool.md) along with [**D3DUSAGE\_DYNAMIC**](d3dusage.md) should be used.</span></span>

<span data-ttu-id="def58-121">Otro ejemplo para el que no se recomienda la administración de recursos (y que el runtime no permite explícitamente) es la administración de una textura creada con [**D3DUSAGE \_ RENDERTARGET**](d3dusage.md).</span><span class="sxs-lookup"><span data-stu-id="def58-121">Another example for which resource management is not recommended (and explicitly not allowed by the runtime) is management of a texture created with [**D3DUSAGE\_RENDERTARGET**](d3dusage.md).</span></span> <span data-ttu-id="def58-122">Si el tiempo de ejecución administraba la memoria usada por los destinos de representación, su contenido tendría que copiarse constantemente en la memoria del sistema durante la representación, lo que provocaría grandes penalizaciones de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="def58-122">If the memory used by render targets were managed by the runtime, it's contents would have to constantly be copied to system memory during rendering, causing large performance penalties.</span></span> <span data-ttu-id="def58-123">Por esta razón, los destinos de representación deben crearse en el grupo predeterminado.</span><span class="sxs-lookup"><span data-stu-id="def58-123">For this reason, render targets must be created in the default pool.</span></span> <span data-ttu-id="def58-124">Si es necesario el acceso a la CPU de los datos contenidos en un destino de representación, los datos se deben copiar en un recurso creado en [**D3DPOOL \_ SYSTEMMEM**](./d3dpool.md) mediante [**IDirect3DDevice9:: UpdateTexture**](/windows/desktop/api)o [**IDirect3DDevice9:: UpdateSurface**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface)</span><span class="sxs-lookup"><span data-stu-id="def58-124">If CPU access of the data contained in a render target is needed, the data must be copied to a resource created in [**D3DPOOL\_SYSTEMMEM**](./d3dpool.md) using [**IDirect3DDevice9::UpdateTexture**](/windows/desktop/api), or [**IDirect3DDevice9::UpdateSurface**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-updatesurface)</span></span>

<span data-ttu-id="def58-125">Para obtener más información sobre el estado de pérdida de un dispositivo, vea [dispositivos perdidos (Direct3D 9)](lost-devices.md).</span><span class="sxs-lookup"><span data-stu-id="def58-125">For more information about the lost state of a device, see [Lost Devices (Direct3D 9)](lost-devices.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="def58-126">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="def58-126">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="def58-127">Recursos de Direct3D</span><span class="sxs-lookup"><span data-stu-id="def58-127">Direct3D Resources</span></span>](direct3d-resources.md)
</dt> </dl>

 

 
