---
description: Las baterías pueden proporcionar energía a equipos portátiles y equipos que ejecutan un sistema de alimentación ininterrumpida (SAI).
ms.assetid: 3580b37d-611c-46b4-9300-4943833d6852
title: Información de la batería
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: a4f9838a2a95db037b9655f116f07e3cf2e072d4
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105667225"
---
# <a name="battery-information"></a><span data-ttu-id="d6692-103">Información de la batería</span><span class="sxs-lookup"><span data-stu-id="d6692-103">Battery Information</span></span>

<span data-ttu-id="d6692-104">Las baterías pueden proporcionar energía a equipos portátiles y equipos que ejecutan un sistema de alimentación ininterrumpida (SAI).</span><span class="sxs-lookup"><span data-stu-id="d6692-104">Batteries can provide power for portable computers and computers running on an uninterruptible power supply (UPS).</span></span> <span data-ttu-id="d6692-105">En estos equipos, el sistema operativo proporciona información sobre el estado de la batería para que las aplicaciones puedan proporcionar funciones útiles para el usuario.</span><span class="sxs-lookup"><span data-stu-id="d6692-105">On these computers, the operating system provides information on the state of the battery so applications can provide useful functions for the user.</span></span> <span data-ttu-id="d6692-106">(No se admiten sistemas de batería y SAI anteriores no estándar).</span><span class="sxs-lookup"><span data-stu-id="d6692-106">(Some older nonstandard battery systems and UPSs are not supported.)</span></span>

<span data-ttu-id="d6692-107">Tenga en cuenta que en esta información general se supone que está familiarizado con la [Administración de dispositivos](/windows/desktop/DevIO/device-management).</span><span class="sxs-lookup"><span data-stu-id="d6692-107">Note that this overview assumes you are familiar with [device management](/windows/desktop/DevIO/device-management).</span></span>

<span data-ttu-id="d6692-108">Para obtener información sobre el estado de la batería, utilice la función [**GetSystemPowerStatus**](/windows/desktop/api/Winbase/nf-winbase-getsystempowerstatus) , que devuelve información general acerca de todas las fuentes de alimentación del sistema.</span><span class="sxs-lookup"><span data-stu-id="d6692-108">To obtain information about the battery status, use the [**GetSystemPowerStatus**](/windows/desktop/api/Winbase/nf-winbase-getsystempowerstatus) function, which returns general information about all power sources in the system.</span></span> <span data-ttu-id="d6692-109">Debe usar **GetSystemPowerStatus** siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="d6692-109">You should use **GetSystemPowerStatus** whenever possible.</span></span>

<span data-ttu-id="d6692-110">En algunos casos, sin embargo, es necesario obtener información detallada acerca de cada batería individual.</span><span class="sxs-lookup"><span data-stu-id="d6692-110">In some cases, however, detailed information about each individual battery is necessary.</span></span> <span data-ttu-id="d6692-111">Para este propósito, cada dispositivo de batería expone una interfaz IOCTL.</span><span class="sxs-lookup"><span data-stu-id="d6692-111">For this purpose, each battery device exposes an IOCTL interface.</span></span> <span data-ttu-id="d6692-112">Las siguientes operaciones IOCTL se realizan mediante la función [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) :</span><span class="sxs-lookup"><span data-stu-id="d6692-112">The following IOCTL operations are performed using the [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) function:</span></span>

<dl>

[<span data-ttu-id="d6692-113">**\_información de \_ consulta de batería ioctl \_**</span><span class="sxs-lookup"><span data-stu-id="d6692-113">**IOCTL\_BATTERY\_QUERY\_INFORMATION**</span></span>](ioctl-battery-query-information.md)  
[<span data-ttu-id="d6692-114">**Estado de la \_ consulta de batería ioctl \_ \_**</span><span class="sxs-lookup"><span data-stu-id="d6692-114">**IOCTL\_BATTERY\_QUERY\_STATUS**</span></span>](ioctl-battery-query-status.md)  
[<span data-ttu-id="d6692-115">**\_etiqueta de \_ consulta ioctl Battery \_**</span><span class="sxs-lookup"><span data-stu-id="d6692-115">**IOCTL\_BATTERY\_QUERY\_TAG**</span></span>](ioctl-battery-query-tag.md)  
[<span data-ttu-id="d6692-116">**\_información del \_ conjunto de baterías de ioctl \_**</span><span class="sxs-lookup"><span data-stu-id="d6692-116">**IOCTL\_BATTERY\_SET\_INFORMATION**</span></span>](ioctl-battery-set-information.md)  
</dl>

<span data-ttu-id="d6692-117">Para usar esta interfaz, una aplicación debe seguir varios pasos.</span><span class="sxs-lookup"><span data-stu-id="d6692-117">To use this interface, an application must follow several steps.</span></span> <span data-ttu-id="d6692-118">En primer lugar, debe usar rutinas de instalación para enumerar todos los dispositivos que tienen una interfaz de clase de batería.</span><span class="sxs-lookup"><span data-stu-id="d6692-118">First, it must use setup routines to enumerate all devices that have a battery class interface.</span></span> <span data-ttu-id="d6692-119">Tenga en cuenta que estos dispositivos representan los puertos de la batería, no las baterías reales presentes en el sistema.</span><span class="sxs-lookup"><span data-stu-id="d6692-119">Note that these devices represent the battery ports, not actual batteries present in the system.</span></span> <span data-ttu-id="d6692-120">A continuación, la aplicación debe abrir un identificador de cada dispositivo para que pueda usar la función [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) para enviar solicitudes al dispositivo y, a continuación, adquirir etiquetas para las baterías que se inserten.</span><span class="sxs-lookup"><span data-stu-id="d6692-120">The application must then open a handle to each device so it can use the [**DeviceIoControl**](/windows/desktop/api/ioapiset/nf-ioapiset-deviceiocontrol) function to send requests to the device, and then acquire tags for any batteries that are inserted.</span></span> <span data-ttu-id="d6692-121">Después de completar estos pasos, la aplicación puede enviar consultas a cada dispositivo de batería.</span><span class="sxs-lookup"><span data-stu-id="d6692-121">After completing these steps, the application can send queries to each battery device.</span></span>

## <a name="battery-tags"></a><span data-ttu-id="d6692-122">Etiquetas de la batería</span><span class="sxs-lookup"><span data-stu-id="d6692-122">Battery Tags</span></span>

<span data-ttu-id="d6692-123">Dado que cada dispositivo de batería representa una ranura en la que se puede insertar una batería, debe haber una manera de determinar cuándo se quita la batería y se reinserta, se reemplaza o se cambia de otra manera.</span><span class="sxs-lookup"><span data-stu-id="d6692-123">Because each battery device represents a slot into which a battery can be inserted, there must be a way to determine when the battery is removed and reinserted, replaced, or changed in any other way.</span></span> <span data-ttu-id="d6692-124">Para ello, se asigna una etiqueta a cada batería de una ranura determinada.</span><span class="sxs-lookup"><span data-stu-id="d6692-124">To do this, each battery in a particular slot is assigned a tag.</span></span> <span data-ttu-id="d6692-125">Esta etiqueta se debe usar para todas las consultas de información.</span><span class="sxs-lookup"><span data-stu-id="d6692-125">This tag must be used for all queries for information.</span></span> <span data-ttu-id="d6692-126">Si la etiqueta proporcionada por la aplicación no coincide con la batería, se produce un error en la consulta, lo que indica a la aplicación que la batería ha cambiado de alguna manera.</span><span class="sxs-lookup"><span data-stu-id="d6692-126">If the tag provided by the application does not match the battery, the query fails, indicating to the application that the battery has changed in some way.</span></span> <span data-ttu-id="d6692-127">Para completar correctamente la consulta, se necesita una nueva etiqueta de batería.</span><span class="sxs-lookup"><span data-stu-id="d6692-127">To successfully complete the query, a new battery tag is required.</span></span> <span data-ttu-id="d6692-128">Adquiera la etiqueta mediante la operación de etiqueta de consulta de la [**\_ batería \_ \_ ioctl**](ioctl-battery-query-tag.md) .</span><span class="sxs-lookup"><span data-stu-id="d6692-128">Acquire the tag using the [**IOCTL\_BATTERY\_QUERY\_TAG**](ioctl-battery-query-tag.md) operation.</span></span> <span data-ttu-id="d6692-129">Si hay una batería en esa ranura, la etiqueta devuelta se puede pasar a cualquiera de los demás ioctl de la batería para realizar otras funciones.</span><span class="sxs-lookup"><span data-stu-id="d6692-129">If a battery is present in that slot, the tag returned can be passed to any of the other battery IOCTLs to perform other functions.</span></span> <span data-ttu-id="d6692-130">En un sistema de varias baterías, cada dispositivo de batería emite etiquetas de batería por separado, por lo que la etiqueta de dos dispositivos independientes podría en ocasiones ser idénticas.</span><span class="sxs-lookup"><span data-stu-id="d6692-130">On a multi-battery system, each battery device (slot) issues battery tags independently, so the tag from two separate devices could at times be identical.</span></span>

<span data-ttu-id="d6692-131">Un cambio en la etiqueta de la batería no significa necesariamente que la batería se haya quitado y reinsertado o reemplazado.</span><span class="sxs-lookup"><span data-stu-id="d6692-131">A change in the battery tag does not necessarily mean that the battery was removed and reinserted or replaced.</span></span> <span data-ttu-id="d6692-132">Se puede generar una nueva etiqueta si hay un cambio en alguno de los datos que normalmente sería estático.</span><span class="sxs-lookup"><span data-stu-id="d6692-132">A new tag can be generated if there is a change in any of the data that would normally be static.</span></span> <span data-ttu-id="d6692-133">Por ejemplo, cuando se realiza la carga de una batería, es posible que haya cambiado la última capacidad cargada.</span><span class="sxs-lookup"><span data-stu-id="d6692-133">For example, when a battery is done charging, the last fully charged capacity may have changed.</span></span> <span data-ttu-id="d6692-134">La etiqueta también puede cambiar si la comunicación de la batería se ha perdido temporalmente o si se ha producido una notificación incorrecta del BIOS.</span><span class="sxs-lookup"><span data-stu-id="d6692-134">The tag can also change if battery communication was temporarily lost or if there was an improper notification from the BIOS.</span></span> <span data-ttu-id="d6692-135">En algunos sistemas, la etiqueta de la batería puede actualizarse cada vez que cambie el estado de AC.</span><span class="sxs-lookup"><span data-stu-id="d6692-135">On some systems, the battery tag may be updated whenever the AC status changes.</span></span> <span data-ttu-id="d6692-136">Este comportamiento se debe a una característica del sistema de la batería y no es común.</span><span class="sxs-lookup"><span data-stu-id="d6692-136">This behavior is due to a characteristic of the battery system and isn't common.</span></span>

<span data-ttu-id="d6692-137">Cada vez que se actualiza la etiqueta de la batería, la batería debe tratarse como si fuera una nueva batería y se deben volver a leer todos los datos almacenados en caché.</span><span class="sxs-lookup"><span data-stu-id="d6692-137">Whenever the battery tag is updated, the battery should be treated as if it were a new battery and all cached data should be re-read.</span></span> <span data-ttu-id="d6692-138">Si una aplicación necesita saber si existe la misma batería física, debe comprobar el valor de **BatteryUniqueID** en el búfer de salida de la información de la consulta de la batería de ioctl cuando se llama con el nivel de información **BatteryUniqueID** . [**\_ \_ \_**](ioctl-battery-query-information.md)</span><span class="sxs-lookup"><span data-stu-id="d6692-138">If an application needs to know if the same physical battery is present, it should check the value of **BatteryUniqueID** in the output buffer of [**IOCTL\_BATTERY\_QUERY\_INFORMATION**](ioctl-battery-query-information.md) when called with the **BatteryUniqueID** information level.</span></span>

## <a name="related-topics"></a><span data-ttu-id="d6692-139">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="d6692-139">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d6692-140">Acerca de la administración de energía</span><span class="sxs-lookup"><span data-stu-id="d6692-140">About Power Management</span></span>](about-power-management.md)
</dt> <dt>

[<span data-ttu-id="d6692-141">Enumerar dispositivos de batería</span><span class="sxs-lookup"><span data-stu-id="d6692-141">Enumerating Battery Devices</span></span>](enumerating-battery-devices.md)
</dt> </dl>

 

 
