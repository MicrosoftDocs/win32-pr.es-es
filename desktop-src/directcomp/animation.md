---
title: Animación (DirectComposition)
description: En este tema se describen los conceptos básicos de la animación DirectComposition de Microsoft.
ms.assetid: 65DA3971-97C0-4B59-BC67-287AAEAAE340
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5f7462a10fd83b45c1b90450fdde806ef306a2f6
ms.sourcegitcommit: 8fa6614b715bddf14648cce36d2df22e5232801a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 12/10/2020
ms.locfileid: "105685820"
---
# <a name="animation-directcomposition"></a><span data-ttu-id="e1def-103">Animación (DirectComposition)</span><span class="sxs-lookup"><span data-stu-id="e1def-103">Animation (DirectComposition)</span></span>

> [!NOTE]
> <span data-ttu-id="e1def-104">En el caso de las aplicaciones de Windows 10, se recomienda usar las API de Windows. UI. Composition en lugar de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e1def-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="e1def-105">Para obtener más información, consulte [modernice su aplicación de escritorio con el nivel de objetos visuales](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="e1def-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="e1def-106">En este tema se describen los conceptos básicos de la animación DirectComposition de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="e1def-106">This topic discusses the basics of Microsoft DirectComposition animation.</span></span> <span data-ttu-id="e1def-107">Incluye los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="e1def-107">It contains the following topics:</span></span>

-   [<span data-ttu-id="e1def-108">¿Qué es una animación?</span><span class="sxs-lookup"><span data-stu-id="e1def-108">What is an animation?</span></span>](#what-is-an-animation)
-   [<span data-ttu-id="e1def-109">Propiedades que se pueden animar</span><span class="sxs-lookup"><span data-stu-id="e1def-109">Properties that can be animated</span></span>](#properties-that-can-be-animated)
-   [<span data-ttu-id="e1def-110">Funciones de animación</span><span class="sxs-lookup"><span data-stu-id="e1def-110">Animation functions</span></span>](#animation-functions)
-   [<span data-ttu-id="e1def-111">Segmentos de animación</span><span class="sxs-lookup"><span data-stu-id="e1def-111">Animation segments</span></span>](#animation-segments)
    -   [<span data-ttu-id="e1def-112">Segmento cúbico</span><span class="sxs-lookup"><span data-stu-id="e1def-112">Cubic segment</span></span>](#cubic-segment)
    -   [<span data-ttu-id="e1def-113">Segmento sinusoidal</span><span class="sxs-lookup"><span data-stu-id="e1def-113">Sinusoidal segment</span></span>](#sinusoidal-segment)
    -   [<span data-ttu-id="e1def-114">Repetir segmento</span><span class="sxs-lookup"><span data-stu-id="e1def-114">Repeat segment</span></span>](#repeat-segment)
    -   [<span data-ttu-id="e1def-115">Fin del segmento</span><span class="sxs-lookup"><span data-stu-id="e1def-115">End segment</span></span>](#end-segment)
-   [<span data-ttu-id="e1def-116">Compatibilidad con el administrador de animaciones de Windows</span><span class="sxs-lookup"><span data-stu-id="e1def-116">Compatibility with Windows Animation Manager</span></span>](#compatibility-with-windows-animation-manager)
-   [<span data-ttu-id="e1def-117">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e1def-117">Related topics</span></span>](#related-topics)

## <a name="what-is-an-animation"></a><span data-ttu-id="e1def-118">¿Qué es una animación?</span><span class="sxs-lookup"><span data-stu-id="e1def-118">What is an animation?</span></span>

<span data-ttu-id="e1def-119">La *animación* es un efecto óptico que se crea mediante la realización rápida de cambios incrementales en un visual durante un período de tiempo mientras se redibuja el visual después de realizar cada cambio.</span><span class="sxs-lookup"><span data-stu-id="e1def-119">*Animation* is an optical illusion created by quickly making incremental changes to a visual over a period of time while redrawing the visual after each change is made.</span></span> <span data-ttu-id="e1def-120">Dado que los redibujos se producen rápidamente, el cerebro percibe los cambios incrementales como una sola escena cambiante, al igual que en una película o vídeo de acción en directo.</span><span class="sxs-lookup"><span data-stu-id="e1def-120">Because the redraws occur quickly, the brain perceives the incremental changes as a single changing scene, just as in a movie or video of live action.</span></span>

<span data-ttu-id="e1def-121">En la tabla siguiente se describen algunas de las formas típicas de usar la animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-121">The following table describes some of the typical ways of using animation.</span></span>

| <span data-ttu-id="e1def-122">Animación</span><span class="sxs-lookup"><span data-stu-id="e1def-122">Animation</span></span>                 | <span data-ttu-id="e1def-123">Descripción</span><span class="sxs-lookup"><span data-stu-id="e1def-123">Description</span></span>                                                                                                                                                                                                                                          |
|---------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="e1def-124">Desplazamiento</span><span class="sxs-lookup"><span data-stu-id="e1def-124">Scrolling</span></span>                 | <span data-ttu-id="e1def-125">Use la animación para agregar características como el momento de emulación física a un control de lista de desplazamiento.</span><span class="sxs-lookup"><span data-stu-id="e1def-125">Use animation to add features like physics-emulating momentum to a scrolling list control.</span></span>                                                                                                                                                           |
| <span data-ttu-id="e1def-126">Transiciones de escena</span><span class="sxs-lookup"><span data-stu-id="e1def-126">Scene transitions</span></span>         | <span data-ttu-id="e1def-127">Use la animación para crear transiciones de escena de navegación que proporcionen continuidad entre las tareas de un flujo de trabajo.</span><span class="sxs-lookup"><span data-stu-id="e1def-127">Use animation to create navigational scene transitions that provide continuity between tasks in a workflow.</span></span> <span data-ttu-id="e1def-128">Las transiciones de escena de navegación proporcionan contexto que muestra el usuario en el que se encontraban, dónde están y dónde deben ir a continuación.</span><span class="sxs-lookup"><span data-stu-id="e1def-128">Navigational scene transitions provide context that shows the user where they have been, where they are, and where they need to go next.</span></span> |
| <span data-ttu-id="e1def-129">Interacciones entre ventanas</span><span class="sxs-lookup"><span data-stu-id="e1def-129">Cross-window interactions</span></span> | <span data-ttu-id="e1def-130">Animar elementos de interfaz de usuario de diferentes aplicaciones de forma que ofrezca una continuidad sin problemas entre ellos para ayudar al usuario a completar tareas que impliquen el cambio de una aplicación a otra.</span><span class="sxs-lookup"><span data-stu-id="e1def-130">Animate UI elements of different applications in a way that gives the perception of seamless continuity between them to help the user complete tasks that involve switching from one application to another.</span></span>                                         |



 

## <a name="properties-that-can-be-animated"></a><span data-ttu-id="e1def-131">Propiedades que se pueden animar</span><span class="sxs-lookup"><span data-stu-id="e1def-131">Properties that can be animated</span></span>

<span data-ttu-id="e1def-132">En DirectComposition, se anima un objeto visual aplicando animación a las propiedades individuales de los objetos que definen el objeto visual.</span><span class="sxs-lookup"><span data-stu-id="e1def-132">In DirectComposition, you animate a visual by applying animation to individual properties of the objects that define the visual.</span></span> <span data-ttu-id="e1def-133">Por ejemplo, si desea desplace un visual horizontalmente por la pantalla, aplicaría la animación a la propiedad OffsetX del visual.</span><span class="sxs-lookup"><span data-stu-id="e1def-133">For example, if you want to move a visual horizontally across the screen, you would apply animation to the OffsetX property of the visual.</span></span> <span data-ttu-id="e1def-134">Del mismo modo, si desea realizar una rotación 2D animada simple de un objeto visual, aplicaría la animación a la propiedad Angle de un objeto de transformación 2D y, a continuación, aplicaría el objeto de transformación 2D a la propiedad transform del objeto visual.</span><span class="sxs-lookup"><span data-stu-id="e1def-134">Similarly, if you wanted to do a simple animated 2D rotation of a visual, you would apply animation to the Angle property of a 2D transform object, and then apply the 2D transform object to the Transform property of the visual.</span></span>

<span data-ttu-id="e1def-135">DirectComposition permite aplicar animaciones a cualquier propiedad de objeto que toma un valor escalar.</span><span class="sxs-lookup"><span data-stu-id="e1def-135">DirectComposition enables you to apply animation to any object property that takes a scalar value.</span></span> <span data-ttu-id="e1def-136">Puede aplicar animaciones simultáneas a varias propiedades y a varios objetos.</span><span class="sxs-lookup"><span data-stu-id="e1def-136">You can apply simultaneous animations to multiple properties and multiple objects.</span></span>

<span data-ttu-id="e1def-137">DirectComposition ejecuta animaciones en un subproceso independiente.</span><span class="sxs-lookup"><span data-stu-id="e1def-137">DirectComposition runs animations on a separate thread.</span></span> <span data-ttu-id="e1def-138">Puede iniciar una animación o un conjunto de animaciones y luego realizar otro trabajo en los subprocesos de la aplicación, o incluso poner los subprocesos en suspensión, mientras que el motor de composición ejecuta las animaciones con la velocidad de fotogramas adecuada.</span><span class="sxs-lookup"><span data-stu-id="e1def-138">You can start an animation or set of animations and then do other work on your application threads, or even put threads to sleep, while the composition engine runs the animations at the appropriate frame rate.</span></span>

## <a name="animation-functions"></a><span data-ttu-id="e1def-139">Funciones de animación</span><span class="sxs-lookup"><span data-stu-id="e1def-139">Animation functions</span></span>

<span data-ttu-id="e1def-140">DirectComposition anima una propiedad de objeto basándose en una función de animación que defina.</span><span class="sxs-lookup"><span data-stu-id="e1def-140">DirectComposition animates an object property based on an animation function that you define.</span></span> <span data-ttu-id="e1def-141">Una *función de animación* es una construcción que especifica cómo cambia el valor de una propiedad de objeto en un período de tiempo.</span><span class="sxs-lookup"><span data-stu-id="e1def-141">An *animation function* is a construct that specifies how the value of an object property changes over a period of time.</span></span> <span data-ttu-id="e1def-142">Por ejemplo, podría definir una función de animación que cambia el valor de una propiedad de 1 a 360 en el transcurso de 4 segundos.</span><span class="sxs-lookup"><span data-stu-id="e1def-142">For example, you could define an animation function that changes the value of a property from 1 to 360 over the course of 4 seconds.</span></span> <span data-ttu-id="e1def-143">A continuación, si se aplica la función de animación a la propiedad Angle de un objeto de transformación de giro 2D y, a continuación, se aplica el objeto de transformación a la propiedad de transformación de un objeto visual, la función de animación rotará el objeto visual en un círculo completo en el transcurso de 4 segundos.</span><span class="sxs-lookup"><span data-stu-id="e1def-143">Then, if you apply the animation function to the Angle property of a 2D rotate transform object, and then apply the transform object to the Transform property of a visual, the animation function would rotate the visual in a full circle over the course of 4 seconds.</span></span>

<span data-ttu-id="e1def-144">Una función de animación se representa mediante un *objeto Animation* creado por una llamada al método [**IDCompositionDevice:: CreateAnimation**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createanimation) .</span><span class="sxs-lookup"><span data-stu-id="e1def-144">An animation function is represented by an *animation object* created by a call to the [**IDCompositionDevice::CreateAnimation**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createanimation) method.</span></span> <span data-ttu-id="e1def-145">Puede crear una función de animación mediante los métodos de la interfaz [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) de un objeto Animation para anexar *segmentos de animación*, de uno en uno, a la matriz que define la función de animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-145">You create an animation function by using the methods of an animation object's [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) interface to append *animation segments*, one at a time, to the array that defines the animation function.</span></span> <span data-ttu-id="e1def-146">Al anexar un segmento, se especifica un desplazamiento de base cero que marca la hora de inicio del segmento con respecto al principio de la función de animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-146">When appending a segment, you specify a zero-based offset that marks the begin time of the segment, relative to the beginning of the animation function.</span></span> <span data-ttu-id="e1def-147">Los segmentos de animación deben agregarse en orden ascendente de horas de inicio.</span><span class="sxs-lookup"><span data-stu-id="e1def-147">Animation segments must be appended in increasing order of begin times.</span></span> <span data-ttu-id="e1def-148">Se producirá un error al intentar anexar un segmento de animación cuya hora de inicio sea anterior o igual a un segmento anterior.</span><span class="sxs-lookup"><span data-stu-id="e1def-148">Attempting to append an animation segment whose begin time is before or equal to a preceding segment will fail.</span></span> <span data-ttu-id="e1def-149">Una función de animación puede tener una hora de finalización especificada, que indica cuándo debe concluir la función.</span><span class="sxs-lookup"><span data-stu-id="e1def-149">An animation function can have a specified end time, indicating when the function should conclude.</span></span>

<span data-ttu-id="e1def-150">A menos que se especifique lo contrario, se inicia una función de animación cuando el Administrador de ventanas de escritorio (DWM) recibe el comando para ejecutar la animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-150">Unless otherwise specified, an animation function starts when the Desktop Window Manager (DWM) receives the command to execute the animation.</span></span> <span data-ttu-id="e1def-151">Cada segmento se ejecuta hasta que se alcanza la hora de inicio del segmento siguiente.</span><span class="sxs-lookup"><span data-stu-id="e1def-151">Each segment runs until the begin time of the next segment is reached.</span></span> <span data-ttu-id="e1def-152">Los cambios descontinuos que se producen en el valor de propiedad animada entre segmentos se consideran cambios discretos.</span><span class="sxs-lookup"><span data-stu-id="e1def-152">Any discontinuous changes that occur in the animated property value between segments are considered to be discrete changes.</span></span>

<span data-ttu-id="e1def-153">Para aplicar una función de animación a una propiedad, establezca el valor de la propiedad en el puntero [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) del objeto Animation que representa la función de animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-153">You apply an animation function to a property by setting the property value to the [**IDCompositionAnimation**](/windows/desktop/api/DcompAnimation/nn-dcompanimation-idcompositionanimation) pointer of the animation object that represents the animation function.</span></span> <span data-ttu-id="e1def-154">Se puede aplicar el mismo objeto de animación a varias propiedades del mismo objeto, así como a las propiedades de otros objetos creados por el mismo dispositivo.</span><span class="sxs-lookup"><span data-stu-id="e1def-154">The same animation object can be applied to multiple properties of the same object, as well as to the properties of other objects created by the same device.</span></span>

## <a name="animation-segments"></a><span data-ttu-id="e1def-155">Segmentos de animación</span><span class="sxs-lookup"><span data-stu-id="e1def-155">Animation segments</span></span>

<span data-ttu-id="e1def-156">Los segmentos de animación son las definiciones de tiempo fundamentales de una función de animación. son los primitivos de los que se compilan funciones de animación más complejas y de nivel superior.</span><span class="sxs-lookup"><span data-stu-id="e1def-156">Animation segments are the fundamental timing definitions of an animation function; they are the primitives from which more complex and higher level animation functions are built.</span></span> <span data-ttu-id="e1def-157">Un segmento de animación se construye a partir de una serie de parámetros que describen la función y la hora a la que comienza el segmento, con respecto al principio de la función de animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-157">An animation segment is constructed from a series of parameters that describe the function and the time when the segment begins, relative to the beginning of the animation function.</span></span> <span data-ttu-id="e1def-158">Para cada segmento, el tiempo (*t*) progresa a lo largo del eje horizontal y comienza en *t* = 0.</span><span class="sxs-lookup"><span data-stu-id="e1def-158">For every segment, time (*t*) progresses along the horizontal axis and begins at *t* = 0.</span></span>

### <a name="cubic-segment"></a><span data-ttu-id="e1def-159">Segmento cúbico</span><span class="sxs-lookup"><span data-stu-id="e1def-159">Cubic segment</span></span>

<span data-ttu-id="e1def-160">La temporización de un segmento cúbico se define mediante una polinómica cúbica.</span><span class="sxs-lookup"><span data-stu-id="e1def-160">The timing of a cubic segment is defined by a cubic polynomial.</span></span> <span data-ttu-id="e1def-161">Para una entrada de hora determinada (*t*), el valor de salida se proporciona mediante la siguiente ecuación:</span><span class="sxs-lookup"><span data-stu-id="e1def-161">For a given time input (*t*), the output value is given by the following equation:</span></span>

<span data-ttu-id="e1def-162">*x*(*t*) = *at*³ + *BT*² + *CT*  +  *d*</span><span class="sxs-lookup"><span data-stu-id="e1def-162">*x*(*t*) = *at*³ + *bt*² + *ct* + *d*</span></span>

<span data-ttu-id="e1def-163">En el diagrama siguiente se muestra una función de animación que contiene dos segmentos cúbicos.</span><span class="sxs-lookup"><span data-stu-id="e1def-163">The following diagram shows an animation function that contains of two cubic segments.</span></span> <span data-ttu-id="e1def-164">El primer segmento realiza la transición de un valor de 0 a 16 en 4 segundos y el segundo cambia el valor linealmente de 16 a 0 en los próximos 4 segundos.</span><span class="sxs-lookup"><span data-stu-id="e1def-164">The first segment transitions a value from 0 to 16 over 4 seconds, and the second changes the value linearly from 16 to 0 over the next 4 seconds.</span></span> <span data-ttu-id="e1def-165">La primera transición se produce a lo largo de este polinomio cúbico:</span><span class="sxs-lookup"><span data-stu-id="e1def-165">The first transition occurs along this cubic polynomial:</span></span>

<span data-ttu-id="e1def-166">*x*(*t*) = *t*³-6 *t*² + 12 *t*</span><span class="sxs-lookup"><span data-stu-id="e1def-166">*x*(*t*) = *t*³ - 6 *t*² + 12 *t*</span></span>

<span data-ttu-id="e1def-167">y la segunda transición se produce a lo largo de esta:</span><span class="sxs-lookup"><span data-stu-id="e1def-167">and the second transition occurs along this one:</span></span>

<span data-ttu-id="e1def-168">*x*(*t*) =-4 *t* + 16</span><span class="sxs-lookup"><span data-stu-id="e1def-168">*x*(*t*) = - 4 *t* + 16</span></span>

![diagrama de una función de animación con dos segmentos cúbicos](images/cubicsegment.png)

<span data-ttu-id="e1def-170">Puede Agregar un segmento cúbico a una función de animación mediante el método [**IDCompositionAnimation:: AddCubic**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addcubic) .</span><span class="sxs-lookup"><span data-stu-id="e1def-170">You add a cubic segment to an animation function by using the [**IDCompositionAnimation::AddCubic**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addcubic) method.</span></span>

### <a name="sinusoidal-segment"></a><span data-ttu-id="e1def-171">Segmento sinusoidal</span><span class="sxs-lookup"><span data-stu-id="e1def-171">Sinusoidal segment</span></span>

<span data-ttu-id="e1def-172">La duración de un segmento sinusoidal se define mediante la siguiente ecuación:</span><span class="sxs-lookup"><span data-stu-id="e1def-172">The timing of a sinusoidal segment is defined by the following equation:</span></span>

<span data-ttu-id="e1def-173">*x*(*t*) = amplitud de *Bias*  +   \* sin (frecuencia de *t* \*  \* 2 \* PI + *fase* \* PI/180.0)</span><span class="sxs-lookup"><span data-stu-id="e1def-173">*x*(*t*) = *Bias* + *Amplitude* \* sin(*t*\**Frequency*\*2\*PI + *Phase*\*PI/180.0)</span></span>

<span data-ttu-id="e1def-174">Puede Agregar un segmento sinusoidal a una función de animación mediante el método [**IDCompositionAnimation:: AddSinusoidal**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addsinusoidal) .</span><span class="sxs-lookup"><span data-stu-id="e1def-174">You add a sinusoidal segment to an animation function by using the [**IDCompositionAnimation::AddSinusoidal**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addsinusoidal) method.</span></span>

### <a name="repeat-segment"></a><span data-ttu-id="e1def-175">Repetir segmento</span><span class="sxs-lookup"><span data-stu-id="e1def-175">Repeat segment</span></span>

<span data-ttu-id="e1def-176">Un segmento de repetición repite la parte anterior especificada de una función de animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-176">A repeat segment repeats a specified preceding portion of an animation function.</span></span> <span data-ttu-id="e1def-177">Un segmento de repetición hace que la parte especificada de la función de animación se repita indefinidamente hasta que se encuentre el segmento siguiente o hasta que se alcance el final de la animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-177">A repeat segment causes the specified portion of the animation function to loop indefinitely until the next segment is encountered or the specified end of the animation is reached.</span></span> <span data-ttu-id="e1def-178">La parte anterior de una animación se realiza en otros segmentos, incluidos otros segmentos de repetición.</span><span class="sxs-lookup"><span data-stu-id="e1def-178">The preceding portion of an animation is made of other segments, including other repeat segments.</span></span> <span data-ttu-id="e1def-179">No se puede usar un segmento de repetición como primer segmento en una función de animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-179">A repeat segment cannot be used as the first segment in an animation function.</span></span>

<span data-ttu-id="e1def-180">En el diagrama siguiente se muestra una función de animación que consta de dos segmentos cúbicos de una duración de 4 segundos cada uno, seguido de un segmento de repetición que dura 12 segundos.</span><span class="sxs-lookup"><span data-stu-id="e1def-180">The following diagram shows an animation function that consists two cubic segments of 4 seconds duration each, followed by a repeat segment that lasts 12 seconds.</span></span> <span data-ttu-id="e1def-181">El segmento de repetición comienza 8 segundos en la animación y repite los 6 segundos anteriores de la animación dos veces hasta que se alcanza el segmento final en 20 segundos.</span><span class="sxs-lookup"><span data-stu-id="e1def-181">The repeat segment begins 8 seconds into the animation and repeats the previous 6 seconds of the animation two times until the end segment is reached at 20 seconds.</span></span>

![diagrama de una función de animación que contiene dos segmentos cúbicos y un segmento de repetición](images/repeatsegment.png)

<span data-ttu-id="e1def-183">Para agregar un segmento de repetición a una función de animación, use el método [**IDCompositionAnimation:: AddRepeat**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addrepeat) .</span><span class="sxs-lookup"><span data-stu-id="e1def-183">To add a repeat segment to an animation function, use the [**IDCompositionAnimation::AddRepeat**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-addrepeat) method.</span></span>

### <a name="end-segment"></a><span data-ttu-id="e1def-184">Fin del segmento</span><span class="sxs-lookup"><span data-stu-id="e1def-184">End segment</span></span>

<span data-ttu-id="e1def-185">Después de crear una función de animación a partir de segmentos, puede anexar un segmento final para que la función de animación finalice en un momento determinado.</span><span class="sxs-lookup"><span data-stu-id="e1def-185">After constructing an animation function from segments, you can append an end segment to cause the animation function to end at a particular time.</span></span> <span data-ttu-id="e1def-186">Si no anexa un segmento final, el segmento final de la función de animación se ejecuta indefinidamente.</span><span class="sxs-lookup"><span data-stu-id="e1def-186">If you do not append an end segment, the final segment of the animation function runs indefinitely.</span></span>

<span data-ttu-id="e1def-187">Para anexar un segmento final, llame al método [**IDCompositionAnimation:: end**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end) y especifique un desplazamiento desde el principio de la función de animación que indica el punto final de la función.</span><span class="sxs-lookup"><span data-stu-id="e1def-187">You append an end segment by calling the [**IDCompositionAnimation::End**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end) method, specifying an offset from the beginning of the animation function which indicates the function's end point.</span></span> <span data-ttu-id="e1def-188">El desplazamiento debe ser mayor que el desplazamiento inicial del segmento anterior.</span><span class="sxs-lookup"><span data-stu-id="e1def-188">The offset must be greater than the beginning offset of the preceding segment.</span></span> <span data-ttu-id="e1def-189">Además, no se puede usar un segmento final como el primer primitivo en una función de animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-189">Also, an end segment cannot be used as the first primitive in an animation function.</span></span>

<span data-ttu-id="e1def-190">Cuando se llama a [**End**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end), también se especifica un valor final para la propiedad que se anima.</span><span class="sxs-lookup"><span data-stu-id="e1def-190">When you call [**End**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-end), you also specify a final value for the property being animated.</span></span> <span data-ttu-id="e1def-191">La propiedad se establece en el valor final especificado en el momento en que se alcanza el punto final de la función de animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-191">The property is set to the specified final value at the moment when the end point of the animation function is reached.</span></span>

<span data-ttu-id="e1def-192">Después de anexar un segmento final, no se pueden anexar otros segmentos a la función de animación.</span><span class="sxs-lookup"><span data-stu-id="e1def-192">After appending an end segment, you cannot append any other segments to the animation function.</span></span> <span data-ttu-id="e1def-193">Es decir, se produce un error en todas las llamadas a métodos en el objeto Animation excepto [**IDCompositionAnimation:: RESET**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-reset).</span><span class="sxs-lookup"><span data-stu-id="e1def-193">That is, all method calls on the animation object fail except [**IDCompositionAnimation::Reset**](/windows/desktop/api/DcompAnimation/nf-dcompanimation-idcompositionanimation-reset).</span></span> <span data-ttu-id="e1def-194">La llamada a **RESET** devuelve el objeto Animation al estado Clean en el que la función Animation no contiene segmentos, momento en el que puede Agregar segmentos de nuevo.</span><span class="sxs-lookup"><span data-stu-id="e1def-194">Calling **Reset** returns the animation object to clean state in which the animation function contains no segments, at which point you can once again add segments.</span></span>

## <a name="compatibility-with-windows-animation-manager"></a><span data-ttu-id="e1def-195">Compatibilidad con el administrador de animaciones de Windows</span><span class="sxs-lookup"><span data-stu-id="e1def-195">Compatibility with Windows Animation Manager</span></span>

<span data-ttu-id="e1def-196">El administrador de animaciones de Windows (animación de Windows) genera primitivas de animación en un formato compatible con la API de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="e1def-196">Windows Animation Manager (Windows Animation) outputs animation primitives in a format that is compatible with the DirectComposition API.</span></span> <span data-ttu-id="e1def-197">Esto significa que DirectComposition puede crear animaciones basadas en primitivas de animación creadas por la animación de Windows.</span><span class="sxs-lookup"><span data-stu-id="e1def-197">This means that DirectComposition can create animations based on animation primitives created by Windows Animation.</span></span>

<span data-ttu-id="e1def-198">Para obtener más información, vea [Administrador de animaciones de Windows](/windows/desktop/UIAnimation/-main-portal), el método [**IUIAnimationVariable2:: GetCurve**](/windows/desktop/api/uianimation/nf-uianimation-iuianimationvariable2-getcurve) y [administrar la animación DirectComposition con el administrador de animaciones de Windows V2](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/DirectCompositionWindowsAnimationManager).</span><span class="sxs-lookup"><span data-stu-id="e1def-198">For more information, see [Windows Animation Manager](/windows/desktop/UIAnimation/-main-portal), the [**IUIAnimationVariable2::GetCurve**](/windows/desktop/api/uianimation/nf-uianimation-iuianimationvariable2-getcurve) method, and [Managing DirectComposition Animation with Windows Animation Manager v2](https://github.com/microsoft/Windows-classic-samples/tree/master/Samples/DirectCompositionWindowsAnimationManager).</span></span>

## <a name="related-topics"></a><span data-ttu-id="e1def-199">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e1def-199">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e1def-200">Conceptos de DirectComposition</span><span class="sxs-lookup"><span data-stu-id="e1def-200">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 
