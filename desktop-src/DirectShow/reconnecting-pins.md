---
description: Volver a conectar PIN
ms.assetid: 34b3e4de-e4eb-48c5-aaef-fc99b63e8691
title: Volver a conectar PIN
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f9fc71b4d5a62ee066edaa5f97b4cc3332b2231d
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104537143"
---
# <a name="reconnecting-pins"></a><span data-ttu-id="1456a-103">Volver a conectar PIN</span><span class="sxs-lookup"><span data-stu-id="1456a-103">Reconnecting Pins</span></span>

<span data-ttu-id="1456a-104">Durante una conexión de PIN, un filtro puede desconectar y volver a conectar uno de sus otros PIN, como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="1456a-104">During a pin connection, a filter can disconnect and reconnect one of its other pins, as follows:</span></span>

1.  <span data-ttu-id="1456a-105">El filtro llama a [**IPin:: QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) en el PIN del otro filtro y especifica el nuevo tipo de medio.</span><span class="sxs-lookup"><span data-stu-id="1456a-105">The filter calls [**IPin::QueryAccept**](/windows/desktop/api/Strmif/nf-strmif-ipin-queryaccept) on the other filter's pin, and specifies the new media type.</span></span>
2.  <span data-ttu-id="1456a-106">Si **QueryAccept** devuelve S \_ OK, el filtro llama a [**IFilterGraph2:: ReconnectEx**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph2-reconnectex) para volver a conectar los pin.</span><span class="sxs-lookup"><span data-stu-id="1456a-106">If **QueryAccept** returns S\_OK, the filter calls [**IFilterGraph2::ReconnectEx**](/windows/desktop/api/Strmif/nf-strmif-ifiltergraph2-reconnectex) to reconnect the pins.</span></span>

<span data-ttu-id="1456a-107">A continuación se muestran algunos ejemplos de Cuándo puede ser necesario volver a conectar los pin de un filtro:</span><span class="sxs-lookup"><span data-stu-id="1456a-107">The following are some examples of when a filter might need to reconnect pins:</span></span>

-   <span data-ttu-id="1456a-108">**Los filtros tee.**</span><span class="sxs-lookup"><span data-stu-id="1456a-108">**Tee filters.**</span></span> <span data-ttu-id="1456a-109">Un *filtro Tee* divide un flujo de entrada en varias salidas sin cambiar los datos en la secuencia.</span><span class="sxs-lookup"><span data-stu-id="1456a-109">A *tee filter* splits an input stream into multiple outputs without changing the data in the stream.</span></span> <span data-ttu-id="1456a-110">Un filtro Tee puede aceptar un intervalo de tipos de medios, pero los tipos deben coincidir en todas las conexiones de PIN.</span><span class="sxs-lookup"><span data-stu-id="1456a-110">A tee filter can accept a range of media types, but the types must match across all pin connections.</span></span> <span data-ttu-id="1456a-111">Por lo tanto, cuando se conecta el PIN de entrada, es posible que el filtro tenga que volver a negociar las conexiones existentes en los terminales de salida y viceversa.</span><span class="sxs-lookup"><span data-stu-id="1456a-111">Therefore, when the input pin connects, the filter might need to renegotiate any existing connections on the output pins, and vice versa.</span></span> <span data-ttu-id="1456a-112">Para obtener un ejemplo, vea el [ejemplo de filtro InfTee](inftee-filter-sample.md).</span><span class="sxs-lookup"><span data-stu-id="1456a-112">For an example, see the [InfTee Filter Sample](inftee-filter-sample.md).</span></span>
-   <span data-ttu-id="1456a-113">**Filtros transin situ.**</span><span class="sxs-lookup"><span data-stu-id="1456a-113">**Trans-in-place filters.**</span></span> <span data-ttu-id="1456a-114">Un filtro *de transferencia en contexto* modifica los datos de entrada en el búfer original en lugar de copiar los datos en un búfer de salida independiente.</span><span class="sxs-lookup"><span data-stu-id="1456a-114">A *trans-in-place* filter modifies the input data in the original buffer instead of copying the data to a separate output buffer.</span></span> <span data-ttu-id="1456a-115">Un filtro de transferencia en contexto debe usar el mismo asignador para las conexiones ascendentes y descendentes.</span><span class="sxs-lookup"><span data-stu-id="1456a-115">A trans-in-place filter must use the same allocator for both the upstream and the downstream connections.</span></span> <span data-ttu-id="1456a-116">El primer PIN para conectarse (entrada o salida) negocia un asignador de la manera habitual.</span><span class="sxs-lookup"><span data-stu-id="1456a-116">The first pin to connect (input or output) negotiates an allocator in the usual way.</span></span> <span data-ttu-id="1456a-117">Sin embargo, cuando se conecta el otro PIN, es posible que el primer asignador no sea aceptable.</span><span class="sxs-lookup"><span data-stu-id="1456a-117">When the other pin connects, however, the first allocator might not be acceptable.</span></span> <span data-ttu-id="1456a-118">En ese caso, el segundo PIN elige un asignador diferente y el primer PIN se vuelve a conectar con el nuevo asignador.</span><span class="sxs-lookup"><span data-stu-id="1456a-118">In that case, the second pin chooses a different allocator, and the first pin reconnects using the new allocator.</span></span> <span data-ttu-id="1456a-119">Para ver una implementación de ejemplo, vea la clase [**CTransInPlaceFilter**](ctransinplacefilter.md) .</span><span class="sxs-lookup"><span data-stu-id="1456a-119">For an example implementation, see the [**CTransInPlaceFilter**](ctransinplacefilter.md) class.</span></span>

<span data-ttu-id="1456a-120">En el método **ReconnectEx** , el administrador de gráficos de filtro desconecta y vuelve a conectar de forma asincrónica los pin.</span><span class="sxs-lookup"><span data-stu-id="1456a-120">In the **ReconnectEx** method, the Filter Graph Manager asynchronously disconnects and reconnects the pins.</span></span> <span data-ttu-id="1456a-121">El filtro no debe intentar la reconexión a menos que **QueryAccept** devuelva los elementos \_ correctos.</span><span class="sxs-lookup"><span data-stu-id="1456a-121">The filter must not attempt the reconnection unless **QueryAccept** returns S\_OK.</span></span> <span data-ttu-id="1456a-122">De lo contrario, el PIN se quedará desconectado, lo que provocará errores de gráfico.</span><span class="sxs-lookup"><span data-stu-id="1456a-122">Otherwise, the pin will be left disconnected, causing graph errors.</span></span> <span data-ttu-id="1456a-123">Además, el filtro debe solicitar la reconexión desde dentro del método [**IPin:: Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) , en el mismo subproceso.</span><span class="sxs-lookup"><span data-stu-id="1456a-123">Also, the filter should request the reconnection from inside the [**IPin::Connect**](/windows/desktop/api/Strmif/nf-strmif-ipin-connect) method, on the same thread.</span></span> <span data-ttu-id="1456a-124">Si el método **Connect** devuelve en un subproceso, mientras que otro subproceso realiza la solicitud de reconexión, el administrador de gráficos de filtros podría ejecutar el gráfico antes de que se vuelva a establecer la conexión, lo que provocaría errores de gráfico.</span><span class="sxs-lookup"><span data-stu-id="1456a-124">If the **Connect** method returns on one thread, while another thread makes the reconnection request, the Filter Graph Manager might run the graph before it makes the reconnection, causing graph errors.</span></span>

 

 



