---
description: A partir de la versión 3 del formato de certificado X. 509, un certificado puede contener extensiones de certificado.
ms.assetid: fb106cab-8a61-4a83-8fb4-7c045d905575
title: Controladores de extensión
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: cfcf1b47fcc97b87f5956f4584aee07acce04222
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "105688538"
---
# <a name="extension-handlers"></a><span data-ttu-id="3dfa3-103">Controladores de extensión</span><span class="sxs-lookup"><span data-stu-id="3dfa3-103">Extension Handlers</span></span>

<span data-ttu-id="3dfa3-104">A partir de la versión 3 del formato de certificado [*X. 509*](../secgloss/x-gly.md) , un certificado puede contener extensiones de certificado.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-104">Beginning with [*X.509*](../secgloss/x-gly.md) Certificate format Version 3, a certificate may contain certificate extensions.</span></span> <span data-ttu-id="3dfa3-105">(Para obtener el contenido de un certificado X. 509, consulte [propiedades de certificado](certificate-properties.md)). Estas extensiones indican información adicional.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-105">(For the contents of an X.509 Certificate, see [Certificate Properties](certificate-properties.md).) These extensions indicate additional information.</span></span> <span data-ttu-id="3dfa3-106">Por ejemplo, una extensión puede indicar información de identificación de asunto adicional o puede indicar información de uso de claves, que especifica las tareas (como la firma o el cifrado) para las que se puede usar una clave.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-106">For example, an extension can indicate additional subject identification information, or it can indicate key usage information, which specifies the tasks (such as signature or encryption) for which a key can be used.</span></span> <span data-ttu-id="3dfa3-107">Se define un conjunto de extensiones estándar para el uso de la aplicación, y las extensiones también se pueden personalizar.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-107">A set of standard extensions is defined for application use, and extensions may also be customized.</span></span>

<span data-ttu-id="3dfa3-108">Cada extensión tiene una cadena de identificador de objeto asociada que identifica el tipo de información adicional y una estructura de datos que contiene esta información.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-108">Each extension has an associated object identifier string that identifies the type of additional information and a data structure that contains this information.</span></span> <span data-ttu-id="3dfa3-109">Por ejemplo, el identificador de objeto de uso de clave es "2.5.29.15", que indica la información de uso de claves.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-109">For example, the key usage object identifier is "2.5.29.15", which indicates key usage information.</span></span> <span data-ttu-id="3dfa3-110">La estructura de datos asociada es [**un \_ \_ BLOB de bit cifrado**](/windows/desktop/api/Wincrypt/ns-wincrypt-crypt_bit_blob) (campo de bits) que especifica cómo se puede usar la clave.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-110">Its associated data structure is a [**CRYPT\_BIT\_BLOB**](/windows/desktop/api/Wincrypt/ns-wincrypt-crypt_bit_blob) (bitfield) specifying how the key can be used.</span></span>

<span data-ttu-id="3dfa3-111">Una extensión se puede Agregar a un certificado antes de que se emita.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-111">An extension can be added to a certificate before it is issued.</span></span> <span data-ttu-id="3dfa3-112">Cuando se emite el certificado, las extensiones habilitadas forman parte del certificado.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-112">When the certificate is issued, any enabled extensions are part of the certificate.</span></span> <span data-ttu-id="3dfa3-113">Si una extensión se marca como crítica, su uso debe ser conocido por la aplicación que usa y la aplicación debe adherirse a la intención o el valor de la extensión.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-113">If an extension is marked critical, its use must be known by the using application, and the application must adhere to the intent or value of the extension.</span></span> <span data-ttu-id="3dfa3-114">Los servicios de Certificate Server permiten que las extensiones se establezcan en un certificado no emitido a través de los métodos proporcionados por [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) y [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy).</span><span class="sxs-lookup"><span data-stu-id="3dfa3-114">Certificate Services allows extensions to be set on a non-issued certificate through methods provided by [**ICertAdmin**](/windows/desktop/api/Certadm/nn-certadm-icertadmin) and [**ICertServerPolicy**](/windows/desktop/api/Certif/nn-certif-icertserverpolicy).</span></span> <span data-ttu-id="3dfa3-115">Para obtener más información acerca de las extensiones de certificado, consulte [**\_ extensión**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) de certificado en la documentación de CryptoAPI.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-115">For details about certificate extensions, see [**CERT\_EXTENSION**](/windows/desktop/api/Wincrypt/ns-wincrypt-cert_extension) in the CryptoAPI documentation.</span></span> <span data-ttu-id="3dfa3-116">Para obtener información sobre las estructuras de datos de extensión de certificado comunes, vea [estructuras de extensión de certificados X. 509](cryptography-structures.md).</span><span class="sxs-lookup"><span data-stu-id="3dfa3-116">For information about common certificate extension data structures, see [X.509 Certificate Extension Structures](cryptography-structures.md).</span></span>

<span data-ttu-id="3dfa3-117">El controlador de extensión es un objeto COM que proporciona rutinas para codificar las extensiones y los tipos de datos más complejos, pero usados comúnmente, como IA5String o PrintableString.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-117">The extension handler is a COM object that provides routines for encoding the more complex, but commonly used extensions and data types, such as IA5String or PrintableString.</span></span>

<span data-ttu-id="3dfa3-118">Las extensiones que tienen los tipos de datos **Date**, **Long** y **BSTR** no requieren un controlador de extensión.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-118">Extensions that have the data types **DATE**, **LONG**, and **BSTR** do not require an extension handler.</span></span> <span data-ttu-id="3dfa3-119">El módulo de directivas simplemente llama a [**ICertServerPolicy:: SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) con el parámetro de *tipo* establecido en un valor que representa el tipo de datos de la extensión: PROPTYPE \_ Date, PROPTYPE \_ Long o PROPTYPE \_ String.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-119">The policy module simply calls [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) with the *Type* parameter set to a value representing the extension data type: PROPTYPE\_DATE, PROPTYPE\_LONG, or PROPTYPE\_STRING.</span></span> <span data-ttu-id="3dfa3-120">A continuación, pasa la extensión al motor del servidor.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-120">It then passes the extension to the server engine.</span></span> <span data-ttu-id="3dfa3-121">A su vez, el motor de servidor realiza la codificación de la [*notación de sintaxis abstracta uno*](../secgloss/a-gly.md) (ASN. 1) antes de almacenar la extensión en el certificado.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-121">The server engine, in turn, performs the [*Abstract Syntax Notation One*](../secgloss/a-gly.md) (ASN.1) encoding before storing the extension in the certificate.</span></span>

<span data-ttu-id="3dfa3-122">Sin embargo, las extensiones que tienen tipos de datos distintos de estos tipos predeterminados deben ser ASN. 1 codificado por un controlador de extensión antes de que el módulo de directivas las pase al motor de servidor.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-122">However, extensions that have data types other than these default types must be ASN.1 encoded by an extension handler before the policy module passes them to the server engine.</span></span> <span data-ttu-id="3dfa3-123">Cuando el módulo de directivas llama a [**ICertServerPolicy:: SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) para pasar una extensión con codificación ASN. 1 al motor del servidor, debe establecer el parámetro de *tipo* en PROPTYPE \_ Binary.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-123">When the policy module calls [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) to pass an ASN.1-encoded extension to the server engine, it must set the *Type* parameter to PROPTYPE\_BINARY.</span></span> <span data-ttu-id="3dfa3-124">A continuación, el motor de servidor simplemente almacena esta extensión codificada en el certificado.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-124">The server engine then simply stores this encoded extension in the certificate.</span></span>

<span data-ttu-id="3dfa3-125">El controlador de extensión predeterminado, Certenc.dll, exporta varias interfaces **ICertEncodeXXX** y el módulo de directivas puede llamarlas.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-125">The default extension handler, Certenc.dll, exports a number of **ICertEncodeXXX** interfaces and can be called by the policy module.</span></span> <span data-ttu-id="3dfa3-126">La información de tipo necesaria también se incluye en Certencl.dll que se proporciona en el kit de desarrollo de software (SDK) de la plataforma.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-126">The necessary type information is also contained in Certencl.dll which is supplied in the Platform Software Development Kit (SDK).</span></span> <span data-ttu-id="3dfa3-127">Cada interfaz proporciona un método de **codificación** que devuelve una extensión de certificado con codificación ASN. 1 al módulo de directivas en formato binario.</span><span class="sxs-lookup"><span data-stu-id="3dfa3-127">Each interface provides an **Encode** method that returns an ASN.1-encoded certificate extension to the policy module in a binary format.</span></span> <span data-ttu-id="3dfa3-128">Después, el módulo de directivas puede establecer la extensión en un certificado llamando al método [**ICertServerPolicy:: SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) .</span><span class="sxs-lookup"><span data-stu-id="3dfa3-128">The policy module can then set the extension in a certificate by calling the [**ICertServerPolicy::SetCertificateExtension**](/windows/desktop/api/Certif/nf-certif-icertserverpolicy-setcertificateextension) method.</span></span>

<span data-ttu-id="3dfa3-129">Para obtener más información, vea [Escribir controladores de extensión personalizados](writing-custom-extension-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="3dfa3-129">For more information, see [Writing Custom Extension Handlers](writing-custom-extension-handlers.md).</span></span>

 

 
