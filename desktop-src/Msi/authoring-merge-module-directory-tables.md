---
description: Un módulo de combinación se puede aplicar a un archivo. msi para agregar directorios a la instalación, pero no puede reemplazar o quitar directorios existentes.
ms.assetid: 5b808aa2-b2b2-4703-bd57-0b5e1e73b306
title: Crear tablas del directorio del módulo de combinación
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 98332f2c0bda10a5cc076f0ec80df3bf4b2e05aa
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103909074"
---
# <a name="authoring-merge-module-directory-tables"></a><span data-ttu-id="96b26-103">Crear tablas del directorio del módulo de combinación</span><span class="sxs-lookup"><span data-stu-id="96b26-103">Authoring Merge Module Directory Tables</span></span>

<span data-ttu-id="96b26-104">Un módulo de combinación se puede aplicar a un archivo. msi para agregar directorios a la instalación, pero no puede reemplazar o quitar directorios existentes.</span><span class="sxs-lookup"><span data-stu-id="96b26-104">A merge module can be applied to an .msi file to add directories to the installation but it cannot replace or remove any existing directories.</span></span> <span data-ttu-id="96b26-105">La [tabla de directorios](directory-table.md) especifica el diseño de los directorios que el módulo de combinación proporciona a la instalación de destino.</span><span class="sxs-lookup"><span data-stu-id="96b26-105">The [Directory table](directory-table.md) specifies the layout of the directories the merge module provides to the target installation.</span></span> <span data-ttu-id="96b26-106">Se requiere una tabla de directorio en cada módulo de combinación.</span><span class="sxs-lookup"><span data-stu-id="96b26-106">A Directory table is required in every merge module.</span></span>

<span data-ttu-id="96b26-107">Utilice las siguientes directrices para crear la tabla de directorio en un módulo de combinación.</span><span class="sxs-lookup"><span data-stu-id="96b26-107">Use the following guidelines when authoring the Directory Table in a merge module.</span></span> <span data-ttu-id="96b26-108">Para obtener más información, consulte [tabla de directorios](directory-table.md) y [uso de la tabla de directorios](using-the-directory-table.md).</span><span class="sxs-lookup"><span data-stu-id="96b26-108">For more information, see [Directory Table](directory-table.md) and [Using The Directory Table](using-the-directory-table.md).</span></span>

-   <span data-ttu-id="96b26-109">La estructura de directorios agregada por el módulo de combinación debe tener un único directorio raíz.</span><span class="sxs-lookup"><span data-stu-id="96b26-109">The directory structure added by the merge module must have a single root directory.</span></span> <span data-ttu-id="96b26-110">La raíz debe tener el nombre TARGETDIR.</span><span class="sxs-lookup"><span data-stu-id="96b26-110">The root must be named TARGETDIR.</span></span> <span data-ttu-id="96b26-111">El usuario puede cambiar el valor de TARGETDIR durante la combinación para especificar dónde se debe adjuntar la estructura de directorios del módulo en el árbol de directorios del destino.</span><span class="sxs-lookup"><span data-stu-id="96b26-111">The user may change the value of TARGETDIR during the merge to specify where to attach the module's directory structure onto the target's directory tree.</span></span>
-   <span data-ttu-id="96b26-112">Las tablas del módulo de combinación que no sean la tabla del directorio no deben hacer referencia directamente a las ubicaciones del directorio en TARGETDIR.</span><span class="sxs-lookup"><span data-stu-id="96b26-112">Merge module tables other than the Directory table must not directly reference directory locations to TARGETDIR.</span></span> <span data-ttu-id="96b26-113">La ubicación de esta referencia cambia si el usuario cambia el valor de TARGETDIR.</span><span class="sxs-lookup"><span data-stu-id="96b26-113">The location of such a reference changes if the value of TARGETDIR is changed by the user.</span></span>
-   <span data-ttu-id="96b26-114">Las tablas del módulo de combinación deben hacer referencia a la ubicación de un directorio secundario de TARGETDIR, o a otro directorio del árbol del módulo de combinación.</span><span class="sxs-lookup"><span data-stu-id="96b26-114">The tables in the merge module must reference the location of a child directory of TARGETDIR, or another directory in the merge module's tree.</span></span> <span data-ttu-id="96b26-115">Haga lo siguiente para especificar TARGETDIR como elemento primario de un directorio en el módulo de combinación.</span><span class="sxs-lookup"><span data-stu-id="96b26-115">Do the following to specify TARGETDIR as the parent of a directory in the merge module.</span></span> <span data-ttu-id="96b26-116">Escriba el directorio en la columna directorio y escriba TARGETDIR en la \_ columna principal del directorio.</span><span class="sxs-lookup"><span data-stu-id="96b26-116">Enter the directory into the Directory column and enter TARGETDIR into the Directory\_Parent column.</span></span> <span data-ttu-id="96b26-117">Use la notación "." de la columna DefaultDir para indicar que este directorio se encuentra en TARGETDIR sin un subdirectorio.</span><span class="sxs-lookup"><span data-stu-id="96b26-117">Use the "." notation in the DefaultDir column to indicate that this directory is located in TARGETDIR without a subdirectory.</span></span> <span data-ttu-id="96b26-118">Para obtener más información, consulte [uso de la tabla de directorios](using-the-directory-table.md).</span><span class="sxs-lookup"><span data-stu-id="96b26-118">For more information, see [Using the Directory Table](using-the-directory-table.md).</span></span>
-   <span data-ttu-id="96b26-119">Los nombres de los directorios agregados por el módulo de combinación deben usar las convenciones de nomenclatura descritas en [naming Keys Primary in Merge Module Databases](naming-primary-keys-in-merge-module-databases.md).</span><span class="sxs-lookup"><span data-stu-id="96b26-119">The names of directories added by the merge module must use the naming conventions described in [Naming Primary Keys in Merge Module Databases](naming-primary-keys-in-merge-module-databases.md).</span></span> <span data-ttu-id="96b26-120">Esto incluye los directorios predefinidos por propiedades como la propiedad [**carpetadelsistema**](systemfolder.md) y la propiedad [**ProgramFilesFolder**](programfilesfolder.md) .</span><span class="sxs-lookup"><span data-stu-id="96b26-120">This includes directories predefined by properties such as the [**SystemFolder**](systemfolder.md) property and [**ProgramFilesFolder**](programfilesfolder.md) property.</span></span>
-   <span data-ttu-id="96b26-121">Anexe un [*GUID*](g-gly.md) a cada entrada de la tabla del directorio (excepto el targetdir). Esto incluye las entradas de la tabla de directorios que especifican Windows Installer propiedades [**carpetadelsistema**](systemfolder.md) , por ejemplo, carpetadelsistema. 00000000 0000 0000 0000 \_ \_ \_ \_ 000000000000.</span><span class="sxs-lookup"><span data-stu-id="96b26-121">Append a [*GUID*](g-gly.md) to every entry in the Directory table (except TARGETDIR.) This includes Directory table entries that specify Windows Installer [**SystemFolder**](systemfolder.md) properties, for example, SystemFolder.00000000\_0000\_0000\_0000\_000000000000.</span></span> <span data-ttu-id="96b26-122">La biblioteca Mergemod.dll agrega acciones personalizadas para establecer la propiedad **carpetadelsistema** .</span><span class="sxs-lookup"><span data-stu-id="96b26-122">The library Mergemod.dll adds custom actions to set the **SystemFolder** property.</span></span>
-   <span data-ttu-id="96b26-123">Cuando se incluye un directorio predefinido en un módulo de combinación, la herramienta de combinación agrega automáticamente un [tipo de acción personalizada 51](custom-action-type-51.md) a la base de datos de destino.</span><span class="sxs-lookup"><span data-stu-id="96b26-123">When a predefined directory is included in a merge module, the merge tool automatically adds a [Custom Action Type 51](custom-action-type-51.md) to the target database.</span></span> <span data-ttu-id="96b26-124">El autor del módulo de combinación debe asegurarse de que también se incluye una [tabla CustomAction](customaction-table.md) .</span><span class="sxs-lookup"><span data-stu-id="96b26-124">The merge module author must ensure that a [CustomAction table](customaction-table.md) is also included.</span></span> <span data-ttu-id="96b26-125">La tabla CustomAction puede estar vacía, pero es necesario que esta tabla exista en la base de datos de destino y se asegure de que los directorios predefinidos modificados se escriben en las ubicaciones correctas.</span><span class="sxs-lookup"><span data-stu-id="96b26-125">The CustomAction table may be empty, but this table is required to exist in the target database and ensures that the modified predefined directories are written to the correct locations.</span></span> <span data-ttu-id="96b26-126">Por ejemplo, cuando un directorio del sistema se incluye en un módulo de combinación, el autor del módulo de combinación debe asegurarse de que existe una tabla de acción personalizada.</span><span class="sxs-lookup"><span data-stu-id="96b26-126">For example, when a system directory is included in a merge module, the merge module author must ensure that a Custom Action table exists.</span></span>

    <span data-ttu-id="96b26-127">Tenga en cuenta que el algoritmo de búsqueda de coincidencias para la generación de estas acciones personalizadas de tipo 51 solo comprueba que el nombre del directorio comienza por una de las propiedades predefinidas de [**carpetadelsistema**](systemfolder.md) .</span><span class="sxs-lookup"><span data-stu-id="96b26-127">Note that the matching algorithm for the generation of these type 51 custom actions only checks that the directory name begins with one of the predefined [**SystemFolder**](systemfolder.md) properties.</span></span> <span data-ttu-id="96b26-128">No comprueba que el nombre del directorio es exactamente igual a la propiedad Directory.</span><span class="sxs-lookup"><span data-stu-id="96b26-128">It does not verify that the directory name exactly equals the directory property.</span></span> <span data-ttu-id="96b26-129">Cualquier directorio que comience con uno de estos nombres de carpeta estándar obtiene una acción personalizada Type 51, incluso si el resto del nombre no es un GUID.</span><span class="sxs-lookup"><span data-stu-id="96b26-129">Any directory beginning with one of these standard folder names gets a type 51 custom action, even if the rest of the name is not a GUID.</span></span> <span data-ttu-id="96b26-130">Los autores deben tener cuidado de que esto no genere coincidencias de falsos positivos y la generación de una acción personalizada no deseada en claves principales derivadas que comiencen por una de las propiedades de **carpetadelsistema** .</span><span class="sxs-lookup"><span data-stu-id="96b26-130">Authors need to take care that this does not generate false positive matches, and unintended custom action generation, on derivative primary keys that begin with one of the **SystemFolder** properties.</span></span>

<span data-ttu-id="96b26-131">El siguiente es un ejemplo de una tabla de directorio en un módulo de combinación y los directorios resueltos esperados.</span><span class="sxs-lookup"><span data-stu-id="96b26-131">The following is an example of a Directory table in a merge module and the expected resolved directories.</span></span>



| <span data-ttu-id="96b26-132">Directorio</span><span class="sxs-lookup"><span data-stu-id="96b26-132">Directory</span></span>                                              | <span data-ttu-id="96b26-133">Directorio \_ primario</span><span class="sxs-lookup"><span data-stu-id="96b26-133">Directory\_Parent</span></span>                                | <span data-ttu-id="96b26-134">DefaultDir</span><span class="sxs-lookup"><span data-stu-id="96b26-134">DefaultDir</span></span>  |
|--------------------------------------------------------|--------------------------------------------------|-------------|
| <span data-ttu-id="96b26-135">TARGETDIR</span><span class="sxs-lookup"><span data-stu-id="96b26-135">TARGETDIR</span></span>                                              |                                                  | <span data-ttu-id="96b26-136">SourceDir</span><span class="sxs-lookup"><span data-stu-id="96b26-136">SourceDir</span></span>   |
| <span data-ttu-id="96b26-137">Dir00. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="96b26-137">Dir00.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="96b26-138">TARGETDIR</span><span class="sxs-lookup"><span data-stu-id="96b26-138">TARGETDIR</span></span>                                        | <span data-ttu-id="96b26-139">.: Progreso de MMM \_</span><span class="sxs-lookup"><span data-stu-id="96b26-139">.:MMM\_Prog</span></span> |
| <span data-ttu-id="96b26-140">Carpetadelsistema. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="96b26-140">SystemFolder.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span> | <span data-ttu-id="96b26-141">TARGETDIR</span><span class="sxs-lookup"><span data-stu-id="96b26-141">TARGETDIR</span></span>                                        | <span data-ttu-id="96b26-142">DD \_ de MMM</span><span class="sxs-lookup"><span data-stu-id="96b26-142">MMM\_Sys</span></span>    |
| <span data-ttu-id="96b26-143">Dir02. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="96b26-143">Dir02.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="96b26-144">Dir00. BC82E350 \_ C7FC \_ 11D1 \_ A848 \_ 006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="96b26-144">Dir00.BC82E350\_ C7FC\_11d1\_ A848\_006097ABDE17</span></span> | <span data-ttu-id="96b26-145">OCX de MFC \_</span><span class="sxs-lookup"><span data-stu-id="96b26-145">MFC\_OCX</span></span>    |



 

<span data-ttu-id="96b26-146">Se espera que un módulo de combinación con la tabla de directorio anterior dé como resultado la siguiente estructura de directorios.</span><span class="sxs-lookup"><span data-stu-id="96b26-146">A merge module with the above Directory table is expected to result in the following directory structure.</span></span>



| <span data-ttu-id="96b26-147">Directorio</span><span class="sxs-lookup"><span data-stu-id="96b26-147">Directory</span></span>                                              | <span data-ttu-id="96b26-148">Destino</span><span class="sxs-lookup"><span data-stu-id="96b26-148">Target</span></span>                                     | <span data-ttu-id="96b26-149">Source</span><span class="sxs-lookup"><span data-stu-id="96b26-149">Source</span></span>                                               |
|--------------------------------------------------------|--------------------------------------------|------------------------------------------------------|
| <span data-ttu-id="96b26-150">Dir00. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="96b26-150">Dir00.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="96b26-151">\[Punto de instalación del módulo de combinación\]</span><span class="sxs-lookup"><span data-stu-id="96b26-151">\[Merge Module's Install Point\]</span></span>\\         | <span data-ttu-id="96b26-152">\[Progreso del punto de origen del módulo de combinación \] \\ \_</span><span class="sxs-lookup"><span data-stu-id="96b26-152">\[Merge Module's Source Point\]\\MMM\_Prog</span></span>           |
| <span data-ttu-id="96b26-153">Carpetadelsistema. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="96b26-153">SystemFolder.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span> | <span data-ttu-id="96b26-154">\[Carpetadelsistema\]</span><span class="sxs-lookup"><span data-stu-id="96b26-154">\[SystemFolder\]</span></span>\\                         | <span data-ttu-id="96b26-155">\[\] \\ DD sys del punto de origen del módulo de combinación \_</span><span class="sxs-lookup"><span data-stu-id="96b26-155">\[Merge Module's Source Point\]\\MMM\_Sys</span></span>            |
| <span data-ttu-id="96b26-156">Dir02. BC82E350 \_ C7FC \_ 11D1 \_ A848-006097ABDE17</span><span class="sxs-lookup"><span data-stu-id="96b26-156">Dir02.BC82E350\_ C7FC\_11d1\_ A848-006097ABDE17</span></span>        | <span data-ttu-id="96b26-157">\[Punto de instalación del módulo de combinación, \] \\ ocx de MFC \_</span><span class="sxs-lookup"><span data-stu-id="96b26-157">\[Merge Module's Install Point\]\\MFC\_OCX</span></span> | <span data-ttu-id="96b26-158">\[Punto de origen del módulo de combinación \] \\ \_ \\ \_</span><span class="sxs-lookup"><span data-stu-id="96b26-158">\[Merge Module's Source Point\]\\MMM\_Prog\\MFC\_OCX</span></span> |



 

 

 



