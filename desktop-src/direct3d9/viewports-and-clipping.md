---
description: Conceptualmente, una ventanilla es un rectángulo bidimensional (2D) en el que se proyecta una escena 3D.
ms.assetid: eddadaa1-9181-47fa-8530-44aa46fea286
title: Ventanillas y recorte (Direct3D 9)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d57f64d17f7abf4e370406f984fa50037be6d44e
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104151943"
---
# <a name="viewports-and-clipping-direct3d-9"></a><span data-ttu-id="71251-103">Ventanillas y recorte (Direct3D 9)</span><span class="sxs-lookup"><span data-stu-id="71251-103">Viewports and Clipping (Direct3D 9)</span></span>

<span data-ttu-id="71251-104">Conceptualmente, una ventanilla es un rectángulo bidimensional (2D) en el que se proyecta una escena 3D.</span><span class="sxs-lookup"><span data-stu-id="71251-104">Conceptually, a viewport is a two-dimensional (2D) rectangle into which a 3D scene is projected.</span></span> <span data-ttu-id="71251-105">En Direct3D, el rectángulo existe como coordenadas dentro de una superficie de Direct3D que el sistema usa como destino de representación.</span><span class="sxs-lookup"><span data-stu-id="71251-105">In Direct3D, the rectangle exists as coordinates within a Direct3D surface that the system uses as a rendering target.</span></span> <span data-ttu-id="71251-106">La transformación proyección convierte los vértices en el sistema de coordenadas que se usa para la ventanilla.</span><span class="sxs-lookup"><span data-stu-id="71251-106">The projection transformation converts vertices into the coordinate system used for the viewport.</span></span> <span data-ttu-id="71251-107">Una ventanilla también se usa para especificar el intervalo de valores de profundidad en una superficie de representación-destino en la que se representará una escena (normalmente de 0,0 a 1,0).</span><span class="sxs-lookup"><span data-stu-id="71251-107">A viewport is also used to specify the range of depth values on a render-target surface into which a scene will be rendered (usually 0.0 to 1.0).</span></span>

## <a name="the-viewing-frustum"></a><span data-ttu-id="71251-108">El frustum de visualización</span><span class="sxs-lookup"><span data-stu-id="71251-108">The Viewing Frustum</span></span>

<span data-ttu-id="71251-109">Un frustum de visualización es un volumen 3D en una escena colocada en relación con la cámara de la ventanilla.</span><span class="sxs-lookup"><span data-stu-id="71251-109">A viewing frustum is 3D volume in a scene positioned relative to the viewport's camera.</span></span> <span data-ttu-id="71251-110">La forma del volumen afecta a cómo se proyectan los modelos desde el espacio de la cámara en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="71251-110">The shape of the volume affects how models are projected from camera space onto the screen.</span></span> <span data-ttu-id="71251-111">El tipo más común de proyección, una proyección en perspectiva, es responsable de que los objetos cercanos a la cámara aparezcan más grandes que los objetos de la distancia.</span><span class="sxs-lookup"><span data-stu-id="71251-111">The most common type of projection, a perspective projection, is responsible for making objects near the camera appear bigger than objects in the distance.</span></span> <span data-ttu-id="71251-112">Para ver la perspectiva, el frustum de visualización se puede visualizar como una pirámide, con la cámara colocada en la punta, tal como se muestra en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="71251-112">For perspective viewing, the viewing frustum can be visualized as a pyramid, with the camera positioned at the tip as shown in the following illustration.</span></span> <span data-ttu-id="71251-113">Esta pirámide está intersectada por un plano de recorte delantero y trasero.</span><span class="sxs-lookup"><span data-stu-id="71251-113">This pyramid is intersected by a front and back clipping plane.</span></span> <span data-ttu-id="71251-114">El número que se encuentra dentro de la pirámide entre los planos de recorte delantero y trasero es el frustum de visualización.</span><span class="sxs-lookup"><span data-stu-id="71251-114">The volume within the pyramid between the front and back clipping planes is the viewing frustum.</span></span> <span data-ttu-id="71251-115">Los objetos solo son visibles cuando están en este volumen.</span><span class="sxs-lookup"><span data-stu-id="71251-115">Objects are visible only when they are in this volume.</span></span>

![Ilustración de un frustrum de visualización con un plan de recorte delantero y posterior](images/frustum.png)

<span data-ttu-id="71251-117">Si Imagine que está de pie en una habitación oscura y examina una ventana cuadrada, está visualizando un frustum de visualización.</span><span class="sxs-lookup"><span data-stu-id="71251-117">If you imagine that you are standing in a dark room and looking through a square window, you are visualizing a viewing frustum.</span></span> <span data-ttu-id="71251-118">En esta analogía, el plano de recorte cercano es la ventana y el plano de recorte hacia atrás es lo que finalmente interrumpa la vista: el rascacielo en la calle, las montañas de la distancia o nada en absoluto.</span><span class="sxs-lookup"><span data-stu-id="71251-118">In this analogy, the near clipping plane is the window, and the back clipping plane is whatever finally interrupts your view - the skyscraper across the street, the mountains in the distance, or nothing at all.</span></span> <span data-ttu-id="71251-119">Puede ver todo lo que se encuentra dentro de la pirámide truncada que comienza en la ventana y termina con cualquier interrupción de la vista, y puede ver nada más.</span><span class="sxs-lookup"><span data-stu-id="71251-119">You can see everything inside the truncated pyramid that starts at the window and ends with whatever interrupts your view, and you can see nothing else.</span></span>

<span data-ttu-id="71251-120">El frustum de visualización está definido por un campo de código (campo de vista) y por las distancias de los planos de recorte delantero y posterior, que se especifican en coordenadas z, tal como se muestra en el diagrama siguiente.</span><span class="sxs-lookup"><span data-stu-id="71251-120">The viewing frustum is defined by fov (field of view) and by the distances of the front and back clipping planes, specified in z-coordinates, as shown in the following diagram.</span></span>

![diagrama del frustum de visualización](images/fovdiag.png)

<span data-ttu-id="71251-122">En este diagrama, la variable D es la distancia desde la cámara hasta el origen del espacio que se definió en la última parte de la canalización de geometría: la transformación de visualización.</span><span class="sxs-lookup"><span data-stu-id="71251-122">In this diagram, the variable D is the distance from the camera to the origin of the space that was defined in the last part of the geometry pipeline - the viewing transformation.</span></span> <span data-ttu-id="71251-123">Este es el espacio alrededor del cual se organizan los límites del frustum de visualización.</span><span class="sxs-lookup"><span data-stu-id="71251-123">This is the space around which you arrange the limits of your viewing frustum.</span></span> <span data-ttu-id="71251-124">Para obtener información sobre cómo se usa esta variable D para compilar la matriz de proyección, vea la [transformación de proyección (Direct3D 9)](projection-transform.md)</span><span class="sxs-lookup"><span data-stu-id="71251-124">For information about how this D variable is used to build the projection matrix, see the [Projection Transform (Direct3D 9)](projection-transform.md)</span></span>

## <a name="viewport-rectangle"></a><span data-ttu-id="71251-125">Rectángulo de ventanilla</span><span class="sxs-lookup"><span data-stu-id="71251-125">Viewport Rectangle</span></span>

<span data-ttu-id="71251-126">El rectángulo de ventanilla se define en C++ mediante la estructura [**D3DVIEWPORT9**](d3dviewport9.md) .</span><span class="sxs-lookup"><span data-stu-id="71251-126">You define the viewport rectangle in C++ by using the [**D3DVIEWPORT9**](d3dviewport9.md) structure.</span></span> <span data-ttu-id="71251-127">La estructura D3DVIEWPORT9 se utiliza con los siguientes métodos de manipulación de la ventanilla expuestos por la interfaz IDirect3DDevice9.</span><span class="sxs-lookup"><span data-stu-id="71251-127">The D3DVIEWPORT9 structure is used with the following viewport manipulation methods exposed by the IDirect3DDevice9 interface.</span></span>

-   [<span data-ttu-id="71251-128">**IDirect3DDevice9::GetViewport**</span><span class="sxs-lookup"><span data-stu-id="71251-128">**IDirect3DDevice9::GetViewport**</span></span>](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-getviewport)
-   [<span data-ttu-id="71251-129">**IDirect3DDevice9::SetViewport**</span><span class="sxs-lookup"><span data-stu-id="71251-129">**IDirect3DDevice9::SetViewport**</span></span>](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport)

<span data-ttu-id="71251-130">La estructura D3DVIEWPORT9 contiene cuatro miembros: X, Y, ancho y alto, que definen el área de la superficie de representación-destino en la que se representará una escena.</span><span class="sxs-lookup"><span data-stu-id="71251-130">The D3DVIEWPORT9 structure contains four members - X, Y, Width, Height - that define the area of the render-target surface into which a scene will be rendered.</span></span> <span data-ttu-id="71251-131">Estos valores se corresponden con el rectángulo de destino, o con el rectángulo de la ventanilla, tal y como se muestra en el diagrama siguiente.</span><span class="sxs-lookup"><span data-stu-id="71251-131">These values correspond to the destination rectangle, or viewport rectangle, as shown in the following diagram.</span></span>

![diagrama del rectángulo de la ventanilla](images/destrect.png)

<span data-ttu-id="71251-133">Los valores que se especifican para los miembros X, Y, ancho y alto son coordenadas de pantalla relativas a la esquina superior izquierda de la superficie de representación-destino.</span><span class="sxs-lookup"><span data-stu-id="71251-133">The values you specify for the X, Y, Width, Height members are screen coordinates relative to the upper-left corner of the render-target surface.</span></span> <span data-ttu-id="71251-134">La estructura define dos miembros adicionales (MinZ y MaxZ) que indican los intervalos de profundidad en los que se representará la escena.</span><span class="sxs-lookup"><span data-stu-id="71251-134">The structure defines two additional members (MinZ and MaxZ) that indicate the depth-ranges into which the scene will be rendered.</span></span>

<span data-ttu-id="71251-135">Direct3D supone que el volumen de recorte de la ventanilla oscila entre-1,0 y 1,0 en X y de 1,0 a-1,0 en Y. Se trata de la configuración usada con más frecuencia por aplicaciones en el pasado.</span><span class="sxs-lookup"><span data-stu-id="71251-135">Direct3D assumes that the viewport clipping volume ranges from -1.0 to 1.0 in X, and from 1.0 to -1.0 in Y. These were the settings used most often by applications in the past.</span></span> <span data-ttu-id="71251-136">Puede ajustar la relación de aspecto de la ventanilla antes del recorte mediante la [transformación de proyección](projection-transform.md).</span><span class="sxs-lookup"><span data-stu-id="71251-136">You can adjust the viewport aspect ratio before clipping using the [projection transform](projection-transform.md).</span></span>

> [!Note]  
> <span data-ttu-id="71251-137">MinZ y MaxZ indican los intervalos de profundidad en los que se representará la escena y no se usarán para el recorte.</span><span class="sxs-lookup"><span data-stu-id="71251-137">MinZ and MaxZ indicate the depth-ranges into which the scene will be rendered and are not used for clipping.</span></span> <span data-ttu-id="71251-138">La mayoría de las aplicaciones establecerá estos miembros en 0,0 y 1,0 para permitir que el sistema se represente en todo el intervalo de valores de profundidad en el búfer de profundidad.</span><span class="sxs-lookup"><span data-stu-id="71251-138">Most applications will set these members to 0.0 and 1.0 to enable the system to render to the entire range of depth values in the depth buffer.</span></span> <span data-ttu-id="71251-139">En algunos casos, puede lograr efectos especiales mediante el uso de otros intervalos de profundidad.</span><span class="sxs-lookup"><span data-stu-id="71251-139">In some cases, you can achieve special effects by using other depth ranges.</span></span> <span data-ttu-id="71251-140">Por ejemplo, para representar una pantalla emergente en un juego, puede establecer ambos valores en 0,0 para obligar al sistema a representar objetos en una escena en primer plano, o puede establecer ambos en 1,0 para representar un objeto que siempre debe estar en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="71251-140">For instance, to render a heads-up display in a game, you can set both values to 0.0 to force the system to render objects in a scene in the foreground, or you might set them both to 1.0 to render an object that should always be in the background.</span></span>

 

<span data-ttu-id="71251-141">Las dimensiones usadas en los miembros X, Y, ancho y alto de la estructura [**D3DVIEWPORT9**](d3dviewport9.md) de una ventanilla definen la ubicación y las dimensiones de la ventanilla en la superficie de representación-destino.</span><span class="sxs-lookup"><span data-stu-id="71251-141">The dimensions used in the X, Y, Width, Height members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure for a viewport define the location and dimensions of the viewport on the render-target surface.</span></span> <span data-ttu-id="71251-142">Estos valores se encuentran en coordenadas de pantalla, con respecto a la esquina superior izquierda de la superficie.</span><span class="sxs-lookup"><span data-stu-id="71251-142">These values are in screen coordinates, relative to the upper-left corner of the surface.</span></span>

<span data-ttu-id="71251-143">Direct3D usa la ubicación y las dimensiones de la ventanilla para escalar los vértices para que se ajusten a una escena representada en la ubicación adecuada en la superficie de destino.</span><span class="sxs-lookup"><span data-stu-id="71251-143">Direct3D uses the viewport location and dimensions to scale the vertices to fit a rendered scene into the appropriate location on the target surface.</span></span> <span data-ttu-id="71251-144">De forma interna, Direct3D inserta estos valores en la matriz siguiente que se aplica a cada vértice.</span><span class="sxs-lookup"><span data-stu-id="71251-144">Internally, Direct3D inserts these values into the following matrix that is applied to each vertex.</span></span>

![ecuación de la matriz que se aplica a cada vértice](images/vpscale.png)

<span data-ttu-id="71251-146">Esta matriz escala los vértices según las dimensiones de la ventanilla y el intervalo de profundidad deseado y los convierte en la ubicación adecuada en la superficie de representación-destino.</span><span class="sxs-lookup"><span data-stu-id="71251-146">This matrix scales vertices according to the viewport dimensions and desired depth range and translates them to the appropriate location on the render-target surface.</span></span> <span data-ttu-id="71251-147">La matriz también voltea la coordenada y para reflejar el origen de una pantalla en la esquina superior izquierda con y aumentando hacia abajo.</span><span class="sxs-lookup"><span data-stu-id="71251-147">The matrix also flips the y-coordinate to reflect a screen origin at the top-left corner with y increasing downward.</span></span> <span data-ttu-id="71251-148">Después de aplicar esta matriz, los vértices siguen siendo homogéneos, es decir, siguen existiendo como \[ x, y, z, \] e vértices, y deben convertirse en coordenadas no homogéneas antes de enviarse al rasterizador.</span><span class="sxs-lookup"><span data-stu-id="71251-148">After this matrix is applied, vertices are still homogeneous - that is, they still exist as \[x,y,z,w\] vertices - and they must be converted to non-homogeneous coordinates before being sent to the rasterizer.</span></span>

> [!Note]  
> <span data-ttu-id="71251-149">La matriz de escala de ventanilla incorpora los miembros MinZ y MaxZ de la estructura [**D3DVIEWPORT9**](d3dviewport9.md) a los vértices de escala para ajustarse al intervalo de profundidad \[ MinZ, MaxZ \] .</span><span class="sxs-lookup"><span data-stu-id="71251-149">The viewport scaling matrix incorporates the MinZ and MaxZ members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure to scale vertices to fit the depth range \[MinZ, MaxZ\].</span></span> <span data-ttu-id="71251-150">Esto representa una semántica diferente de las versiones anteriores de DirectX, en la que estos miembros se usaban para el recorte.</span><span class="sxs-lookup"><span data-stu-id="71251-150">This represents different semantics from previous releases of DirectX, in which these members were used for clipping.</span></span>

 

> [!Note]  
> <span data-ttu-id="71251-151">Las aplicaciones normalmente establecen MinZ y MaxZ en 0,0 y 1,0, respectivamente, para que el sistema se represente en todo el intervalo de profundidad.</span><span class="sxs-lookup"><span data-stu-id="71251-151">Applications typically set MinZ and MaxZ to 0.0 and 1.0 respectively to cause the system to render to the entire depth range.</span></span> <span data-ttu-id="71251-152">Sin embargo, puede usar otros valores para lograr determinados efectos.</span><span class="sxs-lookup"><span data-stu-id="71251-152">However, you can use other values to achieve certain affects.</span></span> <span data-ttu-id="71251-153">Por ejemplo, puede establecer ambos valores en 0,0 para forzar todos los objetos en primer plano o establecer ambos en 1,0 para representar todos los objetos en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="71251-153">For example, you might set both values to 0.0 to force all objects into the foreground, or set both to 1.0 to render all objects into the background.</span></span>

 

## <a name="clearing-a-viewport"></a><span data-ttu-id="71251-154">Borrar una ventanilla</span><span class="sxs-lookup"><span data-stu-id="71251-154">Clearing a Viewport</span></span>

<span data-ttu-id="71251-155">Al borrar la ventanilla, se restablece el contenido del rectángulo de la ventanilla en la superficie de representación y destino.</span><span class="sxs-lookup"><span data-stu-id="71251-155">Clearing the viewport resets the contents of the viewport rectangle on the render-target surface.</span></span> <span data-ttu-id="71251-156">También puede borrar el rectángulo en las superficies de búfer de profundidad y de estarcido.</span><span class="sxs-lookup"><span data-stu-id="71251-156">It can also clear the rectangle in the depth and stencil buffer surfaces.</span></span>

<span data-ttu-id="71251-157">Use [**IDirect3DDevice9:: Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) para borrar la ventanilla.</span><span class="sxs-lookup"><span data-stu-id="71251-157">Use [**IDirect3DDevice9::Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) to clear the viewport.</span></span> <span data-ttu-id="71251-158">El método acepta uno o más rectángulos que definen las áreas de la superficie que se va a borrar.</span><span class="sxs-lookup"><span data-stu-id="71251-158">The method accepts one or more rectangles that define the areas on the surface being cleared.</span></span> <span data-ttu-id="71251-159">Al establecer el parámetro Count en 1, y el parámetro pRects en la dirección de un solo rectángulo que cubre el área de la ventanilla completa, se borrará toda la ventanilla.</span><span class="sxs-lookup"><span data-stu-id="71251-159">Setting the Count parameter to 1, and the pRects parameter to the address of a single rectangle that covers the entire viewport area will clear the entire viewport.</span></span> <span data-ttu-id="71251-160">Otra manera de borrar toda la ventanilla es establecer el parámetro pRects en **null** y el parámetro Count en 0.</span><span class="sxs-lookup"><span data-stu-id="71251-160">Another way to clear the entire viewport is to set the pRects parameter to **NULL** and the Count parameter to 0.</span></span>

<span data-ttu-id="71251-161">Se puede usar [**IDirect3DDevice9:: Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) para borrar los bits de una galería de símbolos en un búfer de profundidad.</span><span class="sxs-lookup"><span data-stu-id="71251-161">The [**IDirect3DDevice9::Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) can be used for clearing stencil bits within a depth buffer.</span></span> <span data-ttu-id="71251-162">Solo tiene que establecer el parámetro flags para determinar cómo **IDirect3DDevice9:: Clear** funciona con el destino de representación y cualquier búfer de estarcido o profundidad asociados.</span><span class="sxs-lookup"><span data-stu-id="71251-162">Simply set the Flags parameter to determine how **IDirect3DDevice9::Clear** works with the render target and any associated depth or stencil buffers.</span></span> <span data-ttu-id="71251-163">La marca de destino de D3DCLEAR \_ borrará la ventanilla mediante un color RGBA arbitrario que proporcione en el argumento de color (este no es el color del material).</span><span class="sxs-lookup"><span data-stu-id="71251-163">The D3DCLEAR\_TARGET flag will clear the viewport using an arbitrary RGBA color that you provide in the Color argument (this is not the material color).</span></span> <span data-ttu-id="71251-164">La \_ marca D3DCLEAR ZBUFFER borrará el búfer de profundidad hasta una profundidad arbitraria que especifique en Z: 0,0 es la distancia más cercana y 1,0 es la más lejana.</span><span class="sxs-lookup"><span data-stu-id="71251-164">The D3DCLEAR\_ZBUFFER flag will clear the depth buffer to an arbitrary depth you specify in Z: 0.0 is the closest distance, and 1.0 is the farthest.</span></span> <span data-ttu-id="71251-165">La \_ marca de estarcido D3DCLEAR restablecerá los bits de la galería de símbolos al valor que proporcione en el argumento de la galería de símbolos.</span><span class="sxs-lookup"><span data-stu-id="71251-165">The D3DCLEAR\_STENCIL flag will reset the stencil bits to the value you provide in the Stencil argument.</span></span> <span data-ttu-id="71251-166">Puede usar enteros que van de 0 a 2N-1, donde n es la profundidad de bits del búfer de estarcido.</span><span class="sxs-lookup"><span data-stu-id="71251-166">You can use integers that range from 0 to 2n-1, where n is the stencil buffer bit depth.</span></span>

<span data-ttu-id="71251-167">En algunas situaciones, puede que solo se represente en pequeñas partes de las superficies de destino de representación y de búfer de profundidad.</span><span class="sxs-lookup"><span data-stu-id="71251-167">In some situations, you might be rendering only to small portions of the render target and depth buffer surfaces.</span></span> <span data-ttu-id="71251-168">Los métodos claros también permiten borrar varias áreas de las superficies en una sola llamada.</span><span class="sxs-lookup"><span data-stu-id="71251-168">The clear methods also enable you to clear multiple areas of your surfaces in a single call.</span></span> <span data-ttu-id="71251-169">Para ello, establezca el parámetro Count en el número de rectángulos que desee borrar y especifique la dirección del primer rectángulo en una matriz de rectángulos en el parámetro pRects.</span><span class="sxs-lookup"><span data-stu-id="71251-169">Do this by setting the Count parameter to the number of rectangles you want cleared, and specify the address of the first rectangle in an array of rectangles in the pRects parameter.</span></span>

## <a name="set-up-the-viewport-for-clipping"></a><span data-ttu-id="71251-170">Configurar la ventanilla para el recorte</span><span class="sxs-lookup"><span data-stu-id="71251-170">Set Up the Viewport for Clipping</span></span>

<span data-ttu-id="71251-171">Los resultados de la matriz de proyección determinan el volumen de recorte en el espacio de proyección como:</span><span class="sxs-lookup"><span data-stu-id="71251-171">The results of the projection matrix determine the clipping volume in projection space as:</span></span>

<span data-ttu-id="71251-172">-w<sub><=</sub> x<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="71251-172">-w<sub>c</sub><= x<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="71251-173">-w<sub><</sub> = y<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="71251-173">-w<sub>c</sub><= y<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="71251-174">0 <= z<sub>c</sub><= w<sub>c</sub></span><span class="sxs-lookup"><span data-stu-id="71251-174">0 <= z<sub>c</sub><= w<sub>c</sub></span></span>

<span data-ttu-id="71251-175">Donde: x, y, z y w representan las coordenadas de los vértices después de aplicar la transformación de proyección.</span><span class="sxs-lookup"><span data-stu-id="71251-175">Where: x, y, z, and w represent the vertex coordinates after the projection transformation is applied.</span></span> <span data-ttu-id="71251-176">Se recortan los vértices que tienen un componente x-, y-o z fuera de estos intervalos, si está habilitado el recorte (comportamiento predeterminado).</span><span class="sxs-lookup"><span data-stu-id="71251-176">Any vertices that have an x-, y-, or z-component outside these ranges are clipped, if clipping is enabled (the default behavior).</span></span>

<span data-ttu-id="71251-177">Con la excepción de los búferes de vértices, las aplicaciones habilitan o deshabilitan el recorte por medio del estado de representación de [**\_ recorte de D3DRS**](./d3drenderstatetype.md) .</span><span class="sxs-lookup"><span data-stu-id="71251-177">With the exception of vertex buffers, applications enable or disable clipping by way of the [**D3DRS\_CLIPPING**](./d3drenderstatetype.md) render state.</span></span> <span data-ttu-id="71251-178">La información de recorte para los búferes de vértices se genera durante el procesamiento.</span><span class="sxs-lookup"><span data-stu-id="71251-178">Clipping information for vertex buffers is generated during processing.</span></span> <span data-ttu-id="71251-179">Para obtener más información, vea [procesamiento de vértices de función fija (Direct3D 9)](fixed-function-vertex-processing.md) y [procesamiento de vértices programable (Direct3D 9)](programmable-vertex-processing.md).</span><span class="sxs-lookup"><span data-stu-id="71251-179">For more information, see [Fixed Function Vertex Processing (Direct3D 9)](fixed-function-vertex-processing.md) and [Programmable Vertex Processing (Direct3D 9)](programmable-vertex-processing.md).</span></span>

<span data-ttu-id="71251-180">Direct3D no recorta los vértices transformados de un primitivo desde un búfer de vértice a menos que proceda de [**IDirect3DDevice9::P rocessvertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices).</span><span class="sxs-lookup"><span data-stu-id="71251-180">Direct3D does not clip transformed vertices of a primitive from a vertex buffer unless it comes from [**IDirect3DDevice9::ProcessVertices**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-processvertices).</span></span> <span data-ttu-id="71251-181">Si va a realizar sus propias transformaciones y necesita Direct3D para realizar el recorte, no debe usar búferes de vértices.</span><span class="sxs-lookup"><span data-stu-id="71251-181">If you are doing your own transforms and need Direct3D to do the clipping, you should not use vertex buffers.</span></span> <span data-ttu-id="71251-182">En este caso, la aplicación atraviesa los datos para transformarlos.</span><span class="sxs-lookup"><span data-stu-id="71251-182">In this case, the application traverses the data to transform it.</span></span> <span data-ttu-id="71251-183">Direct3D recorre los datos una segunda vez para recortarlo y, a continuación, el controlador representa los datos, lo que es ineficaz.</span><span class="sxs-lookup"><span data-stu-id="71251-183">Direct3D traverses the data a second time to clip it, and then the driver renders the data, which is inefficient.</span></span> <span data-ttu-id="71251-184">Por lo tanto, si la aplicación transforma los datos, también debe recortar los datos.</span><span class="sxs-lookup"><span data-stu-id="71251-184">So, if the application transforms the data, is should also clip the data.</span></span>

<span data-ttu-id="71251-185">Cuando el dispositivo recibe los vértices transformados y encendidos (los vértices de T&L) que deben recortarse, para realizar la operación de recorte, los vértices se transforman en el espacio de recorte mediante el uso de la información homogénea de los vértices (RHW) y la información de la ventanilla.</span><span class="sxs-lookup"><span data-stu-id="71251-185">When the device receives pre-transformed and lit vertices (T&L vertices) that need to be clipped, in order to perform the clipping operation the vertices are back-transformed to the clipping space using the vertex's reciprocal homogeneous w (RHW) and the viewport information.</span></span> <span data-ttu-id="71251-186">A continuación, se realiza el recorte.</span><span class="sxs-lookup"><span data-stu-id="71251-186">Clipping is then performed.</span></span> <span data-ttu-id="71251-187">No todos los dispositivos son capaces de realizar esta transformación posterior para recortar los vértices de T&.</span><span class="sxs-lookup"><span data-stu-id="71251-187">Not all devices are capable of performing this back-transform in order to clip T&L vertices.</span></span>

<span data-ttu-id="71251-188">La \_ funcionalidad del dispositivo D3DPMISCCAPS CLIPTLVERTS indica si el dispositivo es capaz de recortar los vértices de T&L.</span><span class="sxs-lookup"><span data-stu-id="71251-188">The D3DPMISCCAPS\_CLIPTLVERTS device capability indicates whether the device is capable of clipping T&L vertices.</span></span> <span data-ttu-id="71251-189">Si no se establece esta funcionalidad, la aplicación es responsable de recortar los vértices de T&L que se van a enviar al dispositivo que se va a representar.</span><span class="sxs-lookup"><span data-stu-id="71251-189">If this capability is not set, the application is responsible for clipping the T&L vertices that it intends to send down to the device to be rendered.</span></span> <span data-ttu-id="71251-190">El dispositivo siempre es capaz de recortar los vértices de T&L en el modo de procesamiento de vértices de software (independientemente de si el dispositivo se crea en el modo de procesamiento de vértices de software o de cambiar al modo de procesamiento de vértices de software).</span><span class="sxs-lookup"><span data-stu-id="71251-190">The device is always capable of clipping T&L vertices in the software vertex processing mode (regardless of whether the device is created in the software vertex processing mode, or switched to the software vertex processing mode).</span></span>

<span data-ttu-id="71251-191">El único requisito para configurar los parámetros de la ventanilla para un dispositivo de representación es establecer el volumen de recorte de la ventanilla.</span><span class="sxs-lookup"><span data-stu-id="71251-191">The only requirement for configuring the viewport parameters for a rendering device is to set the viewport's clipping volume.</span></span> <span data-ttu-id="71251-192">Para ello, inicialice y establezca los valores de recorte para el volumen de recorte y para la superficie de representación-destino.</span><span class="sxs-lookup"><span data-stu-id="71251-192">To do this, you initialize and set clipping values for the clipping volume and for the render-target surface.</span></span> <span data-ttu-id="71251-193">Las ventanillas se configuran normalmente para representarse en el área completa de la superficie de representación y destino, pero esto no es un requisito.</span><span class="sxs-lookup"><span data-stu-id="71251-193">Viewports are commonly set up to render to the full area of the render-target surface, but this isn't a requirement.</span></span>

<span data-ttu-id="71251-194">Puede usar la siguiente configuración para los miembros de la estructura [**D3DVIEWPORT9**](d3dviewport9.md) para lograr esto en C++.</span><span class="sxs-lookup"><span data-stu-id="71251-194">You can use the following settings for the members of the [**D3DVIEWPORT9**](d3dviewport9.md) structure to achieve this in C++.</span></span>


```
D3DVIEWPORT9 viewData = { 0, 0, width, height, 0.0f, 1.0f };
```



<span data-ttu-id="71251-195">Después de establecer los valores en la estructura [**D3DVIEWPORT9**](d3dviewport9.md) , aplique los parámetros de ventanilla al dispositivo llamando a su método [**IDirect3DDevice9:: SetViewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) .</span><span class="sxs-lookup"><span data-stu-id="71251-195">After setting values in the [**D3DVIEWPORT9**](d3dviewport9.md) structure, apply the viewport parameters to the device by calling its [**IDirect3DDevice9::SetViewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) method.</span></span> <span data-ttu-id="71251-196">En el ejemplo de código siguiente se muestra el aspecto que podría tener esta llamada.</span><span class="sxs-lookup"><span data-stu-id="71251-196">The following code example shows what this call might look like.</span></span>


```
HRESULT hr;

hr = pd3dDevice->SetViewport(&viewData);
if(FAILED(hr))
    return hr;
```



<span data-ttu-id="71251-197">Si la llamada se realiza correctamente, se establecen los parámetros de la ventanilla y surtirán efecto la próxima vez que se llame a un método de representación.</span><span class="sxs-lookup"><span data-stu-id="71251-197">If the call succeeds, the viewport parameters are set and will take effect the next time a rendering method is called.</span></span> <span data-ttu-id="71251-198">Para realizar cambios en los parámetros de la ventanilla, solo tiene que actualizar los valores de la estructura [**D3DVIEWPORT9**](d3dviewport9.md) y llamar de nuevo a [**IDirect3DDevice9:: SetViewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) .</span><span class="sxs-lookup"><span data-stu-id="71251-198">To make changes to the viewport parameters, just update the values in the [**D3DVIEWPORT9**](d3dviewport9.md) structure and call [**IDirect3DDevice9::SetViewport**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setviewport) again.</span></span>

> [!Note]  
> <span data-ttu-id="71251-199">Los miembros de la estructura [**D3DVIEWPORT9**](d3dviewport9.md) MinZ y MaxZ indican los intervalos de profundidad en los que se representará la escena y no se usarán para el recorte.</span><span class="sxs-lookup"><span data-stu-id="71251-199">The [**D3DVIEWPORT9**](d3dviewport9.md) structure members MinZ and MaxZ indicate the depth-ranges into which the scene will be rendered and are not used for clipping.</span></span> <span data-ttu-id="71251-200">La mayoría de las aplicaciones establecen estos miembros en 0,0 y 1,0 para permitir que el sistema se represente en todo el intervalo de valores de profundidad en el búfer de profundidad.</span><span class="sxs-lookup"><span data-stu-id="71251-200">Most applications set these members to 0.0 and 1.0 to enable the system to render to the entire range of depth values in the depth buffer.</span></span> <span data-ttu-id="71251-201">En algunos casos, puede lograr efectos especiales mediante el uso de otros intervalos de profundidad.</span><span class="sxs-lookup"><span data-stu-id="71251-201">In some cases, you can achieve special effects by using other depth ranges.</span></span> <span data-ttu-id="71251-202">Por ejemplo, para representar una pantalla emergente en un juego, puede establecer ambos valores en 0,0 para obligar al sistema a representar objetos en una escena en primer plano, o puede establecer ambos en 1,0 para representar un objeto que siempre debe estar en segundo plano.</span><span class="sxs-lookup"><span data-stu-id="71251-202">For instance, to render a heads-up display in a game, you can set both values to 0.0 to force the system to render objects in a scene in the foreground, or you might set them both to 1.0 to render an object that should always be in the background.</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="71251-203">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="71251-203">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="71251-204">Introducción</span><span class="sxs-lookup"><span data-stu-id="71251-204">Getting Started</span></span>](getting-started.md)
</dt> </dl>

 

 
