---
title: Desarrollar complementos de controlador de protocolo
description: Puede extender la búsqueda de escritorio de Microsoft Windows (WDS) para incluir nuevos almacenes de datos mediante la implementación de un controlador de protocolo personalizado.
ms.assetid: 2447d95f-5832-453c-8857-3b4f4c158177
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 45a8688621f7d2fda653d769c0e1dfdadd240f49
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/19/2020
ms.locfileid: "104533172"
---
# <a name="developing-protocol-handler-add-ins"></a><span data-ttu-id="8e43a-103">Desarrollar complementos de controlador de protocolo</span><span class="sxs-lookup"><span data-stu-id="8e43a-103">Developing Protocol Handler Add-ins</span></span>

> [!NOTE]
> <span data-ttu-id="8e43a-104">Windows Desktop Search 2. x es una tecnología obsoleta que estaba disponible originalmente como complemento para Windows XP y Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="8e43a-104">Windows Desktop Search 2.x is an obsolete technology that was originally available as an add-in for Windows XP and Windows Server 2003.</span></span> <span data-ttu-id="8e43a-105">En versiones posteriores, use la [búsqueda de Windows](../search/-search-3x-wds-overview.md) en su lugar.</span><span class="sxs-lookup"><span data-stu-id="8e43a-105">On later releases, use [Windows Search](../search/-search-3x-wds-overview.md) instead.</span></span>

<span data-ttu-id="8e43a-106">Puede extender la búsqueda de escritorio de Microsoft Windows (WDS) para incluir nuevos almacenes de datos mediante la implementación de un controlador de protocolo personalizado.</span><span class="sxs-lookup"><span data-stu-id="8e43a-106">You can extend Microsoft Windows Desktop Search (WDS) to include new data stores by implementing a custom protocol handler.</span></span>

## <a name="indexing-data-stores-with-protocol-handlers"></a><span data-ttu-id="8e43a-107">Indexación de almacenes de datos con controladores de protocolo</span><span class="sxs-lookup"><span data-stu-id="8e43a-107">Indexing Data Stores with Protocol Handlers</span></span>

<span data-ttu-id="8e43a-108">Un almacén de datos es un origen de contenido (un sistema de base de datos, un directorio, un sistema de archivos) en el que se almacenan los datos y se pueden rastrear mediante el indexador de WDS.</span><span class="sxs-lookup"><span data-stu-id="8e43a-108">A data store is a content source (a database system, a directory, a file system) where data is stored and can be crawled by the WDS Indexer.</span></span> <span data-ttu-id="8e43a-109">El almacén puede ser jerárquico (como una base de datos) o basado en vínculo (como un sitio web).</span><span class="sxs-lookup"><span data-stu-id="8e43a-109">The store can be hierarchical (like a database) or link-based (like a website).</span></span> <span data-ttu-id="8e43a-110">Un controlador de protocolo permite que las aplicaciones de indización como WDS rastreen sistemáticamente los nodos de un almacén de datos para extraer información relevante que se incluirá en el índice.</span><span class="sxs-lookup"><span data-stu-id="8e43a-110">A protocol handler enables indexing applications like WDS to systematically crawl the nodes of a data store to extract relevant information to include in the index.</span></span> <span data-ttu-id="8e43a-111">Cada controlador de protocolo se utiliza para indizar un tipo específico de almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="8e43a-111">Each protocol handler is used to index a specific type of data store.</span></span> <span data-ttu-id="8e43a-112">WDS se suministra con los controladores de protocolo para los almacenes del sistema de archivos y para los almacenes de datos de Microsoft Outlook y Microsoft Outlook Express (almacenes de correo electrónico,. Archivos PST, etc.).</span><span class="sxs-lookup"><span data-stu-id="8e43a-112">WDS ships with protocol handlers for file system stores and for both Microsoft Outlook and Microsoft Outlook Express data stores (email stores, .PST files, and so on).</span></span> <span data-ttu-id="8e43a-113">Al indizar el correo electrónico de Outlook, por ejemplo, el controlador de protocolo rastrea todos los mensajes de todas las carpetas extrayendo información de cada mensaje y datos adjuntos.</span><span class="sxs-lookup"><span data-stu-id="8e43a-113">When indexing Outlook email, for example, the protocol handler crawls all messages in all folders extracting information from each message and attachment.</span></span> <span data-ttu-id="8e43a-114">Esta información se pasa al indizador que se va a incluir en el catálogo de WDS.</span><span class="sxs-lookup"><span data-stu-id="8e43a-114">This information is passed to the Indexer to include in the WDS catalog.</span></span>

<span data-ttu-id="8e43a-115">A menudo, los usuarios necesitan buscar otros almacenes de datos, como bases de datos heredadas, almacenes de correo electrónico o estructuras de datos no admitidas por WDS.</span><span class="sxs-lookup"><span data-stu-id="8e43a-115">Often users need to search other data stores such as legacy databases, email stores or data structures not supported by WDS.</span></span> <span data-ttu-id="8e43a-116">Puede extender WDS para rastrear un nuevo almacén de datos mediante o implementando un controlador de protocolo específicamente para ese almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="8e43a-116">You can extend WDS to crawl a new data store by using or implementing a protocol handler specifically for that data store.</span></span> <span data-ttu-id="8e43a-117">En primer lugar, debe determinar primero si ya existe un controlador de protocolo para el almacén de datos, quizás para su uso con otra aplicación como SharePoint Services.</span><span class="sxs-lookup"><span data-stu-id="8e43a-117">First, you should first determine if a protocol handler already exists for your data store, perhaps for use with another application like SharePoint Services.</span></span> <span data-ttu-id="8e43a-118">Si es así, puede instalar el controlador de protocolo en el sistema.</span><span class="sxs-lookup"><span data-stu-id="8e43a-118">If so, you can install that protocol handler on the system.</span></span> <span data-ttu-id="8e43a-119">Sin embargo, si no existe otro controlador de protocolo, debe implementar uno.</span><span class="sxs-lookup"><span data-stu-id="8e43a-119">If, however, another protocol handler does not exist, then you need to implement one.</span></span> <span data-ttu-id="8e43a-120">Los controladores de protocolo de WDS usan las mismas especificaciones de diseño que SharePoint Services y, a menudo, se pueden usar indistintamente.</span><span class="sxs-lookup"><span data-stu-id="8e43a-120">WDS protocol handlers use the same design specifications as SharePoint Services, and they can often be used interchangeably.</span></span>

<span data-ttu-id="8e43a-121">Además, si el almacén de datos contiene datos o tipos de archivo distintos de uno de los tipos de archivo 200 que admite WDS, también debe implementar un filtro para obtener acceso al contenido de los elementos del almacén e indexarlo.</span><span class="sxs-lookup"><span data-stu-id="8e43a-121">Furthermore, if the data store contains data or file types other than one of the 200 file types supported by WDS, you also need to implement a filter to access and index the contents of items in the store.</span></span> <span data-ttu-id="8e43a-122">WDS 2. x usa el controlador de protocolo y la tecnología de [**IFilter**](/windows/desktop/api/filter/nn-filter-ifilter)usada por SharePoint Services.</span><span class="sxs-lookup"><span data-stu-id="8e43a-122">WDS 2.x uses the protocol handler and [**IFilter**](/windows/desktop/api/filter/nn-filter-ifilter)technology used by SharePoint Services.</span></span> <span data-ttu-id="8e43a-123">Si ya tiene filtros para un almacén específico y un tipo de archivo instalados en el sistema que se está indizando, WDS usa las interfaces existentes para indizar estos datos.</span><span class="sxs-lookup"><span data-stu-id="8e43a-123">If you already have filters for a specific store and file type installed on the system being indexed, WDS uses the existing interfaces to index this data.</span></span>

 

## <a name="roadmap-to-adding-new-data-stores"></a><span data-ttu-id="8e43a-124">Guía básica para agregar nuevos almacenes de datos</span><span class="sxs-lookup"><span data-stu-id="8e43a-124">Roadmap to Adding New Data Stores</span></span>

<span data-ttu-id="8e43a-125">Para ampliar WDS para que rastree nuevos almacenes de datos, puede crear un controlador de protocolo y uno o varios de los siguientes complementos: controlador de menú contextual, controlador de iconos y un complemento SearchProtocolOptions.</span><span class="sxs-lookup"><span data-stu-id="8e43a-125">To extend WDS to crawl new data stores, you can create a protocol handler and one or more of the following add-ins: context menu handler, icon handler and a SearchProtocolOptions add-in.</span></span>

1.  <span data-ttu-id="8e43a-126">Cree y registre un controlador de protocolo multiproceso para el almacén de datos:</span><span class="sxs-lookup"><span data-stu-id="8e43a-126">Create and register a multithreaded protocol handler for the data store:</span></span>
    -   <span data-ttu-id="8e43a-127">**ISearchProtocol** : esta interfaz tiene acceso a un protocolo y asigna una dirección URL a un IUrlAccessor.</span><span class="sxs-lookup"><span data-stu-id="8e43a-127">**ISearchProtocol** - This interface accesses a protocol and maps a URL to an IUrlAccessor.</span></span>
    -   <span data-ttu-id="8e43a-128">**IUrlAccessor** : esta es la interfaz principal que se usa para obtener acceso a los elementos del origen de contenido y enlazar el contenido con el filtro adecuado.</span><span class="sxs-lookup"><span data-stu-id="8e43a-128">**IUrlAccessor** - This is the main interface used for accessing items from the content source and binding the content to appropriate filter.</span></span>
    -   <span data-ttu-id="8e43a-129">**IProtocolHandlerSite** : esta interfaz se usa para solicitar y cargar filtros adicionales.</span><span class="sxs-lookup"><span data-stu-id="8e43a-129">**IProtocolHandlerSite** - This interface is used to request and load additional filters.</span></span>
    -   <span data-ttu-id="8e43a-130">**IFilter** : esta interfaz devuelve la dirección URL de cada elemento de una carpeta como propiedades de valor para el procesamiento.</span><span class="sxs-lookup"><span data-stu-id="8e43a-130">**IFilter** - This interface returns the URL of each item in a folder as value properties for processing.</span></span>

    > [!Note]
    >
    > <span data-ttu-id="8e43a-131">La funcionalidad de complementos mínima necesaria para devolver los resultados de la búsqueda desde un almacén de datos no jerárquico es una implementación de las interfaces ISearchProtocol e IUrlAccessor.</span><span class="sxs-lookup"><span data-stu-id="8e43a-131">The minimum add-in functionality needed to return search results from a non-hierarchical data store is an implementation of ISearchProtocol and IUrlAccessor interfaces.</span></span>

     

2.  <span data-ttu-id="8e43a-132">Implemente la interfaz ISearchProtocolOptions para incluir opciones de controlador de protocolo personalizadas, como páginas de inicio predefinidas:</span><span class="sxs-lookup"><span data-stu-id="8e43a-132">Implement the ISearchProtocolOptions interface to include customized protocol handler options, like predefined start page(s):</span></span>
    -   <span data-ttu-id="8e43a-133">**ISearchProtocolOptions** : esta interfaz define las direcciones URL predeterminadas que el controlador de protocolo debe procesar, determina cuáles son los requisitos de un controlador de protocolo y determina si se han cumplido los requisitos en un sistema determinado.</span><span class="sxs-lookup"><span data-stu-id="8e43a-133">**ISearchProtocolOptions** - This interface defines default URLs for the protocol handler to process, determines what the requirements are for a protocol handler, and determines whether the requirements have been met on a given system.</span></span>
3.  <span data-ttu-id="8e43a-134">Extienda el shell para incluir los elementos de la interfaz de usuario, como los menús contextuales y los iconos específicos del archivo, mediante la implementación de las interfaces siguientes:</span><span class="sxs-lookup"><span data-stu-id="8e43a-134">Extend Shell to include user interface elements, like context menus and file-specific icons, by implementing the following interfaces:</span></span>
    -   <span data-ttu-id="8e43a-135">**IShellFolder** : esta interfaz, que se usa para administrar carpetas, es necesaria para proporcionar las interfaces IContextMenu e IExtractIcon para una dirección URL en un nuevo almacén.</span><span class="sxs-lookup"><span data-stu-id="8e43a-135">**IShellFolder** - This interface, which is used to manage folders, is required to provide the IContextMenu and IExtractIcon interfaces for a URL in a new store.</span></span>
    -   <span data-ttu-id="8e43a-136">**IPersistFolder** : esta interfaz es necesaria para indicar a un objeto de la carpeta de Shell que se inicialice a sí mismo.</span><span class="sxs-lookup"><span data-stu-id="8e43a-136">**IPersistFolder** - This interface is required to instruct a Shell folder object to initialize itself.</span></span>
    -   <span data-ttu-id="8e43a-137">**IPersist** : esta interfaz proporciona el identificador de clase (CLSID) de un objeto que se puede almacenar de forma persistente en el sistema.</span><span class="sxs-lookup"><span data-stu-id="8e43a-137">**IPersist** - This interface supplies the class identifier (CLSID) of an object that can be stored persistently in the system.</span></span>
    -   <span data-ttu-id="8e43a-138">**IContextMenu** : esta interfaz define el menú contextual del clic con el botón secundario para un elemento señalado por la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="8e43a-138">**IContextMenu** - This interface defines the right-click context menu for an item pointed to by URL.</span></span>
    -   <span data-ttu-id="8e43a-139">**IExtractIcon** : esta interfaz define el icono que se va a mostrar para un elemento señalado por la dirección URL.</span><span class="sxs-lookup"><span data-stu-id="8e43a-139">**IExtractIcon** - This interface defines the icon to display for an item pointed to by URL.</span></span>
4.  <span data-ttu-id="8e43a-140">Implemente un mecanismo para notificar a los cambios del indexador en el almacén de datos:</span><span class="sxs-lookup"><span data-stu-id="8e43a-140">Implement a mechanism to notify the Indexer of changes to your data store:</span></span>
    -   <span data-ttu-id="8e43a-141">**ISearchItemsChangedSink** : esta interfaz permite al controlador de protocolo notificar al índice de cambios en el almacén de datos.</span><span class="sxs-lookup"><span data-stu-id="8e43a-141">**ISearchItemsChangedSink** - This interface enables your protocol handler to notify the Index of changes to your data store.</span></span> <span data-ttu-id="8e43a-142">Esto mejora el rendimiento, ya que garantiza que el indexador no rastrea todo el almacén en los índices incrementales.</span><span class="sxs-lookup"><span data-stu-id="8e43a-142">This improves performance by ensuring the Indexer doesn't crawl the entire store on incremental indexes.</span></span>

## <a name="related-topics"></a><span data-ttu-id="8e43a-143">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="8e43a-143">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="8e43a-144">**Referencia**</span><span class="sxs-lookup"><span data-stu-id="8e43a-144">**Reference**</span></span>
</dt> <dt>

[<span data-ttu-id="8e43a-145">Implementar un controlador de protocolo para WDS</span><span class="sxs-lookup"><span data-stu-id="8e43a-145">Implementing a Protocol Handler for WDS</span></span>](-search-2x-wds-phimplementing.md)
</dt> <dt>

[<span data-ttu-id="8e43a-146">Agregar iconos, vistas previas y menús contextuales con extensiones de Shell</span><span class="sxs-lookup"><span data-stu-id="8e43a-146">Adding Icons, Previews, and Context Menus with Shell Extensions</span></span>](-search-2x-wds-ph-ui-extensions.md)
</dt> <dt>

[<span data-ttu-id="8e43a-147">Notificar el índice de cambios</span><span class="sxs-lookup"><span data-stu-id="8e43a-147">Notifying the Index of Changes</span></span>](-search-2x-wds-notifyingofchanges.md)
</dt> <dt>

[<span data-ttu-id="8e43a-148">Instalar y registrar controladores de protocolo</span><span class="sxs-lookup"><span data-stu-id="8e43a-148">Installing and Registering Protocol Handlers</span></span>](-search-2x-wds-ph-install-registration.md)
</dt> </dl>

 

 