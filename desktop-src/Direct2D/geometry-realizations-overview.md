---
title: Información general sobre las realizaciones de geometría
description: En este tema se describe cómo usar la realización de geometrías de Direct2D para mejorar el rendimiento de representación de la geometría de la aplicación en ciertos escenarios.
ms.assetid: E8C4C4E5-3102-4F53-847E-A4C2D12A6921
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5b903e047ee58a803a7584aaca407281fc803e30
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "105656361"
---
# <a name="geometry-realizations-overview"></a><span data-ttu-id="707e5-103">Información general sobre las realizaciones de geometría</span><span class="sxs-lookup"><span data-stu-id="707e5-103">Geometry Realizations Overview</span></span>

<span data-ttu-id="707e5-104">En este tema se describe cómo usar la realización de geometrías de [Direct2D](direct2d-portal.md) para mejorar el rendimiento de representación de la geometría de la aplicación en ciertos escenarios.</span><span class="sxs-lookup"><span data-stu-id="707e5-104">This topic describes how to use [Direct2D](direct2d-portal.md) geometry realizations to improve your app’s geometry rendering performance in certain scenarios.</span></span>

<span data-ttu-id="707e5-105">Contiene las secciones siguientes:</span><span class="sxs-lookup"><span data-stu-id="707e5-105">It contains the following sections:</span></span>

-   [<span data-ttu-id="707e5-106">¿Qué ocurre con Geometry?</span><span class="sxs-lookup"><span data-stu-id="707e5-106">What are geometry realizations?</span></span>](#what-are-geometry-realizations)
-   [<span data-ttu-id="707e5-107">¿Por qué se tiene que usar Geometry?</span><span class="sxs-lookup"><span data-stu-id="707e5-107">Why use geometry realizations?</span></span>](#why-use-geometry-realizations)
-   [<span data-ttu-id="707e5-108">Cuándo usar la realización de geometría</span><span class="sxs-lookup"><span data-stu-id="707e5-108">When to use geometry realizations</span></span>](#when-to-use-geometry-realizations)
-   [<span data-ttu-id="707e5-109">Crear la realización de geometría</span><span class="sxs-lookup"><span data-stu-id="707e5-109">Creating geometry realizations</span></span>](#creating-geometry-realizations)
-   [<span data-ttu-id="707e5-110">Dibujo de la geometría de dibujo</span><span class="sxs-lookup"><span data-stu-id="707e5-110">Drawing geometry realizations</span></span>](#drawing-geometry-realizations)
-   [<span data-ttu-id="707e5-111">Escalado de geometría</span><span class="sxs-lookup"><span data-stu-id="707e5-111">Scaling geometry realizations</span></span>](#scaling-geometry-realizations)
    -   [<span data-ttu-id="707e5-112">Uso de la realización de geometría en aplicaciones que no se escalan</span><span class="sxs-lookup"><span data-stu-id="707e5-112">Using geometry realizations in apps that do not scale</span></span>](#using-geometry-realizations-in-apps-that-do-not-scale)
    -   [<span data-ttu-id="707e5-113">Uso de geometría en aplicaciones que se escalan en una cantidad pequeña</span><span class="sxs-lookup"><span data-stu-id="707e5-113">Using geometry realizations in apps that scale by a small amount</span></span>](#using-geometry-realizations-in-apps-that-scale-by-a-small-amount)
    -   [<span data-ttu-id="707e5-114">Uso de geometría en aplicaciones que se escalan en gran medida</span><span class="sxs-lookup"><span data-stu-id="707e5-114">Using geometry realizations in apps that scale by a large amount</span></span>](#using-geometry-realizations-in-apps-that-scale-by-a-large-amount)
-   [<span data-ttu-id="707e5-115">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="707e5-115">Related topics</span></span>](#related-topics)

## <a name="what-are-geometry-realizations"></a><span data-ttu-id="707e5-116">¿Qué ocurre con Geometry?</span><span class="sxs-lookup"><span data-stu-id="707e5-116">What are geometry realizations?</span></span>

<span data-ttu-id="707e5-117">La realización de geometrías, introducida en Windows 8.1, es un nuevo tipo de primitiva de dibujo que facilita a las aplicaciones de [Direct2D](direct2d-portal.md) mejorar el rendimiento de la representación de geometría en determinados casos.</span><span class="sxs-lookup"><span data-stu-id="707e5-117">Geometry realizations, introduced in Windows 8.1, are a new type of drawing primitive that make it easy for [Direct2D](direct2d-portal.md) apps to improve geometry rendering performance in certain cases.</span></span> <span data-ttu-id="707e5-118">La interfaz [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) representa la realización de la geometría.</span><span class="sxs-lookup"><span data-stu-id="707e5-118">Geometry realizations are represented by the [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) interface.</span></span>

## <a name="why-use-geometry-realizations"></a><span data-ttu-id="707e5-119">¿Por qué se tiene que usar Geometry?</span><span class="sxs-lookup"><span data-stu-id="707e5-119">Why use geometry realizations?</span></span>

<span data-ttu-id="707e5-120">Cuando [Direct2D](direct2d-portal.md) representa un objeto [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) , debe convertir esa geometría en una forma que el hardware gráfico comprenda a través de un proceso denominado teselación.</span><span class="sxs-lookup"><span data-stu-id="707e5-120">When [Direct2D](direct2d-portal.md) renders an [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) object, it must convert that geometry to a form the graphics hardware understands through a process called tessellation.</span></span> <span data-ttu-id="707e5-121">Normalmente, Direct2D debe dividirlas geometría cada fotograma que se dibuja, incluso si la geometría no cambia.</span><span class="sxs-lookup"><span data-stu-id="707e5-121">Typically, Direct2D must tessellate geometry every frame it is drawn, even if the geometry does not change.</span></span> <span data-ttu-id="707e5-122">Si la aplicación representa la misma geometría en cada fotograma, la reteselación repetida representa el esfuerzo de cálculo desperdiciado.</span><span class="sxs-lookup"><span data-stu-id="707e5-122">If your app renders the same geometry every frame, then the repeated re-tessellation represents wasted computational effort.</span></span> <span data-ttu-id="707e5-123">Es más eficaz en la memoria caché la teselación, o incluso la rasterización completa, de la geometría, y para dibujar esa representación almacenada en caché en cada fotograma en lugar de volver a teselar repetidamente.</span><span class="sxs-lookup"><span data-stu-id="707e5-123">It is more computationally efficient to cache the tessellation, or even the full rasterization, of the geometry, and to draw that cached representation each frame instead of repeatedly re-tessellating.</span></span>

<span data-ttu-id="707e5-124">Una forma habitual de que los desarrolladores resuelvan este problema es almacenar en caché la rasterización completa de la geometría.</span><span class="sxs-lookup"><span data-stu-id="707e5-124">A common way that developers solve this problem is to cache the full rasterization of the geometry.</span></span> <span data-ttu-id="707e5-125">En concreto, es habitual crear un nuevo mapa de bits, rasterizar la geometría a ese mapa de bits y, a continuación, dibujar dicho mapa de bits en la escena según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="707e5-125">In particular, it is common to create a new bitmap, rasterize the geometry to that bitmap, and then draw that bitmap to the scene as needed.</span></span> <span data-ttu-id="707e5-126">(Este enfoque se describe en la sección de [representación de geometría](improving-direct2d-performance.md) de cómo mejorar el rendimiento de las aplicaciones de Direct2D). Aunque este enfoque es muy eficaz, tiene algunas desventajas:</span><span class="sxs-lookup"><span data-stu-id="707e5-126">(This approach is described in the [Geometry rendering](improving-direct2d-performance.md) section of Improving the performance of Direct2D apps.) While this approach is very computationally efficient, it has some drawbacks:</span></span>

-   <span data-ttu-id="707e5-127">El mapa de bits almacenado en caché es sensible a los cambios en la transformación aplicada a la escena.</span><span class="sxs-lookup"><span data-stu-id="707e5-127">The cached bitmap is sensitive to changes in the transform applied to the scene.</span></span> <span data-ttu-id="707e5-128">Por ejemplo, el escalado de la rasterización puede dar lugar a artefactos de escalado perceptible.</span><span class="sxs-lookup"><span data-stu-id="707e5-128">For example, scaling the rasterization can result in a noticeable scaling artifacts.</span></span> <span data-ttu-id="707e5-129">Mitigar estos artefactos con algoritmos de escalado de alta calidad puede ser costoso.</span><span class="sxs-lookup"><span data-stu-id="707e5-129">Mitigating these artifacts with high-quality scaling algorithms can be computationally expensive.</span></span>
-   <span data-ttu-id="707e5-130">El mapa de bits almacenado en caché consume una cantidad significativa de memoria, especialmente si se rasteriza con una resolución alta.</span><span class="sxs-lookup"><span data-stu-id="707e5-130">The cached bitmap consumes a significant amount of memory, especially if it is rasterized at a high resolution.</span></span>

<span data-ttu-id="707e5-131">Las conversiones de geometría proporcionan una manera alternativa de almacenar en caché la geometría que evita las desventajas anteriores.</span><span class="sxs-lookup"><span data-stu-id="707e5-131">Geometry realizations provide an alternative way to cache geometry that avoids the above drawbacks.</span></span> <span data-ttu-id="707e5-132">Los cálculos de geometría se representan no por píxeles (como es el caso con una rasterización completa), sino en lugar de puntos en un plano matemático.</span><span class="sxs-lookup"><span data-stu-id="707e5-132">Geometry realizations are represented not by pixels (as is the case with a full rasterization) but instead by points on a mathematical plane.</span></span> <span data-ttu-id="707e5-133">Por esta razón, son menos sensibles que las rasterizaciones completas para el escalado y otras manipulaciones, y consumen mucha menos memoria.</span><span class="sxs-lookup"><span data-stu-id="707e5-133">For this reason they are less sensitive than full rasterizations to scaling and other manipulation, and they consume significantly less memory.</span></span>

## <a name="when-to-use-geometry-realizations"></a><span data-ttu-id="707e5-134">Cuándo usar la realización de geometría</span><span class="sxs-lookup"><span data-stu-id="707e5-134">When to use geometry realizations</span></span>

<span data-ttu-id="707e5-135">Considere la posibilidad de usar geometría cuando la aplicación representa geometrías complejas cuyas formas cambian con poca frecuencia, pero que pueden estar sujetas a cambios de transformaciones.</span><span class="sxs-lookup"><span data-stu-id="707e5-135">Consider using geometry realizations when your app renders complex geometries whose shapes change infrequently but which may be subject to changing transforms.</span></span>

<span data-ttu-id="707e5-136">Por ejemplo, imagine una aplicación de asignación que muestra una asignación estática pero que permite al usuario acercar y alejar. Esta aplicación se puede beneficiar del uso de la realización de geometría.</span><span class="sxs-lookup"><span data-stu-id="707e5-136">For example, consider a mapping application that shows a static map but which allows the user to zoom in and out. This app can benefit from using geometry realizations.</span></span> <span data-ttu-id="707e5-137">Puesto que las geometrías que se representan siguen siendo estáticas, resulta útil almacenarlas en caché para ahorrar trabajo de teselación.</span><span class="sxs-lookup"><span data-stu-id="707e5-137">Since the geometries being rendered remain static, it is useful to cache them in order to save tessellation work.</span></span> <span data-ttu-id="707e5-138">Sin embargo, dado que las asignaciones se escalan cuando el usuario amplía, el almacenamiento en caché de una rasterización completa no es ideal, debido a los artefactos de escalado.</span><span class="sxs-lookup"><span data-stu-id="707e5-138">But because the maps are scaled when the user zooms, caching a full rasterization is not ideal, due to scaling artifacts.</span></span> <span data-ttu-id="707e5-139">Almacenar en caché las supuestos de geometría permitiría a la aplicación evitar el trabajo de reteselación manteniendo una calidad visual elevada durante el escalado.</span><span class="sxs-lookup"><span data-stu-id="707e5-139">Caching geometry realizations would allow the app to avoid re-tessellation work while maintaining high visual quality during scaling.</span></span>

<span data-ttu-id="707e5-140">Por otro lado, considere la posibilidad de usar una aplicación Kaleidoscope con geometría animada que cambia continuamente.</span><span class="sxs-lookup"><span data-stu-id="707e5-140">On the other hand, consider a kaleidoscope app with animated geometry that continually changes.</span></span> <span data-ttu-id="707e5-141">Esta aplicación probablemente no se beneficiaría del uso de la realización de geometría.</span><span class="sxs-lookup"><span data-stu-id="707e5-141">This app would probably not benefit from using geometry realizations.</span></span> <span data-ttu-id="707e5-142">Dado que las formas cambian de fotograma a fotograma, no es útil almacenar en caché sus teselaciones.</span><span class="sxs-lookup"><span data-stu-id="707e5-142">Since the shapes themselves change from frame to frame, it is not useful to cache their tessellations.</span></span> <span data-ttu-id="707e5-143">El mejor enfoque para esta aplicación es dibujar objetos de [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) directamente.</span><span class="sxs-lookup"><span data-stu-id="707e5-143">The best approach for this app is to draw [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) objects directly.</span></span>

## <a name="creating-geometry-realizations"></a><span data-ttu-id="707e5-144">Crear la realización de geometría</span><span class="sxs-lookup"><span data-stu-id="707e5-144">Creating geometry realizations</span></span>

<span data-ttu-id="707e5-145">Se debe crear un objeto [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) a partir de un objeto [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) existente.</span><span class="sxs-lookup"><span data-stu-id="707e5-145">An [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) object must be created from an existing [**ID2D1Geometry**](/windows/win32/api/d2d1/nn-d2d1-id2d1geometry) object.</span></span> <span data-ttu-id="707e5-146">Para crear una realización de geometría, llame al método [**CreateFilledGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createfilledgeometryrealization) o al método [**CreateStrokedGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createstrokedgeometryrealization) y pase la **ID2D1Geometry** que se va a realizar.</span><span class="sxs-lookup"><span data-stu-id="707e5-146">To create a geometry realization, call the [**CreateFilledGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createfilledgeometryrealization) method or the [**CreateStrokedGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createstrokedgeometryrealization) method and pass in the **ID2D1Geometry** to be realized.</span></span>

-   <span data-ttu-id="707e5-147">[**CreateFilledGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createfilledgeometryrealization) crea una realización del interior de la forma: la región que se dibujaría llamando a [**FillGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-fillgeometry).</span><span class="sxs-lookup"><span data-stu-id="707e5-147">[**CreateFilledGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createfilledgeometryrealization) creates a realization of the interior of the shape: the region that would be drawn by calling [**FillGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-fillgeometry).</span></span>
-   <span data-ttu-id="707e5-148">[**CreateStrokedGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createstrokedgeometryrealization) crea una realización del trazo de la forma: la región que se dibujaría llamando a [**DrawGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawgeometry).</span><span class="sxs-lookup"><span data-stu-id="707e5-148">[**CreateStrokedGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-createstrokedgeometryrealization) creates a realization of the stroke of the shape: the region that would be drawn by calling [**DrawGeometry**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-drawgeometry).</span></span>

<span data-ttu-id="707e5-149">Ambos tipos de la realización de geometría se representan mediante la interfaz [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) .</span><span class="sxs-lookup"><span data-stu-id="707e5-149">Both kinds of geometry realization are represented by the [**ID2D1GeometryRealization**](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization) interface.</span></span>

<span data-ttu-id="707e5-150">Al crear una realización de geometría, [Direct2D](direct2d-portal.md) debe acoplar las curvas de la geometría proporcionada a las aproximaciones poligonales.</span><span class="sxs-lookup"><span data-stu-id="707e5-150">When creating a geometry realization, [Direct2D](direct2d-portal.md) must flatten any curves in the provided geometry to polygonal approximations.</span></span> <span data-ttu-id="707e5-151">Debe proporcionar un parámetro de tolerancia de acoplamiento al método de creación; esto especifica la distancia máxima, en píxeles independientes del dispositivo (DIP), entre la curva verdadera de la geometría y su aproximación poligonal.</span><span class="sxs-lookup"><span data-stu-id="707e5-151">You must provide a flattening tolerance parameter to the creation method—this specifies the maximum distance, in device-independent pixels (DIPs), between the geometry’s true curve and its polygonal approximation.</span></span> <span data-ttu-id="707e5-152">Cuanto menor sea la tolerancia de acoplamiento que proporcione, mayor será la fidelidad del objeto de realización de geometría resultante.</span><span class="sxs-lookup"><span data-stu-id="707e5-152">The lower the flattening tolerance you provide, the higher the fidelity of the resulting geometry realization object.</span></span> <span data-ttu-id="707e5-153">De forma similar, si se proporciona una tolerancia de acoplamiento superior, se consigue una geometría de menor fidelidad.</span><span class="sxs-lookup"><span data-stu-id="707e5-153">Similarly, providing a higher flattening tolerance yields a lower-fidelity geometry realization.</span></span> <span data-ttu-id="707e5-154">Tenga en cuenta que las conversiones de geometría de mayor fidelidad son más costosas de dibujar que las de menor fidelidad, pero se pueden escalar más antes de introducir artefactos visibles.</span><span class="sxs-lookup"><span data-stu-id="707e5-154">Note that higher-fidelity geometry realizations are more expensive to draw than lower-fidelity ones, but they can be scaled further before introducing visible artifacts.</span></span> <span data-ttu-id="707e5-155">Para obtener instrucciones sobre el uso de las tolerancias de acoplamiento, consulte el [escalado de geometría](#scaling-geometry-realizations) a continuación.</span><span class="sxs-lookup"><span data-stu-id="707e5-155">For guidance on using flattening tolerances, see [Scaling geometry realizations](#scaling-geometry-realizations) below.</span></span>

> [!Note]  
> <span data-ttu-id="707e5-156">Los objetos de realización de geometría están asociados a un dispositivo de gráficos determinado: son recursos dependientes del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="707e5-156">Geometry realization objects are associated with a particular graphics device: they are device-dependent resources.</span></span>

 

## <a name="drawing-geometry-realizations"></a><span data-ttu-id="707e5-157">Dibujo de la geometría de dibujo</span><span class="sxs-lookup"><span data-stu-id="707e5-157">Drawing geometry realizations</span></span>

<span data-ttu-id="707e5-158">El dibujo de las supuestos de geometría es similar al de dibujar otras primitivas de [Direct2D](direct2d-portal.md) , como los mapas de bits.</span><span class="sxs-lookup"><span data-stu-id="707e5-158">Drawing geometry realizations is similar to drawing other [Direct2D](direct2d-portal.md) primitives, like bitmaps.</span></span> <span data-ttu-id="707e5-159">Para ello, llame al método [**DrawGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-drawgeometryrealization) y pásele el objeto de la realización de geometría que se va a dibujar y el pincel que se va a usar.</span><span class="sxs-lookup"><span data-stu-id="707e5-159">To do so, call the [**DrawGeometryRealization**](/windows/win32/api/d2d1_2/nf-d2d1_2-id2d1devicecontext1-drawgeometryrealization) method and pass it the geometry realization object to be drawn and the brush to use.</span></span> <span data-ttu-id="707e5-160">Como con otros métodos de dibujo de Direct2D, debe llamar a **DrawGeometryRealization** entre las llamadas a [**BeginDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-begindraw) y [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw).</span><span class="sxs-lookup"><span data-stu-id="707e5-160">As with other Direct2D drawing methods, you must call **DrawGeometryRealization** between calls to [**BeginDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-begindraw) and [**EndDraw**](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-enddraw).</span></span>

## <a name="scaling-geometry-realizations"></a><span data-ttu-id="707e5-161">Escalado de geometría</span><span class="sxs-lookup"><span data-stu-id="707e5-161">Scaling geometry realizations</span></span>

<span data-ttu-id="707e5-162">La realización de geometrías, al igual que otras primitivas de [Direct2D](direct2d-portal.md) , respetan la transformación establecida en el contexto del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="707e5-162">Geometry realizations, like other [Direct2D](direct2d-portal.md) primitives, respect the transform set on the device context.</span></span> <span data-ttu-id="707e5-163">Aunque las transformaciones de traslación y rotación no tienen ningún efecto en la calidad visual de realización de geometría, las transformaciones de escalado pueden generar artefactos visuales.</span><span class="sxs-lookup"><span data-stu-id="707e5-163">Although translation and rotation transforms have no effect on the visual quality of geometry realizations, scale transforms can produce visual artifacts.</span></span>

<span data-ttu-id="707e5-164">En concreto, si se aplica una escala suficientemente grande a cualquier geometría, se puede revelar la aproximación poligonal de las curvas verdaderas.</span><span class="sxs-lookup"><span data-stu-id="707e5-164">In particular, applying a large enough scale to any geometry realization can reveal the polygonal approximation of the true curves.</span></span> <span data-ttu-id="707e5-165">En la imagen siguiente se muestra un par de realización de geometría elíptica (relleno y trazo) que se ha escalado verticalmente.</span><span class="sxs-lookup"><span data-stu-id="707e5-165">The image here shows a pair of elliptical geometry realizations (fill and stroke) that have been scaled up too far.</span></span> <span data-ttu-id="707e5-166">Los artefactos de alisado de curva son visibles.</span><span class="sxs-lookup"><span data-stu-id="707e5-166">Curve-flattening artifacts are visible.</span></span>

![se lleva a cabo un par de geometría elíptica (relleno y trazo) que se ha escalado verticalmente.](images/zoomed-in.png)

<span data-ttu-id="707e5-169">Las aplicaciones que son sensibles a la calidad visual deben tomar medidas para asegurarse de que esto no suceda.</span><span class="sxs-lookup"><span data-stu-id="707e5-169">Apps that are sensitive to visual quality should take measures to ensure this does not happen.</span></span> <span data-ttu-id="707e5-170">La forma de controlar el escalado depende de las necesidades de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="707e5-170">How you handle scaling depends on the needs of your app.</span></span> <span data-ttu-id="707e5-171">A continuación se muestran varios enfoques recomendados para varios tipos diferentes de aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="707e5-171">Following are several recommended approaches for several different types of app.</span></span>

### <a name="using-geometry-realizations-in-apps-that-do-not-scale"></a><span data-ttu-id="707e5-172">Uso de la realización de geometría en aplicaciones que no se escalan</span><span class="sxs-lookup"><span data-stu-id="707e5-172">Using geometry realizations in apps that do not scale</span></span>

<span data-ttu-id="707e5-173">Si la aplicación no realiza ningún ajuste de escala en el rendimiento de la geometría, es seguro crear la realización solo una vez, mediante una única tolerancia de acoplamiento.</span><span class="sxs-lookup"><span data-stu-id="707e5-173">If your app does not perform any scaling on the geometry realizations, then it is safe to create the realizations only once, using a single flattening tolerance.</span></span> <span data-ttu-id="707e5-174">(Las transformaciones que no son de escala no afectan a la calidad visual de realización de geometría representada). Utilice la función [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) para calcular la tolerancia de aplanamiento adecuada para el PPP:</span><span class="sxs-lookup"><span data-stu-id="707e5-174">(Non-scaling transforms do not affect the visual quality of rendered geometry realizations.) Use the [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) function to calculate the appropriate flattening tolerance for the DPI:</span></span>


```C++
    float dpiX, dpiY;
    deviceContext->GetDpi(&dpiX, &dpiY);

    float flatteningTolerance = D2D1::ComputeFlatteningTolerance(
        D2D1::Matrix3x2F::Identity(),   // apply no additional scaling transform
        dpiX,                           // horizontal DPI
        dpiY                            // vertical DPI
        );
```



### <a name="using-geometry-realizations-in-apps-that-scale-by-a-small-amount"></a><span data-ttu-id="707e5-175">Uso de geometría en aplicaciones que se escalan en una cantidad pequeña</span><span class="sxs-lookup"><span data-stu-id="707e5-175">Using geometry realizations in apps that scale by a small amount</span></span>

<span data-ttu-id="707e5-176">Si la aplicación puede escalar una medida de geometría solo en una cantidad pequeña (por ejemplo, hasta el 2x o el 3x), puede ser adecuado simplemente crear el objeto Geometry una vez, en una tolerancia de acoplamiento proporcionalmente inferior a la predeterminada.</span><span class="sxs-lookup"><span data-stu-id="707e5-176">If your app can scale a geometry realization up by only a small amount (for example, up to 2x or 3x), then it may be appropriate simply to create the geometry realization once, at a proportionally lower flattening tolerance than the default.</span></span> <span data-ttu-id="707e5-177">Esto crea una realización de mayor fidelidad que se puede escalar considerablemente antes de incurrir en artefactos de escalado. la desventaja es que dibujar la realización de la mayor fidelidad requiere más trabajo.</span><span class="sxs-lookup"><span data-stu-id="707e5-177">This creates a higher-fidelity realization that can be scaled up significantly before incurring scaling artifacts; the trade-off is that drawing the higher-fidelity realization requires more work.</span></span>

<span data-ttu-id="707e5-178">Por ejemplo, supongamos que sabe que la aplicación no escalará nunca una realización de geometría superior al 2x.</span><span class="sxs-lookup"><span data-stu-id="707e5-178">For example, suppose you know that your app will never scale a geometry realization by more than 2x.</span></span> <span data-ttu-id="707e5-179">La aplicación puede crear la realización de la geometría mediante una tolerancia de acoplamiento que sea la mitad del valor predeterminado y simplemente escale la realización según sea necesario, hasta el doble.</span><span class="sxs-lookup"><span data-stu-id="707e5-179">Your app can create the geometry realization using a flattening tolerance that’s half the default value and simply scale the realization as needed, up to 2x.</span></span> <span data-ttu-id="707e5-180">Use la función [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) para calcular la tolerancia de aplanamiento adecuada pasando 2,0 como parámetro *maxZoomFactor* :</span><span class="sxs-lookup"><span data-stu-id="707e5-180">Use the [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) function to calculate the appropriate flattening tolerance by passing 2.0 as the *maxZoomFactor* parameter:</span></span>


```C++
    float dpiX, dpiY;
    deviceContext->GetDpi(&dpiX, &dpiY);
    
    float flatteningTolerance = D2D1::ComputeFlatteningTolerance(
        D2D1::Matrix3x2F::Identity(),   // apply no additional scaling transform
        dpiX,                           // horizontal DPI
        dpiY,                           // vertical DPI
        2.0f                            // realization can be scaled by an additional 2x
        );
```



### <a name="using-geometry-realizations-in-apps-that-scale-by-a-large-amount"></a><span data-ttu-id="707e5-181">Uso de geometría en aplicaciones que se escalan en gran medida</span><span class="sxs-lookup"><span data-stu-id="707e5-181">Using geometry realizations in apps that scale by a large amount</span></span>

<span data-ttu-id="707e5-182">Si la aplicación puede escalar o reducir verticalmente una geometría de gran cantidad (por ejemplo, 10 veces o más), el control de escalado de forma adecuada es más complicado.</span><span class="sxs-lookup"><span data-stu-id="707e5-182">If your app can scale a geometry realization up or down by large amounts (for example, by 10x or more), then handling scaling appropriately is more complicated.</span></span>

<span data-ttu-id="707e5-183">Para la mayoría de estas aplicaciones, el enfoque recomendado consiste en volver a crear el objeto Geometry en las tolerancias de acoplamiento progresivamente inferiores a medida que la escena se escale verticalmente, con el fin de mantener la fidelidad visual y evitar el escalado de los artefactos.</span><span class="sxs-lookup"><span data-stu-id="707e5-183">For most of these apps, the recommended approach is to recreate the geometry realization at progressively lower flattening tolerances as the scene is scaled up, in order to maintain visual fidelity and avoid scaling artifacts.</span></span> <span data-ttu-id="707e5-184">Del mismo modo, a medida que la escena se reduce verticalmente, la aplicación debe volver a crear la geometría con tolerancias de acoplamiento progresivamente superior, con el fin de evitar la representación de los detalles que no son visibles.</span><span class="sxs-lookup"><span data-stu-id="707e5-184">Similarly, as the scene is scaled down, the app should recreate the geometry realizations at progressively higher flattening tolerances, in order to avoid wastefully rendering details that aren’t visible.</span></span> <span data-ttu-id="707e5-185">La aplicación no debe volver a crear la geometría cada vez que cambie la escala, ya que esto impide el almacenamiento en caché del trabajo de teselación.</span><span class="sxs-lookup"><span data-stu-id="707e5-185">The app shouldn’t recreate the geometry realizations every time the scale changes, because doing so defeats the purpose of caching the tessellation work.</span></span> <span data-ttu-id="707e5-186">En su lugar, la aplicación debe volver a crear la geometría con menos frecuencia: por ejemplo, después de cada 2x aumento o disminución de la escala.</span><span class="sxs-lookup"><span data-stu-id="707e5-186">Instead, the app should recreate the geometry realizations less frequently: for example, after every 2x increase or decrease in scale.</span></span>

<span data-ttu-id="707e5-187">Cada vez que cambia el escalado de una aplicación en respuesta a la interacción del usuario, la aplicación podría comparar la nueva escala con la escala en la que se creó la geometría por última vez (almacenada, por ejemplo, en un miembro **m \_ lastScale** ).</span><span class="sxs-lookup"><span data-stu-id="707e5-187">Each time the scale changes in an app in response to user interaction, the app could compare the new scale against the scale at which the geometry realizations were last created (stored, for example, in an **m\_lastScale** member).</span></span> <span data-ttu-id="707e5-188">Si los dos valores son cercanos (en este caso, dentro de un factor de 2), no se realiza ninguna otra acción.</span><span class="sxs-lookup"><span data-stu-id="707e5-188">If the two values are close (in this case, within a factor of 2), then no further action is taken.</span></span> <span data-ttu-id="707e5-189">Pero si los dos valores no se cierran, se vuelven a crear las geometrías.</span><span class="sxs-lookup"><span data-stu-id="707e5-189">But if the two values are not close, then the geometry realizations are re-created.</span></span> <span data-ttu-id="707e5-190">La función [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) se usa para calcular una tolerancia de acoplamiento adecuada para la nueva escala y **m \_ lastScale** se actualiza a la nueva escala.</span><span class="sxs-lookup"><span data-stu-id="707e5-190">The [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)) function is used to compute a flattening tolerance appropriate for the new scale, and **m\_lastScale** is updated to the new scale.</span></span>

<span data-ttu-id="707e5-191">Además, la aplicación siempre crea la realización con una tolerancia menor que la que se utilizaría normalmente para la nueva escala, pasando un valor de 2 como el parámetro *maxZoomFactor* a [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="707e5-191">In addition, the app always creates realizations using a smaller tolerance than what would normally be used for the new scale, by passing a value of 2 as the *maxZoomFactor* parameter to [**ComputeFlatteningTolerance**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85)).</span></span> <span data-ttu-id="707e5-192">Esto permite que la nueva geometría se escale verticalmente mediante un factor adicional de 2 sin incurrir en artefactos de escalado.</span><span class="sxs-lookup"><span data-stu-id="707e5-192">This allows the new geometry realizations to be scaled up by an additional factor of 2 without incurring scaling artifacts.</span></span>

> [!Note]  
> <span data-ttu-id="707e5-193">El enfoque descrito aquí puede no ser adecuado para todas las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="707e5-193">The approach described here may not be appropriate for all apps.</span></span> <span data-ttu-id="707e5-194">Por ejemplo, si la aplicación permite que la escena se escale con factores muy grandes de manera muy rápida (por ejemplo, si contiene un control deslizante "zoom" que se puede pasar del 100% al 1 millón% en el intervalo de unos cuantos fotogramas), este enfoque puede provocar un exceso de trabajo mediante la recreación de la geometría de cada fotograma.</span><span class="sxs-lookup"><span data-stu-id="707e5-194">For example, if your app allows the scene to be scaled by very large factors very quickly (for example, if it contains a “zoom” slider that can be moved from 100% to 1,000,000% in the span of a few frames) then this approach may result in excess work by recreating the geometry realizations every frame.</span></span> <span data-ttu-id="707e5-195">Un enfoque alternativo consiste en volver a crear el objeto Geometry solo después de que se haya completado cada manipulación de la escala de la escena (por ejemplo, después de que el usuario haya completado un gesto de pinch).</span><span class="sxs-lookup"><span data-stu-id="707e5-195">An alternative approach is to recreate the geometry realizations only after each manipulation of the scene’s scale has been completed (for example, after the user has completed a pinch gesture).</span></span>

 

## <a name="related-topics"></a><span data-ttu-id="707e5-196">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="707e5-196">Related topics</span></span>

[<span data-ttu-id="707e5-197">Información general sobre las geometrías</span><span class="sxs-lookup"><span data-stu-id="707e5-197">Geometries Overview</span></span>](direct2d-geometries-overview.md)

[<span data-ttu-id="707e5-198">Mejorar el rendimiento de las aplicaciones de Direct2D</span><span class="sxs-lookup"><span data-stu-id="707e5-198">Improving the performance of Direct2D apps</span></span>](improving-direct2d-performance.md)

[<span data-ttu-id="707e5-199">Directrices generales para la representación de contenido estático complejo</span><span class="sxs-lookup"><span data-stu-id="707e5-199">General guidelines for rendering complex static content</span></span>](improving-direct2d-performance.md)

[<span data-ttu-id="707e5-200">**ID2D1DeviceContext1**</span><span class="sxs-lookup"><span data-stu-id="707e5-200">**ID2D1DeviceContext1**</span></span>](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1devicecontext1)

[<span data-ttu-id="707e5-201">**ID2D1GeometryRealization**</span><span class="sxs-lookup"><span data-stu-id="707e5-201">**ID2D1GeometryRealization**</span></span>](/windows/win32/api/d2d1_2/nn-d2d1_2-id2d1geometryrealization)

<span data-ttu-id="707e5-202">[**ComputeFlatteningTolerance función)**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85))</span><span class="sxs-lookup"><span data-stu-id="707e5-202">[**ComputeFlatteningTolerance function**](/previous-versions/windows/desktop/legacy/dn280327(v=vs.85))</span></span>