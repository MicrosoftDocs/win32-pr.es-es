---
description: Las funciones SetNamedSecurityInfo y SetSecurityInfo admiten la propagación automática de entradas de control de acceso (ACE) heredables.
ms.assetid: 0aa49b9b-13e3-4ef9-921d-ea47a013e5a1
title: Propagación automática de ACE heredables
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8fab03c73a1c926468e46a0d0492e512dab42af6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104279638"
---
# <a name="automatic-propagation-of-inheritable-aces"></a><span data-ttu-id="c087b-103">Propagación automática de ACE heredables</span><span class="sxs-lookup"><span data-stu-id="c087b-103">Automatic Propagation of Inheritable ACEs</span></span>

<span data-ttu-id="c087b-104">Las funciones [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) y [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) admiten la propagación automática de entradas de [*control de acceso*](/windows/desktop/SecGloss/a-gly) (ACE) heredables.</span><span class="sxs-lookup"><span data-stu-id="c087b-104">The [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) and [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) functions support automatic propagation of inheritable [*access control entries*](/windows/desktop/SecGloss/a-gly) (ACEs).</span></span> <span data-ttu-id="c087b-105">Por ejemplo, si usa estas funciones para agregar una ACE heredable a un directorio de NTFS, el sistema aplica la ACE según corresponda a las [*listas de control de acceso*](/windows/desktop/SecGloss/a-gly) (ACL) de cualquier subdirectorio o archivo existente.</span><span class="sxs-lookup"><span data-stu-id="c087b-105">For example, if you use these functions to add an inheritable ACE to a directory in an NTFS, the system applies the ACE as appropriate to the [*access control lists*](/windows/desktop/SecGloss/a-gly) (ACLs) of any existing subdirectories or files.</span></span>

<span data-ttu-id="c087b-106">Las ACE aplicadas directamente tienen prioridad sobre las ACE heredadas.</span><span class="sxs-lookup"><span data-stu-id="c087b-106">Directly applied ACEs have precedence over inherited ACEs.</span></span> <span data-ttu-id="c087b-107">El sistema implementa esta precedencia colocando directamente las ACE aplicadas antes de las ACE heredadas en una [*lista de control de acceso discrecional*](/windows/desktop/SecGloss/d-gly) (DACL).</span><span class="sxs-lookup"><span data-stu-id="c087b-107">The system implements this precedence by placing directly applied ACEs ahead of inherited ACEs in a [*discretionary access control list*](/windows/desktop/SecGloss/d-gly) (DACL).</span></span> <span data-ttu-id="c087b-108">Cuando se llama a las funciones [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) y [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) para establecer la información de seguridad de un objeto, el sistema impone el modelo de herencia actual en las ACL de todos los objetos de la jerarquía por debajo del objeto de destino.</span><span class="sxs-lookup"><span data-stu-id="c087b-108">When you call the [**SetNamedSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setnamedsecurityinfoa) and [**SetSecurityInfo**](/windows/desktop/api/Aclapi/nf-aclapi-setsecurityinfo) functions to set the security information of an object, the system imposes the current inheritance model on the ACLs of all objects in the hierarchy below the target object.</span></span> <span data-ttu-id="c087b-109">En el caso de los objetos que se han convertido en el modelo de herencia actual, los bits heredados automáticos \_ \_ de DACL de se y de SACL automática \_ \_ \_ \_ se establecen en el campo de control del [*descriptor de seguridad*](/windows/desktop/SecGloss/s-gly) del objeto.</span><span class="sxs-lookup"><span data-stu-id="c087b-109">For objects that have been converted to the current inheritance model, the SE\_DACL\_AUTO\_INHERITED and SE\_SACL\_AUTO\_INHERITED bits are set in the control field of the [*security descriptor*](/windows/desktop/SecGloss/s-gly) of the object.</span></span>

<span data-ttu-id="c087b-110">Cuando se crea un nuevo descriptor de seguridad que refleja el modelo de herencia actual, se toma cuidado de no cambiar la semántica del descriptor de seguridad.</span><span class="sxs-lookup"><span data-stu-id="c087b-110">When you build a new security descriptor that reflects the current inheritance model, care is taken not to change the semantics of the security descriptor.</span></span> <span data-ttu-id="c087b-111">Como tal, las ACE de permitir y denegar nunca se mueven en relación entre sí.</span><span class="sxs-lookup"><span data-stu-id="c087b-111">As such, allow and deny ACEs are never moved in relation to one another.</span></span> <span data-ttu-id="c087b-112">Si se necesita este movimiento (por ejemplo, para colocar todas las ACE no heredadas al principio de una ACL), la ACL se marca como protegida para evitar el cambio semántico.</span><span class="sxs-lookup"><span data-stu-id="c087b-112">If such movement is needed (for instance to place all noninherited ACEs at the front of an ACL), the ACL is marked as protected to prevent the semantic change.</span></span>

<span data-ttu-id="c087b-113">El sistema utiliza las siguientes reglas al propagar las ACE heredadas a objetos secundarios:</span><span class="sxs-lookup"><span data-stu-id="c087b-113">The system uses the following rules when propagating inherited ACEs to child objects:</span></span>

-   <span data-ttu-id="c087b-114">Si un objeto secundario sin DACL hereda una ACE, el resultado es un objeto secundario con una DACL que solo contiene la ACE heredada.</span><span class="sxs-lookup"><span data-stu-id="c087b-114">If a child object with no DACL inherits an ACE, the result is a child object with a DACL that contains only the inherited ACE.</span></span>
-   <span data-ttu-id="c087b-115">Si un objeto secundario con una DACL vacía hereda una ACE, el resultado es un objeto secundario con una DACL que solo contiene la ACE heredada.</span><span class="sxs-lookup"><span data-stu-id="c087b-115">If a child object with an empty DACL inherits an ACE, the result is a child object with a DACL that contains only the inherited ACE.</span></span>
-   <span data-ttu-id="c087b-116">Si quita una ACE heredable de un objeto primario, la herencia automática quita todas las copias de la ACE que heredaron los objetos secundarios.</span><span class="sxs-lookup"><span data-stu-id="c087b-116">If you remove an inheritable ACE from a parent object, automatic inheritance removes any copies of the ACE that were inherited by child objects.</span></span>
-   <span data-ttu-id="c087b-117">Si la herencia automática da como resultado la eliminación de todas las ACE de la DACL de un objeto secundario, el objeto secundario tiene una DACL vacía en lugar de ninguna DACL.</span><span class="sxs-lookup"><span data-stu-id="c087b-117">If automatic inheritance results in the removal of all ACEs from the DACL of a child object, the child object has an empty DACL rather than no DACL.</span></span>

<span data-ttu-id="c087b-118">Estas reglas pueden tener el resultado inesperado de la conversión de un objeto sin DACL a un objeto con una DACL vacía.</span><span class="sxs-lookup"><span data-stu-id="c087b-118">These rules can have the unexpected result of converting an object with no DACL to an object with an empty DACL.</span></span> <span data-ttu-id="c087b-119">Un objeto sin DACL permite el acceso total, pero un objeto con una DACL vacía no permite ningún acceso.</span><span class="sxs-lookup"><span data-stu-id="c087b-119">An object with no DACL allows full access, but an object with an empty DACL allows no access.</span></span> <span data-ttu-id="c087b-120">Como ejemplo de cómo estas reglas pueden crear una DACL vacía, supongamos que agrega una ACE heredable al objeto raíz de un árbol de objetos.</span><span class="sxs-lookup"><span data-stu-id="c087b-120">As an example of how these rules can create an empty DACL, suppose you add an inheritable ACE to the root object of a tree of objects.</span></span> <span data-ttu-id="c087b-121">La herencia automática propaga la ACE heredable a todos los objetos del árbol.</span><span class="sxs-lookup"><span data-stu-id="c087b-121">Automatic inheritance propagates the inheritable ACE to all the objects in the tree.</span></span> <span data-ttu-id="c087b-122">Los objetos secundarios que se iniciaron sin DACL ahora tienen una DACL con la ACE heredada.</span><span class="sxs-lookup"><span data-stu-id="c087b-122">Child objects that started with no DACL now have a DACL with the inherited ACE.</span></span> <span data-ttu-id="c087b-123">Si quita la ACE heredable del objeto raíz, el sistema propaga automáticamente el cambio a los objetos secundarios.</span><span class="sxs-lookup"><span data-stu-id="c087b-123">If you remove the inheritable ACE from the root object, the system automatically propagates the change to the child objects.</span></span> <span data-ttu-id="c087b-124">Los objetos secundarios que se iniciaron sin DACL (que permite el acceso total) tienen ahora una DACL vacía (no se permite el acceso).</span><span class="sxs-lookup"><span data-stu-id="c087b-124">Child objects that started with no DACL (allowing full access) now have an empty DACL (allowing no access).</span></span>

<span data-ttu-id="c087b-125">Para asegurarse de que un objeto secundario sin DACL no se vea afectado por las ACE que se puedan heredar, establezca la \_ marca de DACL \_ protegida en el descriptor de seguridad del objeto.</span><span class="sxs-lookup"><span data-stu-id="c087b-125">To ensure that a child object with no DACL is not affected by inheritable ACEs, set the SE\_DACL\_PROTECTED flag in the security descriptor of the object.</span></span>

<span data-ttu-id="c087b-126">Para obtener información sobre cómo crear correctamente una DACL, vea [crear una DACL](/windows/desktop/SecBP/creating-a-dacl).</span><span class="sxs-lookup"><span data-stu-id="c087b-126">For information about how to properly create a DACL, see [Creating a DACL](/windows/desktop/SecBP/creating-a-dacl).</span></span>

 

 
