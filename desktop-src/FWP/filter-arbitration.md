---
title: Arbitraje de filtro
description: El arbitraje de filtros es la lógica integrada en la plataforma de filtrado de Windows (WFP) que se usa para determinar el modo en que los filtros interactúan entre sí al tomar decisiones de filtrado del tráfico de red.
ms.assetid: d097f307-113e-4dc3-ad59-ddfb85061583
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9fd7df778d1c24b7480de3321e7a1ec126d8e642
ms.sourcegitcommit: ebd3ce6908ff865f1ef66f2fc96769be0aad82e1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/19/2020
ms.locfileid: "103791404"
---
# <a name="filter-arbitration"></a><span data-ttu-id="a5a05-103">Arbitraje de filtro</span><span class="sxs-lookup"><span data-stu-id="a5a05-103">Filter Arbitration</span></span>

<span data-ttu-id="a5a05-104">El arbitraje de filtros es la lógica integrada en la plataforma de filtrado de Windows (WFP) que se usa para determinar el modo en que los filtros interactúan entre sí al tomar decisiones de filtrado del tráfico de red.</span><span class="sxs-lookup"><span data-stu-id="a5a05-104">Filter arbitration is the logic built into the Windows Filtering Platform (WFP) that is used to determine how filters interact with each other when making network traffic filtering decisions.</span></span>

## <a name="filter-arbitration-behaviors"></a><span data-ttu-id="a5a05-105">Comportamientos de arbitraje de filtro</span><span class="sxs-lookup"><span data-stu-id="a5a05-105">Filter Arbitration Behaviors</span></span>

<span data-ttu-id="a5a05-106">Los comportamientos siguientes caracterizan el sistema de arbitraje de filtros:</span><span class="sxs-lookup"><span data-stu-id="a5a05-106">The following behaviors characterize the filter arbitration system:</span></span>

-   <span data-ttu-id="a5a05-107">Se puede inspeccionar todo el tráfico.</span><span class="sxs-lookup"><span data-stu-id="a5a05-107">All traffic can be inspected.</span></span> <span data-ttu-id="a5a05-108">Ningún tráfico puede omitir los filtros en una capa determinada.</span><span class="sxs-lookup"><span data-stu-id="a5a05-108">No traffic can bypass filters at a given layer.</span></span>
-   <span data-ttu-id="a5a05-109">Un filtro de llamada puede bloquear el tráfico a través de una **veto** , incluso si un filtro de prioridad más alto lo ha permitido.</span><span class="sxs-lookup"><span data-stu-id="a5a05-109">Traffic can be blocked by a callout filter via a **Veto** even if a higher priority filter has permitted it.</span></span>
-   <span data-ttu-id="a5a05-110">Varios proveedores pueden inspeccionar el tráfico en la misma capa.</span><span class="sxs-lookup"><span data-stu-id="a5a05-110">Multiple providers can inspect traffic at the same layer.</span></span> <span data-ttu-id="a5a05-111">Por ejemplo, el Firewall seguido de los filtros del sistema de detección de intrusiones (IDS) o IPsec seguido de los filtros de calidad de servicio (QoS) puede examinar el tráfico en la misma capa.</span><span class="sxs-lookup"><span data-stu-id="a5a05-111">For example, firewall followed by intrusion-detection system (IDS) filters, or IPsec followed by Quality of Service (QoS) filters may all examine the traffic at the same layer.</span></span>

## <a name="filtering-model"></a><span data-ttu-id="a5a05-112">Modelo de filtrado</span><span class="sxs-lookup"><span data-stu-id="a5a05-112">Filtering Model</span></span>

<span data-ttu-id="a5a05-113">Cada capa de filtro se divide en subcapas ordenadas por prioridad (también denominada peso).</span><span class="sxs-lookup"><span data-stu-id="a5a05-113">Each filter layer is divided into sub-layers ordered by priority (also called weight).</span></span> <span data-ttu-id="a5a05-114">El tráfico de red atraviesa subcapas de la prioridad más alta a la prioridad más baja.</span><span class="sxs-lookup"><span data-stu-id="a5a05-114">Network traffic traverses sub-layers from the highest priority to the lowest priority.</span></span> <span data-ttu-id="a5a05-115">Los desarrolladores crean y administran subcapas mediante la API de WFP.</span><span class="sxs-lookup"><span data-stu-id="a5a05-115">Sub-layers are created and managed by the developers using the WFP API.</span></span>

<span data-ttu-id="a5a05-116">Dentro de cada subcapa, los filtros se ordenan por peso.</span><span class="sxs-lookup"><span data-stu-id="a5a05-116">Within each sub-layer, filters are ordered by weight.</span></span> <span data-ttu-id="a5a05-117">El tráfico de red se indica para los filtros coincidentes de mayor a menor peso.</span><span class="sxs-lookup"><span data-stu-id="a5a05-117">Network traffic is indicated to matching filters from highest weight to lowest weight.</span></span>

<span data-ttu-id="a5a05-118">El algoritmo de arbitraje de filtro se aplica a todas las subcapas dentro de una capa y la decisión de filtrado final se realiza una vez evaluadas todas las subcapas.</span><span class="sxs-lookup"><span data-stu-id="a5a05-118">The filter arbitration algorithm is applied to all sub-layers within a layer and the final filtering decision is made after all sub-layers have been evaluated.</span></span> <span data-ttu-id="a5a05-119">Esto proporciona varias funcionalidades de coincidencia.</span><span class="sxs-lookup"><span data-stu-id="a5a05-119">This provides for multiple matching capability.</span></span>

<span data-ttu-id="a5a05-120">Dentro de una subcapa, el arbitraje de filtro se realiza de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="a5a05-120">Within a sub-layer, filter arbitration is performed as follows:</span></span>

-   <span data-ttu-id="a5a05-121">Calcula la lista de filtros coincidentes ordenados por peso de mayor a menor.</span><span class="sxs-lookup"><span data-stu-id="a5a05-121">Compute the list of matching filters ordered by weight from highest to lowest.</span></span>
-   <span data-ttu-id="a5a05-122">Evalúe los filtros coincidentes en orden hasta que se devuelva un "permiso" o un "bloque" (los filtros también pueden devolver "Continue") o hasta que se agote la lista.</span><span class="sxs-lookup"><span data-stu-id="a5a05-122">Evaluate matching filters in order until a "Permit" or a "Block" is returned (filters can also return "Continue") or until the list is exhausted.</span></span>
-   <span data-ttu-id="a5a05-123">Omitir los filtros restantes y devolver la acción del último filtro evaluado.</span><span class="sxs-lookup"><span data-stu-id="a5a05-123">Skip the remaining filters and return the action from the last evaluated filter.</span></span>

<span data-ttu-id="a5a05-124">Dentro de una capa, el arbitraje de filtro se realiza de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="a5a05-124">Within a layer, filter arbitration is performed as follows:</span></span>

-   <span data-ttu-id="a5a05-125">Realice el arbitraje de filtros en cada subcapa en orden, desde la prioridad más alta a la más baja.</span><span class="sxs-lookup"><span data-stu-id="a5a05-125">Perform filter arbitration at every sub-layer in order from highest priority to lowest priority.</span></span>
-   <span data-ttu-id="a5a05-126">Evalúe todas las subcapas incluso si un subnivel de mayor prioridad ha decidido bloquear el tráfico.</span><span class="sxs-lookup"><span data-stu-id="a5a05-126">Evaluate all sub-layers even if a higher priority sub-layer has decided to block the traffic.</span></span>
-   <span data-ttu-id="a5a05-127">Devuelva la acción resultante en función de las reglas de directiva descritas en la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="a5a05-127">Return the resulting action based on the policy rules described in the following section.</span></span>

<span data-ttu-id="a5a05-128">En el diagrama siguiente se muestra una configuración de subcapa de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="a5a05-128">The diagram below illustrates a sample sub-layer configuration.</span></span> <span data-ttu-id="a5a05-129">Las cajas exteriores representan capas.</span><span class="sxs-lookup"><span data-stu-id="a5a05-129">The outer boxes represent layers.</span></span> <span data-ttu-id="a5a05-130">Las casillas internas representan subcapas que contienen filtros.</span><span class="sxs-lookup"><span data-stu-id="a5a05-130">The inner boxes represent sub-layers that contain filters.</span></span> <span data-ttu-id="a5a05-131">El carácter comodín ( \* ) en un filtro significa que todo el tráfico coincide con el filtro.</span><span class="sxs-lookup"><span data-stu-id="a5a05-131">The wildcard (\*) in a filter means all traffic matches the filter.</span></span>

![configuración de subcapa de ejemplo](images/fwp-sub-config2.png)

<span data-ttu-id="a5a05-133">La única forma de omitir un filtro es si un filtro de peso superior ha permitido o bloqueado el tráfico dentro de la misma subcapa.</span><span class="sxs-lookup"><span data-stu-id="a5a05-133">The only way for a filter to be bypassed is if a higher weight filter has permitted or blocked the traffic within the same sub-layer.</span></span> <span data-ttu-id="a5a05-134">Por el contrario, una manera de asegurarse de que un filtro siempre ve todo el tráfico dentro de una capa es agregar una subcapa que contenga un solo filtro que coincida con todo el tráfico.</span><span class="sxs-lookup"><span data-stu-id="a5a05-134">Conversely, one way of ensuring that a filter always sees all traffic within a layer is to add a sub-layer that contains a single filter that matches all traffic.</span></span>

## <a name="configurable-override-policy"></a><span data-ttu-id="a5a05-135">Directiva de invalidación configurable</span><span class="sxs-lookup"><span data-stu-id="a5a05-135">Configurable Override Policy</span></span>

<span data-ttu-id="a5a05-136">Las reglas que se describen a continuación rigen las decisiones de arbitraje dentro de una capa.</span><span class="sxs-lookup"><span data-stu-id="a5a05-136">The rules described below govern the arbitration decisions within a layer.</span></span> <span data-ttu-id="a5a05-137">El motor de filtro utiliza estas reglas para decidir cuál de las acciones de subcapa se aplica al tráfico de red.</span><span class="sxs-lookup"><span data-stu-id="a5a05-137">These rules are used by the filter engine to decide which one of the sub-layer actions is applied to the network traffic.</span></span>

<span data-ttu-id="a5a05-138">La Directiva básica es la siguiente.</span><span class="sxs-lookup"><span data-stu-id="a5a05-138">The basic policy is as follows.</span></span>

-   <span data-ttu-id="a5a05-139">Las acciones se evalúan en orden de prioridad de las subcapas de prioridad más alta a la prioridad más baja.</span><span class="sxs-lookup"><span data-stu-id="a5a05-139">Actions are evaluated in priority order of sub-layers from highest priority to lowest priority.</span></span>
-   <span data-ttu-id="a5a05-140">"Block" invalida "Permit".</span><span class="sxs-lookup"><span data-stu-id="a5a05-140">"Block" overrides "Permit".</span></span>
-   <span data-ttu-id="a5a05-141">"Block" es final (no se puede invalidar) y detiene la evaluación.</span><span class="sxs-lookup"><span data-stu-id="a5a05-141">"Block" is final (cannot be overridden) and stops the evaluation.</span></span> <span data-ttu-id="a5a05-142">El paquete se descarta.</span><span class="sxs-lookup"><span data-stu-id="a5a05-142">The packet is discarded.</span></span>

<span data-ttu-id="a5a05-143">La Directiva básica no admite el escenario de una excepción no reemplazada por un firewall.</span><span class="sxs-lookup"><span data-stu-id="a5a05-143">The basic policy does not support the scenario of an exception not overridden by a firewall.</span></span> <span data-ttu-id="a5a05-144">Algunos ejemplos típicos de este tipo de escenario son:</span><span class="sxs-lookup"><span data-stu-id="a5a05-144">Typical examples of this type of scenario are:</span></span>

-   <span data-ttu-id="a5a05-145">Puerto de administración remota necesario para abrirse incluso en presencia de un firewall de terceros.</span><span class="sxs-lookup"><span data-stu-id="a5a05-145">Remote administration port required to be opened even in the presence of a third-party firewall.</span></span>
-   <span data-ttu-id="a5a05-146">Componentes que requieren la apertura de puertos para que funcionen (por ejemplo, Universal Plug and Play UPnP).</span><span class="sxs-lookup"><span data-stu-id="a5a05-146">Components that require ports to be opened in order to function (for example, Universal Plug and Play UPnP).</span></span> <span data-ttu-id="a5a05-147">Si el administrador ha habilitado explícitamente el componente, el Firewall no debe bloquear el tráfico de forma silenciosa.</span><span class="sxs-lookup"><span data-stu-id="a5a05-147">If the administrator has explicitly enabled the component, the firewall should not silently block the traffic.</span></span>

<span data-ttu-id="a5a05-148">Con el fin de admitir los escenarios anteriores, una decisión de filtrado debe ser más difícil de reemplazar que otra decisión de filtrado mediante la administración del permiso de invalidación de acción.</span><span class="sxs-lookup"><span data-stu-id="a5a05-148">In order to support the above scenarios, a filtering decision must be made more difficult to override than another filtering decision by managing the action override permission.</span></span> <span data-ttu-id="a5a05-149">Este permiso se implementa como el marcador de escritura de la **\_ \_ acción \_ derecha FWPS** y se establece por filtro.</span><span class="sxs-lookup"><span data-stu-id="a5a05-149">This permission is implemented as the **FWPS\_RIGHT\_ACTION\_WRITE** flag and it is set on a per-filter basis.</span></span>

<span data-ttu-id="a5a05-150">El algoritmo de evaluación mantiene la acción actual ("permitir" o "bloque") junto con la marca de escritura de la **\_ \_ acción \_ derecha FWPS** .</span><span class="sxs-lookup"><span data-stu-id="a5a05-150">The evaluation algorithm maintains the current action ("Permit" or "Block") along with the **FWPS\_RIGHT\_ACTION\_WRITE** flag.</span></span> <span data-ttu-id="a5a05-151">La marca controla si se permite que una subcapa de prioridad inferior invalide la acción.</span><span class="sxs-lookup"><span data-stu-id="a5a05-151">The flag controls whether a lower priority sub-layer is allowed to override the action.</span></span> <span data-ttu-id="a5a05-152">Al establecer o restablecer la marca **de \_ \_ \_ escritura de la acción de FWPS derecha** en la estructura [FWPS de \_ clasificación \_ OUT0](/windows/win32/api/fwpstypes/ns-fwpstypes-fwps_classify_out0) , un proveedor rige cómo se pueden o no se pueden invalidar las acciones.</span><span class="sxs-lookup"><span data-stu-id="a5a05-152">By setting or resetting the **FWPS\_RIGHT\_ACTION\_WRITE** flag in the [FWPS\_CLASSIFY\_OUT0](/windows/win32/api/fwpstypes/ns-fwpstypes-fwps_classify_out0) structure, a provider governs how actions can or cannot be overridden.</span></span> <span data-ttu-id="a5a05-153">Si se establece la marca, indica que la acción se puede invalidar.</span><span class="sxs-lookup"><span data-stu-id="a5a05-153">If the flag is set, it indicates that the action can be overridden.</span></span> <span data-ttu-id="a5a05-154">Si la marca está ausente, la acción no se puede invalidar.</span><span class="sxs-lookup"><span data-stu-id="a5a05-154">If the flag is absent, the action cannot be overridden.</span></span>



| <span data-ttu-id="a5a05-155">Acción</span><span class="sxs-lookup"><span data-stu-id="a5a05-155">Action</span></span> | <span data-ttu-id="a5a05-156">Permitir invalidación ( \_ se establece la escritura de acción derecha de FWPS \_ \_ )</span><span class="sxs-lookup"><span data-stu-id="a5a05-156">Allow override (FWPS\_RIGHT\_ACTION\_WRITE is set)</span></span> | <span data-ttu-id="a5a05-157">Descripción</span><span class="sxs-lookup"><span data-stu-id="a5a05-157">Description</span></span>                                                                                                          |
|--------|----------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a5a05-158">Permitir</span><span class="sxs-lookup"><span data-stu-id="a5a05-158">Permit</span></span> | <span data-ttu-id="a5a05-159">Sí</span><span class="sxs-lookup"><span data-stu-id="a5a05-159">Yes</span></span>                                                | <span data-ttu-id="a5a05-160">El tráfico se puede bloquear en otra subcapa.</span><span class="sxs-lookup"><span data-stu-id="a5a05-160">The traffic can be blocked at another sub-layer.</span></span> <span data-ttu-id="a5a05-161">Esto se denomina una concesión de software.</span><span class="sxs-lookup"><span data-stu-id="a5a05-161">This is called a soft permit.</span></span><br/>                            |
| <span data-ttu-id="a5a05-162">Permitir</span><span class="sxs-lookup"><span data-stu-id="a5a05-162">Permit</span></span> | <span data-ttu-id="a5a05-163">No</span><span class="sxs-lookup"><span data-stu-id="a5a05-163">No</span></span>                                                 | <span data-ttu-id="a5a05-164">El tráfico solo se puede bloquear en otra subcapa mediante una **veto** de llamada.</span><span class="sxs-lookup"><span data-stu-id="a5a05-164">The traffic can be blocked at another sub-layer only by a callout **Veto**.</span></span> <span data-ttu-id="a5a05-165">Esto se conoce como permiso duro.</span><span class="sxs-lookup"><span data-stu-id="a5a05-165">This is called a hard permit.</span></span><br/> |
| <span data-ttu-id="a5a05-166">Bloquear</span><span class="sxs-lookup"><span data-stu-id="a5a05-166">Block</span></span>  | <span data-ttu-id="a5a05-167">Sí</span><span class="sxs-lookup"><span data-stu-id="a5a05-167">Yes</span></span>                                                | <span data-ttu-id="a5a05-168">El tráfico se puede permitir en otra subcapa.</span><span class="sxs-lookup"><span data-stu-id="a5a05-168">The traffic can be permitted at another sub-layer.</span></span> <span data-ttu-id="a5a05-169">Esto se denomina bloque flexible.</span><span class="sxs-lookup"><span data-stu-id="a5a05-169">This is called a soft block.</span></span><br/>                           |
| <span data-ttu-id="a5a05-170">Bloquear</span><span class="sxs-lookup"><span data-stu-id="a5a05-170">Block</span></span>  | <span data-ttu-id="a5a05-171">No</span><span class="sxs-lookup"><span data-stu-id="a5a05-171">No</span></span>                                                 | <span data-ttu-id="a5a05-172">No se puede permitir el tráfico en otra subcapa.</span><span class="sxs-lookup"><span data-stu-id="a5a05-172">The traffic cannot be permitted at another sub-layer.</span></span> <span data-ttu-id="a5a05-173">Esto se denomina bloque duro.</span><span class="sxs-lookup"><span data-stu-id="a5a05-173">This is called a hard block.</span></span><br/>                        |



 

<span data-ttu-id="a5a05-174">La acción de filtrado se puede establecer estableciendo el miembro de **tipo** en la [**estructura FWPM \_ ACTION0**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_action0) en el **\_ \_ bloque de acción de FWP** o en el **\_ \_ permiso de acción de FWP**.</span><span class="sxs-lookup"><span data-stu-id="a5a05-174">The filter action can be set by setting the **type** member in the structure [**FWPM\_ACTION0**](/windows/desktop/api/Fwpmtypes/ns-fwpmtypes-fwpm_action0) to either **FWP\_ACTION\_BLOCK** or **FWP\_ACTION\_PERMIT**.</span></span> <span data-ttu-id="a5a05-175">Junto con el tipo de acción, los filtros también exponen la marca FWPM de la marca de filtrado de marca **\_ \_ \_ \_ \_ derecha**.</span><span class="sxs-lookup"><span data-stu-id="a5a05-175">Along with the action type, a filter also exposes the flag **FWPM\_FILTER\_FLAG\_CLEAR\_ACTION\_RIGHT**.</span></span> <span data-ttu-id="a5a05-176">Si esta marca está desactivada, el tipo de acción es difícil y no se puede invalidar, excepto cuando una **veto** invalida un permiso duro, como se explica más adelante en, de lo contrario, se puede invalidar con una acción de prioridad alta.</span><span class="sxs-lookup"><span data-stu-id="a5a05-176">If this flag is cleared, then the action type is hard and cannot be overridden except when a hard permit is overridden by a **Veto** as explained later on, else it is soft which can be overridden by high priority action.</span></span>

<span data-ttu-id="a5a05-177">En la tabla siguiente se muestra el comportamiento predeterminado de las acciones de filtrado y de llamada.</span><span class="sxs-lookup"><span data-stu-id="a5a05-177">The following table lists the default behavior for filter and callout actions.</span></span>

| <span data-ttu-id="a5a05-178">Acción</span><span class="sxs-lookup"><span data-stu-id="a5a05-178">Action</span></span>         | <span data-ttu-id="a5a05-179">Comportamiento predeterminado</span><span class="sxs-lookup"><span data-stu-id="a5a05-179">Default Behavior</span></span> |
|----------------|------------------|
| <span data-ttu-id="a5a05-180">Permitir filtro</span><span class="sxs-lookup"><span data-stu-id="a5a05-180">Filter permit</span></span>  | <span data-ttu-id="a5a05-181">Concesión de software</span><span class="sxs-lookup"><span data-stu-id="a5a05-181">Soft permit</span></span>      |
| <span data-ttu-id="a5a05-182">Permitir llamada</span><span class="sxs-lookup"><span data-stu-id="a5a05-182">Callout permit</span></span> | <span data-ttu-id="a5a05-183">Concesión de software</span><span class="sxs-lookup"><span data-stu-id="a5a05-183">Soft permit</span></span>      |
| <span data-ttu-id="a5a05-184">Bloque de filtro</span><span class="sxs-lookup"><span data-stu-id="a5a05-184">Filter block</span></span>   | <span data-ttu-id="a5a05-185">Bloque duro</span><span class="sxs-lookup"><span data-stu-id="a5a05-185">Hard block</span></span>       |
| <span data-ttu-id="a5a05-186">Bloque de llamada</span><span class="sxs-lookup"><span data-stu-id="a5a05-186">Callout block</span></span>  | <span data-ttu-id="a5a05-187">Bloque de software</span><span class="sxs-lookup"><span data-stu-id="a5a05-187">Soft block</span></span>       |



 

<span data-ttu-id="a5a05-188">Una **veto** es una acción de "bloque" devuelta por el filtro cuando la marca de escritura de la **\_ \_ acción \_ de FWPS derecha** se restableció antes de llamar al filtro.</span><span class="sxs-lookup"><span data-stu-id="a5a05-188">A **Veto** is a "Block" action returned by the filter when the **FWPS\_RIGHT\_ACTION\_WRITE** flag was reset prior to calling the filter.</span></span> <span data-ttu-id="a5a05-189">Una **veto** bloqueará el tráfico que se permitía con un permiso duro.</span><span class="sxs-lookup"><span data-stu-id="a5a05-189">A **Veto** will block traffic that was permitted with a hard permit.</span></span>

<span data-ttu-id="a5a05-190">Cuando se emite una **veto** , es una indicación de conflicto en la configuración.</span><span class="sxs-lookup"><span data-stu-id="a5a05-190">When a **Veto** is issued, it is an indication of conflict in the configuration.</span></span> <span data-ttu-id="a5a05-191">Las siguientes acciones se llevan a cabo para mitigar el conflicto.</span><span class="sxs-lookup"><span data-stu-id="a5a05-191">The following actions are taken to mitigate the conflict.</span></span>

-   <span data-ttu-id="a5a05-192">El tráfico está bloqueado.</span><span class="sxs-lookup"><span data-stu-id="a5a05-192">The traffic is blocked.</span></span>
-   <span data-ttu-id="a5a05-193">Se genera un evento de auditoría.</span><span class="sxs-lookup"><span data-stu-id="a5a05-193">An audit event is generated.</span></span>
-   <span data-ttu-id="a5a05-194">Se genera una notificación.</span><span class="sxs-lookup"><span data-stu-id="a5a05-194">A notification is generated.</span></span>
    > [!Note]  
    > <span data-ttu-id="a5a05-195">La notificación la reciben todas las entidades que se han suscrito a ella.</span><span class="sxs-lookup"><span data-stu-id="a5a05-195">The notification is received by all entities that have subscribed to it.</span></span> <span data-ttu-id="a5a05-196">Normalmente, esto incluirá el firewall (para detectar las configuraciones que no son de) o las aplicaciones (con el fin de detectar si se invalida su filtro concreto).</span><span class="sxs-lookup"><span data-stu-id="a5a05-196">This will typically include the firewall (in order to detect mis-configurations), or applications (in order to detect if their particular filter is overridden).</span></span>

     

    > [!Note]  
    > <span data-ttu-id="a5a05-197">No se crea una instancia obligatoria de la interfaz de usuario (UI) cuando se invalida un filtro de "permiso".</span><span class="sxs-lookup"><span data-stu-id="a5a05-197">There is no mandatory user interface (UI) instantiated when a "Hard Permit" filter is overridden.</span></span> <span data-ttu-id="a5a05-198">Las notificaciones de la invalidación se envían a cualquier proveedor que se haya registrado para recibirlos, lo que permite a los firewalls o a las aplicaciones que crearon los filtros "permitir" Mostrar la interfaz de usuario para solicitar la intervención del usuario.</span><span class="sxs-lookup"><span data-stu-id="a5a05-198">The notifications of the override are sent to any provider that registered to receive them, which allows firewalls, or the applications that created the "Permit" filters, to show UI asking for user action.</span></span> <span data-ttu-id="a5a05-199">No hay ningún valor que tenga una notificación de interfaz de usuario de la plataforma para estos eventos de invalidación, ya que los ISV de firewall que no desean bloquearse de forma silenciosa pueden hacerlo mediante el registro en un lugar diferente en WFP, o (menos preferida) controlan toda la lógica en un controlador de llamada.</span><span class="sxs-lookup"><span data-stu-id="a5a05-199">There is no value in having a platform UI notification for these override events since firewall ISVs that do not want to silently block can do so by registering at a different place in WFP, or (less preferred) handle all their logic in a call-out driver.</span></span> <span data-ttu-id="a5a05-200">Los ISV que creen que los usuarios tengan una buena idea querrán poseer la experiencia del usuario y crear su propia interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="a5a05-200">ISVs that do think prompting users is a good idea will want to own the user experience and create their own UI.</span></span>

     

<span data-ttu-id="a5a05-201">El comportamiento de mitigación descrito anteriormente garantiza que un filtro de "permiso" no se invalide de forma silenciosa mediante un filtro de "bloque" y trata el escenario en el que el Firewall no puede bloquear un puerto de administración remoto.</span><span class="sxs-lookup"><span data-stu-id="a5a05-201">The mitigation behavior described above ensures that a "Hard Permit" filter is not silently overridden by a "Block" filter, and covers the scenario where a remote administration port is not allowed to be blocked by the firewall.</span></span> <span data-ttu-id="a5a05-202">Para invalidar de forma silenciosa "permiso", el firewall tiene que agregar sus filtros dentro de una subcapa de prioridad más alta.</span><span class="sxs-lookup"><span data-stu-id="a5a05-202">In order to silently override "Hard Permit" filters a firewall has to add its filters within a higher priority sub-layer.</span></span>

> [!Note]  
> <span data-ttu-id="a5a05-203">Dado que no hay ningún arbitraje entre niveles, el tráfico permitido con "permiso duro" todavía puede estar bloqueado en otra capa.</span><span class="sxs-lookup"><span data-stu-id="a5a05-203">Since there is no cross-layer arbitration, traffic permitted with "Hard Permit" may still be blocked at another layer.</span></span> <span data-ttu-id="a5a05-204">Es responsabilidad del autor de la Directiva asegurarse de que se permite el tráfico en cada capa, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="a5a05-204">It is the responsibility of the policy author to ensure that traffic is permitted at each layer if necessary.</span></span>

 

<span data-ttu-id="a5a05-205">Las aplicaciones de usuario que solicitan puertos que se van a abrir agregan filtros reemplazables a una subcapa de prioridad baja.</span><span class="sxs-lookup"><span data-stu-id="a5a05-205">User applications requesting ports to be opened add overridable filters to a low priority sub-layer.</span></span> <span data-ttu-id="a5a05-206">El Firewall puede suscribirse al filtro agregar eventos de notificación y agregar un filtro coincidente después de la validación de usuario (o Directiva).</span><span class="sxs-lookup"><span data-stu-id="a5a05-206">The firewall can subscribe to the filter add notification events and add a matching filter after user (or policy) validation.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a5a05-207">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="a5a05-207">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a5a05-208">Asignación del peso del filtro</span><span class="sxs-lookup"><span data-stu-id="a5a05-208">Filter Weight Assignment</span></span>](filter-weight-assignment.md)
</dt> </dl>

 

