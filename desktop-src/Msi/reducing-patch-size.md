---
description: A partir de Windows Installer versión 3,0, los autores de revisiones pueden utilizar la línea de base del producto almacenada en caché por el instalador para facilitar el servicio de las aplicaciones con revisiones Delta más pequeñas.
ms.assetid: ab5b193d-79ce-4ed4-af53-89a4197197c1
title: Reducir el tamaño de la revisión
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 4fa365e831ab8685073347dc254bac58269135f1
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105677764"
---
# <a name="reducing-patch-size"></a><span data-ttu-id="90768-103">Reducir el tamaño de la revisión</span><span class="sxs-lookup"><span data-stu-id="90768-103">Reducing Patch Size</span></span>

<span data-ttu-id="90768-104">A partir de Windows Installer versión 3,0, los autores de revisiones pueden utilizar la línea de base del producto almacenada en caché por el instalador para facilitar el servicio de las aplicaciones con revisiones Delta más pequeñas.</span><span class="sxs-lookup"><span data-stu-id="90768-104">Beginning with Windows Installer version 3.0, patch authors can use the product baseline cached by the installer to more easily service applications with smaller delta patches.</span></span> <span data-ttu-id="90768-105">En muchos casos, una [*revisión diferencial*](d-gly.md) que proporciona información de servicio a una aplicación puede ser significativamente menor que una revisión de archivos completos o un paquete de instalación que proporciona la misma información.</span><span class="sxs-lookup"><span data-stu-id="90768-105">In many cases, a [*delta patch*](d-gly.md) that delivers servicing information to an application can be significantly smaller than a full-file patch or installation package that delivers the same information.</span></span>

<span data-ttu-id="90768-106">**Windows Installer 2,0:** No compatible.</span><span class="sxs-lookup"><span data-stu-id="90768-106">**Windows Installer 2.0:** Not supported.</span></span> <span data-ttu-id="90768-107">A partir de Windows Installer 3,0, el instalador guarda selectivamente la información de línea de base de los archivos cuando se actualizan.</span><span class="sxs-lookup"><span data-stu-id="90768-107">Beginning with Windows Installer 3.0, the installer selectively saves baseline information about files when they are updated.</span></span>

<span data-ttu-id="90768-108">Windows Installer proporciona tres métodos para actualizar y dar servicio a las aplicaciones: [pequeñas actualizaciones](small-updates.md), [actualizaciones secundarias](minor-upgrades.md)y [actualizaciones importantes](major-upgrades.md).</span><span class="sxs-lookup"><span data-stu-id="90768-108">Windows Installer provides three methods for updating and servicing applications: [small updates](small-updates.md), [minor upgrades](minor-upgrades.md), and [major upgrades](major-upgrades.md).</span></span> <span data-ttu-id="90768-109">También se hace referencia a una actualización pequeña como una actualización de ingeniería de corrección rápida (QFE) y también se denomina actualización de Service Pack (SP).</span><span class="sxs-lookup"><span data-stu-id="90768-109">A small update is also referred to as a quick fix engineering (QFE) update, and a minor upgrade is also referred to as a service pack (SP) update.</span></span> <span data-ttu-id="90768-110">Una actualización importante típica quita una aplicación anterior e instala una nueva aplicación.</span><span class="sxs-lookup"><span data-stu-id="90768-110">A typical major upgrade removes a previous application and installs a new application.</span></span> <span data-ttu-id="90768-111">Windows Installer puede proporcionar información de servicio a las aplicaciones como un [paquete de instalación](installation-package.md) (archivo. msi) o como un paquete de [revisión](patch-packages.md) (archivo. msp).</span><span class="sxs-lookup"><span data-stu-id="90768-111">Windows Installer can deliver servicing information to applications as an [installation package](installation-package.md) (.msi file) or as a [patch package](patch-packages.md) (.msp file).</span></span>

<span data-ttu-id="90768-112">Un paquete de revisión de Windows Installer que proporciona información de mantenimiento para una pequeña actualización o una actualización secundaria suele ser mucho menor que el paquete de instalación equivalente que proporciona la misma información de servicio.</span><span class="sxs-lookup"><span data-stu-id="90768-112">A Windows Installer patch package that delivers servicing information for a small update or minor upgrade is generally much smaller than the equivalent installation package that delivers the same servicing information.</span></span> <span data-ttu-id="90768-113">Se recomienda usar paquetes de revisión para la distribución de actualizaciones pequeñas y secundarias.</span><span class="sxs-lookup"><span data-stu-id="90768-113">It is recommended that patch packages be used for the distribution of small and minor upgrades.</span></span> <span data-ttu-id="90768-114">Se recomienda usar un paquete de instalación para la distribución de una actualización principal.</span><span class="sxs-lookup"><span data-stu-id="90768-114">It is recommended that an installation package be used for the distribution of a major upgrade.</span></span>

<span data-ttu-id="90768-115">Las revisiones de Windows Installer (archivos. msp) pueden generarse a partir de archivos completos o de diferencias de archivo (también denominadas diferencias de archivo). Una revisión Windows Installer generada a partir de diferencias de archivo puede ser mucho menor que la revisión de archivos completos equivalente.</span><span class="sxs-lookup"><span data-stu-id="90768-115">Windows Installer patches (.msp files) can be generated from either full files or from file differences (also called file deltas.) A Windows Installer patch generated from file deltas can be much smaller than the equivalent full-file patch.</span></span> <span data-ttu-id="90768-116">Todas las versiones del Windows Installer pueden utilizar revisiones de archivos completos o de diferencias.</span><span class="sxs-lookup"><span data-stu-id="90768-116">All versions of the Windows Installer can use both full-file patches or delta patches.</span></span>

<span data-ttu-id="90768-117">A partir de Windows Installer versión 3,0, el instalador guarda selectivamente la información de línea de base sobre los archivos cuando se actualizan.</span><span class="sxs-lookup"><span data-stu-id="90768-117">Beginning with Windows Installer version 3.0, the installer selectively saves baseline information about files when they are updated.</span></span> <span data-ttu-id="90768-118">La información sobre la aplicación base original (la versión RTM) y la actualización secundaria más reciente (Service Pack) se guardan en una ubicación privada cuando la aplicación se instala o recibe una actualización secundaria.</span><span class="sxs-lookup"><span data-stu-id="90768-118">Information about the original base application (the RTM version) and the most recent minor upgrade (service pack) are saved in a private location when the application is installed or receives a minor upgrade.</span></span>

<span data-ttu-id="90768-119">El instalador hace lo siguiente para minimizar el tamaño de la memoria caché de línea base:</span><span class="sxs-lookup"><span data-stu-id="90768-119">The installer does the following to minimize the size of the baseline cache:</span></span>

-   <span data-ttu-id="90768-120">No se mantienen más de dos líneas base para cada aplicación: una línea base del archivo como se liberó originalmente (RTM) y una línea base del archivo en la actualización secundaria más reciente (Service Pack).</span><span class="sxs-lookup"><span data-stu-id="90768-120">No more than two baselines are maintained for each application: a baseline of the file as originally released (RTM) and a baseline of the file at the most recent minor upgrade (service pack.)</span></span>
-   <span data-ttu-id="90768-121">No se agrega un archivo a la memoria caché hasta que se revisan.</span><span class="sxs-lookup"><span data-stu-id="90768-121">A file is not added to the cache until it is patched.</span></span> <span data-ttu-id="90768-122">La memoria caché de base de referencia es de copia en escritura.</span><span class="sxs-lookup"><span data-stu-id="90768-122">The baseline cache is copy-on-write.</span></span>
-   <span data-ttu-id="90768-123">Si la aplicación no se ha actualizado nunca, no habrá ningún archivo en la memoria caché de línea de base.</span><span class="sxs-lookup"><span data-stu-id="90768-123">If the application has never been updated, there are no files in the baseline cache.</span></span>
-   <span data-ttu-id="90768-124">Cuando el último mantenimiento de la aplicación era una actualización secundaria (Service Pack), la aplicación se encuentra en un nivel de línea base y, como máximo, pueden estar presentes dos copias de un archivo en el equipo.</span><span class="sxs-lookup"><span data-stu-id="90768-124">When the application's last servicing was a minor upgrade (service pack) the application is at a baseline level and at most two copies of a file can be present on the computer.</span></span> <span data-ttu-id="90768-125">Una copia del archivo se encuentra en el directorio de destino de la instalación.</span><span class="sxs-lookup"><span data-stu-id="90768-125">One copy of the file is in the target directory of the installation.</span></span> <span data-ttu-id="90768-126">La otra copia puede estar en la caché de línea de base de RTM.</span><span class="sxs-lookup"><span data-stu-id="90768-126">The other copy can be in the RTM baseline cache.</span></span>
-   <span data-ttu-id="90768-127">Cuando el último mantenimiento de la aplicación era una actualización pequeña (QFE), la aplicación no se encuentra en un nivel de línea base y, como máximo, pueden estar presentes tres copias de un archivo en el equipo.</span><span class="sxs-lookup"><span data-stu-id="90768-127">When the application's last servicing was a small update (QFE) the application is not at a baseline level and at most three copies of a file can be present on the computer.</span></span> <span data-ttu-id="90768-128">La primera copia del archivo se encuentra en el directorio de destino de la instalación.</span><span class="sxs-lookup"><span data-stu-id="90768-128">The first copy of the file is in the target directory of the installation.</span></span> <span data-ttu-id="90768-129">La segunda copia del archivo se encuentra en la caché de línea de base de RTM.</span><span class="sxs-lookup"><span data-stu-id="90768-129">The second copy of the file is in the RTM baseline cache.</span></span> <span data-ttu-id="90768-130">La última copia del archivo se encuentra en la caché de línea de base más reciente.</span><span class="sxs-lookup"><span data-stu-id="90768-130">The last copy of the file is in the most recent baseline cache.</span></span>
-   <span data-ttu-id="90768-131">La memoria caché de línea de base de la aplicación se quita cuando se desinstala el producto.</span><span class="sxs-lookup"><span data-stu-id="90768-131">The application's baseline cache is removed when the product is uninstalled.</span></span>

<span data-ttu-id="90768-132">A partir de Windows Installer versión 3,0, el instalador puede usar la memoria caché de línea base cuando se aplican revisiones a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="90768-132">Beginning with Windows Installer version 3.0, the installer can use the baseline cache when patches are applied to the application.</span></span> <span data-ttu-id="90768-133">La información de línea de base se puede usar para aplicar una revisión diferencial o revertir un archivo a una versión anterior durante la desinstalación de una revisión.</span><span class="sxs-lookup"><span data-stu-id="90768-133">The baseline information can be used to apply a delta patch or to revert a file to a previous version during a patch uninstall.</span></span> <span data-ttu-id="90768-134">Esto puede permitir que los autores de revisiones se beneficien de revisiones Delta más pequeñas.</span><span class="sxs-lookup"><span data-stu-id="90768-134">This can enable patch authors to benefit from smaller delta patches.</span></span> <span data-ttu-id="90768-135">Si el instalador detecta que la revisión diferencial no se puede aplicar al archivo de destino, el instalador puede intentar usar un archivo guardado en la caché de línea de base como punto de partida.</span><span class="sxs-lookup"><span data-stu-id="90768-135">If the installer finds that the delta patch cannot be applied to the target file, the installer can attempt to use a file saved in the baseline cache as a starting point.</span></span> <span data-ttu-id="90768-136">El instalador solo recurre a solicitar el origen de instalación original después de probar todas las posibilidades en la memoria caché.</span><span class="sxs-lookup"><span data-stu-id="90768-136">The installer only resorts to requesting the original installation source after trying all the possibilities in the cache.</span></span>

<span data-ttu-id="90768-137">El cumplimiento de las siguientes directrices puede ayudar a los autores de revisiones a usar Windows Installer revisiones de la versión 3,0 y la caché de línea de base para crear revisiones Delta más pequeñas:</span><span class="sxs-lookup"><span data-stu-id="90768-137">Adherence to the following guidelines can help patch authors use Windows Installer version 3.0 patches and the baseline cache to create smaller delta patches:</span></span>

-   <span data-ttu-id="90768-138">Cree revisiones que incluyan la [tabla MsiPatchSequence](msipatchsequence-table.md).</span><span class="sxs-lookup"><span data-stu-id="90768-138">Author patches that include the [MsiPatchSequence table](msipatchsequence-table.md).</span></span> <span data-ttu-id="90768-139">Esta tabla es necesaria para usar la caché de línea de base y está disponible a partir de Windows Installer versión 3,0.</span><span class="sxs-lookup"><span data-stu-id="90768-139">This table is required to use the baseline cache and is available beginning with Windows Installer version 3.0.</span></span>
-   <span data-ttu-id="90768-140">No establezca una directiva que impida el almacenamiento en caché de línea de base.</span><span class="sxs-lookup"><span data-stu-id="90768-140">Do not set policy that prevents baseline caching.</span></span> <span data-ttu-id="90768-141">El valor de la directiva [MaxPatchCacheSize](maxpatchcachesize.md) especifica el porcentaje máximo de espacio en disco que se puede usar.</span><span class="sxs-lookup"><span data-stu-id="90768-141">The value of the [MaxPatchCacheSize](maxpatchcachesize.md) policy specifies the maximum percentage of disk space that can be used.</span></span> <span data-ttu-id="90768-142">Si la Directiva MaxPatchCacheSize se establece en 0, no se guarda ningún archivo adicional en la caché de línea de base.</span><span class="sxs-lookup"><span data-stu-id="90768-142">If the MaxPatchCacheSize policy is set to 0, no additional files are saved in the baseline cache.</span></span> <span data-ttu-id="90768-143">Si no se establece la Directiva, el valor predeterminado es que se puede usar un máximo del 10% del espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="90768-143">If the policy is not set, the default is that a maximum of 10% of the disk space can be used.</span></span> <span data-ttu-id="90768-144">Si el tamaño total de la memoria caché alcanza el porcentaje máximo de espacio en disco, no se guarda ningún archivo adicional.</span><span class="sxs-lookup"><span data-stu-id="90768-144">If the total size of the cache reaches the maximum percentage of disk space, no additional files are saved.</span></span> <span data-ttu-id="90768-145">La Directiva no afecta a los archivos que ya se han guardado.</span><span class="sxs-lookup"><span data-stu-id="90768-145">The policy does not affect files that have already been saved.</span></span> <span data-ttu-id="90768-146">Incluso cuando el almacenamiento en caché está deshabilitado, el instalador puede usar memorias caché de línea de base de producto existentes.</span><span class="sxs-lookup"><span data-stu-id="90768-146">Even when caching is disabled, the installer can use existing product baseline caches.</span></span>
-   <span data-ttu-id="90768-147">Si la primera revisión aplicada incluye la [tabla MsiPatchSequence](msipatchsequence-table.md), el almacenamiento en caché está habilitado para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="90768-147">If the first patch applied includes the [MsiPatchSequence table](msipatchsequence-table.md), caching is enabled for the application.</span></span>
-   <span data-ttu-id="90768-148">Si alguna revisión de la transacción de servicio no incluye la [tabla MsiPatchSequence](msipatchsequence-table.md), el almacenamiento en caché solo está habilitado para la aplicación si una revisión de actualización secundaria (Service Pack) que incluye la tabla MsiPatchSequence se aplica correctamente al producto.</span><span class="sxs-lookup"><span data-stu-id="90768-148">If any patch in the servicing transaction does not include the [MsiPatchSequence table](msipatchsequence-table.md), caching is enabled for the application only if a minor upgrade patch (service pack) that includes the MsiPatchSequence table is successfully applied to the product.</span></span>
-   <span data-ttu-id="90768-149">Genere el paquete de revisión mediante herramientas de creación de revisiones como [Msimsp.exe](msimsp-exe.md) y [PATCHWIZ.DLL](patchwiz-dll.md).</span><span class="sxs-lookup"><span data-stu-id="90768-149">Generate the patch package using patch creation tools such as [Msimsp.exe](msimsp-exe.md) and [PATCHWIZ.DLL](patchwiz-dll.md).</span></span>
-   <span data-ttu-id="90768-150">Siempre tienen como destino revisiones para la versión RTM de la aplicación o una versión de actualización secundaria (Service Pack) de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="90768-150">Always target patches for the RTM version of the application or a minor upgrade (service pack) version of the application.</span></span> <span data-ttu-id="90768-151">Los destinos especificados en la [tabla TargetImages](targetimages-table-patchwiz-dll-.md) del archivo de propiedades de creación de revisiones (PCP) deben ser puntos de comprobación de producto definidos por los tres primeros campos de la propiedad [**ProductVersion**](productversion.md) .</span><span class="sxs-lookup"><span data-stu-id="90768-151">The targets specified in the [TargetImages table](targetimages-table-patchwiz-dll-.md) of the Patch Creation Properties (PCP) file should be product check points defined by the first three fields of the [**ProductVersion**](productversion.md) property.</span></span>
-   <span data-ttu-id="90768-152">Nunca se dirige a las revisiones en pequeñas imágenes de actualización.</span><span class="sxs-lookup"><span data-stu-id="90768-152">Never target patches at small update images.</span></span> <span data-ttu-id="90768-153">Los destinos para compilar la revisión no deben incluir imágenes de actualización de actualización pequeña anterior.</span><span class="sxs-lookup"><span data-stu-id="90768-153">The targets for building the patch should not include previous small update upgrade images.</span></span>

 

 



