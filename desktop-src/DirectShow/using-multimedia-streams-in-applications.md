---
description: Usar secuencias multimedia en aplicaciones
ms.assetid: 73cfe89b-df46-445a-92c7-2f7323672441
title: Usar secuencias multimedia en aplicaciones
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: f30dab204bc7b0bddbdc293708daecbe0558e8f9
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/03/2021
ms.locfileid: "104003377"
---
# <a name="using-multimedia-streams-in-applications"></a><span data-ttu-id="92d64-103">Usar secuencias multimedia en aplicaciones</span><span class="sxs-lookup"><span data-stu-id="92d64-103">Using Multimedia Streams in Applications</span></span>

> [!Note]  
> <span data-ttu-id="92d64-104">Estas API están en desuso.</span><span class="sxs-lookup"><span data-stu-id="92d64-104">These APIs are deprecated.</span></span> <span data-ttu-id="92d64-105">Las aplicaciones deben usar el filtro de [**enganche de ejemplo**](sample-grabber-filter.md) o implementar un filtro personalizado para obtener datos de un gráfico de filtros de DirectShow.</span><span class="sxs-lookup"><span data-stu-id="92d64-105">Applications should use the [**Sample Grabber**](sample-grabber-filter.md) filter or implement a custom filter to get data from a DirectShow filter graph.</span></span>

 

<span data-ttu-id="92d64-106">Las interfaces de transmisión por secuencias de multimedia simplifican considerablemente el proceso de manipulación de datos multimedia mediante la eliminación de la dependencia de características específicas del origen de hardware o software y la compatibilidad con todos los formatos multimedia de Microsoft DirectX®.</span><span class="sxs-lookup"><span data-stu-id="92d64-106">The multimedia streaming interfaces greatly simplify the process of manipulating multimedia data by removing the dependency on specific characteristics of the hardware or software source and providing support for all Microsoft DirectX® media formats.</span></span> <span data-ttu-id="92d64-107">Los flujos abstraen los datos a un nivel muy alto; las aplicaciones pueden incluso trasladar los datos de un flujo a otro sin tener que saber nada sobre el formato de los datos.</span><span class="sxs-lookup"><span data-stu-id="92d64-107">Streams abstract the data to a very high level; applications can even move data from one stream to another without knowing anything about the data's format.</span></span>

<span data-ttu-id="92d64-108">Realice los pasos siguientes para crear una secuencia multimedia.</span><span class="sxs-lookup"><span data-stu-id="92d64-108">Perform the following steps to create a multimedia stream.</span></span>

1.  <span data-ttu-id="92d64-109">Cree la secuencia multimedia.</span><span class="sxs-lookup"><span data-stu-id="92d64-109">Create the multimedia stream.</span></span> <span data-ttu-id="92d64-110">El método de creación e inicialización de la secuencia es específico de la arquitectura.</span><span class="sxs-lookup"><span data-stu-id="92d64-110">The method of creation and initialization of the stream is architecture specific.</span></span> <span data-ttu-id="92d64-111">DirectShow admite la interfaz [**IAMMultiMediaStream**](/previous-versions/windows/desktop/api/amstream/nn-amstream-iammultimediastream) , que se usa para inicializar la secuencia.</span><span class="sxs-lookup"><span data-stu-id="92d64-111">DirectShow supports the [**IAMMultiMediaStream**](/previous-versions/windows/desktop/api/amstream/nn-amstream-iammultimediastream) interface, which is used to initialize the stream.</span></span> <span data-ttu-id="92d64-112">Otras implementaciones de servidor en proceso de [**IMultiMediaStream**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-imultimediastream) se crearán e inicializarán usando mecanismos diferentes.</span><span class="sxs-lookup"><span data-stu-id="92d64-112">Other in-process server implementations of [**IMultiMediaStream**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-imultimediastream) will be created and initialized using different mechanisms.</span></span>
2.  <span data-ttu-id="92d64-113">Una vez inicializado el objeto de secuencia multimedia, la aplicación usará **QueryInterface** para recuperar la interfaz **IMultiMediaStream** para el objeto.</span><span class="sxs-lookup"><span data-stu-id="92d64-113">After the multimedia stream object is initialized, the application will use **QueryInterface** to retrieve the **IMultiMediaStream** interface for the object.</span></span> <span data-ttu-id="92d64-114">Use esta interfaz para determinar las propiedades de la secuencia y enumerar las propias secuencias.</span><span class="sxs-lookup"><span data-stu-id="92d64-114">Use this interface to determine the stream's properties and enumerate the streams themselves.</span></span> <span data-ttu-id="92d64-115">Puede recuperar una secuencia específica llamando al método [**IMultiMediaStream:: GetMediaStream**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-getmediastream) con un identificador de propósito específico.</span><span class="sxs-lookup"><span data-stu-id="92d64-115">You can retrieve a specific stream by calling the [**IMultiMediaStream::GetMediaStream**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-getmediastream) method with a specific purpose ID.</span></span> <span data-ttu-id="92d64-116">MSPID \_ PrimaryVideo y MSPID \_ PrimaryAudio, que representan las secuencias de audio y vídeo principales, son los identificadores de propósito más usados.</span><span class="sxs-lookup"><span data-stu-id="92d64-116">MSPID\_PrimaryVideo and MSPID\_PrimaryAudio, which represent the primary video and audio streams, are the most commonly used purpose IDs.</span></span>
3.  <span data-ttu-id="92d64-117">Llame a **IUnknown:: QueryInterface** para una interfaz específica del tipo de archivo multimedia de la secuencia.</span><span class="sxs-lookup"><span data-stu-id="92d64-117">Call **IUnknown::QueryInterface** for an interface specific to the stream's media type.</span></span> <span data-ttu-id="92d64-118">Si desea representar una secuencia de vídeo, por ejemplo, recupere su interfaz [**IDirectDrawMediaStream**](/previous-versions/windows/desktop/api/ddstream/nn-ddstream-idirectdrawmediastream) .</span><span class="sxs-lookup"><span data-stu-id="92d64-118">If you want to render a video stream, for example, retrieve its [**IDirectDrawMediaStream**](/previous-versions/windows/desktop/api/ddstream/nn-ddstream-idirectdrawmediastream) interface.</span></span> <span data-ttu-id="92d64-119">Las interfaces específicas del medio definen métodos adicionales necesarios para sacar el máximo partido de las capacidades de un formato.</span><span class="sxs-lookup"><span data-stu-id="92d64-119">Media-specific interfaces define additional methods necessary for taking full advantage of a format's capabilities.</span></span>
4.  <span data-ttu-id="92d64-120">Cree uno o más ejemplos a partir de los datos de la secuencia.</span><span class="sxs-lookup"><span data-stu-id="92d64-120">Create one or more samples from the stream data.</span></span> <span data-ttu-id="92d64-121">Cada flujo multimedia admite el método [**IMediaStream:: CreateSharedSample**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imediastream-createsharedsample) para la creación de un ejemplo.</span><span class="sxs-lookup"><span data-stu-id="92d64-121">Every media stream supports the [**IMediaStream::CreateSharedSample**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imediastream-createsharedsample) method for sample creation.</span></span> <span data-ttu-id="92d64-122">El ejemplo resultante es compatible con la interfaz [**IStreamSample**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-istreamsample) , que proporciona control sobre el ejemplo y sus características.</span><span class="sxs-lookup"><span data-stu-id="92d64-122">The resulting sample supports the [**IStreamSample**](/previous-versions/windows/desktop/api/mmstream/nn-mmstream-istreamsample) interface, which provides control over the sample and its characteristics.</span></span> <span data-ttu-id="92d64-123">Normalmente, la secuencia de medios admite un método específico del formato de creación de ejemplo que es más eficaz que los métodos **IStreamSample** antes mencionados.</span><span class="sxs-lookup"><span data-stu-id="92d64-123">Typically, the media stream supports a format-specific method of sample creation that is more powerful than the aforementioned **IStreamSample** methods.</span></span> <span data-ttu-id="92d64-124">Por ejemplo, **IDirectDrawMediaStream** puede crear muestras adjuntas a una superficie DirectDraw deseada y a un rectángulo de recorte.</span><span class="sxs-lookup"><span data-stu-id="92d64-124">**IDirectDrawMediaStream**, for example, can create samples attached to a desired DirectDraw surface and clipping rectangle.</span></span> <span data-ttu-id="92d64-125">En algunas situaciones, sin embargo, debe controlar los datos sin tener que conocer su formato de datos.</span><span class="sxs-lookup"><span data-stu-id="92d64-125">In some situations, however, you must handle data without knowing about its data format.</span></span> <span data-ttu-id="92d64-126">Si desea transmitir datos independientemente de su formato, use el método **IMediaStream:: CreateSharedSample** para crear los ejemplos de datos.</span><span class="sxs-lookup"><span data-stu-id="92d64-126">If you want to stream data independent of its format, use the **IMediaStream::CreateSharedSample** method to create the data samples.</span></span>
5.  <span data-ttu-id="92d64-127">Después de crear todos los ejemplos de secuencias deseados, inicie la secuencia llamando al método [**IMultiMediaStream:: SetState**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-setstate) y pase la \_ marca de ejecución STREAMSTATE como su parámetro.</span><span class="sxs-lookup"><span data-stu-id="92d64-127">After creating all desired stream samples, start the stream by calling the [**IMultiMediaStream::SetState**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-imultimediastream-setstate) method and pass in the STREAMSTATE\_RUN flag as its parameter.</span></span>
6.  <span data-ttu-id="92d64-128">Llame a [**IStreamSample:: Update**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-istreamsample-update) para actualizar el ejemplo de secuencia.</span><span class="sxs-lookup"><span data-stu-id="92d64-128">Call [**IStreamSample::Update**](/previous-versions/windows/desktop/api/mmstream/nf-mmstream-istreamsample-update) to update the stream sample.</span></span> <span data-ttu-id="92d64-129">Cuando el método **IStreamSample:: Update** se cierra, puede tener acceso a los datos del ejemplo.</span><span class="sxs-lookup"><span data-stu-id="92d64-129">When the **IStreamSample::Update** method exits, you can access the sample's data.</span></span> <span data-ttu-id="92d64-130">Si desea que un desencadenador sea una llamada de función o un evento específico cuando se devuelva la actualización, pase los punteros adecuados al método **IStreamSample:: Update** .</span><span class="sxs-lookup"><span data-stu-id="92d64-130">If you want a trigger a specific event or function call when the update returns, pass the appropriate pointers to the **IStreamSample::Update** method.</span></span>

<span data-ttu-id="92d64-131">Para obtener más información sobre las interfaces de streaming multimedia, consulte [streaming multimedia](multimedia-streaming.md).</span><span class="sxs-lookup"><span data-stu-id="92d64-131">For more information on the multimedia streaming interfaces, see [Multimedia Streaming](multimedia-streaming.md).</span></span>

 

 



