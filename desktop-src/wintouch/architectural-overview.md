---
title: Información general acerca de la arquitectura
description: Esta información general sobre la arquitectura proporciona contexto para la API Touch de Windows para tabletas y tecnologías táctiles y explica cómo encaja en la arquitectura de Windows 7 más grande.
ms.assetid: b284e96f-0998-408c-ae84-92a3acdc3014
keywords:
- Windows Touch, información general sobre la arquitectura
- Windows Touch, manipulaciones
- Windows Touch, mensajes
- Windows Touch, inercia
- Windows Touch, gestos
- gestos, acerca de
- manipulaciones, acerca de
- inercia, acerca de
- procesador de manipulación, información general sobre la arquitectura
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b807113211d77f0aad0ed01fc24570d033063474
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "103995271"
---
# <a name="architectural-overview"></a><span data-ttu-id="bb734-112">Información general acerca de la arquitectura</span><span class="sxs-lookup"><span data-stu-id="bb734-112">Architectural Overview</span></span>

<span data-ttu-id="bb734-113">Esta información general sobre la arquitectura proporciona contexto para la API Touch de Windows para tabletas y tecnologías táctiles y explica cómo encaja en la arquitectura de Windows 7 más grande.</span><span class="sxs-lookup"><span data-stu-id="bb734-113">This architectural overview provides context for the Windows Touch API for Tablet and Touch Technologies and explains how it fits into the larger Windows 7 architecture.</span></span>

## <a name="messages-for-windows-touch-input-and-gestures"></a><span data-ttu-id="bb734-114">Mensajes para la entrada y los gestos de Windows Touch</span><span class="sxs-lookup"><span data-stu-id="bb734-114">Messages for Windows Touch Input and Gestures</span></span>

<span data-ttu-id="bb734-115">Las características de mensajería para Windows Touch están habilitadas escuchando e interpretando mensajes durante la ejecución.</span><span class="sxs-lookup"><span data-stu-id="bb734-115">Messaging features for Windows Touch are enabled by listening and interpreting messages during execution.</span></span> <span data-ttu-id="bb734-116">En la siguiente ilustración se muestra cómo se generan los mensajes desde hardware y se envían a las aplicaciones de Windows 7.</span><span class="sxs-lookup"><span data-stu-id="bb734-116">The following illustration shows how messages are generated from hardware and sent to applications by Windows 7.</span></span>

![Ilustración en la que se muestra cómo Windows 7 envía mensajes de hardware de multitoque a una aplicación](images/wm-multitouch-messaging.png)

<span data-ttu-id="bb734-118">En la columna situada más a la izquierda de la ilustración, el hardware sensible al tacto recibe la entrada de un usuario.</span><span class="sxs-lookup"><span data-stu-id="bb734-118">In the leftmost column of the illustration, touch-sensitive hardware receives input from a user.</span></span> <span data-ttu-id="bb734-119">Después, un controlador se comunica entre el hardware y el sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="bb734-119">A driver then communicates between the hardware and the OS.</span></span> <span data-ttu-id="bb734-120">Después, el sistema operativo genera un mensaje de [**\_ movimiento**](wm-gesture.md) de WM [**\_ Touch**](wm-touchdown.md) o WM que se envía al HWND de una aplicación.</span><span class="sxs-lookup"><span data-stu-id="bb734-120">Next, the OS generates a [**WM\_TOUCH**](wm-touchdown.md) or [**WM\_GESTURE**](wm-gesture.md) message that is then sent to an application's HWND.</span></span> <span data-ttu-id="bb734-121">A continuación, la aplicación actualiza la interfaz de usuario en función de la información encapsulada en el mensaje.</span><span class="sxs-lookup"><span data-stu-id="bb734-121">The application then updates the UI given the information encapsulated in the message.</span></span>

<span data-ttu-id="bb734-122">De forma predeterminada, las aplicaciones reciben gestos.</span><span class="sxs-lookup"><span data-stu-id="bb734-122">Applications receive gestures by default.</span></span> <span data-ttu-id="bb734-123">A menos que una aplicación se registre para los mensajes de entrada táctiles de Windows con la función [**RegisterTouchWindow**](/windows/desktop/api/winuser/nf-winuser-registertouchwindow) , Windows crea las notificaciones para los gestos (mensajes de [**\_ gestos de WM**](wm-gesture.md) ) y se envían a esa ventana de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="bb734-123">Unless an application registers for Windows Touch input messages with the [**RegisterTouchWindow**](/windows/desktop/api/winuser/nf-winuser-registertouchwindow) function, notifications for gestures ([**WM\_GESTURE**](wm-gesture.md) messages) are created by Windows and sent to that application window.</span></span> <span data-ttu-id="bb734-124">Si una ventana de la aplicación se registra para recibir mensajes táctiles, las notificaciones de entrada táctil de Windows (mensajes [**\_ Touch de WM**](wm-touchdown.md) ) se envían a esa ventana de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="bb734-124">If an application Window registers to receive touch messages, notifications for Windows Touch input ([**WM\_TOUCH**](wm-touchdown.md) messages) are sent to that application window.</span></span> <span data-ttu-id="bb734-125">Los mensajes táctiles y gestos de Windows son expansivos en el sentido de que, una vez que se realiza una entrada táctil o se inicia un gesto en una ventana de la aplicación, todos los mensajes se envían a esa aplicación hasta que se completa el movimiento o hasta que se completa el toque principal.</span><span class="sxs-lookup"><span data-stu-id="bb734-125">Windows Touch and gesture messages are greedy in the sense that after a touch is made or a gesture begins on an application Window, all messages are sent to that application until the gesture completes or the primary touch is completed.</span></span>

<span data-ttu-id="bb734-126">En el caso de la compatibilidad heredada, Windows interpreta los mensajes de [**\_ gestos de WM**](wm-gesture.md) si se propagan y, a continuación, envía o publica los mensajes correspondientes que se asignan al gesto.</span><span class="sxs-lookup"><span data-stu-id="bb734-126">For legacy support, Windows interprets [**WM\_GESTURE**](wm-gesture.md) messages if they are bubbled up and then will SEND or POST appropriate messages that map to the gesture.</span></span> <span data-ttu-id="bb734-127">Para evitar la interrupción del soporte heredado, asegúrese de reenviar \_ mensajes de gestos de WM mediante [DefWindowProc](/windows/win32/api/winuser/nf-winuser-defwindowproca).</span><span class="sxs-lookup"><span data-stu-id="bb734-127">To avoid breaking legacy support, make sure that you forward WM\_GESTURE messages using [DefWindowProc](/windows/win32/api/winuser/nf-winuser-defwindowproca).</span></span> <span data-ttu-id="bb734-128">Puede encontrar más información sobre la compatibilidad heredada en la sección [información general sobre gestos táctiles de Windows](windows-touch-gestures-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bb734-128">More information on legacy support can be found in the section [Windows Touch Gestures Overview](windows-touch-gestures-overview.md).</span></span>

## <a name="manipulations-and-inertia"></a><span data-ttu-id="bb734-129">Manipulaciones e inercia</span><span class="sxs-lookup"><span data-stu-id="bb734-129">Manipulations and Inertia</span></span>

<span data-ttu-id="bb734-130">Los programadores de Windows Touch deben ser capaces de interpretar los gestos de varios orígenes de una manera que sea significativa para el gesto.</span><span class="sxs-lookup"><span data-stu-id="bb734-130">Windows Touch programmers must be able to interpret gestures from multiple sources in a manner that is meaningful for the gesture taking place.</span></span> <span data-ttu-id="bb734-131">Microsoft proporciona la API de manipulación para realizar estos cálculos.</span><span class="sxs-lookup"><span data-stu-id="bb734-131">Microsoft provides the manipulation API to perform these calculations.</span></span> <span data-ttu-id="bb734-132">Las manipulaciones son esencialmente gestos con valores asociados que describen el gesto completo.</span><span class="sxs-lookup"><span data-stu-id="bb734-132">Manipulations are essentially gestures with values associated with them that describe the entire gesture.</span></span> <span data-ttu-id="bb734-133">Después de conectar los datos de entrada al procesador de manipulación, puede recuperar la información pertinente para la acción que realiza el usuario en el objeto.</span><span class="sxs-lookup"><span data-stu-id="bb734-133">After you connect the input data to the manipulation processor, you can retrieve information pertinent to action that the user makes on the object.</span></span> <span data-ttu-id="bb734-134">En la ilustración siguiente se muestra una manera de usar manipulaciones.</span><span class="sxs-lookup"><span data-stu-id="bb734-134">The following figure shows one way you can use manipulations.</span></span>

![Ilustración en la que se muestran los mensajes de Windows Touch pasados al procesador de manipulación de un objeto, que controla los eventos con la \- interfaz imanipulationevents](images/manipulation-arch.png)

<span data-ttu-id="bb734-136">En la parte superior izquierda de la ilustración, el usuario ha tocado la pantalla, que crea mensajes táctiles.</span><span class="sxs-lookup"><span data-stu-id="bb734-136">In the top left of the illustration, the user has touched the screen, which creates touch messages.</span></span> <span data-ttu-id="bb734-137">Estos mensajes contienen una coordenada x y una coordenada y que se usan para determinar el objeto que tiene el foco.</span><span class="sxs-lookup"><span data-stu-id="bb734-137">These messages contain an x-coordinate and a y-coordinate that are used to determine the object that is in focus.</span></span> <span data-ttu-id="bb734-138">El objeto en el foco contiene un procesador de manipulación.</span><span class="sxs-lookup"><span data-stu-id="bb734-138">The object in focus contains a manipulation processor.</span></span> <span data-ttu-id="bb734-139">Después, en el mensaje de [**\_ pantalla táctil de WM**](wm-touchdown.md) con la marca **TOUCHEVENTF \_ up** , se selecciona el objeto en el foco del usuario, se hace referencia al procesador de manipulación y el mensaje se envía al procesador de manipulación.</span><span class="sxs-lookup"><span data-stu-id="bb734-139">Next, on the [**WM\_TOUCH**](wm-touchdown.md) message with the **TOUCHEVENTF\_UP** flag, the object in the user's focus is selected, the manipulation processor is referenced, and the message is sent to the manipulation processor.</span></span> <span data-ttu-id="bb734-140">Los **mensajes \_ táctiles de WM** posteriores asociados a este contacto se envían al procesador de manipulación hasta que se recibe el mensaje de **\_ pantalla táctil de WM** con la marca **TOUCHEVENTF \_ up** y se desreferencia el objeto seleccionado.</span><span class="sxs-lookup"><span data-stu-id="bb734-140">Subsequent **WM\_TOUCH** messages associated with this contact are sent to the manipulation processor until the **WM\_TOUCH** message with the **TOUCHEVENTF\_UP** flag is received and the selected object is dereferenced.</span></span> <span data-ttu-id="bb734-141">En la sección inferior derecha de la ilustración, se usa un receptor de eventos de manipulación que implementa la interfaz [**\_ IManipulationEvents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) para controlar los eventos de manipulación, que se generan mientras se crean los mensajes táctiles.</span><span class="sxs-lookup"><span data-stu-id="bb734-141">In the bottom right section of the illustration, a manipulation event sink that implements the [**\_IManipulationEvents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) interface is used to handle the manipulation events, which are raised while the touch messages are being created.</span></span> <span data-ttu-id="bb734-142">El receptor de eventos puede realizar actualizaciones en la interfaz en función de los eventos de manipulación mientras se producen.</span><span class="sxs-lookup"><span data-stu-id="bb734-142">The event sink can perform updates to the interface based on the manipulation events while they occur.</span></span>

<span data-ttu-id="bb734-143">En las aplicaciones táctiles de Windows, es habitual incorporar física simple para que los objetos lleguen a una detención sin problemas, en lugar de detenerse repentinamente cuando ya no se tocan.</span><span class="sxs-lookup"><span data-stu-id="bb734-143">In Windows Touch applications, it's common to incorporate simple physics so that objects smoothly come to a stop, rather than abruptly stop when they are no longer being touched.</span></span> <span data-ttu-id="bb734-144">Microsoft proporciona la API de inercia para realizar los cálculos para esta física simple, de forma que la aplicación pueda comportarse de forma similar a otras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="bb734-144">Microsoft provides the Inertia API to perform the calculations for these simple physics so that your application can behave in a manner similar to other applications.</span></span> <span data-ttu-id="bb734-145">Esto también le ahorra el esfuerzo necesario para crear una funcionalidad física sólida.</span><span class="sxs-lookup"><span data-stu-id="bb734-145">This also saves you the effort required to create robust physics functionality.</span></span> <span data-ttu-id="bb734-146">En la ilustración siguiente se muestra cómo puede usar la inercia.</span><span class="sxs-lookup"><span data-stu-id="bb734-146">The following figure shows how you can use inertia.</span></span>

![Ilustración en la que se muestran los mensajes táctiles de Windows que se pasan a la interfaz iinertiaprocessor de un objeto, que genera eventos con la \- interfaz imanipulationevents](images/inertia-arch.png)

<span data-ttu-id="bb734-148">Tenga en cuenta las similitudes entre la inercia y la manipulación.</span><span class="sxs-lookup"><span data-stu-id="bb734-148">Note the similarities between inertia and manipulation.</span></span> <span data-ttu-id="bb734-149">La única diferencia entre los dos es que, en el caso de la inercia, los mensajes interpretados se entregan a un procesador de inercia en lugar de a un procesador de manipulación y el procesador de inercia genera los eventos.</span><span class="sxs-lookup"><span data-stu-id="bb734-149">The only difference between the two is that in the case of inertia, interpreted messages are handed to an inertia processor rather than a manipulation processor and the inertia processor raises the events.</span></span> <span data-ttu-id="bb734-150">En la parte superior izquierda de la ilustración, en el mensaje de [**\_ toque de WM**](wm-touchdown.md) con la marca **TOUCHEVENTF \_ up** , los mensajes táctiles se usan para identificar un objeto en el foco que contiene un procesador de inercia y un procesador de manipulación.</span><span class="sxs-lookup"><span data-stu-id="bb734-150">In the top left of the illustration, on the [**WM\_TOUCH**](wm-touchdown.md) message with the **TOUCHEVENTF\_UP** flag, touch messages are used to identify an object in focus that contains an inertia processor and a manipulation processor.</span></span> <span data-ttu-id="bb734-151">Los **mensajes \_ táctiles de WM** posteriores se envían al procesador de manipulación y el procesador de manipulación realiza actualizaciones en la interfaz de usuario de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="bb734-151">Subsequent **WM\_TOUCH** messages are sent to the manipulation processor and the manipulation processor performs updates to the application UI.</span></span> <span data-ttu-id="bb734-152">Una vez completada la manipulación, se usan los valores de velocidad de la manipulación para configurar un procesador de inercia.</span><span class="sxs-lookup"><span data-stu-id="bb734-152">After the manipulation completes, velocity values from the manipulation are used to set up an inertia processor.</span></span> <span data-ttu-id="bb734-153">Como se muestra en la columna central, se llama al método [**Process**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process) o [**ProcessTime**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-processtime) en la interfaz [**IInertiaProcessor**](/windows/desktop/api/manipulations/nn-manipulations-iinertiaprocessor) mediante un temporizador u otro bucle en un subproceso independiente hasta que las llamadas indican que el procesador ha finalizado el procesamiento.</span><span class="sxs-lookup"><span data-stu-id="bb734-153">As illustrated in the middle column, the [**Process**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-process) or [**ProcessTime**](/windows/desktop/api/manipulations/nf-manipulations-iinertiaprocessor-processtime) method is called on the [**IInertiaProcessor**](/windows/desktop/api/manipulations/nn-manipulations-iinertiaprocessor) interface using a timer or other loop in a separate thread until the calls indicate the processor is finished processing.</span></span> <span data-ttu-id="bb734-154">Mientras se realizan estas llamadas, se generan eventos de manipulación, que se controlan mediante un receptor de eventos de manipulación basado en la interfaz [**\_ IManipulationEvents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) .</span><span class="sxs-lookup"><span data-stu-id="bb734-154">While these calls are made, manipulation events are raised, which are handled by a manipulation event sink based on the [**\_IManipulationEvents**](/windows/win32/api/manipulations/nn-manipulations-_imanipulationevents) interface.</span></span> <span data-ttu-id="bb734-155">En la sección inferior derecha de la ilustración, este receptor de eventos realiza actualizaciones en la interfaz de usuario de la aplicación en función de los eventos de manipulación cuando se producen a través de controladores de eventos en el receptor de eventos.</span><span class="sxs-lookup"><span data-stu-id="bb734-155">At the bottom right section of the illustration, this event sink then performs updates to the application UI based on manipulation events when they occur through event handlers in the event sink.</span></span>

## <a name="related-topics"></a><span data-ttu-id="bb734-156">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="bb734-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="bb734-157">Guía de programación</span><span class="sxs-lookup"><span data-stu-id="bb734-157">Programming Guide</span></span>](programming-guide.md)
</dt> </dl>

 

 