---
title: Crear un controlador de limpieza de disco
description: Una vez que se ha comprobado un axioma de tiempo y de nuevo en el mundo de los equipos es que, con independencia del tamaño de la capacidad de almacenamiento del equipo, se rellenará finalmente.
ms.assetid: f85e0db7-fbdb-452e-90c8-672f716b5692
keywords:
- Controladores de liberador de espacio en disco
- Liberador de espacio en disco
- DataDrivenCleaner
- registro, controladores de liberador de espacio en disco
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 30584439ae2c38ae8a9b7106dae96f69eea5df37
ms.sourcegitcommit: ae73f4dd3cf5a3c6a1ea7d191ca32a5b01f6686b
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/08/2020
ms.locfileid: "105695780"
---
# <a name="creating-a-disk-cleanup-handler"></a><span data-ttu-id="9b77b-107">Crear un controlador de limpieza de disco</span><span class="sxs-lookup"><span data-stu-id="9b77b-107">Creating a Disk Cleanup Handler</span></span>

<span data-ttu-id="9b77b-108">Una vez que se ha comprobado un axioma de tiempo y de nuevo en el mundo de los equipos es que, con independencia del tamaño de la capacidad de almacenamiento del equipo, se rellenará finalmente.</span><span class="sxs-lookup"><span data-stu-id="9b77b-108">One axiom proven time and again in the world of computers is that regardless of the size of your computer's storage capacity, you will eventually fill it up.</span></span> <span data-ttu-id="9b77b-109">Aunque el tamaño medio del disco duro de un equipo ha aumentado drásticamente con el tiempo, las aplicaciones también han crecido en consecuencia, lo que permite a los usuarios buscar maneras de crear más espacio libre en el disco duro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-109">While the average size of a computer's hard disk has increased dramatically over time, applications have also grown accordingly, leaving users looking for ways to create more free hard disk space.</span></span> <span data-ttu-id="9b77b-110">El espacio disponible también se reduce mediante el número de archivos temporales que crean las aplicaciones por motivos de rendimiento o de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="9b77b-110">Available space is also reduced by the many temporary files that applications create for backup or performance reasons.</span></span> <span data-ttu-id="9b77b-111">Cuando el espacio en disco es bajo, se necesita para reducir la cantidad de espacio que usan las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="9b77b-111">When disk space becomes low, it becomes necessary to reduce the amount of space used by applications.</span></span> <span data-ttu-id="9b77b-112">El espacio en disco se puede liberar mediante una variedad de medias, entre las que se incluyen las siguientes:</span><span class="sxs-lookup"><span data-stu-id="9b77b-112">Disk space can be freed using a variety of means, including the following:</span></span>

-   <span data-ttu-id="9b77b-113">Eliminando archivos.</span><span class="sxs-lookup"><span data-stu-id="9b77b-113">Deleting files.</span></span>
-   <span data-ttu-id="9b77b-114">Comprimir archivos.</span><span class="sxs-lookup"><span data-stu-id="9b77b-114">Compressing files.</span></span>
-   <span data-ttu-id="9b77b-115">Mover archivos a un medio de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="9b77b-115">Moving files to a backup medium.</span></span>
-   <span data-ttu-id="9b77b-116">Transferir archivos a un servidor remoto.</span><span class="sxs-lookup"><span data-stu-id="9b77b-116">Transferring files to a remote server.</span></span>

<span data-ttu-id="9b77b-117">Los archivos que son buenos candidatos para la limpieza incluyen:</span><span class="sxs-lookup"><span data-stu-id="9b77b-117">Files that are good candidates for cleanup include:</span></span>

-   <span data-ttu-id="9b77b-118">Archivos que el usuario nunca volverá a necesitar.</span><span class="sxs-lookup"><span data-stu-id="9b77b-118">Files that the user will never need again.</span></span>
-   <span data-ttu-id="9b77b-119">Archivos temporales que solo existen por motivos de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9b77b-119">Temporary files that exist only for performance reasons.</span></span>
-   <span data-ttu-id="9b77b-120">Archivos que se pueden restaurar, si es necesario, desde un CD de instalación.</span><span class="sxs-lookup"><span data-stu-id="9b77b-120">Files that can be restored, if needed, from an installation CD.</span></span>
-   <span data-ttu-id="9b77b-121">Archivos de datos que se han sustituido por versiones más recientes, como archivos de copia de seguridad antiguos.</span><span class="sxs-lookup"><span data-stu-id="9b77b-121">Data files that have possibly been superseded by newer versions, such as old backup files.</span></span>
-   <span data-ttu-id="9b77b-122">Archivos más antiguos que no se han usado en un período de tiempo prolongado.</span><span class="sxs-lookup"><span data-stu-id="9b77b-122">Older files that have not been used in a long time.</span></span>

<span data-ttu-id="9b77b-123">La eliminación es especialmente adecuada para los archivos que el usuario nunca necesitará de nuevo; por ejemplo, los archivos que se almacenan temporalmente en caché por motivos de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9b77b-123">Deletion is particularly appropriate for files that the user will never need again for example, files that are temporarily cached for performance reasons.</span></span> <span data-ttu-id="9b77b-124">La eliminación también es adecuada para los archivos que se restauran fácilmente, como los archivos de gráficos que se pueden volver a cargar desde un CD de instalación.</span><span class="sxs-lookup"><span data-stu-id="9b77b-124">Deletion is also appropriate for files that are easily restored, such as graphics files that can be reloaded from an installation CD.</span></span> <span data-ttu-id="9b77b-125">Los archivos que el usuario podría necesitar posteriormente o que serían difíciles de reconstruir son más candidatos para la compresión o la copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="9b77b-125">Files that the user might need later or that would be difficult to reconstruct are better candidates for compression or backup.</span></span>

<span data-ttu-id="9b77b-126">Esperar que un usuario Limpie manualmente el sistema de archivos no es una buena solución.</span><span class="sxs-lookup"><span data-stu-id="9b77b-126">Expecting a user to manually clean the file system is not a good solution.</span></span> <span data-ttu-id="9b77b-127">Es posible que el usuario no sepa dónde se encuentran muchos de los archivos o cómo reconocer cuáles se pueden quitar de forma segura.</span><span class="sxs-lookup"><span data-stu-id="9b77b-127">The user may not know where many of the files are located or how to recognize which ones can be safely removed.</span></span> <span data-ttu-id="9b77b-128">Además, existe el riesgo de que el usuario pueda eliminar archivos esenciales.</span><span class="sxs-lookup"><span data-stu-id="9b77b-128">In addition, there's the risk that the user might delete essential files.</span></span>

<span data-ttu-id="9b77b-129">En este tema se describen las siguientes aspectos de la utilidad liberador de espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-129">The following facets of the Disk Cleanup utility are discussed in this topic.</span></span>

-   [<span data-ttu-id="9b77b-130">La utilidad liberador de espacio en disco de Windows</span><span class="sxs-lookup"><span data-stu-id="9b77b-130">The Windows Disk Cleanup Utility</span></span>](#the-windows-disk-cleanup-utility)
-   [<span data-ttu-id="9b77b-131">Aspectos básicos de la implementación</span><span class="sxs-lookup"><span data-stu-id="9b77b-131">Implementation Basics</span></span>](#implementation-basics)
    -   [<span data-ttu-id="9b77b-132">Initialize/InitializeEx</span><span class="sxs-lookup"><span data-stu-id="9b77b-132">Initialize/InitializeEx</span></span>](#initializeinitializeex)
    -   [<span data-ttu-id="9b77b-133">GetSpaceUsed</span><span class="sxs-lookup"><span data-stu-id="9b77b-133">GetSpaceUsed</span></span>](#getspaceused)
    -   [<span data-ttu-id="9b77b-134">ShowProperties (</span><span class="sxs-lookup"><span data-stu-id="9b77b-134">ShowProperties</span></span>](#showproperties)
    -   [<span data-ttu-id="9b77b-135">Purgar</span><span class="sxs-lookup"><span data-stu-id="9b77b-135">Purge</span></span>](#purge)
    -   [<span data-ttu-id="9b77b-136">Desactivación</span><span class="sxs-lookup"><span data-stu-id="9b77b-136">Deactivate</span></span>](#deactivate)
-   [<span data-ttu-id="9b77b-137">Registrar un controlador de limpieza de disco</span><span class="sxs-lookup"><span data-stu-id="9b77b-137">Registering a Disk Cleanup Handler</span></span>](#registering-a-disk-cleanup-handler)
    -   [<span data-ttu-id="9b77b-138">Registrar el CLSID de un controlador</span><span class="sxs-lookup"><span data-stu-id="9b77b-138">Registering a Handler's CLSID</span></span>](#registering-a-handlers-clsid)
    -   [<span data-ttu-id="9b77b-139">Registro de un controlador con el administrador de liberador de espacio en disco: General</span><span class="sxs-lookup"><span data-stu-id="9b77b-139">Registering a Handler with the Disk Cleanup Manager: General</span></span>](#registering-a-handler-with-the-disk-cleanup-manager-general)
    -   [<span data-ttu-id="9b77b-140">Registro de un controlador con el administrador de liberador de espacio en disco: Windows 2000 o sistemas posteriores</span><span class="sxs-lookup"><span data-stu-id="9b77b-140">Registering a Handler with the Disk Cleanup Manager: Windows 2000 or Later Systems</span></span>](#registering-a-handler-with-the-disk-cleanup-manager-windows-2000-or-later-systems)
    -   [<span data-ttu-id="9b77b-141">Usar el objeto DataDrivenCleaner</span><span class="sxs-lookup"><span data-stu-id="9b77b-141">Using the DataDrivenCleaner Object</span></span>](#using-the-datadrivencleaner-object)
    -   [<span data-ttu-id="9b77b-142">Ejemplo de registro de un controlador de limpieza de disco</span><span class="sxs-lookup"><span data-stu-id="9b77b-142">Example Registration of a Disk Cleanup Handler</span></span>](#example-registration-of-a-disk-cleanup-handler)

## <a name="the-windows-disk-cleanup-utility"></a><span data-ttu-id="9b77b-143">La utilidad liberador de espacio en disco de Windows</span><span class="sxs-lookup"><span data-stu-id="9b77b-143">The Windows Disk Cleanup Utility</span></span>

<span data-ttu-id="9b77b-144">A partir de Windows 98, el sistema operativo Windows incluye el liberador de espacio en disco, una utilidad que facilita enormemente que el usuario administre el espacio disponible en el disco duro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-144">Starting on Windows 98, the Windows operating system includes Disk Cleanup, a utility that makes it much easier for the user to manage available hard disk space.</span></span> <span data-ttu-id="9b77b-145">La utilidad liberador de espacio en disco está diseñada para liberar tanto espacio en disco como sea posible y reducir el riesgo de que el usuario elimine los archivos esenciales de forma accidental.</span><span class="sxs-lookup"><span data-stu-id="9b77b-145">The Disk Cleanup utility is designed to free up as much disk space as possible and decrease the risk that the user will delete essential files accidentally.</span></span>

<span data-ttu-id="9b77b-146">El liberador de espacio en disco se puede iniciar de tres maneras.</span><span class="sxs-lookup"><span data-stu-id="9b77b-146">Disk cleanup can be initiated in three ways.</span></span>

-   <span data-ttu-id="9b77b-147">El usuario puede iniciar el liberador de espacio en disco haciendo clic en **Inicio**; seleccionar **todos los programas**, **accesorios** y **herramientas del sistema**; y, a continuación, en **liberador de espacio en disco**.</span><span class="sxs-lookup"><span data-stu-id="9b77b-147">The user can initiate disk cleanup by clicking **Start**; pointing to **All Programs**, **Accessories**, and **System Tools**; and then clicking **Disk Cleanup**.</span></span>
-   <span data-ttu-id="9b77b-148">El sistema notifica al usuario con un cuadro de mensaje que indica que el espacio en disco sin usar ha alcanzado el modo crítico.</span><span class="sxs-lookup"><span data-stu-id="9b77b-148">The system notifies the user with a message box that unused disk space has reached critical mode.</span></span> <span data-ttu-id="9b77b-149">El umbral de modo crítico para una unidad superior a 2,25 gigabytes (GB) es de 200 megabytes (MB).</span><span class="sxs-lookup"><span data-stu-id="9b77b-149">The critical mode threshold for a drive larger than 2.25 gigabytes (GB) is 200 megabytes (MB).</span></span> <span data-ttu-id="9b77b-150">Las advertencias posteriores se proporcionan en 80, 50 y 1 MB.</span><span class="sxs-lookup"><span data-stu-id="9b77b-150">Subsequent warnings are given at 80, 50, and 1 MB.</span></span> <span data-ttu-id="9b77b-151">El usuario tiene la opción de liberar espacio en disco manualmente o iniciar la utilidad de limpieza de disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-151">The user is given the option of freeing disk space manually or starting the Disk Cleanup utility.</span></span>
-   <span data-ttu-id="9b77b-152">El usuario puede hacer que el Asistente para tareas programadas de Windows (conocido como asistente para mantenimiento en sistemas anteriores) ejecute la utilidad liberador de espacio en disco automáticamente a las horas programadas.</span><span class="sxs-lookup"><span data-stu-id="9b77b-152">The user can have the Windows Scheduled Task Wizard (known as the Maintenance Wizard on older systems) run the Disk Cleanup utility automatically at scheduled times.</span></span>

<span data-ttu-id="9b77b-153">El desafío básico inherente al liberador de espacio en disco es liberar tanto espacio en disco como sea posible sin eliminar archivos esenciales.</span><span class="sxs-lookup"><span data-stu-id="9b77b-153">The basic challenge inherent in disk cleanup is to free as much disk space as possible without deleting essential files.</span></span> <span data-ttu-id="9b77b-154">Dado que no hay ninguna manera estándar de marcar archivos para la limpieza, ninguna aplicación puede detectar y limpiar de forma confiable todos los archivos no esenciales.</span><span class="sxs-lookup"><span data-stu-id="9b77b-154">Because there is no standard way to mark files for cleanup, no single application can reliably detect and clean all unessential files.</span></span> <span data-ttu-id="9b77b-155">La utilidad liberador de espacio en disco soluciona este problema dividiendo la operación de limpieza entre un único *Administrador de limpieza de disco* y una colección de controladores de limpieza de *disco*.</span><span class="sxs-lookup"><span data-stu-id="9b77b-155">The Disk Cleanup utility addresses this problem by splitting the cleanup operation between a single *disk cleanup manager* and a collection of *disk cleanup handlers*.</span></span>

<span data-ttu-id="9b77b-156">Cuando se ejecuta la utilidad liberador de espacio en disco, el usuario ve el siguiente cuadro de diálogo.</span><span class="sxs-lookup"><span data-stu-id="9b77b-156">When the Disk Cleanup utility is run, the user sees the following dialog box.</span></span> <span data-ttu-id="9b77b-157">(Si existe más de un disco o partición de disco en el equipo, primero se solicita al usuario que elija una unidad antes de que se muestre este cuadro de diálogo).</span><span class="sxs-lookup"><span data-stu-id="9b77b-157">(If more than one disk or disk partition exists on the computer, the user is first asked to choose a drive before this dialog is displayed.)</span></span>

![captura de pantalla del cuadro de diálogo limpiar](images/cleanup1.png)

<span data-ttu-id="9b77b-159">El administrador de liberador de espacio en disco forma parte del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="9b77b-159">The disk cleanup manager is part of the operating system.</span></span> <span data-ttu-id="9b77b-160">Muestra el cuadro de diálogo que se muestra en la ilustración anterior, controla la entrada del usuario y administra la operación de limpieza.</span><span class="sxs-lookup"><span data-stu-id="9b77b-160">It displays the dialog box shown in the preceding illustration, handles user input, and manages the cleanup operation.</span></span> <span data-ttu-id="9b77b-161">La selección real y la limpieza de archivos innecesarios se realizan mediante los controladores de limpieza de disco individuales que se muestran en el cuadro de lista del administrador de limpieza de disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-161">The actual selection and cleanup of unneeded files is done by the individual disk cleanup handlers shown in the disk cleanup manager's list box.</span></span> <span data-ttu-id="9b77b-162">El usuario tiene la opción de habilitar o deshabilitar controladores individuales activando o desactivando su casilla en la interfaz de usuario del administrador de liberador de espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-162">The user has the option of enabling or disabling individual handlers by selecting or clearing their check box in the disk cleanup manager's UI.</span></span>

<span data-ttu-id="9b77b-163">Cada controlador es responsable de un conjunto bien definido de archivos.</span><span class="sxs-lookup"><span data-stu-id="9b77b-163">Each handler is responsible for a well defined set of files.</span></span> <span data-ttu-id="9b77b-164">Por ejemplo, el controlador seleccionado en la ilustración es responsable de limpiar los archivos de programa descargados.</span><span class="sxs-lookup"><span data-stu-id="9b77b-164">For example, the selected handler in the illustration is responsible for cleaning up downloaded program files.</span></span> <span data-ttu-id="9b77b-165">El controlador seleccionado en la ilustración también proporciona un botón **ver archivos** .</span><span class="sxs-lookup"><span data-stu-id="9b77b-165">The handler selected in the illustration also provides a **View Files** button.</span></span> <span data-ttu-id="9b77b-166">Al hacer clic en el botón, el usuario puede solicitar que el controlador muestre una interfaz de usuario normalmente una ventana del explorador de Windows que permita al usuario especificar qué archivos o clases de archivos se van a limpiar.</span><span class="sxs-lookup"><span data-stu-id="9b77b-166">By clicking the button, the user can request that the handler display a UI typically a Windows Explorer window that allows the user to specify which files or classes of files to clean.</span></span>

<span data-ttu-id="9b77b-167">Aunque Windows incluye varios controladores de limpieza de disco, no están diseñados para administrar archivos generados por otras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="9b77b-167">Although Windows comes with a number of disk cleanup handlers, they aren't designed to handle files produced by other applications.</span></span> <span data-ttu-id="9b77b-168">En su lugar, el administrador de liberador de espacio en disco está diseñado para ser flexible y extensible, ya que permite a cualquier desarrollador implementar y registrar su propio controlador de limpieza de disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-168">Instead, the disk cleanup manager is designed to be flexible and extensible by enabling any developer to implement and register their own disk cleanup handler.</span></span> <span data-ttu-id="9b77b-169">Cualquier desarrollador puede ampliar los servicios de liberador de espacio en disco disponibles implementando y registrando un controlador de limpieza de disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-169">Any developer can extend the available disk cleanup services by implementing and registering a disk cleanup handler.</span></span>

<span data-ttu-id="9b77b-170">Todas las aplicaciones que generan archivos temporales pueden y deben implementar y registrar un controlador de limpieza de disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-170">All applications that produce temporary files can and should implement and register a disk cleanup handler.</span></span> <span data-ttu-id="9b77b-171">Esto proporciona a los usuarios una forma cómoda y confiable de administrar los archivos temporales de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="9b77b-171">Doing so gives users a convenient and reliable way to manage the application's temporary files.</span></span> <span data-ttu-id="9b77b-172">Al implementar el controlador, puede decidir qué archivos se ven afectados y determinar cómo se produce la limpieza real.</span><span class="sxs-lookup"><span data-stu-id="9b77b-172">When you implement the handler, you can decide which files are affected and determine how the actual cleanup happens.</span></span>

## <a name="implementation-basics"></a><span data-ttu-id="9b77b-173">Aspectos básicos de la implementación</span><span class="sxs-lookup"><span data-stu-id="9b77b-173">Implementation Basics</span></span>

<span data-ttu-id="9b77b-174">Los controladores de limpieza son objetos del modelo de objetos componentes (COM) de servidor en proceso.</span><span class="sxs-lookup"><span data-stu-id="9b77b-174">Cleanup handlers are in-process server Component Object Model (COM) objects.</span></span> <span data-ttu-id="9b77b-175">Windows proporciona un objeto de controlador existente denominado DataDrivenCleaner para su uso.</span><span class="sxs-lookup"><span data-stu-id="9b77b-175">Windows provides an existing handler object called the DataDrivenCleaner for your use.</span></span> <span data-ttu-id="9b77b-176">También puede optar por implementar un controlador para obtener una mayor flexibilidad.</span><span class="sxs-lookup"><span data-stu-id="9b77b-176">You can also opt to implement a handler yourself for more flexibility.</span></span> <span data-ttu-id="9b77b-177">Estos objetos permiten especificar cómo seleccionar archivos, espacio libre en disco y, en el caso de un controlador implementado, Mostrar la interfaz de usuario opcional para un control más granular.</span><span class="sxs-lookup"><span data-stu-id="9b77b-177">These objects then allow you to specify how to select files, free disk space, and, in the case of an implemented handler, display the optional UI for more granular control.</span></span> <span data-ttu-id="9b77b-178">En esta sección se aborda la cuestión de implementar su propio controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-178">This section addresses the matter of implementing your own handler.</span></span> <span data-ttu-id="9b77b-179">Para obtener más información sobre el uso del objeto DataDrivenCleaner, consulte [uso del objeto DataDrivenCleaner](#using-the-datadrivencleaner-object).</span><span class="sxs-lookup"><span data-stu-id="9b77b-179">For details concerning the use of the DataDrivenCleaner object, see [Using the DataDrivenCleaner Object](#using-the-datadrivencleaner-object).</span></span>

<span data-ttu-id="9b77b-180">Un controlador de limpieza de disco debe realizar estas cinco tareas básicas.</span><span class="sxs-lookup"><span data-stu-id="9b77b-180">A disk cleanup handler should perform these five basic tasks.</span></span>

-   <span data-ttu-id="9b77b-181">Inicialice el objeto de controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-181">Initialize the handler object.</span></span>
-   <span data-ttu-id="9b77b-182">Examine el disco para determinar cuánto espacio en disco se puede liberar.</span><span class="sxs-lookup"><span data-stu-id="9b77b-182">Scan the disk to determine how much disk space can be freed.</span></span>
-   <span data-ttu-id="9b77b-183">Mostrar la interfaz de usuario para obtener comentarios sobre los archivos que se van a limpiar.</span><span class="sxs-lookup"><span data-stu-id="9b77b-183">Display the UI to obtain user feedback about which files to clean.</span></span> <span data-ttu-id="9b77b-184">(Opcional)</span><span class="sxs-lookup"><span data-stu-id="9b77b-184">(Optional)</span></span>
-   <span data-ttu-id="9b77b-185">Realice la limpieza.</span><span class="sxs-lookup"><span data-stu-id="9b77b-185">Do the cleanup.</span></span>
-   <span data-ttu-id="9b77b-186">Apaga.</span><span class="sxs-lookup"><span data-stu-id="9b77b-186">Shut down.</span></span>

<span data-ttu-id="9b77b-187">Para permitir que el administrador de liberador de espacio en disco administre estas tareas, un controlador debe exportar [**IEmptyVolumeCache**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache) para Windows 98 o [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) para Windows Millennium Edition (Windows Me), Windows 2000 y Windows XP.</span><span class="sxs-lookup"><span data-stu-id="9b77b-187">To allow the disk cleanup manager to manage these tasks, a handler must export either [**IEmptyVolumeCache**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache) for Windows 98 or [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) for Windows Millennium Edition (Windows Me), Windows 2000, and Windows XP.</span></span> <span data-ttu-id="9b77b-188">Dado que **IEmptyVolumeCache2** hereda de **IEmptyVolumeCache**, agregando solo el método adicional **InitializeEx**, se requiere relativamente poco trabajo adicional para implementar ambos.</span><span class="sxs-lookup"><span data-stu-id="9b77b-188">Because **IEmptyVolumeCache2** inherits from **IEmptyVolumeCache**, adding only the additional method **InitializeEx**, relatively little extra work is required to implement both.</span></span> <span data-ttu-id="9b77b-189">A menos que el controlador esté destinado solo a uno de estos sistemas operativos, debe exportar ambas interfaces.</span><span class="sxs-lookup"><span data-stu-id="9b77b-189">Unless your handler is intended for only one of these operating systems, it should export both interfaces.</span></span>

<span data-ttu-id="9b77b-190">Para exportar estas interfaces, debe implementar estos métodos correspondientes a las cinco tareas básicas.</span><span class="sxs-lookup"><span data-stu-id="9b77b-190">To export these interfaces, you must implement these methods corresponding to the five basic tasks.</span></span>

-   [<span data-ttu-id="9b77b-191">Initialize/InitializeEx</span><span class="sxs-lookup"><span data-stu-id="9b77b-191">Initialize/InitializeEx</span></span>](#initializeinitializeex)
-   [<span data-ttu-id="9b77b-192">GetSpaceUsed</span><span class="sxs-lookup"><span data-stu-id="9b77b-192">GetSpaceUsed</span></span>](#getspaceused)
-   [<span data-ttu-id="9b77b-193">ShowProperties (</span><span class="sxs-lookup"><span data-stu-id="9b77b-193">ShowProperties</span></span>](#showproperties)
-   [<span data-ttu-id="9b77b-194">Purgar</span><span class="sxs-lookup"><span data-stu-id="9b77b-194">Purge</span></span>](#purge)
-   [<span data-ttu-id="9b77b-195">Desactivación</span><span class="sxs-lookup"><span data-stu-id="9b77b-195">Deactivate</span></span>](#deactivate)

### <a name="initializeinitializeex"></a><span data-ttu-id="9b77b-196">Initialize/InitializeEx</span><span class="sxs-lookup"><span data-stu-id="9b77b-196">Initialize/InitializeEx</span></span>

<span data-ttu-id="9b77b-197">Los dos métodos de inicialización, que son bastante similares, se llaman cuando se ejecuta la utilidad liberador de espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-197">The two initialization methods, which are quite similar, are called when the Disk Cleanup utility is run.</span></span> <span data-ttu-id="9b77b-198">El administrador de limpieza de disco 98 de Windows llama al método [**IEmptyVolumeCache:: Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) de un controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-198">The Windows 98 disk cleanup manager calls a handler's [**IEmptyVolumeCache::Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) method.</span></span> <span data-ttu-id="9b77b-199">Windows Millennium Edition (Windows me), Windows 2000 o Windows XP Disk Cleanup Manager, sin embargo, primero intenta llamar a [**IEmptyVolumeCache2:: InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) y solo usa **IEmptyVolumeCache:: Initialize** si el controlador no expone [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) .</span><span class="sxs-lookup"><span data-stu-id="9b77b-199">The Windows Millennium Edition (Windows Me), Windows 2000, or Windows XP disk cleanup manager, however, first tries calling [**IEmptyVolumeCache2::InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) and only uses **IEmptyVolumeCache::Initialize** if [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) is not exposed by the handler.</span></span> <span data-ttu-id="9b77b-200">El administrador de liberador de espacio en disco pasa información al método, como la clave del registro del controlador y el volumen del disco que se va a limpiar.</span><span class="sxs-lookup"><span data-stu-id="9b77b-200">The disk cleanup manager passes information to the method, such as the handler's registry key and the disk volume that is to be cleaned.</span></span>

<span data-ttu-id="9b77b-201">Cualquiera de los métodos puede devolver varias cadenas de presentación y establecer una o varias marcas.</span><span class="sxs-lookup"><span data-stu-id="9b77b-201">Either method can return various display strings and set one or more flags.</span></span> <span data-ttu-id="9b77b-202">La principal diferencia entre los dos métodos es la forma en que se trata el texto que se muestra en el administrador de liberador de espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-202">The primary difference between the two methods is how the text displayed in the disk cleanup manager is handled.</span></span> <span data-ttu-id="9b77b-203">Las siguientes tres cadenas se ven afectadas.</span><span class="sxs-lookup"><span data-stu-id="9b77b-203">The following three strings are affected.</span></span>



| <span data-ttu-id="9b77b-204">String</span><span class="sxs-lookup"><span data-stu-id="9b77b-204">String</span></span>       | <span data-ttu-id="9b77b-205">Propósito</span><span class="sxs-lookup"><span data-stu-id="9b77b-205">Purpose</span></span>                                                                            | <span data-ttu-id="9b77b-206">Inicialización</span><span class="sxs-lookup"><span data-stu-id="9b77b-206">Initialize</span></span>                                                                           | <span data-ttu-id="9b77b-207">InitializeEx</span><span class="sxs-lookup"><span data-stu-id="9b77b-207">InitializeEx</span></span>                                                                                     |
|--------------|------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------|
| <span data-ttu-id="9b77b-208">Display Name (Nombre para mostrar)</span><span class="sxs-lookup"><span data-stu-id="9b77b-208">Display Name</span></span> | <span data-ttu-id="9b77b-209">El nombre del controlador mostrado en el cuadro de lista del administrador de liberador de espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-209">The handler's name displayed in the disk cleanup manager's list box.</span></span>               | <span data-ttu-id="9b77b-210">Si *ppwszDisplayName* es **null**, el valor predeterminado se recupera del registro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-210">If *ppwszDisplayName* is **NULL**, the default value is retrieved from the registry.</span></span> | <span data-ttu-id="9b77b-211">Se debe especificar una cadena localizada correctamente en *ppwszDisplayName* no se usan valores de registro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-211">A properly localized string must be specified in *ppwszDisplayName* no registry values are used.</span></span> |
| <span data-ttu-id="9b77b-212">Descripción</span><span class="sxs-lookup"><span data-stu-id="9b77b-212">Description</span></span>  | <span data-ttu-id="9b77b-213">Texto descriptivo que se muestra debajo del cuadro de lista cuando se selecciona el nombre del controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-213">Descriptive text displayed below the list box when the handler's name is selected.</span></span> | <span data-ttu-id="9b77b-214">Si *ppwszDescription* es **null**, el valor predeterminado se recupera del registro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-214">If *ppwszDescription* is **NULL**, the default value is retrieved from the registry.</span></span> | <span data-ttu-id="9b77b-215">Se debe especificar una cadena localizada correctamente en *ppwszDescription* no se usan valores de registro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-215">A properly localized string must be specified in *ppwszDescription* no registry values are used.</span></span> |
| <span data-ttu-id="9b77b-216">Texto del botón</span><span class="sxs-lookup"><span data-stu-id="9b77b-216">Button Text</span></span>  | <span data-ttu-id="9b77b-217">Texto del botón opcional que permite a los usuarios Mostrar la interfaz de usuario del controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-217">Text for the optional button that allows users to display the handler's UI.</span></span>        | <span data-ttu-id="9b77b-218">Ningún parámetro está disponible.</span><span class="sxs-lookup"><span data-stu-id="9b77b-218">No parameter available.</span></span> <span data-ttu-id="9b77b-219">Debe especificarse en el registro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-219">Must be specified in the registry.</span></span>                           | <span data-ttu-id="9b77b-220">Se debe especificar una cadena localizada correctamente en *ppwszBtnText* no se usan valores de registro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-220">A properly localized string must be specified in *ppwszBtnText* no registry values are used.</span></span>     |



 

<span data-ttu-id="9b77b-221">El parámetro *pdwFlags* que se encuentra en ambos métodos de inicialización reconoce el mismo conjunto de marcas.</span><span class="sxs-lookup"><span data-stu-id="9b77b-221">The *pdwFlags* parameter found in both initialization methods recognizes the same set of flags.</span></span> <span data-ttu-id="9b77b-222">El administrador de limpieza de disco pasa dos de estas marcas al método.</span><span class="sxs-lookup"><span data-stu-id="9b77b-222">Two of these flags are passed to the method by the disk cleanup manager.</span></span>

-   <span data-ttu-id="9b77b-223">**EVCF \_ SETTINGSMODE**</span><span class="sxs-lookup"><span data-stu-id="9b77b-223">**EVCF\_SETTINGSMODE**</span></span>

    <span data-ttu-id="9b77b-224">Si el administrador de liberador de espacio en disco se ejecuta según una programación, establece la marca **EVCF \_ SETTINGSMODE** .</span><span class="sxs-lookup"><span data-stu-id="9b77b-224">If the disk cleanup manager is being run on a schedule, it sets the **EVCF\_SETTINGSMODE** flag.</span></span> <span data-ttu-id="9b77b-225">Si se establece esta marca, el administrador de liberador de espacio en disco no llama a los métodos [GetSpaceUsed](#getspaceused), [Purge](#purge)ni [showProperties (](#showproperties) .</span><span class="sxs-lookup"><span data-stu-id="9b77b-225">If this flag is set, the disk cleanup manager does not call the [GetSpaceUsed](#getspaceused), [Purge](#purge), or [ShowProperties](#showproperties) methods.</span></span> <span data-ttu-id="9b77b-226">El método [**Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) o [**InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) del controlador debe administrar todas las tareas realizadas normalmente por [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) y [**Purge**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-purge).</span><span class="sxs-lookup"><span data-stu-id="9b77b-226">The handler's [**Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) or [**InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) method must handle all of the tasks normally performed by [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) and [**Purge**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-purge).</span></span> <span data-ttu-id="9b77b-227">Dado que no hay ninguna oportunidad para los comentarios de los usuarios, solo se deben tocar los archivos que son extremadamente seguros de limpiar.</span><span class="sxs-lookup"><span data-stu-id="9b77b-227">Because there is no opportunity for user feedback, only those files that are extremely safe to clean up should be touched.</span></span> <span data-ttu-id="9b77b-228">Debe omitir el parámetro *pcwszVolume* del método de inicialización y limpiar los archivos innecesarios independientemente de la unidad en la que se encuentren.</span><span class="sxs-lookup"><span data-stu-id="9b77b-228">You should ignore the initialization method's *pcwszVolume* parameter and clean unneeded files regardless of what drive they are on.</span></span>

-   <span data-ttu-id="9b77b-229">**EVCF \_ OUTOFDISKSPACE**</span><span class="sxs-lookup"><span data-stu-id="9b77b-229">**EVCF\_OUTOFDISKSPACE**</span></span>

    <span data-ttu-id="9b77b-230">Si se establece la marca **EVCF \_ OUTOFDISKSPACE** , la unidad de disco del usuario es muy poco importante de espacio.</span><span class="sxs-lookup"><span data-stu-id="9b77b-230">If the **EVCF\_OUTOFDISKSPACE** flag is set, the user's disk drive is critically short of space.</span></span> <span data-ttu-id="9b77b-231">El controlador debe ser agresivo para eliminar archivos, incluso si se produce una pérdida de rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9b77b-231">The handler should be aggressive about deleting files, even if it results in a performance loss.</span></span> <span data-ttu-id="9b77b-232">Sin embargo, obviamente el controlador no debe eliminar los archivos que podrían provocar errores en una aplicación o que el usuario pierda datos.</span><span class="sxs-lookup"><span data-stu-id="9b77b-232">However, the handler obviously should not delete files that would cause an application to fail or the user to lose data.</span></span>

<span data-ttu-id="9b77b-233">El controlador de limpieza de disco establece las marcas restantes y se devuelven al administrador de liberador de espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-233">The remaining flags are set by the disk cleanup handler and returned to the disk cleanup manager.</span></span> <span data-ttu-id="9b77b-234">Para obtener más información, vea las páginas de referencia de métodos para [**IEmptyVolumeCache:: Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) y [**IEmptyVolumeCache2:: InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex).</span><span class="sxs-lookup"><span data-stu-id="9b77b-234">For more information, see the method reference pages for [**IEmptyVolumeCache::Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) and [**IEmptyVolumeCache2::InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex).</span></span>

-   <span data-ttu-id="9b77b-235">EVCF \_ DONTSHOWIFZERO</span><span class="sxs-lookup"><span data-stu-id="9b77b-235">EVCF\_DONTSHOWIFZERO</span></span>

    <span data-ttu-id="9b77b-236">Muestre el controlador en el cuadro de lista del administrador de liberador de espacio en disco solo si el valor devuelto por [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) indica que el controlador puede liberar espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-236">Display the handler in the disk cleanup manager's list box only if the value returned by [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) indicates that the handler can free some disk space.</span></span>

-   <span data-ttu-id="9b77b-237">EVCF \_ ENABLEBYDEFAULT</span><span class="sxs-lookup"><span data-stu-id="9b77b-237">EVCF\_ENABLEBYDEFAULT</span></span>

    <span data-ttu-id="9b77b-238">Especifica que el controlador está habilitado de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="9b77b-238">Specifies that the handler is enabled by default.</span></span> <span data-ttu-id="9b77b-239">Se ejecutará cada vez que se produzca un limpieza de disco, a menos que el usuario lo deshabilite desactivando la casilla de la lista de controladores del administrador de limpieza de disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-239">It will run every time a disk cleanup takes place unless the user disables it by clearing its check box in the disk cleanup manager's list of handlers.</span></span>

-   <span data-ttu-id="9b77b-240">EVCF \_ ENABLEBYDEFAULT \_ auto</span><span class="sxs-lookup"><span data-stu-id="9b77b-240">EVCF\_ENABLEBYDEFAULT\_AUTO</span></span>

    <span data-ttu-id="9b77b-241">Especifica que el controlador se habilita automáticamente para ejecutarse durante las limpiezas programadas.</span><span class="sxs-lookup"><span data-stu-id="9b77b-241">Specifies that the handler is automatically enabled to run during scheduled cleanups.</span></span>

-   <span data-ttu-id="9b77b-242">EVCF \_ HASSETTINGS</span><span class="sxs-lookup"><span data-stu-id="9b77b-242">EVCF\_HASSETTINGS</span></span>

    <span data-ttu-id="9b77b-243">Establezca esta marca si el controlador tiene una interfaz de usuario para mostrar.</span><span class="sxs-lookup"><span data-stu-id="9b77b-243">Set this flag if your handler has a UI to display.</span></span> <span data-ttu-id="9b77b-244">En respuesta, el administrador de liberador de espacio en disco muestra un botón cuando se selecciona ese controlador en el cuadro de lista.</span><span class="sxs-lookup"><span data-stu-id="9b77b-244">In response, the disk cleanup manager displays a button when that handler is selected in the list box.</span></span> <span data-ttu-id="9b77b-245">Si se hace clic en ese botón, el administrador de liberador de espacio en disco llama a [**showProperties (**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-showproperties).</span><span class="sxs-lookup"><span data-stu-id="9b77b-245">If that button is clicked, the disk cleanup manager calls [**ShowProperties**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-showproperties).</span></span>

-   <span data-ttu-id="9b77b-246">EVCF \_ REMOVEFROMLIST</span><span class="sxs-lookup"><span data-stu-id="9b77b-246">EVCF\_REMOVEFROMLIST</span></span>

    <span data-ttu-id="9b77b-247">Elimine el nombre del controlador de la lista de controladores disponibles después de que el controlador se haya ejecutado una vez.</span><span class="sxs-lookup"><span data-stu-id="9b77b-247">Delete the handler's name from the list of available handlers after the handler has been run once.</span></span> <span data-ttu-id="9b77b-248">La información del registro del controlador también se elimina.</span><span class="sxs-lookup"><span data-stu-id="9b77b-248">The handler's registry information is also deleted.</span></span>

### <a name="getspaceused"></a><span data-ttu-id="9b77b-249">GetSpaceUsed</span><span class="sxs-lookup"><span data-stu-id="9b77b-249">GetSpaceUsed</span></span>

<span data-ttu-id="9b77b-250">El administrador de liberador de espacio en disco llama a este método para determinar la cantidad de espacio que un controlador de limpieza de disco puede liberar potencialmente.</span><span class="sxs-lookup"><span data-stu-id="9b77b-250">The disk cleanup manager calls this method to determine how much space a disk cleanup handler can potentially free.</span></span> <span data-ttu-id="9b77b-251">A continuación, el administrador de limpieza de disco muestra ese valor a la derecha del nombre del controlador en el cuadro de lista.</span><span class="sxs-lookup"><span data-stu-id="9b77b-251">The disk cleanup manager then displays that value to the right of the handler's name in the list box.</span></span> <span data-ttu-id="9b77b-252">Esta operación se realiza en todos los controladores registrados con el administrador de liberador de espacio en disco cuando se inicia el administrador y antes de que se muestre la interfaz de usuario principal del administrador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-252">This operation is performed on all of the handlers registered with the disk cleanup manager when the manager is launched and before the manager's main UI is displayed.</span></span> <span data-ttu-id="9b77b-253">Cuando se llama a [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) , el controlador debe examinar los archivos de los que es responsable, determinar cuáles son candidatos de limpieza y devolver la cantidad de espacio en disco que puede liberar.</span><span class="sxs-lookup"><span data-stu-id="9b77b-253">When [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) is called, the handler should scan the files that it is responsible for, determine which of them are cleanup candidates, and return the amount of disk space that it can free.</span></span>

<span data-ttu-id="9b77b-254">Dado que el análisis puede ser un proceso largo, el administrador de liberador de espacio en disco usa el parámetro *picb* de este método para pasar un puntero a una interfaz [**IEmptyVolumeCacheCallBack**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecachecallback) .</span><span class="sxs-lookup"><span data-stu-id="9b77b-254">Because scanning can be a lengthy process, the disk cleanup manager uses this method's *picb* parameter to pass a pointer to an [**IEmptyVolumeCacheCallBack**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecachecallback) interface.</span></span> <span data-ttu-id="9b77b-255">El controlador usa la interfaz periódicamente durante el examen para llamar a [**IEmptyVolumeCacheCallBack:: ScanProgress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress), que sirve para dos propósitos.</span><span class="sxs-lookup"><span data-stu-id="9b77b-255">The handler uses the interface periodically during the scan to call [**IEmptyVolumeCacheCallBack::ScanProgress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress), which serves two purposes.</span></span>

-   <span data-ttu-id="9b77b-256">Permite que el administrador de liberador de espacio en disco actualice una barra de progreso, lo que informa al usuario de cómo progresa el examen.</span><span class="sxs-lookup"><span data-stu-id="9b77b-256">Allows the disk cleanup manager to update a progress bar, informing the user how the scan is progressing.</span></span>
-   <span data-ttu-id="9b77b-257">Notifica al controlador que detenga el examen en caso de que se haga clic en el botón **Cancelar** de la ventana de progreso.</span><span class="sxs-lookup"><span data-stu-id="9b77b-257">Notifies the handler to stop the scan in the event that the progress window's **Cancel** button is clicked.</span></span> <span data-ttu-id="9b77b-258">Ese evento de botón no se comunica directamente con el controlador; en su lugar, el administrador de liberador de espacio en disco devuelve E \_ Abort la próxima vez que [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) llame a [**IEmptyVolumeCacheCallBack:: ScanProgress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress).</span><span class="sxs-lookup"><span data-stu-id="9b77b-258">That button event is not communicated directly to the handler; instead, the disk cleanup manager returns E\_ABORT the next time [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) calls [**IEmptyVolumeCacheCallBack::ScanProgress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress).</span></span>

### <a name="showproperties"></a><span data-ttu-id="9b77b-259">ShowProperties (</span><span class="sxs-lookup"><span data-stu-id="9b77b-259">ShowProperties</span></span>

<span data-ttu-id="9b77b-260">Antes de iniciar la limpieza, el controlador puede mostrar una interfaz de usuario normalmente en forma de ventana del explorador de Windows que permite al usuario ver una lista de archivos o clases de archivos seleccionados para su limpieza por el controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-260">Before starting cleanup, the handler can display a UI typically in the form of a Windows Explorer window that allows the user to see a list of files or classes of files selected for cleanup by the handler.</span></span> <span data-ttu-id="9b77b-261">Si el controlador establece la marca **EVCF \_ HASSETTINGS** cuando se llama a [**Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) o [**InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) , el usuario puede solicitar la interfaz de usuario haciendo clic en el botón que se muestra para ese propósito en el administrador de liberador de espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-261">If the handler sets the **EVCF\_HASSETTINGS** flag when [**Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize) or [**InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) is called, the user can request the UI by clicking the button displayed for that purpose in the disk cleanup manager.</span></span> <span data-ttu-id="9b77b-262">El texto del botón varía entre el controlador y el controlador, pero "ver archivos", "ver páginas" y "opciones" son etiquetas comunes.</span><span class="sxs-lookup"><span data-stu-id="9b77b-262">The button text varies from handler to handler, but "View Files," "View Pages," and "Options" are common labels.</span></span>

<span data-ttu-id="9b77b-263">Cuando se hace clic en el botón, el administrador de liberador de espacio en disco llama a [**showProperties (**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-showproperties) para solicitar al controlador que muestre la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="9b77b-263">When the button is clicked, the disk cleanup manager calls [**ShowProperties**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-showproperties) to prompt the handler to display the UI.</span></span> <span data-ttu-id="9b77b-264">La interfaz de usuario debe crearse como un elemento secundario de la ventana cuyo identificador se pasa en el parámetro *hWnd* del método **showProperties (** .</span><span class="sxs-lookup"><span data-stu-id="9b77b-264">The UI should be created as a child of the window whose handle is passed in the **ShowProperties** method's *hwnd* parameter.</span></span>

### <a name="purge"></a><span data-ttu-id="9b77b-265">Purgar</span><span class="sxs-lookup"><span data-stu-id="9b77b-265">Purge</span></span>

<span data-ttu-id="9b77b-266">El administrador de liberador de espacio en disco llama al método [**Purge**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-purge) del controlador para establecer la limpieza en movimiento.</span><span class="sxs-lookup"><span data-stu-id="9b77b-266">The disk cleanup manager calls the handler's [**Purge**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-purge) method to set the cleanup in motion.</span></span> <span data-ttu-id="9b77b-267">El parámetro *picb* del método es un puntero a la interfaz [**IEmptyVolumeCacheCallBack**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecachecallback) del administrador de limpieza de disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-267">The method's *picb* parameter is a pointer to the disk cleanup manager's [**IEmptyVolumeCacheCallBack**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecachecallback) interface.</span></span> <span data-ttu-id="9b77b-268">Al igual que con el método [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) , el controlador debe usar la interfaz de devolución de llamada periódicamente para informar del progreso y consultar el administrador del liberador de espacio en disco si el usuario ha hecho clic en **Cancelar**.</span><span class="sxs-lookup"><span data-stu-id="9b77b-268">As with the [**GetSpaceUsed**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-getspaceused) method, the handler should use the callback interface periodically to report its progress and query the disk cleanup manager whether the user has clicked **Cancel**.</span></span> <span data-ttu-id="9b77b-269">Sin embargo, tenga en cuenta que el método **Purge** debe llamar a [**IEmptyVolumeCacheCallBack::P urgeprogress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-purgeprogress), no a [**ScanProgress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress).</span><span class="sxs-lookup"><span data-stu-id="9b77b-269">However, note that the **Purge** method must call [**IEmptyVolumeCacheCallBack::PurgeProgress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-purgeprogress), not [**ScanProgress**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecachecallback-scanprogress).</span></span>

### <a name="deactivate"></a><span data-ttu-id="9b77b-270">Desactivación</span><span class="sxs-lookup"><span data-stu-id="9b77b-270">Deactivate</span></span>

<span data-ttu-id="9b77b-271">Se llama al método [**Deactivate**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-deactivate) cuando se está preparando el cierre del liberador de espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-271">The [**Deactivate**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-deactivate) method is called when the disk cleanup manager is preparing to shut down.</span></span> <span data-ttu-id="9b77b-272">El controlador debe realizar cualquier tarea de limpieza necesaria y devolver.</span><span class="sxs-lookup"><span data-stu-id="9b77b-272">The handler should perform any needed cleanup tasks and return.</span></span> <span data-ttu-id="9b77b-273">Si no desea que el controlador se ejecute de nuevo, establezca la marca **EVCF \_ REMOVEFROMLIST** en el parámetro *pdwFlags* del método de inicialización.</span><span class="sxs-lookup"><span data-stu-id="9b77b-273">If you don't want the handler to be run again, set the **EVCF\_REMOVEFROMLIST** flag in the initialization method's *pdwFlags* parameter.</span></span> <span data-ttu-id="9b77b-274">Si se establece esta marca, el administrador de liberador de espacio en disco quita el controlador de la lista y elimina las entradas del registro del controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-274">If this flag is set, the disk cleanup manager removes the handler from its list and deletes the handler's registry entries.</span></span> <span data-ttu-id="9b77b-275">Debe volver a agregar las entradas del registro para volver a ejecutar el controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-275">You must re-add the registry entries to run the handler again.</span></span> <span data-ttu-id="9b77b-276">Esta marca se usa normalmente para los controladores que se ejecutan una sola vez.</span><span class="sxs-lookup"><span data-stu-id="9b77b-276">This flag is typically used for handlers that are run only once.</span></span>

## <a name="registering-a-disk-cleanup-handler"></a><span data-ttu-id="9b77b-277">Registrar un controlador de limpieza de disco</span><span class="sxs-lookup"><span data-stu-id="9b77b-277">Registering a Disk Cleanup Handler</span></span>

<span data-ttu-id="9b77b-278">Para agregar un controlador a la lista del administrador de liberadores de espacio en disco, deben agregarse ciertas claves y valores al registro de Windows.</span><span class="sxs-lookup"><span data-stu-id="9b77b-278">To add a handler to the disk cleanup manager's list, certain keys and values must be added to the Windows registry.</span></span>

-   [<span data-ttu-id="9b77b-279">Registrar el CLSID de un controlador</span><span class="sxs-lookup"><span data-stu-id="9b77b-279">Registering a Handler's CLSID</span></span>](#registering-a-handlers-clsid)
-   [<span data-ttu-id="9b77b-280">Registro de un controlador con el administrador de liberador de espacio en disco: General</span><span class="sxs-lookup"><span data-stu-id="9b77b-280">Registering a Handler with the Disk Cleanup Manager: General</span></span>](#registering-a-handler-with-the-disk-cleanup-manager-general)
-   [<span data-ttu-id="9b77b-281">Registro de un controlador con el administrador de liberador de espacio en disco: Windows 2000 o sistemas posteriores</span><span class="sxs-lookup"><span data-stu-id="9b77b-281">Registering a Handler with the Disk Cleanup Manager: Windows 2000 or Later Systems</span></span>](#registering-a-handler-with-the-disk-cleanup-manager-windows-2000-or-later-systems)
-   [<span data-ttu-id="9b77b-282">Usar el objeto DataDrivenCleaner</span><span class="sxs-lookup"><span data-stu-id="9b77b-282">Using the DataDrivenCleaner Object</span></span>](#using-the-datadrivencleaner-object)
-   [<span data-ttu-id="9b77b-283">Ejemplo de registro de un controlador de limpieza de disco</span><span class="sxs-lookup"><span data-stu-id="9b77b-283">Example Registration of a Disk Cleanup Handler</span></span>](#example-registration-of-a-disk-cleanup-handler)

### <a name="registering-a-handlers-clsid"></a><span data-ttu-id="9b77b-284">Registrar el CLSID de un controlador</span><span class="sxs-lookup"><span data-stu-id="9b77b-284">Registering a Handler's CLSID</span></span>

<span data-ttu-id="9b77b-285">Al igual que con todos los objetos COM, el GUID y el archivo DLL del objeto controlador deben estar registrados bajo la clave **CLSID** en **\_ las clases HKEY \_ raíz**.</span><span class="sxs-lookup"><span data-stu-id="9b77b-285">As with all COM objects, the handler object's GUID and DLL must be registered under the **CLSID** key in **HKEY\_CLASSES\_ROOT**.</span></span> <span data-ttu-id="9b77b-286">También puede registrar un icono que se muestra junto al nombre del controlador en el cuadro de lista del administrador de liberador de espacio en disco, pero es opcional.</span><span class="sxs-lookup"><span data-stu-id="9b77b-286">You can also register an icon that is displayed next to the handler's name in the disk cleanup manager's list box, but this is optional.</span></span> <span data-ttu-id="9b77b-287">En el ejemplo siguiente se muestran las claves, los valores y los datos implicados.</span><span class="sxs-lookup"><span data-stu-id="9b77b-287">The following example shows the keys, values, and data involved.</span></span>

```
HKEY_CLASSES_ROOT
   CLSID
      Handler's GUID
         DefaultIcon
            (Default) = Handler's Icon Path, Icon Index
         InprocServer32
            (Default) = Handler's DLL path
            ThreadingModel = Apartment
```

### <a name="registering-a-handler-with-the-disk-cleanup-manager-general"></a><span data-ttu-id="9b77b-288">Registro de un controlador con el administrador de liberador de espacio en disco: General</span><span class="sxs-lookup"><span data-stu-id="9b77b-288">Registering a Handler with the Disk Cleanup Manager: General</span></span>

<span data-ttu-id="9b77b-289">Para completar el registro, un controlador debe agregar una clave que contenga sus detalles, tal como se muestra aquí.</span><span class="sxs-lookup"><span data-stu-id="9b77b-289">To complete the registration, a handler must add a key holding its specifics as shown here.</span></span> <span data-ttu-id="9b77b-290">En el resto de esta sección se describe el contenido de esta clave.</span><span class="sxs-lookup"><span data-stu-id="9b77b-290">The remainder of this section discusses the contents of this key.</span></span>

```
HKEY_LOCAL_MACHINE
   Software
      Microsoft
         Windows
            CurrentVersion
               Explorer
                  VolumeCaches
                     Handler's Key
```

<span data-ttu-id="9b77b-291">En general, el nombre de la clave que contiene los detalles de un controlador se denomina para el tipo de archivo que controla, como **archivos de programa descargados**, pero esto no es un requisito.</span><span class="sxs-lookup"><span data-stu-id="9b77b-291">In general, the name of the key holding a handler's particulars is named for the type of file that it handles, such as **Downloaded Program Files**, but this is not a requirement.</span></span> <span data-ttu-id="9b77b-292">En la siguiente tabla se detallan los posibles valores que se encuentran en esta clave.</span><span class="sxs-lookup"><span data-stu-id="9b77b-292">The following table details the possible values found under this key.</span></span>

> [!Note]  
> <span data-ttu-id="9b77b-293">Solo se requiere el valor predeterminado que especifica el identificador de clase (CLSID) del controlador, todos los demás valores son opcionales.</span><span class="sxs-lookup"><span data-stu-id="9b77b-293">Only the Default value specifying the handler's class identifier (CLSID) is required all other values are optional.</span></span>

 



<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="header">
<th><span data-ttu-id="9b77b-294">Value</span><span class="sxs-lookup"><span data-stu-id="9b77b-294">Value</span></span></th>
<th><span data-ttu-id="9b77b-295">Tipo</span><span class="sxs-lookup"><span data-stu-id="9b77b-295">Type</span></span></th>
<th><span data-ttu-id="9b77b-296">Significado</span><span class="sxs-lookup"><span data-stu-id="9b77b-296">Meaning</span></span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span data-ttu-id="9b77b-297">Valor predeterminado</span><span class="sxs-lookup"><span data-stu-id="9b77b-297">Default</span></span></td>
<td><span data-ttu-id="9b77b-298">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9b77b-298">REG_SZ</span></span></td>
<td><span data-ttu-id="9b77b-299">CLSID del controlador tal como está registrado en <strong>HKEY_CLASSES_ROOT</strong> \ <strong>CLSID</strong>.</span><span class="sxs-lookup"><span data-stu-id="9b77b-299">The handler's CLSID as registered under <strong>HKEY_CLASSES_ROOT</strong>\<strong>CLSID</strong>.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="9b77b-300">AdvancedButtonText</span><span class="sxs-lookup"><span data-stu-id="9b77b-300">AdvancedButtonText</span></span></td>
<td><span data-ttu-id="9b77b-301">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9b77b-301">REG_SZ</span></span></td>
<td><span data-ttu-id="9b77b-302">Texto del botón opcional en el que los usuarios pueden hacer clic para mostrar la interfaz de usuario del controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-302">Text for the optional button that users can click to display the handler's UI.</span></span> <span data-ttu-id="9b77b-303">El carácter & se puede colocar delante de un carácter para asignar un método abreviado de teclado para el botón.</span><span class="sxs-lookup"><span data-stu-id="9b77b-303">The & character can be placed before a character to assign a keyboard shortcut for the button.</span></span> <span data-ttu-id="9b77b-304">Los controladores que exponen <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2:: InitializeEx</strong></a>omiten el valor AdvancedButtonText.</span><span class="sxs-lookup"><span data-stu-id="9b77b-304">The AdvancedButtonText value is ignored by handlers exposing <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2::InitializeEx</strong></a>.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="9b77b-305">CleanupString</span><span class="sxs-lookup"><span data-stu-id="9b77b-305">CleanupString</span></span></td>
<td><span data-ttu-id="9b77b-306">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9b77b-306">REG_SZ</span></span></td>
<td><span data-ttu-id="9b77b-307">Línea de comandos que especifica un archivo ejecutable y parámetros de línea de comandos opcionales.</span><span class="sxs-lookup"><span data-stu-id="9b77b-307">Command line specifying an executable file and optional command line parameters.</span></span> <span data-ttu-id="9b77b-308">Esta línea de comandos se ejecuta al finalizar el liberador de espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-308">This command line is run at the completion of the disk cleanup.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="9b77b-309">CSIDL</span><span class="sxs-lookup"><span data-stu-id="9b77b-309">CSIDL</span></span></td>
<td><span data-ttu-id="9b77b-310">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="9b77b-310">REG_DWORD</span></span></td>
<td><span data-ttu-id="9b77b-311">Identificador independiente del sistema para una carpeta especial que se va a incluir en la búsqueda de archivos.</span><span class="sxs-lookup"><span data-stu-id="9b77b-311">A system-independent identifier for a special folder to include in the file search.</span></span> <span data-ttu-id="9b77b-312">Este valor debe especificarse como un valor numérico para la instancia, 0X0000001C en lugar de CSIDL_LOCAL_APPDATA.</span><span class="sxs-lookup"><span data-stu-id="9b77b-312">This value must be entered as a numerical value for instance, 0x0000001c rather than CSIDL_LOCAL_APPDATA.</span></span> <span data-ttu-id="9b77b-313">Para obtener una lista de los valores posibles, vea <a href="/windows/desktop/shell/csidl"><strong>CSIDL</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="9b77b-313">For a list of possible values, see <a href="/windows/desktop/shell/csidl"><strong>CSIDL</strong></a>.</span></span> <span data-ttu-id="9b77b-314">Solo se puede usar un valor único.</span><span class="sxs-lookup"><span data-stu-id="9b77b-314">Only a single value can be used.</span></span><br/> <span data-ttu-id="9b77b-315">Si se especifica el valor de la carpeta, la ubicación indicada por el valor CSIDL se antepone a esa información para crear una ruta de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="9b77b-315">If the Folder value is specified, the location indicated by the CSIDL value is prepended to that information to compose a search path.</span></span> <span data-ttu-id="9b77b-316">Por ejemplo, considere el siguiente escenario.</span><span class="sxs-lookup"><span data-stu-id="9b77b-316">For instance, consider the following scenario.</span></span><br/>
<ul>
<li><span data-ttu-id="9b77b-317">El valor CSIDL se especifica como 0x0000000d (CSIDL_MYMUSIC)</span><span class="sxs-lookup"><span data-stu-id="9b77b-317">The CSIDL value is specified as 0x0000000d (CSIDL_MYMUSIC)</span></span></li>
<li><span data-ttu-id="9b77b-318">La carpeta mi música se encuentra en C:\Documents and Settings \<em>nombreDeUsuario</em>\Mis Music.</span><span class="sxs-lookup"><span data-stu-id="9b77b-318">Your My Music folder is located at C:\Documents and Settings\<em>username</em>\My Music</span></span></li>
<li><span data-ttu-id="9b77b-319">El valor de la carpeta contiene &quot; Jazz\Singers&quot;</span><span class="sxs-lookup"><span data-stu-id="9b77b-319">The Folder value contains &quot;Jazz\Singers&quot;</span></span></li>
</ul>
<span data-ttu-id="9b77b-320">El resultado de ese escenario es que el controlador de liberador de espacio en disco busca en la carpeta C:\Documents and Settings \<em>nombreDeUsuario</em>\Mis Music\Jazz\Singers</span><span class="sxs-lookup"><span data-stu-id="9b77b-320">The result of that scenario is that the disk cleanup handler searches the C:\Documents and Settings\<em>username</em>\My Music\Jazz\Singers folder.</span></span> <span data-ttu-id="9b77b-321">Tenga en cuenta que la barra diagonal que precede al valor de carpeta se agrega si no está presente.</span><span class="sxs-lookup"><span data-stu-id="9b77b-321">Note that the slash preceding the Folder value is added if it is not present.</span></span><br/></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="9b77b-322">Descripción</span><span class="sxs-lookup"><span data-stu-id="9b77b-322">Description</span></span></td>
<td><span data-ttu-id="9b77b-323">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9b77b-323">REG_SZ</span></span></td>
<td><span data-ttu-id="9b77b-324">Texto descriptivo que se muestra debajo del cuadro de lista del administrador de limpieza de disco cuando se selecciona el nombre del controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-324">Descriptive text displayed below the disk cleanup manager's list box when the handler's name is selected.</span></span> <span data-ttu-id="9b77b-325">Aquí puede explicar lo que hace el controlador, los archivos con los que se preocupa y cualquier otra información que elucidatory al usuario.</span><span class="sxs-lookup"><span data-stu-id="9b77b-325">Here you can explain what the handler does, what files it concerns itself with, and any other information elucidatory to the user.</span></span> <span data-ttu-id="9b77b-326">Si el controlador no expone <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2:: InitializeEx</strong></a> , este texto se puede invalidar mediante el método <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>IEmptyVolumeCache:: Initialize</strong></a> del controlador especificando una cadena alternativa en el parámetro <em>ppwszDescription</em> cuando se llama al método.</span><span class="sxs-lookup"><span data-stu-id="9b77b-326">If <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2::InitializeEx</strong></a> is not exposed by the handler, this text can be overridden through the handler's <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>IEmptyVolumeCache::Initialize</strong></a> method by specifying an alternate string in the <em>ppwszDescription</em> parameter when the method is called.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="9b77b-327">Pantalla</span><span class="sxs-lookup"><span data-stu-id="9b77b-327">Display</span></span></td>
<td><span data-ttu-id="9b77b-328">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9b77b-328">REG_SZ</span></span></td>
<td><span data-ttu-id="9b77b-329">Nombre del controlador que se va a mostrar en el cuadro de lista del administrador de liberadores de espacio en disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-329">The handler's name to be displayed in the disk cleanup manager's list box.</span></span> <span data-ttu-id="9b77b-330">Si el controlador no expone <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2:: InitializeEx</strong></a> , este texto se puede invalidar mediante el método <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>IEmptyVolumeCache:: Initialize</strong></a> del controlador especificando una cadena alternativa en el parámetro <em>ppwszDisplayName</em> cuando se llama al método.</span><span class="sxs-lookup"><span data-stu-id="9b77b-330">If <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2::InitializeEx</strong></a> is not exposed by the handler, this text can be overridden through the handler's <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>IEmptyVolumeCache::Initialize</strong></a> method by specifying an alternate string in the <em>ppwszDisplayName</em> parameter when the method is called.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="9b77b-331">FileList</span><span class="sxs-lookup"><span data-stu-id="9b77b-331">FileList</span></span></td>
<td><span data-ttu-id="9b77b-332">REG_SZ o REG_MULTI_SZ</span><span class="sxs-lookup"><span data-stu-id="9b77b-332">REG_SZ or REG_MULTI_SZ</span></span></td>
<td><span data-ttu-id="9b77b-333">Una lista de archivos buscados y limpiados por este controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-333">A list of files searched for and cleaned by this handler.</span></span> <span data-ttu-id="9b77b-334">Puede especificar caracteres comodín mediante el carácter?</span><span class="sxs-lookup"><span data-stu-id="9b77b-334">You can specify wildcards using the ?</span></span> <span data-ttu-id="9b77b-335">o \* caracteres.</span><span class="sxs-lookup"><span data-stu-id="9b77b-335">or \* characters.</span></span> <span data-ttu-id="9b77b-336">Si el valor es de tipo REG_SZ, varias extensiones se separan mediante el | o: caracteres, sin espacios en cada lado.</span><span class="sxs-lookup"><span data-stu-id="9b77b-336">If the value is of type REG_SZ, multiple extensions are separated using the | or : characters, with no spaces on either side of them.</span></span><br/> <span data-ttu-id="9b77b-337">Si se establece la marca de DDEVCF_REMOVEDIRS en el valor Flags, estos valores pueden especificar nombres de directorio y archivos.</span><span class="sxs-lookup"><span data-stu-id="9b77b-337">If the DDEVCF_REMOVEDIRS flag is set in the Flags value, these values can specify directory names as well as files.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="9b77b-338">Marcas</span><span class="sxs-lookup"><span data-stu-id="9b77b-338">Flags</span></span></td>
<td><span data-ttu-id="9b77b-339">REG_DWORD o REG_BINARY</span><span class="sxs-lookup"><span data-stu-id="9b77b-339">REG_DWORD or REG_BINARY</span></span></td>
<td><span data-ttu-id="9b77b-340">Marcas que controlan los elementos del procedimiento de búsqueda y limpieza.</span><span class="sxs-lookup"><span data-stu-id="9b77b-340">Flags controlling elements of the search and cleaning procedure.</span></span> <span data-ttu-id="9b77b-341">Uno o varios de los valores siguientes.</span><span class="sxs-lookup"><span data-stu-id="9b77b-341">One or more of the following values.</span></span>
<ul>
<li><span data-ttu-id="9b77b-342">DDEVCF_DOSUBDIRS (0x00000001).</span><span class="sxs-lookup"><span data-stu-id="9b77b-342">DDEVCF_DOSUBDIRS (0x00000001).</span></span> <span data-ttu-id="9b77b-343">Busque y quite de forma recursiva.</span><span class="sxs-lookup"><span data-stu-id="9b77b-343">Search and remove recursively.</span></span></li>
<li><span data-ttu-id="9b77b-344">DDEVCF_REMOVEAFTERCLEAN (0x00000002).</span><span class="sxs-lookup"><span data-stu-id="9b77b-344">DDEVCF_REMOVEAFTERCLEAN (0x00000002).</span></span> <span data-ttu-id="9b77b-345">Después de que el controlador se ejecute una vez, quítelo del registro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-345">After the handler is run once, remove it from the registry.</span></span></li>
<li><span data-ttu-id="9b77b-346">DDEVCF_REMOVEREADONLY (0x00000004).</span><span class="sxs-lookup"><span data-stu-id="9b77b-346">DDEVCF_REMOVEREADONLY (0x00000004).</span></span> <span data-ttu-id="9b77b-347">Quite los archivos que cumplan los criterios de búsqueda, incluso si son de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="9b77b-347">Remove files that meet the search criteria even if they are read-only.</span></span></li>
<li><span data-ttu-id="9b77b-348">DDEVCF_REMOVESYSTEM (0x00000008).</span><span class="sxs-lookup"><span data-stu-id="9b77b-348">DDEVCF_REMOVESYSTEM (0x00000008).</span></span> <span data-ttu-id="9b77b-349">Quite los archivos que cumplan los criterios de búsqueda, incluso si son archivos del sistema.</span><span class="sxs-lookup"><span data-stu-id="9b77b-349">Remove files that meet the search criteria even if they are system files.</span></span></li>
<li><span data-ttu-id="9b77b-350">DDEVCF_REMOVEHIDDEN (0x00000010).</span><span class="sxs-lookup"><span data-stu-id="9b77b-350">DDEVCF_REMOVEHIDDEN (0x00000010).</span></span> <span data-ttu-id="9b77b-351">Quite los archivos que cumplan los criterios de búsqueda, incluso si son archivos ocultos.</span><span class="sxs-lookup"><span data-stu-id="9b77b-351">Remove files that meet the search criteria even if they are hidden files.</span></span></li>
<li><span data-ttu-id="9b77b-352">DDEVCF_DONTSHOWIFZERO (0x00000020).</span><span class="sxs-lookup"><span data-stu-id="9b77b-352">DDEVCF_DONTSHOWIFZERO (0x00000020).</span></span> <span data-ttu-id="9b77b-353">No muestre este controlador en el administrador de liberador de espacio en disco si no hay archivos que coincidan con sus criterios de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="9b77b-353">Do not display this handler in the disk cleanup manager if no files match its search criteria.</span></span></li>
<li><span data-ttu-id="9b77b-354">DDEVCF_REMOVEDIRS (0x00000040).</span><span class="sxs-lookup"><span data-stu-id="9b77b-354">DDEVCF_REMOVEDIRS (0x00000040).</span></span> <span data-ttu-id="9b77b-355">Haga coincidir el valor de FileList con los directorios y quite las coincidencias y todos sus subdirectorios.</span><span class="sxs-lookup"><span data-stu-id="9b77b-355">Match the FileList value against directories and remove matches and all of their subdirectories.</span></span></li>
<li><span data-ttu-id="9b77b-356">DDEVCF_RUNIFOUTOFDISKSPACE (0x00000080).</span><span class="sxs-lookup"><span data-stu-id="9b77b-356">DDEVCF_RUNIFOUTOFDISKSPACE (0x00000080).</span></span> <span data-ttu-id="9b77b-357">Ejecute este controlador solo si el espacio en disco disponible ha descendido por debajo del valor crítico, determinado por el administrador de limpieza de disco estableciendo la marca de EVCF_OUTOFDISKSPACE a través de <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>IEmptyVolumeCache:: Initialize</strong></a> o <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2:: InitializeEx</strong></a>.</span><span class="sxs-lookup"><span data-stu-id="9b77b-357">Run this handler only if available disk space has fallen below the critical value, determined by the disk cleanup manager setting the EVCF_OUTOFDISKSPACE flag through <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize"><strong>IEmptyVolumeCache::Initialize</strong></a> or <a href="/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex"><strong>IEmptyVolumeCache2::InitializeEx</strong></a>.</span></span></li>
<li><span data-ttu-id="9b77b-358">DDEVCF_REMOVEPARENTDIR (0x00000100).</span><span class="sxs-lookup"><span data-stu-id="9b77b-358">DDEVCF_REMOVEPARENTDIR (0x00000100).</span></span> <span data-ttu-id="9b77b-359">Quite el directorio principal de los archivos especificados una vez que se haya ejecutado el limpiador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-359">Remove the parent directory of the specified files once the cleaner has run.</span></span></li>
<li><span data-ttu-id="9b77b-360">DDEVCF_PRIVATE_LASTACCESS (0x10000000).</span><span class="sxs-lookup"><span data-stu-id="9b77b-360">DDEVCF_PRIVATE_LASTACCESS (0x10000000).</span></span> <span data-ttu-id="9b77b-361">Use el valor LastAccess, si se proporciona, para determinar qué archivos se deben limpiar.</span><span class="sxs-lookup"><span data-stu-id="9b77b-361">Use the LastAccess value, if provided, in ascertaining which files should be cleaned.</span></span> <span data-ttu-id="9b77b-362">Esta marca se omite cuando se usa <a href="#using-the-datadrivencleaner-object">DataDrivenCleaner</a> siempre que se use cualquier valor LastAccess proporcionado.</span><span class="sxs-lookup"><span data-stu-id="9b77b-362">This flag is ignored when using the <a href="#using-the-datadrivencleaner-object">DataDrivenCleaner</a> any provided LastAccess value is always used.</span></span></li>
</ul></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="9b77b-363">Carpeta</span><span class="sxs-lookup"><span data-stu-id="9b77b-363">Folder</span></span></td>
<td><span data-ttu-id="9b77b-364">REG_SZ, REG_MULTI_SZ o REG_EXPAND_SZ</span><span class="sxs-lookup"><span data-stu-id="9b77b-364">REG_SZ, REG_MULTI_SZ, or REG_EXPAND_SZ</span></span></td>
<td><span data-ttu-id="9b77b-365">Carpeta o carpetas específicas para buscar elementos que coincidan con las entradas del valor FileList.</span><span class="sxs-lookup"><span data-stu-id="9b77b-365">A specific folder or folders to search for items matching entries in the FileList value.</span></span> <span data-ttu-id="9b77b-366">Puede especificar caracteres comodín mediante el carácter?</span><span class="sxs-lookup"><span data-stu-id="9b77b-366">You can specify wildcards using the ?</span></span> <span data-ttu-id="9b77b-367">o \* caracteres.</span><span class="sxs-lookup"><span data-stu-id="9b77b-367">or \* characters.</span></span> <span data-ttu-id="9b77b-368">Si el valor es de tipo REG_SZ, varios nombres de carpeta se separan mediante el | carácter, sin espacios en cada lado del mismo.</span><span class="sxs-lookup"><span data-stu-id="9b77b-368">If the value is of type REG_SZ, multiple folder names are separated using the | character, without spaces on either side of it.</span></span><br/> <span data-ttu-id="9b77b-369">Si hay un valor CSIDL, solo se puede especificar una carpeta en este valor.</span><span class="sxs-lookup"><span data-stu-id="9b77b-369">If a CSIDL value is present, only one folder can be specified in this value.</span></span> <span data-ttu-id="9b77b-370">La ubicación indicada por el valor CSIDL se antepone a la ruta de acceso de la carpeta para crear una ruta de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="9b77b-370">The location indicated by the CSIDL value is prepended to that folder path to compose a search path.</span></span> <span data-ttu-id="9b77b-371">Para obtener un ejemplo, vea la descripción del valor CSIDL.</span><span class="sxs-lookup"><span data-stu-id="9b77b-371">For an example, see the CSIDL value description.</span></span><br/> <span data-ttu-id="9b77b-372">Si este valor está ausente en Windows Vista Service Pack 1 (SP1) y versiones posteriores, el controlador de limpieza se omite y devuelve S_FALSE en la inicialización.</span><span class="sxs-lookup"><span data-stu-id="9b77b-372">If this value is absent on Windows Vista Service Pack 1 (SP1) and later, the cleanup handler is ignored and it returns S_FALSE on initialization.</span></span><br/> <span data-ttu-id="9b77b-373">Si este valor está ausente en la versión original de Windows Vista y versiones anteriores, se usa la carpeta raíz del volumen actual.</span><span class="sxs-lookup"><span data-stu-id="9b77b-373">If this value is absent on the original release of Windows Vista and earlier, the root folder of the current volume is used.</span></span> <span data-ttu-id="9b77b-374">En ese caso, se necesita la marca DDEVCF_DOSUBDIRS para buscar en toda la unidad.</span><span class="sxs-lookup"><span data-stu-id="9b77b-374">The DDEVCF_DOSUBDIRS flag is needed in that case to search the entire drive.</span></span> <span data-ttu-id="9b77b-375">Sin él, solo se busca en la carpeta raíz.</span><span class="sxs-lookup"><span data-stu-id="9b77b-375">Without it, only the root folder itself is searched.</span></span><br/> <span data-ttu-id="9b77b-376">Se debe especificar una o más unidades de disco.</span><span class="sxs-lookup"><span data-stu-id="9b77b-376">A drive or drives must be specified.</span></span> <span data-ttu-id="9b77b-377">Esto puede proporcionarse a través del valor CSIDL o a través de una cadena de REG_EXPAND_SZ.</span><span class="sxs-lookup"><span data-stu-id="9b77b-377">This can be provided through the CSIDL value or through a REG_EXPAND_SZ string.</span></span> <span data-ttu-id="9b77b-378">Sin embargo, con estas opciones, la unidad de búsqueda debe especificarse en el nombre de la carpeta.</span><span class="sxs-lookup"><span data-stu-id="9b77b-378">Barring those options, however, the drive to search must be specified in the folder name.</span></span> <span data-ttu-id="9b77b-379">Use?: para buscar la carpeta en la unidad actual.</span><span class="sxs-lookup"><span data-stu-id="9b77b-379">Use ?: to search the folder on the current drive.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="9b77b-380">IconPath</span><span class="sxs-lookup"><span data-stu-id="9b77b-380">IconPath</span></span></td>
<td><span data-ttu-id="9b77b-381">REG_SZ o REG_EXPAND_SZ</span><span class="sxs-lookup"><span data-stu-id="9b77b-381">REG_SZ or REG_EXPAND_SZ</span></span></td>
<td><span data-ttu-id="9b77b-382">Ruta de acceso al recurso del que se va a obtener un icono que se va a usar en la asociación con el controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-382">The path to the resource from which to obtain an icon to use in association with the handler.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="9b77b-383">LastAccess</span><span class="sxs-lookup"><span data-stu-id="9b77b-383">LastAccess</span></span></td>
<td><span data-ttu-id="9b77b-384">REG_DWORD o REG_BINARY</span><span class="sxs-lookup"><span data-stu-id="9b77b-384">REG_DWORD or REG_BINARY</span></span></td>
<td><span data-ttu-id="9b77b-385">El número de días que debe haber transcurrido desde la última vez que se obtuvo acceso al archivo o se creó un directorio para el archivo o directorio que se va a considerar para la limpieza.</span><span class="sxs-lookup"><span data-stu-id="9b77b-385">The number of days that must have elapsed since a file was last accessed or a directory was created for that file or directory to be considered for cleanup.</span></span></td>
</tr>
<tr class="even">
<td><span data-ttu-id="9b77b-386">Prioridad</span><span class="sxs-lookup"><span data-stu-id="9b77b-386">Priority</span></span></td>
<td><span data-ttu-id="9b77b-387">REG_DWORD o REG_BINARY</span><span class="sxs-lookup"><span data-stu-id="9b77b-387">REG_DWORD or REG_BINARY</span></span></td>
<td><span data-ttu-id="9b77b-388">Determina el orden en que se ejecuta el controlador con respecto a otros controladores.</span><span class="sxs-lookup"><span data-stu-id="9b77b-388">Determines the order that the handler is run with respect to other handlers.</span></span> <span data-ttu-id="9b77b-389">Cuanto mayor sea el número, antes en el proceso en el que se ejecuta el controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-389">The higher the number, the earlier in the process that the handler runs.</span></span> <span data-ttu-id="9b77b-390">No hay ningún intervalo definido que sea aceptable.</span><span class="sxs-lookup"><span data-stu-id="9b77b-390">There is no defined range any number is acceptable.</span></span></td>
</tr>
<tr class="odd">
<td><span data-ttu-id="9b77b-391">PropertyBag</span><span class="sxs-lookup"><span data-stu-id="9b77b-391">PropertyBag</span></span></td>
<td><span data-ttu-id="9b77b-392">REG_SZ</span><span class="sxs-lookup"><span data-stu-id="9b77b-392">REG_SZ</span></span></td>
<td><span data-ttu-id="9b77b-393">El CLSID de un recurso que se usa para proporcionar el texto localizado para el nombre para mostrar, la descripción y el texto del botón.</span><span class="sxs-lookup"><span data-stu-id="9b77b-393">The CLSID of a resource used to provide localized text for the display name, description, and button text.</span></span> <span data-ttu-id="9b77b-394">Este recurso es útil en la situación en la que un controlador no implementa <a href="/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache"><strong>IEmptyVolumeCache</strong></a> y el controlador se ejecuta en Microsoft Windows NT o Windows XP.</span><span class="sxs-lookup"><span data-stu-id="9b77b-394">This resource is useful in the situation where a handler does not implement <a href="/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache"><strong>IEmptyVolumeCache</strong></a> and the handler is being run under Microsoft Windows NT or Windows XP.</span></span><br/> <span data-ttu-id="9b77b-395">En primer lugar, el administrador de liberador de espacio en disco comprueba si la rutina de inicialización del controlador devolvió esas cadenas, como sería el caso cuando se implementa <a href="/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2"><strong>IEmptyVolumeCache2</strong></a> .</span><span class="sxs-lookup"><span data-stu-id="9b77b-395">The disk cleanup manager first checks whether the handler's initialization routine returned those strings, as would be the case when <a href="/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2"><strong>IEmptyVolumeCache2</strong></a> is implemented.</span></span> <span data-ttu-id="9b77b-396">En el siguiente error, el administrador vuelve a un contenedor de propiedades denominado en este valor.</span><span class="sxs-lookup"><span data-stu-id="9b77b-396">Failing that, the manager next turns to a property bag named in this value.</span></span> <span data-ttu-id="9b77b-397">Si no se ha proporcionado ninguno, recupera el texto del registro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-397">If none has been provided, it retrieves the text from the registry.</span></span><br/></td>
</tr>
<tr class="even">
<td><span data-ttu-id="9b77b-398">StateFlags</span><span class="sxs-lookup"><span data-stu-id="9b77b-398">StateFlags</span></span></td>
<td><span data-ttu-id="9b77b-399">REG_DWORD</span><span class="sxs-lookup"><span data-stu-id="9b77b-399">REG_DWORD</span></span></td>
<td><span data-ttu-id="9b77b-400">Al ejecutar el archivo ejecutable del administrador de limpieza de disco Cleanmgr.exe desde una línea de comandos, puede declarar <em>perfiles</em>de limpieza.</span><span class="sxs-lookup"><span data-stu-id="9b77b-400">By running the disk cleanup manager's executable file Cleanmgr.exe from a command line, you can declare cleanup <em>profiles</em>.</span></span> <span data-ttu-id="9b77b-401">Estos perfiles se componen de un subconjunto de los controladores disponibles y se les asigna una etiqueta numérica única.</span><span class="sxs-lookup"><span data-stu-id="9b77b-401">These profiles are composed of a subset of the available handlers and are given a unique numeric label.</span></span> <span data-ttu-id="9b77b-402">Esto le permite automatizar la ejecución de distintos conjuntos de controladores en momentos diferentes.</span><span class="sxs-lookup"><span data-stu-id="9b77b-402">This allows you to automate the running of different sets of handlers at different times.</span></span><br/> <span data-ttu-id="9b77b-403">La línea de comandos &quot;cleanmgr.exe/sageset:<strong>nnnn</strong> &quot; , donde <strong>nnnn</strong> es una etiqueta numérica única, muestra una interfaz de usuario que le permite elegir los controladores que se van a incluir en el perfil.</span><span class="sxs-lookup"><span data-stu-id="9b77b-403">The command line &quot;cleanmgr.exe /sageset:<strong>nnnn</strong>&quot;, where <strong>nnnn</strong> is a unique numeric label, displays a UI allowing you to choose the handlers to be included in that profile.</span></span> <span data-ttu-id="9b77b-404">Además de definir el perfil, el parámetro sageset también escribe un valor denominado StateFlags<strong>nnnn</strong>, donde <strong>nnnn</strong> es la etiqueta usada en el parámetro, en todas las subclaves de <strong>VolumeCaches</strong>.</span><span class="sxs-lookup"><span data-stu-id="9b77b-404">As well as defining the profile, the sageset parameter also writes a value named StateFlags<strong>nnnn</strong>, where <strong>nnnn</strong> is the label you used in the parameter, to all of the subkeys under <strong>VolumeCaches</strong>.</span></span> <span data-ttu-id="9b77b-405">Existen dos posibles valores de datos para esas entradas.</span><span class="sxs-lookup"><span data-stu-id="9b77b-405">There are two possible data values for those entries.</span></span>
<ul>
<li><span data-ttu-id="9b77b-406">0: no ejecute este controlador cuando se ejecute este perfil.</span><span class="sxs-lookup"><span data-stu-id="9b77b-406">0: Do not run this handler when this profile is run.</span></span></li>
<li><span data-ttu-id="9b77b-407">2: incluir este controlador cuando se ejecute este perfil.</span><span class="sxs-lookup"><span data-stu-id="9b77b-407">2: Include this handler when this profile is run.</span></span></li>
</ul>
<br/> <span data-ttu-id="9b77b-408">Por ejemplo, supongamos que se ejecuta la línea de comandos &quot;cleanmgr.exe/sageset: 1234 &quot; .</span><span class="sxs-lookup"><span data-stu-id="9b77b-408">For example, suppose that the command line &quot;cleanmgr.exe /sageset:1234&quot; is run.</span></span> <span data-ttu-id="9b77b-409">En la interfaz de usuario que se presenta, el usuario elige <strong>los archivos de programa descargados</strong>, pero no elige <strong>archivos temporales de Internet</strong>.</span><span class="sxs-lookup"><span data-stu-id="9b77b-409">In the UI that is presented, the user chooses <strong>Downloaded Program Files</strong>, but does not choose <strong>Temporary Internet Files</strong>.</span></span> <span data-ttu-id="9b77b-410">Los valores siguientes se escriben en el registro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-410">The following values are then written to the registry.</span></span><br/>
<pre data-space="preserve"><code>HKEY_LOCAL_MACHINE
   Software
      Microsoft
         Windows
            CurrentVersion
               Explorer
                  VolumeCaches
                     Downloaded Program Files
                        StateFlags1234 = 0x00000002
                     Internet Cache Files
                        StateFlags1234 = 0x00000000</code></pre>
<br/> <span data-ttu-id="9b77b-411">La línea &quot; de comandoscleanmgr.exe/sagerun:<strong>nnnn</strong> &quot; , donde el valor de <strong>nnnn</strong> coincide con la etiqueta declarada con el parámetro sageset, ejecuta todos los controladores seleccionados en ese perfil.</span><span class="sxs-lookup"><span data-stu-id="9b77b-411">The command line &quot;cleanmgr.exe /sagerun:<strong>nnnn</strong>&quot;, where the value of <strong>nnnn</strong> matches the label declared with the sageset parameter, runs all of the handlers selected in that profile.</span></span><br/> <span data-ttu-id="9b77b-412">Un valor de StateFlags genérico se escribe en el registro cuando el liberador de espacio en disco se ejecuta con normalidad.</span><span class="sxs-lookup"><span data-stu-id="9b77b-412">A generic StateFlags value is written to the registry when Disk Cleanup is run normally.</span></span> <span data-ttu-id="9b77b-413">Este valor simplemente almacena el estado (comprobado o desactivado) del controlador la última vez que se presentó como una opción al usuario.</span><span class="sxs-lookup"><span data-stu-id="9b77b-413">This value simply stores the state (checked or unchecked) of the handler the last time it was presented as an option to the user.</span></span> <span data-ttu-id="9b77b-414">Existen dos posibles valores de datos para esas entradas.</span><span class="sxs-lookup"><span data-stu-id="9b77b-414">There are two possible data values for those entries.</span></span>
<ul>
<li><span data-ttu-id="9b77b-415">0: no se seleccionó el controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-415">0: The handler was not selected.</span></span></li>
<li><span data-ttu-id="9b77b-416">1: se seleccionó el controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-416">1: The handler was selected.</span></span></li>
</ul>
<br/></td>
</tr>
</tbody>
</table>



 

### <a name="registering-a-handler-with-the-disk-cleanup-manager-windows-2000-or-later-systems"></a><span data-ttu-id="9b77b-417">Registro de un controlador con el administrador de liberador de espacio en disco: Windows 2000 o sistemas posteriores</span><span class="sxs-lookup"><span data-stu-id="9b77b-417">Registering a Handler with the Disk Cleanup Manager: Windows 2000 or Later Systems</span></span>

<span data-ttu-id="9b77b-418">La especificación del texto para mostrar en el registro puede dificultar la localización del software.</span><span class="sxs-lookup"><span data-stu-id="9b77b-418">Specifying display text in the registry can make it difficult to localize software.</span></span> <span data-ttu-id="9b77b-419">Por esta razón, Windows 2000 y Windows XP admiten la interfaz [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) con su método de inicialización preferido [**InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex).</span><span class="sxs-lookup"><span data-stu-id="9b77b-419">For this reason, Windows 2000 and Windows XP support the [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2) interface with its preferred initialization method [**InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex).</span></span> <span data-ttu-id="9b77b-420">En Windows 2000 o posterior, siempre se realiza un intento de llamar a **IEmptyVolumeCache2:: InitializeEx** antes de [**IEmptyVolumeCache:: Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize).</span><span class="sxs-lookup"><span data-stu-id="9b77b-420">Under Windows 2000 or later, an attempt is always made to call **IEmptyVolumeCache2::InitializeEx** before [**IEmptyVolumeCache::Initialize**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache-initialize).</span></span> <span data-ttu-id="9b77b-421">El sistema solo usa **Initialize** para inicializar un controlador si no se expone **IEmptyVolumeCache2** .</span><span class="sxs-lookup"><span data-stu-id="9b77b-421">The system only uses **Initialize** to initialize a handler if **IEmptyVolumeCache2** is not exposed.</span></span>

<span data-ttu-id="9b77b-422">En lo que respecta al registro, la única diferencia en Windows 2000 o posterior es que se pueden omitir los valores AdvancedButtonText, display y Description cuando el controlador expone [**IEmptyVolumeCache2:: InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) .</span><span class="sxs-lookup"><span data-stu-id="9b77b-422">In regard to the registry, the only difference under Windows 2000 or later is that you can omit the AdvancedButtonText, Display, and Description values when [**IEmptyVolumeCache2::InitializeEx**](/windows/desktop/api/Emptyvc/nf-emptyvc-iemptyvolumecache2-initializeex) is exposed by the handler.</span></span> <span data-ttu-id="9b77b-423">Estos valores, que contienen texto localizado correctamente, se proporcionan al administrador de liberador de espacio en disco cuando llama a **InitializeEx**.</span><span class="sxs-lookup"><span data-stu-id="9b77b-423">Those values, containing properly localized text, are provided to the disk cleanup manager when it calls **InitializeEx**.</span></span>

### <a name="using-the-datadrivencleaner-object"></a><span data-ttu-id="9b77b-424">Usar el objeto DataDrivenCleaner</span><span class="sxs-lookup"><span data-stu-id="9b77b-424">Using the DataDrivenCleaner Object</span></span>

<span data-ttu-id="9b77b-425">El sistema operativo proporciona un controlador de limpieza de disco básico, denominado DataDrivenCleaner.</span><span class="sxs-lookup"><span data-stu-id="9b77b-425">A basic disk cleanup handler, called the DataDrivenCleaner, is provided by the operating system.</span></span> <span data-ttu-id="9b77b-426">Para usar este objeto como un controlador en lugar de implementar el suyo propio, use el CLSID {C0E13E61-0CC6-11d1-BBB6-0060978B2AE6} como valor predeterminado de la subclave del controlador en **VolumeCaches** , como se describe en [registrar un controlador con el administrador de liberador de espacio en disco: General](#registering-a-handler-with-the-disk-cleanup-manager-general).</span><span class="sxs-lookup"><span data-stu-id="9b77b-426">To use this object as a handler rather than implementing your own, use the CLSID {C0E13E61-0CC6-11d1-BBB6-0060978B2AE6} as the Default value for the handler's subkey under **VolumeCaches** as described in [Registering a Handler with the Disk Cleanup Manager: General](#registering-a-handler-with-the-disk-cleanup-manager-general).</span></span>

<span data-ttu-id="9b77b-427">DataDrivenCleaner no expone [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2), por lo que los valores de presentación y descripción se proporcionan a través del registro.</span><span class="sxs-lookup"><span data-stu-id="9b77b-427">The DataDrivenCleaner does not expose [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2), so the Display and Description values are provided through the registry.</span></span> <span data-ttu-id="9b77b-428">Al declarar esas cadenas, tenga en cuenta que esto podría causar problemas de localización.</span><span class="sxs-lookup"><span data-stu-id="9b77b-428">When declaring those strings, be aware that this could cause localization issues.</span></span> <span data-ttu-id="9b77b-429">El texto localizado se puede proporcionar a través del valor PropertyBag.</span><span class="sxs-lookup"><span data-stu-id="9b77b-429">Localized text can be provided through the PropertyBag value.</span></span> <span data-ttu-id="9b77b-430">El valor de AdvancedButtonText se omite porque no hay ninguna interfaz de usuario y, por lo tanto, no hay ningún botón que lo muestre, está disponible para este controlador.</span><span class="sxs-lookup"><span data-stu-id="9b77b-430">The AdvancedButtonText value is ignored since no UI, and thus no button to display it, is available for this handler.</span></span>

### <a name="example-registration-of-a-disk-cleanup-handler"></a><span data-ttu-id="9b77b-431">Ejemplo de registro de un controlador de limpieza de disco</span><span class="sxs-lookup"><span data-stu-id="9b77b-431">Example Registration of a Disk Cleanup Handler</span></span>

<span data-ttu-id="9b77b-432">A continuación se muestra un registro de ejemplo para un controlador de limpieza de disco implementado por la compañía telefónica.</span><span class="sxs-lookup"><span data-stu-id="9b77b-432">The following shows an example registration for a disk cleanup handler implemented by The Phone Company.</span></span> <span data-ttu-id="9b77b-433">Este controlador implementa [**IEmptyVolumeCache**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache) y [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2), por lo que proporciona AdvancedButtonText, Description y valores para mostrar en caso de que se use en un equipo que ejecute Windows 98.</span><span class="sxs-lookup"><span data-stu-id="9b77b-433">This handler implements both [**IEmptyVolumeCache**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache) and [**IEmptyVolumeCache2**](/windows/desktop/api/Emptyvc/nn-emptyvc-iemptyvolumecache2), and so provides AdvancedButtonText, Description, and Display values in case it is used on a computer running Windows 98.</span></span> <span data-ttu-id="9b77b-434">El controlador combina los valores CSIDL y Folder para buscar archivos en el directorio C: \\ archivos de programa \\ del directorio Temp de la compañía telefónica \\ y la \_ marca DDEVCF DOSUBDIRS está establecida para que se busquen también en sus subdirectorios.</span><span class="sxs-lookup"><span data-stu-id="9b77b-434">The handler combines the CSIDL and Folder values to search for files in the C:\\Program Files\\The Phone Company\\Temp directory, and the DDEVCF\_DOSUBDIRS flag is set so that its subdirectories are also searched.</span></span> <span data-ttu-id="9b77b-435">Solo se tienen en cuenta los archivos con extensiones. tmp y. tpc para la limpieza, y la \_ marca DDEVCF Private \_ LASTACCESS se establece de modo que, a partir de esos archivos, solo se tengan en cuenta aquellos a los que no se haya accedido durante 14 días o más.</span><span class="sxs-lookup"><span data-stu-id="9b77b-435">Only those files with .tmp and .tpc extensions are considered for cleanup, and the DDEVCF\_PRIVATE\_LASTACCESS flag is set so that out of those files, only those that have not been accessed for 14 days or more are considered.</span></span> <span data-ttu-id="9b77b-436">\_También se establece la marca DDEVCF DONTSHOWIFZERO para que el controlador no aparezca en la lista a menos que haya detectado candidatos de limpieza.</span><span class="sxs-lookup"><span data-stu-id="9b77b-436">The DDEVCF\_DONTSHOWIFZERO flag is also set so that the handler does not appear on the list unless it has found cleanup candidates.</span></span>

```
HKEY_LOCAL_MACHINE
   Software
      Microsoft
         Windows
            CurrentVersion
               Explorer
                  VolumeCaches
                     The Phone Company Files
                        (Default) = {the CLSID GUID}
                        AdvancedButtonText = &View Files
                        CleanupString = c:\tpc.exe
                        CSIDL = 0x00000026
                        Description = Old temporary files.
                        Display = The Phone Company Files
                        FileList = *.tmp|*.tpc
                        Flags = 0x10000021
                        Folder = \The Phone Company\Temp
                        IconPath = c:\Program Files\The Phone Company\tpc.dll,2
                        LastAccess = 0x0000000e
                        Priority = 200
                        PropertyBag = {Property Bag CLSID GUID}
```

 

