---
title: Acerca de las tablas Atom
description: En esta sección se describen las tablas Atom.
ms.assetid: 12114a3e-99a4-480f-9d1a-57c1942b7382
keywords:
- átomos
- tablas Atom
- nombres de Atom
- Intercambio dinámico de datos (DDE), átomos
- DDE (Intercambio dinámico de datos), átomos
- tablas de Atom globales
- tablas de Atom locales
- átomos enteros
- átomos de cadena
ms.topic: article
ms.date: 08/25/2020
ms.openlocfilehash: 27f7cdb4bb2dc2fd97b4dba6909022b297df1a1d
ms.sourcegitcommit: e985e0532f0f895ae418e8c2658dac819cdae3b1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/26/2020
ms.locfileid: "104421496"
---
# <a name="about-atom-tables"></a><span data-ttu-id="a2985-112">Acerca de las tablas Atom</span><span class="sxs-lookup"><span data-stu-id="a2985-112">About Atom Tables</span></span>

<span data-ttu-id="a2985-113">Una *tabla Atom* es una tabla definida por el sistema que almacena cadenas e identificadores correspondientes.</span><span class="sxs-lookup"><span data-stu-id="a2985-113">An *atom table* is a system-defined table that stores strings and corresponding identifiers.</span></span> <span data-ttu-id="a2985-114">Una aplicación coloca una cadena en una tabla Atom y recibe un entero de 16 bits, denominado *Atom*, que se puede usar para tener acceso a la cadena.</span><span class="sxs-lookup"><span data-stu-id="a2985-114">An application places a string in an atom table and receives a 16-bit integer, called an *atom*, that can be used to access the string.</span></span> <span data-ttu-id="a2985-115">Una cadena que se ha colocado en una tabla Atom se denomina *nombre Atom*.</span><span class="sxs-lookup"><span data-stu-id="a2985-115">A string that has been placed in an atom table is called an *atom name*.</span></span>

<span data-ttu-id="a2985-116">El sistema proporciona varias tablas Atom.</span><span class="sxs-lookup"><span data-stu-id="a2985-116">The system provides a number of atom tables.</span></span> <span data-ttu-id="a2985-117">Cada tabla Atom sirve para un propósito diferente.</span><span class="sxs-lookup"><span data-stu-id="a2985-117">Each atom table serves a different purpose.</span></span> <span data-ttu-id="a2985-118">Por ejemplo, las aplicaciones Intercambio dinámico de datos (DDE) utilizan la [tabla global Atom](#global-atom-table) para compartir cadenas de nombre de elemento y de nombre de tema con otras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="a2985-118">For example, Dynamic Data Exchange (DDE) applications use the [global atom table](#global-atom-table) to share item-name and topic-name strings with other applications.</span></span> <span data-ttu-id="a2985-119">En lugar de pasar cadenas reales, una aplicación DDE pasa los átomos globales a su aplicación de asociado.</span><span class="sxs-lookup"><span data-stu-id="a2985-119">Rather than passing actual strings, a DDE application passes global atoms to its partner application.</span></span> <span data-ttu-id="a2985-120">El asociado usa los átomos para obtener las cadenas de la tabla Atom.</span><span class="sxs-lookup"><span data-stu-id="a2985-120">The partner uses the atoms to obtain the strings from the atom table.</span></span>

<span data-ttu-id="a2985-121">Las aplicaciones pueden usar tablas Atom locales para almacenar sus propias asociaciones de nombre de elemento.</span><span class="sxs-lookup"><span data-stu-id="a2985-121">Applications can use local atom tables to store their own item-name associations.</span></span>

<span data-ttu-id="a2985-122">El sistema utiliza tablas Atom que no son directamente accesibles para las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="a2985-122">The system uses atom tables that are not directly accessible to applications.</span></span> <span data-ttu-id="a2985-123">Sin embargo, la aplicación usa estos átomos al llamar a una variedad de funciones.</span><span class="sxs-lookup"><span data-stu-id="a2985-123">However, the application uses these atoms when calling a variety of functions.</span></span> <span data-ttu-id="a2985-124">Por ejemplo, los formatos de Portapapeles registrados se almacenan en una tabla Atom interna utilizada por el sistema.</span><span class="sxs-lookup"><span data-stu-id="a2985-124">For example, registered clipboard formats are stored in an internal atom table used by the system.</span></span> <span data-ttu-id="a2985-125">Una aplicación agrega átomos a esta tabla Atom con la función [**RegisterClipboardFormat**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) .</span><span class="sxs-lookup"><span data-stu-id="a2985-125">An application adds atoms to this atom table using the [**RegisterClipboardFormat**](/windows/desktop/api/Winuser/nf-winuser-registerclipboardformata) function.</span></span> <span data-ttu-id="a2985-126">Además, las clases registradas se almacenan en una tabla Atom interna utilizada por el sistema.</span><span class="sxs-lookup"><span data-stu-id="a2985-126">Also, registered classes are stored in an internal atom table used by the system.</span></span> <span data-ttu-id="a2985-127">Una aplicación agrega átomos a esta tabla Atom con la función [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) o [**RegisterClassEx**](/windows/desktop/api/winuser/nf-winuser-registerclassexa) .</span><span class="sxs-lookup"><span data-stu-id="a2985-127">An application adds atoms to this atom table using the [**RegisterClass**](/windows/desktop/api/winuser/nf-winuser-registerclassa) or [**RegisterClassEx**](/windows/desktop/api/winuser/nf-winuser-registerclassexa) function.</span></span>

<span data-ttu-id="a2985-128">Los temas siguientes se describen en esta sección.</span><span class="sxs-lookup"><span data-stu-id="a2985-128">The following topics are discussed in this section.</span></span>

-   [<span data-ttu-id="a2985-129">Tabla de átomo global</span><span class="sxs-lookup"><span data-stu-id="a2985-129">Global Atom Table</span></span>](#global-atom-table)
-   [<span data-ttu-id="a2985-130">Tabla Atom de usuario</span><span class="sxs-lookup"><span data-stu-id="a2985-130">User Atom Table</span></span>](#user-atom-table)
-   [<span data-ttu-id="a2985-131">Tablas de Atom locales</span><span class="sxs-lookup"><span data-stu-id="a2985-131">Local Atom Tables</span></span>](#local-atom-tables)
-   [<span data-ttu-id="a2985-132">Tipos Atom</span><span class="sxs-lookup"><span data-stu-id="a2985-132">Atom Types</span></span>](#atom-types)
    -   [<span data-ttu-id="a2985-133">Átomos de cadena</span><span class="sxs-lookup"><span data-stu-id="a2985-133">String Atoms</span></span>](#string-atoms)
    -   [<span data-ttu-id="a2985-134">Átomos enteros</span><span class="sxs-lookup"><span data-stu-id="a2985-134">Integer Atoms</span></span>](#integer-atoms)
-   [<span data-ttu-id="a2985-135">Creación y recuento de uso de Atom</span><span class="sxs-lookup"><span data-stu-id="a2985-135">Atom Creation and Usage Count</span></span>](#atom-creation-and-usage-count)
-   [<span data-ttu-id="a2985-136">Consultas de tabla Atom</span><span class="sxs-lookup"><span data-stu-id="a2985-136">Atom-Table Queries</span></span>](#atom-table-queries)
-   [<span data-ttu-id="a2985-137">Formatos de cadena Atom</span><span class="sxs-lookup"><span data-stu-id="a2985-137">Atom String Formats</span></span>](#atom-string-formats)

## <a name="global-atom-table"></a><span data-ttu-id="a2985-138">Tabla de átomo global</span><span class="sxs-lookup"><span data-stu-id="a2985-138">Global Atom Table</span></span>

<span data-ttu-id="a2985-139">La tabla global Atom está disponible para todas las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="a2985-139">The global atom table is available to all applications.</span></span> <span data-ttu-id="a2985-140">Cuando una aplicación coloca una cadena en la tabla global Atom, el sistema genera un átomo que es único en todo el sistema.</span><span class="sxs-lookup"><span data-stu-id="a2985-140">When an application places a string in the global atom table, the system generates an atom that is unique throughout the system.</span></span> <span data-ttu-id="a2985-141">Cualquier aplicación que tenga el átomo puede obtener la cadena que identifica consultando la tabla de Atom global.</span><span class="sxs-lookup"><span data-stu-id="a2985-141">Any application that has the atom can obtain the string it identifies by querying the global atom table.</span></span>

<span data-ttu-id="a2985-142">Una aplicación que define un formato de datos DDE privado para compartir datos con otras aplicaciones debe colocar el nombre de formato en la tabla de Atom global.</span><span class="sxs-lookup"><span data-stu-id="a2985-142">An application that defines a private DDE-data format for sharing data with other applications should place the format name in the global atom table.</span></span> <span data-ttu-id="a2985-143">Esta técnica evita conflictos con los nombres de formatos definidos por el sistema o por otras aplicaciones, y hace que los identificadores (átomos) de los mensajes o formatos estén disponibles para las demás aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="a2985-143">This technique prevents conflicts with the names of formats defined by the system or by other applications, and makes the identifiers (atoms) for the messages or formats available to the other applications.</span></span>

## <a name="user-atom-table"></a><span data-ttu-id="a2985-144">Tabla Atom de usuario</span><span class="sxs-lookup"><span data-stu-id="a2985-144">User Atom Table</span></span>

<span data-ttu-id="a2985-145">Además de la tabla global Atom, la tabla Atom de usuario es otra tabla Atom del sistema que también se comparte entre todos los procesos.</span><span class="sxs-lookup"><span data-stu-id="a2985-145">In addition to the global atom table, the user atom table is another system atom table that is also shared across all processes.</span></span> <span data-ttu-id="a2985-146">La tabla Atom de usuario se usa para un pequeño número de escenarios internos a Win32k; por ejemplo, nombres de módulos de Windows, cadenas conocidas en Win32k, formatos OLE, etc. Aunque las aplicaciones no interactúan directamente con la tabla de Atom de usuario, llaman a varias API, como [RegisterClass](/windows/win32/api/winuser/nf-winuser-registerclassexa), [RegisterWindowMessage](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea)y [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata), que agregan entradas a la tabla de Atom del usuario.</span><span class="sxs-lookup"><span data-stu-id="a2985-146">The user atom table is used for a small number of scenarios internal to win32k; for example, windows module names, well known strings in win32k, OLE formats, etc. Although applications do not interact with the user atom table directly, they call several APIs—such as [RegisterClass](/windows/win32/api/winuser/nf-winuser-registerclassexa), [RegisterWindowMessage](/windows/win32/api/winuser/nf-winuser-registerwindowmessagea), and [RegisterClipboardFormat](/windows/win32/api/winuser/nf-winuser-registerclipboardformata)—that add entries to the user atom table.</span></span> <span data-ttu-id="a2985-147">Puede eliminar las entradas agregadas por `RegisterClass` `UnregisterClass` .</span><span class="sxs-lookup"><span data-stu-id="a2985-147">The entries added by `RegisterClass` can be deleted by `UnregisterClass`.</span></span> <span data-ttu-id="a2985-148">Sin embargo, las entradas agregadas por `RegisterWindowMessage` y `RegisterClipboardFormat` no se eliminan hasta que finaliza la sesión.</span><span class="sxs-lookup"><span data-stu-id="a2985-148">However, the entries added by `RegisterWindowMessage` and `RegisterClipboardFormat` do not get deleted until the session ends.</span></span> <span data-ttu-id="a2985-149">Si la tabla Atom de usuario no tiene más espacio y la cadena que se pasa todavía no está en la tabla, se producirá un error en la llamada.</span><span class="sxs-lookup"><span data-stu-id="a2985-149">If the user atom table has no more space and the string being passed in is not already in the table, the call will fail.</span></span> 

### <a name="atom-table-size"></a><span data-ttu-id="a2985-150">Tamaño de tabla Atom</span><span class="sxs-lookup"><span data-stu-id="a2985-150">Atom Table Size</span></span>
 
<span data-ttu-id="a2985-151">Muchas API críticas, incluido [CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindowa), se basan en átomos de usuario.</span><span class="sxs-lookup"><span data-stu-id="a2985-151">Many critical APIs, including [CreateWindow](/windows/win32/api/winuser/nf-winuser-createwindowa), rely on user atoms.</span></span> <span data-ttu-id="a2985-152">Por lo tanto, el agotamiento de espacio en la tabla Atom de usuario producirá problemas graves. por ejemplo, puede que todas las aplicaciones no se inicien.</span><span class="sxs-lookup"><span data-stu-id="a2985-152">Therefore, space exhaustion in the user atom table will result in serious issues; for example, all applications may fail to launch.</span></span> <span data-ttu-id="a2985-153">Estas son algunas recomendaciones para asegurarse de que la aplicación use las tablas Atom de forma eficaz y conserve la confiabilidad y el rendimiento de la aplicación y del sistema:</span><span class="sxs-lookup"><span data-stu-id="a2985-153">Here are some recommendations to ensure your application utilizes atom tables efficiently and preserves the reliability and performance of the application and system:</span></span>  

1. <span data-ttu-id="a2985-154">Debe limitar el uso de la aplicación de la tabla Atom de usuario.</span><span class="sxs-lookup"><span data-stu-id="a2985-154">You should limit your app's usage of the user atom table.</span></span> <span data-ttu-id="a2985-155">Almacenar cadenas únicas mediante API como `RegisterClass` , `RegisterWindowMessage` o `RegisterClipboardFormat` ocupa espacio en la tabla Atom de usuario, que otras aplicaciones usan globalmente para registrar clases de ventana mediante cadenas.</span><span class="sxs-lookup"><span data-stu-id="a2985-155">Storing unique strings using APIs like `RegisterClass`, `RegisterWindowMessage`, or `RegisterClipboardFormat` takes space in the user atom table, which is used globally by other apps to register window classes using strings.</span></span> <span data-ttu-id="a2985-156">Si es posible, debe usar [AddAtom](/windows/desktop/api/Winbase/nf-winbase-addatomw) / [DeleteAtom](/windows/desktop/api/Winbase/nf-winbase-deleteatom) para almacenar las cadenas en una tabla Atom local o [GlobalAddAtom](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) / [GlobalDeleteAtom](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) si los átomos son necesarios entre procesos.</span><span class="sxs-lookup"><span data-stu-id="a2985-156">If at all possible, you should use [AddAtom](/windows/desktop/api/Winbase/nf-winbase-addatomw)/[DeleteAtom](/windows/desktop/api/Winbase/nf-winbase-deleteatom) to store strings in a local atom table, or  [GlobalAddAtom](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma)/[GlobalDeleteAtom](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) if the atoms are needed cross-process.</span></span>

1. <span data-ttu-id="a2985-157">Si hay algún problema con respecto a la aplicación que causa problemas en las tablas Atom de usuario, puede investigar la causa raíz conectando el depurador del kernel y entrando en el proceso en las llamadas a `UserAddAtomEx` ( `bae1 win32kbase!UserAddAtomEx /p <eprocess> "kc10;g"` ).</span><span class="sxs-lookup"><span data-stu-id="a2985-157">If there is concern about the application causing user atom table issues, you can investigate the root cause by connecting the kernel debugger and breaking into the process on calls to `UserAddAtomEx` (`bae1 win32kbase!UserAddAtomEx /p <eprocess> "kc10;g"`).</span></span> <span data-ttu-id="a2985-158">Busque `user32!` en la pila de llamadas para ver a qué API se está llamando.</span><span class="sxs-lookup"><span data-stu-id="a2985-158">Look for `user32!` on the callstack to see which API is being called.</span></span> <span data-ttu-id="a2985-159">La metodología es similar a la detección de problemas de tabla de átomo global explicada en [identificación de pérdidas de tabla de átomo global](/archive/blogs/ntdebugging/identifying-global-atom-table-leaks).</span><span class="sxs-lookup"><span data-stu-id="a2985-159">The methodology is similar to the global atom table issue detection explained in [Identifying Global Atom Table Leaks](/archive/blogs/ntdebugging/identifying-global-atom-table-leaks).</span></span> <span data-ttu-id="a2985-160">Otra manera de volcar el contenido de la tabla de Atom de usuario es mediante una llamada a [GetClipboardFormatName](/windows/win32/api/winuser/nf-winuser-getclipboardformatnamea) en el intervalo de átomos posibles de 0XC000 a 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="a2985-160">Another way to dump the contents of the user atom table is by calling [GetClipboardFormatName](/windows/win32/api/winuser/nf-winuser-getclipboardformatnamea) over the range of possible atoms from 0xC000 to 0xFFFF.</span></span> <span data-ttu-id="a2985-161">Si el número total de átomos aumenta de forma continua mientras la aplicación se está ejecutando o no vuelve a la línea base cuando se cierra la aplicación, hay un problema.</span><span class="sxs-lookup"><span data-stu-id="a2985-161">If the total atom count steadily goes up while the application is running or does not return to baseline when the app is closed, there is a problem.</span></span>

## <a name="local-atom-tables"></a><span data-ttu-id="a2985-162">Tablas de Atom locales</span><span class="sxs-lookup"><span data-stu-id="a2985-162">Local Atom Tables</span></span>

<span data-ttu-id="a2985-163">Una aplicación puede usar una tabla Atom local para administrar de forma eficaz un gran número de cadenas usadas solo dentro de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a2985-163">An application can use a local atom table to efficiently manage a large number of strings used only within the application.</span></span> <span data-ttu-id="a2985-164">Estas cadenas y los átomos asociados solo están disponibles para la aplicación que creó la tabla.</span><span class="sxs-lookup"><span data-stu-id="a2985-164">These strings, and the associated atoms, are available only to the application that created the table.</span></span>

<span data-ttu-id="a2985-165">Una aplicación que requiere la misma cadena en un número de estructuras puede reducir el uso de memoria mediante una tabla Atom local.</span><span class="sxs-lookup"><span data-stu-id="a2985-165">An application requiring the same string in a number of structures can reduce memory usage by using a local atom table.</span></span> <span data-ttu-id="a2985-166">En lugar de copiar la cadena en cada estructura, la aplicación puede colocar la cadena en la tabla Atom e incluir el átomo resultante en las estructuras.</span><span class="sxs-lookup"><span data-stu-id="a2985-166">Rather than copying the string into each structure, the application can place the string in the atom table and include the resulting atom in the structures.</span></span> <span data-ttu-id="a2985-167">De esta manera, una cadena solo aparece una vez en la memoria, pero se puede usar muchas veces en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a2985-167">In this way, a string appears only once in memory but can be used many times in the application.</span></span>

<span data-ttu-id="a2985-168">Las aplicaciones también pueden usar tablas Atom locales para ahorrar tiempo al buscar una cadena determinada.</span><span class="sxs-lookup"><span data-stu-id="a2985-168">Applications can also use local atom tables to save time when searching for a particular string.</span></span> <span data-ttu-id="a2985-169">Para realizar una búsqueda, una aplicación solo necesita colocar la cadena de búsqueda en la tabla de Atom y comparar el átomo resultante con los átomos en las estructuras pertinentes.</span><span class="sxs-lookup"><span data-stu-id="a2985-169">To perform a search, an application need only place the search string in the atom table and compare the resulting atom with the atoms in the relevant structures.</span></span> <span data-ttu-id="a2985-170">La comparación de átomos suele ser más rápida que la comparación de cadenas.</span><span class="sxs-lookup"><span data-stu-id="a2985-170">Comparing atoms is typically faster than comparing strings.</span></span>

<span data-ttu-id="a2985-171">Las tablas Atom se implementan como tablas hash.</span><span class="sxs-lookup"><span data-stu-id="a2985-171">Atom tables are implemented as hash tables.</span></span> <span data-ttu-id="a2985-172">De forma predeterminada, una tabla Atom local usa cubos 37 para su tabla hash.</span><span class="sxs-lookup"><span data-stu-id="a2985-172">By default, a local atom table uses 37 buckets for its hash table.</span></span> <span data-ttu-id="a2985-173">Sin embargo, puede cambiar el número de depósitos que se utilizan llamando a la función [**InitAtomTable**](/windows/desktop/api/Winbase/nf-winbase-initatomtable) .</span><span class="sxs-lookup"><span data-stu-id="a2985-173">However, you can change the number of buckets used by calling the [**InitAtomTable**](/windows/desktop/api/Winbase/nf-winbase-initatomtable) function.</span></span> <span data-ttu-id="a2985-174">Sin embargo, si la aplicación llama a **InitAtomTable**, debe hacerlo antes de llamar a cualquier otra función de administración Atom.</span><span class="sxs-lookup"><span data-stu-id="a2985-174">If the application calls **InitAtomTable**, however, it must do so before calling any other atom-management functions.</span></span>

## <a name="atom-types"></a><span data-ttu-id="a2985-175">Tipos Atom</span><span class="sxs-lookup"><span data-stu-id="a2985-175">Atom Types</span></span>

<span data-ttu-id="a2985-176">Las aplicaciones pueden crear dos tipos de átomos: cadena y átomos enteros.</span><span class="sxs-lookup"><span data-stu-id="a2985-176">Applications can create two types of atoms: string atoms and integer atoms.</span></span> <span data-ttu-id="a2985-177">Los valores de átomos enteros y átomos de cadena no se superponen, por lo que ambos tipos de átomos se pueden usar en el mismo bloque de código.</span><span class="sxs-lookup"><span data-stu-id="a2985-177">The values of integer atoms and string atoms do not overlap, so both types of atoms can be used in the same block of code.</span></span>

<span data-ttu-id="a2985-178">Varias funciones aceptan cadenas o átomos como parámetros.</span><span class="sxs-lookup"><span data-stu-id="a2985-178">Several functions accept either strings or atoms as parameters.</span></span> <span data-ttu-id="a2985-179">Al pasar un átomo a estas funciones, una aplicación puede usar la macro [**MAKEINTATOM**](/windows/desktop/api/Winbase/nf-winbase-makeintatom) para convertir el átomo en un formato que pueda usar la función.</span><span class="sxs-lookup"><span data-stu-id="a2985-179">When passing an atom to these functions, an application can use the [**MAKEINTATOM**](/windows/desktop/api/Winbase/nf-winbase-makeintatom) macro to convert the atom into a form that can be used by the function.</span></span>

<span data-ttu-id="a2985-180">En las secciones siguientes se describen los tipos Atom.</span><span class="sxs-lookup"><span data-stu-id="a2985-180">The following sections describe atom types.</span></span>

-   [<span data-ttu-id="a2985-181">Átomos de cadena</span><span class="sxs-lookup"><span data-stu-id="a2985-181">String Atoms</span></span>](#string-atoms)
-   [<span data-ttu-id="a2985-182">Átomos enteros</span><span class="sxs-lookup"><span data-stu-id="a2985-182">Integer Atoms</span></span>](#integer-atoms)

### <a name="string-atoms"></a><span data-ttu-id="a2985-183">Átomos de cadena</span><span class="sxs-lookup"><span data-stu-id="a2985-183">String Atoms</span></span>

<span data-ttu-id="a2985-184">Cuando las aplicaciones pasan cadenas terminadas en null a las funciones [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma)y [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) , reciben *átomos de cadena* (enteros de 16 bits) a la vuelta.</span><span class="sxs-lookup"><span data-stu-id="a2985-184">When applications pass null-terminated strings to the [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma), and [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) functions, they receive *string atoms* (16-bit integers) in return.</span></span> <span data-ttu-id="a2985-185">Los átomos de cadena tienen las siguientes propiedades:</span><span class="sxs-lookup"><span data-stu-id="a2985-185">String atoms have the following properties:</span></span>

-   <span data-ttu-id="a2985-186">Los valores de los átomos de cadena están en el intervalo 0xC000 (MAXINTATOM) a 0xFFFF.</span><span class="sxs-lookup"><span data-stu-id="a2985-186">The values of string atoms are in the range 0xC000 (MAXINTATOM) through 0xFFFF.</span></span>
-   <span data-ttu-id="a2985-187">El caso no es significativo en las búsquedas de un nombre Atom en una tabla Atom.</span><span class="sxs-lookup"><span data-stu-id="a2985-187">Case is not significant in searches for an atom name in an atom table.</span></span> <span data-ttu-id="a2985-188">Además, toda la cadena debe coincidir en una operación de búsqueda; no se realiza ninguna coincidencia de subcadenas.</span><span class="sxs-lookup"><span data-stu-id="a2985-188">Also, the entire string must match in a search operation; no substring matching is performed.</span></span>
-   <span data-ttu-id="a2985-189">La cadena asociada a un átomo de cadena no puede tener más de 255 bytes de tamaño.</span><span class="sxs-lookup"><span data-stu-id="a2985-189">The string associated with a string atom can be no more than 255 bytes in size.</span></span> <span data-ttu-id="a2985-190">Esta limitación se aplica a todas las funciones Atom.</span><span class="sxs-lookup"><span data-stu-id="a2985-190">This limitation applies to all atom functions.</span></span>
-   <span data-ttu-id="a2985-191">Un *recuento de referencias* está asociado a cada nombre Atom.</span><span class="sxs-lookup"><span data-stu-id="a2985-191">A *reference count* is associated with each atom name.</span></span> <span data-ttu-id="a2985-192">El recuento se incrementa cada vez que se agrega el nombre Atom a la tabla y se reduce cada vez que se elimina el nombre Atom.</span><span class="sxs-lookup"><span data-stu-id="a2985-192">The count is incremented each time the atom name is added to the table and decremented each time the atom name is deleted from it.</span></span> <span data-ttu-id="a2985-193">Esto evita que distintos usuarios del mismo átomo de cadena destruyan los nombres Atom de los demás.</span><span class="sxs-lookup"><span data-stu-id="a2985-193">This prevents different users of the same string atom from destroying each other's atom names.</span></span> <span data-ttu-id="a2985-194">Cuando el recuento de referencias de un nombre Atom es igual a cero, el sistema quita el átomo y el nombre Atom de la tabla.</span><span class="sxs-lookup"><span data-stu-id="a2985-194">When the reference count for an atom name equals zero, the system removes the atom and the atom name from the table.</span></span>

### <a name="integer-atoms"></a><span data-ttu-id="a2985-195">Átomos enteros</span><span class="sxs-lookup"><span data-stu-id="a2985-195">Integer Atoms</span></span>

<span data-ttu-id="a2985-196">Los átomos enteros se diferencian de los átomos de cadena de las siguientes maneras:</span><span class="sxs-lookup"><span data-stu-id="a2985-196">Integer atoms differ from string atoms in the following ways:</span></span>

-   <span data-ttu-id="a2985-197">Los valores de los átomos enteros se encuentran en el intervalo de 0x0001 a 0xBFFF (**MAXINTATOM**– 1).</span><span class="sxs-lookup"><span data-stu-id="a2985-197">The values of integer atoms are in the range 0x0001 through 0xBFFF (**MAXINTATOM**– 1).</span></span>
-   <span data-ttu-id="a2985-198">La representación de cadena de un átomo de entero es \# *dddd*, donde los valores representados por *dddd* son dígitos decimales.</span><span class="sxs-lookup"><span data-stu-id="a2985-198">The string representation of an integer atom is \#*dddd*, where the values represented by *dddd* are decimal digits.</span></span> <span data-ttu-id="a2985-199">Los ceros a la izquierda se omiten.</span><span class="sxs-lookup"><span data-stu-id="a2985-199">Leading zeros are ignored.</span></span>
-   <span data-ttu-id="a2985-200">No hay ninguna sobrecarga de almacenamiento o recuento de referencias asociada a un Atom entero.</span><span class="sxs-lookup"><span data-stu-id="a2985-200">There is no reference count or storage overhead associated with an integer atom.</span></span>

## <a name="atom-creation-and-usage-count"></a><span data-ttu-id="a2985-201">Creación y recuento de uso de Atom</span><span class="sxs-lookup"><span data-stu-id="a2985-201">Atom Creation and Usage Count</span></span>

<span data-ttu-id="a2985-202">Una aplicación crea un átomo local llamando a la función [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) . crea un átomo global mediante una llamada a la función [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) .</span><span class="sxs-lookup"><span data-stu-id="a2985-202">An application creates a local atom by calling the [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) function; it creates a global atom by calling the [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma) function.</span></span> <span data-ttu-id="a2985-203">Ambas funciones requieren un puntero a una cadena.</span><span class="sxs-lookup"><span data-stu-id="a2985-203">Both functions require a pointer to a string.</span></span> <span data-ttu-id="a2985-204">El sistema busca la cadena en la tabla Atom adecuada y devuelve el átomo correspondiente a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="a2985-204">The system searches the appropriate atom table for the string and returns the corresponding atom to the application.</span></span> <span data-ttu-id="a2985-205">En el caso de un átomo de cadena, si la cadena ya reside en la tabla de Atom, el sistema incrementa el recuento de referencias para la cadena durante este proceso.</span><span class="sxs-lookup"><span data-stu-id="a2985-205">In the case of a string atom, if the string already resides in the atom table, the system increments the reference count for the string during this process.</span></span>

<span data-ttu-id="a2985-206">Las llamadas repetidas para agregar el mismo nombre Atom devuelven el mismo átomo.</span><span class="sxs-lookup"><span data-stu-id="a2985-206">Repeated calls to add the same atom name return the same atom.</span></span> <span data-ttu-id="a2985-207">Si el nombre de Atom no existe en la tabla cuando se llama a [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) , el nombre de Atom se agrega a la tabla y se devuelve un nuevo Atom.</span><span class="sxs-lookup"><span data-stu-id="a2985-207">If the atom name does not exist in the table when [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw) is called, the atom name is added to the table and a new atom is returned.</span></span> <span data-ttu-id="a2985-208">Si es un átomo de cadena, su recuento de referencias también se establece en uno.</span><span class="sxs-lookup"><span data-stu-id="a2985-208">If it is a string atom, its reference count is also set to one.</span></span>

<span data-ttu-id="a2985-209">Una aplicación debe llamar a la función [**DeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-deleteatom) cuando ya no necesita usar un átomo local. debe llamar a la función [**GlobalDeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) cuando ya no necesite un átomo global.</span><span class="sxs-lookup"><span data-stu-id="a2985-209">An application should call the [**DeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-deleteatom) function when it no longer needs to use a local atom; it should call the [**GlobalDeleteAtom**](/windows/desktop/api/Winbase/nf-winbase-globaldeleteatom) function when it no longer needs a global atom.</span></span> <span data-ttu-id="a2985-210">En el caso de un átomo de cadena, cualquiera de estas funciones reduce el recuento de referencias del Atom correspondiente en uno.</span><span class="sxs-lookup"><span data-stu-id="a2985-210">In the case of a string atom, either of these functions reduces the reference count of the corresponding atom by one.</span></span> <span data-ttu-id="a2985-211">Cuando el recuento de referencias llega a cero, el sistema elimina el nombre de Atom de la tabla.</span><span class="sxs-lookup"><span data-stu-id="a2985-211">When the reference count reaches zero, the system deletes the atom name from the table.</span></span>

<span data-ttu-id="a2985-212">El nombre Atom de un átomo de cadena permanece en la tabla global Atom, siempre que su recuento de referencias sea mayor que cero, incluso después de que finalice la aplicación que la colocó en la tabla.</span><span class="sxs-lookup"><span data-stu-id="a2985-212">The atom name of a string atom remains in the global atom table as long as its reference count is greater than zero, even after the application that placed it in the table terminates.</span></span> <span data-ttu-id="a2985-213">Una tabla Atom local se destruye cuando finaliza la aplicación asociada, independientemente de los recuentos de referencia de los átomos de la tabla.</span><span class="sxs-lookup"><span data-stu-id="a2985-213">A local atom table is destroyed when the associated application terminates, regardless of the reference counts of the atoms in the table.</span></span>

## <a name="atom-table-queries"></a><span data-ttu-id="a2985-214">Consultas Atom-Table</span><span class="sxs-lookup"><span data-stu-id="a2985-214">Atom-Table Queries</span></span>

<span data-ttu-id="a2985-215">Una aplicación puede determinar si una cadena determinada ya está en una tabla Atom mediante la función [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) o [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) .</span><span class="sxs-lookup"><span data-stu-id="a2985-215">An application can determine whether a particular string is already in an atom table by using the [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma) or [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) function.</span></span> <span data-ttu-id="a2985-216">Estas funciones buscan en una tabla Atom la cadena especificada y, si la cadena está ahí, devuelven el átomo correspondiente.</span><span class="sxs-lookup"><span data-stu-id="a2985-216">These functions search an atom table for the specified string and, if the string is there, return the corresponding atom.</span></span>

<span data-ttu-id="a2985-217">Una aplicación puede usar la función [**GetAtomName**](/windows/desktop/api/Winbase/nf-winbase-getatomnamea) o [**GlobalGetAtomName**](/windows/desktop/api/Winbase/nf-winbase-globalgetatomnamea) para recuperar una cadena de nombre Atom de una tabla Atom, siempre que la aplicación tenga el átomo correspondiente a la cadena que se busca.</span><span class="sxs-lookup"><span data-stu-id="a2985-217">An application can use the [**GetAtomName**](/windows/desktop/api/Winbase/nf-winbase-getatomnamea) or [**GlobalGetAtomName**](/windows/desktop/api/Winbase/nf-winbase-globalgetatomnamea) function to retrieve an atom-name string from an atom table, provided the application has the atom corresponding to the string being sought.</span></span> <span data-ttu-id="a2985-218">Ambas funciones copian la cadena de nombre Atom del átomo especificado en un búfer y devuelven la longitud de la cadena que se copió.</span><span class="sxs-lookup"><span data-stu-id="a2985-218">Both functions copy the atom-name string of the specified atom to a buffer and return the length of the string that was copied.</span></span> <span data-ttu-id="a2985-219">**GetAtomName** recupera una cadena de nombre Atom de una tabla Atom local y **GlobalGetAtomName** recupera una cadena de nombre Atom de la tabla global Atom.</span><span class="sxs-lookup"><span data-stu-id="a2985-219">**GetAtomName** retrieves an atom-name string from a local atom table, and **GlobalGetAtomName** retrieves an atom-name string from the global atom table.</span></span>

## <a name="atom-string-formats"></a><span data-ttu-id="a2985-220">Formatos de cadena Atom</span><span class="sxs-lookup"><span data-stu-id="a2985-220">Atom String Formats</span></span>

<span data-ttu-id="a2985-221">Las funciones [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma)y [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) toman un puntero a una cadena terminada en NULL.</span><span class="sxs-lookup"><span data-stu-id="a2985-221">The [**AddAtom**](/windows/desktop/api/Winbase/nf-winbase-addatomw), [**GlobalAddAtom**](/windows/desktop/api/Winbase/nf-winbase-globaladdatoma), [**FindAtom**](/windows/desktop/api/Winbase/nf-winbase-findatoma), and [**GlobalFindAtom**](/windows/desktop/api/Winbase/nf-winbase-globalfindatoma) functions take a pointer to a null-terminated string.</span></span> <span data-ttu-id="a2985-222">Una aplicación puede especificar este puntero de una de las siguientes maneras.</span><span class="sxs-lookup"><span data-stu-id="a2985-222">An application can specify this pointer in one of the following ways.</span></span>



|                    |                                                                                                    |
|--------------------|----------------------------------------------------------------------------------------------------|
| <span data-ttu-id="a2985-223">\#*dddd*</span><span class="sxs-lookup"><span data-stu-id="a2985-223">\#*dddd*</span></span>           | <span data-ttu-id="a2985-224">Entero especificado como una cadena decimal.</span><span class="sxs-lookup"><span data-stu-id="a2985-224">An integer specified as a decimal string.</span></span> <span data-ttu-id="a2985-225">Se usa para crear o buscar un Atom entero.</span><span class="sxs-lookup"><span data-stu-id="a2985-225">Used to create or find an integer atom.</span></span>                  |
| <span data-ttu-id="a2985-226">*nombre de Atom de cadena*</span><span class="sxs-lookup"><span data-stu-id="a2985-226">*string atom name*</span></span> | <span data-ttu-id="a2985-227">Nombre de Atom de cadena.</span><span class="sxs-lookup"><span data-stu-id="a2985-227">A string atom name.</span></span> <span data-ttu-id="a2985-228">Se usa para agregar un nombre Atom de cadena a una tabla Atom y recibir un átomo en la devolución.</span><span class="sxs-lookup"><span data-stu-id="a2985-228">Used to add a string atom name to an atom table and receive an atom in return.</span></span> |



 

 

 
