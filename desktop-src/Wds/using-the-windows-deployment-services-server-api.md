---
title: Uso de la API de servidor de Servicios de implementación de Windows
description: En entornos donde no se puede usar la solución estándar de servicios de implementación de Windows (WDS), el servidor WDS expone una API que permite a los desarrolladores escribir complementos, denominados proveedores, para controlar las solicitudes del entorno de ejecución previo al arranque (PXE).
ms.assetid: 5e25654a-33c6-4c0f-acc3-e938d1f4a4e7
keywords:
- Servicios de implementación de Windows servicios de implementación de Windows mediante la API de servidor
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d3634dffa73eddc9b5db92be6bc807cccbc5248f
ms.sourcegitcommit: c2a1c4314550ea9bd202d28adfcc7bfe6180932f
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/11/2020
ms.locfileid: "103789340"
---
# <a name="using-the-windows-deployment-services-server-api"></a><span data-ttu-id="c7a94-104">Uso de la API de servidor de Servicios de implementación de Windows</span><span class="sxs-lookup"><span data-stu-id="c7a94-104">Using the Windows Deployment Services Server API</span></span>

<span data-ttu-id="c7a94-105">En entornos donde no se puede usar la solución estándar de servicios de implementación de Windows (WDS), el servidor WDS expone una API que permite a los desarrolladores escribir complementos, denominados proveedores, para controlar las solicitudes del entorno de ejecución previo al arranque (PXE).</span><span class="sxs-lookup"><span data-stu-id="c7a94-105">In environments where the standard Windows Deployment Services (WDS) solution cannot be used, the WDS server exposes an API that enables developers to write plug-ins, referred to as providers, to handle preboot execution environment (PXE) requests.</span></span> <span data-ttu-id="c7a94-106">Los desarrolladores deben cumplir las siguientes directrices al escribir proveedores de PXE para WDS.</span><span class="sxs-lookup"><span data-stu-id="c7a94-106">Developers should adhere to the following guidelines when writing PXE providers for WDS.</span></span>

## <a name="install-the-wds-role-on-the-server"></a><span data-ttu-id="c7a94-107">Instalación del rol de WDS en el servidor</span><span class="sxs-lookup"><span data-stu-id="c7a94-107">Install the WDS Role on the Server</span></span>

-   <span data-ttu-id="c7a94-108">Servicios de implementación de Windows (WDS) es la versión revisada de los servicios de instalación remota (RIS). necesitará el rol de servidor de WDS para implementar el servidor PXE y los proveedores de WDS.</span><span class="sxs-lookup"><span data-stu-id="c7a94-108">Windows Deployment Services (WDS) is the revised version of Remote Installation Services (RIS), you will need the WDS server role to implement the WDS PXE server and providers.</span></span>
-   <span data-ttu-id="c7a94-109">WDS reemplaza a RIS como componente estándar a partir de Windows Server 2008 y Windows Server 2003 con Service Pack 2 (SP2).</span><span class="sxs-lookup"><span data-stu-id="c7a94-109">WDS replaces RIS as the standard component starting with Windows Server 2008 and Windows Server 2003 with Service Pack 2 (SP2).</span></span>
-   <span data-ttu-id="c7a94-110">Debe actualizar el servidor de RIS a WDS en Windows Server 2003 con Service Pack 1 (SP1).</span><span class="sxs-lookup"><span data-stu-id="c7a94-110">You must update the RIS server to WDS on Windows Server 2003 with Service Pack 1 (SP1).</span></span> <span data-ttu-id="c7a94-111">Puede instalar el rol de servidor de WDS con el [Kit de instalación automatizada de Windows (WAIK)](https://www.microsoft.com/download/details.aspx?id=10333).</span><span class="sxs-lookup"><span data-stu-id="c7a94-111">You can install the WDS server role with the [Windows Automated Installation Kit (WAIK)](https://www.microsoft.com/download/details.aspx?id=10333).</span></span>

## <a name="register-providers"></a><span data-ttu-id="c7a94-112">Registrar proveedores</span><span class="sxs-lookup"><span data-stu-id="c7a94-112">Register Providers</span></span>

-   <span data-ttu-id="c7a94-113">Registre la biblioteca de vínculos dinámicos (DLL) del proveedor durante su instalación e inserte el proveedor en la lista ordenada de proveedores registrados.</span><span class="sxs-lookup"><span data-stu-id="c7a94-113">Register the provider dynamic-link library (DLL) during its installation and insert the provider into the ordered list of registered providers.</span></span>
    > [!Note]  
    > <span data-ttu-id="c7a94-114">Al instalar un proveedor nuevo o modificado, deberá reiniciar el servicio PXE de WDS para que los cambios surtan efecto.</span><span class="sxs-lookup"><span data-stu-id="c7a94-114">When you install a new or modified provider, you will need to restart WDS PXE service for the changes to take effect.</span></span>

     

-   <span data-ttu-id="c7a94-115">Utilice la función [**PxeProviderRegister**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderregister) para registrar el proveedor y agregarlo a la lista.</span><span class="sxs-lookup"><span data-stu-id="c7a94-115">Use the [**PxeProviderRegister**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderregister) function to register the provider and add it to the list.</span></span> <span data-ttu-id="c7a94-116">Use la función [**PxeProviderUnRegister**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderunregister) para anular el registro de un proveedor registrado y quitarlo de la lista.</span><span class="sxs-lookup"><span data-stu-id="c7a94-116">Use the [**PxeProviderUnRegister**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderunregister) function to unregister a registered provider and remove it from the list.</span></span>
-   <span data-ttu-id="c7a94-117">Especifique la secuencia del proveedor en la lista ordenada.</span><span class="sxs-lookup"><span data-stu-id="c7a94-117">Specify the sequence of the provider in the ordered list.</span></span> <span data-ttu-id="c7a94-118">No se puede garantizar el índice de un proveedor de la lista porque es posible que otro proveedor se registre más adelante antes.</span><span class="sxs-lookup"><span data-stu-id="c7a94-118">The index of a provider in the list cannot be guaranteed because another provider may later be registered before it.</span></span> <span data-ttu-id="c7a94-119">Para insertar el proveedor en la lista antes o después de otro proveedor registrado, utilice primero la función [**PxeProviderQueryIndex**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderqueryindex) para obtener el índice del proveedor registrado y, a continuación, registre el nuevo proveedor mientras especifica un valor de índice mayor o menor.</span><span class="sxs-lookup"><span data-stu-id="c7a94-119">To insert the provider in the list before or after another registered provider, first use the [**PxeProviderQueryIndex**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderqueryindex) function to get the index of the registered provider and then register the new provider while specifying a larger or smaller index value.</span></span>
-   <span data-ttu-id="c7a94-120">La instalación puede almacenar la información de configuración del proveedor en la clave del registro devuelta cuando se registra el proveedor.</span><span class="sxs-lookup"><span data-stu-id="c7a94-120">The installation can store provider configuration information under the registry key returned when the provider is registered.</span></span> <span data-ttu-id="c7a94-121">El *phProviderKey* de [**PxeProviderRegister**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderregister)recibe la dirección de la clave del registro.</span><span class="sxs-lookup"><span data-stu-id="c7a94-121">The address of the registry key is received by the *phProviderKey* of [**PxeProviderRegister**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderregister).</span></span> <span data-ttu-id="c7a94-122">El proveedor recibe un identificador a esta misma clave que el parámetro *hProviderKey* en su devolución de llamada [*PxeProviderInitialize*](pxeproviderinitialize.md) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-122">The provider receives a handle to this same key as the *hProviderKey* parameter to its [*PxeProviderInitialize*](pxeproviderinitialize.md) callback.</span></span> <span data-ttu-id="c7a94-123">El proveedor debe almacenar la dirección de esta clave.</span><span class="sxs-lookup"><span data-stu-id="c7a94-123">The provider should store the address of this key.</span></span>
-   <span data-ttu-id="c7a94-124">Instale siempre la biblioteca de vínculos dinámicos (DLL) del proveedor en la carpeta archivos de programa del servidor.</span><span class="sxs-lookup"><span data-stu-id="c7a94-124">Always install the provider dynamic-link library (DLL) in the server's Program Files folder.</span></span>

## <a name="initialize"></a><span data-ttu-id="c7a94-125">Inicialización</span><span class="sxs-lookup"><span data-stu-id="c7a94-125">Initialize</span></span>

-   <span data-ttu-id="c7a94-126">Incluya un archivo DLL que exporte la función de devolución de llamada [*PxeProviderInitialize*](pxeproviderinitialize.md) en el proveedor.</span><span class="sxs-lookup"><span data-stu-id="c7a94-126">Include a DLL that exports the [*PxeProviderInitialize*](pxeproviderinitialize.md) callback function in the provider.</span></span> <span data-ttu-id="c7a94-127">Cada proveedor requiere una devolución de llamada *PxeProviderInitialize* .</span><span class="sxs-lookup"><span data-stu-id="c7a94-127">Every provider requires a *PxeProviderInitialize* callback.</span></span> <span data-ttu-id="c7a94-128">Cuando WDS carga un proveedor, llama a la función *PxeProviderInitialize* del proveedor y pasa un identificador a la misma clave que se utiliza para almacenar la información de configuración durante el registro del proveedor.</span><span class="sxs-lookup"><span data-stu-id="c7a94-128">When WDS loads a provider, it calls the provider's *PxeProviderInitialize* function and passes a handle to the same key that is used to store configuration information during provider registration.</span></span>
-   <span data-ttu-id="c7a94-129">Cuando la devolución de llamada de [*PxeProviderInitialize*](pxeproviderinitialize.md) devuelve y se realiza correctamente, el proveedor debe inicializarse completamente y estar listo para procesar solicitudes.</span><span class="sxs-lookup"><span data-stu-id="c7a94-129">When the [*PxeProviderInitialize*](pxeproviderinitialize.md) callback returns and is successful, the provider should be fully initialized and ready to process requests.</span></span>
-   <span data-ttu-id="c7a94-130">Registre todas las devoluciones de llamada en el proveedor durante el procesamiento de la función [*PxeProviderInitialize*](pxeproviderinitialize.md) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-130">Register every callback in the provider during the processing of the [*PxeProviderInitialize*](pxeproviderinitialize.md) function.</span></span> <span data-ttu-id="c7a94-131">Las devoluciones de llamada se deben registrar con la función [**PxeRegisterCallback**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeregistercallback) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-131">Callbacks should be registered with the [**PxeRegisterCallback**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeregistercallback) function.</span></span>
-   <span data-ttu-id="c7a94-132">Inicialice todos los recursos internos del proveedor en el procesamiento de su función [*PxeProviderInitialize*](pxeproviderinitialize.md) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-132">Initialize all the provider's internal resources within the processing of its [*PxeProviderInitialize*](pxeproviderinitialize.md) function.</span></span>

## <a name="shutdown"></a><span data-ttu-id="c7a94-133">Apagar</span><span class="sxs-lookup"><span data-stu-id="c7a94-133">Shutdown</span></span>

-   <span data-ttu-id="c7a94-134">Implemente la devolución de llamada [*PxeProviderShutdown*](pxeprovidershutdown.md) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-134">Implement the [*PxeProviderShutdown*](pxeprovidershutdown.md) callback.</span></span> <span data-ttu-id="c7a94-135">Cada proveedor debe tener una devolución de llamada *PxeProviderShutdown*.</span><span class="sxs-lookup"><span data-stu-id="c7a94-135">Every provider is required to have a *PxeProviderShutdown* callback.</span></span>
-   <span data-ttu-id="c7a94-136">La función de devolución de llamada [*PxeProviderShutdown*](pxeprovidershutdown.md) debe cerrar completamente el proveedor y liberar todos sus recursos.</span><span class="sxs-lookup"><span data-stu-id="c7a94-136">The [*PxeProviderShutdown*](pxeprovidershutdown.md) callback function should fully shut down the provider and release all its resources.</span></span>
-   <span data-ttu-id="c7a94-137">Después de que la devolución de llamada de [*PxeProviderShutdown*](pxeprovidershutdown.md) vuelva, el identificador de *hProvider* pasado a la función [*PxeProviderInitialize*](pxeproviderinitialize.md) ya no es válido y no debe usarse para llamar a WDS.</span><span class="sxs-lookup"><span data-stu-id="c7a94-137">After the [*PxeProviderShutdown*](pxeprovidershutdown.md) callback returns, the *hProvider* handle passed to the [*PxeProviderInitialize*](pxeproviderinitialize.md) function is no longer valid and should not be used to call WDS.</span></span>
-   <span data-ttu-id="c7a94-138">Registre la devolución de llamada de [*PxeProviderShutdown*](pxeprovidershutdown.md) llamando a la función [**PxeRegisterCallback**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeregistercallback) con el apagado de la **devolución de \_ llamada \_ PXE** durante el procesamiento de la devolución de llamada [*PxeProviderInitialize*](pxeproviderinitialize.md) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-138">Register the [*PxeProviderShutdown*](pxeprovidershutdown.md) callback by calling the [**PxeRegisterCallback**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeregistercallback) function with **PXE\_CALLBACK\_SHUTDOWN** during the processing of the [*PxeProviderInitialize*](pxeproviderinitialize.md) callback.</span></span> <span data-ttu-id="c7a94-139">No llame a la devolución de llamada *PxeProviderShutdown* si se produce un error en la función *PxeProviderInitialize* .</span><span class="sxs-lookup"><span data-stu-id="c7a94-139">Do not call the *PxeProviderShutdown* callback if the *PxeProviderInitialize* function fails.</span></span>

## <a name="handle-request-packet"></a><span data-ttu-id="c7a94-140">Controlar el paquete de solicitud</span><span class="sxs-lookup"><span data-stu-id="c7a94-140">Handle Request Packet</span></span>

<span data-ttu-id="c7a94-141">Implemente la devolución de llamada [*PxeProviderRecvRequest*](pxeproviderrecvrequest.md) para el proveedor.</span><span class="sxs-lookup"><span data-stu-id="c7a94-141">Implement the [*PxeProviderRecvRequest*](pxeproviderrecvrequest.md) callback for the provider.</span></span> <span data-ttu-id="c7a94-142">Cada proveedor debe tener una devolución de llamada *PxeProviderRecvRequest* .</span><span class="sxs-lookup"><span data-stu-id="c7a94-142">Every provider is required to have a *PxeProviderRecvRequest* callback.</span></span> <span data-ttu-id="c7a94-143">Cuando WDS recibe una solicitud, llama a la devolución de llamada *PxeProviderRecvRequest* para el primer proveedor de la lista de proveedores registrados.</span><span class="sxs-lookup"><span data-stu-id="c7a94-143">When WDS receives a request, it calls the *PxeProviderRecvRequest* callback for the first provider in the registered provider list.</span></span>

-   <span data-ttu-id="c7a94-144">Si el proveedor va a procesar esta solicitud de forma sincrónica, la función [*PxeProviderRecvRequest*](pxeproviderrecvrequest.md) debe devolver un valor de **error \_ Success**.</span><span class="sxs-lookup"><span data-stu-id="c7a94-144">If the provider will process this request synchronously, the [*PxeProviderRecvRequest*](pxeproviderrecvrequest.md) function should return a value of **ERROR\_SUCCESS**.</span></span> <span data-ttu-id="c7a94-145">Si y solo si el proveedor va a procesar esta solicitud de forma asincrónica, la devolución de llamada de *PxeProviderRecvRequest* debe devolver el **error de \_ e/s \_ pendiente** y llamar a la función [**PxeAsyncRecvDone**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeasyncrecvdone) cuando se ha procesado la solicitud.</span><span class="sxs-lookup"><span data-stu-id="c7a94-145">If and only if the provider will process this request asynchronously, the *PxeProviderRecvRequest* callback should return **ERROR\_IO\_PENDING** and call the [**PxeAsyncRecvDone**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeasyncrecvdone) function when the request has been processed.</span></span>
-   <span data-ttu-id="c7a94-146">La devolución de llamada [*PxeProviderRecvRequest*](pxeproviderrecvrequest.md) y la función [**PxeAsyncRecvDone**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeasyncrecvdone) devuelven la dirección de una enumeración de **\_ \_ acción de arranque PXE** que describe la acción realizada por el proveedor para controlar la solicitud.</span><span class="sxs-lookup"><span data-stu-id="c7a94-146">The [*PxeProviderRecvRequest*](pxeproviderrecvrequest.md) callback and the [**PxeAsyncRecvDone**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeasyncrecvdone) function returns the address of a **PXE\_BOOT\_ACTION** enum that describes the action taken by the provider to handle the request.</span></span>

    <span data-ttu-id="c7a94-147">Hay cuatro maneras de que un proveedor administre una solicitud:</span><span class="sxs-lookup"><span data-stu-id="c7a94-147">There are four ways for a provider to handle a request:</span></span>

    -   <span data-ttu-id="c7a94-148">El proveedor responde al cliente con un paquete de respuesta DHCP estándar que contiene una ruta de acceso al programa de arranque de red.</span><span class="sxs-lookup"><span data-stu-id="c7a94-148">The provider replies to the client with a standard DHCP response packet that contains a path to the Network Boot Program.</span></span> <span data-ttu-id="c7a94-149">La devolución del valor **\_ \_ NBP** de la cuenta de PXE para la enumeración significa que el proveedor ha procesado correctamente el paquete de solicitud y ha completado la solicitud mediante el envío de un paquete de respuesta llamando a las funciones [**PxePacketAllocate**](/windows/win32/api/WdsPxe/nf-wdspxe-pxepacketallocate) y [**PxeSendReply**](/windows/win32/api/WdsPxe/nf-wdspxe-pxesendreply) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-149">Returning the **PXE\_BA\_NBP** value for the enum means that the provider has successfully processed the request packet and completed the request by sending a response packet by calling the [**PxePacketAllocate**](/windows/win32/api/WdsPxe/nf-wdspxe-pxepacketallocate) and [**PxeSendReply**](/windows/win32/api/WdsPxe/nf-wdspxe-pxesendreply) functions.</span></span>
    -   <span data-ttu-id="c7a94-150">El proveedor responde al cliente con un paquete de respuesta personalizado que no se ajusta a DHCP.</span><span class="sxs-lookup"><span data-stu-id="c7a94-150">The provider replies to the client with a custom response packet that does not conform to DHCP.</span></span> <span data-ttu-id="c7a94-151">Devolver el **valor \_ \_ personalizado** de la BA de PXE para la enumeración significa que el proveedor ha procesado correctamente el paquete de solicitud y ha completado la solicitud mediante el envío de un paquete de respuesta personalizado mediante una llamada a las funciones [**PxePacketAllocate**](/windows/win32/api/WdsPxe/nf-wdspxe-pxepacketallocate) y [**PxeSendReply**](/windows/win32/api/WdsPxe/nf-wdspxe-pxesendreply) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-151">Returning the **PXE\_BA\_CUSTOM** value for the enum means that the provider has successfully processed the request packet and completed the request by sending a custom response packet by calling the [**PxePacketAllocate**](/windows/win32/api/WdsPxe/nf-wdspxe-pxepacketallocate) and [**PxeSendReply**](/windows/win32/api/WdsPxe/nf-wdspxe-pxesendreply) functions.</span></span>
    -   <span data-ttu-id="c7a94-152">El proveedor determina que la solicitud se debe omitir.</span><span class="sxs-lookup"><span data-stu-id="c7a94-152">The provider determines the request should be ignored.</span></span> <span data-ttu-id="c7a94-153">Devolver el **valor \_ \_ Ignore de PXE BA** para la enumeración significa que el proveedor ha liberado todos los recursos asociados a la solicitud y la solicitud no se pasa al siguiente proveedor de la lista de proveedores registrados.</span><span class="sxs-lookup"><span data-stu-id="c7a94-153">Returning the **PXE\_BA\_IGNORE** value for the enum means the provider has released all resources associated with the request and the request is not passed to the next provider in the list of registered providers.</span></span> <span data-ttu-id="c7a94-154">Los proveedores pueden usar esta opción si detectan que un paquete de solicitud no es válido.</span><span class="sxs-lookup"><span data-stu-id="c7a94-154">Providers may use this option if they detect that a request packet is invalid.</span></span>
    -   <span data-ttu-id="c7a94-155">El proveedor declina el servicio de la solicitud.</span><span class="sxs-lookup"><span data-stu-id="c7a94-155">The provider declines to service the request.</span></span> <span data-ttu-id="c7a94-156">La devolución del valor de **\_ \_ rechazo** de la instancia de PXE para la enumeración indica al sistema que pase la solicitud al siguiente proveedor de la lista de proveedores registrados.</span><span class="sxs-lookup"><span data-stu-id="c7a94-156">Returning the **PXE\_BA\_REJECT** value for the enum instructs the system to pass the request to the next provider in the list of registered providers.</span></span> <span data-ttu-id="c7a94-157">Si este era el último proveedor de la lista, libera todos los recursos asociados a la solicitud y se omite la solicitud.</span><span class="sxs-lookup"><span data-stu-id="c7a94-157">If this were the last provider in the list, this releases all resources associated with the request and the request is ignored.</span></span>
    -   <span data-ttu-id="c7a94-158">Registre la devolución de llamada [*PxeProviderRecvRequest*](pxeproviderrecvrequest.md) llamando a la función [**PxeRegisterCallback**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeregistercallback) con la **\_ \_ \_ solicitud de devolución de llamada PXE** durante el procesamiento de la devolución de llamada [*PxeProviderInitialize*](pxeproviderinitialize.md) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-158">Register the [*PxeProviderRecvRequest*](pxeproviderrecvrequest.md) callback by calling the [**PxeRegisterCallback**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeregistercallback) function with **PXE\_CALLBACK\_RECV\_REQUEST** during the processing of the [*PxeProviderInitialize*](pxeproviderinitialize.md) callback.</span></span>

## <a name="generate-response-packet"></a><span data-ttu-id="c7a94-159">Generar paquete de respuesta</span><span class="sxs-lookup"><span data-stu-id="c7a94-159">Generate Response Packet</span></span>

-   <span data-ttu-id="c7a94-160">Use la API para escribir proveedores con el fin de controlar las solicitudes DHCP y generar paquetes de respuesta.</span><span class="sxs-lookup"><span data-stu-id="c7a94-160">Use the API to write providers to handle DHCP request and generate response packets.</span></span>
-   <span data-ttu-id="c7a94-161">La función [**PxeProviderSetAttribute**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeprovidersetattribute) especifica los atributos utilizados por el proveedor para filtrar los paquetes.</span><span class="sxs-lookup"><span data-stu-id="c7a94-161">The [**PxeProviderSetAttribute**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeprovidersetattribute) function specifies the attributes used by the provider to filter packets.</span></span> <span data-ttu-id="c7a94-162">Se pueden especificar los atributos del proveedor para que el proveedor vea todos los paquetes, el proveedor solo ve paquetes DHCP, o el proveedor solo ve los paquetes DHCP que especifican la opción de identificador de clase de proveedor DHCP (60) como "PXEClient".</span><span class="sxs-lookup"><span data-stu-id="c7a94-162">The attributes of the provider can be specified so that the provider see all packets, the provider sees only DHCP packets, or the provider sees only DHCP packets that specify the DHCP Vendor Class Identifier option (60) as "PXEClient".</span></span>
-   <span data-ttu-id="c7a94-163">La función [**PxeDhcpIsValid**](/windows/win32/api/WdsPxe/nf-wdspxe-pxedhcpisvalid) comprueba que un paquete es un paquete DHCP válido.</span><span class="sxs-lookup"><span data-stu-id="c7a94-163">The [**PxeDhcpIsValid**](/windows/win32/api/WdsPxe/nf-wdspxe-pxedhcpisvalid) function checks that a packet is a valid DHCP packet.</span></span> <span data-ttu-id="c7a94-164">Los proveedores pueden usar la función **PxeDhcpIsValid** para comprobar si un paquete del cliente es un paquete DHCP cuando el filtro establecido con la función [**PxeProviderSetAttribute**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeprovidersetattribute) se establece para recibir todos los paquetes y determinar si un paquete especificado es un paquete DHCP válido.</span><span class="sxs-lookup"><span data-stu-id="c7a94-164">Providers can use the **PxeDhcpIsValid** function to check whether a packet from the client is a DHCP packet when the filter set with the [**PxeProviderSetAttribute**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeprovidersetattribute) function is set to receive all packets to determine if a specified packet is a valid DHCP packet.</span></span>
-   <span data-ttu-id="c7a94-165">La función [**PxeDhcpInitialize**](/windows/win32/api/WdsPxe/nf-wdspxe-pxedhcpinitialize) Inicializa un paquete de respuesta como un paquete de respuesta DHCP que se basa en la información de un paquete recibido del cliente.</span><span class="sxs-lookup"><span data-stu-id="c7a94-165">The [**PxeDhcpInitialize**](/windows/win32/api/WdsPxe/nf-wdspxe-pxedhcpinitialize) function initializes a response packet as a DHCP reply packet that is based on the information in a packet received from the client.</span></span> <span data-ttu-id="c7a94-166">La función [*PxeProviderInitialize*](pxeproviderinitialize.md) toma la dirección de un paquete DHCP válido recibido del cliente en la devolución de llamada [*PxeProviderRecvRequest*](pxeproviderrecvrequest.md) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-166">The [*PxeProviderInitialize*](pxeproviderinitialize.md) function takes the address of a valid DHCP packet received from the client in the [*PxeProviderRecvRequest*](pxeproviderrecvrequest.md) callback.</span></span> <span data-ttu-id="c7a94-167">La función **PxeDhcpInitialize** toma un puntero a un paquete de respuesta asignado con la función [**PxePacketAllocate**](/windows/win32/api/WdsPxe/nf-wdspxe-pxepacketallocate) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-167">The **PxeDhcpInitialize** function takes a pointer to a reply packet allocated with the [**PxePacketAllocate**](/windows/win32/api/WdsPxe/nf-wdspxe-pxepacketallocate) function.</span></span>
-   <span data-ttu-id="c7a94-168">La función [**PxeDhcpGetOptionValue**](/windows/win32/api/WdsPxe/nf-wdspxe-pxedhcpgetoptionvalue) recupera un valor de opción de un paquete DHCP.</span><span class="sxs-lookup"><span data-stu-id="c7a94-168">The [**PxeDhcpGetOptionValue**](/windows/win32/api/WdsPxe/nf-wdspxe-pxedhcpgetoptionvalue) function retrieves an option value from a DHCP packet.</span></span> <span data-ttu-id="c7a94-169">La función [**PxeDhcpGetVendorOptionValue**](/windows/win32/api/WdsPxe/nf-wdspxe-pxedhcpgetvendoroptionvalue) recupera un valor de opción del campo de información específica del proveedor (43) de un paquete DHCP.</span><span class="sxs-lookup"><span data-stu-id="c7a94-169">The [**PxeDhcpGetVendorOptionValue**](/windows/win32/api/WdsPxe/nf-wdspxe-pxedhcpgetvendoroptionvalue) function retrieves an option value from the Vendor Specific Information field (43) of a DHCP packet.</span></span>
-   <span data-ttu-id="c7a94-170">Después, el proveedor puede rellenar el paquete de respuesta con información y usar la función [**PxeSendReply**](/windows/win32/api/WdsPxe/nf-wdspxe-pxesendreply) para enviar el paquete de respuesta al cliente.</span><span class="sxs-lookup"><span data-stu-id="c7a94-170">The provider can then populate the reply packet with information and use the [**PxeSendReply**](/windows/win32/api/WdsPxe/nf-wdspxe-pxesendreply) function to send the reply packet to the client.</span></span> <span data-ttu-id="c7a94-171">La función [**PxeDhcpAppendOption**](/windows/win32/api/WdsPxe/nf-wdspxe-pxedhcpappendoption) anexa una opción DHCP al paquete de respuesta.</span><span class="sxs-lookup"><span data-stu-id="c7a94-171">The [**PxeDhcpAppendOption**](/windows/win32/api/WdsPxe/nf-wdspxe-pxedhcpappendoption) function appends a DHCP option to the reply packet.</span></span>
-   <span data-ttu-id="c7a94-172">Un proveedor que responde a las solicitudes de cliente mediante el envío de un paquete debe asignar el paquete de respuesta mediante la función [**PxePacketAllocate**](/windows/win32/api/WdsPxe/nf-wdspxe-pxepacketallocate) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-172">A provider that replies to client requests by sending a packet must allocate the response packet using the [**PxePacketAllocate**](/windows/win32/api/WdsPxe/nf-wdspxe-pxepacketallocate) function.</span></span> <span data-ttu-id="c7a94-173">Después, el proveedor puede rellenar el paquete de respuesta con información y usar la función [**PxeSendReply**](/windows/win32/api/WdsPxe/nf-wdspxe-pxesendreply) para enviar el paquete de respuesta al cliente.</span><span class="sxs-lookup"><span data-stu-id="c7a94-173">The provider can then populate the reply packet with information and use the [**PxeSendReply**](/windows/win32/api/WdsPxe/nf-wdspxe-pxesendreply) function to send the reply packet to the client.</span></span>
-   <span data-ttu-id="c7a94-174">Cuando ya no se necesita la memoria asignada, el proveedor debe liberarla mediante la función [**PxePacketFree**](/windows/win32/api/WdsPxe/nf-wdspxe-pxepacketfree) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-174">When the allocated memory is no longer needed, the provider should release it using the [**PxePacketFree**](/windows/win32/api/WdsPxe/nf-wdspxe-pxepacketfree) function.</span></span>

## <a name="enumerate-registered-providers"></a><span data-ttu-id="c7a94-175">Enumerar proveedores registrados</span><span class="sxs-lookup"><span data-stu-id="c7a94-175">Enumerate Registered Providers</span></span>

-   <span data-ttu-id="c7a94-176">Use la API para escribir proveedores que enumeran y comprueban otros proveedores registrados en la lista.</span><span class="sxs-lookup"><span data-stu-id="c7a94-176">Use the API to write providers that enumerate and check other registered providers in the list.</span></span>
-   <span data-ttu-id="c7a94-177">La función [**PxeGetServerInfo**](/windows/win32/api/WdsPxe/nf-wdspxe-pxegetserverinfo) devuelve información acerca del servidor PXE.</span><span class="sxs-lookup"><span data-stu-id="c7a94-177">The [**PxeGetServerInfo**](/windows/win32/api/WdsPxe/nf-wdspxe-pxegetserverinfo) function returns information about the PXE server.</span></span> <span data-ttu-id="c7a94-178">La función **PxeGetServerInfo** devuelve un **booleano** que indica si el seguimiento está habilitado para el servidor.</span><span class="sxs-lookup"><span data-stu-id="c7a94-178">The **PxeGetServerInfo** function returns a **BOOL** that indicates whether tracing is enabled for the server.</span></span> <span data-ttu-id="c7a94-179">**True** indica que el seguimiento está habilitado.</span><span class="sxs-lookup"><span data-stu-id="c7a94-179">**TRUE** indicates that tracing is enabled.</span></span>
-   <span data-ttu-id="c7a94-180">La función [**PxeProviderEnumFirst**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderenumfirst) inicia una enumeración de proveedores en la lista de proveedores registrados.</span><span class="sxs-lookup"><span data-stu-id="c7a94-180">The [**PxeProviderEnumFirst**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderenumfirst) function starts an enumerationof providers in the registered provider list.</span></span> <span data-ttu-id="c7a94-181">La función **PxeProviderEnumFirst** inicia la enumeración y devuelve la dirección del identificador que se debe usar al llamar a la función [**PxeProviderEnumNext**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderenumnext) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-181">The **PxeProviderEnumFirst** function starts the enumeration and returns the address of the handle that should be used when calling the [**PxeProviderEnumNext**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderenumnext) function.</span></span> <span data-ttu-id="c7a94-182">La función **PxeProviderEnumNext** devuelve una estructura de [**\_ proveedor PXE**](/windows/win32/api/wdspxe/ns-wdspxe-pxe_provider) que contiene la información sobre el proveedor.</span><span class="sxs-lookup"><span data-stu-id="c7a94-182">The **PxeProviderEnumNext** function returns a [**PXE\_PROVIDER**](/windows/win32/api/wdspxe/ns-wdspxe-pxe_provider) structure containing the information about the provider.</span></span> <span data-ttu-id="c7a94-183">La función [**PxeProviderFreeInfo**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderfreeinfo) libera la memoria asignada para la estructura del **\_ proveedor PXE** mediante la función **PxeProviderEnumNext** .</span><span class="sxs-lookup"><span data-stu-id="c7a94-183">The [**PxeProviderFreeInfo**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderfreeinfo) function frees the memory that has been allocated for the **PXE\_PROVIDER** structure by the **PxeProviderEnumNext** function.</span></span> <span data-ttu-id="c7a94-184">La función [**PxeProviderEnumClose**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderenumclose) cierra la enumeración de proveedores en la lista de proveedores registrados.</span><span class="sxs-lookup"><span data-stu-id="c7a94-184">The [**PxeProviderEnumClose**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeproviderenumclose) function closes the enumeration of providers in the registered providers list.</span></span>

## <a name="handle-service-control-codes"></a><span data-ttu-id="c7a94-185">Controlar códigos de control de servicio</span><span class="sxs-lookup"><span data-stu-id="c7a94-185">Handle Service Control Codes</span></span>

-   <span data-ttu-id="c7a94-186">Cuando se recibe un mensaje de control de servicio, WDS llama a la devolución de llamada [*PxeProviderServiceControl*](pxeproviderservicecontrol.md) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-186">When a service control message is received, WDS calls the [*PxeProviderServiceControl*](pxeproviderservicecontrol.md) callback.</span></span>
-   <span data-ttu-id="c7a94-187">El proveedor puede definir una función de devolución de llamada [*PxeProviderServiceControl*](pxeproviderservicecontrol.md) para controlar los mensajes de control de servicio.</span><span class="sxs-lookup"><span data-stu-id="c7a94-187">The provider can define a [*PxeProviderServiceControl*](pxeproviderservicecontrol.md) callback function to handle service control messages.</span></span>
-   <span data-ttu-id="c7a94-188">Registre la devolución de llamada de [*PxeProviderServiceControl*](pxeproviderservicecontrol.md) mediante una llamada a la función [**PxeRegisterCallback**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeregistercallback) con el **control de servicio de devolución de \_ llamada \_ \_ PXE** durante el procesamiento de la devolución de llamada [*PxeProviderInitialize*](pxeproviderinitialize.md) .</span><span class="sxs-lookup"><span data-stu-id="c7a94-188">Register the [*PxeProviderServiceControl*](pxeproviderservicecontrol.md) callback by calling the [**PxeRegisterCallback**](/windows/win32/api/WdsPxe/nf-wdspxe-pxeregistercallback) function with **PXE\_CALLBACK\_SERVICE\_CONTROL** during the processing of the [*PxeProviderInitialize*](pxeproviderinitialize.md) callback.</span></span>

## <a name="add-trace-entries-to-pxe-log"></a><span data-ttu-id="c7a94-189">Agregar entradas de seguimiento al registro PXE</span><span class="sxs-lookup"><span data-stu-id="c7a94-189">Add Trace Entries to PXE Log</span></span>

-   <span data-ttu-id="c7a94-190">La función [**PxeTrace**](/windows/win32/api/WdsPxe/nf-wdspxe-pxetrace) agrega una entrada de seguimiento al registro de PXE.</span><span class="sxs-lookup"><span data-stu-id="c7a94-190">The [**PxeTrace**](/windows/win32/api/WdsPxe/nf-wdspxe-pxetrace) function adds a trace entry to the PXE log.</span></span> <span data-ttu-id="c7a94-191">WDSPXE proporciona seguimiento para ayudar a los administradores a solucionar problemas.</span><span class="sxs-lookup"><span data-stu-id="c7a94-191">WDSPXE provides tracing to help administrators in troubleshooting.</span></span> <span data-ttu-id="c7a94-192">Los proveedores pueden registrar entradas de seguimiento de distintos niveles de gravedad.</span><span class="sxs-lookup"><span data-stu-id="c7a94-192">Providers can log trace entries of different severity levels.</span></span> <span data-ttu-id="c7a94-193">Los administradores pueden configurar WDSPXE para que solo registren las entradas de determinados niveles de gravedad.</span><span class="sxs-lookup"><span data-stu-id="c7a94-193">The administrators can configure WDSPXE to only log entries for certain severity levels.</span></span>

## <a name="related-topics"></a><span data-ttu-id="c7a94-194">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="c7a94-194">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="c7a94-195">Acerca de la API de servicios de implementación de Windows</span><span class="sxs-lookup"><span data-stu-id="c7a94-195">About the Windows Deployment Services API</span></span>](about-the-windows-deployment-services-api.md)
</dt> <dt>

[<span data-ttu-id="c7a94-196">Uso de la API de cliente de Servicios de implementación de Windows</span><span class="sxs-lookup"><span data-stu-id="c7a94-196">Using the Windows Deployment Services Client API</span></span>](using-the-windows-deployment-services-client-api.md)
</dt> </dl>

 

 




