---
description: Capas de API (Direct3D 10)
ms.assetid: 19c81383-6ac7-49ea-98a3-bf761a32ab40
title: Capas de API (Direct3D 10)
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8b07b33dfd8280af13ea3df74e5e6d0fd040bb2c
ms.sourcegitcommit: ca37395fd832e798375e81142b97cffcffabf184
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/24/2021
ms.locfileid: "110335419"
---
# <a name="api-layers-direct3d-10"></a><span data-ttu-id="f6454-103">Capas de API (Direct3D 10)</span><span class="sxs-lookup"><span data-stu-id="f6454-103">API Layers (Direct3D 10)</span></span>

<span data-ttu-id="f6454-104">El entorno de ejecución de Direct3D 10 se construye con capas, empezando por la funcionalidad básica en el núcleo y creando funcionalidades opcionales y de ayuda para el desarrollador en capas externas.</span><span class="sxs-lookup"><span data-stu-id="f6454-104">The Direct3D 10 runtime is constructed with layers, starting with the basic functionality at the core and building optional and developer-assist functionality in outer layers.</span></span>

## <a name="core-layer"></a><span data-ttu-id="f6454-105">Capa principal</span><span class="sxs-lookup"><span data-stu-id="f6454-105">Core Layer</span></span>

<span data-ttu-id="f6454-106">La capa principal existe de forma predeterminada; proporcionar una asignación muy fina entre la API y el controlador de dispositivo, lo que minimiza la sobrecarga de las llamadas de alta frecuencia.</span><span class="sxs-lookup"><span data-stu-id="f6454-106">The core layer exists by default; providing a very thin mapping between the API and the device driver, minimizing overhead for high-frequency calls.</span></span> <span data-ttu-id="f6454-107">Como la capa principal es esencial para el rendimiento, solo realiza una validación crítica.</span><span class="sxs-lookup"><span data-stu-id="f6454-107">As the core layer is essential for performance, it only performs critical validation.</span></span>

<span data-ttu-id="f6454-108">Las capas restantes son opcionales.</span><span class="sxs-lookup"><span data-stu-id="f6454-108">The remaining layers are optional.</span></span> <span data-ttu-id="f6454-109">Como regla general, las capas agregan funcionalidad, pero no modifican el comportamiento existente.</span><span class="sxs-lookup"><span data-stu-id="f6454-109">As a general rule, layers add functionality, but do not modify existing behavior.</span></span> <span data-ttu-id="f6454-110">Por ejemplo, las funciones principales tendrán los mismos valores devueltos independientemente de la capa de depuración en la que se crea una instancia, aunque se puede proporcionar una salida de depuración adicional si se crea una instancia de la capa de depuración.</span><span class="sxs-lookup"><span data-stu-id="f6454-110">For example, core functions will have the same return values independent of the debug layer being instantiated, although additional debug output may be provided if the debug layer is instantiated.</span></span>

<span data-ttu-id="f6454-111">Cree capas cuando se cree un dispositivo llamando a [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice) y suministrando uno o varios valores [**D3D10 \_ CREATE DEVICE \_ \_ FLAG.**](/windows/desktop/api/D3D10/ne-d3d10-d3d10_create_device_flag)</span><span class="sxs-lookup"><span data-stu-id="f6454-111">Create layers when a device is created by calling [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice) and supplying one or more [**D3D10\_CREATE\_DEVICE\_FLAG**](/windows/desktop/api/D3D10/ne-d3d10-d3d10_create_device_flag) values.</span></span>

## <a name="debug-layer"></a><span data-ttu-id="f6454-112">Capa de depuración</span><span class="sxs-lookup"><span data-stu-id="f6454-112">Debug Layer</span></span>

<span data-ttu-id="f6454-113">La capa de depuración proporciona una amplia validación adicional de parámetros y coherencia (como validar la vinculación del sombreador y el enlace de recursos, validar la coherencia de los parámetros y notificar descripciones de errores).</span><span class="sxs-lookup"><span data-stu-id="f6454-113">The debug layer provides extensive additional parameter and consistency validation (such as validating shader linkage and resource binding, validating parameter consistency, and reporting error descriptions).</span></span> <span data-ttu-id="f6454-114">La salida generada por la capa de depuración consta de una cola de cadenas a las que se puede acceder mediante la interfaz [**ID3D10InfoQueue**](/windows/desktop/api/D3D10SDKLayers/nn-d3d10sdklayers-id3d10infoqueue) (vea Personalizar la salida de depuración con [ID3D10InfoQueue (Direct3D 10).](d3d10-graphics-programming-guide-api-features-layers-info-queue.md)</span><span class="sxs-lookup"><span data-stu-id="f6454-114">The output generated by the debug layer consists of a queue of strings which are accessible using the [**ID3D10InfoQueue Interface**](/windows/desktop/api/D3D10SDKLayers/nn-d3d10sdklayers-id3d10infoqueue) (see [Customize Debug Output with ID3D10InfoQueue (Direct3D 10)](d3d10-graphics-programming-guide-api-features-layers-info-queue.md)).</span></span> <span data-ttu-id="f6454-115">Los errores generados por la capa principal se resaltan con advertencias por la capa de depuración.</span><span class="sxs-lookup"><span data-stu-id="f6454-115">Errors generated by the core layer are highlighted with warnings by the debug layer.</span></span>

<span data-ttu-id="f6454-116">Para crear un dispositivo que admita la capa de depuración, debe instalar el SDK de DirectX (para obtener D3D10SDKLayers.DLL) y, a continuación, especificar la marca CREATE DEVICE DEBUG de D3D10 al llamar a \_ \_ \_ [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice).</span><span class="sxs-lookup"><span data-stu-id="f6454-116">To create a device that supports the debug layer, you must install the DirectX SDK (to get D3D10SDKLayers.DLL), and then specify the D3D10\_CREATE\_DEVICE\_DEBUG flag when calling [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice).</span></span> <span data-ttu-id="f6454-117">Por supuesto, la ejecución de una aplicación con la capa de depuración será considerablemente más lenta.</span><span class="sxs-lookup"><span data-stu-id="f6454-117">Of course, running an application with the debug layer will be substantially slower.</span></span> <span data-ttu-id="f6454-118">Para habilitar o deshabilitar los mensajes de depuración para las API D3DX10, llame a [**D3DX10DebugMute**](d3dx10debugmute.md).</span><span class="sxs-lookup"><span data-stu-id="f6454-118">To enable/disable debug messages for D3DX10 APIs, call [**D3DX10DebugMute**](d3dx10debugmute.md).</span></span>

<span data-ttu-id="f6454-119">Cuando la capa de depuración enumera pérdidas de memoria, genera una lista de punteros de interfaz de objeto junto con sus nombres descriptivos.</span><span class="sxs-lookup"><span data-stu-id="f6454-119">When the debug layer lists memory leaks, it outputs a list of object interface pointers along with their friendly names.</span></span> <span data-ttu-id="f6454-120">El nombre descriptivo predeterminado es " &lt; sin nombre &gt; ".</span><span class="sxs-lookup"><span data-stu-id="f6454-120">The default friendly name is "&lt;unnamed&gt;".</span></span> <span data-ttu-id="f6454-121">Puede establecer el nombre descriptivo mediante el método [**ID3D10DeviceChild::SetPrivateData**](/windows/desktop/api/D3D10/nf-d3d10-id3d10devicechild-setprivatedata) y el GUID **\_ D3DDebugObjectName de WKPDID** que se encuentra en D3Dcommon.h.</span><span class="sxs-lookup"><span data-stu-id="f6454-121">You can set the friendly name by using the [**ID3D10DeviceChild::SetPrivateData**](/windows/desktop/api/D3D10/nf-d3d10-id3d10devicechild-setprivatedata) method and the **WKPDID\_D3DDebugObjectName** GUID that is in D3Dcommon.h.</span></span> <span data-ttu-id="f6454-122">Por ejemplo, para nombrar pTexture con un nombre SDKLayer de mytexture.jpg, use el código siguiente:</span><span class="sxs-lookup"><span data-stu-id="f6454-122">For example, to name pTexture with a SDKLayer name of mytexture.jpg, use the following code:</span></span>


```
const char c_szName[] = "mytexture.jpg";
pTexture->SetPrivateData( WKPDID_D3DDebugObjectName, sizeof( c_szName ) - 1, c_szName );
```



<span data-ttu-id="f6454-123">Normalmente, debe compilar estas llamadas fuera de la versión de producción.</span><span class="sxs-lookup"><span data-stu-id="f6454-123">Typically, you should compile these calls out of your production version.</span></span>

## <a name="switch-to-reference-layer"></a><span data-ttu-id="f6454-124">Cambiar a capa de referencia</span><span class="sxs-lookup"><span data-stu-id="f6454-124">Switch-to-Reference Layer</span></span>

<span data-ttu-id="f6454-125">Esta capa permite a una aplicación realizar la transición entre un dispositivo de hardware (REF) y un dispositivo de referencia o software (REF).</span><span class="sxs-lookup"><span data-stu-id="f6454-125">This layer enables an application to transition between a hardware device (HAL) and a reference or software device (REF).</span></span> <span data-ttu-id="f6454-126">Para cambiar un dispositivo, primero debe crear un dispositivo que admita la capa de cambio a referencia (consulte [**D3D10CreateDevice)**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice)y, a continuación, llamar a [**ID3D10SwitchToRef::SetUseRef**](/windows/desktop/api/D3D10SDKLayers/nf-d3d10sdklayers-id3d10switchtoref-setuseref).</span><span class="sxs-lookup"><span data-stu-id="f6454-126">To switch a device, you must first create a device that supports the switch-to-reference layer (see [**D3D10CreateDevice**](/windows/desktop/api/D3D10Misc/nf-d3d10misc-d3d10createdevice)) and then call [**ID3D10SwitchToRef::SetUseRef**](/windows/desktop/api/D3D10SDKLayers/nf-d3d10sdklayers-id3d10switchtoref-setuseref).</span></span>

<span data-ttu-id="f6454-127">Todos los estados, recursos y objetos del dispositivo se mantienen a través de esta transición del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f6454-127">All device states, resources and objects are maintained through this device transition.</span></span> <span data-ttu-id="f6454-128">Sin embargo, a veces no es posible coincidir exactamente con los datos de recursos.</span><span class="sxs-lookup"><span data-stu-id="f6454-128">However, it is sometimes not possible to exactly match resource data.</span></span> <span data-ttu-id="f6454-129">Esto se debe al hecho de que hay alguna información disponible para un dispositivo de hardware que no está disponible para un dispositivo de referencia.</span><span class="sxs-lookup"><span data-stu-id="f6454-129">This is due to the fact that some information is available to a hardware device that is not available to a reference device.</span></span>

<span data-ttu-id="f6454-130">Prácticamente todas las aplicaciones en tiempo real usan la implementación DE LA CANALIZACIÓN de la canalización.</span><span class="sxs-lookup"><span data-stu-id="f6454-130">Virtually all real-time applications use the HAL implementation of the pipeline.</span></span> <span data-ttu-id="f6454-131">Cuando la canalización se cambia de un dispositivo de hardware a un dispositivo de referencia, las operaciones de representación se realizan simultáneamente tanto en hardware como en software.</span><span class="sxs-lookup"><span data-stu-id="f6454-131">When the pipeline is switched from a hardware device to a reference device, rendering operations are done simultaneously in both hardware and software.</span></span> <span data-ttu-id="f6454-132">A medida que se representa el dispositivo de software, será necesario que los recursos se descarguen en la memoria del sistema.</span><span class="sxs-lookup"><span data-stu-id="f6454-132">As the software device is rendering, it will require that resources are downloaded to system memory.</span></span> <span data-ttu-id="f6454-133">Esto puede requerir que otros recursos almacenados en caché en la memoria del sistema se expulse para hacer espacio.</span><span class="sxs-lookup"><span data-stu-id="f6454-133">This may require other resources cached in system memory to be evicted to make room.</span></span>

> [!Note]  
> <span data-ttu-id="f6454-134">Esta característica de cambio a capa de referencia solo se admite en Direct3D 10 y Direct3D 10.1, y ya no se admite en Direct3D 11 y versiones posteriores.</span><span class="sxs-lookup"><span data-stu-id="f6454-134">This switch-to-reference-layer feature is supported only in Direct3D 10 and Direct3D 10.1, and is no longer supported in Direct3D 11 and later versions.</span></span>

 

## <a name="thread-safe-layer"></a><span data-ttu-id="f6454-135">Thread-Safe capa</span><span class="sxs-lookup"><span data-stu-id="f6454-135">Thread-Safe Layer</span></span>

<span data-ttu-id="f6454-136">Esta capa está diseñada para permitir que las aplicaciones multiproceso accedan al dispositivo desde varios subprocesos.</span><span class="sxs-lookup"><span data-stu-id="f6454-136">This layer is designed to allow multi-threaded applications to access the device from multiple threads.</span></span>

<span data-ttu-id="f6454-137">Una aplicación direct3D 10 puede controlar una sincronización de dispositivos mediante funciones de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="f6454-137">A Direct3D 10 application can control a device synchronization using device functions.</span></span> <span data-ttu-id="f6454-138">Esto permite a una aplicación habilitar o deshabilitar secciones críticas (habilitar o deshabilitar temporalmente la protección multithreading) y tomar o liberar un bloqueo de sección crítica en varios puntos de entrada de la API de Direct3D 10.</span><span class="sxs-lookup"><span data-stu-id="f6454-138">This enables an application to enable/disable critical sections (temporarily enabling/disabling multithreading protection), and take/release a critical-section lock over multiple Direct3D 10 API entry points.</span></span> <span data-ttu-id="f6454-139">La capa segura para subprocesos está habilitada de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="f6454-139">The thread-safe layer is enabled by default.</span></span> <span data-ttu-id="f6454-140">En el caso de las aplicaciones de un solo subproceso, la capa segura para subprocesos no tiene ningún impacto en el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="f6454-140">For single-threaded applications, the thread-safe layer has no impact on performance.</span></span>




<span data-ttu-id="f6454-141">Diferencias entre Direct3D 9 y Direct3D 10:</span><span class="sxs-lookup"><span data-stu-id="f6454-141">Differences between Direct3D 9 and Direct3D 10:</span></span>

- <span data-ttu-id="f6454-142">A diferencia de Direct3D 9, la API de Direct3D 10 tiene como valor predeterminado totalmente seguro para subprocesos.</span><span class="sxs-lookup"><span data-stu-id="f6454-142">Unlike Direct3D 9, the Direct3D 10 API defaults to fully thread-safe.</span></span>



 

## <a name="related-topics"></a><span data-ttu-id="f6454-143">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="f6454-143">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="f6454-144">Características de API (Direct3D 10)</span><span class="sxs-lookup"><span data-stu-id="f6454-144">API Features (Direct3D 10)</span></span>](d3d10-graphics-programming-guide-api-features.md)
</dt> </dl>

 

 




