---
description: Al crear un paquete de instalación, puede utilizar la función MsiViewModify o el método View. Modify para asegurarse de que los datos que especifique son sintácticamente correctos.
ms.assetid: c960e9df-dcd6-44d2-8662-40a1dea81f45
title: Validación interna
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ca3c1a9e6f7b7e35b4d7d91287af64eff7812de6
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104153875"
---
# <a name="internal-validation"></a><span data-ttu-id="73267-103">Validación interna</span><span class="sxs-lookup"><span data-stu-id="73267-103">Internal Validation</span></span>

<span data-ttu-id="73267-104">Al crear un paquete de instalación, puede utilizar la función [**MsiViewModify**](/windows/desktop/api/Msiquery/nf-msiquery-msiviewmodify) o el método View. Modify para asegurarse de que los datos que especifique son sintácticamente correctos.</span><span class="sxs-lookup"><span data-stu-id="73267-104">When authoring an installation package, you can use the [**MsiViewModify**](/windows/desktop/api/Msiquery/nf-msiquery-msiviewmodify) function or the View.Modify method to ensure that the data you enter is syntactically correct.</span></span> <span data-ttu-id="73267-105">Para obtener más información, vea [**Modify Method**](view-modify.md).</span><span class="sxs-lookup"><span data-stu-id="73267-105">For more information, see [**Modify method**](view-modify.md).</span></span> <span data-ttu-id="73267-106">En el nivel más bajo, la columna de una tabla de base de datos puede almacenar enteros (cortos o largos), cadenas o datos binarios.</span><span class="sxs-lookup"><span data-stu-id="73267-106">At the lowest level, a database table's column can store integers (short or long), strings, or binary data.</span></span> <span data-ttu-id="73267-107">Sin embargo, un paquete de instalación requiere cadenas o enteros específicos en determinadas tablas.</span><span class="sxs-lookup"><span data-stu-id="73267-107">However, an installation package requires specific integers or strings in certain tables.</span></span> <span data-ttu-id="73267-108">Estas especificaciones se mantienen en la [ \_ tabla de validación](-validation-table.md).</span><span class="sxs-lookup"><span data-stu-id="73267-108">These specifications are maintained in the [\_Validation table](-validation-table.md).</span></span> <span data-ttu-id="73267-109">Por ejemplo, la columna FileName de la [tabla de archivos](file-table.md) es una columna de cadena, pero almacena específicamente un nombre de archivo.</span><span class="sxs-lookup"><span data-stu-id="73267-109">For example, the FileName column of the [File table](file-table.md) is a string column, but it specifically stores a file name.</span></span> <span data-ttu-id="73267-110">Por lo tanto, no solo debe ser una cadena, sino que también debe seguir los requisitos para asignar nombres a los archivos.</span><span class="sxs-lookup"><span data-stu-id="73267-110">Therefore, not only should your entry be a string, but it should also follow the requirements for naming files.</span></span>

<span data-ttu-id="73267-111">Los distintos valores de enumeración de validación utilizados con la función [**MsiViewModify**](/windows/desktop/api/Msiquery/nf-msiquery-msiviewmodify) permiten la validación inmediata en diferentes niveles.</span><span class="sxs-lookup"><span data-stu-id="73267-111">The various validation enum values used with the [**MsiViewModify**](/windows/desktop/api/Msiquery/nf-msiquery-msiviewmodify) function allow for immediate validation at different levels.</span></span> <span data-ttu-id="73267-112">La \_ \_ enumeración de campo MSIMODIFY Validate se puede usar para validar campos individuales de un registro.</span><span class="sxs-lookup"><span data-stu-id="73267-112">The MSIMODIFY\_VALIDATE\_FIELD enum can be used to validate individual fields of a record.</span></span> <span data-ttu-id="73267-113">No valida las claves externas.</span><span class="sxs-lookup"><span data-stu-id="73267-113">It does not validate foreign keys.</span></span> <span data-ttu-id="73267-114">La \_ enumeración Validate de MSIMODIFY valida una fila completa e incluye la validación de clave externa.</span><span class="sxs-lookup"><span data-stu-id="73267-114">The MSIMODIFY\_VALIDATE enum validates an entire row and includes foreign key validation.</span></span> <span data-ttu-id="73267-115">Si va a insertar una nueva fila en una tabla, use la \_ \_ nueva enumeración MSIMODIFY Validate para comprobar que está agregando datos válidos, así como claves principales únicas.</span><span class="sxs-lookup"><span data-stu-id="73267-115">If you are inserting a new row into a table, use the MSIMODIFY\_VALIDATE\_NEW enum to verify that you are adding valid data as well as using unique primary keys.</span></span> <span data-ttu-id="73267-116">Se produce un error en una inserción si las claves principales no son únicas.</span><span class="sxs-lookup"><span data-stu-id="73267-116">An insert fails if the primary keys are not unique.</span></span> <span data-ttu-id="73267-117">Si una llamada a **MsiViewModify** con una de las enumeraciones de validación devuelve un error, puede realizar llamadas repetidas a [**MsiViewGetError**](/windows/desktop/api/Msiquery/nf-msiquery-msiviewgeterrora) para diagnosticar el problema.</span><span class="sxs-lookup"><span data-stu-id="73267-117">If a call to **MsiViewModify** with one of the validation enums returns an error, you can make repeated calls to [**MsiViewGetError**](/windows/desktop/api/Msiquery/nf-msiquery-msiviewgeterrora) for diagnosing the problem.</span></span> <span data-ttu-id="73267-118">**MsiViewGetError** indica la columna donde se produjo el error, así como el valor de enumeración para ayudar a solucionar el problema.</span><span class="sxs-lookup"><span data-stu-id="73267-118">**MsiViewGetError** indicates the column where the error occurred as well as the enum value to help fix the problem.</span></span> <span data-ttu-id="73267-119">Para obtener más información, vea [**método GetError**](view-geterror.md).</span><span class="sxs-lookup"><span data-stu-id="73267-119">For more information, see [**GetError method**](view-geterror.md).</span></span>

<span data-ttu-id="73267-120">También puede usar la validación interna para asegurarse de que otros autores escriban los datos correctamente en la tabla personalizada.</span><span class="sxs-lookup"><span data-stu-id="73267-120">You can also use internal validation to ensure that other authors enter data correctly into your custom table.</span></span> <span data-ttu-id="73267-121">Agregue cada una de las columnas de la tabla personalizada a la \_ tabla de validación con el nombre de la tabla y el nombre de la columna personalizados como clave principal.</span><span class="sxs-lookup"><span data-stu-id="73267-121">Add each of the columns of your custom table to the \_Validation table using the custom table name and column name as the primary key.</span></span> <span data-ttu-id="73267-122">Proporcione una descripción o propósito de cada columna en la columna Descripción de la \_ tabla de validación.</span><span class="sxs-lookup"><span data-stu-id="73267-122">Provide a description or purpose of each column in the Description column of the \_Validation table.</span></span> <span data-ttu-id="73267-123">Especifique los requisitos aplicables para cada columna mediante las columnas Nullable, MinValue, MaxValue, KeyTable, KeyColumn, Category y set:</span><span class="sxs-lookup"><span data-stu-id="73267-123">Enter the applicable requirements for each column using the Nullable, MinValue, MaxValue, KeyTable, KeyColumn, Category, and Set columns:</span></span>

-   <span data-ttu-id="73267-124">Si la columna acepta valores NULL, escriba una ' Y '.</span><span class="sxs-lookup"><span data-stu-id="73267-124">If the column is Nullable, enter a 'Y'.</span></span> <span data-ttu-id="73267-125">Si no es así, escriba una ' N '.</span><span class="sxs-lookup"><span data-stu-id="73267-125">If not, enter a 'N'.</span></span>
-   <span data-ttu-id="73267-126">Si la columna es una columna de enteros y puede contener un intervalo de enteros, especifique ese intervalo mediante las columnas MinValue y MaxValue.</span><span class="sxs-lookup"><span data-stu-id="73267-126">If the column is an integer column and can contain a range of integers, enter that range using the MinValue and MaxValue columns.</span></span>
-   <span data-ttu-id="73267-127">Las columnas de clave externa se identifican mediante las columnas KeyTable y KeyColumn.</span><span class="sxs-lookup"><span data-stu-id="73267-127">Foreign key columns are identified using the KeyTable and KeyColumn columns.</span></span>
-   <span data-ttu-id="73267-128">En el caso de las columnas de cadena, especifique una categoría como nombre de archivo, GUID o identificador.</span><span class="sxs-lookup"><span data-stu-id="73267-128">For string columns, specify a Category such as Filename, GUID, or Identifier.</span></span> <span data-ttu-id="73267-129">Para obtener más información, vea [tipos de datos de columna](column-data-types.md).</span><span class="sxs-lookup"><span data-stu-id="73267-129">For more information, see [column data types](column-data-types.md).</span></span>
-   <span data-ttu-id="73267-130">Si los datos solo pueden pertenecer a un número específico de valores (string o Integer), use la columna set para enumerar los valores aceptables.</span><span class="sxs-lookup"><span data-stu-id="73267-130">If the data can only pertain to a specific number of values (string or integer), use the Set column to list the acceptable values.</span></span>

<span data-ttu-id="73267-131">A continuación se muestra una lista de las columnas (además de tabla, columna y descripción) de la \_ tabla de validación que se pueden rellenar si la columna es del tipo especificado.</span><span class="sxs-lookup"><span data-stu-id="73267-131">The following is a list of the columns (in addition to Table, Column, and Description) in the \_Validation table that can be filled in if your column is of the specified type.</span></span> <span data-ttu-id="73267-132">(Tenga en cuenta que no tiene que rellenar todas las columnas).</span><span class="sxs-lookup"><span data-stu-id="73267-132">(Note that you do not have to fill in all the columns.)</span></span>



| <span data-ttu-id="73267-133">Tipo</span><span class="sxs-lookup"><span data-stu-id="73267-133">Type</span></span>    | <span data-ttu-id="73267-134">Columnas</span><span class="sxs-lookup"><span data-stu-id="73267-134">Columns</span></span>                                                          |
|---------|------------------------------------------------------------------|
| <span data-ttu-id="73267-135">Entero</span><span class="sxs-lookup"><span data-stu-id="73267-135">Integer</span></span> | <span data-ttu-id="73267-136">Nullable, MinValue, MaxValue, KeyTable, KeyColumn, Set</span><span class="sxs-lookup"><span data-stu-id="73267-136">Nullable, MinValue, MaxValue, KeyTable, KeyColumn, Set</span></span>           |
| <span data-ttu-id="73267-137">String</span><span class="sxs-lookup"><span data-stu-id="73267-137">String</span></span>  | <span data-ttu-id="73267-138">Nullable, KeyTable, KeyColumn, Category, Set, MinValue, MaxValue</span><span class="sxs-lookup"><span data-stu-id="73267-138">Nullable, KeyTable, KeyColumn, Category, Set, MinValue, MaxValue</span></span> |
| <span data-ttu-id="73267-139">Binary</span><span class="sxs-lookup"><span data-stu-id="73267-139">Binary</span></span>  | <span data-ttu-id="73267-140">Categoría que acepta valores NULL (la categoría debe ser "binaria")</span><span class="sxs-lookup"><span data-stu-id="73267-140">Nullable, Category (Category must be "Binary")</span></span>                   |



 

<span data-ttu-id="73267-141">Los entornos de creación pueden usar MSIMODIFY \_ Validate \_ Delete.</span><span class="sxs-lookup"><span data-stu-id="73267-141">Authoring environments may make use of MSIMODIFY\_VALIDATE\_DELETE.</span></span> <span data-ttu-id="73267-142">En esta enumeración se supone que desea eliminar la fila.</span><span class="sxs-lookup"><span data-stu-id="73267-142">This enum assumes that you want to delete the row.</span></span> <span data-ttu-id="73267-143">No se realiza ninguna validación de campo ni de clave externa.</span><span class="sxs-lookup"><span data-stu-id="73267-143">No field or foreign key validation is performed.</span></span> <span data-ttu-id="73267-144">En realidad, esta enumeración realiza una validación de clave externa inversa.</span><span class="sxs-lookup"><span data-stu-id="73267-144">This enum actually performs a reverse foreign key validation.</span></span> <span data-ttu-id="73267-145">Comprueba en la \_ tabla de validación las referencias de las columnas KeyTable y KeyColumn de la tabla a la que pertenece la fila "DELETED".</span><span class="sxs-lookup"><span data-stu-id="73267-145">It checks the \_Validation table for references in the KeyTable and KeyColumn columns for the table to which the "deleted" row belongs.</span></span> <span data-ttu-id="73267-146">Si hay columnas que muestran la tabla que contiene la fila "DELETED" como clave externa potencial, recorre la columna para ver si alguno de los valores hace referencia a los valores de la fila "DELETED".</span><span class="sxs-lookup"><span data-stu-id="73267-146">If there are columns that list the table containing the "deleted" row as a potential foreign key, it cycles through that column to see if any of the values reference values in the "deleted" row.</span></span> <span data-ttu-id="73267-147">Una devolución de error significa que se interrumpe la integridad relacional de la base de datos mediante la eliminación de la fila.</span><span class="sxs-lookup"><span data-stu-id="73267-147">An error return means that you break the relational integrity of the database by deleting the row.</span></span>

 

 



