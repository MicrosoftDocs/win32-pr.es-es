---
description: Corrección gamma, o gamma para abreviar, es el nombre de una operación no lineal que los sistemas usan para codificar y descodificar los valores de píxeles de las imágenes.
ms.assetid: 97ACDAE3-514E-4AAF-A27D-E5FFC162DB2A
title: Usar corrección gamma
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 1c940db1a94fb41e9babecbeb3075aa9e01b3732
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104552387"
---
# <a name="using-gamma-correction"></a><span data-ttu-id="9e72f-103">Usar corrección gamma</span><span class="sxs-lookup"><span data-stu-id="9e72f-103">Using gamma correction</span></span>

<span data-ttu-id="9e72f-104">Corrección gamma, o gamma para abreviar, es el nombre de una operación no lineal que los sistemas usan para codificar y descodificar los valores de píxeles de las imágenes.</span><span class="sxs-lookup"><span data-stu-id="9e72f-104">Gamma correction, or gamma for short, is the name of a nonlinear operation that systems use to code and decode pixel values in images.</span></span>

-   [<span data-ttu-id="9e72f-105">¿Qué es gamma y para qué sirve?</span><span class="sxs-lookup"><span data-stu-id="9e72f-105">What is gamma and what is it for?</span></span>](#what-is-gamma-and-what-is-it-for)
-   [<span data-ttu-id="9e72f-106">Fondo de gamma en Windows</span><span class="sxs-lookup"><span data-stu-id="9e72f-106">Background of gamma on Windows</span></span>](#background-of-gamma-on-windows)
-   [<span data-ttu-id="9e72f-107">Evolución del hardware de pantalla</span><span class="sxs-lookup"><span data-stu-id="9e72f-107">Evolution of display hardware</span></span>](#evolution-of-display-hardware)
-   [<span data-ttu-id="9e72f-108">Funcionalidades de control gamma en DXGI</span><span class="sxs-lookup"><span data-stu-id="9e72f-108">Gamma control capabilities in DXGI</span></span>](#gamma-control-capabilities-in-dxgi)
-   [<span data-ttu-id="9e72f-109">Establecer el control gamma con DXGI</span><span class="sxs-lookup"><span data-stu-id="9e72f-109">Setting gamma control with DXGI</span></span>](#setting-gamma-control-with-dxgi)
-   [<span data-ttu-id="9e72f-110">Prácticas de control gamma</span><span class="sxs-lookup"><span data-stu-id="9e72f-110">Gamma control practicalities</span></span>](#gamma-control-practicalities)
-   [<span data-ttu-id="9e72f-111">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="9e72f-111">Related topics</span></span>](#related-topics)

## <a name="what-is-gamma-and-what-is-it-for"></a><span data-ttu-id="9e72f-112">¿Qué es gamma y para qué sirve?</span><span class="sxs-lookup"><span data-stu-id="9e72f-112">What is gamma and what is it for?</span></span>

<span data-ttu-id="9e72f-113">Al final de la canalización de gráficos, en el que la imagen deja el equipo para que realice su viaje a lo largo del cable del monitor, hay una pequeña parte del hardware que puede transformar los valores de píxel sobre la marcha.</span><span class="sxs-lookup"><span data-stu-id="9e72f-113">At the end of the graphics pipeline, just where the image leaves the computer to make its journey along the monitor cable, there is a small piece of hardware that can transform pixel values on the fly.</span></span> <span data-ttu-id="9e72f-114">Este hardware suele usar una tabla de búsqueda para transformar los píxeles.</span><span class="sxs-lookup"><span data-stu-id="9e72f-114">This hardware typically uses a lookup table to transform the pixels.</span></span> <span data-ttu-id="9e72f-115">Este hardware usa los valores rojo, verde y azul que provienen de la superficie que se va a mostrar para buscar valores corregidos en gamma en la tabla y, a continuación, envía los valores corregidos al monitor en lugar de los valores reales de la superficie.</span><span class="sxs-lookup"><span data-stu-id="9e72f-115">This hardware uses the red, green and blue values that come from the surface to be displayed to look up gamma-corrected values in the table and then sends the corrected values to the monitor instead of the actual surface values.</span></span> <span data-ttu-id="9e72f-116">Por lo tanto, esta tabla de búsqueda es una oportunidad para reemplazar cualquier color por cualquier otro color.</span><span class="sxs-lookup"><span data-stu-id="9e72f-116">So, this lookup table is an opportunity to replace any color with any other color.</span></span> <span data-ttu-id="9e72f-117">Aunque la tabla tiene ese nivel de potencia, el uso típico consiste en ajustar las imágenes sutilmente para compensar las diferencias en la respuesta del monitor.</span><span class="sxs-lookup"><span data-stu-id="9e72f-117">While the table has that level of power, the typical usage is to tweak images subtly to compensate for differences in the monitor’s response.</span></span> <span data-ttu-id="9e72f-118">La respuesta del monitor es la función que relaciona el valor numérico de los componentes rojo, verde y azul de un píxel con el brillo mostrado de ese píxel.</span><span class="sxs-lookup"><span data-stu-id="9e72f-118">The monitor’s response is the function that relates the numerical value of the red, green and blue components of a pixel with that pixel’s displayed brightness.</span></span>

<span data-ttu-id="9e72f-119">Este es el objetivo de esta tabla, pero los desarrolladores de juegos encontraron usos creativos para ello, como la intermitencia de la pantalla entera para el efecto psicológico.</span><span class="sxs-lookup"><span data-stu-id="9e72f-119">That’s what this table was intended for, but game developers found creative uses for it, such as flashing the whole screen red for psychological effect.</span></span> <span data-ttu-id="9e72f-120">En las aplicaciones de juegos modernas, como parte del procesamiento posterior de cada fotograma, normalmente proporcionamos otras maneras de realizar estas tareas.</span><span class="sxs-lookup"><span data-stu-id="9e72f-120">In modern game apps, as part of the post-processing of each frame, we typically provide other ways to do such things.</span></span> <span data-ttu-id="9e72f-121">De hecho, se recomienda dejar la tabla gamma por sí sola, ya que podría estar en uso para calibrar la respuesta del monitor y los cambios más mayorista en la rampa de gamma destruirán esta rápida calibración.</span><span class="sxs-lookup"><span data-stu-id="9e72f-121">In fact, we recommend that you leave the gamma table alone because it might be in use to calibrate the monitor’s response, and wholesale changes to the gamma ramp will destroy this careful calibration.</span></span>

<span data-ttu-id="9e72f-122">La ciencia de la determinación de la corrección gamma es compleja y no se presenta aquí, excepto para iluminar la procedencia del nombre "gamma".</span><span class="sxs-lookup"><span data-stu-id="9e72f-122">The science of determining gamma correction is complex, and is not presented here, other than to illuminate where the name “gamma” came from.</span></span> <span data-ttu-id="9e72f-123">Una respuesta de monitor CRT (es decir, una luna antigua) es una función compleja, pero la física de estos monitores significa que muestran una respuesta que se puede representar de forma bruta con esta función de potencia:</span><span class="sxs-lookup"><span data-stu-id="9e72f-123">A CRT (that is, an old-fashioned glass) monitor’s response is a complex function, but the physics of these monitors mean that they exhibit a response that can be crudely represented by this power function:</span></span>

<span data-ttu-id="9e72f-124">brillo (entrada) =<sup>Gamma</sup> de entrada</span><span class="sxs-lookup"><span data-stu-id="9e72f-124">brightness( input ) = input<sup>gamma</sup></span></span>

<span data-ttu-id="9e72f-125">Normalmente, el valor gamma está cerca de un valor de 2,0.</span><span class="sxs-lookup"><span data-stu-id="9e72f-125">The gamma value is typically close to a value of 2.0.</span></span> <span data-ttu-id="9e72f-126">Los monitores LCD y todas las demás tecnologías más recientes se han diseñado específicamente para presentar una respuesta similar para que no sea necesario volver a calibrar el software y las imágenes para esas nuevas tecnologías.</span><span class="sxs-lookup"><span data-stu-id="9e72f-126">LCD monitors and all other newer technologies are specifically engineered to exhibit a similar response so all our software and images don’t have to be recalibrated for those new technologies.</span></span> <span data-ttu-id="9e72f-127">El estándar sRGB declara que este valor gamma es exactamente 2,2 y este valor se ha convertido en un estándar ampliamente implementado.</span><span class="sxs-lookup"><span data-stu-id="9e72f-127">The sRGB standard declares that this gamma value is exactly 2.2, and this value has become a widely implemented standard.</span></span>

<span data-ttu-id="9e72f-128">El ojo humano también tiene una función de respuesta que invierte aproximadamente la función de potencia de CRT.</span><span class="sxs-lookup"><span data-stu-id="9e72f-128">The human eye also has a response function which approximately inverts the CRT power function.</span></span> <span data-ttu-id="9e72f-129">Esto significa que el brillo percibido de un píxel aumenta de forma lineal con los valores RGB de ese píxel.</span><span class="sxs-lookup"><span data-stu-id="9e72f-129">This means that the perceived brightness of a pixel goes up very roughly linearly with the RGB values in that pixel.</span></span>

<span data-ttu-id="9e72f-130">Dado que un valor gamma de 2,2 se ha convertido en un estándar de facto, normalmente no es necesario preocuparse demasiado sobre la curva gamma codificada en esta tabla, y puede dejarla como una asignación lineal de uno a uno.</span><span class="sxs-lookup"><span data-stu-id="9e72f-130">Because a gamma value of 2.2 has become a de-facto standard, we typically don’t need to worry too much about the gamma curve encoded in this table, and can leave it as a linear, one-to-one mapping.</span></span> <span data-ttu-id="9e72f-131">La coincidencia de color adecuada requiere Exquisite Care con esta función, pero ese debate está fuera del ámbito de este tema.</span><span class="sxs-lookup"><span data-stu-id="9e72f-131">Proper color matching does of course require exquisite care with this function, but that discussion is beyond the scope of this topic.</span></span> <span data-ttu-id="9e72f-132">Windows incluye una herramienta que permite a los usuarios calibrar sus pantallas a gamma 2,2, y esta herramienta usa el hardware de la tabla de búsqueda para derivar un ajuste sutil elegido cuidadosamente para sus equipos.</span><span class="sxs-lookup"><span data-stu-id="9e72f-132">Windows includes a tool that lets users calibrate their displays to gamma 2.2, and this tool uses the lookup table hardware to derive a carefully-chosen subtle tweak for their computers.</span></span> <span data-ttu-id="9e72f-133">Los usuarios pueden ejecutar esta herramienta buscando "calibrar color".</span><span class="sxs-lookup"><span data-stu-id="9e72f-133">Users can run this tool by searching for "calibrate color".</span></span> <span data-ttu-id="9e72f-134">También hay perfiles de color bien definidos para monitores concretos que automatizan este proceso.</span><span class="sxs-lookup"><span data-stu-id="9e72f-134">There are also well-defined color profiles for particular monitors that automate this process.</span></span> <span data-ttu-id="9e72f-135">La herramienta "calibrar color" puede detectar estos monitores más recientes e informar a los usuarios de que ya se ha implementado la calibración.</span><span class="sxs-lookup"><span data-stu-id="9e72f-135">The "calibrate color" tool can detect these newer monitors, and inform users that calibration is already in place.</span></span>

<span data-ttu-id="9e72f-136">Esta noción de codificación de una ley de energía en valores de color es útil en otro lugar de la canalización de gráficos, especialmente en las texturas.</span><span class="sxs-lookup"><span data-stu-id="9e72f-136">This notion of encoding a power law into color values is useful elsewhere in the graphics pipeline too, especially in textures.</span></span> <span data-ttu-id="9e72f-137">En el caso de las texturas, querrá más precisión en los colores más oscuros debido a la respuesta del ojo humano logarítmico que acabo de hablar.</span><span class="sxs-lookup"><span data-stu-id="9e72f-137">For textures, you want more precision on darker colors because of the logarithmic human eye response we just talked about.</span></span> <span data-ttu-id="9e72f-138">Es importante un control cuidadoso de gamma en esta parte de la canalización.</span><span class="sxs-lookup"><span data-stu-id="9e72f-138">Careful handling of gamma in this part of the pipeline is important.</span></span> <span data-ttu-id="9e72f-139">Para obtener más información, vea [convertir datos para el espacio de colores](converting-data-color-space.md).</span><span class="sxs-lookup"><span data-stu-id="9e72f-139">For more info, see [Converting data for the color space](converting-data-color-space.md).</span></span>

<span data-ttu-id="9e72f-140">El resto de este tema se centra solo en la corrección gamma en esta última parte de la canalización, entre los datos de búfer de fotogramas y el monitor.</span><span class="sxs-lookup"><span data-stu-id="9e72f-140">The remainder of this topic focuses only on gamma correction in this last part of the pipeline, between the frame buffer data and the monitor.</span></span> <span data-ttu-id="9e72f-141">Si desea escribir un asistente para calibrado o crear efectos especiales en una aplicación de pantalla completa en la que un paso posterior al procesamiento no sea práctico, esta es la información que necesita.</span><span class="sxs-lookup"><span data-stu-id="9e72f-141">If you want to write a calibration wizard or to create special effects in a full-screen app where a post-processing step is not practical, here is the info you need.</span></span>

## <a name="background-of-gamma-on-windows"></a><span data-ttu-id="9e72f-142">Fondo de gamma en Windows</span><span class="sxs-lookup"><span data-stu-id="9e72f-142">Background of gamma on Windows</span></span>

<span data-ttu-id="9e72f-143">Normalmente, los equipos de Windows tienen una tabla gamma que es una tabla de búsqueda que toma un triple de bytes y genera un triple de bytes.</span><span class="sxs-lookup"><span data-stu-id="9e72f-143">Windows computers typically have a gamma table that is a lookup table that takes a triplet of bytes and outputs a triplet of bytes.</span></span> <span data-ttu-id="9e72f-144">Estas triples son 768 (256 x 3) bytes de RAM.</span><span class="sxs-lookup"><span data-stu-id="9e72f-144">These triplets are 768 (256 x 3) bytes of RAM.</span></span> <span data-ttu-id="9e72f-145">Esto es correcto cuando el formato de presentación contiene un triple de valores de BYTE RGB pero no es lo suficientemente expresivo como para describir las transformaciones que podría desear cuando el formato de presentación tiene un intervalo mayor que \[ 0, 1 \] , como los valores de punto flotante.</span><span class="sxs-lookup"><span data-stu-id="9e72f-145">This is fine when your display format contains a triplet of RGB BYTE values but isn't expressive enough to describe the transformations that you might want when the display format has a greater range than \[0,1\], such as floating point values.</span></span> <span data-ttu-id="9e72f-146">Las API de Windows que controlan la gamma han seguido una evolución, ya que los formatos de visualización se han vuelto más complejos.</span><span class="sxs-lookup"><span data-stu-id="9e72f-146">The APIs in Windows that control gamma have followed an evolution as display formats have become more complex.</span></span>

<span data-ttu-id="9e72f-147">Las primeras API de Windows que ofrecen control gamma son [**SetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp) y [**GetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-getdevicegammaramp)de Windows interfaz de dispositivo gráfico (GDI).</span><span class="sxs-lookup"><span data-stu-id="9e72f-147">The first Windows APIs to offer gamma control are Windows Graphics Device Interface (GDI)’s [**SetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp) and [**GetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-getdevicegammaramp).</span></span> <span data-ttu-id="9e72f-148">Estas API funcionan con matrices de palabras 3 256, donde cada palabra codifica en cero hasta una, representada por los valores 0 y 65535 de WORD.</span><span class="sxs-lookup"><span data-stu-id="9e72f-148">These APIs work with three 256-entry arrays of WORDs, with each WORD encoding zero up to one, represented by WORD values 0 and 65535.</span></span> <span data-ttu-id="9e72f-149">Normalmente, la precisión adicional de una palabra no está disponible en las tablas de búsqueda de hardware reales, pero estas API están diseñadas para ser flexibles.</span><span class="sxs-lookup"><span data-stu-id="9e72f-149">The extra precision of a WORD typically isn’t available in actual hardware lookup tables, but these APIs were intended to be flexible.</span></span> <span data-ttu-id="9e72f-150">Estas API, a diferencia de las demás que se describen más adelante en esta sección, permiten solo una pequeña desviación de una función de identidad.</span><span class="sxs-lookup"><span data-stu-id="9e72f-150">These APIs, in contrast to the others described later in this section, allow only a small deviation from an identity function.</span></span> <span data-ttu-id="9e72f-151">De hecho, cualquier entrada en la rampa debe estar dentro de 32768 del valor de identidad.</span><span class="sxs-lookup"><span data-stu-id="9e72f-151">In fact, any entry in the ramp must be within 32768 of the identity value.</span></span> <span data-ttu-id="9e72f-152">Esta restricción significa que ninguna aplicación puede activar la pantalla completamente en negro o en otro color ilegible.</span><span class="sxs-lookup"><span data-stu-id="9e72f-152">This restriction means that no app can turn the display completely black or to some other unreadable color.</span></span>

<span data-ttu-id="9e72f-153">La siguiente API es [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp)de Microsoft Direct3D 9, que sigue el mismo patrón y formato de datos que [**SetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp).</span><span class="sxs-lookup"><span data-stu-id="9e72f-153">The next API is Microsoft Direct3D 9’s [**SetGammaRamp**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-setgammaramp), which follows the same pattern and data format as [**SetDeviceGammaRamp**](/windows/win32/api/wingdi/nf-wingdi-setdevicegammaramp).</span></span> <span data-ttu-id="9e72f-154">El valor predeterminado de la rampa gamma de Direct3D 9 no es especialmente útil; es una rampa de palabras inicializadas en 0-255, no 0-65535, aunque la API esté definida en términos de 0-65535.</span><span class="sxs-lookup"><span data-stu-id="9e72f-154">The default value of the Direct3D 9 gamma ramp is not particularly useful; it is a ramp of WORDs initialized to 0-255, not 0-65535, even though the API is defined in terms of 0-65535.</span></span>

<span data-ttu-id="9e72f-155">La API más reciente es [**IDXGIOutput:: SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol).</span><span class="sxs-lookup"><span data-stu-id="9e72f-155">The latest API is [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol).</span></span> <span data-ttu-id="9e72f-156">Esta API tiene un esquema más flexible para expresar el control gamma, tal y como se ajusta al conjunto de formatos de presentación de DXGI, incluidos diez formatos enteros de bits por canal y de 16 bits y el \_ formato de intervalo extendido de polarización de XR.</span><span class="sxs-lookup"><span data-stu-id="9e72f-156">This API has a more flexible scheme to express gamma control, as befits DXGI’s increased set of display formats, including ten integer bits-per-channel, 16-bit float formats and the XR\_BIAS extended range format.</span></span>

<span data-ttu-id="9e72f-157">Todas estas API operan en el mismo hardware y cambian los mismos valores.</span><span class="sxs-lookup"><span data-stu-id="9e72f-157">All of these APIs operate on the same hardware, and change the same values.</span></span> <span data-ttu-id="9e72f-158">Las API de Direct3D 9 y DXGI son de solo escritura.</span><span class="sxs-lookup"><span data-stu-id="9e72f-158">The Direct3D 9 and DXGI APIs are “write only”.</span></span> <span data-ttu-id="9e72f-159">No puede leer el valor del hardware, modificarlo y, a continuación, configurarlo.</span><span class="sxs-lookup"><span data-stu-id="9e72f-159">You can't read the value of the hardware, modify it, and then set it.</span></span> <span data-ttu-id="9e72f-160">Solo puede establecer la rampa.</span><span class="sxs-lookup"><span data-stu-id="9e72f-160">You can only set the ramp.</span></span> <span data-ttu-id="9e72f-161">Además, solo puede establecer gamma cuando la aplicación está en pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="9e72f-161">Furthermore, you can only set gamma when the app is full screen.</span></span> <span data-ttu-id="9e72f-162">Esta restricción es otra manera de garantizar que el escritorio sea siempre legible.</span><span class="sxs-lookup"><span data-stu-id="9e72f-162">This restriction is another way to guarantee that the desktop is always readable.</span></span> <span data-ttu-id="9e72f-163">Es decir, la aplicación puede afectar a su propia presentación, pero Windows restaurará la rampa gamma anterior cuando la aplicación pierda la pantalla completa (por ejemplo, mediante ALT-TAB o Ctrl-Alt-Supr).</span><span class="sxs-lookup"><span data-stu-id="9e72f-163">That is, the app can disturb its own display, but Windows will restore the previous gamma ramp when the app loses full screen (for example, via alt-tab or ctrl-alt-del).</span></span>

## <a name="evolution-of-display-hardware"></a><span data-ttu-id="9e72f-164">Evolución del hardware de pantalla</span><span class="sxs-lookup"><span data-stu-id="9e72f-164">Evolution of display hardware</span></span>

<span data-ttu-id="9e72f-165">Algunos monitores más recientes pueden mostrar una amplia gama de intensidades.</span><span class="sxs-lookup"><span data-stu-id="9e72f-165">Some newer monitors can display a wide range of intensities.</span></span> <span data-ttu-id="9e72f-166">Sin embargo, cuando el formato de presentación puede representar solo valores entre cero y uno, la pantalla debe asignar cero a su valor más oscuro y de uno a su valor más brillante.</span><span class="sxs-lookup"><span data-stu-id="9e72f-166">But, when the display format can represent only values between zero and one, the display must map zero to its darkest value and one to its brightest value.</span></span> <span data-ttu-id="9e72f-167">Este valor más brillante podría ser mucho más brillante para ver de forma cómoda las páginas web con texto en negro sobre un fondo blanco, pero es estupendo para efectos especiales demasiado brillantes, como ver la luz solar glittering de un lago o un relámpago bifurcar el cielo.</span><span class="sxs-lookup"><span data-stu-id="9e72f-167">This brightest value might be far too bright for comfortable viewing of Web pages with black text on a white background but is wonderful for over-bright special effects, such as viewing sunlight glittering off of a lake or lightning forking the sky.</span></span> <span data-ttu-id="9e72f-168">Por lo tanto, necesitamos una manera de expresar estos intervalos más amplios.</span><span class="sxs-lookup"><span data-stu-id="9e72f-168">So, we need a way to express these wider ranges.</span></span> <span data-ttu-id="9e72f-169">DXGI 1,1 y versiones posteriores contienen valores de formato de presentación que permiten que 1,0 represente un valor blanco confortable y Reserve valores de formato de presentación más amplios para efectos especiales demasiado brillantes.</span><span class="sxs-lookup"><span data-stu-id="9e72f-169">DXGI 1.1 and later contains display format values that let 1.0 represent a comfortable white value and reserves wider display format values for over-bright special effects.</span></span> <span data-ttu-id="9e72f-170">DXGI 1,1 admite dos formatos de presentación que pueden expresar estos valores más amplios: el formato de DXGI \_ \_ R10G10B10 \_ XR \_ \_ \_ UNORM y el punto flotante de 16 bits.</span><span class="sxs-lookup"><span data-stu-id="9e72f-170">DXGI 1.1 supports two display formats that can express these wider values: DXGI\_FORMAT\_R10G10B10\_XR\_BIAS\_A2\_UNORM and 16-bit floating point.</span></span> <span data-ttu-id="9e72f-171">Para obtener una descripción completa de estos formatos, consulte [los detalles del formato extendido](/windows-hardware/drivers/display/details-of-the-extended-format).</span><span class="sxs-lookup"><span data-stu-id="9e72f-171">For a full discussion of these formats, see [Details of the Extended Format](/windows-hardware/drivers/display/details-of-the-extended-format).</span></span> <span data-ttu-id="9e72f-172">A continuación, veremos por qué la API [**IDXGIOutput:: SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) gamma de DXGI necesita valores de píxeles mayores que 1,0.</span><span class="sxs-lookup"><span data-stu-id="9e72f-172">Next, we look at why DXGI’s [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) gamma API needs pixel values greater than 1.0.</span></span>

## <a name="gamma-control-capabilities-in-dxgi"></a><span data-ttu-id="9e72f-173">Funcionalidades de control gamma en DXGI</span><span class="sxs-lookup"><span data-stu-id="9e72f-173">Gamma control capabilities in DXGI</span></span>

<span data-ttu-id="9e72f-174">DXGI permite que el controlador de pantalla exprese sus controles gamma como una función lineal en pasos.</span><span class="sxs-lookup"><span data-stu-id="9e72f-174">DXGI lets the display driver express its gamma controls as a step-wise linear function.</span></span> <span data-ttu-id="9e72f-175">Esta función lineal por pasos se define mediante los puntos de control de esta función, el intervalo de valores que la función puede convertir en y una operación opcional de ajuste de escala y desplazamiento que se puede aplicar después de la conversión.</span><span class="sxs-lookup"><span data-stu-id="9e72f-175">This step-wise linear function is defined by the control points of this function, the range of values the function can convert to, and an additional optional scale-and-offset operation that can be applied after conversion.</span></span> <span data-ttu-id="9e72f-176">Una aplicación puede llamar al método [**IDXGIOutput:: GetGammaControlCapabilities**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) para recuperar todas estas funcionalidades de control en la estructura de las [**\_ \_ \_ funciones de control gamma de DXGI**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) .</span><span class="sxs-lookup"><span data-stu-id="9e72f-176">An app can call the [**IDXGIOutput::GetGammaControlCapabilities**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) method to retrieve all of these control capabilities in the [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) structure.</span></span>

<span data-ttu-id="9e72f-177">En este gráfico se muestra una función lineal con solo cuatro puntos de control.</span><span class="sxs-lookup"><span data-stu-id="9e72f-177">This graph shows a linear function with just four control points.</span></span>

![función lineal de corrección gamma](images/gamma-linear-function.png)

<span data-ttu-id="9e72f-179">DXGI define los puntos de control por su ubicación a lo largo del eje de color de la superficie.</span><span class="sxs-lookup"><span data-stu-id="9e72f-179">DXGI defines control points by their location along the surface color axis.</span></span> <span data-ttu-id="9e72f-180">En el gráfico anterior, las ubicaciones de los puntos de control son 0, 0,5, 0,75 y 1,0.</span><span class="sxs-lookup"><span data-stu-id="9e72f-180">In the preceding graph, the locations of the control points are 0, 0.5, 0.75 and 1.0.</span></span> <span data-ttu-id="9e72f-181">Estos puntos de control indican que el hardware puede convertir valores en el intervalo de 0 a 1,0.</span><span class="sxs-lookup"><span data-stu-id="9e72f-181">These control points indicate that the hardware can convert values in the range 0 through 1.0.</span></span> <span data-ttu-id="9e72f-182">DXGI enumera estos puntos de control en el miembro de matriz **ControlPointPositions** de las [**\_ \_ \_ capacidades de control gamma de DXGI**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) y siempre los declara en orden ascendente.</span><span class="sxs-lookup"><span data-stu-id="9e72f-182">DXGI lists these control points in the **ControlPointPositions** array member of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) and always declares them in increasing order.</span></span> <span data-ttu-id="9e72f-183">DXGI solo rellena los primeros elementos de la matriz **ControlPointPositions** e indica el número de elementos con el miembro **NumGammaControlPoints** de las **\_ capacidades de \_ control \_ gamma de DXGI**.</span><span class="sxs-lookup"><span data-stu-id="9e72f-183">DXGI fills only the first elements of the **ControlPointPositions** array and indicates the number of elements with the **NumGammaControlPoints** member of **DXGI\_GAMMA\_CONTROL\_CAPABILITIES**.</span></span> <span data-ttu-id="9e72f-184">Si **NumGammaControlPoints** es menor que 1025, DXGI deja el resto de los elementos **ControlPointPositions** sin definir.</span><span class="sxs-lookup"><span data-stu-id="9e72f-184">If **NumGammaControlPoints** is less than 1025, DXGI leaves the rest of the **ControlPointPositions** elements undefined.</span></span>

<span data-ttu-id="9e72f-185">El hardware representado por este gráfico puede convertir valores en un intervalo de 0 a 1,25.</span><span class="sxs-lookup"><span data-stu-id="9e72f-185">The hardware represented by this graph can convert values to a range of 0 through 1.25.</span></span> <span data-ttu-id="9e72f-186">Por lo tanto, DXGI establece los miembros **MinConvertedValue** y **MaxConvertedValue** en 0.0 f y 1,25 f respectivamente.</span><span class="sxs-lookup"><span data-stu-id="9e72f-186">So, DXGI sets the **MinConvertedValue** and **MaxConvertedValue** members to 0.0f and 1.25f respectively.</span></span>

<span data-ttu-id="9e72f-187">DXGI establece el miembro **ScaleAndOffsetSupported** de [**las \_ \_ \_ capacidades de control gamma de DXGI**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) para indicar si el hardware admite la capacidad de escalado y desplazamiento.</span><span class="sxs-lookup"><span data-stu-id="9e72f-187">DXGI sets the **ScaleAndOffsetSupported** member of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) to indicate whether the hardware supports the scale-and-offset capability.</span></span> <span data-ttu-id="9e72f-188">Si el hardware admite la escala y el desplazamiento, mantiene una tabla de búsqueda de uno a uno simple, pero luego ajusta el resultado de la tabla para ajustar la salida a un intervalo mayor que \[ 0, 1 \] .</span><span class="sxs-lookup"><span data-stu-id="9e72f-188">If hardware supports scale-and-offset, it keeps a simple one-to-one lookup table but then adjusts the output of the table to stretch the output to a range greater than \[0,1\].</span></span> <span data-ttu-id="9e72f-189">El hardware primero escala los valores que salen de la tabla de búsqueda y, a continuación, los desplaza.</span><span class="sxs-lookup"><span data-stu-id="9e72f-189">The hardware first scales the values that come out of the lookup table and then offsets them.</span></span>

> [!Note]  
> <span data-ttu-id="9e72f-190">Los distintos monitores conectados al mismo equipo pueden tener diferentes capacidades de control gamma.</span><span class="sxs-lookup"><span data-stu-id="9e72f-190">Different monitors connected to the same computer might have different gamma control capabilities.</span></span> <span data-ttu-id="9e72f-191">Además, las funciones de control gamma pueden cambiar de hecho en función del modo de presentación de la salida.</span><span class="sxs-lookup"><span data-stu-id="9e72f-191">Moreover, the gamma control capabilities can in fact change depending on the display mode of the output.</span></span> <span data-ttu-id="9e72f-192">Por lo tanto, se recomienda llamar siempre a [**IDXGIOutput:: GetGammaControlCapabilities**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) para consultar las capacidades de control gamma después de que la aplicación entre en modo de pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="9e72f-192">Consequently, we recommend that you always call [**IDXGIOutput::GetGammaControlCapabilities**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-getgammacontrolcapabilities) to query gamma control capabilities after your app enters full-screen mode.</span></span>

 

<span data-ttu-id="9e72f-193">Puede usar estos valores de capacidad de control gamma para derivar valores de control que después puede establecer mediante la API [**IDXGIOutput:: SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) .</span><span class="sxs-lookup"><span data-stu-id="9e72f-193">You can use these gamma control capability values to derive control values that you can then set by using the [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) API.</span></span>

## <a name="setting-gamma-control-with-dxgi"></a><span data-ttu-id="9e72f-194">Establecer el control gamma con DXGI</span><span class="sxs-lookup"><span data-stu-id="9e72f-194">Setting gamma control with DXGI</span></span>

<span data-ttu-id="9e72f-195">Para establecer controles gamma, se pasa un puntero a una estructura de [**\_ \_ control gamma de DXGI**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) cuando se llama a la API [**IDXGIOutput:: SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) .</span><span class="sxs-lookup"><span data-stu-id="9e72f-195">To set gamma controls, you pass a pointer to a [**DXGI\_GAMMA\_CONTROL**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) structure when you call the [**IDXGIOutput::SetGammaControl**](/windows/desktop/api/DXGI/nf-dxgi-idxgioutput-setgammacontrol) API.</span></span>

<span data-ttu-id="9e72f-196">Establezca los miembros de **escala** y **desplazamiento** de [**\_ \_ control gamma de DXGI**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) para especificar los valores de escala y desplazamiento que desea que el hardware aplique a los valores que obtiene de la tabla de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="9e72f-196">You set the **Scale** and **Offset** members of [**DXGI\_GAMMA\_CONTROL**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) to specify the scale and offset values that you want the hardware to apply to the values that you get from the lookup table.</span></span> <span data-ttu-id="9e72f-197">Puede establecer la **escala** de forma segura en 1 y el **desplazamiento** en cero (es decir, una escala en uno no tiene ningún efecto y un desplazamiento de cero no tiene ningún efecto) si no desea usar la funcionalidad de escalado y desplazamiento, o si el hardware no tiene esa capacidad.</span><span class="sxs-lookup"><span data-stu-id="9e72f-197">You can safely set **Scale** to 1 and **Offset** to zero (that is, a scale by one has no effect and an offset of zero has no effect) if you don't want to use the scale-and-offset capability or if the hardware doesn't have that capability.</span></span>

<span data-ttu-id="9e72f-198">El miembro de la matriz **GammaCurve** del [**\_ \_ control gamma de dxgi**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) se establece en una lista de estructuras [**\_ RGB de dxgi**](/previous-versions/windows/desktop/legacy/bb173071(v=vs.85)) para los puntos de la curva gamma.</span><span class="sxs-lookup"><span data-stu-id="9e72f-198">You set the **GammaCurve** array member of [**DXGI\_GAMMA\_CONTROL**](/previous-versions/windows/desktop/legacy/bb173061(v=vs.85)) to a list of [**DXGI\_RGB**](/previous-versions/windows/desktop/legacy/bb173071(v=vs.85)) structures for the points on the gamma curve.</span></span> <span data-ttu-id="9e72f-199">Cada **elemento \_ RGB de DXGI** especifica los valores float que representan los componentes rojo, verde y azul para ese punto.</span><span class="sxs-lookup"><span data-stu-id="9e72f-199">Each **DXGI\_RGB** element specifies the float values that represent the red, green, and blue components for that point.</span></span> <span data-ttu-id="9e72f-200">La curva gamma no usa valores alfa.</span><span class="sxs-lookup"><span data-stu-id="9e72f-200">The gamma curve doesn't use alpha values.</span></span> <span data-ttu-id="9e72f-201">El número que ha obtenido de **NumGammaControlPoints** de las [**\_ \_ \_ funciones de control gamma de DXGI**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) se usa para rellenar el número de elementos de la matriz de **GammaCurve** .</span><span class="sxs-lookup"><span data-stu-id="9e72f-201">You use the number that you obtained from **NumGammaControlPoints** of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)) to fill that number of elements in the **GammaCurve** array.</span></span> <span data-ttu-id="9e72f-202">Cada elemento que se coloca en la matriz **GammaCurve** es el alto de cada punto de control.</span><span class="sxs-lookup"><span data-stu-id="9e72f-202">Each element that you place in the **GammaCurve** array is the height for each control point.</span></span>

<span data-ttu-id="9e72f-203">Observe en el gráfico anterior que ahora tiene control sobre la posición vertical de cada punto de control y tiene control independiente para rojo, verde y azul.</span><span class="sxs-lookup"><span data-stu-id="9e72f-203">Notice in the preceding graph that you now have control over the vertical placement of each control point, and you have separate control for red, green and blue.</span></span> <span data-ttu-id="9e72f-204">Por ejemplo, puede establecer todos los valores verdes y azules en cero y establecer los valores rojos en una escalera ascendente de cero a uno.</span><span class="sxs-lookup"><span data-stu-id="9e72f-204">For example, you can set all of the green and blue values to zero and set the red values to an ascending staircase from zero to one.</span></span> <span data-ttu-id="9e72f-205">En este escenario, la imagen mostrada muestra solo sus partes rojas, donde el azul y el verde aparecen como negro.</span><span class="sxs-lookup"><span data-stu-id="9e72f-205">In this scenario, the displayed image shows only its red parts, with the blue and green appearing as black.</span></span> <span data-ttu-id="9e72f-206">También puede establecer una escalera descendente para todos los colores, lo que da como resultado una pantalla invertida.</span><span class="sxs-lookup"><span data-stu-id="9e72f-206">You can also set a descending staircase for all colors, which results in an inverted display.</span></span> <span data-ttu-id="9e72f-207">Cualquier valor que se coloque en la matriz **GammaCurve** debe estar incluido en los valores obtenidos de los miembros **MinConvertedValue** y **MaxConvertedValue** de las [**\_ capacidades de \_ control \_ gamma de DXGI**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="9e72f-207">Any value you place in the **GammaCurve** array must be inclusively within the values you obtained from the **MinConvertedValue** and **MaxConvertedValue** members of [**DXGI\_GAMMA\_CONTROL\_CAPABILITIES**](/previous-versions/windows/desktop/legacy/bb173062(v=vs.85)).</span></span>

## <a name="gamma-control-practicalities"></a><span data-ttu-id="9e72f-208">Prácticas de control gamma</span><span class="sxs-lookup"><span data-stu-id="9e72f-208">Gamma control practicalities</span></span>

<span data-ttu-id="9e72f-209">Los controles gamma de DXGI solo se aplican siempre que la aplicación esté en pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="9e72f-209">DXGI’s gamma controls apply only as long as the app is full screen.</span></span> <span data-ttu-id="9e72f-210">Windows restaura el estado anterior de la pantalla cuando la aplicación se cierra o vuelve al modo de ventana.</span><span class="sxs-lookup"><span data-stu-id="9e72f-210">Windows restores the previous state of the display when the app exits or returns to windowed mode.</span></span> <span data-ttu-id="9e72f-211">Pero Windows no restaura el estado de gamma de la aplicación si la aplicación vuelve a entrar en el modo de pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="9e72f-211">But Windows doesn’t restore your app’s gamma state if the app re-enters full-screen mode.</span></span> <span data-ttu-id="9e72f-212">La aplicación debe restaurar explícitamente su estado de gamma cuando vuelva a entrar en modo de pantalla completa.</span><span class="sxs-lookup"><span data-stu-id="9e72f-212">Your app must explicitly restore its gamma state when it re-enters full-screen mode.</span></span>

<span data-ttu-id="9e72f-213">No todos los adaptadores admiten el control gamma.</span><span class="sxs-lookup"><span data-stu-id="9e72f-213">Not all adapters support gamma control.</span></span> <span data-ttu-id="9e72f-214">Si un adaptador no admite el control gamma, omite las llamadas para establecer una rampa gamma.</span><span class="sxs-lookup"><span data-stu-id="9e72f-214">If an adapter doesn't support gamma control, it ignores calls to set a gamma ramp.</span></span>

<span data-ttu-id="9e72f-215">Las aplicaciones que se ejecutan en escritorio remoto no pueden controlar gamma en absoluto.</span><span class="sxs-lookup"><span data-stu-id="9e72f-215">Apps that run under remote desktop can't control gamma at all.</span></span>

<span data-ttu-id="9e72f-216">El cursor del mouse, si se implementa en hardware (como la mayoría), normalmente no responde a la configuración gamma.</span><span class="sxs-lookup"><span data-stu-id="9e72f-216">The mouse cursor, if it is implemented in hardware (as most are), typically doesn't respond to the gamma setting.</span></span>

## <a name="related-topics"></a><span data-ttu-id="9e72f-217">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="9e72f-217">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="9e72f-218">Guía de programación para DXGI</span><span class="sxs-lookup"><span data-stu-id="9e72f-218">Programming Guide for DXGI</span></span>](dx-graphics-dxgi-overviews.md)
</dt> </dl>

 

 
