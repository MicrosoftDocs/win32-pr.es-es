---
description: 'Puede usar el identificador de un metarchivo mejorado para realizar las tareas siguientes:'
ms.assetid: 8f887c38-6cfa-4918-aa44-dd5fb837b40b
title: Operaciones de metarchivo mejoradas
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 18ba9e2ac2f14c4436c039a66cc3211b471c0461
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104155625"
---
# <a name="enhanced-metafile-operations"></a><span data-ttu-id="45683-103">Operaciones de metarchivo mejoradas</span><span class="sxs-lookup"><span data-stu-id="45683-103">Enhanced Metafile Operations</span></span>

<span data-ttu-id="45683-104">Puede usar el identificador de un metarchivo mejorado para realizar las tareas siguientes:</span><span class="sxs-lookup"><span data-stu-id="45683-104">You can use the handle to an enhanced metafile to accomplish the following tasks:</span></span>

-   <span data-ttu-id="45683-105">Mostrar la imagen almacenada en un metarchivo mejorado.</span><span class="sxs-lookup"><span data-stu-id="45683-105">Display the picture stored in an enhanced metafile.</span></span>
-   <span data-ttu-id="45683-106">Cree copias de un metarchivo mejorado.</span><span class="sxs-lookup"><span data-stu-id="45683-106">Create copies of an enhanced metafile.</span></span>
-   <span data-ttu-id="45683-107">Edite un metarchivo mejorado.</span><span class="sxs-lookup"><span data-stu-id="45683-107">Edit an enhanced metafile.</span></span>
-   <span data-ttu-id="45683-108">Recupere la descripción opcional almacenada en un metarchivo mejorado.</span><span class="sxs-lookup"><span data-stu-id="45683-108">Retrieve the optional description stored in an enhanced metafile.</span></span>
-   <span data-ttu-id="45683-109">Recupera una copia de un encabezado de metarchivo mejorado.</span><span class="sxs-lookup"><span data-stu-id="45683-109">Retrieve a copy of an enhanced-metafile header.</span></span>
-   <span data-ttu-id="45683-110">Recupera una versión binaria de un metarchivo mejorado.</span><span class="sxs-lookup"><span data-stu-id="45683-110">Retrieve a binary version of an enhanced metafile.</span></span>
-   <span data-ttu-id="45683-111">Enumera los colores de la paleta opcional.</span><span class="sxs-lookup"><span data-stu-id="45683-111">Enumerate the colors in the optional palette.</span></span>

<span data-ttu-id="45683-112">Estas tareas se describen en las secciones que se encuentran en el resto de este tema.</span><span class="sxs-lookup"><span data-stu-id="45683-112">These tasks are discussed in the sections in the remainder of this topic.</span></span>

## <a name="display-the-picture-stored-in-an-enhanced-metafile"></a><span data-ttu-id="45683-113">Mostrar la imagen almacenada en un metarchivo mejorado</span><span class="sxs-lookup"><span data-stu-id="45683-113">Display the Picture Stored in an Enhanced Metafile</span></span>

<span data-ttu-id="45683-114">Puede mostrar la imagen almacenada en un metarchivo mejorado mediante la función [**PlayEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-playenhmetafile) .</span><span class="sxs-lookup"><span data-stu-id="45683-114">You can display the picture stored in an enhanced metafile using the [**PlayEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-playenhmetafile) function.</span></span> <span data-ttu-id="45683-115">Pase la función a un identificador del metarchivo mejorado, sin tener que preocuparse por el formato de los registros de metarchivos mejorados.</span><span class="sxs-lookup"><span data-stu-id="45683-115">Pass the function a handle to the enhanced metafile, without being concerned with the format of the enhanced metafile records.</span></span> <span data-ttu-id="45683-116">Sin embargo, a veces es conveniente enumerar los registros del metarchivo mejorado para buscar una función GDI determinada y modificar los parámetros de la función de alguna manera.</span><span class="sxs-lookup"><span data-stu-id="45683-116">However, it is sometimes desirable to enumerate the records in the enhanced metafile to search for a particular GDI function and modify the parameters of the function in some manner.</span></span> <span data-ttu-id="45683-117">Para ello, puede usar [**EnumEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-enumenhmetafile) y proporcionar una función de devolución de llamada, [**EnhMetaFileProc**](/windows/win32/api/wingdi/nc-wingdi-enhmfenumproc), para procesar los registros de metarchivos mejorados.</span><span class="sxs-lookup"><span data-stu-id="45683-117">To do this, you can use [**EnumEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-enumenhmetafile) and provide a callback function, [**EnhMetaFileProc**](/windows/win32/api/wingdi/nc-wingdi-enhmfenumproc), to process the enhanced metafile records.</span></span> <span data-ttu-id="45683-118">Para modificar los parámetros de un registro de metarchivo mejorado, debe conocer el formato de los parámetros en el registro.</span><span class="sxs-lookup"><span data-stu-id="45683-118">To modify the parameters for an enhanced metafile record, you must know the format of the parameters within the record.</span></span>

## <a name="create-copies-of-an-enhanced-metafile"></a><span data-ttu-id="45683-119">Crear copias de un metarchivo mejorado</span><span class="sxs-lookup"><span data-stu-id="45683-119">Create Copies of an Enhanced Metafile</span></span>

<span data-ttu-id="45683-120">Algunas aplicaciones crean copias de seguridad (o duplicadas) temporales de un archivo antes de permitir al usuario modificar el original.</span><span class="sxs-lookup"><span data-stu-id="45683-120">Some applications create temporary backup (or duplicate) copies of a file before enabling the user to alter the original.</span></span> <span data-ttu-id="45683-121">Una aplicación puede crear una copia de seguridad de un metarchivo mejorado llamando a la función [**CopyEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-copyenhmetafilea) , proporcionando un identificador que identifica el metarchivo mejorado y proporcionando un puntero al nombre del nuevo archivo.</span><span class="sxs-lookup"><span data-stu-id="45683-121">An application can create a backup copy of an enhanced metafile by calling the [**CopyEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-copyenhmetafilea) function, supplying a handle that identifies the enhanced metafile, and supplying a pointer to the name of the new file.</span></span>

<span data-ttu-id="45683-122">Para crear un metarchivo de formato mejorado basado en memoria, llame a la función [**SetEnhMetaFileBits**](/windows/desktop/api/Wingdi/nf-wingdi-setenhmetafilebits) .</span><span class="sxs-lookup"><span data-stu-id="45683-122">To create a memory-based enhanced-format metafile, call the [**SetEnhMetaFileBits**](/windows/desktop/api/Wingdi/nf-wingdi-setenhmetafilebits) function.</span></span>

## <a name="edit-an-enhanced-metafile"></a><span data-ttu-id="45683-123">Editar un metarchivo mejorado</span><span class="sxs-lookup"><span data-stu-id="45683-123">Edit an Enhanced Metafile</span></span>

<span data-ttu-id="45683-124">La mayoría de las aplicaciones de dibujo, Ilustración y diseño asistido por PC (CAD) requieren un medio para editar una imagen almacenada en un metarchivo mejorado.</span><span class="sxs-lookup"><span data-stu-id="45683-124">Most drawing, illustration, and computer-aided design (CAD) applications require a means of editing a picture stored in an enhanced metafile.</span></span> <span data-ttu-id="45683-125">Aunque la edición de un metarchivo mejorado es una tarea compleja, puede usar la función [**EnumEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-enumenhmetafile) en combinación con otras funciones para proporcionar esta funcionalidad en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="45683-125">Although editing an enhanced metafile is a complex task, you can use the [**EnumEnhMetaFile**](/windows/desktop/api/Wingdi/nf-wingdi-enumenhmetafile) function in combination with other functions to provide this capability in your application.</span></span> <span data-ttu-id="45683-126">La función **EnumEnhMetaFile** y su función de devolución de llamada asociada, [**EnhMetaFileProc**](/windows/win32/api/wingdi/nc-wingdi-enhmfenumproc), permiten que la aplicación procese registros individuales en un metarchivo mejorado.</span><span class="sxs-lookup"><span data-stu-id="45683-126">The **EnumEnhMetaFile** function and its associated callback function, [**EnhMetaFileProc**](/windows/win32/api/wingdi/nc-wingdi-enhmfenumproc), enable the application to process individual records in an enhanced metafile.</span></span>

## <a name="retrieve-the-optional-description-stored-in-an-enhanced-metafile"></a><span data-ttu-id="45683-127">Recuperar la descripción opcional almacenada en un metarchivo mejorado</span><span class="sxs-lookup"><span data-stu-id="45683-127">Retrieve the Optional Description Stored in an Enhanced Metafile</span></span>

<span data-ttu-id="45683-128">Algunas aplicaciones muestran la descripción de texto de un metarchivo mejorado con el nombre de archivo correspondiente en el cuadro de diálogo **abrir** .</span><span class="sxs-lookup"><span data-stu-id="45683-128">Some applications display the text description of an enhanced metafile with the corresponding file name in the **Open** dialog box.</span></span> <span data-ttu-id="45683-129">Puede determinar si esta cadena existe en un metarchivo mejorado recuperando el encabezado del metarchivo con la función [**GetEnhMetaFileHeader**](/windows/desktop/api/Wingdi/nf-wingdi-getenhmetafileheader) y examinando uno de sus miembros.</span><span class="sxs-lookup"><span data-stu-id="45683-129">You can determine whether this string exists in an enhanced metafile by retrieving the metafile header with the [**GetEnhMetaFileHeader**](/windows/desktop/api/Wingdi/nf-wingdi-getenhmetafileheader) function and examining one of its members.</span></span> <span data-ttu-id="45683-130">Si la cadena existe, la aplicación la recupera mediante una llamada a la función [**GetEnhMetaFileDescription**](/windows/desktop/api/Wingdi/nf-wingdi-getenhmetafiledescriptiona) .</span><span class="sxs-lookup"><span data-stu-id="45683-130">If the string exists, the application retrieves it by calling the [**GetEnhMetaFileDescription**](/windows/desktop/api/Wingdi/nf-wingdi-getenhmetafiledescriptiona) function.</span></span>

## <a name="retrieve-a-binary-version-of-an-enhanced-metafile"></a><span data-ttu-id="45683-131">Recuperar una versión binaria de un metarchivo mejorado</span><span class="sxs-lookup"><span data-stu-id="45683-131">Retrieve a Binary Version of an Enhanced Metafile</span></span>

<span data-ttu-id="45683-132">Puede recuperar el contenido de un metarchivo mediante una llamada a la función [**GetEnhMetaFileBits**](/windows/desktop/api/Wingdi/nf-wingdi-getenhmetafilebits) . sin embargo, antes de recuperar el contenido, debe especificar el tamaño del archivo.</span><span class="sxs-lookup"><span data-stu-id="45683-132">You can retrieve the contents of a metafile by calling the [**GetEnhMetaFileBits**](/windows/desktop/api/Wingdi/nf-wingdi-getenhmetafilebits) function; however, before retrieving the contents, you must specify the size of the file.</span></span> <span data-ttu-id="45683-133">Para obtener el tamaño, puede usar la función [**GetEnhMetaFileHeader**](/windows/desktop/api/Wingdi/nf-wingdi-getenhmetafileheader) y examinar el miembro adecuado.</span><span class="sxs-lookup"><span data-stu-id="45683-133">To get the size, you can use the [**GetEnhMetaFileHeader**](/windows/desktop/api/Wingdi/nf-wingdi-getenhmetafileheader) function and examine the appropriate member.</span></span>

## <a name="enumerate-the-colors-in-the-optional-palette"></a><span data-ttu-id="45683-134">Enumerar los colores de la paleta opcional</span><span class="sxs-lookup"><span data-stu-id="45683-134">Enumerate the Colors in the Optional Palette</span></span>

<span data-ttu-id="45683-135">Para lograr colores coherentes cuando se muestra una imagen en varios dispositivos de salida, puede llamar a la función [**CreatePalette**](/windows/desktop/api/Wingdi/nf-wingdi-createpalette) y almacenar una paleta lógica en un metarchivo mejorado.</span><span class="sxs-lookup"><span data-stu-id="45683-135">To achieve consistent colors when a picture is displayed on various output devices, you can call the [**CreatePalette**](/windows/desktop/api/Wingdi/nf-wingdi-createpalette) function and store a logical palette in an enhanced metafile.</span></span> <span data-ttu-id="45683-136">Una aplicación que muestra la imagen almacenada en el metarchivo mejorado recupera esta paleta y llama a la función [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) antes de mostrar la imagen.</span><span class="sxs-lookup"><span data-stu-id="45683-136">An application that displays the picture stored in the enhanced metafile retrieves this palette and calls the [**RealizePalette**](/windows/desktop/api/Wingdi/nf-wingdi-realizepalette) function before displaying the picture.</span></span> <span data-ttu-id="45683-137">Para determinar si una paleta está almacenada en un metarchivo mejorado, recupere el encabezado del metarchivo y examine el miembro adecuado.</span><span class="sxs-lookup"><span data-stu-id="45683-137">To determine whether a palette is stored in an enhanced metafile, retrieve the metafile header and examine the appropriate member.</span></span> <span data-ttu-id="45683-138">Si existe una paleta, puede llamar a la función [**GetEnhMetaFilePaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getenhmetafilepaletteentries) para recuperar la paleta lógica.</span><span class="sxs-lookup"><span data-stu-id="45683-138">If a palette exists, you can call the [**GetEnhMetaFilePaletteEntries**](/windows/desktop/api/Wingdi/nf-wingdi-getenhmetafilepaletteentries) function to retrieve the logical palette.</span></span>

 

 
