---
title: Acerca de las cuentas de inicio de sesión de servicio
description: Cuando se inicia un servicio basado en Win32, inicia sesión en el equipo local.
ms.assetid: 637ad0c0-118f-43e8-9d21-a93f6886f546
ms.tgt_platform: multiple
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 328b33d5dab36ccc5a803eb7c43ca3112e96ecf8
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/17/2020
ms.locfileid: "104149155"
---
# <a name="about-service-logon-accounts"></a><span data-ttu-id="48d97-103">Acerca de las cuentas de inicio de sesión de servicio</span><span class="sxs-lookup"><span data-stu-id="48d97-103">About Service Logon Accounts</span></span>

<span data-ttu-id="48d97-104">Cuando se inicia un servicio basado en Win32, inicia sesión en el equipo local.</span><span class="sxs-lookup"><span data-stu-id="48d97-104">When a Win32-based service starts, it logs on to the local computer.</span></span> <span data-ttu-id="48d97-105">Puede iniciar sesión como:</span><span class="sxs-lookup"><span data-stu-id="48d97-105">It can log on as:</span></span>

-   <span data-ttu-id="48d97-106">Una cuenta de usuario local o de dominio.</span><span class="sxs-lookup"><span data-stu-id="48d97-106">A local or domain user account.</span></span>
-   <span data-ttu-id="48d97-107">La cuenta LocalSystem.</span><span class="sxs-lookup"><span data-stu-id="48d97-107">The LocalSystem account.</span></span>

<span data-ttu-id="48d97-108">La cuenta de inicio de sesión determina la identidad de seguridad del servicio en tiempo de ejecución, es decir, el contexto de seguridad principal del servicio.</span><span class="sxs-lookup"><span data-stu-id="48d97-108">The logon account determines the security identity of the service at run time, that is, the service's primary security context.</span></span> <span data-ttu-id="48d97-109">El contexto de seguridad determina la capacidad del servicio de tener acceso a los recursos locales y de red.</span><span class="sxs-lookup"><span data-stu-id="48d97-109">The security context determines the service's ability to access local and network resources.</span></span> <span data-ttu-id="48d97-110">Por ejemplo, un servicio que se ejecuta en el contexto de seguridad de una cuenta de usuario local no puede tener acceso a los recursos de red.</span><span class="sxs-lookup"><span data-stu-id="48d97-110">For example, a service running in the security context of a local user account cannot access network resources.</span></span> <span data-ttu-id="48d97-111">Por el contrario, un servicio que se ejecuta en el contexto de seguridad de la cuenta LocalSystem en un controlador de dominio (DC) de Windows 2000 tendría acceso sin restricciones al controlador de dominio.</span><span class="sxs-lookup"><span data-stu-id="48d97-111">Conversely, a service running in the security context of the LocalSystem account on a Windows 2000 domain controller (DC), would have unrestricted access to the DC.</span></span> <span data-ttu-id="48d97-112">Para obtener más información y una explicación de las ventajas y las limitaciones entre las cuentas de usuario y LocalSystem, vea [contextos de seguridad y Active Directory Domain Services](security-contexts-and-active-directory-domain-services.md).</span><span class="sxs-lookup"><span data-stu-id="48d97-112">For more information, and a discussion of the benefits and limitations between user accounts and LocalSystem, see [Security Contexts and Active Directory Domain Services](security-contexts-and-active-directory-domain-services.md).</span></span>

<span data-ttu-id="48d97-113">En última instancia, los administradores del sistema donde está instalado el servicio tienen control sobre la cuenta de inicio de sesión del servicio.</span><span class="sxs-lookup"><span data-stu-id="48d97-113">Ultimately, administrators on the system where the service is installed have control over the service's logon account.</span></span> <span data-ttu-id="48d97-114">Por motivos de seguridad, es posible que algunos administradores no le permitan instalar el servicio con la cuenta LocalSystem.</span><span class="sxs-lookup"><span data-stu-id="48d97-114">For security reasons, some administrators may not allow you to install your service under the LocalSystem account.</span></span> <span data-ttu-id="48d97-115">El servicio debe ser capaz de ejecutarse en una cuenta de usuario de dominio.</span><span class="sxs-lookup"><span data-stu-id="48d97-115">Your service must be able to run under a domain user account.</span></span> <span data-ttu-id="48d97-116">Como programador, puede ejercer algún control sobre la cuenta de inicio de sesión del servicio.</span><span class="sxs-lookup"><span data-stu-id="48d97-116">As a programmer, you can exercise some control over your service's logon account.</span></span> <span data-ttu-id="48d97-117">El instalador de servicio especifica la cuenta de inicio de sesión del servicio cuando llama a la función [**CreateService**](/windows/desktop/api/winsvc/nf-winsvc-createservicea) para instalar el servicio en un equipo host.</span><span class="sxs-lookup"><span data-stu-id="48d97-117">Your service installer specifies the service's logon account when it calls the [**CreateService**](/windows/desktop/api/winsvc/nf-winsvc-createservicea) function to install the service on a host computer.</span></span> <span data-ttu-id="48d97-118">El instalador puede sugerir una cuenta de inicio de sesión predeterminada, pero debe permitir que un administrador especifique la cuenta real.</span><span class="sxs-lookup"><span data-stu-id="48d97-118">Your installer can suggest a default logon account, but it should allow an administrator to specify the actual account.</span></span>

<span data-ttu-id="48d97-119">El instalador también puede realizar las siguientes tareas relacionadas con la cuenta de inicio de sesión del servicio:</span><span class="sxs-lookup"><span data-stu-id="48d97-119">Your installer can also perform the following tasks relating to your service's logon account:</span></span>

-   <span data-ttu-id="48d97-120">Instalación.</span><span class="sxs-lookup"><span data-stu-id="48d97-120">Installation.</span></span> <span data-ttu-id="48d97-121">Si instala el servicio para que se ejecute en una cuenta de usuario, la cuenta debe existir antes de llamar a [**CreateService**](/windows/desktop/api/winsvc/nf-winsvc-createservicea).</span><span class="sxs-lookup"><span data-stu-id="48d97-121">If installing your service to run under a user account, the account must exist before you call [**CreateService**](/windows/desktop/api/winsvc/nf-winsvc-createservicea).</span></span> <span data-ttu-id="48d97-122">Puede usar una cuenta existente o crear una como parte de la installrt del equipo host.</span><span class="sxs-lookup"><span data-stu-id="48d97-122">You can use an existing account or create one as part of the host-computer installrt.</span></span> <span data-ttu-id="48d97-123">Para obtener más información, consulte [configuración de la cuenta de usuario de un servicio](setting-up-a-serviceampaposs-user-account.md).</span><span class="sxs-lookup"><span data-stu-id="48d97-123">For more information, see [Setting up a Service's User Account](setting-up-a-serviceampaposs-user-account.md).</span></span>
-   <span data-ttu-id="48d97-124">Autenticación.</span><span class="sxs-lookup"><span data-stu-id="48d97-124">Authentication.</span></span> <span data-ttu-id="48d97-125">Si desea que los clientes usen la autenticación mutua de Kerberos, registre los SPN en la cuenta de inicio de sesión del servicio.</span><span class="sxs-lookup"><span data-stu-id="48d97-125">If you want clients to use Kerberos mutual authentication, register the SPNs on the service's logon account.</span></span> <span data-ttu-id="48d97-126">Si el servicio se ejecuta bajo la cuenta LocalSystem, la cuenta de inicio de sesión del servicio es la cuenta de equipo del equipo host.</span><span class="sxs-lookup"><span data-stu-id="48d97-126">If the service runs under the LocalSystem account, the service's logon account is the computer account of the host computer.</span></span> <span data-ttu-id="48d97-127">Para obtener más información, consulte [Service Principal Names](service-principal-names.md) (Nombres de entidad de seguridad de servicio).</span><span class="sxs-lookup"><span data-stu-id="48d97-127">For more information, see [Service Principal Names](service-principal-names.md).</span></span>
-   <span data-ttu-id="48d97-128">Conceder acceso.</span><span class="sxs-lookup"><span data-stu-id="48d97-128">Grant Access.</span></span> <span data-ttu-id="48d97-129">Asegúrese de que el servicio en tiempo de ejecución tenga los derechos de acceso y los privilegios necesarios para realizar sus tareas.</span><span class="sxs-lookup"><span data-stu-id="48d97-129">Ensure that the service at run time has the access rights and privileges that it requires to perform its tasks.</span></span> <span data-ttu-id="48d97-130">Esto puede requerir la configuración de entradas de control de acceso (ACE) en los descriptores de seguridad de varios recursos, que son objetos de directorio, recursos compartidos de archivos, etc., para permitir los derechos de acceso necesarios para la cuenta de usuario o equipo.</span><span class="sxs-lookup"><span data-stu-id="48d97-130">This can require setting access-control entries (ACEs) in the security descriptors of various resources, that is directory objects, file shares, and so on, to allow the necessary access rights to the user or computer account.</span></span> <span data-ttu-id="48d97-131">Para obtener más información, consulte [conceder derechos de acceso a la cuenta de inicio de sesión del servicio](granting-access-rights-to-the-service-logon-account.md).</span><span class="sxs-lookup"><span data-stu-id="48d97-131">For more information, see [Granting Access Rights to the Service Logon Account](granting-access-rights-to-the-service-logon-account.md).</span></span>
-   <span data-ttu-id="48d97-132">Establezca los privilegios.</span><span class="sxs-lookup"><span data-stu-id="48d97-132">Set Privileges.</span></span> <span data-ttu-id="48d97-133">Asignar privilegios a la cuenta de inicio de sesión especificada, como el derecho de inicio de sesión como servicio en el equipo host.</span><span class="sxs-lookup"><span data-stu-id="48d97-133">Assign privileges to the specified logon account, such as the right to logon as a service to the host computer.</span></span> <span data-ttu-id="48d97-134">Para obtener más información, vea [conceder el derecho de inicio de sesión como servicio en el equipo host](granting-logon-as-service-right-on-the-host-computer.md).</span><span class="sxs-lookup"><span data-stu-id="48d97-134">For more information, see [Granting Logon as Service Right on the Host Computer](granting-logon-as-service-right-on-the-host-computer.md).</span></span>

<span data-ttu-id="48d97-135">Una vez instalado un servicio, hay tareas de mantenimiento relacionadas con la cuenta de inicio de sesión del servicio.</span><span class="sxs-lookup"><span data-stu-id="48d97-135">After a service is installed, there are maintenance tasks that relate to your service logon account.</span></span> <span data-ttu-id="48d97-136">Para obtener más información, consulte tareas de mantenimiento de la [cuenta de inicio de sesión](logon-account-maintenance-tasks.md).</span><span class="sxs-lookup"><span data-stu-id="48d97-136">For more information, see [Logon Account Maintenance Tasks](logon-account-maintenance-tasks.md).</span></span>

-   <span data-ttu-id="48d97-137">Mantenimiento de contraseñas.</span><span class="sxs-lookup"><span data-stu-id="48d97-137">Password maintenance.</span></span> <span data-ttu-id="48d97-138">Para un servicio que se ejecuta en una cuenta de usuario, debe cambiar periódicamente la contraseña y mantener la contraseña sincronizada con la contraseña usada por uno o más administradores de control de servicios locales para iniciar el servicio.</span><span class="sxs-lookup"><span data-stu-id="48d97-138">For a service that runs under a user account, you must periodically change the password and keep the password in sync with the password used by one or more local service control managers to start the service.</span></span>
-   <span data-ttu-id="48d97-139">Mantenimiento de SPN.</span><span class="sxs-lookup"><span data-stu-id="48d97-139">SPN maintenance.</span></span> <span data-ttu-id="48d97-140">Si cambia una cuenta de inicio de sesión de servicio, quite los SPN registrados en la cuenta anterior y regístrelo en la nueva cuenta.</span><span class="sxs-lookup"><span data-stu-id="48d97-140">If a service logon account changes, remove the SPNs registered on the old account and register them on the new account.</span></span> <span data-ttu-id="48d97-141">Tenga en cuenta que cuando se instala un servicio, un administrador de dominio puede cambiar la cuenta en la que se ejecuta el servicio; Utilice las funciones de Win32 o la interfaz de usuario de la herramienta administrativa administración de equipos.</span><span class="sxs-lookup"><span data-stu-id="48d97-141">Be aware that when a service is installed, a domain administrator can change the account under which your service runs; use Win32 functions or the user interface of the Computer Management administrative tool.</span></span>
-   <span data-ttu-id="48d97-142">Mantenimiento de ACE.</span><span class="sxs-lookup"><span data-stu-id="48d97-142">ACE maintenance.</span></span> <span data-ttu-id="48d97-143">Si una cuenta de inicio de sesión de servicio cambia, debe actualizar las ACE y las pertenencias a grupos para asegurarse de que el servicio aún puede tener acceso a los recursos necesarios.</span><span class="sxs-lookup"><span data-stu-id="48d97-143">If a service logon account changes, you need to update ACEs and group memberships to ensure that the service can still access the necessary resources.</span></span>

 

 