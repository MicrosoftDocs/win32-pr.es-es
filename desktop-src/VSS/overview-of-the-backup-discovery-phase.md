---
description: 'Después de llamar a IVssBackupComponents:: GatherWriterMetadata, un solicitante utiliza la instancia de la interfaz IVssAsync devuelta desde esta llamada para determinar cuándo todos los escritores del sistema han terminado de crear los documentos de metadatos del escritor.'
ms.assetid: 04658d50-04f0-4189-8b88-ff152f1bf482
title: Información general de la fase de detección de copias de seguridad
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3d2d2a2d05220ecf3e25c77c18cc62b07726964f
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105696985"
---
# <a name="overview-of-the-backup-discovery-phase"></a><span data-ttu-id="09cd7-103">Información general de la fase de detección de copias de seguridad</span><span class="sxs-lookup"><span data-stu-id="09cd7-103">Overview of the Backup Discovery Phase</span></span>

<span data-ttu-id="09cd7-104">Después de llamar a [**IVssBackupComponents:: GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata), un solicitante utiliza la instancia de la interfaz [**IVssAsync**](/windows/desktop/api/Vss/nn-vss-ivssasync) devuelta desde esta llamada para determinar cuándo todos los escritores del sistema han terminado de crear los documentos de metadatos del escritor.</span><span class="sxs-lookup"><span data-stu-id="09cd7-104">After calling [**IVssBackupComponents::GatherWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-gatherwritermetadata), a requester uses the instance of the [**IVssAsync**](/windows/desktop/api/Vss/nn-vss-ivssasync) interface returned from this call to determine when all writers on the system have finished constructing their Writer Metadata Documents.</span></span> <span data-ttu-id="09cd7-105">Para obtener más información, vea [información general sobre el procesamiento de una copia de seguridad en VSS](overview-of-processing-a-backup-under-vss.md).</span><span class="sxs-lookup"><span data-stu-id="09cd7-105">For more information, see [Overview of Processing a Backup Under VSS](overview-of-processing-a-backup-under-vss.md).</span></span>

<span data-ttu-id="09cd7-106">En este momento, el solicitante puede comenzar una fase de detección, examinando los metadatos para determinar qué aplicaciones se están ejecutando y a qué volúmenes se deben crear instantáneas para obtener una copia de seguridad completa.</span><span class="sxs-lookup"><span data-stu-id="09cd7-106">At this point, the requester can begin a discovery phase, examining metadata to determine what applications are running and which volumes must be shadow copied to get a complete backup.</span></span> <span data-ttu-id="09cd7-107">En la tabla siguiente se muestra la secuencia de acciones y eventos necesarios para la fase de detección de copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="09cd7-107">The following table shows the sequence of actions and events that are required for the backup discovery phase.</span></span>



| <span data-ttu-id="09cd7-108">Acción del solicitante</span><span class="sxs-lookup"><span data-stu-id="09cd7-108">Requester action</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | <span data-ttu-id="09cd7-109">Evento</span><span class="sxs-lookup"><span data-stu-id="09cd7-109">Event</span></span> | <span data-ttu-id="09cd7-110">Acción del escritor</span><span class="sxs-lookup"><span data-stu-id="09cd7-110">Writer action</span></span>                                                                     |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------|-----------------------------------------------------------------------------------|
| <span data-ttu-id="09cd7-111">Recuperar documentos de metadatos del escritor (vea [**IVssBackupComponents:: GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata), [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)).</span><span class="sxs-lookup"><span data-stu-id="09cd7-111">Retrieve Writer Metadata Documents (see [**IVssBackupComponents::GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata), [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)).</span></span>                                                                                                                                                                                                                                                                                                                                                 | <span data-ttu-id="09cd7-112">None</span><span class="sxs-lookup"><span data-stu-id="09cd7-112">None</span></span>  | <span data-ttu-id="09cd7-113">Durante este período, los escritores pueden continuar con sus operaciones normales.</span><span class="sxs-lookup"><span data-stu-id="09cd7-113">During this period, writers may be able to continue with their normal operations.</span></span> |
| <span data-ttu-id="09cd7-114">Use la lista de componentes y sus [*conjuntos de archivos*](vssgloss-f.md), así como archivos excluidos, para obtener una lista de los volúmenes y archivos implicados en la copia de seguridad (vea [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent), [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc)).</span><span class="sxs-lookup"><span data-stu-id="09cd7-114">Use the list of components and their [*file sets*](vssgloss-f.md), as well as excluded files, to obtain a list of volumes and files involved in the backup (see [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent), [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc)).</span></span>                                                                                                                                                                                                                                                                      | <span data-ttu-id="09cd7-115">None</span><span class="sxs-lookup"><span data-stu-id="09cd7-115">None</span></span>  | <span data-ttu-id="09cd7-116">None</span><span class="sxs-lookup"><span data-stu-id="09cd7-116">None</span></span>                                                                              |
| <span data-ttu-id="09cd7-117">Elija los componentes del documento de metadatos del escritor del escritor de los que desea realizar copias de seguridad.</span><span class="sxs-lookup"><span data-stu-id="09cd7-117">Choose which components in the writer's Writer Metadata Document to back up.</span></span> <span data-ttu-id="09cd7-118">Llame a [**IVssBackupComponents:: AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent) para cada componente para agregarlo al documento componentes de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="09cd7-118">Call [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent) for each component to add it to the Backup Components Document.</span></span> <span data-ttu-id="09cd7-119">(Vea [trabajar con la selección para realizar copias de seguridad](working-with-selectability-for-backup.md) y [trabajar con el documento componentes de copia de seguridad](working-with-the-backup-components-document.md)).</span><span class="sxs-lookup"><span data-stu-id="09cd7-119">(See [Working with Selectability for Backup](working-with-selectability-for-backup.md) and [Working with the Backup Components Document](working-with-the-backup-components-document.md).)</span></span>                                                                                                                      | <span data-ttu-id="09cd7-120">None</span><span class="sxs-lookup"><span data-stu-id="09cd7-120">None</span></span>  | <span data-ttu-id="09cd7-121">None</span><span class="sxs-lookup"><span data-stu-id="09cd7-121">None</span></span>                                                                              |
| <span data-ttu-id="09cd7-122">Inicialice el conjunto de instantáneas, el contexto y compruebe los volúmenes admitidos (consulte [**IVssBackupComponents:: StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset), [**IVssBackupComponents:: IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported)).</span><span class="sxs-lookup"><span data-stu-id="09cd7-122">Initialize the shadow copy set, context and check for supported volumes (see [**IVssBackupComponents::StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset), [**IVssBackupComponents::IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported)).</span></span>                                                                                                                                                                                                                                                                                   | <span data-ttu-id="09cd7-123">None</span><span class="sxs-lookup"><span data-stu-id="09cd7-123">None</span></span>  | <span data-ttu-id="09cd7-124">None</span><span class="sxs-lookup"><span data-stu-id="09cd7-124">None</span></span>                                                                              |
| <span data-ttu-id="09cd7-125">Si realiza una copia de seguridad que no sea un componente, agregue los volúmenes de destino deseados del documento de metadatos del escritor al conjunto de instantáneas llamando a [**IVssBackupComponents:: AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset) para cada volumen.</span><span class="sxs-lookup"><span data-stu-id="09cd7-125">If performing a non-component backup, add the desired target volumes from the Writer Metadata Document to the shadow copy set by calling [**IVssBackupComponents::AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset) for each volume.</span></span> <span data-ttu-id="09cd7-126">De lo contrario, para los componentes del documento de metadatos del escritor que ya se agregaron al documento componentes de copia de seguridad (llamando a [**AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)), el solicitante también debe llamar a **IVssBackupComponents:: AddToSnapshotSet** para cada volumen afectado.</span><span class="sxs-lookup"><span data-stu-id="09cd7-126">Otherwise, for the components in the Writer Metadata Document that were already added to the Backup Components Document (by calling [**AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)), the requester must also call **IVssBackupComponents::AddToSnapshotSet** for each affected volume.</span></span> | <span data-ttu-id="09cd7-127">None</span><span class="sxs-lookup"><span data-stu-id="09cd7-127">None</span></span>  | <span data-ttu-id="09cd7-128">None</span><span class="sxs-lookup"><span data-stu-id="09cd7-128">None</span></span>                                                                              |



 

## <a name="writer-actions-during-the-discovery-phase"></a><span data-ttu-id="09cd7-129">Acciones del escritor durante la fase de detección</span><span class="sxs-lookup"><span data-stu-id="09cd7-129">Writer Actions during the Discovery Phase</span></span>

<span data-ttu-id="09cd7-130">Dado que la fase de detección de una copia de seguridad se compone principalmente de un solicitante que procesa la información que ha recuperado de los documentos de metadatos del escritor, existen pocos requisitos en un escritor.</span><span class="sxs-lookup"><span data-stu-id="09cd7-130">Because the discovery phase of a backup consists primarily of a requester processing the information it has retrieved from Writer Metadata Documents, there are few if any requirements on a writer.</span></span>

<span data-ttu-id="09cd7-131">En teoría, un escritor podría continuar ejecutándose normalmente en este momento.</span><span class="sxs-lookup"><span data-stu-id="09cd7-131">In theory, a writer could continue to run normally at this point.</span></span> <span data-ttu-id="09cd7-132">Sin embargo, puede ser conveniente que los escritores inicien los preparativos de las operaciones de copia de seguridad y de instantáneas.</span><span class="sxs-lookup"><span data-stu-id="09cd7-132">However, it may be desirable for writers to begin preparations for the coming shadow copy and backup operations.</span></span>

## <a name="requester-actions-during-the-discovery-phase"></a><span data-ttu-id="09cd7-133">Acciones del solicitante durante la fase de detección</span><span class="sxs-lookup"><span data-stu-id="09cd7-133">Requester Actions during the Discovery Phase</span></span>

<span data-ttu-id="09cd7-134">Un solicitante usa los objetos [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) obtenidos a través de [**IVssBackupComponents:: GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) para recorrer en iteración todos los metadatos de los escritores y seleccionar aquellos escritores cuyos datos se van a copiar.</span><span class="sxs-lookup"><span data-stu-id="09cd7-134">A requester uses the [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata) objects obtained through [**IVssBackupComponents::GetWriterMetadata**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-getwritermetadata) to iterate over all the writers' metadata and selecting those writers whose data it intends to back up.</span></span>

<span data-ttu-id="09cd7-135">En este momento, el solicitante tendrá que generar una lista inicial de los candidatos de copia de seguridad de cada escritor mediante la iteración de los componentes del escritor mediante [**IVssExamineWriterMetadata:: getComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent).</span><span class="sxs-lookup"><span data-stu-id="09cd7-135">At this point, the requester will need to generate an initial list of each writer's backup candidates by iterating over the writer's components using [**IVssExamineWriterMetadata::GetComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getcomponent).</span></span> <span data-ttu-id="09cd7-136">Esto proporciona al solicitante los objetos [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) , desde los que puede obtener las especificaciones de los archivos de los que se va a realizar una copia de seguridad mediante [**IVssWMComponent:: GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile), [**IVssWMComponent:: GetDatabaseFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabasefile)y [**IVssWMComponent:: GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile).</span><span class="sxs-lookup"><span data-stu-id="09cd7-136">This provides the requester with [**IVssWMComponent**](/windows/desktop/api/VsBackup/nl-vsbackup-ivsswmcomponent) objects, from which you can get the specifications for the files to be backed up using [**IVssWMComponent::GetFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getfile), [**IVssWMComponent::GetDatabaseFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabasefile), and [**IVssWMComponent::GetDatabaseLogFile**](/windows/desktop/api/VsBackup/nf-vsbackup-ivsswmcomponent-getdatabaselogfile).</span></span>

<span data-ttu-id="09cd7-137">Dado que el objeto [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) puede usar caracteres comodín para almacenar información de ubicación de archivos, puede que sea necesario usar funciones como [**FindFirstFile**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilea), [**FindFirstFileEx**](/windows/win32/api/fileapi/nf-fileapi-findfirstfileexa)y [**FindNextFile**](/windows/win32/api/fileapi/nf-fileapi-findnextfilea).</span><span class="sxs-lookup"><span data-stu-id="09cd7-137">Because the [**IVssWMFiledesc**](/windows/desktop/api/VsWriter/nl-vswriter-ivsswmfiledesc) object can use wildcard characters to hold file location information, it may be necessary to use functions such as [**FindFirstFile**](/windows/win32/api/fileapi/nf-fileapi-findfirstfilea), [**FindFirstFileEx**](/windows/win32/api/fileapi/nf-fileapi-findfirstfileexa), and [**FindNextFile**](/windows/win32/api/fileapi/nf-fileapi-findnextfilea).</span></span>

<span data-ttu-id="09cd7-138">Hasta que se haya completado la instantánea, aún es posible que los escritores agreguen o quiten archivos del disco en el curso normal de su trabajo, por lo que no debe generar la lista real de archivos de los que se va a realizar la copia de seguridad en este momento.</span><span class="sxs-lookup"><span data-stu-id="09cd7-138">Until the shadow copy has been completed, it is still possible for writers to add or remove files from disk in the normal course of their work, so you should not generate the actual list of files to be backed up at this time.</span></span>

<span data-ttu-id="09cd7-139">En su lugar, se puede encontrar la lista inicial de archivos y volúmenes de los que se va a hacer una copia de seguridad en este momento; para ello, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="09cd7-139">Instead, the initial list of files and volumes to be backed up is found at this point by doing the following:</span></span>

1.  <span data-ttu-id="09cd7-140">Examinar todos los elementos seleccionables para la copia de seguridad y los componentes no seleccionables en el documento de metadatos del escritor de cada escritor (mediante [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)) y organizarlos en [*conjuntos de componentes*](vssgloss-c.md) usar la [*ruta de acceso lógica*](vssgloss-l.md) (vea [trabajar con rutas de acceso lógicas y de selección](working-with-selectability-and-logical-paths.md))</span><span class="sxs-lookup"><span data-stu-id="09cd7-140">Examining all selectable for backup and nonselectable components in each writer's Writer Metadata Document (using [**IVssExamineWriterMetadata**](/windows/desktop/api/VsBackup/nl-vsbackup-ivssexaminewritermetadata)) and organizing them into [*component sets*](vssgloss-c.md) use [*logical path*](vssgloss-l.md) (see [Working with Selectability and Logical Paths](working-with-selectability-and-logical-paths.md))</span></span>
2.  <span data-ttu-id="09cd7-141">[*Inclusión explícita*](vssgloss-e.md) de todos los componentes necesarios (no seleccionables para componentes de copia de seguridad sin seleccionar para los antecesores de copia de seguridad) en el documento componentes de copia de seguridad mediante [ **IVssBackupComponents:: AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)</span><span class="sxs-lookup"><span data-stu-id="09cd7-141">[*Including explicitly*](vssgloss-e.md) all required components (nonselectable for backup components without selectable for backup ancestors) in the Backup Components Document using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)</span></span>
3.  <span data-ttu-id="09cd7-142">Elegir incluir explícitamente opcionalmente seleccionable para componentes de copia de seguridad que no definen un conjunto de componentes (mediante [**IVssBackupComponents:: AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent))</span><span class="sxs-lookup"><span data-stu-id="09cd7-142">Choosing to explicitly include optional selectable for backup components that do not define a component set (using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent))</span></span>
4.  <span data-ttu-id="09cd7-143">Al [*seleccionar conjuntos de componentes*](vssgloss-c.md) para participar en una copia de seguridad, se agrega explícitamente su definición seleccionable para el componente de copia de seguridad (mediante [**IVssBackupComponents:: AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)), que [*incluye implícitamente*](vssgloss-i.md) los [*subcomponentes*](vssgloss-s.md)del conjunto de componentes.</span><span class="sxs-lookup"><span data-stu-id="09cd7-143">Selecting [*component sets*](vssgloss-c.md) for participation in a backup by explicitly adding their defining selectable for backup component (using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)), which [*implicitly includes*](vssgloss-i.md) the component set's [*subcomponents*](vssgloss-s.md).</span></span>
5.  <span data-ttu-id="09cd7-144">El uso de información de [*conjunto de archivos*](vssgloss-f.md) en las funciones de administración de volúmenes y de documentos de metadatos del escritor de escritores seleccionados, un solicitante determina las rutas de acceso de los archivos de los que se va a realizar la copia de seguridad y los volúmenes en los que será necesario realizar instantáneas.</span><span class="sxs-lookup"><span data-stu-id="09cd7-144">Using [*file set*](vssgloss-f.md) information in the selected writers' Writer Metadata Document and volume management functions, a requester determines the paths of files to be backed up and the volumes that will need to be shadow copied</span></span>

<span data-ttu-id="09cd7-145">Tenga en cuenta que solo los componentes incluidos explícitamente (mediante [**IVssBackupComponents:: AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)) en la copia de seguridad y en el documento componentes de copia de seguridad tendrán instancias de la interfaz [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) agregada a ese documento.</span><span class="sxs-lookup"><span data-stu-id="09cd7-145">Note that only the components explicitly included (using [**IVssBackupComponents::AddComponent**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addcomponent)) in the backup and in the Backup Components Document will have instances of the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface added to that document.</span></span> <span data-ttu-id="09cd7-146">Estas instancias se utilizarán para examinar y modificar la configuración de componentes para los componentes incluidos explícitamente y cualquiera de sus subcomponentes incluidos implícitamente (consulte [selección y trabajo con propiedades de componentes](selectability-and-working-with-component-properties.md)).</span><span class="sxs-lookup"><span data-stu-id="09cd7-146">These instances will be used to examine and modify component settings for both explicitly included components and any of their implicitly included subcomponents (see [Selectability and Working with Component Properties](selectability-and-working-with-component-properties.md)).</span></span>

<span data-ttu-id="09cd7-147">Si un escritor incluye alguno de los componentes de un escritor, debe agregar todos sus componentes necesarios.</span><span class="sxs-lookup"><span data-stu-id="09cd7-147">If a writer includes any of a writer's components, it must add all of its required components.</span></span> <span data-ttu-id="09cd7-148">Sin embargo, un solicitante también puede omitir por completo todos los conjuntos de componentes de un escritor.</span><span class="sxs-lookup"><span data-stu-id="09cd7-148">However, a requester is also free to entirely skip all of a writer's component sets.</span></span> <span data-ttu-id="09cd7-149">Si ninguno de los componentes de un escritor se selecciona explícitamente, el escritor no está seleccionado y VSS impide que el escritor participe en el resto de la operación de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="09cd7-149">If none of a writer's components are explicitly selected, the writer is not selected, and VSS inhibits that writer from participating in the rest of the backup operation.</span></span>

<span data-ttu-id="09cd7-150">El solicitante inicia el conjunto de instantáneas que contendrá los volúmenes seleccionados mediante una llamada a [**IVssBackupComponents:: StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset).</span><span class="sxs-lookup"><span data-stu-id="09cd7-150">The requester initiates the shadow copy set that will contain the selected volumes by calling [**IVssBackupComponents::StartSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-startsnapshotset).</span></span>

<span data-ttu-id="09cd7-151">Si el volumen puede participar en una instantánea (que se puede comprobar con [**ivssbackupcomponents:: IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported)), el solicitante puede agregar ese volumen al conjunto de instantáneas mediante [**Ivssbackupcomponents:: AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset).</span><span class="sxs-lookup"><span data-stu-id="09cd7-151">If the volume can participate in a shadow copy (which can be checked with [**IVssBackupComponents::IsVolumeSupported**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-isvolumesupported)), the requester can add that volume to the shadow copy set using [**IVssBackupComponents::AddToSnapshotSet**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-addtosnapshotset).</span></span>

<span data-ttu-id="09cd7-152">Aunque no suele ser útil, un solicitante también puede elegir a veces qué [*proveedor*](vssgloss-p.md) mantendrá la instantánea para un volumen determinado (consulte [selección de proveedores](selecting-providers.md) para obtener más información).</span><span class="sxs-lookup"><span data-stu-id="09cd7-152">Although it is not generally useful, a requester can sometimes also choose which [*provider*](vssgloss-p.md) will maintain the shadow copy for a given volume (see [Selecting Providers](selecting-providers.md) for details).</span></span>

<span data-ttu-id="09cd7-153">Se debe tener cuidado con el control de un volumen que contenga carpetas montadas o puntos de reanálisis.</span><span class="sxs-lookup"><span data-stu-id="09cd7-153">Care should be given to the handling of a volume containing mounted folders or reparse points.</span></span> <span data-ttu-id="09cd7-154">Una carpeta montada o un punto de análisis puede aparecer en una instantánea y se puede hacer una copia de seguridad de ella.</span><span class="sxs-lookup"><span data-stu-id="09cd7-154">A mounted folder or reparse point can appear in a shadow copy and can be backed up.</span></span> <span data-ttu-id="09cd7-155">Sin embargo, no se puede atravesar una carpeta montada o un punto de reanálisis en el volumen de la instantánea (vea [trabajar con carpetas montadas y puntos de análisis](working-with-reparse-and-mount-points.md)).</span><span class="sxs-lookup"><span data-stu-id="09cd7-155">However, a mounted folder or reparse point cannot be traversed on the shadow copied volume (see [Working with Mounted Folders and Reparse Points](working-with-reparse-and-mount-points.md)).</span></span>

<span data-ttu-id="09cd7-156">En este punto de la copia de seguridad, se inicializa y rellena el documento componentes de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="09cd7-156">At this point in the backup, the Backup Components Document is initialized and filled.</span></span> <span data-ttu-id="09cd7-157">En futuras operaciones, los escritores y los solicitantes pueden usar la interfaz [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) para comunicarse entre sí.</span><span class="sxs-lookup"><span data-stu-id="09cd7-157">In future operations, writers and requesters can use the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface to communicate with each other.</span></span>

<span data-ttu-id="09cd7-158">Los escritores reciben acceso a la interfaz [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) al controlar los eventos [*PrepareForBackup*](vssgloss-p.md), [*postsnapshot*](vssgloss-p.md)y [*BackupComplete*](vssgloss-b.md) .</span><span class="sxs-lookup"><span data-stu-id="09cd7-158">Writers are given access to the [**IVssComponent**](/windows/desktop/api/VsWriter/nl-vswriter-ivsscomponent) interface when handling the [*PrepareForBackup*](vssgloss-p.md), [*PostSnapshot*](vssgloss-p.md), and [*BackupComplete*](vssgloss-b.md) events.</span></span>

 

 
