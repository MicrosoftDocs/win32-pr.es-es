---
description: Los requisitos de contexto se expresan como una combinación de marcadores de bits que se pasan a la función InitializeSecurityContext (general) o AcceptSecurityContext (general).
ms.assetid: 4a44b829-4202-46c0-b17e-04943fa067ab
title: Requisitos de contexto
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 86af5f71557bdd53229b5c8ed6afc14dc24edb46
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104277343"
---
# <a name="context-requirements"></a>Requisitos de contexto

Los requisitos de contexto se expresan como una combinación de marcadores de bits que se pasan a la función [**InitializeSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) o [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) . Estas marcas afectan al [*contexto*](/windows/desktop/SecGloss/c-gly) de varias maneras. No todas las marcas se aplican a todos los contextos. Algunos solo son válidos para el servidor, otros solo para el cliente.

El autor de la llamada usa el parámetro *fContextReq* de la llamada [**InitializeSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) o [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) para especificar un conjunto de marcas que indican las capacidades necesarias. Cuando la función devuelve, el parámetro *pfContextAttr* indica los atributos del contexto establecido. El autor de la llamada determina si los atributos de contexto finales son aceptables.

Las marcas solicitadas o devueltas por [**InitializeSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-initializesecuritycontexta) tienen el prefijo de ISC. Los solicitados desde o devueltos por [**AcceptSecurityContext (general)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext) tienen el prefijo ASC. Las marcas que se pasan a una función incluyen REQ, mientras que las marcas devueltas incluyen RET. Por ejemplo, una marca de solicitud para la autenticación mutua pasada a **InitializeSecurityContext (general)** es ISC \_ req \_ Mutual \_ auth. Un servidor que solicita autenticación mutua pasa ASC \_ req \_ Mutual \_ auth a **AcceptSecurityContext (general)**. Si se logra la autenticación mutua, **InitializeSecurityContext (general)** devuelve ISC \_ RET \_ Mutual \_ auth y **AcceptSecurityContext (general)** devuelve ASC \_ RET \_ Mutual \_ auth. Si el autor de la llamada solicita la autenticación mutua, pero el [*paquete de seguridad*](/windows/desktop/SecGloss/s-gly) indica que no se puede realizar, el autor de la llamada debe decidir si cancelar el contexto o continuar.

En la tabla siguiente se describen las distintas marcas de requisito de contexto.



| Marca                             | Descripción                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Delegado<br/>              | El servidor de la aplicación de transporte puede crear nuevos contextos de seguridad que suplantan al cliente que serán aceptados por otros servidores como contextos del cliente. Delegate solo funciona si \_ se establece la autenticación mutua. El delegado solo se admite actualmente en [*Kerberos*](/windows/desktop/SecGloss/k-gly). Además, Kerberos delegará solo en un servidor que tenga la marca \_ de confianza para la \_ delegación. No use esta marca para la [*delegación restringida*](/windows/desktop/SecGloss/c-gly).<br/> |
| \_autenticación mutua<br/>          | Las partes que se comunican deben autenticar sus identidades entre sí. Sin \_ la autenticación mutua, el cliente autentica su identidad en el servidor. Con \_ la autenticación mutua, el servidor también debe autenticar su identidad en el cliente.<br/> Cuando se usa el paquete de seguridad [*Schannel*](/windows/desktop/SecGloss/s-gly) , el servidor establece la constante de **\_ \_ \_ autenticación mutua de ASC RET** solo en la última llamada a [**AcceptSecurityContext (Negotiate)**](/windows/win32/api/sspi/nf-sspi-acceptsecuritycontext), después de que la asignación de certificados se ha completado correctamente.<br/>           |
| detección de reproducción \_<br/>        | El [*paquete de seguridad*](/windows/desktop/SecGloss/s-gly) detecta los paquetes reproducidos y notifica al autor de la llamada si se ha reproducido un paquete. El uso de esta marca implica todas las condiciones especificadas por la marca de integridad.<br/>                                                                                                                                                                                                                                                                                                                      |
| detección de secuencia \_<br/>      | El contexto debe estar autorizado para detectar la entrega desordenada de paquetes más adelante a través de las funciones de compatibilidad de mensajes. El uso de esta marca implica todas las condiciones especificadas por la marca de integridad.<br/>                                                                                                                                                                                                                                                                                                                                                                                             |
| CONFIDENCIALIDAD<br/>       | El contexto puede proteger los datos mientras están en tránsito mediante las funciones [**EncryptMessage (general)**](/windows/win32/api/sspi/nf-sspi-encryptmessage) y [**DecryptMessage (general)**](/windows/win32/api/sspi/nf-sspi-decryptmessage) . La marca de CONFIDENCIALidad no funciona si el contexto generado es para la cuenta de invitado.<br/>                                                                                                                                                                                                                                                                                                      |
| USAR \_ clave de sesión \_<br/>     | Se debe negociar una nueva [*clave de sesión*](/windows/desktop/SecGloss/s-gly) .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| SOLICITAR \_ \_ credenciales<br/>    | Si el cliente es un usuario interactivo, el paquete de seguridad debe, si es posible, pedir al usuario las [*credenciales*](/windows/desktop/SecGloss/c-gly)adecuadas.<br/>                                                                                                                                                                                                                                                                                                                                                                                          |
| USAR \_ \_ credenciales proporcionadas<br/>  | La información de credenciales específica del paquete está disponible en el búfer de entrada. El paquete de seguridad puede usar estas [*credenciales*](/windows/desktop/SecGloss/c-gly) para autenticar la conexión.<br/>                                                                                                                                                                                                                                                                                                                                                                |
| GUARDAR \_ \_ credenciales proporcionadas<br/> | Las credenciales proporcionadas deben almacenarse en caché con las credenciales adicionales.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ASIGNAR \_ memoria<br/>      | El [*paquete de seguridad*](/windows/desktop/SecGloss/s-gly) debe asignar memoria. El llamador debe llamar finalmente a la función [**FreeContextBuffer**](/windows/desktop/api/Sspi/nf-sspi-freecontextbuffer) para liberar memoria asignada por el paquete de seguridad.<br/>                                                                                                                                                                                                                                                                                                                      |
| USAR \_ el \_ estilo DCE<br/>       | El autor de la llamada espera una [*transacción*](/windows/desktop/SecGloss/t-gly)de autenticación de tres tramos.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| DIAGRAMA<br/>              | Se debe usar la semántica de [*datagramas*](/windows/desktop/SecGloss/d-gly) . Para obtener más información, vea [contextos de datagramas](datagram-contexts.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                        |
| CONNECTION<br/>            | Se debe usar la semántica de conexión. Para obtener más información, vea [contextos orientados a conexiones](connection-oriented-contexts.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| Stream<br/>                | Se debe usar la semántica de secuencia. Para obtener más información, vea [contextos de secuencia](stream-contexts.md).<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| \_error extendido<br/>       | Se deben generar mensajes de respuesta de error para el elemento del mismo nivel si se produce un error en el contexto.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| INTEGRACIÓN<br/>             | Se puede comprobar la integridad del búfer, pero no está habilitada la detección de secuencias o respuestas.<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| SIN \_ integridad<br/>         | Se omite el requisito de **integridad** .<br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| IDENTIFICAR<br/>              | Cuando un servidor suplanta un contexto que tiene este marcador establecido, la suplantación produce un acceso extremadamente limitado. La suplantación con el conjunto de IDENTIFICADOres se usa para comprobar la identidad del cliente.<br/>                                                                                                                                                                                                                                                                                                                                                                                                       |



 

 

