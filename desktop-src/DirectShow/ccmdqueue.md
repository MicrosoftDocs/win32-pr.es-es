---
description: La clase CCmdQueue es una clase base que proporciona una cola de objetos CDeferredCommand y funciones miembro para agregar, quitar, comprobar el estado e invocar los comandos en cola.
ms.assetid: 6bd0f0f3-3c56-47d2-9fd8-e2863a2afa33
title: Clase CCmdQueue
ms.topic: reference
ms.date: 05/31/2018
topic_type:
- APIRef
- kbSyntax
api_name:
- CCmdQueue
api_type:
- COM
api_location: ''
ms.openlocfilehash: 78af7a975d54ba832bbdf1fb7f8027f87b747660
ms.sourcegitcommit: a47bd86f517de76374e4fff33cfeb613eb259a7e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/06/2021
ms.locfileid: "104152084"
---
# <a name="ccmdqueue-class"></a><span data-ttu-id="cdc11-103">Clase CCmdQueue</span><span class="sxs-lookup"><span data-stu-id="cdc11-103">CCmdQueue class</span></span>

<span data-ttu-id="cdc11-104">La `CCmdQueue` clase es una clase base que proporciona una cola de objetos [**CDeferredCommand**](cdeferredcommand.md) y funciones miembro para agregar, quitar, comprobar el estado e invocar los comandos en cola.</span><span class="sxs-lookup"><span data-stu-id="cdc11-104">The `CCmdQueue` class is a base class that provides a queue of [**CDeferredCommand**](cdeferredcommand.md) objects and member functions to add, remove, check status, and invoke the queued commands.</span></span> <span data-ttu-id="cdc11-105">Un `CCmdQueue` objeto es una parte de un objeto que implementa los métodos [**IQueueCommand**](/windows/desktop/api/Control/nn-control-iqueuecommand) .</span><span class="sxs-lookup"><span data-stu-id="cdc11-105">A `CCmdQueue` object is a part of an object that implements [**IQueueCommand**](/windows/desktop/api/Control/nn-control-iqueuecommand) methods.</span></span> <span data-ttu-id="cdc11-106">El administrador de gráficos de filtro implementa los métodos de **IQueueCommand** para que las aplicaciones puedan poner en cola los comandos en el gráfico de filtro.</span><span class="sxs-lookup"><span data-stu-id="cdc11-106">The filter graph manager implements **IQueueCommand** methods so that applications can queue commands to the filter graph.</span></span> <span data-ttu-id="cdc11-107">Los filtros que implementan la interfaz **IQueueCommand** usan directamente esta clase.</span><span class="sxs-lookup"><span data-stu-id="cdc11-107">Filters that implement the **IQueueCommand** interface directly use this class.</span></span> <span data-ttu-id="cdc11-108">Si desea usar objetos **CDeferredCommand** , la cola se debe derivar de esta clase.</span><span class="sxs-lookup"><span data-stu-id="cdc11-108">If you want to use **CDeferredCommand** objects, your queue must be derived from this class.</span></span>

<span data-ttu-id="cdc11-109">Hay dos modos de sincronización: grueso y preciso.</span><span class="sxs-lookup"><span data-stu-id="cdc11-109">There are two modes of synchronization: coarse and accurate.</span></span> <span data-ttu-id="cdc11-110">En el modo grueso, la aplicación espera hasta que llega una hora especificada y, a continuación, ejecuta el comando.</span><span class="sxs-lookup"><span data-stu-id="cdc11-110">In coarse mode, the application waits until a specified time arrives and then executes the command.</span></span> <span data-ttu-id="cdc11-111">En el modo preciso, la aplicación espera hasta que el procesamiento comienza en el ejemplo que aparece en el momento y, a continuación, ejecuta el comando.</span><span class="sxs-lookup"><span data-stu-id="cdc11-111">In accurate mode, the application waits until processing begins on the sample that appears at the time, and then executes the command.</span></span> <span data-ttu-id="cdc11-112">El filtro determina cuál de ellos implementará.</span><span class="sxs-lookup"><span data-stu-id="cdc11-112">The filter determines which one it will implement.</span></span> <span data-ttu-id="cdc11-113">El administrador de gráficos de filtros siempre implementa el modo grueso para los comandos que se ponen en cola en el administrador de gráficos de filtro.</span><span class="sxs-lookup"><span data-stu-id="cdc11-113">The filter graph manager always implements coarse mode for commands that are queued at the filter graph manager.</span></span>

<span data-ttu-id="cdc11-114">Si desea realizar una sincronización aproximada, es probable que desee esperar hasta que haya un comando pendiente y, a continuación, ejecutarlo.</span><span class="sxs-lookup"><span data-stu-id="cdc11-114">If you want coarse synchronization, you probably want to wait until there is a command due, and then execute it.</span></span> <span data-ttu-id="cdc11-115">Para ello, puede llamar a [**CCmdQueue:: GetDueCommand**](ccmdqueue-getduecommand.md).</span><span class="sxs-lookup"><span data-stu-id="cdc11-115">You can do this by calling [**CCmdQueue::GetDueCommand**](ccmdqueue-getduecommand.md).</span></span> <span data-ttu-id="cdc11-116">Si tiene varias cosas que esperar, obtenga el identificador de evento de [**CCmdQueue:: GetDueHandle**](ccmdqueue-getduehandle.md) y, a continuación, llame a **CCmdQueue:: GetDueCommand** cuando se señale.</span><span class="sxs-lookup"><span data-stu-id="cdc11-116">If you have several things to wait for, get the event handle from [**CCmdQueue::GetDueHandle**](ccmdqueue-getduehandle.md) and then call **CCmdQueue::GetDueCommand** when this is signaled.</span></span> <span data-ttu-id="cdc11-117">el [**tiempo de flujo**](stream-time.md) solo realizará el avance entre las llamadas a las funciones miembro [**CCmdQueue:: Run**](ccmdqueue-run.md) y [**CCmdQueue:: EndRun**](ccmdqueue-endrun.md) .</span><span class="sxs-lookup"><span data-stu-id="cdc11-117">[**stream time**](stream-time.md) will advance only between calls to the [**CCmdQueue::Run**](ccmdqueue-run.md) and [**CCmdQueue::EndRun**](ccmdqueue-endrun.md) member functions.</span></span> <span data-ttu-id="cdc11-118">No hay ninguna garantía de que, si se establece el identificador, habrá un comando listo.</span><span class="sxs-lookup"><span data-stu-id="cdc11-118">There is no guarantee that if the handle is set, there will be a command ready.</span></span> <span data-ttu-id="cdc11-119">Cada vez que se señala el evento, llame a la función miembro **GetDueCommand** (probablemente con un tiempo de espera de cero); Esto puede devolver E \_ Abort si no hay ningún comando listo.</span><span class="sxs-lookup"><span data-stu-id="cdc11-119">Each time the event is signaled, call the **GetDueCommand** member function (probably with a time-out of zero); this can return E\_ABORT if no command is ready.</span></span>

<span data-ttu-id="cdc11-120">Si desea una sincronización precisa, llame a la función miembro [**CCmdQueue:: GetCommandDueFor**](ccmdqueue-getcommandduefor.md) y pase los ejemplos que va a procesar como parámetro.</span><span class="sxs-lookup"><span data-stu-id="cdc11-120">If you want accurate synchronization, call the [**CCmdQueue::GetCommandDueFor**](ccmdqueue-getcommandduefor.md) member function and pass the samples you are about to process as a parameter.</span></span> <span data-ttu-id="cdc11-121">Esto devuelve lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="cdc11-121">This returns the following:</span></span>

-   <span data-ttu-id="cdc11-122">Un comando de tiempo de secuencia debido a o antes de esa hora de flujo.</span><span class="sxs-lookup"><span data-stu-id="cdc11-122">A stream-time command due at or before that stream time.</span></span>
-   <span data-ttu-id="cdc11-123">Un comando de tiempo de presentación debido a o antes de la presentación de la hora de la secuencia.</span><span class="sxs-lookup"><span data-stu-id="cdc11-123">A presentation-time command due at or before the presentation of the stream time.</span></span> <span data-ttu-id="cdc11-124">Haga esto solo entre las funciones miembro [**CCmdQueue:: Run**](ccmdqueue-run.md) y [**CCmdQueue:: EndRun**](ccmdqueue-endrun.md) , porque fuera de esto, no se conoce la asignación del tiempo de transmisión al tiempo de presentación.</span><span class="sxs-lookup"><span data-stu-id="cdc11-124">Do this only between the [**CCmdQueue::Run**](ccmdqueue-run.md) and [**CCmdQueue::EndRun**](ccmdqueue-endrun.md) member functions, because outside of this, the mapping from stream time to presentation time is not known.</span></span>
-   <span data-ttu-id="cdc11-125">Cualquier comando de tiempo de presentación debido ahora.</span><span class="sxs-lookup"><span data-stu-id="cdc11-125">Any presentation-time command due now.</span></span>

<span data-ttu-id="cdc11-126">Si desea realizar una sincronización precisa de los ejemplos que se pueden procesar durante el modo de pausa, debe usar comandos de tiempo de secuencia.</span><span class="sxs-lookup"><span data-stu-id="cdc11-126">If you want accurate synchronization for samples that might be processed during paused mode, you must use stream-time commands.</span></span>

<span data-ttu-id="cdc11-127">En todos los casos, los comandos permanecen en la cola hasta que se llama o se cancela.</span><span class="sxs-lookup"><span data-stu-id="cdc11-127">In all cases, commands remain queued until called or canceled.</span></span> <span data-ttu-id="cdc11-128">Este objeto de cola administra completamente la configuración y el restablecimiento del identificador de evento.</span><span class="sxs-lookup"><span data-stu-id="cdc11-128">The setting and resetting of the event handle is managed entirely by this queue object.</span></span>



| <span data-ttu-id="cdc11-129">Miembros de datos protegidos</span><span class="sxs-lookup"><span data-stu-id="cdc11-129">Protected Data Members</span></span>                                 | <span data-ttu-id="cdc11-130">Descripción</span><span class="sxs-lookup"><span data-stu-id="cdc11-130">Description</span></span>                                                                                            |
|--------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="cdc11-131">m \_ bRunning</span><span class="sxs-lookup"><span data-stu-id="cdc11-131">m\_bRunning</span></span>                                            | <span data-ttu-id="cdc11-132">Marca de estado de ejecución; establezca **true** cuando se ejecute.</span><span class="sxs-lookup"><span data-stu-id="cdc11-132">Flag for running state; set **TRUE** when running.</span></span>                                                     |
| <span data-ttu-id="cdc11-133">m \_ dwAdvise</span><span class="sxs-lookup"><span data-stu-id="cdc11-133">m\_dwAdvise</span></span>                                            | <span data-ttu-id="cdc11-134">Identificador de notificación del reloj de referencia (cero si no hay ninguna notificación pendiente).</span><span class="sxs-lookup"><span data-stu-id="cdc11-134">Advise identifier from the reference clock (zero if no outstanding advise).</span></span>                            |
| <span data-ttu-id="cdc11-135">m \_ evDue</span><span class="sxs-lookup"><span data-stu-id="cdc11-135">m\_evDue</span></span>                                               | <span data-ttu-id="cdc11-136">Establece la hora a la que se deben tener los comandos.</span><span class="sxs-lookup"><span data-stu-id="cdc11-136">Sets the time when any commands are due.</span></span>                                                               |
| <span data-ttu-id="cdc11-137">m \_ listPresentation</span><span class="sxs-lookup"><span data-stu-id="cdc11-137">m\_listPresentation</span></span>                                    | <span data-ttu-id="cdc11-138">Almacena comandos en cola en el momento de la presentación.</span><span class="sxs-lookup"><span data-stu-id="cdc11-138">Stores commands queued in presentation time.</span></span>                                                           |
| <span data-ttu-id="cdc11-139">m \_ listStream</span><span class="sxs-lookup"><span data-stu-id="cdc11-139">m\_listStream</span></span>                                          | <span data-ttu-id="cdc11-140">Almacena comandos en cola en tiempo de secuencia.</span><span class="sxs-lookup"><span data-stu-id="cdc11-140">Stores commands queued in stream time.</span></span>                                                                 |
| <span data-ttu-id="cdc11-141">\_bloqueo m</span><span class="sxs-lookup"><span data-stu-id="cdc11-141">m\_Lock</span></span>                                                | <span data-ttu-id="cdc11-142">Protege el acceso a las listas.</span><span class="sxs-lookup"><span data-stu-id="cdc11-142">Protects access to lists.</span></span>                                                                              |
| <span data-ttu-id="cdc11-143">m \_ pClock</span><span class="sxs-lookup"><span data-stu-id="cdc11-143">m\_pClock</span></span>                                              | <span data-ttu-id="cdc11-144">Reloj de referencia actual.</span><span class="sxs-lookup"><span data-stu-id="cdc11-144">Current reference clock.</span></span>                                                                               |
| <span data-ttu-id="cdc11-145">m \_ StreamTimeOffset</span><span class="sxs-lookup"><span data-stu-id="cdc11-145">m\_StreamTimeOffset</span></span>                                    | <span data-ttu-id="cdc11-146">Contiene el desplazamiento de tiempo de transmisión cuando **m \_ BRunning** es **true**.</span><span class="sxs-lookup"><span data-stu-id="cdc11-146">Contains the stream time offset when **m\_bRunning** is **TRUE**.</span></span>                                      |
| <span data-ttu-id="cdc11-147">m \_ StreamTimeOffset</span><span class="sxs-lookup"><span data-stu-id="cdc11-147">m\_StreamTimeOffset</span></span>                                    | <span data-ttu-id="cdc11-148">Contiene el desplazamiento de tiempo de transmisión cuando **m \_ BRunning** es **true**.</span><span class="sxs-lookup"><span data-stu-id="cdc11-148">Contains the stream time offset when **m\_bRunning** is **TRUE**.</span></span>                                      |
| <span data-ttu-id="cdc11-149">Funciones de miembro</span><span class="sxs-lookup"><span data-stu-id="cdc11-149">Member Functions</span></span>                                       | <span data-ttu-id="cdc11-150">Descripción</span><span class="sxs-lookup"><span data-stu-id="cdc11-150">Description</span></span>                                                                                            |
| [<span data-ttu-id="cdc11-151">**CCmdQueue**</span><span class="sxs-lookup"><span data-stu-id="cdc11-151">**CCmdQueue**</span></span>](ccmdqueue-ccmdqueue.md)               | <span data-ttu-id="cdc11-152">Construye un objeto **CCmdQueue** .</span><span class="sxs-lookup"><span data-stu-id="cdc11-152">Constructs a **CCmdQueue** object.</span></span>                                                                     |
| [<span data-ttu-id="cdc11-153">**CheckTime**</span><span class="sxs-lookup"><span data-stu-id="cdc11-153">**CheckTime**</span></span>](ccmdqueue-checktime.md)               | <span data-ttu-id="cdc11-154">Determina si se debe a una hora determinada.</span><span class="sxs-lookup"><span data-stu-id="cdc11-154">Determines if a given time is due.</span></span>                                                                     |
| [<span data-ttu-id="cdc11-155">**GetDueHandle**</span><span class="sxs-lookup"><span data-stu-id="cdc11-155">**GetDueHandle**</span></span>](ccmdqueue-getduehandle.md)         | <span data-ttu-id="cdc11-156">Recupera el identificador de evento que se señalará.</span><span class="sxs-lookup"><span data-stu-id="cdc11-156">Retrieves the event handle that will be signaled.</span></span>                                                      |
| <span data-ttu-id="cdc11-157">Funciones miembro reemplazables</span><span class="sxs-lookup"><span data-stu-id="cdc11-157">Overridable Member Functions</span></span>                           | <span data-ttu-id="cdc11-158">Descripción</span><span class="sxs-lookup"><span data-stu-id="cdc11-158">Description</span></span>                                                                                            |
| [<span data-ttu-id="cdc11-159">**EndRun**</span><span class="sxs-lookup"><span data-stu-id="cdc11-159">**EndRun**</span></span>](ccmdqueue-endrun.md)                     | <span data-ttu-id="cdc11-160">Cambia a modo detenido o en pausa.</span><span class="sxs-lookup"><span data-stu-id="cdc11-160">Switches to stopped or paused mode.</span></span>                                                                    |
| [<span data-ttu-id="cdc11-161">**GetCommandDueFor**</span><span class="sxs-lookup"><span data-stu-id="cdc11-161">**GetCommandDueFor**</span></span>](ccmdqueue-getcommandduefor.md) | <span data-ttu-id="cdc11-162">Recupera un comando aplazado que se programa en un momento especificado.</span><span class="sxs-lookup"><span data-stu-id="cdc11-162">Retrieves a deferred command that is scheduled at a specified time.</span></span>                                    |
| [<span data-ttu-id="cdc11-163">**GetDueCommand**</span><span class="sxs-lookup"><span data-stu-id="cdc11-163">**GetDueCommand**</span></span>](ccmdqueue-getduecommand.md)       | <span data-ttu-id="cdc11-164">Recupera un puntero al siguiente comando que se debe a.</span><span class="sxs-lookup"><span data-stu-id="cdc11-164">Retrieves a pointer to the next command that is due.</span></span>                                                   |
| [<span data-ttu-id="cdc11-165">**Introducir**</span><span class="sxs-lookup"><span data-stu-id="cdc11-165">**Insert**</span></span>](ccmdqueue-insert.md)                     | <span data-ttu-id="cdc11-166">Agrega el objeto [**CDeferredCommand**](cdeferredcommand.md) a la cola.</span><span class="sxs-lookup"><span data-stu-id="cdc11-166">Adds the [**CDeferredCommand**](cdeferredcommand.md) object to the queue.</span></span>                             |
| [<span data-ttu-id="cdc11-167">**Nuevo**</span><span class="sxs-lookup"><span data-stu-id="cdc11-167">**New**</span></span>](ccmdqueue-new.md)                           | <span data-ttu-id="cdc11-168">Inicializa un comando que se va a ejecutar y devuelve un nuevo objeto [**CDeferredCommand**](cdeferredcommand.md) .</span><span class="sxs-lookup"><span data-stu-id="cdc11-168">Initializes a command to be run and returns a new [**CDeferredCommand**](cdeferredcommand.md) object.</span></span> |
| [<span data-ttu-id="cdc11-169">**Retirar**</span><span class="sxs-lookup"><span data-stu-id="cdc11-169">**Remove**</span></span>](ccmdqueue-remove.md)                     | <span data-ttu-id="cdc11-170">Quita el objeto [**CDeferredCommand**](cdeferredcommand.md) de la cola.</span><span class="sxs-lookup"><span data-stu-id="cdc11-170">Removes the [**CDeferredCommand**](cdeferredcommand.md) object from the queue.</span></span>                        |
| [<span data-ttu-id="cdc11-171">**Ejecutar**</span><span class="sxs-lookup"><span data-stu-id="cdc11-171">**Run**</span></span>](ccmdqueue-run.md)                           | <span data-ttu-id="cdc11-172">Cambia al modo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="cdc11-172">Switches to running mode.</span></span>                                                                              |
| [<span data-ttu-id="cdc11-173">**SetSyncSource**</span><span class="sxs-lookup"><span data-stu-id="cdc11-173">**SetSyncSource**</span></span>](ccmdqueue-setsyncsource.md)       | <span data-ttu-id="cdc11-174">Establece el reloj usado para el control de tiempo.</span><span class="sxs-lookup"><span data-stu-id="cdc11-174">Sets the clock used for timing.</span></span>                                                                        |
| [<span data-ttu-id="cdc11-175">**SetTimeAdvise**</span><span class="sxs-lookup"><span data-stu-id="cdc11-175">**SetTimeAdvise**</span></span>](ccmdqueue-settimeadvise.md)       | <span data-ttu-id="cdc11-176">Configura un evento de temporizador con el reloj de referencia.</span><span class="sxs-lookup"><span data-stu-id="cdc11-176">Sets up a timer event with the reference clock.</span></span>                                                        |



 

 

 



