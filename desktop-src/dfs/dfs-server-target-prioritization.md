---
title: Asignación de prioridades de destino de servidor DFS
description: La priorización de destino de servidor DFS es una característica disponible en Microsoft Windows Server 2003 con Service Pack 1 (SP1) y sistemas operativos posteriores.
ms.assetid: 0aacebf7-49cc-4287-a5c4-0d25a416d227
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3e784a540a67f624ca5b8075009cd862c6063427
ms.sourcegitcommit: c7add10d695482e1ceb72d62b8a4ebd84ea050f7
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104275084"
---
# <a name="dfs-server-target-prioritization"></a><span data-ttu-id="1b600-103">Asignación de prioridades de destino de servidor DFS</span><span class="sxs-lookup"><span data-stu-id="1b600-103">DFS Server Target Prioritization</span></span>

<span data-ttu-id="1b600-104">La priorización de destino de servidor DFS es una característica disponible en Microsoft Windows Server 2003 con Service Pack 1 (SP1) y sistemas operativos posteriores.</span><span class="sxs-lookup"><span data-stu-id="1b600-104">DFS Server Target Prioritization is a feature available in Microsoft Windows Server 2003 with Service Pack 1 (SP1) and later operating systems.</span></span> <span data-ttu-id="1b600-105">Esta característica permite que los servidores DFS aprovechen la información disponible sobre el Active Directory de los costos del sitio para priorizar los destinos en las referencias de cliente.</span><span class="sxs-lookup"><span data-stu-id="1b600-105">This feature enables DFS servers to take advantage of available Active Directory site-cost information to prioritize the targets in client referrals.</span></span>

<span data-ttu-id="1b600-106">Antes de Windows Server 2003 con SP1, los destinos se agrupaban en dos conjuntos: uno para contener todos los destinos en el mismo sitio que el cliente. y otro grupo para todos los demás destinos.</span><span class="sxs-lookup"><span data-stu-id="1b600-106">Before Windows Server 2003 with SP1, targets were grouped into two sets: one group for containing all targets in the same site as the client; and another group for all other targets.</span></span> <span data-ttu-id="1b600-107">Los destinos que comparten el mismo sitio que el cliente se denominan "en el sitio" y, si el costo del sitio está habilitado, se les asigna un valor de costo específico en relación con el sitio global, con menores costos de sitio preferidos en los más altos.</span><span class="sxs-lookup"><span data-stu-id="1b600-107">Those targets sharing the same site as the client are called "in-site", and if site-costing is enabled, they are assigned a specific cost value relative to the site overall, with lower site costs preferred over higher ones.</span></span>

<span data-ttu-id="1b600-108">Con la disponibilidad de este sitio: los datos de costo, los destinos de servidor se pueden priorizar para las estrategias de conmutación por error de servidores DFS más eficaces.</span><span class="sxs-lookup"><span data-stu-id="1b600-108">With the availability of this site-costing data, server targets can be prioritized for more effective DFS server failover strategies.</span></span> <span data-ttu-id="1b600-109">En el pasado, este nivel de detalle granular no estaba disponible y los administradores tenían que recurrir a medias artificiales (como sitios ficticios en AD) para admitir incluso requisitos simples como la designación de servidores específicos como un servidor de "copia de seguridad" o "secundario" en el caso de que se produzca un error en el servidor DFS principal.</span><span class="sxs-lookup"><span data-stu-id="1b600-109">In the past, this granular level of detail was not available, and administrators had to resort to artificial means (such as dummy sites in AD) to support even simple requirements like the designation of specific servers as a "backup" or "secondary" server in the case where a "primary" DFS server fails.</span></span> <span data-ttu-id="1b600-110">Ahora, con los detalles adicionales proporcionados por los costos del sitio, se pueden realizar estrategias de conmutación por error de varios niveles.</span><span class="sxs-lookup"><span data-stu-id="1b600-110">Now, with the additional detail provided by site-costing, multi-level failover strategies are possible.</span></span>

<span data-ttu-id="1b600-111">En el siguiente debate se supone que el costo del sitio está habilitado.</span><span class="sxs-lookup"><span data-stu-id="1b600-111">The following discussion assumes that site-costing is enabled.</span></span>

## <a name="target-prioritization"></a><span data-ttu-id="1b600-112">Priorización de destino</span><span class="sxs-lookup"><span data-stu-id="1b600-112">Target Prioritization</span></span>

<span data-ttu-id="1b600-113">La prioridad de destino es un orden específico desde una perspectiva administrativa, clasificación y clasificación de servidores en el sitio en términos de preferencias explícitas según el costo del sitio de un cliente DFS.</span><span class="sxs-lookup"><span data-stu-id="1b600-113">Target priority is a specific ordering from an administrative perspective, classifying and ranking in-site servers in terms of explicit preference based on their site cost from a DFS client.</span></span> <span data-ttu-id="1b600-114">La prioridad global es independiente del costo del sitio.</span><span class="sxs-lookup"><span data-stu-id="1b600-114">Global priority is independent of the site-cost.</span></span> <span data-ttu-id="1b600-115">Tenga en cuenta que las clases de prioridad global no indican necesariamente los destinos más óptimos de la perspectiva de un cliente DFS, sino que reflejan la importancia o falta de importancia de los objetivos específicos de la perspectiva de un administrador del sitio.</span><span class="sxs-lookup"><span data-stu-id="1b600-115">Note that global priority classes do not necessarily indicate the most optimal targets from a DFS client's perspective, but instead reflect the importance, or lack of importance, of specific targets from a site administrator's perspective.</span></span>

<span data-ttu-id="1b600-116">La prioridad de destino de servidor se divide en dos categorías de valor: clase de prioridad y rango de prioridad.</span><span class="sxs-lookup"><span data-stu-id="1b600-116">Server target priority is divided into two value categories: priority class and priority rank.</span></span> <span data-ttu-id="1b600-117">Las clases de prioridad se dividen en dos niveles: local y global.</span><span class="sxs-lookup"><span data-stu-id="1b600-117">Priority classes are divided into two levels: local and global.</span></span> <span data-ttu-id="1b600-118">Dentro de estas clases, existe una ordenación aproximada de los destinos según el costo del sitio, agrupados como altos, normales y de baja prioridad.</span><span class="sxs-lookup"><span data-stu-id="1b600-118">Within these classes there is a rough ordering of targets based on site cost, grouped as high, normal, and low priority.</span></span> <span data-ttu-id="1b600-119">El resultado son cinco clases de prioridad, en orden de mayor a menor prioridad como se indica a continuación:</span><span class="sxs-lookup"><span data-stu-id="1b600-119">The result is five priority classes, in order from highest to lowest priority as follows:</span></span>

- <span data-ttu-id="1b600-120">Prioridad alta global</span><span class="sxs-lookup"><span data-stu-id="1b600-120">Global high priority</span></span>
- <span data-ttu-id="1b600-121">Sitio-costo de alta prioridad</span><span class="sxs-lookup"><span data-stu-id="1b600-121">Site-cost high priority</span></span>
- <span data-ttu-id="1b600-122">Prioridad de costo normal del sitio</span><span class="sxs-lookup"><span data-stu-id="1b600-122">Site-cost normal priority</span></span>
- <span data-ttu-id="1b600-123">Sitio-costo de baja prioridad</span><span class="sxs-lookup"><span data-stu-id="1b600-123">Site-cost low priority</span></span>
- <span data-ttu-id="1b600-124">Prioridad baja global</span><span class="sxs-lookup"><span data-stu-id="1b600-124">Global low priority</span></span>

<span data-ttu-id="1b600-125">Las clases de costo del sitio se pueden considerar subdivisiones de "prioridad normal global".</span><span class="sxs-lookup"><span data-stu-id="1b600-125">The site-cost classes can be considered as subdivisions of "global normal priority".</span></span> <span data-ttu-id="1b600-126">El rango de prioridad es una clasificación de entero simple basada en valores ordinales: 0, 1, 2 y posteriores, siendo 0 el valor más alto y todos los valores subsiguientes que indican la disminución del rango.</span><span class="sxs-lookup"><span data-stu-id="1b600-126">Priority rank is a simple integer ranking based on ordinal values: 0, 1, 2, and onward, with 0 being the highest value and all subsequent values indicating decreasing rank.</span></span>

<span data-ttu-id="1b600-127">Las prioridades globales alta y baja no tienen en cuenta los valores de costo del sitio.</span><span class="sxs-lookup"><span data-stu-id="1b600-127">The global high and low priorities do not consider site-cost values.</span></span> <span data-ttu-id="1b600-128">Los destinos con una preferencia de recepción de prioridad alta global sobre todos los demás destinos y los destinos con una prioridad baja global reciben la menor preferencia.</span><span class="sxs-lookup"><span data-stu-id="1b600-128">Targets with a global high priority receive preference over all other targets, and targets with a global low priority receive the least preference.</span></span>

<span data-ttu-id="1b600-129">En el orden de una referencia, el proceso completo consta de los siguientes pasos:</span><span class="sxs-lookup"><span data-stu-id="1b600-129">In ordering a referral, the complete process has the following steps:</span></span>

1. <span data-ttu-id="1b600-130">Se identifican los conjuntos de destinos globales alto y bajo, junto con los destinos "normales globales" restantes.</span><span class="sxs-lookup"><span data-stu-id="1b600-130">The sets of global high and low targets are identified, along with the remaining "global normal" targets.</span></span>
2. <span data-ttu-id="1b600-131">Si se establece la opción "INSITE", se quitan todos los destinos fuera del sitio del cliente.</span><span class="sxs-lookup"><span data-stu-id="1b600-131">If the "INSITE" option is set, all targets outside of the client's site are removed.</span></span> <span data-ttu-id="1b600-132">La opción "INSITE" no se aplica a los conjuntos globales de prioridad alta y baja.</span><span class="sxs-lookup"><span data-stu-id="1b600-132">The "INSITE" option is not applied to the global high and low priority sets.</span></span>
3. <span data-ttu-id="1b600-133">Dentro de cada uno de estos tres conjuntos, los destinos se ordenan mediante el mecanismo de costo del sitio de AD, mediante el costo de sitio local o completo.</span><span class="sxs-lookup"><span data-stu-id="1b600-133">Within each of these three sets, the targets are ordered using the AD site-cost mechanism, using either local or full site costing.</span></span> <span data-ttu-id="1b600-134">El resultado es un conjunto de destinos de igual costo del sitio.</span><span class="sxs-lookup"><span data-stu-id="1b600-134">The result is sets of targets of equal site cost.</span></span>
4. <span data-ttu-id="1b600-135">Dentro de los conjuntos de objetivos de "normal general" de igual costo del sitio, a los destinos se les asigna una clase de prioridad de las clasificaciones de prioridad alta, normal y baja prioridad.</span><span class="sxs-lookup"><span data-stu-id="1b600-135">Within the sets of "global normal" targets of equal site cost, targets are assigned a priority class from the site-cost high, normal, and low priority rankings.</span></span>
5. <span data-ttu-id="1b600-136">Dentro de los conjuntos de destinos de la misma clase de prioridad y costo del sitio, los destinos se ordenan ahora por rango de prioridad, siendo 0 el rango más alto.</span><span class="sxs-lookup"><span data-stu-id="1b600-136">Within the sets of targets of equal site cost and priority class, targets are now ordered by priority rank, with 0 being the highest rank.</span></span>
6. <span data-ttu-id="1b600-137">Dentro de los conjuntos de destinos de igual costo del sitio, clase de prioridad y rango de prioridad, los destinos se ordenan aleatoriamente para el equilibrio de carga.</span><span class="sxs-lookup"><span data-stu-id="1b600-137">Within the sets of targets of equal site cost, priority class, and priority rank, targets are randomly shuffled for load balancing.</span></span>

<span data-ttu-id="1b600-138">Gráficamente, un conjunto de destinos se ordena como se muestra a continuación:</span><span class="sxs-lookup"><span data-stu-id="1b600-138">Graphically, a set of targets are ordered as seen below:</span></span>

- <span data-ttu-id="1b600-139">destinos de clase de alta prioridad global</span><span class="sxs-lookup"><span data-stu-id="1b600-139">global high priority class targets</span></span> 
- <span data-ttu-id="1b600-140">objetivos de clase de prioridad alta de nivel de sitio con costo de sitio = 0</span><span class="sxs-lookup"><span data-stu-id="1b600-140">site-cost high priority class targets with site cost = 0</span></span>
- <span data-ttu-id="1b600-141">normal con costo del sitio = 0</span><span class="sxs-lookup"><span data-stu-id="1b600-141">normal with site cost = 0</span></span>
- <span data-ttu-id="1b600-142">bajo con costo de sitio = 0</span><span class="sxs-lookup"><span data-stu-id="1b600-142">low with site cost = 0</span></span>
- <span data-ttu-id="1b600-143">objetivos de clase de prioridad alta de nivel de sitio con costo de sitio = 1</span><span class="sxs-lookup"><span data-stu-id="1b600-143">site-cost high priority class targets with site cost = 1</span></span>
- <span data-ttu-id="1b600-144">normal con costo del sitio = 1</span><span class="sxs-lookup"><span data-stu-id="1b600-144">normal with site cost = 1</span></span>
- <span data-ttu-id="1b600-145">bajo con costo de sitio = 1</span><span class="sxs-lookup"><span data-stu-id="1b600-145">low with site cost = 1</span></span>
- <span data-ttu-id="1b600-146">Etcétera.</span><span class="sxs-lookup"><span data-stu-id="1b600-146">and so on</span></span>
- <span data-ttu-id="1b600-147">destinos de clase de baja prioridad global</span><span class="sxs-lookup"><span data-stu-id="1b600-147">global low priority class targets</span></span>

<span data-ttu-id="1b600-148">Dentro de cada uno de estos conjuntos, los destinos se ordenan según la clasificación de prioridad.</span><span class="sxs-lookup"><span data-stu-id="1b600-148">Within each of these sets, targets are sorted according to priority rank.</span></span> <span data-ttu-id="1b600-149">El rango más alto es cero, con cada valor entero subsiguiente (1, 2, etc.) que indica un rango cada vez más bajo.</span><span class="sxs-lookup"><span data-stu-id="1b600-149">The highest rank is zero, with each subsequent integer value (1, 2, and so on) indicating an increasingly lower rank.</span></span>

<span data-ttu-id="1b600-150">La prioridad de destino se establece en un destino específico de un vínculo (o raíz) en un espacio de nombres DFS.</span><span class="sxs-lookup"><span data-stu-id="1b600-150">Target priority is set on a specific target of a link (or root) in a DFS namespace.</span></span> <span data-ttu-id="1b600-151">La prioridad de un destino para un vínculo no influye en el orden de otros vínculos si se usa varias veces esa misma ruta de acceso de destino.</span><span class="sxs-lookup"><span data-stu-id="1b600-151">A target's priority for one link does not influence the ordering of other links if that same target path is used multiple times.</span></span> <span data-ttu-id="1b600-152">Por ejemplo, si dos vínculos tienen \\ \\ \\ el servidor share1 como destino, la prioridad de \\ \\ servidor \\ share1 se establece por separado para ambos vínculos.</span><span class="sxs-lookup"><span data-stu-id="1b600-152">For example, if two links have \\\\server\\share1 as a target, the priority of \\\\server\\share1 is set separately for both links.</span></span>

<span data-ttu-id="1b600-153">La prioridad predeterminada para todos los vínculos es la prioridad normal del sitio con un rango de 0.</span><span class="sxs-lookup"><span data-stu-id="1b600-153">The default priority for all links is the site-cost normal priority with a rank of 0.</span></span> <span data-ttu-id="1b600-154">La prioridad de destino no afecta al orden de las referencias a menos que se use, y todos los vínculos existentes se ordenan a medida que se reciben.</span><span class="sxs-lookup"><span data-stu-id="1b600-154">Target priority does not affect the ordering of referrals unless it is used, and all existing links are ordered as they are received.</span></span>

<span data-ttu-id="1b600-155">La respuesta de referencia de un servidor DFS se compone de conjuntos de destino ordenados tal y como se indicó anteriormente, con cada conjunto de destino no global que contiene destinos del mismo costo de sitio, clase de prioridad y rango de prioridad.</span><span class="sxs-lookup"><span data-stu-id="1b600-155">The referral response from a DFS server consists of target sets ordered as indicated above, with each non-global target set containing targets of the same site cost, priority class, and priority rank.</span></span> <span data-ttu-id="1b600-156">Los destinos dentro de cada conjunto se ordenan aleatoriamente.</span><span class="sxs-lookup"><span data-stu-id="1b600-156">Targets within each set are ordered randomly.</span></span> <span data-ttu-id="1b600-157">Los clientes DFS que reciben la referencia se inician con el primer destino del primer conjunto y continúan a través de la lista hasta que se encuentra un destino disponible para un vínculo o una raíz DFS determinados.</span><span class="sxs-lookup"><span data-stu-id="1b600-157">DFS clients that receive the referral start with the first target of the first set, and continue through the list until an available target for a given DFS root or link is found.</span></span>

<span data-ttu-id="1b600-158">Para la implementación de API específica de esta característica, consulte los temas de referencia siguientes:</span><span class="sxs-lookup"><span data-stu-id="1b600-158">For the specific API implementation of this feature, please see the following reference topics:</span></span>

<span data-ttu-id="1b600-159">[**DFS_INFO_6**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_6) 
 [**DFS_INFO_104**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_104) 
 [**DFS_INFO_106**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_106) 
 [**DFS_TARGET_PRIORITY**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_target_priority) 
 [**DFS_TARGET_PRIORITY_CLASS**](/windows/win32/api/lmdfs/ne-lmdfs-dfs_target_priority_class~r1)</span><span class="sxs-lookup"><span data-stu-id="1b600-159">[**DFS_INFO_6**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_6)
[**DFS_INFO_104**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_104)
[**DFS_INFO_106**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_info_106)
[**DFS_TARGET_PRIORITY**](/windows/desktop/api/lmdfs/ns-lmdfs-dfs_target_priority)
[**DFS_TARGET_PRIORITY_CLASS**](/windows/win32/api/lmdfs/ne-lmdfs-dfs_target_priority_class~r1)</span></span>
