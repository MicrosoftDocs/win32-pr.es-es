---
title: Cómo compilar ejemplos
description: Para compilar un ejemplo COM, el entorno del equipo debe estar configurado para compilar aplicaciones de Microsoft Win32 C++.
ms.assetid: c62b8b4d-a9d2-4587-8bb6-7b2c30d1c00d
keywords:
- Cómo compilar ejemplos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 593d3465d3ebcc32a6768dd8b2dffe1f0a653d07
ms.sourcegitcommit: c2a1c4314550ea9bd202d28adfcc7bfe6180932f
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/11/2020
ms.locfileid: "105665777"
---
# <a name="how-to-build-samples"></a><span data-ttu-id="3be15-104">Cómo compilar ejemplos</span><span class="sxs-lookup"><span data-stu-id="3be15-104">How to Build Samples</span></span>

<span data-ttu-id="3be15-105">Para compilar un ejemplo COM, el entorno del equipo debe estar configurado para compilar aplicaciones de Microsoft Win32 C++.</span><span class="sxs-lookup"><span data-stu-id="3be15-105">To build a COM sample, the computer environment must be set up to build Microsoft Win32 C++ applications.</span></span>

## <a name="preparing-a-computer-to-create-com-samples"></a><span data-ttu-id="3be15-106">Preparar un equipo para crear ejemplos de COM</span><span class="sxs-lookup"><span data-stu-id="3be15-106">Preparing a Computer to Create COM Samples</span></span>

<span data-ttu-id="3be15-107">El entorno del equipo debe configurarse con un compilador de C++ de 32 bits, un vinculador y un compilador de recursos que sean compatibles con Microsoft Visual C++ 4. x o posterior y un Windows SDK instalado correctamente.</span><span class="sxs-lookup"><span data-stu-id="3be15-107">The computer environment must be set up with a properly installed 32-bit C++ compiler, linker, and resource compiler that are compatible with Microsoft Visual C++ 4.x or later, and a properly installed Windows SDK.</span></span> <span data-ttu-id="3be15-108">Es mejor instalar el Windows SDK en último lugar.</span><span class="sxs-lookup"><span data-stu-id="3be15-108">It is best to install the Windows SDK last.</span></span> <span data-ttu-id="3be15-109">El Windows SDK proporciona los archivos de biblioteca. h include y. lib necesarios para la funcionalidad de COM codificada en los ejemplos.</span><span class="sxs-lookup"><span data-stu-id="3be15-109">The Windows SDK provides .h include and .lib library files required for the COM functionality coded in the samples.</span></span>

<span data-ttu-id="3be15-110">Para ejecutar correctamente los ejemplos Remclien, Freserve y Freclien, es necesario disponer de instalaciones del sistema que estén disponibles en los sistemas operativos Windows: Windows Server 2003, Windows XP, Windows 2000 o Windows NT 4,0.</span><span class="sxs-lookup"><span data-stu-id="3be15-110">To successfully run the Remclien, Freserve, and Freclien samples requires system facilities that are available in the Windows operating systems: Windows Server 2003, Windows XP, Windows 2000, or Windows NT 4.0.</span></span> <span data-ttu-id="3be15-111">Los ejemplos de Remclien, Freserve y Freclien se compilarán, pero no se ejecutarán en los sistemas operativos Windows me, Windows 98 o Windows 95, a menos que COM distribuido (DCOM) y COM de subprocesamiento libre formen parte del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="3be15-111">The Remclien, Freserve, and Freclien samples will build but will not run on the Windows Me, Windows 98, or Windows 95 operating systems unless Distributed COM (DCOM) and free threaded COM are part of the operating system.</span></span> <span data-ttu-id="3be15-112">Esta compatibilidad está disponible para los sistemas operativos Windows me, Windows 98 y Windows 95 en el complemento DCOM95.</span><span class="sxs-lookup"><span data-stu-id="3be15-112">This support is available for the Windows Me, Windows 98, and Windows 95 operating systems in the DCOM95 add on.</span></span> <span data-ttu-id="3be15-113">Actualmente, se puede obtener DCOM95 mediante la [descarga de Microsoft](https://www.microsoft.com/download/details.aspx?id=31661).</span><span class="sxs-lookup"><span data-stu-id="3be15-113">DCOM95 can currently be obtained by [download from Microsoft](https://www.microsoft.com/download/details.aspx?id=31661).</span></span>

<span data-ttu-id="3be15-114">Cada directorio de ejemplo tiene los archivos de código fuente necesarios para compilar y ejecutar el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="3be15-114">Each sample directory has the necessary source files to build and run the sample.</span></span> <span data-ttu-id="3be15-115">El directorio de ejemplo principal tiene un archivo de Makeall.bat, que puede ejecutar desde el símbolo del sistema para realizar todos los ejemplos de código de la rama siguiente.</span><span class="sxs-lookup"><span data-stu-id="3be15-115">The parent sample directory has a Makeall.bat file, which you can run from the command prompt to make all the code samples in the branch below.</span></span> <span data-ttu-id="3be15-116">Para obtener más información, vea el archivo de Makeall.bat.</span><span class="sxs-lookup"><span data-stu-id="3be15-116">For more information, see the Makeall.bat file.</span></span> <span data-ttu-id="3be15-117">Si su entorno está configurado para compilar aplicaciones Win32 de C++, simplemente puede ejecutar Makeall.bat desde el directorio en el que reside para compilar todos los ejemplos de código de la rama siguiente.</span><span class="sxs-lookup"><span data-stu-id="3be15-117">If your environment is set up to build Win32 C++ applications, you can simply run Makeall.bat from the directory where it resides to build all the code samples in the branch below.</span></span> <span data-ttu-id="3be15-118">Makeall garantiza el orden correcto de la compilación para que se satisfagan todas las dependencias de ejemplo de código.</span><span class="sxs-lookup"><span data-stu-id="3be15-118">Makeall ensures the correct order to the build so that all the code sample dependencies are satisfied.</span></span>

<span data-ttu-id="3be15-119">El directorio principal también tiene un archivo make que compila todos los ejemplos de código del tutorial usando opciones similares a las admitidas por Makeall.bat.</span><span class="sxs-lookup"><span data-stu-id="3be15-119">The main directory also has a makefile that builds all the tutorial code samples using options similar to those supported by Makeall.bat.</span></span> <span data-ttu-id="3be15-120">Para obtener más información, vea este archivo make.</span><span class="sxs-lookup"><span data-stu-id="3be15-120">For more information, see this makefile.</span></span> <span data-ttu-id="3be15-121">Este archivo make supone que la rama completa de ejemplos de código se instala como parte de la Windows SDK.</span><span class="sxs-lookup"><span data-stu-id="3be15-121">This makefile assumes that the entire code samples branch is installed as part of the Windows SDK.</span></span> <span data-ttu-id="3be15-122">Actualmente, esta ubicación tiene una ruta de acceso similar a *d: \\ MSSDK \\ Samples \\ com \\ TUTSAMP*, donde D: representa la unidad de instalación.</span><span class="sxs-lookup"><span data-stu-id="3be15-122">Currently this location has a path similar to *D:\\MSSDK\\SAMPLES\\COM\\TUTSAMP*, where D: represents the installation drive.</span></span> <span data-ttu-id="3be15-123">Si ha extraído la rama de ejemplo de código del tutorial (por ejemplo, el directorio COM COM y sus subdirectorios) en otra ubicación fuera del Windows SDK (o si obtuvo el conjunto de ejemplo como una descarga independiente del sitio web de Microsoft), use Makeall.bat para compilar todos los ejemplos de la rama.</span><span class="sxs-lookup"><span data-stu-id="3be15-123">If you have extracted the tutorial code sample branch (for example, the COM directory COM and its subdirectories) to another location outside the Windows SDK (or if you obtained the sample set as a separate download from the Microsoft website), then use Makeall.bat to compile all the samples in the branch.</span></span> <span data-ttu-id="3be15-124">En general, se recomienda Makeall.bat.</span><span class="sxs-lookup"><span data-stu-id="3be15-124">In general, Makeall.bat is recommended.</span></span> <span data-ttu-id="3be15-125">También se proporciona un archivo de Logmall.bat.</span><span class="sxs-lookup"><span data-stu-id="3be15-125">A Logmall.bat file is also provided.</span></span> <span data-ttu-id="3be15-126">Hace lo mismo que el archivo por lotes de Makeall, con la diferencia de que registra todos los resultados de compilación en Errorlog.txt de archivo en el directorio principal del tutorial.</span><span class="sxs-lookup"><span data-stu-id="3be15-126">It does the same as Makeall batch file except that it logs all compilation output to file Errorlog.txt in the main tutorial directory.</span></span>

<span data-ttu-id="3be15-127">También se proporcionan dos archivos por lotes, Regall.bat y Unregall.bat, en el directorio principal para registrar y anular el registro de todos los servidores COM en la serie de ejemplos de código del tutorial.</span><span class="sxs-lookup"><span data-stu-id="3be15-127">Two batch files, Regall.bat and Unregall.bat, are also provided in the main directory to register and unregister all COM servers in the tutorial code sample series.</span></span> <span data-ttu-id="3be15-128">Para registrar todos los servidores, ejecute Regall.bat archivo desde el directorio principal.</span><span class="sxs-lookup"><span data-stu-id="3be15-128">To register all servers, run Regall.bat file from the main directory.</span></span> <span data-ttu-id="3be15-129">Para anular el registro de todos los servidores, ejecute Unregall.bat de la misma manera.</span><span class="sxs-lookup"><span data-stu-id="3be15-129">To unregister all servers, run Unregall.bat in the same manner.</span></span> <span data-ttu-id="3be15-130">Estos archivos por lotes requieren una compilación anterior de los ejemplos de código registro, SERIALización, DLLSERVE, LICSERVE, LOCSERVE, APTSERVE, FRESERVE y conservar.</span><span class="sxs-lookup"><span data-stu-id="3be15-130">These batch files require a prior build of the REGISTER, MARSHAL, DLLSERVE, LICSERVE, LOCSERVE, APTSERVE, FRESERVE, and CONSERVE code samples.</span></span> <span data-ttu-id="3be15-131">Si realiza una compilación normal de los ejemplos de código, los archivos make del servidor registrarán automáticamente los servidores.</span><span class="sxs-lookup"><span data-stu-id="3be15-131">If you perform a normal build of the code samples, the server makefiles will automatically register the servers.</span></span> <span data-ttu-id="3be15-132">En este caso, no es necesario ejecutar el archivo por lotes Regall.</span><span class="sxs-lookup"><span data-stu-id="3be15-132">In this case, it is not necessary to run the Regall batch file.</span></span>

<span data-ttu-id="3be15-133">Ejecute el archivo por lotes Cleanall.bat para realizar un cleanAll exhaustivo de todos los ejemplos de tutoriales de COM.</span><span class="sxs-lookup"><span data-stu-id="3be15-133">Run the Cleanall.bat batch file to perform an exhaustive Cleanall of all the COM Tutorial Samples.</span></span>

> [!WARNING]
> <span data-ttu-id="3be15-134">Este archivo por lotes elimina todos los archivos de proyecto de Visual Studio y otros archivos de trabajo temporales creados por Visual C++ en los ejemplos.</span><span class="sxs-lookup"><span data-stu-id="3be15-134">This batch file deletes all Visual Studio project files and other temporary work files created by Visual C++ in the samples.</span></span> <span data-ttu-id="3be15-135">Todos los servidores COM compilados en los ejemplos de código del tutorial no se registran en el registro.</span><span class="sxs-lookup"><span data-stu-id="3be15-135">All of the COM servers built in the tutorial code samples are unregistered from the registry.</span></span> <span data-ttu-id="3be15-136">Se eliminan todos los archivos ejecutables exe y. dll.</span><span class="sxs-lookup"><span data-stu-id="3be15-136">All executable exe and .dll files are deleted.</span></span> <span data-ttu-id="3be15-137">Se eliminan todos los archivos de símbolos de depuración.</span><span class="sxs-lookup"><span data-stu-id="3be15-137">All debug symbol files are deleted.</span></span> <span data-ttu-id="3be15-138">También se eliminan los archivos generados en una variedad de entornos de compilación.</span><span class="sxs-lookup"><span data-stu-id="3be15-138">Files generated in a variety of build environments are also deleted.</span></span>

 

<span data-ttu-id="3be15-139">Ejecute "Makeall Clean" para realizar una limpieza más rápida, pero más modesta, de todos los ejemplos de código.</span><span class="sxs-lookup"><span data-stu-id="3be15-139">Run 'Makeall Clean' to perform a faster, but more modest, cleanup of all the code samples.</span></span> <span data-ttu-id="3be15-140">Esta operación de limpieza no intenta ser tan completa como la que realiza Cleanall.bat.</span><span class="sxs-lookup"><span data-stu-id="3be15-140">This cleaning operation does not attempt to be as comprehensive as that performed by Cleanall.bat.</span></span> <span data-ttu-id="3be15-141">Se eliminan los archivos. obj, pero se conservan los binarios de salida.</span><span class="sxs-lookup"><span data-stu-id="3be15-141">The .obj files are deleted, but the output binaries are retained.</span></span> <span data-ttu-id="3be15-142">No se anula el registro de los servidores COM del registro.</span><span class="sxs-lookup"><span data-stu-id="3be15-142">The COM servers are not unregistered from the registry.</span></span>

<span data-ttu-id="3be15-143">Esta serie de ejemplo se originó como parte integral del Windows SDK, por lo que el tutorial narrativa presupone un entorno con el Windows SDK instalado correctamente.</span><span class="sxs-lookup"><span data-stu-id="3be15-143">This sample series originated as an integral part of the Windows SDK, therefore the tutorial narrative assumes an environment with the Windows SDK properly installed.</span></span>

<span data-ttu-id="3be15-144">Sin embargo, las versiones de Microsoft Visual C++ versión 4,0 y posteriores también pueden proporcionar los archivos de biblioteca. h include y. lib necesarios para la compilación.</span><span class="sxs-lookup"><span data-stu-id="3be15-144">However, releases of Microsoft Visual C++ version 4.0 and later may also provide the .h include and .lib library files required for compilation.</span></span> <span data-ttu-id="3be15-145">En tales casos, puede que no sea necesario instalar el Windows SDK para compilar los ejemplos.</span><span class="sxs-lookup"><span data-stu-id="3be15-145">In such cases, installation of the Windows SDK may not be required to compile the samples.</span></span>

<span data-ttu-id="3be15-146">Para obtener más información y completar los detalles de la compilación de ejemplo, vea:</span><span class="sxs-lookup"><span data-stu-id="3be15-146">For more information and complete sample build details, see:</span></span>

[<span data-ttu-id="3be15-147">Configuración del entorno</span><span class="sxs-lookup"><span data-stu-id="3be15-147">Environment Setup</span></span>](environment-setup.md)

[<span data-ttu-id="3be15-148">Archivos make</span><span class="sxs-lookup"><span data-stu-id="3be15-148">Makefiles</span></span>](makefiles.md)

[<span data-ttu-id="3be15-149">Uso de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="3be15-149">Using Visual Studio</span></span>](using-visual-studio.md)

[<span data-ttu-id="3be15-150">Extraer los ejemplos de código</span><span class="sxs-lookup"><span data-stu-id="3be15-150">Extracting the Code Samples</span></span>](extracting-the-code-samples.md)

[<span data-ttu-id="3be15-151">Convenciones de estilo de codificación</span><span class="sxs-lookup"><span data-stu-id="3be15-151">Coding Style Conventions</span></span>](coding-style-conventions.md)

 

 




