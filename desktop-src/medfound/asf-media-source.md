---
description: Media Foundation proporciona el origen de medios ASF que una aplicación puede utilizar para representar un archivo ASF en el nivel de canalización de la arquitectura.
ms.assetid: a2d2b382-d666-4a37-a6a9-0b839fbfbec3
title: Origen de medios ASF
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 75dc682d48339ce4ff707e7859a6962b9f5cfd92
ms.sourcegitcommit: c16214e53680dc71d1c07111b51f72b82a4512d8
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/03/2021
ms.locfileid: "105707570"
---
# <a name="asf-media-source"></a><span data-ttu-id="d83ac-103">Origen de medios ASF</span><span class="sxs-lookup"><span data-stu-id="d83ac-103">ASF Media Source</span></span>

<span data-ttu-id="d83ac-104">Media Foundation proporciona el origen de medios ASF que una aplicación puede utilizar para representar un archivo ASF en el nivel de canalización de la arquitectura.</span><span class="sxs-lookup"><span data-stu-id="d83ac-104">Media Foundation provides the ASF media source that an application can use to represent an ASF file in the pipeline layer of the architecture.</span></span>

<span data-ttu-id="d83ac-105">Para reproducir un archivo ASF, una aplicación puede usar el origen de medios ASF para alimentar datos en una canalización de reproducción.</span><span class="sxs-lookup"><span data-stu-id="d83ac-105">In order to play an ASF file, an application can use the ASF media source to feed data into a playback pipeline.</span></span> <span data-ttu-id="d83ac-106">En un escenario de codificación, la aplicación puede usar el origen de medios ASF como origen para convertir en otro formato o para convertir un archivo de velocidad de bits superior en un archivo de velocidad de bits inferior sin cambiar los formatos.</span><span class="sxs-lookup"><span data-stu-id="d83ac-106">In an encoding scenario, application can use the ASF media source as the source to convert into another format or for converting a higher bit-rate file to a lower bit-rate file without changing formats.</span></span> <span data-ttu-id="d83ac-107">El origen de medios ASF debe usarse en la capa de canalización, es decir, una aplicación debe utilizar la sesión multimedia para controlar la operación.</span><span class="sxs-lookup"><span data-stu-id="d83ac-107">The ASF media source must be used in the pipeline layer, that is, an application must use the Media Session to control the operation.</span></span> <span data-ttu-id="d83ac-108">Este nivel de acceso permite a las aplicaciones obtener eventos mientras la sesión multimedia está en curso.</span><span class="sxs-lookup"><span data-stu-id="d83ac-108">This level of access allows the applications to get events while the Media Session is in progress.</span></span> <span data-ttu-id="d83ac-109">Para obtener acceso de nivel inferior al contenido ASF, una aplicación debe usar los componentes ASF de la capa WMContainer.</span><span class="sxs-lookup"><span data-stu-id="d83ac-109">To get lower-level access to the ASF content, an application must use the WMContainer Layer ASF components.</span></span>

<span data-ttu-id="d83ac-110">El origen de medios ASF implementa la interfaz [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) , que es la interfaz genérica para orígenes multimedia en Media Foundation.</span><span class="sxs-lookup"><span data-stu-id="d83ac-110">The ASF media source implements the [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) interface, which is the generic interface for media sources in Media Foundation.</span></span> <span data-ttu-id="d83ac-111">Al igual que cualquier otro origen multimedia, el origen de medios ASF proporciona un descriptor de presentación que describe principalmente el objeto de encabezado ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-111">Like any other media source, the ASF media source provides a presentation descriptor that primarily describes the ASF Header Object.</span></span> <span data-ttu-id="d83ac-112">Además, el origen de medios ASF proporciona descriptores de secuencia que representan cada secuencia en el contenido multimedia.</span><span class="sxs-lookup"><span data-stu-id="d83ac-112">In addition, the ASF media source provides stream descriptors that represent each stream in the media content.</span></span> <span data-ttu-id="d83ac-113">Para obtener más información, consulte [ASF File Structure](asf-file-structure.md).</span><span class="sxs-lookup"><span data-stu-id="d83ac-113">For more information, see [ASF File Structure](asf-file-structure.md).</span></span>

-   [<span data-ttu-id="d83ac-114">Crear el origen de medios ASF</span><span class="sxs-lookup"><span data-stu-id="d83ac-114">Creating the ASF Media Source</span></span>](#creating-the-asf-media-source)
-   [<span data-ttu-id="d83ac-115">Opciones de configuración para el origen de medios ASF</span><span class="sxs-lookup"><span data-stu-id="d83ac-115">Configuration Settings for the ASF Media Source</span></span>](#configuration-settings-for-the-asf-media-source)
-   [<span data-ttu-id="d83ac-116">Modelo de objetos de origen de medios ASF</span><span class="sxs-lookup"><span data-stu-id="d83ac-116">ASF Media Source Object Model</span></span>](#asf-media-source-object-model)
-   [<span data-ttu-id="d83ac-117">Servicios de origen de medios ASF</span><span class="sxs-lookup"><span data-stu-id="d83ac-117">ASF Media Source Services</span></span>](#asf-media-source-services)
    -   [<span data-ttu-id="d83ac-118">Conversión de código de tiempo</span><span class="sxs-lookup"><span data-stu-id="d83ac-118">Timecode Translation</span></span>](#timecode-translation)
-   [<span data-ttu-id="d83ac-119">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="d83ac-119">Related topics</span></span>](#related-topics)

## <a name="creating-the-asf-media-source"></a><span data-ttu-id="d83ac-120">Crear el origen de medios ASF</span><span class="sxs-lookup"><span data-stu-id="d83ac-120">Creating the ASF Media Source</span></span>

<span data-ttu-id="d83ac-121">Para crear el origen de medios ASF, la aplicación debe utilizar la [resolución de origen](source-resolver.md).</span><span class="sxs-lookup"><span data-stu-id="d83ac-121">To create the ASF media source, the application must use the [Source Resolver](source-resolver.md).</span></span> <span data-ttu-id="d83ac-122">Con el fin de crear el origen de medios ASF, la aplicación debe proporcionar el origen para el que la resolución de origen crea el origen de medios ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-122">In order to create the ASF media source, the application must provide the source for which the source resolver creates the ASF media source.</span></span> <span data-ttu-id="d83ac-123">La información de origen se debe proporcionar especificando la dirección URL del archivo de código fuente o el flujo de bytes que contiene el medio.</span><span class="sxs-lookup"><span data-stu-id="d83ac-123">The source information must be provided by either specifying the URL of the source file or the byte stream that contains the media.</span></span> <span data-ttu-id="d83ac-124">Si la aplicación decide crear el origen de medios ASF especificando la dirección URL, debe llamar a [**IMFSourceResolver:: CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) para una operación sincrónica o **IMFSourceResolver:: Begin... EndCreateObjectFromURL** para la operación asincrónica.</span><span class="sxs-lookup"><span data-stu-id="d83ac-124">If the application chooses to create the ASF media source by specifying the URL, it must call either [**IMFSourceResolver::CreateObjectFromURL**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfromurl) for synchronous operation or **IMFSourceResolver::Begin…EndCreateObjectFromURL** for asynchronous operation.</span></span> <span data-ttu-id="d83ac-125">El proceso para crear el origen de medios a partir de una secuencia de bytes es similar.</span><span class="sxs-lookup"><span data-stu-id="d83ac-125">The process for creating the media source from a byte stream is similar.</span></span> <span data-ttu-id="d83ac-126">La aplicación debe llamar a [**IMFSourceResolver:: CreateObjectFromByteStream**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfrombytestream) para una operación sincrónica o **IMFSourceResolver:: Begin... EndCreateObjectFromBytestream** para la operación asincrónica.</span><span class="sxs-lookup"><span data-stu-id="d83ac-126">The application must call either [**IMFSourceResolver::CreateObjectFromByteStream**](/windows/desktop/api/mfidl/nf-mfidl-imfsourceresolver-createobjectfrombytestream) for synchronous operation or **IMFSourceResolver::Begin…EndCreateObjectFromBytestream** for asynchronous operation.</span></span> <span data-ttu-id="d83ac-127">Estas llamadas deben especificar el \_ \_ MEDIASOURCE de resolución MF en el parámetro *dwFlags* .</span><span class="sxs-lookup"><span data-stu-id="d83ac-127">These calls must specify MF\_RESOLUTION\_MEDIASOURCE in *dwFlags* parameter.</span></span> <span data-ttu-id="d83ac-128">Para obtener más información sobre el uso de esta marca, vea usar el solucionador de origen.</span><span class="sxs-lookup"><span data-stu-id="d83ac-128">For more information about using this flag, see Using the Source Resolver.</span></span>

<span data-ttu-id="d83ac-129">Si la aplicación especifica una dirección URL, para un archivo local, la cadena de dirección URL puede contener la ruta de acceso del archivo multimedia o tener como prefijo el esquema "File:".</span><span class="sxs-lookup"><span data-stu-id="d83ac-129">If the application specifies a URL, for a local file, the URL string can contain the path of the media file or can be prefixed with the “file: “scheme.</span></span> <span data-ttu-id="d83ac-130">La extensión de nombre de archivo debe ser ". ASF", ". WM", L ". WMA" o ". WMV".</span><span class="sxs-lookup"><span data-stu-id="d83ac-130">The file name extension must be ".asf", ".wm", L".wma", or ".wmv".</span></span> <span data-ttu-id="d83ac-131">En el caso de un archivo ASF en la red, la resolución de origen crea el [origen de red](network-source-features.md), que usa el origen de medios ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-131">For an ASF file on the network, the source resolver creates the [Network Source](network-source-features.md), which uses the ASF media source.</span></span>

<span data-ttu-id="d83ac-132">Durante el proceso de creación de objetos, el solucionador de origen busca la lista de controladores de esquema y los controladores de secuencias de bytes en el registro del sistema y carga el controlador coincidente más cercano que puede analizar el contenido multimedia y también crear el objeto de origen multimedia bajo.</span><span class="sxs-lookup"><span data-stu-id="d83ac-132">During the object creation process, the source resolver looks up the list of scheme handlers and the byte stream handlers in the system registry and loads the closest matching handler that can parse the media content and also create the media source object underneath.</span></span> <span data-ttu-id="d83ac-133">Independientemente del método utilizado para crear el origen de medios (dirección URL y secuencia de bytes), la resolución de origen crea una secuencia de bytes y lee el contenido de los medios de origen en el flujo de bytes.</span><span class="sxs-lookup"><span data-stu-id="d83ac-133">Irrespective of the method used to create the media source (URL and byte stream), the source resolver creates a byte stream and reads the contents of source media into the byte stream.</span></span> <span data-ttu-id="d83ac-134">Para obtener más información, vea [controladores de esquema y controladores de Byte-Stream](scheme-handlers-and-byte-stream-handlers.md).</span><span class="sxs-lookup"><span data-stu-id="d83ac-134">For more information, see [Scheme Handlers and Byte-Stream Handlers](scheme-handlers-and-byte-stream-handlers.md).</span></span>

<span data-ttu-id="d83ac-135">Para obtener un ejemplo de código sobre cómo crear un origen de medios, vea [usar el solucionador de origen](using-the-source-resolver.md).</span><span class="sxs-lookup"><span data-stu-id="d83ac-135">For code example about how to create a media source, see [Using the Source Resolver](using-the-source-resolver.md).</span></span>

## <a name="configuration-settings-for-the-asf-media-source"></a><span data-ttu-id="d83ac-136">Opciones de configuración para el origen de medios ASF</span><span class="sxs-lookup"><span data-stu-id="d83ac-136">Configuration Settings for the ASF Media Source</span></span>

<span data-ttu-id="d83ac-137">La resolución de origen consulta las capacidades de la secuencia de bytes subyacente y determina las operaciones que se permiten en el origen multimedia recién creado.</span><span class="sxs-lookup"><span data-stu-id="d83ac-137">The source resolver queries for the capabilities of the underlying byte stream and determines the operations are allowed on the newly created media source.</span></span> <span data-ttu-id="d83ac-138">Una de estas capacidades es la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="d83ac-138">One of such capabilities is seeking.</span></span> <span data-ttu-id="d83ac-139">Si se permite una operación de búsqueda, la aplicación puede especificar el modo de búsqueda que el origen multimedia utiliza mientras busca en un punto determinado de la presentación.</span><span class="sxs-lookup"><span data-stu-id="d83ac-139">If a seek operation is allowed, the application can specify the seeking mode that the media source uses while seeking to a particular point in the presentation.</span></span>

<span data-ttu-id="d83ac-140">Una aplicación puede establecer el modo de búsqueda para el origen de medios que se va a usar durante la creación del objeto.</span><span class="sxs-lookup"><span data-stu-id="d83ac-140">An application can set the seek mode, for the media source to use, during object creation.</span></span> <span data-ttu-id="d83ac-141">Una vez creado el origen de medios ASF con el modo de búsqueda especificado, no se puede modificar en el origen de medios ni cambiar dinámicamente durante una presentación.</span><span class="sxs-lookup"><span data-stu-id="d83ac-141">After the ASF media source is created with the specified seek mode, it cannot be modified on the media source or dynamically changed during a presentation.</span></span> <span data-ttu-id="d83ac-142">Las preferencias de búsqueda se especifican como propiedades en la llamada de la aplicación a los métodos de resolución de origen pertinentes que se usan para crear el origen de medios.</span><span class="sxs-lookup"><span data-stu-id="d83ac-142">Seeking preferences are specified as properties in the application’s call to the relevant source resolver methods that are used to create the media source.</span></span> <span data-ttu-id="d83ac-143">Este conjunto de propiedades se establece en un almacén de propiedades y se pasa al parámetro *pProps* .</span><span class="sxs-lookup"><span data-stu-id="d83ac-143">These set of properties are set in a property store and passed to the *pProps* parameter.</span></span> <span data-ttu-id="d83ac-144">Si no se pasan estas propiedades, el origen multimedia funciona con la configuración predeterminada.</span><span class="sxs-lookup"><span data-stu-id="d83ac-144">If these properties are not passed, the media source functions with the default settings.</span></span> <span data-ttu-id="d83ac-145">Para obtener más información acerca de cómo establecer estas propiedades, consulte [configuración de un origen de medios](configuring-a-media-source.md).</span><span class="sxs-lookup"><span data-stu-id="d83ac-145">For more information about setting these properties, see [Configuring a Media Source](configuring-a-media-source.md).</span></span>

<span data-ttu-id="d83ac-146">Si se permite la búsqueda, el origen de medios ASF admite los siguientes modos de búsqueda:</span><span class="sxs-lookup"><span data-stu-id="d83ac-146">If seeking is allowed, the ASF media source supports the following seek modes:</span></span>

-   <span data-ttu-id="d83ac-147">Búsqueda exacta: en este modo, el origen de medios ASF se basa en el objeto de índice ASF del archivo ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-147">Exact seeking: In this mode, the ASF media source relies on the ASF Index Object of the ASF file.</span></span> <span data-ttu-id="d83ac-148">Si el archivo no tiene el objeto de índice, la búsqueda exacta se deshabilita y se usa uno de los otros modos en función de las propiedades especificadas por la aplicación que se establecen en el origen del medio.</span><span class="sxs-lookup"><span data-stu-id="d83ac-148">If the file does not have the Index Object, exact seeking is disabled and one of the other modes are used depending on the application-specified properties that are set on the media source.</span></span>
-   <span data-ttu-id="d83ac-149">Búsqueda aproximada: este modo lo solicita la aplicación pasando [**MFPKEY \_ ASFMediaSource \_ ApproxSeek**](mfpkey-asfmediasource-approxseek-property.md) en el almacén de propiedades a los métodos de resolución de origen pertinentes.</span><span class="sxs-lookup"><span data-stu-id="d83ac-149">Approximate seeking: This mode is requested by the application by passing [**MFPKEY\_ASFMediaSource\_ApproxSeek**](mfpkey-asfmediasource-approxseek-property.md) in the property store to the relevant source resolver methods.</span></span> <span data-ttu-id="d83ac-150">Sin embargo, la búsqueda aproximada solo se utiliza si la secuencia de bytes no admite búsquedas basadas en el tiempo.</span><span class="sxs-lookup"><span data-stu-id="d83ac-150">However, approximate seeking is only used if the byte stream does not support time-based seeking.</span></span> <span data-ttu-id="d83ac-151">En este modo, el origen de medios determina una hora de inicio que está relativamente más cercana al tiempo de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="d83ac-151">In this mode, the media source determine a start time that is relatively closer to the seek time.</span></span> <span data-ttu-id="d83ac-152">Si el archivo ASF contiene un objeto de índice ASF, se usa para calcular la hora de inicio.</span><span class="sxs-lookup"><span data-stu-id="d83ac-152">If the ASF file contains an ASF Index Object, it is used to calculate the start time.</span></span> <span data-ttu-id="d83ac-153">La búsqueda aproximada es menos precisa pero más rápida que la búsqueda exacta porque el tiempo necesario para representar la primera muestra en la hora de inicio predeterminada es más rápido.</span><span class="sxs-lookup"><span data-stu-id="d83ac-153">Approximate seeking is less accurate but faster than exact seeking because the time taken render the first sample at the predetermined start time is faster.</span></span>
-   <span data-ttu-id="d83ac-154">Búsqueda iterativa: para establecer este modo, la aplicación debe establecer la [propiedad \_ \_ IterativeSeekIfNoIndex de ASFMediaSource de MFPKEY](mfpkey-asfmediasource-iterativeseekifnoindex.md) .</span><span class="sxs-lookup"><span data-stu-id="d83ac-154">Iterative seeking: To set this mode, the application must set the [MFPKEY\_ASFMediaSource\_IterativeSeekIfNoIndex](mfpkey-asfmediasource-iterativeseekifnoindex.md) property.</span></span> <span data-ttu-id="d83ac-155">La búsqueda iterativa es un algoritmo para encontrar una posición en un archivo ASF que no contiene ningún objeto de índice ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-155">Iterative seeking is an algorithm to find a position in an ASF file that contains no ASF Index Object.</span></span> <span data-ttu-id="d83ac-156">En este modo, el origen multimedia determina una estimación aproximada del punto de búsqueda mediante la lectura del desplazamiento del flujo de bytes.</span><span class="sxs-lookup"><span data-stu-id="d83ac-156">In this mode, the media source determins a rough estimate of the seek point by reading the byte stream offset.</span></span> <span data-ttu-id="d83ac-157">Usa una serie de aproximaciones, en función de la velocidad de bits media, para que se acerquen progresivamente al tiempo de búsqueda del destino.</span><span class="sxs-lookup"><span data-stu-id="d83ac-157">It uses a series of approximations, based on the average bit rate, to get progressively closer to the target seek time.</span></span> <span data-ttu-id="d83ac-158">(El algoritmo es similar a una búsqueda binaria). La búsqueda iterativa puede tardar más que la búsqueda mediante el uso del objeto de índice, por lo que está deshabilitada de forma predeterminada.</span><span class="sxs-lookup"><span data-stu-id="d83ac-158">(The algorithm is similar to a binary search.) Iterative seeking can take longer than seeking by using the Index Object, so it is disabled by default.</span></span> <span data-ttu-id="d83ac-159">Si establece esta propiedad, use las siguientes propiedades para establecer los parámetros de búsqueda: [MFPKEY \_ ASFMediaSource \_ IterativeSeek \_ Max \_ Count](mfpkey-asfmediasource-iterativeseek-max-count.md)[MFPKEY \_ ASFMediaSource \_ IterativeSeek \_ Tolerance \_ en \_ milisegundos](mfpkey-asfmediasource-iterativeseek-tolerance-in-millisecond.md).</span><span class="sxs-lookup"><span data-stu-id="d83ac-159">If you set this property, use the following properties to set the search parameters: [MFPKEY\_ASFMediaSource\_IterativeSeek\_Max\_Count](mfpkey-asfmediasource-iterativeseek-max-count.md)[MFPKEY\_ASFMediaSource\_IterativeSeek\_Tolerance\_In\_MilliSecond](mfpkey-asfmediasource-iterativeseek-tolerance-in-millisecond.md).</span></span> <span data-ttu-id="d83ac-160">Estas propiedades establecen el número máximo de iteraciones y la tolerancia, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="d83ac-160">These properties set the maximum number of iterations and the tolerance, respectively.</span></span> <span data-ttu-id="d83ac-161">El algoritmo se detiene cuando alcanza el número máximo de iteraciones o cuando encuentra un paquete cuya distancia desde el tiempo de búsqueda está dentro de la tolerancia especificada.</span><span class="sxs-lookup"><span data-stu-id="d83ac-161">The algorithm halts when it reaches the maximum number of iterations, or when it finds a packet whose distance from the seek time is within the specified tolerance.</span></span>

<span data-ttu-id="d83ac-162">En pocas palabras, la aplicación tiene la opción de elegir búsqueda aproximada o iterativa cuando el archivo ASF no contiene un objeto de índice ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-162">In a nutshell, the application has the option of choosing approximate or iterative seeking when the ASF file does not contain an ASF Index Object.</span></span>

## <a name="asf-media-source-object-model"></a><span data-ttu-id="d83ac-163">Modelo de objetos de origen de medios ASF</span><span class="sxs-lookup"><span data-stu-id="d83ac-163">ASF Media Source Object Model</span></span>

<span data-ttu-id="d83ac-164">El origen de medios ASF implementa la interfaz [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) y expone las siguientes interfaces.</span><span class="sxs-lookup"><span data-stu-id="d83ac-164">The ASF media source implements the [**IMFMediaSource**](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource) interface and exposes the following interfaces.</span></span> <span data-ttu-id="d83ac-165">Una aplicación puede obtener una referencia a estas interfaces mediante una llamada a **IMFMediaSource:: QueryInterface** en el origen multimedia ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-165">An application can get a reference to these interfaces by calling **IMFMediaSource::QueryInterface** on the ASF media source.</span></span>



| <span data-ttu-id="d83ac-166">Interfaz</span><span class="sxs-lookup"><span data-stu-id="d83ac-166">Interface</span></span>                                                | <span data-ttu-id="d83ac-167">Descripción</span><span class="sxs-lookup"><span data-stu-id="d83ac-167">Description</span></span>                                                                                                                                        |
|----------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------|
| [<span data-ttu-id="d83ac-168">**IMFMediaSource**</span><span class="sxs-lookup"><span data-stu-id="d83ac-168">**IMFMediaSource**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmediasource)                 | <span data-ttu-id="d83ac-169">Se requiere para todos los orígenes multimedia.</span><span class="sxs-lookup"><span data-stu-id="d83ac-169">Required for all media sources.</span></span>                                                                                                                    |
| [<span data-ttu-id="d83ac-170">**IMFMediaEventGenerator**</span><span class="sxs-lookup"><span data-stu-id="d83ac-170">**IMFMediaEventGenerator**</span></span>](/windows/desktop/api/mfobjects/nn-mfobjects-imfmediaeventgenerator) | <span data-ttu-id="d83ac-171">Se requiere para todos los orígenes multimedia.</span><span class="sxs-lookup"><span data-stu-id="d83ac-171">Required for all media sources.</span></span> <span data-ttu-id="d83ac-172">Permite a las aplicaciones obtener eventos del origen multimedia a través de la sesión multimedia.</span><span class="sxs-lookup"><span data-stu-id="d83ac-172">Allows applications to get events from the media source through the Media Session.</span></span>                                 |
| [<span data-ttu-id="d83ac-173">**IMFGetService**</span><span class="sxs-lookup"><span data-stu-id="d83ac-173">**IMFGetService**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfgetservice)                   | <span data-ttu-id="d83ac-174">Consulta el origen de medios para la interfaz de servicio especificada.</span><span class="sxs-lookup"><span data-stu-id="d83ac-174">Queries the media source for the specified service interface.</span></span>                                                                                      |
| [<span data-ttu-id="d83ac-175">**IPropertyStore**</span><span class="sxs-lookup"><span data-stu-id="d83ac-175">**IPropertyStore**</span></span>](/windows/win32/api/propsys/nn-propsys-ipropertystore)               | <span data-ttu-id="d83ac-176">Establece y obtiene propiedades en el origen de los medios.</span><span class="sxs-lookup"><span data-stu-id="d83ac-176">Sets and gets properties on the media source.</span></span> <span data-ttu-id="d83ac-177">Cada propiedad contiene un nombre descriptivo y un valor.</span><span class="sxs-lookup"><span data-stu-id="d83ac-177">Each property contains a descriptive name and a value.</span></span>                                               |
| [<span data-ttu-id="d83ac-178">**IMFMetadata**</span><span class="sxs-lookup"><span data-stu-id="d83ac-178">**IMFMetadata**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmetadata)                       | <span data-ttu-id="d83ac-179">Describe los metadatos del archivo ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-179">Describes the metadata for the ASF file.</span></span>                                                                                                           |
| [<span data-ttu-id="d83ac-180">**IMFMetadataProvider**</span><span class="sxs-lookup"><span data-stu-id="d83ac-180">**IMFMetadataProvider**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider)       | <span data-ttu-id="d83ac-181">Recupera una colección de metadatos, ya sea para una presentación completa o para un flujo en la presentación.</span><span class="sxs-lookup"><span data-stu-id="d83ac-181">Retrieves a collection of metadata, either for an entire presentation, or for one stream in the presentation.</span></span>                                      |
| [<span data-ttu-id="d83ac-182">**IMFRateSupport**</span><span class="sxs-lookup"><span data-stu-id="d83ac-182">**IMFRateSupport**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport)                 | <span data-ttu-id="d83ac-183">Consulta el intervalo de velocidades de reproducción que se admiten, incluida la reproducción inversa.</span><span class="sxs-lookup"><span data-stu-id="d83ac-183">Queries the range of playback rates that are supported, including reverse playback.</span></span>                                                                |
| [<span data-ttu-id="d83ac-184">**IMFRateControl**</span><span class="sxs-lookup"><span data-stu-id="d83ac-184">**IMFRateControl**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol)                 | <span data-ttu-id="d83ac-185">Obtiene o establece la velocidad de reproducción.</span><span class="sxs-lookup"><span data-stu-id="d83ac-185">Gets or sets the playback rate.</span></span>                                                                                                                    |
| [<span data-ttu-id="d83ac-186">**IMFTrustedInput**</span><span class="sxs-lookup"><span data-stu-id="d83ac-186">**IMFTrustedInput**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imftrustedinput)               | <span data-ttu-id="d83ac-187">Obtiene la ITA para cada una de las secuencias ASF contenidas en el origen.</span><span class="sxs-lookup"><span data-stu-id="d83ac-187">Gets the ITA for each of the ASF streams contained in the source.</span></span>                                                                                  |
| [<span data-ttu-id="d83ac-188">**IMFPMPClient**</span><span class="sxs-lookup"><span data-stu-id="d83ac-188">**IMFPMPClient**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imfpmpclient)                     | <span data-ttu-id="d83ac-189">Permite a un origen de medios recibir un puntero a la interfaz [**IMFPMPHost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) , que se usa para crear objetos en el proceso de PMP.</span><span class="sxs-lookup"><span data-stu-id="d83ac-189">Enables a media source to receive a pointer to the [**IMFPMPHost**](/windows/desktop/api/mfidl/nn-mfidl-imfpmphost) interface, which is used to create objects in the PMP process.</span></span> |
| [<span data-ttu-id="d83ac-190">**IMFTimecodeTranslate**</span><span class="sxs-lookup"><span data-stu-id="d83ac-190">**IMFTimecodeTranslate**</span></span>](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate)     | <span data-ttu-id="d83ac-191">Convierte entre la sociedad de códigos de tiempo de imágenes de movimiento y de ingeniería de televisión (SMPTE) y las unidades de tiempo de 100-nanosegundos.</span><span class="sxs-lookup"><span data-stu-id="d83ac-191">Converts between Society of Motion Picture and Television Engineers (SMPTE) time codes and 100-nanosecond time units.</span></span>                              |



 

## <a name="asf-media-source-services"></a><span data-ttu-id="d83ac-192">Servicios de origen de medios ASF</span><span class="sxs-lookup"><span data-stu-id="d83ac-192">ASF Media Source Services</span></span>

<span data-ttu-id="d83ac-193">El origen de medios ASF proporciona varios servicios que se limitan al ámbito del archivo ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-193">The ASF media source provides various services that are scoped for ASF file.</span></span> <span data-ttu-id="d83ac-194">Para obtener un puntero a un servicio determinado, la aplicación debe usar uno de los siguientes identificadores de servicio en su llamada a [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice).</span><span class="sxs-lookup"><span data-stu-id="d83ac-194">To get a pointer to a particular service, the application must use one of the following service identifiers in its call to [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice).</span></span> <span data-ttu-id="d83ac-195">Para obtener más información, consulte [interfaces de servicio](service-interfaces.md).</span><span class="sxs-lookup"><span data-stu-id="d83ac-195">For information, see [Service Interfaces](service-interfaces.md).</span></span>



| <span data-ttu-id="d83ac-196">Identificador de servicio</span><span class="sxs-lookup"><span data-stu-id="d83ac-196">Service Identifier</span></span>               | <span data-ttu-id="d83ac-197">Descripción</span><span class="sxs-lookup"><span data-stu-id="d83ac-197">Description</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d83ac-198">\_servicio de \_ control de tasa MF \_</span><span class="sxs-lookup"><span data-stu-id="d83ac-198">MF\_RATE\_CONTROL\_SERVICE</span></span>       | <span data-ttu-id="d83ac-199">Con este identificador, una aplicación puede obtener un puntero a las interfaces [**IMFRateSupport**](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) o [**IMFRateControl**](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol) .</span><span class="sxs-lookup"><span data-stu-id="d83ac-199">By using this identifier, an application can get a pointer to either [**IMFRateSupport**](/windows/desktop/api/mfidl/nn-mfidl-imfratesupport) or [**IMFRateControl**](/windows/desktop/api/mfidl/nn-mfidl-imfratecontrol) interfaces.</span></span> <span data-ttu-id="d83ac-200">Mediante el uso del objeto de compatibilidad de tarifas implementado por el origen de medios, la aplicación puede comprobar si la tasa determinada es compatible con el archivo multimedia ASF subyacente y la velocidad más lenta.</span><span class="sxs-lookup"><span data-stu-id="d83ac-200">By using the rate support object implemented by the media source, the application can check if a particular rate is supported by the underlying ASF media file also get the fastest and the slowest rate.</span></span> <span data-ttu-id="d83ac-201">Mediante el uso del objeto de control de velocidad, la aplicación puede obtener y establecer la velocidad de reproducción.</span><span class="sxs-lookup"><span data-stu-id="d83ac-201">By using the rate control object the application can get and set the playback rate.</span></span> <span data-ttu-id="d83ac-202">Si la aplicación especifica una tasa determinada para la reproducción, el origen de medios ASF comprueba primero si la tasa solicitada está dentro de los límites de frecuencia (determinada por las tarifas más rápidas y lentas) y, a continuación, establece la velocidad.</span><span class="sxs-lookup"><span data-stu-id="d83ac-202">If the application specifies a particular rate for playback, the ASF media source first checks if the requested rate is within the rate limits (determined by fasted and slowest rates) and then sets the rate.</span></span> <span data-ttu-id="d83ac-203">Esto no comprueba las condiciones variables, ya que la velocidad de bits podría cambiar en cualquier momento según el ancho de banda de red.</span><span class="sxs-lookup"><span data-stu-id="d83ac-203">This does not check for variable conditions as the bitrate might change any moment depending on the network bandwidth.</span></span> <span data-ttu-id="d83ac-204">Para obtener más información, [evalúe el control](rate-control.md).</span><span class="sxs-lookup"><span data-stu-id="d83ac-204">For more information, [Rate Control](rate-control.md).</span></span> |
| <span data-ttu-id="d83ac-205">\_servicio de proveedor de metadatos MF \_ \_</span><span class="sxs-lookup"><span data-stu-id="d83ac-205">MF\_METADATA\_PROVIDER\_SERVICE</span></span>  | <span data-ttu-id="d83ac-206">Con este identificador, la aplicación puede obtener un puntero a la interfaz [**IMFMetadataProvider**](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider) del origen multimedia ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-206">By using this identifier, the application can get a pointer to the [**IMFMetadataProvider**](/windows/desktop/api/mfidl/nn-mfidl-imfmetadataprovider) interface of the ASF media source.</span></span> <span data-ttu-id="d83ac-207">Esta interfaz proporciona acceso a información sobre el archivo ASF específicamente los objetos de encabezado ASF y las secuencias contenidas en el contenido multimedia.</span><span class="sxs-lookup"><span data-stu-id="d83ac-207">This interface provides access to information about ASF file specifically the ASF Header Objects and the streams contained within the media content.</span></span> <span data-ttu-id="d83ac-208">La información del encabezado se expone a través de los atributos del descriptor de presentación y la información del flujo se proporciona a través de los atributos de descripto</span><span class="sxs-lookup"><span data-stu-id="d83ac-208">Header information is exposes through presentation descriptor attributes and stream information is provided through stream descriptor attributes.</span></span> <span data-ttu-id="d83ac-209">Para obtener más información acerca de estos atributos, consulte [atributos de Media Foundation para los objetos de encabezado ASF](media-foundation-attributes-for-asf-header-objects.md).</span><span class="sxs-lookup"><span data-stu-id="d83ac-209">For more information about these attributes, see [Media Foundation Attributes for ASF Header Objects](media-foundation-attributes-for-asf-header-objects.md).</span></span> <span data-ttu-id="d83ac-210">Además de la información que se expone a través de atributos, también existen metadatos descriptivos, que se establecen como propiedades.</span><span class="sxs-lookup"><span data-stu-id="d83ac-210">In addition to information that is exposed through attributes, there also exists descriptive metadata, which are set as properties.</span></span>                                                                                                 |
| <span data-ttu-id="d83ac-211">\_servicio de \_ controlador de propiedades MF \_</span><span class="sxs-lookup"><span data-stu-id="d83ac-211">MF\_PROPERTY\_HANDLER\_SERVICE</span></span>   | <span data-ttu-id="d83ac-212">Con este identificador, la aplicación puede obtener un puntero a la interfaz [**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore) del origen multimedia ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-212">By using this identifier, the application can get a pointer to the [**IPropertyStore**](/windows/win32/api/propsys/nn-propsys-ipropertystore) interface of the ASF media source.</span></span> <span data-ttu-id="d83ac-213">El almacén de propiedades contiene todos los metadatos relacionados con el archivo ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-213">The property store contains all the metadata related to the ASF file.</span></span> <span data-ttu-id="d83ac-214">Este identificador es nuevo en Windows 7 y reemplaza el \_ \_ servicio del proveedor de metadatos MF \_ para obtener propiedades de metadatos.</span><span class="sxs-lookup"><span data-stu-id="d83ac-214">This identifier is new in Windows 7 and replaces MF\_METADATA\_PROVIDER\_SERVICE for getting metadata properties.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| <span data-ttu-id="d83ac-215">MFNETSOURCE \_ Statistics \_ Service</span><span class="sxs-lookup"><span data-stu-id="d83ac-215">MFNETSOURCE\_STATISTICS\_SERVICE</span></span> | <span data-ttu-id="d83ac-216">Para obtener más información, consulte recuperar estadísticas de red en el [registro de cliente](client-logging.md).</span><span class="sxs-lookup"><span data-stu-id="d83ac-216">For more information, see Retrieving Network Statistics in [Client Logging](client-logging.md).</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <span data-ttu-id="d83ac-217">\_servicio de código de tiempo MF \_</span><span class="sxs-lookup"><span data-stu-id="d83ac-217">MF\_TIMECODE\_SERVICE</span></span>            | <span data-ttu-id="d83ac-218">Mediante este identificador, la aplicación puede obtener un puntero a la interfaz [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) del origen del medio.</span><span class="sxs-lookup"><span data-stu-id="d83ac-218">By using this identifier, the application can get a pointer to the media source’s [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface.</span></span> <span data-ttu-id="d83ac-219">Esta implementación se puede usar para realizar traducciones de código de tiempo, como la conversión de código de tiempo SMPTE a unidades 100-nanosegundos y viceversa.</span><span class="sxs-lookup"><span data-stu-id="d83ac-219">This implementation can be used to perform time code translations such as converting SMPTE time code to 100-nano second units and back.</span></span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |



 

### <a name="timecode-translation"></a><span data-ttu-id="d83ac-220">Conversión de código de tiempo</span><span class="sxs-lookup"><span data-stu-id="d83ac-220">Timecode Translation</span></span>

<span data-ttu-id="d83ac-221">El origen de medios ASF proporciona un servicio de traducción de código de tiempo que permite a la aplicación convertir el código de tiempo SMPTE al tiempo de presentación más cercano (en una unidad de 100 segundos).</span><span class="sxs-lookup"><span data-stu-id="d83ac-221">The ASF media source provides a time code translation service that allows your application to convert SMPTE time code to the closest presentation time (in 100-nanosecond unit).</span></span> <span data-ttu-id="d83ac-222">Por el contrario, la aplicación también puede obtener el código de tiempo para una hora de presentación solicitada.</span><span class="sxs-lookup"><span data-stu-id="d83ac-222">Conversely, the application can also get the time code for a requested presentation time.</span></span> <span data-ttu-id="d83ac-223">El servicio está disponible a través de la interfaz [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) , que implementa el origen multimedia ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-223">The service is available through the [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface, which the ASF media source implements.</span></span> <span data-ttu-id="d83ac-224">Las llamadas al método en este puntero de interfaz son asincrónicas que se pueden ejecutar desde el subproceso de aplicación principal sin bloquear la interfaz de usuario de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d83ac-224">The method calls on this interface pointer are asynchronous that can run from your main application thread without blocking the user interface of your application.</span></span>

<span data-ttu-id="d83ac-225">En los pasos siguientes se resume el procedimiento para la traducción del código de tiempo:</span><span class="sxs-lookup"><span data-stu-id="d83ac-225">The following steps summarize the procedure for time code translation:</span></span>

1.  <span data-ttu-id="d83ac-226">Obtiene un puntero a la interfaz [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) del origen multimedia ASF llamando a [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) y especificando el identificador del **servicio de código de \_ tiempo \_ MF** .</span><span class="sxs-lookup"><span data-stu-id="d83ac-226">Get pointer to the [**IMFTimecodeTranslate**](/windows/desktop/api/mfidl/nn-mfidl-imftimecodetranslate) interface of the ASF media source by calling [**MFGetService**](/windows/desktop/api/mfidl/nf-mfidl-mfgetservice) and specifying the **MF\_TIMECODE\_SERVICE** identifier.</span></span>
2.  <span data-ttu-id="d83ac-227">Llame a [**IMFTimecodeTranslate:: BeginConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverttimecodetohns) o [**IMFTimecodeTranslate:: BeginConvertHNSToTimecode**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverthnstotimecode) y especifique la hora que se va a traducir.</span><span class="sxs-lookup"><span data-stu-id="d83ac-227">Call [**IMFTimecodeTranslate::BeginConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverttimecodetohns) or [**IMFTimecodeTranslate::BeginConvertHNSToTimecode**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-beginconverthnstotimecode) and specify the time that is to be translated..</span></span> <span data-ttu-id="d83ac-228">En el caso de **BeginConvertTimecodeToHNS** , el código de tiempo debe especificarse como una variable [**PROPVARIANT**](/windows/win32/api/propidl/ns-propidl-propvariant) con el tipo de datos **VT \_ i8** .</span><span class="sxs-lookup"><span data-stu-id="d83ac-228">For **BeginConvertTimecodeToHNS** the time code must be specified as a [**PROPVARIANT**](/windows/win32/api/propidl/ns-propidl-propvariant) variable with **VT\_I8** data type.</span></span> <span data-ttu-id="d83ac-229">El método **BeginConvertHNSToTimecode** requiere el tiempo en unidades de 100-nanosegundos como tipo de [**MFTIME**](mftime.md) .</span><span class="sxs-lookup"><span data-stu-id="d83ac-229">The **BeginConvertHNSToTimecode** method requires the time in 100-nanosecond units as the [**MFTIME**](mftime.md) type.</span></span>
3.  <span data-ttu-id="d83ac-230">Complete la operación asincrónica mediante una llamada a [**IMFTimecodeTranslate:: EndConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-endconverttimecodetohns) o **IMFTimecodeTranslate:: EndConvertTimecodeToHNS** adecuadamente.</span><span class="sxs-lookup"><span data-stu-id="d83ac-230">Complete the asynchronous operation by calling [**IMFTimecodeTranslate::EndConvertTimecodeToHNS**](/windows/desktop/api/mfidl/nf-mfidl-imftimecodetranslate-endconverttimecodetohns) or **IMFTimecodeTranslate::EndConvertTimecodeToHNS** appropriately.</span></span>

<span data-ttu-id="d83ac-231">Durante la creación del origen multimedia, la resolución de origen crea una secuencia de bytes para el archivo desde el que el origen multimedia lee el contenido ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-231">During the creation of the media source, the source resolver creates a byte stream for the file from which the media source reads the ASF content.</span></span> <span data-ttu-id="d83ac-232">Para que las conversiones de tiempo se realicen correctamente, el flujo de bytes asociado al archivo ASF debe tener capacidades de búsqueda. de lo contrario, la aplicación obtiene \_ el \_ \_ error BYTESTREAM no \_ buscable en la llamada a **Begin...** .</span><span class="sxs-lookup"><span data-stu-id="d83ac-232">In order for the time conversions to be successful, the byte stream associated with the ASF file must have seeking capabilities; otherwise, the application gets the MF\_E\_BYTESTREAM\_NOT\_SEEKABLE error from the **Begin...** call.</span></span> <span data-ttu-id="d83ac-233">Otro requisito para las conversiones de tiempo es que el archivo ASF, representado por el origen de medios ASF, debe tener objetos de índice ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-233">Another requirement for time conversions is that the ASF file, represented by the ASF media source, must have ASF Index Objects.</span></span> <span data-ttu-id="d83ac-234">Los tiempos de presentación y los códigos de tiempo se extraen de los objetos de índice ASF que mantienen todos los índices y los puntos de búsqueda correspondientes del archivo ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-234">The presentation times and the time codes are extracted from the ASF Index Objects that maintain all the indexes and the corresponding seek- points for the ASF file.</span></span> <span data-ttu-id="d83ac-235">Para la traducción de código de tiempo a tiempo de presentación, el archivo ASF debe contener un objeto de índice simple. para la traducción de tiempo de código a presentación, el archivo ASF debe tener un objeto de índice.</span><span class="sxs-lookup"><span data-stu-id="d83ac-235">For presentation time-to-time code translation, the ASF file must contain a Simple Index Object; for time code-to-presentation time translation, the ASF file must have an Index Object.</span></span> <span data-ttu-id="d83ac-236">Las operaciones de conversión dependen del *indexador* subyacente (componente WMContainer) para analizar y leer el objeto de índice asociado al archivo ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-236">The conversion operations rely on the underlying *indexer* (WMContainer component) to parse and read the Index Object associated with the ASF file.</span></span> <span data-ttu-id="d83ac-237">Si el archivo no contiene un objeto de índice, la aplicación recibe de forma asincrónica el \_ código de error MF E \_ no \_ index.</span><span class="sxs-lookup"><span data-stu-id="d83ac-237">If the file does not contain an Index Object, the application asynchronously receives the MF\_E\_NO\_INDEX error code.</span></span>

<span data-ttu-id="d83ac-238">Para traducir el tiempo solicitado por la aplicación, el origen multimedia enumera las secuencias del archivo y busca la secuencia que contiene el objeto de índice ASF adecuado.</span><span class="sxs-lookup"><span data-stu-id="d83ac-238">To translate the time requested by the application, the media source enumerates the streams within the file and finds the stream that contains the appropriate ASF Index Object.</span></span> <span data-ttu-id="d83ac-239">Si se encuentra este tipo de flujo, el origen multimedia analiza los paquetes ASF de la secuencia que se analizan hasta que se alcanza el código de tiempo correcto.</span><span class="sxs-lookup"><span data-stu-id="d83ac-239">If such a stream is found, the media source parses the stream’s ASF packets are parsed until the correct time code is reached.</span></span> <span data-ttu-id="d83ac-240">Después de encontrar el ejemplo correcto, recupera la hora de presentación correspondiente o el código de tiempo del ejemplo y lo devuelve al autor de la llamada.</span><span class="sxs-lookup"><span data-stu-id="d83ac-240">After it finds the correct sample it retrieves the corresponding presentation time or the time code from the sample, and returns it to the caller.</span></span>

### <a name="script-command-support"></a><span data-ttu-id="d83ac-241">Compatibilidad con comandos de script</span><span class="sxs-lookup"><span data-stu-id="d83ac-241">Script Command Support</span></span>

<span data-ttu-id="d83ac-242">Al compilar una topología ASF que contiene una secuencia de script, se agrega un nodo de secuencia de script a la topología.</span><span class="sxs-lookup"><span data-stu-id="d83ac-242">When you build an ASF topology that contains a script stream a Script Stream node is added to the topology.</span></span> <span data-ttu-id="d83ac-243">Este nodo enviará IMFSamples en el momento adecuado.</span><span class="sxs-lookup"><span data-stu-id="d83ac-243">This node will send IMFSamples at the appropriate time.</span></span> <span data-ttu-id="d83ac-244">El IMFSample proporcionado por el nodo de origen del script almacena los datos en el IMFMediaBuffer asociado con el ejemplo.</span><span class="sxs-lookup"><span data-stu-id="d83ac-244">The IMFSample provided by the script source node stores the data in the IMFMediaBuffer associated with the sample.</span></span> <span data-ttu-id="d83ac-245">Puede llamar a CopyToBuffer en el ejemplo para obtener un IMFMediaBuffer y, a continuación, llamar a Lock en el búfer para obtener los datos.</span><span class="sxs-lookup"><span data-stu-id="d83ac-245">You can call CopyToBuffer on the sample to get an IMFMediaBuffer and then call Lock on the buffer to get the data.</span></span> 

<span data-ttu-id="d83ac-246">Las cargas de script de secuencia se empaquetan en el búfer como una cadena de tipo, seguida de NULL, seguido de la cadena de comandos, seguida de NULL.</span><span class="sxs-lookup"><span data-stu-id="d83ac-246">Script stream payloads are packed into the buffer as a type string, followed by NULL, followed by the command string, followed by NULL.</span></span> <span data-ttu-id="d83ac-247">Las cadenas son Unicode en formato ASF.</span><span class="sxs-lookup"><span data-stu-id="d83ac-247">Strings are Unicode in the ASF format.</span></span>

<span data-ttu-id="d83ac-248">Por ejemplo, una carga podría ser similar a la siguiente (donde \ 0 indica un carácter nulo):</span><span class="sxs-lookup"><span data-stu-id="d83ac-248">For example, a payload might look like the following (where \0 indicates a NULL character):</span></span>

<span data-ttu-id="d83ac-249">*URL\0http://contoso.com\0*</span><span class="sxs-lookup"><span data-stu-id="d83ac-249">*URL\0http://contoso.com\0*</span></span>

<span data-ttu-id="d83ac-250">*Text\0This es un caption\0*</span><span class="sxs-lookup"><span data-stu-id="d83ac-250">*Text\0This is a caption\0*</span></span>



## <a name="related-topics"></a><span data-ttu-id="d83ac-251">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="d83ac-251">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="d83ac-252">Componentes ASF de capa de canalización</span><span class="sxs-lookup"><span data-stu-id="d83ac-252">Pipeline Layer ASF Components</span></span>](pipeline-layer-asf-components.md)
</dt> <dt>

[<span data-ttu-id="d83ac-253">Compatibilidad con ASF en Media Foundation</span><span class="sxs-lookup"><span data-stu-id="d83ac-253">ASF Support in Media Foundation</span></span>](asf-support-in-media-foundation.md)
</dt> </dl>

 

 
