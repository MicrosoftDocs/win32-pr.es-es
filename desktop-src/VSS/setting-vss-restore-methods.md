---
description: La configuración de las operaciones de restauración comienza realmente durante la copia de seguridad de datos, cuando los escritores especifican, en los documentos de metadatos del escritor, cómo se deben restaurar sus datos.
ms.assetid: b1f948cd-d3b0-4637-b76d-b54a74bb5948
title: Definición de los métodos de restauración de VSS
ms.topic: reference
ms.date: 05/31/2018
ms.openlocfilehash: 412cb699fb791a973e280f63fec03bd2854ccd1d
ms.sourcegitcommit: 37f276b5d887a3aad04b1ba86e390dea9d87e591
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 02/04/2021
ms.locfileid: "104279717"
---
# <a name="setting-vss-restore-methods"></a><span data-ttu-id="55f33-103">Definición de los métodos de restauración de VSS</span><span class="sxs-lookup"><span data-stu-id="55f33-103">Setting VSS Restore Methods</span></span>

<span data-ttu-id="55f33-104">La configuración de las operaciones de restauración comienza realmente durante la copia de seguridad de datos, cuando los escritores especifican, en los documentos de metadatos del escritor, cómo se deben restaurar sus datos.</span><span class="sxs-lookup"><span data-stu-id="55f33-104">The configuration of restore operations actually begins during data backup, when writers specify, in their Writer Metadata Documents, how their data should be restored.</span></span>

<span data-ttu-id="55f33-105">Estas especificaciones, a las que se hace referencia como [*métodos de restauración*](vssgloss-r.md) o [*destinos de restauración*](vssgloss-r.md)originales, se pueden modificar durante la restauración mediante la configuración de nuevos destinos de restauración o solicitantes que se restauran en nuevas ubicaciones (vea [ubicaciones de copia de seguridad y restauración no predeterminadas](non-default-backup-and-restore-locations.md)).</span><span class="sxs-lookup"><span data-stu-id="55f33-105">These specifications, referred to either as [*restore methods*](vssgloss-r.md) or original [*restore targets*](vssgloss-r.md), can be modified during restore by writers setting new restore targets or by requesters restoring to new locations (see [Non-Default Backup and Restore Locations](non-default-backup-and-restore-locations.md)).</span></span>

<span data-ttu-id="55f33-106">Al llamar a [**IVssCreateWriterMetadata:: SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod), un escritor indica qué método de restauración debe usarse en su documento de metadatos del escritor.</span><span class="sxs-lookup"><span data-stu-id="55f33-106">By calling [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod), a writer indicates which restore method should be used in its Writer Metadata Document.</span></span> <span data-ttu-id="55f33-107">El método restore es Set Writer Wide y se aplica a todos los archivos de todos los componentes que un escritor administra.</span><span class="sxs-lookup"><span data-stu-id="55f33-107">The restore method is set writer wide and applied to all files in all components that a writer manages.</span></span>

<span data-ttu-id="55f33-108">Un solicitante obtiene (y debe respetar) esta información mediante una llamada a [**IVssExamineWriterMetadata:: GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span><span class="sxs-lookup"><span data-stu-id="55f33-108">A requester obtains (and must respect) this information by calling [**IVssExamineWriterMetadata::GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span></span>

<span data-ttu-id="55f33-109">El método restore se define mediante una enumeración de enumeración [**\_ \_ RESTOREMETHOD de VSS**](/windows/desktop/api/VsWriter/ne-vswriter-vss_restoremethod_enum) , que se pasa a [**IVssCreateWriterMetadata:: SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod) y se devuelve desde [**IVssExamineWriterMetadata:: GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span><span class="sxs-lookup"><span data-stu-id="55f33-109">The restore method is defined by a [**VSS\_RESTOREMETHOD\_ENUM**](/windows/desktop/api/VsWriter/ne-vswriter-vss_restoremethod_enum) enumeration, which is passed to [**IVssCreateWriterMetadata::SetRestoreMethod**](/windows/desktop/api/VsWriter/nf-vswriter-ivsscreatewritermetadata-setrestoremethod) and returned from [**IVssExamineWriterMetadata::GetRestoreMethod**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssexaminewritermetadata-getrestoremethod).</span></span>

<span data-ttu-id="55f33-110">El documento de metadatos del escritor admite los siguientes métodos de restauración válidos (un método de restauración de VSS \_ RME \_ sin definir indica un error de escritura).</span><span class="sxs-lookup"><span data-stu-id="55f33-110">The Writer Metadata Document supports the following valid restore methods (a restore method of VSS\_RME\_UNDEFINED indicates a writer error).</span></span> <span data-ttu-id="55f33-111">En las figuras se resume cómo se deben implementar los distintos métodos de restauración admitidos y definidos (VSS \_ RME \_ personalizado no tiene ninguna figura asociada, porque por definición es específico del escritor y debe seguir las API y la documentación específicas del escritor):</span><span class="sxs-lookup"><span data-stu-id="55f33-111">The figures summarize how the various supported and defined restore methods should be implemented (VSS\_RME\_CUSTOM has no figure associated with it, because by definition it is specific to the writer and must follow the specific writer APIs and documentation):</span></span>

-   <span data-ttu-id="55f33-112">la restauración de RME de VSS, \_ \_ \_ si \_ no \_ existe.</span><span class="sxs-lookup"><span data-stu-id="55f33-112">VSS\_RME\_RESTORE\_IF\_NOT\_THERE.</span></span> <span data-ttu-id="55f33-113">Restaure los archivos de componentes en el disco si no hay ninguno de los archivos en el disco.</span><span class="sxs-lookup"><span data-stu-id="55f33-113">Restore component files to disk if none of the files are on the disk already.</span></span> <span data-ttu-id="55f33-114">El estado del archivo de destino debe comprobarse después de un evento de [**prerestauración**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) .</span><span class="sxs-lookup"><span data-stu-id="55f33-114">Target file status should be checked after a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event.</span></span>
    <span data-ttu-id="55f33-115">![Diagrama que muestra un árbol de solución de problemas para VSS_RME_RESTORE_IF_NOT_THERE.](images/rint.png)</span><span class="sxs-lookup"><span data-stu-id="55f33-115">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_IF_NOT_THERE.](images/rint.png)</span></span>
-   <span data-ttu-id="55f33-116">la \_ restauración de RME de VSS \_ \_ si \_ puede \_ reemplazar.</span><span class="sxs-lookup"><span data-stu-id="55f33-116">VSS\_RME\_RESTORE\_IF\_CAN\_REPLACE.</span></span> <span data-ttu-id="55f33-117">Restaure los archivos en el disco si se pueden reemplazar todos los archivos.</span><span class="sxs-lookup"><span data-stu-id="55f33-117">Restore files to disk if all the files can be replaced.</span></span> <span data-ttu-id="55f33-118">El estado del archivo de destino debe comprobarse después de un evento de [**prerestauración**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) .</span><span class="sxs-lookup"><span data-stu-id="55f33-118">Target file status should be checked after a [**PreRestore**](/windows/desktop/api/VsBackup/nf-vsbackup-ivssbackupcomponents-prerestore) event.</span></span>
    <span data-ttu-id="55f33-119">![Diagrama que muestra un árbol de solución de problemas para VSS_RME_RESTORE_IF_CAN_REPLACE.](images/ricr.png)</span><span class="sxs-lookup"><span data-stu-id="55f33-119">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_IF_CAN_REPLACE.](images/ricr.png)</span></span>
-   <span data-ttu-id="55f33-120">Inicio de la restauración de la detención de VSS de VSS \_ \_ \_ \_ .</span><span class="sxs-lookup"><span data-stu-id="55f33-120">VSS\_RME\_STOP\_RESTORE\_START.</span></span> <span data-ttu-id="55f33-121">Un servicio se detendrá antes de restaurar los archivos.</span><span class="sxs-lookup"><span data-stu-id="55f33-121">A service will be stopped prior to restoring the files.</span></span>
    <span data-ttu-id="55f33-122">![Diagrama que muestra un árbol de solución de problemas para VSS_RME_STOP_RESTORE_START.](images/srr.png)</span><span class="sxs-lookup"><span data-stu-id="55f33-122">![Diagram that shows a troubleshooting tree for VSS_RME_STOP_RESTORE_START.](images/srr.png)</span></span>
-   <span data-ttu-id="55f33-123">la \_ \_ restauración \_ de RME de VSS en una \_ \_ ubicación alternativa.</span><span class="sxs-lookup"><span data-stu-id="55f33-123">VSS\_RME\_RESTORE\_TO\_ALTERNATE\_LOCATION.</span></span> <span data-ttu-id="55f33-124">Restaure los archivos en el disco en una ubicación alternativa.</span><span class="sxs-lookup"><span data-stu-id="55f33-124">Restore files to disk in an alternate location.</span></span> <span data-ttu-id="55f33-125">Las asignaciones de ubicación alternativas se especifican en el documento de metadatos del escritor.</span><span class="sxs-lookup"><span data-stu-id="55f33-125">The alternate location mappings are specified in the Writer Metadata Document.</span></span>
    <span data-ttu-id="55f33-126">![Diagrama que muestra un árbol de solución de problemas para VSS_RME_RESTORE_TO_ALTERNATE_LOCATION.](images/rtal.png)</span><span class="sxs-lookup"><span data-stu-id="55f33-126">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_TO_ALTERNATE_LOCATION.](images/rtal.png)</span></span>
-   <span data-ttu-id="55f33-127">\_ \_ restauración de RME \_ de VSS en el \_ reinicio.</span><span class="sxs-lookup"><span data-stu-id="55f33-127">VSS\_RME\_RESTORE\_AT\_REBOOT.</span></span> <span data-ttu-id="55f33-128">Provocar que los archivos se restauren (se sobrescriban) cuando se reinicie el equipo.</span><span class="sxs-lookup"><span data-stu-id="55f33-128">Cause files to be restored (overwritten) when the computer is rebooted.</span></span>
    <span data-ttu-id="55f33-129">![Diagrama que muestra un árbol de solución de problemas para VSS_RME_RESTORE_AT_REBOOT.](images/rar.png)</span><span class="sxs-lookup"><span data-stu-id="55f33-129">![Diagram that shows a troubleshooting tree for VSS_RME_RESTORE_AT_REBOOT.](images/rar.png)</span></span>
-   <span data-ttu-id="55f33-130">la \_ \_ restauración \_ de RME de VSS en el \_ reinicio \_ si \_ no se puede \_ reemplazar.</span><span class="sxs-lookup"><span data-stu-id="55f33-130">VSS\_RME\_RESTORE\_AT\_REBOOT\_IF\_CANNOT\_REPLACE.</span></span> <span data-ttu-id="55f33-131">Si un archivo no se pudo restaurar en el disco en un sistema en ejecución, se restaurará (se sobrescribirá) cuando se reinicie el equipo.</span><span class="sxs-lookup"><span data-stu-id="55f33-131">If a file could not be restored to disk on a running system, then it is restored (overwritten) when the computer is rebooted.</span></span>
    <span data-ttu-id="55f33-132">![Diagrama que muestra una forVSS_RME_RESTORE_AT_REBOOT_IF_CANNOT_REPLACE de árbol de solución de problemas.</span><span class="sxs-lookup"><span data-stu-id="55f33-132">![Diagram that shows a troubleshooting tree forVSS_RME_RESTORE_AT_REBOOT_IF_CANNOT_REPLACE.</span></span> ](images/raricr.png)
-   <span data-ttu-id="55f33-133">RME de VSS \_ \_ personalizado.</span><span class="sxs-lookup"><span data-stu-id="55f33-133">VSS\_RME\_CUSTOM.</span></span> <span data-ttu-id="55f33-134">Ninguno de los métodos predefinidos funcionará; la aplicación de copia de seguridad debe usar las API especializadas para realizar la operación de restauración.</span><span class="sxs-lookup"><span data-stu-id="55f33-134">None of the predefined methods will work; the backup application must use specialized APIs to perform the restore operation.</span></span> <span data-ttu-id="55f33-135">Para este método de copia de seguridad, el solicitante debe comprender por completo el escritor en cuestión.</span><span class="sxs-lookup"><span data-stu-id="55f33-135">For this backup method, the requester must completely understand the writer in question.</span></span> <span data-ttu-id="55f33-136">Consulte [casos de uso de VSS especiales](special-vss-usage-cases.md) para instancias admitidas actualmente.</span><span class="sxs-lookup"><span data-stu-id="55f33-136">See [Special VSS Usage Cases](special-vss-usage-cases.md) for currently supported instances.</span></span>

 

 



