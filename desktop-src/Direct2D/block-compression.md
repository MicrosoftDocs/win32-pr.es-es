---
title: Compresión de bloques
description: Describe cómo funciona la compresión de bloque y cómo se usa en WIC y Direct2D.
ms.assetid: 52AF86A5-16E8-4AC8-BB67-CC2F1A3635B5
ms.topic: article
ms.date: 05/31/2018
ms.custom: seodec18
ms.openlocfilehash: aeb6ba9427a04f7a251a1d59062be508e4249b41
ms.sourcegitcommit: ee06501cc29132927ade9813e0888aaa4decc487
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/28/2021
ms.locfileid: "104547238"
---
# <a name="block-compression"></a><span data-ttu-id="3d8e5-103">Compresión de bloques</span><span class="sxs-lookup"><span data-stu-id="3d8e5-103">Block compression</span></span>

<span data-ttu-id="3d8e5-104">A partir de Windows 8.1, Direct2D admite varios formatos de píxel comprimidos en bloques.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-104">Starting with Windows 8.1, Direct2D supports several block compressed pixel formats.</span></span> <span data-ttu-id="3d8e5-105">Además, Windows 8.1 contiene un nuevo códec DDS de Windows Imaging Component (WIC) para habilitar la carga y el almacenamiento de imágenes comprimidas en bloques en el formato de archivo DDS.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-105">In addition, Windows 8.1 contains a new Windows Imaging Component (WIC) DDS codec to enable loading and storing block compressed images in the DDS file format.</span></span> <span data-ttu-id="3d8e5-106">La compresión de bloque es una técnica para reducir la cantidad de memoria de gráficos consumida por el contenido del mapa de bits.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-106">Block compression is a technique for reducing the amount of graphics memory that is consumed by bitmap content.</span></span> <span data-ttu-id="3d8e5-107">Mediante el uso de la compresión de bloque, la aplicación puede reducir el consumo de memoria y los tiempos de carga de las mismas imágenes de resolución.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-107">By using block compression, your app can reduce memory consumption and load times for the same resolution images.</span></span> <span data-ttu-id="3d8e5-108">O bien, la aplicación puede usar imágenes de más o más resolución mientras se sigue consumiendo la misma superficie de memoria de la GPU.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-108">Or, your app can use more or higher resolution images while still consuming the same GPU memory footprint.</span></span>

<span data-ttu-id="3d8e5-109">Las aplicaciones de Direct3D han utilizado la compresión de bloque durante mucho tiempo y, con Windows 8.1, también está disponible para los desarrolladores de aplicaciones estándar y de Direct2D.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-109">Block compression has been used by Direct3D applications for a long time, and with Windows 8.1 is available to mainstream and Direct2D application developers as well.</span></span>

<span data-ttu-id="3d8e5-110">En este tema se describe cómo funciona la compresión por bloques y cómo se usa en WIC y Direct2D.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-110">This topic describes how block compression works and how to use it in WIC and Direct2D.</span></span>

## <a name="about-block-compression"></a><span data-ttu-id="3d8e5-111">Acerca de la compresión de bloque</span><span class="sxs-lookup"><span data-stu-id="3d8e5-111">About Block Compression</span></span>

<span data-ttu-id="3d8e5-112">La [compresión por bloques](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-block-compression) (BC) hace referencia a una clase de técnicas de compresión para reducir los tamaños de textura.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-112">[Block Compression](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-block-compression) (BC) refers to a class of compression techniques for reducing texture sizes.</span></span> <span data-ttu-id="3d8e5-113">Direct3D 11 admite hasta 7 formatos de BC diferentes en función del nivel de características.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-113">Direct3D 11 supports up to 7 different BC formats depending on feature level.</span></span> <span data-ttu-id="3d8e5-114">En Windows 8.1 Direct2D incluye compatibilidad con los formatos BC1, BC2 y BC3 que están disponibles en todos los niveles de características.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-114">In Windows 8.1 Direct2D introduces support for the BC1, BC2 and BC3 formats which are available across all feature levels.</span></span>

### <a name="how-block-compression-works"></a><span data-ttu-id="3d8e5-115">Cómo funciona la compresión por bloques</span><span class="sxs-lookup"><span data-stu-id="3d8e5-115">How Block Compression works</span></span>

<span data-ttu-id="3d8e5-116">Los formatos comprimidos de bloque usan la misma técnica básica para reducir el espacio consumido por los datos de color.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-116">The block compressed formats all use the same basic technique to reduce the space consumed by color data.</span></span> <span data-ttu-id="3d8e5-117">En esta sección se resume el algoritmo más sencillo, BC1.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-117">This section summarizes the simplest algorithm, BC1.</span></span> <span data-ttu-id="3d8e5-118">Para obtener una explicación más detallada, consulte [bloquear la compresión](/windows/desktop/direct3d11/texture-block-compression-in-direct3d-11).</span><span class="sxs-lookup"><span data-stu-id="3d8e5-118">For a more detailed explanation, see [Block Compression](/windows/desktop/direct3d11/texture-block-compression-in-direct3d-11).</span></span>

<span data-ttu-id="3d8e5-119">En primer lugar, la imagen se divide en bloques de 4 por 4 píxeles.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-119">First, the image is divided into blocks of 4 by 4 pixels.</span></span> <span data-ttu-id="3d8e5-120">Cada bloque se comprime por separado.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-120">Each block is compressed separately.</span></span>

> [!Note]  
> <span data-ttu-id="3d8e5-121">Esto significa que el ancho y el alto de una imagen deben ser un múltiplo de 4 píxeles para que se compriman en bloque.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-121">This means an image’s width and height must each be a multiple of 4 pixel for it to be block compressed.</span></span>

 

<span data-ttu-id="3d8e5-122">En esta imagen de ejemplo se muestra un bloque de píxeles de 4x4 dentro de una imagen.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-122">This example image shows a 4x4 pixel block within an image.</span></span>

![una imagen de ejemplo muestra un bloque de píxeles de 4x4 dentro de una imagen.](images/dds1.png)

<span data-ttu-id="3d8e5-124">Después, dentro de un bloque de 4 por 4, se seleccionan dos colores de "referencia" y se codifican como valores de 2 16 bits (5 bits rojo, 6 bits verde, 5 bits azul).</span><span class="sxs-lookup"><span data-stu-id="3d8e5-124">Next, within a 4 by 4 block, two “reference” colors are selected and are encoded as two 16 bit values (5 bits red, 6 bits green, 5 bits blue).</span></span> <span data-ttu-id="3d8e5-125">La elección de estos colores afecta significativamente a la calidad de la imagen y no es trivial.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-125">The choice of these colors significantly affects image quality and is nontrivial.</span></span> <span data-ttu-id="3d8e5-126">Dos colores intermedios se calculan mediante la interpolación lineal entre los dos colores de referencia del espacio de colores RGB.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-126">Two intermediate colors are calculated by linearly interpolating between the two reference colors in the RGB color space.</span></span> <span data-ttu-id="3d8e5-127">Esto produce un total de 4 colores posibles diferentes; a cada color se le asigna un valor de índice de dos bits.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-127">This produces a total of 4 different possible colors; each color is assigned a two bit index value.</span></span> <span data-ttu-id="3d8e5-128">Sin embargo, tenga en cuenta que solo es necesario almacenar los dos colores del punto de conexión cuando la interpolación es fija.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-128">However, note that only the two endpoint colors need to be stored as the interpolation is fixed.</span></span>

<span data-ttu-id="3d8e5-129">En esta ilustración, los colores 0 y 3 se seleccionan como colores de "referencia" para el bloque, mientras que los colores 1 y 2 se calculan mediante la interpolación lineal.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-129">In this figure, colors 0 and 3 are selected as “reference” colors for the block, while colors 1 and 2 are calculated using linear interpolation.</span></span>

![Diagrama que muestra el cálculo de 4 valores de color para representar el bloque.](images/dds2.png)

<span data-ttu-id="3d8e5-131">Por último, cada píxel del bloque se asigna a uno de los cuatro colores calculados anteriormente y cada píxel se codifica mediante el valor de índice de dos bits.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-131">Finally, every pixel in the block is mapped to one of the four previously calculated colors, and each pixel is encoded using the two bit index value.</span></span>

<span data-ttu-id="3d8e5-132">La cantidad total de datos que se usa para representar estos 16 píxeles es:</span><span class="sxs-lookup"><span data-stu-id="3d8e5-132">The total amount of data used to represent these 16 pixels is:</span></span>

`16 bits [to define a reference color] * 2 + 2 bits * 16 [number of pixels]  = 64 bits`

<span data-ttu-id="3d8e5-133">Esto da como resultado una densidad media de 4 bits por píxel.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-133">This results in an average density of 4 bits per pixel.</span></span> <span data-ttu-id="3d8e5-134">Para la comparación, el formato de B8G8R8A8 de formato de DXGI común \_ \_ UNORM de \_ píxeles consume 32 bits por píxel.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-134">For comparison, the common DXGI\_FORMAT\_B8G8R8A8\_UNORM pixel format consumes 32 bits per pixel.</span></span>

<span data-ttu-id="3d8e5-135">En este diagrama se muestra que cada píxel se codifica como un índice de 2 bits.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-135">This diagram shows that each pixel is encoded as a 2 bit index.</span></span> <span data-ttu-id="3d8e5-136">El bloque completo se codifica en 64 bits.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-136">The entire block is encoded in 64 bits.</span></span>

![calcular 4 valores de color para representar el bloque.](images/dds3.png)

<span data-ttu-id="3d8e5-138">Hay variaciones que admiten datos alfa y números variables de canales de color.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-138">There are variations to support alpha data and varying numbers of color channels.</span></span> <span data-ttu-id="3d8e5-139">BC6H y BC7 usan algoritmos significativamente diferentes para admitir contenido de intervalo dinámico alto (HDR) y aumentar la calidad de la imagen, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-139">BC6H and BC7 use significantly different algorithms in order to support high dynamic range (HDR) content and increase image quality, respectively.</span></span>

### <a name="directdraw-surface-dds-file-format"></a><span data-ttu-id="3d8e5-140">Formato de archivo de DirectDraw Surface (DDS)</span><span class="sxs-lookup"><span data-stu-id="3d8e5-140">DirectDraw Surface (DDS) file format</span></span>

<span data-ttu-id="3d8e5-141">Los datos comprimidos en bloques normalmente se almacenan en archivos de [DirectDraw Surface (DDS)](/windows/desktop/direct3ddds/dx-graphics-dds-reference) .</span><span class="sxs-lookup"><span data-stu-id="3d8e5-141">Block compressed data is typically stored in [DirectDraw Surface (DDS)](/windows/desktop/direct3ddds/dx-graphics-dds-reference) files.</span></span> <span data-ttu-id="3d8e5-142">Es posible que esté familiarizado con los archivos DDS si es un desarrollador de Direct3D.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-142">You may be familiar with DDS files if you are a Direct3D developer.</span></span> <span data-ttu-id="3d8e5-143">Tenga en cuenta que Direct2D solo admite ciertas características DDS; para obtener más información, consulte [requisitos de DDS](#dds-requirements).</span><span class="sxs-lookup"><span data-stu-id="3d8e5-143">Note that Direct2D only supports certain DDS features; for more information see [DDS Requirements](#dds-requirements).</span></span>

### <a name="advantages-of-block-compression"></a><span data-ttu-id="3d8e5-144">Ventajas de la compresión de bloque</span><span class="sxs-lookup"><span data-stu-id="3d8e5-144">Advantages of block compression</span></span>

<span data-ttu-id="3d8e5-145">Los formatos comprimidos en bloques difieren de los formatos de compresión de imagen de la industria, como JPEG, ya que son compatibles de forma nativa con las GPU modernas.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-145">Block compressed formats differ from common industry image compression formats such as JPEG in that BC formats are natively supported by modern GPUs.</span></span> <span data-ttu-id="3d8e5-146">Esto significa que puede cargar directamente una imagen comprimida en bloque en la GPU sin descodificación o descompresión.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-146">This means that you can directly load a block compressed image onto the GPU without any decoding or decompression.</span></span> <span data-ttu-id="3d8e5-147">Los formatos BC consumen de 4 a 8 bits por píxel en promedio; Cuando se comparan con un mapa de bits de BGRA de bits sin 32 comprimir típico por píxel, esto da como resultado un ahorro de memoria del 75% al 87,5%.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-147">BC formats consume from 4 to 8 bits per pixel on average; when compared to a typical uncompressed 32 bit per pixel BGRA bitmap, this results in memory savings of 75% to 87.5%.</span></span> <span data-ttu-id="3d8e5-148">Además, dado que no hay ningún paso de descodificación, el tiempo para cargar una imagen de BC se reduce significativamente en comparación con formatos como JPEG.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-148">Also, because there is no decode step, the time to load a BC image is significantly reduced compared to formats like JPEG.</span></span>

### <a name="when-to-use-block-compression"></a><span data-ttu-id="3d8e5-149">Cuándo usar la compresión de bloque</span><span class="sxs-lookup"><span data-stu-id="3d8e5-149">When to use Block Compression</span></span>

<span data-ttu-id="3d8e5-150">Considere la posibilidad de usar imágenes comprimidas en bloque en la aplicación en lugar de otros formatos como JPEG si desea reducir el consumo de memoria de los mapas de bits o desea reducir los tiempos de descodificación y carga.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-150">You should consider using block compressed images in your app instead of other formats such as JPEG if you want to reduce the memory consumption of bitmaps or want to reduce decode and load times.</span></span>

<span data-ttu-id="3d8e5-151">Sin embargo, la compresión de bloque no es adecuada para todos los casos y requiere algunos inconvenientes.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-151">However, block compression is not appropriate for all cases and requires some tradeoffs.</span></span> <span data-ttu-id="3d8e5-152">En primer lugar, se pierden los algoritmos de compresión de bloque.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-152">First, the block compression algorithms are lossy.</span></span> <span data-ttu-id="3d8e5-153">La compresión de bloque funciona bien con el contenido fotográfico natural, pero puede introducir artefactos visuales no deseados en imágenes con límites nítidos y de contraste alto, como capturas de pantallas generadas por el equipo.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-153">Block compression works well with natural photographic content but can introduce unwanted visual artifacts into images with sharp, high contrast boundaries, such as computer-generated screenshots.</span></span> <span data-ttu-id="3d8e5-154">Debe asegurarse de que los recursos de la imagen comprimida en bloque tienen una calidad de imagen aceptable antes de usarlos.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-154">You should ensure that your block compressed image assets have acceptable image quality before using them.</span></span>

<span data-ttu-id="3d8e5-155">En segundo lugar, bloquear los archivos DDS comprimidos suele consumir más espacio en disco que las imágenes JPEG comparables.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-155">Second, block compressed DDS files generally consume more space on disk than comparable JPEG images.</span></span> <span data-ttu-id="3d8e5-156">Esto, a su vez, aumentará el tamaño de paquete de la aplicación y los requisitos de ancho de banda de red.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-156">This in turn will increase your app’s package size and network bandwidth requirements.</span></span>

## <a name="using-block-compression"></a><span data-ttu-id="3d8e5-157">Usar la compresión de bloque</span><span class="sxs-lookup"><span data-stu-id="3d8e5-157">Using Block Compression</span></span>

<span data-ttu-id="3d8e5-158">En esta sección se explica cómo generar y usar recursos comprimidos en bloques en una aplicación de Direct2D.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-158">This section explains how to generate and use block compressed assets in a Direct2D app.</span></span>

### <a name="overview"></a><span data-ttu-id="3d8e5-159">Información general</span><span class="sxs-lookup"><span data-stu-id="3d8e5-159">Overview</span></span>

<span data-ttu-id="3d8e5-160">Los archivos DDS comprimidos en bloques son un formato optimizado en tiempo de ejecución, lo que significa que están optimizados específicamente para un buen rendimiento en el tiempo de ejecución de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-160">Block compressed DDS files are a runtime-optimized format, meaning that they are specifically optimized for good performance at app runtime.</span></span> <span data-ttu-id="3d8e5-161">Le recomendamos que siga usando la canalización de creación y edición de recursos existente y que solo convierta en un formato comprimido de bloque al importarlos en el proyecto de aplicación, o en el momento de la compilación.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-161">We recommend that you continue to use your existing asset creation and editing pipeline, and only convert to a block compressed format when you import them into your application project, or at build time.</span></span>

### <a name="dds-requirements"></a><span data-ttu-id="3d8e5-162">Requisitos de DDS</span><span class="sxs-lookup"><span data-stu-id="3d8e5-162">DDS requirements</span></span>

<span data-ttu-id="3d8e5-163">El formato de archivo DDS se diseñó para admitir una amplia gama de características usadas en Direct3D.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-163">The DDS file format was designed to support a wide range of features used in Direct3D.</span></span> <span data-ttu-id="3d8e5-164">Direct2D solo usa un subconjunto de estas características.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-164">Direct2D only uses a subset of these features.</span></span> <span data-ttu-id="3d8e5-165">Por lo tanto, al crear imágenes DDS para su uso con Direct2D, debe tener en cuenta las siguientes restricciones:</span><span class="sxs-lookup"><span data-stu-id="3d8e5-165">Therefore when you are creating DDS images for use with Direct2D, you must keep in mind the following restrictions:</span></span>

-   <span data-ttu-id="3d8e5-166">Solo se permiten los siguientes valores de [**\_ formato de DXGI**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) :</span><span class="sxs-lookup"><span data-stu-id="3d8e5-166">Only the following [**DXGI\_FORMAT**](/windows/desktop/api/dxgiformat/ne-dxgiformat-dxgi_format) values are allowed:</span></span>
    -   <span data-ttu-id="3d8e5-167">Formato de DXGI \_ \_ BC1 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="3d8e5-167">DXGI\_FORMAT\_BC1\_UNORM</span></span>
    -   <span data-ttu-id="3d8e5-168">Formato de DXGI \_ \_ BC2 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="3d8e5-168">DXGI\_FORMAT\_BC2\_UNORM</span></span>
    -   <span data-ttu-id="3d8e5-169">Formato de DXGI \_ \_ BC3 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="3d8e5-169">DXGI\_FORMAT\_BC3\_UNORM</span></span>
-   <span data-ttu-id="3d8e5-170">Se deben usar los datos alfa premultiplicados.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-170">Premultiplied alpha data must be used.</span></span> <span data-ttu-id="3d8e5-171">Esto incluye los archivos DDS heredados que usan formatos que definen explícitamente alfa premultiplicado (DXT1, DXT2, DXT4), así como archivos DDS que usan el encabezado de DDS \_ \_ contenido DX10 estructura con los \_ \_ \_ \_ \_ \_ valores PREmultiplicados de modo alfa opaco y DDS de modo alfa.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-171">This includes legacy DDS files using formats that explicitly define premultiplied alpha (DXT1, DXT2, DXT4), as well as DDS files that use the DDS\_HEADER\_DX10 structure with the DDS\_ALPHA\_MODE\_OPAQUE and DDS\_ALPHA\_MODE\_PREMULTIPLIED values.</span></span>
-   <span data-ttu-id="3d8e5-172">Las dimensiones X e y deben ser múltiplos de 4 píxeles.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-172">The X and Y dimensions must be multiples of 4 pixels.</span></span>
-   <span data-ttu-id="3d8e5-173">No se admiten las texturas de volumen, cubemaps, MIP ni matrices de textura.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-173">Volume textures, cubemaps, mipmaps, or texture arrays are not allowed.</span></span> <span data-ttu-id="3d8e5-174">Solo debe usar imágenes de origen de un solo fotograma.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-174">You should only use single frame source images.</span></span>

### <a name="generating-block-compressed-assets"></a><span data-ttu-id="3d8e5-175">Generación de recursos comprimidos en bloques</span><span class="sxs-lookup"><span data-stu-id="3d8e5-175">Generating Block Compressed assets</span></span>

<span data-ttu-id="3d8e5-176">Hay una variedad de herramientas de creación de DDS disponibles para crear o convertir archivos DDS comprimidos en bloques.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-176">There are a variety of DDS authoring tools available to create or convert block compressed DDS files.</span></span> <span data-ttu-id="3d8e5-177">Nota no todas las herramientas admiten los requisitos para usar archivos DDS con Direct2D, tal como se detallan en la sección anterior.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-177">Note not all tools support the requirements for using DDS files with Direct2D, as detailed in the previous section.</span></span>

<span data-ttu-id="3d8e5-178">A partir de Visual Studio 2013, puede hacer que Visual Studio convierta los recursos visuales existentes, como JPEG y PNG, al formato comprimido de bloque DDS correcto como parte automática del proceso de compilación.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-178">Beginning with Visual Studio 2013, you can have Visual Studio convert existing visual assets such as JPEG and PNG to the correct DDS block compressed format as an automatic part of your build process.</span></span> <span data-ttu-id="3d8e5-179">Esto se logra mediante el paso de compilación personalizada de la tarea de contenido de la imagen.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-179">This is accomplished using the Image Content Task custom build step.</span></span>

<span data-ttu-id="3d8e5-180">Para obtener información sobre cómo configurar esto para el proyecto, vea: [Cómo: exportar una textura para usarla con aplicaciones de Direct2D o javascipt](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120)).</span><span class="sxs-lookup"><span data-stu-id="3d8e5-180">For information on how to set this up for your project, see: [How to: Export a Texture for Use with Direct2D or Javascipt Apps](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120)).</span></span>

### <a name="direct2d-apis"></a><span data-ttu-id="3d8e5-181">API de Direct2D</span><span class="sxs-lookup"><span data-stu-id="3d8e5-181">Direct2D APIs</span></span>

<span data-ttu-id="3d8e5-182">Direct2D se actualiza en Windows 8.1 para admitir los siguientes formatos de píxel:</span><span class="sxs-lookup"><span data-stu-id="3d8e5-182">Direct2D is updated in Windows 8.1 to support the following pixel formats:</span></span>

-   <span data-ttu-id="3d8e5-183">Formato de DXGI \_ \_ BC1 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="3d8e5-183">DXGI\_FORMAT\_BC1\_UNORM</span></span>
-   <span data-ttu-id="3d8e5-184">Formato de DXGI \_ \_ BC2 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="3d8e5-184">DXGI\_FORMAT\_BC2\_UNORM</span></span>
-   <span data-ttu-id="3d8e5-185">Formato de DXGI \_ \_ BC3 \_ UNORM</span><span class="sxs-lookup"><span data-stu-id="3d8e5-185">DXGI\_FORMAT\_BC3\_UNORM</span></span>

<span data-ttu-id="3d8e5-186">En el caso de los formatos anteriores, debe utilizar alfa premultiplicado.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-186">For the preceding formats, you must use premultiplied alpha.</span></span> <span data-ttu-id="3d8e5-187">Además, estos formatos solo son válidos para su uso como origen, no como destino.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-187">In addition, these formats are only valid for use as a source, not a target.</span></span> <span data-ttu-id="3d8e5-188">Por ejemplo, esto significa que puede crear un mapa de bits de Direct2D mediante BC1, pero no un contexto de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-188">For example, this means that you can create a Direct2D bitmap using BC1, but not a device context.</span></span>

<span data-ttu-id="3d8e5-189">Los métodos siguientes se actualizan en Windows 8.1 para admitir formatos de BC:</span><span class="sxs-lookup"><span data-stu-id="3d8e5-189">The following methods are updated in Windows 8.1 to support BC formats:</span></span>

-   [<span data-ttu-id="3d8e5-190">**ID2D1DeviceContext::IsDxgiFormatSupported**</span><span class="sxs-lookup"><span data-stu-id="3d8e5-190">**ID2D1DeviceContext::IsDxgiFormatSupported**</span></span>](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-isdxgiformatsupported)
-   <span data-ttu-id="3d8e5-191">[**ID2D1DeviceContext::CreateBitmap**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmap(d2d1_size_u_constvoid_uint32_constd2d1_bitmap_properties1__id2d1bitmap1))</span><span class="sxs-lookup"><span data-stu-id="3d8e5-191">[**ID2D1DeviceContext::CreateBitmap**](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmap(d2d1_size_u_constvoid_uint32_constd2d1_bitmap_properties1__id2d1bitmap1))</span></span>
-   <span data-ttu-id="3d8e5-192">[**ID2D1DeviceContext::CreateBitmapFromDxgiSurface**](/windows/desktop/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmapfromdxgisurface(idxgisurface_constd2d1_bitmap_properties1__id2d1bitmap1))</span><span class="sxs-lookup"><span data-stu-id="3d8e5-192">[**ID2D1DeviceContext::CreateBitmapFromDxgiSurface**](/windows/desktop/api/d2d1_1/nf-d2d1_1-id2d1devicecontext-createbitmapfromdxgisurface(idxgisurface_constd2d1_bitmap_properties1__id2d1bitmap1))</span></span>
-   [<span data-ttu-id="3d8e5-193">**ID2D1RenderTarget::CreateSharedBitmap**</span><span class="sxs-lookup"><span data-stu-id="3d8e5-193">**ID2D1RenderTarget::CreateSharedBitmap**</span></span>](/windows/win32/api/d2d1/nf-d2d1-id2d1rendertarget-createsharedbitmap)
-   [<span data-ttu-id="3d8e5-194">**ID2D1RenderTarget::CreateBitmapFromWicBitmap**</span><span class="sxs-lookup"><span data-stu-id="3d8e5-194">**ID2D1RenderTarget::CreateBitmapFromWicBitmap**</span></span>](id2d1rendertarget-createbitmapfromwicbitmap.md)
-   [<span data-ttu-id="3d8e5-195">**ID2D1Bitmap::CopyFromMemory**</span><span class="sxs-lookup"><span data-stu-id="3d8e5-195">**ID2D1Bitmap::CopyFromMemory**</span></span>](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrommemory)
-   [<span data-ttu-id="3d8e5-196">**ID2D1Bitmap::CopyFromBitmap**</span><span class="sxs-lookup"><span data-stu-id="3d8e5-196">**ID2D1Bitmap::CopyFromBitmap**</span></span>](/windows/win32/api/d2d1/nf-d2d1-id2d1bitmap-copyfrombitmap)
-   [<span data-ttu-id="3d8e5-197">**ID2D1Bitmap1::GetSurface**</span><span class="sxs-lookup"><span data-stu-id="3d8e5-197">**ID2D1Bitmap1::GetSurface**</span></span>](/windows/win32/api/d2d1_1/nf-d2d1_1-id2d1bitmap1-getsurface)

<span data-ttu-id="3d8e5-198">Tenga en cuenta que [**CreateBitmapFromWicBitmap**](id2d1devicecontext-createbitmapfromwicbitmap-overload.md) toma [**IWICBitmapSource**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapsource) como una interfaz; sin embargo, en Windows 8.1 WIC no admite la obtención de datos comprimidos en bloques de **IWICBitmapSource** y no hay ningún formato de píxel de WIC correspondiente al formato de DXGI \_ \_ BC1 \_ UNORM, etc. En su lugar, **CreateBitmapFromWicBitmap** determina si **IWICBitmapSource** es un [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) de DDS válido y carga directamente los datos comprimidos del bloque.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-198">Note that [**CreateBitmapFromWicBitmap**](id2d1devicecontext-createbitmapfromwicbitmap-overload.md) takes [**IWICBitmapSource**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapsource) as an interface; however in Windows 8.1 WIC does not support obtaining block compressed data from **IWICBitmapSource**, and there is no WIC pixel format corresponding to DXGI\_FORMAT\_BC1\_UNORM, etc. Instead, **CreateBitmapFromWicBitmap** determines if the **IWICBitmapSource** is a valid DDS [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) and directly loads the block compressed data.</span></span> <span data-ttu-id="3d8e5-199">Puede especificar explícitamente el formato de píxel en el [**D2D1 \_ Bitmap \_ PROPERTIES1**](/windows/desktop/api/D2D1_1/ns-d2d1_1-d2d1_bitmap_properties1) struct o permitir que Direct2D determine automáticamente el formato correcto.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-199">You can either explicitly specify the pixel format in the [**D2D1\_BITMAP\_PROPERTIES1**](/windows/desktop/api/D2D1_1/ns-d2d1_1-d2d1_bitmap_properties1) struct, or allow Direct2D to automatically determine the correct format.</span></span>

### <a name="windows-imaging-component-apis"></a><span data-ttu-id="3d8e5-200">API de componentes de Windows Imaging</span><span class="sxs-lookup"><span data-stu-id="3d8e5-200">Windows Imaging Component APIs</span></span>

<span data-ttu-id="3d8e5-201">El componente de creación de imágenes de Windows (WIC) agrega un nuevo códec DDS en Windows 8.1.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-201">The Windows Imaging Component (WIC) adds a new DDS codec in Windows 8.1.</span></span> <span data-ttu-id="3d8e5-202">Además, agrega nuevas interfaces que admiten el acceso a datos específicos de DDS, incluidos los datos de píxeles comprimidos en bloques:</span><span class="sxs-lookup"><span data-stu-id="3d8e5-202">In addition, it adds new interfaces that support accessing DDS-specific data, including block compressed pixel data:</span></span>

-   [<span data-ttu-id="3d8e5-203">**IWICDdsDecoder**</span><span class="sxs-lookup"><span data-stu-id="3d8e5-203">**IWICDdsDecoder**</span></span>](/windows/desktop/api/wincodec/nn-wincodec-iwicddsdecoder)
-   [<span data-ttu-id="3d8e5-204">**IWICDdsEncoder**</span><span class="sxs-lookup"><span data-stu-id="3d8e5-204">**IWICDdsEncoder**</span></span>](/windows/desktop/api/wincodec/nn-wincodec-iwicddsencoder)
-   [<span data-ttu-id="3d8e5-205">**IWICDdsFrameDecode**</span><span class="sxs-lookup"><span data-stu-id="3d8e5-205">**IWICDdsFrameDecode**</span></span>](/windows/desktop/api/wincodec/nn-wincodec-iwicddsframedecode)

### <a name="block-compressed-wic-pixel-formats"></a><span data-ttu-id="3d8e5-206">Bloquear formatos de píxeles WIC comprimidos</span><span class="sxs-lookup"><span data-stu-id="3d8e5-206">Block Compressed WIC pixel formats</span></span>

<span data-ttu-id="3d8e5-207">No hay nuevos formatos de píxeles comprimidos de bloque WIC en Windows 8.1.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-207">There are no new WIC block compressed pixel formats in Windows 8.1.</span></span> <span data-ttu-id="3d8e5-208">En su lugar, si obtiene un [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) del descodificador de DDS y llama a [**copyPixels**](/windows/desktop/api/wincodec/nf-wincodec-iwicbitmapsource-copypixels), recibirá píxeles estándar sin comprimir, como WICPixelFormat32bppPBGRA.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-208">Instead, if you obtain an [**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) from the DDS decoder and call [**CopyPixels**](/windows/desktop/api/wincodec/nf-wincodec-iwicbitmapsource-copypixels), you will receive standard uncompressed pixels such as WICPixelFormat32bppPBGRA.</span></span> <span data-ttu-id="3d8e5-209">Puede usar [**IWICDdsFrameDecode:: CopyBlocks**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsframedecode-copyblocks) para obtener los datos comprimidos de bloques sin formato en forma de búfer de memoria de un archivo DDS.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-209">You can use [**IWICDdsFrameDecode::CopyBlocks**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsframedecode-copyblocks) to obtain the raw block compressed data in the form of a memory buffer from a DDS file.</span></span>

### <a name="multi-frame-dds-access"></a><span data-ttu-id="3d8e5-210">Acceso a DDS de varios marcos</span><span class="sxs-lookup"><span data-stu-id="3d8e5-210">Multi-frame DDS access</span></span>

<span data-ttu-id="3d8e5-211">El formato de archivo DDS permite almacenar varias imágenes relacionadas en un único archivo.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-211">The DDS file format allows for multiple related images to be stored in a single file.</span></span> <span data-ttu-id="3d8e5-212">Por ejemplo, un archivo DDS puede contener un mapa, una textura de volumen o una matriz de textura, y todos ellos pueden ser mipmapped.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-212">For example, a DDS file may contain a cubemap, volume texture, or texture array, all of which can be mipmapped.</span></span> <span data-ttu-id="3d8e5-213">En Direct3D, estas varias imágenes se exponen como Subrecursos.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-213">In Direct3D, these multiple images are exposed as subresources.</span></span> <span data-ttu-id="3d8e5-214">En WIC, se exponen varias imágenes como marcos ([**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) y [**IWICBitmapFrameEncode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframeencode)).</span><span class="sxs-lookup"><span data-stu-id="3d8e5-214">In WIC, multiple images are exposed as frames ([**IWICBitmapFrameDecode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframedecode) and [**IWICBitmapFrameEncode**](/windows/desktop/api/wincodec/nn-wincodec-iwicbitmapframeencode)).</span></span>

<span data-ttu-id="3d8e5-215">WIC solo admite la noción de una matriz de fotogramas unidimensional, mientras que DDS admite tres dimensiones independientes (aunque solo se pueden usar dos en un archivo).</span><span class="sxs-lookup"><span data-stu-id="3d8e5-215">WIC only supports the notion of a single dimensional array of frames, while DDS supports three independent dimensions (although only two may be used in any one file).</span></span> <span data-ttu-id="3d8e5-216">WIC proporciona métodos útiles para ayudar con la asignación entre un subrecurso DDS y un marco WIC.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-216">WIC provides convenience methods to assist with mapping between a DDS subresource and WIC frame.</span></span> <span data-ttu-id="3d8e5-217">Para la descodificación, [**IWICDdsDecoder:: GetFrame**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsdecoder-getframe) le permite especificar el índice de matriz, el nivel de MIP y el índice de segmento del subrecurso, y devuelve el marco WIC correcto.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-217">For decoding, [**IWICDdsDecoder::GetFrame**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsdecoder-getframe) lets you specify the array index, mip level and slice index of the subresource, and returns the correct WIC frame.</span></span>

<span data-ttu-id="3d8e5-218">Para la codificación, [**IWICDdsEncoder:: CreateNewFrame**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-createnewframe) calcula el índice de matriz resultante, el nivel de MIP y el índice de segmento cuando se crea un nuevo marco.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-218">For encoding, [**IWICDdsEncoder::CreateNewFrame**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-createnewframe) computes the resulting array index, mip level and slice index when you create a new frame.</span></span> <span data-ttu-id="3d8e5-219">Debe haber llamado primero a [**IWICDdsEncoder:: SetParameters**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-setparameters) para definir los parámetros de archivo específicos de DDS.</span><span class="sxs-lookup"><span data-stu-id="3d8e5-219">You must have first called [**IWICDdsEncoder::SetParameters**](/windows/desktop/api/wincodec/nf-wincodec-iwicddsencoder-setparameters) to define the DDS-specific file parameters.</span></span>

## <a name="related-topics"></a><span data-ttu-id="3d8e5-220">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="3d8e5-220">Related topics</span></span>

<dl> <dt>

<span data-ttu-id="3d8e5-221">[Cómo: Exportar una textura para usarla con aplicaciones de Direct2D o Javascript](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120))</span><span class="sxs-lookup"><span data-stu-id="3d8e5-221">[How to: Export a Texture for Use with Direct2D or Javascipt Apps](/previous-versions/visualstudio/visual-studio-2013/dn392693(v=vs.120))</span></span>
</dt> <dt>

[<span data-ttu-id="3d8e5-222">Referencia de DDS</span><span class="sxs-lookup"><span data-stu-id="3d8e5-222">Reference for DDS</span></span>](/windows/desktop/direct3ddds/dx-graphics-dds-reference)
</dt> <dt>

[<span data-ttu-id="3d8e5-223">Compresión de bloque</span><span class="sxs-lookup"><span data-stu-id="3d8e5-223">Block Compression</span></span>](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-resources-block-compression)
</dt> </dl>

 

 