---
title: Usar WER
description: A partir de Windows Vista, Windows proporciona errores de bloqueo, no respuesta y de error de kernel de forma predeterminada sin necesidad de realizar cambios en la aplicación.
ms.assetid: c096cd89-e3a7-4959-a35f-40e6168f277e
keywords:
- Informe de errores de Windows Informe de errores de Windows, mediante
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 655bed6d11757d7d4e08cd00ac47479e1246f96b
ms.sourcegitcommit: 803f3ccd65bdefe36bd851b9c6e7280be9489016
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/17/2020
ms.locfileid: "104420531"
---
# <a name="using-wer"></a><span data-ttu-id="d80c1-104">Usar WER</span><span class="sxs-lookup"><span data-stu-id="d80c1-104">Using WER</span></span>

<span data-ttu-id="d80c1-105">A partir de Windows Vista, Windows proporciona errores de bloqueo, no respuesta y de error de kernel de forma predeterminada sin necesidad de realizar cambios en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d80c1-105">Beginning with Windows Vista, Windows provides crash, non-response, and kernel fault error reporting by default without requiring changes to your application.</span></span> <span data-ttu-id="d80c1-106">El informe incluirá información de volcado del montón y del minivolcado, si es necesario.</span><span class="sxs-lookup"><span data-stu-id="d80c1-106">The report will include minidump and heap dump information if required.</span></span> <span data-ttu-id="d80c1-107">En su lugar, las aplicaciones usan la API de WER para enviar informes de problemas específicos de la aplicación a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d80c1-107">Applications instead use the WER API to send application-specific problem reports to Microsoft.</span></span>

<span data-ttu-id="d80c1-108">Dado que Windows notifica automáticamente las excepciones no controladas, la aplicación no debe controlar las excepciones graves.</span><span class="sxs-lookup"><span data-stu-id="d80c1-108">Because Windows automatically reports unhandled exceptions, application should not handle fatal exceptions.</span></span> <span data-ttu-id="d80c1-109">Si el proceso de error o no responde es interactivo, WER muestra una interfaz de usuario que informa al usuario del problema.</span><span class="sxs-lookup"><span data-stu-id="d80c1-109">If the faulting or not-responding process is interactive, WER displays a user interface informing the user of the problem.</span></span> <span data-ttu-id="d80c1-110">Una aplicación se considera que no responde si no responde a los mensajes de Windows durante cinco segundos mientras el usuario está intentando interactuar con la aplicación.</span><span class="sxs-lookup"><span data-stu-id="d80c1-110">An application is considered unresponsive if it does not respond to Windows messages for five seconds while the user is trying to interact with the application.</span></span>

## <a name="windows-error-reporting-flow-for-crashes-non-response-and-kernel-faults"></a><span data-ttu-id="d80c1-111">Informe de errores de Windows flujo de bloqueos, no respuesta y errores de kernel</span><span class="sxs-lookup"><span data-stu-id="d80c1-111">Windows Error Reporting flow for crashes, non-response, and kernel faults</span></span>

<span data-ttu-id="d80c1-112">A continuación se muestran los pasos que se producen para un bloqueo de aplicación, una no respuesta o un error del kernel.</span><span class="sxs-lookup"><span data-stu-id="d80c1-112">The following shows the steps that occur for an application crash, non-response, or kernel fault.</span></span>

1.  <span data-ttu-id="d80c1-113">Se produce el evento problemático.</span><span class="sxs-lookup"><span data-stu-id="d80c1-113">The problem event occurs.</span></span>
2.  <span data-ttu-id="d80c1-114">El sistema operativo invoca WER.</span><span class="sxs-lookup"><span data-stu-id="d80c1-114">The operating system invokes WER.</span></span>
3.  <span data-ttu-id="d80c1-115">WER recopila los datos, crea un informe y solicita el consentimiento del usuario (si es necesario).</span><span class="sxs-lookup"><span data-stu-id="d80c1-115">WER collects the data, builds a report, and prompts the user for consent (if needed).</span></span>
4.  <span data-ttu-id="d80c1-116">WER envía el informe a Microsoft (servidor Watson) si el usuario ha dado su consentimiento.</span><span class="sxs-lookup"><span data-stu-id="d80c1-116">WER sends the report to Microsoft (Watson Server) if the user consented.</span></span>
5.  <span data-ttu-id="d80c1-117">Si el servidor Watson solicita datos adicionales, WER recopila los datos y solicita el consentimiento del usuario (si es necesario).</span><span class="sxs-lookup"><span data-stu-id="d80c1-117">If the Watson server requests additional data, WER collects the data and prompts the user for consent (if needed).</span></span>
6.  <span data-ttu-id="d80c1-118">Si la aplicación se ha registrado para recuperación y reinicio, WER ejecuta las funciones de devolución de llamada registradas mientras los datos se comprimen y se envían a Microsoft (si el usuario ha dado su consentimiento).</span><span class="sxs-lookup"><span data-stu-id="d80c1-118">If the application has registered for recovery and restart, WER executes the registered callback functions while the data is compressed and sent to Microsoft (if the user consented).</span></span>
7.  <span data-ttu-id="d80c1-119">Si una respuesta al problema está disponible en Microsoft, se le notificará al usuario.</span><span class="sxs-lookup"><span data-stu-id="d80c1-119">If a response to the problem is available from Microsoft, the user is notified.</span></span>

<span data-ttu-id="d80c1-120">Las aplicaciones pueden utilizar las siguientes funciones para personalizar el contenido del informe que se envía a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d80c1-120">Applications can use the following functions to customize the contents of the report that is sent to Microsoft.</span></span> <span data-ttu-id="d80c1-121">Las funciones de registro indican a WER que incluya los archivos y bloques de memoria específicos en el informe de errores que crea.</span><span class="sxs-lookup"><span data-stu-id="d80c1-121">The registration functions tell WER to include the specific files and memory blocks in the error report that it creates.</span></span>

-   [<span data-ttu-id="d80c1-122">**WerRegisterFile**</span><span class="sxs-lookup"><span data-stu-id="d80c1-122">**WerRegisterFile**</span></span>](/windows/desktop/api/Werapi/nf-werapi-werregisterfile)
-   [<span data-ttu-id="d80c1-123">**WerRegisterMemoryBlock**</span><span class="sxs-lookup"><span data-stu-id="d80c1-123">**WerRegisterMemoryBlock**</span></span>](/windows/desktop/api/Werapi/nf-werapi-werregistermemoryblock)
-   [<span data-ttu-id="d80c1-124">**WerSetFlags**</span><span class="sxs-lookup"><span data-stu-id="d80c1-124">**WerSetFlags**</span></span>](/windows/desktop/api/Werapi/nf-werapi-wersetflags)
-   [<span data-ttu-id="d80c1-125">**WerUnregisterFile**</span><span class="sxs-lookup"><span data-stu-id="d80c1-125">**WerUnregisterFile**</span></span>](/windows/desktop/api/Werapi/nf-werapi-werunregisterfile)
-   [<span data-ttu-id="d80c1-126">**WerUnregisterMemoryBlock**</span><span class="sxs-lookup"><span data-stu-id="d80c1-126">**WerUnregisterMemoryBlock**</span></span>](/windows/desktop/api/Werapi/nf-werapi-werunregistermemoryblock)
-   [<span data-ttu-id="d80c1-127">**WerGetFlags**</span><span class="sxs-lookup"><span data-stu-id="d80c1-127">**WerGetFlags**</span></span>](/windows/desktop/api/Werapi/nf-werapi-wergetflags)

## <a name="windows-error-reporting-flow-for-generic-event-reporting"></a><span data-ttu-id="d80c1-128">Flujo de Informe de errores de Windows para informes de eventos genéricos</span><span class="sxs-lookup"><span data-stu-id="d80c1-128">Windows Error Reporting flow for generic event reporting</span></span>

<span data-ttu-id="d80c1-129">En los pasos siguientes se muestra cómo las aplicaciones pueden obtener un informe de errores de una condición de error no grave.</span><span class="sxs-lookup"><span data-stu-id="d80c1-129">The following steps show how applications can get an error report for a non-fatal error condition.</span></span>

1.  <span data-ttu-id="d80c1-130">Se produce el evento de problema no grave.</span><span class="sxs-lookup"><span data-stu-id="d80c1-130">The non-fatal problem event occurs.</span></span>
2.  <span data-ttu-id="d80c1-131">La aplicación reconoce el evento y utiliza la siguiente secuencia de llamadas a función para generar el informe.</span><span class="sxs-lookup"><span data-stu-id="d80c1-131">The application recognizes the event and uses the following sequence of function calls to generate the report.</span></span>
    1.  <span data-ttu-id="d80c1-132">Llame a la función [**WerReportCreate**](/windows/desktop/api/Werapi/nf-werapi-werreportcreate) para crear el informe.</span><span class="sxs-lookup"><span data-stu-id="d80c1-132">Call the [**WerReportCreate**](/windows/desktop/api/Werapi/nf-werapi-werreportcreate) function to create the report.</span></span>
    2.  <span data-ttu-id="d80c1-133">Llame a la función [**WerReportSetParameter**](/windows/desktop/api/Werapi/nf-werapi-werreportsetparameter) para establecer los parámetros de informe.</span><span class="sxs-lookup"><span data-stu-id="d80c1-133">Call the [**WerReportSetParameter**](/windows/desktop/api/Werapi/nf-werapi-werreportsetparameter) function to set the report parameters.</span></span>
    3.  <span data-ttu-id="d80c1-134">Llame a la función [**WerReportAddFile**](/windows/desktop/api/Werapi/nf-werapi-werreportaddfile) para agregar archivos al informe.</span><span class="sxs-lookup"><span data-stu-id="d80c1-134">Call the [**WerReportAddFile**](/windows/desktop/api/Werapi/nf-werapi-werreportaddfile) function to add files to the report.</span></span>
    4.  <span data-ttu-id="d80c1-135">Llame a la función [**WerReportAddDump**](/windows/desktop/api/Werapi/nf-werapi-werreportadddump) para agregar un minivolcado al informe (si es necesario).</span><span class="sxs-lookup"><span data-stu-id="d80c1-135">Call the [**WerReportAddDump**](/windows/desktop/api/Werapi/nf-werapi-werreportadddump) function to add a minidump to the report (if needed).</span></span>
    5.  <span data-ttu-id="d80c1-136">Llame a la función [**WerReportSubmit**](/windows/desktop/api/Werapi/nf-werapi-werreportsubmit) para enviar el informe.</span><span class="sxs-lookup"><span data-stu-id="d80c1-136">Call the [**WerReportSubmit**](/windows/desktop/api/Werapi/nf-werapi-werreportsubmit) function to send the report.</span></span>
    6.  <span data-ttu-id="d80c1-137">Llame a [**WerReportCloseHandle**](/windows/desktop/api/Werapi/nf-werapi-werreportclosehandle) para liberar recursos.</span><span class="sxs-lookup"><span data-stu-id="d80c1-137">Call the [**WerReportCloseHandle**](/windows/desktop/api/Werapi/nf-werapi-werreportclosehandle) to free resources.</span></span>
3.  <span data-ttu-id="d80c1-138">En función de las opciones específicas que se usen al llamar a las funciones en el paso 2, WER finalizará el informe de errores.</span><span class="sxs-lookup"><span data-stu-id="d80c1-138">Depending on the specific options used when calling the functions in step 2, WER will finish the error reporting.</span></span> <span data-ttu-id="d80c1-139">WER garantizará que los informes se realicen de acuerdo con las directivas establecidas por el usuario.</span><span class="sxs-lookup"><span data-stu-id="d80c1-139">WER will ensure that the reporting is done in accordance with the policies set by the user.</span></span> <span data-ttu-id="d80c1-140">Por ejemplo, WER enviará el informe a Microsoft, pondrá en cola el informe y mostrará las interfaces de usuario adecuadas al usuario.</span><span class="sxs-lookup"><span data-stu-id="d80c1-140">For example, WER will send the report to Microsoft, queue the report, and show the appropriate user interfaces to the user.</span></span>

## <a name="excluding-an-application-from-windows-error-reporting"></a><span data-ttu-id="d80c1-141">Excluir una aplicación de Informe de errores de Windows</span><span class="sxs-lookup"><span data-stu-id="d80c1-141">Excluding an application from Windows Error Reporting</span></span>

<span data-ttu-id="d80c1-142">Para excluir la aplicación de informe de errores de Windows, utilice la función [**WerAddExcludedApplication**](/windows/desktop/api/Werapi/nf-werapi-weraddexcludedapplication) .</span><span class="sxs-lookup"><span data-stu-id="d80c1-142">To exclude your application from Windows error reporting, use the [**WerAddExcludedApplication**](/windows/desktop/api/Werapi/nf-werapi-weraddexcludedapplication) function.</span></span> <span data-ttu-id="d80c1-143">Para restaurar los informes de errores de la aplicación, utilice la función [**WerRemoveExcludedApplication**](/windows/desktop/api/Werapi/nf-werapi-werremoveexcludedapplication) .</span><span class="sxs-lookup"><span data-stu-id="d80c1-143">To restore error reporting for your application, use the [**WerRemoveExcludedApplication**](/windows/desktop/api/Werapi/nf-werapi-werremoveexcludedapplication) function.</span></span>

## <a name="automatically-recovering-data-and-restarting-a-faulted-application"></a><span data-ttu-id="d80c1-144">Recuperación automática de datos y reinicio de una aplicación con errores</span><span class="sxs-lookup"><span data-stu-id="d80c1-144">Automatically recovering data and restarting a faulted application</span></span>

<span data-ttu-id="d80c1-145">Una aplicación puede usar la recuperación de aplicaciones y el reinicio para guardar los datos y la información de estado antes de que se cierre la aplicación debido a una excepción no controlada o cuando la aplicación deje de responder.</span><span class="sxs-lookup"><span data-stu-id="d80c1-145">An application can use Application Recovery and Restart to save data and state information before the application exits due to an unhandled exception or when the application stops responding.</span></span> <span data-ttu-id="d80c1-146">También se reinicia la aplicación, si se solicita.</span><span class="sxs-lookup"><span data-stu-id="d80c1-146">The application is also restarted, if requested.</span></span> <span data-ttu-id="d80c1-147">Para obtener más información, consulte [recuperación y reinicio de aplicaciones](/windows/desktop/Recovery/application-recovery-and-restart-portal).</span><span class="sxs-lookup"><span data-stu-id="d80c1-147">For details, see [Application Recovery and Restart](/windows/desktop/Recovery/application-recovery-and-restart-portal).</span></span>

## <a name="legacy-api"></a><span data-ttu-id="d80c1-148">API heredada</span><span class="sxs-lookup"><span data-stu-id="d80c1-148">Legacy API</span></span>

<span data-ttu-id="d80c1-149">Una aplicación puede informar de un error mediante una llamada a la función [**ReportFault**](/windows/desktop/api/ErrorRep/nf-errorrep-reportfault) .</span><span class="sxs-lookup"><span data-stu-id="d80c1-149">An application can report a fault by calling the [**ReportFault**](/windows/desktop/api/ErrorRep/nf-errorrep-reportfault) function.</span></span> <span data-ttu-id="d80c1-150">Sin embargo, no debe usar la función **ReportFault** a menos que tenga un requisito muy específico de que el comportamiento de informe de errores predeterminado del sistema operativo no pueda cumplir.</span><span class="sxs-lookup"><span data-stu-id="d80c1-150">However, you should not use the **ReportFault** function unless you have a very specific requirement that the operating system's default error reporting behavior cannot fulfill.</span></span>

<span data-ttu-id="d80c1-151">Si el informe de errores está habilitado, el sistema muestra un cuadro de diálogo al usuario que indica que la aplicación ha encontrado un problema y se cerrará.</span><span class="sxs-lookup"><span data-stu-id="d80c1-151">If error reporting is enabled, the system displays a dialog box to the user indicating that the application has encountered a problem and will close.</span></span> <span data-ttu-id="d80c1-152">Si hay un depurador configurado en la clave **HKEY del \_ software del \_ equipo local \\ \\ Microsoft \\ Windows NT \\ CurrentVersion \\ AEDebug** , el usuario tiene la opción de iniciar el depurador.</span><span class="sxs-lookup"><span data-stu-id="d80c1-152">If there is a debugger configured in the **HKEY\_LOCAL\_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\AeDebug** key, the user is given the option to launch the debugger.</span></span> <span data-ttu-id="d80c1-153">También se ofrece al usuario la opción de enviar un informe a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d80c1-153">The user is also given the option to send a report to Microsoft.</span></span> <span data-ttu-id="d80c1-154">Si el usuario envía el informe, el sistema muestra otro cuadro de diálogo que proporciona el informe al usuario para que proporcione un vínculo a más información.</span><span class="sxs-lookup"><span data-stu-id="d80c1-154">If the user sends the report, the system displays another dialog box thanking the user for the report and providing a link to more information.</span></span>

<span data-ttu-id="d80c1-155">El sistema de informes de errores admite los siguientes modos de funcionamiento.</span><span class="sxs-lookup"><span data-stu-id="d80c1-155">The error reporting system supports the following operation modes.</span></span>



| <span data-ttu-id="d80c1-156">Modo de operación</span><span class="sxs-lookup"><span data-stu-id="d80c1-156">Operation mode</span></span>          | <span data-ttu-id="d80c1-157">Descripción</span><span class="sxs-lookup"><span data-stu-id="d80c1-157">Description</span></span>                                                                                                                                                                                                                                                                                                                                  |
|-------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="d80c1-158">Informes de memoria compartida</span><span class="sxs-lookup"><span data-stu-id="d80c1-158">Shared memory reporting</span></span> | <span data-ttu-id="d80c1-159">Si el contexto de seguridad de la aplicación es el mismo que el contexto de seguridad del usuario que ha iniciado sesión, el sistema de informes de errores utiliza un bloque de memoria compartida para la comunicación.</span><span class="sxs-lookup"><span data-stu-id="d80c1-159">If the application's security context is the same as the security context of the logged-on user, the error reporting system uses a block of shared memory for communication.</span></span> <span data-ttu-id="d80c1-160">Este modo no se puede usar con el modo de informe de manifiestos.</span><span class="sxs-lookup"><span data-stu-id="d80c1-160">This mode cannot be used with manifest reporting mode.</span></span><br/>                                                                                               |
| <span data-ttu-id="d80c1-161">Informes de manifiestos</span><span class="sxs-lookup"><span data-stu-id="d80c1-161">Manifest reporting</span></span>      | <span data-ttu-id="d80c1-162">Si el contexto de seguridad de la aplicación no es el mismo que el contexto de seguridad del usuario que ha iniciado sesión, el sistema de informes de errores utiliza un archivo para la comunicación.</span><span class="sxs-lookup"><span data-stu-id="d80c1-162">If the application's security context is not the same as the security context of the logged-on user, the error reporting system uses a file for communication.</span></span> <span data-ttu-id="d80c1-163">Este modo también se utiliza para notificar a las aplicaciones que no responden y a los errores del kernel.</span><span class="sxs-lookup"><span data-stu-id="d80c1-163">This mode is also used for reporting unresponsive applications and kernel faults.</span></span> <span data-ttu-id="d80c1-164">Este modo no se puede usar con el modo de creación de informes de memoria compartida.</span><span class="sxs-lookup"><span data-stu-id="d80c1-164">This mode cannot be used with shared memory reporting mode.</span></span><br/>                      |
| <span data-ttu-id="d80c1-165">Informes de Internet</span><span class="sxs-lookup"><span data-stu-id="d80c1-165">Internet reporting</span></span>      | <span data-ttu-id="d80c1-166">El sistema de informes de errores envía todos los datos a Microsoft a través de Internet.</span><span class="sxs-lookup"><span data-stu-id="d80c1-166">The error reporting system sends all data to Microsoft through the Internet.</span></span> <span data-ttu-id="d80c1-167">Este es el modo de funcionamiento predeterminado.</span><span class="sxs-lookup"><span data-stu-id="d80c1-167">This is the default mode of operation.</span></span> <span data-ttu-id="d80c1-168">No se puede usar con el modo de informe corporativo.</span><span class="sxs-lookup"><span data-stu-id="d80c1-168">It cannot be used with corporate reporting mode.</span></span> <span data-ttu-id="d80c1-169">Este modo se usa cuando no hay ninguna ruta de acceso de carga corporativa especificada por el administrador.</span><span class="sxs-lookup"><span data-stu-id="d80c1-169">This mode is used when there is no corporate upload path specified by the administrator.</span></span><br/>                                                                     |
| <span data-ttu-id="d80c1-170">Informes corporativos</span><span class="sxs-lookup"><span data-stu-id="d80c1-170">Corporate reporting</span></span>     | <span data-ttu-id="d80c1-171">El sistema de informes de errores envía todos los datos a un recurso compartido de archivos en lugar de cargarlos directamente en Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d80c1-171">The error reporting system sends all data to a file share instead of uploading it directly to Microsoft.</span></span> <span data-ttu-id="d80c1-172">Esto permite a los administradores de TI corporativos revisar los datos antes de enviarlos a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d80c1-172">This allows corporate IT managers to review data before it is sent to Microsoft.</span></span> <span data-ttu-id="d80c1-173">Este modo se utiliza cuando hay una ruta de acceso de carga corporativa especificada por el administrador.</span><span class="sxs-lookup"><span data-stu-id="d80c1-173">This mode is used when there is a corporate upload path specified by the administrator.</span></span> <span data-ttu-id="d80c1-174">No se puede usar con el modo de informes de Internet.</span><span class="sxs-lookup"><span data-stu-id="d80c1-174">It cannot be used with Internet reporting mode.</span></span><br/> |
| <span data-ttu-id="d80c1-175">Informes sin periféricos</span><span class="sxs-lookup"><span data-stu-id="d80c1-175">Headless reporting</span></span>      | <span data-ttu-id="d80c1-176">El sistema de informe de errores no mostrará ningún cuadro de diálogo al usuario.</span><span class="sxs-lookup"><span data-stu-id="d80c1-176">The error reporting system will not display any dialog boxes to the user.</span></span> <span data-ttu-id="d80c1-177">Esto permite a los administradores de TI corporativos recopilar informes de errores de sus empleados en todo momento.</span><span class="sxs-lookup"><span data-stu-id="d80c1-177">This allows corporate IT managers to collect error reports from their employees at all times.</span></span> <span data-ttu-id="d80c1-178">Este modo se usa cuando el administrador habilita los informes, pero la notificación está deshabilitada.</span><span class="sxs-lookup"><span data-stu-id="d80c1-178">This mode is used when reporting is enabled by the administrator, but notification is disabled.</span></span> <span data-ttu-id="d80c1-179">Solo se puede usar con el modo de informe corporativo.</span><span class="sxs-lookup"><span data-stu-id="d80c1-179">It can be used only with corporate reporting mode.</span></span><br/>        |



 

<span data-ttu-id="d80c1-180">Para excluir la aplicación de los informes de errores, use la función [**AddERExcludedApplication**](/windows/desktop/api/ErrorRep/nf-errorrep-adderexcludedapplicationa) .</span><span class="sxs-lookup"><span data-stu-id="d80c1-180">To exclude your application from error reporting, use the [**AddERExcludedApplication**](/windows/desktop/api/ErrorRep/nf-errorrep-adderexcludedapplicationa) function.</span></span>

 

