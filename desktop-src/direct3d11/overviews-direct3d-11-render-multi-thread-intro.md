---
title: Introducción a multithreading en Direct3D 11
description: El multithreading está diseñado para mejorar el rendimiento mediante la realización de trabajos mediante uno o varios subprocesos al mismo tiempo.
ms.assetid: b4bef1e4-8d34-455c-8aed-01af974c66c8
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 527b78d8b29a507247c8eb067c20739004ace687
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104358995"
---
# <a name="introduction-to-multithreading-in-direct3d-11"></a><span data-ttu-id="75840-103">Introducción a multithreading en Direct3D 11</span><span class="sxs-lookup"><span data-stu-id="75840-103">Introduction to Multithreading in Direct3D 11</span></span>

<span data-ttu-id="75840-104">El multithreading está diseñado para mejorar el rendimiento mediante la realización de trabajos mediante uno o varios subprocesos al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="75840-104">Multithreading is designed to improve performance by performing work using one or more threads at the same time.</span></span>

<span data-ttu-id="75840-105">En el pasado, a menudo esto se ha hecho generando un único subproceso principal para la representación y uno o más subprocesos para realizar el trabajo de preparación, como la creación de objetos, la carga, el procesamiento, etc.</span><span class="sxs-lookup"><span data-stu-id="75840-105">In the past, this has often been done by generating a single main thread for rendering and one or more threads for doing preparation work such as object creation, loading, processing, and so on.</span></span> <span data-ttu-id="75840-106">Sin embargo, con la sincronización integrada en Direct3D 11, el objetivo detrás de multithreading es utilizar cada ciclo de CPU y GPU sin hacer que un procesador espere a otro procesador (en particular, no hacer que la GPU espere porque afecta directamente a la velocidad de fotogramas).</span><span class="sxs-lookup"><span data-stu-id="75840-106">However, with the built in synchronization in Direct3D 11, the goal behind multithreading is to utilize every CPU and GPU cycle without making a processor wait for another processor (particularly not making the GPU wait because it directly impacts frame rate).</span></span> <span data-ttu-id="75840-107">Al hacerlo, puede generar la mayor cantidad de trabajo manteniendo la mejor velocidad de fotogramas.</span><span class="sxs-lookup"><span data-stu-id="75840-107">By doing so, you can generate the most amount of work while maintaining the best frame rate.</span></span> <span data-ttu-id="75840-108">El concepto de un solo fotograma para la representación ya no es necesario, ya que la API implementa la sincronización.</span><span class="sxs-lookup"><span data-stu-id="75840-108">The concept of a single frame for rendering is no longer as necessary since the API implements synchronization.</span></span>

<span data-ttu-id="75840-109">Multithreading requiere algún tipo de sincronización.</span><span class="sxs-lookup"><span data-stu-id="75840-109">Multithreading requires some form of synchronization.</span></span> <span data-ttu-id="75840-110">Por ejemplo, si varios subprocesos que se ejecutan en una aplicación deben tener acceso a un contexto de dispositivo único ([**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)), la aplicación debe usar algún mecanismo de sincronización, como las secciones críticas, para sincronizar el acceso a ese contexto de dispositivo.</span><span class="sxs-lookup"><span data-stu-id="75840-110">For example, if multiple threads that run in an application must access a single device context ([**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)), that application must use some synchronization mechanism, such as critical sections, to synchronize access to that device context.</span></span> <span data-ttu-id="75840-111">Esto se debe a que el procesamiento de los comandos de representación (que normalmente se realizan en la GPU) y la generación de los comandos de representación (normalmente se realiza en la CPU a través de la creación de objetos, la carga de datos, el cambio de estado, el procesamiento de datos) suelen usar los mismos recursos (texturas, sombreadores, estado de canalización, etc.)</span><span class="sxs-lookup"><span data-stu-id="75840-111">This is because processing of the render commands (generally done on the GPU) and generating the render commands (generally done on the CPU through object creation, data loading, state changing, data processing) often use the same resources (textures, shaders, pipeline state, and so on).</span></span> <span data-ttu-id="75840-112">La organización del trabajo entre varios subprocesos requiere sincronización para impedir que un subproceso modifique o lea datos que otro subproceso está modificando.</span><span class="sxs-lookup"><span data-stu-id="75840-112">Organizing the work across multiple threads requires synchronization to prevent one thread from modifying or reading data that is being modified by another thread.</span></span>

<span data-ttu-id="75840-113">Aunque el uso de un contexto de dispositivo ([**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)) no es seguro para subprocesos, el uso de un dispositivo Direct3D 11 ([**ID3D11Device**](/windows/desktop/api/D3D11/nn-d3d11-id3d11device)) es seguro para subprocesos.</span><span class="sxs-lookup"><span data-stu-id="75840-113">While the use of a device context ([**ID3D11DeviceContext**](/windows/desktop/api/D3D11/nn-d3d11-id3d11devicecontext)) is not thread-safe, the use of a Direct3D 11 device ([**ID3D11Device**](/windows/desktop/api/D3D11/nn-d3d11-id3d11device)) is thread-safe.</span></span> <span data-ttu-id="75840-114">Dado que cada **ID3D11DeviceContext** es de un solo subproceso, solo un subproceso puede llamar a **ID3D11DeviceContext** a la vez.</span><span class="sxs-lookup"><span data-stu-id="75840-114">Because each **ID3D11DeviceContext** is single threaded, only one thread can call a **ID3D11DeviceContext** at a time.</span></span> <span data-ttu-id="75840-115">Si varios subprocesos deben tener acceso a un único **ID3D11DeviceContext**, deben usar algún mecanismo de sincronización, como las secciones críticas, para sincronizar el acceso a ese **ID3D11DeviceContext**.</span><span class="sxs-lookup"><span data-stu-id="75840-115">If multiple threads must access a single **ID3D11DeviceContext**, they must use some synchronization mechanism, such as critical sections, to synchronize access to that **ID3D11DeviceContext**.</span></span> <span data-ttu-id="75840-116">Sin embargo, no es necesario que varios subprocesos usen secciones críticas o primitivas de sincronización para tener acceso a un único **ID3D11Device**.</span><span class="sxs-lookup"><span data-stu-id="75840-116">However, multiple threads are not required to use critical sections or synchronization primitives to access a single **ID3D11Device**.</span></span> <span data-ttu-id="75840-117">Por lo tanto, si una aplicación usa **ID3D11Device** para crear objetos de recursos, no es necesario que la aplicación use la sincronización para crear varios objetos de recursos al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="75840-117">Therefore, if an application uses **ID3D11Device** to create resource objects, that application is not required to use synchronization to create multiple resource objects at the same time.</span></span>

<span data-ttu-id="75840-118">La compatibilidad con multithreading divide la API en dos áreas funcionales distintas:</span><span class="sxs-lookup"><span data-stu-id="75840-118">Multithreading support divides the API into two distinct functional areas:</span></span>

-   [<span data-ttu-id="75840-119">Creación de objetos con multithreading</span><span class="sxs-lookup"><span data-stu-id="75840-119">Object Creation with Multithreading</span></span>](overviews-direct3d-11-render-multi-thread-create.md)
-   [<span data-ttu-id="75840-120">Representación inmediata y diferida</span><span class="sxs-lookup"><span data-stu-id="75840-120">Immediate and Deferred Rendering</span></span>](overviews-direct3d-11-render-multi-thread-render.md)

<span data-ttu-id="75840-121">El rendimiento del multithreading depende de la compatibilidad del controlador.</span><span class="sxs-lookup"><span data-stu-id="75840-121">Multithreading performance depends on the driver support.</span></span> <span data-ttu-id="75840-122">[Cómo: comprobar la compatibilidad con controladores](overviews-direct3d-11-render-multi-thread-support.md) proporciona más información sobre cómo consultar el controlador y qué significan los resultados.</span><span class="sxs-lookup"><span data-stu-id="75840-122">[How To: Check for Driver Support](overviews-direct3d-11-render-multi-thread-support.md) provides more information about querying the driver and what the results mean.</span></span>

<span data-ttu-id="75840-123">Direct3D 11 se ha diseñado desde el principio para admitir el multithreading.</span><span class="sxs-lookup"><span data-stu-id="75840-123">Direct3D 11 has been designed from the ground up to support multithreading.</span></span> <span data-ttu-id="75840-124">Direct3D 10 implementa compatibilidad limitada para el multithreading mediante el [nivel seguro para subprocesos](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-api-features-layers).</span><span class="sxs-lookup"><span data-stu-id="75840-124">Direct3D 10 implements limited support for multithreading using the [thread-safe layer](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-api-features-layers).</span></span> <span data-ttu-id="75840-125">En esta página se enumeran las diferencias de comportamiento entre las dos versiones de DirectX: [diferencias de subprocesos entre versiones de Direct3D](overviews-direct3d-11-render-multi-thread-differences.md).</span><span class="sxs-lookup"><span data-stu-id="75840-125">This page lists the behavior differences between the two versions of DirectX: [Threading Differences between Direct3D Versions](overviews-direct3d-11-render-multi-thread-differences.md).</span></span>

## <a name="multithreading-and-dxgi"></a><span data-ttu-id="75840-126">Multithreading y DXGI</span><span class="sxs-lookup"><span data-stu-id="75840-126">Multithreading and DXGI</span></span>

<span data-ttu-id="75840-127">Solo un subproceso a la vez debe utilizar el contexto inmediato.</span><span class="sxs-lookup"><span data-stu-id="75840-127">Only one thread at a time should use the immediate context.</span></span> <span data-ttu-id="75840-128">Sin embargo, la aplicación también debe usar ese mismo subproceso para las operaciones de infraestructura de gráficos de Microsoft DirectX (DXGI), especialmente cuando la aplicación realiza llamadas a [**IDXGISwapChain::P método reenviado**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-present) .</span><span class="sxs-lookup"><span data-stu-id="75840-128">However, your application should also use that same thread for Microsoft DirectX Graphics Infrastructure (DXGI) operations, especially when the application makes calls to the [**IDXGISwapChain::Present**](/windows/desktop/api/dxgi/nf-dxgi-idxgiswapchain-present) method.</span></span>

> [!Note]  
> <span data-ttu-id="75840-129">No es válido utilizar un contexto inmediato simultáneamente con la mayoría de las funciones de la interfaz de DXGI.</span><span class="sxs-lookup"><span data-stu-id="75840-129">It is invalid to use an immediate context concurrently with most of the DXGI interface functions.</span></span> <span data-ttu-id="75840-130">En el caso de los SDK de DirectX de marzo de 2009 y versiones posteriores, las únicas funciones de DXGI que son seguras son [**AddRef**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-addref), [**Release**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-release)y [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span><span class="sxs-lookup"><span data-stu-id="75840-130">For the March 2009 and later DirectX SDKs, the only DXGI functions that are safe are [**AddRef**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-addref), [**Release**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-release), and [**QueryInterface**](/windows/desktop/api/unknwn/nf-unknwn-iunknown-queryinterface(q)).</span></span>

 

<span data-ttu-id="75840-131">Para obtener más información sobre el uso de DXGI con varios subprocesos, consulte [consideraciones de multiproceso](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span><span class="sxs-lookup"><span data-stu-id="75840-131">For more info about using DXGI with multiple threads, see [Multithread Considerations](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span></span>

## <a name="related-topics"></a><span data-ttu-id="75840-132">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="75840-132">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="75840-133">Multithreading</span><span class="sxs-lookup"><span data-stu-id="75840-133">Multithreading</span></span>](overviews-direct3d-11-render-multi-thread.md)
</dt> </dl>

 

 