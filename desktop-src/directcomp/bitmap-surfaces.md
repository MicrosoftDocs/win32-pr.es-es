---
title: Objetos Bitmap
description: En este tema se describen los tipos de contenido de mapa de bits que DirectComposition admite.
ms.assetid: BC32CF76-D5E4-4B25-AFD5-42E8DABFA0D0
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: c390778fef1ee7ad96c90a8b7706fa635f3615ff
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104421343"
---
# <a name="bitmap-objects"></a><span data-ttu-id="97534-103">Objetos Bitmap</span><span class="sxs-lookup"><span data-stu-id="97534-103">Bitmap objects</span></span>

> [!NOTE]
> <span data-ttu-id="97534-104">En el caso de las aplicaciones de Windows 10, se recomienda usar las API de Windows. UI. Composition en lugar de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="97534-104">For apps on Windows 10, we recommend using Windows.UI.Composition APIs instead of DirectComposition.</span></span> <span data-ttu-id="97534-105">Para obtener más información, consulte [modernice su aplicación de escritorio con el nivel de objetos visuales](/windows/uwp/composition/visual-layer-in-desktop-apps).</span><span class="sxs-lookup"><span data-stu-id="97534-105">For more info, see [Modernize your desktop app using the Visual layer](/windows/uwp/composition/visual-layer-in-desktop-apps).</span></span>

<span data-ttu-id="97534-106">Microsoft DirectComposition es un motor de composición de mapas de bits.</span><span class="sxs-lookup"><span data-stu-id="97534-106">Microsoft DirectComposition is a bitmap compositing engine.</span></span> <span data-ttu-id="97534-107">Permite a los desarrolladores de aplicaciones combinar varios mapas de bits y manipularlos de varias maneras para lograr animaciones y efectos visuales interesantes en una interfaz de usuario de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="97534-107">It enables application developers to combine multiple bitmaps and manipulate them in various ways to achieve interesting visual effects and animations in an application UI.</span></span> <span data-ttu-id="97534-108">En este tema se describen los tipos de contenido de mapa de bits que DirectComposition admite.</span><span class="sxs-lookup"><span data-stu-id="97534-108">This topic describes the types of bitmap content that DirectComposition supports.</span></span>

-   [<span data-ttu-id="97534-109">Contenido de mapa de bits</span><span class="sxs-lookup"><span data-stu-id="97534-109">Bitmap content</span></span>](#bitmap-content)
    -   [<span data-ttu-id="97534-110">Mapas de bits de memoria de vídeo</span><span class="sxs-lookup"><span data-stu-id="97534-110">Video memory bitmaps</span></span>](#video-memory-bitmaps)
    -   [<span data-ttu-id="97534-111">Mapas de bits de ventana</span><span class="sxs-lookup"><span data-stu-id="97534-111">Window bitmaps</span></span>](#window-bitmaps)
    -   [<span data-ttu-id="97534-112">Asociar el contenido del mapa de bits a un visual</span><span class="sxs-lookup"><span data-stu-id="97534-112">Associating bitmap content with a visual</span></span>](#associating-bitmap-content-with-a-visual)
    -   [<span data-ttu-id="97534-113">Canal alfa</span><span class="sxs-lookup"><span data-stu-id="97534-113">Alpha channel</span></span>](#alpha-channel)
-   [<span data-ttu-id="97534-114">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="97534-114">Related topics</span></span>](#related-topics)

## <a name="bitmap-content"></a><span data-ttu-id="97534-115">Contenido de mapa de bits</span><span class="sxs-lookup"><span data-stu-id="97534-115">Bitmap content</span></span>

<span data-ttu-id="97534-116">Las aplicaciones proporcionan DirectComposition con el contenido del mapa de bits para componer y animar creando objetos visuales y estableciendo después la [propiedad de contenido](basic-concepts.md) de esos objetos.</span><span class="sxs-lookup"><span data-stu-id="97534-116">Applications provide DirectComposition with the bitmap content to compose and animate by creating visual objects and then setting the [Content property](basic-concepts.md) of those objects.</span></span> <span data-ttu-id="97534-117">DirectComposition no ofrece ningún servicio de rasterización.</span><span class="sxs-lookup"><span data-stu-id="97534-117">DirectComposition does not offer any rasterization services.</span></span> <span data-ttu-id="97534-118">Una aplicación debe usar otra biblioteca de rasterización basada en software o con aceleración de hardware, como [Direct2D](../direct2d/direct2d-portal.md) o [Direct3D](/windows/desktop/direct3d11/atoc-dx-graphics-direct3d-11) , para rellenar los mapas de bits que se van a componer.</span><span class="sxs-lookup"><span data-stu-id="97534-118">An application must use some other software-based or hardware-accelerated rasterization library such as [Direct2D](../direct2d/direct2d-portal.md) or [Direct3D](/windows/desktop/direct3d11/atoc-dx-graphics-direct3d-11) to populate the bitmaps that are to be composed.</span></span> <span data-ttu-id="97534-119">Después de redactar, DirectComposition pasa el contenido del mapa de bits compuesto a [Administrador de ventanas de escritorio (DWM)](/windows/desktop/dwm/dwm-overview) para su representación en la pantalla.</span><span class="sxs-lookup"><span data-stu-id="97534-119">After composing, DirectComposition passes composed bitmap content to [Desktop Window Manager (DWM)](/windows/desktop/dwm/dwm-overview) for rendering to the screen.</span></span>

<span data-ttu-id="97534-120">**Tipos de contenido**   de mapa de bits admitidos Microsoft DirectComposition admite los siguientes tipos de mapas de bits:</span><span class="sxs-lookup"><span data-stu-id="97534-120">**Supported types of bitmap content** Microsoft DirectComposition supports the following kinds of bitmaps:</span></span>

-   [<span data-ttu-id="97534-121">Mapas de bits de memoria de vídeo</span><span class="sxs-lookup"><span data-stu-id="97534-121">Video memory bitmaps</span></span>](#video-memory-bitmaps)
-   [<span data-ttu-id="97534-122">Mapas de bits de ventana</span><span class="sxs-lookup"><span data-stu-id="97534-122">Window bitmaps</span></span>](#window-bitmaps)

### <a name="video-memory-bitmaps"></a><span data-ttu-id="97534-123">Mapas de bits de memoria de vídeo</span><span class="sxs-lookup"><span data-stu-id="97534-123">Video memory bitmaps</span></span>

<span data-ttu-id="97534-124">Un mapa de bits de memoria de vídeo se rasteriza en hardware mediante el uso de los métodos de Microsoft DirectX (incluido el modelo de interoperabilidad DX-to-GDI).</span><span class="sxs-lookup"><span data-stu-id="97534-124">A video memory bitmap is rasterized in hardware by using Microsoft DirectX methods (including the DX-to-GDI interop model).</span></span> <span data-ttu-id="97534-125">Está respaldado por superficies compartidas entre procesos que son visibles para la aplicación que realiza la llamada y DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="97534-125">It is backed by cross-process shared surfaces that are visible to the calling application and to DirectComposition.</span></span> <span data-ttu-id="97534-126">Un mapa de bits de memoria de vídeo no está sujeto a un desgarro, ya que la aplicación solo puede leer de las superficies de las que DirectComposition las texturas.</span><span class="sxs-lookup"><span data-stu-id="97534-126">A video memory bitmap is not subject to tearing because the application can only read from the surfaces that DirectComposition textures from.</span></span>

### <a name="video-content"></a><span data-ttu-id="97534-127">Contenido de vídeo</span><span class="sxs-lookup"><span data-stu-id="97534-127">Video content</span></span>

<span data-ttu-id="97534-128">Las aplicaciones pueden usar DirectComposition para crear fotogramas de vídeo que usen cadenas de intercambio sin ventanas de DirectX enlazadas a una superficie de DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="97534-128">Applications can use DirectComposition to compose video frames that use DirectX windowless swap chains that are bound to a DirectComposition surface.</span></span> <span data-ttu-id="97534-129">Conceptualmente, DirectComposition trata el contenido de vídeo como una secuencia de mapas de bits.</span><span class="sxs-lookup"><span data-stu-id="97534-129">Conceptually, DirectComposition treats video content as a sequence of bitmaps.</span></span> <span data-ttu-id="97534-130">DirectComposition no proporciona un medio para presentar fotogramas de vídeo.</span><span class="sxs-lookup"><span data-stu-id="97534-130">DirectComposition does not provide a means of presenting video frames.</span></span>

<span data-ttu-id="97534-131">DirectComposition admite cadenas de intercambio sin ventanas de DirectX, es decir, cadenas de intercambio que no están enlazadas a una ventana determinada, y permite que dos aplicaciones diferentes compartan cadenas de intercambio sin ventanas en los límites del proceso.</span><span class="sxs-lookup"><span data-stu-id="97534-131">DirectComposition supports DirectX windowless swap chains—that is, swap chains that are not bound to a particular window—and enables two different applications to share windowless swap chains across process boundaries.</span></span> <span data-ttu-id="97534-132">Compartir cadenas de intercambio sin ventanas permite escenarios de vídeo en los que la cadena de intercambio se crea en un proceso y se usa con DirectComposition en un segundo proceso.</span><span class="sxs-lookup"><span data-stu-id="97534-132">Sharing windowless swap chains enables video scenarios where the swap chain is created in one process and is used with DirectComposition in a second process.</span></span> <span data-ttu-id="97534-133">Las cadenas de intercambio sin ventanas se crean mediante el método [**IDXGIFactory2:: CreateSwapChainForCompositionSurface**](/windows/desktop/api/dxgi1_2/nf-dxgi1_2-idxgifactory2-createswapchainforcomposition) .</span><span class="sxs-lookup"><span data-stu-id="97534-133">Windowless swap chains are created using the [**IDXGIFactory2::CreateSwapChainForCompositionSurface**](/windows/desktop/api/dxgi1_2/nf-dxgi1_2-idxgifactory2-createswapchainforcomposition) method.</span></span>

<span data-ttu-id="97534-134">Para obtener más información sobre las cadenas de intercambio de DirectX, consulte [información general sobre DXGI](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span><span class="sxs-lookup"><span data-stu-id="97534-134">For more information about DirectX swap chains, see [DXGI Overview](/windows/desktop/direct3ddxgi/d3d10-graphics-programming-guide-dxgi).</span></span>

### <a name="stereo-content"></a><span data-ttu-id="97534-135">Contenido estéreo</span><span class="sxs-lookup"><span data-stu-id="97534-135">Stereo content</span></span>

<span data-ttu-id="97534-136">Conceptualmente, una cadena de intercambio estéreo consta de las superficies de infraestructura de gráficos de Microsoft DirectX (DXGI) que representan los canales izquierdo y derecho para contenido 3D estéreo.</span><span class="sxs-lookup"><span data-stu-id="97534-136">Conceptually, a stereo swap chain consists of Microsoft DirectX Graphics Infrastructure (DXGI) surfaces that represent the left and right channels for stereo 3D content.</span></span> <span data-ttu-id="97534-137">Cuando se usa una cadena de intercambio estéreo como recurso de mapa de bits para un visual, DirectComposition se compone en estéreo.</span><span class="sxs-lookup"><span data-stu-id="97534-137">When a stereo swap chain is used as the bitmap resource for a visual, DirectComposition composes in stereo.</span></span> <span data-ttu-id="97534-138">Se considera que todo el contenido no estéreo (contenido mono) tiene el mismo contenido de canal izquierdo y derecho. es decir, se usa el mismo contenido de mapa de bits para ambos canales.</span><span class="sxs-lookup"><span data-stu-id="97534-138">All non-stereo content (mono content) is considered to have identical left and right channel content; that is, the same bitmap content is used for both channels.</span></span> <span data-ttu-id="97534-139">DirectComposition compone todo el contenido de la izquierda y todo el contenido adecuado por separado.</span><span class="sxs-lookup"><span data-stu-id="97534-139">DirectComposition composes all left content and all right content separately.</span></span> <span data-ttu-id="97534-140">Si el dispositivo de pantalla no es compatible con estéreo, DirectComposition trata el canal estéreo izquierdo o derecho (en función de la aplicación) como contenido mono y se compone solo con los datos del recurso de mapa de bits.</span><span class="sxs-lookup"><span data-stu-id="97534-140">If the display device is not stereo capable, DirectComposition treats the left or right stereo channel (depending on the application) as mono content and composes using only that data for the bitmap resource.</span></span>

<span data-ttu-id="97534-141">DirectComposition no admite la creación o manipulación de contenido estéreo y no puede promover una cadena de intercambio mono a un par estéreo.</span><span class="sxs-lookup"><span data-stu-id="97534-141">DirectComposition does not support creating or manipulating stereo content, and cannot promote a mono swap chain to a stereo pair.</span></span> <span data-ttu-id="97534-142">Una aplicación debe realizar estas tareas antes de presentar el contenido estéreo de DirectX a DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="97534-142">An application must perform these tasks before presenting DirectX stereo content to DirectComposition.</span></span> <span data-ttu-id="97534-143">Además, una aplicación debe proporcionar los desplazamientos de canal izquierdo y derecho para la percepción de profundidad. DirectComposition no puede ajustar los desplazamientos de canal izquierdo y derecho para modificar la profundidad percibida del contenido estéreo de DirectX.</span><span class="sxs-lookup"><span data-stu-id="97534-143">Also, an application must provide the left and right channel offsets for depth perception; DirectComposition cannot adjust the left and right channel offsets to modify the perceived depth of DirectX stereo content.</span></span>

<span data-ttu-id="97534-144">El contenido estéreo de DirectX se compone y se conserva en DWM cuando está disponible hardware compatible con estéreo.</span><span class="sxs-lookup"><span data-stu-id="97534-144">DirectX stereo content is composed and persisted to DWM when stereo-capable hardware is available.</span></span>

### <a name="window-bitmaps"></a><span data-ttu-id="97534-145">Mapas de bits de ventana</span><span class="sxs-lookup"><span data-stu-id="97534-145">Window bitmaps</span></span>

<span data-ttu-id="97534-146">Un "mapa de bits de ventana" no es un mapa de bits real, sino que es un marcador de posición que DirectComposition reemplaza en tiempo real con rasterizaciones de ventanas secundarias o de nivel superior superpuestas.</span><span class="sxs-lookup"><span data-stu-id="97534-146">A "window bitmap" is not a real bitmap, but is a placeholder that DirectComposition replaces in real time with rasterizations of layered top-level or child windows.</span></span> <span data-ttu-id="97534-147">Un mapa de bits de ventana es similar a una miniatura de DWM, excepto en que una miniatura puede contener las contribuciones de muchas ventanas, como las ventanas que no son secundarias, mientras que un mapa de bits de la ventana de DirectComposition siempre es una representación de solo una ventana y sus elementos secundarios.</span><span class="sxs-lookup"><span data-stu-id="97534-147">A window bitmap is similar to a DWM thumbnail, except that a thumbnail can contain contributions from many windows, such as owned non-child windows, whereas a DirectComposition window bitmap is always a representation of just one window and its children.</span></span>

<span data-ttu-id="97534-148">Dado que DirectComposition tiene acceso a las superficies de redirección de todas las ventanas y de todos los árboles visuales, puede volver a usar el contenido de una ventana en varios árboles visuales.</span><span class="sxs-lookup"><span data-stu-id="97534-148">Because DirectComposition has access to the redirection surfaces of all windows and all visual trees, it can reuse the content from one window in multiple visual trees.</span></span> <span data-ttu-id="97534-149">La ventana debe estar en capas porque una ventana sin capas no tiene una superficie de redirección dedicada y, por lo tanto, su rasterización no siempre está disponible para DirectComposition.</span><span class="sxs-lookup"><span data-stu-id="97534-149">The window must be layered because a non-layered window does not have a dedicated redirection surface and, therefore, its rasterization is not always available to DirectComposition.</span></span>

<span data-ttu-id="97534-150">Para usar un mapa de bits de ventana, una aplicación asocia un visual a un identificador de ventana (HWND).</span><span class="sxs-lookup"><span data-stu-id="97534-150">To use a window bitmap, an application associates a visual with a window handle (HWND).</span></span> <span data-ttu-id="97534-151">Después, DirectComposition vuelve a crear el objeto visual cada vez que cambia el contenido de la ventana, incluso cuando cambia el contenido como resultado de los cambios en los árboles visuales asociados a la ventana.</span><span class="sxs-lookup"><span data-stu-id="97534-151">Afterward, DirectComposition re-composes the visual whenever the contents of the window change, including when the contents change as a result of changes to the visual trees associated with the window.</span></span> <span data-ttu-id="97534-152">En otras palabras, al igual que las miniaturas de DWM, los mapas de bits de la ventana DirectComposition son "activos".</span><span class="sxs-lookup"><span data-stu-id="97534-152">In other words, like DWM thumbnails, DirectComposition window bitmaps are "live".</span></span>

### <a name="associating-bitmap-content-with-a-visual"></a><span data-ttu-id="97534-153">Asociar el contenido del mapa de bits a un visual</span><span class="sxs-lookup"><span data-stu-id="97534-153">Associating bitmap content with a visual</span></span>

<span data-ttu-id="97534-154">En el caso de los tres tipos de mapas de bits, una aplicación puede asociar el mismo mapa de bits con varios objetos visuales, lo que significa que se puede usar una única asignación de memoria para mostrar el mismo contenido varias veces.</span><span class="sxs-lookup"><span data-stu-id="97534-154">For all three kinds of bitmaps, an application can associate the same bitmap with multiple visuals, which means that a single memory allocation can be used to display the same content several times.</span></span>

### <a name="alpha-channel"></a><span data-ttu-id="97534-155">Canal alfa</span><span class="sxs-lookup"><span data-stu-id="97534-155">Alpha channel</span></span>

<span data-ttu-id="97534-156">Todos los mapas de bits tienen un formato de 32 bits por píxel (BPP), que incluye ocho bits para la transparencia por píxel.</span><span class="sxs-lookup"><span data-stu-id="97534-156">All bitmaps have a 32 bits per pixel (BPP) format, which includes eight bits for per-pixel transparency.</span></span> <span data-ttu-id="97534-157">Sin embargo, una aplicación puede especificar cómo debe consumir DirectComposition el canal alfa.</span><span class="sxs-lookup"><span data-stu-id="97534-157">However, an application can specify how DirectComposition should consume the alpha channel.</span></span> <span data-ttu-id="97534-158">En concreto, DirectComposition puede respetar el canal alfa o puede omitir alfa por completo, en cuyo caso se considera que el mapa de bits es totalmente opaco.</span><span class="sxs-lookup"><span data-stu-id="97534-158">In particular, DirectComposition can respect the alpha channel, or it can ignore alpha altogether, in which case the bitmap is considered to be fully opaque.</span></span>

<span data-ttu-id="97534-159">Un modo alfa adicional omite el canal alfa, pero trata los valores rojo, verde y azul como valores alfa por canal en lugar de la interpretación normal de esos canales como intensidades de color.</span><span class="sxs-lookup"><span data-stu-id="97534-159">An additional alpha mode ignores the alpha channel, but treats the red, green, and blue values as per-channel alpha values instead of the normal interpretation of those channels as color intensities.</span></span> <span data-ttu-id="97534-160">Este modo es útil para la representación de ClearType, que requiere información de cobertura de subpíxeles.</span><span class="sxs-lookup"><span data-stu-id="97534-160">This mode is useful for ClearType rendering, which requires sub-pixel coverage information.</span></span> <span data-ttu-id="97534-161">Para usar el modo alfa por canal, una aplicación debe usar primero [Direct2D](../direct2d/direct2d-portal.md) y [DirectWrite](/windows/desktop/DirectWrite/direct-write-portal) para escribir datos de cobertura de subpíxeles en un mapa de bits.</span><span class="sxs-lookup"><span data-stu-id="97534-161">To use the per-channel alpha mode, an application must first use [Direct2D](../direct2d/direct2d-portal.md) and [DirectWrite](/windows/desktop/DirectWrite/direct-write-portal) to write sub-pixel coverage data to a bitmap.</span></span> <span data-ttu-id="97534-162">A continuación, la aplicación debe establecer el modo alfa correcto y especificar un color de texto cuando asocie el mapa de bits con un valor visual.</span><span class="sxs-lookup"><span data-stu-id="97534-162">Next the application must set the correct alpha mode and specify a text color when it associates the bitmap with a visual.</span></span> <span data-ttu-id="97534-163">DirectComposition combina el color del texto con los datos de cobertura, lo que produce la combinación de ClearType en el fondo.</span><span class="sxs-lookup"><span data-stu-id="97534-163">DirectComposition blends the text color with the coverage data, which produces ClearType blending against the background.</span></span>

<span data-ttu-id="97534-164">En situaciones en las que el algoritmo ClearType no es aplicable, como si el mapa de bits no está alineado por píxeles y está alineado con el eje, o si es necesario dibujarlo en una superficie intermedia, DirectComposition puede usar los datos de cobertura de subpíxeles del mapa de bits para generar una rasterización de escala de grises en su lugar, de forma automática y sin costo adicional.</span><span class="sxs-lookup"><span data-stu-id="97534-164">In situations where the ClearType algorithm is not applicable, such as if the bitmap is not pixel-aligned and axis-aligned, or if it needs to be drawn to an intermediate surface, DirectComposition can use the subpixel coverage data in the bitmap to produce a grayscale rasterization instead, automatically and at no additional cost.</span></span>

<span data-ttu-id="97534-165">Para obtener más información, vea la descripción del parámetro *alphaMode* de la función [**IDCompositionDevice:: CreateSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createsurface) o [**IDCompositionDevice:: CreateVirtualSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createvirtualsurface) .</span><span class="sxs-lookup"><span data-stu-id="97534-165">For more information, see the description of the *alphaMode* parameter of the [**IDCompositionDevice::CreateSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createsurface) or [**IDCompositionDevice::CreateVirtualSurface**](/windows/win32/api/dcomp/nf-dcomp-idcompositiondevice-createvirtualsurface) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="97534-166">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="97534-166">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="97534-167">Conceptos de DirectComposition</span><span class="sxs-lookup"><span data-stu-id="97534-167">DirectComposition Concepts</span></span>](directcomposition-concepts.md)
</dt> </dl>

 

 