---
description: Seguimiento de eventos para Windows (ETW) es una herramienta de seguimiento de nivel de kernel eficaz que permite registrar eventos definidos por el kernel o la aplicación en un archivo de registro.
ms.assetid: 0eaa7bd3-8537-483a-b0d6-db3b790a6f3d
title: Acerca del seguimiento de eventos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3a2f13284cec1d9300c23241fafe154f277f72a3
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104001299"
---
# <a name="about-event-tracing"></a><span data-ttu-id="0365c-103">Acerca del seguimiento de eventos</span><span class="sxs-lookup"><span data-stu-id="0365c-103">About Event Tracing</span></span>

<span data-ttu-id="0365c-104">Seguimiento de eventos para Windows (ETW) es una herramienta de seguimiento de nivel de kernel eficaz que permite registrar eventos definidos por el kernel o la aplicación en un archivo de registro.</span><span class="sxs-lookup"><span data-stu-id="0365c-104">Event Tracing for Windows (ETW) is an efficient kernel-level tracing facility that lets you log kernel or application-defined events to a log file.</span></span> <span data-ttu-id="0365c-105">Puede consumir los eventos en tiempo real o desde un archivo de registro y usarlos para depurar una aplicación o para determinar dónde se producen los problemas de rendimiento en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0365c-105">You can consume the events in real time or from a log file and use them to debug an application or to determine where performance issues are occurring in the application.</span></span>

<span data-ttu-id="0365c-106">ETW le permite habilitar o deshabilitar el seguimiento de eventos de forma dinámica, lo que le permite realizar un seguimiento detallado en un entorno de producción sin necesidad de reiniciar el equipo o la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0365c-106">ETW lets you enable or disable event tracing dynamically, allowing you to perform detailed tracing in a production environment without requiring computer or application restarts.</span></span>

<span data-ttu-id="0365c-107">La API de seguimiento de eventos se divide en tres componentes distintos:</span><span class="sxs-lookup"><span data-stu-id="0365c-107">The Event Tracing API is broken into three distinct components:</span></span>

-   <span data-ttu-id="0365c-108">[Controladores](#controllers), que inician y detienen una sesión de seguimiento de eventos y habilitan proveedores</span><span class="sxs-lookup"><span data-stu-id="0365c-108">[Controllers](#controllers), which start and stop an event tracing session and enable providers</span></span>
-   <span data-ttu-id="0365c-109">[Proveedores](#providers), que proporcionan los eventos</span><span class="sxs-lookup"><span data-stu-id="0365c-109">[Providers](#providers), which provide the events</span></span>
-   <span data-ttu-id="0365c-110">[Consumidores](#consumers), que consumen los eventos</span><span class="sxs-lookup"><span data-stu-id="0365c-110">[Consumers](#consumers), which consume the events</span></span>

<span data-ttu-id="0365c-111">En el diagrama siguiente se muestra el modelo de seguimiento de eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-111">The following diagram shows the event tracing model.</span></span>

![modelo de seguimiento de eventos](images/etdiag2.png)

## <a name="controllers"></a><span data-ttu-id="0365c-113">Controladores</span><span class="sxs-lookup"><span data-stu-id="0365c-113">Controllers</span></span>

<span data-ttu-id="0365c-114">Los controladores son aplicaciones que definen el tamaño y la ubicación del archivo de registro, inician y detienen [sesiones de seguimiento de eventos](event-tracing-sessions.md), habilitan proveedores para que puedan registrar eventos en la sesión, administrar el tamaño del grupo de búferes y obtener estadísticas de ejecución para las sesiones.</span><span class="sxs-lookup"><span data-stu-id="0365c-114">Controllers are applications that define the size and location of the log file, start and stop [event tracing sessions](event-tracing-sessions.md), enable providers so they can log events to the session, manage the size of the buffer pool, and obtain execution statistics for sessions.</span></span> <span data-ttu-id="0365c-115">Las estadísticas de la sesión incluyen el número de búferes utilizados, el número de búferes entregados y el número de eventos y búferes perdidos.</span><span class="sxs-lookup"><span data-stu-id="0365c-115">Session statistics include the number of buffers used, the number of buffers delivered, and the number of events and buffers lost.</span></span> 

<span data-ttu-id="0365c-116">Para obtener más información, vea [controlar las sesiones de seguimiento de eventos](controlling-event-tracing-sessions.md).</span><span class="sxs-lookup"><span data-stu-id="0365c-116">For more information, see [Controlling Event Tracing Sessions](controlling-event-tracing-sessions.md).</span></span>

## <a name="providers"></a><span data-ttu-id="0365c-117">Proveedores</span><span class="sxs-lookup"><span data-stu-id="0365c-117">Providers</span></span>

<span data-ttu-id="0365c-118">Los proveedores son aplicaciones que contienen instrumentación de seguimiento de eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-118">Providers are applications that contain event tracing instrumentation.</span></span> <span data-ttu-id="0365c-119">Después de que un proveedor se registra a sí mismo, un controlador puede habilitar o deshabilitar el seguimiento de eventos en el proveedor.</span><span class="sxs-lookup"><span data-stu-id="0365c-119">After a provider registers itself, a controller can then enable or disable event tracing in the provider.</span></span> <span data-ttu-id="0365c-120">El proveedor define su interpretación de que está habilitada o deshabilitada.</span><span class="sxs-lookup"><span data-stu-id="0365c-120">The provider defines its interpretation of being enabled or disabled.</span></span> <span data-ttu-id="0365c-121">Normalmente, un proveedor habilitado genera eventos, mientras que un proveedor deshabilitado no lo hace.</span><span class="sxs-lookup"><span data-stu-id="0365c-121">Generally, an enabled provider generates events, while a disabled provider does not.</span></span> <span data-ttu-id="0365c-122">Esto le permite agregar seguimiento de eventos a la aplicación sin necesidad de que genere eventos en todo momento.</span><span class="sxs-lookup"><span data-stu-id="0365c-122">This lets you add event tracing to your application without requiring that it generate events all the time.</span></span> 

<span data-ttu-id="0365c-123">Aunque el modelo ETW separa el controlador y el proveedor en aplicaciones independientes, una aplicación puede incluir ambos componentes.</span><span class="sxs-lookup"><span data-stu-id="0365c-123">Although the ETW model separates the controller and provider into separate applications, an application can include both components.</span></span>

<span data-ttu-id="0365c-124">Para obtener más información, vea [proporcionar eventos](providing-events.md).</span><span class="sxs-lookup"><span data-stu-id="0365c-124">For more information, see [Providing Events](providing-events.md).</span></span>

### <a name="types-of-providers"></a><span data-ttu-id="0365c-125">Tipos de proveedores</span><span class="sxs-lookup"><span data-stu-id="0365c-125">Types of Providers</span></span>

<span data-ttu-id="0365c-126">Hay cuatro tipos principales de proveedores: proveedores de MOF (clásico), proveedores de WPP, proveedores basados en manifiestos y proveedores de TraceLogging.</span><span class="sxs-lookup"><span data-stu-id="0365c-126">There are four main types of providers: MOF (classic) providers, WPP providers, manifest-based providers, and TraceLogging providers.</span></span> <span data-ttu-id="0365c-127">Debe usar un proveedor basado en manifiesto o un proveedor TraceLogging si está escribiendo aplicaciones para Windows Vista o posterior que no necesitan admitir sistemas heredados.</span><span class="sxs-lookup"><span data-stu-id="0365c-127">You should use a manifest-based provider or a TraceLogging provider if you are writing applications for Windows Vista or later that do not need to support legacy systems.</span></span>

#### <a name="mof-classic-providers"></a><span data-ttu-id="0365c-128">Proveedores de MOF (clásico):</span><span class="sxs-lookup"><span data-stu-id="0365c-128">MOF (classic) providers:</span></span>

-   <span data-ttu-id="0365c-129">Utilice las funciones [RegisterTraceGuids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) y [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) para registrar y escribir eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-129">Use the [RegisterTraceGuids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) and [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) functions to register and write events.</span></span>
-   <span data-ttu-id="0365c-130">Use las clases MOF para definir eventos para que los consumidores sepan cómo consumirlos.</span><span class="sxs-lookup"><span data-stu-id="0365c-130">Use MOF classes to define events so that consumers know how to consume them.</span></span>
-   <span data-ttu-id="0365c-131">Solo se puede habilitar en una sesión de seguimiento cada vez.</span><span class="sxs-lookup"><span data-stu-id="0365c-131">Can be enabled by only one trace session at a time.</span></span>

#### <a name="wpp-providers"></a><span data-ttu-id="0365c-132">Proveedores WPP:</span><span class="sxs-lookup"><span data-stu-id="0365c-132">WPP providers:</span></span>

-   <span data-ttu-id="0365c-133">Utilice las funciones [RegisterTraceGuids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) y [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) para registrar y escribir eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-133">Use the [RegisterTraceGuids](/windows/win32/api/evntrace/nf-evntrace-registertraceguidsa) and [TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) functions to register and write events.</span></span>
-   <span data-ttu-id="0365c-134">Tienen archivos TMF asociados (compilados en un archivo binario. pdb) que contiene información de descodificación que se deduce del análisis del preprocesador de la instrumentación WPP en el código fuente.</span><span class="sxs-lookup"><span data-stu-id="0365c-134">Have associated TMF files (compiled into a binary's .pdb) containing decoding information inferred from the preprocessor's scan of WPP instrumentation in source code.</span></span>
-   <span data-ttu-id="0365c-135">Solo se puede habilitar en una sesión de seguimiento cada vez.</span><span class="sxs-lookup"><span data-stu-id="0365c-135">Can be enabled by only one trace session at a time.</span></span>

#### <a name="manifest-based-providers"></a><span data-ttu-id="0365c-136">Proveedores basados en manifiestos:</span><span class="sxs-lookup"><span data-stu-id="0365c-136">Manifest-based providers:</span></span>

-   <span data-ttu-id="0365c-137">Use [EventRegister](/windows/desktop/api/Evntprov/nf-evntprov-eventregister) y [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite) para registrar y escribir eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-137">Use [EventRegister](/windows/desktop/api/Evntprov/nf-evntprov-eventregister) and [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite) to register and write events.</span></span>
-   <span data-ttu-id="0365c-138">Use un manifiesto para definir eventos para que los consumidores sepan cómo consumirlos.</span><span class="sxs-lookup"><span data-stu-id="0365c-138">Use a manifest to define events so that consumers know how to consume them.</span></span>
-   <span data-ttu-id="0365c-139">Puede habilitarse hasta ocho sesiones de seguimiento simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="0365c-139">Can be enabled by up to eight trace sessions simultaneously.</span></span>

#### <a name="tracelogging-providers"></a><span data-ttu-id="0365c-140">Proveedores de [TraceLogging](/windows/desktop/tracelogging/trace-logging-about) :</span><span class="sxs-lookup"><span data-stu-id="0365c-140">[TraceLogging](/windows/desktop/tracelogging/trace-logging-about) providers:</span></span>

-   <span data-ttu-id="0365c-141">Use [TraceLoggingRegister](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingregister) y [TraceLoggingWrite](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingwrite) para registrar y escribir eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-141">Use [TraceLoggingRegister](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingregister) and [TraceLoggingWrite](/windows/desktop/api/traceloggingprovider/nf-traceloggingprovider-traceloggingwrite) to register and write events.</span></span>
-   <span data-ttu-id="0365c-142">Use eventos autodescriptivos para que los propios eventos contengan toda la información necesaria para consumirlos.</span><span class="sxs-lookup"><span data-stu-id="0365c-142">Use self-describing events so that the events themselves contain all required information for consuming them.</span></span>
-   <span data-ttu-id="0365c-143">Puede habilitarse hasta ocho sesiones de seguimiento simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="0365c-143">Can be enabled by up to eight trace sessions simultaneously.</span></span>

<span data-ttu-id="0365c-144">Todos los proveedores de eventos usan fundamentalmente la familia de API de seguimiento de eventos ([TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) para tecnologías heredadas y [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite) / [EventWriteEx](/windows/desktop/api/Evntprov/nf-evntprov-eventwriteex) para las versiones más recientes).</span><span class="sxs-lookup"><span data-stu-id="0365c-144">All event providers fundamentally use the Event Tracing family of APIs ([TraceEvent](/windows/win32/api/evntrace/nf-evntrace-traceevent) for legacy technologies and [EventWrite](/windows/desktop/api/Evntprov/nf-evntprov-eventwrite)/[EventWriteEx](/windows/desktop/api/Evntprov/nf-evntprov-eventwriteex) for newer ones).</span></span> <span data-ttu-id="0365c-145">Los proveedores de eventos solo se diferencian en los tipos de campo que almacenan en cargas de eventos y donde almacenan la información de descodificación de eventos asociada.</span><span class="sxs-lookup"><span data-stu-id="0365c-145">Event providers simply differ in what field types they store in event payloads and where they store the associated event decoding information.</span></span>

## <a name="consumers"></a><span data-ttu-id="0365c-146">Consumidores</span><span class="sxs-lookup"><span data-stu-id="0365c-146">Consumers</span></span>

<span data-ttu-id="0365c-147">Los consumidores son aplicaciones que seleccionan una o varias sesiones de seguimiento de eventos como origen de eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-147">Consumers are applications that select one or more event tracing sessions as a source of events.</span></span> <span data-ttu-id="0365c-148">Un consumidor puede solicitar eventos de varias sesiones de seguimiento de eventos simultáneamente. el sistema entrega los eventos en orden cronológico.</span><span class="sxs-lookup"><span data-stu-id="0365c-148">A consumer can request events from multiple event tracing sessions simultaneously; the system delivers the events in chronological order.</span></span> <span data-ttu-id="0365c-149">Los consumidores pueden recibir eventos almacenados en archivos de registro o desde sesiones que entregan eventos en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="0365c-149">Consumers can receive events stored in log files, or from sessions that deliver events in real time.</span></span> <span data-ttu-id="0365c-150">Al procesar eventos, un consumidor puede especificar las horas de inicio y finalización, y solo se entregarán los eventos que se produzcan en el período de tiempo especificado.</span><span class="sxs-lookup"><span data-stu-id="0365c-150">When processing events, a consumer can specify start and end times, and only events that occur in the specified time frame will be delivered.</span></span> 

<span data-ttu-id="0365c-151">Para obtener más información, consulte [consumo de eventos](consuming-events.md).</span><span class="sxs-lookup"><span data-stu-id="0365c-151">For more information, see [Consuming Events](consuming-events.md).</span></span>

## <a name="missing-events"></a><span data-ttu-id="0365c-152">Eventos que faltan</span><span class="sxs-lookup"><span data-stu-id="0365c-152">Missing Events</span></span>

<span data-ttu-id="0365c-153">Perfmon, diagnóstico del sistema y otras herramientas del sistema pueden notificar los eventos que faltan en el registro de eventos e indicar que la configuración del seguimiento de eventos para Windows (ETW) puede no ser óptima.</span><span class="sxs-lookup"><span data-stu-id="0365c-153">Perfmon, System Diagnostics, and other system tools may report on missing events in the Event Log and indicate that the settings for Event Tracing for Windows (ETW) may not be optimal.</span></span> <span data-ttu-id="0365c-154">Los eventos se pueden perder por una serie de motivos:</span><span class="sxs-lookup"><span data-stu-id="0365c-154">Events can be lost for a number of reasons:</span></span>

-   <span data-ttu-id="0365c-155">El tamaño total del evento es mayor que 64 KB.</span><span class="sxs-lookup"><span data-stu-id="0365c-155">The total event size is greater than 64K.</span></span> <span data-ttu-id="0365c-156">Esto incluye el encabezado ETW más los datos o la carga.</span><span class="sxs-lookup"><span data-stu-id="0365c-156">This includes the ETW header plus the data or payload.</span></span> <span data-ttu-id="0365c-157">Un usuario no tiene control sobre estos eventos que faltan, ya que la aplicación configura el tamaño del evento.</span><span class="sxs-lookup"><span data-stu-id="0365c-157">A user has no control over these missing events since the event size is configured by the application.</span></span>

-   <span data-ttu-id="0365c-158">El tamaño del búfer de ETW es menor que el tamaño total del evento.</span><span class="sxs-lookup"><span data-stu-id="0365c-158">The ETW buffer size is smaller than the total event size.</span></span> <span data-ttu-id="0365c-159">Un usuario no tiene control sobre estos eventos que faltan, ya que el tamaño del evento lo configura la aplicación que registra los eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-159">A user has no control over these missing events since the event size is configured by the application logging the events.</span></span>

-   <span data-ttu-id="0365c-160">Para el registro en tiempo real, el consumidor en tiempo real no está consumiendo eventos lo suficientemente rápido o no está presente por completo y, a continuación, se está llenando el archivo de copia de seguridad.</span><span class="sxs-lookup"><span data-stu-id="0365c-160">For real-time logging, the real-time consumer is not consuming events fast enough or is not present altogether and then the backing file is filling up.</span></span> <span data-ttu-id="0365c-161">Esto puede producirse si el servicio registro de eventos se detiene y se inicia cuando se registran eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-161">This can result if the Event Log service is stopped and started when events are being logged.</span></span> <span data-ttu-id="0365c-162">Un usuario no tiene control sobre estos eventos que faltan.</span><span class="sxs-lookup"><span data-stu-id="0365c-162">A user has no control over these missing events.</span></span>

-   <span data-ttu-id="0365c-163">Al registrar en un archivo, el disco es demasiado lento para mantenerse al día de la tasa de registro.</span><span class="sxs-lookup"><span data-stu-id="0365c-163">When logging to a file, the disk is too slow to keep up with the logging rate.</span></span>

<span data-ttu-id="0365c-164">Por cualquiera de estos motivos, informe de estos problemas al proveedor de la aplicación o servicio que está generando los eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-164">For any of these reasons, please report these problems to the provider of the application or service that is generating the events.</span></span> <span data-ttu-id="0365c-165">Estos problemas solo los puede solucionar el desarrollador de la aplicación o el servicio que registra los eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-165">These issues can only be fixed by the application developer or the service logging the events.</span></span> <span data-ttu-id="0365c-166">Si se notifican los eventos que faltan en el servicio registro de eventos, esto puede indicar un problema con la configuración del servicio registro de eventos.</span><span class="sxs-lookup"><span data-stu-id="0365c-166">If the missing events are being reported in the Event Log Service, this may indicate a problem with the configuration of the Event Log service.</span></span> <span data-ttu-id="0365c-167">El usuario puede tener una capacidad limitada para aumentar el espacio en disco máximo que usará el servicio registro de eventos, lo que puede reducir el número de eventos que faltan.</span><span class="sxs-lookup"><span data-stu-id="0365c-167">The user may have some limited ability to increase the maximum disk space to be used by the Event Log Service which may reduce the number of missing events.</span></span>

 

 
