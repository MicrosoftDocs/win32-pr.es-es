---
title: Fase del sombreador de geometría
description: La fase geometry-shader (GS) ejecuta código de sombreador especificado por la aplicación con vértices como entrada y la capacidad de generar vértices en la salida.
ms.assetid: F3208862-980E-403F-9154-13B34A882787
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 3099ed5ede8dd89dc607ed838ff6e3fabfb16a69
ms.sourcegitcommit: ca37395fd832e798375e81142b97cffcffabf184
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/24/2021
ms.locfileid: "110335369"
---
# <a name="geometry-shader-stage"></a><span data-ttu-id="fd882-103">Fase del sombreador de geometría</span><span class="sxs-lookup"><span data-stu-id="fd882-103">Geometry Shader Stage</span></span>

<span data-ttu-id="fd882-104">La fase geometry-shader (GS) ejecuta código de sombreador especificado por la aplicación con vértices como entrada y la capacidad de generar vértices en la salida.</span><span class="sxs-lookup"><span data-stu-id="fd882-104">The geometry-shader (GS) stage runs application-specified shader code with vertices as input and the ability to generate vertices on output.</span></span>

## <a name="the-geometry-shader"></a><span data-ttu-id="fd882-105">Sombreador de geometría</span><span class="sxs-lookup"><span data-stu-id="fd882-105">The Geometry Shader</span></span>

<span data-ttu-id="fd882-106">A diferencia de los sombreadores de vértices, que funcionan en un solo vértice, las entradas del sombreador de geometría son los vértices de una primitiva completa (dos vértices para líneas, tres vértices para triángulos o un solo vértice para el punto).</span><span class="sxs-lookup"><span data-stu-id="fd882-106">Unlike vertex shaders, which operate on a single vertex, the geometry shader's inputs are the vertices for a full primitive (two vertices for lines, three vertices for triangles, or single vertex for point).</span></span> <span data-ttu-id="fd882-107">Los sombreadores de geometría también pueden aportar los datos de vértice para las primitivas adyacentes al borde como entrada (dos vértices adicionales para una línea, tres adicionales para un triángulo).</span><span class="sxs-lookup"><span data-stu-id="fd882-107">Geometry shaders can also bring in the vertex data for the edge-adjacent primitives as input (an additional two vertices for a line, an additional three for a triangle).</span></span> <span data-ttu-id="fd882-108">En la ilustración siguiente se muestra un triángulo y una línea con vértices adyacentes.</span><span class="sxs-lookup"><span data-stu-id="fd882-108">The following illustration shows a triangle and a line with adjacent vertices.</span></span>

![ilustración de un triángulo y una línea con vértices adyacentes](images/d3d10-gs.png)

|     | <span data-ttu-id="fd882-110">Tipo</span><span class="sxs-lookup"><span data-stu-id="fd882-110">Type</span></span>                |
|-----|-----------------|
| <span data-ttu-id="fd882-111">**TV**</span><span class="sxs-lookup"><span data-stu-id="fd882-111">**TV**</span></span>  | <span data-ttu-id="fd882-112">Vértice de triángulo</span><span class="sxs-lookup"><span data-stu-id="fd882-112">Triangle vertex</span></span> |
| <span data-ttu-id="fd882-113">**Av**</span><span class="sxs-lookup"><span data-stu-id="fd882-113">**AV**</span></span>  | <span data-ttu-id="fd882-114">Vértice adyacente</span><span class="sxs-lookup"><span data-stu-id="fd882-114">Adjacent vertex</span></span> |
| <span data-ttu-id="fd882-115">**Lv**</span><span class="sxs-lookup"><span data-stu-id="fd882-115">**LV**</span></span>  | <span data-ttu-id="fd882-116">Vértice de línea</span><span class="sxs-lookup"><span data-stu-id="fd882-116">Line vertex</span></span>     |



 

<span data-ttu-id="fd882-117">La fase del sombreador de geometría puede consumir el valor generado por el sistema de SV PrimitiveID generado \_ automáticamente por el IA. [](d3d10-graphics-programming-guide-input-assembler-stage-using.md)</span><span class="sxs-lookup"><span data-stu-id="fd882-117">The geometry-shader stage can consume the SV\_PrimitiveID [system-generated value](d3d10-graphics-programming-guide-input-assembler-stage-using.md) that is auto-generated by the IA.</span></span> <span data-ttu-id="fd882-118">Esto permite que los datos por primitivos se puedan capturar o calcular si se desea.</span><span class="sxs-lookup"><span data-stu-id="fd882-118">This allows per-primitive data to be fetched or computed if desired.</span></span>

<span data-ttu-id="fd882-119">La fase del sombreador de geometría es capaz de generar varios vértices que forman una única topología seleccionada (las topologías de salida de la fase GS disponibles son: tristrip, linestrip y pointlist).</span><span class="sxs-lookup"><span data-stu-id="fd882-119">The geometry-shader stage is capable of outputting multiple vertices forming a single selected topology (GS stage output topologies available are: tristrip, linestrip, and pointlist).</span></span> <span data-ttu-id="fd882-120">El número de primitivas emitidas puede variar libremente dentro de cualquier invocación del sombreador de geometría, aunque el número máximo de vértices que se podrían emitir debe declararse estáticamente.</span><span class="sxs-lookup"><span data-stu-id="fd882-120">The number of primitives emitted can vary freely within any invocation of the geometry shader, though the maximum number of vertices that could be emitted must be declared statically.</span></span> <span data-ttu-id="fd882-121">Las longitudes de bandas emitidas a partir de una invocación del sombreador de geometría pueden ser arbitrarias y se pueden crear nuevas franjas a través de la [función RestartStrip](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-so-restartstrip) HLSL.</span><span class="sxs-lookup"><span data-stu-id="fd882-121">Strip lengths emitted from a geometry shader invocation can be arbitrary, and new strips can be created via the [RestartStrip](/windows/desktop/direct3dhlsl/dx-graphics-hlsl-so-restartstrip) HLSL function.</span></span>

<span data-ttu-id="fd882-122">La salida del sombreador de geometría se puede alimentar a la fase del rasterizador o a un búfer de vértices en memoria a través de la fase de salida del flujo.</span><span class="sxs-lookup"><span data-stu-id="fd882-122">Geometry shader output may be fed to the rasterizer stage and/or to a vertex buffer in memory via the stream output stage.</span></span> <span data-ttu-id="fd882-123">La salida que se introduce en la memoria se expande a listas individuales de punto, línea o triángulo (exactamente como se pasarían al rasterizador).</span><span class="sxs-lookup"><span data-stu-id="fd882-123">Output fed to memory is expanded to individual point/line/triangle lists (exactly as they would be passed to the rasterizer).</span></span>

<span data-ttu-id="fd882-124">Cuando un sombreador de geometría está activo, se invoca una vez para cada primitiva pasada o generada anteriormente en la canalización.</span><span class="sxs-lookup"><span data-stu-id="fd882-124">When a geometry shader is active, it is invoked once for every primitive passed down or generated earlier in the pipeline.</span></span> <span data-ttu-id="fd882-125">Cada invocación del sombreador de geometría ve como entrada los datos de la primitiva de invocación, ya sea un único punto, una sola línea o un solo triángulo.</span><span class="sxs-lookup"><span data-stu-id="fd882-125">Each invocation of the geometry shader sees as input the data for the invoking primitive, whether that is a single point, a single line, or a single triangle.</span></span> <span data-ttu-id="fd882-126">Una franja de triángulos anterior en la canalización daría como resultado una invocación del sombreador de geometría para cada triángulo individual de la franja (como si la franja se expande hacia fuera en una lista de triángulos).</span><span class="sxs-lookup"><span data-stu-id="fd882-126">A triangle strip from earlier in the pipeline would result in an invocation of the geometry shader for each individual triangle in the strip (as if the strip were expanded out into a triangle list).</span></span> <span data-ttu-id="fd882-127">Todos los datos de entrada de cada vértice de la primitiva individual están disponibles (es decir, 3 vértices para triángulo), además de los datos de vértice adyacentes si procede o están disponibles.</span><span class="sxs-lookup"><span data-stu-id="fd882-127">All the input data for each vertex in the individual primitive is available (i.e. 3 vertices for triangle), plus adjacent vertex data if applicable/available.</span></span>

<span data-ttu-id="fd882-128">Un sombreador de geometría genera datos de un vértice a la vez anexando vértices a un objeto de flujo de salida.</span><span class="sxs-lookup"><span data-stu-id="fd882-128">A geometry shader outputs data one vertex at a time by appending vertices to an output stream object.</span></span> <span data-ttu-id="fd882-129">La topología de las secuencias viene determinada por una declaración fija, eligiendo una de las siguientes opciones: PointStream, LineStream o TriangleStream como salida de la fase GS.</span><span class="sxs-lookup"><span data-stu-id="fd882-129">The topology of the streams is determined by a fixed declaration, choosing one of: PointStream, LineStream, or TriangleStream as the output for the GS stage.</span></span> <span data-ttu-id="fd882-130">Hay tres tipos de objetos de secuencia disponibles: PointStream, LineStream y TriangleStream, que son objetos con plantilla.</span><span class="sxs-lookup"><span data-stu-id="fd882-130">There are three types of stream objects available, PointStream, LineStream and TriangleStream which are all templated objects.</span></span> <span data-ttu-id="fd882-131">La topología de la salida viene determinada por su tipo de objeto respectivo, mientras que el formato de los vértices anexados a la secuencia viene determinado por el tipo de plantilla.</span><span class="sxs-lookup"><span data-stu-id="fd882-131">The topology of the output is determined by their respective object type, while the format of the vertices appended to the stream is determined by the template type.</span></span> <span data-ttu-id="fd882-132">La ejecución de una instancia del sombreador de geometría es atómica a partir de otras invocaciones, salvo que los datos agregados a las secuencias están en serie.</span><span class="sxs-lookup"><span data-stu-id="fd882-132">Execution of a geometry shader instance is atomic from other invocations, except that data added to the streams is serial.</span></span> <span data-ttu-id="fd882-133">Las salidas de una invocación determinada de un sombreador de geometría son independientes de otras invocaciones (aunque se respeta la ordenación).</span><span class="sxs-lookup"><span data-stu-id="fd882-133">The outputs of a given invocation of a geometry shader are independent of other invocations (though ordering is respected).</span></span> <span data-ttu-id="fd882-134">Un sombreador de geometría que genera franjas de triángulo iniciará una nueva franja en cada invocación.</span><span class="sxs-lookup"><span data-stu-id="fd882-134">A geometry shader generating triangle strips will start a new strip on every invocation.</span></span>

<span data-ttu-id="fd882-135">Cuando una salida del sombreador de geometría se identifica como un valor interpretado por el sistema (por ejemplo, SV RenderTargetArrayIndex o SV Position), el hardware examina estos datos y realiza algún comportamiento dependiente del valor, además de poder pasar los propios datos a la siguiente fase del sombreador para la \_ \_ entrada.</span><span class="sxs-lookup"><span data-stu-id="fd882-135">When a geometry shader output is identified as a System Interpreted Value (e.g. SV\_RenderTargetArrayIndex or SV\_Position), hardware looks at this data and performs some behavior dependent on the value, in addition to being able to pass the data itself to the next shader stage for input.</span></span> <span data-ttu-id="fd882-136">Cuando la salida de estos datos del sombreador de geometría tiene significado para el hardware por primitiva (como SV RenderTargetArrayIndex o SV ViewportArrayIndex), en lugar de por vértice \_ \_ (como SV ClipDistance n o SV Position), los datos por primitivo se toman del vértice inicial emitido \_ \[ para la \] \_ primitiva.</span><span class="sxs-lookup"><span data-stu-id="fd882-136">When such data output from the geometry shader has meaning to the hardware on a per-primitive basis (such as SV\_RenderTargetArrayIndex or SV\_ViewportArrayIndex), rather than on a per-vertex basis (such as SV\_ClipDistance\[n\] or SV\_Position), the per-primitive data is taken from the leading vertex emitted for the primitive.</span></span>

<span data-ttu-id="fd882-137">El sombreador de geometría podría generar primitivas parcialmente completadas si el sombreador de geometría finaliza y la primitiva está incompleta.</span><span class="sxs-lookup"><span data-stu-id="fd882-137">Partially completed primitives could be generated by the geometry shader if the geometry shader ends and the primitive is incomplete.</span></span> <span data-ttu-id="fd882-138">Las primitivas incompletas se descartan silenciosamente.</span><span class="sxs-lookup"><span data-stu-id="fd882-138">Incomplete primitives are silently discarded.</span></span> <span data-ttu-id="fd882-139">Esto es similar a la manera en que el IA trata las primitivas parcialmente completadas.</span><span class="sxs-lookup"><span data-stu-id="fd882-139">This is similar to the way the IA treats partially completed primitives.</span></span>

<span data-ttu-id="fd882-140">El sombreador de geometría puede realizar operaciones de muestreo de carga y textura donde no se requieren derivados del espacio de pantalla (samplelevel, samplecmplevelzero, samplegrad).</span><span class="sxs-lookup"><span data-stu-id="fd882-140">The geometry shader can perform load and texture sampling operations where screen-space derivatives are not required (samplelevel, samplecmplevelzero, samplegrad).</span></span>

<span data-ttu-id="fd882-141">Los algoritmos que se pueden implementar en el sombreador de geometría incluyen:</span><span class="sxs-lookup"><span data-stu-id="fd882-141">Algorithms that can be implemented in the geometry shader include:</span></span>

-   <span data-ttu-id="fd882-142">Expansión de sprite de punto</span><span class="sxs-lookup"><span data-stu-id="fd882-142">Point Sprite Expansion</span></span>
-   <span data-ttu-id="fd882-143">Sistemas de partícula dinámica</span><span class="sxs-lookup"><span data-stu-id="fd882-143">Dynamic Particle Systems</span></span>
-   <span data-ttu-id="fd882-144">Generación de pectoral/fin</span><span class="sxs-lookup"><span data-stu-id="fd882-144">Fur/Fin Generation</span></span>
-   <span data-ttu-id="fd882-145">Generación de volúmenes de sombra</span><span class="sxs-lookup"><span data-stu-id="fd882-145">Shadow Volume Generation</span></span>
-   <span data-ttu-id="fd882-146">Mapa de representación a cubo de paso único</span><span class="sxs-lookup"><span data-stu-id="fd882-146">Single Pass Render-to-Cubemap</span></span>
-   <span data-ttu-id="fd882-147">Per-Primitive intercambio de material</span><span class="sxs-lookup"><span data-stu-id="fd882-147">Per-Primitive Material Swapping</span></span>
-   <span data-ttu-id="fd882-148">Per-Primitive configuración de material: incluida la generación de coordenadas baricéntricas como datos primitivos para que un sombreador de píxeles pueda realizar la interpolación de atributos personalizados (para obtener un ejemplo de interpolación normal de orden superior, vea [CubeMapGS Sample](https://msdn.microsoft.com/library/Ee416398(v=VS.85).aspx)).</span><span class="sxs-lookup"><span data-stu-id="fd882-148">Per-Primitive Material Setup - Including generation of barycentric coordinates as primitive data so that a pixel shader can perform custom attribute interpolation (for an example of higher-order normal interpolation, see [CubeMapGS Sample](https://msdn.microsoft.com/library/Ee416398(v=VS.85).aspx)).</span></span>

## <a name="related-topics"></a><span data-ttu-id="fd882-149">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="fd882-149">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="fd882-150">Canalización de gráficos</span><span class="sxs-lookup"><span data-stu-id="fd882-150">Graphics Pipeline</span></span>](overviews-direct3d-11-graphics-pipeline.md)
</dt> <dt>

[<span data-ttu-id="fd882-151">Fases de canalización (Direct3D 10)</span><span class="sxs-lookup"><span data-stu-id="fd882-151">Pipeline Stages (Direct3D 10)</span></span>](/windows/desktop/direct3d10/d3d10-graphics-programming-guide-pipeline-stages)
</dt> </dl>

 

 