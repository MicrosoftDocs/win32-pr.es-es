---
description: Como se mencionó anteriormente, se usa WSPJoinLeaf para unir un nodo hoja a una sesión multipoint.
ms.assetid: 03325f5e-4d4a-405b-b644-3d8c03435e17
title: Usar WSPJoinLeaf
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: ef4426c0d22657b26dcc2217d856865d9ebe98db
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104275389"
---
# <a name="using-wspjoinleaf"></a><span data-ttu-id="6af54-103">Usar WSPJoinLeaf</span><span class="sxs-lookup"><span data-stu-id="6af54-103">Using WSPJoinLeaf</span></span>

<span data-ttu-id="6af54-104">Como se mencionó anteriormente, se usa [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) para unir un nodo hoja a una sesión multipoint.</span><span class="sxs-lookup"><span data-stu-id="6af54-104">As mentioned previously, [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is used to join a leaf node into a multipoint session.</span></span> <span data-ttu-id="6af54-105">**WSPJoinLeaf** tiene los mismos parámetros y semántica que [**WSPConnect**](/previous-versions/windows/hardware/network/ff566275(v=vs.85)) , salvo que devuelve un descriptor de socket (como en [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept)) y tiene un parámetro *dwFlags* adicional.</span><span class="sxs-lookup"><span data-stu-id="6af54-105">**WSPJoinLeaf** has the same parameters and semantics as [**WSPConnect**](/previous-versions/windows/hardware/network/ff566275(v=vs.85)) except that it returns a socket descriptor (as in [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept)), and it has an additional *dwFlags* parameter.</span></span> <span data-ttu-id="6af54-106">El parámetro *dwFlags* se usa para indicar si el socket actuará solo como remitente, solo como receptor o ambos.</span><span class="sxs-lookup"><span data-stu-id="6af54-106">The *dwFlags* parameter is used to indicate whether the socket will be acting only as a sender, only as a receiver, or both.</span></span> <span data-ttu-id="6af54-107">Solo se pueden usar Multipoint Sockets para los *parámetros de* entrada de esta función.</span><span class="sxs-lookup"><span data-stu-id="6af54-107">Only multipoint sockets may be used for input parameter *s* in this function.</span></span> <span data-ttu-id="6af54-108">Si el socket Multipoint está en el modo de no bloqueo, el descriptor de socket devuelto no se podrá usar hasta que se haya \_ recibido la indicación FD Connect correspondiente.</span><span class="sxs-lookup"><span data-stu-id="6af54-108">If the multipoint socket is in the nonblocking mode, the returned socket descriptor will not be usable until after a corresponding FD\_CONNECT indication has been received.</span></span> <span data-ttu-id="6af54-109">Una aplicación raíz en una sesión Multipoint puede llamar a **WSPJoinLeaf** una o más veces para agregar un número de nodos hoja; sin embargo, puede que al menos una solicitud de conexión multipunto esté pendiente a la vez.</span><span class="sxs-lookup"><span data-stu-id="6af54-109">A root application in a multipoint session may call **WSPJoinLeaf** one or more times in order to add a number of leaf nodes, however at most one multipoint connection request may be outstanding at a time.</span></span>

<span data-ttu-id="6af54-110">El descriptor de socket devuelto por [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) es diferente dependiendo de si el descriptor de *socket de entrada* es una raíz de c \_ o una hoja de c \_ .</span><span class="sxs-lookup"><span data-stu-id="6af54-110">The socket descriptor returned by [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is different depending on whether the input socket descriptor, *s*, is a c\_root or a c\_leaf.</span></span> <span data-ttu-id="6af54-111">Cuando se usa con un \_ socket raíz de c, el parámetro de *nombre* designa un nodo de hoja determinado que se va a agregar y el descriptor de socket devuelto es un \_ socket hoja de c que corresponde al nodo hoja recién agregado.</span><span class="sxs-lookup"><span data-stu-id="6af54-111">When used with a c\_root socket, the *name* parameter designates a particular leaf node to be added and the returned socket descriptor is a c\_leaf socket corresponding to the newly added leaf node.</span></span> <span data-ttu-id="6af54-112">No está diseñado para su uso en el intercambio de datos multipunto, sino que se usa para recibir indicaciones de eventos de red (por ejemplo, \_ el cierre de FD) para la conexión que existe en la hoja de c determinada \_ .</span><span class="sxs-lookup"><span data-stu-id="6af54-112">It is not intended to be used for exchange of multipoint data, but rather is used to receive network event indications (for example FD\_CLOSE) for the connection that exists to the particular c\_leaf.</span></span> <span data-ttu-id="6af54-113">Algunas implementaciones de Multipoint también pueden permitir el uso de este socket para chats laterales entre la raíz y un nodo hoja individual.</span><span class="sxs-lookup"><span data-stu-id="6af54-113">Some multipoint implementations may also allow this socket to be used for side chats between the root and an individual leaf node.</span></span> <span data-ttu-id="6af54-114">\_Se debe proporcionar una indicación de cierre FD para este socket si el nodo hoja correspondiente llama a [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) para quitarlo de la sesión de multipoint.</span><span class="sxs-lookup"><span data-stu-id="6af54-114">An FD\_CLOSE indication should be given for this socket if the corresponding leaf node calls [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) to drop out of the multipoint session.</span></span> <span data-ttu-id="6af54-115">Simétricamente, la invocación de **WSPCloseSocket** en el \_ socket hoja de c devuelto desde [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) hará que el socket del nodo hoja correspondiente obtenga la \_ notificación FD Close.</span><span class="sxs-lookup"><span data-stu-id="6af54-115">Symmetrically, invoking **WSPCloseSocket** on the c\_leaf socket returned from [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) will cause the socket in the corresponding leaf node to get FD\_CLOSE notification.</span></span>

<span data-ttu-id="6af54-116">Cuando [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) se invoca con un socket de \_ hoja de c, el parámetro *Name* contiene la dirección de la aplicación raíz (para un esquema de control con raíz) o una sesión de Multipoint existente (esquema de control sin raíz) y el descriptor de sockets devuelto es el mismo que el descriptor de socket de entrada.</span><span class="sxs-lookup"><span data-stu-id="6af54-116">When [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) is invoked with a c\_leaf socket, the *name* parameter contains the address of the root application (for a rooted control scheme) or an existing multipoint session (nonrooted control scheme), and the returned socket descriptor is the same as the input socket descriptor.</span></span> <span data-ttu-id="6af54-117">En un esquema de control con raíz, el cliente raíz pondría su \_ socket raíz de c en el modo de escucha mediante una llamada a [**WSPListen**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)).</span><span class="sxs-lookup"><span data-stu-id="6af54-117">In a rooted control scheme, the root client would put its c\_root socket in the listening mode by calling [**WSPListen**](/previous-versions/windows/hardware/network/ff566297(v=vs.85)).</span></span> <span data-ttu-id="6af54-118">La notificación de aceptación de FD estándar \_ se entregará cuando el nodo hoja solicite unirse a la sesión de multipoint.</span><span class="sxs-lookup"><span data-stu-id="6af54-118">The standard FD\_ACCEPT notification will be delivered when the leaf node requests to join itself to the multipoint session.</span></span> <span data-ttu-id="6af54-119">El cliente raíz utiliza la función [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) habitual para admitir el nuevo nodo hoja.</span><span class="sxs-lookup"><span data-stu-id="6af54-119">The root client uses the usual [**WSPAccept**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspaccept) function to admit the new leaf node.</span></span> <span data-ttu-id="6af54-120">El valor devuelto de **WSPAccept** también es un \_ descriptor de socket de hoja de c como el devuelto por **WSPJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="6af54-120">The value returned from **WSPAccept** is also a c\_leaf socket descriptor just like those returned from **WSPJoinLeaf**.</span></span> <span data-ttu-id="6af54-121">Para dar cabida a esquemas Multipoint que permitan combinaciones iniciadas por raíz y iniciadas por hojas, es aceptable que un \_ socket raíz de c que ya esté en modo de escucha se use como entrada en **WSPJoinLeaf**.</span><span class="sxs-lookup"><span data-stu-id="6af54-121">To accommodate multipoint schemes that allow both root-initiated and leaf-initiated joins, it is acceptable for a c\_root socket that is already in listening mode to be used as in input to **WSPJoinLeaf**.</span></span>

<span data-ttu-id="6af54-122">Un cliente raíz MultiPoint es generalmente responsable del desmontaje ordenado de una sesión multipoint.</span><span class="sxs-lookup"><span data-stu-id="6af54-122">A multipoint root client is generally responsible for the orderly dismantling of a multipoint session.</span></span> <span data-ttu-id="6af54-123">Este tipo de aplicación puede usar [**WSPShutdown**](/previous-versions/windows/desktop/legacy/ms742294(v=vs.85)) o [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) en un \_ socket raíz de c para producir todos los sockets de hoja de c asociados \_ , incluidos los devueltos desde [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) y sus correspondientes \_ sockets de hoja de c en los nodos de hoja remotos, para obtener la notificación de tipo FD \_ .</span><span class="sxs-lookup"><span data-stu-id="6af54-123">Such an application may use [**WSPShutdown**](/previous-versions/windows/desktop/legacy/ms742294(v=vs.85)) or [**WSPCloseSocket**](/previous-versions/windows/hardware/network/ff566273(v=vs.85)) on a c\_root socket to cause all of the associated c\_leaf sockets, including those returned from [**WSPJoinLeaf**](/windows/desktop/api/Ws2spi/nc-ws2spi-lpwspjoinleaf) and their corresponding c\_leaf sockets in the remote leaf nodes, to get FD\_CLOSE notification.</span></span>

 

 
