---
description: Para convertir archivos multimedia al formato ASF, puede usar codificadores de Windows Media. Obtenga información sobre el uso de objetos de activación de un codificador.
ms.assetid: 18c26619-6047-4f7f-bb65-ca418f02e5b1
title: Usar objetos de activación de codificadores
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9c4111d116c8864cc0a500fa3a0c2f612d1d6345
ms.sourcegitcommit: 51ef825fb48f15e1aa30e8795988f10dc2b2155c
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/14/2021
ms.locfileid: "112067990"
---
# <a name="using-an-encoders-activation-objects"></a><span data-ttu-id="e0891-104">Usar objetos de activación de un codificador</span><span class="sxs-lookup"><span data-stu-id="e0891-104">Using an Encoder's Activation Objects</span></span>

<span data-ttu-id="e0891-105">Para convertir archivos multimedia al formato ASF, puede usar codificadores de Windows Media.</span><span class="sxs-lookup"><span data-stu-id="e0891-105">For converting media files into ASF format, you can use Windows Media encoders.</span></span> <span data-ttu-id="e0891-106">Para usar estos codificadores, deben estar registrados en el sistema.</span><span class="sxs-lookup"><span data-stu-id="e0891-106">To use these encoders, they must be registered with the system.</span></span>

<span data-ttu-id="e0891-107">Para obtener información sobre el registro del codificador, vea [Creación de instancias de Un codificador MFT.](instantiating-the-encoder-mft.md)</span><span class="sxs-lookup"><span data-stu-id="e0891-107">For information about encoder registration, see [Instantiating an Encoder MFT](instantiating-the-encoder-mft.md).</span></span>

-   [<span data-ttu-id="e0891-108">Usar objetos de activación de un codificador</span><span class="sxs-lookup"><span data-stu-id="e0891-108">Using an Encoder's Activation Objects</span></span>](#using-an-encoders-activation-objects)
-   [<span data-ttu-id="e0891-109">Enumeración de codificadores en Windows 7 y versiones posteriores</span><span class="sxs-lookup"><span data-stu-id="e0891-109">Encoder Enumeration in Windows 7 and Later</span></span>](#encoder-enumeration-in-windows-7-and-later)
-   [<span data-ttu-id="e0891-110">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e0891-110">Related topics</span></span>](#related-topics)

## <a name="using-an-encoders-activation-objects"></a><span data-ttu-id="e0891-111">Usar objetos de activación de un codificador</span><span class="sxs-lookup"><span data-stu-id="e0891-111">Using an Encoder's Activation Objects</span></span>

<span data-ttu-id="e0891-112">Como alternativa al uso de la interfaz [**DETRANSFORMTRANSFORM**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) de un codificador (descrita en Creación de un codificador mediante [CoCreateInstance),](using-an-encoder-s-imftransform--interface.md)puede crear una instancia del objeto de activación para el codificador.</span><span class="sxs-lookup"><span data-stu-id="e0891-112">As an alternative to using an encoder's [**IMFTransform**](/windows/desktop/api/mftransform/nn-mftransform-imftransform) interface (described in [Creating an Encoder by Using CoCreateInstance](using-an-encoder-s-imftransform--interface.md)), you can create an instance of the activation object for the encoder.</span></span> <span data-ttu-id="e0891-113">Los objetos de activación facilitan la creación del codificador Media Foundation proporciona las dos funciones siguientes para este enfoque:</span><span class="sxs-lookup"><span data-stu-id="e0891-113">Activation objects facilitates encoder creation and Media Foundation provides the following two functions for this approach:</span></span>

-   <span data-ttu-id="e0891-114">[**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) para crear instancias del codificador de audio de Windows Media.</span><span class="sxs-lookup"><span data-stu-id="e0891-114">[**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) for instantiating the Windows Media audio encoder.</span></span>
-   <span data-ttu-id="e0891-115">[**MFCreateWMVEncoderActivate para crear**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) instancias del codificador de vídeo de Windows Media.</span><span class="sxs-lookup"><span data-stu-id="e0891-115">[**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) for instantiating the Windows Media video encoder.</span></span>

<span data-ttu-id="e0891-116">Ambas funciones requieren que cree el tipo de medio de destino y establezca las propiedades de codificación antes de llamar a estas funciones.</span><span class="sxs-lookup"><span data-stu-id="e0891-116">Both these functions require that you create the target media type and set the encoding properties before calling these functions.</span></span> <span data-ttu-id="e0891-117">Si la aplicación usa componentes de [ASF](pipeline-layer-asf-components.md) de capa de canalización para codificar un archivo en formato ASF y ya ha creado y configurado los receptores de medios de [ASF,](asf-media-sinks.md)puede obtener este conjunto de información del receptor de medios de ASF.</span><span class="sxs-lookup"><span data-stu-id="e0891-117">If your application is using [Pipeline Layer ASF Components](pipeline-layer-asf-components.md) to encode a file to ASF format, and have already created and configured the [ASF Media Sinks](asf-media-sinks.md), you can get this set of information from the ASF media sink.</span></span>

<span data-ttu-id="e0891-118">[**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) y [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) establecen el tipo de salida del codificador en el tipo de medio especificado por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e0891-118">[**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) and [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) set the output type of the encoder to the media type specified by the application.</span></span>

<span data-ttu-id="e0891-119">**Nota**  Si usa [**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) y [**MFCreateWMVEncoderActivate,**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) puede activar el codificador llamando a [**MFActivate::ActivateObject,**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) pero no puede cambiar los tipos de medios de entrada y salida del codificador ni puede cambiar ninguna de las propiedades de codificación.</span><span class="sxs-lookup"><span data-stu-id="e0891-119">**Note**  If you are using [**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) and [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate) you can activate the encoder by calling [**IMFActivate::ActivateObject**](/windows/desktop/api/mfobjects/nf-mfobjects-imfactivate-activateobject) but you cannot change the input and the output media types of the encoder nor can you change any of the encoding properties.</span></span>

<span data-ttu-id="e0891-120">Para obtener más información sobre cómo crear Media Foundation mediante objetos de activación, vea [Activation Objects](activation-objects.md).</span><span class="sxs-lookup"><span data-stu-id="e0891-120">For more information about creating Media Foundation objects by using activation objects, see [Activation Objects](activation-objects.md).</span></span>

<span data-ttu-id="e0891-121">**Para obtener el tipo de medio de destino del receptor de medios de ASF**</span><span class="sxs-lookup"><span data-stu-id="e0891-121">**To get the target media type from the ASF media sink**</span></span>

1.  <span data-ttu-id="e0891-122">Obtenga un puntero al puntero [**IMFASFContentInfo**](/windows/desktop/api/wmcontainer/nn-wmcontainer-imfasfcontentinfo) del receptor de medios de ASF llamando a **IMFMediaSink::QueryInterface** en el receptor de medios de ASF y pasando **IID \_ IMFASFContentInfo** como identificador de interfaz.</span><span class="sxs-lookup"><span data-stu-id="e0891-122">Get a pointer to the [**IMFASFContentInfo**](/windows/desktop/api/wmcontainer/nn-wmcontainer-imfasfcontentinfo) pointer of the ASF media sink by calling **IMFMediaSink::QueryInterface** on the ASF media sink and passing **IID\_IMFASFContentInfo** as the interface identifier.</span></span>
2.  <span data-ttu-id="e0891-123">Obtiene el objeto de perfil de ASF asociado al objeto ContentInfo.</span><span class="sxs-lookup"><span data-stu-id="e0891-123">Get the ASF profile object associated with the ContentInfo object.</span></span>
3.  <span data-ttu-id="e0891-124">Enumera las secuencias del perfil para obtener el tipo de medio de la secuencia.</span><span class="sxs-lookup"><span data-stu-id="e0891-124">Enumerate the streams in the profile to get the stream's media type.</span></span>

<span data-ttu-id="e0891-125">**Para obtener las propiedades de codificación del receptor de medios de ASF**</span><span class="sxs-lookup"><span data-stu-id="e0891-125">**To get the encoding properties from the ASF media sink**</span></span>

1.  <span data-ttu-id="e0891-126">Si ha configurado [](configuring-the-encoder.md) las propiedades de codificación en el receptor multimedia (descritas en Establecer propiedades en el receptor de [archivos),](setting-properties-in-the-file-sink.md)puede hacer referencia al almacén de propiedades del receptor llamando a **IMFMediaSink::QueryInterface** en el receptor de medios de ASF y pasando **\_ IID IPropertyStore** como identificador de interfaz.</span><span class="sxs-lookup"><span data-stu-id="e0891-126">If you have configured the [Encoding Properties](configuring-the-encoder.md) in the media sink (described in [Setting Properties in the File Sink](setting-properties-in-the-file-sink.md)), you can a reference to the sink's property store by calling **IMFMediaSink::QueryInterface** on the ASF media sink and passing **IID\_IPropertyStore** as the interface identifier.</span></span>
2.  <span data-ttu-id="e0891-127">Si tiene un puntero al objeto ContentInfo del receptor, puede llamar a [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) para obtener una referencia al almacén de propiedades del receptor multimedia.</span><span class="sxs-lookup"><span data-stu-id="e0891-127">If you have a pointer to the sink's ContentInfo object, you can call [**IMFASFContentInfo::GetEncodingConfigurationPropertyStore**](/windows/desktop/api/wmcontainer/nf-wmcontainer-imfasfcontentinfo-getencodingconfigurationpropertystore) to get a reference to the media sink's property store.</span></span>

    <span data-ttu-id="e0891-128">Asegúrese de que todas las propiedades de codificación establecidas en el receptor de medios de ASF se reflejan en el almacén de propiedades pasado a [**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) y [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate).</span><span class="sxs-lookup"><span data-stu-id="e0891-128">Make sure that all of encoding properties that are set on the ASF media sink are reflected in the property store passed to [**MFCreateWMAEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmaencoderactivate) and [**MFCreateWMVEncoderActivate**](/windows/desktop/api/wmcontainer/nf-wmcontainer-mfcreatewmvencoderactivate).</span></span> <span data-ttu-id="e0891-129">El codificador se configura automáticamente en función de la configuración especificada por la aplicación.</span><span class="sxs-lookup"><span data-stu-id="e0891-129">The encoder is configured automatically based on the settings specified by the application.</span></span>

<span data-ttu-id="e0891-130">Al crear el nodo de transformación en la topología de codificación, puede establecer el tipo de objeto como un puntero [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) recibido en estas dos llamadas.</span><span class="sxs-lookup"><span data-stu-id="e0891-130">While creating the transform node in the encoding topology, you can set the object type as an [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointer received in these two calls.</span></span> <span data-ttu-id="e0891-131">Cuando se resuelve la topología, la sesión multimedia usa el objeto de activación para crear una instancia del MFT del codificador.</span><span class="sxs-lookup"><span data-stu-id="e0891-131">When the topology is resolved, the Media Session uses the activation object to create an instance of the encoder MFT.</span></span>

## <a name="encoder-enumeration-in-windows-7-and-later"></a><span data-ttu-id="e0891-132">Enumeración de codificadores en Windows 7 y versiones posteriores</span><span class="sxs-lookup"><span data-stu-id="e0891-132">Encoder Enumeration in Windows 7 and Later</span></span>

<span data-ttu-id="e0891-133">Para las aplicaciones que se ejecutan en Windows 7, además de [**MFTEnum,**](/windows/desktop/api/mfapi/nf-mfapi-mftenum) puede enumerar las MFTT del codificador llamando a [**MFTEnumEx**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex).</span><span class="sxs-lookup"><span data-stu-id="e0891-133">For applications that are running on Windows 7, in addition to [**MFTEnum**](/windows/desktop/api/mfapi/nf-mfapi-mftenum) you can enumerate the encoder MFTs by calling [**MFTEnumEx**](/windows/desktop/api/mfapi/nf-mfapi-mftenumex).</span></span> <span data-ttu-id="e0891-134">Esta función devuelve un puntero al objeto de activación del MFT del codificador.</span><span class="sxs-lookup"><span data-stu-id="e0891-134">This function returns a pointer to the activation object of the encoder MFT.</span></span> <span data-ttu-id="e0891-135">La estructura de la función es muy similar a **MFTEnum** descrita anteriormente, salvo que **MFTEnumEx** devuelve una matriz de punteros [**DE TIPO MFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) para los MFTEnum del codificador que coinciden con los criterios de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="e0891-135">The structure of the function is very similar to **MFTEnum** described above except **MFTEnumEx** returns an array of [**IMFActivate**](/windows/desktop/api/mfobjects/nn-mfobjects-imfactivate) pointers for the encoder MFTs that match the search criteria.</span></span>

## <a name="related-topics"></a><span data-ttu-id="e0891-136">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e0891-136">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="e0891-137">Creación de instancias de un MFT de codificador</span><span class="sxs-lookup"><span data-stu-id="e0891-137">Instantiating an Encoder MFT</span></span>](instantiating-the-encoder-mft.md)
</dt> <dt>

[<span data-ttu-id="e0891-138">Codificadores de Windows Media</span><span class="sxs-lookup"><span data-stu-id="e0891-138">Windows Media Encoders</span></span>](windows-media-encoders.md)
</dt> <dt>

[<span data-ttu-id="e0891-139">Objetos de activación</span><span class="sxs-lookup"><span data-stu-id="e0891-139">Activation Objects</span></span>](activation-objects.md)
</dt> </dl>

 

 



