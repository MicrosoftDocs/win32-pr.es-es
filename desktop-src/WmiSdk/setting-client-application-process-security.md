---
description: Las aplicaciones cliente que llaman a interfaces WMI pueden controlar los niveles de seguridad de sus procesos.
ms.assetid: 790b4e40-9b92-464a-a774-dec0b75cedee
ms.tgt_platform: multiple
title: Establecer la seguridad del proceso de la aplicación cliente
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 8bfa0a42390ffa433cff01300b0976d40553665c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104277695"
---
# <a name="setting-client-application-process-security"></a><span data-ttu-id="55ccf-103">Establecer la seguridad del proceso de la aplicación cliente</span><span class="sxs-lookup"><span data-stu-id="55ccf-103">Setting Client Application Process Security</span></span>

<span data-ttu-id="55ccf-104">Las aplicaciones cliente que llaman a interfaces WMI pueden controlar los niveles de seguridad de sus procesos.</span><span class="sxs-lookup"><span data-stu-id="55ccf-104">Client applications that call WMI interfaces can control the security levels of their processes.</span></span> <span data-ttu-id="55ccf-105">Todas las aplicaciones WMI acceden a WMI a través de COM y se puede llamar a la función COM [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity) para establecer la seguridad de los procesos.</span><span class="sxs-lookup"><span data-stu-id="55ccf-105">All WMI applications access WMI through COM, and you can call the COM function [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity) to set security for your processes.</span></span> <span data-ttu-id="55ccf-106">Las aplicaciones que realizan llamadas asincrónicas a WMI y a aplicaciones que se registran como consumidores de eventos establecen los niveles de seguridad de la llamada en WMI.</span><span class="sxs-lookup"><span data-stu-id="55ccf-106">Applications that make asynchronous calls to WMI and applications that register as event consumers set security levels on the call into WMI.</span></span>

<span data-ttu-id="55ccf-107">Si no realiza una llamada explícita a [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity), com lo llama implícitamente con valores del registro.</span><span class="sxs-lookup"><span data-stu-id="55ccf-107">If you do not make an explicit call to [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity), COM calls it implicitly with values from the registry.</span></span> <span data-ttu-id="55ccf-108">Sin embargo, los valores del registro pueden tener una configuración inferior para la suplantación y la autenticación que no proporcionan la seguridad necesaria para WMI.</span><span class="sxs-lookup"><span data-stu-id="55ccf-108">However, the registry values may have lower settings for impersonation and authentication that do not provide the security required for WMI.</span></span> <span data-ttu-id="55ccf-109">Para obtener más información, vea [establecer el nivel de seguridad de proceso predeterminado mediante C++](setting-the-default-process-security-level-using-c-.md).</span><span class="sxs-lookup"><span data-stu-id="55ccf-109">For more information, see [Setting the Default Process Security Level Using C++](setting-the-default-process-security-level-using-c-.md).</span></span>

<span data-ttu-id="55ccf-110">No se recomienda el acceso asincrónico a WMI.</span><span class="sxs-lookup"><span data-stu-id="55ccf-110">Asynchronous access to WMI is not recommended.</span></span> <span data-ttu-id="55ccf-111">Una devolución de llamada asincrónica permite que un usuario no autenticado proporcione datos al receptor.</span><span class="sxs-lookup"><span data-stu-id="55ccf-111">An asynchronous callback allows a non-authenticated user to provide data to the sink.</span></span> <span data-ttu-id="55ccf-112">Esto supone riesgos de seguridad para los scripts y las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="55ccf-112">This poses security risks to your scripts and applications.</span></span> <span data-ttu-id="55ccf-113">Para eliminar los riesgos, utilice la comunicación sincrónica o semisincrónica, o realice comprobaciones de acceso adecuadas en la aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="55ccf-113">To eliminate the risks, use semisynchronous or synchronous communication, or perform proper access checks in your client application.</span></span> <span data-ttu-id="55ccf-114">Para obtener más información, consulte [llamar a un método](calling-a-method.md).</span><span class="sxs-lookup"><span data-stu-id="55ccf-114">For more information, see [Calling a Method](calling-a-method.md).</span></span>

<span data-ttu-id="55ccf-115">Las llamadas a cualquiera de los proxies de WMI ([**IWbemServices**](/windows/desktop/api/WbemCli/nn-wbemcli-iwbemservices), [**IEnumWbemClassObject**](/windows/desktop/api/Wbemcli/nn-wbemcli-ienumwbemclassobject),[**IWbemCallResult**](/windows/desktop/api/Wbemcli/nn-wbemcli-iwbemcallresult)o [**IWbemRefresher**](/windows/desktop/api/Wbemcli/nn-wbemcli-iwbemrefresher)) usan un puntero fuera de proceso.</span><span class="sxs-lookup"><span data-stu-id="55ccf-115">Calls to any of the WMI proxies ([**IWbemServices**](/windows/desktop/api/WbemCli/nn-wbemcli-iwbemservices), [**IEnumWbemClassObject**](/windows/desktop/api/Wbemcli/nn-wbemcli-ienumwbemclassobject),[**IWbemCallResult**](/windows/desktop/api/Wbemcli/nn-wbemcli-iwbemcallresult), or [**IWbemRefresher**](/windows/desktop/api/Wbemcli/nn-wbemcli-iwbemrefresher)) use an out-of-process pointer.</span></span> <span data-ttu-id="55ccf-116">Para obtener más información sobre los valores predeterminados y las recomendaciones, vea [establecer la seguridad en IWbemServices y en otros servidores proxy](setting-the-security-on-iwbemservices-and-other-proxies.md).</span><span class="sxs-lookup"><span data-stu-id="55ccf-116">For more information about the defaults and recommendations, see [Setting the Security on IWbemServices and Other Proxies](setting-the-security-on-iwbemservices-and-other-proxies.md).</span></span>

<span data-ttu-id="55ccf-117">En el procedimiento siguiente se describen los pasos que debe realizar para establecer la seguridad de WMI en el proceso de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="55ccf-117">The following procedure describes the steps you must perform to set the security for WMI on your application process.</span></span>

<span data-ttu-id="55ccf-118">**Para establecer la seguridad de WMI en el proceso de la aplicación**</span><span class="sxs-lookup"><span data-stu-id="55ccf-118">**To set security for WMI on your application process**</span></span>

1.  <span data-ttu-id="55ccf-119">Determine los niveles de seguridad necesarios para los sistemas operativos Windows en los que se ejecuta la aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="55ccf-119">Determine the security levels required for the Windows operating systems on which your client application runs.</span></span>
2.  <span data-ttu-id="55ccf-120">Llame a la función [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity) de com para establecer la seguridad predeterminada del proceso en el que se ejecuta la aplicación cliente.</span><span class="sxs-lookup"><span data-stu-id="55ccf-120">Call the COM [**CoInitializeSecurity**](/windows/win32/api/combaseapi/nf-combaseapi-coinitializesecurity) function to set the default security for the process in which the client application runs.</span></span> <span data-ttu-id="55ccf-121">Esto declara la cantidad de seguridad que requieren otras aplicaciones para tener acceso al proceso en el que se ejecuta la aplicación.</span><span class="sxs-lookup"><span data-stu-id="55ccf-121">This declares how much security other applications require to access the process in which your application runs.</span></span>
3.  <span data-ttu-id="55ccf-122">Si necesita cambiar la seguridad en un proxy individual, por ejemplo, en otra llamada a [**IWbemServices**](/windows/desktop/api/WbemCli/nn-wbemcli-iwbemservices), llame a [**CoSetProxyBlanket**](/windows/win32/api/combaseapi/nf-combaseapi-cosetproxyblanket).</span><span class="sxs-lookup"><span data-stu-id="55ccf-122">If you need to change the security on an individual proxy, for example on another call to [**IWbemServices**](/windows/desktop/api/WbemCli/nn-wbemcli-iwbemservices), call [**CoSetProxyBlanket**](/windows/win32/api/combaseapi/nf-combaseapi-cosetproxyblanket).</span></span>
4.  <span data-ttu-id="55ccf-123">Si necesita controlar el hardware remoto o un objeto del sistema que requiere más privilegios, use la función [**AdjustTokenPrivileges**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-adjusttokenprivileges) para habilitar los privilegios necesarios.</span><span class="sxs-lookup"><span data-stu-id="55ccf-123">If you need to control remote hardware or a system object that requires more privilege, use the [**AdjustTokenPrivileges**](/windows/desktop/api/securitybaseapi/nf-securitybaseapi-adjusttokenprivileges) function to enable the necessary privileges.</span></span> <span data-ttu-id="55ccf-124">Tenga en cuenta que no puede habilitar un privilegio que el proceso aún no tiene asignado.</span><span class="sxs-lookup"><span data-stu-id="55ccf-124">Note that you cannot enable a privilege that the process does not already have assigned to it.</span></span> <span data-ttu-id="55ccf-125">Para obtener más información, vea [comprobar el acceso a objetos privados](/windows/desktop/SecAuthZ/checking-access-to-private-objects).</span><span class="sxs-lookup"><span data-stu-id="55ccf-125">For more information, see [Checking Access to Private Objects](/windows/desktop/SecAuthZ/checking-access-to-private-objects).</span></span>

<span data-ttu-id="55ccf-126">Para obtener más información sobre cómo establecer el nivel de seguridad de proceso predeterminado, vea [establecer el nivel de seguridad de proceso predeterminado con C++](setting-the-default-process-security-level-using-c-.md) y [establecer el nivel de seguridad de proceso predeterminado mediante VBScript](setting-the-default-process-security-level-using-vbscript.md).</span><span class="sxs-lookup"><span data-stu-id="55ccf-126">For further information about setting the default process security level, see [Setting the Default Process Security Level Using C++](setting-the-default-process-security-level-using-c-.md) and [Setting the Default Process Security Level Using VBScript](setting-the-default-process-security-level-using-vbscript.md).</span></span>

 

 
