---
description: Siempre que el sistema determine que hay una actividad de usuario o de aplicación, no entrará en modo de suspensión.
ms.assetid: 83c9394a-1813-405a-802a-0623e5de50d3
title: Criterios de suspensión del sistema
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: b90950b980ec1e0fa06171d7a57d76b410534f96
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103813779"
---
# <a name="system-sleep-criteria"></a><span data-ttu-id="a10f4-103">Criterios de suspensión del sistema</span><span class="sxs-lookup"><span data-stu-id="a10f4-103">System Sleep Criteria</span></span>

<span data-ttu-id="a10f4-104">Siempre que el sistema determine que hay una actividad de usuario o de aplicación, no entrará en modo de suspensión.</span><span class="sxs-lookup"><span data-stu-id="a10f4-104">As long as the system determines that there is user or application activity, it will not enter sleep.</span></span> <span data-ttu-id="a10f4-105">El sistema puede detectar ciertas actividades, como la entrada de usuario o las comunicaciones de red.</span><span class="sxs-lookup"><span data-stu-id="a10f4-105">The system can detect certain activities, such as user input or network communications.</span></span> <span data-ttu-id="a10f4-106">Sin embargo, hay otras actividades que el sistema no puede detectar.</span><span class="sxs-lookup"><span data-stu-id="a10f4-106">However, there are other activities that the system cannot detect.</span></span> <span data-ttu-id="a10f4-107">Por ejemplo, una aplicación de presentación requiere que la pantalla se muestre.</span><span class="sxs-lookup"><span data-stu-id="a10f4-107">For example, a presentation application requires the screen for display.</span></span> <span data-ttu-id="a10f4-108">Sin embargo, puede parecer que la aplicación está inactiva durante la presentación, lo que hace que el sistema desactive la pantalla.</span><span class="sxs-lookup"><span data-stu-id="a10f4-108">However, it may appear that the application is idle during the presentation, causing the system to turn off the display.</span></span>

<span data-ttu-id="a10f4-109">Para notificar al sistema que la aplicación está ocupada, utilice la función [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) .</span><span class="sxs-lookup"><span data-stu-id="a10f4-109">To notify the system that your application is busy, use the [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) function.</span></span> <span data-ttu-id="a10f4-110">Esta función evita que el sistema entre en suspensión o apaga la pantalla mientras la aplicación se está ejecutando.</span><span class="sxs-lookup"><span data-stu-id="a10f4-110">This function prevents the system from entering sleep or turning off the display while the application is running.</span></span>

<span data-ttu-id="a10f4-111">Las aplicaciones de presentación y multimedia deben llamar a la función [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) con la **\_ pantalla es \_ necesaria** para que el sistema sepa que no debe poner el dispositivo de pantalla en modo de suspensión.</span><span class="sxs-lookup"><span data-stu-id="a10f4-111">Presentation and multimedia applications must call the [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) function with **ES\_DISPLAY\_REQUIRED** so that the system will know that it should not put the display device to sleep.</span></span> <span data-ttu-id="a10f4-112">Las aplicaciones de control de eventos, como las herramientas para administrar los faxes entrantes, deben llamar a **SetThreadExecutionState** con el **\_ sistema es \_ necesario**, controlar el evento y, a continuación, borrar la marca para que el sistema pueda volver a entrar en modo de suspensión.</span><span class="sxs-lookup"><span data-stu-id="a10f4-112">Event-handling applications, such as tools for managing incoming faxes, must call **SetThreadExecutionState** with **ES\_SYSTEM\_REQUIRED**, handle the event, and then clear the flag so the system can return to sleep.</span></span> <span data-ttu-id="a10f4-113">Tenga en cuenta que la mayoría de las aplicaciones de productividad no necesitan usar **SetThreadExecutionState** porque el sistema normalmente puede determinar la actividad mediante la entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="a10f4-113">Note that most productivity applications do not need to use **SetThreadExecutionState** because the system can usually determine activity by user input.</span></span>

<span data-ttu-id="a10f4-114">Para mantener el tiempo transcurrido desde la última entrada del usuario, el sistema utiliza un temporizador de inactividad de pantalla y un temporizador de inactividad del sistema.</span><span class="sxs-lookup"><span data-stu-id="a10f4-114">To maintain the time since the last user input, the system uses a display idle timer and a system idle timer.</span></span> <span data-ttu-id="a10f4-115">El sistema compara los temporizadores de inactividad con los valores configurados en el plan de energía.</span><span class="sxs-lookup"><span data-stu-id="a10f4-115">The system compares the idle timers to the values configured in the power plan.</span></span> <span data-ttu-id="a10f4-116">Si el valor del temporizador de inactividad de la pantalla es mayor que el valor de tiempo de espera de la presentación y ningún subproceso solicitó la presentación mediante una llamada a [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) con la **presentación de es \_ \_ necesaria**, el sistema apaga la pantalla.</span><span class="sxs-lookup"><span data-stu-id="a10f4-116">If the display idle timer value is greater than the display time-out value, and no threads have requested the display by calling [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate) with **ES\_DISPLAY\_REQUIRED**, the system powers off the display.</span></span> <span data-ttu-id="a10f4-117">Del mismo modo, si el temporizador inactivo del sistema es mayor que el valor de tiempo de espera del sistema y ninguna aplicación ha solicitado el sistema mediante una llamada a **SetThreadExecutionState** con el **\_ sistema es \_ necesario**, el sistema entra en suspensión.</span><span class="sxs-lookup"><span data-stu-id="a10f4-117">Similarly, if the system idle timer is greater than the system time-out value and no applications have requested the system by calling **SetThreadExecutionState** with **ES\_SYSTEM\_REQUIRED**, the system enters sleep.</span></span>

<span data-ttu-id="a10f4-118">El sistema mantiene un recuento de las aplicaciones que han llamado a [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate).</span><span class="sxs-lookup"><span data-stu-id="a10f4-118">The system maintains a count of applications that have called [**SetThreadExecutionState**](/windows/desktop/api/Winbase/nf-winbase-setthreadexecutionstate).</span></span> <span data-ttu-id="a10f4-119">El sistema realiza un seguimiento de cada subproceso que llama a **SetThreadExecutionState** y ajusta el contador en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="a10f4-119">The system tracks each thread that calls **SetThreadExecutionState** and adjusts the counter accordingly.</span></span> <span data-ttu-id="a10f4-120">Si este contador llega a cero y no se ha producido ninguna acción del usuario, el sistema entra en suspensión.</span><span class="sxs-lookup"><span data-stu-id="a10f4-120">If this counter reaches zero and there has not been any user input, the system enters sleep.</span></span>

<span data-ttu-id="a10f4-121">Si la alimentación es baja, una aplicación puede solicitar la intervención del usuario o solicitar que el sistema se suspenda.</span><span class="sxs-lookup"><span data-stu-id="a10f4-121">If power is low, an application can request user intervention or request that the system suspend itself.</span></span> <span data-ttu-id="a10f4-122">Puede suspender el funcionamiento del sistema mediante la función [**SetSuspendState**](/windows/desktop/api/PowrProf/nf-powrprof-setsuspendstate) .</span><span class="sxs-lookup"><span data-stu-id="a10f4-122">You can suspend system operation by using the [**SetSuspendState**](/windows/desktop/api/PowrProf/nf-powrprof-setsuspendstate) function.</span></span>

<span data-ttu-id="a10f4-123">Si el sistema se reactiva automáticamente ([PBT \_ APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md)), ninguno de los temporizadores es relevante.</span><span class="sxs-lookup"><span data-stu-id="a10f4-123">If the system wakes automatically ([PBT\_APMRESUMEAUTOMATIC](pbt-apmresumeautomatic.md)), none of the timers are relevant.</span></span> <span data-ttu-id="a10f4-124">Para obtener más información, consulte [eventos de reactivación del sistema](system-wake-up-events.md).</span><span class="sxs-lookup"><span data-stu-id="a10f4-124">For more information, see [System Wake-up Events](system-wake-up-events.md).</span></span>

## <a name="entering-sleep"></a><span data-ttu-id="a10f4-125">Entrar en suspensión</span><span class="sxs-lookup"><span data-stu-id="a10f4-125">Entering Sleep</span></span>

<span data-ttu-id="a10f4-126">Cuando el sistema entra en suspensión, conserva automáticamente el estado de todo el sistema y de todas las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="a10f4-126">When the system enters sleep, it will automatically preserve the state of the entire system and all applications.</span></span> <span data-ttu-id="a10f4-127">Por lo tanto, la mayoría de las aplicaciones no tienen que realizar ninguna acción especial.</span><span class="sxs-lookup"><span data-stu-id="a10f4-127">Therefore, most applications do not need to take any special action.</span></span> <span data-ttu-id="a10f4-128">Las aplicaciones que necesitan realizar acciones específicas antes de las transiciones del sistema se pueden registrar para los eventos de energía.</span><span class="sxs-lookup"><span data-stu-id="a10f4-128">Applications that need to perform specific actions before the system transitions can register for power events.</span></span>

<span data-ttu-id="a10f4-129">Cuando el sistema envía un evento [PBT \_ APMSUSPEND](pbt-apmsuspend.md) , cada aplicación tiene dos segundos para realizar las acciones necesarias antes de que el sistema inicie la transición al modo de suspensión.</span><span class="sxs-lookup"><span data-stu-id="a10f4-129">When the system sends a [PBT\_APMSUSPEND](pbt-apmsuspend.md) event, each application has two seconds to perform any necessary actions before the system starts the transition to sleep.</span></span> <span data-ttu-id="a10f4-130">Las aplicaciones deben limitar la acción que se lleva a cabo en respuesta a este evento para asegurarse de que completan todas las operaciones en el tiempo asignado.</span><span class="sxs-lookup"><span data-stu-id="a10f4-130">Applications must limit what action they take in response to this event to ensure that they complete all operations in the time allotted.</span></span>

## <a name="related-topics"></a><span data-ttu-id="a10f4-131">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="a10f4-131">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="a10f4-132">Acerca de la administración de energía</span><span class="sxs-lookup"><span data-stu-id="a10f4-132">About Power Management</span></span>](about-power-management.md)
</dt> <dt>

[<span data-ttu-id="a10f4-133">Eventos de reactivación del sistema</span><span class="sxs-lookup"><span data-stu-id="a10f4-133">System Wake-up Events</span></span>](system-wake-up-events.md)
</dt> </dl>

 

 



