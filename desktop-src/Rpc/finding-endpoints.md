---
title: Búsqueda de puntos de conexión
description: Los programas de servidor escuchan los puntos de conexión para las solicitudes de cliente. La sintaxis de la cadena de punto de conexión depende de la secuencia de protocolo que se use. Por ejemplo, el extremo de TCP/IP es un número de puerto y la sintaxis de extremo para canalizaciones con nombre es un nombre de canalización válido.
ms.assetid: 330bbe9f-b7e9-4a5b-86d8-824edec960d2
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: bb0a97df3408a4d3c24dff9de28553f9e4b2210d
ms.sourcegitcommit: 592c9bbd22ba69802dc353bcb5eb30699f9e9403
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 08/20/2020
ms.locfileid: "104359051"
---
# <a name="finding-endpoints"></a><span data-ttu-id="2d2b4-105">Búsqueda de puntos de conexión</span><span class="sxs-lookup"><span data-stu-id="2d2b4-105">Finding Endpoints</span></span>

<span data-ttu-id="2d2b4-106">Los programas de servidor escuchan los puntos de conexión para las solicitudes de cliente.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-106">Server programs listen to endpoints for client requests.</span></span> <span data-ttu-id="2d2b4-107">La sintaxis de la cadena de punto de conexión depende de la secuencia de protocolo que se use.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-107">The syntax of the endpoint string depends on the protocol sequence you use.</span></span> <span data-ttu-id="2d2b4-108">Por ejemplo, el extremo de TCP/IP es un número de puerto y la sintaxis de extremo para canalizaciones con nombre es un nombre de canalización válido.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-108">For example, the endpoint for TCP/IP is a port number, and the endpoint syntax for named pipes is a valid pipe name.</span></span>

<span data-ttu-id="2d2b4-109">Hay dos tipos de extremos: Well-Known y Dynamic.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-109">There are two types of endpoints: well-known and dynamic.</span></span> <span data-ttu-id="2d2b4-110">La elección del tipo de punto de conexión que utiliza el programa determina si la aplicación distribuida o la biblioteca en tiempo de ejecución especifica el extremo.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-110">Your choice of which type of endpoint your program uses determines whether the distributed application or the run-time library specifies the endpoint.</span></span>

<span data-ttu-id="2d2b4-111">En esta sección se describen los puntos de conexión y se ofrece información sobre cómo encontrarlos.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-111">This section discusses endpoints and presents information on how to find them.</span></span> <span data-ttu-id="2d2b4-112">Se organiza en los temas siguientes:</span><span class="sxs-lookup"><span data-stu-id="2d2b4-112">It is organized into the following topics:</span></span>

-   [<span data-ttu-id="2d2b4-113">Uso de puntos de conexión de Well-Known</span><span class="sxs-lookup"><span data-stu-id="2d2b4-113">Using Well-Known Endpoints</span></span>](#using-well-known-endpoints)
-   [<span data-ttu-id="2d2b4-114">Uso de puntos de conexión dinámicos</span><span class="sxs-lookup"><span data-stu-id="2d2b4-114">Using Dynamic Endpoints</span></span>](#using-dynamic-endpoints)
-   [<span data-ttu-id="2d2b4-115">Exportar Well-Known puntos de conexión en la base de datos de asignación de puntos de conexión</span><span class="sxs-lookup"><span data-stu-id="2d2b4-115">Exporting Well-Known Endpoints Into the Endpoint Map Database</span></span>](#exporting-well-known-endpoints-into-the-endpoint-map-database)

> [!Note]  
> <span data-ttu-id="2d2b4-116">Los términos *puntos de conexión estáticos* y puntos *de conexión conocidos* son equivalentes y se usan indistintamente.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-116">The terms *static endpoints* and *well-known endpoints* are equivalent, and used interchangeably.</span></span>

 

<span data-ttu-id="2d2b4-117">Es posible que la aplicación cliente use la asignación de punto de conexión para determinar si un programa de servidor se está ejecutando actualmente o no.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-117">It is possible for your client application to use the endpoint map to determine whether or not a server program is currently running.</span></span> <span data-ttu-id="2d2b4-118">El cliente puede llamar a [**RpcMgmtInqIfIds**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtinqifids), [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin)y [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) para ver si el servidor ha registrado la interfaz concreta que requiere en la asignación de punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-118">Your client can call [**RpcMgmtInqIfIds**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtinqifids), [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin), and [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) to see if the server has registered the particular interface it requires in the endpoint map.</span></span>

## <a name="using-well-known-endpoints"></a><span data-ttu-id="2d2b4-119">Uso de puntos de conexión conocidos</span><span class="sxs-lookup"><span data-stu-id="2d2b4-119">Using Well-known Endpoints</span></span>

<span data-ttu-id="2d2b4-120">Los puntos de conexión conocidos son extremos asignados previamente que el programa de servidor usa cada vez que se ejecuta.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-120">Well-known endpoints are pre-assigned endpoints that the server program uses every time it runs.</span></span> <span data-ttu-id="2d2b4-121">Dado que el servidor siempre escucha a ese extremo concreto, el cliente siempre intenta conectarse a él.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-121">Because the server always listens to that particular endpoint, the client always attempts to connect to it.</span></span> <span data-ttu-id="2d2b4-122">Los puntos de conexión conocidos suelen estar asignados por la autoridad responsable del Protocolo de transporte.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-122">Well-known endpoints are usually assigned by the authority responsible for the transport protocol.</span></span> <span data-ttu-id="2d2b4-123">Dado que los equipos host de servidor tienen un número finito de puntos de conexión disponibles, se recomienda encarecidamente que los desarrolladores de aplicaciones usen puntos de conexión conocidos.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-123">Because server host computers have a finite number of available endpoints, application developers are strongly discouraged from using well-known endpoints.</span></span> <span data-ttu-id="2d2b4-124">Otra ventaja de los puntos de conexión dinámicos es que simplifican la administración y el mantenimiento a largo plazo del sistema.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-124">Another advantage of dynamic endpoints is that they simplify long-term management and maintenance of the system.</span></span>

<span data-ttu-id="2d2b4-125">Una aplicación distribuida puede especificar un punto de conexión conocido en una cadena y pasar esa cadena como un parámetro a la función [**RpcServerUseProtseqEp**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqep).</span><span class="sxs-lookup"><span data-stu-id="2d2b4-125">A distributed application can specify a well-known endpoint in a string and pass that string as a parameter to the function [**RpcServerUseProtseqEp**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcserveruseprotseqep).</span></span> <span data-ttu-id="2d2b4-126">Como alternativa, la cadena de punto de conexión puede aparecer en el encabezado de la interfaz de archivo IDL como parte del atributo de interfaz de \[ [extremo](/windows/desktop/Midl/endpoint) \] .</span><span class="sxs-lookup"><span data-stu-id="2d2b4-126">Alternatively, the endpoint string can appear in the IDL file interface header as part of the \[ [endpoint](/windows/desktop/Midl/endpoint)\] interface attribute.</span></span>

<span data-ttu-id="2d2b4-127">Puede usar dos enfoques para implementar el punto de conexión conocido:</span><span class="sxs-lookup"><span data-stu-id="2d2b4-127">You can use two approaches to implement the well-known endpoint:</span></span>

-   <span data-ttu-id="2d2b4-128">Especificar toda la información en un enlace de cadena</span><span class="sxs-lookup"><span data-stu-id="2d2b4-128">Specify all information in a string binding</span></span>
-   <span data-ttu-id="2d2b4-129">Almacenar el punto de conexión conocido en la base de datos del servicio de nombres</span><span class="sxs-lookup"><span data-stu-id="2d2b4-129">Store the well-known endpoint in the name service database</span></span>

<span data-ttu-id="2d2b4-130">Puede escribir toda la información necesaria para establecer un enlace en una aplicación distribuida al desarrollarla.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-130">You can write all of the information needed to establish a binding into a distributed application when you develop it.</span></span> <span data-ttu-id="2d2b4-131">El cliente puede especificar el punto de conexión conocido directamente en una cadena, llamar a [**RpcStringBindingCompose**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcstringbindingcompose) para crear una cadena que contenga toda la información de enlace y proporcionar esta cadena a la función [**RpcBindingFromStringBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding) para obtener un identificador.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-131">The client can specify the well-known endpoint directly in a string, call [**RpcStringBindingCompose**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcstringbindingcompose) to create a string that contains all the binding information, and supply this string to the function [**RpcBindingFromStringBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcbindingfromstringbinding) to obtain a handle.</span></span> <span data-ttu-id="2d2b4-132">El cliente y el servidor se pueden codificar de forma rígida para usar un punto de conexión bien conocido, o bien escribirse de modo que la información del punto de conexión proceda de la línea de comandos, un archivo de datos, un archivo de configuración o el archivo IDL.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-132">The client and server can be hard-coded to use a well-known endpoint, or written so that the endpoint information comes from the command line, a data file, a configuration file, or the IDL file.</span></span>

<span data-ttu-id="2d2b4-133">La aplicación cliente también puede consultar una base de datos del servicio de nombres para obtener información de punto de conexión conocida.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-133">Your client application can also query a name service database for well-known endpoint information.</span></span>

## <a name="using-dynamic-endpoints"></a><span data-ttu-id="2d2b4-134">Uso de puntos de conexión dinámicos</span><span class="sxs-lookup"><span data-stu-id="2d2b4-134">Using Dynamic Endpoints</span></span>

<span data-ttu-id="2d2b4-135">Normalmente, el número de puntos de conexión para un servidor determinado y una secuencia de protocolo determinada es limitado.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-135">The number of endpoints for a particular server and a particular protocol sequence are usually limited.</span></span> <span data-ttu-id="2d2b4-136">Por ejemplo, cuando se usa la secuencia de protocolo [ \_ \_ TCP IP ncacn](/windows/desktop/Midl/ncacn-ip-tcp) , que indica que la comunicación de red RPC se produce mediante TCP/IP, solo hay disponible un número limitado de puertos (la mayoría de los sistemas solo tienen abierto el intervalo de 1025 a 5000).</span><span class="sxs-lookup"><span data-stu-id="2d2b4-136">For example, when you use the [ncacn\_ip\_tcp](/windows/desktop/Midl/ncacn-ip-tcp) protocol sequence, indicating that RPC network communication occurs using TCP/IP, only a limited number of ports are available (most systems have only the range 1025 through 5000 opened).</span></span> <span data-ttu-id="2d2b4-137">Las bibliotecas en tiempo de ejecución de RPC permiten asignar puntos de conexión dinámicamente, según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-137">The RPC run-time libraries allow you to assign endpoints dynamically, as needed.</span></span> <span data-ttu-id="2d2b4-138">Dado que el número de UUID de interfaz posible es prácticamente ilimitado, el uso de la interfaz UUID para dirigir la llamada ofrece más espacio para la expansión y más flexibilidad.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-138">Since the number of possible interface UUIDs is practically unlimited, using the interface UUID to direct the call offers more room for expansion and more flexibility.</span></span>

<span data-ttu-id="2d2b4-139">De forma predeterminada, las funciones de la biblioteca en tiempo de ejecución de RPC buscan información del punto de conexión cuando consultan una base de datos del servicio de nombres.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-139">By default, the RPC run-time library functions search for endpoint information when they query a name service database.</span></span> <span data-ttu-id="2d2b4-140">Si el extremo es dinámico, la base de datos del servicio de nombres no contendrá información del punto de conexión.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-140">If the endpoint is dynamic, the name service database will not contain endpoint information.</span></span> <span data-ttu-id="2d2b4-141">Sin embargo, la consulta proporcionará al programa cliente el nombre de un servidor.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-141">However, the query will give your client program the name of a server.</span></span> <span data-ttu-id="2d2b4-142">Después, puede buscar en la asignación de punto de conexión del servidor.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-142">It can then search the server's endpoint map.</span></span>

<span data-ttu-id="2d2b4-143">Si el cliente necesita realizar una llamada a procedimiento remoto mediante un punto de conexión dinámico, el método preferido es realizar la llamada en un identificador de enlace enlazado parcialmente.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-143">If the client needs to make a remote procedure call using a dynamic endpoint, the preferred method is to make the call on a partially bound binding handle.</span></span> <span data-ttu-id="2d2b4-144">El tiempo de ejecución de RPC resuelve el punto de conexión de forma transparente.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-144">The RPC run time resolves the endpoint transparently.</span></span> <span data-ttu-id="2d2b4-145">Este método es superior al uso de la función [**RpcEpResolveBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepresolvebinding) , ya que permite mecanismos de almacenamiento en caché avanzados en el tiempo de ejecución de RPC.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-145">This method is superior to using the [**RpcEpResolveBinding**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcepresolvebinding) function, as it allows advanced caching mechanisms in the RPC run time.</span></span>

<span data-ttu-id="2d2b4-146">Si se requiere un control más específico sobre la selección del punto de conexión, los clientes pueden buscar en la asignación de punto de conexión una entrada cada vez llamando a las funciones [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin), [**RpcMgmtEpEltInqNext**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqnext)y [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) .</span><span class="sxs-lookup"><span data-stu-id="2d2b4-146">If more specific control over endpoint selection is required, clients can search the endpoint map one entry at a time by calling the [**RpcMgmtEpEltInqBegin**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqbegin), [**RpcMgmtEpEltInqNext**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqnext), and [**RpcMgmtEpEltInqDone**](/windows/desktop/api/Rpcdce/nf-rpcdce-rpcmgmtepeltinqdone) functions.</span></span>

## <a name="exporting-well-known-endpoints-into-the-endpoint-map-database"></a><span data-ttu-id="2d2b4-147">Exportar puntos de conexión conocidos en la base de datos de asignación de puntos de conexión</span><span class="sxs-lookup"><span data-stu-id="2d2b4-147">Exporting Well-known Endpoints into the Endpoint Map Database</span></span>

<span data-ttu-id="2d2b4-148">Es posible mezclar los dos enfoques para buscar puntos de conexión, especialmente cuando un sistema distribuido está pasando de un modelo de punto de conexión conocido a un modelo de punto de conexión dinámico.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-148">It is possible to mix the two approaches to finding endpoints, especially when a distributed system is transitioning from a well-known endpoint model to a dynamic endpoint model.</span></span> <span data-ttu-id="2d2b4-149">En tales transiciones, una versión intermedia del servidor usará un punto de conexión conocido, pero también registrará el punto de conexión conocido con la base de datos de asignación de puntos de conexión.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-149">In such transitions, an intermediate version of the server will use a well-known endpoint, but it will also register the well-known endpoint with the endpoint map database.</span></span> <span data-ttu-id="2d2b4-150">Este enfoque permite a los clientes que usan puntos de conexión conocidos y clientes que usan un extremo dinámico conectarse.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-150">This approach allows clients that use well known endpoint and clients that use a dynamic endpoint to connect.</span></span> <span data-ttu-id="2d2b4-151">Una vez que se han actualizado todos los servidores, se puede implementar una nueva versión de cliente que solo use puntos de conexión dinámicos.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-151">Once all servers are upgraded, a new client version can be deployed that uses dynamic endpoints only.</span></span> <span data-ttu-id="2d2b4-152">Una vez que se actualizan todos los clientes, una versión final del servidor puede dejar de usar puntos de conexión conocidos y comenzar a usar solo puntos de conexión dinámicos.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-152">Once all clients are upgraded, a final server version can stop using well-known endpoints and begin using dynamic endpoints only.</span></span>

<span data-ttu-id="2d2b4-153">Este enfoque permite una ruta de transición para las aplicaciones que se han iniciado con un punto de conexión conocido pero que desean migrar a un punto de conexión dinámico sin necesidad de una actualización simultánea de todos los servidores y clientes.</span><span class="sxs-lookup"><span data-stu-id="2d2b4-153">This approach allows a transition path for applications that have started with a well-known endpoint but want to migrate to a dynamic endpoint without requiring a simultaneous update of all servers and clients.</span></span>

 

 