---
description: Un &\# 0034; contexto de entrada&\# 0034; es una estructura interna que mantiene el IMM.
ms.assetid: 2b639e30-5368-45bb-943d-db1ab6b62582
title: Contexto de entrada
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 16f1f83a397373e17a7d637b61a3232a3d72acde
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "103909498"
---
# <a name="input-context"></a><span data-ttu-id="ebf4f-103">Contexto de entrada</span><span class="sxs-lookup"><span data-stu-id="ebf4f-103">Input Context</span></span>

<span data-ttu-id="ebf4f-104">Un "contexto de entrada" es una estructura interna mantenida por el IMM.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-104">An "input context" is an internal structure maintained by the IMM.</span></span> <span data-ttu-id="ebf4f-105">Contiene información sobre el estado del IME y lo usan las ventanas de IME.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-105">It contains information about the status of the IME and is used by IME windows.</span></span> <span data-ttu-id="ebf4f-106">De forma predeterminada, el sistema operativo crea y asigna un contexto de entrada a cada subproceso.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-106">By default, the operating system creates and assigns an input context to each thread.</span></span> <span data-ttu-id="ebf4f-107">En el subproceso, este contexto de entrada predeterminado es un recurso compartido y está asociado a cada ventana recién creada.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-107">Within the thread, this default input context is a shared resource and is associated with each newly created window.</span></span>

<span data-ttu-id="ebf4f-108">Para recuperar o establecer información en el IME, una aplicación que tenga en cuenta el IME debe recuperar primero un identificador para el contexto de entrada asociado a una ventana especificada.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-108">To retrieve or set information in the IME, an IME-aware application must first retrieve a handle to the input context associated with a specified window.</span></span> <span data-ttu-id="ebf4f-109">La aplicación recupera el identificador mediante la función [**ImmGetContext**](/windows/desktop/api/Imm/nf-imm-immgetcontext) .</span><span class="sxs-lookup"><span data-stu-id="ebf4f-109">The application retrieves the handle by using the [**ImmGetContext**](/windows/desktop/api/Imm/nf-imm-immgetcontext) function.</span></span> <span data-ttu-id="ebf4f-110">Puede usar el controlador recuperado en las llamadas posteriores a las funciones de IMM para recuperar y establecer valores de IME, como el estilo de la ventana de composición, el estilo de composición y la posición de la ventana de estado.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-110">It can use the retrieved handle in subsequent calls to the IMM functions to retrieve and set IME values, such as the composition window style, the composition style, and the status window position.</span></span> <span data-ttu-id="ebf4f-111">Una vez que la aplicación ha terminado de usar el contexto, debe liberar el contexto mediante la función [**ImmReleaseContext**](/windows/desktop/api/Imm/nf-imm-immreleasecontext) .</span><span class="sxs-lookup"><span data-stu-id="ebf4f-111">Once the application has finished using the context, it must release the context using the [**ImmReleaseContext**](/windows/desktop/api/Imm/nf-imm-immreleasecontext) function.</span></span>

<span data-ttu-id="ebf4f-112">Dado que el contexto de entrada predeterminado es un recurso compartido, todos los cambios que realiza la aplicación se aplican a todas las ventanas del subproceso.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-112">Because the default input context is a shared resource, any changes the application makes to it apply to all windows in the thread.</span></span> <span data-ttu-id="ebf4f-113">Sin embargo, la aplicación puede invalidar este comportamiento predeterminado mediante la creación de su propio contexto de entrada y su asociación con una o más ventanas del subproceso.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-113">However, the application can override this default behavior by creating its own input context and associating it with one or more windows of the thread.</span></span> <span data-ttu-id="ebf4f-114">Los cambios realizados en un contexto de entrada específico de la aplicación se aplican solo a las ventanas asociadas al contexto.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-114">The changes made to an application-specific input context apply only to the windows associated with the context.</span></span>

<span data-ttu-id="ebf4f-115">La aplicación puede crear un contexto de entrada mediante la función [**ImmCreateContext**](/windows/desktop/api/Imm/nf-imm-immcreatecontext) .</span><span class="sxs-lookup"><span data-stu-id="ebf4f-115">Your application can create an input context by using the [**ImmCreateContext**](/windows/desktop/api/Imm/nf-imm-immcreatecontext) function.</span></span> <span data-ttu-id="ebf4f-116">Para asignar el contexto a una ventana, la aplicación llama a la función [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) .</span><span class="sxs-lookup"><span data-stu-id="ebf4f-116">To assign the context to a window, the application calls the [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) function.</span></span> <span data-ttu-id="ebf4f-117">Esta función devuelve un identificador al contexto de entrada asociado previamente.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-117">This function returns a handle to the previously associated input context.</span></span> <span data-ttu-id="ebf4f-118">Si la aplicación aún no ha asociado un contexto de entrada con la ventana, el identificador devuelto es para el contexto de entrada predeterminado.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-118">If the application has not already associated an input context with the window, the returned handle is for the default input context.</span></span> <span data-ttu-id="ebf4f-119">Normalmente, la aplicación guarda este identificador y después lo vuelve a asociar a la ventana cuando el contexto de entrada personalizado ya no se necesita.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-119">Typically, the application saves this handle and later reassociates it with the window when the customized input context is no longer needed.</span></span>

<span data-ttu-id="ebf4f-120">Una vez que un contexto de entrada se asocia a una ventana, el sistema operativo selecciona automáticamente ese contexto cuando la ventana se activa y recibe el foco de entrada.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-120">Once an input context is associated with a window, the operating system automatically selects that context when the window is activated and receives the input focus.</span></span> <span data-ttu-id="ebf4f-121">El estilo y otra información del contexto de entrada afecta a la entrada de teclado subsiguiente para esa ventana, lo que determina la forma en que funciona el IME.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-121">The style and other information in the input context affects subsequent keyboard input for that window, determining how the IME operates.</span></span>

<span data-ttu-id="ebf4f-122">La aplicación debe destruir cualquier contexto de entrada personalizado antes de finalizar.</span><span class="sxs-lookup"><span data-stu-id="ebf4f-122">Your application must destroy any customized input context before it terminates.</span></span> <span data-ttu-id="ebf4f-123">En primer lugar, la aplicación quita el contexto de entrada de cualquier asociación que haya realizado con Windows en el subproceso mediante la función [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) .</span><span class="sxs-lookup"><span data-stu-id="ebf4f-123">First, the application removes the input context from any association it has made with windows in the thread by using the [**ImmAssociateContext**](/windows/desktop/api/Imm/nf-imm-immassociatecontext) function.</span></span> <span data-ttu-id="ebf4f-124">A continuación, llama a la función [**ImmDestroyContext**](/windows/desktop/api/Imm/nf-imm-immdestroycontext) .</span><span class="sxs-lookup"><span data-stu-id="ebf4f-124">Then, it calls the [**ImmDestroyContext**](/windows/desktop/api/Imm/nf-imm-immdestroycontext) function.</span></span>

## <a name="related-topics"></a><span data-ttu-id="ebf4f-125">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="ebf4f-125">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="ebf4f-126">Acerca del administrador de métodos de entrada</span><span class="sxs-lookup"><span data-stu-id="ebf4f-126">About Input Method Manager</span></span>](about-input-method-manager.md)
</dt> </dl>

 

 



