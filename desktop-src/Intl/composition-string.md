---
description: La cadena de composición es el texto actual de la ventana de composición.
ms.assetid: ab226567-f68d-4fa4-9ead-e9bfabde927e
title: Cadena de composición
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 5e5cb63163ca9a8076edc4d01053e4baeffc619c
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/08/2021
ms.locfileid: "104002089"
---
# <a name="composition-string"></a><span data-ttu-id="dbd98-103">Cadena de composición</span><span class="sxs-lookup"><span data-stu-id="dbd98-103">Composition String</span></span>

<span data-ttu-id="dbd98-104">La cadena de composición es el texto actual de la ventana de composición.</span><span class="sxs-lookup"><span data-stu-id="dbd98-104">The composition string is the current text in the composition window.</span></span> <span data-ttu-id="dbd98-105">Este es el texto que el IME convierte en caracteres finales.</span><span class="sxs-lookup"><span data-stu-id="dbd98-105">This is the text that the IME converts to final characters.</span></span> <span data-ttu-id="dbd98-106">Cada cadena de composición se compone de una o más "cláusulas".</span><span class="sxs-lookup"><span data-stu-id="dbd98-106">Each composition string consists of one or more "clauses".</span></span> <span data-ttu-id="dbd98-107">Una cláusula es la combinación más pequeña de caracteres que el IME puede convertir en un carácter final.</span><span class="sxs-lookup"><span data-stu-id="dbd98-107">A clause is the smallest combination of characters that the IME can convert to a final character.</span></span> <span data-ttu-id="dbd98-108">Para obtener y establecer la cadena de composición, la aplicación llama a las funciones [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) y [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) , respectivamente.</span><span class="sxs-lookup"><span data-stu-id="dbd98-108">To get and set the composition string, the application calls the [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) and [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) functions, respectively.</span></span>

<span data-ttu-id="dbd98-109">A medida que el usuario escribe texto en la ventana de composición, el IME realiza un seguimiento del estado de la cadena de composición.</span><span class="sxs-lookup"><span data-stu-id="dbd98-109">As the user enters text in the composition window, the IME tracks the status of the composition string.</span></span> <span data-ttu-id="dbd98-110">Este estado incluye información de atributos, información de cláusulas, información de escritura y posición del cursor.</span><span class="sxs-lookup"><span data-stu-id="dbd98-110">This status includes attribute information, clause information, typing information, and cursor position.</span></span> <span data-ttu-id="dbd98-111">La aplicación puede recuperar el estado de composición mediante la función [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) .</span><span class="sxs-lookup"><span data-stu-id="dbd98-111">The application can retrieve the composition status by using the [**ImmGetCompositionString**](/windows/desktop/api/Imm/nf-imm-immgetcompositionstringa) function.</span></span>

<span data-ttu-id="dbd98-112">La información de atributos se representa en una matriz de valores de 8 bits que especifica el estado de los caracteres de la cadena de composición.</span><span class="sxs-lookup"><span data-stu-id="dbd98-112">Attribute information is rendered in an array of 8-bit values that specifies the status of characters in the composition string.</span></span> <span data-ttu-id="dbd98-113">Todos los caracteres de una cláusula deben tener el mismo atributo.</span><span class="sxs-lookup"><span data-stu-id="dbd98-113">All characters of one clause must have the same attribute.</span></span> <span data-ttu-id="dbd98-114">La matriz incluye un valor para cada byte de la cadena, incluido un byte cada uno para el cliente potencial y el segundo bytes de cualquier carácter de doble byte de la cadena.</span><span class="sxs-lookup"><span data-stu-id="dbd98-114">The array includes one value for each byte in the string, including one byte each for the lead and second bytes of any double-byte characters in the string.</span></span> <span data-ttu-id="dbd98-115">Para cada valor de la matriz, los bits 0 a 3 pueden ser una combinación de los valores siguientes.</span><span class="sxs-lookup"><span data-stu-id="dbd98-115">For each value in the array, bits 0 through 3 can be one combination of the following values.</span></span>



| <span data-ttu-id="dbd98-116">Value</span><span class="sxs-lookup"><span data-stu-id="dbd98-116">Value</span></span>                      | <span data-ttu-id="dbd98-117">Significado</span><span class="sxs-lookup"><span data-stu-id="dbd98-117">Meaning</span></span>                                                                                                   |
|----------------------------|-----------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="dbd98-118">entrada de ATTR \_</span><span class="sxs-lookup"><span data-stu-id="dbd98-118">ATTR\_INPUT</span></span>                | <span data-ttu-id="dbd98-119">Carácter que está escribiendo el usuario.</span><span class="sxs-lookup"><span data-stu-id="dbd98-119">Character being entered by the user.</span></span> <span data-ttu-id="dbd98-120">El IME todavía tiene que convertir este carácter.</span><span class="sxs-lookup"><span data-stu-id="dbd98-120">The IME has yet to convert this character.</span></span>                           |
| <span data-ttu-id="dbd98-121">\_error de entrada de ATTR \_</span><span class="sxs-lookup"><span data-stu-id="dbd98-121">ATTR\_INPUT\_ERROR</span></span>         | <span data-ttu-id="dbd98-122">Un carácter de error que el IME no puede convertir.</span><span class="sxs-lookup"><span data-stu-id="dbd98-122">An error character that the IME cannot convert.</span></span> <span data-ttu-id="dbd98-123">Por ejemplo, el IME no puede unir algunas consonantes.</span><span class="sxs-lookup"><span data-stu-id="dbd98-123">For example, the IME cannot put together some consonants.</span></span> |
| <span data-ttu-id="dbd98-124">destino de atributo \_ \_ convertido</span><span class="sxs-lookup"><span data-stu-id="dbd98-124">ATTR\_TARGET\_CONVERTED</span></span>    | <span data-ttu-id="dbd98-125">Carácter seleccionado por el usuario y convertido por el IME.</span><span class="sxs-lookup"><span data-stu-id="dbd98-125">Character selected by the user and then converted by the IME.</span></span>                                             |
| <span data-ttu-id="dbd98-126">ATTR \_ convertido</span><span class="sxs-lookup"><span data-stu-id="dbd98-126">ATTR\_CONVERTED</span></span>            | <span data-ttu-id="dbd98-127">Carácter que el IME ya ha convertido.</span><span class="sxs-lookup"><span data-stu-id="dbd98-127">Character that the IME has already converted.</span></span>                                                             |
| <span data-ttu-id="dbd98-128">destino de ATTR \_ \_ NOTCONVERTED</span><span class="sxs-lookup"><span data-stu-id="dbd98-128">ATTR\_TARGET\_NOTCONVERTED</span></span> | <span data-ttu-id="dbd98-129">Carácter que se va a convertir.</span><span class="sxs-lookup"><span data-stu-id="dbd98-129">Character being converted.</span></span> <span data-ttu-id="dbd98-130">El usuario ha seleccionado este carácter, pero el IME todavía no lo ha convertido.</span><span class="sxs-lookup"><span data-stu-id="dbd98-130">The user has selected this character but the IME has not yet converted it.</span></span>     |
| <span data-ttu-id="dbd98-131">ATTR \_ FIXEDCONVERTED</span><span class="sxs-lookup"><span data-stu-id="dbd98-131">ATTR\_FIXEDCONVERTED</span></span>       | <span data-ttu-id="dbd98-132">Caracteres que el IME dejará de convertir.</span><span class="sxs-lookup"><span data-stu-id="dbd98-132">Characters that the IME will no longer convert.</span></span>                                                           |



 

<span data-ttu-id="dbd98-133">Todos los demás valores están reservados.</span><span class="sxs-lookup"><span data-stu-id="dbd98-133">All other values are reserved.</span></span> <span data-ttu-id="dbd98-134">En japonés, cualquier carácter no convertido que tenga el \_ atributo de entrada ATTR es un carácter hiragana, Katakana o alfanumérico.</span><span class="sxs-lookup"><span data-stu-id="dbd98-134">In Japanese, any unconverted character having the ATTR\_INPUT attribute is a hiragana, katakana, or alphanumeric character.</span></span> <span data-ttu-id="dbd98-135">En Coreano, este atributo representa un carácter hangul que el IME todavía no ha convertido.</span><span class="sxs-lookup"><span data-stu-id="dbd98-135">In Korean, this attribute represents a Hangul character that the IME has not yet converted.</span></span> <span data-ttu-id="dbd98-136">En chino tradicional y chino simplificado, cada IME puede limitar su carácter dentro de algún intervalo.</span><span class="sxs-lookup"><span data-stu-id="dbd98-136">In Traditional Chinese and Simplified Chinese, each IME can limit its character within some range.</span></span>

<span data-ttu-id="dbd98-137">La información de la cláusula incluida en el estado de la cadena de composición es una matriz de valores de 32 bits que especifica las posiciones de las cláusulas en la cadena de composición.</span><span class="sxs-lookup"><span data-stu-id="dbd98-137">The clause information included in the composition string status is an array of 32-bit values that specifies the positions of the clauses in the composition string.</span></span> <span data-ttu-id="dbd98-138">La matriz incluye un valor para cada cláusula y un valor final que especifica la longitud de la cadena completa.</span><span class="sxs-lookup"><span data-stu-id="dbd98-138">The array includes one value for each clause and a final value that specifies the length of the full string.</span></span> <span data-ttu-id="dbd98-139">Cada valor de la matriz especifica el desplazamiento, en bytes, desde el principio de la cadena hasta la cláusula.</span><span class="sxs-lookup"><span data-stu-id="dbd98-139">Each value in the array specifies the offset, in bytes, from the beginning of the string to the clause.</span></span> <span data-ttu-id="dbd98-140">El primer valor siempre es 0 porque la primera cláusula siempre comienza al principio de la cadena.</span><span class="sxs-lookup"><span data-stu-id="dbd98-140">The first value is always 0 because the first clause always starts at the beginning of the string.</span></span> <span data-ttu-id="dbd98-141">Por ejemplo, si una cadena tiene dos cláusulas, la información de la cláusula tiene tres valores: el primer valor es 0, el segundo valor es el desplazamiento de la segunda cláusula y el tercer valor es la longitud de la cadena.</span><span class="sxs-lookup"><span data-stu-id="dbd98-141">For example, if a string has two clauses, the clause information has three values: the first value is 0, the second value is the offset of the second clause, and the third value is the length of the string.</span></span> <span data-ttu-id="dbd98-142">En el caso de Unicode, la posición de una cláusula se cuenta en caracteres Unicode y la longitud de una cadena es el tamaño en caracteres Unicode.</span><span class="sxs-lookup"><span data-stu-id="dbd98-142">For Unicode, the position of a clause is counted in Unicode characters, and the length of a string is the size in Unicode characters.</span></span>

<span data-ttu-id="dbd98-143">La información de escritura incluida en el estado de la cadena de composición es una cadena de caracteres terminada en null que representa los caracteres que el usuario escribe en el teclado.</span><span class="sxs-lookup"><span data-stu-id="dbd98-143">The typing information included in the composition string status is a null-terminated character string representing the characters that the user enters at the keyboard.</span></span>

<span data-ttu-id="dbd98-144">La posición del cursor incluida en el estado de la cadena de composición es un valor que indica la posición del cursor con respecto a los caracteres de la cadena de composición.</span><span class="sxs-lookup"><span data-stu-id="dbd98-144">The cursor position included in the composition string status is a value indicating the position of the cursor relative to the characters in the composition string.</span></span> <span data-ttu-id="dbd98-145">El valor es el desplazamiento, en bytes, desde el principio de la cadena.</span><span class="sxs-lookup"><span data-stu-id="dbd98-145">The value is the offset, in bytes, from the beginning of the string.</span></span> <span data-ttu-id="dbd98-146">Si este valor es 0, el cursor está inmediatamente antes del primer carácter de la cadena.</span><span class="sxs-lookup"><span data-stu-id="dbd98-146">If this value is 0, the cursor is immediately before the first character in the string.</span></span> <span data-ttu-id="dbd98-147">Si el valor es igual a la longitud de la cadena, el cursor está inmediatamente después del último carácter.</span><span class="sxs-lookup"><span data-stu-id="dbd98-147">If the value is equal to the length of the string, the cursor is immediately after the last character.</span></span> <span data-ttu-id="dbd98-148">Si el valor es 1, el cursor no está presente.</span><span class="sxs-lookup"><span data-stu-id="dbd98-148">If the value is 1, the cursor is not present.</span></span> <span data-ttu-id="dbd98-149">En el caso de Unicode, la posición y la longitud se miden en caracteres Unicode.</span><span class="sxs-lookup"><span data-stu-id="dbd98-149">For Unicode, both position and length are measured in Unicode characters.</span></span>

<span data-ttu-id="dbd98-150">La aplicación puede establecer la cadena o los elementos de composición del estado de composición mediante la función [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) .</span><span class="sxs-lookup"><span data-stu-id="dbd98-150">Your application can set the composition string or elements of the composition status by using the [**ImmSetCompositionString**](/windows/desktop/api/Imm/nf-imm-immsetcompositionstringa) function.</span></span> <span data-ttu-id="dbd98-151">Para asegurarse de que la ventana de composición actualiza su apariencia en función de estos cambios, la función permite que la aplicación envíe un mensaje de notificación a la ventana.</span><span class="sxs-lookup"><span data-stu-id="dbd98-151">To ensure that the composition window updates its appearance based on these changes, the function allows the application to send a notification message to the window.</span></span> <span data-ttu-id="dbd98-152">Las aplicaciones que establecen una combinación de elementos de estado de composición suelen deshabilitar las notificaciones de todas las llamadas a esta función, excepto la última, para que solo se genere un mensaje de notificación para la ventana de composición.</span><span class="sxs-lookup"><span data-stu-id="dbd98-152">Applications that set a combination of composition status elements typically disable notifications for all but the last call to this function so that only one notification message is generated for the composition window.</span></span>

<span data-ttu-id="dbd98-153">Por último, el control de edición admite dos mensajes para cambiar el control de las cadenas de composición por el IME.</span><span class="sxs-lookup"><span data-stu-id="dbd98-153">Finally, the edit control supports two messages for changing the handling of composition strings by the IME.</span></span> <span data-ttu-id="dbd98-154">Para obtener más información, consulte [**em \_ GETIMESTATUS**](../controls/em-getimestatus.md) y [**em \_ SETIMESTATUS**](../controls/em-setimestatus.md).</span><span class="sxs-lookup"><span data-stu-id="dbd98-154">For more information, see [**EM\_GETIMESTATUS**](../controls/em-getimestatus.md) and [**EM\_SETIMESTATUS**](../controls/em-setimestatus.md).</span></span> <span data-ttu-id="dbd98-155">Para obtener más información sobre el control de edición, vea [control de edición](../controls/edit-controls.md).</span><span class="sxs-lookup"><span data-stu-id="dbd98-155">For more information on the edit control, see [Edit Control](../controls/edit-controls.md).</span></span>

## <a name="related-topics"></a><span data-ttu-id="dbd98-156">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="dbd98-156">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="dbd98-157">Acerca del administrador de métodos de entrada</span><span class="sxs-lookup"><span data-stu-id="dbd98-157">About Input Method Manager</span></span>](about-input-method-manager.md)
</dt> </dl>

 

 
