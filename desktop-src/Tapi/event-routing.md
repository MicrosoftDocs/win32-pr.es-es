---
description: Con la función lineSetTerminal, la aplicación puede controlar o suprimir el enrutamiento de eventos de bajo nivel especificados (intercambiados entre el conmutador y la estación) a un dispositivo.
ms.assetid: 36658d83-0ea4-4f62-b2e5-c0f6d6569d0d
title: Enrutamiento de eventos
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: df6749969faf89ac0212c19049fe02c9dad57a96
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105686785"
---
# <a name="event-routing"></a><span data-ttu-id="847a0-103">Enrutamiento de eventos</span><span class="sxs-lookup"><span data-stu-id="847a0-103">Event Routing</span></span>

<span data-ttu-id="847a0-104">Con la función [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) , la aplicación puede controlar o suprimir el enrutamiento de eventos de bajo nivel especificados (intercambiados entre el conmutador y la estación) a un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="847a0-104">With the [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) function, the application can control or suppress the routing of specified low-level events (exchanged between the switch and the station) to a device.</span></span> <span data-ttu-id="847a0-105">Con **lineSetTerminal**, la aplicación especifica el dispositivo de terminal al que se enrutan estos eventos (como la línea, la dirección o los eventos de secuencia de medios de llamada).</span><span class="sxs-lookup"><span data-stu-id="847a0-105">With **lineSetTerminal**, the application specifies the terminal device to which these events (such as line, address, or call media-stream events) are routed.</span></span>

<span data-ttu-id="847a0-106">El enrutamiento de las distintas clases de eventos se puede controlar individualmente, lo que permite especificar terminales independientes para cada clase de eventos.</span><span class="sxs-lookup"><span data-stu-id="847a0-106">The routing of the different classes of events can be individually controlled, allowing separate terminals to be specified for each event class.</span></span> <span data-ttu-id="847a0-107">Entre las clases de eventos se incluyen las luces, los botones, la pantalla, el timbre, el conmutador y el flujo multimedia.</span><span class="sxs-lookup"><span data-stu-id="847a0-107">Event classes include lamps, buttons, display, ringer, hookswitch, and media stream.</span></span>

<span data-ttu-id="847a0-108">Por ejemplo, el flujo de medios de una llamada (por ejemplo, voz) se puede enviar a cualquier dispositivo de transductor si el proveedor de servicios y el hardware son capaces de hacerlo.</span><span class="sxs-lookup"><span data-stu-id="847a0-108">For example, the media stream of a call (voice, for example) can be sent to any transducer device if the service provider and the hardware is capable of doing so.</span></span> <span data-ttu-id="847a0-109">En general, un *transductor* significa lo mismo que lo que se conoce como dispositivo *conmutador* en TAPI, algo que tiene un micrófono y un altavoz.</span><span class="sxs-lookup"><span data-stu-id="847a0-109">In general, a *transducer* means the same as what is referred to as a *hookswitch* device in TAPI, something that has a microphone and a speaker.</span></span> <span data-ttu-id="847a0-110">Los eventos de anillo del conmutador al teléfono se pueden asignar a una alerta visual en la pantalla del equipo o se pueden enrutar a un dispositivo telefónico.</span><span class="sxs-lookup"><span data-stu-id="847a0-110">Ring events from the switch to the phone can be mapped into a visual alert on the computer's screen or they can be routed to a phone device.</span></span> <span data-ttu-id="847a0-111">Los eventos de lámpara y los eventos de visualización se pueden omitir o enrutar a un dispositivo telefónico (que parece que se comporta como un conjunto de teléfonos normal).</span><span class="sxs-lookup"><span data-stu-id="847a0-111">Lamp events and display events can be ignored or routed to a phone device (which appears to behave as a normal phone set).</span></span> <span data-ttu-id="847a0-112">Por último, las pulsaciones de botón en un dispositivo telefónico pueden o no pasarse a la línea.</span><span class="sxs-lookup"><span data-stu-id="847a0-112">Finally, button presses at a phone device may or may not be passed to the line.</span></span> <span data-ttu-id="847a0-113">En cualquier caso, este enrutamiento de señales de bajo nivel de la línea no afecta al funcionamiento de la parte de la línea de TAPI, que siempre asigna eventos de bajo nivel a su equivalente funcional.</span><span class="sxs-lookup"><span data-stu-id="847a0-113">In any case, this routing of low-level signals from the line does not affect the operation of the line portion of TAPI, which always maps low-level events to their functional equivalent.</span></span> <span data-ttu-id="847a0-114">Para determinar los terminales que tiene un dispositivo de línea disponible (y sus funcionalidades), consulte las funcionalidades del dispositivo de línea con [**lineGetDevCaps**](/windows/desktop/api/Tapi/nf-tapi-linegetdevcaps).</span><span class="sxs-lookup"><span data-stu-id="847a0-114">To determine the terminals a line device has available (and their capabilities), consult the line device's capabilities with [**lineGetDevCaps**](/windows/desktop/api/Tapi/nf-tapi-linegetdevcaps).</span></span>

<span data-ttu-id="847a0-115">Suponga inicialmente que la aplicación ha suprimido el enrutamiento de todos los eventos (con [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal)) y el usuario selecciona un casco como dispositivo de e/s actual.</span><span class="sxs-lookup"><span data-stu-id="847a0-115">Assume initially that the application has suppressed the routing of all events (with [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal)), and the user selects a headset as the current I/O device.</span></span> <span data-ttu-id="847a0-116">Una llamada entrante envía un mensaje de [**línea \_ CALLSTATE**](line-callstate.md) y un mensaje de [**línea \_ LINEDEVSTATE**](line-linedevstate.md) con la indicación de *timbre* .</span><span class="sxs-lookup"><span data-stu-id="847a0-116">An incoming call sends a [**LINE\_CALLSTATE**](line-callstate.md) message, and a [**LINE\_LINEDEVSTATE**](line-linedevstate.md) message with the *ringing* indication.</span></span> <span data-ttu-id="847a0-117">Dado que se suprime el enrutamiento de todos los eventos, los eventos de anillo no se enrutan al teléfono, por lo que se suprime el anillo.</span><span class="sxs-lookup"><span data-stu-id="847a0-117">Because routing of all events is suppressed, ring events are not routed to the phone, so ringing is suppressed.</span></span> <span data-ttu-id="847a0-118">En su lugar, la aplicación notifica al usuario con un cuadro de diálogo emergente y un pitido del sistema en el casco.</span><span class="sxs-lookup"><span data-stu-id="847a0-118">Instead, the application notifies the user with a pop-up dialog box and a system beep in the headset.</span></span>

<span data-ttu-id="847a0-119">El usuario decide responder a la llamada.</span><span class="sxs-lookup"><span data-stu-id="847a0-119">The user decides to answer the call.</span></span> <span data-ttu-id="847a0-120">Dado que el dispositivo de e/s actual del usuario es el casco, la aplicación de telefonía invoca [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) en la llamada entrante para enrutar los medios de la llamada al casco y responder a la llamada.</span><span class="sxs-lookup"><span data-stu-id="847a0-120">Because the user's current I/O device is the headset, the telephony application invokes [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) on the incoming call to route the call's media to the headset and answer the call.</span></span> <span data-ttu-id="847a0-121">La aplicación también puede invocar **lineSetTerminal** para enrutar los eventos de información LAMP y de presentación al conjunto de teléfonos para que se comporte de la forma habitual.</span><span class="sxs-lookup"><span data-stu-id="847a0-121">The application may also invoke **lineSetTerminal** to route lamp and display information events to the phone set so that it will behave as usual.</span></span>

<span data-ttu-id="847a0-122">Como segundo ejemplo, supongamos que una llamada entrante se alerta en el equipo del usuario.</span><span class="sxs-lookup"><span data-stu-id="847a0-122">As a second example, assume that an incoming call is alerting at the user's computer.</span></span> <span data-ttu-id="847a0-123">En lugar de seleccionar la opción de respuesta con el mouse, el usuario decide simplemente seleccionar el auricular del teléfono para responder a la llamada.</span><span class="sxs-lookup"><span data-stu-id="847a0-123">Instead of selecting the answer option with the mouse, the user decides to just pick up the phone's handset to answer the call.</span></span> <span data-ttu-id="847a0-124">El estado OffHook en el teléfono envía un mensaje a la aplicación.</span><span class="sxs-lookup"><span data-stu-id="847a0-124">The offhook status at the phone sends a message to the application.</span></span> <span data-ttu-id="847a0-125">La aplicación puede interpretar este estado como una solicitud del usuario para seleccionar el auricular del teléfono para realizar la conversación.</span><span class="sxs-lookup"><span data-stu-id="847a0-125">The application can interpret this status as a request by the user to select the phone handset to conduct the conversation.</span></span> <span data-ttu-id="847a0-126">A continuación, la aplicación invoca [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) para enrutar los datos de voz en la llamada al conjunto de teléfonos.</span><span class="sxs-lookup"><span data-stu-id="847a0-126">The application then invokes [**lineSetTerminal**](/windows/desktop/api/Tapi/nf-tapi-linesetterminal) to route the voice data on the call to the phone set.</span></span>

 

 



