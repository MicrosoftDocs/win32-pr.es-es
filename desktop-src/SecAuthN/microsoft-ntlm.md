---
description: Desafío/respuesta de Windows (NTLM) es el protocolo de autenticación usado en redes que incluyen sistemas que ejecutan el sistema operativo Windows y en sistemas independientes.
ms.assetid: 35a38858-d36f-45c9-95f4-2541a182f5ac
title: Microsoft NTLM
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: 9723f24d5913adefe70d4e238de0591790a34bfd
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "104541174"
---
# <a name="microsoft-ntlm"></a><span data-ttu-id="8b142-103">Microsoft NTLM</span><span class="sxs-lookup"><span data-stu-id="8b142-103">Microsoft NTLM</span></span>

<span data-ttu-id="8b142-104">Desafío/respuesta de Windows (NTLM) es el protocolo de autenticación usado en redes que incluyen sistemas que ejecutan el sistema operativo Windows y en sistemas independientes.</span><span class="sxs-lookup"><span data-stu-id="8b142-104">Windows Challenge/Response (NTLM) is the authentication protocol used on networks that include systems running the Windows operating system and on stand-alone systems.</span></span>

<span data-ttu-id="8b142-105">El [*paquete de seguridad*](../secgloss/s-gly.md) de Microsoft [*Kerberos*](../secgloss/k-gly.md) agrega mayor seguridad que NTLM a los sistemas de una red.</span><span class="sxs-lookup"><span data-stu-id="8b142-105">The Microsoft [*Kerberos*](../secgloss/k-gly.md) [*security package*](../secgloss/s-gly.md) adds greater security than NTLM to systems on a network.</span></span> <span data-ttu-id="8b142-106">Aunque Microsoft *Kerberos* es el protocolo preferido, sigue siendo compatible con NTLM.</span><span class="sxs-lookup"><span data-stu-id="8b142-106">Although Microsoft *Kerberos* is the protocol of choice, NTLM is still supported.</span></span> <span data-ttu-id="8b142-107">NTLM debe usarse también para la autenticación de inicio de sesión en sistemas independientes.</span><span class="sxs-lookup"><span data-stu-id="8b142-107">NTLM must also be used for logon authentication on stand-alone systems.</span></span> <span data-ttu-id="8b142-108">Para obtener más información acerca de Kerberos, consulte [Microsoft Kerberos](microsoft-kerberos.md).</span><span class="sxs-lookup"><span data-stu-id="8b142-108">For more information about Kerberos, see [Microsoft Kerberos](microsoft-kerberos.md).</span></span>

<span data-ttu-id="8b142-109">Las credenciales de NTLM se basan en los datos obtenidos durante el proceso de inicio de sesión interactivo y constan de un nombre de dominio, un nombre de usuario y un [*hash*](../secgloss/h-gly.md) unidireccional de la contraseña del usuario.</span><span class="sxs-lookup"><span data-stu-id="8b142-109">NTLM credentials are based on data obtained during the interactive logon process and consist of a domain name, a user name, and a one-way [*hash*](../secgloss/h-gly.md) of the user's password.</span></span> <span data-ttu-id="8b142-110">NTLM utiliza un protocolo de desafío/respuesta cifrado para autenticar a un usuario sin enviar la contraseña del usuario a través de la conexión.</span><span class="sxs-lookup"><span data-stu-id="8b142-110">NTLM uses an encrypted challenge/response protocol to authenticate a user without sending the user's password over the wire.</span></span> <span data-ttu-id="8b142-111">En su lugar, el sistema que solicita la autenticación debe realizar un cálculo que demuestre que tiene acceso a las credenciales NTLM protegidas.</span><span class="sxs-lookup"><span data-stu-id="8b142-111">Instead, the system requesting authentication must perform a calculation that proves it has access to the secured NTLM credentials.</span></span>

<span data-ttu-id="8b142-112">La autenticación NTLM interactiva a través de una red normalmente implica dos sistemas: un sistema cliente, donde el usuario solicita la autenticación y un controlador de dominio, donde se mantiene la información relacionada con la contraseña del usuario.</span><span class="sxs-lookup"><span data-stu-id="8b142-112">Interactive NTLM authentication over a network typically involves two systems: a client system, where the user is requesting authentication, and a domain controller, where information related to the user's password is kept.</span></span> <span data-ttu-id="8b142-113">Autenticación no interactiva, que puede ser necesaria para permitir que un usuario que ya ha iniciado sesión tenga acceso a un recurso, como una aplicación de servidor, normalmente implica tres sistemas: un cliente, un servidor y un controlador de dominio que realiza los cálculos de autenticación en nombre del servidor.</span><span class="sxs-lookup"><span data-stu-id="8b142-113">Noninteractive authentication, which may be required to permit an already logged-on user to access a resource such as a server application, typically involves three systems: a client, a server, and a domain controller that does the authentication calculations on behalf of the server.</span></span>

<span data-ttu-id="8b142-114">Los pasos siguientes presentan un esquema de autenticación no interactiva NTLM.</span><span class="sxs-lookup"><span data-stu-id="8b142-114">The following steps present an outline of NTLM noninteractive authentication.</span></span> <span data-ttu-id="8b142-115">En el primer paso se proporcionan las credenciales NTLM del usuario y solo se produce como parte del proceso de autenticación interactiva (inicio de sesión).</span><span class="sxs-lookup"><span data-stu-id="8b142-115">The first step provides the user's NTLM credentials and occurs only as part of the interactive authentication (logon) process.</span></span>

1.  <span data-ttu-id="8b142-116">(Solo autenticación interactiva) Un usuario obtiene acceso a un equipo cliente y proporciona un nombre de dominio, un nombre de usuario y una contraseña.</span><span class="sxs-lookup"><span data-stu-id="8b142-116">(Interactive authentication only) A user accesses a client computer and provides a domain name, user name, and password.</span></span> <span data-ttu-id="8b142-117">El cliente calcula un [*hash*](../secgloss/h-gly.md) criptográfico de la contraseña y descarta la contraseña real.</span><span class="sxs-lookup"><span data-stu-id="8b142-117">The client computes a cryptographic [*hash*](../secgloss/h-gly.md) of the password and discards the actual password.</span></span>
2.  <span data-ttu-id="8b142-118">El cliente envía el nombre de usuario al servidor (en [*texto sin formato*](../secgloss/p-gly.md)).</span><span class="sxs-lookup"><span data-stu-id="8b142-118">The client sends the user name to the server (in [*plaintext*](../secgloss/p-gly.md)).</span></span>
3.  <span data-ttu-id="8b142-119">El servidor genera un número aleatorio de 16 bytes, denominado *desafío* o valor de seguridad ( [*nonce*](../secgloss/n-gly.md)), y lo envía al cliente.</span><span class="sxs-lookup"><span data-stu-id="8b142-119">The server generates a 16-byte random number, called a *challenge* or [*nonce*](../secgloss/n-gly.md), and sends it to the client.</span></span>
4.  <span data-ttu-id="8b142-120">El cliente cifra este desafío con el hash de la contraseña del usuario y devuelve el resultado al servidor.</span><span class="sxs-lookup"><span data-stu-id="8b142-120">The client encrypts this challenge with the hash of the user's password and returns the result to the server.</span></span> <span data-ttu-id="8b142-121">Esto se denomina *respuesta*.</span><span class="sxs-lookup"><span data-stu-id="8b142-121">This is called the *response*.</span></span>
5.  <span data-ttu-id="8b142-122">El servidor envía los tres elementos siguientes al controlador de dominio:</span><span class="sxs-lookup"><span data-stu-id="8b142-122">The server sends the following three items to the domain controller:</span></span>

    -   <span data-ttu-id="8b142-123">Nombre de usuario</span><span class="sxs-lookup"><span data-stu-id="8b142-123">User name</span></span>
    -   <span data-ttu-id="8b142-124">Desafío enviado al cliente</span><span class="sxs-lookup"><span data-stu-id="8b142-124">Challenge sent to the client</span></span>
    -   <span data-ttu-id="8b142-125">Respuesta recibida del cliente</span><span class="sxs-lookup"><span data-stu-id="8b142-125">Response received from the client</span></span>

6.  <span data-ttu-id="8b142-126">El controlador de dominio utiliza el nombre de usuario para recuperar el hash de la contraseña del usuario de la base de datos del administrador de cuentas de seguridad.</span><span class="sxs-lookup"><span data-stu-id="8b142-126">The domain controller uses the user name to retrieve the hash of the user's password from the Security Account Manager database.</span></span> <span data-ttu-id="8b142-127">Usa este hash de contraseña para cifrar el desafío.</span><span class="sxs-lookup"><span data-stu-id="8b142-127">It uses this password hash to encrypt the challenge.</span></span>
7.  <span data-ttu-id="8b142-128">El controlador de dominio compara el desafío cifrado calculado (en el paso 6) con la respuesta calculada por el cliente (en el paso 4).</span><span class="sxs-lookup"><span data-stu-id="8b142-128">The domain controller compares the encrypted challenge it computed (in step 6) to the response computed by the client (in step 4).</span></span> <span data-ttu-id="8b142-129">Si son idénticos, la autenticación se realiza correctamente.</span><span class="sxs-lookup"><span data-stu-id="8b142-129">If they are identical, authentication is successful.</span></span>

<span data-ttu-id="8b142-130">La aplicación no debe tener acceso al [*paquete de seguridad*](../secgloss/s-gly.md) de NTLM directamente; en su lugar, debe usar el paquete de seguridad [*Negotiate*](../secgloss/n-gly.md) .</span><span class="sxs-lookup"><span data-stu-id="8b142-130">Your application should not access the NTLM [*security package*](../secgloss/s-gly.md) directly; instead, it should use the [*Negotiate*](../secgloss/n-gly.md) security package.</span></span> <span data-ttu-id="8b142-131">Negotiate permite que la aplicación aproveche los [*protocolos de seguridad*](../secgloss/s-gly.md) más avanzados si son compatibles con los sistemas implicados en la autenticación.</span><span class="sxs-lookup"><span data-stu-id="8b142-131">Negotiate allows your application to take advantage of more advanced [*security protocols*](../secgloss/s-gly.md) if they are supported by the systems involved in the authentication.</span></span> <span data-ttu-id="8b142-132">Actualmente, el paquete de seguridad Negotiate selecciona entre [*Kerberos*](../secgloss/k-gly.md) y NTLM.</span><span class="sxs-lookup"><span data-stu-id="8b142-132">Currently, the Negotiate security package selects between [*Kerberos*](../secgloss/k-gly.md) and NTLM.</span></span> <span data-ttu-id="8b142-133">Negotiate selecciona Kerberos a menos que uno de los sistemas implicados en la autenticación no pueda utilizarlo.</span><span class="sxs-lookup"><span data-stu-id="8b142-133">Negotiate selects Kerberos unless it cannot be used by one of the systems involved in the authentication.</span></span>

 

 
