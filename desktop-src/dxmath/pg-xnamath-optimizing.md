---
description: En este tema se describen las consideraciones y las estrategias de optimización con la biblioteca de DirectXMath.
ms.assetid: bcbf8ae1-ed49-fdf7-812d-b2089537ab28
title: Optimización del código con la biblioteca de DirectXMath
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: d11b331077e3d6538952a2f7956641b8b3919e14
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105696712"
---
# <a name="code-optimization-with-the-directxmath-library"></a><span data-ttu-id="503b9-103">Optimización del código con la biblioteca de DirectXMath</span><span class="sxs-lookup"><span data-stu-id="503b9-103">Code Optimization with the DirectXMath Library</span></span>

<span data-ttu-id="503b9-104">En este tema se describen las consideraciones y las estrategias de optimización con la biblioteca de DirectXMath.</span><span class="sxs-lookup"><span data-stu-id="503b9-104">This topic describes optimization considerations and strategies with the DirectXMath Library.</span></span>

-   [<span data-ttu-id="503b9-105">Usar descriptores de acceso con moderación</span><span class="sxs-lookup"><span data-stu-id="503b9-105">Use accessors sparingly</span></span>](#use-accessors-sparingly)
-   [<span data-ttu-id="503b9-106">Usar la configuración de compilación correcta</span><span class="sxs-lookup"><span data-stu-id="503b9-106">Use correct compilation settings</span></span>](#use-correct-compilation-settings)
-   [<span data-ttu-id="503b9-107">Usar las funciones de est cuando sea necesario</span><span class="sxs-lookup"><span data-stu-id="503b9-107">Use Est functions when appropriate</span></span>](#use-est-functions-when-appropriate)
-   [<span data-ttu-id="503b9-108">Usar tipos de datos alineados y operaciones</span><span class="sxs-lookup"><span data-stu-id="503b9-108">Use Aligned Data Types and Operations</span></span>](#use-aligned-data-types-and-operations)
-   [<span data-ttu-id="503b9-109">Alinear las asignaciones correctamente</span><span class="sxs-lookup"><span data-stu-id="503b9-109">Properly Align Allocations</span></span>](#properly-align-allocations)
-   [<span data-ttu-id="503b9-110">Evitar sobrecargas de operador cuando sea posible</span><span class="sxs-lookup"><span data-stu-id="503b9-110">Avoid Operator Overloads When Possible</span></span>](#avoid-operator-overloads-when-possible)
-   [<span data-ttu-id="503b9-111">Desnormalizados</span><span class="sxs-lookup"><span data-stu-id="503b9-111">Denormals</span></span>](#denormals)
-   [<span data-ttu-id="503b9-112">Sacar provecho de la doble de punto flotante de entero</span><span class="sxs-lookup"><span data-stu-id="503b9-112">Take Advantage of the Integer Floating Point Duality</span></span>](#take-advantage-of-the-integer-floating-point-duality)
-   [<span data-ttu-id="503b9-113">Preferir formularios de plantilla</span><span class="sxs-lookup"><span data-stu-id="503b9-113">Prefer Template Forms</span></span>](#prefer-template-forms)
-   [<span data-ttu-id="503b9-114">Usar DirectXMath con Direct3D</span><span class="sxs-lookup"><span data-stu-id="503b9-114">Using DirectXMath with Direct3D</span></span>](#using-directxmath-with-direct3d)
-   [<span data-ttu-id="503b9-115">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="503b9-115">Related topics</span></span>](#related-topics)

## <a name="use-accessors-sparingly"></a><span data-ttu-id="503b9-116">Usar descriptores de acceso con moderación</span><span class="sxs-lookup"><span data-stu-id="503b9-116">Use accessors sparingly</span></span>

<span data-ttu-id="503b9-117">Las operaciones basadas en vectores usan los conjuntos de instrucciones SIMD y estos hacen uso de registros especiales.</span><span class="sxs-lookup"><span data-stu-id="503b9-117">Vector-based operations use the SIMD instruction sets and these make use of special registers.</span></span> <span data-ttu-id="503b9-118">El acceso a componentes individuales requiere el traslado de los registros SIMD a los valores escalares y viceversa.</span><span class="sxs-lookup"><span data-stu-id="503b9-118">Accessing individual components requires moving from the SIMD registers to the scalar ones and back again.</span></span>

<span data-ttu-id="503b9-119">Siempre que sea posible, es más eficaz inicializar todos los componentes de una [**XMVECTOR**](xmvector-data-type.md) al mismo tiempo, en lugar de usar una serie de descriptores de acceso vectoriales individuales.</span><span class="sxs-lookup"><span data-stu-id="503b9-119">When possible, it is more efficient to initialize all of the components of an [**XMVECTOR**](xmvector-data-type.md) at one time, instead of using a series of individual vector accessors.</span></span>

## <a name="use-correct-compilation-settings"></a><span data-ttu-id="503b9-120">Usar la configuración de compilación correcta</span><span class="sxs-lookup"><span data-stu-id="503b9-120">Use correct compilation settings</span></span>

<span data-ttu-id="503b9-121">En el caso de los destinos x86 de Windows, habilite/Arch: SSE2.</span><span class="sxs-lookup"><span data-stu-id="503b9-121">For Windows x86 targets, enable /arch:SSE2.</span></span> <span data-ttu-id="503b9-122">Para todos los destinos de Windows, habilite/FP: Fast.</span><span class="sxs-lookup"><span data-stu-id="503b9-122">For all Windows targets, enable /fp:fast.</span></span>

<span data-ttu-id="503b9-123">De forma predeterminada, la compilación en la biblioteca de DirectXMath para los destinos de Windows x86 se realiza con las \_ \_ \_ funciones intrínsecas de XM SSE \_ definidas.</span><span class="sxs-lookup"><span data-stu-id="503b9-123">By default, compilation against the DirectXMath Library for Window x86 targets is done with \_XM\_SSE\_INTRINSICS\_ defined.</span></span> <span data-ttu-id="503b9-124">Esto significa que todas las funciones de DirectXMath harán uso de instrucciones SSE2.</span><span class="sxs-lookup"><span data-stu-id="503b9-124">This means that all DirectXMath functionality will make use of SSE2 instructions.</span></span> <span data-ttu-id="503b9-125">Sin embargo, lo mismo no es cierto para otro código.</span><span class="sxs-lookup"><span data-stu-id="503b9-125">However, the same is not true for other code.</span></span>

<span data-ttu-id="503b9-126">El código fuera de DirectXMath se controla mediante los valores predeterminados del compilador.</span><span class="sxs-lookup"><span data-stu-id="503b9-126">Code outside of DirectXMath is handled using compiler defaults.</span></span> <span data-ttu-id="503b9-127">Sin este modificador, el código generado puede usar a menudo el código x87 menos eficaz.</span><span class="sxs-lookup"><span data-stu-id="503b9-127">Without this switch, the generated code may often use the less efficient x87 code.</span></span>

<span data-ttu-id="503b9-128">Se recomienda encarecidamente usar siempre la versión más reciente disponible del compilador.</span><span class="sxs-lookup"><span data-stu-id="503b9-128">We highly recommend that you always use the latest available version of the compiler.</span></span>

## <a name="use-est-functions-when-appropriate"></a><span data-ttu-id="503b9-129">Usar las funciones de est cuando sea necesario</span><span class="sxs-lookup"><span data-stu-id="503b9-129">Use Est functions when appropriate</span></span>

<span data-ttu-id="503b9-130">Muchas funciones tienen una función de estimación equivalente que termina en est.</span><span class="sxs-lookup"><span data-stu-id="503b9-130">Many functions have an equivalent estimation function ending in Est.</span></span> <span data-ttu-id="503b9-131">Estas funciones intercambian cierta precisión para mejorar el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="503b9-131">These functions trade some accuracy for improved performance.</span></span> <span data-ttu-id="503b9-132">Las funciones de est son adecuadas para cálculos no críticos en los que se puede sacrificar la precisión de la velocidad.</span><span class="sxs-lookup"><span data-stu-id="503b9-132">Est functions are appropriate for non-critical calculations where accuracy can be sacrificed for speed.</span></span> <span data-ttu-id="503b9-133">La cantidad exacta de pérdida de precisión y aumento de velocidad es dependiente de la plataforma.</span><span class="sxs-lookup"><span data-stu-id="503b9-133">The exact amount of lost accuracy and speed increase are platform dependent.</span></span>

<span data-ttu-id="503b9-134">Por ejemplo, la función [**XMVector3AngleBetweenNormalsEst**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormalsest) puede usarse en lugar de la función [**XMVector3AngleBetweenNormals**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormals) .</span><span class="sxs-lookup"><span data-stu-id="503b9-134">For example, the [**XMVector3AngleBetweenNormalsEst**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormalsest) function could be used in place of the [**XMVector3AngleBetweenNormals**](/windows/win32/api/directxmath/nf-directxmath-xmvector3anglebetweennormals) function.</span></span>

## <a name="use-aligned-data-types-and-operations"></a><span data-ttu-id="503b9-135">Usar tipos de datos alineados y operaciones</span><span class="sxs-lookup"><span data-stu-id="503b9-135">Use Aligned Data Types and Operations</span></span>

<span data-ttu-id="503b9-136">Los conjuntos de instrucciones SIMD en las versiones de Windows que admiten SSE2 suelen tener versiones alineadas y no alineadas de las operaciones de memoria.</span><span class="sxs-lookup"><span data-stu-id="503b9-136">The SIMD instruction sets on versions of windows supporting SSE2 typically have aligned and unaligned versions of memory operations.</span></span> <span data-ttu-id="503b9-137">El uso de las operaciones alineadas es más rápido y se debe preferir siempre que sea posible.</span><span class="sxs-lookup"><span data-stu-id="503b9-137">The use of the aligned operations is faster, and should be preferred wherever possible.</span></span>

<span data-ttu-id="503b9-138">La biblioteca de DirectXMath proporciona funcionalidad alineada y sin alinear a través de tipos, estructuras y funciones de vector de variante.</span><span class="sxs-lookup"><span data-stu-id="503b9-138">The DirectXMath Library provides access aligned and unaligned functionality through variant vector types, structure, and functions.</span></span> <span data-ttu-id="503b9-139">Estas variantes se indican mediante una "A" al final del nombre.</span><span class="sxs-lookup"><span data-stu-id="503b9-139">These variants are indicated by an "A" at the end of the name.</span></span>

<span data-ttu-id="503b9-140">Por ejemplo, hay una estructura [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4) sin alinear y una estructura [**XMFLOAT4X4A**](/previous-versions/windows/desktop/legacy/ee419623(v=vs.85)) alineada, que son usadas por las funciones [**XMStoreFloat4**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4) y [**XMStoreFloat4A**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4a) , respectivamente.</span><span class="sxs-lookup"><span data-stu-id="503b9-140">For example, there are an unaligned [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4) structure and an aligned [**XMFLOAT4X4A**](/previous-versions/windows/desktop/legacy/ee419623(v=vs.85)) structure, which are used by the [**XMStoreFloat4**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4) and [**XMStoreFloat4A**](/windows/win32/api/directxmath/nf-directxmath-xmstorefloat4a) functions respectively.</span></span>

## <a name="properly-align-allocations"></a><span data-ttu-id="503b9-141">Alinear las asignaciones correctamente</span><span class="sxs-lookup"><span data-stu-id="503b9-141">Properly Align Allocations</span></span>

<span data-ttu-id="503b9-142">Las versiones alineadas de los intrínsecos [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) subyacentes a la biblioteca de DirectXMath son más rápidas que la no alineada.</span><span class="sxs-lookup"><span data-stu-id="503b9-142">The aligned versions of the [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) intrinsics underlying the DirectXMath Library are faster than the unaligned.</span></span>

<span data-ttu-id="503b9-143">Por este motivo, las operaciones de DirectXMath que usan objetos [**XMVECTOR**](xmvector-data-type.md) y [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) suponen que los objetos tienen una alineación de 16 bytes.</span><span class="sxs-lookup"><span data-stu-id="503b9-143">For this reason, DirectXMath operations using [**XMVECTOR**](xmvector-data-type.md) and [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) objects assume those objects are 16-byte aligned.</span></span> <span data-ttu-id="503b9-144">Esto es automático para las asignaciones basadas en la pila, si el código se compila con la biblioteca de DirectXMath mediante la configuración recomendada del compilador de Windows (vea [usar la configuración de compilación correcta](#use-correct-compilation-settings)).</span><span class="sxs-lookup"><span data-stu-id="503b9-144">This is automatic for stack based allocations, if code is compiled against the DirectXMath Library using the recommended Windows (see [Use Correct Compilation Settings](#use-correct-compilation-settings)) compiler settings.</span></span> <span data-ttu-id="503b9-145">Sin embargo, es importante asegurarse de que la asignación de montones que contiene objetos **XMVECTOR** y **XMMATRIX** , o conversiones a estos tipos, cumpla estos requisitos de alineación.</span><span class="sxs-lookup"><span data-stu-id="503b9-145">However, it is important to ensure that heap-allocation containing **XMVECTOR** and **XMMATRIX** objects, or casts to these types, meet these alignment requirements.</span></span>

<span data-ttu-id="503b9-146">Mientras que las asignaciones de memoria de Windows de 64 bits tienen una alineación de 16 bytes, de forma predeterminada, en las versiones de 32 bits de la memoria asignada de Windows, solo se alinea con 8 bytes.</span><span class="sxs-lookup"><span data-stu-id="503b9-146">While 64-bit Windows memory allocations are 16-byte aligned, by default on 32 bit versions of Windows memory allocated is only 8-byte aligned.</span></span> <span data-ttu-id="503b9-147">Para obtener información sobre cómo controlar la alineación de memoria, consulte [ \_ aligned \_ malloc](https://msdn.microsoft.com/library/8z34s9c6(VS.80).aspx).</span><span class="sxs-lookup"><span data-stu-id="503b9-147">For information on controlling memory alignment, see [\_aligned\_malloc](https://msdn.microsoft.com/library/8z34s9c6(VS.80).aspx).</span></span>

<span data-ttu-id="503b9-148">Al usar tipos alineados de DirectXMath con la biblioteca de plantillas estándar (STL), deberá proporcionar un asignador personalizado que garantice la alineación de 16 bytes.</span><span class="sxs-lookup"><span data-stu-id="503b9-148">When using aligned DirectXMath types with the Standard Template Library (STL), you will need to provide a custom allocator that ensures the 16-byte alignment.</span></span> <span data-ttu-id="503b9-149">Consulte el [blog](https://devblogs.microsoft.com/cppblog/the-mallocator/) del equipo de Visual C++ para obtener un ejemplo de cómo escribir un asignador personalizado (en lugar de malloc/Free, que querrá usar \_ malloc alineado \_ y \_ alineado \_ de forma gratuita en su implementación).</span><span class="sxs-lookup"><span data-stu-id="503b9-149">See the Visual C++ Team [blog](https://devblogs.microsoft.com/cppblog/the-mallocator/) for an example of writing a custom allocator (instead of malloc/free you'll want to use \_aligned\_malloc and \_aligned\_free in your implementation).</span></span>

> [!Note]  
> <span data-ttu-id="503b9-150">Algunas plantillas STL modifican la alineación del tipo proporcionado.</span><span class="sxs-lookup"><span data-stu-id="503b9-150">Some STL templates modify the provided type's alignment.</span></span> <span data-ttu-id="503b9-151">Por ejemplo, [la \_<>compartidas ](/cpp/standard-library/memory-functions?view=vs-2017&preserve-view=true) agrega información interna de seguimiento que puede respetar o no la alineación del tipo de usuario proporcionado, lo que da lugar a miembros de datos no alineados.</span><span class="sxs-lookup"><span data-stu-id="503b9-151">For example, [make\_shared<>](/cpp/standard-library/memory-functions?view=vs-2017&preserve-view=true) adds some internal tracking information which may or may not respect the alignment of the provided user type, resulting in unaligned data members.</span></span> <span data-ttu-id="503b9-152">En este caso, debe usar tipos no alineados en lugar de tipos alineados.</span><span class="sxs-lookup"><span data-stu-id="503b9-152">In this case, you need to use unaligned types instead of aligned types.</span></span> <span data-ttu-id="503b9-153">Si deriva de clases existentes, incluidos muchos objetos Windows Runtime, también puede modificar la alineación de una clase o estructura.</span><span class="sxs-lookup"><span data-stu-id="503b9-153">If you derive from existing classes, including many Windows Runtime objects, you can also modify the alignment of a class or structure.</span></span>

 

## <a name="avoid-operator-overloads-when-possible"></a><span data-ttu-id="503b9-154">Evitar sobrecargas de operador cuando sea posible</span><span class="sxs-lookup"><span data-stu-id="503b9-154">Avoid Operator Overloads When Possible</span></span>

<span data-ttu-id="503b9-155">Como ventaja, una serie de tipos como [**XMVECTOR**](xmvector-data-type.md) y [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) tienen sobrecargas de operador para las operaciones aritméticas comunes.</span><span class="sxs-lookup"><span data-stu-id="503b9-155">As a convenience feature, a number of types such as [**XMVECTOR**](xmvector-data-type.md) and [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) have operator overloads for common arithmetic operations.</span></span> <span data-ttu-id="503b9-156">Estas sobrecargas de operador tienden a crear numerosos objetos temporales.</span><span class="sxs-lookup"><span data-stu-id="503b9-156">Such operator overloads tend to create numerous temporary objects.</span></span> <span data-ttu-id="503b9-157">Se recomienda evitar estas sobrecargas de operador en el código sensible al rendimiento.</span><span class="sxs-lookup"><span data-stu-id="503b9-157">We recommend that you avoid these operator overloads in performance sensitive code.</span></span>

## <a name="denormals"></a><span data-ttu-id="503b9-158">Desnormalizados</span><span class="sxs-lookup"><span data-stu-id="503b9-158">Denormals</span></span>

<span data-ttu-id="503b9-159">Para admitir cálculos cercanos a 0, el estándar de punto flotante IEEE 754 incluye compatibilidad con el subdesbordamiento gradual.</span><span class="sxs-lookup"><span data-stu-id="503b9-159">To support computations close to 0, the IEEE 754 float-point standard includes support for gradual underflow.</span></span> <span data-ttu-id="503b9-160">El subdesbordamiento gradual se implementa mediante el uso de valores desnormalizados y muchas implementaciones de hardware son lentas cuando se administran desnormalizaciones.</span><span class="sxs-lookup"><span data-stu-id="503b9-160">Gradual underflow is implemented through the use of denormalized values, and many hardware implementations are slow when handling denormals.</span></span> <span data-ttu-id="503b9-161">Una optimización que se debe considerar es deshabilitar el control de las desnormalizaciones para las operaciones de vector usadas por DirectXMath.</span><span class="sxs-lookup"><span data-stu-id="503b9-161">An optimization to consider is to disable the handling of denormals for the vector operations used by DirectXMath.</span></span>

<span data-ttu-id="503b9-162">El cambio del control de las desnormalizaciones se realiza mediante la rutina [ \_ controlfp \_ s](/cpp/c-runtime-library/reference/controlfp-s) en una base de subprocesos y puede dar lugar a mejoras en el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="503b9-162">Changing the handling of denormals is done by using the [\_controlfp\_s](/cpp/c-runtime-library/reference/controlfp-s) routine on a pre-thread basis, and can result in performance improvements.</span></span> <span data-ttu-id="503b9-163">Use este código para cambiar el control de las desnormalizaciones:</span><span class="sxs-lookup"><span data-stu-id="503b9-163">Use this code to change the handling of denormals:</span></span>


```
  #include <float.h>;
    unsigned int control_word;
    _controlfp_s( &control_word, _DN_FLUSH, _MCW_DN );
```



> [!Note]  
> <span data-ttu-id="503b9-164">En las versiones de 64 bits de Windows, las instrucciones de [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) se usan para todos los cálculos, no solo las operaciones de vector.</span><span class="sxs-lookup"><span data-stu-id="503b9-164">On 64-bit versions of Windows, [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)) instructions are used for all computations, not just the vector operations.</span></span> <span data-ttu-id="503b9-165">Cambiar el control de desnormalización afecta a todos los cálculos de punto flotante en el programa, no solo a las operaciones de vector usadas por DirectXMath.</span><span class="sxs-lookup"><span data-stu-id="503b9-165">Changing the denormal handling affects all floating-point computations in your program, not just the vector operations used by DirectXMath.</span></span>

 

## <a name="take-advantage-of-the-integer-floating-point-duality"></a><span data-ttu-id="503b9-166">Sacar provecho de la doble de punto flotante de entero</span><span class="sxs-lookup"><span data-stu-id="503b9-166">Take Advantage of the Integer Floating Point Duality</span></span>

<span data-ttu-id="503b9-167">DirectXMath admite vectores de 4 valores de punto flotante de precisión sencilla o de 4 32 bits (con o sin signo).</span><span class="sxs-lookup"><span data-stu-id="503b9-167">DirectXMath supports vectors of 4 single-precision floating-point or four 32-bit (signed or unsigned) values.</span></span>

<span data-ttu-id="503b9-168">Dado que los conjuntos de instrucciones que se usan para implementar la biblioteca de DirectXMath tienen la capacidad de tratar los mismos datos como varios tipos diferentes; por ejemplo, tratar el mismo vector como datos de punto flotante y enteros, se pueden lograr ciertas optimizaciones.</span><span class="sxs-lookup"><span data-stu-id="503b9-168">Because the instruction sets used to implement the DirectXMath Library have the ability to treat the same data as multiple different types-for example, treat the same vector as floating-point and integer data-certain optimizations can be achieved.</span></span> <span data-ttu-id="503b9-169">Puede obtener estas optimizaciones mediante las rutinas de inicialización de vectores enteros y los operadores de bits para manipular los valores de punto flotante.</span><span class="sxs-lookup"><span data-stu-id="503b9-169">You can get these optimizations by using the integer vector initialization routines and bit-wise operators to manipulate floating-point values.</span></span>

<span data-ttu-id="503b9-170">El formato binario de los números de punto flotante de precisión sencilla que usa la biblioteca de DirectXMath se ajusta totalmente al estándar IEEE 764:</span><span class="sxs-lookup"><span data-stu-id="503b9-170">The binary format of single-precision floating-point numbers used by the DirectXMath Library completely conforms to the IEEE 764 standard:</span></span>

``` syntax
     SIGN    EXPONENT   MANTISSA
     X       XXXXXXXX   XXXXXXXXXXXXXXXXXXXXXXX
     1 bit   8 bits     23 bits
```

<span data-ttu-id="503b9-171">Cuando se trabaja con el número de punto flotante de precisión sencilla IEEE 764, es importante tener en cuenta que algunas representaciones tienen un significado especial (es decir, no se ajustan a la descripción anterior).</span><span class="sxs-lookup"><span data-stu-id="503b9-171">When working with the IEEE 764 single precision floating-point number, it is important to keep in mind, that some representations have special meaning (that is, they do not conform to the preceding description).</span></span> <span data-ttu-id="503b9-172">Algunos ejemplos son:</span><span class="sxs-lookup"><span data-stu-id="503b9-172">Examples include:</span></span>

-   <span data-ttu-id="503b9-173">Cero positivo es 0</span><span class="sxs-lookup"><span data-stu-id="503b9-173">Positive zero is 0</span></span>
-   <span data-ttu-id="503b9-174">Cero negativo es 0x80000000</span><span class="sxs-lookup"><span data-stu-id="503b9-174">Negative zero is 0x80000000</span></span>
-   <span data-ttu-id="503b9-175">Q \_ Nan es 07FC0000</span><span class="sxs-lookup"><span data-stu-id="503b9-175">Q\_NAN is 07FC0000</span></span>
-   <span data-ttu-id="503b9-176">+ INF es 0x7F800000</span><span class="sxs-lookup"><span data-stu-id="503b9-176">+INF is 0x7F800000</span></span>
-   <span data-ttu-id="503b9-177">-INF es 0xFF800000</span><span class="sxs-lookup"><span data-stu-id="503b9-177">-INF is 0xFF800000</span></span>

## <a name="prefer-template-forms"></a><span data-ttu-id="503b9-178">Preferir formularios de plantilla</span><span class="sxs-lookup"><span data-stu-id="503b9-178">Prefer Template Forms</span></span>

<span data-ttu-id="503b9-179">El formulario de plantilla existe para [**XMVectorSwizzle**](/windows/win32/api/directxmath/nf-directxmath-xmvectorswizzle), [**XMVectorPermute**](/windows/win32/api/directxmath/nf-directxmath-xmvectorpermute), [**XMVectorInsert**](/windows/win32/api/directxmath/nf-directxmath-xmvectorinsert), [**XMVectorShiftLeft**](/windows/win32/api/directxmath/nf-directxmath-xmvectorshiftleft), [**XMVectorRotateLeft**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateleft)y [**XMVectorRotateRight**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateright).</span><span class="sxs-lookup"><span data-stu-id="503b9-179">Template form exists for [**XMVectorSwizzle**](/windows/win32/api/directxmath/nf-directxmath-xmvectorswizzle), [**XMVectorPermute**](/windows/win32/api/directxmath/nf-directxmath-xmvectorpermute), [**XMVectorInsert**](/windows/win32/api/directxmath/nf-directxmath-xmvectorinsert), [**XMVectorShiftLeft**](/windows/win32/api/directxmath/nf-directxmath-xmvectorshiftleft), [**XMVectorRotateLeft**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateleft), and [**XMVectorRotateRight**](/windows/win32/api/directxmath/nf-directxmath-xmvectorrotateright).</span></span> <span data-ttu-id="503b9-180">El uso de estos en lugar del formulario de función general permite al compilador crear muchas más implementaciones de efficent.</span><span class="sxs-lookup"><span data-stu-id="503b9-180">Using these instead of the general function form allows the compiler to create much more efficent implementations.</span></span> <span data-ttu-id="503b9-181">En el caso de [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)), esto suele contraerse hasta uno o dos \_ valores de PS de \_ orden aleatorio \_ .</span><span class="sxs-lookup"><span data-stu-id="503b9-181">For [SSE](/previous-versions/visualstudio/visual-studio-2010/t467de55(v=vs.100)), this often collapses down to one or two \_mm\_shuffle\_ps values.</span></span> <span data-ttu-id="503b9-182">En el caso de ARM-neón, la plantilla **XMVectorSwizzle** puede emplear una serie de casos especiales en lugar del valor de VTBL swizzle/permute más general.</span><span class="sxs-lookup"><span data-stu-id="503b9-182">For ARM-NEON, the **XMVectorSwizzle** template can utilize a number of special cases rather than the more general VTBL swizzle/permute.</span></span>

## <a name="using-directxmath-with-direct3d"></a><span data-ttu-id="503b9-183">Usar DirectXMath con Direct3D</span><span class="sxs-lookup"><span data-stu-id="503b9-183">Using DirectXMath with Direct3D</span></span>

<span data-ttu-id="503b9-184">Un uso común de DirectXMath es realizar cálculos de gráficos para su uso con Direct3D.</span><span class="sxs-lookup"><span data-stu-id="503b9-184">A common use for DirectXMath is to perform graphics computations for use with Direct3D.</span></span> <span data-ttu-id="503b9-185">Con Direct3D 10. x y Direct3D 11. x, puede usar la biblioteca de DirectXMath de estas formas directas:</span><span class="sxs-lookup"><span data-stu-id="503b9-185">With Direct3D 10.x and Direct3D 11.x, you can use the DirectXMath library in these direct ways:</span></span>

-   <span data-ttu-id="503b9-186">Utilice las [constantes](ovw-xnamath-reference-constants.md) de espacio de nombres Colors directamente en el parámetro *ColorRGBA* en una llamada al método [**ID3D11DeviceContext:: ClearRenderTargetView**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-clearrendertargetview) o [**ID3D10Device:: ClearRenderTargetView**](/windows/win32/api/d3d10/nf-d3d10-id3d10device-clearrendertargetview) .</span><span class="sxs-lookup"><span data-stu-id="503b9-186">Use the Colors namespace [constants](ovw-xnamath-reference-constants.md) directly in the *ColorRGBA* parameter in a call to the [**ID3D11DeviceContext::ClearRenderTargetView**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-clearrendertargetview) or [**ID3D10Device::ClearRenderTargetView**](/windows/win32/api/d3d10/nf-d3d10-id3d10device-clearrendertargetview) method.</span></span> <span data-ttu-id="503b9-187">Para Direct3D 9, debe convertir al tipo [**XMCOLOR**](/windows/desktop/api/DirectXPackedVector/ns-directxpackedvector-xmcolor) para usarlo como parámetro de *color* en una llamada al método [**IDirect3DDevice9:: Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) .</span><span class="sxs-lookup"><span data-stu-id="503b9-187">For Direct3D 9, you must convert to the [**XMCOLOR**](/windows/desktop/api/DirectXPackedVector/ns-directxpackedvector-xmcolor) type to use it as the *Color* parameter in a call to the [**IDirect3DDevice9::Clear**](/windows/win32/api/d3d9helper/nf-d3d9helper-idirect3ddevice9-clear) method.</span></span>
-   <span data-ttu-id="503b9-188">Use los tipos [**XMFLOAT4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4) / [**XMVECTOR**](xmvector-data-type.md) y [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4) / [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) para configurar estructuras de búfer de constantes como referencia [](../direct3dhlsl/dx-graphics-hlsl-scalar.md) en los tipos de/float4x4 de [**matriz**](../direct3dhlsl/dx-graphics-hlsl-matrix.md)o de HLSL.</span><span class="sxs-lookup"><span data-stu-id="503b9-188">Use the [**XMFLOAT4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4)/[**XMVECTOR**](xmvector-data-type.md) and [**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4)/[**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) types to setup constant buffer structures for reference by HLSL [**float4**](../direct3dhlsl/dx-graphics-hlsl-scalar.md) or [**matrix**](../direct3dhlsl/dx-graphics-hlsl-matrix.md)/float4x4 types.</span></span>
    > [!Note]  
    > <span data-ttu-id="503b9-189">[**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4) / Los tipos de [**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) están en formato de fila principal.</span><span class="sxs-lookup"><span data-stu-id="503b9-189">[**XMFLOAT4X4**](/windows/win32/api/directxmath/ns-directxmath-xmfloat4x4)/[**XMMATRIX**](/windows/win32/api/directxmath/ns-directxmath-xmmatrix) types are in row-major format.</span></span> <span data-ttu-id="503b9-190">Por lo tanto, si usa el modificador de compilador/ZPR (la marca de compilación principal de la columna de la [**matriz de D3DCOMPILE \_ Pack \_ \_ \_**](../direct3dhlsl/d3dcompile-constants.md) ) u omitir la \_ [palabra clave](../direct3dhlsl/dx-graphics-hlsl-appendix-keywords.md) major de la fila al declarar el tipo de matriz en HLSL, debe transponer la matriz al establecerla en el búfer de constantes.</span><span class="sxs-lookup"><span data-stu-id="503b9-190">Therefore, if you use the /Zpr compiler switch (the [**D3DCOMPILE\_PACK\_MATRIX\_COLUMN\_MAJOR**](../direct3dhlsl/d3dcompile-constants.md) compile flag) or omit the row\_major [keyword](../direct3dhlsl/dx-graphics-hlsl-appendix-keywords.md) when you declare the matrix type in HLSL, you must transpose the matrix when you set it into the constant buffer.</span></span>

     

-   <span data-ttu-id="503b9-191">Con Direct3D 10. x y Direct3D 11. x, puede suponer que el puntero devuelto por el método de asignación (por ejemplo, [**ID3D11DeviceContext:: Map**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-map)) en el miembro **pdata** ([**D3D10 \_ asignado \_ TEXTURE2D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture2d).**pData**, [**D3D10 \_ asignado \_ TEXTURE3D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture3d).**pData** o [**\_ \_ subrecurso asignado D3D11**](/windows/win32/api/d3d11/ns-d3d11-d3d11_mapped_subresource).**pData**) es una alineación de 16 bytes si se usa el [nivel de característica](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md) 10 \_ 0 o superior, o cada vez que se usan los recursos de [**\_ \_ almacenamiento provisional de uso de D3D11**](/windows/win32/api/d3d11/ne-d3d11-d3d11_usage) .</span><span class="sxs-lookup"><span data-stu-id="503b9-191">With Direct3D 10.x and Direct3D 11.x, you can assume that the pointer returned by the Map method (for example, [**ID3D11DeviceContext::Map**](/windows/win32/api/d3d11/nf-d3d11-id3d11devicecontext-map)) in the **pData** member ([**D3D10\_MAPPED\_TEXTURE2D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture2d).**pData**, [**D3D10\_MAPPED\_TEXTURE3D**](/windows/win32/api/d3d10/ns-d3d10-d3d10_mapped_texture3d).**pData**, or [**D3D11\_MAPPED\_SUBRESOURCE**](/windows/win32/api/d3d11/ns-d3d11-d3d11_mapped_subresource).**pData**) is 16-byte aligned if you use [feature level](../direct3d11/overviews-direct3d-11-devices-downlevel-intro.md) 10\_0 or higher or whenever you use [**D3D11\_USAGE\_STAGING**](/windows/win32/api/d3d11/ne-d3d11-d3d11_usage) resources.</span></span>

## <a name="related-topics"></a><span data-ttu-id="503b9-192">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="503b9-192">Related topics</span></span>

<dl> <dt>

[<span data-ttu-id="503b9-193">Guía de programación de DirectXMath</span><span class="sxs-lookup"><span data-stu-id="503b9-193">DirectXMath Programming Guide</span></span>](ovw-xnamath-progguide.md)
</dt> </dl>

 

 
