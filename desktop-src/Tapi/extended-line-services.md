---
description: Los servicios de línea ampliada (o los servicios de línea específicos del dispositivo) incluyen todas las extensiones definidas por el proveedor de servicios para TSPI.
ms.assetid: 23519d23-27bd-422e-b3c4-00e0d0d93f9e
title: Servicios de línea ampliada
ms.topic: article
ms.date: 05/31/2018
ms.openlocfilehash: dbc1ce08d25633d33fd518d8686271c198ca5034
ms.sourcegitcommit: 831e8f3db78ab820e1710cede244553c70e50500
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 01/07/2021
ms.locfileid: "105687511"
---
# <a name="extended-line-services"></a>Servicios de línea ampliada

Los servicios de línea ampliada (o los servicios de línea específicos del dispositivo) incluyen todas las extensiones definidas por el proveedor de servicios para TSPI. TSPI define un mecanismo que permite a los proveedores de proveedores de servicios extender el SPI de telefonía mediante extensiones específicas del dispositivo. TSPI solo define el mecanismo de extensión y, al hacerlo, proporciona acceso a extensiones específicas del dispositivo, pero TSPI no define su comportamiento. El proveedor de servicios define el comportamiento por completo.

El SPI de telefonía consta de definiciones de constantes de marcas de bits y escalares, estructuras de datos, funciones y mensajes de devolución de llamada. Se definen procedimientos que permiten a un proveedor extender la mayoría de ellos de la manera siguiente.

En el caso de las constantes de datos escalares extensibles, un proveedor de proveedores de servicios puede definir nuevos valores en un intervalo especificado. Como la mayoría de las constantes de datos son **DWORD** s, normalmente el intervalo de 0X00000000 a 0x7FFFFFFF está reservado para extensiones futuras comunes, mientras que 0X80000000 a 0xFFFFFFFF están disponibles para las extensiones específicas del proveedor. La suposición es que un proveedor definiría valores que son extensiones naturales de los tipos de los tipos de los que se han definido mediante TSPI.

En el caso de las constantes de datos de marca de bits extensible, un proveedor de proveedor de servicios puede definir nuevos valores para los bits especificados. Como la mayoría de las constantes de marcador de bits son **DWORD** s, normalmente un número específico de los bits inferiores se reserva para las extensiones comunes mientras que los bits superiores restantes están disponibles para las extensiones específicas del proveedor. Las marcas de bits comunes se asignan desde el bit cero hacia arriba; las extensiones específicas del proveedor se deben asignar del bit 31 a la baja. Esto proporciona la máxima flexibilidad para asignar posiciones de bits a extensiones comunes frente a extensiones específicas del proveedor. Se espera que un proveedor defina nuevos valores que son extensiones naturales de las marcas de bits definidas por TSPI.

Las estructuras de datos extensibles tienen un campo de tamaño variable que se reserva para uso específico del dispositivo. Con el tamaño de variable, el proveedor de servicios decide la cantidad de información y la interpretación. Se espera que un proveedor que define un campo específico del dispositivo realice estas extensiones naturales de la estructura de datos original definida por TSPI.

Dos funciones, [**TSPI \_ LineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) y [**TSPI \_ lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature), y cuatro mensajes relacionados, [**line \_ DEVSPECIFIC**](/previous-versions/windows/desktop/legacy/ms725225(v=vs.85)), [**line \_ CALLDEVSPECIFIC**](line-calldevspecific.md), [**line \_ DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85))y [**line \_ CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md), ofrecen un mecanismo de extensión específico del proveedor. La operación de **\_ LineDevSpecific de TSPI** y \_ los mensajes de línea DEVSPECIFIC y CALLDEVSPECIFIC de línea asociados \_ permiten que la aplicación cliente de Tapi32.dll tenga acceso a las características de línea, dirección o llamada específicas del dispositivo que no están disponibles en los servicios de telefonía básicos o adicionales. El perfil de parámetro de la función [**\_ LineDevSpecific de TSPI**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific) es genérico, ya que la interpretación de los parámetros se realiza mediante TSPI. Los parámetros de identificador de dispositivo tienen significados definidos por el TSPI y se traducen adecuadamente entre la aplicación y el proveedor de servicios. Los parámetros genéricos se pasan simplemente sin modificar. La interpretación de los parámetros genéricos se define mediante el proveedor de servicios y debe ser entendida por las aplicaciones que los usan. Por lo general, una aplicación que se basa en extensiones específicas del dispositivo no funciona con otros proveedores de servicios. Sin embargo, las aplicaciones escritas completamente en los servicios de telefonía básico y complementario deben funcionar con el proveedor de servicios extendidos.

La implementación de TAPI de los mensajes y las funciones específicas del dispositivo es "paso a través". TAPI no examina ni modifica los parámetros y búferes genéricos específicos del dispositivo, pero asigna los valores de identificador opaco en el nivel de aplicación (que se usan en el nivel de TAPI) a los valores de identificador opaco de nivel de proveedor de servicio (usados en el nivel TSPI).

En cuanto a la traducción de identificadores, la naturaleza de paso a través de las partes genéricas de las extensiones específicas del dispositivo tiene una consecuencia importante. Un proveedor de servicios no tiene forma de relacionar los identificadores usados en el nivel de TSPI con los del nivel de TAPI, excepto pasando por los campos y parámetros de identificador predefinidos. TAPI no traduce ningún identificador colocado en el área de extensión genérica mientras se pasa entre la aplicación y el proveedor de servicios. Por lo general, el diseñador de una extensión de proveedor de servicios no debe definir extensiones que pasen los identificadores de esta manera.

El enfoque adecuado al definir una extensión específica del dispositivo que debe hacer referencia a dispositivos específicos sin usar identificadores es hacer referencia a ellas mediante su identificación de dispositivo absoluta. Por ejemplo, el identificador de dispositivo que se usa para abrir una línea en el nivel TAPI es estrictamente el mismo valor que se utiliza en el nivel TSPI para abrir la línea. Del mismo modo, una tupla (identificador de dispositivo de línea, identificador de dirección) que identifica de forma única una dirección en el nivel de TAPI usa los mismos valores para identificar lo mismo en el nivel de TSPI.

Para mayor comodidad, también se proporciona una función de escape más especializada. Es similar a [**TSPI \_ lineDevSpecific**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecific), pero coloca la interpretación en algunos de los parámetros. La [**función \_ LineDevSpecificFeature de TSPI**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) y los mensajes de [**línea \_ DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) y [**\_ CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) de línea asociados permiten que TAPI eMule las pulsaciones de botón en el teléfono de la línea. Como los teléfonos de características y los significados de sus botones son específicos del proveedor, la invocación de características con **TSPI \_ lineDevSpecificFeature** también es específica del proveedor.

En Resumen, la función [**TSPI \_ lineDevSpecificFeature**](/windows/win32/api/tspi/nf-tspi-tspi_linedevspecificfeature) es una función de escape específica del dispositivo para permitir el envío de características de conmutador al conmutador. El mensaje [**line \_ CALLDEVSPECIFICFEATURE**](line-calldevspecificfeature.md) es un mensaje específico del dispositivo que se envía a la devolución de llamada de la aplicación como una indicación de las características relacionadas con la llamada enviadas al conmutador. [**Línea \_ de DEVSPECIFICFEATURE**](/previous-versions/windows/desktop/legacy/ms725227(v=vs.85)) es un mensaje específico del dispositivo que se envía a la devolución de llamada de la aplicación como una indicación de las características relacionadas con la línea enviadas al conmutador.

No hay ningún registro central para los identificadores de fabricante. En su lugar, se pone a disposición de un generador de identificador único llamado Extidgen.exe como parte de TSPI. El proveedor que diseña un conjunto de extensiones específicas del dispositivo utiliza esta utilidad para obtener un identificador único para las extensiones.

 

 
